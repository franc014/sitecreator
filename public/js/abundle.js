(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
'use strict'
var JQuery = require('jquery');
var angular = require('./../vendor/angular/angular-index.js');
var angular_restmod = require('./../vendor/angular-restmod/dist/angular-restmod-bundle.js');
var res_style = require('./../vendor/angular-restmod/dist/styles/ams.min.js');
var stc_messages = require('./config/messages.js');


var ngFabForm = require('./../vendor/ng-fab-form/dist/ng-fab-form.min.js');
var ngMessages = require('./../vendor/angular-messages/angular-messages.min.js');

var textAngular = require('./../vendor/textAngular/dist/textAngular-rangy.min.js');
var sanitize = require('./../vendor/textAngular/dist/textAngular-sanitize.min.js');
var rangy = require('./../vendor/textAngular/dist/textAngular.min.js');

var uploadLibp1 = require('../vendor/angularjs-file-upload/angular-file-upload-shim.min.js');
var uploadLibp2 = require('../vendor/angularjs-file-upload/angular-file-upload.min.js');

var nganimate = require('./../vendor/angular_animate/angular-animate.min.js');


var prfXyzApp = angular.module('prfXyzApp',['restmod','ngFabForm','ngMessages','textAngular','angularFileUpload','ngAnimate']);

prfXyzApp.config(['restmodProvider','$httpProvider','ngFabFormProvider',function(restmodProvider, $httpProvider,ngFabFormProvider) {
    restmodProvider.rebase('AMSApi');
    $httpProvider.defaults.headers.common["X-Requested-With"] = "XMLHttpRequest";
    restmodProvider.rebase('DefaultPacker');

    ngFabFormProvider.extendConfig({
        validationsTemplate : '../../js/admin/angular/templates/customValidationTemplate.html'
        /*,setFormDirtyOnSubmit: true*/
    });

    $httpProvider.interceptors.push(function($q,$rootScope,$timeout) {
        return {
            'request': function(config) {
                $rootScope.showSystemAlert = false;
                $rootScope.showSpinner = true;
                return config;
            },

            'response': function(response) {
                $rootScope.showSpinner = false;
                return response;
            },
            'requestError':function(rejection){
                console.log(rejection);
                return $q.reject(rejection);
            },
            'responseError':function(rejection){

                var status = rejection.status;
                switch (status){
                    case 401:
                        $rootScope.showSpinner = false;
                        $rootScope.showSystemAlert = true;
                        $rootScope.systemAlert = "Ha caducado tu sesión. Debes ingresar nuevamente!";
                        $timeout(function(){
                            location.href = "/auth/logout";
                        },4000);
                        break;
                    case 500:
                        $rootScope.showSpinner = false;
                        $timeout(function(){
                            $rootScope.showSystemAlert = false;
                        },3000);
                        $rootScope.showSystemAlert = true;
                        $rootScope.systemAlert = "Vaya! :( Hubo un problema en la respuesta del servidor. <br>" +
                        "Por favor intenta la acción nuevamente o contacta al Administrador";
                        break;
                    case 404:
                        $rootScope.showSpinner = false;
                        $timeout(function(){
                            $rootScope.showSystemAlert = false;
                        },3000);
                        $rootScope.showSystemAlert = true;
                        $rootScope.systemAlert = "Vaya! :( No se encontró el servicio que requieres. <br>" +
                        "Por favor intenta la acción nuevamente o contacta al Administrador";
                        break;
                    /*case 413:
                        //$rootScope.messageType = 'danger';
                        //$rootScope.fileTooLarge = true;
                        //$rootScope.fileTooLargeMessage = "Está intentando subir un archivo demasiado pesado. El archivo no debe superar los 5MB";
                        alert("Está intentando subir un archivo demasiado pesado. El archivo no debe superar los 5MB");
                        location.reload();
                        break;*/
                    default :
                        $rootScope.showSpinner = false;
                        $timeout(function(){
                            $rootScope.showSystemAlert = false;
                        },3000);
                        $rootScope.showSystemAlert = true;
                        $rootScope.systemAlert = "Se detectó un problema de conexión. <br>" +
                        "Por favor comprueba que estás conectada/o a una red. Si persisten los problemas, <br> por favor contacta al Administrador.";


                }
                return $q.reject(rejection);

            }
        };
    });

}]);

var homeController = require('./admin/angular/homecontroller');
var bioController = require('./admin/angular/biocontroller');
var userController = require('./admin/angular/usercontroller');
var configController = require('./admin/angular/configcontroller');
var saleableController = require('./admin/angular/saleablecontroller');
var saleableDetailController = require('./admin/angular/saleabledetailcontroller');
var saleableBasicController = require('./admin/angular/basicdetailcontroller');
var saleableAllDetailsController = require('./admin/angular/saleablealldetailscontroller');
var saleablePriceController = require('./admin/angular/saleablepricescontroller');
var resumeController = require('./admin/angular/resumecontroller');

var messageService = require('./admin/angular/services/messageservice');
var userService = require('./admin/angular/services/userservice');
var userContentTypeService = require('./admin/angular/services/usercontenttypeservice');
var profileService = require('./admin/angular/services/profileservice');
var saleableService = require('./admin/angular/services/saleableservice');
var bioService = require('./admin/angular/services/biographyservice');
var thePacker = require('./admin/angular/services/thepacker');
var saleableDetailService = require('./admin/angular/services/saleabledetails');
var saleablePriceService = require('./admin/angular/services/saleableprice');
var newPassword = require('./admin/angular/services/newpasswordservice');
var numberFormat = require('./admin/angular/services/formatfilterservice');
var fileProcessor = require('./admin/angular/services/fileprocessor');
var resumeService = require('./admin/angular/services/resumeservice');
var resumeHelper = require('./admin/angular/services/resumehelper');
var saleableHelper = require('./admin/angular/services/saleablehelper');
var experienceService = require('./admin/angular/services/experience');
var helpersService = require('./admin/angular/services/helpers');
var educationService = require('./admin/angular/services/education');
var skillService = require('./admin/angular/services/skill');
var languageService = require('./admin/angular/services/language');
var interestService = require('./admin/angular/services/interest');
var categoryService = require('./admin/angular/services/category');


var alertDirective = require('./admin/angular/directives/alertdirective');
var closeContentDirective = require('./admin/angular/directives/closecontentdirective');
var contentSelectorDirective = require('./admin/angular/directives/contentselector');
var prodileMenuDirective = require('./admin/angular/directives/profilemenu');
var configMenuDirective = require('./admin/angular/directives/configmenu');
var categoryDirective = require('./admin/angular/directives/configuration/category');

var resumeSelectorDirective = require('./admin/angular/directives/resume/resumeselector');
var resumeDirective = require('./admin/angular/directives/resume/resumedirective');
var resumeEditForm = require('./admin/angular/directives/resume/resumeeditform');
var resumeForm = require('./admin/angular/directives/resume/resumeform');
var resumeExperience = require('./admin/angular/directives/resume/experience');
var resumeSections = require('./admin/angular/directives/resume/sections');
var resumeEducation = require('./admin/angular/directives/resume/education');
var resumeSkill = require('./admin/angular/directives/resume/skill');
var resumeLanguage = require('./admin/angular/directives/resume/language');
var resumeInterest = require('./admin/angular/directives/resume/interest');
var bioDirective = require('./admin/angular/directives/biographies/biography');
var resumeList = require('./admin/angular/directives/resume/resumelist');

var saleableDetails = require('./admin/angular/directives/saleabledetails');
var saleableBasic = require('./admin/angular/directives/saleablebasic');
var saleableDetailsList = require('./admin/angular/directives/saleabledetailslist');
var saleablePricesList = require('./admin/angular/directives/saleablepriceslist');
var halloEditor = require('./admin/angular/directives/hallodirective');


prfXyzApp.factory('Messages',[stc_messages]);
prfXyzApp.factory('MessageService',['Messages','$timeout',messageService]);
prfXyzApp.factory('UserService',['restmod',userService]);
prfXyzApp.factory('ProfileService',['restmod',profileService]);
prfXyzApp.factory('SaleableService',['restmod',saleableService]);
prfXyzApp.factory('SaleableDetailsService',['restmod',saleableDetailService]);
prfXyzApp.factory('SaleablePriceService',['restmod',saleablePriceService]);
prfXyzApp.factory('UserContentType',['restmod',userContentTypeService]);
prfXyzApp.factory('BiographyService',['restmod',bioService]);
prfXyzApp.factory('ThePacker',[thePacker]);
prfXyzApp.factory('NewPassword',['$http',newPassword]);
prfXyzApp.factory('NumberFormatFilter',[numberFormat]);
prfXyzApp.factory('FileProcessor',['$upload','$http','MessageService',fileProcessor]);
prfXyzApp.factory('Resume',['restmod',resumeService]);
prfXyzApp.factory('Experience',['restmod',experienceService]);
prfXyzApp.factory('ResumeHelper',['$http','MessageService',resumeHelper]);
prfXyzApp.factory('SaleableHelper',['$http','MessageService',saleableHelper]);
prfXyzApp.factory('Helper',[helpersService]);
prfXyzApp.factory('Education',['restmod',educationService]);
prfXyzApp.factory('Skill',['restmod',skillService]);
prfXyzApp.factory('Language',['restmod',languageService]);
prfXyzApp.factory('Interest',['restmod',interestService]);
prfXyzApp.factory('Category',['restmod',categoryService]);

prfXyzApp.directive('alert',[alertDirective]);
prfXyzApp.directive('closeContent',[closeContentDirective]);
prfXyzApp.directive('contentSelector',['MessageService','UserContentType',contentSelectorDirective]);
prfXyzApp.directive('profileMenu',[prodileMenuDirective]);
prfXyzApp.directive('configMenu',[configMenuDirective]);
prfXyzApp.directive('saleableDetails',['$templateCache','$compile','$rootScope',saleableDetails]);
prfXyzApp.directive('saleableBasic',['SaleableService',saleableBasic]);
prfXyzApp.directive('saleableDetailsList',[saleableDetailsList]);
prfXyzApp.directive('saleablePricesList',[saleablePricesList]);
prfXyzApp.directive('hallo',[halloEditor]);
prfXyzApp.directive('resumeSelector',['MessageService',resumeSelectorDirective]);
prfXyzApp.directive('resume',['MessageService','Resume','$timeout','ResumeHelper',resumeDirective]);
prfXyzApp.directive('resumeEditForm',['MessageService','Resume','ResumeHelper','$timeout',resumeEditForm]);
prfXyzApp.directive('resumeForm',['MessageService','Resume','ResumeHelper','$timeout',resumeForm]);
prfXyzApp.directive('resumeExperience',['MessageService','Experience','$timeout','Helper',resumeExperience]);
prfXyzApp.directive('resumeSections',['Resume',resumeSections]);
prfXyzApp.directive('resumeEducation',['MessageService','Education','$timeout','Helper',resumeEducation]);
prfXyzApp.directive('resumeSkill',['MessageService','Skill','$timeout','Helper',resumeSkill]);
prfXyzApp.directive('resumeLanguage',['MessageService','Language','$timeout','Helper',resumeLanguage]);
prfXyzApp.directive('resumeInterest',['MessageService','Interest','$timeout','Helper',resumeInterest]);
prfXyzApp.directive('biography',['MessageService','BiographyService','$timeout','Helper','$http',bioDirective]);
prfXyzApp.directive('resumeList',['MessageService','Resume','$timeout','Helper',resumeList]);
prfXyzApp.directive('categoryManager',['MessageService','Category','$timeout','Helper',categoryDirective]);

prfXyzApp.controller('HomeCtrl',['$scope','UserService','UserContentType',homeController]);
prfXyzApp.controller('BioCtrl',['$scope','BiographyService','MessageService',bioController]);
prfXyzApp.controller('UserCtrl',['$scope','$timeout','UserService','ProfileService','MessageService','NewPassword',userController]);
prfXyzApp.controller('ConfigCtrl',['$scope','$timeout','MessageService','UserContentType',configController]);

prfXyzApp.controller('SaleableCtrl',['$scope','$rootScope','$timeout','SaleableService','MessageService','SaleableDetailsService',saleableController]);
prfXyzApp.controller('SaleableDetailCtrl',['$scope','$rootScope','SaleableService','MessageService','$element','$compile',saleableDetailController]);
prfXyzApp.controller('saleableBasicCtrl',['$scope','$rootScope','SaleableService','MessageService','SaleableHelper',saleableBasicController]);
prfXyzApp.controller('saleableAllDetailsCtrl',['$scope','$rootScope','SaleableDetailsService','MessageService','FileProcessor',saleableAllDetailsController]);
prfXyzApp.controller('saleablePriceCtrl',['$scope','$rootScope','SaleablePriceService','MessageService',saleablePriceController]);
prfXyzApp.controller('resumeCtrl',['$scope','$rootScope','ResumeHelper','MessageService',resumeController]);
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/adminapp.js","/resources/assets/js")

},{"../vendor/angularjs-file-upload/angular-file-upload-shim.min.js":70,"../vendor/angularjs-file-upload/angular-file-upload.min.js":71,"./../vendor/angular-messages/angular-messages.min.js":64,"./../vendor/angular-restmod/dist/angular-restmod-bundle.js":65,"./../vendor/angular-restmod/dist/styles/ams.min.js":66,"./../vendor/angular/angular-index.js":67,"./../vendor/angular_animate/angular-animate.min.js":69,"./../vendor/ng-fab-form/dist/ng-fab-form.min.js":72,"./../vendor/textAngular/dist/textAngular-rangy.min.js":73,"./../vendor/textAngular/dist/textAngular-sanitize.min.js":74,"./../vendor/textAngular/dist/textAngular.min.js":75,"./admin/angular/basicdetailcontroller":8,"./admin/angular/biocontroller":9,"./admin/angular/configcontroller":10,"./admin/angular/directives/alertdirective":11,"./admin/angular/directives/biographies/biography":12,"./admin/angular/directives/closecontentdirective":13,"./admin/angular/directives/configmenu":14,"./admin/angular/directives/configuration/category":15,"./admin/angular/directives/contentselector":16,"./admin/angular/directives/hallodirective":17,"./admin/angular/directives/profilemenu":18,"./admin/angular/directives/resume/education":19,"./admin/angular/directives/resume/experience":20,"./admin/angular/directives/resume/interest":21,"./admin/angular/directives/resume/language":22,"./admin/angular/directives/resume/resumedirective":23,"./admin/angular/directives/resume/resumeeditform":24,"./admin/angular/directives/resume/resumeform":25,"./admin/angular/directives/resume/resumelist":26,"./admin/angular/directives/resume/resumeselector":27,"./admin/angular/directives/resume/sections":28,"./admin/angular/directives/resume/skill":29,"./admin/angular/directives/saleablebasic":30,"./admin/angular/directives/saleabledetails":31,"./admin/angular/directives/saleabledetailslist":32,"./admin/angular/directives/saleablepriceslist":33,"./admin/angular/homecontroller":34,"./admin/angular/resumecontroller":35,"./admin/angular/saleablealldetailscontroller":36,"./admin/angular/saleablecontroller":37,"./admin/angular/saleabledetailcontroller":38,"./admin/angular/saleablepricescontroller":39,"./admin/angular/services/biographyservice":40,"./admin/angular/services/category":41,"./admin/angular/services/education":42,"./admin/angular/services/experience":43,"./admin/angular/services/fileprocessor":44,"./admin/angular/services/formatfilterservice":45,"./admin/angular/services/helpers":46,"./admin/angular/services/interest":47,"./admin/angular/services/language":48,"./admin/angular/services/messageservice":49,"./admin/angular/services/newpasswordservice":50,"./admin/angular/services/profileservice":51,"./admin/angular/services/resumehelper":52,"./admin/angular/services/resumeservice":53,"./admin/angular/services/saleabledetails":54,"./admin/angular/services/saleablehelper":55,"./admin/angular/services/saleableprice":56,"./admin/angular/services/saleableservice":57,"./admin/angular/services/skill":58,"./admin/angular/services/thepacker":59,"./admin/angular/services/usercontenttypeservice":60,"./admin/angular/services/userservice":61,"./admin/angular/usercontroller":62,"./config/messages.js":63,"_process":7,"buffer":3,"jquery":2}],2:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/*!
 * jQuery JavaScript Library v2.1.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-18T15:11Z
 */

(function( global, factory ) {

	if ( typeof module === "object" && typeof module.exports === "object" ) {
		// For CommonJS and CommonJS-like environments where a proper `window`
		// is present, execute the factory and get jQuery.
		// For environments that do not have a `window` with a `document`
		// (such as Node.js), expose a factory as module.exports.
		// This accentuates the need for the creation of a real `window`.
		// e.g. var jQuery = require("jquery")(window);
		// See ticket #14549 for more info.
		module.exports = global.document ?
			factory( global, true ) :
			function( w ) {
				if ( !w.document ) {
					throw new Error( "jQuery requires a window with a document" );
				}
				return factory( w );
			};
	} else {
		factory( global );
	}

// Pass this if window is not defined yet
}(typeof window !== "undefined" ? window : this, function( window, noGlobal ) {

// Support: Firefox 18+
// Can't be in strict mode, several libs including ASP.NET trace
// the stack via arguments.caller.callee and Firefox dies if
// you try to trace through "use strict" call chains. (#13335)
//

var arr = [];

var slice = arr.slice;

var concat = arr.concat;

var push = arr.push;

var indexOf = arr.indexOf;

var class2type = {};

var toString = class2type.toString;

var hasOwn = class2type.hasOwnProperty;

var support = {};



var
	// Use the correct document accordingly with window argument (sandbox)
	document = window.document,

	version = "2.1.3",

	// Define a local copy of jQuery
	jQuery = function( selector, context ) {
		// The jQuery object is actually just the init constructor 'enhanced'
		// Need init if jQuery is called (just allow error to be thrown if not included)
		return new jQuery.fn.init( selector, context );
	},

	// Support: Android<4.1
	// Make sure we trim BOM and NBSP
	rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,

	// Matches dashed string for camelizing
	rmsPrefix = /^-ms-/,
	rdashAlpha = /-([\da-z])/gi,

	// Used by jQuery.camelCase as callback to replace()
	fcamelCase = function( all, letter ) {
		return letter.toUpperCase();
	};

jQuery.fn = jQuery.prototype = {
	// The current version of jQuery being used
	jquery: version,

	constructor: jQuery,

	// Start with an empty selector
	selector: "",

	// The default length of a jQuery object is 0
	length: 0,

	toArray: function() {
		return slice.call( this );
	},

	// Get the Nth element in the matched element set OR
	// Get the whole matched element set as a clean array
	get: function( num ) {
		return num != null ?

			// Return just the one element from the set
			( num < 0 ? this[ num + this.length ] : this[ num ] ) :

			// Return all the elements in a clean array
			slice.call( this );
	},

	// Take an array of elements and push it onto the stack
	// (returning the new matched element set)
	pushStack: function( elems ) {

		// Build a new jQuery matched element set
		var ret = jQuery.merge( this.constructor(), elems );

		// Add the old object onto the stack (as a reference)
		ret.prevObject = this;
		ret.context = this.context;

		// Return the newly-formed element set
		return ret;
	},

	// Execute a callback for every element in the matched set.
	// (You can seed the arguments with an array of args, but this is
	// only used internally.)
	each: function( callback, args ) {
		return jQuery.each( this, callback, args );
	},

	map: function( callback ) {
		return this.pushStack( jQuery.map(this, function( elem, i ) {
			return callback.call( elem, i, elem );
		}));
	},

	slice: function() {
		return this.pushStack( slice.apply( this, arguments ) );
	},

	first: function() {
		return this.eq( 0 );
	},

	last: function() {
		return this.eq( -1 );
	},

	eq: function( i ) {
		var len = this.length,
			j = +i + ( i < 0 ? len : 0 );
		return this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );
	},

	end: function() {
		return this.prevObject || this.constructor(null);
	},

	// For internal use only.
	// Behaves like an Array's method, not like a jQuery method.
	push: push,
	sort: arr.sort,
	splice: arr.splice
};

jQuery.extend = jQuery.fn.extend = function() {
	var options, name, src, copy, copyIsArray, clone,
		target = arguments[0] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;

		// Skip the boolean and the target
		target = arguments[ i ] || {};
		i++;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !jQuery.isFunction(target) ) {
		target = {};
	}

	// Extend jQuery itself if only one argument is passed
	if ( i === length ) {
		target = this;
		i--;
	}

	for ( ; i < length; i++ ) {
		// Only deal with non-null/undefined values
		if ( (options = arguments[ i ]) != null ) {
			// Extend the base object
			for ( name in options ) {
				src = target[ name ];
				copy = options[ name ];

				// Prevent never-ending loop
				if ( target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {
					if ( copyIsArray ) {
						copyIsArray = false;
						clone = src && jQuery.isArray(src) ? src : [];

					} else {
						clone = src && jQuery.isPlainObject(src) ? src : {};
					}

					// Never move original objects, clone them
					target[ name ] = jQuery.extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

jQuery.extend({
	// Unique for each copy of jQuery on the page
	expando: "jQuery" + ( version + Math.random() ).replace( /\D/g, "" ),

	// Assume jQuery is ready without the ready module
	isReady: true,

	error: function( msg ) {
		throw new Error( msg );
	},

	noop: function() {},

	isFunction: function( obj ) {
		return jQuery.type(obj) === "function";
	},

	isArray: Array.isArray,

	isWindow: function( obj ) {
		return obj != null && obj === obj.window;
	},

	isNumeric: function( obj ) {
		// parseFloat NaNs numeric-cast false positives (null|true|false|"")
		// ...but misinterprets leading-number strings, particularly hex literals ("0x...")
		// subtraction forces infinities to NaN
		// adding 1 corrects loss of precision from parseFloat (#15100)
		return !jQuery.isArray( obj ) && (obj - parseFloat( obj ) + 1) >= 0;
	},

	isPlainObject: function( obj ) {
		// Not plain objects:
		// - Any object or value whose internal [[Class]] property is not "[object Object]"
		// - DOM nodes
		// - window
		if ( jQuery.type( obj ) !== "object" || obj.nodeType || jQuery.isWindow( obj ) ) {
			return false;
		}

		if ( obj.constructor &&
				!hasOwn.call( obj.constructor.prototype, "isPrototypeOf" ) ) {
			return false;
		}

		// If the function hasn't returned already, we're confident that
		// |obj| is a plain object, created by {} or constructed with new Object
		return true;
	},

	isEmptyObject: function( obj ) {
		var name;
		for ( name in obj ) {
			return false;
		}
		return true;
	},

	type: function( obj ) {
		if ( obj == null ) {
			return obj + "";
		}
		// Support: Android<4.0, iOS<6 (functionish RegExp)
		return typeof obj === "object" || typeof obj === "function" ?
			class2type[ toString.call(obj) ] || "object" :
			typeof obj;
	},

	// Evaluates a script in a global context
	globalEval: function( code ) {
		var script,
			indirect = eval;

		code = jQuery.trim( code );

		if ( code ) {
			// If the code includes a valid, prologue position
			// strict mode pragma, execute code by injecting a
			// script tag into the document.
			if ( code.indexOf("use strict") === 1 ) {
				script = document.createElement("script");
				script.text = code;
				document.head.appendChild( script ).parentNode.removeChild( script );
			} else {
			// Otherwise, avoid the DOM node creation, insertion
			// and removal by using an indirect global eval
				indirect( code );
			}
		}
	},

	// Convert dashed to camelCase; used by the css and data modules
	// Support: IE9-11+
	// Microsoft forgot to hump their vendor prefix (#9572)
	camelCase: function( string ) {
		return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
	},

	nodeName: function( elem, name ) {
		return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
	},

	// args is for internal usage only
	each: function( obj, callback, args ) {
		var value,
			i = 0,
			length = obj.length,
			isArray = isArraylike( obj );

		if ( args ) {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			}

		// A special, fast, case for the most common use of each
		} else {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			}
		}

		return obj;
	},

	// Support: Android<4.1
	trim: function( text ) {
		return text == null ?
			"" :
			( text + "" ).replace( rtrim, "" );
	},

	// results is for internal usage only
	makeArray: function( arr, results ) {
		var ret = results || [];

		if ( arr != null ) {
			if ( isArraylike( Object(arr) ) ) {
				jQuery.merge( ret,
					typeof arr === "string" ?
					[ arr ] : arr
				);
			} else {
				push.call( ret, arr );
			}
		}

		return ret;
	},

	inArray: function( elem, arr, i ) {
		return arr == null ? -1 : indexOf.call( arr, elem, i );
	},

	merge: function( first, second ) {
		var len = +second.length,
			j = 0,
			i = first.length;

		for ( ; j < len; j++ ) {
			first[ i++ ] = second[ j ];
		}

		first.length = i;

		return first;
	},

	grep: function( elems, callback, invert ) {
		var callbackInverse,
			matches = [],
			i = 0,
			length = elems.length,
			callbackExpect = !invert;

		// Go through the array, only saving the items
		// that pass the validator function
		for ( ; i < length; i++ ) {
			callbackInverse = !callback( elems[ i ], i );
			if ( callbackInverse !== callbackExpect ) {
				matches.push( elems[ i ] );
			}
		}

		return matches;
	},

	// arg is for internal usage only
	map: function( elems, callback, arg ) {
		var value,
			i = 0,
			length = elems.length,
			isArray = isArraylike( elems ),
			ret = [];

		// Go through the array, translating each of the items to their new values
		if ( isArray ) {
			for ( ; i < length; i++ ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}

		// Go through every key on the object,
		} else {
			for ( i in elems ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}
		}

		// Flatten any nested arrays
		return concat.apply( [], ret );
	},

	// A global GUID counter for objects
	guid: 1,

	// Bind a function to a context, optionally partially applying any
	// arguments.
	proxy: function( fn, context ) {
		var tmp, args, proxy;

		if ( typeof context === "string" ) {
			tmp = fn[ context ];
			context = fn;
			fn = tmp;
		}

		// Quick check to determine if target is callable, in the spec
		// this throws a TypeError, but we will just return undefined.
		if ( !jQuery.isFunction( fn ) ) {
			return undefined;
		}

		// Simulated bind
		args = slice.call( arguments, 2 );
		proxy = function() {
			return fn.apply( context || this, args.concat( slice.call( arguments ) ) );
		};

		// Set the guid of unique handler to the same of original handler, so it can be removed
		proxy.guid = fn.guid = fn.guid || jQuery.guid++;

		return proxy;
	},

	now: Date.now,

	// jQuery.support is not used in Core but other projects attach their
	// properties to it so it needs to exist.
	support: support
});

// Populate the class2type map
jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
	class2type[ "[object " + name + "]" ] = name.toLowerCase();
});

function isArraylike( obj ) {
	var length = obj.length,
		type = jQuery.type( obj );

	if ( type === "function" || jQuery.isWindow( obj ) ) {
		return false;
	}

	if ( obj.nodeType === 1 && length ) {
		return true;
	}

	return type === "array" || length === 0 ||
		typeof length === "number" && length > 0 && ( length - 1 ) in obj;
}
var Sizzle =
/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
(function( window ) {

var i,
	support,
	Expr,
	getText,
	isXML,
	tokenize,
	compile,
	select,
	outermostContext,
	sortInput,
	hasDuplicate,

	// Local document vars
	setDocument,
	document,
	docElem,
	documentIsHTML,
	rbuggyQSA,
	rbuggyMatches,
	matches,
	contains,

	// Instance-specific data
	expando = "sizzle" + 1 * new Date(),
	preferredDoc = window.document,
	dirruns = 0,
	done = 0,
	classCache = createCache(),
	tokenCache = createCache(),
	compilerCache = createCache(),
	sortOrder = function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
		}
		return 0;
	},

	// General-purpose constants
	MAX_NEGATIVE = 1 << 31,

	// Instance methods
	hasOwn = ({}).hasOwnProperty,
	arr = [],
	pop = arr.pop,
	push_native = arr.push,
	push = arr.push,
	slice = arr.slice,
	// Use a stripped-down indexOf as it's faster than native
	// http://jsperf.com/thor-indexof-vs-for/5
	indexOf = function( list, elem ) {
		var i = 0,
			len = list.length;
		for ( ; i < len; i++ ) {
			if ( list[i] === elem ) {
				return i;
			}
		}
		return -1;
	},

	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",

	// Regular expressions

	// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace
	whitespace = "[\\x20\\t\\r\\n\\f]",
	// http://www.w3.org/TR/css3-syntax/#characters
	characterEncoding = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",

	// Loosely modeled on CSS identifier characters
	// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors
	// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
	identifier = characterEncoding.replace( "w", "w#" ),

	// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors
	attributes = "\\[" + whitespace + "*(" + characterEncoding + ")(?:" + whitespace +
		// Operator (capture 2)
		"*([*^$|!~]?=)" + whitespace +
		// "Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]"
		"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace +
		"*\\]",

	pseudos = ":(" + characterEncoding + ")(?:\\((" +
		// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
		// 1. quoted (capture 3; capture 4 or capture 5)
		"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" +
		// 2. simple (capture 6)
		"((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" +
		// 3. anything else (capture 2)
		".*" +
		")\\)|)",

	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
	rwhitespace = new RegExp( whitespace + "+", "g" ),
	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),

	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),

	rattributeQuotes = new RegExp( "=" + whitespace + "*([^\\]'\"]*?)" + whitespace + "*\\]", "g" ),

	rpseudo = new RegExp( pseudos ),
	ridentifier = new RegExp( "^" + identifier + "$" ),

	matchExpr = {
		"ID": new RegExp( "^#(" + characterEncoding + ")" ),
		"CLASS": new RegExp( "^\\.(" + characterEncoding + ")" ),
		"TAG": new RegExp( "^(" + characterEncoding.replace( "w", "w*" ) + ")" ),
		"ATTR": new RegExp( "^" + attributes ),
		"PSEUDO": new RegExp( "^" + pseudos ),
		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
			"*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
			"*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
		// For use in libraries implementing .is()
		// We use this for POS matching in `select`
		"needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
			whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	},

	rinputs = /^(?:input|select|textarea|button)$/i,
	rheader = /^h\d$/i,

	rnative = /^[^{]+\{\s*\[native \w/,

	// Easily-parseable/retrievable ID or TAG or CLASS selectors
	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

	rsibling = /[+~]/,
	rescape = /'|\\/g,

	// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
	runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
	funescape = function( _, escaped, escapedWhitespace ) {
		var high = "0x" + escaped - 0x10000;
		// NaN means non-codepoint
		// Support: Firefox<24
		// Workaround erroneous numeric interpretation of +"0x"
		return high !== high || escapedWhitespace ?
			escaped :
			high < 0 ?
				// BMP codepoint
				String.fromCharCode( high + 0x10000 ) :
				// Supplemental Plane codepoint (surrogate pair)
				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	},

	// Used for iframes
	// See setDocument()
	// Removing the function wrapper causes a "Permission Denied"
	// error in IE
	unloadHandler = function() {
		setDocument();
	};

// Optimize for push.apply( _, NodeList )
try {
	push.apply(
		(arr = slice.call( preferredDoc.childNodes )),
		preferredDoc.childNodes
	);
	// Support: Android<4.0
	// Detect silently failing push.apply
	arr[ preferredDoc.childNodes.length ].nodeType;
} catch ( e ) {
	push = { apply: arr.length ?

		// Leverage slice if possible
		function( target, els ) {
			push_native.apply( target, slice.call(els) );
		} :

		// Support: IE<9
		// Otherwise append directly
		function( target, els ) {
			var j = target.length,
				i = 0;
			// Can't trust NodeList.length
			while ( (target[j++] = els[i++]) ) {}
			target.length = j - 1;
		}
	};
}

function Sizzle( selector, context, results, seed ) {
	var match, elem, m, nodeType,
		// QSA vars
		i, groups, old, nid, newContext, newSelector;

	if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
		setDocument( context );
	}

	context = context || document;
	results = results || [];
	nodeType = context.nodeType;

	if ( typeof selector !== "string" || !selector ||
		nodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {

		return results;
	}

	if ( !seed && documentIsHTML ) {

		// Try to shortcut find operations when possible (e.g., not under DocumentFragment)
		if ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {
			// Speed-up: Sizzle("#ID")
			if ( (m = match[1]) ) {
				if ( nodeType === 9 ) {
					elem = context.getElementById( m );
					// Check parentNode to catch when Blackberry 4.6 returns
					// nodes that are no longer in the document (jQuery #6963)
					if ( elem && elem.parentNode ) {
						// Handle the case where IE, Opera, and Webkit return items
						// by name instead of ID
						if ( elem.id === m ) {
							results.push( elem );
							return results;
						}
					} else {
						return results;
					}
				} else {
					// Context is not a document
					if ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&
						contains( context, elem ) && elem.id === m ) {
						results.push( elem );
						return results;
					}
				}

			// Speed-up: Sizzle("TAG")
			} else if ( match[2] ) {
				push.apply( results, context.getElementsByTagName( selector ) );
				return results;

			// Speed-up: Sizzle(".CLASS")
			} else if ( (m = match[3]) && support.getElementsByClassName ) {
				push.apply( results, context.getElementsByClassName( m ) );
				return results;
			}
		}

		// QSA path
		if ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {
			nid = old = expando;
			newContext = context;
			newSelector = nodeType !== 1 && selector;

			// qSA works strangely on Element-rooted queries
			// We can work around this by specifying an extra ID on the root
			// and working up from there (Thanks to Andrew Dupont for the technique)
			// IE 8 doesn't work on object elements
			if ( nodeType === 1 && context.nodeName.toLowerCase() !== "object" ) {
				groups = tokenize( selector );

				if ( (old = context.getAttribute("id")) ) {
					nid = old.replace( rescape, "\\$&" );
				} else {
					context.setAttribute( "id", nid );
				}
				nid = "[id='" + nid + "'] ";

				i = groups.length;
				while ( i-- ) {
					groups[i] = nid + toSelector( groups[i] );
				}
				newContext = rsibling.test( selector ) && testContext( context.parentNode ) || context;
				newSelector = groups.join(",");
			}

			if ( newSelector ) {
				try {
					push.apply( results,
						newContext.querySelectorAll( newSelector )
					);
					return results;
				} catch(qsaError) {
				} finally {
					if ( !old ) {
						context.removeAttribute("id");
					}
				}
			}
		}
	}

	// All others
	return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * Create key-value caches of limited size
 * @returns {Function(string, Object)} Returns the Object data after storing it on itself with
 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *	deleting the oldest entry
 */
function createCache() {
	var keys = [];

	function cache( key, value ) {
		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
		if ( keys.push( key + " " ) > Expr.cacheLength ) {
			// Only keep the most recent entries
			delete cache[ keys.shift() ];
		}
		return (cache[ key + " " ] = value);
	}
	return cache;
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
	fn[ expando ] = true;
	return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created div and expects a boolean result
 */
function assert( fn ) {
	var div = document.createElement("div");

	try {
		return !!fn( div );
	} catch (e) {
		return false;
	} finally {
		// Remove from its parent by default
		if ( div.parentNode ) {
			div.parentNode.removeChild( div );
		}
		// release memory in IE
		div = null;
	}
}

/**
 * Adds the same handler for all of the specified attrs
 * @param {String} attrs Pipe-separated list of attributes
 * @param {Function} handler The method that will be applied
 */
function addHandle( attrs, handler ) {
	var arr = attrs.split("|"),
		i = attrs.length;

	while ( i-- ) {
		Expr.attrHandle[ arr[i] ] = handler;
	}
}

/**
 * Checks document order of two siblings
 * @param {Element} a
 * @param {Element} b
 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
 */
function siblingCheck( a, b ) {
	var cur = b && a,
		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
			( ~b.sourceIndex || MAX_NEGATIVE ) -
			( ~a.sourceIndex || MAX_NEGATIVE );

	// Use IE sourceIndex if available on both nodes
	if ( diff ) {
		return diff;
	}

	// Check if b follows a
	if ( cur ) {
		while ( (cur = cur.nextSibling) ) {
			if ( cur === b ) {
				return -1;
			}
		}
	}

	return a ? 1 : -1;
}

/**
 * Returns a function to use in pseudos for input types
 * @param {String} type
 */
function createInputPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return name === "input" && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for buttons
 * @param {String} type
 */
function createButtonPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return (name === "input" || name === "button") && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for positionals
 * @param {Function} fn
 */
function createPositionalPseudo( fn ) {
	return markFunction(function( argument ) {
		argument = +argument;
		return markFunction(function( seed, matches ) {
			var j,
				matchIndexes = fn( [], seed.length, argument ),
				i = matchIndexes.length;

			// Match elements found at the specified indexes
			while ( i-- ) {
				if ( seed[ (j = matchIndexes[i]) ] ) {
					seed[j] = !(matches[j] = seed[j]);
				}
			}
		});
	});
}

/**
 * Checks a node for validity as a Sizzle context
 * @param {Element|Object=} context
 * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
 */
function testContext( context ) {
	return context && typeof context.getElementsByTagName !== "undefined" && context;
}

// Expose support vars for convenience
support = Sizzle.support = {};

/**
 * Detects XML nodes
 * @param {Element|Object} elem An element or a document
 * @returns {Boolean} True iff elem is a non-HTML XML node
 */
isXML = Sizzle.isXML = function( elem ) {
	// documentElement is verified for cases where it doesn't yet exist
	// (such as loading iframes in IE - #4833)
	var documentElement = elem && (elem.ownerDocument || elem).documentElement;
	return documentElement ? documentElement.nodeName !== "HTML" : false;
};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
	var hasCompare, parent,
		doc = node ? node.ownerDocument || node : preferredDoc;

	// If no document and documentElement is available, return
	if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
		return document;
	}

	// Set our document
	document = doc;
	docElem = doc.documentElement;
	parent = doc.defaultView;

	// Support: IE>8
	// If iframe document is assigned to "document" variable and if iframe has been reloaded,
	// IE will throw "permission denied" error when accessing "document" variable, see jQuery #13936
	// IE6-8 do not support the defaultView property so parent will be undefined
	if ( parent && parent !== parent.top ) {
		// IE11 does not have attachEvent, so all must suffer
		if ( parent.addEventListener ) {
			parent.addEventListener( "unload", unloadHandler, false );
		} else if ( parent.attachEvent ) {
			parent.attachEvent( "onunload", unloadHandler );
		}
	}

	/* Support tests
	---------------------------------------------------------------------- */
	documentIsHTML = !isXML( doc );

	/* Attributes
	---------------------------------------------------------------------- */

	// Support: IE<8
	// Verify that getAttribute really returns attributes and not properties
	// (excepting IE8 booleans)
	support.attributes = assert(function( div ) {
		div.className = "i";
		return !div.getAttribute("className");
	});

	/* getElement(s)By*
	---------------------------------------------------------------------- */

	// Check if getElementsByTagName("*") returns only elements
	support.getElementsByTagName = assert(function( div ) {
		div.appendChild( doc.createComment("") );
		return !div.getElementsByTagName("*").length;
	});

	// Support: IE<9
	support.getElementsByClassName = rnative.test( doc.getElementsByClassName );

	// Support: IE<10
	// Check if getElementById returns elements by name
	// The broken getElementById methods don't pick up programatically-set names,
	// so use a roundabout getElementsByName test
	support.getById = assert(function( div ) {
		docElem.appendChild( div ).id = expando;
		return !doc.getElementsByName || !doc.getElementsByName( expando ).length;
	});

	// ID find and filter
	if ( support.getById ) {
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var m = context.getElementById( id );
				// Check parentNode to catch when Blackberry 4.6 returns
				// nodes that are no longer in the document #6963
				return m && m.parentNode ? [ m ] : [];
			}
		};
		Expr.filter["ID"] = function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				return elem.getAttribute("id") === attrId;
			};
		};
	} else {
		// Support: IE6/7
		// getElementById is not reliable as a find shortcut
		delete Expr.find["ID"];

		Expr.filter["ID"] =  function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				var node = typeof elem.getAttributeNode !== "undefined" && elem.getAttributeNode("id");
				return node && node.value === attrId;
			};
		};
	}

	// Tag
	Expr.find["TAG"] = support.getElementsByTagName ?
		function( tag, context ) {
			if ( typeof context.getElementsByTagName !== "undefined" ) {
				return context.getElementsByTagName( tag );

			// DocumentFragment nodes don't have gEBTN
			} else if ( support.qsa ) {
				return context.querySelectorAll( tag );
			}
		} :

		function( tag, context ) {
			var elem,
				tmp = [],
				i = 0,
				// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too
				results = context.getElementsByTagName( tag );

			// Filter out possible comments
			if ( tag === "*" ) {
				while ( (elem = results[i++]) ) {
					if ( elem.nodeType === 1 ) {
						tmp.push( elem );
					}
				}

				return tmp;
			}
			return results;
		};

	// Class
	Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
		if ( documentIsHTML ) {
			return context.getElementsByClassName( className );
		}
	};

	/* QSA/matchesSelector
	---------------------------------------------------------------------- */

	// QSA and matchesSelector support

	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
	rbuggyMatches = [];

	// qSa(:focus) reports false when true (Chrome 21)
	// We allow this because of a bug in IE8/9 that throws an error
	// whenever `document.activeElement` is accessed on an iframe
	// So, we allow :focus to pass through QSA all the time to avoid the IE error
	// See http://bugs.jquery.com/ticket/13378
	rbuggyQSA = [];

	if ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {
		// Build QSA regex
		// Regex strategy adopted from Diego Perini
		assert(function( div ) {
			// Select is set to empty string on purpose
			// This is to test IE's treatment of not explicitly
			// setting a boolean content attribute,
			// since its presence should be enough
			// http://bugs.jquery.com/ticket/12359
			docElem.appendChild( div ).innerHTML = "<a id='" + expando + "'></a>" +
				"<select id='" + expando + "-\f]' msallowcapture=''>" +
				"<option selected=''></option></select>";

			// Support: IE8, Opera 11-12.16
			// Nothing should be selected when empty strings follow ^= or $= or *=
			// The test attribute must be unknown in Opera but "safe" for WinRT
			// http://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section
			if ( div.querySelectorAll("[msallowcapture^='']").length ) {
				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
			}

			// Support: IE8
			// Boolean attributes and "value" are not treated correctly
			if ( !div.querySelectorAll("[selected]").length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
			}

			// Support: Chrome<29, Android<4.2+, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.7+
			if ( !div.querySelectorAll( "[id~=" + expando + "-]" ).length ) {
				rbuggyQSA.push("~=");
			}

			// Webkit/Opera - :checked should return selected option elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":checked").length ) {
				rbuggyQSA.push(":checked");
			}

			// Support: Safari 8+, iOS 8+
			// https://bugs.webkit.org/show_bug.cgi?id=136851
			// In-page `selector#id sibing-combinator selector` fails
			if ( !div.querySelectorAll( "a#" + expando + "+*" ).length ) {
				rbuggyQSA.push(".#.+[+~]");
			}
		});

		assert(function( div ) {
			// Support: Windows 8 Native Apps
			// The type and name attributes are restricted during .innerHTML assignment
			var input = doc.createElement("input");
			input.setAttribute( "type", "hidden" );
			div.appendChild( input ).setAttribute( "name", "D" );

			// Support: IE8
			// Enforce case-sensitivity of name attribute
			if ( div.querySelectorAll("[name=d]").length ) {
				rbuggyQSA.push( "name" + whitespace + "*[*^$|!~]?=" );
			}

			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":enabled").length ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Opera 10-11 does not throw on post-comma invalid pseudos
			div.querySelectorAll("*,:x");
			rbuggyQSA.push(",.*:");
		});
	}

	if ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||
		docElem.webkitMatchesSelector ||
		docElem.mozMatchesSelector ||
		docElem.oMatchesSelector ||
		docElem.msMatchesSelector) )) ) {

		assert(function( div ) {
			// Check to see if it's possible to do matchesSelector
			// on a disconnected node (IE 9)
			support.disconnectedMatch = matches.call( div, "div" );

			// This should fail with an exception
			// Gecko does not error, returns false instead
			matches.call( div, "[s!='']:x" );
			rbuggyMatches.push( "!=", pseudos );
		});
	}

	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );

	/* Contains
	---------------------------------------------------------------------- */
	hasCompare = rnative.test( docElem.compareDocumentPosition );

	// Element contains another
	// Purposefully does not implement inclusive descendent
	// As in, an element does not contain itself
	contains = hasCompare || rnative.test( docElem.contains ) ?
		function( a, b ) {
			var adown = a.nodeType === 9 ? a.documentElement : a,
				bup = b && b.parentNode;
			return a === bup || !!( bup && bup.nodeType === 1 && (
				adown.contains ?
					adown.contains( bup ) :
					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
			));
		} :
		function( a, b ) {
			if ( b ) {
				while ( (b = b.parentNode) ) {
					if ( b === a ) {
						return true;
					}
				}
			}
			return false;
		};

	/* Sorting
	---------------------------------------------------------------------- */

	// Document order sorting
	sortOrder = hasCompare ?
	function( a, b ) {

		// Flag for duplicate removal
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		// Sort on method existence if only one input has compareDocumentPosition
		var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
		if ( compare ) {
			return compare;
		}

		// Calculate position if both inputs belong to the same document
		compare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?
			a.compareDocumentPosition( b ) :

			// Otherwise we know they are disconnected
			1;

		// Disconnected nodes
		if ( compare & 1 ||
			(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {

			// Choose the first element that is related to our preferred document
			if ( a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {
				return -1;
			}
			if ( b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {
				return 1;
			}

			// Maintain original order
			return sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;
		}

		return compare & 4 ? -1 : 1;
	} :
	function( a, b ) {
		// Exit early if the nodes are identical
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		var cur,
			i = 0,
			aup = a.parentNode,
			bup = b.parentNode,
			ap = [ a ],
			bp = [ b ];

		// Parentless nodes are either documents or disconnected
		if ( !aup || !bup ) {
			return a === doc ? -1 :
				b === doc ? 1 :
				aup ? -1 :
				bup ? 1 :
				sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;

		// If the nodes are siblings, we can do a quick check
		} else if ( aup === bup ) {
			return siblingCheck( a, b );
		}

		// Otherwise we need full lists of their ancestors for comparison
		cur = a;
		while ( (cur = cur.parentNode) ) {
			ap.unshift( cur );
		}
		cur = b;
		while ( (cur = cur.parentNode) ) {
			bp.unshift( cur );
		}

		// Walk down the tree looking for a discrepancy
		while ( ap[i] === bp[i] ) {
			i++;
		}

		return i ?
			// Do a sibling check if the nodes have a common ancestor
			siblingCheck( ap[i], bp[i] ) :

			// Otherwise nodes in our document sort first
			ap[i] === preferredDoc ? -1 :
			bp[i] === preferredDoc ? 1 :
			0;
	};

	return doc;
};

Sizzle.matches = function( expr, elements ) {
	return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	// Make sure that attribute selectors are quoted
	expr = expr.replace( rattributeQuotes, "='$1']" );

	if ( support.matchesSelector && documentIsHTML &&
		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {

		try {
			var ret = matches.call( elem, expr );

			// IE 9's matchesSelector returns false on disconnected nodes
			if ( ret || support.disconnectedMatch ||
					// As well, disconnected nodes are said to be in a document
					// fragment in IE 9
					elem.document && elem.document.nodeType !== 11 ) {
				return ret;
			}
		} catch (e) {}
	}

	return Sizzle( expr, document, null, [ elem ] ).length > 0;
};

Sizzle.contains = function( context, elem ) {
	// Set document vars if needed
	if ( ( context.ownerDocument || context ) !== document ) {
		setDocument( context );
	}
	return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	var fn = Expr.attrHandle[ name.toLowerCase() ],
		// Don't get fooled by Object.prototype properties (jQuery #13807)
		val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
			fn( elem, name, !documentIsHTML ) :
			undefined;

	return val !== undefined ?
		val :
		support.attributes || !documentIsHTML ?
			elem.getAttribute( name ) :
			(val = elem.getAttributeNode(name)) && val.specified ?
				val.value :
				null;
};

Sizzle.error = function( msg ) {
	throw new Error( "Syntax error, unrecognized expression: " + msg );
};

/**
 * Document sorting and removing duplicates
 * @param {ArrayLike} results
 */
Sizzle.uniqueSort = function( results ) {
	var elem,
		duplicates = [],
		j = 0,
		i = 0;

	// Unless we *know* we can detect duplicates, assume their presence
	hasDuplicate = !support.detectDuplicates;
	sortInput = !support.sortStable && results.slice( 0 );
	results.sort( sortOrder );

	if ( hasDuplicate ) {
		while ( (elem = results[i++]) ) {
			if ( elem === results[ i ] ) {
				j = duplicates.push( i );
			}
		}
		while ( j-- ) {
			results.splice( duplicates[ j ], 1 );
		}
	}

	// Clear input after sorting to release objects
	// See https://github.com/jquery/sizzle/pull/225
	sortInput = null;

	return results;
};

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
	var node,
		ret = "",
		i = 0,
		nodeType = elem.nodeType;

	if ( !nodeType ) {
		// If no nodeType, this is expected to be an array
		while ( (node = elem[i++]) ) {
			// Do not traverse comment nodes
			ret += getText( node );
		}
	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
		// Use textContent for elements
		// innerText usage removed for consistency of new lines (jQuery #11153)
		if ( typeof elem.textContent === "string" ) {
			return elem.textContent;
		} else {
			// Traverse its children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				ret += getText( elem );
			}
		}
	} else if ( nodeType === 3 || nodeType === 4 ) {
		return elem.nodeValue;
	}
	// Do not include comment or processing instruction nodes

	return ret;
};

Expr = Sizzle.selectors = {

	// Can be adjusted by the user
	cacheLength: 50,

	createPseudo: markFunction,

	match: matchExpr,

	attrHandle: {},

	find: {},

	relative: {
		">": { dir: "parentNode", first: true },
		" ": { dir: "parentNode" },
		"+": { dir: "previousSibling", first: true },
		"~": { dir: "previousSibling" }
	},

	preFilter: {
		"ATTR": function( match ) {
			match[1] = match[1].replace( runescape, funescape );

			// Move the given value to match[3] whether quoted or unquoted
			match[3] = ( match[3] || match[4] || match[5] || "" ).replace( runescape, funescape );

			if ( match[2] === "~=" ) {
				match[3] = " " + match[3] + " ";
			}

			return match.slice( 0, 4 );
		},

		"CHILD": function( match ) {
			/* matches from matchExpr["CHILD"]
				1 type (only|nth|...)
				2 what (child|of-type)
				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
				4 xn-component of xn+y argument ([+-]?\d*n|)
				5 sign of xn-component
				6 x of xn-component
				7 sign of y-component
				8 y of y-component
			*/
			match[1] = match[1].toLowerCase();

			if ( match[1].slice( 0, 3 ) === "nth" ) {
				// nth-* requires argument
				if ( !match[3] ) {
					Sizzle.error( match[0] );
				}

				// numeric x and y parameters for Expr.filter.CHILD
				// remember that false/true cast respectively to 0/1
				match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
				match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );

			// other types prohibit arguments
			} else if ( match[3] ) {
				Sizzle.error( match[0] );
			}

			return match;
		},

		"PSEUDO": function( match ) {
			var excess,
				unquoted = !match[6] && match[2];

			if ( matchExpr["CHILD"].test( match[0] ) ) {
				return null;
			}

			// Accept quoted arguments as-is
			if ( match[3] ) {
				match[2] = match[4] || match[5] || "";

			// Strip excess characters from unquoted arguments
			} else if ( unquoted && rpseudo.test( unquoted ) &&
				// Get excess from tokenize (recursively)
				(excess = tokenize( unquoted, true )) &&
				// advance to the next closing parenthesis
				(excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {

				// excess is a negative index
				match[0] = match[0].slice( 0, excess );
				match[2] = unquoted.slice( 0, excess );
			}

			// Return only captures needed by the pseudo filter method (type and argument)
			return match.slice( 0, 3 );
		}
	},

	filter: {

		"TAG": function( nodeNameSelector ) {
			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
			return nodeNameSelector === "*" ?
				function() { return true; } :
				function( elem ) {
					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
				};
		},

		"CLASS": function( className ) {
			var pattern = classCache[ className + " " ];

			return pattern ||
				(pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
				classCache( className, function( elem ) {
					return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== "undefined" && elem.getAttribute("class") || "" );
				});
		},

		"ATTR": function( name, operator, check ) {
			return function( elem ) {
				var result = Sizzle.attr( elem, name );

				if ( result == null ) {
					return operator === "!=";
				}
				if ( !operator ) {
					return true;
				}

				result += "";

				return operator === "=" ? result === check :
					operator === "!=" ? result !== check :
					operator === "^=" ? check && result.indexOf( check ) === 0 :
					operator === "*=" ? check && result.indexOf( check ) > -1 :
					operator === "$=" ? check && result.slice( -check.length ) === check :
					operator === "~=" ? ( " " + result.replace( rwhitespace, " " ) + " " ).indexOf( check ) > -1 :
					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
					false;
			};
		},

		"CHILD": function( type, what, argument, first, last ) {
			var simple = type.slice( 0, 3 ) !== "nth",
				forward = type.slice( -4 ) !== "last",
				ofType = what === "of-type";

			return first === 1 && last === 0 ?

				// Shortcut for :nth-*(n)
				function( elem ) {
					return !!elem.parentNode;
				} :

				function( elem, context, xml ) {
					var cache, outerCache, node, diff, nodeIndex, start,
						dir = simple !== forward ? "nextSibling" : "previousSibling",
						parent = elem.parentNode,
						name = ofType && elem.nodeName.toLowerCase(),
						useCache = !xml && !ofType;

					if ( parent ) {

						// :(first|last|only)-(child|of-type)
						if ( simple ) {
							while ( dir ) {
								node = elem;
								while ( (node = node[ dir ]) ) {
									if ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {
										return false;
									}
								}
								// Reverse direction for :only-* (if we haven't yet done so)
								start = dir = type === "only" && !start && "nextSibling";
							}
							return true;
						}

						start = [ forward ? parent.firstChild : parent.lastChild ];

						// non-xml :nth-child(...) stores cache data on `parent`
						if ( forward && useCache ) {
							// Seek `elem` from a previously-cached index
							outerCache = parent[ expando ] || (parent[ expando ] = {});
							cache = outerCache[ type ] || [];
							nodeIndex = cache[0] === dirruns && cache[1];
							diff = cache[0] === dirruns && cache[2];
							node = nodeIndex && parent.childNodes[ nodeIndex ];

							while ( (node = ++nodeIndex && node && node[ dir ] ||

								// Fallback to seeking `elem` from the start
								(diff = nodeIndex = 0) || start.pop()) ) {

								// When found, cache indexes on `parent` and break
								if ( node.nodeType === 1 && ++diff && node === elem ) {
									outerCache[ type ] = [ dirruns, nodeIndex, diff ];
									break;
								}
							}

						// Use previously-cached element index if available
						} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {
							diff = cache[1];

						// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)
						} else {
							// Use the same loop as above to seek `elem` from the start
							while ( (node = ++nodeIndex && node && node[ dir ] ||
								(diff = nodeIndex = 0) || start.pop()) ) {

								if ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {
									// Cache the index of each encountered element
									if ( useCache ) {
										(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];
									}

									if ( node === elem ) {
										break;
									}
								}
							}
						}

						// Incorporate the offset, then check against cycle size
						diff -= last;
						return diff === first || ( diff % first === 0 && diff / first >= 0 );
					}
				};
		},

		"PSEUDO": function( pseudo, argument ) {
			// pseudo-class names are case-insensitive
			// http://www.w3.org/TR/selectors/#pseudo-classes
			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
			// Remember that setFilters inherits from pseudos
			var args,
				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
					Sizzle.error( "unsupported pseudo: " + pseudo );

			// The user may use createPseudo to indicate that
			// arguments are needed to create the filter function
			// just as Sizzle does
			if ( fn[ expando ] ) {
				return fn( argument );
			}

			// But maintain support for old signatures
			if ( fn.length > 1 ) {
				args = [ pseudo, pseudo, "", argument ];
				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
					markFunction(function( seed, matches ) {
						var idx,
							matched = fn( seed, argument ),
							i = matched.length;
						while ( i-- ) {
							idx = indexOf( seed, matched[i] );
							seed[ idx ] = !( matches[ idx ] = matched[i] );
						}
					}) :
					function( elem ) {
						return fn( elem, 0, args );
					};
			}

			return fn;
		}
	},

	pseudos: {
		// Potentially complex pseudos
		"not": markFunction(function( selector ) {
			// Trim the selector passed to compile
			// to avoid treating leading and trailing
			// spaces as combinators
			var input = [],
				results = [],
				matcher = compile( selector.replace( rtrim, "$1" ) );

			return matcher[ expando ] ?
				markFunction(function( seed, matches, context, xml ) {
					var elem,
						unmatched = matcher( seed, null, xml, [] ),
						i = seed.length;

					// Match elements unmatched by `matcher`
					while ( i-- ) {
						if ( (elem = unmatched[i]) ) {
							seed[i] = !(matches[i] = elem);
						}
					}
				}) :
				function( elem, context, xml ) {
					input[0] = elem;
					matcher( input, null, xml, results );
					// Don't keep the element (issue #299)
					input[0] = null;
					return !results.pop();
				};
		}),

		"has": markFunction(function( selector ) {
			return function( elem ) {
				return Sizzle( selector, elem ).length > 0;
			};
		}),

		"contains": markFunction(function( text ) {
			text = text.replace( runescape, funescape );
			return function( elem ) {
				return ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;
			};
		}),

		// "Whether an element is represented by a :lang() selector
		// is based solely on the element's language value
		// being equal to the identifier C,
		// or beginning with the identifier C immediately followed by "-".
		// The matching of C against the element's language value is performed case-insensitively.
		// The identifier C does not have to be a valid language name."
		// http://www.w3.org/TR/selectors/#lang-pseudo
		"lang": markFunction( function( lang ) {
			// lang value must be a valid identifier
			if ( !ridentifier.test(lang || "") ) {
				Sizzle.error( "unsupported lang: " + lang );
			}
			lang = lang.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				var elemLang;
				do {
					if ( (elemLang = documentIsHTML ?
						elem.lang :
						elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {

						elemLang = elemLang.toLowerCase();
						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
					}
				} while ( (elem = elem.parentNode) && elem.nodeType === 1 );
				return false;
			};
		}),

		// Miscellaneous
		"target": function( elem ) {
			var hash = window.location && window.location.hash;
			return hash && hash.slice( 1 ) === elem.id;
		},

		"root": function( elem ) {
			return elem === docElem;
		},

		"focus": function( elem ) {
			return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
		},

		// Boolean properties
		"enabled": function( elem ) {
			return elem.disabled === false;
		},

		"disabled": function( elem ) {
			return elem.disabled === true;
		},

		"checked": function( elem ) {
			// In CSS3, :checked should return both checked and selected elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			var nodeName = elem.nodeName.toLowerCase();
			return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
		},

		"selected": function( elem ) {
			// Accessing this property makes selected-by-default
			// options in Safari work properly
			if ( elem.parentNode ) {
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		// Contents
		"empty": function( elem ) {
			// http://www.w3.org/TR/selectors/#empty-pseudo
			// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
			//   but not by others (comment: 8; processing instruction: 7; etc.)
			// nodeType < 6 works because attributes (2) do not appear as children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				if ( elem.nodeType < 6 ) {
					return false;
				}
			}
			return true;
		},

		"parent": function( elem ) {
			return !Expr.pseudos["empty"]( elem );
		},

		// Element/input types
		"header": function( elem ) {
			return rheader.test( elem.nodeName );
		},

		"input": function( elem ) {
			return rinputs.test( elem.nodeName );
		},

		"button": function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && elem.type === "button" || name === "button";
		},

		"text": function( elem ) {
			var attr;
			return elem.nodeName.toLowerCase() === "input" &&
				elem.type === "text" &&

				// Support: IE<8
				// New HTML5 attribute values (e.g., "search") appear with elem.type === "text"
				( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text" );
		},

		// Position-in-collection
		"first": createPositionalPseudo(function() {
			return [ 0 ];
		}),

		"last": createPositionalPseudo(function( matchIndexes, length ) {
			return [ length - 1 ];
		}),

		"eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
			return [ argument < 0 ? argument + length : argument ];
		}),

		"even": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 0;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"odd": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 1;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; --i >= 0; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; ++i < length; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		})
	}
};

Expr.pseudos["nth"] = Expr.pseudos["eq"];

// Add button/input type pseudos
for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
	Expr.pseudos[ i ] = createButtonPseudo( i );
}

// Easy API for creating new setFilters
function setFilters() {}
setFilters.prototype = Expr.filters = Expr.pseudos;
Expr.setFilters = new setFilters();

tokenize = Sizzle.tokenize = function( selector, parseOnly ) {
	var matched, match, tokens, type,
		soFar, groups, preFilters,
		cached = tokenCache[ selector + " " ];

	if ( cached ) {
		return parseOnly ? 0 : cached.slice( 0 );
	}

	soFar = selector;
	groups = [];
	preFilters = Expr.preFilter;

	while ( soFar ) {

		// Comma and first run
		if ( !matched || (match = rcomma.exec( soFar )) ) {
			if ( match ) {
				// Don't consume trailing commas as valid
				soFar = soFar.slice( match[0].length ) || soFar;
			}
			groups.push( (tokens = []) );
		}

		matched = false;

		// Combinators
		if ( (match = rcombinators.exec( soFar )) ) {
			matched = match.shift();
			tokens.push({
				value: matched,
				// Cast descendant combinators to space
				type: match[0].replace( rtrim, " " )
			});
			soFar = soFar.slice( matched.length );
		}

		// Filters
		for ( type in Expr.filter ) {
			if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
				(match = preFilters[ type ]( match ))) ) {
				matched = match.shift();
				tokens.push({
					value: matched,
					type: type,
					matches: match
				});
				soFar = soFar.slice( matched.length );
			}
		}

		if ( !matched ) {
			break;
		}
	}

	// Return the length of the invalid excess
	// if we're just parsing
	// Otherwise, throw an error or return tokens
	return parseOnly ?
		soFar.length :
		soFar ?
			Sizzle.error( selector ) :
			// Cache the tokens
			tokenCache( selector, groups ).slice( 0 );
};

function toSelector( tokens ) {
	var i = 0,
		len = tokens.length,
		selector = "";
	for ( ; i < len; i++ ) {
		selector += tokens[i].value;
	}
	return selector;
}

function addCombinator( matcher, combinator, base ) {
	var dir = combinator.dir,
		checkNonElements = base && dir === "parentNode",
		doneName = done++;

	return combinator.first ?
		// Check against closest ancestor/preceding element
		function( elem, context, xml ) {
			while ( (elem = elem[ dir ]) ) {
				if ( elem.nodeType === 1 || checkNonElements ) {
					return matcher( elem, context, xml );
				}
			}
		} :

		// Check against all ancestor/preceding elements
		function( elem, context, xml ) {
			var oldCache, outerCache,
				newCache = [ dirruns, doneName ];

			// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching
			if ( xml ) {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						if ( matcher( elem, context, xml ) ) {
							return true;
						}
					}
				}
			} else {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						outerCache = elem[ expando ] || (elem[ expando ] = {});
						if ( (oldCache = outerCache[ dir ]) &&
							oldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {

							// Assign to newCache so results back-propagate to previous elements
							return (newCache[ 2 ] = oldCache[ 2 ]);
						} else {
							// Reuse newcache so results back-propagate to previous elements
							outerCache[ dir ] = newCache;

							// A match means we're done; a fail means we have to keep checking
							if ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {
								return true;
							}
						}
					}
				}
			}
		};
}

function elementMatcher( matchers ) {
	return matchers.length > 1 ?
		function( elem, context, xml ) {
			var i = matchers.length;
			while ( i-- ) {
				if ( !matchers[i]( elem, context, xml ) ) {
					return false;
				}
			}
			return true;
		} :
		matchers[0];
}

function multipleContexts( selector, contexts, results ) {
	var i = 0,
		len = contexts.length;
	for ( ; i < len; i++ ) {
		Sizzle( selector, contexts[i], results );
	}
	return results;
}

function condense( unmatched, map, filter, context, xml ) {
	var elem,
		newUnmatched = [],
		i = 0,
		len = unmatched.length,
		mapped = map != null;

	for ( ; i < len; i++ ) {
		if ( (elem = unmatched[i]) ) {
			if ( !filter || filter( elem, context, xml ) ) {
				newUnmatched.push( elem );
				if ( mapped ) {
					map.push( i );
				}
			}
		}
	}

	return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	if ( postFilter && !postFilter[ expando ] ) {
		postFilter = setMatcher( postFilter );
	}
	if ( postFinder && !postFinder[ expando ] ) {
		postFinder = setMatcher( postFinder, postSelector );
	}
	return markFunction(function( seed, results, context, xml ) {
		var temp, i, elem,
			preMap = [],
			postMap = [],
			preexisting = results.length,

			// Get initial elements from seed or context
			elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),

			// Prefilter to get matcher input, preserving a map for seed-results synchronization
			matcherIn = preFilter && ( seed || !selector ) ?
				condense( elems, preMap, preFilter, context, xml ) :
				elems,

			matcherOut = matcher ?
				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

					// ...intermediate processing is necessary
					[] :

					// ...otherwise use results directly
					results :
				matcherIn;

		// Find primary matches
		if ( matcher ) {
			matcher( matcherIn, matcherOut, context, xml );
		}

		// Apply postFilter
		if ( postFilter ) {
			temp = condense( matcherOut, postMap );
			postFilter( temp, [], context, xml );

			// Un-match failing elements by moving them back to matcherIn
			i = temp.length;
			while ( i-- ) {
				if ( (elem = temp[i]) ) {
					matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
				}
			}
		}

		if ( seed ) {
			if ( postFinder || preFilter ) {
				if ( postFinder ) {
					// Get the final matcherOut by condensing this intermediate into postFinder contexts
					temp = [];
					i = matcherOut.length;
					while ( i-- ) {
						if ( (elem = matcherOut[i]) ) {
							// Restore matcherIn since elem is not yet a final match
							temp.push( (matcherIn[i] = elem) );
						}
					}
					postFinder( null, (matcherOut = []), temp, xml );
				}

				// Move matched elements from seed to results to keep them synchronized
				i = matcherOut.length;
				while ( i-- ) {
					if ( (elem = matcherOut[i]) &&
						(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {

						seed[temp] = !(results[temp] = elem);
					}
				}
			}

		// Add elements to results, through postFinder if defined
		} else {
			matcherOut = condense(
				matcherOut === results ?
					matcherOut.splice( preexisting, matcherOut.length ) :
					matcherOut
			);
			if ( postFinder ) {
				postFinder( null, results, matcherOut, xml );
			} else {
				push.apply( results, matcherOut );
			}
		}
	});
}

function matcherFromTokens( tokens ) {
	var checkContext, matcher, j,
		len = tokens.length,
		leadingRelative = Expr.relative[ tokens[0].type ],
		implicitRelative = leadingRelative || Expr.relative[" "],
		i = leadingRelative ? 1 : 0,

		// The foundational matcher ensures that elements are reachable from top-level context(s)
		matchContext = addCombinator( function( elem ) {
			return elem === checkContext;
		}, implicitRelative, true ),
		matchAnyContext = addCombinator( function( elem ) {
			return indexOf( checkContext, elem ) > -1;
		}, implicitRelative, true ),
		matchers = [ function( elem, context, xml ) {
			var ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
				(checkContext = context).nodeType ?
					matchContext( elem, context, xml ) :
					matchAnyContext( elem, context, xml ) );
			// Avoid hanging onto element (issue #299)
			checkContext = null;
			return ret;
		} ];

	for ( ; i < len; i++ ) {
		if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
			matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
		} else {
			matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );

			// Return special upon seeing a positional matcher
			if ( matcher[ expando ] ) {
				// Find the next relative operator (if any) for proper handling
				j = ++i;
				for ( ; j < len; j++ ) {
					if ( Expr.relative[ tokens[j].type ] ) {
						break;
					}
				}
				return setMatcher(
					i > 1 && elementMatcher( matchers ),
					i > 1 && toSelector(
						// If the preceding token was a descendant combinator, insert an implicit any-element `*`
						tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
					).replace( rtrim, "$1" ),
					matcher,
					i < j && matcherFromTokens( tokens.slice( i, j ) ),
					j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
					j < len && toSelector( tokens )
				);
			}
			matchers.push( matcher );
		}
	}

	return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	var bySet = setMatchers.length > 0,
		byElement = elementMatchers.length > 0,
		superMatcher = function( seed, context, xml, results, outermost ) {
			var elem, j, matcher,
				matchedCount = 0,
				i = "0",
				unmatched = seed && [],
				setMatched = [],
				contextBackup = outermostContext,
				// We must always have either seed elements or outermost context
				elems = seed || byElement && Expr.find["TAG"]( "*", outermost ),
				// Use integer dirruns iff this is the outermost matcher
				dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),
				len = elems.length;

			if ( outermost ) {
				outermostContext = context !== document && context;
			}

			// Add elements passing elementMatchers directly to results
			// Keep `i` a string if there are no elements so `matchedCount` will be "00" below
			// Support: IE<9, Safari
			// Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id
			for ( ; i !== len && (elem = elems[i]) != null; i++ ) {
				if ( byElement && elem ) {
					j = 0;
					while ( (matcher = elementMatchers[j++]) ) {
						if ( matcher( elem, context, xml ) ) {
							results.push( elem );
							break;
						}
					}
					if ( outermost ) {
						dirruns = dirrunsUnique;
					}
				}

				// Track unmatched elements for set filters
				if ( bySet ) {
					// They will have gone through all possible matchers
					if ( (elem = !matcher && elem) ) {
						matchedCount--;
					}

					// Lengthen the array for every element, matched or not
					if ( seed ) {
						unmatched.push( elem );
					}
				}
			}

			// Apply set filters to unmatched elements
			matchedCount += i;
			if ( bySet && i !== matchedCount ) {
				j = 0;
				while ( (matcher = setMatchers[j++]) ) {
					matcher( unmatched, setMatched, context, xml );
				}

				if ( seed ) {
					// Reintegrate element matches to eliminate the need for sorting
					if ( matchedCount > 0 ) {
						while ( i-- ) {
							if ( !(unmatched[i] || setMatched[i]) ) {
								setMatched[i] = pop.call( results );
							}
						}
					}

					// Discard index placeholder values to get only actual matches
					setMatched = condense( setMatched );
				}

				// Add matches to results
				push.apply( results, setMatched );

				// Seedless set matches succeeding multiple successful matchers stipulate sorting
				if ( outermost && !seed && setMatched.length > 0 &&
					( matchedCount + setMatchers.length ) > 1 ) {

					Sizzle.uniqueSort( results );
				}
			}

			// Override manipulation of globals by nested matchers
			if ( outermost ) {
				dirruns = dirrunsUnique;
				outermostContext = contextBackup;
			}

			return unmatched;
		};

	return bySet ?
		markFunction( superMatcher ) :
		superMatcher;
}

compile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {
	var i,
		setMatchers = [],
		elementMatchers = [],
		cached = compilerCache[ selector + " " ];

	if ( !cached ) {
		// Generate a function of recursive functions that can be used to check each element
		if ( !match ) {
			match = tokenize( selector );
		}
		i = match.length;
		while ( i-- ) {
			cached = matcherFromTokens( match[i] );
			if ( cached[ expando ] ) {
				setMatchers.push( cached );
			} else {
				elementMatchers.push( cached );
			}
		}

		// Cache the compiled function
		cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );

		// Save selector and tokenization
		cached.selector = selector;
	}
	return cached;
};

/**
 * A low-level selection function that works with Sizzle's compiled
 *  selector functions
 * @param {String|Function} selector A selector or a pre-compiled
 *  selector function built with Sizzle.compile
 * @param {Element} context
 * @param {Array} [results]
 * @param {Array} [seed] A set of elements to match against
 */
select = Sizzle.select = function( selector, context, results, seed ) {
	var i, tokens, token, type, find,
		compiled = typeof selector === "function" && selector,
		match = !seed && tokenize( (selector = compiled.selector || selector) );

	results = results || [];

	// Try to minimize operations if there is no seed and only one group
	if ( match.length === 1 ) {

		// Take a shortcut and set the context if the root selector is an ID
		tokens = match[0] = match[0].slice( 0 );
		if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
				support.getById && context.nodeType === 9 && documentIsHTML &&
				Expr.relative[ tokens[1].type ] ) {

			context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
			if ( !context ) {
				return results;

			// Precompiled matchers will still verify ancestry, so step up a level
			} else if ( compiled ) {
				context = context.parentNode;
			}

			selector = selector.slice( tokens.shift().value.length );
		}

		// Fetch a seed set for right-to-left matching
		i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
		while ( i-- ) {
			token = tokens[i];

			// Abort if we hit a combinator
			if ( Expr.relative[ (type = token.type) ] ) {
				break;
			}
			if ( (find = Expr.find[ type ]) ) {
				// Search, expanding context for leading sibling combinators
				if ( (seed = find(
					token.matches[0].replace( runescape, funescape ),
					rsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context
				)) ) {

					// If seed is empty or no tokens remain, we can return early
					tokens.splice( i, 1 );
					selector = seed.length && toSelector( tokens );
					if ( !selector ) {
						push.apply( results, seed );
						return results;
					}

					break;
				}
			}
		}
	}

	// Compile and execute a filtering function if one is not provided
	// Provide `match` to avoid retokenization if we modified the selector above
	( compiled || compile( selector, match ) )(
		seed,
		context,
		!documentIsHTML,
		results,
		rsibling.test( selector ) && testContext( context.parentNode ) || context
	);
	return results;
};

// One-time assignments

// Sort stability
support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;

// Support: Chrome 14-35+
// Always assume duplicates if they aren't passed to the comparison function
support.detectDuplicates = !!hasDuplicate;

// Initialize against the default document
setDocument();

// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
// Detached nodes confoundingly follow *each other*
support.sortDetached = assert(function( div1 ) {
	// Should return 1, but returns 4 (following)
	return div1.compareDocumentPosition( document.createElement("div") ) & 1;
});

// Support: IE<8
// Prevent attribute/property "interpolation"
// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !assert(function( div ) {
	div.innerHTML = "<a href='#'></a>";
	return div.firstChild.getAttribute("href") === "#" ;
}) ) {
	addHandle( "type|href|height|width", function( elem, name, isXML ) {
		if ( !isXML ) {
			return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
		}
	});
}

// Support: IE<9
// Use defaultValue in place of getAttribute("value")
if ( !support.attributes || !assert(function( div ) {
	div.innerHTML = "<input/>";
	div.firstChild.setAttribute( "value", "" );
	return div.firstChild.getAttribute( "value" ) === "";
}) ) {
	addHandle( "value", function( elem, name, isXML ) {
		if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
			return elem.defaultValue;
		}
	});
}

// Support: IE<9
// Use getAttributeNode to fetch booleans when getAttribute lies
if ( !assert(function( div ) {
	return div.getAttribute("disabled") == null;
}) ) {
	addHandle( booleans, function( elem, name, isXML ) {
		var val;
		if ( !isXML ) {
			return elem[ name ] === true ? name.toLowerCase() :
					(val = elem.getAttributeNode( name )) && val.specified ?
					val.value :
				null;
		}
	});
}

return Sizzle;

})( window );



jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;
jQuery.expr[":"] = jQuery.expr.pseudos;
jQuery.unique = Sizzle.uniqueSort;
jQuery.text = Sizzle.getText;
jQuery.isXMLDoc = Sizzle.isXML;
jQuery.contains = Sizzle.contains;



var rneedsContext = jQuery.expr.match.needsContext;

var rsingleTag = (/^<(\w+)\s*\/?>(?:<\/\1>|)$/);



var risSimple = /^.[^:#\[\.,]*$/;

// Implement the identical functionality for filter and not
function winnow( elements, qualifier, not ) {
	if ( jQuery.isFunction( qualifier ) ) {
		return jQuery.grep( elements, function( elem, i ) {
			/* jshint -W018 */
			return !!qualifier.call( elem, i, elem ) !== not;
		});

	}

	if ( qualifier.nodeType ) {
		return jQuery.grep( elements, function( elem ) {
			return ( elem === qualifier ) !== not;
		});

	}

	if ( typeof qualifier === "string" ) {
		if ( risSimple.test( qualifier ) ) {
			return jQuery.filter( qualifier, elements, not );
		}

		qualifier = jQuery.filter( qualifier, elements );
	}

	return jQuery.grep( elements, function( elem ) {
		return ( indexOf.call( qualifier, elem ) >= 0 ) !== not;
	});
}

jQuery.filter = function( expr, elems, not ) {
	var elem = elems[ 0 ];

	if ( not ) {
		expr = ":not(" + expr + ")";
	}

	return elems.length === 1 && elem.nodeType === 1 ?
		jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :
		jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
			return elem.nodeType === 1;
		}));
};

jQuery.fn.extend({
	find: function( selector ) {
		var i,
			len = this.length,
			ret = [],
			self = this;

		if ( typeof selector !== "string" ) {
			return this.pushStack( jQuery( selector ).filter(function() {
				for ( i = 0; i < len; i++ ) {
					if ( jQuery.contains( self[ i ], this ) ) {
						return true;
					}
				}
			}) );
		}

		for ( i = 0; i < len; i++ ) {
			jQuery.find( selector, self[ i ], ret );
		}

		// Needed because $( selector, context ) becomes $( context ).find( selector )
		ret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );
		ret.selector = this.selector ? this.selector + " " + selector : selector;
		return ret;
	},
	filter: function( selector ) {
		return this.pushStack( winnow(this, selector || [], false) );
	},
	not: function( selector ) {
		return this.pushStack( winnow(this, selector || [], true) );
	},
	is: function( selector ) {
		return !!winnow(
			this,

			// If this is a positional/relative selector, check membership in the returned set
			// so $("p:first").is("p:last") won't return true for a doc with two "p".
			typeof selector === "string" && rneedsContext.test( selector ) ?
				jQuery( selector ) :
				selector || [],
			false
		).length;
	}
});


// Initialize a jQuery object


// A central reference to the root jQuery(document)
var rootjQuery,

	// A simple way to check for HTML strings
	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
	// Strict HTML recognition (#11290: must start with <)
	rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,

	init = jQuery.fn.init = function( selector, context ) {
		var match, elem;

		// HANDLE: $(""), $(null), $(undefined), $(false)
		if ( !selector ) {
			return this;
		}

		// Handle HTML strings
		if ( typeof selector === "string" ) {
			if ( selector[0] === "<" && selector[ selector.length - 1 ] === ">" && selector.length >= 3 ) {
				// Assume that strings that start and end with <> are HTML and skip the regex check
				match = [ null, selector, null ];

			} else {
				match = rquickExpr.exec( selector );
			}

			// Match html or make sure no context is specified for #id
			if ( match && (match[1] || !context) ) {

				// HANDLE: $(html) -> $(array)
				if ( match[1] ) {
					context = context instanceof jQuery ? context[0] : context;

					// Option to run scripts is true for back-compat
					// Intentionally let the error be thrown if parseHTML is not present
					jQuery.merge( this, jQuery.parseHTML(
						match[1],
						context && context.nodeType ? context.ownerDocument || context : document,
						true
					) );

					// HANDLE: $(html, props)
					if ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {
						for ( match in context ) {
							// Properties of context are called as methods if possible
							if ( jQuery.isFunction( this[ match ] ) ) {
								this[ match ]( context[ match ] );

							// ...and otherwise set as attributes
							} else {
								this.attr( match, context[ match ] );
							}
						}
					}

					return this;

				// HANDLE: $(#id)
				} else {
					elem = document.getElementById( match[2] );

					// Support: Blackberry 4.6
					// gEBID returns nodes no longer in the document (#6963)
					if ( elem && elem.parentNode ) {
						// Inject the element directly into the jQuery object
						this.length = 1;
						this[0] = elem;
					}

					this.context = document;
					this.selector = selector;
					return this;
				}

			// HANDLE: $(expr, $(...))
			} else if ( !context || context.jquery ) {
				return ( context || rootjQuery ).find( selector );

			// HANDLE: $(expr, context)
			// (which is just equivalent to: $(context).find(expr)
			} else {
				return this.constructor( context ).find( selector );
			}

		// HANDLE: $(DOMElement)
		} else if ( selector.nodeType ) {
			this.context = this[0] = selector;
			this.length = 1;
			return this;

		// HANDLE: $(function)
		// Shortcut for document ready
		} else if ( jQuery.isFunction( selector ) ) {
			return typeof rootjQuery.ready !== "undefined" ?
				rootjQuery.ready( selector ) :
				// Execute immediately if ready is not present
				selector( jQuery );
		}

		if ( selector.selector !== undefined ) {
			this.selector = selector.selector;
			this.context = selector.context;
		}

		return jQuery.makeArray( selector, this );
	};

// Give the init function the jQuery prototype for later instantiation
init.prototype = jQuery.fn;

// Initialize central reference
rootjQuery = jQuery( document );


var rparentsprev = /^(?:parents|prev(?:Until|All))/,
	// Methods guaranteed to produce a unique set when starting from a unique set
	guaranteedUnique = {
		children: true,
		contents: true,
		next: true,
		prev: true
	};

jQuery.extend({
	dir: function( elem, dir, until ) {
		var matched = [],
			truncate = until !== undefined;

		while ( (elem = elem[ dir ]) && elem.nodeType !== 9 ) {
			if ( elem.nodeType === 1 ) {
				if ( truncate && jQuery( elem ).is( until ) ) {
					break;
				}
				matched.push( elem );
			}
		}
		return matched;
	},

	sibling: function( n, elem ) {
		var matched = [];

		for ( ; n; n = n.nextSibling ) {
			if ( n.nodeType === 1 && n !== elem ) {
				matched.push( n );
			}
		}

		return matched;
	}
});

jQuery.fn.extend({
	has: function( target ) {
		var targets = jQuery( target, this ),
			l = targets.length;

		return this.filter(function() {
			var i = 0;
			for ( ; i < l; i++ ) {
				if ( jQuery.contains( this, targets[i] ) ) {
					return true;
				}
			}
		});
	},

	closest: function( selectors, context ) {
		var cur,
			i = 0,
			l = this.length,
			matched = [],
			pos = rneedsContext.test( selectors ) || typeof selectors !== "string" ?
				jQuery( selectors, context || this.context ) :
				0;

		for ( ; i < l; i++ ) {
			for ( cur = this[i]; cur && cur !== context; cur = cur.parentNode ) {
				// Always skip document fragments
				if ( cur.nodeType < 11 && (pos ?
					pos.index(cur) > -1 :

					// Don't pass non-elements to Sizzle
					cur.nodeType === 1 &&
						jQuery.find.matchesSelector(cur, selectors)) ) {

					matched.push( cur );
					break;
				}
			}
		}

		return this.pushStack( matched.length > 1 ? jQuery.unique( matched ) : matched );
	},

	// Determine the position of an element within the set
	index: function( elem ) {

		// No argument, return index in parent
		if ( !elem ) {
			return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;
		}

		// Index in selector
		if ( typeof elem === "string" ) {
			return indexOf.call( jQuery( elem ), this[ 0 ] );
		}

		// Locate the position of the desired element
		return indexOf.call( this,

			// If it receives a jQuery object, the first element is used
			elem.jquery ? elem[ 0 ] : elem
		);
	},

	add: function( selector, context ) {
		return this.pushStack(
			jQuery.unique(
				jQuery.merge( this.get(), jQuery( selector, context ) )
			)
		);
	},

	addBack: function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter(selector)
		);
	}
});

function sibling( cur, dir ) {
	while ( (cur = cur[dir]) && cur.nodeType !== 1 ) {}
	return cur;
}

jQuery.each({
	parent: function( elem ) {
		var parent = elem.parentNode;
		return parent && parent.nodeType !== 11 ? parent : null;
	},
	parents: function( elem ) {
		return jQuery.dir( elem, "parentNode" );
	},
	parentsUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "parentNode", until );
	},
	next: function( elem ) {
		return sibling( elem, "nextSibling" );
	},
	prev: function( elem ) {
		return sibling( elem, "previousSibling" );
	},
	nextAll: function( elem ) {
		return jQuery.dir( elem, "nextSibling" );
	},
	prevAll: function( elem ) {
		return jQuery.dir( elem, "previousSibling" );
	},
	nextUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "nextSibling", until );
	},
	prevUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "previousSibling", until );
	},
	siblings: function( elem ) {
		return jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );
	},
	children: function( elem ) {
		return jQuery.sibling( elem.firstChild );
	},
	contents: function( elem ) {
		return elem.contentDocument || jQuery.merge( [], elem.childNodes );
	}
}, function( name, fn ) {
	jQuery.fn[ name ] = function( until, selector ) {
		var matched = jQuery.map( this, fn, until );

		if ( name.slice( -5 ) !== "Until" ) {
			selector = until;
		}

		if ( selector && typeof selector === "string" ) {
			matched = jQuery.filter( selector, matched );
		}

		if ( this.length > 1 ) {
			// Remove duplicates
			if ( !guaranteedUnique[ name ] ) {
				jQuery.unique( matched );
			}

			// Reverse order for parents* and prev-derivatives
			if ( rparentsprev.test( name ) ) {
				matched.reverse();
			}
		}

		return this.pushStack( matched );
	};
});
var rnotwhite = (/\S+/g);



// String to Object options format cache
var optionsCache = {};

// Convert String-formatted options into Object-formatted ones and store in cache
function createOptions( options ) {
	var object = optionsCache[ options ] = {};
	jQuery.each( options.match( rnotwhite ) || [], function( _, flag ) {
		object[ flag ] = true;
	});
	return object;
}

/*
 * Create a callback list using the following parameters:
 *
 *	options: an optional list of space-separated options that will change how
 *			the callback list behaves or a more traditional option object
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible options:
 *
 *	once:			will ensure the callback list can only be fired once (like a Deferred)
 *
 *	memory:			will keep track of previous values and will call any callback added
 *					after the list has been fired right away with the latest "memorized"
 *					values (like a Deferred)
 *
 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
 *
 *	stopOnFalse:	interrupt callings when a callback returns false
 *
 */
jQuery.Callbacks = function( options ) {

	// Convert options from String-formatted to Object-formatted if needed
	// (we check in cache first)
	options = typeof options === "string" ?
		( optionsCache[ options ] || createOptions( options ) ) :
		jQuery.extend( {}, options );

	var // Last fire value (for non-forgettable lists)
		memory,
		// Flag to know if list was already fired
		fired,
		// Flag to know if list is currently firing
		firing,
		// First callback to fire (used internally by add and fireWith)
		firingStart,
		// End of the loop when firing
		firingLength,
		// Index of currently firing callback (modified by remove if needed)
		firingIndex,
		// Actual callback list
		list = [],
		// Stack of fire calls for repeatable lists
		stack = !options.once && [],
		// Fire callbacks
		fire = function( data ) {
			memory = options.memory && data;
			fired = true;
			firingIndex = firingStart || 0;
			firingStart = 0;
			firingLength = list.length;
			firing = true;
			for ( ; list && firingIndex < firingLength; firingIndex++ ) {
				if ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {
					memory = false; // To prevent further calls using add
					break;
				}
			}
			firing = false;
			if ( list ) {
				if ( stack ) {
					if ( stack.length ) {
						fire( stack.shift() );
					}
				} else if ( memory ) {
					list = [];
				} else {
					self.disable();
				}
			}
		},
		// Actual Callbacks object
		self = {
			// Add a callback or a collection of callbacks to the list
			add: function() {
				if ( list ) {
					// First, we save the current length
					var start = list.length;
					(function add( args ) {
						jQuery.each( args, function( _, arg ) {
							var type = jQuery.type( arg );
							if ( type === "function" ) {
								if ( !options.unique || !self.has( arg ) ) {
									list.push( arg );
								}
							} else if ( arg && arg.length && type !== "string" ) {
								// Inspect recursively
								add( arg );
							}
						});
					})( arguments );
					// Do we need to add the callbacks to the
					// current firing batch?
					if ( firing ) {
						firingLength = list.length;
					// With memory, if we're not firing then
					// we should call right away
					} else if ( memory ) {
						firingStart = start;
						fire( memory );
					}
				}
				return this;
			},
			// Remove a callback from the list
			remove: function() {
				if ( list ) {
					jQuery.each( arguments, function( _, arg ) {
						var index;
						while ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
							list.splice( index, 1 );
							// Handle firing indexes
							if ( firing ) {
								if ( index <= firingLength ) {
									firingLength--;
								}
								if ( index <= firingIndex ) {
									firingIndex--;
								}
							}
						}
					});
				}
				return this;
			},
			// Check if a given callback is in the list.
			// If no argument is given, return whether or not list has callbacks attached.
			has: function( fn ) {
				return fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );
			},
			// Remove all callbacks from the list
			empty: function() {
				list = [];
				firingLength = 0;
				return this;
			},
			// Have the list do nothing anymore
			disable: function() {
				list = stack = memory = undefined;
				return this;
			},
			// Is it disabled?
			disabled: function() {
				return !list;
			},
			// Lock the list in its current state
			lock: function() {
				stack = undefined;
				if ( !memory ) {
					self.disable();
				}
				return this;
			},
			// Is it locked?
			locked: function() {
				return !stack;
			},
			// Call all callbacks with the given context and arguments
			fireWith: function( context, args ) {
				if ( list && ( !fired || stack ) ) {
					args = args || [];
					args = [ context, args.slice ? args.slice() : args ];
					if ( firing ) {
						stack.push( args );
					} else {
						fire( args );
					}
				}
				return this;
			},
			// Call all the callbacks with the given arguments
			fire: function() {
				self.fireWith( this, arguments );
				return this;
			},
			// To know if the callbacks have already been called at least once
			fired: function() {
				return !!fired;
			}
		};

	return self;
};


jQuery.extend({

	Deferred: function( func ) {
		var tuples = [
				// action, add listener, listener list, final state
				[ "resolve", "done", jQuery.Callbacks("once memory"), "resolved" ],
				[ "reject", "fail", jQuery.Callbacks("once memory"), "rejected" ],
				[ "notify", "progress", jQuery.Callbacks("memory") ]
			],
			state = "pending",
			promise = {
				state: function() {
					return state;
				},
				always: function() {
					deferred.done( arguments ).fail( arguments );
					return this;
				},
				then: function( /* fnDone, fnFail, fnProgress */ ) {
					var fns = arguments;
					return jQuery.Deferred(function( newDefer ) {
						jQuery.each( tuples, function( i, tuple ) {
							var fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];
							// deferred[ done | fail | progress ] for forwarding actions to newDefer
							deferred[ tuple[1] ](function() {
								var returned = fn && fn.apply( this, arguments );
								if ( returned && jQuery.isFunction( returned.promise ) ) {
									returned.promise()
										.done( newDefer.resolve )
										.fail( newDefer.reject )
										.progress( newDefer.notify );
								} else {
									newDefer[ tuple[ 0 ] + "With" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );
								}
							});
						});
						fns = null;
					}).promise();
				},
				// Get a promise for this deferred
				// If obj is provided, the promise aspect is added to the object
				promise: function( obj ) {
					return obj != null ? jQuery.extend( obj, promise ) : promise;
				}
			},
			deferred = {};

		// Keep pipe for back-compat
		promise.pipe = promise.then;

		// Add list-specific methods
		jQuery.each( tuples, function( i, tuple ) {
			var list = tuple[ 2 ],
				stateString = tuple[ 3 ];

			// promise[ done | fail | progress ] = list.add
			promise[ tuple[1] ] = list.add;

			// Handle state
			if ( stateString ) {
				list.add(function() {
					// state = [ resolved | rejected ]
					state = stateString;

				// [ reject_list | resolve_list ].disable; progress_list.lock
				}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );
			}

			// deferred[ resolve | reject | notify ]
			deferred[ tuple[0] ] = function() {
				deferred[ tuple[0] + "With" ]( this === deferred ? promise : this, arguments );
				return this;
			};
			deferred[ tuple[0] + "With" ] = list.fireWith;
		});

		// Make the deferred a promise
		promise.promise( deferred );

		// Call given func if any
		if ( func ) {
			func.call( deferred, deferred );
		}

		// All done!
		return deferred;
	},

	// Deferred helper
	when: function( subordinate /* , ..., subordinateN */ ) {
		var i = 0,
			resolveValues = slice.call( arguments ),
			length = resolveValues.length,

			// the count of uncompleted subordinates
			remaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,

			// the master Deferred. If resolveValues consist of only a single Deferred, just use that.
			deferred = remaining === 1 ? subordinate : jQuery.Deferred(),

			// Update function for both resolve and progress values
			updateFunc = function( i, contexts, values ) {
				return function( value ) {
					contexts[ i ] = this;
					values[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;
					if ( values === progressValues ) {
						deferred.notifyWith( contexts, values );
					} else if ( !( --remaining ) ) {
						deferred.resolveWith( contexts, values );
					}
				};
			},

			progressValues, progressContexts, resolveContexts;

		// Add listeners to Deferred subordinates; treat others as resolved
		if ( length > 1 ) {
			progressValues = new Array( length );
			progressContexts = new Array( length );
			resolveContexts = new Array( length );
			for ( ; i < length; i++ ) {
				if ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {
					resolveValues[ i ].promise()
						.done( updateFunc( i, resolveContexts, resolveValues ) )
						.fail( deferred.reject )
						.progress( updateFunc( i, progressContexts, progressValues ) );
				} else {
					--remaining;
				}
			}
		}

		// If we're not waiting on anything, resolve the master
		if ( !remaining ) {
			deferred.resolveWith( resolveContexts, resolveValues );
		}

		return deferred.promise();
	}
});


// The deferred used on DOM ready
var readyList;

jQuery.fn.ready = function( fn ) {
	// Add the callback
	jQuery.ready.promise().done( fn );

	return this;
};

jQuery.extend({
	// Is the DOM ready to be used? Set to true once it occurs.
	isReady: false,

	// A counter to track how many items to wait for before
	// the ready event fires. See #6781
	readyWait: 1,

	// Hold (or release) the ready event
	holdReady: function( hold ) {
		if ( hold ) {
			jQuery.readyWait++;
		} else {
			jQuery.ready( true );
		}
	},

	// Handle when the DOM is ready
	ready: function( wait ) {

		// Abort if there are pending holds or we're already ready
		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
			return;
		}

		// Remember that the DOM is ready
		jQuery.isReady = true;

		// If a normal DOM Ready event fired, decrement, and wait if need be
		if ( wait !== true && --jQuery.readyWait > 0 ) {
			return;
		}

		// If there are functions bound, to execute
		readyList.resolveWith( document, [ jQuery ] );

		// Trigger any bound ready events
		if ( jQuery.fn.triggerHandler ) {
			jQuery( document ).triggerHandler( "ready" );
			jQuery( document ).off( "ready" );
		}
	}
});

/**
 * The ready event handler and self cleanup method
 */
function completed() {
	document.removeEventListener( "DOMContentLoaded", completed, false );
	window.removeEventListener( "load", completed, false );
	jQuery.ready();
}

jQuery.ready.promise = function( obj ) {
	if ( !readyList ) {

		readyList = jQuery.Deferred();

		// Catch cases where $(document).ready() is called after the browser event has already occurred.
		// We once tried to use readyState "interactive" here, but it caused issues like the one
		// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15
		if ( document.readyState === "complete" ) {
			// Handle it asynchronously to allow scripts the opportunity to delay ready
			setTimeout( jQuery.ready );

		} else {

			// Use the handy event callback
			document.addEventListener( "DOMContentLoaded", completed, false );

			// A fallback to window.onload, that will always work
			window.addEventListener( "load", completed, false );
		}
	}
	return readyList.promise( obj );
};

// Kick off the DOM ready check even if the user does not
jQuery.ready.promise();




// Multifunctional method to get and set values of a collection
// The value/s can optionally be executed if it's a function
var access = jQuery.access = function( elems, fn, key, value, chainable, emptyGet, raw ) {
	var i = 0,
		len = elems.length,
		bulk = key == null;

	// Sets many values
	if ( jQuery.type( key ) === "object" ) {
		chainable = true;
		for ( i in key ) {
			jQuery.access( elems, fn, i, key[i], true, emptyGet, raw );
		}

	// Sets one value
	} else if ( value !== undefined ) {
		chainable = true;

		if ( !jQuery.isFunction( value ) ) {
			raw = true;
		}

		if ( bulk ) {
			// Bulk operations run against the entire set
			if ( raw ) {
				fn.call( elems, value );
				fn = null;

			// ...except when executing function values
			} else {
				bulk = fn;
				fn = function( elem, key, value ) {
					return bulk.call( jQuery( elem ), value );
				};
			}
		}

		if ( fn ) {
			for ( ; i < len; i++ ) {
				fn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );
			}
		}
	}

	return chainable ?
		elems :

		// Gets
		bulk ?
			fn.call( elems ) :
			len ? fn( elems[0], key ) : emptyGet;
};


/**
 * Determines whether an object can have data
 */
jQuery.acceptData = function( owner ) {
	// Accepts only:
	//  - Node
	//    - Node.ELEMENT_NODE
	//    - Node.DOCUMENT_NODE
	//  - Object
	//    - Any
	/* jshint -W018 */
	return owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );
};


function Data() {
	// Support: Android<4,
	// Old WebKit does not have Object.preventExtensions/freeze method,
	// return new empty object instead with no [[set]] accessor
	Object.defineProperty( this.cache = {}, 0, {
		get: function() {
			return {};
		}
	});

	this.expando = jQuery.expando + Data.uid++;
}

Data.uid = 1;
Data.accepts = jQuery.acceptData;

Data.prototype = {
	key: function( owner ) {
		// We can accept data for non-element nodes in modern browsers,
		// but we should not, see #8335.
		// Always return the key for a frozen object.
		if ( !Data.accepts( owner ) ) {
			return 0;
		}

		var descriptor = {},
			// Check if the owner object already has a cache key
			unlock = owner[ this.expando ];

		// If not, create one
		if ( !unlock ) {
			unlock = Data.uid++;

			// Secure it in a non-enumerable, non-writable property
			try {
				descriptor[ this.expando ] = { value: unlock };
				Object.defineProperties( owner, descriptor );

			// Support: Android<4
			// Fallback to a less secure definition
			} catch ( e ) {
				descriptor[ this.expando ] = unlock;
				jQuery.extend( owner, descriptor );
			}
		}

		// Ensure the cache object
		if ( !this.cache[ unlock ] ) {
			this.cache[ unlock ] = {};
		}

		return unlock;
	},
	set: function( owner, data, value ) {
		var prop,
			// There may be an unlock assigned to this node,
			// if there is no entry for this "owner", create one inline
			// and set the unlock as though an owner entry had always existed
			unlock = this.key( owner ),
			cache = this.cache[ unlock ];

		// Handle: [ owner, key, value ] args
		if ( typeof data === "string" ) {
			cache[ data ] = value;

		// Handle: [ owner, { properties } ] args
		} else {
			// Fresh assignments by object are shallow copied
			if ( jQuery.isEmptyObject( cache ) ) {
				jQuery.extend( this.cache[ unlock ], data );
			// Otherwise, copy the properties one-by-one to the cache object
			} else {
				for ( prop in data ) {
					cache[ prop ] = data[ prop ];
				}
			}
		}
		return cache;
	},
	get: function( owner, key ) {
		// Either a valid cache is found, or will be created.
		// New caches will be created and the unlock returned,
		// allowing direct access to the newly created
		// empty data object. A valid owner object must be provided.
		var cache = this.cache[ this.key( owner ) ];

		return key === undefined ?
			cache : cache[ key ];
	},
	access: function( owner, key, value ) {
		var stored;
		// In cases where either:
		//
		//   1. No key was specified
		//   2. A string key was specified, but no value provided
		//
		// Take the "read" path and allow the get method to determine
		// which value to return, respectively either:
		//
		//   1. The entire cache object
		//   2. The data stored at the key
		//
		if ( key === undefined ||
				((key && typeof key === "string") && value === undefined) ) {

			stored = this.get( owner, key );

			return stored !== undefined ?
				stored : this.get( owner, jQuery.camelCase(key) );
		}

		// [*]When the key is not a string, or both a key and value
		// are specified, set or extend (existing objects) with either:
		//
		//   1. An object of properties
		//   2. A key and value
		//
		this.set( owner, key, value );

		// Since the "set" path can have two possible entry points
		// return the expected data based on which path was taken[*]
		return value !== undefined ? value : key;
	},
	remove: function( owner, key ) {
		var i, name, camel,
			unlock = this.key( owner ),
			cache = this.cache[ unlock ];

		if ( key === undefined ) {
			this.cache[ unlock ] = {};

		} else {
			// Support array or space separated string of keys
			if ( jQuery.isArray( key ) ) {
				// If "name" is an array of keys...
				// When data is initially created, via ("key", "val") signature,
				// keys will be converted to camelCase.
				// Since there is no way to tell _how_ a key was added, remove
				// both plain key and camelCase key. #12786
				// This will only penalize the array argument path.
				name = key.concat( key.map( jQuery.camelCase ) );
			} else {
				camel = jQuery.camelCase( key );
				// Try the string as a key before any manipulation
				if ( key in cache ) {
					name = [ key, camel ];
				} else {
					// If a key with the spaces exists, use it.
					// Otherwise, create an array by matching non-whitespace
					name = camel;
					name = name in cache ?
						[ name ] : ( name.match( rnotwhite ) || [] );
				}
			}

			i = name.length;
			while ( i-- ) {
				delete cache[ name[ i ] ];
			}
		}
	},
	hasData: function( owner ) {
		return !jQuery.isEmptyObject(
			this.cache[ owner[ this.expando ] ] || {}
		);
	},
	discard: function( owner ) {
		if ( owner[ this.expando ] ) {
			delete this.cache[ owner[ this.expando ] ];
		}
	}
};
var data_priv = new Data();

var data_user = new Data();



//	Implementation Summary
//
//	1. Enforce API surface and semantic compatibility with 1.9.x branch
//	2. Improve the module's maintainability by reducing the storage
//		paths to a single mechanism.
//	3. Use the same single mechanism to support "private" and "user" data.
//	4. _Never_ expose "private" data to user code (TODO: Drop _data, _removeData)
//	5. Avoid exposing implementation details on user objects (eg. expando properties)
//	6. Provide a clear path for implementation upgrade to WeakMap in 2014

var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
	rmultiDash = /([A-Z])/g;

function dataAttr( elem, key, data ) {
	var name;

	// If nothing was found internally, try to fetch any
	// data from the HTML5 data-* attribute
	if ( data === undefined && elem.nodeType === 1 ) {
		name = "data-" + key.replace( rmultiDash, "-$1" ).toLowerCase();
		data = elem.getAttribute( name );

		if ( typeof data === "string" ) {
			try {
				data = data === "true" ? true :
					data === "false" ? false :
					data === "null" ? null :
					// Only convert to a number if it doesn't change the string
					+data + "" === data ? +data :
					rbrace.test( data ) ? jQuery.parseJSON( data ) :
					data;
			} catch( e ) {}

			// Make sure we set the data so it isn't changed later
			data_user.set( elem, key, data );
		} else {
			data = undefined;
		}
	}
	return data;
}

jQuery.extend({
	hasData: function( elem ) {
		return data_user.hasData( elem ) || data_priv.hasData( elem );
	},

	data: function( elem, name, data ) {
		return data_user.access( elem, name, data );
	},

	removeData: function( elem, name ) {
		data_user.remove( elem, name );
	},

	// TODO: Now that all calls to _data and _removeData have been replaced
	// with direct calls to data_priv methods, these can be deprecated.
	_data: function( elem, name, data ) {
		return data_priv.access( elem, name, data );
	},

	_removeData: function( elem, name ) {
		data_priv.remove( elem, name );
	}
});

jQuery.fn.extend({
	data: function( key, value ) {
		var i, name, data,
			elem = this[ 0 ],
			attrs = elem && elem.attributes;

		// Gets all values
		if ( key === undefined ) {
			if ( this.length ) {
				data = data_user.get( elem );

				if ( elem.nodeType === 1 && !data_priv.get( elem, "hasDataAttrs" ) ) {
					i = attrs.length;
					while ( i-- ) {

						// Support: IE11+
						// The attrs elements can be null (#14894)
						if ( attrs[ i ] ) {
							name = attrs[ i ].name;
							if ( name.indexOf( "data-" ) === 0 ) {
								name = jQuery.camelCase( name.slice(5) );
								dataAttr( elem, name, data[ name ] );
							}
						}
					}
					data_priv.set( elem, "hasDataAttrs", true );
				}
			}

			return data;
		}

		// Sets multiple values
		if ( typeof key === "object" ) {
			return this.each(function() {
				data_user.set( this, key );
			});
		}

		return access( this, function( value ) {
			var data,
				camelKey = jQuery.camelCase( key );

			// The calling jQuery object (element matches) is not empty
			// (and therefore has an element appears at this[ 0 ]) and the
			// `value` parameter was not undefined. An empty jQuery object
			// will result in `undefined` for elem = this[ 0 ] which will
			// throw an exception if an attempt to read a data cache is made.
			if ( elem && value === undefined ) {
				// Attempt to get data from the cache
				// with the key as-is
				data = data_user.get( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to get data from the cache
				// with the key camelized
				data = data_user.get( elem, camelKey );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to "discover" the data in
				// HTML5 custom data-* attrs
				data = dataAttr( elem, camelKey, undefined );
				if ( data !== undefined ) {
					return data;
				}

				// We tried really hard, but the data doesn't exist.
				return;
			}

			// Set the data...
			this.each(function() {
				// First, attempt to store a copy or reference of any
				// data that might've been store with a camelCased key.
				var data = data_user.get( this, camelKey );

				// For HTML5 data-* attribute interop, we have to
				// store property names with dashes in a camelCase form.
				// This might not apply to all properties...*
				data_user.set( this, camelKey, value );

				// *... In the case of properties that might _actually_
				// have dashes, we need to also store a copy of that
				// unchanged property.
				if ( key.indexOf("-") !== -1 && data !== undefined ) {
					data_user.set( this, key, value );
				}
			});
		}, null, value, arguments.length > 1, null, true );
	},

	removeData: function( key ) {
		return this.each(function() {
			data_user.remove( this, key );
		});
	}
});


jQuery.extend({
	queue: function( elem, type, data ) {
		var queue;

		if ( elem ) {
			type = ( type || "fx" ) + "queue";
			queue = data_priv.get( elem, type );

			// Speed up dequeue by getting out quickly if this is just a lookup
			if ( data ) {
				if ( !queue || jQuery.isArray( data ) ) {
					queue = data_priv.access( elem, type, jQuery.makeArray(data) );
				} else {
					queue.push( data );
				}
			}
			return queue || [];
		}
	},

	dequeue: function( elem, type ) {
		type = type || "fx";

		var queue = jQuery.queue( elem, type ),
			startLength = queue.length,
			fn = queue.shift(),
			hooks = jQuery._queueHooks( elem, type ),
			next = function() {
				jQuery.dequeue( elem, type );
			};

		// If the fx queue is dequeued, always remove the progress sentinel
		if ( fn === "inprogress" ) {
			fn = queue.shift();
			startLength--;
		}

		if ( fn ) {

			// Add a progress sentinel to prevent the fx queue from being
			// automatically dequeued
			if ( type === "fx" ) {
				queue.unshift( "inprogress" );
			}

			// Clear up the last queue stop function
			delete hooks.stop;
			fn.call( elem, next, hooks );
		}

		if ( !startLength && hooks ) {
			hooks.empty.fire();
		}
	},

	// Not public - generate a queueHooks object, or return the current one
	_queueHooks: function( elem, type ) {
		var key = type + "queueHooks";
		return data_priv.get( elem, key ) || data_priv.access( elem, key, {
			empty: jQuery.Callbacks("once memory").add(function() {
				data_priv.remove( elem, [ type + "queue", key ] );
			})
		});
	}
});

jQuery.fn.extend({
	queue: function( type, data ) {
		var setter = 2;

		if ( typeof type !== "string" ) {
			data = type;
			type = "fx";
			setter--;
		}

		if ( arguments.length < setter ) {
			return jQuery.queue( this[0], type );
		}

		return data === undefined ?
			this :
			this.each(function() {
				var queue = jQuery.queue( this, type, data );

				// Ensure a hooks for this queue
				jQuery._queueHooks( this, type );

				if ( type === "fx" && queue[0] !== "inprogress" ) {
					jQuery.dequeue( this, type );
				}
			});
	},
	dequeue: function( type ) {
		return this.each(function() {
			jQuery.dequeue( this, type );
		});
	},
	clearQueue: function( type ) {
		return this.queue( type || "fx", [] );
	},
	// Get a promise resolved when queues of a certain type
	// are emptied (fx is the type by default)
	promise: function( type, obj ) {
		var tmp,
			count = 1,
			defer = jQuery.Deferred(),
			elements = this,
			i = this.length,
			resolve = function() {
				if ( !( --count ) ) {
					defer.resolveWith( elements, [ elements ] );
				}
			};

		if ( typeof type !== "string" ) {
			obj = type;
			type = undefined;
		}
		type = type || "fx";

		while ( i-- ) {
			tmp = data_priv.get( elements[ i ], type + "queueHooks" );
			if ( tmp && tmp.empty ) {
				count++;
				tmp.empty.add( resolve );
			}
		}
		resolve();
		return defer.promise( obj );
	}
});
var pnum = (/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;

var cssExpand = [ "Top", "Right", "Bottom", "Left" ];

var isHidden = function( elem, el ) {
		// isHidden might be called from jQuery#filter function;
		// in that case, element will be second argument
		elem = el || elem;
		return jQuery.css( elem, "display" ) === "none" || !jQuery.contains( elem.ownerDocument, elem );
	};

var rcheckableType = (/^(?:checkbox|radio)$/i);



(function() {
	var fragment = document.createDocumentFragment(),
		div = fragment.appendChild( document.createElement( "div" ) ),
		input = document.createElement( "input" );

	// Support: Safari<=5.1
	// Check state lost if the name is set (#11217)
	// Support: Windows Web Apps (WWA)
	// `name` and `type` must use .setAttribute for WWA (#14901)
	input.setAttribute( "type", "radio" );
	input.setAttribute( "checked", "checked" );
	input.setAttribute( "name", "t" );

	div.appendChild( input );

	// Support: Safari<=5.1, Android<4.2
	// Older WebKit doesn't clone checked state correctly in fragments
	support.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;

	// Support: IE<=11+
	// Make sure textarea (and checkbox) defaultValue is properly cloned
	div.innerHTML = "<textarea>x</textarea>";
	support.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;
})();
var strundefined = typeof undefined;



support.focusinBubbles = "onfocusin" in window;


var
	rkeyEvent = /^key/,
	rmouseEvent = /^(?:mouse|pointer|contextmenu)|click/,
	rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
	rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;

function returnTrue() {
	return true;
}

function returnFalse() {
	return false;
}

function safeActiveElement() {
	try {
		return document.activeElement;
	} catch ( err ) { }
}

/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
jQuery.event = {

	global: {},

	add: function( elem, types, handler, data, selector ) {

		var handleObjIn, eventHandle, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = data_priv.get( elem );

		// Don't attach events to noData or text/comment nodes (but allow plain objects)
		if ( !elemData ) {
			return;
		}

		// Caller can pass in an object of custom data in lieu of the handler
		if ( handler.handler ) {
			handleObjIn = handler;
			handler = handleObjIn.handler;
			selector = handleObjIn.selector;
		}

		// Make sure that the handler has a unique ID, used to find/remove it later
		if ( !handler.guid ) {
			handler.guid = jQuery.guid++;
		}

		// Init the element's event structure and main handler, if this is the first
		if ( !(events = elemData.events) ) {
			events = elemData.events = {};
		}
		if ( !(eventHandle = elemData.handle) ) {
			eventHandle = elemData.handle = function( e ) {
				// Discard the second event of a jQuery.event.trigger() and
				// when an event is called after a page has unloaded
				return typeof jQuery !== strundefined && jQuery.event.triggered !== e.type ?
					jQuery.event.dispatch.apply( elem, arguments ) : undefined;
			};
		}

		// Handle multiple events separated by a space
		types = ( types || "" ).match( rnotwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// There *must* be a type, no attaching namespace-only handlers
			if ( !type ) {
				continue;
			}

			// If event changes its type, use the special event handlers for the changed type
			special = jQuery.event.special[ type ] || {};

			// If selector defined, determine special event api type, otherwise given type
			type = ( selector ? special.delegateType : special.bindType ) || type;

			// Update special based on newly reset type
			special = jQuery.event.special[ type ] || {};

			// handleObj is passed to all event handlers
			handleObj = jQuery.extend({
				type: type,
				origType: origType,
				data: data,
				handler: handler,
				guid: handler.guid,
				selector: selector,
				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
				namespace: namespaces.join(".")
			}, handleObjIn );

			// Init the event handler queue if we're the first
			if ( !(handlers = events[ type ]) ) {
				handlers = events[ type ] = [];
				handlers.delegateCount = 0;

				// Only use addEventListener if the special events handler returns false
				if ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {
					if ( elem.addEventListener ) {
						elem.addEventListener( type, eventHandle, false );
					}
				}
			}

			if ( special.add ) {
				special.add.call( elem, handleObj );

				if ( !handleObj.handler.guid ) {
					handleObj.handler.guid = handler.guid;
				}
			}

			// Add to the element's handler list, delegates in front
			if ( selector ) {
				handlers.splice( handlers.delegateCount++, 0, handleObj );
			} else {
				handlers.push( handleObj );
			}

			// Keep track of which events have ever been used, for event optimization
			jQuery.event.global[ type ] = true;
		}

	},

	// Detach an event or set of events from an element
	remove: function( elem, types, handler, selector, mappedTypes ) {

		var j, origCount, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = data_priv.hasData( elem ) && data_priv.get( elem );

		if ( !elemData || !(events = elemData.events) ) {
			return;
		}

		// Once for each type.namespace in types; type may be omitted
		types = ( types || "" ).match( rnotwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// Unbind all events (on this namespace, if provided) for the element
			if ( !type ) {
				for ( type in events ) {
					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
				}
				continue;
			}

			special = jQuery.event.special[ type ] || {};
			type = ( selector ? special.delegateType : special.bindType ) || type;
			handlers = events[ type ] || [];
			tmp = tmp[2] && new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" );

			// Remove matching events
			origCount = j = handlers.length;
			while ( j-- ) {
				handleObj = handlers[ j ];

				if ( ( mappedTypes || origType === handleObj.origType ) &&
					( !handler || handler.guid === handleObj.guid ) &&
					( !tmp || tmp.test( handleObj.namespace ) ) &&
					( !selector || selector === handleObj.selector || selector === "**" && handleObj.selector ) ) {
					handlers.splice( j, 1 );

					if ( handleObj.selector ) {
						handlers.delegateCount--;
					}
					if ( special.remove ) {
						special.remove.call( elem, handleObj );
					}
				}
			}

			// Remove generic event handler if we removed something and no more handlers exist
			// (avoids potential for endless recursion during removal of special event handlers)
			if ( origCount && !handlers.length ) {
				if ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {
					jQuery.removeEvent( elem, type, elemData.handle );
				}

				delete events[ type ];
			}
		}

		// Remove the expando if it's no longer used
		if ( jQuery.isEmptyObject( events ) ) {
			delete elemData.handle;
			data_priv.remove( elem, "events" );
		}
	},

	trigger: function( event, data, elem, onlyHandlers ) {

		var i, cur, tmp, bubbleType, ontype, handle, special,
			eventPath = [ elem || document ],
			type = hasOwn.call( event, "type" ) ? event.type : event,
			namespaces = hasOwn.call( event, "namespace" ) ? event.namespace.split(".") : [];

		cur = tmp = elem = elem || document;

		// Don't do events on text and comment nodes
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		// focus/blur morphs to focusin/out; ensure we're not firing them right now
		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
			return;
		}

		if ( type.indexOf(".") >= 0 ) {
			// Namespaced trigger; create a regexp to match event type in handle()
			namespaces = type.split(".");
			type = namespaces.shift();
			namespaces.sort();
		}
		ontype = type.indexOf(":") < 0 && "on" + type;

		// Caller can pass in a jQuery.Event object, Object, or just an event type string
		event = event[ jQuery.expando ] ?
			event :
			new jQuery.Event( type, typeof event === "object" && event );

		// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
		event.isTrigger = onlyHandlers ? 2 : 3;
		event.namespace = namespaces.join(".");
		event.namespace_re = event.namespace ?
			new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" ) :
			null;

		// Clean up the event in case it is being reused
		event.result = undefined;
		if ( !event.target ) {
			event.target = elem;
		}

		// Clone any incoming data and prepend the event, creating the handler arg list
		data = data == null ?
			[ event ] :
			jQuery.makeArray( data, [ event ] );

		// Allow special events to draw outside the lines
		special = jQuery.event.special[ type ] || {};
		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
			return;
		}

		// Determine event propagation path in advance, per W3C events spec (#9951)
		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
		if ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {

			bubbleType = special.delegateType || type;
			if ( !rfocusMorph.test( bubbleType + type ) ) {
				cur = cur.parentNode;
			}
			for ( ; cur; cur = cur.parentNode ) {
				eventPath.push( cur );
				tmp = cur;
			}

			// Only add window if we got to document (e.g., not plain obj or detached DOM)
			if ( tmp === (elem.ownerDocument || document) ) {
				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
			}
		}

		// Fire handlers on the event path
		i = 0;
		while ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {

			event.type = i > 1 ?
				bubbleType :
				special.bindType || type;

			// jQuery handler
			handle = ( data_priv.get( cur, "events" ) || {} )[ event.type ] && data_priv.get( cur, "handle" );
			if ( handle ) {
				handle.apply( cur, data );
			}

			// Native handler
			handle = ontype && cur[ ontype ];
			if ( handle && handle.apply && jQuery.acceptData( cur ) ) {
				event.result = handle.apply( cur, data );
				if ( event.result === false ) {
					event.preventDefault();
				}
			}
		}
		event.type = type;

		// If nobody prevented the default action, do it now
		if ( !onlyHandlers && !event.isDefaultPrevented() ) {

			if ( (!special._default || special._default.apply( eventPath.pop(), data ) === false) &&
				jQuery.acceptData( elem ) ) {

				// Call a native DOM method on the target with the same name name as the event.
				// Don't do default actions on window, that's where global variables be (#6170)
				if ( ontype && jQuery.isFunction( elem[ type ] ) && !jQuery.isWindow( elem ) ) {

					// Don't re-trigger an onFOO event when we call its FOO() method
					tmp = elem[ ontype ];

					if ( tmp ) {
						elem[ ontype ] = null;
					}

					// Prevent re-triggering of the same event, since we already bubbled it above
					jQuery.event.triggered = type;
					elem[ type ]();
					jQuery.event.triggered = undefined;

					if ( tmp ) {
						elem[ ontype ] = tmp;
					}
				}
			}
		}

		return event.result;
	},

	dispatch: function( event ) {

		// Make a writable jQuery.Event from the native event object
		event = jQuery.event.fix( event );

		var i, j, ret, matched, handleObj,
			handlerQueue = [],
			args = slice.call( arguments ),
			handlers = ( data_priv.get( this, "events" ) || {} )[ event.type ] || [],
			special = jQuery.event.special[ event.type ] || {};

		// Use the fix-ed jQuery.Event rather than the (read-only) native event
		args[0] = event;
		event.delegateTarget = this;

		// Call the preDispatch hook for the mapped type, and let it bail if desired
		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
			return;
		}

		// Determine handlers
		handlerQueue = jQuery.event.handlers.call( this, event, handlers );

		// Run delegates first; they may want to stop propagation beneath us
		i = 0;
		while ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {
			event.currentTarget = matched.elem;

			j = 0;
			while ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {

				// Triggered event must either 1) have no namespace, or 2) have namespace(s)
				// a subset or equal to those in the bound event (both can have no namespace).
				if ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {

					event.handleObj = handleObj;
					event.data = handleObj.data;

					ret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )
							.apply( matched.elem, args );

					if ( ret !== undefined ) {
						if ( (event.result = ret) === false ) {
							event.preventDefault();
							event.stopPropagation();
						}
					}
				}
			}
		}

		// Call the postDispatch hook for the mapped type
		if ( special.postDispatch ) {
			special.postDispatch.call( this, event );
		}

		return event.result;
	},

	handlers: function( event, handlers ) {
		var i, matches, sel, handleObj,
			handlerQueue = [],
			delegateCount = handlers.delegateCount,
			cur = event.target;

		// Find delegate handlers
		// Black-hole SVG <use> instance trees (#13180)
		// Avoid non-left-click bubbling in Firefox (#3861)
		if ( delegateCount && cur.nodeType && (!event.button || event.type !== "click") ) {

			for ( ; cur !== this; cur = cur.parentNode || this ) {

				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
				if ( cur.disabled !== true || event.type !== "click" ) {
					matches = [];
					for ( i = 0; i < delegateCount; i++ ) {
						handleObj = handlers[ i ];

						// Don't conflict with Object.prototype properties (#13203)
						sel = handleObj.selector + " ";

						if ( matches[ sel ] === undefined ) {
							matches[ sel ] = handleObj.needsContext ?
								jQuery( sel, this ).index( cur ) >= 0 :
								jQuery.find( sel, this, null, [ cur ] ).length;
						}
						if ( matches[ sel ] ) {
							matches.push( handleObj );
						}
					}
					if ( matches.length ) {
						handlerQueue.push({ elem: cur, handlers: matches });
					}
				}
			}
		}

		// Add the remaining (directly-bound) handlers
		if ( delegateCount < handlers.length ) {
			handlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });
		}

		return handlerQueue;
	},

	// Includes some event props shared by KeyEvent and MouseEvent
	props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),

	fixHooks: {},

	keyHooks: {
		props: "char charCode key keyCode".split(" "),
		filter: function( event, original ) {

			// Add which for key events
			if ( event.which == null ) {
				event.which = original.charCode != null ? original.charCode : original.keyCode;
			}

			return event;
		}
	},

	mouseHooks: {
		props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
		filter: function( event, original ) {
			var eventDoc, doc, body,
				button = original.button;

			// Calculate pageX/Y if missing and clientX/Y available
			if ( event.pageX == null && original.clientX != null ) {
				eventDoc = event.target.ownerDocument || document;
				doc = eventDoc.documentElement;
				body = eventDoc.body;

				event.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );
				event.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );
			}

			// Add which for click: 1 === left; 2 === middle; 3 === right
			// Note: button is not normalized, so don't use it
			if ( !event.which && button !== undefined ) {
				event.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );
			}

			return event;
		}
	},

	fix: function( event ) {
		if ( event[ jQuery.expando ] ) {
			return event;
		}

		// Create a writable copy of the event object and normalize some properties
		var i, prop, copy,
			type = event.type,
			originalEvent = event,
			fixHook = this.fixHooks[ type ];

		if ( !fixHook ) {
			this.fixHooks[ type ] = fixHook =
				rmouseEvent.test( type ) ? this.mouseHooks :
				rkeyEvent.test( type ) ? this.keyHooks :
				{};
		}
		copy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;

		event = new jQuery.Event( originalEvent );

		i = copy.length;
		while ( i-- ) {
			prop = copy[ i ];
			event[ prop ] = originalEvent[ prop ];
		}

		// Support: Cordova 2.5 (WebKit) (#13255)
		// All events should have a target; Cordova deviceready doesn't
		if ( !event.target ) {
			event.target = document;
		}

		// Support: Safari 6.0+, Chrome<28
		// Target should not be a text node (#504, #13143)
		if ( event.target.nodeType === 3 ) {
			event.target = event.target.parentNode;
		}

		return fixHook.filter ? fixHook.filter( event, originalEvent ) : event;
	},

	special: {
		load: {
			// Prevent triggered image.load events from bubbling to window.load
			noBubble: true
		},
		focus: {
			// Fire native event if possible so blur/focus sequence is correct
			trigger: function() {
				if ( this !== safeActiveElement() && this.focus ) {
					this.focus();
					return false;
				}
			},
			delegateType: "focusin"
		},
		blur: {
			trigger: function() {
				if ( this === safeActiveElement() && this.blur ) {
					this.blur();
					return false;
				}
			},
			delegateType: "focusout"
		},
		click: {
			// For checkbox, fire native event so checked state will be right
			trigger: function() {
				if ( this.type === "checkbox" && this.click && jQuery.nodeName( this, "input" ) ) {
					this.click();
					return false;
				}
			},

			// For cross-browser consistency, don't fire native .click() on links
			_default: function( event ) {
				return jQuery.nodeName( event.target, "a" );
			}
		},

		beforeunload: {
			postDispatch: function( event ) {

				// Support: Firefox 20+
				// Firefox doesn't alert if the returnValue field is not set.
				if ( event.result !== undefined && event.originalEvent ) {
					event.originalEvent.returnValue = event.result;
				}
			}
		}
	},

	simulate: function( type, elem, event, bubble ) {
		// Piggyback on a donor event to simulate a different one.
		// Fake originalEvent to avoid donor's stopPropagation, but if the
		// simulated event prevents default then we do the same on the donor.
		var e = jQuery.extend(
			new jQuery.Event(),
			event,
			{
				type: type,
				isSimulated: true,
				originalEvent: {}
			}
		);
		if ( bubble ) {
			jQuery.event.trigger( e, null, elem );
		} else {
			jQuery.event.dispatch.call( elem, e );
		}
		if ( e.isDefaultPrevented() ) {
			event.preventDefault();
		}
	}
};

jQuery.removeEvent = function( elem, type, handle ) {
	if ( elem.removeEventListener ) {
		elem.removeEventListener( type, handle, false );
	}
};

jQuery.Event = function( src, props ) {
	// Allow instantiation without the 'new' keyword
	if ( !(this instanceof jQuery.Event) ) {
		return new jQuery.Event( src, props );
	}

	// Event object
	if ( src && src.type ) {
		this.originalEvent = src;
		this.type = src.type;

		// Events bubbling up the document may have been marked as prevented
		// by a handler lower down the tree; reflect the correct value.
		this.isDefaultPrevented = src.defaultPrevented ||
				src.defaultPrevented === undefined &&
				// Support: Android<4.0
				src.returnValue === false ?
			returnTrue :
			returnFalse;

	// Event type
	} else {
		this.type = src;
	}

	// Put explicitly provided properties onto the event object
	if ( props ) {
		jQuery.extend( this, props );
	}

	// Create a timestamp if incoming event doesn't have one
	this.timeStamp = src && src.timeStamp || jQuery.now();

	// Mark it as fixed
	this[ jQuery.expando ] = true;
};

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
jQuery.Event.prototype = {
	isDefaultPrevented: returnFalse,
	isPropagationStopped: returnFalse,
	isImmediatePropagationStopped: returnFalse,

	preventDefault: function() {
		var e = this.originalEvent;

		this.isDefaultPrevented = returnTrue;

		if ( e && e.preventDefault ) {
			e.preventDefault();
		}
	},
	stopPropagation: function() {
		var e = this.originalEvent;

		this.isPropagationStopped = returnTrue;

		if ( e && e.stopPropagation ) {
			e.stopPropagation();
		}
	},
	stopImmediatePropagation: function() {
		var e = this.originalEvent;

		this.isImmediatePropagationStopped = returnTrue;

		if ( e && e.stopImmediatePropagation ) {
			e.stopImmediatePropagation();
		}

		this.stopPropagation();
	}
};

// Create mouseenter/leave events using mouseover/out and event-time checks
// Support: Chrome 15+
jQuery.each({
	mouseenter: "mouseover",
	mouseleave: "mouseout",
	pointerenter: "pointerover",
	pointerleave: "pointerout"
}, function( orig, fix ) {
	jQuery.event.special[ orig ] = {
		delegateType: fix,
		bindType: fix,

		handle: function( event ) {
			var ret,
				target = this,
				related = event.relatedTarget,
				handleObj = event.handleObj;

			// For mousenter/leave call the handler if related is outside the target.
			// NB: No relatedTarget if the mouse left/entered the browser window
			if ( !related || (related !== target && !jQuery.contains( target, related )) ) {
				event.type = handleObj.origType;
				ret = handleObj.handler.apply( this, arguments );
				event.type = fix;
			}
			return ret;
		}
	};
});

// Support: Firefox, Chrome, Safari
// Create "bubbling" focus and blur events
if ( !support.focusinBubbles ) {
	jQuery.each({ focus: "focusin", blur: "focusout" }, function( orig, fix ) {

		// Attach a single capturing handler on the document while someone wants focusin/focusout
		var handler = function( event ) {
				jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );
			};

		jQuery.event.special[ fix ] = {
			setup: function() {
				var doc = this.ownerDocument || this,
					attaches = data_priv.access( doc, fix );

				if ( !attaches ) {
					doc.addEventListener( orig, handler, true );
				}
				data_priv.access( doc, fix, ( attaches || 0 ) + 1 );
			},
			teardown: function() {
				var doc = this.ownerDocument || this,
					attaches = data_priv.access( doc, fix ) - 1;

				if ( !attaches ) {
					doc.removeEventListener( orig, handler, true );
					data_priv.remove( doc, fix );

				} else {
					data_priv.access( doc, fix, attaches );
				}
			}
		};
	});
}

jQuery.fn.extend({

	on: function( types, selector, data, fn, /*INTERNAL*/ one ) {
		var origFn, type;

		// Types can be a map of types/handlers
		if ( typeof types === "object" ) {
			// ( types-Object, selector, data )
			if ( typeof selector !== "string" ) {
				// ( types-Object, data )
				data = data || selector;
				selector = undefined;
			}
			for ( type in types ) {
				this.on( type, selector, data, types[ type ], one );
			}
			return this;
		}

		if ( data == null && fn == null ) {
			// ( types, fn )
			fn = selector;
			data = selector = undefined;
		} else if ( fn == null ) {
			if ( typeof selector === "string" ) {
				// ( types, selector, fn )
				fn = data;
				data = undefined;
			} else {
				// ( types, data, fn )
				fn = data;
				data = selector;
				selector = undefined;
			}
		}
		if ( fn === false ) {
			fn = returnFalse;
		} else if ( !fn ) {
			return this;
		}

		if ( one === 1 ) {
			origFn = fn;
			fn = function( event ) {
				// Can use an empty set, since event contains the info
				jQuery().off( event );
				return origFn.apply( this, arguments );
			};
			// Use same guid so caller can remove using origFn
			fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
		}
		return this.each( function() {
			jQuery.event.add( this, types, fn, data, selector );
		});
	},
	one: function( types, selector, data, fn ) {
		return this.on( types, selector, data, fn, 1 );
	},
	off: function( types, selector, fn ) {
		var handleObj, type;
		if ( types && types.preventDefault && types.handleObj ) {
			// ( event )  dispatched jQuery.Event
			handleObj = types.handleObj;
			jQuery( types.delegateTarget ).off(
				handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType,
				handleObj.selector,
				handleObj.handler
			);
			return this;
		}
		if ( typeof types === "object" ) {
			// ( types-object [, selector] )
			for ( type in types ) {
				this.off( type, selector, types[ type ] );
			}
			return this;
		}
		if ( selector === false || typeof selector === "function" ) {
			// ( types [, fn] )
			fn = selector;
			selector = undefined;
		}
		if ( fn === false ) {
			fn = returnFalse;
		}
		return this.each(function() {
			jQuery.event.remove( this, types, fn, selector );
		});
	},

	trigger: function( type, data ) {
		return this.each(function() {
			jQuery.event.trigger( type, data, this );
		});
	},
	triggerHandler: function( type, data ) {
		var elem = this[0];
		if ( elem ) {
			return jQuery.event.trigger( type, data, elem, true );
		}
	}
});


var
	rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
	rtagName = /<([\w:]+)/,
	rhtml = /<|&#?\w+;/,
	rnoInnerhtml = /<(?:script|style|link)/i,
	// checked="checked" or checked
	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
	rscriptType = /^$|\/(?:java|ecma)script/i,
	rscriptTypeMasked = /^true\/(.*)/,
	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,

	// We have to close these tags to support XHTML (#13200)
	wrapMap = {

		// Support: IE9
		option: [ 1, "<select multiple='multiple'>", "</select>" ],

		thead: [ 1, "<table>", "</table>" ],
		col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
		tr: [ 2, "<table><tbody>", "</tbody></table>" ],
		td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],

		_default: [ 0, "", "" ]
	};

// Support: IE9
wrapMap.optgroup = wrapMap.option;

wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
wrapMap.th = wrapMap.td;

// Support: 1.x compatibility
// Manipulating tables requires a tbody
function manipulationTarget( elem, content ) {
	return jQuery.nodeName( elem, "table" ) &&
		jQuery.nodeName( content.nodeType !== 11 ? content : content.firstChild, "tr" ) ?

		elem.getElementsByTagName("tbody")[0] ||
			elem.appendChild( elem.ownerDocument.createElement("tbody") ) :
		elem;
}

// Replace/restore the type attribute of script elements for safe DOM manipulation
function disableScript( elem ) {
	elem.type = (elem.getAttribute("type") !== null) + "/" + elem.type;
	return elem;
}
function restoreScript( elem ) {
	var match = rscriptTypeMasked.exec( elem.type );

	if ( match ) {
		elem.type = match[ 1 ];
	} else {
		elem.removeAttribute("type");
	}

	return elem;
}

// Mark scripts as having already been evaluated
function setGlobalEval( elems, refElements ) {
	var i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		data_priv.set(
			elems[ i ], "globalEval", !refElements || data_priv.get( refElements[ i ], "globalEval" )
		);
	}
}

function cloneCopyEvent( src, dest ) {
	var i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;

	if ( dest.nodeType !== 1 ) {
		return;
	}

	// 1. Copy private data: events, handlers, etc.
	if ( data_priv.hasData( src ) ) {
		pdataOld = data_priv.access( src );
		pdataCur = data_priv.set( dest, pdataOld );
		events = pdataOld.events;

		if ( events ) {
			delete pdataCur.handle;
			pdataCur.events = {};

			for ( type in events ) {
				for ( i = 0, l = events[ type ].length; i < l; i++ ) {
					jQuery.event.add( dest, type, events[ type ][ i ] );
				}
			}
		}
	}

	// 2. Copy user data
	if ( data_user.hasData( src ) ) {
		udataOld = data_user.access( src );
		udataCur = jQuery.extend( {}, udataOld );

		data_user.set( dest, udataCur );
	}
}

function getAll( context, tag ) {
	var ret = context.getElementsByTagName ? context.getElementsByTagName( tag || "*" ) :
			context.querySelectorAll ? context.querySelectorAll( tag || "*" ) :
			[];

	return tag === undefined || tag && jQuery.nodeName( context, tag ) ?
		jQuery.merge( [ context ], ret ) :
		ret;
}

// Fix IE bugs, see support tests
function fixInput( src, dest ) {
	var nodeName = dest.nodeName.toLowerCase();

	// Fails to persist the checked state of a cloned checkbox or radio button.
	if ( nodeName === "input" && rcheckableType.test( src.type ) ) {
		dest.checked = src.checked;

	// Fails to return the selected option to the default selected state when cloning options
	} else if ( nodeName === "input" || nodeName === "textarea" ) {
		dest.defaultValue = src.defaultValue;
	}
}

jQuery.extend({
	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
		var i, l, srcElements, destElements,
			clone = elem.cloneNode( true ),
			inPage = jQuery.contains( elem.ownerDocument, elem );

		// Fix IE cloning issues
		if ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&
				!jQuery.isXMLDoc( elem ) ) {

			// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2
			destElements = getAll( clone );
			srcElements = getAll( elem );

			for ( i = 0, l = srcElements.length; i < l; i++ ) {
				fixInput( srcElements[ i ], destElements[ i ] );
			}
		}

		// Copy the events from the original to the clone
		if ( dataAndEvents ) {
			if ( deepDataAndEvents ) {
				srcElements = srcElements || getAll( elem );
				destElements = destElements || getAll( clone );

				for ( i = 0, l = srcElements.length; i < l; i++ ) {
					cloneCopyEvent( srcElements[ i ], destElements[ i ] );
				}
			} else {
				cloneCopyEvent( elem, clone );
			}
		}

		// Preserve script evaluation history
		destElements = getAll( clone, "script" );
		if ( destElements.length > 0 ) {
			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
		}

		// Return the cloned set
		return clone;
	},

	buildFragment: function( elems, context, scripts, selection ) {
		var elem, tmp, tag, wrap, contains, j,
			fragment = context.createDocumentFragment(),
			nodes = [],
			i = 0,
			l = elems.length;

		for ( ; i < l; i++ ) {
			elem = elems[ i ];

			if ( elem || elem === 0 ) {

				// Add nodes directly
				if ( jQuery.type( elem ) === "object" ) {
					// Support: QtWebKit, PhantomJS
					// push.apply(_, arraylike) throws on ancient WebKit
					jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );

				// Convert non-html into a text node
				} else if ( !rhtml.test( elem ) ) {
					nodes.push( context.createTextNode( elem ) );

				// Convert html into DOM nodes
				} else {
					tmp = tmp || fragment.appendChild( context.createElement("div") );

					// Deserialize a standard representation
					tag = ( rtagName.exec( elem ) || [ "", "" ] )[ 1 ].toLowerCase();
					wrap = wrapMap[ tag ] || wrapMap._default;
					tmp.innerHTML = wrap[ 1 ] + elem.replace( rxhtmlTag, "<$1></$2>" ) + wrap[ 2 ];

					// Descend through wrappers to the right content
					j = wrap[ 0 ];
					while ( j-- ) {
						tmp = tmp.lastChild;
					}

					// Support: QtWebKit, PhantomJS
					// push.apply(_, arraylike) throws on ancient WebKit
					jQuery.merge( nodes, tmp.childNodes );

					// Remember the top-level container
					tmp = fragment.firstChild;

					// Ensure the created nodes are orphaned (#12392)
					tmp.textContent = "";
				}
			}
		}

		// Remove wrapper from fragment
		fragment.textContent = "";

		i = 0;
		while ( (elem = nodes[ i++ ]) ) {

			// #4087 - If origin and destination elements are the same, and this is
			// that element, do not do anything
			if ( selection && jQuery.inArray( elem, selection ) !== -1 ) {
				continue;
			}

			contains = jQuery.contains( elem.ownerDocument, elem );

			// Append to fragment
			tmp = getAll( fragment.appendChild( elem ), "script" );

			// Preserve script evaluation history
			if ( contains ) {
				setGlobalEval( tmp );
			}

			// Capture executables
			if ( scripts ) {
				j = 0;
				while ( (elem = tmp[ j++ ]) ) {
					if ( rscriptType.test( elem.type || "" ) ) {
						scripts.push( elem );
					}
				}
			}
		}

		return fragment;
	},

	cleanData: function( elems ) {
		var data, elem, type, key,
			special = jQuery.event.special,
			i = 0;

		for ( ; (elem = elems[ i ]) !== undefined; i++ ) {
			if ( jQuery.acceptData( elem ) ) {
				key = elem[ data_priv.expando ];

				if ( key && (data = data_priv.cache[ key ]) ) {
					if ( data.events ) {
						for ( type in data.events ) {
							if ( special[ type ] ) {
								jQuery.event.remove( elem, type );

							// This is a shortcut to avoid jQuery.event.remove's overhead
							} else {
								jQuery.removeEvent( elem, type, data.handle );
							}
						}
					}
					if ( data_priv.cache[ key ] ) {
						// Discard any remaining `private` data
						delete data_priv.cache[ key ];
					}
				}
			}
			// Discard any remaining `user` data
			delete data_user.cache[ elem[ data_user.expando ] ];
		}
	}
});

jQuery.fn.extend({
	text: function( value ) {
		return access( this, function( value ) {
			return value === undefined ?
				jQuery.text( this ) :
				this.empty().each(function() {
					if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
						this.textContent = value;
					}
				});
		}, null, value, arguments.length );
	},

	append: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.appendChild( elem );
			}
		});
	},

	prepend: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.insertBefore( elem, target.firstChild );
			}
		});
	},

	before: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this );
			}
		});
	},

	after: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this.nextSibling );
			}
		});
	},

	remove: function( selector, keepData /* Internal Use Only */ ) {
		var elem,
			elems = selector ? jQuery.filter( selector, this ) : this,
			i = 0;

		for ( ; (elem = elems[i]) != null; i++ ) {
			if ( !keepData && elem.nodeType === 1 ) {
				jQuery.cleanData( getAll( elem ) );
			}

			if ( elem.parentNode ) {
				if ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {
					setGlobalEval( getAll( elem, "script" ) );
				}
				elem.parentNode.removeChild( elem );
			}
		}

		return this;
	},

	empty: function() {
		var elem,
			i = 0;

		for ( ; (elem = this[i]) != null; i++ ) {
			if ( elem.nodeType === 1 ) {

				// Prevent memory leaks
				jQuery.cleanData( getAll( elem, false ) );

				// Remove any remaining nodes
				elem.textContent = "";
			}
		}

		return this;
	},

	clone: function( dataAndEvents, deepDataAndEvents ) {
		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

		return this.map(function() {
			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
		});
	},

	html: function( value ) {
		return access( this, function( value ) {
			var elem = this[ 0 ] || {},
				i = 0,
				l = this.length;

			if ( value === undefined && elem.nodeType === 1 ) {
				return elem.innerHTML;
			}

			// See if we can take a shortcut and just use innerHTML
			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
				!wrapMap[ ( rtagName.exec( value ) || [ "", "" ] )[ 1 ].toLowerCase() ] ) {

				value = value.replace( rxhtmlTag, "<$1></$2>" );

				try {
					for ( ; i < l; i++ ) {
						elem = this[ i ] || {};

						// Remove element nodes and prevent memory leaks
						if ( elem.nodeType === 1 ) {
							jQuery.cleanData( getAll( elem, false ) );
							elem.innerHTML = value;
						}
					}

					elem = 0;

				// If using innerHTML throws an exception, use the fallback method
				} catch( e ) {}
			}

			if ( elem ) {
				this.empty().append( value );
			}
		}, null, value, arguments.length );
	},

	replaceWith: function() {
		var arg = arguments[ 0 ];

		// Make the changes, replacing each context element with the new content
		this.domManip( arguments, function( elem ) {
			arg = this.parentNode;

			jQuery.cleanData( getAll( this ) );

			if ( arg ) {
				arg.replaceChild( elem, this );
			}
		});

		// Force removal if there was no new content (e.g., from empty arguments)
		return arg && (arg.length || arg.nodeType) ? this : this.remove();
	},

	detach: function( selector ) {
		return this.remove( selector, true );
	},

	domManip: function( args, callback ) {

		// Flatten any nested arrays
		args = concat.apply( [], args );

		var fragment, first, scripts, hasScripts, node, doc,
			i = 0,
			l = this.length,
			set = this,
			iNoClone = l - 1,
			value = args[ 0 ],
			isFunction = jQuery.isFunction( value );

		// We can't cloneNode fragments that contain checked, in WebKit
		if ( isFunction ||
				( l > 1 && typeof value === "string" &&
					!support.checkClone && rchecked.test( value ) ) ) {
			return this.each(function( index ) {
				var self = set.eq( index );
				if ( isFunction ) {
					args[ 0 ] = value.call( this, index, self.html() );
				}
				self.domManip( args, callback );
			});
		}

		if ( l ) {
			fragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, this );
			first = fragment.firstChild;

			if ( fragment.childNodes.length === 1 ) {
				fragment = first;
			}

			if ( first ) {
				scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
				hasScripts = scripts.length;

				// Use the original fragment for the last item instead of the first because it can end up
				// being emptied incorrectly in certain situations (#8070).
				for ( ; i < l; i++ ) {
					node = fragment;

					if ( i !== iNoClone ) {
						node = jQuery.clone( node, true, true );

						// Keep references to cloned scripts for later restoration
						if ( hasScripts ) {
							// Support: QtWebKit
							// jQuery.merge because push.apply(_, arraylike) throws
							jQuery.merge( scripts, getAll( node, "script" ) );
						}
					}

					callback.call( this[ i ], node, i );
				}

				if ( hasScripts ) {
					doc = scripts[ scripts.length - 1 ].ownerDocument;

					// Reenable scripts
					jQuery.map( scripts, restoreScript );

					// Evaluate executable scripts on first document insertion
					for ( i = 0; i < hasScripts; i++ ) {
						node = scripts[ i ];
						if ( rscriptType.test( node.type || "" ) &&
							!data_priv.access( node, "globalEval" ) && jQuery.contains( doc, node ) ) {

							if ( node.src ) {
								// Optional AJAX dependency, but won't run scripts if not present
								if ( jQuery._evalUrl ) {
									jQuery._evalUrl( node.src );
								}
							} else {
								jQuery.globalEval( node.textContent.replace( rcleanScript, "" ) );
							}
						}
					}
				}
			}
		}

		return this;
	}
});

jQuery.each({
	appendTo: "append",
	prependTo: "prepend",
	insertBefore: "before",
	insertAfter: "after",
	replaceAll: "replaceWith"
}, function( name, original ) {
	jQuery.fn[ name ] = function( selector ) {
		var elems,
			ret = [],
			insert = jQuery( selector ),
			last = insert.length - 1,
			i = 0;

		for ( ; i <= last; i++ ) {
			elems = i === last ? this : this.clone( true );
			jQuery( insert[ i ] )[ original ]( elems );

			// Support: QtWebKit
			// .get() because push.apply(_, arraylike) throws
			push.apply( ret, elems.get() );
		}

		return this.pushStack( ret );
	};
});


var iframe,
	elemdisplay = {};

/**
 * Retrieve the actual display of a element
 * @param {String} name nodeName of the element
 * @param {Object} doc Document object
 */
// Called only from within defaultDisplay
function actualDisplay( name, doc ) {
	var style,
		elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),

		// getDefaultComputedStyle might be reliably used only on attached element
		display = window.getDefaultComputedStyle && ( style = window.getDefaultComputedStyle( elem[ 0 ] ) ) ?

			// Use of this method is a temporary fix (more like optimization) until something better comes along,
			// since it was removed from specification and supported only in FF
			style.display : jQuery.css( elem[ 0 ], "display" );

	// We don't have any data stored on the element,
	// so use "detach" method as fast way to get rid of the element
	elem.detach();

	return display;
}

/**
 * Try to determine the default display value of an element
 * @param {String} nodeName
 */
function defaultDisplay( nodeName ) {
	var doc = document,
		display = elemdisplay[ nodeName ];

	if ( !display ) {
		display = actualDisplay( nodeName, doc );

		// If the simple way fails, read from inside an iframe
		if ( display === "none" || !display ) {

			// Use the already-created iframe if possible
			iframe = (iframe || jQuery( "<iframe frameborder='0' width='0' height='0'/>" )).appendTo( doc.documentElement );

			// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse
			doc = iframe[ 0 ].contentDocument;

			// Support: IE
			doc.write();
			doc.close();

			display = actualDisplay( nodeName, doc );
			iframe.detach();
		}

		// Store the correct default display
		elemdisplay[ nodeName ] = display;
	}

	return display;
}
var rmargin = (/^margin/);

var rnumnonpx = new RegExp( "^(" + pnum + ")(?!px)[a-z%]+$", "i" );

var getStyles = function( elem ) {
		// Support: IE<=11+, Firefox<=30+ (#15098, #14150)
		// IE throws on elements created in popups
		// FF meanwhile throws on frame elements through "defaultView.getComputedStyle"
		if ( elem.ownerDocument.defaultView.opener ) {
			return elem.ownerDocument.defaultView.getComputedStyle( elem, null );
		}

		return window.getComputedStyle( elem, null );
	};



function curCSS( elem, name, computed ) {
	var width, minWidth, maxWidth, ret,
		style = elem.style;

	computed = computed || getStyles( elem );

	// Support: IE9
	// getPropertyValue is only needed for .css('filter') (#12537)
	if ( computed ) {
		ret = computed.getPropertyValue( name ) || computed[ name ];
	}

	if ( computed ) {

		if ( ret === "" && !jQuery.contains( elem.ownerDocument, elem ) ) {
			ret = jQuery.style( elem, name );
		}

		// Support: iOS < 6
		// A tribute to the "awesome hack by Dean Edwards"
		// iOS < 6 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels
		// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values
		if ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {

			// Remember the original values
			width = style.width;
			minWidth = style.minWidth;
			maxWidth = style.maxWidth;

			// Put in the new values to get a computed value out
			style.minWidth = style.maxWidth = style.width = ret;
			ret = computed.width;

			// Revert the changed values
			style.width = width;
			style.minWidth = minWidth;
			style.maxWidth = maxWidth;
		}
	}

	return ret !== undefined ?
		// Support: IE
		// IE returns zIndex value as an integer.
		ret + "" :
		ret;
}


function addGetHookIf( conditionFn, hookFn ) {
	// Define the hook, we'll check on the first run if it's really needed.
	return {
		get: function() {
			if ( conditionFn() ) {
				// Hook not needed (or it's not possible to use it due
				// to missing dependency), remove it.
				delete this.get;
				return;
			}

			// Hook needed; redefine it so that the support test is not executed again.
			return (this.get = hookFn).apply( this, arguments );
		}
	};
}


(function() {
	var pixelPositionVal, boxSizingReliableVal,
		docElem = document.documentElement,
		container = document.createElement( "div" ),
		div = document.createElement( "div" );

	if ( !div.style ) {
		return;
	}

	// Support: IE9-11+
	// Style of cloned element affects source element cloned (#8908)
	div.style.backgroundClip = "content-box";
	div.cloneNode( true ).style.backgroundClip = "";
	support.clearCloneStyle = div.style.backgroundClip === "content-box";

	container.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;" +
		"position:absolute";
	container.appendChild( div );

	// Executing both pixelPosition & boxSizingReliable tests require only one layout
	// so they're executed at the same time to save the second computation.
	function computePixelPositionAndBoxSizingReliable() {
		div.style.cssText =
			// Support: Firefox<29, Android 2.3
			// Vendor-prefix box-sizing
			"-webkit-box-sizing:border-box;-moz-box-sizing:border-box;" +
			"box-sizing:border-box;display:block;margin-top:1%;top:1%;" +
			"border:1px;padding:1px;width:4px;position:absolute";
		div.innerHTML = "";
		docElem.appendChild( container );

		var divStyle = window.getComputedStyle( div, null );
		pixelPositionVal = divStyle.top !== "1%";
		boxSizingReliableVal = divStyle.width === "4px";

		docElem.removeChild( container );
	}

	// Support: node.js jsdom
	// Don't assume that getComputedStyle is a property of the global object
	if ( window.getComputedStyle ) {
		jQuery.extend( support, {
			pixelPosition: function() {

				// This test is executed only once but we still do memoizing
				// since we can use the boxSizingReliable pre-computing.
				// No need to check if the test was already performed, though.
				computePixelPositionAndBoxSizingReliable();
				return pixelPositionVal;
			},
			boxSizingReliable: function() {
				if ( boxSizingReliableVal == null ) {
					computePixelPositionAndBoxSizingReliable();
				}
				return boxSizingReliableVal;
			},
			reliableMarginRight: function() {

				// Support: Android 2.3
				// Check if div with explicit width and no margin-right incorrectly
				// gets computed margin-right based on width of container. (#3333)
				// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
				// This support function is only executed once so no memoizing is needed.
				var ret,
					marginDiv = div.appendChild( document.createElement( "div" ) );

				// Reset CSS: box-sizing; display; margin; border; padding
				marginDiv.style.cssText = div.style.cssText =
					// Support: Firefox<29, Android 2.3
					// Vendor-prefix box-sizing
					"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;" +
					"box-sizing:content-box;display:block;margin:0;border:0;padding:0";
				marginDiv.style.marginRight = marginDiv.style.width = "0";
				div.style.width = "1px";
				docElem.appendChild( container );

				ret = !parseFloat( window.getComputedStyle( marginDiv, null ).marginRight );

				docElem.removeChild( container );
				div.removeChild( marginDiv );

				return ret;
			}
		});
	}
})();


// A method for quickly swapping in/out CSS properties to get correct calculations.
jQuery.swap = function( elem, options, callback, args ) {
	var ret, name,
		old = {};

	// Remember the old values, and insert the new ones
	for ( name in options ) {
		old[ name ] = elem.style[ name ];
		elem.style[ name ] = options[ name ];
	}

	ret = callback.apply( elem, args || [] );

	// Revert the old values
	for ( name in options ) {
		elem.style[ name ] = old[ name ];
	}

	return ret;
};


var
	// Swappable if display is none or starts with table except "table", "table-cell", or "table-caption"
	// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
	rnumsplit = new RegExp( "^(" + pnum + ")(.*)$", "i" ),
	rrelNum = new RegExp( "^([+-])=(" + pnum + ")", "i" ),

	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
	cssNormalTransform = {
		letterSpacing: "0",
		fontWeight: "400"
	},

	cssPrefixes = [ "Webkit", "O", "Moz", "ms" ];

// Return a css property mapped to a potentially vendor prefixed property
function vendorPropName( style, name ) {

	// Shortcut for names that are not vendor prefixed
	if ( name in style ) {
		return name;
	}

	// Check for vendor prefixed names
	var capName = name[0].toUpperCase() + name.slice(1),
		origName = name,
		i = cssPrefixes.length;

	while ( i-- ) {
		name = cssPrefixes[ i ] + capName;
		if ( name in style ) {
			return name;
		}
	}

	return origName;
}

function setPositiveNumber( elem, value, subtract ) {
	var matches = rnumsplit.exec( value );
	return matches ?
		// Guard against undefined "subtract", e.g., when used as in cssHooks
		Math.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || "px" ) :
		value;
}

function augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {
	var i = extra === ( isBorderBox ? "border" : "content" ) ?
		// If we already have the right measurement, avoid augmentation
		4 :
		// Otherwise initialize for horizontal or vertical properties
		name === "width" ? 1 : 0,

		val = 0;

	for ( ; i < 4; i += 2 ) {
		// Both box models exclude margin, so add it if we want it
		if ( extra === "margin" ) {
			val += jQuery.css( elem, extra + cssExpand[ i ], true, styles );
		}

		if ( isBorderBox ) {
			// border-box includes padding, so remove it if we want content
			if ( extra === "content" ) {
				val -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
			}

			// At this point, extra isn't border nor margin, so remove border
			if ( extra !== "margin" ) {
				val -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		} else {
			// At this point, extra isn't content, so add padding
			val += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );

			// At this point, extra isn't content nor padding, so add border
			if ( extra !== "padding" ) {
				val += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		}
	}

	return val;
}

function getWidthOrHeight( elem, name, extra ) {

	// Start with offset property, which is equivalent to the border-box value
	var valueIsBorderBox = true,
		val = name === "width" ? elem.offsetWidth : elem.offsetHeight,
		styles = getStyles( elem ),
		isBorderBox = jQuery.css( elem, "boxSizing", false, styles ) === "border-box";

	// Some non-html elements return undefined for offsetWidth, so check for null/undefined
	// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285
	// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668
	if ( val <= 0 || val == null ) {
		// Fall back to computed then uncomputed css if necessary
		val = curCSS( elem, name, styles );
		if ( val < 0 || val == null ) {
			val = elem.style[ name ];
		}

		// Computed unit is not pixels. Stop here and return.
		if ( rnumnonpx.test(val) ) {
			return val;
		}

		// Check for style in case a browser which returns unreliable values
		// for getComputedStyle silently falls back to the reliable elem.style
		valueIsBorderBox = isBorderBox &&
			( support.boxSizingReliable() || val === elem.style[ name ] );

		// Normalize "", auto, and prepare for extra
		val = parseFloat( val ) || 0;
	}

	// Use the active box-sizing model to add/subtract irrelevant styles
	return ( val +
		augmentWidthOrHeight(
			elem,
			name,
			extra || ( isBorderBox ? "border" : "content" ),
			valueIsBorderBox,
			styles
		)
	) + "px";
}

function showHide( elements, show ) {
	var display, elem, hidden,
		values = [],
		index = 0,
		length = elements.length;

	for ( ; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}

		values[ index ] = data_priv.get( elem, "olddisplay" );
		display = elem.style.display;
		if ( show ) {
			// Reset the inline display of this element to learn if it is
			// being hidden by cascaded rules or not
			if ( !values[ index ] && display === "none" ) {
				elem.style.display = "";
			}

			// Set elements which have been overridden with display: none
			// in a stylesheet to whatever the default browser style is
			// for such an element
			if ( elem.style.display === "" && isHidden( elem ) ) {
				values[ index ] = data_priv.access( elem, "olddisplay", defaultDisplay(elem.nodeName) );
			}
		} else {
			hidden = isHidden( elem );

			if ( display !== "none" || !hidden ) {
				data_priv.set( elem, "olddisplay", hidden ? display : jQuery.css( elem, "display" ) );
			}
		}
	}

	// Set the display of most of the elements in a second loop
	// to avoid the constant reflow
	for ( index = 0; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}
		if ( !show || elem.style.display === "none" || elem.style.display === "" ) {
			elem.style.display = show ? values[ index ] || "" : "none";
		}
	}

	return elements;
}

jQuery.extend({

	// Add in style property hooks for overriding the default
	// behavior of getting and setting a style property
	cssHooks: {
		opacity: {
			get: function( elem, computed ) {
				if ( computed ) {

					// We should always get a number back from opacity
					var ret = curCSS( elem, "opacity" );
					return ret === "" ? "1" : ret;
				}
			}
		}
	},

	// Don't automatically add "px" to these possibly-unitless properties
	cssNumber: {
		"columnCount": true,
		"fillOpacity": true,
		"flexGrow": true,
		"flexShrink": true,
		"fontWeight": true,
		"lineHeight": true,
		"opacity": true,
		"order": true,
		"orphans": true,
		"widows": true,
		"zIndex": true,
		"zoom": true
	},

	// Add in properties whose names you wish to fix before
	// setting or getting the value
	cssProps: {
		"float": "cssFloat"
	},

	// Get and set the style property on a DOM Node
	style: function( elem, name, value, extra ) {

		// Don't set styles on text and comment nodes
		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
			return;
		}

		// Make sure that we're working with the right name
		var ret, type, hooks,
			origName = jQuery.camelCase( name ),
			style = elem.style;

		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );

		// Gets hook for the prefixed version, then unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// Check if we're setting a value
		if ( value !== undefined ) {
			type = typeof value;

			// Convert "+=" or "-=" to relative numbers (#7345)
			if ( type === "string" && (ret = rrelNum.exec( value )) ) {
				value = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );
				// Fixes bug #9237
				type = "number";
			}

			// Make sure that null and NaN values aren't set (#7116)
			if ( value == null || value !== value ) {
				return;
			}

			// If a number, add 'px' to the (except for certain CSS properties)
			if ( type === "number" && !jQuery.cssNumber[ origName ] ) {
				value += "px";
			}

			// Support: IE9-11+
			// background-* props affect original clone's values
			if ( !support.clearCloneStyle && value === "" && name.indexOf( "background" ) === 0 ) {
				style[ name ] = "inherit";
			}

			// If a hook was provided, use that value, otherwise just set the specified value
			if ( !hooks || !("set" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {
				style[ name ] = value;
			}

		} else {
			// If a hook was provided get the non-computed value from there
			if ( hooks && "get" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {
				return ret;
			}

			// Otherwise just get the value from the style object
			return style[ name ];
		}
	},

	css: function( elem, name, extra, styles ) {
		var val, num, hooks,
			origName = jQuery.camelCase( name );

		// Make sure that we're working with the right name
		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );

		// Try prefixed name followed by the unprefixed name
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// If a hook was provided get the computed value from there
		if ( hooks && "get" in hooks ) {
			val = hooks.get( elem, true, extra );
		}

		// Otherwise, if a way to get the computed value exists, use that
		if ( val === undefined ) {
			val = curCSS( elem, name, styles );
		}

		// Convert "normal" to computed value
		if ( val === "normal" && name in cssNormalTransform ) {
			val = cssNormalTransform[ name ];
		}

		// Make numeric if forced or a qualifier was provided and val looks numeric
		if ( extra === "" || extra ) {
			num = parseFloat( val );
			return extra === true || jQuery.isNumeric( num ) ? num || 0 : val;
		}
		return val;
	}
});

jQuery.each([ "height", "width" ], function( i, name ) {
	jQuery.cssHooks[ name ] = {
		get: function( elem, computed, extra ) {
			if ( computed ) {

				// Certain elements can have dimension info if we invisibly show them
				// but it must have a current display style that would benefit
				return rdisplayswap.test( jQuery.css( elem, "display" ) ) && elem.offsetWidth === 0 ?
					jQuery.swap( elem, cssShow, function() {
						return getWidthOrHeight( elem, name, extra );
					}) :
					getWidthOrHeight( elem, name, extra );
			}
		},

		set: function( elem, value, extra ) {
			var styles = extra && getStyles( elem );
			return setPositiveNumber( elem, value, extra ?
				augmentWidthOrHeight(
					elem,
					name,
					extra,
					jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
					styles
				) : 0
			);
		}
	};
});

// Support: Android 2.3
jQuery.cssHooks.marginRight = addGetHookIf( support.reliableMarginRight,
	function( elem, computed ) {
		if ( computed ) {
			return jQuery.swap( elem, { "display": "inline-block" },
				curCSS, [ elem, "marginRight" ] );
		}
	}
);

// These hooks are used by animate to expand properties
jQuery.each({
	margin: "",
	padding: "",
	border: "Width"
}, function( prefix, suffix ) {
	jQuery.cssHooks[ prefix + suffix ] = {
		expand: function( value ) {
			var i = 0,
				expanded = {},

				// Assumes a single number if not a string
				parts = typeof value === "string" ? value.split(" ") : [ value ];

			for ( ; i < 4; i++ ) {
				expanded[ prefix + cssExpand[ i ] + suffix ] =
					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
			}

			return expanded;
		}
	};

	if ( !rmargin.test( prefix ) ) {
		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
	}
});

jQuery.fn.extend({
	css: function( name, value ) {
		return access( this, function( elem, name, value ) {
			var styles, len,
				map = {},
				i = 0;

			if ( jQuery.isArray( name ) ) {
				styles = getStyles( elem );
				len = name.length;

				for ( ; i < len; i++ ) {
					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
				}

				return map;
			}

			return value !== undefined ?
				jQuery.style( elem, name, value ) :
				jQuery.css( elem, name );
		}, name, value, arguments.length > 1 );
	},
	show: function() {
		return showHide( this, true );
	},
	hide: function() {
		return showHide( this );
	},
	toggle: function( state ) {
		if ( typeof state === "boolean" ) {
			return state ? this.show() : this.hide();
		}

		return this.each(function() {
			if ( isHidden( this ) ) {
				jQuery( this ).show();
			} else {
				jQuery( this ).hide();
			}
		});
	}
});


function Tween( elem, options, prop, end, easing ) {
	return new Tween.prototype.init( elem, options, prop, end, easing );
}
jQuery.Tween = Tween;

Tween.prototype = {
	constructor: Tween,
	init: function( elem, options, prop, end, easing, unit ) {
		this.elem = elem;
		this.prop = prop;
		this.easing = easing || "swing";
		this.options = options;
		this.start = this.now = this.cur();
		this.end = end;
		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
	},
	cur: function() {
		var hooks = Tween.propHooks[ this.prop ];

		return hooks && hooks.get ?
			hooks.get( this ) :
			Tween.propHooks._default.get( this );
	},
	run: function( percent ) {
		var eased,
			hooks = Tween.propHooks[ this.prop ];

		if ( this.options.duration ) {
			this.pos = eased = jQuery.easing[ this.easing ](
				percent, this.options.duration * percent, 0, 1, this.options.duration
			);
		} else {
			this.pos = eased = percent;
		}
		this.now = ( this.end - this.start ) * eased + this.start;

		if ( this.options.step ) {
			this.options.step.call( this.elem, this.now, this );
		}

		if ( hooks && hooks.set ) {
			hooks.set( this );
		} else {
			Tween.propHooks._default.set( this );
		}
		return this;
	}
};

Tween.prototype.init.prototype = Tween.prototype;

Tween.propHooks = {
	_default: {
		get: function( tween ) {
			var result;

			if ( tween.elem[ tween.prop ] != null &&
				(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {
				return tween.elem[ tween.prop ];
			}

			// Passing an empty string as a 3rd parameter to .css will automatically
			// attempt a parseFloat and fallback to a string if the parse fails.
			// Simple values such as "10px" are parsed to Float;
			// complex values such as "rotate(1rad)" are returned as-is.
			result = jQuery.css( tween.elem, tween.prop, "" );
			// Empty strings, null, undefined and "auto" are converted to 0.
			return !result || result === "auto" ? 0 : result;
		},
		set: function( tween ) {
			// Use step hook for back compat.
			// Use cssHook if its there.
			// Use .style if available and use plain properties where available.
			if ( jQuery.fx.step[ tween.prop ] ) {
				jQuery.fx.step[ tween.prop ]( tween );
			} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {
				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
			} else {
				tween.elem[ tween.prop ] = tween.now;
			}
		}
	}
};

// Support: IE9
// Panic based approach to setting things on disconnected nodes
Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
	set: function( tween ) {
		if ( tween.elem.nodeType && tween.elem.parentNode ) {
			tween.elem[ tween.prop ] = tween.now;
		}
	}
};

jQuery.easing = {
	linear: function( p ) {
		return p;
	},
	swing: function( p ) {
		return 0.5 - Math.cos( p * Math.PI ) / 2;
	}
};

jQuery.fx = Tween.prototype.init;

// Back Compat <1.8 extension point
jQuery.fx.step = {};




var
	fxNow, timerId,
	rfxtypes = /^(?:toggle|show|hide)$/,
	rfxnum = new RegExp( "^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i" ),
	rrun = /queueHooks$/,
	animationPrefilters = [ defaultPrefilter ],
	tweeners = {
		"*": [ function( prop, value ) {
			var tween = this.createTween( prop, value ),
				target = tween.cur(),
				parts = rfxnum.exec( value ),
				unit = parts && parts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),

				// Starting value computation is required for potential unit mismatches
				start = ( jQuery.cssNumber[ prop ] || unit !== "px" && +target ) &&
					rfxnum.exec( jQuery.css( tween.elem, prop ) ),
				scale = 1,
				maxIterations = 20;

			if ( start && start[ 3 ] !== unit ) {
				// Trust units reported by jQuery.css
				unit = unit || start[ 3 ];

				// Make sure we update the tween properties later on
				parts = parts || [];

				// Iteratively approximate from a nonzero starting point
				start = +target || 1;

				do {
					// If previous iteration zeroed out, double until we get *something*.
					// Use string for doubling so we don't accidentally see scale as unchanged below
					scale = scale || ".5";

					// Adjust and apply
					start = start / scale;
					jQuery.style( tween.elem, prop, start + unit );

				// Update scale, tolerating zero or NaN from tween.cur(),
				// break the loop if scale is unchanged or perfect, or if we've just had enough
				} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );
			}

			// Update tween properties
			if ( parts ) {
				start = tween.start = +start || +target || 0;
				tween.unit = unit;
				// If a +=/-= token was provided, we're doing a relative animation
				tween.end = parts[ 1 ] ?
					start + ( parts[ 1 ] + 1 ) * parts[ 2 ] :
					+parts[ 2 ];
			}

			return tween;
		} ]
	};

// Animations created synchronously will run synchronously
function createFxNow() {
	setTimeout(function() {
		fxNow = undefined;
	});
	return ( fxNow = jQuery.now() );
}

// Generate parameters to create a standard animation
function genFx( type, includeWidth ) {
	var which,
		i = 0,
		attrs = { height: type };

	// If we include width, step value is 1 to do all cssExpand values,
	// otherwise step value is 2 to skip over Left and Right
	includeWidth = includeWidth ? 1 : 0;
	for ( ; i < 4 ; i += 2 - includeWidth ) {
		which = cssExpand[ i ];
		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
	}

	if ( includeWidth ) {
		attrs.opacity = attrs.width = type;
	}

	return attrs;
}

function createTween( value, prop, animation ) {
	var tween,
		collection = ( tweeners[ prop ] || [] ).concat( tweeners[ "*" ] ),
		index = 0,
		length = collection.length;
	for ( ; index < length; index++ ) {
		if ( (tween = collection[ index ].call( animation, prop, value )) ) {

			// We're done with this property
			return tween;
		}
	}
}

function defaultPrefilter( elem, props, opts ) {
	/* jshint validthis: true */
	var prop, value, toggle, tween, hooks, oldfire, display, checkDisplay,
		anim = this,
		orig = {},
		style = elem.style,
		hidden = elem.nodeType && isHidden( elem ),
		dataShow = data_priv.get( elem, "fxshow" );

	// Handle queue: false promises
	if ( !opts.queue ) {
		hooks = jQuery._queueHooks( elem, "fx" );
		if ( hooks.unqueued == null ) {
			hooks.unqueued = 0;
			oldfire = hooks.empty.fire;
			hooks.empty.fire = function() {
				if ( !hooks.unqueued ) {
					oldfire();
				}
			};
		}
		hooks.unqueued++;

		anim.always(function() {
			// Ensure the complete handler is called before this completes
			anim.always(function() {
				hooks.unqueued--;
				if ( !jQuery.queue( elem, "fx" ).length ) {
					hooks.empty.fire();
				}
			});
		});
	}

	// Height/width overflow pass
	if ( elem.nodeType === 1 && ( "height" in props || "width" in props ) ) {
		// Make sure that nothing sneaks out
		// Record all 3 overflow attributes because IE9-10 do not
		// change the overflow attribute when overflowX and
		// overflowY are set to the same value
		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];

		// Set display property to inline-block for height/width
		// animations on inline elements that are having width/height animated
		display = jQuery.css( elem, "display" );

		// Test default display if display is currently "none"
		checkDisplay = display === "none" ?
			data_priv.get( elem, "olddisplay" ) || defaultDisplay( elem.nodeName ) : display;

		if ( checkDisplay === "inline" && jQuery.css( elem, "float" ) === "none" ) {
			style.display = "inline-block";
		}
	}

	if ( opts.overflow ) {
		style.overflow = "hidden";
		anim.always(function() {
			style.overflow = opts.overflow[ 0 ];
			style.overflowX = opts.overflow[ 1 ];
			style.overflowY = opts.overflow[ 2 ];
		});
	}

	// show/hide pass
	for ( prop in props ) {
		value = props[ prop ];
		if ( rfxtypes.exec( value ) ) {
			delete props[ prop ];
			toggle = toggle || value === "toggle";
			if ( value === ( hidden ? "hide" : "show" ) ) {

				// If there is dataShow left over from a stopped hide or show and we are going to proceed with show, we should pretend to be hidden
				if ( value === "show" && dataShow && dataShow[ prop ] !== undefined ) {
					hidden = true;
				} else {
					continue;
				}
			}
			orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );

		// Any non-fx value stops us from restoring the original display value
		} else {
			display = undefined;
		}
	}

	if ( !jQuery.isEmptyObject( orig ) ) {
		if ( dataShow ) {
			if ( "hidden" in dataShow ) {
				hidden = dataShow.hidden;
			}
		} else {
			dataShow = data_priv.access( elem, "fxshow", {} );
		}

		// Store state if its toggle - enables .stop().toggle() to "reverse"
		if ( toggle ) {
			dataShow.hidden = !hidden;
		}
		if ( hidden ) {
			jQuery( elem ).show();
		} else {
			anim.done(function() {
				jQuery( elem ).hide();
			});
		}
		anim.done(function() {
			var prop;

			data_priv.remove( elem, "fxshow" );
			for ( prop in orig ) {
				jQuery.style( elem, prop, orig[ prop ] );
			}
		});
		for ( prop in orig ) {
			tween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );

			if ( !( prop in dataShow ) ) {
				dataShow[ prop ] = tween.start;
				if ( hidden ) {
					tween.end = tween.start;
					tween.start = prop === "width" || prop === "height" ? 1 : 0;
				}
			}
		}

	// If this is a noop like .hide().hide(), restore an overwritten display value
	} else if ( (display === "none" ? defaultDisplay( elem.nodeName ) : display) === "inline" ) {
		style.display = display;
	}
}

function propFilter( props, specialEasing ) {
	var index, name, easing, value, hooks;

	// camelCase, specialEasing and expand cssHook pass
	for ( index in props ) {
		name = jQuery.camelCase( index );
		easing = specialEasing[ name ];
		value = props[ index ];
		if ( jQuery.isArray( value ) ) {
			easing = value[ 1 ];
			value = props[ index ] = value[ 0 ];
		}

		if ( index !== name ) {
			props[ name ] = value;
			delete props[ index ];
		}

		hooks = jQuery.cssHooks[ name ];
		if ( hooks && "expand" in hooks ) {
			value = hooks.expand( value );
			delete props[ name ];

			// Not quite $.extend, this won't overwrite existing keys.
			// Reusing 'index' because we have the correct "name"
			for ( index in value ) {
				if ( !( index in props ) ) {
					props[ index ] = value[ index ];
					specialEasing[ index ] = easing;
				}
			}
		} else {
			specialEasing[ name ] = easing;
		}
	}
}

function Animation( elem, properties, options ) {
	var result,
		stopped,
		index = 0,
		length = animationPrefilters.length,
		deferred = jQuery.Deferred().always( function() {
			// Don't match elem in the :animated selector
			delete tick.elem;
		}),
		tick = function() {
			if ( stopped ) {
				return false;
			}
			var currentTime = fxNow || createFxNow(),
				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),
				// Support: Android 2.3
				// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)
				temp = remaining / animation.duration || 0,
				percent = 1 - temp,
				index = 0,
				length = animation.tweens.length;

			for ( ; index < length ; index++ ) {
				animation.tweens[ index ].run( percent );
			}

			deferred.notifyWith( elem, [ animation, percent, remaining ]);

			if ( percent < 1 && length ) {
				return remaining;
			} else {
				deferred.resolveWith( elem, [ animation ] );
				return false;
			}
		},
		animation = deferred.promise({
			elem: elem,
			props: jQuery.extend( {}, properties ),
			opts: jQuery.extend( true, { specialEasing: {} }, options ),
			originalProperties: properties,
			originalOptions: options,
			startTime: fxNow || createFxNow(),
			duration: options.duration,
			tweens: [],
			createTween: function( prop, end ) {
				var tween = jQuery.Tween( elem, animation.opts, prop, end,
						animation.opts.specialEasing[ prop ] || animation.opts.easing );
				animation.tweens.push( tween );
				return tween;
			},
			stop: function( gotoEnd ) {
				var index = 0,
					// If we are going to the end, we want to run all the tweens
					// otherwise we skip this part
					length = gotoEnd ? animation.tweens.length : 0;
				if ( stopped ) {
					return this;
				}
				stopped = true;
				for ( ; index < length ; index++ ) {
					animation.tweens[ index ].run( 1 );
				}

				// Resolve when we played the last frame; otherwise, reject
				if ( gotoEnd ) {
					deferred.resolveWith( elem, [ animation, gotoEnd ] );
				} else {
					deferred.rejectWith( elem, [ animation, gotoEnd ] );
				}
				return this;
			}
		}),
		props = animation.props;

	propFilter( props, animation.opts.specialEasing );

	for ( ; index < length ; index++ ) {
		result = animationPrefilters[ index ].call( animation, elem, props, animation.opts );
		if ( result ) {
			return result;
		}
	}

	jQuery.map( props, createTween, animation );

	if ( jQuery.isFunction( animation.opts.start ) ) {
		animation.opts.start.call( elem, animation );
	}

	jQuery.fx.timer(
		jQuery.extend( tick, {
			elem: elem,
			anim: animation,
			queue: animation.opts.queue
		})
	);

	// attach callbacks from options
	return animation.progress( animation.opts.progress )
		.done( animation.opts.done, animation.opts.complete )
		.fail( animation.opts.fail )
		.always( animation.opts.always );
}

jQuery.Animation = jQuery.extend( Animation, {

	tweener: function( props, callback ) {
		if ( jQuery.isFunction( props ) ) {
			callback = props;
			props = [ "*" ];
		} else {
			props = props.split(" ");
		}

		var prop,
			index = 0,
			length = props.length;

		for ( ; index < length ; index++ ) {
			prop = props[ index ];
			tweeners[ prop ] = tweeners[ prop ] || [];
			tweeners[ prop ].unshift( callback );
		}
	},

	prefilter: function( callback, prepend ) {
		if ( prepend ) {
			animationPrefilters.unshift( callback );
		} else {
			animationPrefilters.push( callback );
		}
	}
});

jQuery.speed = function( speed, easing, fn ) {
	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
		complete: fn || !fn && easing ||
			jQuery.isFunction( speed ) && speed,
		duration: speed,
		easing: fn && easing || easing && !jQuery.isFunction( easing ) && easing
	};

	opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration :
		opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;

	// Normalize opt.queue - true/undefined/null -> "fx"
	if ( opt.queue == null || opt.queue === true ) {
		opt.queue = "fx";
	}

	// Queueing
	opt.old = opt.complete;

	opt.complete = function() {
		if ( jQuery.isFunction( opt.old ) ) {
			opt.old.call( this );
		}

		if ( opt.queue ) {
			jQuery.dequeue( this, opt.queue );
		}
	};

	return opt;
};

jQuery.fn.extend({
	fadeTo: function( speed, to, easing, callback ) {

		// Show any hidden elements after setting opacity to 0
		return this.filter( isHidden ).css( "opacity", 0 ).show()

			// Animate to the value specified
			.end().animate({ opacity: to }, speed, easing, callback );
	},
	animate: function( prop, speed, easing, callback ) {
		var empty = jQuery.isEmptyObject( prop ),
			optall = jQuery.speed( speed, easing, callback ),
			doAnimation = function() {
				// Operate on a copy of prop so per-property easing won't be lost
				var anim = Animation( this, jQuery.extend( {}, prop ), optall );

				// Empty animations, or finishing resolves immediately
				if ( empty || data_priv.get( this, "finish" ) ) {
					anim.stop( true );
				}
			};
			doAnimation.finish = doAnimation;

		return empty || optall.queue === false ?
			this.each( doAnimation ) :
			this.queue( optall.queue, doAnimation );
	},
	stop: function( type, clearQueue, gotoEnd ) {
		var stopQueue = function( hooks ) {
			var stop = hooks.stop;
			delete hooks.stop;
			stop( gotoEnd );
		};

		if ( typeof type !== "string" ) {
			gotoEnd = clearQueue;
			clearQueue = type;
			type = undefined;
		}
		if ( clearQueue && type !== false ) {
			this.queue( type || "fx", [] );
		}

		return this.each(function() {
			var dequeue = true,
				index = type != null && type + "queueHooks",
				timers = jQuery.timers,
				data = data_priv.get( this );

			if ( index ) {
				if ( data[ index ] && data[ index ].stop ) {
					stopQueue( data[ index ] );
				}
			} else {
				for ( index in data ) {
					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
						stopQueue( data[ index ] );
					}
				}
			}

			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {
					timers[ index ].anim.stop( gotoEnd );
					dequeue = false;
					timers.splice( index, 1 );
				}
			}

			// Start the next in the queue if the last step wasn't forced.
			// Timers currently will call their complete callbacks, which
			// will dequeue but only if they were gotoEnd.
			if ( dequeue || !gotoEnd ) {
				jQuery.dequeue( this, type );
			}
		});
	},
	finish: function( type ) {
		if ( type !== false ) {
			type = type || "fx";
		}
		return this.each(function() {
			var index,
				data = data_priv.get( this ),
				queue = data[ type + "queue" ],
				hooks = data[ type + "queueHooks" ],
				timers = jQuery.timers,
				length = queue ? queue.length : 0;

			// Enable finishing flag on private data
			data.finish = true;

			// Empty the queue first
			jQuery.queue( this, type, [] );

			if ( hooks && hooks.stop ) {
				hooks.stop.call( this, true );
			}

			// Look for any active animations, and finish them
			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
					timers[ index ].anim.stop( true );
					timers.splice( index, 1 );
				}
			}

			// Look for any animations in the old queue and finish them
			for ( index = 0; index < length; index++ ) {
				if ( queue[ index ] && queue[ index ].finish ) {
					queue[ index ].finish.call( this );
				}
			}

			// Turn off finishing flag
			delete data.finish;
		});
	}
});

jQuery.each([ "toggle", "show", "hide" ], function( i, name ) {
	var cssFn = jQuery.fn[ name ];
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return speed == null || typeof speed === "boolean" ?
			cssFn.apply( this, arguments ) :
			this.animate( genFx( name, true ), speed, easing, callback );
	};
});

// Generate shortcuts for custom animations
jQuery.each({
	slideDown: genFx("show"),
	slideUp: genFx("hide"),
	slideToggle: genFx("toggle"),
	fadeIn: { opacity: "show" },
	fadeOut: { opacity: "hide" },
	fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return this.animate( props, speed, easing, callback );
	};
});

jQuery.timers = [];
jQuery.fx.tick = function() {
	var timer,
		i = 0,
		timers = jQuery.timers;

	fxNow = jQuery.now();

	for ( ; i < timers.length; i++ ) {
		timer = timers[ i ];
		// Checks the timer has not already been removed
		if ( !timer() && timers[ i ] === timer ) {
			timers.splice( i--, 1 );
		}
	}

	if ( !timers.length ) {
		jQuery.fx.stop();
	}
	fxNow = undefined;
};

jQuery.fx.timer = function( timer ) {
	jQuery.timers.push( timer );
	if ( timer() ) {
		jQuery.fx.start();
	} else {
		jQuery.timers.pop();
	}
};

jQuery.fx.interval = 13;

jQuery.fx.start = function() {
	if ( !timerId ) {
		timerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );
	}
};

jQuery.fx.stop = function() {
	clearInterval( timerId );
	timerId = null;
};

jQuery.fx.speeds = {
	slow: 600,
	fast: 200,
	// Default speed
	_default: 400
};


// Based off of the plugin by Clint Helfers, with permission.
// http://blindsignals.com/index.php/2009/07/jquery-delay/
jQuery.fn.delay = function( time, type ) {
	time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
	type = type || "fx";

	return this.queue( type, function( next, hooks ) {
		var timeout = setTimeout( next, time );
		hooks.stop = function() {
			clearTimeout( timeout );
		};
	});
};


(function() {
	var input = document.createElement( "input" ),
		select = document.createElement( "select" ),
		opt = select.appendChild( document.createElement( "option" ) );

	input.type = "checkbox";

	// Support: iOS<=5.1, Android<=4.2+
	// Default value for a checkbox should be "on"
	support.checkOn = input.value !== "";

	// Support: IE<=11+
	// Must access selectedIndex to make default options select
	support.optSelected = opt.selected;

	// Support: Android<=2.3
	// Options inside disabled selects are incorrectly marked as disabled
	select.disabled = true;
	support.optDisabled = !opt.disabled;

	// Support: IE<=11+
	// An input loses its value after becoming a radio
	input = document.createElement( "input" );
	input.value = "t";
	input.type = "radio";
	support.radioValue = input.value === "t";
})();


var nodeHook, boolHook,
	attrHandle = jQuery.expr.attrHandle;

jQuery.fn.extend({
	attr: function( name, value ) {
		return access( this, jQuery.attr, name, value, arguments.length > 1 );
	},

	removeAttr: function( name ) {
		return this.each(function() {
			jQuery.removeAttr( this, name );
		});
	}
});

jQuery.extend({
	attr: function( elem, name, value ) {
		var hooks, ret,
			nType = elem.nodeType;

		// don't get/set attributes on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		// Fallback to prop when attributes are not supported
		if ( typeof elem.getAttribute === strundefined ) {
			return jQuery.prop( elem, name, value );
		}

		// All attributes are lowercase
		// Grab necessary hook if one is defined
		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
			name = name.toLowerCase();
			hooks = jQuery.attrHooks[ name ] ||
				( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );
		}

		if ( value !== undefined ) {

			if ( value === null ) {
				jQuery.removeAttr( elem, name );

			} else if ( hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {
				return ret;

			} else {
				elem.setAttribute( name, value + "" );
				return value;
			}

		} else if ( hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ) {
			return ret;

		} else {
			ret = jQuery.find.attr( elem, name );

			// Non-existent attributes return null, we normalize to undefined
			return ret == null ?
				undefined :
				ret;
		}
	},

	removeAttr: function( elem, value ) {
		var name, propName,
			i = 0,
			attrNames = value && value.match( rnotwhite );

		if ( attrNames && elem.nodeType === 1 ) {
			while ( (name = attrNames[i++]) ) {
				propName = jQuery.propFix[ name ] || name;

				// Boolean attributes get special treatment (#10870)
				if ( jQuery.expr.match.bool.test( name ) ) {
					// Set corresponding property to false
					elem[ propName ] = false;
				}

				elem.removeAttribute( name );
			}
		}
	},

	attrHooks: {
		type: {
			set: function( elem, value ) {
				if ( !support.radioValue && value === "radio" &&
					jQuery.nodeName( elem, "input" ) ) {
					var val = elem.value;
					elem.setAttribute( "type", value );
					if ( val ) {
						elem.value = val;
					}
					return value;
				}
			}
		}
	}
});

// Hooks for boolean attributes
boolHook = {
	set: function( elem, value, name ) {
		if ( value === false ) {
			// Remove boolean attributes when set to false
			jQuery.removeAttr( elem, name );
		} else {
			elem.setAttribute( name, name );
		}
		return name;
	}
};
jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( i, name ) {
	var getter = attrHandle[ name ] || jQuery.find.attr;

	attrHandle[ name ] = function( elem, name, isXML ) {
		var ret, handle;
		if ( !isXML ) {
			// Avoid an infinite loop by temporarily removing this function from the getter
			handle = attrHandle[ name ];
			attrHandle[ name ] = ret;
			ret = getter( elem, name, isXML ) != null ?
				name.toLowerCase() :
				null;
			attrHandle[ name ] = handle;
		}
		return ret;
	};
});




var rfocusable = /^(?:input|select|textarea|button)$/i;

jQuery.fn.extend({
	prop: function( name, value ) {
		return access( this, jQuery.prop, name, value, arguments.length > 1 );
	},

	removeProp: function( name ) {
		return this.each(function() {
			delete this[ jQuery.propFix[ name ] || name ];
		});
	}
});

jQuery.extend({
	propFix: {
		"for": "htmlFor",
		"class": "className"
	},

	prop: function( elem, name, value ) {
		var ret, hooks, notxml,
			nType = elem.nodeType;

		// Don't get/set properties on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		notxml = nType !== 1 || !jQuery.isXMLDoc( elem );

		if ( notxml ) {
			// Fix name and attach hooks
			name = jQuery.propFix[ name ] || name;
			hooks = jQuery.propHooks[ name ];
		}

		if ( value !== undefined ) {
			return hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ?
				ret :
				( elem[ name ] = value );

		} else {
			return hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ?
				ret :
				elem[ name ];
		}
	},

	propHooks: {
		tabIndex: {
			get: function( elem ) {
				return elem.hasAttribute( "tabindex" ) || rfocusable.test( elem.nodeName ) || elem.href ?
					elem.tabIndex :
					-1;
			}
		}
	}
});

if ( !support.optSelected ) {
	jQuery.propHooks.selected = {
		get: function( elem ) {
			var parent = elem.parentNode;
			if ( parent && parent.parentNode ) {
				parent.parentNode.selectedIndex;
			}
			return null;
		}
	};
}

jQuery.each([
	"tabIndex",
	"readOnly",
	"maxLength",
	"cellSpacing",
	"cellPadding",
	"rowSpan",
	"colSpan",
	"useMap",
	"frameBorder",
	"contentEditable"
], function() {
	jQuery.propFix[ this.toLowerCase() ] = this;
});




var rclass = /[\t\r\n\f]/g;

jQuery.fn.extend({
	addClass: function( value ) {
		var classes, elem, cur, clazz, j, finalValue,
			proceed = typeof value === "string" && value,
			i = 0,
			len = this.length;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).addClass( value.call( this, j, this.className ) );
			});
		}

		if ( proceed ) {
			// The disjunction here is for better compressibility (see removeClass)
			classes = ( value || "" ).match( rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					" "
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
							cur += clazz + " ";
						}
					}

					// only assign if different to avoid unneeded rendering.
					finalValue = jQuery.trim( cur );
					if ( elem.className !== finalValue ) {
						elem.className = finalValue;
					}
				}
			}
		}

		return this;
	},

	removeClass: function( value ) {
		var classes, elem, cur, clazz, j, finalValue,
			proceed = arguments.length === 0 || typeof value === "string" && value,
			i = 0,
			len = this.length;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).removeClass( value.call( this, j, this.className ) );
			});
		}
		if ( proceed ) {
			classes = ( value || "" ).match( rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				// This expression is here for better compressibility (see addClass)
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					""
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						// Remove *all* instances
						while ( cur.indexOf( " " + clazz + " " ) >= 0 ) {
							cur = cur.replace( " " + clazz + " ", " " );
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = value ? jQuery.trim( cur ) : "";
					if ( elem.className !== finalValue ) {
						elem.className = finalValue;
					}
				}
			}
		}

		return this;
	},

	toggleClass: function( value, stateVal ) {
		var type = typeof value;

		if ( typeof stateVal === "boolean" && type === "string" ) {
			return stateVal ? this.addClass( value ) : this.removeClass( value );
		}

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( i ) {
				jQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );
			});
		}

		return this.each(function() {
			if ( type === "string" ) {
				// Toggle individual class names
				var className,
					i = 0,
					self = jQuery( this ),
					classNames = value.match( rnotwhite ) || [];

				while ( (className = classNames[ i++ ]) ) {
					// Check each className given, space separated list
					if ( self.hasClass( className ) ) {
						self.removeClass( className );
					} else {
						self.addClass( className );
					}
				}

			// Toggle whole class name
			} else if ( type === strundefined || type === "boolean" ) {
				if ( this.className ) {
					// store className if set
					data_priv.set( this, "__className__", this.className );
				}

				// If the element has a class name or if we're passed `false`,
				// then remove the whole classname (if there was one, the above saved it).
				// Otherwise bring back whatever was previously saved (if anything),
				// falling back to the empty string if nothing was stored.
				this.className = this.className || value === false ? "" : data_priv.get( this, "__className__" ) || "";
			}
		});
	},

	hasClass: function( selector ) {
		var className = " " + selector + " ",
			i = 0,
			l = this.length;
		for ( ; i < l; i++ ) {
			if ( this[i].nodeType === 1 && (" " + this[i].className + " ").replace(rclass, " ").indexOf( className ) >= 0 ) {
				return true;
			}
		}

		return false;
	}
});




var rreturn = /\r/g;

jQuery.fn.extend({
	val: function( value ) {
		var hooks, ret, isFunction,
			elem = this[0];

		if ( !arguments.length ) {
			if ( elem ) {
				hooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];

				if ( hooks && "get" in hooks && (ret = hooks.get( elem, "value" )) !== undefined ) {
					return ret;
				}

				ret = elem.value;

				return typeof ret === "string" ?
					// Handle most common string cases
					ret.replace(rreturn, "") :
					// Handle cases where value is null/undef or number
					ret == null ? "" : ret;
			}

			return;
		}

		isFunction = jQuery.isFunction( value );

		return this.each(function( i ) {
			var val;

			if ( this.nodeType !== 1 ) {
				return;
			}

			if ( isFunction ) {
				val = value.call( this, i, jQuery( this ).val() );
			} else {
				val = value;
			}

			// Treat null/undefined as ""; convert numbers to string
			if ( val == null ) {
				val = "";

			} else if ( typeof val === "number" ) {
				val += "";

			} else if ( jQuery.isArray( val ) ) {
				val = jQuery.map( val, function( value ) {
					return value == null ? "" : value + "";
				});
			}

			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

			// If set returns undefined, fall back to normal setting
			if ( !hooks || !("set" in hooks) || hooks.set( this, val, "value" ) === undefined ) {
				this.value = val;
			}
		});
	}
});

jQuery.extend({
	valHooks: {
		option: {
			get: function( elem ) {
				var val = jQuery.find.attr( elem, "value" );
				return val != null ?
					val :
					// Support: IE10-11+
					// option.text throws exceptions (#14686, #14858)
					jQuery.trim( jQuery.text( elem ) );
			}
		},
		select: {
			get: function( elem ) {
				var value, option,
					options = elem.options,
					index = elem.selectedIndex,
					one = elem.type === "select-one" || index < 0,
					values = one ? null : [],
					max = one ? index + 1 : options.length,
					i = index < 0 ?
						max :
						one ? index : 0;

				// Loop through all the selected options
				for ( ; i < max; i++ ) {
					option = options[ i ];

					// IE6-9 doesn't update selected after form reset (#2551)
					if ( ( option.selected || i === index ) &&
							// Don't return options that are disabled or in a disabled optgroup
							( support.optDisabled ? !option.disabled : option.getAttribute( "disabled" ) === null ) &&
							( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, "optgroup" ) ) ) {

						// Get the specific value for the option
						value = jQuery( option ).val();

						// We don't need an array for one selects
						if ( one ) {
							return value;
						}

						// Multi-Selects return an array
						values.push( value );
					}
				}

				return values;
			},

			set: function( elem, value ) {
				var optionSet, option,
					options = elem.options,
					values = jQuery.makeArray( value ),
					i = options.length;

				while ( i-- ) {
					option = options[ i ];
					if ( (option.selected = jQuery.inArray( option.value, values ) >= 0) ) {
						optionSet = true;
					}
				}

				// Force browsers to behave consistently when non-matching value is set
				if ( !optionSet ) {
					elem.selectedIndex = -1;
				}
				return values;
			}
		}
	}
});

// Radios and checkboxes getter/setter
jQuery.each([ "radio", "checkbox" ], function() {
	jQuery.valHooks[ this ] = {
		set: function( elem, value ) {
			if ( jQuery.isArray( value ) ) {
				return ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );
			}
		}
	};
	if ( !support.checkOn ) {
		jQuery.valHooks[ this ].get = function( elem ) {
			return elem.getAttribute("value") === null ? "on" : elem.value;
		};
	}
});




// Return jQuery for attributes-only inclusion


jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	"change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {

	// Handle event binding
	jQuery.fn[ name ] = function( data, fn ) {
		return arguments.length > 0 ?
			this.on( name, null, data, fn ) :
			this.trigger( name );
	};
});

jQuery.fn.extend({
	hover: function( fnOver, fnOut ) {
		return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
	},

	bind: function( types, data, fn ) {
		return this.on( types, null, data, fn );
	},
	unbind: function( types, fn ) {
		return this.off( types, null, fn );
	},

	delegate: function( selector, types, data, fn ) {
		return this.on( types, selector, data, fn );
	},
	undelegate: function( selector, types, fn ) {
		// ( namespace ) or ( selector, types [, fn] )
		return arguments.length === 1 ? this.off( selector, "**" ) : this.off( types, selector || "**", fn );
	}
});


var nonce = jQuery.now();

var rquery = (/\?/);



// Support: Android 2.3
// Workaround failure to string-cast null input
jQuery.parseJSON = function( data ) {
	return JSON.parse( data + "" );
};


// Cross-browser xml parsing
jQuery.parseXML = function( data ) {
	var xml, tmp;
	if ( !data || typeof data !== "string" ) {
		return null;
	}

	// Support: IE9
	try {
		tmp = new DOMParser();
		xml = tmp.parseFromString( data, "text/xml" );
	} catch ( e ) {
		xml = undefined;
	}

	if ( !xml || xml.getElementsByTagName( "parsererror" ).length ) {
		jQuery.error( "Invalid XML: " + data );
	}
	return xml;
};


var
	rhash = /#.*$/,
	rts = /([?&])_=[^&]*/,
	rheaders = /^(.*?):[ \t]*([^\r\n]*)$/mg,
	// #7653, #8125, #8152: local protocol detection
	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	rnoContent = /^(?:GET|HEAD)$/,
	rprotocol = /^\/\//,
	rurl = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,

	/* Prefilters
	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	 * 2) These are called:
	 *    - BEFORE asking for a transport
	 *    - AFTER param serialization (s.data is a string if s.processData is true)
	 * 3) key is the dataType
	 * 4) the catchall symbol "*" can be used
	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	 */
	prefilters = {},

	/* Transports bindings
	 * 1) key is the dataType
	 * 2) the catchall symbol "*" can be used
	 * 3) selection will start with transport dataType and THEN go to "*" if needed
	 */
	transports = {},

	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
	allTypes = "*/".concat( "*" ),

	// Document location
	ajaxLocation = window.location.href,

	// Segment location into parts
	ajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
function addToPrefiltersOrTransports( structure ) {

	// dataTypeExpression is optional and defaults to "*"
	return function( dataTypeExpression, func ) {

		if ( typeof dataTypeExpression !== "string" ) {
			func = dataTypeExpression;
			dataTypeExpression = "*";
		}

		var dataType,
			i = 0,
			dataTypes = dataTypeExpression.toLowerCase().match( rnotwhite ) || [];

		if ( jQuery.isFunction( func ) ) {
			// For each dataType in the dataTypeExpression
			while ( (dataType = dataTypes[i++]) ) {
				// Prepend if requested
				if ( dataType[0] === "+" ) {
					dataType = dataType.slice( 1 ) || "*";
					(structure[ dataType ] = structure[ dataType ] || []).unshift( func );

				// Otherwise append
				} else {
					(structure[ dataType ] = structure[ dataType ] || []).push( func );
				}
			}
		}
	};
}

// Base inspection function for prefilters and transports
function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {

	var inspected = {},
		seekingTransport = ( structure === transports );

	function inspect( dataType ) {
		var selected;
		inspected[ dataType ] = true;
		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
			if ( typeof dataTypeOrTransport === "string" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {
				options.dataTypes.unshift( dataTypeOrTransport );
				inspect( dataTypeOrTransport );
				return false;
			} else if ( seekingTransport ) {
				return !( selected = dataTypeOrTransport );
			}
		});
		return selected;
	}

	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
function ajaxExtend( target, src ) {
	var key, deep,
		flatOptions = jQuery.ajaxSettings.flatOptions || {};

	for ( key in src ) {
		if ( src[ key ] !== undefined ) {
			( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];
		}
	}
	if ( deep ) {
		jQuery.extend( true, target, deep );
	}

	return target;
}

/* Handles responses to an ajax request:
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
function ajaxHandleResponses( s, jqXHR, responses ) {

	var ct, type, finalDataType, firstDataType,
		contents = s.contents,
		dataTypes = s.dataTypes;

	// Remove auto dataType and get content-type in the process
	while ( dataTypes[ 0 ] === "*" ) {
		dataTypes.shift();
		if ( ct === undefined ) {
			ct = s.mimeType || jqXHR.getResponseHeader("Content-Type");
		}
	}

	// Check if we're dealing with a known content-type
	if ( ct ) {
		for ( type in contents ) {
			if ( contents[ type ] && contents[ type ].test( ct ) ) {
				dataTypes.unshift( type );
				break;
			}
		}
	}

	// Check to see if we have a response for the expected dataType
	if ( dataTypes[ 0 ] in responses ) {
		finalDataType = dataTypes[ 0 ];
	} else {
		// Try convertible dataTypes
		for ( type in responses ) {
			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[0] ] ) {
				finalDataType = type;
				break;
			}
			if ( !firstDataType ) {
				firstDataType = type;
			}
		}
		// Or just use first one
		finalDataType = finalDataType || firstDataType;
	}

	// If we found a dataType
	// We add the dataType to the list if needed
	// and return the corresponding response
	if ( finalDataType ) {
		if ( finalDataType !== dataTypes[ 0 ] ) {
			dataTypes.unshift( finalDataType );
		}
		return responses[ finalDataType ];
	}
}

/* Chain conversions given the request and the original response
 * Also sets the responseXXX fields on the jqXHR instance
 */
function ajaxConvert( s, response, jqXHR, isSuccess ) {
	var conv2, current, conv, tmp, prev,
		converters = {},
		// Work with a copy of dataTypes in case we need to modify it for conversion
		dataTypes = s.dataTypes.slice();

	// Create converters map with lowercased keys
	if ( dataTypes[ 1 ] ) {
		for ( conv in s.converters ) {
			converters[ conv.toLowerCase() ] = s.converters[ conv ];
		}
	}

	current = dataTypes.shift();

	// Convert to each sequential dataType
	while ( current ) {

		if ( s.responseFields[ current ] ) {
			jqXHR[ s.responseFields[ current ] ] = response;
		}

		// Apply the dataFilter if provided
		if ( !prev && isSuccess && s.dataFilter ) {
			response = s.dataFilter( response, s.dataType );
		}

		prev = current;
		current = dataTypes.shift();

		if ( current ) {

		// There's only work to do if current dataType is non-auto
			if ( current === "*" ) {

				current = prev;

			// Convert response if prev dataType is non-auto and differs from current
			} else if ( prev !== "*" && prev !== current ) {

				// Seek a direct converter
				conv = converters[ prev + " " + current ] || converters[ "* " + current ];

				// If none found, seek a pair
				if ( !conv ) {
					for ( conv2 in converters ) {

						// If conv2 outputs current
						tmp = conv2.split( " " );
						if ( tmp[ 1 ] === current ) {

							// If prev can be converted to accepted input
							conv = converters[ prev + " " + tmp[ 0 ] ] ||
								converters[ "* " + tmp[ 0 ] ];
							if ( conv ) {
								// Condense equivalence converters
								if ( conv === true ) {
									conv = converters[ conv2 ];

								// Otherwise, insert the intermediate dataType
								} else if ( converters[ conv2 ] !== true ) {
									current = tmp[ 0 ];
									dataTypes.unshift( tmp[ 1 ] );
								}
								break;
							}
						}
					}
				}

				// Apply converter (if not an equivalence)
				if ( conv !== true ) {

					// Unless errors are allowed to bubble, catch and return them
					if ( conv && s[ "throws" ] ) {
						response = conv( response );
					} else {
						try {
							response = conv( response );
						} catch ( e ) {
							return { state: "parsererror", error: conv ? e : "No conversion from " + prev + " to " + current };
						}
					}
				}
			}
		}
	}

	return { state: "success", data: response };
}

jQuery.extend({

	// Counter for holding the number of active queries
	active: 0,

	// Last-Modified header cache for next request
	lastModified: {},
	etag: {},

	ajaxSettings: {
		url: ajaxLocation,
		type: "GET",
		isLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),
		global: true,
		processData: true,
		async: true,
		contentType: "application/x-www-form-urlencoded; charset=UTF-8",
		/*
		timeout: 0,
		data: null,
		dataType: null,
		username: null,
		password: null,
		cache: null,
		throws: false,
		traditional: false,
		headers: {},
		*/

		accepts: {
			"*": allTypes,
			text: "text/plain",
			html: "text/html",
			xml: "application/xml, text/xml",
			json: "application/json, text/javascript"
		},

		contents: {
			xml: /xml/,
			html: /html/,
			json: /json/
		},

		responseFields: {
			xml: "responseXML",
			text: "responseText",
			json: "responseJSON"
		},

		// Data converters
		// Keys separate source (or catchall "*") and destination types with a single space
		converters: {

			// Convert anything to text
			"* text": String,

			// Text to html (true = no transformation)
			"text html": true,

			// Evaluate text as a json expression
			"text json": jQuery.parseJSON,

			// Parse text as xml
			"text xml": jQuery.parseXML
		},

		// For options that shouldn't be deep extended:
		// you can add your own custom options here if
		// and when you create one that shouldn't be
		// deep extended (see ajaxExtend)
		flatOptions: {
			url: true,
			context: true
		}
	},

	// Creates a full fledged settings object into target
	// with both ajaxSettings and settings fields.
	// If target is omitted, writes into ajaxSettings.
	ajaxSetup: function( target, settings ) {
		return settings ?

			// Building a settings object
			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :

			// Extending ajaxSettings
			ajaxExtend( jQuery.ajaxSettings, target );
	},

	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
	ajaxTransport: addToPrefiltersOrTransports( transports ),

	// Main method
	ajax: function( url, options ) {

		// If url is an object, simulate pre-1.5 signature
		if ( typeof url === "object" ) {
			options = url;
			url = undefined;
		}

		// Force options to be an object
		options = options || {};

		var transport,
			// URL without anti-cache param
			cacheURL,
			// Response headers
			responseHeadersString,
			responseHeaders,
			// timeout handle
			timeoutTimer,
			// Cross-domain detection vars
			parts,
			// To know if global events are to be dispatched
			fireGlobals,
			// Loop variable
			i,
			// Create the final options object
			s = jQuery.ajaxSetup( {}, options ),
			// Callbacks context
			callbackContext = s.context || s,
			// Context for global events is callbackContext if it is a DOM node or jQuery collection
			globalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?
				jQuery( callbackContext ) :
				jQuery.event,
			// Deferreds
			deferred = jQuery.Deferred(),
			completeDeferred = jQuery.Callbacks("once memory"),
			// Status-dependent callbacks
			statusCode = s.statusCode || {},
			// Headers (they are sent all at once)
			requestHeaders = {},
			requestHeadersNames = {},
			// The jqXHR state
			state = 0,
			// Default abort message
			strAbort = "canceled",
			// Fake xhr
			jqXHR = {
				readyState: 0,

				// Builds headers hashtable if needed
				getResponseHeader: function( key ) {
					var match;
					if ( state === 2 ) {
						if ( !responseHeaders ) {
							responseHeaders = {};
							while ( (match = rheaders.exec( responseHeadersString )) ) {
								responseHeaders[ match[1].toLowerCase() ] = match[ 2 ];
							}
						}
						match = responseHeaders[ key.toLowerCase() ];
					}
					return match == null ? null : match;
				},

				// Raw string
				getAllResponseHeaders: function() {
					return state === 2 ? responseHeadersString : null;
				},

				// Caches the header
				setRequestHeader: function( name, value ) {
					var lname = name.toLowerCase();
					if ( !state ) {
						name = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;
						requestHeaders[ name ] = value;
					}
					return this;
				},

				// Overrides response content-type header
				overrideMimeType: function( type ) {
					if ( !state ) {
						s.mimeType = type;
					}
					return this;
				},

				// Status-dependent callbacks
				statusCode: function( map ) {
					var code;
					if ( map ) {
						if ( state < 2 ) {
							for ( code in map ) {
								// Lazy-add the new callback in a way that preserves old ones
								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
							}
						} else {
							// Execute the appropriate callbacks
							jqXHR.always( map[ jqXHR.status ] );
						}
					}
					return this;
				},

				// Cancel the request
				abort: function( statusText ) {
					var finalText = statusText || strAbort;
					if ( transport ) {
						transport.abort( finalText );
					}
					done( 0, finalText );
					return this;
				}
			};

		// Attach deferreds
		deferred.promise( jqXHR ).complete = completeDeferred.add;
		jqXHR.success = jqXHR.done;
		jqXHR.error = jqXHR.fail;

		// Remove hash character (#7531: and string promotion)
		// Add protocol if not provided (prefilters might expect it)
		// Handle falsy url in the settings object (#10093: consistency with old signature)
		// We also use the url parameter if available
		s.url = ( ( url || s.url || ajaxLocation ) + "" ).replace( rhash, "" )
			.replace( rprotocol, ajaxLocParts[ 1 ] + "//" );

		// Alias method option to type as per ticket #12004
		s.type = options.method || options.type || s.method || s.type;

		// Extract dataTypes list
		s.dataTypes = jQuery.trim( s.dataType || "*" ).toLowerCase().match( rnotwhite ) || [ "" ];

		// A cross-domain request is in order when we have a protocol:host:port mismatch
		if ( s.crossDomain == null ) {
			parts = rurl.exec( s.url.toLowerCase() );
			s.crossDomain = !!( parts &&
				( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||
					( parts[ 3 ] || ( parts[ 1 ] === "http:" ? "80" : "443" ) ) !==
						( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === "http:" ? "80" : "443" ) ) )
			);
		}

		// Convert data if not already a string
		if ( s.data && s.processData && typeof s.data !== "string" ) {
			s.data = jQuery.param( s.data, s.traditional );
		}

		// Apply prefilters
		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );

		// If request was aborted inside a prefilter, stop there
		if ( state === 2 ) {
			return jqXHR;
		}

		// We can fire global events as of now if asked to
		// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)
		fireGlobals = jQuery.event && s.global;

		// Watch for a new set of requests
		if ( fireGlobals && jQuery.active++ === 0 ) {
			jQuery.event.trigger("ajaxStart");
		}

		// Uppercase the type
		s.type = s.type.toUpperCase();

		// Determine if request has content
		s.hasContent = !rnoContent.test( s.type );

		// Save the URL in case we're toying with the If-Modified-Since
		// and/or If-None-Match header later on
		cacheURL = s.url;

		// More options handling for requests with no content
		if ( !s.hasContent ) {

			// If data is available, append data to url
			if ( s.data ) {
				cacheURL = ( s.url += ( rquery.test( cacheURL ) ? "&" : "?" ) + s.data );
				// #9682: remove data so that it's not used in an eventual retry
				delete s.data;
			}

			// Add anti-cache in url if needed
			if ( s.cache === false ) {
				s.url = rts.test( cacheURL ) ?

					// If there is already a '_' parameter, set its value
					cacheURL.replace( rts, "$1_=" + nonce++ ) :

					// Otherwise add one to the end
					cacheURL + ( rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + nonce++;
			}
		}

		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
		if ( s.ifModified ) {
			if ( jQuery.lastModified[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
			}
			if ( jQuery.etag[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
			}
		}

		// Set the correct header, if data is being sent
		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
			jqXHR.setRequestHeader( "Content-Type", s.contentType );
		}

		// Set the Accepts header for the server, depending on the dataType
		jqXHR.setRequestHeader(
			"Accept",
			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?
				s.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
				s.accepts[ "*" ]
		);

		// Check for headers option
		for ( i in s.headers ) {
			jqXHR.setRequestHeader( i, s.headers[ i ] );
		}

		// Allow custom headers/mimetypes and early abort
		if ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {
			// Abort if not done already and return
			return jqXHR.abort();
		}

		// Aborting is no longer a cancellation
		strAbort = "abort";

		// Install callbacks on deferreds
		for ( i in { success: 1, error: 1, complete: 1 } ) {
			jqXHR[ i ]( s[ i ] );
		}

		// Get transport
		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );

		// If no transport, we auto-abort
		if ( !transport ) {
			done( -1, "No Transport" );
		} else {
			jqXHR.readyState = 1;

			// Send global event
			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
			}
			// Timeout
			if ( s.async && s.timeout > 0 ) {
				timeoutTimer = setTimeout(function() {
					jqXHR.abort("timeout");
				}, s.timeout );
			}

			try {
				state = 1;
				transport.send( requestHeaders, done );
			} catch ( e ) {
				// Propagate exception as error if not done
				if ( state < 2 ) {
					done( -1, e );
				// Simply rethrow otherwise
				} else {
					throw e;
				}
			}
		}

		// Callback for when everything is done
		function done( status, nativeStatusText, responses, headers ) {
			var isSuccess, success, error, response, modified,
				statusText = nativeStatusText;

			// Called once
			if ( state === 2 ) {
				return;
			}

			// State is "done" now
			state = 2;

			// Clear timeout if it exists
			if ( timeoutTimer ) {
				clearTimeout( timeoutTimer );
			}

			// Dereference transport for early garbage collection
			// (no matter how long the jqXHR object will be used)
			transport = undefined;

			// Cache response headers
			responseHeadersString = headers || "";

			// Set readyState
			jqXHR.readyState = status > 0 ? 4 : 0;

			// Determine if successful
			isSuccess = status >= 200 && status < 300 || status === 304;

			// Get response data
			if ( responses ) {
				response = ajaxHandleResponses( s, jqXHR, responses );
			}

			// Convert no matter what (that way responseXXX fields are always set)
			response = ajaxConvert( s, response, jqXHR, isSuccess );

			// If successful, handle type chaining
			if ( isSuccess ) {

				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
				if ( s.ifModified ) {
					modified = jqXHR.getResponseHeader("Last-Modified");
					if ( modified ) {
						jQuery.lastModified[ cacheURL ] = modified;
					}
					modified = jqXHR.getResponseHeader("etag");
					if ( modified ) {
						jQuery.etag[ cacheURL ] = modified;
					}
				}

				// if no content
				if ( status === 204 || s.type === "HEAD" ) {
					statusText = "nocontent";

				// if not modified
				} else if ( status === 304 ) {
					statusText = "notmodified";

				// If we have data, let's convert it
				} else {
					statusText = response.state;
					success = response.data;
					error = response.error;
					isSuccess = !error;
				}
			} else {
				// Extract error from statusText and normalize for non-aborts
				error = statusText;
				if ( status || !statusText ) {
					statusText = "error";
					if ( status < 0 ) {
						status = 0;
					}
				}
			}

			// Set data for the fake xhr object
			jqXHR.status = status;
			jqXHR.statusText = ( nativeStatusText || statusText ) + "";

			// Success/Error
			if ( isSuccess ) {
				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
			} else {
				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
			}

			// Status-dependent callbacks
			jqXHR.statusCode( statusCode );
			statusCode = undefined;

			if ( fireGlobals ) {
				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
					[ jqXHR, s, isSuccess ? success : error ] );
			}

			// Complete
			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );

			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );
				// Handle the global AJAX counter
				if ( !( --jQuery.active ) ) {
					jQuery.event.trigger("ajaxStop");
				}
			}
		}

		return jqXHR;
	},

	getJSON: function( url, data, callback ) {
		return jQuery.get( url, data, callback, "json" );
	},

	getScript: function( url, callback ) {
		return jQuery.get( url, undefined, callback, "script" );
	}
});

jQuery.each( [ "get", "post" ], function( i, method ) {
	jQuery[ method ] = function( url, data, callback, type ) {
		// Shift arguments if data argument was omitted
		if ( jQuery.isFunction( data ) ) {
			type = type || callback;
			callback = data;
			data = undefined;
		}

		return jQuery.ajax({
			url: url,
			type: method,
			dataType: type,
			data: data,
			success: callback
		});
	};
});


jQuery._evalUrl = function( url ) {
	return jQuery.ajax({
		url: url,
		type: "GET",
		dataType: "script",
		async: false,
		global: false,
		"throws": true
	});
};


jQuery.fn.extend({
	wrapAll: function( html ) {
		var wrap;

		if ( jQuery.isFunction( html ) ) {
			return this.each(function( i ) {
				jQuery( this ).wrapAll( html.call(this, i) );
			});
		}

		if ( this[ 0 ] ) {

			// The elements to wrap the target around
			wrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );

			if ( this[ 0 ].parentNode ) {
				wrap.insertBefore( this[ 0 ] );
			}

			wrap.map(function() {
				var elem = this;

				while ( elem.firstElementChild ) {
					elem = elem.firstElementChild;
				}

				return elem;
			}).append( this );
		}

		return this;
	},

	wrapInner: function( html ) {
		if ( jQuery.isFunction( html ) ) {
			return this.each(function( i ) {
				jQuery( this ).wrapInner( html.call(this, i) );
			});
		}

		return this.each(function() {
			var self = jQuery( this ),
				contents = self.contents();

			if ( contents.length ) {
				contents.wrapAll( html );

			} else {
				self.append( html );
			}
		});
	},

	wrap: function( html ) {
		var isFunction = jQuery.isFunction( html );

		return this.each(function( i ) {
			jQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );
		});
	},

	unwrap: function() {
		return this.parent().each(function() {
			if ( !jQuery.nodeName( this, "body" ) ) {
				jQuery( this ).replaceWith( this.childNodes );
			}
		}).end();
	}
});


jQuery.expr.filters.hidden = function( elem ) {
	// Support: Opera <= 12.12
	// Opera reports offsetWidths and offsetHeights less than zero on some elements
	return elem.offsetWidth <= 0 && elem.offsetHeight <= 0;
};
jQuery.expr.filters.visible = function( elem ) {
	return !jQuery.expr.filters.hidden( elem );
};




var r20 = /%20/g,
	rbracket = /\[\]$/,
	rCRLF = /\r?\n/g,
	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
	rsubmittable = /^(?:input|select|textarea|keygen)/i;

function buildParams( prefix, obj, traditional, add ) {
	var name;

	if ( jQuery.isArray( obj ) ) {
		// Serialize array item.
		jQuery.each( obj, function( i, v ) {
			if ( traditional || rbracket.test( prefix ) ) {
				// Treat each array item as a scalar.
				add( prefix, v );

			} else {
				// Item is non-scalar (array or object), encode its numeric index.
				buildParams( prefix + "[" + ( typeof v === "object" ? i : "" ) + "]", v, traditional, add );
			}
		});

	} else if ( !traditional && jQuery.type( obj ) === "object" ) {
		// Serialize object item.
		for ( name in obj ) {
			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
		}

	} else {
		// Serialize scalar item.
		add( prefix, obj );
	}
}

// Serialize an array of form elements or a set of
// key/values into a query string
jQuery.param = function( a, traditional ) {
	var prefix,
		s = [],
		add = function( key, value ) {
			// If value is a function, invoke it and return its value
			value = jQuery.isFunction( value ) ? value() : ( value == null ? "" : value );
			s[ s.length ] = encodeURIComponent( key ) + "=" + encodeURIComponent( value );
		};

	// Set traditional to true for jQuery <= 1.3.2 behavior.
	if ( traditional === undefined ) {
		traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;
	}

	// If an array was passed in, assume that it is an array of form elements.
	if ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {
		// Serialize the form elements
		jQuery.each( a, function() {
			add( this.name, this.value );
		});

	} else {
		// If traditional, encode the "old" way (the way 1.3.2 or older
		// did it), otherwise encode params recursively.
		for ( prefix in a ) {
			buildParams( prefix, a[ prefix ], traditional, add );
		}
	}

	// Return the resulting serialization
	return s.join( "&" ).replace( r20, "+" );
};

jQuery.fn.extend({
	serialize: function() {
		return jQuery.param( this.serializeArray() );
	},
	serializeArray: function() {
		return this.map(function() {
			// Can add propHook for "elements" to filter or add form elements
			var elements = jQuery.prop( this, "elements" );
			return elements ? jQuery.makeArray( elements ) : this;
		})
		.filter(function() {
			var type = this.type;

			// Use .is( ":disabled" ) so that fieldset[disabled] works
			return this.name && !jQuery( this ).is( ":disabled" ) &&
				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
				( this.checked || !rcheckableType.test( type ) );
		})
		.map(function( i, elem ) {
			var val = jQuery( this ).val();

			return val == null ?
				null :
				jQuery.isArray( val ) ?
					jQuery.map( val, function( val ) {
						return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
					}) :
					{ name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
		}).get();
	}
});


jQuery.ajaxSettings.xhr = function() {
	try {
		return new XMLHttpRequest();
	} catch( e ) {}
};

var xhrId = 0,
	xhrCallbacks = {},
	xhrSuccessStatus = {
		// file protocol always yields status code 0, assume 200
		0: 200,
		// Support: IE9
		// #1450: sometimes IE returns 1223 when it should be 204
		1223: 204
	},
	xhrSupported = jQuery.ajaxSettings.xhr();

// Support: IE9
// Open requests must be manually aborted on unload (#5280)
// See https://support.microsoft.com/kb/2856746 for more info
if ( window.attachEvent ) {
	window.attachEvent( "onunload", function() {
		for ( var key in xhrCallbacks ) {
			xhrCallbacks[ key ]();
		}
	});
}

support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
support.ajax = xhrSupported = !!xhrSupported;

jQuery.ajaxTransport(function( options ) {
	var callback;

	// Cross domain only allowed if supported through XMLHttpRequest
	if ( support.cors || xhrSupported && !options.crossDomain ) {
		return {
			send: function( headers, complete ) {
				var i,
					xhr = options.xhr(),
					id = ++xhrId;

				xhr.open( options.type, options.url, options.async, options.username, options.password );

				// Apply custom fields if provided
				if ( options.xhrFields ) {
					for ( i in options.xhrFields ) {
						xhr[ i ] = options.xhrFields[ i ];
					}
				}

				// Override mime type if needed
				if ( options.mimeType && xhr.overrideMimeType ) {
					xhr.overrideMimeType( options.mimeType );
				}

				// X-Requested-With header
				// For cross-domain requests, seeing as conditions for a preflight are
				// akin to a jigsaw puzzle, we simply never set it to be sure.
				// (it can always be set on a per-request basis or even using ajaxSetup)
				// For same-domain requests, won't change header if already provided.
				if ( !options.crossDomain && !headers["X-Requested-With"] ) {
					headers["X-Requested-With"] = "XMLHttpRequest";
				}

				// Set headers
				for ( i in headers ) {
					xhr.setRequestHeader( i, headers[ i ] );
				}

				// Callback
				callback = function( type ) {
					return function() {
						if ( callback ) {
							delete xhrCallbacks[ id ];
							callback = xhr.onload = xhr.onerror = null;

							if ( type === "abort" ) {
								xhr.abort();
							} else if ( type === "error" ) {
								complete(
									// file: protocol always yields status 0; see #8605, #14207
									xhr.status,
									xhr.statusText
								);
							} else {
								complete(
									xhrSuccessStatus[ xhr.status ] || xhr.status,
									xhr.statusText,
									// Support: IE9
									// Accessing binary-data responseText throws an exception
									// (#11426)
									typeof xhr.responseText === "string" ? {
										text: xhr.responseText
									} : undefined,
									xhr.getAllResponseHeaders()
								);
							}
						}
					};
				};

				// Listen to events
				xhr.onload = callback();
				xhr.onerror = callback("error");

				// Create the abort callback
				callback = xhrCallbacks[ id ] = callback("abort");

				try {
					// Do send the request (this may raise an exception)
					xhr.send( options.hasContent && options.data || null );
				} catch ( e ) {
					// #14683: Only rethrow if this hasn't been notified as an error yet
					if ( callback ) {
						throw e;
					}
				}
			},

			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
});




// Install script dataType
jQuery.ajaxSetup({
	accepts: {
		script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
	},
	contents: {
		script: /(?:java|ecma)script/
	},
	converters: {
		"text script": function( text ) {
			jQuery.globalEval( text );
			return text;
		}
	}
});

// Handle cache's special case and crossDomain
jQuery.ajaxPrefilter( "script", function( s ) {
	if ( s.cache === undefined ) {
		s.cache = false;
	}
	if ( s.crossDomain ) {
		s.type = "GET";
	}
});

// Bind script tag hack transport
jQuery.ajaxTransport( "script", function( s ) {
	// This transport only deals with cross domain requests
	if ( s.crossDomain ) {
		var script, callback;
		return {
			send: function( _, complete ) {
				script = jQuery("<script>").prop({
					async: true,
					charset: s.scriptCharset,
					src: s.url
				}).on(
					"load error",
					callback = function( evt ) {
						script.remove();
						callback = null;
						if ( evt ) {
							complete( evt.type === "error" ? 404 : 200, evt.type );
						}
					}
				);
				document.head.appendChild( script[ 0 ] );
			},
			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
});




var oldCallbacks = [],
	rjsonp = /(=)\?(?=&|$)|\?\?/;

// Default jsonp settings
jQuery.ajaxSetup({
	jsonp: "callback",
	jsonpCallback: function() {
		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( nonce++ ) );
		this[ callback ] = true;
		return callback;
	}
});

// Detect, normalize options and install callbacks for jsonp requests
jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {

	var callbackName, overwritten, responseContainer,
		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
			"url" :
			typeof s.data === "string" && !( s.contentType || "" ).indexOf("application/x-www-form-urlencoded") && rjsonp.test( s.data ) && "data"
		);

	// Handle iff the expected data type is "jsonp" or we have a parameter to set
	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {

		// Get callback name, remembering preexisting value associated with it
		callbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?
			s.jsonpCallback() :
			s.jsonpCallback;

		// Insert callback into url or form data
		if ( jsonProp ) {
			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
		} else if ( s.jsonp !== false ) {
			s.url += ( rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
		}

		// Use data converter to retrieve json after script execution
		s.converters["script json"] = function() {
			if ( !responseContainer ) {
				jQuery.error( callbackName + " was not called" );
			}
			return responseContainer[ 0 ];
		};

		// force json dataType
		s.dataTypes[ 0 ] = "json";

		// Install callback
		overwritten = window[ callbackName ];
		window[ callbackName ] = function() {
			responseContainer = arguments;
		};

		// Clean-up function (fires after converters)
		jqXHR.always(function() {
			// Restore preexisting value
			window[ callbackName ] = overwritten;

			// Save back as free
			if ( s[ callbackName ] ) {
				// make sure that re-using the options doesn't screw things around
				s.jsonpCallback = originalSettings.jsonpCallback;

				// save the callback name for future use
				oldCallbacks.push( callbackName );
			}

			// Call if it was a function and we have a response
			if ( responseContainer && jQuery.isFunction( overwritten ) ) {
				overwritten( responseContainer[ 0 ] );
			}

			responseContainer = overwritten = undefined;
		});

		// Delegate to script
		return "script";
	}
});




// data: string of html
// context (optional): If specified, the fragment will be created in this context, defaults to document
// keepScripts (optional): If true, will include scripts passed in the html string
jQuery.parseHTML = function( data, context, keepScripts ) {
	if ( !data || typeof data !== "string" ) {
		return null;
	}
	if ( typeof context === "boolean" ) {
		keepScripts = context;
		context = false;
	}
	context = context || document;

	var parsed = rsingleTag.exec( data ),
		scripts = !keepScripts && [];

	// Single tag
	if ( parsed ) {
		return [ context.createElement( parsed[1] ) ];
	}

	parsed = jQuery.buildFragment( [ data ], context, scripts );

	if ( scripts && scripts.length ) {
		jQuery( scripts ).remove();
	}

	return jQuery.merge( [], parsed.childNodes );
};


// Keep a copy of the old load method
var _load = jQuery.fn.load;

/**
 * Load a url into a page
 */
jQuery.fn.load = function( url, params, callback ) {
	if ( typeof url !== "string" && _load ) {
		return _load.apply( this, arguments );
	}

	var selector, type, response,
		self = this,
		off = url.indexOf(" ");

	if ( off >= 0 ) {
		selector = jQuery.trim( url.slice( off ) );
		url = url.slice( 0, off );
	}

	// If it's a function
	if ( jQuery.isFunction( params ) ) {

		// We assume that it's the callback
		callback = params;
		params = undefined;

	// Otherwise, build a param string
	} else if ( params && typeof params === "object" ) {
		type = "POST";
	}

	// If we have elements to modify, make the request
	if ( self.length > 0 ) {
		jQuery.ajax({
			url: url,

			// if "type" variable is undefined, then "GET" method will be used
			type: type,
			dataType: "html",
			data: params
		}).done(function( responseText ) {

			// Save response for use in complete callback
			response = arguments;

			self.html( selector ?

				// If a selector was specified, locate the right elements in a dummy div
				// Exclude scripts to avoid IE 'Permission Denied' errors
				jQuery("<div>").append( jQuery.parseHTML( responseText ) ).find( selector ) :

				// Otherwise use the full result
				responseText );

		}).complete( callback && function( jqXHR, status ) {
			self.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );
		});
	}

	return this;
};




// Attach a bunch of functions for handling common AJAX events
jQuery.each( [ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function( i, type ) {
	jQuery.fn[ type ] = function( fn ) {
		return this.on( type, fn );
	};
});




jQuery.expr.filters.animated = function( elem ) {
	return jQuery.grep(jQuery.timers, function( fn ) {
		return elem === fn.elem;
	}).length;
};




var docElem = window.document.documentElement;

/**
 * Gets a window from an element
 */
function getWindow( elem ) {
	return jQuery.isWindow( elem ) ? elem : elem.nodeType === 9 && elem.defaultView;
}

jQuery.offset = {
	setOffset: function( elem, options, i ) {
		var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,
			position = jQuery.css( elem, "position" ),
			curElem = jQuery( elem ),
			props = {};

		// Set position first, in-case top/left are set even on static elem
		if ( position === "static" ) {
			elem.style.position = "relative";
		}

		curOffset = curElem.offset();
		curCSSTop = jQuery.css( elem, "top" );
		curCSSLeft = jQuery.css( elem, "left" );
		calculatePosition = ( position === "absolute" || position === "fixed" ) &&
			( curCSSTop + curCSSLeft ).indexOf("auto") > -1;

		// Need to be able to calculate position if either
		// top or left is auto and position is either absolute or fixed
		if ( calculatePosition ) {
			curPosition = curElem.position();
			curTop = curPosition.top;
			curLeft = curPosition.left;

		} else {
			curTop = parseFloat( curCSSTop ) || 0;
			curLeft = parseFloat( curCSSLeft ) || 0;
		}

		if ( jQuery.isFunction( options ) ) {
			options = options.call( elem, i, curOffset );
		}

		if ( options.top != null ) {
			props.top = ( options.top - curOffset.top ) + curTop;
		}
		if ( options.left != null ) {
			props.left = ( options.left - curOffset.left ) + curLeft;
		}

		if ( "using" in options ) {
			options.using.call( elem, props );

		} else {
			curElem.css( props );
		}
	}
};

jQuery.fn.extend({
	offset: function( options ) {
		if ( arguments.length ) {
			return options === undefined ?
				this :
				this.each(function( i ) {
					jQuery.offset.setOffset( this, options, i );
				});
		}

		var docElem, win,
			elem = this[ 0 ],
			box = { top: 0, left: 0 },
			doc = elem && elem.ownerDocument;

		if ( !doc ) {
			return;
		}

		docElem = doc.documentElement;

		// Make sure it's not a disconnected DOM node
		if ( !jQuery.contains( docElem, elem ) ) {
			return box;
		}

		// Support: BlackBerry 5, iOS 3 (original iPhone)
		// If we don't have gBCR, just use 0,0 rather than error
		if ( typeof elem.getBoundingClientRect !== strundefined ) {
			box = elem.getBoundingClientRect();
		}
		win = getWindow( doc );
		return {
			top: box.top + win.pageYOffset - docElem.clientTop,
			left: box.left + win.pageXOffset - docElem.clientLeft
		};
	},

	position: function() {
		if ( !this[ 0 ] ) {
			return;
		}

		var offsetParent, offset,
			elem = this[ 0 ],
			parentOffset = { top: 0, left: 0 };

		// Fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is its only offset parent
		if ( jQuery.css( elem, "position" ) === "fixed" ) {
			// Assume getBoundingClientRect is there when computed position is fixed
			offset = elem.getBoundingClientRect();

		} else {
			// Get *real* offsetParent
			offsetParent = this.offsetParent();

			// Get correct offsets
			offset = this.offset();
			if ( !jQuery.nodeName( offsetParent[ 0 ], "html" ) ) {
				parentOffset = offsetParent.offset();
			}

			// Add offsetParent borders
			parentOffset.top += jQuery.css( offsetParent[ 0 ], "borderTopWidth", true );
			parentOffset.left += jQuery.css( offsetParent[ 0 ], "borderLeftWidth", true );
		}

		// Subtract parent offsets and element margins
		return {
			top: offset.top - parentOffset.top - jQuery.css( elem, "marginTop", true ),
			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true )
		};
	},

	offsetParent: function() {
		return this.map(function() {
			var offsetParent = this.offsetParent || docElem;

			while ( offsetParent && ( !jQuery.nodeName( offsetParent, "html" ) && jQuery.css( offsetParent, "position" ) === "static" ) ) {
				offsetParent = offsetParent.offsetParent;
			}

			return offsetParent || docElem;
		});
	}
});

// Create scrollLeft and scrollTop methods
jQuery.each( { scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function( method, prop ) {
	var top = "pageYOffset" === prop;

	jQuery.fn[ method ] = function( val ) {
		return access( this, function( elem, method, val ) {
			var win = getWindow( elem );

			if ( val === undefined ) {
				return win ? win[ prop ] : elem[ method ];
			}

			if ( win ) {
				win.scrollTo(
					!top ? val : window.pageXOffset,
					top ? val : window.pageYOffset
				);

			} else {
				elem[ method ] = val;
			}
		}, method, val, arguments.length, null );
	};
});

// Support: Safari<7+, Chrome<37+
// Add the top/left cssHooks using jQuery.fn.position
// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
// Blink bug: https://code.google.com/p/chromium/issues/detail?id=229280
// getComputedStyle returns percent when specified for top/left/bottom/right;
// rather than make the css module depend on the offset module, just check for it here
jQuery.each( [ "top", "left" ], function( i, prop ) {
	jQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,
		function( elem, computed ) {
			if ( computed ) {
				computed = curCSS( elem, prop );
				// If curCSS returns percentage, fallback to offset
				return rnumnonpx.test( computed ) ?
					jQuery( elem ).position()[ prop ] + "px" :
					computed;
			}
		}
	);
});


// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
	jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name }, function( defaultExtra, funcName ) {
		// Margin is only for outerHeight, outerWidth
		jQuery.fn[ funcName ] = function( margin, value ) {
			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );

			return access( this, function( elem, type, value ) {
				var doc;

				if ( jQuery.isWindow( elem ) ) {
					// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there
					// isn't a whole lot we can do. See pull request at this URL for discussion:
					// https://github.com/jquery/jquery/pull/764
					return elem.document.documentElement[ "client" + name ];
				}

				// Get document width or height
				if ( elem.nodeType === 9 ) {
					doc = elem.documentElement;

					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],
					// whichever is greatest
					return Math.max(
						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
						elem.body[ "offset" + name ], doc[ "offset" + name ],
						doc[ "client" + name ]
					);
				}

				return value === undefined ?
					// Get width or height on the element, requesting but not forcing parseFloat
					jQuery.css( elem, type, extra ) :

					// Set width or height on the element
					jQuery.style( elem, type, value, extra );
			}, type, chainable ? margin : undefined, chainable, null );
		};
	});
});


// The number of elements contained in the matched element set
jQuery.fn.size = function() {
	return this.length;
};

jQuery.fn.andSelf = jQuery.fn.addBack;




// Register as a named AMD module, since jQuery can be concatenated with other
// files that may use define, but not via a proper concatenation script that
// understands anonymous AMD modules. A named AMD is safest and most robust
// way to register. Lowercase jquery is used because AMD module names are
// derived from file names, and jQuery is normally delivered in a lowercase
// file name. Do this after creating the global so that if an AMD module wants
// to call noConflict to hide this version of jQuery, it will work.

// Note that for maximum portability, libraries that are not jQuery should
// declare themselves as anonymous modules, and avoid setting a global if an
// AMD loader is present. jQuery is a special case. For more information, see
// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon

if ( typeof define === "function" && define.amd ) {
	define( "jquery", [], function() {
		return jQuery;
	});
}




var
	// Map over jQuery in case of overwrite
	_jQuery = window.jQuery,

	// Map over the $ in case of overwrite
	_$ = window.$;

jQuery.noConflict = function( deep ) {
	if ( window.$ === jQuery ) {
		window.$ = _$;
	}

	if ( deep && window.jQuery === jQuery ) {
		window.jQuery = _jQuery;
	}

	return jQuery;
};

// Expose jQuery and $ identifiers, even in AMD
// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)
// and CommonJS for browser emulators (#13566)
if ( typeof noGlobal === strundefined ) {
	window.jQuery = window.$ = jQuery;
}




return jQuery;

}));

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/jquery/dist/jquery.js","/node_modules/jquery/dist")

},{"_process":7,"buffer":3}],3:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */

var base64 = require('base64-js')
var ieee754 = require('ieee754')
var isArray = require('is-array')

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50
Buffer.poolSize = 8192 // not used by this implementation

var kMaxLength = 0x3fffffff
var rootParent = {}

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Note:
 *
 * - Implementation must support adding new properties to `Uint8Array` instances.
 *   Firefox 4-29 lacked support, fixed in Firefox 30+.
 *   See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *  - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *  - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *    incorrect length in some situations.
 *
 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they will
 * get the Object implementation, which is slower but will work correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = (function () {
  try {
    var buf = new ArrayBuffer(0)
    var arr = new Uint8Array(buf)
    arr.foo = function () { return 42 }
    return 42 === arr.foo() && // typed array instances can be augmented
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        new Uint8Array(1).subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
})()

/**
 * Class: Buffer
 * =============
 *
 * The Buffer constructor returns instances of `Uint8Array` that are augmented
 * with function properties for all the node `Buffer` API functions. We use
 * `Uint8Array` so that square bracket notation works as expected -- it returns
 * a single octet.
 *
 * By augmenting the instances, we can avoid modifying the `Uint8Array`
 * prototype.
 */
function Buffer (subject, encoding, noZero) {
  if (!(this instanceof Buffer))
    return new Buffer(subject, encoding, noZero)

  var type = typeof subject

  // Find the length
  var length
  if (type === 'number')
    length = subject > 0 ? subject >>> 0 : 0
  else if (type === 'string') {
    length = Buffer.byteLength(subject, encoding)
  } else if (type === 'object' && subject !== null) { // assume object is array-like
    if (subject.type === 'Buffer' && isArray(subject.data))
      subject = subject.data
    length = +subject.length > 0 ? Math.floor(+subject.length) : 0
  } else
    throw new TypeError('must start with number, buffer, array or string')

  if (length > kMaxLength)
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
      'size: 0x' + kMaxLength.toString(16) + ' bytes')

  var buf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Preferred: Return an augmented `Uint8Array` instance for best performance
    buf = Buffer._augment(new Uint8Array(length))
  } else {
    // Fallback: Return THIS instance of Buffer (created by `new`)
    buf = this
    buf.length = length
    buf._isBuffer = true
  }

  var i
  if (Buffer.TYPED_ARRAY_SUPPORT && typeof subject.byteLength === 'number') {
    // Speed optimization -- use set if we're copying from a typed array
    buf._set(subject)
  } else if (isArrayish(subject)) {
    // Treat array-ish objects as a byte array
    if (Buffer.isBuffer(subject)) {
      for (i = 0; i < length; i++)
        buf[i] = subject.readUInt8(i)
    } else {
      for (i = 0; i < length; i++)
        buf[i] = ((subject[i] % 256) + 256) % 256
    }
  } else if (type === 'string') {
    buf.write(subject, 0, encoding)
  } else if (type === 'number' && !Buffer.TYPED_ARRAY_SUPPORT && !noZero) {
    for (i = 0; i < length; i++) {
      buf[i] = 0
    }
  }

  if (length > 0 && length <= Buffer.poolSize)
    buf.parent = rootParent

  return buf
}

function SlowBuffer(subject, encoding, noZero) {
  if (!(this instanceof SlowBuffer))
    return new SlowBuffer(subject, encoding, noZero)

  var buf = new Buffer(subject, encoding, noZero)
  delete buf.parent
  return buf
}

Buffer.isBuffer = function (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b))
    throw new TypeError('Arguments must be Buffers')

  var x = a.length
  var y = b.length
  for (var i = 0, len = Math.min(x, y); i < len && a[i] === b[i]; i++) {}
  if (i !== len) {
    x = a[i]
    y = b[i]
  }
  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'binary':
    case 'base64':
    case 'raw':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function (list, totalLength) {
  if (!isArray(list)) throw new TypeError('Usage: Buffer.concat(list[, length])')

  if (list.length === 0) {
    return new Buffer(0)
  } else if (list.length === 1) {
    return list[0]
  }

  var i
  if (totalLength === undefined) {
    totalLength = 0
    for (i = 0; i < list.length; i++) {
      totalLength += list[i].length
    }
  }

  var buf = new Buffer(totalLength)
  var pos = 0
  for (i = 0; i < list.length; i++) {
    var item = list[i]
    item.copy(buf, pos)
    pos += item.length
  }
  return buf
}

Buffer.byteLength = function (str, encoding) {
  var ret
  str = str + ''
  switch (encoding || 'utf8') {
    case 'ascii':
    case 'binary':
    case 'raw':
      ret = str.length
      break
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      ret = str.length * 2
      break
    case 'hex':
      ret = str.length >>> 1
      break
    case 'utf8':
    case 'utf-8':
      ret = utf8ToBytes(str).length
      break
    case 'base64':
      ret = base64ToBytes(str).length
      break
    default:
      ret = str.length
  }
  return ret
}

// pre-set for values that may exist in the future
Buffer.prototype.length = undefined
Buffer.prototype.parent = undefined

// toString(encoding, start=0, end=buffer.length)
Buffer.prototype.toString = function (encoding, start, end) {
  var loweredCase = false

  start = start >>> 0
  end = end === undefined || end === Infinity ? this.length : end >>> 0

  if (!encoding) encoding = 'utf8'
  if (start < 0) start = 0
  if (end > this.length) end = this.length
  if (end <= start) return ''

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'binary':
        return binarySlice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase)
          throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.equals = function (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max)
      str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  return Buffer.compare(this, b)
}

// `get` will be removed in Node 0.13+
Buffer.prototype.get = function (offset) {
  console.log('.get() is deprecated. Access using array indexes instead.')
  return this.readUInt8(offset)
}

// `set` will be removed in Node 0.13+
Buffer.prototype.set = function (v, offset) {
  console.log('.set() is deprecated. Access using array indexes instead.')
  return this.writeUInt8(v, offset)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new Error('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; i++) {
    var byte = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(byte)) throw new Error('Invalid hex string')
    buf[offset + i] = byte
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  var charsWritten = blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
  return charsWritten
}

function asciiWrite (buf, string, offset, length) {
  var charsWritten = blitBuffer(asciiToBytes(string), buf, offset, length)
  return charsWritten
}

function binaryWrite (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  var charsWritten = blitBuffer(base64ToBytes(string), buf, offset, length)
  return charsWritten
}

function utf16leWrite (buf, string, offset, length) {
  var charsWritten = blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length, 2)
  return charsWritten
}

Buffer.prototype.write = function (string, offset, length, encoding) {
  // Support both (string, offset, length, encoding)
  // and the legacy (string, encoding, offset, length)
  if (isFinite(offset)) {
    if (!isFinite(length)) {
      encoding = length
      length = undefined
    }
  } else {  // legacy
    var swap = encoding
    encoding = offset
    offset = length
    length = swap
  }

  offset = Number(offset) || 0

  if (length < 0 || offset < 0 || offset > this.length)
    throw new RangeError('attempt to write outside buffer bounds');

  var remaining = this.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }
  encoding = String(encoding || 'utf8').toLowerCase()

  var ret
  switch (encoding) {
    case 'hex':
      ret = hexWrite(this, string, offset, length)
      break
    case 'utf8':
    case 'utf-8':
      ret = utf8Write(this, string, offset, length)
      break
    case 'ascii':
      ret = asciiWrite(this, string, offset, length)
      break
    case 'binary':
      ret = binaryWrite(this, string, offset, length)
      break
    case 'base64':
      ret = base64Write(this, string, offset, length)
      break
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      ret = utf16leWrite(this, string, offset, length)
      break
    default:
      throw new TypeError('Unknown encoding: ' + encoding)
  }
  return ret
}

Buffer.prototype.toJSON = function () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  var res = ''
  var tmp = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; i++) {
    if (buf[i] <= 0x7F) {
      res += decodeUtf8Char(tmp) + String.fromCharCode(buf[i])
      tmp = ''
    } else {
      tmp += '%' + buf[i].toString(16)
    }
  }

  return res + decodeUtf8Char(tmp)
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; i++) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function binarySlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; i++) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; i++) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len;
    if (start < 0)
      start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0)
      end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start)
    end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = Buffer._augment(this.subarray(start, end))
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined, true)
    for (var i = 0; i < sliceLen; i++) {
      newBuf[i] = this[i + start]
    }
  }

  if (newBuf.length)
    newBuf.parent = this.parent || this

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0)
    throw new RangeError('offset is not uint')
  if (offset + ext > length)
    throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function (offset, byteLength, noAssert) {
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100))
    val += this[offset + i] * mul

  return val
}

Buffer.prototype.readUIntBE = function (offset, byteLength, noAssert) {
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkOffset(offset, byteLength, this.length)

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100))
    val += this[offset + --byteLength] * mul;

  return val
}

Buffer.prototype.readUInt8 = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
      ((this[offset + 1] << 16) |
      (this[offset + 2] << 8) |
      this[offset + 3])
}

Buffer.prototype.readIntLE = function (offset, byteLength, noAssert) {
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100))
    val += this[offset + i] * mul
  mul *= 0x80

  if (val >= mul)
    val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function (offset, byteLength, noAssert) {
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100))
    val += this[offset + --i] * mul
  mul *= 0x80

  if (val >= mul)
    val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80))
    return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)

  return (this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16) |
      (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
      (this[offset + 1] << 16) |
      (this[offset + 2] << 8) |
      (this[offset + 3])
}

Buffer.prototype.readFloatLE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('value is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('index out of range')
}

Buffer.prototype.writeUIntLE = function (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100))
    this[offset + i] = (value / mul) >>> 0 & 0xFF

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100))
    this[offset + i] = (value / mul) >>> 0 & 0xFF

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = value
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = value
    this[offset + 1] = (value >>> 8)
  } else objectWriteUInt16(this, value, offset, true)
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = value
  } else objectWriteUInt16(this, value, offset, false)
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = value
  } else objectWriteUInt32(this, value, offset, true)
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = value
  } else objectWriteUInt32(this, value, offset, false)
  return offset + 4
}

Buffer.prototype.writeIntLE = function (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) {
    checkInt(this,
             value,
             offset,
             byteLength,
             Math.pow(2, 8 * byteLength - 1) - 1,
             -Math.pow(2, 8 * byteLength - 1))
  }

  var i = 0
  var mul = 1
  var sub = value < 0 ? 1 : 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100))
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) {
    checkInt(this,
             value,
             offset,
             byteLength,
             Math.pow(2, 8 * byteLength - 1) - 1,
             -Math.pow(2, 8 * byteLength - 1))
  }

  var i = byteLength - 1
  var mul = 1
  var sub = value < 0 ? 1 : 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100))
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = value
  return offset + 1
}

Buffer.prototype.writeInt16LE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = value
    this[offset + 1] = (value >>> 8)
  } else objectWriteUInt16(this, value, offset, true)
  return offset + 2
}

Buffer.prototype.writeInt16BE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = value
  } else objectWriteUInt16(this, value, offset, false)
  return offset + 2
}

Buffer.prototype.writeInt32LE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = value
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else objectWriteUInt32(this, value, offset, true)
  return offset + 4
}

Buffer.prototype.writeInt32BE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = value
  } else objectWriteUInt32(this, value, offset, false)
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (value > max || value < min) throw new RangeError('value is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('index out of range')
  if (offset < 0) throw new RangeError('index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert)
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert)
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function (target, target_start, start, end) {
  var source = this

  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (target_start >= target.length) target_start = target.length
  if (!target_start) target_start = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || source.length === 0) return 0

  // Fatal error conditions
  if (target_start < 0)
    throw new RangeError('targetStart out of bounds')
  if (start < 0 || start >= source.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length)
    end = this.length
  if (target.length - target_start < end - start)
    end = target.length - target_start + start

  var len = end - start

  if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < len; i++) {
      target[i + target_start] = this[i + start]
    }
  } else {
    target._set(this.subarray(start, start + len), target_start)
  }

  return len
}

// fill(value, start=0, end=buffer.length)
Buffer.prototype.fill = function (value, start, end) {
  if (!value) value = 0
  if (!start) start = 0
  if (!end) end = this.length

  if (end < start) throw new RangeError('end < start')

  // Fill 0 bytes; we're done
  if (end === start) return
  if (this.length === 0) return

  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')
  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')

  var i
  if (typeof value === 'number') {
    for (i = start; i < end; i++) {
      this[i] = value
    }
  } else {
    var bytes = utf8ToBytes(value.toString())
    var len = bytes.length
    for (i = start; i < end; i++) {
      this[i] = bytes[i % len]
    }
  }

  return this
}

/**
 * Creates a new `ArrayBuffer` with the *copied* memory of the buffer instance.
 * Added in Node 0.12. Only available in browsers that support ArrayBuffer.
 */
Buffer.prototype.toArrayBuffer = function () {
  if (typeof Uint8Array !== 'undefined') {
    if (Buffer.TYPED_ARRAY_SUPPORT) {
      return (new Buffer(this)).buffer
    } else {
      var buf = new Uint8Array(this.length)
      for (var i = 0, len = buf.length; i < len; i += 1) {
        buf[i] = this[i]
      }
      return buf.buffer
    }
  } else {
    throw new TypeError('Buffer.toArrayBuffer not supported in this browser')
  }
}

// HELPER FUNCTIONS
// ================

var BP = Buffer.prototype

/**
 * Augment a Uint8Array *instance* (not the Uint8Array class!) with Buffer methods
 */
Buffer._augment = function (arr) {
  arr.constructor = Buffer
  arr._isBuffer = true

  // save reference to original Uint8Array get/set methods before overwriting
  arr._get = arr.get
  arr._set = arr.set

  // deprecated, will be removed in node 0.13+
  arr.get = BP.get
  arr.set = BP.set

  arr.write = BP.write
  arr.toString = BP.toString
  arr.toLocaleString = BP.toString
  arr.toJSON = BP.toJSON
  arr.equals = BP.equals
  arr.compare = BP.compare
  arr.copy = BP.copy
  arr.slice = BP.slice
  arr.readUIntLE = BP.readUIntLE
  arr.readUIntBE = BP.readUIntBE
  arr.readUInt8 = BP.readUInt8
  arr.readUInt16LE = BP.readUInt16LE
  arr.readUInt16BE = BP.readUInt16BE
  arr.readUInt32LE = BP.readUInt32LE
  arr.readUInt32BE = BP.readUInt32BE
  arr.readIntLE = BP.readIntLE
  arr.readIntBE = BP.readIntBE
  arr.readInt8 = BP.readInt8
  arr.readInt16LE = BP.readInt16LE
  arr.readInt16BE = BP.readInt16BE
  arr.readInt32LE = BP.readInt32LE
  arr.readInt32BE = BP.readInt32BE
  arr.readFloatLE = BP.readFloatLE
  arr.readFloatBE = BP.readFloatBE
  arr.readDoubleLE = BP.readDoubleLE
  arr.readDoubleBE = BP.readDoubleBE
  arr.writeUInt8 = BP.writeUInt8
  arr.writeUIntLE = BP.writeUIntLE
  arr.writeUIntBE = BP.writeUIntBE
  arr.writeUInt16LE = BP.writeUInt16LE
  arr.writeUInt16BE = BP.writeUInt16BE
  arr.writeUInt32LE = BP.writeUInt32LE
  arr.writeUInt32BE = BP.writeUInt32BE
  arr.writeIntLE = BP.writeIntLE
  arr.writeIntBE = BP.writeIntBE
  arr.writeInt8 = BP.writeInt8
  arr.writeInt16LE = BP.writeInt16LE
  arr.writeInt16BE = BP.writeInt16BE
  arr.writeInt32LE = BP.writeInt32LE
  arr.writeInt32BE = BP.writeInt32BE
  arr.writeFloatLE = BP.writeFloatLE
  arr.writeFloatBE = BP.writeFloatBE
  arr.writeDoubleLE = BP.writeDoubleLE
  arr.writeDoubleBE = BP.writeDoubleBE
  arr.fill = BP.fill
  arr.inspect = BP.inspect
  arr.toArrayBuffer = BP.toArrayBuffer

  return arr
}

var INVALID_BASE64_RE = /[^+\/0-9A-z\-]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function isArrayish (subject) {
  return isArray(subject) || Buffer.isBuffer(subject) ||
      subject && typeof subject === 'object' &&
      typeof subject.length === 'number'
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes(string, units) {
  var codePoint, length = string.length
  var leadSurrogate = null
  units = units || Infinity
  var bytes = []
  var i = 0

  for (; i<length; i++) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {

      // last char was a lead
      if (leadSurrogate) {

        // 2 leads in a row
        if (codePoint < 0xDC00) {
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          leadSurrogate = codePoint
          continue
        }

        // valid surrogate pair
        else {
          codePoint = leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00 | 0x10000
          leadSurrogate = null
        }
      }

      // no lead yet
      else {

        // unexpected trail
        if (codePoint > 0xDBFF) {
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // unpaired lead
        else if (i + 1 === length) {
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        else {
          leadSurrogate = codePoint
          continue
        }
      }
    }

    // valid bmp char, but last char was a lead
    else if (leadSurrogate) {
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
      leadSurrogate = null
    }

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    }
    else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      );
    }
    else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      );
    }
    else if (codePoint < 0x200000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      );
    }
    else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; i++) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; i++) {

    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length, unitSize) {
  if (unitSize) length -= length % unitSize;
  for (var i = 0; i < length; i++) {
    if ((i + offset >= dst.length) || (i >= src.length))
      break
    dst[i + offset] = src[i]
  }
  return i
}

function decodeUtf8Char (str) {
  try {
    return decodeURIComponent(str)
  } catch (err) {
    return String.fromCharCode(0xFFFD) // UTF 8 invalid char
  }
}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/buffer/index.js","/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/buffer")

},{"_process":7,"base64-js":4,"buffer":3,"ieee754":5,"is-array":6}],4:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

;(function (exports) {
	'use strict';

  var Arr = (typeof Uint8Array !== 'undefined')
    ? Uint8Array
    : Array

	var PLUS   = '+'.charCodeAt(0)
	var SLASH  = '/'.charCodeAt(0)
	var NUMBER = '0'.charCodeAt(0)
	var LOWER  = 'a'.charCodeAt(0)
	var UPPER  = 'A'.charCodeAt(0)
	var PLUS_URL_SAFE = '-'.charCodeAt(0)
	var SLASH_URL_SAFE = '_'.charCodeAt(0)

	function decode (elt) {
		var code = elt.charCodeAt(0)
		if (code === PLUS ||
		    code === PLUS_URL_SAFE)
			return 62 // '+'
		if (code === SLASH ||
		    code === SLASH_URL_SAFE)
			return 63 // '/'
		if (code < NUMBER)
			return -1 //no match
		if (code < NUMBER + 10)
			return code - NUMBER + 26 + 26
		if (code < UPPER + 26)
			return code - UPPER
		if (code < LOWER + 26)
			return code - LOWER + 26
	}

	function b64ToByteArray (b64) {
		var i, j, l, tmp, placeHolders, arr

		if (b64.length % 4 > 0) {
			throw new Error('Invalid string. Length must be a multiple of 4')
		}

		// the number of equal signs (place holders)
		// if there are two placeholders, than the two characters before it
		// represent one byte
		// if there is only one, then the three characters before it represent 2 bytes
		// this is just a cheap hack to not do indexOf twice
		var len = b64.length
		placeHolders = '=' === b64.charAt(len - 2) ? 2 : '=' === b64.charAt(len - 1) ? 1 : 0

		// base64 is 4/3 + up to two characters of the original data
		arr = new Arr(b64.length * 3 / 4 - placeHolders)

		// if there are placeholders, only get up to the last complete 4 chars
		l = placeHolders > 0 ? b64.length - 4 : b64.length

		var L = 0

		function push (v) {
			arr[L++] = v
		}

		for (i = 0, j = 0; i < l; i += 4, j += 3) {
			tmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))
			push((tmp & 0xFF0000) >> 16)
			push((tmp & 0xFF00) >> 8)
			push(tmp & 0xFF)
		}

		if (placeHolders === 2) {
			tmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)
			push(tmp & 0xFF)
		} else if (placeHolders === 1) {
			tmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)
			push((tmp >> 8) & 0xFF)
			push(tmp & 0xFF)
		}

		return arr
	}

	function uint8ToBase64 (uint8) {
		var i,
			extraBytes = uint8.length % 3, // if we have 1 byte left, pad 2 bytes
			output = "",
			temp, length

		function encode (num) {
			return lookup.charAt(num)
		}

		function tripletToBase64 (num) {
			return encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)
		}

		// go through the array every three bytes, we'll deal with trailing stuff later
		for (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {
			temp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])
			output += tripletToBase64(temp)
		}

		// pad the end with zeros, but make sure to not forget the extra bytes
		switch (extraBytes) {
			case 1:
				temp = uint8[uint8.length - 1]
				output += encode(temp >> 2)
				output += encode((temp << 4) & 0x3F)
				output += '=='
				break
			case 2:
				temp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])
				output += encode(temp >> 10)
				output += encode((temp >> 4) & 0x3F)
				output += encode((temp << 2) & 0x3F)
				output += '='
				break
		}

		return output
	}

	exports.toByteArray = b64ToByteArray
	exports.fromByteArray = uint8ToBase64
}(typeof exports === 'undefined' ? (this.base64js = {}) : exports))

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js","/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib")

},{"_process":7,"buffer":3}],5:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
exports.read = function(buffer, offset, isLE, mLen, nBytes) {
  var e, m,
      eLen = nBytes * 8 - mLen - 1,
      eMax = (1 << eLen) - 1,
      eBias = eMax >> 1,
      nBits = -7,
      i = isLE ? (nBytes - 1) : 0,
      d = isLE ? -1 : 1,
      s = buffer[offset + i];

  i += d;

  e = s & ((1 << (-nBits)) - 1);
  s >>= (-nBits);
  nBits += eLen;
  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8);

  m = e & ((1 << (-nBits)) - 1);
  e >>= (-nBits);
  nBits += mLen;
  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8);

  if (e === 0) {
    e = 1 - eBias;
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity);
  } else {
    m = m + Math.pow(2, mLen);
    e = e - eBias;
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);
};

exports.write = function(buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c,
      eLen = nBytes * 8 - mLen - 1,
      eMax = (1 << eLen) - 1,
      eBias = eMax >> 1,
      rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0),
      i = isLE ? 0 : (nBytes - 1),
      d = isLE ? 1 : -1,
      s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0;

  value = Math.abs(value);

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0;
    e = eMax;
  } else {
    e = Math.floor(Math.log(value) / Math.LN2);
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--;
      c *= 2;
    }
    if (e + eBias >= 1) {
      value += rt / c;
    } else {
      value += rt * Math.pow(2, 1 - eBias);
    }
    if (value * c >= 2) {
      e++;
      c /= 2;
    }

    if (e + eBias >= eMax) {
      m = 0;
      e = eMax;
    } else if (e + eBias >= 1) {
      m = (value * c - 1) * Math.pow(2, mLen);
      e = e + eBias;
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);
      e = 0;
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8);

  e = (e << mLen) | m;
  eLen += mLen;
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8);

  buffer[offset + i - d] |= s * 128;
};

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js","/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/buffer/node_modules/ieee754")

},{"_process":7,"buffer":3}],6:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){

/**
 * isArray
 */

var isArray = Array.isArray;

/**
 * toString
 */

var str = Object.prototype.toString;

/**
 * Whether or not the given `val`
 * is an array.
 *
 * example:
 *
 *        isArray([]);
 *        // > true
 *        isArray(arguments);
 *        // > false
 *        isArray('');
 *        // > false
 *
 * @param {mixed} val
 * @return {bool}
 */

module.exports = isArray || function (val) {
  return !! val && '[object Array]' == str.call(val);
};

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/buffer/node_modules/is-array/index.js","/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/buffer/node_modules/is-array")

},{"_process":7,"buffer":3}],7:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
// shim for using process in browser

var process = module.exports = {};
var queue = [];
var draining = false;

function drainQueue() {
    if (draining) {
        return;
    }
    draining = true;
    var currentQueue;
    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        var i = -1;
        while (++i < len) {
            currentQueue[i]();
        }
        len = queue.length;
    }
    draining = false;
}
process.nextTick = function (fun) {
    queue.push(fun);
    if (!draining) {
        setTimeout(drainQueue, 0);
    }
};

process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

// TODO(shtylman)
process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/process/browser.js","/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/process")

},{"_process":7,"buffer":3}],8:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleableBasicCtrl = function($scope,$rootScope,SaleableService,MessageService,SaleableHelper){

    $rootScope.$on("newBasicDetail",function(event){
        SaleableHelper.categoryList('/catlist',$scope);

        //var numberOfSaleables = $scope.$parent.saleables.length;
        var saleable = SaleableService.$build();
        saleable.type =0;
        saleable.featured = 0;

        /*if(numberOfSaleables==0){

        }*/
        //$scope.saleable = angular.copy($scope.master);
        $scope.saleable = saleable;



        $scope.updateSaleable = function(){

            if($scope.saleable.isfeatured){
                $scope.saleable.featured = 1;
            }else{
                $scope.saleable.featured = 0;
            }
            console.log($scope.saleable.categories);
            saleable.$save().$then(function(data){
                var meta = data.$metadata.meta;
                MessageService.setAlertMessage($scope,meta);
                $rootScope.$emit("saleableCreated",saleable);

            });
        }

    });

    $rootScope.$on("editBasicDetail",function(event,saleable){
        SaleableHelper.categoryList('/catlist',$scope);
        SaleableHelper.salCategoryList('/salcatlist/'+saleable.id,$scope);
        $scope.saleable = saleable;
        $scope.updateSaleable = function(){

            if($scope.saleable.isfeatured){
                $scope.saleable.featured = 1;
            }else{
                $scope.saleable.featured = 0;
            }
            saleable.$save().$then(function(data){

                var meta = data.$metadata.meta;
                MessageService.setAlertMessage($scope,meta);
                $rootScope.$emit("saleableUpdated",saleable);

            });
        }

    });



}

module.exports = saleableBasicCtrl;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/basicdetailcontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],9:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){

var bioController = function($scope,BiographyService,MessageService){


    var data = BiographyService.$find(0);

    $scope.profile = data.$fetch();

    $scope.updateBio = function(){
        data.$save().$then(function(data){

            var meta = data.$metadata.meta;

            MessageService.setAlertMessage($scope,meta);

        });
    }
}

module.exports = bioController;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/biocontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],10:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var configController = function($scope,$timeout,MessageService,UserContentType){

    var contenttypes = UserContentType.$search().$then(function(data){
        $scope.usercontenttypes = data;
    });

    $scope.editUserContent = function(content){
        $scope.content = content;
        $scope.showEditContentItem = true;
    }
    $scope.updateUserContent = function(){
        var isHome = $scope.content.ishome;
        var asHome = false;
        $scope.content.ashome = 0;
        if(isHome){
            $scope.content.ashome = 1;
        }
        $scope.content.$save().$then(function(data){
            $scope.usercontenttypes.$refresh();
            $scope.showEditContentItem = false;
            var meta = data.$metadata.meta;
            MessageService.setAlertMessage($scope,meta);
        });
    }

    $scope.changeStateContent = function($event,usercontent){
        var checkbox = $event.target;
        var action = (checkbox.checked ? true: false);

        usercontent.active = action;
        usercontent.$save().$then(function(data){
            $scope.usercontenttypes.$refresh();
            var meta = data.$metadata.meta;
            MessageService.setAlertMessage($scope,meta);
        });
    }
    $scope.setAsHome = function($event,usercontent){
        var checkbox = $event.target;
        var action = (checkbox.checked ? true: false);

        usercontent.ashome = action;
        usercontent.$save().$then(function(data){
            $scope.usercontenttypes.$refresh();
            var meta = data.$metadata.meta;
            MessageService.setAlertMessage($scope,meta);
        });
    }

}
module.exports = configController;


}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/configcontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],11:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/**
 * Created by macintosh on 2/3/15.
 */
var alertDirective = function(){
    return {
        templateUrl:"../../js/admin/angular/templates/alert.html",
        restrict:"EA",
        scope : {
            message:"=msge"
        },

        controller:function($scope){

            $scope.showAlert = true;
            $scope.destroyAlert = function(){
                $scope.$parent.showAlert = false;
            }
        }
    }
}
module.exports = alertDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/alertdirective.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],12:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var bioDirective = function(MessageService,Bio,$timeout,Helper,$http){
    return {
        templateUrl:"../../js/admin/angular/templates/biographies/biographies.html",
        restrict:"EA",
        scope:{},
        controller:function($scope,$rootScope) {
            $scope.closeForm = function(){
                Helper.enableForm($scope,false);
            }
            Helper.enableForm($scope,false);

                    var bios = Bio.$search().$then(function (data) {
                        console.log(data);
                        $scope.bios = data;
                        if ($scope.bios.length == 0) {
                            MessageService.setNoItemsInfoMessage($scope, " biografías",
                                ". Pulsa el botón Nueva para crear una");
                        }
                    });



                    $scope.newBio = function () {

                        Helper.enableForm($scope, true);
                        var bio = Bio.$build();
                        $scope.bio = bio;

                        $scope.updateBio = function () {

                            bio.$save().$then(function (data) {
                                $scope.bios.$refresh();
                                $scope.bioForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }

                    };

                    $scope.editBio = function (bio) {
                        Helper.enableForm($scope, true);
                        $scope.bio = bio;

                        $scope.updateBio = function () {

                            bio.$save().$then(function (data) {
                                $scope.bios.$refresh();
                                $scope.bioForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //delete
                    $scope.removeBio = function (bio) {
                        $scope.bio = bio;
                        var confirmation = MessageService.setConfirmDeleteMessage(" biografía", " ");
                        if (confirmation) {
                            bio.$destroy().$then(function (data) {
                                var meta = data.$response.data;
                                $scope.bios.$refresh();
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //change status
                    $scope.changeStatus = function ($event, bio) {
                        var checkbox = $event.target;
                        var action = (checkbox.checked ? true : false);

                        bio.status = action;
                        bio.$save().$then(function (data) {
                            $scope.bios.$refresh();
                            var meta = data.$metadata.meta;
                            MessageService.setAlertMessage($scope, meta);
                        });
                    };

                    $scope.setDef = function ($event, bio) {
                        console.log("aqui");
                        /*var checkbox = $event.target;
                        var action = (checkbox.checked ? true : false);

                        bio.status = action;*/
                        $http.post("/biography/setDefault/"+bio.id).success(function(data){
                            $scope.bios.$refresh();
                            console.log(data);
                            var meta = data.meta;
                            MessageService.setAlertMessage($scope, meta);
                        });
                    };






        }
    }

}
module.exports = bioDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/biographies/biography.js","/resources/assets/js/admin/angular/directives/biographies")

},{"_process":7,"buffer":3}],13:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var closeContentDirective = function(){
    return {
        restrict:'EA',
        template:'<a href="" ng-click="destroySection()" class="pull-right remove-button" data-icon="&#xe70d" ></a>',

        scope:{remove:'&'},
        controller:function($scope){
            $scope.destroySection = function(){
                $scope.remove();
            }
        }
    }
}

module.exports = closeContentDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/closecontentdirective.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],14:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var configMenu = function(){
    return {
        restrict:"EA",
        templateUrl:"../../js/admin/angular/templates/config_menu.html"
    }
}
module.exports = configMenu;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/configmenu.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],15:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var categoryDirective = function(MessageService,Category,$timeout,Helper){
    return {
        templateUrl:"../../js/admin/angular/templates/configuration/categories.html",
        restrict:"EA",
        scope:{},
        controller:function($scope,$rootScope) {
            $scope.closeForm = function(){
                Helper.enableForm($scope,false);
            }
            Helper.enableForm($scope,false);
                    var categories = Category.$search().$then(function (data) {
                        $scope.categories = data;
                        if ($scope.categories.length == 0) {
                            MessageService.setNoItemsInfoMessage($scope, " categorías",
                                ". Pulsa el botón Nueva para crear una");
                        }
                    });

                    $scope.newCategory = function () {
                        Helper.enableForm($scope, true);
                        var category = Category.$build();
                        $scope.category = category;

                        $scope.updateCategory = function () {
                            category.$save().$then(function (data) {
                                $scope.categories.$refresh();
                                $scope.categoryForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }

                    };

                    $scope.editCategory = function (category) {
                        Helper.enableForm($scope, true);
                        $scope.category = category;

                        $scope.updateCategory = function () {

                            category.$save().$then(function (data) {
                                $scope.categories.$refresh();
                                $scope.categoryForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //delete
                    $scope.removeCategory = function (category) {
                        $scope.category = category;
                        var confirmation = MessageService.setConfirmDeleteMessage(" categoría", " ");
                        if (confirmation) {
                            category.$destroy().$then(function (data) {
                                var meta = data.$response.data;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //change status
                    /*$scope.changeStatus = function ($event, category) {
                        var checkbox = $event.target;
                        var action = (checkbox.checked ? true : false);

                        category.status = action;
                        category.$save().$then(function (data) {
                            $scope.categories.$refresh();
                            var meta = data.$metadata.meta;
                            MessageService.setAlertMessage($scope, meta);
                        });
                    };*/

        }
    }

}
module.exports = categoryDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/configuration/category.js","/resources/assets/js/admin/angular/directives/configuration")

},{"_process":7,"buffer":3}],16:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var contentSelector = function(MessageService,UserContentType){
    return {
        templateUrl:"../../js/admin/angular/templates/content_selector.html",
        restrict:"EA",
        scope:{},
        transclude:true,
        controller:function($scope,$timeout){
            $scope.infoContentSelector = MessageService.get('contentselector_info').message;
            var contenttypes = UserContentType.$search().$then(function(data){
                $scope.usercontenttypes = data;
            });

            $scope.updateContent = function($event,usercontent){

                var checkbox = $event.target;
                var action = (checkbox.checked ? true: false);

                usercontent.active = action;
                usercontent.$save().$then(function(data){
                    var meta = data.$metadata.meta;
                    MessageService.setAlertMessage($scope,meta);
                });

            }

        }
    }
}

module.exports = contentSelector;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/contentselector.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],17:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var hallo = function(){
    return {
        require: 'ngModel',
        link: function ($scope, $element, $attrs, ngModelCtrl) {
            console.log($element);
            $(this).hallo({
                plugins: {
                    'halloformat': {},
                    'halloblock': {},
                    'hallojustify': {},
                    'hallolists': {},
                    'halloreundo': {}
                }
            });

            ngModelCtrl.$render = function () {
                var contents = ngModelCtrl.$viewValue;
                $(this).hallo('setContents', contents);
            }


        }
    }
}
module.exports = hallo
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/hallodirective.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],18:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var profileMenu = function(){
    return {
        restrict:"EA",
        templateUrl:"../../js/admin/angular/templates/profile_menu.html"
    }
}
module.exports = profileMenu;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/profilemenu.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],19:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var educationDirective = function(MessageService,Education,$timeout,Helper){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/education.html",
        restrict:"EA",
        scope:{},
        controller:function($scope,$rootScope) {
            $scope.closeForm = function(){
                Helper.enableForm($scope,false);
            }
            Helper.enableForm($scope,false);
            $rootScope.$on('resumeChange',function(event,args){
                if(typeof args.resume !== "undefined") {
                    var resumeId = args.resume.id;
                    var educations = Education.$search({resume_id: resumeId}).$then(function (data) {
                        $scope.educations = data;
                        if ($scope.educations.length == 0) {
                            MessageService.setNoItemsInfoMessage($scope, " estudios",
                                ". Pulsa el botón Nueva para crear una");
                        }
                    });

                    $scope.newEducation = function () {
                        Helper.enableForm($scope, true);
                        var education = Education.$build({resume_id: resumeId, initdate: '', enddate: ''});
                        $scope.education = education;
                        $scope.monthoptions = Helper.months();
                        $scope.education.initmonth = Helper.months()[0];
                        $scope.education.endmonth = Helper.months()[0];

                        $scope.updateEducation = function () {
                            var isCurrent = $scope.education.currentplace;
                            $scope.education.current = 0;
                            if (isCurrent) {
                                $scope.education.current = 1;
                            }
                            $scope.education.initdate = $scope.education.initmonth + "-" + $scope.education.inityear;
                            $scope.education.enddate = $scope.education.endmonth + "-" + $scope.education.endyear;

                            education.$save().$then(function (data) {
                                $scope.educations.$refresh();
                                $scope.educationForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }

                    };

                    $scope.editEducation = function (education) {
                        Helper.enableForm($scope, true);
                        $scope.monthoptions = Helper.months();
                        var imonthIndex = Helper.months().indexOf(education.imonth);
                        var emonthIndex = Helper.months().indexOf(education.emonth);
                        $scope.education = education;
                        $scope.education.initmonth = $scope.monthoptions[imonthIndex];
                        $scope.education.endmonth = $scope.monthoptions[emonthIndex];
                        $scope.education.inityear = education.iyear;
                        $scope.education.endyear = education.eyear;

                        $scope.updateEducation = function () {
                            var isCurrent = $scope.education.currentplace;
                            $scope.education.current = 0;
                            if (isCurrent) {
                                $scope.education.current = 1;
                            }
                            $scope.education.initdate = $scope.education.initmonth + "-" + $scope.education.inityear;
                            $scope.education.enddate = $scope.education.endmonth + "-" + $scope.education.endyear;

                            education.$save().$then(function (data) {
                                $scope.educations.$refresh();
                                $scope.educationForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //delete
                    $scope.removeEducation = function (education) {
                        $scope.education = education;
                        var confirmation = MessageService.setConfirmDeleteMessage(" estudio", " ");
                        if (confirmation) {
                            education.$destroy().$then(function (data) {
                                var meta = data.$response.data;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //change status
                    $scope.changeStatus = function ($event, education) {
                        var checkbox = $event.target;
                        var action = (checkbox.checked ? true : false);

                        education.status = action;
                        education.$save().$then(function (data) {
                            $scope.educations.$refresh();
                            var meta = data.$metadata.meta;
                            MessageService.setAlertMessage($scope, meta);
                        });
                    };

                }
            });




        }
    }

}
module.exports = educationDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/education.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],20:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var experienceDirective = function(MessageService,Experience,$timeout,Helper){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/experience.html",
        restrict:"EA",
        scope:{},
        controller:function($scope,$rootScope){
            $scope.closeForm = function(){
                Helper.enableForm($scope,false);
            }
            Helper.enableForm($scope,false);
            $rootScope.$on('resumeChange',function(event,args){
                if(typeof args.resume !== "undefined") {
                    var resumeId = args.resume.id;
                    var experiences = Experience.$search({resume_id: resumeId}).$then(function (data) {
                        $scope.experiences = data;
                        if ($scope.experiences.length == 0) {
                            MessageService.setNoItemsInfoMessage($scope, " experiencias",
                                ". Pulsa el botón Nueva para crear una");
                        }

                    });
                    //new
                    $scope.newExperience = function () {
                        Helper.enableForm($scope, true);
                        var experience = Experience.$build({resume_id: resumeId, initdate: '', enddate: ''});
                        $scope.experience = experience;
                        $scope.monthoptions = Helper.months();
                        $scope.experience.initmonth = Helper.months()[0];
                        $scope.experience.endmonth = Helper.months()[0];

                        $scope.updateExperience = function () {
                            var isCurrent = $scope.experience.currentplace;
                            $scope.experience.current = 0;
                            if (isCurrent) {
                                $scope.experience.current = 1;
                            }
                            $scope.experience.initdate = $scope.experience.initmonth + "-" + $scope.experience.inityear;
                            $scope.experience.enddate = $scope.experience.endmonth + "-" + $scope.experience.endyear;

                            experience.$save().$then(function (data) {
                                $scope.experiences.$refresh();
                                $scope.experienceForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }

                    };
                    //edit
                    $scope.editExperience = function (experience) {
                        Helper.enableForm($scope, true);
                        $scope.monthoptions = Helper.months();
                        var imonthIndex = Helper.months().indexOf(experience.imonth);
                        var emonthIndex = Helper.months().indexOf(experience.emonth);
                        $scope.experience = experience;
                        $scope.experience.initmonth = $scope.monthoptions[imonthIndex];
                        $scope.experience.endmonth = $scope.monthoptions[emonthIndex];
                        $scope.experience.inityear = experience.iyear;
                        $scope.experience.endyear = experience.eyear;


                        $scope.updateExperience = function () {
                            var isCurrent = $scope.experience.currentplace;
                            $scope.experience.current = 0;
                            if (isCurrent) {
                                $scope.experience.current = 1;
                            }
                            $scope.experience.initdate = $scope.experience.initmonth + "-" + $scope.experience.inityear;
                            $scope.experience.enddate = $scope.experience.endmonth + "-" + $scope.experience.endyear;

                            experience.$save().$then(function (data) {
                                $scope.experiences.$refresh();
                                $scope.experienceForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //delete
                    $scope.removeExperience = function (experience) {
                        $scope.experience = experience;
                        var confirmation = MessageService.setConfirmDeleteMessage(" experiencia", " ");
                        if (confirmation) {
                            experience.$destroy().$then(function (data) {
                                var meta = data.$response.data;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //change status
                    $scope.changeStatus = function ($event, experience) {
                        var checkbox = $event.target;
                        var action = (checkbox.checked ? true : false);

                        experience.status = action;
                        experience.$save().$then(function (data) {
                            $scope.experiences.$refresh();
                            var meta = data.$metadata.meta;
                            MessageService.setAlertMessage($scope, meta);
                        });
                    };

                }
            });

        },
        link:function(scope,element){
            //$(element).effect("highlight", {}, 3000);
        }
    }

}
module.exports = experienceDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/experience.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],21:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var interestDirective = function(MessageService,Interest,$timeout,Helper){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/interests.html",
        restrict:"EA",
        scope:{},
        controller:function($scope,$rootScope) {
            $scope.closeForm = function(){
                Helper.enableForm($scope,false);
            }
            Helper.enableForm($scope,false);
            $rootScope.$on('resumeChange',function(event,args){
                if(typeof args.resume !== "undefined") {
                    var resumeId = args.resume.id;
                    var interests = Interest.$search({resume_id: resumeId}).$then(function (data) {
                        $scope.interests = data;
                        if ($scope.interests.length == 0) {
                            MessageService.setNoItemsInfoMessage($scope, " intereses profesionales",
                                ". Pulsa el botón Nuevo para crear uno");
                        }
                    });

                    $scope.newInterest = function () {
                        Helper.enableForm($scope, true);
                        var interest = Interest.$build({resume_id: resumeId});
                        $scope.interest = interest;

                        $scope.updateInterest = function () {
                            interest.$save().$then(function (data) {
                                $scope.interests.$refresh();
                                $scope.interestForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }

                    };

                    $scope.editInterest = function (interest) {
                        Helper.enableForm($scope, true);
                        $scope.interest = interest;

                        $scope.updateInterest = function () {

                            interest.$save().$then(function (data) {
                                $scope.interests.$refresh();
                                $scope.interestForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //delete
                    $scope.removeInterest = function (interest) {
                        $scope.interest = interest;
                        var confirmation = MessageService.setConfirmDeleteMessage(" idioma", " ");
                        if (confirmation) {
                            interest.$destroy().$then(function (data) {
                                var meta = data.$response.data;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //change status
                    $scope.changeStatus = function ($event, interest) {
                        var checkbox = $event.target;
                        var action = (checkbox.checked ? true : false);

                        interest.status = action;
                        interest.$save().$then(function (data) {
                            $scope.interests.$refresh();
                            var meta = data.$metadata.meta;
                            MessageService.setAlertMessage($scope, meta);
                        });
                    };

                }
            });




        }
    }

}
module.exports = interestDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/interest.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],22:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var languageDirective = function(MessageService,Language,$timeout,Helper){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/languages.html",
        restrict:"EA",
        scope:{},
        controller:function($scope,$rootScope) {
            $scope.closeForm = function(){
                Helper.enableForm($scope,false);
            }
            Helper.enableForm($scope,false);
            $rootScope.$on('resumeChange',function(event,args){
                if(typeof args.resume !== "undefined") {
                    var resumeId = args.resume.id;
                    var languages = Language.$search({resume_id: resumeId}).$then(function (data) {
                        $scope.languages = data;
                        if ($scope.languages.length == 0) {
                            MessageService.setNoItemsInfoMessage($scope, " idiomas",
                                ". Pulsa el botón Nuevo para crear uno");
                        }
                    });

                    $scope.newLanguage = function () {
                        Helper.enableForm($scope, true);
                        var language = Language.$build({resume_id: resumeId});
                        $scope.language = language;

                        $scope.updateLanguage = function () {
                            language.$save().$then(function (data) {
                                $scope.languages.$refresh();
                                $scope.languageForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }

                    };

                    $scope.editLanguage = function (language) {
                        Helper.enableForm($scope, true);
                        $scope.language = language;

                        $scope.updateLanguage = function () {

                            language.$save().$then(function (data) {
                                $scope.languages.$refresh();
                                $scope.languageForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //delete
                    $scope.removeLanguage = function (language) {
                        $scope.language = language;
                        var confirmation = MessageService.setConfirmDeleteMessage(" idioma", " ");
                        if (confirmation) {
                            language.$destroy().$then(function (data) {
                                var meta = data.$response.data;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //change status
                    $scope.changeStatus = function ($event, language) {
                        var checkbox = $event.target;
                        var action = (checkbox.checked ? true : false);

                        language.status = action;
                        language.$save().$then(function (data) {
                            $scope.languages.$refresh();
                            var meta = data.$metadata.meta;
                            MessageService.setAlertMessage($scope, meta);
                        });
                    };

                }
            });




        }
    }

}
module.exports = languageDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/language.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],23:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var resumeDirective = function(MessageService,Resume,$timeout,ResumeHelper){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/resume.html",
        restrict:"EA",
        scope:{

        },
        controller:function($scope,$rootScope){
            $rootScope.$on('noResumeFound',function(){
                MessageService.setNoItemsInfoMessage($scope, " résumés",
                    ". Pulsa el botón Nuevo para crear");
            })
            $rootScope.$on('resumeChange',function(event,args){

                if(typeof args.resume !== "undefined")
                {
                    //biographies dropdown list
                    //ResumeHelper.bioDropDownList('/bio_drop_list',$scope);
                    //console.log(args);
                    var resumes = Resume.$search().$then(function (data) {
                        $scope.resumes = data;

                        if ($scope.resumes.length == 0) {
                            MessageService.setNoItemsInfoMessage($scope, " résumés",
                                ". Pulsa el botón Nuevo para crear uno");
                        }
                    });


                    var resume = Resume.$find(args.resume.id);
                    $scope.resume = resume;
                    $scope.updateResume = function () {
                        $scope.resume.$save().$then(function (data) {
                            var meta = data.$metadata.meta;
                            MessageService.setAlertMessage($scope, meta);
                            $scope.showResumeForm = false;
                        });
                    }
                }
            });

            $scope.newResume = function(){
                $scope.showedResumeForm = true;
                $rootScope.$emit("newResume");
            };

            $scope.deleteResume = function(resume){
                var confirmation = MessageService.setConfirmDeleteMessage(" résumé",". Todos las secciones del résumé serán eliminadas también...");
                if(confirmation) {
                    resume.$destroy().$then(function (data) {

                        var meta = data.$response.data;
                        MessageService.setAlertMessage($scope, meta);
                        $timeout(function () {
                            location.href = "/admin/resume"
                        }, 2000);

                    });
                }
            }

            $scope.publication = function(resume, toBePublished){
                if(toBePublished) {
                    resume.active = 1;
                    //publish resume
                    ResumeHelper.publishResume($scope,$rootScope,"/publish_resume/"+resume.id)
                }  else{
                    resume.active = 0;
                    resume.$save().$then(function(data){
                        var meta = data.$metadata.meta;
                        MessageService.setAlertMessage($scope,meta);
                    });
                }

            }

            $scope.setDefault = function(resume, isDefault){
                if(isDefault) {
                    resume.default = 1;
                    //publish resume
                    ResumeHelper.publishResume($scope,$rootScope,"/default_resume/"+resume.id)
                }  else{
                    resume.default = 0;
                    resume.$save().$then(function(data){
                        var meta = data.$metadata.meta;
                        MessageService.setAlertMessage($scope,meta);
                    });
                }

            }

            $scope.cloneResume = function(resume){
                ResumeHelper.cloneResume($scope,$rootScope,"/clone_resume/"+resume.id);
            }

            $scope.showResumeEditForm = function(resume){
                $scope.showedEditResumeForm = true;
                $rootScope.$emit("editResume",resume);
            }



            $scope.closeAfterUpdate = function(){
                $scope.showedEditResumeForm = false;
            }

            $scope.closeAfterCreate = function(){
                $scope.showedResumeForm = false;
            }

            /*$scope.$watch('$viewContentLoaded', function()
            {
                console.log("loading");
            });*/

        }
    }
}

module.exports = resumeDirective;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/resumedirective.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],24:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var resumeEditDirective = function(MessageService,Resume,ResumeHelper,$timeout){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/resumeeditform.html",
        restrict:"EA",
        scope:{

            close:"&close"
        },
        controller:function($scope,$rootScope){

            $rootScope.$on("editResume",function(event,resume){
                console.log(resume  );
                //biographies dropdown list
                ResumeHelper.bioDropDownList('/bio_drop_list',$scope);
                $scope.resume = resume;
                var bioId = resume.biographyId;
                $scope.resume.biography_id = bioId.toString();
                //console.log($scope);
                $scope.closeForm = function(){
                    $scope.close();
                }
                //$scope.resume.biographyId = 1;//$scope.bios[$scope.resume.biography_id];
                $scope.saveResume = function(){

                    $scope.resume.$save().$then(function(data){
                        var meta = data.$metadata.meta;
                        MessageService.setAlertMessage($scope,meta);
                        $rootScope.$emit("updateResumeList");
                        $rootScope.$emit("resumeChange",data.$response.data);
                        $timeout(function(){
                            $scope.close(data);
                        },4000);

                        //$scope.$parent.showedEditResumeForm = false;
                    });
                }
            });


        }
    }
}

module.exports = resumeEditDirective;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/resumeeditform.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],25:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var resumeCreationDirective = function(MessageService,Resume,ResumeHelper,$timeout){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/resumeform.html",
        restrict:"EA",
        scope:{
            close:"&close"
        },
        controller:function($scope,$rootScope){
            $scope.closeForm = function(){
                $scope.close();
            }

            $rootScope.$on("newResume",function(){
                //biographies dropdown list
                ResumeHelper.bioDropDownList('/bio_drop_list',$scope);
                var resume = Resume.$build();
                $scope.resume = resume;


                $scope.createResume = function(){
                    //console.log(resume);
                    resume.$save().$then(function(data){
                        var meta = data.$metadata.meta;
                        MessageService.setAlertMessage($scope,meta);
                        $rootScope.$emit("updateResumeList");
                        $rootScope.$emit("resumeChange",data.$response.data);
                        $timeout(function(){
                            $scope.close(data);
                            //$scope.$destroy();
                        },4000);
                    });

                }

            });


        }
    }
}

module.exports = resumeCreationDirective;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/resumeform.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],26:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var resumeList = function(MessageService,Resume,$timeout,Helper){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/resumelist.html",
        restrict:"EA",
        scope:{},
        controller:function($scope,$rootScope) {
            $scope.closeForm = function(){
                Helper.enableForm($scope,false);
            }
            Helper.enableForm($scope,false);

                var resumes = Resume.$search().$then(function (data) {
                        $scope.resumes = data;
                        if ($scope.resumes.length == 0) {
                            MessageService.setNoItemsInfoMessage($scope, " résumés",
                                ". Pulsa el botón Nuevo para crear uno");
                        }
                    });

                    $scope.newResume = function () {



                    };

                    $scope.editResume = function (education) {

                    };

                    //delete
                    $scope.removeResume = function (education) {

                    };

                    //change status
                    $scope.setDefault = function ($event, resume) {
                        var checkbox = $event.target;
                        var action = (checkbox.checked ? true : false);

                        resume.default = action;
                        resume.$save().$then(function (data) {
                            $scope.resumes.$refresh();
                            var meta = data.$metadata.meta;
                            MessageService.setAlertMessage($scope, meta);
                        });
                    };

                    $scope.showDetail = function(resume){

                        var data = {
                            resume:{
                                id:resume.id
                            }
                        };
                        $rootScope.$emit("resumeChange",data);
                    }

        }
    }

}
module.exports = resumeList;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/resumelist.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],27:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var contentSelector = function(MessageService){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/resume_selector.html",
        restrict:"EA",
        scope:{},
        transclude:true,
        controller:function($scope,$timeout){
            $scope.infoResumeSelector = MessageService.get('resumeselector_info').message;
            //TODO get sections according to user resume

            var sections = [
                {alias:"Experiencia",link:"experience"},
                {alias:"Estudios",link:"study"},
                {alias:"Habilidades / Conocimientos",link:"skills"},
                {alias:"Idiomas",link:"languages"},
                {alias:"Intereses Profesionales",link:"personal"}
            ];
            $scope.sections = sections;


        }
    }
}

module.exports = contentSelector;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/resumeselector.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],28:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var sectionsDirective = function(Resume){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/sections.html",
        restrict:"EA",
        scope:{},
        controller:function($scope,$rootScope){
            $rootScope.$on('resumeChange',function(event,args) {
                if (typeof args.resume !== "undefined"){
                    var resume = Resume.$find(args.resume.id);
                    $scope.resume = resume.$resolve();
                 }
            });
        },
        link:function(scope,element){
            //$(element).effect("highlight", {}, 3000);
        }
    }

}
module.exports = sectionsDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/sections.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],29:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var skillDirective = function(MessageService,Skill,$timeout,Helper){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/skills.html",
        restrict:"EA",
        scope:{},
        controller:function($scope,$rootScope) {
            $scope.closeForm = function(){
                Helper.enableForm($scope,false);
            }
            Helper.enableForm($scope,false);
            $rootScope.$on('resumeChange',function(event,args){
                if(typeof args.resume !== "undefined") {
                    var resumeId = args.resume.id;
                    var skills = Skill.$search({resume_id: resumeId}).$then(function (data) {
                        $scope.skills = data;
                        if ($scope.skills.length == 0) {
                            MessageService.setNoItemsInfoMessage($scope, " habilidades",
                                ". Pulsa el botón Nueva para crear una");
                        }
                    });

                    $scope.newSkill = function () {
                        Helper.enableForm($scope, true);
                        var skill = Skill.$build({resume_id: resumeId});
                        $scope.skill = skill;

                        $scope.updateSkill = function () {
                            skill.$save().$then(function (data) {
                                $scope.skills.$refresh();
                                $scope.skillForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }

                    };

                    $scope.editSkill = function (skill) {
                        Helper.enableForm($scope, true);
                        $scope.skill = skill;

                        $scope.updateSkill = function () {

                            skill.$save().$then(function (data) {
                                $scope.skills.$refresh();
                                $scope.skillForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //delete
                    $scope.removeSkill = function (skill) {
                        $scope.skill = skill;
                        var confirmation = MessageService.setConfirmDeleteMessage(" habilidad", " ");
                        if (confirmation) {
                            skill.$destroy().$then(function (data) {
                                var meta = data.$response.data;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //change status
                    $scope.changeStatus = function ($event, skill) {
                        var checkbox = $event.target;
                        var action = (checkbox.checked ? true : false);

                        skill.status = action;
                        skill.$save().$then(function (data) {
                            $scope.skills.$refresh();
                            var meta = data.$metadata.meta;
                            MessageService.setAlertMessage($scope, meta);
                        });
                    };

                }
            });




        }
    }

}
module.exports = skillDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/skill.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],30:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleableBasic = function(SaleableService){
    return {
        restrict:"EA",
        templateUrl:"../../js/admin/angular/templates/saleable_basic.html",
        replace:true,
        controller:"saleableBasicCtrl",
        scope:{}

    }
}
module.exports = saleableBasic;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/saleablebasic.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],31:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleableDetails = function($templateCache,$compile,$rootScope){
    return {
        transclude: 'element'    ,
        restrict:"EA",
        templateUrl:"../../js/admin/angular/templates/saleable_details.html",
        replace:true,

        controller:"SaleableDetailCtrl",
        link:function(scope,$element,$attrs,$ctrl,transclude){
            $rootScope.$on("newBasicDetail",function(event) {
                $('#tabsf a[href="#pilltab1"]').tab('show');
            })

        }
    }
}
module.exports = saleableDetails;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/saleabledetails.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],32:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleableBasic = function(){
    return {
        restrict:"EA",
        templateUrl:"../../js/admin/angular/templates/saleable_details_list.html",
        replace:true,
        scope:{saleable:"="},
        controller:"saleableAllDetailsCtrl"

    }
}
module.exports = saleableBasic;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/saleabledetailslist.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],33:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleablePrices = function(){
    return {
        restrict:"EA",
        templateUrl:"../../js/admin/angular/templates/saleable_prices_list.html",
        replace:true,
        scope:{saleable:"="},
        controller:"saleablePriceCtrl"

    }
}
module.exports = saleablePrices
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/saleablepriceslist.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],34:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){

var homeController = function($scope,UserService,UserContentType){
    //console.log($scope);
    $scope.showAlert = true;
    $scope.noProfileMsge = 'Este es tu primera sesión en este panel de control. '+
    'Por favor, a continuación completa tus datos personales.'+
        'Si no deseas actualizar tus datos, puedes hacerlo en otro momento desde [Perfil] y'+
    'continuar con las otras opciones de este panel de control.';



}

module.exports = homeController;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/homecontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],35:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var resumeController = function($scope,$rootScope,ResumeHelper,MessageService){
    ResumeHelper.dropDownList('/resume_drop_list',$scope);
    ResumeHelper.getResume($scope,$rootScope,'/publishedresume');



    $rootScope.$on("updateResumeList",function(){
        ResumeHelper.dropDownList('/resume_drop_list',$scope);
    });

    $scope.getResume = function(id){
        var data = {
          resume:{
              id:id
          }
        };
        //console.log(data);
        $rootScope.$emit("resumeChange",data);
    }

}

module.exports = resumeController;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/resumecontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],36:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleableAllDetails = function($scope,$rootScope,SaleableDetailsService,MessageService,FileProcessor){

    $scope.onFileSelect = function($files) {
        $scope.files = $files;

    };
    $scope.hasIcon = false;
    var saleable_id = $scope.saleable.id;
    var details = SaleableDetailsService.$search({saleable_id:saleable_id}).$then(function(data){
        var items_number = data.length;

        if(items_number==0){
            //var linkToNew = ". Crea ya uno nuevo!";
            MessageService.setNoItemsInfoMessage($scope,"detalles"," .Crea uno nuevo!");
        }
    }).$resolve();
    $scope.saleable.details = details;

    var detail = SaleableDetailsService.$build();
    detail.saleable_id = saleable_id;
    detail.type = 0;
    $scope.detail = detail;


    $scope.updateDetail = function(){
        detail.$save().$then(function(data){
            var meta = data.$metadata.meta;
            MessageService.setAlertMessage($scope,meta);
            details.$refresh();
        });
    }

    $scope.editDetail=function(detail){
        $scope.files = [];
        //download detail icon to load
        FileProcessor.download($scope,'/saleabledetail/'+detail.id+'/icon');
        //$scope.descriptiveIcon = "";
        $scope.showDetailForm = true;
        $scope.detail = detail;
        $scope.updateDetail = function(){
            detail.$save().$then(function(data){
                var meta = data.$metadata.meta;
                MessageService.setAlertMessage($scope,meta);
                //upload file
                if($scope.files.length > 0){
                    FileProcessor.upload($scope,'/uploadSaleableDetailIcon',data.id);
                    $scope.files = [];
                }

            });
        }
    }

    $scope.newDetail = function(){
        $scope.hasIcon = false;
        $scope.showDetailForm = true;
        $scope.files = [];
        console.log($scope.files.length);
        //$scope.saleableDetailForm.$setPristine();
        var detail = SaleableDetailsService.$build();
        detail.saleable_id = saleable_id;
        detail.type = 0;
        $scope.detail = detail;

        $scope.updateDetail = function(){
            detail.$save().$then(function(data){
                var meta = data.$metadata.meta;
                MessageService.setAlertMessage($scope,meta);
                details.$refresh();
                if($scope.files.length > 0){
                    FileProcessor.upload($scope,'/uploadSaleableDetailIcon',data.id);
                    $scope.files = [];
                }


            });
        }
    }

    $scope.removeDetail = function(detail){
        var confirmation = MessageService.setConfirmDeleteMessage("detalle"," ");
        if(confirmation){
            detail.$destroy().$then(function(data){
                var meta = data.$response.data;
                MessageService.setAlertMessage($scope,meta);
                //$scope.saleableDetailForm.$setPristine();

                var detail = SaleableDetailsService.$build();
                detail.saleable_id = saleable_id;
                detail.type = 0;
                $scope.detail = detail;
                $scope.updateDetail = function(){
                    detail.$save().$then(function(data){
                        var meta = data.$metadata.meta;
                        MessageService.setAlertMessage($scope,meta);
                        details.$refresh();
                        //$rootScope.$emit('saleableUpdated');
                    });
                }

            });
        }
    }






}

module.exports = saleableAllDetails;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/saleablealldetailscontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],37:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleableController = function($scope,$rootScope,$timeout,
                                  SaleableService,MessageService){
    $scope.master = {};

    var saleables = SaleableService.$search().$then(function(data){
        //console.log(data.length);
        var items_number = data.length;
        if(items_number==0){
            var linkToNew = ". Crea ya uno nuevo!";
            MessageService.setNoItemsInfoMessage($scope,"servicios o productos",linkToNew);

        }/*else{
            $scope.saleables = data;

        }*/
    });

    $scope.saleables = saleables;

    $scope.removeSaleable = function(saleable){
        var confirmation = MessageService.setConfirmDeleteMessage(" servicio o producto"," Se destruirán también todos sus detalles.");
        if(confirmation){
            saleable.$destroy().$then(function(data){
                var meta = data.$response.data;
                MessageService.setAlertMessage($scope,meta);
            });
        }
    }

    //Details
    //new: create a new details "wizard" instance
    $scope.newDetails = function(){
        $scope.showDetails = true;
        $rootScope.$broadcast('newDetails');
    }
    //edit: wizard, edit fashion
    $scope.editDetails = function(saleable){
        $scope.showDetails = true;
        $rootScope.$broadcast('editDetails',saleable);
    }

    //close wizard
    $scope.closeWizard = function(){
        $scope.showDetails = false;
        location.href = '/admin/services';
    }


}
module.exports = saleableController;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/saleablecontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],38:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleableDetailCtrl = function($scope,$rootScope,SaleableService,MessageService,$element,$compile){

    $rootScope.$on('newDetails',function(){

        $scope.saleable = {};
        $rootScope.$broadcast('newBasicDetail');
    });

    $rootScope.$on('saleableCreated',function(event,data){
        $scope.saleables.$refresh();
        $scope.saleable = data;
    });
    $rootScope.$on('editDetails',function(event,saleable){
        $scope.saleable = saleable;
        $scope.saleables.$refresh();
        $rootScope.$broadcast('editBasicDetail',saleable);
    })


}

module.exports = saleableDetailCtrl;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/saleabledetailcontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],39:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleablePrices = function($scope,$rootScope,SaleablePriceService,MessageService){

    /*var reset = function(){
        $scope.saleablePriceForm.$setPristine();
        $scope.price = angular.copy({});
    }*/

    var saleable_id = $scope.saleable.id;
    var prices = SaleablePriceService.$search({saleable_id:saleable_id}).$then(function(data){
        var items_number = data.length;
        if(items_number==0){
            //var linkToNew = ". Crea ya uno nuevo!";
            MessageService.setNoItemsInfoMessage($scope,"precios"," .Crea uno nuevo!");
        }
    }).$resolve();

    $scope.saleable.prices = prices;

    var price = SaleablePriceService.$build();
    price.saleable_id = saleable_id;
    $scope.price = price;

    $scope.updatePrice = function(){
        price.$save().$then(function(data){
            var meta = data.$metadata.meta;
            MessageService.setAlertMessage($scope,meta);
            prices.$refresh();
        });
    }

    $scope.editPrice=function(price){
        $scope.showPriceForm = true;
        $scope.price = price;
        $scope.updatePrice = function(){
            price.$save().$then(function(data){
                var meta = data.$metadata.meta;
                MessageService.setAlertMessage($scope,meta);
            });
        }
    }

    $scope.newPrice = function(){
        $scope.showPriceForm = true;
        //$scope.saleablePriceForm.$setPristine();
        var price = SaleablePriceService.$build();
        price.saleable_id = saleable_id;
        $scope.price = price;

        $scope.updatePrice = function(){
            price.$save().$then(function(data){
                var meta = data.$metadata.meta;
                MessageService.setAlertMessage($scope,meta);
                prices.$refresh();
                $scope.showPriceForm = false;
            });
        }
    }

    $scope.removePrice = function(price){
        var confirmation = MessageService.setConfirmDeleteMessage(" precio"," ");
        if(confirmation){
            price.$destroy().$then(function(data){
                var meta = data.$response.data;

                MessageService.setAlertMessage($scope,meta);
                //s$scope.saleablePriceForm.$setPristine();

                var price = SaleablePriceService.$build();
                price.saleable_id = saleable_id;
                $scope.price = price;
                $scope.updatePrice = function(){
                    price.$save().$then(function(data){
                        var meta = data.$metadata.meta;
                        MessageService.setAlertMessage($scope,meta);
                        prices.$refresh();
                        $scope.showPriceForm = false;
                    });
                }

            });
        }
    }






}

module.exports = saleablePrices;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/saleablepricescontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],40:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){

var bioService = function(restmod){
    return restmod.model('/bio').mix('DefaultPacker',{
     $config:{jsonMeta: '.'}

     });
}
module.exports = bioService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/biographyservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],41:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var categoryService = function(restmod){
    return restmod.model('/cat').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = categoryService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/category.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],42:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var educationService = function(restmod){
    return restmod.model('/education').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = educationService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/education.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],43:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var experienceService = function(restmod){
    return restmod.model('/experience').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = experienceService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/experience.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],44:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var fileProcessor = function($upload,$http,MessageService){
    return {
        upload:function(scope,path,data){

                var files = scope.files[0];
                console.log(files);
                var numberOfFiles = scope.files.length;
                if(numberOfFiles > 1 && numberOfFiles < 8) {
                    files = scope.files;
                }else if(numberOfFiles > 7){
                    console.log("no cargue asiiiii");
                }
                //for (var i = 0; i < scope.files.length; i++) {
                //var file = scope.files[i];
                //var file = scope.files;
                scope.upload = $upload.upload({
                    url: path, //upload.php script, node.js route, or servlet url
                    method: 'POST', //or 'PUT',
                    file: files,
                    data: data
                }).progress(function(evt) {
                    scope.getPercentage = function () {
                        return parseInt(100.0 * evt.loaded / evt.total);
                    }
                }).success(function(data) {
                    scope.hasIcon = true;
                    scope.descriptiveIcon = data.img;
                    scope.getPercentage=function () {
                        return 0;
                    };
                }).error(function(data){
                    MessageService.setServerValidationMessage(scope);
                    scope.errors = data;
                });


        },
        download:function(scope,path){
                $http.get(path).success(function(data){
                    scope.descriptiveIcon = data.img;
                })
                .error(function(data){
                    console.log(data);
                });

        }


    }
}
module.exports = fileProcessor;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/fileprocessor.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],45:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var numberFormat = function(){
    return function(_value) {
        var numberFormatted = parseFloat(_value);
        return numberFormatted;
    }
}
module.exports = numberFormat;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/formatfilterservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],46:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var helperService = function(){
    return {
        months:function(){
            var months = ["enero","febrero","marzo","abril",
                "mayo","junio","julio","agosto",
                "septiembre","octubre","noviembre","diciembre"];
            return months;
        },
        enableForm:function(scope,status){
            if(status){
                scope.gridShown = false;
                scope.formShown = true;
            }else{
                scope.gridShown = true;
                scope.formShown = false;
            }
        },
        getCheckButtonStatus:function(event){
            var checkbox = event.target;
            var action = (checkbox.checked ? true: false);
            return action;
        }
    }
}
module.exports = helperService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/helpers.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],47:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var interestService = function(restmod){
    return restmod.model('/interest').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = interestService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/interest.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],48:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var languageService = function(restmod){
    return restmod.model('/language').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = languageService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/language.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],49:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var messageService = function(Messages,$timeout){
    return {
        get:function (name) {
            return Messages.filter(function( obj ) {
            // coerce both obj.id and id to numbers
            // for val & type comparison
                //return +obj.name === +name;
                return obj.name === name;
            })[ 0 ];
        },
        setAlertMessage:function(scope,data){
            scope.ShowResultAlert = true;
            scope.result = data;
            $timeout(function(){
                scope.ShowResultAlert = false;
            },4000);
        },
        setServerValidationMessage:function(scope){
            scope.ShowServerErrors = true;
            scope.result = "Los datos no se pudieron guardar"+
                           " debido a los siguientes errores. Por favor corrígelos.";
            $timeout(function(){
                scope.ShowServerErrors = false;
            },5000);
        },
        setNoItemsInfoMessage:function(scope,datatype,additional){
            scope.showNoItemsAlert = true;
            scope.result = "No se han encontrado "+datatype+additional;
            $timeout(function(){
                scope.showNoItemsAlert = false;
            },8000);
        },
        setConfirmDeleteMessage:function(item, additional){
            return confirm("Realmente deseas eliminar este/a"+item+"?. "+additional+"");
        }

    }
};
module.exports = messageService;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/messageservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],50:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var newPassword = function($http){
    //$http.post();
    return {
        updatePassword:function(userId,data){
            return $http.post('/admin/newpassword/'+userId, data);
        }
    }

};

module.exports = newPassword;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/newpasswordservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],51:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){

var profileService = function(restmod){
    return restmod.model('/profile').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = profileService;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/profileservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],52:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var resumeHelper = function($http,MessageService){

    return {
        dropDownList:function(path,scope){
            $http.get(path).success(function(data){
                scope.resumes = data.resumes;
                scope.resume = scope.resumes[5];
            }).error();
        },
        bioDropDownList:function(path,scope){
            $http.get(path).success(function(data){
                scope.bios = data.bios;
            }).error();
        },
        getResume:function(scope,rootScope,path){
            $http.get(path).then(function(data){
                var resume = data.data.resume;

                if(resume === null) {
                    rootScope.$emit("noResumeFound");
                }else{
                    rootScope.$emit("resumeChange", data.data);
                }
            });

        },
        publishResume:function(scope,rootScope,path){
            $http.post(path).success(function(data){
                var meta = data.meta;
                MessageService.setAlertMessage(scope,meta);
            }).error();

        },
        cloneResume:function(scope,rootScope,path){
            $http.post(path).success(function(data){
                rootScope.$emit("resumeChange",data);
                rootScope.$emit("updateResumeList",data);
                var meta = data.meta;
                MessageService.setAlertMessage(scope,meta);

            }).error();
        }
        /*unpublishResume:function(scope,rootScope,path){
            $http.post(path).success(function(data){
                console.log("unpu");
            }).error();
        }*/
    }
}

module.exports = resumeHelper;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/resumehelper.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],53:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var resumeService = function(restmod){
    return restmod.model('/resume').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = resumeService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/resumeservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],54:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var seleableDetails = function(restmod){
    return restmod.model('/saleabledetail').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = seleableDetails;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/saleabledetails.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],55:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleableHelper = function($http,MessageService){

    return {
        categoryList:function(path,scope){
            $http.get(path).success(function(data){
                scope.catoptions = data.categories;
            }).error();
        },
        salCategoryList:function(path,scope){
            $http.get(path).success(function(data){
                var cats = data.categories;
                scope.saleable.categories = cats;
            }).error();
        }
    }
}

module.exports = saleableHelper;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/saleablehelper.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],56:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var seleablePrice = function(restmod){
    return restmod.model('/saleableprice').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    }).mix({
        ammount: {decode:'NumberFormat'},
        discount:{decode:'NumberFormat'}
    });
}
module.exports = seleablePrice;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/saleableprice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],57:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var seleableService = function(restmod){
    return restmod.model('/saleable').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = seleableService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/saleableservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],58:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var skillService = function(restmod){
    return restmod.model('/skill').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = skillService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/skill.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],59:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var thePacker =  function() {

    function MyPacker(_model) {
        //this.meta = _model.$getProperty('jsonMeta', 'meta');
        console.log(_model);
        // you can set some model specific behaviour here, like the property being extracted.
    }

    MyPacker.prototype = {
        unPack: function(_rawData, _record) {
            console.log(_rawData);
            _record.$metadata = _rawData; // store metadata associated with request
            return _rawData.myProp; // extract property from request data.
        },
        unPackMany: function(_rawData, _collection) {

            _collection.$metadata = _rawData; // store metadata associated with request
            return _collection.myProp; // extract property from request data.
        }
    };

    return MyPacker;
};
module.exports = thePacker;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/thepacker.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],60:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var userContentType = function(restmod){
    return restmod.model('/usercontenttype').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}

module.exports = userContentType;



}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/usercontenttypeservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],61:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){

var userService = function(restmod){
    return restmod.model('/user').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = userService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/userservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],62:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var userController = function($scope,$timeout,UserService, ProfileService,MessageService,NewPassword){

    var user = UserService.$find(0);
    var profile = ProfileService.$find(0);
    $scope.profile = profile.$fetch();
    $scope.user = user.$fetch();

    $scope.updateUser = function(){

        user.$save().$then(function(data){
            var meta = data.$metadata.meta;
            MessageService.setAlertMessage($scope,meta);
        },function(data){
            $scope.errors = data.$response.data;
            MessageService.setServerValidationMessage($scope);
        });
    }

    $scope.updatePassword = function(){
        var changedPassword = {
          password:$scope.password
        };
        var newPassword = NewPassword.updatePassword(user.id,changedPassword);
        newPassword.success(function(data){
            var meta = data.meta;
            MessageService.setAlertMessage($scope,meta);
            $timeout(function(){
                $scope.password = "";
                $scope.showPasswordChange = false;
            },4000);
        });
    }
    $scope.updatePersonalInfo = function(){
        profile.$save().$then(function(data){
            var meta = data.$metadata.meta;
            MessageService.setAlertMessage($scope,meta);
        },function(data){
            $scope.errors = data.$response.data;
            MessageService.setServerValidationMessage($scope);
        });
    }
    $scope.updateSocialInfo = function(){
        profile.$save().$then(function(data){
            var meta = data.$metadata.meta;
            MessageService.setAlertMessage($scope,meta);
        },function(data){
            $scope.errors = data.$response.data;
            MessageService.setServerValidationMessage($scope);
        });
    }

}

module.exports = userController;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/usercontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],63:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var stc_messages = function () {
    return [

        {
            "code": 701,
            "name":"contentselector_info",
            "message": 'Activa las opciones que quieres que aparezcan en tu sitio Web.'+
            'Por ejemplo, si no es tu objetivo mostrar Servicios a tus visitantes, puedes desactivar la casilla "Servicios" y ese contenido no se mostrará.',
            "type": "info"
        },
        {
            "code": 702,
            "name":"resumeselector_info",
            "message": 'Pulsa la opción para ir a la sección del Résumé indicada',
            "type": "info"
        },

    ]

};
module.exports = stc_messages;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/config/messages.js","/resources/assets/js/config")

},{"_process":7,"buffer":3}],64:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/*
 AngularJS v1.3.13
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(r,f,s){'use strict';f.module("ngMessages",[]).directive("ngMessages",["$compile","$animate","$templateRequest",function(q,k,l){return{restrict:"AE",controller:function(){this.$renderNgMessageClasses=f.noop;var b=[];this.registerMessage=function(d,a){for(var c=0;c<b.length;c++)if(b[c].type==a.type){if(d!=c){var g=b[d];b[d]=b[c];d<b.length?b[c]=g:b.splice(0,c)}return}b.splice(d,0,a)};this.renderMessages=function(d,a){d=d||{};var c;f.forEach(b,function(b){var e;if(e=!c||a)e=d[b.type],e=null!==
e&&!1!==e&&e;e?(b.attach(),c=!0):b.detach()});this.renderElementClasses(c)}},require:"ngMessages",link:function(b,d,a,c){c.renderElementClasses=function(b){b?k.setClass(d,"ng-active","ng-inactive"):k.setClass(d,"ng-inactive","ng-active")};var g=f.isString(a.ngMessagesMultiple)||f.isString(a.multiple),e;b.$watchCollection(a.ngMessages||a["for"],function(b){e=b;c.renderMessages(b,g)});(a=a.ngMessagesInclude||a.include)&&l(a).then(function(a){var h;a=f.element("<div/>").html(a);f.forEach(a.children(),
function(a){a=f.element(a);h?h.after(a):d.prepend(a);h=a;q(a)(b)});c.renderMessages(e,g)})}}}]).directive("ngMessage",["$animate",function(f){return{require:"^ngMessages",transclude:"element",terminal:!0,restrict:"AE",link:function(k,l,b,d,a){for(var c,g,e=l[0],n=e.parentNode,h=0,p=0;h<n.childNodes.length;h++){var m=n.childNodes[h];if(8==m.nodeType&&0<=m.nodeValue.indexOf("ngMessage")){if(m===e){c=p;break}p++}}d.registerMessage(c,{type:b.ngMessage||b.when,attach:function(){g||a(k,function(a){f.enter(a,
null,l);g=a})},detach:function(a){g&&(f.leave(g),g=null)}})}}}])})(window,window.angular);
//# sourceMappingURL=angular-messages.min.js.map

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/angular-messages/angular-messages.min.js","/resources/assets/vendor/angular-messages")

},{"_process":7,"buffer":3}],65:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/**
 * API Bound Models for AngularJS
 * @version v1.1.7 - 2015-01-06
 * @link https://github.com/angular-platanus/restmod
 * @author Ignacio Baixas <ignacio@platan.us>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

(function(angular, undefined) {
'use strict';
/**
 * Angular inflection library
 * @version v0.2.0 - 2014-08-22
 * @link https://github.com/platanus/angular-inflector
 * @author Ignacio Baixas <ignacio@platan.us>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

(function(angular, undefined) {
angular.module('platanus.inflector', [])
  /**
   * @class inflectorProvider
   *
   * @description
   *
   * The inflectorProvider exposes inflector configuration options, mainly related to locales.
   */
  .provider('inflector', [function () {

    var activeLocale = 'en', localeMap = {
      /**
       * English transformation rules.
       *
       * Taken from https://code.google.com/p/inflection-js/source/browse/trunk/inflection.js
       */
      en: {
        uncountable: [
          'music', 'art', 'love', 'happiness', 'advice', 'furniture', 'luggage',
          'sugar', 'butter', 'water', 'electricity', 'gas', 'power', 'currency',
          'equipment', 'information', 'rice', 'money', 'species', 'series',
          'fish', 'sheep', 'moose', 'deer', 'news'
        ],

        plural: [
          [new RegExp('(m)an$', 'gi'),                 '$1en'],
          [new RegExp('(pe)rson$', 'gi'),              '$1ople'],
          [new RegExp('(child)$', 'gi'),               '$1ren'],
          [new RegExp('^(ox)$', 'gi'),                 '$1en'],
          [new RegExp('(ax|test)is$', 'gi'),           '$1es'],
          [new RegExp('(octop|vir)us$', 'gi'),         '$1i'],
          [new RegExp('(alias|status)$', 'gi'),        '$1es'],
          [new RegExp('(bu)s$', 'gi'),                 '$1ses'],
          [new RegExp('(buffal|tomat|potat)o$', 'gi'), '$1oes'],
          [new RegExp('([ti])um$', 'gi'),              '$1a'],
          [new RegExp('sis$', 'gi'),                   'ses'],
          [new RegExp('(?:([^f])fe|([lr])f)$', 'gi'),  '$1$2ves'],
          [new RegExp('(hive)$', 'gi'),                '$1s'],
          [new RegExp('([^aeiouy]|qu)y$', 'gi'),       '$1ies'],
          [new RegExp('(x|ch|ss|sh)$', 'gi'),          '$1es'],
          [new RegExp('(matr|vert|ind)ix|ex$', 'gi'),  '$1ices'],
          [new RegExp('([m|l])ouse$', 'gi'),           '$1ice'],
          [new RegExp('(quiz)$', 'gi'),                '$1zes'],
          [new RegExp('s$', 'gi'),                     's'],
          [new RegExp('$', 'gi'),                      's']
        ],

        singular: [
          [new RegExp('(m)en$', 'gi'),                                                       '$1an'],
          [new RegExp('(pe)ople$', 'gi'),                                                    '$1rson'],
          [new RegExp('(child)ren$', 'gi'),                                                  '$1'],
          [new RegExp('([ti])a$', 'gi'),                                                     '$1um'],
          [new RegExp('((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$','gi'), '$1$2sis'],
          [new RegExp('(hive)s$', 'gi'),                                                     '$1'],
          [new RegExp('(tive)s$', 'gi'),                                                     '$1'],
          [new RegExp('(curve)s$', 'gi'),                                                    '$1'],
          [new RegExp('([lr])ves$', 'gi'),                                                   '$1f'],
          [new RegExp('([^fo])ves$', 'gi'),                                                  '$1fe'],
          [new RegExp('([^aeiouy]|qu)ies$', 'gi'),                                           '$1y'],
          [new RegExp('(s)eries$', 'gi'),                                                    '$1eries'],
          [new RegExp('(m)ovies$', 'gi'),                                                    '$1ovie'],
          [new RegExp('(x|ch|ss|sh)es$', 'gi'),                                              '$1'],
          [new RegExp('([m|l])ice$', 'gi'),                                                  '$1ouse'],
          [new RegExp('(bus)es$', 'gi'),                                                     '$1'],
          [new RegExp('(o)es$', 'gi'),                                                       '$1'],
          [new RegExp('(shoe)s$', 'gi'),                                                     '$1'],
          [new RegExp('(cris|ax|test)es$', 'gi'),                                            '$1is'],
          [new RegExp('(octop|vir)i$', 'gi'),                                                '$1us'],
          [new RegExp('(alias|status)es$', 'gi'),                                            '$1'],
          [new RegExp('^(ox)en', 'gi'),                                                      '$1'],
          [new RegExp('(vert|ind)ices$', 'gi'),                                              '$1ex'],
          [new RegExp('(matr)ices$', 'gi'),                                                  '$1ix'],
          [new RegExp('(quiz)zes$', 'gi'),                                                   '$1'],
          [new RegExp('s$', 'gi'),                                                           '']
        ]
      }
    };

    // helper function used by singularize and pluralize
    function applyRules(_string, _ruleSet, _skip) {

      if(_skip.indexOf(_string.toLowerCase()) === -1) {
        var i = 0, rule;
        while(rule = _ruleSet[i++]) {
          if(_string.match(rule[0])) {
            return _string.replace(rule[0], rule[1]);
          }
        }
      }

      return _string;
    }

    return {

      /**
       * @memberof inflectorProvider#
       *
       * @description
       *
       * Registers a new locale, see the default english locale implementation for information about the required structure.
       *
       * @param {string} _locale Locale name
       * @param {object} _def Locale definition
       */
      registerLocale: function(_locale, _def) {
        localeMap[_locale] = _def;
      },

      /**
       * @memberof inflectorProvider#
       *
       * @description
       *
       * Sets the default locale, defaults to 'en'
       *
       * @param {string} _locale Locale name
       */
      setLocale: function(_locale) {
        activeLocale = _locale;
      },

      /**
       * @class inflector
       *
       * @description
       *
       * The inflector service provides a set of string transformation methods.
       */
      $get: ['$log', function($log) {

        function loadRulesFor(_locale) {
          _locale = _locale || activeLocale;
          var rules = localeMap[_locale];
          if(!rules) $log.warn('Invalid inflector locale ' + _locale);
          return rules;
        }

        return {

          /**
           * @memberof inflector#
           *
           * @description
           *
           * Transform a string to camelcase, removing every space, dash and underscore
           *
           * @param {string} _string String to transform
           * @param {boolean} _constant If set to false, first letter is not uppercased, defaults to false.
           * @return {string} The transformed string
           */
          camelize: function(_string, _constant) {
            if (typeof _string !== 'string') return _string;
            return _string.replace(/(?:^[-_\s]*|[-_\s]+)([A-Z\d])/gi, function (match, _first, _index) {
              return (!_constant && _index === 0) ? _first : _first.toUpperCase();
            });
          },

          /**
           * @memberof inflector#
           *
           * @description
           *
           * Transforms a camelcase string to a snakecase string
           *
           * @param {string} _string String to transform
           * @param {string} _sep Separator, defaults to '-'
           * @return {string} The transformed string
           */
          parameterize: function(_string, _sep) {
            if (typeof _string !== 'string') return _string;
            return _string.replace(/(?:[A-Z]+|[0-9]+)/g, function (_match, _index) {
              return _index === 0 ? _match : (_sep || '-') + _match;
            }).toLowerCase();
          },

          /**
           * @memberof inflector#
           *
           * @description
           *
           * Transforms a string to snakecase, replaces every space, dash and undercore by the provided separator.
           *
           * @param {string} _string String to transform
           * @param {string} _sep Separator, defaults to '-'
           * @return {string} The transformed string
           */
          dasherize: function(_string, _sep) {
            return _string.replace(/[-_\s]+/g, _sep || '-');
          },

          /**
           * @memberof inflector#
           *
           * @description
           *
           * Transforms a string to its singular form.
           *
           * @param {string} _string String to transform
           * @param {string} _locale) Locale to use, defaults to the default locale
           * @return {string} The transformed string
           */
          singularize: function(_string, _locale) {
            var rules = loadRulesFor(_locale);
            return rules ? applyRules(_string, rules.singular, rules.uncountable) : _string;
          },

          /**
           * @memberof inflector#
           *
           * @description
           *
           * Transforms a string to its plural form.
           *
           * @param {string} _string String to transform
           * @param {string} _locale) Locale to use, defaults to the default locale
           * @return {string} The transformed string
           */
          pluralize: function(_string, _locale) {
            var rules = loadRulesFor(_locale);
            return rules ? applyRules(_string, rules.plural, rules.uncountable) : _string;
          }
        };

      }]
    };
  }]);

})(angular);
// Preload some angular stuff
var RMModule = angular.module('restmod', ['ng', 'platanus.inflector']);

/**
 * @class restmodProvider
 *
 * @description
 *
 * The restmodProvider exposes restmod configuration methods
 */
RMModule.provider('restmod', [function() {

  var BASE_CHAIN = ['RMBuilderExt', 'RMBuilderRelations', 'RMBuilderComputed'];

  function wrapInInvoke(_mixin) {
    return function(_injector) {
      _injector.invoke(_mixin, this, { $builder: this });
    };
  }

  return {
    /**
     * @memberof restmodProvider#
     *
     * @description
     *
     * Adds base mixins for every generated model.
     *
     * **ATTENTION** Model names should NOT be added to this chain.
     *
     * All mixins added to the chain are prepended to every generated model.
     *
     * Usage:
     *
     * ```javascript
     * $provider.rebase('ChangeModel', 'LazyRelations', 'ThrottledModel')
     * ```
     */
    rebase: function(/* _mix_names */) {
      var mixin, i, l = arguments.length;
      for(i = 0; i < l; i++) {
        mixin = arguments[i];
        if(angular.isArray(mixin) || angular.isFunction(mixin)) {
          mixin = wrapInInvoke(mixin);
        }
        BASE_CHAIN.push(mixin);
      }
      return this;
    },

    /**
     * @class restmod
     *
     * @description
     *
     * The restmod service provides factory methods for the different restmod consumables.
     */
    $get: ['RMModelFactory', '$log', function(buildModel, $log) {

      var arraySlice = Array.prototype.slice;

      var restmod = {
        /**
         * @memberOf restmod#
         *
         * @description
         *
         * The model factory is used to generate new restmod model types. It's recommended to put models inside factories,
         * this is usefull later when defining relations and inheritance, since the angular $injector is used by
         * these features. It's also the angular way of doing things.
         *
         * A simple model can be built like this:
         *
         * ```javascript
         * angular.module('bike-app').factory('Bike', function(restmod) {
         *   return restmod.model('/bikes');
         * });
         *```
         *
         * The `_url` parameter is the resource url the generated model will be bound to, if `null` is given then
         * the model is *nested* and can only be used in another model context.
         *
         * The model also accepts one or more definition providers as one or more arguments after the _url parameter,
         * posible definition providers are:
         *
         * * A definition object (more on this at the {@link BuilderApi}):
         *
         * ```javascript
         * restmod.model('/bikes', {
         *   viewed: { init: false },
         *   parts: { hasMany: 'Part' },
         *   '~afterCreate': function() {
         *     alert('Bike created!!');
         *   }
         * });
         *```
         *
         * * A definition function (more on this at the {@link BuilderApi}):
         *
         * ```javascript
         * restmod.model('/bikes', function() {
         *   this.attrDefault('viewed', false);
         *   this.attrMask('id', 'CU');
         * });
         *```
         *
         * * A mixin (generated using the mixin method) or model factory name:
         *
         * ```javascript
         * restmod.model('/bikes', 'BaseModel', 'PagedModel');
         *```
         *
         * * A mixin (generated using the mixin method) or model object:
         *
         * ```javascript
         * restmod.model('/bikes', BaseModel, PagedModel);
         * ```
         *
         * @param {string} _url Resource url.
         * @param {mixed} _mix One or more mixins, description objects or description blocks.
         * @return {StaticApi} The new model.
         */
        model: function(_baseUrl/* , _mix */) {
          var model = buildModel(_baseUrl, BASE_CHAIN);

          if(arguments.length > 1) {
            model.mix(arraySlice.call(arguments, 1));
            $log.warn('Passing mixins and difinitions in the model method will be deprecated in restmod 1.2, use restmod.model().mix() instead.');
          }

          return model;
        },

        /**
         * @memberOf restmod#
         *
         * @description
         *
         * The mixin factory is used to pack model behaviors without the overload of generating a new
         * model. The mixin can then be passed as argument to a call to {@link restmod#model#model}
         * to extend the model capabilities.
         *
         * A mixin can also be passed to the {@link restmodProvider#rebase} method to provide
         * a base behavior for all generated models.
         *
         * @param {mixed} _mix One or more mixins, description objects or description blocks.
         * @return {object} The mixin
         */
        mixin: function(/* _mix */) {
          return { $isAbstract: true, $$chain: arraySlice.call(arguments, 0) };
        },

        /**
         * @memberOf restmod#
         *
         * @description
         *
         * Shorcut method used to create singleton resources.
         *
         * Same as calling `restmod.model(null).$single(_url)`
         *
         * Check the {@link StaticApi#$single} documentation for more information.
         *
         * @param {string} _url Resource url,
         * @param {mixed} _mix Mixin chain.
         * @return {RecordApi} New resource instance.
         */
        singleton: function(_url/*, _mix */) {
          return restmod.model.apply(this, arguments).single(_url);
        }
      };

      return restmod;
    }]
  };
}])
.factory('model', ['restmod', function(restmod) {
  return restmod.model;
}])
.factory('mixin', ['restmod', function(restmod) {
  return restmod.mixin;
}]);

RMModule.factory('RMCollectionApi', ['RMUtils', function(Utils) {

  var extend = angular.extend;

  /**
   * @class CollectionApi
   *
   * @extends ScopeApi
   * @extends CommonApi
   *
   * @description
   *
   * A restmod collection is an extended array type bound REST resource route.
   *
   * Every time a new restmod model is created, an associated collection type is created too.
   *
   * TODO: talk about fetch/refresh behaviour, lifecycles, collection scopes, adding/removing
   *
   * For `$fetch` on a collection:
   *
   * * before-fetch-many
   * * before-request
   * * after-request[-error]
   * * after-feed (called for every record if no errors)
   * * after-feed-many (only called if no errors)
   * * after-fetch-many[-error]
   *
   * @property {boolean} $isCollection Helper flag to separate collections from the main type
   * @property {object} $scope The collection scope (hierarchical scope, not angular scope)
   * @property {object} $params The collection query parameters
   *
   */
  return {

    $isCollection: true,

    /**
     * @memberof CollectionApi#
     *
     * @description Called by collection constructor on initialization.
     *
     * Note: Is better to add a hook on after-init than overriding this method.
     */
    $initialize: function() {
      // after initialization hook
      this.$dispatch('after-collection-init');
    },

    /**
     * @memberof CollectionApi#
     *
     * @description Feeds raw collection data into the collection.
     *
     * This method is for use in collections only.
     *
     * @param {array} _raw Data to add
     * @param  {string} _mask 'CRU' mask
     * @return {CollectionApi} self
     */
    $decode: function(_raw, _mask) {

      Utils.assert(_raw && angular.isArray(_raw), 'Collection $decode expected array');

      for(var i = 0, l = _raw.length; i < l; i++) {
        this.$buildRaw(_raw[i], _mask).$reveal(); // build and disclose every item.
      }

      this.$dispatch('after-feed-many', [_raw]);
      return this;
    },

    /**
     * @memberof CollectionApi#
     *
     * @description Encodes array data into a its serialized version.
     *
     * @param  {string} _mask 'CRU' mask
     * @return {CollectionApi} self
     */
    $encode: function(_mask) {
      var raw = [];
      for(var i = 0, l = this.length; i < l; i++) {
        raw.push(this[i].$encode(_mask));
      }

      this.$dispatch('before-render-many', [raw]);
      return raw;
    },

    /**
     * @memberof CollectionApi#
     *
     * @description Resets the collection's contents
     *
     * @return {CollectionApi} self
     */
    $clear: function() {
      return this.$always(function() {
        this.length = 0; // reset the collection contents
      });
    },

    /**
     * @memberof CollectionApi#
     *
     * @description Begin a server request to populate collection. This method does not
     * clear the collection contents by default, use `$refresh` to reset and fetch.
     *
     * This method is for use in collections only.
     *
     * @param {object|function} _params Additional request parameters, not stored in collection,
     * if a function is given, then it will be called with the request object to allow requet customization.
     * @return {CollectionApi} self
     */
    $fetch: function(_params) {
      return this.$action(function() {
        var request = { method: 'GET', url: this.$url('fetchMany'), params: this.$params };

        if(_params) {
          request.params = request.params ? extend(request.params, _params) : _params;
        }

        // TODO: check that collection is bound.

        this
          .$dispatch('before-fetch-many', [request])
          .$send(request, function(_response) {
            this
              .$unwrap(_response.data)
              .$dispatch('after-fetch-many', [_response]);
          }, function(_response) {
            this.$dispatch('after-fetch-many-error', [_response]);
          });
      });
    },

    /**
     * @memberof CollectionApi#
     *
     * @description Adds an item to the back of the collection. This method does not attempt to send changes
     * to the server. To create a new item and add it use $create or $build.
     *
     * Triggers after-add callbacks.
     *
     * @param {RecordApi} _obj Item to be added
     * @return {CollectionApi} self
     */
    $add: function(_obj, _idx) {
      Utils.assert(_obj.$type && _obj.$type === this.$type, 'Collection $add expects record of the same $type');

      return this.$action(function() {
        if(_obj.$position === undefined) {
          if(_idx !== undefined) {
            this.splice(_idx, 0, _obj);
          } else {
            this.push(_obj);
          }
          _obj.$position = true; // use true for now, keeping position updated can be expensive
          this.$dispatch('after-add', [_obj]);
        }
      });
    },

    /**
     * @memberof CollectionApi#
     *
     * @description  Removes an item from the collection.
     *
     * This method does not send a DELETE request to the server, it just removes the
     * item locally. To remove an item AND send a DELETE use the item's $destroy method.
     *
     * Triggers after-remove callbacks.
     *
     * @param {RecordApi} _obj Item to be removed
     * @return {CollectionApi} self
     */
    $remove: function(_obj) {
      return this.$action(function() {
        var idx = this.$indexOf(_obj);
        if(idx !== -1) {
          this.splice(idx, 1);
          _obj.$position = undefined;
          this.$dispatch('after-remove', [_obj]);
        }
      });
    },

    /**
     * @memberof CollectionApi#
     *
     * @description Finds the location of an object in the array.
     *
     * If a function is provided then the index of the first item for which the function returns true is returned.
     *
     * @param {RecordApi|function} _obj Object to find
     * @return {number} Object index or -1 if not found
     */
    $indexOf: function(_obj) {
      var accept = typeof _obj === 'function' ? _obj : false;
      for(var i = 0, l = this.length; i < l; i++) {
        if(accept ? accept(this[i]) : this[i] === _obj) return i;
      }
      return -1;
    }
  };

}]);
RMModule.factory('RMCommonApi', ['$http', 'RMFastQ', '$log', function($http, $q, $log) {

  var EMPTY_ARRAY = [];

  function wrapPromise(_ctx, _fun) {
    var dsp = _ctx.$dispatcher();
    return function(_last) {
      // save and reset promise
      var oldPromise = _ctx.$promise;
      _ctx.$promise = undefined;
      try {
        _ctx.$last = _last;
        var result = dsp ? _ctx.$decorate(dsp, _fun, [_ctx]) : _fun.call(_ctx, _ctx);
        return result === undefined ? _ctx.$promise : result;
      } finally {
        _ctx.$promise = oldPromise; // restore old promise
      }
    };
  }

  /**
   * @class CommonApi
   *
   * @description
   *
   * Provides a common framework for restmod resources.
   *
   * This API is included in {@link RecordApi} and {@link CollectionApi}.
   * making its methods available in every structure generated by restmod.
   *
   * TODO: Describe hook mechanism, promise mechanism and send lifecycle.
   *
   * @property {promise} $promise The last operation promise (undefined if no promise has been created yet)
   * @property {array} $pending Pending requests associated to this resource (undefined if no request has been initiated)
   * @property {object} $$cb Scope call backs (undefined if no callbacks have been defined, private api)
   * @property {function} $$dsp The current event dispatcher (private api)
   */
  var CommonApi = {

    /**
     * @memberof CommonApi#
     *
     * @description Gets this resource url.
     *
     * @param {string} _for Intended usage for the url (optional)
     * @return {string} The resource url.
     */
    $url: function(_for) {
      if(_for) {
        _for = '$' + _for + 'UrlFor';
        if(this.$scope[_for]) return this.$scope[_for](this);
      } else if(this.$scope.$canonicalUrlFor) {
        return this.$scope.$canonicalUrlFor(this);
      }

      return this.$scope.$urlFor(this);
    },

    // Hooks API

    /**
     * @memberof CommonApi#
     *
     * @description Executes a given hook callbacks using the current dispatcher context.
     *
     * This method can be used to provide custom object lifecycle hooks.
     *
     * Usage:
     *
     * ```javascript
     * var mixin = restmod.mixin({
     *   triggerDummy: function(_param) {
     *     this.$dispatch('dummy-hook', _param);
     *   }
     * });
     *
     * // Then hook can be used at model definition to provide type-level customization:
     * var Bike $resmod.model('/api/bikes', mixin, {
     *   '~dummy-hook': function() {
     *     alert('This is called for every bike');
     *   }
     * };
     *
     * // or at instance level:
     * var myBike = Bike.$build();
     * myBike.$on('dummy-hook', function() {
     *   alert('This is called for myBike only');
     * });
     *
     * // or event at decorated context level
     * myBike.$decorate({
     *   'dummy-hook': function() {
     *     alert('This is called for myBike only inside the decorated context');
     *   }
     * }, fuction() {
     *  // decorated context
     * });
     * ```
     *
     * @param  {string} _hook Hook name
     * @param  {array} _args Hook arguments
     * @param  {object} _ctx Hook execution context override
     *
     * @return {CommonApi} self
     */
    $dispatch: function(_hook, _args, _ctx) {
      var cbs, i, cb, dsp = this.$$dsp;

      if(!_ctx) _ctx = this;

      // context callbacks
      if(dsp) {
        this.$$dsp = undefined; // disable dsp for hooks
        dsp(_hook, _args, _ctx);
      }

      // instance callbacks
      if(this.$$cb && (cbs = this.$$cb[_hook])) {
        for(i = 0; !!(cb = cbs[i]); i++) {
          cb.apply(_ctx, _args || EMPTY_ARRAY);
        }
      }

      // bubble up the object scope, bubble to type only if there isnt a viable parent scope.
      if(this.$scope && this.$scope.$dispatch) {
        this.$scope.$dispatch(_hook, _args, _ctx);
      } else if(this.$type) {
        this.$type.$dispatch(_hook, _args, _ctx);
      }

      this.$$dsp = dsp; // reenable dsp.

      return this;
    },

    /**
     * @memberof CommonApi#
     *
     * @description Registers an instance hook.
     *
     * An instance hook is called only for events generated by the calling object.
     *
     * ```javascript
     * var bike = Model.$build(), bike2 = Model.$build();
     * bike.$on('before-save', function() { alert('saved!'); });
     *
     * bike.$save(); // 'saved!' alert is shown after bike is saved
     * bike2.$save(); // no alert is shown after bike2 is saved
     * ```
     *
     * @param {string} _hook Hook name
     * @param {function} _fun Callback
     * @return {CommonApi} self
     */
    $on: function(_hook, _fun) {
      var hooks = (this.$$cb || (this.$$cb = {}))[_hook] || (this.$$cb[_hook] = []);
      hooks.push(_fun);
      return this;
    },

    /**
     * @memberof CommonApi#
     *
     * @description Registers hooks to be used only inside the given function (decorated context).
     *
     * ```javascript
     * // special fetch method that sends a special token header.
     * restmod.mixin({
     *   $fetchWithToken: function(_token) {
     *     return this.$decorate({
     *       'before-fetch': function(_req) {
     *         _req.headers = _req.headers || {};
     *         _req.headers['Token'] = _token;
     *       }
     *     ), function() {
     *       return this.$fetch();
     *     })
     *   }
     * });
     * ```
     *
     * @param {object|function} _hooks Hook mapping object or hook execution method.
     * @param {function} _fun Function to be executed in with decorated context, this function is executed in the callee object context.
     * @return {CommonApi} self
     */
    $decorate: function(_hooks, _fun, _args) {

      var oldDispatcher = this.$$dsp;

      // set new dispatcher
      this.$$dsp = (typeof _hooks === 'function' || !_hooks) ? _hooks : function(_hook, _args, _ctx) {
        if(oldDispatcher) oldDispatcher.apply(null, arguments);
        var extraCb = _hooks[_hook];
        if(extraCb) extraCb.apply(_ctx, _args || EMPTY_ARRAY);
      };

      try {
        return _fun.apply(this, _args);
      } finally {
        // reset dispatcher with old value
        this.$$dsp = oldDispatcher;
      }
    },

    /**
     * @memberof CommonApi#
     *
     * @description Retrieves the current object's event dispatcher function.
     *
     * This method can be used in conjuction with `$decorate` to provide a consistent hook context
     * during async operations. This is important when building extensions that want to support the
     * contextual hook system in asynchronic operations.
     *
     * For more information aboout contextual hooks, see the {@link CommonApi#decorate} documentation.
     *
     * Usage:
     *
     * ```javascript
     * restmod.mixin({
     *   $saveAndTrack: function() {
     *     var dsp = this.$dispatcher(), // capture the current dispatcher function.
     *         self = this;
     *     this.$save().$then(function() {
     *       this.$send({ path: '/traces', data: 'ble' }, function() {
     *         this.$decorate(dsp, function() {
     *           // the event is dispatched using the dispatcher function available when $saveAndTrack was called.
     *           this.$dispatch('trace-stored');
     *         });
     *       });
     *     });
     *   }
     * })
     * ```
     *
     * @return {function} Dispatcher evaluator
     */
    $dispatcher: function() {
      return this.$$dsp;
    },

    // Promise API

    /**
     * @memberof CommonApi#
     *
     * @description Returns this object last promise.
     *
     * If promise does not exist, then a new one is generated that resolves to the object itsef. The
     * new promise is not set as the current object promise, for that use `$then`.
     *
     * Usage:
     *
     * ```javascript
     * col.$fetch().$asPromise();
     * ```
     *
     * @return {promise} $q promise
     */
    $asPromise: function() {
      var _this = this;
      return this.$promise ? this.$promise.then(
        function() { return _this; },
        function() { return $q.reject(_this); }
      ) : $q.when(this);
    },

    /**
     * @memberof CommonApi#
     *
     * @description Promise chaining method, keeps the model instance as the chain context.
     *
     * Calls `$q.then` on the model's last promise.
     *
     * Usage:
     *
     * ```javascript
     * col.$fetch().$then(function() { });
     * ```
     *
     * @param {function} _success success callback
     * @param {function} _error error callback
     * @return {CommonApi} self
     */
    $then: function(_success, _error) {

      if(!this.$promise) {
        this.$promise = $q.when(wrapPromise(this, _success)(this));
      } else {
        this.$promise = this.$promise.then(
          _success ? wrapPromise(this, _success) : _success,
          _error ? wrapPromise(this, _error) : _error
        );
      }

      return this;
    },

    /**
     * @memberof CommonApi#
     *
     * @description Promise chaining method, similar to then but executes same callback in success or error.
     *
     * Usage:
     *
     * ```javascript
     * col.$fetch().$always(function() { });
     * ```
     *
     * @param {function} _fun success/error callback
     * @return {CommonApi} self
     */
    $always: function(_fun) {
      return this.$then(_fun, _fun);
    },

    /**
     * @memberof CommonApi#
     *
     * @description Promise chaining, keeps the model instance as the chain context.
     *
     * Calls ´$q.finally´ on the collection's last promise, updates last promise with finally result.
     *
     * Usage:
     *
     * ```javascript
     * col.$fetch().$finally(function() { });
     * ```
     *
     * @param {function} _cb callback
     * @return {CommonApi} self
     */
    $finally: function(_cb) {
      this.$promise = this.$promise['finally'](wrapPromise(this, _cb));
      return this;
    },

    // Communication API

    /**
     * @memberof CommonApi#
     *
     * @description Low level communication method, wraps the $http api.
     *
     * * You can access last request promise using the `$asPromise` method.
     * * Pending requests will be available at the $pending property (array).
     * * Current request execution status can be queried using the $status property (current request, not last).
     * * The $status property refers to the current request inside $send `_success` and `_error` callbacks.
     *
     * @param {object} _options $http options
     * @param {function} _success sucess callback (sync)
     * @param {function} _error error callback (sync)
     * @return {CommonApi} self
     */
    $send: function(_options, _success, _error) {

      // make sure a style base was selected for the model
      if(!this.$type.getProperty('style')) {
        $log.warn('No API style base was selected, see the Api Integration FAQ for more information on this warning');
      }

      var action = this.$$action;

      return this.$always(function() {

        this.$response = null;
        this.$status = 'pending';
        this.$dispatch('before-request', [_options]);

        return $http(_options).then(wrapPromise(this, function() {
          if(action && action.canceled) {
            // if request was canceled during request, ignore post request actions.
            this.$status =  'canceled';
          } else {
            this.$status = 'ok';
            this.$response = this.$last;
            this.$dispatch('after-request', [this.$last]);
            if(_success) _success.call(this, this.$last);
          }
        }), wrapPromise(this, function() {
          if(action && action.canceled) {
            // if request was canceled during request, ignore error handling
            this.$status = 'canceled';
          } else {
            this.$status = 'error';
            this.$response = this.$last;

            // IDEA: Consider flushing pending request in case of an error. Also continue ignoring requests
            // until the error flag is reset by user.

            this.$dispatch('after-request-error', [this.$last]);
            if(_error) _error.call(this, this.$last);
            return $q.reject(this); // TODO: this will step over any promise generated in _error!!
          }
        }));
      });
    },

    // Actions API

    /**
     * @memberof CommonApi#
     *
     * @description Registers a new action to be executed in the promise queue.
     *
     * Registered pending actions can be canceled using `$cancel`
     *
     * `$cancel` will also cancel any ongoing call to `$send` (will not abort it yet though...)
     *
     * @return {CommonApi} self
     */
    $action: function(_fun) {
      var status = {
        canceled: false
      }, pending = this.$pending || (this.$pending = []);

      pending.push(status);

      return this.$always(function() {
        var oldAction = this.$$action;
        try {
          if(!status.canceled) {
            this.$$action = status;
            return _fun.call(this);
          } else {
            return $q.reject(this);
          }
        } finally {
          // restore object state and pending actions
          this.$$action = oldAction;
        }
      }).$finally(function() {
        // after action and related async code finishes, remove status from pending list
        pending.splice(pending.indexOf(status), 1);
      });
    },

    /**
     * @memberof CommonApi#
     *
     * @description Cancels all pending actions registered with $action.
     *
     * @return {CommonApi} self
     */
    $cancel: function() {
      // cancel every pending request.
      if(this.$pending) {
        angular.forEach(this.$pending, function(_status) {
          _status.canceled = true;
        });
      }

      return this;
    },

    /**
     * @memberof CommonApi#
     *
     * @description Returns true if object has queued actions
     *
     * @return {Boolean} Object request pending status.
     */
    $hasPendingActions: function() {
      var pendingCount = 0;

      if(this.$pending) {
        angular.forEach(this.$pending, function(_status) {
          if(!_status.canceled) pendingCount++;
        });
      }

      return pendingCount > 0;
    }
  };

  return CommonApi;

}]);
RMModule.factory('RMExtendedApi', ['$q', 'RMPackerCache', function($q, packerCache) {

  /**
   * @class ExtendedApi
   *
   * @description
   *
   * Provides a common framework **on top** of the {@link RecordApi} and {@link CollectionApi}.
   *
   * @property {boolean} $resolved The collection resolve status, is undefined on intialization
   */
  return {

    // override decode to detect resolution of resource
    $decode: function(_raw, _mask) {
      if(this.$resolved === false && this.$clear) this.$clear(); // clear if not resolved.
      this.$super(_raw, _mask);
      this.$resolved = true;
      return this;
    },

    /// Misc common methods

    /**
     * @memberof ExtendedApi#
     *
     * @description
     *
     * Unpacks and decode raw data from a server generated structure.
     *
     * ATTENTION: do not override this method to change the object wrapping strategy,
     * instead, override the static {@link Model.$unpack} method.
     *
     * @param  {mixed} _raw Raw server data
     * @param  {string} _mask 'CRU' mask
     * @return {ExtendedApi} this
     */
    $unwrap: function(_raw, _mask) {
      try {
        packerCache.prepare();
        _raw = this.$type.unpack(this, _raw);
        return this.$decode(_raw, _mask);
      } finally {
        packerCache.clear();
      }
    },

    /**
     * @memberof ExtendedApi#
     *
     * @description
     *
     * Encode and packs object into a server compatible structure that can be used for PUT/POST operations.
     *
     * ATTENTION: do not override this method to change the object wrapping strategy,
     * instead, override the static {@link Model.$pack} method.
     *
     * @param  {string} _mask 'CRU' mask
     * @return {string} raw data
     */
    $wrap: function(_mask) {
      var raw = this.$encode(_mask);
      raw = this.$type.pack(this, raw);
      return raw;
    },

    /**
     * @memberof ExtendedApi#
     *
     * @description Resets the resource's $resolved status.
     *
     * After being reset, calls to `$resolve` will execute a new $fetch.
     *
     * Also, if reset, resource will be cleared on new data.
     *
     * @return {ExtendedApi} self
     */
    $reset: function() {
      // cancel outside promise chain
      // TODO: find a way of only ignoring requests that will lead to resolution, maybe using action metadata
      return this.$cancel().$action(function() {
        this.$resolved = false;
      });
    },

    /**
     * @memberof ExtendedApi#
     *
     * @description Resolves the resource's contents.
     *
     * If already resolved then this method will return a resolved promise, if not then
     * it will initiate a `$fetch` operation and return the operation promise.
     *
     * This method will trigger a `before-resolve` event before checking the resolve status.
     *
     * @param  {object} _params `$fetch` params
     * @return {promise} Promise that resolves to the resource.
     */
    $resolve: function(_params) {
      return this.$action(function() { // chain resolution in request promise chain
        this.$dispatch('before-resolve', []);
        if(!this.$resolved) this.$fetch(_params);
      });
    },

    /**
     * @memberof ExtendedApi#
     *
     * @description Resets and fetches the resource contents.
     *
     * @param  {object} _params `$fetch` params
     * @return {ExtendedApi} self
     */
    $refresh: function(_params) {
      return this.$reset().$fetch(_params);
    }
  };

}]);
RMModule.factory('RMListApi', [function() {

  /**
   * @class ListApi
   *
   * @description Common methods for Lists and Collections.
   */
  return {

    /**
     * @memberof ListApi#
     *
     * @description Generates a new list from this one.
     *
     * If called without arguments, the list is popupated with the same contents as this list.
     *
     * If there is a pending async operation on the host collection/list, then this method will
     * return an empty list and fill it when the async operation finishes. If you don't need the async behavior
     * then use `$type.list` directly to generate a new list.
     *
     * @param {function} _filter A filter function that should return the list contents as an array.
     * @return {ListApi} list
     */
    $asList: function(_filter) {
      var list = this.$type.list(),
          promise = this.$asPromise();

      // set the list initial promise to the resolution of the parent promise.
      list.$promise = promise.then(function(_this) {
        list.push.apply(list, _filter ? _filter(_this) : _this);
      });

      return list;
    }
  };

}]);
RMModule.factory('RMRecordApi', ['RMUtils', function(Utils) {

  /**
   * @class RelationScope
   *
   * @description
   *
   * Special scope a record provides to resources related via hasMany or hasOne relation.
   */
  var RelationScope = function(_scope, _target, _partial) {
    this.$scope = _scope;
    this.$target = _target;
    this.$partial = Utils.cleanUrl(_partial);
  };

  RelationScope.prototype = {

    $nestedUrl: function() {
      return Utils.joinUrl(this.$scope.$url(), this.$partial);
    },

    // url is nested for collections and nested records
    $urlFor: function(_resource) {
      if(_resource.$isCollection || this.$target.isNested()) {
        return this.$nestedUrl();
      } else {
        return this.$target.$urlFor(_resource);
      }
    },

    // a record's fetch url is always nested
    $fetchUrlFor: function(/* _resource */) {
      return this.$nestedUrl();
    },

    // create is not posible in nested members
    $createUrlFor: function() {
      return null;
    }
  };

  /**
   * @class RecordApi
   * @extends CommonApi
   *
   * @property {object} $scope The record's scope (see {@link ScopeApi})
   * @property {mixed} $pk The record's primary key
   *
   * @description
   *
   * Provides record synchronization and manipulation methods. This is the base API for every restmod record.
   *
   * TODO: Talk about the object lifecycle.
   *
   * ### Object lifecycle hooks
   *
   * For `$fetch`:
   *
   * * before-fetch
   * * before-request
   * * after-request[-error]
   * * after-feed (only called if no errors)
   * * after-fetch[-error]
   *
   * For `$save` when creating:
   *
   * * before-render
   * * before-save
   * * before-create
   * * before-request
   * * after-request[-error]
   * * after-feed (only called if no errors)
   * * after-create[-error]
   * * after-save[-error]
   *
   * For `$save` when updating:
   *
   * * before-render
   * * before-save
   * * before-update
   * * before-request
   * * after-request[-error]
   * * after-feed (only called if no errors)
   * * after-update[-error]
   * * after-save[-error]
   *
   * For `$destroy`:
   *
   * * before-destroy
   * * before-request
   * * after-request[-error]
   * * after-destroy[-error]
   *
   * @property {mixed} $pk The record primary key
   * @property {object} $scope The collection scope (hierarchical scope, not angular scope)
   */
	return {

    /**
     * @memberof RecordApi#
     *
     * @description Called by record constructor on initialization.
     *
     * Note: Is better to add a hook to after-init than overriding this method.
     */
    $initialize: function() {
      // apply defaults
      this.$super();

      // after initialization hook
      // TODO: put this on $new so it can use stacked DSP?
      this.$dispatch('after-init');
    },

    /**
     * @memberof RecordApi#
     *
     * @description Called the resource's scope $urlFor method to build the url for the record using the proper scope.
     *
     * By default the resource partial url is just its `$pk` property. This can be overriden to provide other routing approaches.
     *
     * @return {string} The resource partial url
     */
    $buildUrl: function(_scope) {
      return (this.$pk === undefined || this.$pk === null) ? null : Utils.joinUrl(_scope.$url(), this.$pk + '');
    },

    /**
     * @memberof RecordApi#
     *
     * @description Default item child scope factory.
     *
     * By default, no create url is provided and the update/destroy url providers
     * attempt to first use the unscoped resource url.
     *
     * // TODO: create special api to hold scope (so it is not necessary to recreate the whole object every time.)
     *
     * @param {mixed} _for Scope target type, accepts any model class.
     * @param {string} _partial Partial route.
     * @return {RelationScope} New scope.
     */
    $buildScope: function(_for, _partial) {
      if(_for.$buildOwnScope) {
        // TODO
      } else {
        return new RelationScope(this, _for, _partial);
      }
    },

    /**
     * @memberof RecordApi#
     *
     * @description Iterates over the object non-private properties
     *
     * @param {function} _fun Function to call for each
     * @return {RecordApi} self
     */
    $each: function(_fun, _ctx) {
      for(var key in this) {
        if(this.hasOwnProperty(key) && key[0] !== '$') {
          _fun.call(_ctx || this[key], this[key], key);
        }
      }

      return this;
    },

    /**
     * @memberof RecordApi#
     *
     * @description Feed raw data to this instance.
     *
     * @param {object} _raw Raw data to be fed
     * @param {string} _mask 'CRU' mask
     * @return {RecordApi} this
     */
    $decode: function(_raw, _mask) {
      // IDEA: let user override serializer
      this.$type.decode(this, _raw, _mask || Utils.READ_MASK);
      if(this.$pk === undefined || this.$pk === null) this.$pk = this.$type.inferKey(_raw); // TODO: warn if key changes
      this.$dispatch('after-feed', [_raw]);
      return this;
    },

    /**
     * @memberof RecordApi#
     *
     * @description Generate data to be sent to the server when creating/updating the resource.
     *
     * @param {string} _mask 'CRU' mask
     * @return {string} raw data
     */
    $encode: function(_mask) {
      var raw = this.$type.encode(this, _mask || Utils.CREATE_MASK);
      this.$dispatch('before-render', [raw]);
      return raw;
    },

    /**
     * @memberof RecordApi#
     *
     * @description Begin a server request for updated resource data.
     *
     * The request's promise can be accessed using the `$asPromise` method.
     *
     * @param {object} _params Optional list of params to be passed to object request.
     * @return {RecordApi} this
     */
    $fetch: function(_params) {
      return this.$action(function() {
        var url = this.$url('fetch');
        Utils.assert(!!url, 'Cant $fetch if resource is not bound');

        var request = { method: 'GET', url: url, params: _params };

        this.$dispatch('before-fetch', [request]);
        this.$send(request, function(_response) {
          this.$unwrap(_response.data);
          this.$dispatch('after-fetch', [_response]);
        }, function(_response) {
          this.$dispatch('after-fetch-error', [_response]);
        });
      });
    },

    /**
     * @memberof RecordApi#
     *
     * @description Copyies another object's non-private properties.
     *
     * This method runs inside the promise chain, so calling
     *
     * ```javascript
     * Bike.$find(1).$extend({ size: "L" }).$save();
     * ```
     * Will first fetch the bike data and after it is loaded the new size will be applied and then the
     * updated model saved.
     *
     * @param {object} _other Object to merge.
     * @return {RecordApi} self
     */
    $extend: function(_other) {
      return this.$action(function() {
        for(var tmp in _other) {
          if (_other.hasOwnProperty(tmp) && tmp[0] !== '$') {
            this[tmp] = _other[tmp];
          }
        }
      });
    },

    /**
     * @memberof RecordApi#
     *
     * @description Shortcut method used to extend and save a model.
     *
     * This method will not force a PUT, if object is new `$update` will attempt to POST.
     *
     * @param {object} _other Data to change
     * @return {RecordApi} self
     */
    $update: function(_other) {
      return this.$extend(_other).$save();
    },

    /**
     * @memberof RecordApi#
     *
     * @description Begin a server request to create/update/patch resource.
     *
     * A patch is only executed if model is identified and a patch property list is given. It is posible to
     * change the method used for PATCH operations by setting the `patchMethod` configuration.
     *
     * If resource is new and it belongs to a collection and it hasnt been revealed, then it will be revealed.
     *
     * The request's promise can be accessed using the `$asPromise` method.
     *
     * @param {array} _patch Optional list of properties to send in update operation.
     * @return {RecordApi} this
     */
    $save: function(_patch) {
      return this.$action(function() {
        var url = this.$url('update'), request;

        if(url) {

          // If bound, update
          if(_patch) {
            request = {
              method: this.$type.getProperty('patchMethod', 'PATCH'), // allow user to override patch method
              url: url,
              // Use special mask for patches, mask everything that is not in the patch list.
              data: this.$wrap(function(_name) {
                _name = _name.replace('[]', '');
                for(var i = 0, l = _patch.length; i < l; i++) {
                  if(_name === _patch[i] ||
                    _name.indexOf(_patch[i] + '.') === 0 ||
                    _patch[i].indexOf(_name + '.') === 0
                  ) { return false; }
                }

                return true;
              })
            };
          } else {
            request = { method: 'PUT', url: url, data: this.$wrap(Utils.UPDATE_MASK) };
          }

          this
            .$dispatch('before-update', [request, !!_patch])
            .$dispatch('before-save', [request])
            .$send(request, function(_response) {
              this
                .$unwrap(_response.data)
                .$dispatch('after-update', [_response, !!_patch])
                .$dispatch('after-save', [_response]);
            }, function(_response) {
              this
                .$dispatch('after-update-error', [_response, !!_patch])
                .$dispatch('after-save-error', [_response]);
            });
        } else {
          // If not bound create.
          url = this.$url('create') || this.$scope.$url();
          Utils.assert(!!url, 'Cant $create if parent scope is not bound');

          request = { method: 'POST', url: url, data: this.$wrap(Utils.CREATE_MASK) };
          this
            .$dispatch('before-save', [request])
            .$dispatch('before-create', [request])
            .$send(request, function(_response) {
              this.$unwrap(_response.data);

              // reveal item (if not yet positioned)
              if(this.$scope.$isCollection && this.$position === undefined && !this.$preventReveal) {
                this.$scope.$add(this, this.$revealAt);
              }

              this
                .$dispatch('after-create', [_response])
                .$dispatch('after-save', [_response]);
            }, function(_response) {
              this
                .$dispatch('after-create-error', [_response])
                .$dispatch('after-save-error', [_response]);
            });
        }
      });
    },

    /**
     * @memberof RecordApi#
     *
     * @description Begin a server request to destroy the resource.
     *
     * The request's promise can be accessed using the `$asPromise` method.
     *
     * @return {RecordApi} this
     */
    $destroy: function() {
      return this.$action(function() {
        var url = this.$url('destroy');
        if(url)
        {
          var request = { method: 'DELETE', url: url };

          this
            .$dispatch('before-destroy', [request])
            .$send(request, function(_response) {

              // remove from scope
              if(this.$scope.$remove) {
                this.$scope.$remove(this);
              }

              this.$dispatch('after-destroy', [_response]);
            }, function(_response) {
              this.$dispatch('after-destroy-error', [_response]);
            });
        }
        else
        {
          // If not yet bound, just remove from parent
          if(this.$scope.$remove) this.$scope.$remove(this);
        }
      });
    },

    // Collection related methods.

    /**
     * @memberof RecordApi#
     *
     * @description Changes the location of the object in the bound collection.
     *
     * If object hasn't been revealed, then this method will change the index where object will be revealed at.
     *
     * @param  {integer} _to New object position (index)
     * @return {RecordApi} this
     */
    $moveTo: function(_to) {
      if(this.$position !== undefined) {
        // TODO: move item to given index.
        // TODO: callback
      } else {
        this.$revealAt = _to;
      }
      return this;
    },

    /**
     * @memberof RecordApi#
     *
     * @description Reveal in collection
     *
     * If instance is bound to a collection and it hasnt been revealed (because it's new and hasn't been saved),
     * then calling this method without parameters will force the object to be added to the collection.
     *
     * If this method is called with **_show** set to `false`, then the object wont be revealed by a save operation.
     *
     * @param  {boolean} _show Whether to reveal inmediatelly or prevent automatic reveal.
     * @return {RecordApi} this
     */
    $reveal: function(_show) {
      if(_show === undefined || _show) {
        this.$scope.$add(this, this.$revealAt);
      } else {
        this.$preventReveal = true;
      }
      return this;
    }
  };

}]);
RMModule.factory('RMScopeApi', ['RMUtils', function(Utils) {

  /**
   * @class ScopeApi
   *
   * @description Common behaviour for record scopes.
   *
   * Record scopes are starting points for record operations (like base type or a collection)
   *
   * TODO: Talk about record building here
   */
  return {

    /**
     * @memberof ScopeApi#
     *
     * @description provides urls for scope's resources.
     *
     * @param {mixed} _resource The target resource.
     * @return {string|null} The url or nill if resource does not meet the url requirements.
     */
    $urlFor: function(_resource) {
      // force item unscoping if model is not nested (maybe make this optional)
      var scope = this.$type.isNested() ? this : this.$type;
      return typeof _resource.$buildUrl === 'function' ? _resource.$buildUrl(scope) : scope.$url();
    },

    /**
     * @memberof ScopeApi#
     *
     * @description Builds a new instance of this model, bound to this instance scope, sets its primary key.
     *
     * @param {mixed} _pk object private key
     * @param {object} _scope scope override (optional)
     * @return {RecordApi} New model instance
     */
    $new: function(_pk, _scope) {
      return this.$super(_pk, _scope);
    },

    /**
     * @memberof ScopeApi#
     *
     * @description Builds a new instance of this model, does not assign a pk to the created object.
     *
     * ATTENTION: item will not show in collection until `$save` is called. To reveal item before than call `$reveal`.
     *
     * @param  {object} _init Initial values
     * @return {RecordApi} single record
     */
    $build: function(_init) {
      return this.$new().$extend(_init);
    },

    /**
     * @memberof ScopeApi#
     *
     * @description Builds a new instance of this model using undecoded data.
     *
     * ATTENTION: does not automatically reveal item in collection, chain a call to $reveal to do so.
     *
     * @param  {object} _raw Undecoded data
     * @return {RecordApi} single record
     */
    $buildRaw: function(_raw, _mask) {
      var obj = this.$new(this.$type.inferKey(_raw));
      obj.$decode(_raw, _mask);
      return obj;
    },

    /**
     * @memberof ScopeApi#
     *
     * @description Attempts to resolve a resource using provided private key.
     *
     * @param {mixed} _pk Private key
     * @param {object} _params Additional query parameters
     * @return {RecordApi} single record
     */
    $find: function(_pk, _params) {
      return this.$new(_pk).$resolve(_params);
    },

    /**
     * @memberof ScopeApi#
     *
     * @description Builds and saves a new instance of this model
     *
     * @param  {object} _attr Data to be saved
     * @return {RecordApi} single record
     */
    $create: function(_attr) {
      return this.$build(_attr).$save();
    },

    /**
     * @memberof ScopeApi#
     *
     * @description Builds a new collection bound to this scope.
     *
     * If scope is another collection then it will inherit its parameters
     *
     * Collections are bound to an api resource.
     *
     * @param  {object} _params  Additional query string parameters
     * @param  {object} _scope  Scope override (optional)
     * @return {CollectionApi} Model Collection
     */
    $collection: function(_params, _scope) {
      return this.$super(_params, _scope);
    },

    /**
     * @memberof ScopeApi#
     *
     * @description Generates a new collection bound to this context and url and calls $fetch on it.
     *
     * @param {object} _params Collection parameters
     * @return {CollectionApi} record collection
     */
    $search: function(_params) {
      return this.$collection(_params).$fetch();
    }
  };

}]);
RMModule.factory('RMBuilder', ['$injector', 'inflector', '$log', 'RMUtils', function($injector, inflector, $log, Utils) {

  // TODO: add urlPrefix option

  var forEach = angular.forEach,
      isObject = angular.isObject,
      isArray = angular.isArray,
      isFunction = angular.isFunction,
      extend = angular.extend,
      VAR_RGX = /^[A-Z]+[A-Z_0-9]*$/;

  /**
   * @class BuilderApi
   *
   * @description
   *
   * Provides the DSL for model generation, it supports to modes of model definitions:
   *
   * ## Definition object
   *
   * This is the preferred way of describing a model behavior.
   *
   * A model description object looks like this:
   *
   * ```javascript
   * restmod.model({
   *
   *   // MODEL CONFIGURATION
   *
   *   $config: {
   *     name: 'resource',
   *     primaryKey: '_id'
   *   },
   *
   *   // ATTRIBUTE MODIFIERS AND RELATIONS
   *
   *   propWithDefault: { init: 20 },
   *   propWithDecoder: { decode: 'date', chain: true },
   *   hasManyRelation: { hasMany: 'Other' },
   *   hasOneRelation: { hasOne: 'Other' },
   *
   *   // HOOKS
   *
   *   $hooks: {
   *     'after-create': function() {
   *     }
   *   },
   *
   *   // METHODS
   *
   *   $extend: {
   *     Record: {
   *       instanceMethod: function() {
   *       }
   *     },
   *     Model: {
   *       scopeMethod: function() {
   *       }
   *     }
   *   }
   * });
   * ```
   *
   * Special model configuration variables can be set by using a `$config` block:
   *
   * ```javascript
   * restmod.model({
   *
   *   $config: {
   *     name: 'resource',
   *     primaryKey: '_id'
   *   }
   *
   *  });
   * ```
   *
   * With the exception of model configuration variables and properties starting with a special character (**@** or **~**),
   * each property in the definition object asigns a behavior to the same named property in a model's record.
   *
   * To modify a property behavior assign an object with the desired modifiers to a
   * definition property with the same name. Builtin modifiers are:
   *
   * The following built in property modifiers are provided (see each mapped-method docs for usage information):
   *
   * * `init` sets an attribute default value, see {@link BuilderApi#attrDefault}
   * * `mask` and `ignore` sets an attribute mask, see {@link BuilderApi#attrMask}
   * * `map` sets an explicit server attribute mapping, see {@link BuilderApi#attrMap}
   * * `decode` sets how an attribute is decoded after being fetch, maps to {@link BuilderApi#attrDecoder}
   * * `encode` sets how an attribute is encoded before being sent, maps to {@link BuilderApi#attrEncoder}
   * * `volatile` sets the attribute volatility, maps to {@link BuilderApi#attrVolatile}
   *
   * **For relations modifiers take a look at {@link RelationBuilderApi}**
   *
   * **For other extended bundled methods check out the {@link ExtendedBuilderApi}**
   *
   * If other kind of value (different from object or function) is passed to a definition property,
   * then it is considered to be a default value. (same as calling {@link BuilderApi#define} at a definition function)
   *
   * ```javascript
   * var Model = restmod.model('/', {
   *   im20: 20 // same as { init: 20 }
   * })
   *
   * // then say hello is available for use at model records
   * Model.$new().im20; // 20
   * ```
   *
   * To add/override methods from the record api, use the `$extend` block:
   *
   * ```javascript
   * var Model = restmod.model('/', {
   *   $extend: {
   *     sayHello: function() { alert('hello!'); }
   *   }
   * })
   *
   * // then say hello is available for use at model records
   * Model.$new().sayHello();
   * ```
   *
   * To add a static method or a collection method, you must specify the method scope: , prefix the definition key with **^**, to add it to the model collection prototype,
   * prefix it with ***** static/collection methods to the Model, prefix the definition property name with **@**
   * (same as calling {@link BuilderApi#scopeDefine} at a definition function).
   *
   * ```javascript
   * var Model = restmod.model('/', {
   *   $extend: {
   *     'Collection.count': function() { return this.length; },  // scope is set using a prefix
   *
   *     Model: {
   *       sayHello: function() { alert('hello!'); } // scope is set using a block
   *     }
   * })
   *
   * // then the following call will be valid.
   * Model.sayHello();
   * Model.$collection().count();
   * ```
   *
   * More information about method scopes can be found in {@link BuilderApi#define}
   *
   * To add hooks to the Model lifecycle events use the `$hooks` block:
   *
   * ```javascript
   * var Model = restmod.model('/', {
   *   $hooks: {
   *     'after-init': function() { alert('hello!'); }
   *   }
   * })
   *
   * // the after-init hook is called after every record initialization.
   * Model.$new(); // alerts 'hello!';
   * ```
   *
   * ## Definition function
   *
   * The definition function gives complete access to the model builder api, every model builder function described
   * in this page can be called from the definition function by referencing *this*.
   *
   * ```javascript
   * restmod.model('', function() {
   *   this.attrDefault('propWithDefault', 20)
   *       .attrAsCollection('hasManyRelation', 'ModelName')
   *       .on('after-create', function() {
   *         // do something after create.
   *       });
   * });
   * ```
   *
   */
  function Builder(_baseDsl) {

    var mappings = {
      init: ['attrDefault'],
      mask: ['attrMask'],
      ignore: ['attrMask'],
      map: ['attrMap', 'force'],
      decode: ['attrDecoder', 'param', 'chain'],
      encode: ['attrEncoder', 'param', 'chain'],
      'volatile': ['attrVolatile']
    };

    // DSL core functions.

    this.dsl = extend(_baseDsl, {

      /**
       * @memberof BuilderApi#
       *
       * @description Parses a description object, calls the proper builder method depending
       * on each property description type.
       *
       * @param {object} _description The description object
       * @return {BuilderApi} self
       */
      describe: function(_description) {
        forEach(_description, function(_desc, _attr) {
          switch(_attr.charAt(0)) {
          case '@':
            $log.warn('Usage of @ in description objects will be removed in 1.2, use a $extend block instead');
            this.define('Scope.' + _attr.substring(1), _desc); // set static method
            break;
          case '~':
            _attr = inflector.parameterize(_attr.substring(1));
            $log.warn('Usage of ~ in description objects will be removed in 1.2, use a $hooks block instead');
            this.on(_attr, _desc);
            break;
          default:
            if(_attr === '$config') { // configuration block
              for(var key in _desc) {
                if(_desc.hasOwnProperty(key)) this.setProperty(key, _desc[key]);
              }
            } else if(_attr === '$extend') { // extension block
              for(var key in _desc) {
                if(_desc.hasOwnProperty(key)) this.define(key, _desc[key]);
              }
            } else if(_attr === '$hooks') { // hooks block
              for(var key in _desc) {
                if(_desc.hasOwnProperty(key)) this.on(key, _desc[key]);
              }
            } else if(VAR_RGX.test(_attr)) {
              $log.warn('Usage of ~ in description objects will be removed in 1.2, use a $config block instead');
              _attr = inflector.camelize(_attr.toLowerCase());
              this.setProperty(_attr, _desc);
            }
            else if(isObject(_desc)) this.attribute(_attr, _desc);
            else if(isFunction(_desc)) this.define(_attr, _desc);
            else this.attrDefault(_attr, _desc);
          }
        }, this);
        return this;
      },

      /**
       * @memberof BuilderApi#
       *
       * @description Extends the builder DSL
       *
       * Adds a function to de builder and alternatively maps the function to an
       * attribute definition keyword that can be later used when calling
       * `define` or `attribute`.
       *
       * Mapping works as following:
       *
       *    // Given the following call
       *    builder.extend('testAttr', function(_attr, _test, _param1, param2) {
       *      // wharever..
       *    }, ['test', 'testP1', 'testP2']);
       *
       *    // A call to
       *    builder.attribute('chapter', { test: 'hello', testP1: 'world' });
       *
       *    // Its equivalent to
       *    builder.testAttr('chapter', 'hello', 'world');
       *
       * The method can also be passed an object with various methods to be added.
       *
       * @param {string|object} _name function name or object to merge
       * @param {function} _fun function
       * @param {array} _mapping function mapping definition
       * @return {BuilderApi} self
       */
      extend: function(_name, _fun, _mapping) {
        if(typeof _name === 'string') {
          this[_name] = Utils.override(this[name], _fun);
          if(_mapping) {
            mappings[_mapping[0]] = _mapping;
            _mapping[0] = _name;
          }
        } else Utils.extendOverriden(this, _name);
        return this;
      },

      /**
       * @memberof BuilderApi#
       *
       * @description Sets an attribute properties.
       *
       * This method uses the attribute modifiers mapping to call proper
       * modifiers on the argument.
       *
       * For example, using the following description on the createdAt attribute
       *
       *    { decode: 'date', param; 'YY-mm-dd' }
       *
       * Is the same as calling
       *
       *    builder.attrDecoder('createdAt', 'date', 'YY-mm-dd')
       *
       * @param {string} _name Attribute name
       * @param {object} _description Description object
       * @return {BuilderApi} self
       */
      attribute: function(_name, _description) {
        var key, map, args, i;
        for(key in _description) {
          if(_description.hasOwnProperty(key)) {
            map = mappings[key];
            if(map) {
              args = [_name, _description[key]];
              for(i = 1; i < map.length; i++) {
                args.push(_description[map[i]]);
              }
              args.push(_description);
              this[map[0]].apply(this, args);
            }
          }
        }
        return this;
      }
    });
  }

  Builder.prototype = {

    // use the builder to process a mixin chain
    chain: function(_chain) {
      for(var i = 0, l = _chain.length; i < l; i++) {
        this.mixin(_chain[i]);
      }
    },

    // use the builder to process a single mixin
    mixin: function(_mix) {
      if(_mix.$$chain) {
        this.chain(_mix.$$chain);
      } else if(typeof _mix === 'string') {
        this.mixin($injector.get(_mix));
      } else if(isArray(_mix)) {
        this.chain(_mix);
      } else if(isFunction(_mix)) {
        _mix.call(this.dsl, $injector);
      } else {
        this.dsl.describe(_mix);
      }
    }
  };

  return Builder;

}]);
RMModule.factory('RMBuilderComputed', ['restmod',
  function(restmod) {
    /**
     * @class RMBuilderComputedApi
     *
     * @description
     *
     * Builder DSL extension to build computed properties.
     *
     * A computed property is a "virtual" property which is created using
     * other model properties. For example, a user has a firstName and lastName,
     * A computed property, fullName, is generated from the two.
     *
     * Adds the following property modifiers:
     * * `computed` function will be assigned as getter to Model, maps to {@link RMBuilderComputedApi#attrAsComputed}
     *
     */
    var EXT = {

      /**
       * @memberof RMBuilderComputedApi#
       *
       * @description Registers a model computed property
       *
       * @param {string}  _attr Attribute name
       * @param {function} _fn Function that returns the desired attribute value when run.
       * @return {BuilderApi} self
       */
      attrAsComputed: function(_attr, _fn) {
        this.attrComputed(_attr, _fn);
        return this;
      }
    };

    return restmod.mixin(function() {
      this.extend('attrAsComputed', EXT.attrAsComputed, ['computed']);
    });
  }
]);
RMModule.factory('RMBuilderExt', ['$injector', '$parse', 'inflector', '$log', 'restmod', function($injector, $parse, inflector, $log, restmod) {

  var bind = angular.bind,
      isFunction = angular.isFunction;

  /**
   * @class ExtendedBuilderApi
   *
   * @description
   *
   * Non-core builder extensions
   *
   * Adds the following property modifiers:
   * * `serialize` sets the encoder and decoder beaviour for an attribute, maps to {@link BuilderApi#attrSerializer}
   *
   */
  var EXT = {
    /**
     * @memberof ExtendedBuilderApi#
     *
     * @description Sets an url prefix to be added to every url generated by the model.
     *
     * This applies even to objects generated by the `$single` method.
     *
     * This method is intended to be used in a base model mixin so everymodel that extends from it
     * gets the same url prefix.
     *
     * Usage:
     *
     * ```javascript
     * var BaseModel = restmod.mixin(function() {
     *   this.setUrlPrefix('/api');
     * })
     *
     * var bike = restmod.model('/bikes', BaseModel).$build({ id: 1 });
     * console.log(bike.$url()) // outputs '/api/bikes/1'
     * ```
     *
     * @param {string} _prefix url portion
     * @return {BuilderApi} self
     */
    setUrlPrefix: function(_prefix) {
      return this.setProperty('urlPrefix', _prefix);
    },

    /**
     * @memberof ExtendedBuilderApi#
     *
     * @description Changes the model's primary key.
     *
     * Primary keys are passed to scope's url methods to generate urls. The default primary key is 'id'.
     *
     * **ATTENTION** Primary keys are extracted from raw data, so _key must use raw api naming.
     *
     * @param {string|function} _key New primary key.
     * @return {BuilderApi} self
     */
    setPrimaryKey: function(_key) {
      return this.setProperty('primaryKey', _key);
    },

    /**
     * @memberof ExtendedBuilderApi#
     *
     * @description Assigns a serializer to a given attribute.
     *
     * A _serializer is:
     * * an object that defines both a `decode` and a `encode` method
     * * a function that when called returns an object that matches the above description.
     * * a string that represents an injectable that matches any of the above descriptions.
     *
     * @param {string} _name Attribute name
     * @param {string|object|function} _serializer The serializer
     * @return {BuilderApi} self
     */
    attrSerializer: function(_name, _serializer, _opt) {
      if(typeof _serializer === 'string') {
        _serializer = $injector.get(inflector.camelize(_serializer, true) + 'Serializer');
      }

      if(isFunction(_serializer)) _serializer = _serializer(_opt);
      if(_serializer.decode) this.attrDecoder(_name, bind(_serializer, _serializer.decode));
      if(_serializer.encode) this.attrEncoder(_name, bind(_serializer, _serializer.encode));
      return this;
    },

    /// Experimental modifiers

    /**
     * @memberof ExtendedBuilderApi#
     *
     * @description Expression attributes are evaluated every time new data is fed to the model.
     *
     * @param {string}  _name Attribute name
     * @param {string} _expr Angular expression to evaluate
     * @return {BuilderApi} self
     */
    attrExpression: function(_name, _expr) {
      var filter = $parse(_expr);
      return this.on('after-feed', function() {
        this[_name] = filter(this);
      });
    }
  };

  return restmod.mixin(function() {
    this.extend('setUrlPrefix', EXT.setUrlPrefix)
        .extend('setPrimaryKey', EXT.setPrimaryKey)
        .extend('attrSerializer', EXT.attrSerializer, ['serialize']);
  });
}]);
RMModule.factory('RMBuilderRelations', ['$injector', 'inflector', '$log', 'RMUtils', 'restmod', 'RMPackerCache', function($injector, inflector, $log, Utils, restmod, packerCache) {

  // wraps a hook callback to give access to the $owner object
  function wrapHook(_fun, _owner) {
    return function() {
      var oldOwner = this.$owner;
      this.$owner = _owner;
      try {
        return _fun.apply(this, arguments);
      } finally {
        this.$owner = oldOwner;
      }
    };
  }

  // wraps a bunch of hooks
  function applyHooks(_target, _hooks, _owner) {
    for(var key in _hooks) {
      if(_hooks.hasOwnProperty(key)) {
        _target.$on(key, wrapHook(_hooks[key], _owner));
      }
    }
  }

  /**
   * @class RelationBuilderApi
   *
   * @description
   *
   * Builder DSL extension to build model relations
   *
   * Adds the following property modifiers:
   * * `hasMany` sets a one to many hierarchical relation under the attribute name, maps to {@link RelationBuilderApi#attrAsCollection}
   * * `hasOne` sets a one to one hierarchical relation under the attribute name, maps to {@link RelationBuilderApi#attrAsResource}
   * * `belongsTo` sets a one to one reference relation under the attribute name, maps to {@link RelationBuilderApi#attrAsReference}
   * * `belongsToMany` sets a one to many reference relation under the attribute name, maps to {@link RelationBuilderApi#attrAsReferenceToMany}
   *
   */
  var EXT = {
    /**
     * @memberof RelationBuilderApi#
     *
     * @description Registers a model **resources** relation
     *
     * @param {string}  _name Attribute name
     * @param {string|object} _model Other model, supports a model name or a direct reference.
     * @param {string} _url Partial url
     * @param {string} _source Inline resource alias (optional)
     * @param {string} _inverseOf Inverse property name (optional)
     * @param {object} _params Generated collection default parameters
     * @param {object} _hooks Hooks to be applied just to the generated collection
     * @return {BuilderApi} self
     */
    attrAsCollection: function(_attr, _model, _url, _source, _inverseOf, _params, _hooks) {

      var options, globalHooks; // global relation configuration

      this.attrDefault(_attr, function() {

        if(typeof _model === 'string') {
          _model = $injector.get(_model);

          // retrieve global options
          options = _model.getProperty('hasMany', {});
          globalHooks = options.hooks;

          if(_inverseOf) {
            var desc = _model.$$getDescription(_inverseOf);
            if(!desc || desc.relation !== 'belongs_to') {
              $log.warn('Must define an inverse belongsTo relation for inverseOf to work');
              _inverseOf = false; // disable the inverse if no inverse relation is found.
            }
          }
        }

        var scope = this.$buildScope(_model, _url || _model.encodeUrlName(_attr)), col;

        // setup collection
        col = _model.$collection(_params || null, scope);
        if(globalHooks) applyHooks(col, globalHooks, this);
        if(_hooks) applyHooks(col, _hooks, this);
        col.$dispatch('after-has-many-init');

        // set inverse property if required.
        if(_inverseOf) {
          var self = this;
          col.$on('after-add', function(_obj) {
            _obj[_inverseOf] = self;
          });
        }

        return col;
      });

      if(_source || _url) this.attrMap(_attr, _source || _url);

      this.attrDecoder(_attr, function(_raw) {
            this[_attr].$reset().$decode(_raw);
          })
          .attrMask(_attr, Utils.WRITE_MASK)
          .attrMeta(_attr, { relation: 'has_many' });

      return this;
    },

    /**
     * @memberof RelationBuilderApi#
     *
     * @description Registers a model **resource** relation
     *
     * @param {string}  _name Attribute name
     * @param {string|object} _model Other model, supports a model name or a direct reference.
     * @param {string} _url Partial url (optional)
     * @param {string} _source Inline resource alias (optional)
     * @param {string} _inverseOf Inverse property name (optional)
     * @param {object} _hooks Hooks to be applied just to the instantiated record
     * @return {BuilderApi} self
     */
    attrAsResource: function(_attr, _model, _url, _source, _inverseOf, _hooks) {

      var options, globalHooks; // global relation configuration

      this.attrDefault(_attr, function() {

        if(typeof _model === 'string') {
          _model = $injector.get(_model);

          // retrieve global options
          options = _model.getProperty('hasOne', {});
          globalHooks = options.hooks;

          if(_inverseOf) {
            var desc = _model.$$getDescription(_inverseOf);
            if(!desc || desc.relation !== 'belongs_to') {
              $log.warn('Must define an inverse belongsTo relation for inverseOf to work');
              _inverseOf = false; // disable the inverse if no inverse relation is found.
            }
          }
        }

        var scope = this.$buildScope(_model, _url || _model.encodeUrlName(_attr)), inst;

        // setup record
        inst = _model.$new(null, scope);
        if(globalHooks) applyHooks(inst, globalHooks, this);
        if(_hooks) applyHooks(inst, _hooks, this);
        inst.$dispatch('after-has-one-init');

        if(_inverseOf) {
          inst[_inverseOf] = this;
        }

        return inst;
      });

      if(_source || _url) this.attrMap(_attr, _source || _url);

      this.attrDecoder(_attr, function(_raw) {
            this[_attr].$decode(_raw);
          })
          .attrMask(_attr, Utils.WRITE_MASK)
          .attrMeta(_attr, { relation: 'has_one' });

      return this;
    },

    /**
     * @memberof RelationBuilderApi#
     *
     * @description Registers a model **reference** relation.
     *
     * A reference relation expects the host object to provide the primary key of the referenced object or the referenced object itself (including its key).
     *
     * For example, given the following resource structure with a foreign key:
     *
     * ```json
     * {
     *   user_id: 20
     * }
     * ```
     *
     * Or this other structure with inlined data:
     *
     * ```json
     * {
     *   user: {
     *     id: 30,
     *     name: 'Steve'
     *   }
     * }
     * ```
     *
     * You should define the following model:
     *
     * ```javascript
     * restmod.model('/bikes', {
     *   user: { belongsTo: 'User' } // works for both cases detailed above
     * })
     * ```
     *
     * The object generated by the relation is not scoped to the host object, but to it's base class instead (not like hasOne),
     * so the type should not be nested.
     *
     * Its also posible to override the **foreign key name**.
     *
     * When a object containing a belongsTo reference is encoded for a server request, only the primary key value is sent using the
     * same **foreign key name** that was using on decoding. (`user_id` in the above example).
     *
     * @param {string}  _name Attribute name
     * @param {string|object} _model Other model, supports a model name or a direct reference.
     * @param {string} _key foreign key property name (optional, defaults to _attr + '_id').
     * @param {bool} _prefetch if set to true, $fetch will be automatically called on relation object load.
     * @return {BuilderApi} self
     */
    attrAsReference: function(_attr, _model, _key, _prefetch) {

      this.attrDefault(_attr, null)
          .attrMask(_attr, Utils.WRITE_MASK)
          .attrMeta(_attr, { relation: 'belongs_to' });

      function loadModel() {
        if(typeof _model === 'string') {
          _model = $injector.get(_model);
        }
      }

      // TODO: the following code assumes that attribute is at root level! (when uses this[_attr] or this[_attr + 'Id'])

      // inline data handling
      this.attrDecoder(_attr, function(_raw) {
        if(_raw === null) return null;
        loadModel();
        if(!this[_attr] || this[_attr].$pk !== _model.inferKey(_raw)) {
          this[_attr] = _model.$buildRaw(_raw);
        } else {
          this[_attr].$decode(_raw);
        }
      });

      // foreign key handling
      if(_key !== false) {
        this.attrMap(_attr + 'Id', _key || '*', true) // set a forced mapping to always generate key
            .attrDecoder(_attr + 'Id', function(_value) {
              if(_value === undefined) return;
              if(!this[_attr] || this[_attr].$pk !== _value) {
                if(_value !== null && _value !== false) {
                  loadModel();
                  this[_attr] = packerCache.resolve(_model.$new(_value)); // resolve inmediatelly if cached
                  if(_prefetch) this[_attr].$fetch();
                } else {
                  this[_attr] = null;
                }
              }
            })
            .attrEncoder(_attr + 'Id', function() {
              return this[_attr] ? this[_attr].$pk : null;
            });
      }

      return this;
    },

    /**
     * @memberof RelationBuilderApi#
     *
     * @description Registers a model **reference** relation.
     *
     * A reference relation expects the host object to provide the primary key of the referenced objects or the referenced objects themselves (including its key).
     *
     * For example, given the following resource structure with a foreign key array:
     *
     * ```json
     * {
     *   users_ids: [20, 30]
     * }
     * ```
     *
     * Or this other structure with inlined data:
     *
     * ```json
     * {
     *   users: [{
     *     id: 20,
     *     name: 'Steve'
     *   },{
     *     id: 30,
     *     name: 'Pili'
     *   }]
     * }
     * ```
     *
     * You should define the following model:
     *
     * ```javascript
     * restmod.model('/bikes', {
     *   users: { belongsToMany: 'User' } // works for both cases detailed above
     * })
     * ```
     *
     * The object generated by the relation is not scoped to the host object, but to it's base class instead (unlike hasMany),
     * so the referenced type should not be nested.
     *
     * When a object containing a belongsToMany reference is encoded for a server request, only the primary key value is sent for each object.
     *
     * @param {string}  _name Attribute name
     * @param {string|object} _model Other model, supports a model name or a direct reference.
     * @param {string} _keys Server name for the property that holds the referenced keys in response and request.
     * @return {BuilderApi} self
     */
    attrAsReferenceToMany: function(_attr, _model, _keys) {

      this.attrDefault(_attr, function() { return []; })
          .attrMask(_attr, Utils.WRITE_MASK)
          .attrMeta(_attr, { relation: 'belongs_to_many' });

      // TODO: the following code assumes that attribute is at root level! (when uses this[_attr])

      function loadModel() {
        if(typeof _model === 'string') {
          _model = $injector.get(_model);
        }
      }

      function processInbound(_raw, _ref) {
        loadModel();
        _ref.length = 0;
        // TODO: reuse objects that do not change (compare $pks)
        for(var i = 0, l = _raw.length; i < l; i++) {
          if(typeof _raw[i] === 'object') {
            _ref.push(_model.$buildRaw(_raw[i]));
          } else {
            _ref.push(packerCache.resolve(_model.$new(_raw[i])));
          }
        }
      }

      // inline data handling
      this.attrDecoder(_attr, function(_raw) {
        // TODO: if _keys == _attr then inbound data will be processed twice!
        if(_raw) processInbound(_raw, this[_attr]);
      });

      // foreign key handling
      if(_keys !== false) {
        var attrIds = inflector.singularize(_attr) + 'Ids';
        this.attrMap(attrIds, _keys || '*', true)
            .attrDecoder(attrIds, function(_raw) {
              if(_raw) processInbound(_raw, this[_attr]);
            })
            .attrEncoder(attrIds, function() {
              var result = [], others = this[_attr];
              for(var i = 0, l = others.length; i < l; i++) {
                result.push(others[i].$pk);
              }
              return result;
            });
      }

      return this;
    }
  };

  return restmod.mixin(function() {
    this.extend('attrAsCollection', EXT.attrAsCollection, ['hasMany', 'path', 'source', 'inverseOf', 'params', 'hooks']) // TODO: rename source to map, but disable attrMap if map is used here...
        .extend('attrAsResource', EXT.attrAsResource, ['hasOne', 'path', 'source', 'inverseOf', 'hooks'])
        .extend('attrAsReference', EXT.attrAsReference, ['belongsTo', 'key', 'prefetch'])
        .extend('attrAsReferenceToMany', EXT.attrAsReferenceToMany, ['belongsToMany', 'keys']);
  });

}]);
RMModule.factory('RMModelFactory', ['$injector', '$log', 'inflector', 'RMUtils', 'RMScopeApi', 'RMCommonApi', 'RMRecordApi', 'RMListApi', 'RMCollectionApi', 'RMExtendedApi', 'RMSerializer', 'RMBuilder',
  function($injector, $log, inflector, Utils, ScopeApi, CommonApi, RecordApi, ListApi, CollectionApi, ExtendedApi, Serializer, Builder) {

  var NAME_RGX = /(.*?)([^\/]+)\/?$/,
      extend = Utils.extendOverriden;

  return function(_baseUrl, _baseChain) {

    // IDEA: make constructor inaccessible, use separate type for records?
    // * Will ensure proper usage.
    // * Will lose type checking
    function Model(_scope, _pk) {
      this.$scope = _scope || Model;
      this.$pk = _pk;
      this.$initialize();
    }

    _baseUrl = Utils.cleanUrl(_baseUrl);

    var config = {
        primaryKey: 'id',
        urlPrefix: null
      },
      serializer = new Serializer(Model),
      defaults = [],                    // attribute defaults as an array of [key, value]
      computes = [],                    // computed attributes
      meta = {},                        // atribute metadata
      hooks = {},
      builder;                          // the model builder

    // make sure the resource name and plural name are available if posible:

    if(!config.name && _baseUrl) {
      config.name = inflector.singularize(_baseUrl.replace(NAME_RGX, '$2'));
    }

    if(!config.plural && config.name) {
      config.plural = inflector.pluralize(config.name);
    }

    var Collection = Utils.buildArrayType(),
        List = Utils.buildArrayType(),
        Dummy = function(_asCollection) {
          this.$isCollection = _asCollection;
          this.$initialize(); // TODO: deprecate this
        };

    // Collection factory
    function newCollection(_params, _scope) {
      var col = new Collection();
      col.$scope = _scope || Model;
      col.$params = _params;
      col.$initialize();
      return col;
    }

    ///// Setup static api

    /**
     * @class StaticApi
     * @extends ScopeApi
     * @extends CommonApi
     *
     * @description
     *
     * The restmod type API, every generated restmod model type exposes this API.
     *
     * @property {object} $type Reference to the type itself, for compatibility with the {@link ScopeApi}
     *
     * #### About object creation
     *
     * Direct construction of object instances using `new` is not recommended. A collection of
     * static methods are available to generate new instances of a model, for more information
     * read the {@link ModelCollection} documentation.
     */
    extend(Model, {

      // gets an attribute description (metadata)
      $$getDescription: function(_attribute) {
        return meta[_attribute];
      },

      // definition chain
      $$chain: [],

      // keep a reference to type itself for scope api compatibility
      $type: Model,

      // creates a new model bound by default to the static scope
      $new: function(_pk, _scope) {
        return new Model(_scope || Model, _pk);
      },

      // creates a new collection bound by default to the static scope
      $collection: newCollection,

      // gets scope url
      $url: function() {
        return config.urlPrefix ? Utils.joinUrl(config.urlPrefix, _baseUrl) : _baseUrl;
      },

      // bubbles events comming from related resources
      $dispatch: function(_hook, _args, _ctx) {
        var cbs = hooks[_hook], i, cb;
        if(cbs) {
          for(i = 0; !!(cb = cbs[i]); i++) {
            cb.apply(_ctx || this, _args || []);
          }
        }
        return this;
      },

      /**
       * @memberof StaticApi#
       *
       * @description
       *
       * Extracts the primary key from raw record data.
       *
       * Uses the key configured in the PRIMARY_KEY variable or 'id' by default.
       *
       * Some considerations:
       * * This method can be overriden to handle other scenarios.
       * * This method should not change the raw data passed to it.
       * * The primary key value extracted by this method should be comparable using the == operator.
       *
       * @param  {string} _rawData Raw object data (before it goes into decode)
       * @return {mixed} The primary key value.
       */
      inferKey: function(_rawData) {
        if(!_rawData || typeof _rawData[config.primaryKey] === 'undefined') return null;
        return _rawData[config.primaryKey];
      },

      /**
       * @memberof StaticApi#
       *
       * @description
       *
       * Gets a model's internal property value.
       *
       * Some builtin properties:
       * * url
       * * urlPrefix
       * * primaryKey
       *
       * @param  {string} _key Property name
       * @param  {mixed} _default Value to return if property is not defined
       * @return {mixed} value
       */
      getProperty: function(_key, _default) {
        var val = config[_key];
        return val !== undefined ? val : _default;
      },

      /**
       * @memberof StaticApi#
       *
       * @description Returns true if model is nested.
       *
       * An nested model can only be used as a nested resource (using hasMany or hasOne relations)
       *
       * @return {boolean} true if model is nested.
       */
      isNested: function() {
        return !_baseUrl;
      },

      /**
       * @memberof StaticApi#
       *
       * @description Returns a resource bound to a given url, with no parent scope.
       *
       * This can be used to create singleton resources:
       *
       * ```javascript
       * module('BikeShop', []).factory('Status', function(restmod) {
       *   return restmod.model(null).$single('/api/status');
       * };)
       * ```
       *
       * @param {string} _url Url to bound resource to.
       * @return {Model} new resource instance.
       */
      single: function(_url) {
        return new Model({
          $urlFor: function() {
            return config.urlPrefix ? Utils.joinUrl(config.urlPrefix, _url) : _url;
          }
        }, '');
      },

      /**
       * Builds a new dummy resource, the dummy resource can be used to execute random queries
       * using the same infrastructure as records and collections.
       *
       * @return {Dummy} the dummy object
       */
      dummy: function(_asCollection) {
        return new Dummy(_asCollection);
      },

      /**
       * Creates a new record list.
       *
       * A list is a ordered set of records not bound to a particular scope.
       *
       * Contained records can belong to any scope.
       *
       * @return {List} the new list
       */
      list: function(_items) {
        var list = new List();
        if(_items) list.push.apply(list, _items);
        return list;
      },

      /**
       * @memberof StaticApi#
       *
       * @description Returns the model API name.
       *
       * This name should match the one used throughout the API. It's only used by some extended
       * functionality, like the default packer.
       *
       * By default model name is infered from the url, but for nested models and special cases
       * it should be manually set by writing the name and plural properties:
       *
       * ```javascript
       * restmod.model(null, {
       *   __name__: 'resource',
       *   __plural__: 'resourciness' // set only if inflector cant properly gess the name.
       * });
       * ```
       *
       * @return {boolean} If true, return plural name
       * @return {string} The base url.
       */
      identity: function(_plural) {
        return _plural ? config.plural : config.name;
      },

      /**
       * @memberof StaticApi#
       *
       * @description Modifies model behavior.
       *
       * @params {mixed} _mixins One or more mixins or model definitions.
       * @return {Model} The model
       */
      mix: function(/* mixins */) {
        builder.chain(arguments);
        this.$$chain.push.apply(this.$$chain, arguments);
        return this;
      },

      // Strategies

      /**
       * @memberof StaticApi#
       *
       * @description The model unpacking strategy
       *
       * This method is called to extract record data from a request response, its also
       * responsible of handling the response metadata.
       *
       * Override this method to change the metadata processing strategy, by default its a noop
       *
       * @params {mixed} _resource Related resource instance
       * @params {mixed} _raw Response raw data
       * @return {mixed} Resource raw data
       */
      unpack: function(_resource, _raw) { return _raw; },

      /**
       * @memberof StaticApi#
       *
       * @description The model packing strategy
       *
       * This method is called to wrap raw record data to be sent in a request.
       *
       * Override this method to change the request packing strategy, by default its a noop
       *
       * @params {mixed} _resource Related resource instance
       * @params {mixed} _raw Record data to be sent (can be an array if resource is collection)
       * @return {mixed} Wrapped data
       */
      pack: function(_record, _raw) { return _raw; },

      /**
       * @memberof StaticApi#
       *
       * @description The model decoding strategy
       *
       * This method is called to populate a record from raw data (unppacked)
       */
      decode: serializer.decode,

      /**
       * @memberof StaticApi#
       *
       * @description The model encoding strategy
       *
       * This method is called to extract raw data from a record to be sent to server (before packing)
       */
      encode: serializer.encode,

      /**
       * @memberof StaticApi#
       *
       * @description The model name decoding strategy
       *
       * This method is called on every raw record data property to rename it, by default is not defined.
       *
       * Override this method to change the property renaming strategy.
       *
       * @params {string} _name Response (raw) name
       * @return {string} Record name
       */
      decodeName: null,

      /**
       * @memberof StaticApi#
       *
       * @description The model name encoding strategy
       *
       * This method is called when encoding a record to rename the record properties into the raw data properties,
       * by default is not defined.
       *
       * Override this method to change the property renaming strategy
       *
       * @params {string} _name Record name
       * @return {string} Response (raw) name
       */
      encodeName: null,

      /**
       * @memberof StaticApi#
       *
       * @description The model name to url encoding strategy
       *
       * This method is called when translating a name into an url fragment (mainly by relations).
       *
       * By default it uses the `inflector.parameterize` method, in 1.2 this will change and the default
       * behaviour will be to do nothing.
       *
       * @params {string} _name local name
       * @return {string} url fragment
       */
      encodeUrlName: function(_name) {
        $log.warn('Default paremeterization of urls will be disabled in 1.2, override Model.encodeUrlName with inflector.parameterize in your base model to keep the same behaviour.');
        return inflector.parameterize(_name);
      }

    }, ScopeApi);

    ///// Setup record api

    extend(Model.prototype, {

      $type: Model,

      // default initializer: loads the default parameter values
      $initialize: function() {
        var tmp, i, self = this;
        for(i = 0; (tmp = defaults[i]); i++) {
          this[tmp[0]] = (typeof tmp[1] === 'function') ? tmp[1].apply(this) : tmp[1];
        }

        for(i = 0; (tmp = computes[i]); i++) {
          Object.defineProperty(self, tmp[0], {
            enumerable: true,
            get: tmp[1]
          });
        }
      }

    }, CommonApi, RecordApi, ExtendedApi);

    ///// Setup collection api

    extend(Collection.prototype, {

      $type: Model,

      // provide record contructor
      $new: function(_pk, _scope) {
        return Model.$new(_pk, _scope || this);
      },

      // provide collection constructor
      $collection: function(_params, _scope) {
        _params = this.$params ? angular.extend({}, this.$params, _params) : _params;
        return newCollection(_params, _scope || this.$scope);
      }

    }, ListApi, ScopeApi, CommonApi, CollectionApi, ExtendedApi);

    ///// Setup list api

    extend(List.prototype, {

      $type: Model

    }, ListApi, CommonApi);

    ///// Setup dummy api

    extend(Dummy.prototype, {

      $type: Model,

      $initialize: function() {
        // Nothing by default
      }

    }, CommonApi);

    ///// Setup builder

    var APIS = {
      Model: Model,
      Record: Model.prototype,
      Collection: Collection.prototype,
      List: List.prototype,
      Dummy: Dummy.prototype
    };

    // helper used to extend api's
    function helpDefine(_api, _name, _fun) {
      var api = APIS[_api];

      Utils.assert(!!api, 'Invalid api name $1', _api);

      if(_name) {
        api[_name] = Utils.override(api[_name], _fun);
      } else {
        Utils.extendOverriden(api, _fun);
      }
    }

    // load the builder
    builder = new Builder(angular.extend(serializer.dsl(), {

      /**
       * @memberof BuilderApi#
       *
       * Sets one of the model's configuration properties.
       *
       * The following configuration parameters are available by default:
       * * primaryKey: The model's primary key, defaults to **id**. Keys must use server naming convention!
       * * urlPrefix: Url prefix to prepend to resource url, usefull to use in a base mixin when multiples models have the same prefix.
       * * url: The resource base url, null by default. If not given resource is considered nested.
       *
       * @param {string} _key The configuration key to set.
       * @param {mixed} _value The configuration value.
       * @return {BuilderApi} self
       */
      setProperty: function (_key, _value) {
        config[_key] = _value;
        return this;
      },

      /**
       * @memberof BuilderApi#
       *
       * @description Sets the default value for an attribute.
       *
       * Defaults values are set only on object construction phase.
       *
       * if `_init` is a function, then its evaluated every time the
       * default value is required.
       *
       * @param {string} _attr Attribute name
       * @param {mixed} _init Defaulf value / iniline function
       * @return {BuilderApi} self
       */
      attrDefault: function(_attr, _init) {
        defaults.push([_attr, _init]);
        return this;
      },

      /**
       * @memberof BuilderApi#
       *
       * @description Sets a computed value for an attribute.
       *
       * Computed values are set only on object construction phase.
       * Computed values are always masked
       *
       * @param {string} _attr Attribute name
       * @param {function} _fn Function that returns value
       * @return {BuilderApi} self
       */
      attrComputed: function(_attr, _fn) {
        computes.push([_attr, _fn]);
        this.attrMask(_attr, true);
        return this;
      },

      /**
       * @memberof BuilderApi#
       *
       * @description Registers attribute metadata.
       *
       * @param {string} _name Attribute name
       * @param {object} _metadata Attribute metadata
       * @return {BuilderApi} self
       */
      attrMeta: function(_name, _metadata) {
        meta[_name] = extend(meta[_name] || {}, _metadata);
        return this;
      },

      /**
       * @memberof BuilderApi#
       *
       * @description Adds methods to the model
       *
       * This method allows to extend the different model API's.
       *
       * The following API's can be extended using this method:
       * * Model: The static API, affects the Model object itself.
       * * Record: Affects each record generated by the model.
       * * Collection: Affects each collection generated by the model.
       * * Scope: Affects both the static API and collections.
       * * Resource: Affects records and collections.
       *
       * If no api is given
       *
       *
       * If no scope is given,
       * By default this method extends the **Record** prototype.
       * If called with an object
       * instead of a function it can be used to extend the collection and the type with
       * specific implementations.
       *
       * Usage:
       *
       * ```javascript
       * restmod.mixin(function() {
       *   this.define('myRecordMethod', function() {})
       *       .define('Model.myStaticMethod', function() {})
       *       .define('Collection', { }); // object to extend collection api with
       * });
       * ```
       *
       * It is posible to override an existing method using define, if overriden,
       * the old method can be called using `this.$super` inside de new method.
       *
       * @param {string} _where
       * @param {function} _fun Function to define or object with particular implementations
       * @param {string} _api One of the api names listed above, if not given defaults to 'Record'
       * @return {BuilderApi} self
       */
      define: function(_where, _fun) {

        var name = false, api = 'Record';
        if(typeof _fun === 'object' && _fun) {
          api = _where;
        } else {
          name = _where.split('.');
          if(name.length === 1) {
            name = name[0];
          } else {
            api = name[0];
            name = name[1];
          }
        }

        switch(api) {
        // Virtual API's
        case 'List':
          helpDefine('Collection', name, _fun);
          helpDefine('List', name, _fun);
          break;
        case 'Scope':
          helpDefine('Model', name, _fun);
          helpDefine('Collection', name, _fun);
          break;
        case 'Resource':
          helpDefine('Record', name, _fun);
          helpDefine('Collection', name, _fun);
          helpDefine('List', name, _fun);
          helpDefine('Dummy', name, _fun);
          break;
        default:
          helpDefine(api, name, _fun);
        }

        return this;
      },

      /**
       * @memberof BuilderApi#
       *
       * @description Adds an event hook
       *
       * Hooks are used to extend or modify the model behavior, and are not
       * designed to be used as an event listening system.
       *
       * The given function is executed in the hook's context, different hooks
       * make different parameters available to callbacks.
       *
       * @param {string} _hook The hook name, refer to restmod docs for builtin hooks.
       * @param {function} _do function to be executed
       * @return {BuilderApi} self
       */
      on: function(_hook, _do) {
        (hooks[_hook] || (hooks[_hook] = [])).push(_do);
        return this;
      }
    }));

    builder.chain(_baseChain); // load base chain.

    return Model;
  };

}]);

/**
 * @class FastQ
 *
 * @description
 *
 * Synchronous promise implementation (partial)
 *
 */
RMModule.factory('RMFastQ', [function() {

  var isFunction = angular.isFunction,
      catchError = function(_error) {
        return this.then(null, _error);
      };

  function simpleQ(_val, _withError) {

    if(_val && isFunction(_val.then)) return wrappedQ(_val);

    return {
      simple: true,

      then: function(_success, _error) {
        return simpleQ(_withError ? _error(_val) : _success(_val));
      },
      'catch': catchError,
      'finally': function(_cb) {
        var result = _cb();
        if(result && isFunction(_val.then)) {
          // if finally returns a promise, then
          return wrappedQ(_val.then(
            function() { return _withError ? simpleQ(_val, true) : _val; },
            function() { return _withError ? simpleQ(_val, true) : _val; })
          );
        } else {
          return this;
        }
      }
    };
  }

  function wrappedQ(_promise) {
    if(_promise.simple) return _promise;

    var simple;

    // when resolved, make $q a simpleQ
    _promise.then(function(_val) {
      simple = simpleQ(_val);
    }, function(_val) {
      simple = simpleQ(_val, true);
    });

    return {
      then: function(_success, _error) {
        return simple ?
          simple.then(_success, _error) :
          wrappedQ(_promise.then(_success, _error));
      },
      'catch': catchError,
      'finally': function(_cb) {
        return simple ?
          simple['finally'](_cb) :
          wrappedQ(_promise['finally'](_cb));
      }
    };
  }

  return {
    reject: function(_reason) {
      return simpleQ(_reason, true);
    },

    // non waiting promise, if resolved executes immediately
    when: function(_val) {
      return simpleQ(_val, false);
    },

    wrap: wrappedQ
  };
}]);

RMModule.factory('RMPackerCache', [function() {

  var packerCache;

  /**
   * @class PackerCache
   *
   * @description
   *
   * The packer cache service enables packing strategies to register raw object data that can be then used by
   * supporting relations during the decoding process to preload other related resources.
   *
   * This is specially useful for apis that include linked objects data in external metadata.
   *
   * The packer cache is reset on every response unwrapping so it's not supposed to be used as an
   * application wide cache.
   *
   * ### For extension developers:
   *
   * Use the `feed` method to add new raw data to cache.
   *
   * ### For relation developers:
   *
   * Use the `resolve` method to inject cache data into a given identified record.
   *
   */
  return {
    /**
     * @memberof PackerCache#
     *
     * @description Feed data to the cache.
     *
     * @param {string} _name Resource name (singular)
     * @param {array} _rawRecords Raw record data as an array
     */
    feed: function(_name, _rawRecords) {
      packerCache[_name] = _rawRecords; // TODO: maybe append new record to support extended scenarios.
    },

    // IDEA: feedSingle: would require two step resolve many -> single

    /**
     * @memberof PackerCache#
     *
     * @description Searches for data matching the record's pk, if found data is then fed to the record using $decode.
     *
     * @param {RecordApi} _record restmod record to resolve, must be identified.
     * @return {RecordApi} The record, so call can be nested.
     */
    resolve: function(_record) {

      if(packerCache) { // make sure this is a packer cache enabled context.

        var modelType = _record.$type,
            cache = packerCache[modelType.identity(true)];

        if(cache && _record.$pk) {
          for(var i = 0, l = cache.length; i < l; i++) {
            if(_record.$pk === modelType.inferKey(cache[i])) { // this could be sort of slow? nah
              _record.$decode(cache[i]);
              break;
            }
          }
        }
      }

      return _record;
    },

    // private api method used by the unwrapper function.
    prepare: function() {
      packerCache = {};
    },

    // private api internal method used by the unwrapper function.
    clear: function() {
      packerCache = null;
    }
  };

}]);
RMModule.factory('RMSerializer', ['$injector', 'inflector', '$filter', 'RMUtils', function($injector, inflector, $filter, Utils) {

  function extract(_from, _path) {
    var node;
    for(var i = 0; _from && (node = _path[i]); i++) {
      _from = _from[node];
    }
    return _from;
  }

  function insert(_into, _path, _value) {
    for(var i = 0, l = _path.length-1; i < l; i++) {
      var node = _path[i];
      _into = _into[node] || (_into[node] = {});
    }
    _into[_path[_path.length-1]] = _value;
  }

  return function(_strategies) {

    var isArray = angular.isArray;

    // Private serializer attributes
    var masks = {},
        decoders = {},
        encoders = {},
        mapped = {},
        mappings = {},
        vol = {};

    function isMasked(_name, _mask) {
      if(typeof _mask === 'function') return _mask(_name);
      var mask = masks[_name];
      return (mask && (mask === true || mask.indexOf(_mask) !== -1));
    }

    function decode(_from, _to, _prefix, _mask, _ctx) {
      var key, decodedName, fullName, value, maps, isMapped, i, l,
          prefix = _prefix ? _prefix + '.' : '';

      // explicit mappings
      maps = mappings[_prefix];
      if(maps) {
        for(i = 0, l = maps.length; i < l; i++) {
          fullName = prefix + maps[i].path;
          if(isMasked(fullName, _mask)) continue;

          if(maps[i].map) {
            value = extract(_from, maps[i].map);
          } else {
            value = _from[_strategies.encodeName ? _strategies.encodeName(maps[i].path) : maps[i].path];
          }

          if(!maps[i].forced && value === undefined) continue;

          value = decodeProp(value, fullName, _mask, _ctx);
          if(value !== undefined) _to[maps[i].path] = value;
        }
      }

      // implicit mappings
      for(key in _from) {
        if(_from.hasOwnProperty(key)) {

          decodedName = _strategies.decodeName ? _strategies.decodeName(key) : key;
          if(decodedName[0] === '$') continue;

          if(maps) {
            // ignore already mapped keys
            // TODO: ignore nested mappings too.
            for(
              // is this so much faster than using .some? http://jsperf.com/some-vs-for-loop
              isMapped = false, i = 0, l = maps.length;
              i < l && !(isMapped = (maps[i].mapPath === key));
              i++
            );
            if(isMapped) continue;
          }

          fullName = prefix + decodedName;
          // prevent masked or already mapped properties to be set
          if(mapped[fullName] || isMasked(fullName, _mask)) continue;

          value = decodeProp(_from[key], fullName, _mask, _ctx);
          if(value !== undefined) _to[decodedName] = value; // ignore value if filter returns undefined
        }
      }
    }

    function decodeProp(_value, _name, _mask, _ctx) {
      var filter = decoders[_name], result = _value;

      if(filter) {
        result = filter.call(_ctx, _value);
      } else if(typeof _value === 'object') {
        // IDEA: make extended decoding/encoding optional, could be a little taxing for some apps
        if(isArray(_value)) {
          result = [];
          for(var i = 0, l = _value.length; i < l; i++) {
            result.push(decodeProp(_value[i], _name + '[]', _mask, _ctx));
          }
        } else if(_value) {
          result = {};
          decode(_value, result, _name, _mask, _ctx);
        }
      }

      return result;
    }

    function encode(_from, _to, _prefix, _mask, _ctx) {
      var key, fullName, encodedName, value, maps,
          prefix = _prefix ? _prefix + '.' : '';

      // implicit mappings
      for(key in _from) {
        if(_from.hasOwnProperty(key) && key[0] !== '$') {
          fullName = prefix + key;
          // prevent masked or already mapped properties to be copied
          if(mapped[fullName] || isMasked(fullName, _mask)) continue;

          value = encodeProp(_from[key], fullName, _mask, _ctx);
          if(value !== undefined) {
            encodedName = _strategies.encodeName ? _strategies.encodeName(key) : key;
            _to[encodedName] = value;
          }

          if(vol[fullName]) delete _from[key];
        }
      }

      // explicit mappings:
      maps = mappings[_prefix];
      if(maps) {
        for(var i = 0, l = maps.length; i < l; i++) {
          fullName = prefix + maps[i].path;
          if(isMasked(fullName, _mask)) continue;

          value = _from[maps[i].path];
          if(!maps[i].forced && value === undefined) continue;

          value = encodeProp(value, fullName, _mask, _ctx);
          if(value !== undefined) {
            if(maps[i].map) {
              insert(_to, maps[i].map, value);
            } else {
              _to[_strategies.encodeName ? _strategies.encodeName(maps[i].path) : maps[i].path] = value;
            }
          }
        }
      }
    }

    function encodeProp(_value, _name, _mask, _ctx) {
      var filter = encoders[_name], result = _value;

      if(filter) {
        result = filter.call(_ctx, _value);
      } else if(_value !== null && typeof _value === 'object' && typeof _value.toJSON !== 'function') {
        // IDEA: make deep decoding/encoding optional, could be a little taxing for some apps
        if(isArray(_value)) {
          result = [];
          for(var i = 0, l = _value.length; i < l; i++) {
            result.push(encodeProp(_value[i], _name + '[]', _mask, _ctx));
          }
        } else if(_value) {
          result = {};
          encode(_value, result, _name, _mask, _ctx);
        }
      }

      return result;
    }

    return {

      // decodes a raw record into a record
      decode: function(_record, _raw, _mask) {
        decode(_raw, _record, '', _mask, _record);
      },

      // encodes a record, returning a raw record
      encode: function(_record, _mask) {
        var raw = {};
        encode(_record, raw, '', _mask, _record);
        return raw;
      },

      // builds a serializerd DSL, is a standalone object that can be extended.
      dsl: function() {

        return {

          /**
           * @memberof BuilderApi#
           *
           * @description Sets an attribute mapping.
           *
           * Allows a explicit server to model property mapping to be defined.
           *
           * For example, to map the response property `stats.created_at` to model's `created` property.
           *
           * ```javascript
           * builder.attrMap('created', 'stats.created_at');
           * ```
           *
           * It's also posible to use a wildcard '*' as server name to use the default name decoder as
           * server name. This is used to force a property to be processed on decode/encode even if its
           * not present on request/record (respectively), by doing this its posible, for example, to define
           * a dynamic property that is generated automatically before the object is send to the server.
           *
           * @param {string} _attr Attribute name
           * @param {string} _serverName Server (request/response) property name
           * @return {BuilderApi} self
           */
          attrMap: function(_attr, _serverPath, _forced) {
            // extract parent node from client name:
            var index = _attr.lastIndexOf('.'),
                node = index !== -1 ? _attr.substr(0, index) : '',
                leaf = index !== -1 ? _attr.substr(index + 1) : _attr;

            mapped[_attr] = true;

            var nodes = (mappings[node] || (mappings[node] = []));
            nodes.push({ path: leaf, map: _serverPath === '*' ? null : _serverPath.split('.'), mapPath: _serverPath, forced: _forced });
            return this;
          },

          /**
           * @memberof BuilderApi#
           *
           * @description Sets an attribute mask.
           *
           * An attribute mask prevents the attribute to be loaded from or sent to the server on certain operations.
           *
           * The attribute mask is a string composed by:
           * * C: To prevent attribute from being sent on create
           * * R: To prevent attribute from being loaded from server
           * * U: To prevent attribute from being sent on update
           *
           * For example, the following will prevent an attribute to be send on create or update:
           *
           * ```javascript
           * builder.attrMask('readOnly', 'CU');
           * ```
           *
           * If a true boolean value is passed as mask, then 'CRU' will be used
           * If a false boolean valus is passed as mask, then mask will be removed
           *
           * @param {string} _attr Attribute name
           * @param {boolean|string} _mask Attribute mask
           * @return {BuilderApi} self
           */
          attrMask: function(_attr, _mask) {
            if(!_mask) {
              delete masks[_attr];
            } else {
              masks[_attr] = _mask;
            }
            return this;
          },

          /**
           * @memberof BuilderApi#
           *
           * @description Assigns a decoding function/filter to a given attribute.
           *
           * @param {string} _name Attribute name
           * @param {string|function} _filter filter or function to register
           * @param {mixed} _filterParam Misc filter parameter
           * @param {boolean} _chain If true, filter is chained to the current attribute filter.
           * @return {BuilderApi} self
           */
          attrDecoder: function(_attr, _filter, _filterParam, _chain) {

            if(typeof _filter === 'string') {
              var filter = $filter(_filter);
              _filter = function(_value) { return filter(_value, _filterParam); };
            }

            decoders[_attr] = _chain ? Utils.chain(decoders[_attr], _filter) : _filter;
            return this;
          },

          /**
           * @memberof BuilderApi#
           *
           * @description Assigns a encoding function/filter to a given attribute.
           *
           * @param {string} _name Attribute name
           * @param {string|function} _filter filter or function to register
           * @param {mixed} _filterParam Misc filter parameter
           * @param {boolean} _chain If true, filter is chained to the current attribute filter.
           * @return {BuilderApi} self
           */
          attrEncoder: function(_attr, _filter, _filterParam, _chain) {

            if(typeof _filter === 'string') {
              var filter = $filter(_filter);
              _filter = function(_value) { return filter(_value, _filterParam); };
            }

            encoders[_attr] = _chain ? Utils.chain(encoders[_attr], _filter) : _filter;
            return this;
          },

          /**
           * @memberof BuilderApi#
           *
           * @description Makes an attribute volatile, a volatile attribute is deleted from source after encoding.
           *
           * @param {string} _name Attribute name
           * @param {boolean} _isVolatile defaults to true, if set to false then the attribute is no longer volatile.
           * @return {BuilderApi} self
           */
          attrVolatile: function(_attr, _isVolatile) {
            vol[_attr] = _isVolatile === undefined ? true : _isVolatile;
            return this;
          }
        };
      }
    };
  };

}]);
RMModule.factory('DefaultPacker', ['restmod', 'inflector', 'RMPackerCache', function(restmod, inflector, packerCache) {

  function include(_source, _list, _do) {
    for(var i = 0, l = _list.length; i < l; i++) {
      _do(_list[i], _source[_list[i]]);
    }
  }

  function exclude(_source, _skip, _do) {
    for(var key in _source) {
      if(_source.hasOwnProperty(key) && _skip.indexOf(key) === -1) {
        _do(key, _source[key]);
      }
    }
  }

  // process links and stores them in the packer cache
  function processFeature(_raw, _name, _feature, _other, _do) {
    if(_feature === '.' || _feature === true) {
      var skip = [_name];
      if(_other) skip.push.apply(skip, angular.isArray(_other) ? _other : [_other]);
      exclude(_raw, skip, _do);
    } else if(typeof _feature === 'string') {
      exclude(_raw[_feature], [], _do);
    } else { // links is an array
      include(_raw, _feature, _do);
    }
  }

  /**
   * @class DefaultPacker
   *
   * @description
   *
   * Simple `$unpack` implementation that attempts to cover the standard proposed by
   * [active_model_serializers](https://github.com/rails-api/active_model_serializers.
   *
   * This is a simplified version of the wrapping structure recommented by the jsonapi.org standard,
   * it supports side loaded associated resources (via supporting relations) and metadata extraction.
   *
   * To activate add mixin to model chain
   *
   * ```javascript
   * restmodProvide.rebase('DefaultPacker');
   * ```
   *
   * ### Json root
   *
   * By default the mixin will use the singular model name as json root for single resource requests
   * and pluralized name for collection requests. Make sure the model name is correctly set.
   *
   * To override the name used by the mixin set the **jsonRootSingle** and **jsonRootMany** variables.
   * Or set **jsonRoot** to override both.
   *
   * ### Side loaded resources
   *
   * By default the mixin will look for links to other resources in the 'linked' root property, you
   * can change this by setting the jsonLinks variable. To use the root element as link source
   * use `jsonLinks: '.'`. You can also explicitly select which properties to consider links using an
   * array of property names. To skip links processing altogether, set it to false.
   *
   * Links are expected to use the pluralized version of the name for the referenced model. For example,
   * given the following response:
   *
   * ```json
   * {
   *   bikes: [...],
   *   links {
   *     parts: [...]
   *   }
   * }
   * ```
   *
   * Restmod will expect that the Part model plural name is correctly set parts. Only properties declared
   * as reference relations (belongsTo and belongsToMany) will be correctly resolved.
   *
   * ### Metadata
   *
   * By default metadata is only captured if it comes in the 'meta' root property. Metadata is then
   * stored in the $meta property of the resource being unwrapped.
   *
   * Just like links, to change the metadata source property set the jsonMeta property to the desired name, set
   * it to '.' to capture the entire raw response or set it to false to skip metadata and set it to an array of properties
   * to be extract selected properties.
   *
   * @property {mixed} single The expected single resource wrapper property name
   * @property {object} plural The expected collection wrapper property name
   * @property {mixed} links The links repository property name
   * @property {object} meta The metadata repository property name
   *
   */
  return restmod.mixin(function() {
    this.define('Model.unpack', function(_resource, _raw) {
      var name = null,
          links = this.getProperty('jsonLinks', 'linked'),
          meta = this.getProperty('jsonMeta', 'meta');

      if(_resource.$isCollection) {
        name = this.getProperty('jsonRootMany') || this.getProperty('jsonRoot') || this.getProperty('plural');
      } else {
        // TODO: use plural for single resource option.
        name = this.getProperty('jsonRootSingle') || this.getProperty('jsonRoot') || this.getProperty('name');
      }

      if(meta) {
        _resource.$metadata = {};
        processFeature(_raw, name, meta, links, function(_key, _value) {
          _resource.$metadata[_key] = _value;
        });
      }

      if(links) {
        processFeature(_raw, name, links, meta, function(_key, _value) {
          // TODO: check that cache is an array.
          packerCache.feed(_key, _value);
        });
      }

      return _raw[name];
    });
  });

}]);
/**
 * @class Utils
 *
 * @description
 *
 * Various utilities used across the library.
 *
 */
RMModule.factory('RMUtils', ['$log', function($log) {

  // determine browser support for object prototype changing
  var IFRAME_REF = [];
  var PROTO_SETTER = (function() {
    var Test = function() {};
    if(Object.setPrototypeOf) {
      return function(_target, _proto) {
        Object.setPrototypeOf(_target, _proto); // Not sure about supporting this...
      };
    } else if((new Test).__proto__ === Test.prototype) {
      return function(_target, _proto) {
        _target.__proto__ = _proto;
      };
    }
  })();

  var Utils = {

    // Ignore Masks
    CREATE_MASK: 'C',
    UPDATE_MASK: 'U',
    READ_MASK: 'R',
    WRITE_MASK: 'CU',
    FULL_MASK: 'CRU',

    /**
     * @memberof Utils
     *
     * @description
     *
     * Formats a string
     *
     * @param  {string} _str String to format
     * @param  {array} _args String arguments
     * @return {string} Formated string
     */
    format: function(_str, _args) {
      for(var i = 0; _args && i < _args.length; i++) {
        _str = _str.replace('$' + (i+1), _args[i]);
      }
      return _str;
    },

    /**
     * @memberof Utils
     *
     * @description
     *
     * Test for a condition to be met, if not an exception is thrown.
     *
     * @param  {boolean} _condition Condition to assert
     * @param  {string} _msg Error message
     */
    assert: function(_condition, _msg /*, params */) {
      if(!_condition) {
        var params = Array.prototype.slice.call(arguments, 2);
        _msg = Utils.format(_msg, params);
        $log.error(_msg); // log error message
        throw new Error(_msg);
      }
    },

    /**
     * @memberof Utils
     *
     * @description
     *
     * Simple url joining, returns null if _head or _tail is null.
     *
     * @param  {string} _head Url prefix
     * @param  {string} _tail Url suffix
     * @return {string} Resulting url
     */
    joinUrl: function(_head, _tail) {
      if(!_head || !_tail) return null;
      return (_head+'').replace(/\/$/, '') + '/' + (_tail+'').replace(/^\//, '');
    },

    /**
     * @memberof Utils
     *
     * @description
     *
     * Cleans trailing slashes from an url
     *
     * @param  {string} _url Url to clean
     * @return {string} Resulting url
     */
    cleanUrl: function(_url) {
      return _url ? _url.replace(/\/$/, '') : _url;
    },

    /**
     * @memberof Utils
     *
     * @description
     *
     * Chains to filtering functions together
     *
     * @param  {function} _first original function
     * @param  {function} _fun   function to call on the original function result
     * @return {mixed} value returned by the last function call
     */
    chain: function(_first, _fun) {
      if(!_first) return _fun;
      return function(_value) {
        return _fun.call(this, _first.call(this, _value));
      };
    },

    /**
     * @memberof Utils
     *
     * @description
     *
     * Override a property value, making overriden function available as this.$super
     *
     * @param  {function} _super Original value
     * @param  {mixed} _fun New property value
     * @return {mixed} Value returned by new function
     */
    override: function(_super, _fun) {
      if(!_super || typeof _fun !== 'function') return _fun;

      return function() {
        var oldSuper = this.$super;
        try {
          this.$super = _super;
          return _fun.apply(this, arguments);
        } finally {
          this.$super = oldSuper;
        }
      };
    },

    /**
     * @memberof Utils
     *
     * @description
     *
     * Extend an object using `Utils.override` instead of just replacing the functions.
     *
     * @param  {object} _target Object to be extended
     * @param  {object} _other  Source object
     */
    extendOverriden: function(_target) {
      for(var i = 1; i < arguments.length; i++) {
        var other = arguments[i];
        for(var key in other) {
          if(other.hasOwnProperty(key)) {
            _target[key] = _target[key] && typeof _target[key] === 'function' ? Utils.override(_target[key], other[key]) : other[key];
          }
        }
      }

      return _target;
    },

    /**
     * @memberof Utils
     *
     * @description
     *
     * Generates a new array type, handles platform specifics (bag-O-hacks)
     *
     * @return {object} Independent array type.
     */
    buildArrayType: function(_forceIframe) {

      var arrayType;

      if(PROTO_SETTER && !_forceIframe) {

        // Use object prototype override technique
        //
        // Very nice array subclassing analysis: http://perfectionkills.com/how-ecmascript-5-still-does-not-allow-to-subclass-an-array/#why_subclass_an_array
        //

        var SubArray = function() {
          var arr = [ ];
          arr.push.apply(arr, arguments);
          PROTO_SETTER(arr, SubArray.prototype);
          return arr;
        };

        SubArray.prototype = [];
        SubArray.prototype.last = function() {
          return this[this.length - 1];
        };

        arrayType = SubArray;

      } else  {

        // Use iframe hijack technique for IE11<
        //
        // Based on the awesome blog post of Dean Edwards: http://dean.edwards.name/weblog/2006/11/hooray/
        //

        // create a hidden <iframe>.
        var iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        iframe.height = 0;
        iframe.width = 0;
        iframe.border = 0;

        document.body.appendChild(iframe);

        // write a script into the <iframe> and steal its Array object.
        window.frames[window.frames.length - 1].document.write('<script>parent.RestmodArray = Array;<\/script>');

        // take the array object and move it to local context.
        arrayType = window.RestmodArray;
        delete window.RestmodArray;

        // copy this context Array's extensions to new array type (could be a little slow...)
        for(var key in Array.prototype) {
          if(typeof Array.prototype[key] === 'function' && !arrayType.prototype[key]) {
            arrayType.prototype[key] = Array.prototype[key];
          }
        }

        // remove iframe from DOM.
        //
        // Even though MS says that removing iframe from DOM will release it's related structures (http://msdn.microsoft.com/en-us/library/ie/gg622929(v=vs.85).aspx),
        // actually keeping it referenced has proven to be enough to keep the structures alive. (that includes our array type)
        //
        document.body.removeChild(iframe);
        IFRAME_REF.push(iframe); // keep iframe reference!
      }

      return arrayType;
    }
  };

  return Utils;
}]);
})(angular);
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/angular-restmod/dist/angular-restmod-bundle.js","/resources/assets/vendor/angular-restmod/dist")

},{"_process":7,"buffer":3}],66:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/**
 * API Bound Models for AngularJS
 * @version v1.1.7 - 2015-01-06
 * @link https://github.com/angular-platanus/restmod
 * @author Ignacio Baixas <ignacio@platan.us>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a){"use strict";a.module("restmod").factory("AMSApi",["restmod","inflector",function(a,b){return a.mixin("DefaultPacker",{$config:{style:"AMS",primaryKey:"id",jsonMeta:"meta",jsonLinks:"links"},$extend:{Model:{decodeName:b.camelize,encodeName:function(a){return b.parameterize(a,"_")},encodeUrlName:b.parameterize}}})}])}(angular);
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/angular-restmod/dist/styles/ams.min.js","/resources/assets/vendor/angular-restmod/dist/styles")

},{"_process":7,"buffer":3}],67:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/**
 * Created by macintosh on 1/28/15.
 */

require('./angular.min.js');
module.exports = angular;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/angular/angular-index.js","/resources/assets/vendor/angular")

},{"./angular.min.js":68,"_process":7,"buffer":3}],68:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/*
 AngularJS v1.3.13
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(M,Y,t){'use strict';function S(b){return function(){var a=arguments[0],c;c="["+(b?b+":":"")+a+"] http://errors.angularjs.org/1.3.13/"+(b?b+"/":"")+a;for(a=1;a<arguments.length;a++){c=c+(1==a?"?":"&")+"p"+(a-1)+"=";var d=encodeURIComponent,e;e=arguments[a];e="function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?JSON.stringify(e):e;c+=d(e)}return Error(c)}}function Ta(b){if(null==b||Ua(b))return!1;var a=b.length;return b.nodeType===
oa&&a?!0:F(b)||H(b)||0===a||"number"===typeof a&&0<a&&a-1 in b}function s(b,a,c){var d,e;if(b)if(G(b))for(d in b)"prototype"==d||"length"==d||"name"==d||b.hasOwnProperty&&!b.hasOwnProperty(d)||a.call(c,b[d],d,b);else if(H(b)||Ta(b)){var f="object"!==typeof b;d=0;for(e=b.length;d<e;d++)(f||d in b)&&a.call(c,b[d],d,b)}else if(b.forEach&&b.forEach!==s)b.forEach(a,c,b);else for(d in b)b.hasOwnProperty(d)&&a.call(c,b[d],d,b);return b}function Ed(b,a,c){for(var d=Object.keys(b).sort(),e=0;e<d.length;e++)a.call(c,
b[d[e]],d[e]);return d}function lc(b){return function(a,c){b(c,a)}}function Fd(){return++ob}function mc(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function x(b){for(var a=b.$$hashKey,c=1,d=arguments.length;c<d;c++){var e=arguments[c];if(e)for(var f=Object.keys(e),g=0,h=f.length;g<h;g++){var l=f[g];b[l]=e[l]}}mc(b,a);return b}function ba(b){return parseInt(b,10)}function Pb(b,a){return x(Object.create(b),a)}function z(){}function pa(b){return b}function ea(b){return function(){return b}}function B(b){return"undefined"===
typeof b}function y(b){return"undefined"!==typeof b}function I(b){return null!==b&&"object"===typeof b}function F(b){return"string"===typeof b}function V(b){return"number"===typeof b}function qa(b){return"[object Date]"===Da.call(b)}function G(b){return"function"===typeof b}function pb(b){return"[object RegExp]"===Da.call(b)}function Ua(b){return b&&b.window===b}function Va(b){return b&&b.$evalAsync&&b.$watch}function Wa(b){return"boolean"===typeof b}function nc(b){return!(!b||!(b.nodeName||b.prop&&
b.attr&&b.find))}function Gd(b){var a={};b=b.split(",");var c;for(c=0;c<b.length;c++)a[b[c]]=!0;return a}function ua(b){return Q(b.nodeName||b[0]&&b[0].nodeName)}function Xa(b,a){var c=b.indexOf(a);0<=c&&b.splice(c,1);return a}function Ea(b,a,c,d){if(Ua(b)||Va(b))throw Ka("cpws");if(a){if(b===a)throw Ka("cpi");c=c||[];d=d||[];if(I(b)){var e=c.indexOf(b);if(-1!==e)return d[e];c.push(b);d.push(a)}if(H(b))for(var f=a.length=0;f<b.length;f++)e=Ea(b[f],null,c,d),I(b[f])&&(c.push(b[f]),d.push(e)),a.push(e);
else{var g=a.$$hashKey;H(a)?a.length=0:s(a,function(b,c){delete a[c]});for(f in b)b.hasOwnProperty(f)&&(e=Ea(b[f],null,c,d),I(b[f])&&(c.push(b[f]),d.push(e)),a[f]=e);mc(a,g)}}else if(a=b)H(b)?a=Ea(b,[],c,d):qa(b)?a=new Date(b.getTime()):pb(b)?(a=new RegExp(b.source,b.toString().match(/[^\/]*$/)[0]),a.lastIndex=b.lastIndex):I(b)&&(e=Object.create(Object.getPrototypeOf(b)),a=Ea(b,e,c,d));return a}function ra(b,a){if(H(b)){a=a||[];for(var c=0,d=b.length;c<d;c++)a[c]=b[c]}else if(I(b))for(c in a=a||{},
b)if("$"!==c.charAt(0)||"$"!==c.charAt(1))a[c]=b[c];return a||b}function ga(b,a){if(b===a)return!0;if(null===b||null===a)return!1;if(b!==b&&a!==a)return!0;var c=typeof b,d;if(c==typeof a&&"object"==c)if(H(b)){if(!H(a))return!1;if((c=b.length)==a.length){for(d=0;d<c;d++)if(!ga(b[d],a[d]))return!1;return!0}}else{if(qa(b))return qa(a)?ga(b.getTime(),a.getTime()):!1;if(pb(b)&&pb(a))return b.toString()==a.toString();if(Va(b)||Va(a)||Ua(b)||Ua(a)||H(a))return!1;c={};for(d in b)if("$"!==d.charAt(0)&&!G(b[d])){if(!ga(b[d],
a[d]))return!1;c[d]=!0}for(d in a)if(!c.hasOwnProperty(d)&&"$"!==d.charAt(0)&&a[d]!==t&&!G(a[d]))return!1;return!0}return!1}function Ya(b,a,c){return b.concat(Za.call(a,c))}function oc(b,a){var c=2<arguments.length?Za.call(arguments,2):[];return!G(a)||a instanceof RegExp?a:c.length?function(){return arguments.length?a.apply(b,Ya(c,arguments,0)):a.apply(b,c)}:function(){return arguments.length?a.apply(b,arguments):a.call(b)}}function Hd(b,a){var c=a;"string"===typeof b&&"$"===b.charAt(0)&&"$"===b.charAt(1)?
c=t:Ua(a)?c="$WINDOW":a&&Y===a?c="$DOCUMENT":Va(a)&&(c="$SCOPE");return c}function $a(b,a){if("undefined"===typeof b)return t;V(a)||(a=a?2:null);return JSON.stringify(b,Hd,a)}function pc(b){return F(b)?JSON.parse(b):b}function va(b){b=D(b).clone();try{b.empty()}catch(a){}var c=D("<div>").append(b).html();try{return b[0].nodeType===qb?Q(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Q(b)})}catch(d){return Q(c)}}function qc(b){try{return decodeURIComponent(b)}catch(a){}}function rc(b){var a=
{},c,d;s((b||"").split("&"),function(b){b&&(c=b.replace(/\+/g,"%20").split("="),d=qc(c[0]),y(d)&&(b=y(c[1])?qc(c[1]):!0,sc.call(a,d)?H(a[d])?a[d].push(b):a[d]=[a[d],b]:a[d]=b))});return a}function Qb(b){var a=[];s(b,function(b,d){H(b)?s(b,function(b){a.push(Fa(d,!0)+(!0===b?"":"="+Fa(b,!0)))}):a.push(Fa(d,!0)+(!0===b?"":"="+Fa(b,!0)))});return a.length?a.join("&"):""}function rb(b){return Fa(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Fa(b,a){return encodeURIComponent(b).replace(/%40/gi,
"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,a?"%20":"+")}function Id(b,a){var c,d,e=sb.length;b=D(b);for(d=0;d<e;++d)if(c=sb[d]+a,F(c=b.attr(c)))return c;return null}function Jd(b,a){var c,d,e={};s(sb,function(a){a+="app";!c&&b.hasAttribute&&b.hasAttribute(a)&&(c=b,d=b.getAttribute(a))});s(sb,function(a){a+="app";var e;!c&&(e=b.querySelector("["+a.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(a))});c&&(e.strictDi=null!==Id(c,"strict-di"),
a(c,d?[d]:[],e))}function tc(b,a,c){I(c)||(c={});c=x({strictDi:!1},c);var d=function(){b=D(b);if(b.injector()){var d=b[0]===Y?"document":va(b);throw Ka("btstrpd",d.replace(/</,"&lt;").replace(/>/,"&gt;"));}a=a||[];a.unshift(["$provide",function(a){a.value("$rootElement",b)}]);c.debugInfoEnabled&&a.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]);a.unshift("ng");d=ab(a,c.strictDi);d.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",
d);c(b)(a)})}]);return d},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;M&&e.test(M.name)&&(c.debugInfoEnabled=!0,M.name=M.name.replace(e,""));if(M&&!f.test(M.name))return d();M.name=M.name.replace(f,"");ca.resumeBootstrap=function(b){s(b,function(b){a.push(b)});return d()};G(ca.resumeDeferredBootstrap)&&ca.resumeDeferredBootstrap()}function Kd(){M.name="NG_ENABLE_DEBUG_INFO!"+M.name;M.location.reload()}function Ld(b){b=ca.element(b).injector();if(!b)throw Ka("test");return b.get("$$testability")}
function uc(b,a){a=a||"_";return b.replace(Md,function(b,d){return(d?a:"")+b.toLowerCase()})}function Nd(){var b;vc||((sa=M.jQuery)&&sa.fn.on?(D=sa,x(sa.fn,{scope:La.scope,isolateScope:La.isolateScope,controller:La.controller,injector:La.injector,inheritedData:La.inheritedData}),b=sa.cleanData,sa.cleanData=function(a){var c;if(Rb)Rb=!1;else for(var d=0,e;null!=(e=a[d]);d++)(c=sa._data(e,"events"))&&c.$destroy&&sa(e).triggerHandler("$destroy");b(a)}):D=R,ca.element=D,vc=!0)}function Sb(b,a,c){if(!b)throw Ka("areq",
a||"?",c||"required");return b}function tb(b,a,c){c&&H(b)&&(b=b[b.length-1]);Sb(G(b),a,"not a function, got "+(b&&"object"===typeof b?b.constructor.name||"Object":typeof b));return b}function Ma(b,a){if("hasOwnProperty"===b)throw Ka("badname",a);}function wc(b,a,c){if(!a)return b;a=a.split(".");for(var d,e=b,f=a.length,g=0;g<f;g++)d=a[g],b&&(b=(e=b)[d]);return!c&&G(b)?oc(e,b):b}function ub(b){var a=b[0];b=b[b.length-1];var c=[a];do{a=a.nextSibling;if(!a)break;c.push(a)}while(a!==b);return D(c)}function ha(){return Object.create(null)}
function Od(b){function a(a,b,c){return a[b]||(a[b]=c())}var c=S("$injector"),d=S("ng");b=a(b,"angular",Object);b.$$minErr=b.$$minErr||S;return a(b,"module",function(){var b={};return function(f,g,h){if("hasOwnProperty"===f)throw d("badname","module");g&&b.hasOwnProperty(f)&&(b[f]=null);return a(b,f,function(){function a(c,d,e,f){f||(f=b);return function(){f[e||"push"]([c,d,arguments]);return u}}if(!g)throw c("nomod",f);var b=[],d=[],e=[],q=a("$injector","invoke","push",d),u={_invokeQueue:b,_configBlocks:d,
_runBlocks:e,requires:g,name:f,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:q,run:function(a){e.push(a);return this}};h&&q(h);return u})}})}function Pd(b){x(b,{bootstrap:tc,copy:Ea,extend:x,equals:ga,
element:D,forEach:s,injector:ab,noop:z,bind:oc,toJson:$a,fromJson:pc,identity:pa,isUndefined:B,isDefined:y,isString:F,isFunction:G,isObject:I,isNumber:V,isElement:nc,isArray:H,version:Qd,isDate:qa,lowercase:Q,uppercase:vb,callbacks:{counter:0},getTestability:Ld,$$minErr:S,$$csp:bb,reloadWithDebugInfo:Kd});cb=Od(M);try{cb("ngLocale")}catch(a){cb("ngLocale",[]).provider("$locale",Rd)}cb("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Sd});a.provider("$compile",xc).directive({a:Td,
input:yc,textarea:yc,form:Ud,script:Vd,select:Wd,style:Xd,option:Yd,ngBind:Zd,ngBindHtml:$d,ngBindTemplate:ae,ngClass:be,ngClassEven:ce,ngClassOdd:de,ngCloak:ee,ngController:fe,ngForm:ge,ngHide:he,ngIf:ie,ngInclude:je,ngInit:ke,ngNonBindable:le,ngPluralize:me,ngRepeat:ne,ngShow:oe,ngStyle:pe,ngSwitch:qe,ngSwitchWhen:re,ngSwitchDefault:se,ngOptions:te,ngTransclude:ue,ngModel:ve,ngList:we,ngChange:xe,pattern:zc,ngPattern:zc,required:Ac,ngRequired:Ac,minlength:Bc,ngMinlength:Bc,maxlength:Cc,ngMaxlength:Cc,
ngValue:ye,ngModelOptions:ze}).directive({ngInclude:Ae}).directive(wb).directive(Dc);a.provider({$anchorScroll:Be,$animate:Ce,$browser:De,$cacheFactory:Ee,$controller:Fe,$document:Ge,$exceptionHandler:He,$filter:Ec,$interpolate:Ie,$interval:Je,$http:Ke,$httpBackend:Le,$location:Me,$log:Ne,$parse:Oe,$rootScope:Pe,$q:Qe,$$q:Re,$sce:Se,$sceDelegate:Te,$sniffer:Ue,$templateCache:Ve,$templateRequest:We,$$testability:Xe,$timeout:Ye,$window:Ze,$$rAF:$e,$$asyncCallback:af,$$jqLite:bf})}])}function db(b){return b.replace(cf,
function(a,b,d,e){return e?d.toUpperCase():d}).replace(df,"Moz$1")}function Fc(b){b=b.nodeType;return b===oa||!b||9===b}function Gc(b,a){var c,d,e=a.createDocumentFragment(),f=[];if(Tb.test(b)){c=c||e.appendChild(a.createElement("div"));d=(ef.exec(b)||["",""])[1].toLowerCase();d=ia[d]||ia._default;c.innerHTML=d[1]+b.replace(ff,"<$1></$2>")+d[2];for(d=d[0];d--;)c=c.lastChild;f=Ya(f,c.childNodes);c=e.firstChild;c.textContent=""}else f.push(a.createTextNode(b));e.textContent="";e.innerHTML="";s(f,function(a){e.appendChild(a)});
return e}function R(b){if(b instanceof R)return b;var a;F(b)&&(b=U(b),a=!0);if(!(this instanceof R)){if(a&&"<"!=b.charAt(0))throw Ub("nosel");return new R(b)}if(a){a=Y;var c;b=(c=gf.exec(b))?[a.createElement(c[1])]:(c=Gc(b,a))?c.childNodes:[]}Hc(this,b)}function Vb(b){return b.cloneNode(!0)}function xb(b,a){a||yb(b);if(b.querySelectorAll)for(var c=b.querySelectorAll("*"),d=0,e=c.length;d<e;d++)yb(c[d])}function Ic(b,a,c,d){if(y(d))throw Ub("offargs");var e=(d=zb(b))&&d.events,f=d&&d.handle;if(f)if(a)s(a.split(" "),
function(a){if(y(c)){var d=e[a];Xa(d||[],c);if(d&&0<d.length)return}b.removeEventListener(a,f,!1);delete e[a]});else for(a in e)"$destroy"!==a&&b.removeEventListener(a,f,!1),delete e[a]}function yb(b,a){var c=b.ng339,d=c&&Ab[c];d&&(a?delete d.data[a]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),Ic(b)),delete Ab[c],b.ng339=t))}function zb(b,a){var c=b.ng339,c=c&&Ab[c];a&&!c&&(b.ng339=c=++hf,c=Ab[c]={events:{},data:{},handle:t});return c}function Wb(b,a,c){if(Fc(b)){var d=y(c),e=!d&&a&&!I(a),
f=!a;b=(b=zb(b,!e))&&b.data;if(d)b[a]=c;else{if(f)return b;if(e)return b&&b[a];x(b,a)}}}function Bb(b,a){return b.getAttribute?-1<(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+a+" "):!1}function Cb(b,a){a&&b.setAttribute&&s(a.split(" "),function(a){b.setAttribute("class",U((" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+U(a)+" "," ")))})}function Db(b,a){if(a&&b.setAttribute){var c=(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");
s(a.split(" "),function(a){a=U(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});b.setAttribute("class",U(c))}}function Hc(b,a){if(a)if(a.nodeType)b[b.length++]=a;else{var c=a.length;if("number"===typeof c&&a.window!==a){if(c)for(var d=0;d<c;d++)b[b.length++]=a[d]}else b[b.length++]=a}}function Jc(b,a){return Eb(b,"$"+(a||"ngController")+"Controller")}function Eb(b,a,c){9==b.nodeType&&(b=b.documentElement);for(a=H(a)?a:[a];b;){for(var d=0,e=a.length;d<e;d++)if((c=D.data(b,a[d]))!==t)return c;b=b.parentNode||
11===b.nodeType&&b.host}}function Kc(b){for(xb(b,!0);b.firstChild;)b.removeChild(b.firstChild)}function Lc(b,a){a||xb(b);var c=b.parentNode;c&&c.removeChild(b)}function jf(b,a){a=a||M;if("complete"===a.document.readyState)a.setTimeout(b);else D(a).on("load",b)}function Mc(b,a){var c=Fb[a.toLowerCase()];return c&&Nc[ua(b)]&&c}function kf(b,a){var c=b.nodeName;return("INPUT"===c||"TEXTAREA"===c)&&Oc[a]}function lf(b,a){var c=function(c,e){c.isDefaultPrevented=function(){return c.defaultPrevented};var f=
a[e||c.type],g=f?f.length:0;if(g){if(B(c.immediatePropagationStopped)){var h=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();h&&h.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};1<g&&(f=ra(f));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||f[l].call(b,c)}};c.elem=b;return c}function bf(){this.$get=function(){return x(R,{hasClass:function(b,a){b.attr&&(b=b[0]);
return Bb(b,a)},addClass:function(b,a){b.attr&&(b=b[0]);return Db(b,a)},removeClass:function(b,a){b.attr&&(b=b[0]);return Cb(b,a)}})}}function Na(b,a){var c=b&&b.$$hashKey;if(c)return"function"===typeof c&&(c=b.$$hashKey()),c;c=typeof b;return c="function"==c||"object"==c&&null!==b?b.$$hashKey=c+":"+(a||Fd)():c+":"+b}function eb(b,a){if(a){var c=0;this.nextUid=function(){return++c}}s(b,this.put,this)}function mf(b){return(b=b.toString().replace(Pc,"").match(Qc))?"function("+(b[1]||"").replace(/[\s\r\n]+/,
" ")+")":"fn"}function ab(b,a){function c(a){return function(b,c){if(I(b))s(b,lc(a));else return a(b,c)}}function d(a,b){Ma(a,"service");if(G(b)||H(b))b=q.instantiate(b);if(!b.$get)throw Ga("pget",a);return n[a+"Provider"]=b}function e(a,b){return function(){var c=r.invoke(b,this);if(B(c))throw Ga("undef",a);return c}}function f(a,b,c){return d(a,{$get:!1!==c?e(a,b):b})}function g(a){var b=[],c;s(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=q.get(e[0]);f[e[1]].apply(f,
e[2])}}if(!m.get(a)){m.put(a,!0);try{F(a)?(c=cb(a),b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):G(a)?b.push(q.invoke(a)):H(a)?b.push(q.invoke(a)):tb(a,"module")}catch(e){throw H(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ga("modulerr",a,e.stack||e.message||e);}}});return b}function h(b,c){function d(a,e){if(b.hasOwnProperty(a)){if(b[a]===l)throw Ga("cdep",a+" <- "+k.join(" <- "));return b[a]}try{return k.unshift(a),
b[a]=l,b[a]=c(a,e)}catch(f){throw b[a]===l&&delete b[a],f;}finally{k.shift()}}function e(b,c,f,g){"string"===typeof f&&(g=f,f=null);var h=[],k=ab.$$annotate(b,a,g),l,q,n;q=0;for(l=k.length;q<l;q++){n=k[q];if("string"!==typeof n)throw Ga("itkn",n);h.push(f&&f.hasOwnProperty(n)?f[n]:d(n,g))}H(b)&&(b=b[l]);return b.apply(c,h)}return{invoke:e,instantiate:function(a,b,c){var d=Object.create((H(a)?a[a.length-1]:a).prototype||null);a=e(a,d,b,c);return I(a)||G(a)?a:d},get:d,annotate:ab.$$annotate,has:function(a){return n.hasOwnProperty(a+
"Provider")||b.hasOwnProperty(a)}}}a=!0===a;var l={},k=[],m=new eb([],!0),n={$provide:{provider:c(d),factory:c(f),service:c(function(a,b){return f(a,["$injector",function(a){return a.instantiate(b)}])}),value:c(function(a,b){return f(a,ea(b),!1)}),constant:c(function(a,b){Ma(a,"constant");n[a]=b;u[a]=b}),decorator:function(a,b){var c=q.get(a+"Provider"),d=c.$get;c.$get=function(){var a=r.invoke(d,c);return r.invoke(b,null,{$delegate:a})}}}},q=n.$injector=h(n,function(a,b){ca.isString(b)&&k.push(b);
throw Ga("unpr",k.join(" <- "));}),u={},r=u.$injector=h(u,function(a,b){var c=q.get(a+"Provider",b);return r.invoke(c.$get,c,t,a)});s(g(b),function(a){r.invoke(a||z)});return r}function Be(){var b=!0;this.disableAutoScrolling=function(){b=!1};this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===ua(a))return b=a,!0});return b}function f(b){if(b){b.scrollIntoView();var c;c=g.yOffset;G(c)?c=c():nc(c)?(c=c[0],c="fixed"!==
a.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):V(c)||(c=0);c&&(b=b.getBoundingClientRect().top,a.scrollBy(0,b-c))}else a.scrollTo(0,0)}function g(){var a=c.hash(),b;a?(b=h.getElementById(a))?f(b):(b=e(h.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null)}var h=a.document;b&&d.$watch(function(){return c.hash()},function(a,b){a===b&&""===a||jf(function(){d.$evalAsync(g)})});return g}]}function af(){this.$get=["$$rAF","$timeout",function(b,a){return b.supported?function(a){return b(a)}:
function(b){return a(b,0,!1)}}]}function nf(b,a,c,d){function e(a){try{a.apply(null,Za.call(arguments,1))}finally{if(v--,0===v)for(;w.length;)try{w.pop()()}catch(b){c.error(b)}}}function f(a,b){(function N(){s(L,function(a){a()});C=b(N,a)})()}function g(){h();l()}function h(){A=b.history.state;A=B(A)?null:A;ga(A,J)&&(A=J);J=A}function l(){if(E!==m.url()||O!==A)E=m.url(),O=A,s(W,function(a){a(m.url(),A)})}function k(a){try{return decodeURIComponent(a)}catch(b){return a}}var m=this,n=a[0],q=b.location,
u=b.history,r=b.setTimeout,P=b.clearTimeout,p={};m.isMock=!1;var v=0,w=[];m.$$completeOutstandingRequest=e;m.$$incOutstandingRequestCount=function(){v++};m.notifyWhenNoOutstandingRequests=function(a){s(L,function(a){a()});0===v?a():w.push(a)};var L=[],C;m.addPollFn=function(a){B(C)&&f(100,r);L.push(a);return a};var A,O,E=q.href,T=a.find("base"),X=null;h();O=A;m.url=function(a,c,e){B(e)&&(e=null);q!==b.location&&(q=b.location);u!==b.history&&(u=b.history);if(a){var f=O===e;if(E===a&&(!d.history||f))return m;
var g=E&&Ha(E)===Ha(a);E=a;O=e;!d.history||g&&f?(g||(X=a),c?q.replace(a):g?(c=q,e=a.indexOf("#"),a=-1===e?"":a.substr(e+1),c.hash=a):q.href=a):(u[c?"replaceState":"pushState"](e,"",a),h(),O=A);return m}return X||q.href.replace(/%27/g,"'")};m.state=function(){return A};var W=[],wa=!1,J=null;m.onUrlChange=function(a){if(!wa){if(d.history)D(b).on("popstate",g);D(b).on("hashchange",g);wa=!0}W.push(a);return a};m.$$checkUrlChange=l;m.baseHref=function(){var a=T.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,
""):""};var fa={},y="",da=m.baseHref();m.cookies=function(a,b){var d,e,f,g;if(a)b===t?n.cookie=encodeURIComponent(a)+"=;path="+da+";expires=Thu, 01 Jan 1970 00:00:00 GMT":F(b)&&(d=(n.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+";path="+da).length+1,4096<d&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!"));else{if(n.cookie!==y)for(y=n.cookie,d=y.split("; "),fa={},f=0;f<d.length;f++)e=d[f],g=e.indexOf("="),0<g&&(a=k(e.substring(0,g)),
fa[a]===t&&(fa[a]=k(e.substring(g+1))));return fa}};m.defer=function(a,b){var c;v++;c=r(function(){delete p[c];e(a)},b||0);p[c]=!0;return c};m.defer.cancel=function(a){return p[a]?(delete p[a],P(a),e(z),!0):!1}}function De(){this.$get=["$window","$log","$sniffer","$document",function(b,a,c,d){return new nf(b,d,a,c)}]}function Ee(){this.$get=function(){function b(b,d){function e(a){a!=n&&(q?q==a&&(q=a.n):q=a,f(a.n,a.p),f(a,n),n=a,n.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(b in a)throw S("$cacheFactory")("iid",
b);var g=0,h=x({},d,{id:b}),l={},k=d&&d.capacity||Number.MAX_VALUE,m={},n=null,q=null;return a[b]={put:function(a,b){if(k<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});e(c)}if(!B(b))return a in l||g++,l[a]=b,g>k&&this.remove(q.key),b},get:function(a){if(k<Number.MAX_VALUE){var b=m[a];if(!b)return;e(b)}return l[a]},remove:function(a){if(k<Number.MAX_VALUE){var b=m[a];if(!b)return;b==n&&(n=b.p);b==q&&(q=b.n);f(b.n,b.p);delete m[a]}delete l[a];g--},removeAll:function(){l={};g=0;m={};n=q=null},destroy:function(){m=
h=l=null;delete a[b]},info:function(){return x({},h,{size:g})}}}var a={};b.info=function(){var b={};s(a,function(a,e){b[e]=a.info()});return b};b.get=function(b){return a[b]};return b}}function Ve(){this.$get=["$cacheFactory",function(b){return b("templates")}]}function xc(b,a){function c(a,b){var c=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,d={};s(a,function(a,e){var f=a.match(c);if(!f)throw ja("iscp",b,e,a);d[e]={mode:f[1][0],collection:"*"===f[2],optional:"?"===f[3],attrName:f[4]||e}});return d}var d=
{},e=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,f=/(([\w\-]+)(?:\:([^;]+))?;?)/,g=Gd("ngSrc,ngSrcset,src,srcset"),h=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,l=/^(on[a-z]+|formaction)$/;this.directive=function n(a,e){Ma(a,"directive");F(a)?(Sb(e,"directiveFactory"),d.hasOwnProperty(a)||(d[a]=[],b.factory(a+"Directive",["$injector","$exceptionHandler",function(b,e){var f=[];s(d[a],function(d,g){try{var h=b.invoke(d);G(h)?h={compile:ea(h)}:!h.compile&&h.link&&(h.compile=ea(h.link));h.priority=h.priority||0;h.index=
g;h.name=h.name||a;h.require=h.require||h.controller&&h.name;h.restrict=h.restrict||"EA";I(h.scope)&&(h.$$isolateBindings=c(h.scope,h.name));f.push(h)}catch(l){e(l)}});return f}])),d[a].push(e)):s(a,lc(n));return this};this.aHrefSanitizationWhitelist=function(b){return y(b)?(a.aHrefSanitizationWhitelist(b),this):a.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a.imgSrcSanitizationWhitelist(b),this):a.imgSrcSanitizationWhitelist()};var k=!0;this.debugInfoEnabled=
function(a){return y(a)?(k=a,this):k};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,b,c,r,P,p,v,w,L,C,A){function O(a,b){try{a.addClass(b)}catch(c){}}function E(a,b,c,d,e){a instanceof D||(a=D(a));s(a,function(b,c){b.nodeType==qb&&b.nodeValue.match(/\S+/)&&(a[c]=D(b).wrap("<span></span>").parent()[0])});var f=T(a,b,a,c,d,e);E.$$addScopeClass(a);var g=null;return function(b,c,
d){Sb(b,"scope");d=d||{};var e=d.parentBoundTranscludeFn,h=d.transcludeControllers;d=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude);g||(g=(d=d&&d[0])?"foreignobject"!==ua(d)&&d.toString().match(/SVG/)?"svg":"html":"html");d="html"!==g?D(Xb(g,D("<div>").append(a).html())):c?La.clone.call(a):a;if(h)for(var l in h)d.data("$"+l+"Controller",h[l].instance);E.$$addScopeInfo(d,b);c&&c(d,b);f&&f(b,d,d,e);return d}}function T(a,b,c,d,e,f){function g(a,c,d,e){var f,l,k,q,n,p,w;if(r)for(w=
Array(c.length),q=0;q<h.length;q+=3)f=h[q],w[f]=c[f];else w=c;q=0;for(n=h.length;q<n;)l=w[h[q++]],c=h[q++],f=h[q++],c?(c.scope?(k=a.$new(),E.$$addScopeInfo(D(l),k)):k=a,p=c.transcludeOnThisElement?X(a,c.transclude,e,c.elementTranscludeOnThisElement):!c.templateOnThisElement&&e?e:!e&&b?X(a,b):null,c(f,k,l,d,p)):f&&f(a,l.childNodes,t,e)}for(var h=[],l,k,q,n,r,p=0;p<a.length;p++){l=new Yb;k=W(a[p],[],l,0===p?d:t,e);(f=k.length?fa(k,a[p],l,b,c,null,[],[],f):null)&&f.scope&&E.$$addScopeClass(l.$$element);
l=f&&f.terminal||!(q=a[p].childNodes)||!q.length?null:T(q,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||l)h.push(p,f,l),n=!0,r=r||f;f=null}return n?g:null}function X(a,b,c,d){return function(d,e,f,g,h){d||(d=a.$new(!1,h),d.$$transcluded=!0);return b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})}}function W(a,b,c,d,g){var h=c.$attr,l;switch(a.nodeType){case oa:da(b,ya(ua(a)),"E",d,g);for(var k,q,n,r=a.attributes,p=0,w=r&&r.length;p<
w;p++){var P=!1,L=!1;k=r[p];l=k.name;q=U(k.value);k=ya(l);if(n=gb.test(k))l=l.replace(Sc,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()});var u=k.replace(/(Start|End)$/,"");B(u)&&k===u+"Start"&&(P=l,L=l.substr(0,l.length-5)+"end",l=l.substr(0,l.length-6));k=ya(l.toLowerCase());h[k]=l;if(n||!c.hasOwnProperty(k))c[k]=q,Mc(a,k)&&(c[k]=!0);Pa(a,b,q,k,n);da(b,k,"A",d,g,P,L)}a=a.className;I(a)&&(a=a.animVal);if(F(a)&&""!==a)for(;l=f.exec(a);)k=ya(l[2]),da(b,k,"C",d,g)&&(c[k]=U(l[3])),
a=a.substr(l.index+l[0].length);break;case qb:M(b,a.nodeValue);break;case 8:try{if(l=e.exec(a.nodeValue))k=ya(l[1]),da(b,k,"M",d,g)&&(c[k]=U(l[2]))}catch(v){}}b.sort(N);return b}function wa(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ja("uterdir",b,c);a.nodeType==oa&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return D(d)}function J(a,b,c){return function(d,e,f,g,h){e=wa(e[0],b,c);return a(d,e,f,g,h)}}function fa(a,
d,e,f,g,l,k,n,r){function w(a,b,c,d){if(a){c&&(a=J(a,c,d));a.require=K.require;a.directiveName=x;if(T===K||K.$$isolateScope)a=Z(a,{isolateScope:!0});k.push(a)}if(b){c&&(b=J(b,c,d));b.require=K.require;b.directiveName=x;if(T===K||K.$$isolateScope)b=Z(b,{isolateScope:!0});n.push(b)}}function L(a,b,c,d){var e,f="data",g=!1,l=c,k;if(F(b)){k=b.match(h);b=b.substring(k[0].length);k[3]&&(k[1]?k[3]=null:k[1]=k[3]);"^"===k[1]?f="inheritedData":"^^"===k[1]&&(f="inheritedData",l=c.parent());"?"===k[2]&&(g=!0);
e=null;d&&"data"===f&&(e=d[b])&&(e=e.instance);e=e||l[f]("$"+b+"Controller");if(!e&&!g)throw ja("ctreq",b,a);return e||null}H(b)&&(e=[],s(b,function(b){e.push(L(a,b,c,d))}));return e}function v(a,c,f,g,h){function l(a,b,c){var d;Va(a)||(c=b,b=a,a=t);z&&(d=O);c||(c=z?W.parent():W);return h(a,b,d,c,wa)}var r,w,u,A,O,fb,W,J;d===f?(J=e,W=e.$$element):(W=D(f),J=new Yb(W,e));T&&(A=c.$new(!0));h&&(fb=l,fb.$$boundTransclude=h);C&&(X={},O={},s(C,function(a){var b={$scope:a===T||a.$$isolateScope?A:c,$element:W,
$attrs:J,$transclude:fb};u=a.controller;"@"==u&&(u=J[a.name]);b=p(u,b,!0,a.controllerAs);O[a.name]=b;z||W.data("$"+a.name+"Controller",b.instance);X[a.name]=b}));if(T){E.$$addScopeInfo(W,A,!0,!(ka&&(ka===T||ka===T.$$originalDirective)));E.$$addScopeClass(W,!0);g=X&&X[T.name];var xa=A;g&&g.identifier&&!0===T.bindToController&&(xa=g.instance);s(A.$$isolateBindings=T.$$isolateBindings,function(a,d){var e=a.attrName,f=a.optional,g,h,l,k;switch(a.mode){case "@":J.$observe(e,function(a){xa[d]=a});J.$$observers[e].$$scope=
c;J[e]&&(xa[d]=b(J[e])(c));break;case "=":if(f&&!J[e])break;h=P(J[e]);k=h.literal?ga:function(a,b){return a===b||a!==a&&b!==b};l=h.assign||function(){g=xa[d]=h(c);throw ja("nonassign",J[e],T.name);};g=xa[d]=h(c);f=function(a){k(a,xa[d])||(k(a,g)?l(c,a=xa[d]):xa[d]=a);return g=a};f.$stateful=!0;f=a.collection?c.$watchCollection(J[e],f):c.$watch(P(J[e],f),null,h.literal);A.$on("$destroy",f);break;case "&":h=P(J[e]),xa[d]=function(a){return h(c,a)}}})}X&&(s(X,function(a){a()}),X=null);g=0;for(r=k.length;g<
r;g++)w=k[g],$(w,w.isolateScope?A:c,W,J,w.require&&L(w.directiveName,w.require,W,O),fb);var wa=c;T&&(T.template||null===T.templateUrl)&&(wa=A);a&&a(wa,f.childNodes,t,h);for(g=n.length-1;0<=g;g--)w=n[g],$(w,w.isolateScope?A:c,W,J,w.require&&L(w.directiveName,w.require,W,O),fb)}r=r||{};for(var A=-Number.MAX_VALUE,O,C=r.controllerDirectives,X,T=r.newIsolateScopeDirective,ka=r.templateDirective,fa=r.nonTlbTranscludeDirective,da=!1,B=!1,z=r.hasElementTranscludeDirective,aa=e.$$element=D(d),K,x,N,Aa=f,
Q,M=0,R=a.length;M<R;M++){K=a[M];var Pa=K.$$start,gb=K.$$end;Pa&&(aa=wa(d,Pa,gb));N=t;if(A>K.priority)break;if(N=K.scope)K.templateUrl||(I(N)?(Oa("new/isolated scope",T||O,K,aa),T=K):Oa("new/isolated scope",T,K,aa)),O=O||K;x=K.name;!K.templateUrl&&K.controller&&(N=K.controller,C=C||{},Oa("'"+x+"' controller",C[x],K,aa),C[x]=K);if(N=K.transclude)da=!0,K.$$tlb||(Oa("transclusion",fa,K,aa),fa=K),"element"==N?(z=!0,A=K.priority,N=aa,aa=e.$$element=D(Y.createComment(" "+x+": "+e[x]+" ")),d=aa[0],V(g,Za.call(N,
0),d),Aa=E(N,f,A,l&&l.name,{nonTlbTranscludeDirective:fa})):(N=D(Vb(d)).contents(),aa.empty(),Aa=E(N,f));if(K.template)if(B=!0,Oa("template",ka,K,aa),ka=K,N=G(K.template)?K.template(aa,e):K.template,N=Tc(N),K.replace){l=K;N=Tb.test(N)?Uc(Xb(K.templateNamespace,U(N))):[];d=N[0];if(1!=N.length||d.nodeType!==oa)throw ja("tplrt",x,"");V(g,aa,d);R={$attr:{}};N=W(d,[],R);var ba=a.splice(M+1,a.length-(M+1));T&&y(N);a=a.concat(N).concat(ba);Rc(e,R);R=a.length}else aa.html(N);if(K.templateUrl)B=!0,Oa("template",
ka,K,aa),ka=K,K.replace&&(l=K),v=S(a.splice(M,a.length-M),aa,e,g,da&&Aa,k,n,{controllerDirectives:C,newIsolateScopeDirective:T,templateDirective:ka,nonTlbTranscludeDirective:fa}),R=a.length;else if(K.compile)try{Q=K.compile(aa,e,Aa),G(Q)?w(null,Q,Pa,gb):Q&&w(Q.pre,Q.post,Pa,gb)}catch(of){c(of,va(aa))}K.terminal&&(v.terminal=!0,A=Math.max(A,K.priority))}v.scope=O&&!0===O.scope;v.transcludeOnThisElement=da;v.elementTranscludeOnThisElement=z;v.templateOnThisElement=B;v.transclude=Aa;r.hasElementTranscludeDirective=
z;return v}function y(a){for(var b=0,c=a.length;b<c;b++)a[b]=Pb(a[b],{$$isolateScope:!0})}function da(b,e,f,g,h,l,k){if(e===h)return null;h=null;if(d.hasOwnProperty(e)){var q;e=a.get(e+"Directive");for(var r=0,p=e.length;r<p;r++)try{q=e[r],(g===t||g>q.priority)&&-1!=q.restrict.indexOf(f)&&(l&&(q=Pb(q,{$$start:l,$$end:k})),b.push(q),h=q)}catch(w){c(w)}}return h}function B(b){if(d.hasOwnProperty(b))for(var c=a.get(b+"Directive"),e=0,f=c.length;e<f;e++)if(b=c[e],b.multiElement)return!0;return!1}function Rc(a,
b){var c=b.$attr,d=a.$attr,e=a.$$element;s(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});s(b,function(b,f){"class"==f?(O(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function S(a,b,c,d,e,f,g,h){var l=[],k,q,n=b[0],p=a.shift(),w=Pb(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),
P=G(p.templateUrl)?p.templateUrl(b,c):p.templateUrl,u=p.templateNamespace;b.empty();r(L.getTrustedResourceUrl(P)).then(function(r){var L,v;r=Tc(r);if(p.replace){r=Tb.test(r)?Uc(Xb(u,U(r))):[];L=r[0];if(1!=r.length||L.nodeType!==oa)throw ja("tplrt",p.name,P);r={$attr:{}};V(d,b,L);var A=W(L,[],r);I(p.scope)&&y(A);a=A.concat(a);Rc(c,r)}else L=n,b.html(r);a.unshift(w);k=fa(a,L,c,e,b,p,f,g,h);s(d,function(a,c){a==L&&(d[c]=b[0])});for(q=T(b[0].childNodes,e);l.length;){r=l.shift();v=l.shift();var C=l.shift(),
E=l.shift(),A=b[0];if(!r.$$destroyed){if(v!==n){var J=v.className;h.hasElementTranscludeDirective&&p.replace||(A=Vb(L));V(C,D(v),A);O(D(A),J)}v=k.transcludeOnThisElement?X(r,k.transclude,E):E;k(q,r,A,d,v)}}l=null});return function(a,b,c,d,e){a=e;b.$$destroyed||(l?l.push(b,c,d,a):(k.transcludeOnThisElement&&(a=X(b,k.transclude,e)),k(q,b,c,d,a)))}}function N(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Oa(a,b,c,d){if(b)throw ja("multidir",
b.name,c.name,a,va(d));}function M(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&E.$$addBindingClass(a);return function(a,c){var e=c.parent();b||E.$$addBindingClass(e);E.$$addBindingInfo(e,d.expressions);a.$watch(d,function(a){c[0].nodeValue=a})}}})}function Xb(a,b){a=Q(a||"html");switch(a){case "svg":case "math":var c=Y.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function R(a,b){if("srcdoc"==
b)return L.HTML;var c=ua(a);if("xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b))return L.RESOURCE_URL}function Pa(a,c,d,e,f){var h=R(a,e);f=g[e]||f;var k=b(d,!0,h,f);if(k){if("multiple"===e&&"select"===ua(a))throw ja("selmulti",va(a));c.push({priority:100,compile:function(){return{pre:function(a,c,g){c=g.$$observers||(g.$$observers={});if(l.test(e))throw ja("nodomevents");var n=g[e];n!==d&&(k=n&&b(n,!0,h,f),d=n);k&&(g[e]=k(a),(c[e]||(c[e]=[])).$$inter=!0,(g.$$observers&&g.$$observers[e].$$scope||
a).$watch(k,function(a,b){"class"===e&&a!=b?g.$updateClass(a,b):g.$set(e,a)}))}}}})}}function V(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,h;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]==d){a[g++]=c;h=g+e-1;for(var l=a.length;g<l;g++,h++)h<l?a[g]=a[h]:delete a[g];a.length-=e-1;a.context===d&&(a.context=c);break}f&&f.replaceChild(c,d);a=Y.createDocumentFragment();a.appendChild(d);D(c).data(D(d).data());sa?(Rb=!0,sa.cleanData([d])):delete D.cache[d[D.expando]];d=1;for(e=b.length;d<e;d++)f=b[d],D(f).remove(),
a.appendChild(f),delete b[d];b[0]=c;b.length=1}function Z(a,b){return x(function(){return a.apply(null,arguments)},a,b)}function $(a,b,d,e,f,g){try{a(b,d,e,f,g)}catch(h){c(h,va(d))}}var Yb=function(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a};Yb.prototype={$normalize:ya,$addClass:function(a){a&&0<a.length&&C.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&C.removeClass(this.$$element,a)},$updateClass:function(a,
b){var c=Vc(a,b);c&&c.length&&C.addClass(this.$$element,c);(c=Vc(b,a))&&c.length&&C.removeClass(this.$$element,c)},$set:function(a,b,d,e){var f=this.$$element[0],g=Mc(f,a),h=kf(f,a),f=a;g?(this.$$element.prop(a,b),e=g):h&&(this[h]=b,f=h);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=uc(a,"-"));g=ua(this.$$element);if("a"===g&&"href"===a||"img"===g&&"src"===a)this[a]=b=A(b,"src"===a);else if("img"===g&&"srcset"===a){for(var g="",h=U(b),l=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,l=/\s/.test(h)?
l:/(,)/,h=h.split(l),l=Math.floor(h.length/2),k=0;k<l;k++)var q=2*k,g=g+A(U(h[q]),!0),g=g+(" "+U(h[q+1]));h=U(h[2*k]).split(/\s/);g+=A(U(h[0]),!0);2===h.length&&(g+=" "+U(h[1]));this[a]=b=g}!1!==d&&(null===b||b===t?this.$$element.removeAttr(e):this.$$element.attr(e,b));(a=this.$$observers)&&s(a[f],function(a){try{a(b)}catch(d){c(d)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=ha()),e=d[a]||(d[a]=[]);e.push(b);v.$evalAsync(function(){!e.$$inter&&c.hasOwnProperty(a)&&b(c[a])});
return function(){Xa(e,b)}}};var Aa=b.startSymbol(),ka=b.endSymbol(),Tc="{{"==Aa||"}}"==ka?pa:function(a){return a.replace(/\{\{/g,Aa).replace(/}}/g,ka)},gb=/^ngAttr[A-Z]/;E.$$addBindingInfo=k?function(a,b){var c=a.data("$binding")||[];H(b)?c=c.concat(b):c.push(b);a.data("$binding",c)}:z;E.$$addBindingClass=k?function(a){O(a,"ng-binding")}:z;E.$$addScopeInfo=k?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:z;E.$$addScopeClass=k?function(a,b){O(a,b?"ng-isolate-scope":
"ng-scope")}:z;return E}]}function ya(b){return db(b.replace(Sc,""))}function Vc(b,a){var c="",d=b.split(/\s+/),e=a.split(/\s+/),f=0;a:for(;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(0<c.length?" ":"")+g}return c}function Uc(b){b=D(b);var a=b.length;if(1>=a)return b;for(;a--;)8===b[a].nodeType&&pf.call(b,a,1);return b}function Fe(){var b={},a=!1,c=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(a,c){Ma(a,"controller");I(a)?x(b,a):b[a]=c};this.allowGlobals=function(){a=
!0};this.$get=["$injector","$window",function(d,e){function f(a,b,c,d){if(!a||!I(a.$scope))throw S("$controller")("noscp",d,b);a.$scope[b]=c}return function(g,h,l,k){var m,n,q;l=!0===l;k&&F(k)&&(q=k);if(F(g)){k=g.match(c);if(!k)throw qf("ctrlfmt",g);n=k[1];q=q||k[3];g=b.hasOwnProperty(n)?b[n]:wc(h.$scope,n,!0)||(a?wc(e,n,!0):t);tb(g,n,!0)}if(l)return l=(H(g)?g[g.length-1]:g).prototype,m=Object.create(l||null),q&&f(h,q,m,n||g.name),x(function(){d.invoke(g,m,h,n);return m},{instance:m,identifier:q});
m=d.instantiate(g,h,n);q&&f(h,q,m,n||g.name);return m}}]}function Ge(){this.$get=["$window",function(b){return D(b.document)}]}function He(){this.$get=["$log",function(b){return function(a,c){b.error.apply(b,arguments)}}]}function Zb(b,a){if(F(b)){var c=b.replace(rf,"").trim();if(c){var d=a("Content-Type");(d=d&&0===d.indexOf(Wc))||(d=(d=c.match(sf))&&tf[d[0]].test(c));d&&(b=pc(c))}}return b}function Xc(b){var a=ha(),c,d,e;if(!b)return a;s(b.split("\n"),function(b){e=b.indexOf(":");c=Q(U(b.substr(0,
e)));d=U(b.substr(e+1));c&&(a[c]=a[c]?a[c]+", "+d:d)});return a}function Yc(b){var a=I(b)?b:t;return function(c){a||(a=Xc(b));return c?(c=a[Q(c)],void 0===c&&(c=null),c):a}}function Zc(b,a,c,d){if(G(d))return d(b,a,c);s(d,function(d){b=d(b,a,c)});return b}function Ke(){var b=this.defaults={transformResponse:[Zb],transformRequest:[function(a){return I(a)&&"[object File]"!==Da.call(a)&&"[object Blob]"!==Da.call(a)&&"[object FormData]"!==Da.call(a)?$a(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},
post:ra($b),put:ra($b),patch:ra($b)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},a=!1;this.useApplyAsync=function(b){return y(b)?(a=!!b,this):a};var c=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(d,e,f,g,h,l){function k(a){function c(a){var b=x({},a);b.data=a.data?Zc(a.data,a.headers,a.status,e.transformResponse):a.data;a=a.status;return 200<=a&&300>a?b:h.reject(b)}function d(a){var b,c={};s(a,function(a,d){G(a)?(b=
a(),null!=b&&(c[d]=b)):c[d]=a});return c}if(!ca.isObject(a))throw S("$http")("badreq",a);var e=x({method:"get",transformRequest:b.transformRequest,transformResponse:b.transformResponse},a);e.headers=function(a){var c=b.headers,e=x({},a.headers),f,g,c=x({},c.common,c[Q(a.method)]);a:for(f in c){a=Q(f);for(g in e)if(Q(g)===a)continue a;e[f]=c[f]}return d(e)}(a);e.method=vb(e.method);var f=[function(a){var d=a.headers,e=Zc(a.data,Yc(d),t,a.transformRequest);B(e)&&s(d,function(a,b){"content-type"===Q(b)&&
delete d[b]});B(a.withCredentials)&&!B(b.withCredentials)&&(a.withCredentials=b.withCredentials);return m(a,e).then(c,c)},t],g=h.when(e);for(s(u,function(a){(a.request||a.requestError)&&f.unshift(a.request,a.requestError);(a.response||a.responseError)&&f.push(a.response,a.responseError)});f.length;){a=f.shift();var l=f.shift(),g=g.then(a,l)}g.success=function(a){g.then(function(b){a(b.data,b.status,b.headers,e)});return g};g.error=function(a){g.then(null,function(b){a(b.data,b.status,b.headers,e)});
return g};return g}function m(c,f){function l(b,c,d,e){function f(){m(c,b,d,e)}O&&(200<=b&&300>b?O.put(X,[b,c,Xc(d),e]):O.remove(X));a?g.$applyAsync(f):(f(),g.$$phase||g.$apply())}function m(a,b,d,e){b=Math.max(b,0);(200<=b&&300>b?C.resolve:C.reject)({data:a,status:b,headers:Yc(d),config:c,statusText:e})}function w(a){m(a.data,a.status,ra(a.headers()),a.statusText)}function u(){var a=k.pendingRequests.indexOf(c);-1!==a&&k.pendingRequests.splice(a,1)}var C=h.defer(),A=C.promise,O,E,s=c.headers,X=n(c.url,
c.params);k.pendingRequests.push(c);A.then(u,u);!c.cache&&!b.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(O=I(c.cache)?c.cache:I(b.cache)?b.cache:q);O&&(E=O.get(X),y(E)?E&&G(E.then)?E.then(w,w):H(E)?m(E[1],E[0],ra(E[2]),E[3]):m(E,200,{},"OK"):O.put(X,A));B(E)&&((E=$c(c.url)?e.cookies()[c.xsrfCookieName||b.xsrfCookieName]:t)&&(s[c.xsrfHeaderName||b.xsrfHeaderName]=E),d(c.method,X,f,l,s,c.timeout,c.withCredentials,c.responseType));return A}function n(a,b){if(!b)return a;var c=[];Ed(b,
function(a,b){null===a||B(a)||(H(a)||(a=[a]),s(a,function(a){I(a)&&(a=qa(a)?a.toISOString():$a(a));c.push(Fa(b)+"="+Fa(a))}))});0<c.length&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&"));return a}var q=f("$http"),u=[];s(c,function(a){u.unshift(F(a)?l.get(a):l.invoke(a))});k.pendingRequests=[];(function(a){s(arguments,function(a){k[a]=function(b,c){return k(x(c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){s(arguments,function(a){k[a]=function(b,c,d){return k(x(d||{},{method:a,
url:b,data:c}))}})})("post","put","patch");k.defaults=b;return k}]}function uf(){return new M.XMLHttpRequest}function Le(){this.$get=["$browser","$window","$document",function(b,a,c){return vf(b,uf,b.defer,a.angular.callbacks,c[0])}]}function vf(b,a,c,d,e){function f(a,b,c){var f=e.createElement("script"),m=null;f.type="text/javascript";f.src=a;f.async=!0;m=function(a){f.removeEventListener("load",m,!1);f.removeEventListener("error",m,!1);e.body.removeChild(f);f=null;var g=-1,u="unknown";a&&("load"!==
a.type||d[b].called||(a={type:"error"}),u=a.type,g="error"===a.type?404:200);c&&c(g,u)};f.addEventListener("load",m,!1);f.addEventListener("error",m,!1);e.body.appendChild(f);return m}return function(e,h,l,k,m,n,q,u){function r(){v&&v();w&&w.abort()}function P(a,d,e,f,g){C!==t&&c.cancel(C);v=w=null;a(d,e,f,g);b.$$completeOutstandingRequest(z)}b.$$incOutstandingRequestCount();h=h||b.url();if("jsonp"==Q(e)){var p="_"+(d.counter++).toString(36);d[p]=function(a){d[p].data=a;d[p].called=!0};var v=f(h.replace("JSON_CALLBACK",
"angular.callbacks."+p),p,function(a,b){P(k,a,d[p].data,"",b);d[p]=z})}else{var w=a();w.open(e,h,!0);s(m,function(a,b){y(a)&&w.setRequestHeader(b,a)});w.onload=function(){var a=w.statusText||"",b="response"in w?w.response:w.responseText,c=1223===w.status?204:w.status;0===c&&(c=b?200:"file"==Ba(h).protocol?404:0);P(k,c,b,w.getAllResponseHeaders(),a)};e=function(){P(k,-1,null,null,"")};w.onerror=e;w.onabort=e;q&&(w.withCredentials=!0);if(u)try{w.responseType=u}catch(L){if("json"!==u)throw L;}w.send(l||
null)}if(0<n)var C=c(r,n);else n&&G(n.then)&&n.then(r)}}function Ie(){var b="{{",a="}}";this.startSymbol=function(a){return a?(b=a,this):b};this.endSymbol=function(b){return b?(a=b,this):a};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(f,g,u,r){function P(c){return c.replace(k,b).replace(m,a)}function p(a){try{var b=a;a=u?e.getTrusted(u,b):e.valueOf(b);var c;if(r&&!y(a))c=a;else if(null==a)c="";else{switch(typeof a){case "string":break;case "number":a=
""+a;break;default:a=$a(a)}c=a}return c}catch(g){c=ac("interr",f,g.toString()),d(c)}}r=!!r;for(var v,w,L=0,C=[],A=[],O=f.length,E=[],s=[];L<O;)if(-1!=(v=f.indexOf(b,L))&&-1!=(w=f.indexOf(a,v+h)))L!==v&&E.push(P(f.substring(L,v))),L=f.substring(v+h,w),C.push(L),A.push(c(L,p)),L=w+l,s.push(E.length),E.push("");else{L!==O&&E.push(P(f.substring(L)));break}if(u&&1<E.length)throw ac("noconcat",f);if(!g||C.length){var X=function(a){for(var b=0,c=C.length;b<c;b++){if(r&&B(a[b]))return;E[s[b]]=a[b]}return E.join("")};
return x(function(a){var b=0,c=C.length,e=Array(c);try{for(;b<c;b++)e[b]=A[b](a);return X(e)}catch(g){a=ac("interr",f,g.toString()),d(a)}},{exp:f,expressions:C,$$watchDelegate:function(a,b,c){var d;return a.$watchGroup(A,function(c,e){var f=X(c);G(b)&&b.call(this,f,c!==e?d:f,a);d=f},c)}})}}var h=b.length,l=a.length,k=new RegExp(b.replace(/./g,f),"g"),m=new RegExp(a.replace(/./g,f),"g");g.startSymbol=function(){return b};g.endSymbol=function(){return a};return g}]}function Je(){this.$get=["$rootScope",
"$window","$q","$$q",function(b,a,c,d){function e(e,h,l,k){var m=a.setInterval,n=a.clearInterval,q=0,u=y(k)&&!k,r=(u?d:c).defer(),P=r.promise;l=y(l)?l:0;P.then(null,null,e);P.$$intervalId=m(function(){r.notify(q++);0<l&&q>=l&&(r.resolve(q),n(P.$$intervalId),delete f[P.$$intervalId]);u||b.$apply()},h);f[P.$$intervalId]=r;return P}var f={};e.cancel=function(b){return b&&b.$$intervalId in f?(f[b.$$intervalId].reject("canceled"),a.clearInterval(b.$$intervalId),delete f[b.$$intervalId],!0):!1};return e}]}
function Rd(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00a4",posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(b){return 1===b?"one":"other"}}}}function bc(b){b=b.split("/");for(var a=b.length;a--;)b[a]=rb(b[a]);return b.join("/")}function ad(b,a){var c=Ba(b);a.$$protocol=
c.protocol;a.$$host=c.hostname;a.$$port=ba(c.port)||wf[c.protocol]||null}function bd(b,a){var c="/"!==b.charAt(0);c&&(b="/"+b);var d=Ba(b);a.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname);a.$$search=rc(d.search);a.$$hash=decodeURIComponent(d.hash);a.$$path&&"/"!=a.$$path.charAt(0)&&(a.$$path="/"+a.$$path)}function za(b,a){if(0===a.indexOf(b))return a.substr(b.length)}function Ha(b){var a=b.indexOf("#");return-1==a?b:b.substr(0,a)}function Gb(b){return b.replace(/(#.+)|#$/,
"$1")}function cc(b){return b.substr(0,Ha(b).lastIndexOf("/")+1)}function dc(b,a){this.$$html5=!0;a=a||"";var c=cc(b);ad(b,this);this.$$parse=function(a){var b=za(c,a);if(!F(b))throw Hb("ipthprfx",a,c);bd(b,this);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Qb(this.$$search),b=this.$$hash?"#"+rb(this.$$hash):"";this.$$url=bc(this.$$path)+(a?"?"+a:"")+b;this.$$absUrl=c+this.$$url.substr(1)};this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),
!0;var f,g;(f=za(b,d))!==t?(g=f,g=(f=za(a,f))!==t?c+(za("/",f)||f):b+g):(f=za(c,d))!==t?g=c+f:c==d+"/"&&(g=c);g&&this.$$parse(g);return!!g}}function ec(b,a){var c=cc(b);ad(b,this);this.$$parse=function(d){d=za(b,d)||za(c,d);var e;"#"===d.charAt(0)?(e=za(a,d),B(e)&&(e=d)):e=this.$$html5?d:"";bd(e,this);d=this.$$path;var f=/^\/[A-Z]:(\/.*)/;0===e.indexOf(b)&&(e=e.replace(b,""));f.exec(e)||(d=(e=f.exec(d))?e[1]:d);this.$$path=d;this.$$compose()};this.$$compose=function(){var c=Qb(this.$$search),e=this.$$hash?
"#"+rb(this.$$hash):"";this.$$url=bc(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+(this.$$url?a+this.$$url:"")};this.$$parseLinkUrl=function(a,c){return Ha(b)==Ha(a)?(this.$$parse(a),!0):!1}}function cd(b,a){this.$$html5=!0;ec.apply(this,arguments);var c=cc(b);this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;b==Ha(d)?f=d:(g=za(c,d))?f=b+a+g:c===d+"/"&&(f=c);f&&this.$$parse(f);return!!f};this.$$compose=function(){var c=Qb(this.$$search),e=this.$$hash?"#"+rb(this.$$hash):
"";this.$$url=bc(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+a+this.$$url}}function Ib(b){return function(){return this[b]}}function dd(b,a){return function(c){if(B(c))return this[b];this[b]=a(c);this.$$compose();return this}}function Me(){var b="",a={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(a){return y(a)?(b=a,this):b};this.html5Mode=function(b){return Wa(b)?(a.enabled=b,this):I(b)?(Wa(b.enabled)&&(a.enabled=b.enabled),Wa(b.requireBase)&&(a.requireBase=b.requireBase),Wa(b.rewriteLinks)&&
(a.rewriteLinks=b.rewriteLinks),this):a};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=k.url(),f=k.$$state;try{d.url(a,b,c),k.$$state=d.state()}catch(g){throw k.url(e),k.$$state=f,g;}}function l(a,b){c.$broadcast("$locationChangeSuccess",k.absUrl(),a,k.$$state,b)}var k,m;m=d.baseHref();var n=d.url(),q;if(a.enabled){if(!m&&a.requireBase)throw Hb("nobase");q=n.substring(0,n.indexOf("/",n.indexOf("//")+2))+(m||"/");m=e.history?dc:cd}else q=
Ha(n),m=ec;k=new m(q,"#"+b);k.$$parseLinkUrl(n,n);k.$$state=d.state();var u=/^\s*(javascript|mailto):/i;f.on("click",function(b){if(a.rewriteLinks&&!b.ctrlKey&&!b.metaKey&&!b.shiftKey&&2!=b.which&&2!=b.button){for(var e=D(b.target);"a"!==ua(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),l=e.attr("href")||e.attr("xlink:href");I(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=Ba(h.animVal).href);u.test(h)||!h||e.attr("target")||b.isDefaultPrevented()||!k.$$parseLinkUrl(h,
l)||(b.preventDefault(),k.absUrl()!=d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}});Gb(k.absUrl())!=Gb(n)&&d.url(k.absUrl(),!0);var r=!0;d.onUrlChange(function(a,b){c.$evalAsync(function(){var d=k.absUrl(),e=k.$$state,f;k.$$parse(a);k.$$state=b;f=c.$broadcast("$locationChangeStart",a,d,b,e).defaultPrevented;k.absUrl()===a&&(f?(k.$$parse(d),k.$$state=e,h(d,!1,e)):(r=!1,l(d,e)))});c.$$phase||c.$digest()});c.$watch(function(){var a=Gb(d.url()),b=Gb(k.absUrl()),f=d.state(),g=k.$$replace,
q=a!==b||k.$$html5&&e.history&&f!==k.$$state;if(r||q)r=!1,c.$evalAsync(function(){var b=k.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,k.$$state,f).defaultPrevented;k.absUrl()===b&&(d?(k.$$parse(a),k.$$state=f):(q&&h(b,g,f===k.$$state?null:k.$$state),l(a,f)))});k.$$replace=!1});return k}]}function Ne(){var b=!0,a=this;this.debugEnabled=function(a){return y(a)?(b=a,this):b};this.$get=["$window",function(c){function d(a){a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?
"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=c.console||{},e=b[a]||b.log||z;a=!1;try{a=!!e.apply}catch(l){}return a?function(){var a=[];s(arguments,function(b){a.push(d(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments)}}()}}]}function ta(b,a){if("__defineGetter__"===
b||"__defineSetter__"===b||"__lookupGetter__"===b||"__lookupSetter__"===b||"__proto__"===b)throw la("isecfld",a);return b}function ma(b,a){if(b){if(b.constructor===b)throw la("isecfn",a);if(b.window===b)throw la("isecwindow",a);if(b.children&&(b.nodeName||b.prop&&b.attr&&b.find))throw la("isecdom",a);if(b===Object)throw la("isecobj",a);}return b}function fc(b){return b.constant}function hb(b,a,c,d,e){ma(b,e);ma(a,e);c=c.split(".");for(var f,g=0;1<c.length;g++){f=ta(c.shift(),e);var h=0===g&&a&&a[f]||
b[f];h||(h={},b[f]=h);b=ma(h,e)}f=ta(c.shift(),e);ma(b[f],e);return b[f]=d}function Qa(b){return"constructor"==b}function ed(b,a,c,d,e,f,g){ta(b,f);ta(a,f);ta(c,f);ta(d,f);ta(e,f);var h=function(a){return ma(a,f)},l=g||Qa(b)?h:pa,k=g||Qa(a)?h:pa,m=g||Qa(c)?h:pa,n=g||Qa(d)?h:pa,q=g||Qa(e)?h:pa;return function(f,g){var h=g&&g.hasOwnProperty(b)?g:f;if(null==h)return h;h=l(h[b]);if(!a)return h;if(null==h)return t;h=k(h[a]);if(!c)return h;if(null==h)return t;h=m(h[c]);if(!d)return h;if(null==h)return t;
h=n(h[d]);return e?null==h?t:h=q(h[e]):h}}function xf(b,a){return function(c,d){return b(c,d,ma,a)}}function yf(b,a,c){var d=a.expensiveChecks,e=d?zf:Af,f=e[b];if(f)return f;var g=b.split("."),h=g.length;if(a.csp)f=6>h?ed(g[0],g[1],g[2],g[3],g[4],c,d):function(a,b){var e=0,f;do f=ed(g[e++],g[e++],g[e++],g[e++],g[e++],c,d)(a,b),b=t,a=f;while(e<h);return f};else{var l="";d&&(l+="s = eso(s, fe);\nl = eso(l, fe);\n");var k=d;s(g,function(a,b){ta(a,c);var e=(b?"s":'((l&&l.hasOwnProperty("'+a+'"))?l:s)')+
"."+a;if(d||Qa(a))e="eso("+e+", fe)",k=!0;l+="if(s == null) return undefined;\ns="+e+";\n"});l+="return s;";a=new Function("s","l","eso","fe",l);a.toString=ea(l);k&&(a=xf(a,c));f=a}f.sharedGetter=!0;f.assign=function(a,c,d){return hb(a,d,b,c,b)};return e[b]=f}function gc(b){return G(b.valueOf)?b.valueOf():Bf.call(b)}function Oe(){var b=ha(),a=ha();this.$get=["$filter","$sniffer",function(c,d){function e(a){var b=a;a.sharedGetter&&(b=function(b,c){return a(b,c)},b.literal=a.literal,b.constant=a.constant,
b.assign=a.assign);return b}function f(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];e.constant||(e.inputs?f(e.inputs,b):-1===b.indexOf(e)&&b.push(e))}return b}function g(a,b){return null==a||null==b?a===b:"object"===typeof a&&(a=gc(a),"object"===typeof a)?!1:a===b||a!==a&&b!==b}function h(a,b,c,d){var e=d.$$inputs||(d.$$inputs=f(d.inputs,[])),h;if(1===e.length){var l=g,e=e[0];return a.$watch(function(a){var b=e(a);g(b,l)||(h=d(a),l=b&&gc(b));return h},b,c)}for(var k=[],q=0,n=e.length;q<n;q++)k[q]=
g;return a.$watch(function(a){for(var b=!1,c=0,f=e.length;c<f;c++){var l=e[c](a);if(b||(b=!g(l,k[c])))k[c]=l&&gc(l)}b&&(h=d(a));return h},b,c)}function l(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a;G(b)&&b.apply(this,arguments);y(a)&&d.$$postDigest(function(){y(f)&&e()})},c)}function k(a,b,c,d){function e(a){var b=!0;s(a,function(a){y(a)||(b=!1)});return b}var f,g;return f=a.$watch(function(a){return d(a)},function(a,c,d){g=a;G(b)&&b.call(this,a,c,d);e(a)&&d.$$postDigest(function(){e(g)&&
f()})},c)}function m(a,b,c,d){var e;return e=a.$watch(function(a){return d(a)},function(a,c,d){G(b)&&b.apply(this,arguments);e()},c)}function n(a,b){if(!b)return a;var c=a.$$watchDelegate,c=c!==k&&c!==l?function(c,d){var e=a(c,d);return b(e,c,d)}:function(c,d){var e=a(c,d),f=b(e,c,d);return y(e)?f:e};a.$$watchDelegate&&a.$$watchDelegate!==h?c.$$watchDelegate=a.$$watchDelegate:b.$stateful||(c.$$watchDelegate=h,c.inputs=[a]);return c}var q={csp:d.csp,expensiveChecks:!1},u={csp:d.csp,expensiveChecks:!0};
return function(d,f,g){var v,w,L;switch(typeof d){case "string":L=d=d.trim();var C=g?a:b;v=C[L];v||(":"===d.charAt(0)&&":"===d.charAt(1)&&(w=!0,d=d.substring(2)),g=g?u:q,v=new hc(g),v=(new ib(v,c,g)).parse(d),v.constant?v.$$watchDelegate=m:w?(v=e(v),v.$$watchDelegate=v.literal?k:l):v.inputs&&(v.$$watchDelegate=h),C[L]=v);return n(v,f);case "function":return n(d,f);default:return n(z,f)}}}]}function Qe(){this.$get=["$rootScope","$exceptionHandler",function(b,a){return fd(function(a){b.$evalAsync(a)},
a)}]}function Re(){this.$get=["$browser","$exceptionHandler",function(b,a){return fd(function(a){b.defer(a)},a)}]}function fd(b,a){function c(a,b,c){function d(b){return function(c){e||(e=!0,b.call(a,c))}}var e=!1;return[d(b),d(c)]}function d(){this.$$state={status:0}}function e(a,b){return function(c){b.call(a,c)}}function f(c){!c.processScheduled&&c.pending&&(c.processScheduled=!0,b(function(){var b,d,e;e=c.pending;c.processScheduled=!1;c.pending=t;for(var f=0,g=e.length;f<g;++f){d=e[f][0];b=e[f][c.status];
try{G(b)?d.resolve(b(c.value)):1===c.status?d.resolve(c.value):d.reject(c.value)}catch(h){d.reject(h),a(h)}}}))}function g(){this.promise=new d;this.resolve=e(this,this.resolve);this.reject=e(this,this.reject);this.notify=e(this,this.notify)}var h=S("$q",TypeError);d.prototype={then:function(a,b,c){var d=new g;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&f(this.$$state);return d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,
b){return this.then(function(b){return k(b,!0,a)},function(b){return k(b,!1,a)},b)}};g.prototype={resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(h("qcycle",a)):this.$$resolve(a))},$$resolve:function(b){var d,e;e=c(this,this.$$resolve,this.$$reject);try{if(I(b)||G(b))d=b&&b.then;G(d)?(this.promise.$$state.status=-1,d.call(b,e[0],e[1],this.notify)):(this.promise.$$state.value=b,this.promise.$$state.status=1,f(this.promise.$$state))}catch(g){e[1](g),a(g)}},reject:function(a){this.promise.$$state.status||
this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a;this.promise.$$state.status=2;f(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;0>=this.promise.$$state.status&&d&&d.length&&b(function(){for(var b,e,f=0,g=d.length;f<g;f++){e=d[f][0];b=d[f][3];try{e.notify(G(b)?b(c):c)}catch(h){a(h)}}})}};var l=function(a,b){var c=new g;b?c.resolve(a):c.reject(a);return c.promise},k=function(a,b,c){var d=null;try{G(c)&&(d=c())}catch(e){return l(e,!1)}return d&&G(d.then)?
d.then(function(){return l(a,b)},function(a){return l(a,!1)}):l(a,b)},m=function(a,b,c,d){var e=new g;e.resolve(a);return e.promise.then(b,c,d)},n=function u(a){if(!G(a))throw h("norslvr",a);if(!(this instanceof u))return new u(a);var b=new g;a(function(a){b.resolve(a)},function(a){b.reject(a)});return b.promise};n.defer=function(){return new g};n.reject=function(a){var b=new g;b.reject(a);return b.promise};n.when=m;n.all=function(a){var b=new g,c=0,d=H(a)?[]:{};s(a,function(a,e){c++;m(a).then(function(a){d.hasOwnProperty(e)||
(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});0===c&&b.resolve(d);return b.promise};return n}function $e(){this.$get=["$window","$timeout",function(b,a){var c=b.requestAnimationFrame||b.webkitRequestAnimationFrame,d=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(b){var c=a(b,16.66,!1);return function(){a.cancel(c)}};f.supported=e;return f}]}function Pe(){var b=
10,a=S("$rootScope"),c=null,d=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(e,f,g,h){function l(){this.$id=++ob;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$isolateBindings=null}function k(b){if(r.$$phase)throw a("inprog",r.$$phase);r.$$phase=b}function m(a,
b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function n(){}function q(){for(;v.length;)try{v.shift()()}catch(a){f(a)}d=null}function u(){null===d&&(d=h.defer(function(){r.$apply(q)}))}l.prototype={constructor:l,$new:function(a,b){function c(){d.$$destroyed=!0}var d;b=b||this;a?(d=new l,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners=
{};this.$$listenerCount={};this.$id=++ob;this.$$ChildScope=null},this.$$ChildScope.prototype=this),d=new this.$$ChildScope);d.$parent=b;d.$$prevSibling=b.$$childTail;b.$$childHead?(b.$$childTail.$$nextSibling=d,b.$$childTail=d):b.$$childHead=b.$$childTail=d;(a||b!=this)&&d.$on("$destroy",c);return d},$watch:function(a,b,d){var e=g(a);if(e.$$watchDelegate)return e.$$watchDelegate(this,b,d,e);var f=this.$$watchers,h={fn:b,last:n,get:e,exp:a,eq:!!d};c=null;G(b)||(h.fn=z);f||(f=this.$$watchers=[]);f.unshift(h);
return function(){Xa(f,h);c=null}},$watchGroup:function(a,b){function c(){h=!1;l?(l=!1,b(e,e,g)):b(e,d,g)}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,l=!0;if(!a.length){var k=!0;g.$evalAsync(function(){k&&b(e,e,g)});return function(){k=!1}}if(1===a.length)return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f)});s(a,function(a,b){var l=g.$watch(a,function(a,f){e[b]=a;d[b]=f;h||(h=!0,g.$evalAsync(c))});f.push(l)});return function(){for(;f.length;)f.shift()()}},$watchCollection:function(a,
b){function c(a){e=a;var b,d,g,h;if(!B(e)){if(I(e))if(Ta(e))for(f!==q&&(f=q,u=f.length=0,k++),a=e.length,u!==a&&(k++,f.length=u=a),b=0;b<a;b++)h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(k++,f[b]=g);else{f!==m&&(f=m={},u=0,k++);a=0;for(b in e)e.hasOwnProperty(b)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(k++,f[b]=g)):(u++,f[b]=g,k++));if(u>a)for(b in k++,f)e.hasOwnProperty(b)||(u--,delete f[b])}else f!==e&&(f=e,k++);return k}}c.$stateful=!0;var d=this,e,f,h,l=1<b.length,k=0,n=g(a,c),q=[],m=
{},p=!0,u=0;return this.$watch(n,function(){p?(p=!1,b(e,e,d)):b(e,h,d);if(l)if(I(e))if(Ta(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)sc.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var e,g,l,m,u,v,s=b,t,W=[],y,J;k("$digest");h.$$checkUrlChange();this===r&&null!==d&&(h.defer.cancel(d),q());c=null;do{v=!1;for(t=this;P.length;){try{J=P.shift(),J.scope.$eval(J.expression,J.locals)}catch(D){f(D)}c=null}a:do{if(m=t.$$watchers)for(u=m.length;u--;)try{if(e=m[u])if((g=
e.get(t))!==(l=e.last)&&!(e.eq?ga(g,l):"number"===typeof g&&"number"===typeof l&&isNaN(g)&&isNaN(l)))v=!0,c=e,e.last=e.eq?Ea(g,null):g,e.fn(g,l===n?g:l,t),5>s&&(y=4-s,W[y]||(W[y]=[]),W[y].push({msg:G(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:g,oldVal:l}));else if(e===c){v=!1;break a}}catch(B){f(B)}if(!(m=t.$$childHead||t!==this&&t.$$nextSibling))for(;t!==this&&!(m=t.$$nextSibling);)t=t.$parent}while(t=m);if((v||P.length)&&!s--)throw r.$$phase=null,a("infdig",b,W);}while(v||P.length);
for(r.$$phase=null;p.length;)try{p.shift()()}catch(da){f(da)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;if(this!==r){for(var b in this.$$listenerCount)m(this,this.$$listenerCount[b],b);a.$$childHead==this&&(a.$$childHead=this.$$nextSibling);a.$$childTail==this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);
this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=z;this.$on=this.$watch=this.$watchGroup=function(){return z};this.$$listeners={};this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(a,b){return g(a)(this,b)},$evalAsync:function(a,b){r.$$phase||P.length||h.defer(function(){P.length&&r.$digest()});P.push({scope:this,expression:a,locals:b})},$$postDigest:function(a){p.push(a)},$apply:function(a){try{return k("$apply"),
this.$eval(a)}catch(b){f(b)}finally{r.$$phase=null;try{r.$digest()}catch(c){throw f(c),c;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&v.push(b);u()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,m(e,1,a))}},$emit:function(a,b){var c=[],d,e=this,g=!1,h={name:a,targetScope:e,
stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},l=Ya([h],arguments,1),k,m;do{d=e.$$listeners[a]||c;h.currentScope=e;k=0;for(m=d.length;k<m;k++)if(d[k])try{d[k].apply(null,l)}catch(n){f(n)}else d.splice(k,1),k--,m--;if(g)return h.currentScope=null,h;e=e.$parent}while(e);h.currentScope=null;return h},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;
for(var g=Ya([e],arguments,1),h,l;c=d;){e.currentScope=c;d=c.$$listeners[a]||[];h=0;for(l=d.length;h<l;h++)if(d[h])try{d[h].apply(null,g)}catch(k){f(k)}else d.splice(h,1),h--,l--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}e.currentScope=null;return e}};var r=new l,P=r.$$asyncQueue=[],p=r.$$postDigestQueue=[],v=r.$$applyAsyncQueue=[];return r}]}function Sd(){var b=/^\s*(https?|ftp|mailto|tel|file):/,a=/^\s*((https?|ftp|file|blob):|data:image\/)/;
this.aHrefSanitizationWhitelist=function(a){return y(a)?(b=a,this):b};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a=b,this):a};this.$get=function(){return function(c,d){var e=d?a:b,f;f=Ba(c).href;return""===f||f.match(e)?c:"unsafe:"+f}}}function Cf(b){if("self"===b)return b;if(F(b)){if(-1<b.indexOf("***"))throw Ca("iwcard",b);b=gd(b).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return new RegExp("^"+b+"$")}if(pb(b))return new RegExp("^"+b.source+"$");throw Ca("imatcher");}function hd(b){var a=
[];y(b)&&s(b,function(b){a.push(Cf(b))});return a}function Te(){this.SCE_CONTEXTS=na;var b=["self"],a=[];this.resourceUrlWhitelist=function(a){arguments.length&&(b=hd(a));return b};this.resourceUrlBlacklist=function(b){arguments.length&&(a=hd(b));return a};this.$get=["$injector",function(c){function d(a,b){return"self"===a?$c(b):!!a.exec(b.href)}function e(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};
b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var f=function(a){throw Ca("unsafe");};c.has("$sanitize")&&(f=c.get("$sanitize"));var g=e(),h={};h[na.HTML]=e(g);h[na.CSS]=e(g);h[na.URL]=e(g);h[na.JS]=e(g);h[na.RESOURCE_URL]=e(h[na.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw Ca("icontext",a,b);if(null===b||b===t||""===b)return b;if("string"!==typeof b)throw Ca("itype",a);return new c(b)},getTrusted:function(c,e){if(null===
e||e===t||""===e)return e;var g=h.hasOwnProperty(c)?h[c]:null;if(g&&e instanceof g)return e.$$unwrapTrustedValue();if(c===na.RESOURCE_URL){var g=Ba(e.toString()),n,q,u=!1;n=0;for(q=b.length;n<q;n++)if(d(b[n],g)){u=!0;break}if(u)for(n=0,q=a.length;n<q;n++)if(d(a[n],g)){u=!1;break}if(u)return e;throw Ca("insecurl",e.toString());}if(c===na.HTML)return f(e);throw Ca("unsafe");},valueOf:function(a){return a instanceof g?a.$$unwrapTrustedValue():a}}}]}function Se(){var b=!0;this.enabled=function(a){arguments.length&&
(b=!!a);return b};this.$get=["$parse","$sceDelegate",function(a,c){if(b&&8>Ra)throw Ca("iequirks");var d=ra(na);d.isEnabled=function(){return b};d.trustAs=c.trustAs;d.getTrusted=c.getTrusted;d.valueOf=c.valueOf;b||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=pa);d.parseAs=function(b,c){var e=a(c);return e.literal&&e.constant?e:a(c,function(a){return d.getTrusted(b,a)})};var e=d.parseAs,f=d.getTrusted,g=d.trustAs;s(na,function(a,b){var c=Q(b);d[db("parse_as_"+c)]=function(b){return e(a,
b)};d[db("get_trusted_"+c)]=function(b){return f(a,b)};d[db("trust_as_"+c)]=function(b){return g(a,b)}});return d}]}function Ue(){this.$get=["$window","$document",function(b,a){var c={},d=ba((/android (\d+)/.exec(Q((b.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((b.navigator||{}).userAgent),f=a[0]||{},g,h=/^(Moz|webkit|ms)(?=[A-Z])/,l=f.body&&f.body.style,k=!1,m=!1;if(l){for(var n in l)if(k=h.exec(n)){g=k[0];g=g.substr(0,1).toUpperCase()+g.substr(1);break}g||(g="WebkitOpacity"in l&&"webkit");
k=!!("transition"in l||g+"Transition"in l);m=!!("animation"in l||g+"Animation"in l);!d||k&&m||(k=F(f.body.style.webkitTransition),m=F(f.body.style.webkitAnimation))}return{history:!(!b.history||!b.history.pushState||4>d||e),hasEvent:function(a){if("input"===a&&11>=Ra)return!1;if(B(c[a])){var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:bb(),vendorPrefix:g,transitions:k,animations:m,android:d}}]}function We(){this.$get=["$templateCache","$http","$q",function(b,a,c){function d(e,f){d.totalPendingRequests++;
var g=a.defaults&&a.defaults.transformResponse;H(g)?g=g.filter(function(a){return a!==Zb}):g===Zb&&(g=null);return a.get(e,{cache:b,transformResponse:g}).finally(function(){d.totalPendingRequests--}).then(function(a){return a.data},function(a){if(!f)throw ja("tpload",e);return c.reject(a)})}d.totalPendingRequests=0;return d}]}function Xe(){this.$get=["$rootScope","$browser","$location",function(b,a,c){return{findBindings:function(a,b,c){a=a.getElementsByClassName("ng-binding");var g=[];s(a,function(a){var d=
ca.element(a).data("$binding");d&&s(d,function(d){c?(new RegExp("(^|\\s)"+gd(b)+"(\\s|\\||$)")).test(d)&&g.push(a):-1!=d.indexOf(b)&&g.push(a)})});return g},findModels:function(a,b,c){for(var g=["ng-","data-ng-","ng\\:"],h=0;h<g.length;++h){var l=a.querySelectorAll("["+g[h]+"model"+(c?"=":"*=")+'"'+b+'"]');if(l.length)return l}},getLocation:function(){return c.url()},setLocation:function(a){a!==c.url()&&(c.url(a),b.$digest())},whenStable:function(b){a.notifyWhenNoOutstandingRequests(b)}}}]}function Ye(){this.$get=
["$rootScope","$browser","$q","$$q","$exceptionHandler",function(b,a,c,d,e){function f(f,l,k){var m=y(k)&&!k,n=(m?d:c).defer(),q=n.promise;l=a.defer(function(){try{n.resolve(f())}catch(a){n.reject(a),e(a)}finally{delete g[q.$$timeoutId]}m||b.$apply()},l);q.$$timeoutId=l;g[l]=n;return q}var g={};f.cancel=function(b){return b&&b.$$timeoutId in g?(g[b.$$timeoutId].reject("canceled"),delete g[b.$$timeoutId],a.defer.cancel(b.$$timeoutId)):!1};return f}]}function Ba(b){Ra&&(Z.setAttribute("href",b),b=Z.href);
Z.setAttribute("href",b);return{href:Z.href,protocol:Z.protocol?Z.protocol.replace(/:$/,""):"",host:Z.host,search:Z.search?Z.search.replace(/^\?/,""):"",hash:Z.hash?Z.hash.replace(/^#/,""):"",hostname:Z.hostname,port:Z.port,pathname:"/"===Z.pathname.charAt(0)?Z.pathname:"/"+Z.pathname}}function $c(b){b=F(b)?Ba(b):b;return b.protocol===id.protocol&&b.host===id.host}function Ze(){this.$get=ea(M)}function Ec(b){function a(c,d){if(I(c)){var e={};s(c,function(b,c){e[c]=a(c,b)});return e}return b.factory(c+
"Filter",d)}this.register=a;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];a("currency",jd);a("date",kd);a("filter",Df);a("json",Ef);a("limitTo",Ff);a("lowercase",Gf);a("number",ld);a("orderBy",md);a("uppercase",Hf)}function Df(){return function(b,a,c){if(!H(b))return b;var d;switch(typeof a){case "function":break;case "boolean":case "number":case "string":d=!0;case "object":a=If(a,c,d);break;default:return b}return b.filter(a)}}function If(b,a,c){var d=I(b)&&"$"in
b;!0===a?a=ga:G(a)||(a=function(a,b){if(I(a)||I(b))return!1;a=Q(""+a);b=Q(""+b);return-1!==a.indexOf(b)});return function(e){return d&&!I(e)?Ia(e,b.$,a,!1):Ia(e,b,a,c)}}function Ia(b,a,c,d,e){var f=typeof b,g=typeof a;if("string"===g&&"!"===a.charAt(0))return!Ia(b,a.substring(1),c,d);if(H(b))return b.some(function(b){return Ia(b,a,c,d)});switch(f){case "object":var h;if(d){for(h in b)if("$"!==h.charAt(0)&&Ia(b[h],a,c,!0))return!0;return e?!1:Ia(b,a,c,!1)}if("object"===g){for(h in a)if(e=a[h],!G(e)&&
(f="$"===h,!Ia(f?b:b[h],e,c,f,f)))return!1;return!0}return c(b,a);case "function":return!1;default:return c(b,a)}}function jd(b){var a=b.NUMBER_FORMATS;return function(b,d,e){B(d)&&(d=a.CURRENCY_SYM);B(e)&&(e=a.PATTERNS[1].maxFrac);return null==b?b:nd(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,e).replace(/\u00A4/g,d)}}function ld(b){var a=b.NUMBER_FORMATS;return function(b,d){return null==b?b:nd(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function nd(b,a,c,d,e){if(!isFinite(b)||I(b))return"";var f=
0>b;b=Math.abs(b);var g=b+"",h="",l=[],k=!1;if(-1!==g.indexOf("e")){var m=g.match(/([\d\.]+)e(-?)(\d+)/);m&&"-"==m[2]&&m[3]>e+1?b=0:(h=g,k=!0)}if(k)0<e&&1>b&&(h=b.toFixed(e),b=parseFloat(h));else{g=(g.split(od)[1]||"").length;B(e)&&(e=Math.min(Math.max(a.minFrac,g),a.maxFrac));b=+(Math.round(+(b.toString()+"e"+e)).toString()+"e"+-e);var g=(""+b).split(od),k=g[0],g=g[1]||"",n=0,q=a.lgSize,u=a.gSize;if(k.length>=q+u)for(n=k.length-q,m=0;m<n;m++)0===(n-m)%u&&0!==m&&(h+=c),h+=k.charAt(m);for(m=n;m<k.length;m++)0===
(k.length-m)%q&&0!==m&&(h+=c),h+=k.charAt(m);for(;g.length<e;)g+="0";e&&"0"!==e&&(h+=d+g.substr(0,e))}0===b&&(f=!1);l.push(f?a.negPre:a.posPre,h,f?a.negSuf:a.posSuf);return l.join("")}function Jb(b,a,c){var d="";0>b&&(d="-",b=-b);for(b=""+b;b.length<a;)b="0"+b;c&&(b=b.substr(b.length-a));return d+b}function $(b,a,c,d){c=c||0;return function(e){e=e["get"+b]();if(0<c||e>-c)e+=c;0===e&&-12==c&&(e=12);return Jb(e,a,d)}}function Kb(b,a){return function(c,d){var e=c["get"+b](),f=vb(a?"SHORT"+b:b);return d[f][e]}}
function pd(b){var a=(new Date(b,0,1)).getDay();return new Date(b,0,(4>=a?5:12)-a)}function qd(b){return function(a){var c=pd(a.getFullYear());a=+new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))-+c;a=1+Math.round(a/6048E5);return Jb(a,b)}}function kd(b){function a(a){var b;if(b=a.match(c)){a=new Date(0);var f=0,g=0,h=b[8]?a.setUTCFullYear:a.setFullYear,l=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=ba(b[9]+b[10]),g=ba(b[9]+b[11]));h.call(a,ba(b[1]),ba(b[2])-1,ba(b[3]));f=ba(b[4]||0)-f;
g=ba(b[5]||0)-g;h=ba(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));l.call(a,f,g,h,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e,f){var g="",h=[],l,k;e=e||"mediumDate";e=b.DATETIME_FORMATS[e]||e;F(c)&&(c=Jf.test(c)?ba(c):a(c));V(c)&&(c=new Date(c));if(!qa(c))return c;for(;e;)(k=Kf.exec(e))?(h=Ya(h,k,1),e=h.pop()):(h.push(e),e=null);f&&"UTC"===f&&(c=new Date(c.getTime()),c.setMinutes(c.getMinutes()+
c.getTimezoneOffset()));s(h,function(a){l=Lf[a];g+=l?l(c,b.DATETIME_FORMATS):a.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function Ef(){return function(b,a){B(a)&&(a=2);return $a(b,a)}}function Ff(){return function(b,a){V(b)&&(b=b.toString());return H(b)||F(b)?(a=Infinity===Math.abs(Number(a))?Number(a):ba(a))?0<a?b.slice(0,a):b.slice(a):F(b)?"":[]:b}}function md(b){return function(a,c,d){function e(a,b){return b?function(b,c){return a(c,b)}:a}function f(a){switch(typeof a){case "number":case "boolean":case "string":return!0;
default:return!1}}function g(a){return null===a?"null":"function"===typeof a.valueOf&&(a=a.valueOf(),f(a))||"function"===typeof a.toString&&(a=a.toString(),f(a))?a:""}function h(a,b){var c=typeof a,d=typeof b;c===d&&"object"===c&&(a=g(a),b=g(b));return c===d?("string"===c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1}if(!Ta(a))return a;c=H(c)?c:[c];0===c.length&&(c=["+"]);c=c.map(function(a){var c=!1,d=a||pa;if(F(a)){if("+"==a.charAt(0)||"-"==a.charAt(0))c="-"==a.charAt(0),a=a.substring(1);
if(""===a)return e(h,c);d=b(a);if(d.constant){var f=d();return e(function(a,b){return h(a[f],b[f])},c)}}return e(function(a,b){return h(d(a),d(b))},c)});return Za.call(a).sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0},d))}}function Ja(b){G(b)&&(b={link:b});b.restrict=b.restrict||"AC";return ea(b)}function rd(b,a,c,d,e){var f=this,g=[],h=f.$$parentForm=b.parent().controller("form")||Lb;f.$error={};f.$$success={};f.$pending=t;f.$name=e(a.name||a.ngForm||
"")(c);f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;f.$submitted=!1;h.$addControl(f);f.$rollbackViewValue=function(){s(g,function(a){a.$rollbackViewValue()})};f.$commitViewValue=function(){s(g,function(a){a.$commitViewValue()})};f.$addControl=function(a){Ma(a.$name,"input");g.push(a);a.$name&&(f[a.$name]=a)};f.$$renameControl=function(a,b){var c=a.$name;f[c]===a&&delete f[c];f[b]=a;a.$name=b};f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];s(f.$pending,function(b,c){f.$setValidity(c,
null,a)});s(f.$error,function(b,c){f.$setValidity(c,null,a)});s(f.$$success,function(b,c){f.$setValidity(c,null,a)});Xa(g,a)};sd({ctrl:this,$element:b,set:function(a,b,c){var d=a[b];d?-1===d.indexOf(c)&&d.push(c):a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(Xa(d,c),0===d.length&&delete a[b])},parentForm:h,$animate:d});f.$setDirty=function(){d.removeClass(b,Sa);d.addClass(b,Mb);f.$dirty=!0;f.$pristine=!1;h.$setDirty()};f.$setPristine=function(){d.setClass(b,Sa,Mb+" ng-submitted");f.$dirty=!1;f.$pristine=
!0;f.$submitted=!1;s(g,function(a){a.$setPristine()})};f.$setUntouched=function(){s(g,function(a){a.$setUntouched()})};f.$setSubmitted=function(){d.addClass(b,"ng-submitted");f.$submitted=!0;h.$setSubmitted()}}function ic(b){b.$formatters.push(function(a){return b.$isEmpty(a)?a:a.toString()})}function jb(b,a,c,d,e,f){var g=Q(a[0].type);if(!e.android){var h=!1;a.on("compositionstart",function(a){h=!0});a.on("compositionend",function(){h=!1;l()})}var l=function(b){k&&(f.defer.cancel(k),k=null);if(!h){var e=
a.val();b=b&&b.type;"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=U(e));(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,b)}};if(e.hasEvent("input"))a.on("input",l);else{var k,m=function(a,b,c){k||(k=f.defer(function(){k=null;b&&b.value===c||l(a)}))};a.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||m(a,this,this.value)});if(e.hasEvent("paste"))a.on("paste cut",m)}a.on("change",l);d.$render=function(){a.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)}}
function Nb(b,a){return function(c,d){var e,f;if(qa(c))return c;if(F(c)){'"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1));if(Mf.test(c))return new Date(c);b.lastIndex=0;if(e=b.exec(c))return e.shift(),f=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},s(e,function(b,c){c<a.length&&(f[a[c]]=+b)}),new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,
1E3*f.sss||0)}return NaN}}function kb(b,a,c,d){return function(e,f,g,h,l,k,m){function n(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function q(a){return y(a)?qa(a)?a:c(a):t}td(e,f,g,h);jb(e,f,g,h,l,k);var u=h&&h.$options&&h.$options.timezone,r;h.$$parserName=b;h.$parsers.push(function(b){return h.$isEmpty(b)?null:a.test(b)?(b=c(b,r),"UTC"===u&&b.setMinutes(b.getMinutes()-b.getTimezoneOffset()),b):t});h.$formatters.push(function(a){if(a&&!qa(a))throw Ob("datefmt",a);if(n(a)){if((r=a)&&"UTC"===
u){var b=6E4*r.getTimezoneOffset();r=new Date(r.getTime()+b)}return m("date")(a,d,u)}r=null;return""});if(y(g.min)||g.ngMin){var s;h.$validators.min=function(a){return!n(a)||B(s)||c(a)>=s};g.$observe("min",function(a){s=q(a);h.$validate()})}if(y(g.max)||g.ngMax){var p;h.$validators.max=function(a){return!n(a)||B(p)||c(a)<=p};g.$observe("max",function(a){p=q(a);h.$validate()})}}}function td(b,a,c,d){(d.$$hasNativeValidators=I(a[0].validity))&&d.$parsers.push(function(b){var c=a.prop("validity")||{};
return c.badInput&&!c.typeMismatch?t:b})}function ud(b,a,c,d,e){if(y(d)){b=b(d);if(!b.constant)throw S("ngModel")("constexpr",c,d);return b(a)}return e}function jc(b,a){b="ngClass"+b;return["$animate",function(c){function d(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],m=0;m<b.length;m++)if(e==b[m])continue a;c.push(e)}return c}function e(a){if(!H(a)){if(F(a))return a.split(" ");if(I(a)){var b=[];s(a,function(a,c){a&&(b=b.concat(c.split(" ")))});return b}}return a}return{restrict:"AC",link:function(f,
g,h){function l(a,b){var c=g.data("$classCounts")||{},d=[];s(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<b)&&d.push(a)});g.data("$classCounts",c);return d.join(" ")}function k(b){if(!0===a||f.$index%2===a){var k=e(b||[]);if(!m){var u=l(k,1);h.$addClass(u)}else if(!ga(b,m)){var r=e(m),u=d(k,r),k=d(r,k),u=l(u,1),k=l(k,-1);u&&u.length&&c.addClass(g,u);k&&k.length&&c.removeClass(g,k)}}m=ra(b)}var m;f.$watch(h[b],k,!0);h.$observe("class",function(a){k(f.$eval(h[b]))});"ngClass"!==b&&f.$watch("$index",
function(c,d){var g=c&1;if(g!==(d&1)){var k=e(f.$eval(h[b]));g===a?(g=l(k,1),h.$addClass(g)):(g=l(k,-1),h.$removeClass(g))}})}}}]}function sd(b){function a(a,b){b&&!f[a]?(k.addClass(e,a),f[a]=!0):!b&&f[a]&&(k.removeClass(e,a),f[a]=!1)}function c(b,c){b=b?"-"+uc(b,"-"):"";a(lb+b,!0===c);a(vd+b,!1===c)}var d=b.ctrl,e=b.$element,f={},g=b.set,h=b.unset,l=b.parentForm,k=b.$animate;f[vd]=!(f[lb]=e.hasClass(lb));d.$setValidity=function(b,e,f){e===t?(d.$pending||(d.$pending={}),g(d.$pending,b,f)):(d.$pending&&
h(d.$pending,b,f),wd(d.$pending)&&(d.$pending=t));Wa(e)?e?(h(d.$error,b,f),g(d.$$success,b,f)):(g(d.$error,b,f),h(d.$$success,b,f)):(h(d.$error,b,f),h(d.$$success,b,f));d.$pending?(a(xd,!0),d.$valid=d.$invalid=t,c("",null)):(a(xd,!1),d.$valid=wd(d.$error),d.$invalid=!d.$valid,c("",d.$valid));e=d.$pending&&d.$pending[b]?t:d.$error[b]?!1:d.$$success[b]?!0:null;c(b,e);l.$setValidity(b,e,d)}}function wd(b){if(b)for(var a in b)return!1;return!0}var Nf=/^\/(.+)\/([a-z]*)$/,Q=function(b){return F(b)?b.toLowerCase():
b},sc=Object.prototype.hasOwnProperty,vb=function(b){return F(b)?b.toUpperCase():b},Ra,D,sa,Za=[].slice,pf=[].splice,Of=[].push,Da=Object.prototype.toString,Ka=S("ng"),ca=M.angular||(M.angular={}),cb,ob=0;Ra=Y.documentMode;z.$inject=[];pa.$inject=[];var H=Array.isArray,U=function(b){return F(b)?b.trim():b},gd=function(b){return b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},bb=function(){if(y(bb.isActive_))return bb.isActive_;var b=!(!Y.querySelector("[ng-csp]")&&!Y.querySelector("[data-ng-csp]"));
if(!b)try{new Function("")}catch(a){b=!0}return bb.isActive_=b},sb=["ng-","data-ng-","ng:","x-ng-"],Md=/[A-Z]/g,vc=!1,Rb,oa=1,qb=3,Qd={full:"1.3.13",major:1,minor:3,dot:13,codeName:"meticulous-riffleshuffle"};R.expando="ng339";var Ab=R.cache={},hf=1;R._data=function(b){return this.cache[b[this.expando]]||{}};var cf=/([\:\-\_]+(.))/g,df=/^moz([A-Z])/,Pf={mouseleave:"mouseout",mouseenter:"mouseover"},Ub=S("jqLite"),gf=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Tb=/<|&#?\w+;/,ef=/<([\w:]+)/,ff=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
ia={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option;ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead;ia.th=ia.td;var La=R.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=!1;"complete"===Y.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),R(M).on("load",a))},
toString:function(){var b=[];s(this,function(a){b.push(""+a)});return"["+b.join(", ")+"]"},eq:function(b){return 0<=b?D(this[b]):D(this[this.length+b])},length:0,push:Of,sort:[].sort,splice:[].splice},Fb={};s("multiple selected checked disabled readOnly required open".split(" "),function(b){Fb[Q(b)]=b});var Nc={};s("input select option textarea button form details".split(" "),function(b){Nc[b]=!0});var Oc={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};
s({data:Wb,removeData:yb},function(b,a){R[a]=b});s({data:Wb,inheritedData:Eb,scope:function(b){return D.data(b,"$scope")||Eb(b.parentNode||b,["$isolateScope","$scope"])},isolateScope:function(b){return D.data(b,"$isolateScope")||D.data(b,"$isolateScopeNoTemplate")},controller:Jc,injector:function(b){return Eb(b,"$injector")},removeAttr:function(b,a){b.removeAttribute(a)},hasClass:Bb,css:function(b,a,c){a=db(a);if(y(c))b.style[a]=c;else return b.style[a]},attr:function(b,a,c){var d=Q(a);if(Fb[d])if(y(c))c?
(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d));else return b[a]||(b.attributes.getNamedItem(a)||z).specified?d:t;else if(y(c))b.setAttribute(a,c);else if(b.getAttribute)return b=b.getAttribute(a,2),null===b?t:b},prop:function(b,a,c){if(y(c))b[a]=c;else return b[a]},text:function(){function b(a,b){if(B(b)){var d=a.nodeType;return d===oa||d===qb?a.textContent:""}a.textContent=b}b.$dv="";return b}(),val:function(b,a){if(B(a)){if(b.multiple&&"select"===ua(b)){var c=[];s(b.options,function(a){a.selected&&
c.push(a.value||a.text)});return 0===c.length?null:c}return b.value}b.value=a},html:function(b,a){if(B(a))return b.innerHTML;xb(b,!0);b.innerHTML=a},empty:Kc},function(b,a){R.prototype[a]=function(a,d){var e,f,g=this.length;if(b!==Kc&&(2==b.length&&b!==Bb&&b!==Jc?a:d)===t){if(I(a)){for(e=0;e<g;e++)if(b===Wb)b(this[e],a);else for(f in a)b(this[e],f,a[f]);return this}e=b.$dv;g=e===t?Math.min(g,1):g;for(f=0;f<g;f++){var h=b(this[f],a,d);e=e?e+h:h}return e}for(e=0;e<g;e++)b(this[e],a,d);return this}});
s({removeData:yb,on:function a(c,d,e,f){if(y(f))throw Ub("onargs");if(Fc(c)){var g=zb(c,!0);f=g.events;var h=g.handle;h||(h=g.handle=lf(c,f));for(var g=0<=d.indexOf(" ")?d.split(" "):[d],l=g.length;l--;){d=g[l];var k=f[d];k||(f[d]=[],"mouseenter"===d||"mouseleave"===d?a(c,Pf[d],function(a){var c=a.relatedTarget;c&&(c===this||this.contains(c))||h(a,d)}):"$destroy"!==d&&c.addEventListener(d,h,!1),k=f[d]);k.push(e)}}},off:Ic,one:function(a,c,d){a=D(a);a.on(c,function f(){a.off(c,d);a.off(c,f)});a.on(c,
d)},replaceWith:function(a,c){var d,e=a.parentNode;xb(a);s(new R(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a);d=c})},children:function(a){var c=[];s(a.childNodes,function(a){a.nodeType===oa&&c.push(a)});return c},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,c){var d=a.nodeType;if(d===oa||11===d){c=new R(c);for(var d=0,e=c.length;d<e;d++)a.appendChild(c[d])}},prepend:function(a,c){if(a.nodeType===oa){var d=a.firstChild;s(new R(c),function(c){a.insertBefore(c,
d)})}},wrap:function(a,c){c=D(c).eq(0).clone()[0];var d=a.parentNode;d&&d.replaceChild(c,a);c.appendChild(a)},remove:Lc,detach:function(a){Lc(a,!0)},after:function(a,c){var d=a,e=a.parentNode;c=new R(c);for(var f=0,g=c.length;f<g;f++){var h=c[f];e.insertBefore(h,d.nextSibling);d=h}},addClass:Db,removeClass:Cb,toggleClass:function(a,c,d){c&&s(c.split(" "),function(c){var f=d;B(f)&&(f=!Bb(a,c));(f?Db:Cb)(a,c)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},
find:function(a,c){return a.getElementsByTagName?a.getElementsByTagName(c):[]},clone:Vb,triggerHandler:function(a,c,d){var e,f,g=c.type||c,h=zb(a);if(h=(h=h&&h.events)&&h[g])e={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:z,type:g,target:a},c.type&&(e=x(e,
c)),c=ra(h),f=d?[e].concat(d):[e],s(c,function(c){e.isImmediatePropagationStopped()||c.apply(a,f)})}},function(a,c){R.prototype[c]=function(c,e,f){for(var g,h=0,l=this.length;h<l;h++)B(g)?(g=a(this[h],c,e,f),y(g)&&(g=D(g))):Hc(g,a(this[h],c,e,f));return y(g)?g:this};R.prototype.bind=R.prototype.on;R.prototype.unbind=R.prototype.off});eb.prototype={put:function(a,c){this[Na(a,this.nextUid)]=c},get:function(a){return this[Na(a,this.nextUid)]},remove:function(a){var c=this[a=Na(a,this.nextUid)];delete this[a];
return c}};var Qc=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Qf=/,/,Rf=/^\s*(_?)(\S+?)\1\s*$/,Pc=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Ga=S("$injector");ab.$$annotate=function(a,c,d){var e;if("function"===typeof a){if(!(e=a.$inject)){e=[];if(a.length){if(c)throw F(d)&&d||(d=a.name||mf(a)),Ga("strictdi",d);c=a.toString().replace(Pc,"");c=c.match(Qc);s(c[1].split(Qf),function(a){a.replace(Rf,function(a,c,d){e.push(d)})})}a.$inject=e}}else H(a)?(c=a.length-1,tb(a[c],"fn"),e=a.slice(0,c)):tb(a,"fn",!0);return e};
var Sf=S("$animate"),Ce=["$provide",function(a){this.$$selectors={};this.register=function(c,d){var e=c+"-animation";if(c&&"."!=c.charAt(0))throw Sf("notcsel",c);this.$$selectors[c.substr(1)]=e;a.factory(e,d)};this.classNameFilter=function(a){1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null);return this.$$classNameFilter};this.$get=["$$q","$$asyncCallback","$rootScope",function(a,d,e){function f(d){var f,g=a.defer();g.promise.$$cancelFn=function(){f&&f()};e.$$postDigest(function(){f=
d(function(){g.resolve()})});return g.promise}function g(a,c){var d=[],e=[],f=ha();s((a.attr("class")||"").split(/\s+/),function(a){f[a]=!0});s(c,function(a,c){var g=f[c];!1===a&&g?e.push(c):!0!==a||g||d.push(c)});return 0<d.length+e.length&&[d.length?d:null,e.length?e:null]}function h(a,c,d){for(var e=0,f=c.length;e<f;++e)a[c[e]]=d}function l(){m||(m=a.defer(),d(function(){m.resolve();m=null}));return m.promise}function k(a,c){if(ca.isObject(c)){var d=x(c.from||{},c.to||{});a.css(d)}}var m;return{animate:function(a,
c,d){k(a,{from:c,to:d});return l()},enter:function(a,c,d,e){k(a,e);d?d.after(a):c.prepend(a);return l()},leave:function(a,c){a.remove();return l()},move:function(a,c,d,e){return this.enter(a,c,d,e)},addClass:function(a,c,d){return this.setClass(a,c,[],d)},$$addClassImmediately:function(a,c,d){a=D(a);c=F(c)?c:H(c)?c.join(" "):"";s(a,function(a){Db(a,c)});k(a,d);return l()},removeClass:function(a,c,d){return this.setClass(a,[],c,d)},$$removeClassImmediately:function(a,c,d){a=D(a);c=F(c)?c:H(c)?c.join(" "):
"";s(a,function(a){Cb(a,c)});k(a,d);return l()},setClass:function(a,c,d,e){var k=this,l=!1;a=D(a);var m=a.data("$$animateClasses");m?e&&m.options&&(m.options=ca.extend(m.options||{},e)):(m={classes:{},options:e},l=!0);e=m.classes;c=H(c)?c:c.split(" ");d=H(d)?d:d.split(" ");h(e,c,!0);h(e,d,!1);l&&(m.promise=f(function(c){var d=a.data("$$animateClasses");a.removeData("$$animateClasses");if(d){var e=g(a,d.classes);e&&k.$$setClassImmediately(a,e[0],e[1],d.options)}c()}),a.data("$$animateClasses",m));
return m.promise},$$setClassImmediately:function(a,c,d,e){c&&this.$$addClassImmediately(a,c);d&&this.$$removeClassImmediately(a,d);k(a,e);return l()},enabled:z,cancel:z}}]}],ja=S("$compile");xc.$inject=["$provide","$$sanitizeUriProvider"];var Sc=/^((?:x|data)[\:\-_])/i,qf=S("$controller"),Wc="application/json",$b={"Content-Type":Wc+";charset=utf-8"},sf=/^\[|^\{(?!\{)/,tf={"[":/]$/,"{":/}$/},rf=/^\)\]\}',?\n/,ac=S("$interpolate"),Tf=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,wf={http:80,https:443,ftp:21},Hb=
S("$location"),Uf={$$html5:!1,$$replace:!1,absUrl:Ib("$$absUrl"),url:function(a){if(B(a))return this.$$url;var c=Tf.exec(a);(c[1]||""===a)&&this.path(decodeURIComponent(c[1]));(c[2]||c[1]||""===a)&&this.search(c[3]||"");this.hash(c[5]||"");return this},protocol:Ib("$$protocol"),host:Ib("$$host"),port:Ib("$$port"),path:dd("$$path",function(a){a=null!==a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;case 1:if(F(a)||V(a))a=
a.toString(),this.$$search=rc(a);else if(I(a))a=Ea(a,{}),s(a,function(c,e){null==c&&delete a[e]}),this.$$search=a;else throw Hb("isrcharg");break;default:B(c)||null===c?delete this.$$search[a]:this.$$search[a]=c}this.$$compose();return this},hash:dd("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};s([cd,ec,dc],function(a){a.prototype=Object.create(Uf);a.prototype.state=function(c){if(!arguments.length)return this.$$state;if(a!==dc||!this.$$html5)throw Hb("nostate");
this.$$state=B(c)?null:c;return this}});var la=S("$parse"),Vf=Function.prototype.call,Wf=Function.prototype.apply,Xf=Function.prototype.bind,mb=ha();s({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(a,c){a.constant=a.literal=a.sharedGetter=!0;mb[c]=a});mb["this"]=function(a){return a};mb["this"].sharedGetter=!0;var nb=x(ha(),{"+":function(a,c,d,e){d=d(a,c);e=e(a,c);return y(d)?y(e)?d+e:d:y(e)?e:t},"-":function(a,c,d,e){d=d(a,
c);e=e(a,c);return(y(d)?d:0)-(y(e)?e:0)},"*":function(a,c,d,e){return d(a,c)*e(a,c)},"/":function(a,c,d,e){return d(a,c)/e(a,c)},"%":function(a,c,d,e){return d(a,c)%e(a,c)},"===":function(a,c,d,e){return d(a,c)===e(a,c)},"!==":function(a,c,d,e){return d(a,c)!==e(a,c)},"==":function(a,c,d,e){return d(a,c)==e(a,c)},"!=":function(a,c,d,e){return d(a,c)!=e(a,c)},"<":function(a,c,d,e){return d(a,c)<e(a,c)},">":function(a,c,d,e){return d(a,c)>e(a,c)},"<=":function(a,c,d,e){return d(a,c)<=e(a,c)},">=":function(a,
c,d,e){return d(a,c)>=e(a,c)},"&&":function(a,c,d,e){return d(a,c)&&e(a,c)},"||":function(a,c,d,e){return d(a,c)||e(a,c)},"!":function(a,c,d){return!d(a,c)},"=":!0,"|":!0}),Yf={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},hc=function(a){this.options=a};hc.prototype={constructor:hc,lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();
else if(this.isIdent(a))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var c=a+this.peek(),d=c+this.peek(2),e=nb[c],f=nb[d];nb[a]||e||f?(a=f?d:e?c:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,c){return-1!==c.indexOf(a)},peek:function(a){a=a||1;return this.index+
a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,c,d){d=d||this.index;c=y(c)?"s "+c+"-"+this.index+" ["+this.text.substring(c,d)+"]":" "+d;throw la("lexerr",a,c,this.text);
},readNumber:function(){for(var a="",c=this.index;this.index<this.text.length;){var d=Q(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var e=this.peek();if("e"==d&&this.isExpOperator(e))a+=d;else if(this.isExpOperator(d)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:c,text:a,constant:!0,value:Number(a)})},readIdent:function(){for(var a=
this.index;this.index<this.text.length;){var c=this.text.charAt(this.index);if(!this.isIdent(c)&&!this.isNumber(c))break;this.index++}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var c=this.index;this.index++;for(var d="",e=a,f=!1;this.index<this.text.length;){var g=this.text.charAt(this.index),e=e+g;if(f)"u"===g?(f=this.text.substring(this.index+1,this.index+5),f.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+f+"]"),this.index+=
4,d+=String.fromCharCode(parseInt(f,16))):d+=Yf[g]||g,f=!1;else if("\\"===g)f=!0;else{if(g===a){this.index++;this.tokens.push({index:c,text:e,constant:!0,value:d});return}d+=g}this.index++}this.throwError("Unterminated quote",c)}};var ib=function(a,c,d){this.lexer=a;this.$filter=c;this.options=d};ib.ZERO=x(function(){return 0},{sharedGetter:!0,constant:!0});ib.prototype={constructor:ib,parse:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.statements();0!==this.tokens.length&&this.throwError("is an unexpected token",
this.tokens[0]);a.literal=!!a.literal;a.constant=!!a.constant;return a},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.peek().identifier&&this.peek().text in mb?a=mb[this.consume().text]:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var c,d;c=this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,
d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,c){throw la("syntax",c.text,a,c.index+1,this.text,this.text.substring(c.index));},peekToken:function(){if(0===this.tokens.length)throw la("ueoe",this.text);return this.tokens[0]},peek:function(a,c,d,e){return this.peekAhead(0,a,c,d,e)},peekAhead:function(a,c,d,e,f){if(this.tokens.length>a){a=this.tokens[a];var g=a.text;if(g===c||g===d||g===e||g===
f||!(c||d||e||f))return a}return!1},expect:function(a,c,d,e){return(a=this.peek(a,c,d,e))?(this.tokens.shift(),a):!1},consume:function(a){if(0===this.tokens.length)throw la("ueoe",this.text);var c=this.expect(a);c||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return c},unaryFn:function(a,c){var d=nb[a];return x(function(a,f){return d(a,f,c)},{constant:c.constant,inputs:[c]})},binaryFn:function(a,c,d,e){var f=nb[c];return x(function(c,e){return f(c,e,a,d)},{constant:a.constant&&
d.constant,inputs:!e&&[a,d]})},identifier:function(){for(var a=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)a+=this.consume().text+this.consume().text;return yf(a,this.options,this.text)},constant:function(){var a=this.consume().value;return x(function(){return a},{constant:!0,literal:!0})},statements:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(c,
d){for(var e,f=0,g=a.length;f<g;f++)e=a[f](c,d);return e}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},filter:function(a){var c=this.$filter(this.consume().text),d,e;if(this.peek(":"))for(d=[],e=[];this.expect(":");)d.push(this.expression());var f=[a].concat(d||[]);return x(function(f,h){var l=a(f,h);if(e){e[0]=l;for(l=d.length;l--;)e[l+1]=d[l](f,h);return c.apply(t,e)}return c(l)},{constant:!c.$stateful&&f.every(fc),inputs:!c.$stateful&&f})},expression:function(){return this.assignment()},
assignment:function(){var a=this.ternary(),c,d;return(d=this.expect("="))?(a.assign||this.throwError("implies assignment but ["+this.text.substring(0,d.index)+"] can not be assigned to",d),c=this.ternary(),x(function(d,f){return a.assign(d,c(d,f),f)},{inputs:[a,c]})):a},ternary:function(){var a=this.logicalOR(),c;if(this.expect("?")&&(c=this.assignment(),this.consume(":"))){var d=this.assignment();return x(function(e,f){return a(e,f)?c(e,f):d(e,f)},{constant:a.constant&&c.constant&&d.constant})}return a},
logicalOR:function(){for(var a=this.logicalAND(),c;c=this.expect("||");)a=this.binaryFn(a,c.text,this.logicalAND(),!0);return a},logicalAND:function(){for(var a=this.equality(),c;c=this.expect("&&");)a=this.binaryFn(a,c.text,this.equality(),!0);return a},equality:function(){for(var a=this.relational(),c;c=this.expect("==","!=","===","!==");)a=this.binaryFn(a,c.text,this.relational());return a},relational:function(){for(var a=this.additive(),c;c=this.expect("<",">","<=",">=");)a=this.binaryFn(a,c.text,
this.additive());return a},additive:function(){for(var a=this.multiplicative(),c;c=this.expect("+","-");)a=this.binaryFn(a,c.text,this.multiplicative());return a},multiplicative:function(){for(var a=this.unary(),c;c=this.expect("*","/","%");)a=this.binaryFn(a,c.text,this.unary());return a},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(ib.ZERO,a.text,this.unary()):(a=this.expect("!"))?this.unaryFn(a.text,this.unary()):this.primary()},fieldAccess:function(a){var c=
this.identifier();return x(function(d,e,f){d=f||a(d,e);return null==d?t:c(d)},{assign:function(d,e,f){var g=a(d,f);g||a.assign(d,g={},f);return c.assign(g,e)}})},objectIndex:function(a){var c=this.text,d=this.expression();this.consume("]");return x(function(e,f){var g=a(e,f),h=d(e,f);ta(h,c);return g?ma(g[h],c):t},{assign:function(e,f,g){var h=ta(d(e,g),c),l=ma(a(e,g),c);l||a.assign(e,l={},g);return l[h]=f}})},functionCall:function(a,c){var d=[];if(")"!==this.peekToken().text){do d.push(this.expression());
while(this.expect(","))}this.consume(")");var e=this.text,f=d.length?[]:null;return function(g,h){var l=c?c(g,h):y(c)?t:g,k=a(g,h,l)||z;if(f)for(var m=d.length;m--;)f[m]=ma(d[m](g,h),e);ma(l,e);if(k){if(k.constructor===k)throw la("isecfn",e);if(k===Vf||k===Wf||k===Xf)throw la("isecff",e);}l=k.apply?k.apply(l,f):k(f[0],f[1],f[2],f[3],f[4]);f&&(f.length=0);return ma(l,e)}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))
}this.consume("]");return x(function(c,d){for(var e=[],f=0,g=a.length;f<g;f++)e.push(a[f](c,d));return e},{literal:!0,constant:a.every(fc),inputs:a})},object:function(){var a=[],c=[];if("}"!==this.peekToken().text){do{if(this.peek("}"))break;var d=this.consume();d.constant?a.push(d.value):d.identifier?a.push(d.text):this.throwError("invalid key",d);this.consume(":");c.push(this.expression())}while(this.expect(","))}this.consume("}");return x(function(d,f){for(var g={},h=0,l=c.length;h<l;h++)g[a[h]]=
c[h](d,f);return g},{literal:!0,constant:c.every(fc),inputs:c})}};var Af=ha(),zf=ha(),Bf=Object.prototype.valueOf,Ca=S("$sce"),na={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},ja=S("$compile"),Z=Y.createElement("a"),id=Ba(M.location.href);Ec.$inject=["$provide"];jd.$inject=["$locale"];ld.$inject=["$locale"];var od=".",Lf={yyyy:$("FullYear",4),yy:$("FullYear",2,0,!0),y:$("FullYear",1),MMMM:Kb("Month"),MMM:Kb("Month",!0),MM:$("Month",2,1),M:$("Month",1,1),dd:$("Date",2),d:$("Date",
1),HH:$("Hours",2),H:$("Hours",1),hh:$("Hours",2,-12),h:$("Hours",1,-12),mm:$("Minutes",2),m:$("Minutes",1),ss:$("Seconds",2),s:$("Seconds",1),sss:$("Milliseconds",3),EEEE:Kb("Day"),EEE:Kb("Day",!0),a:function(a,c){return 12>a.getHours()?c.AMPMS[0]:c.AMPMS[1]},Z:function(a){a=-1*a.getTimezoneOffset();return a=(0<=a?"+":"")+(Jb(Math[0<a?"floor":"ceil"](a/60),2)+Jb(Math.abs(a%60),2))},ww:qd(2),w:qd(1)},Kf=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,Jf=/^\-?\d+$/;
kd.$inject=["$locale"];var Gf=ea(Q),Hf=ea(vb);md.$inject=["$parse"];var Td=ea({restrict:"E",compile:function(a,c){if(!c.href&&!c.xlinkHref&&!c.name)return function(a,c){if("a"===c[0].nodeName.toLowerCase()){var f="[object SVGAnimatedString]"===Da.call(c.prop("href"))?"xlink:href":"href";c.on("click",function(a){c.attr(f)||a.preventDefault()})}}}}),wb={};s(Fb,function(a,c){if("multiple"!=a){var d=ya("ng-"+c);wb[d]=function(){return{restrict:"A",priority:100,link:function(a,f,g){a.$watch(g[d],function(a){g.$set(c,
!!a)})}}}}});s(Oc,function(a,c){wb[c]=function(){return{priority:100,link:function(a,e,f){if("ngPattern"===c&&"/"==f.ngPattern.charAt(0)&&(e=f.ngPattern.match(Nf))){f.$set("ngPattern",new RegExp(e[1],e[2]));return}a.$watch(f[c],function(a){f.$set(c,a)})}}}});s(["src","srcset","href"],function(a){var c=ya("ng-"+a);wb[c]=function(){return{priority:99,link:function(d,e,f){var g=a,h=a;"href"===a&&"[object SVGAnimatedString]"===Da.call(e.prop("href"))&&(h="xlinkHref",f.$attr[h]="xlink:href",g=null);f.$observe(c,
function(c){c?(f.$set(h,c),Ra&&g&&e.prop(g,f[h])):"href"===a&&f.$set(h,null)})}}}});var Lb={$addControl:z,$$renameControl:function(a,c){a.$name=c},$removeControl:z,$setValidity:z,$setDirty:z,$setPristine:z,$setSubmitted:z};rd.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var yd=function(a){return["$timeout",function(c){return{name:"form",restrict:a?"EAC":"E",controller:rd,compile:function(a){a.addClass(Sa).addClass(lb);return{pre:function(a,d,g,h){if(!("action"in g)){var l=function(c){a.$apply(function(){h.$commitViewValue();
h.$setSubmitted()});c.preventDefault()};d[0].addEventListener("submit",l,!1);d.on("$destroy",function(){c(function(){d[0].removeEventListener("submit",l,!1)},0,!1)})}var k=h.$$parentForm,m=h.$name;m&&(hb(a,null,m,h,m),g.$observe(g.name?"name":"ngForm",function(c){m!==c&&(hb(a,null,m,t,m),m=c,hb(a,null,m,h,m),k.$$renameControl(h,m))}));d.on("$destroy",function(){k.$removeControl(h);m&&hb(a,null,m,t,m);x(h,Lb)})}}}}}]},Ud=yd(),ge=yd(!0),Mf=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,
Zf=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,$f=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,ag=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,zd=/^(\d{4})-(\d{2})-(\d{2})$/,Ad=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,kc=/^(\d{4})-W(\d\d)$/,Bd=/^(\d{4})-(\d\d)$/,Cd=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Dd={text:function(a,c,d,e,f,g){jb(a,c,d,e,f,g);ic(e)},date:kb("date",zd,Nb(zd,["yyyy",
"MM","dd"]),"yyyy-MM-dd"),"datetime-local":kb("datetimelocal",Ad,Nb(Ad,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:kb("time",Cd,Nb(Cd,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:kb("week",kc,function(a,c){if(qa(a))return a;if(F(a)){kc.lastIndex=0;var d=kc.exec(a);if(d){var e=+d[1],f=+d[2],g=d=0,h=0,l=0,k=pd(e),f=7*(f-1);c&&(d=c.getHours(),g=c.getMinutes(),h=c.getSeconds(),l=c.getMilliseconds());return new Date(e,0,k.getDate()+f,d,g,h,l)}}return NaN},"yyyy-Www"),month:kb("month",
Bd,Nb(Bd,["yyyy","MM"]),"yyyy-MM"),number:function(a,c,d,e,f,g){td(a,c,d,e);jb(a,c,d,e,f,g);e.$$parserName="number";e.$parsers.push(function(a){return e.$isEmpty(a)?null:ag.test(a)?parseFloat(a):t});e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!V(a))throw Ob("numfmt",a);a=a.toString()}return a});if(d.min||d.ngMin){var h;e.$validators.min=function(a){return e.$isEmpty(a)||B(h)||a>=h};d.$observe("min",function(a){y(a)&&!V(a)&&(a=parseFloat(a,10));h=V(a)&&!isNaN(a)?a:t;e.$validate()})}if(d.max||
d.ngMax){var l;e.$validators.max=function(a){return e.$isEmpty(a)||B(l)||a<=l};d.$observe("max",function(a){y(a)&&!V(a)&&(a=parseFloat(a,10));l=V(a)&&!isNaN(a)?a:t;e.$validate()})}},url:function(a,c,d,e,f,g){jb(a,c,d,e,f,g);ic(e);e.$$parserName="url";e.$validators.url=function(a,c){var d=a||c;return e.$isEmpty(d)||Zf.test(d)}},email:function(a,c,d,e,f,g){jb(a,c,d,e,f,g);ic(e);e.$$parserName="email";e.$validators.email=function(a,c){var d=a||c;return e.$isEmpty(d)||$f.test(d)}},radio:function(a,c,
d,e){B(d.name)&&c.attr("name",++ob);c.on("click",function(a){c[0].checked&&e.$setViewValue(d.value,a&&a.type)});e.$render=function(){c[0].checked=d.value==e.$viewValue};d.$observe("value",e.$render)},checkbox:function(a,c,d,e,f,g,h,l){var k=ud(l,a,"ngTrueValue",d.ngTrueValue,!0),m=ud(l,a,"ngFalseValue",d.ngFalseValue,!1);c.on("click",function(a){e.$setViewValue(c[0].checked,a&&a.type)});e.$render=function(){c[0].checked=e.$viewValue};e.$isEmpty=function(a){return!1===a};e.$formatters.push(function(a){return ga(a,
k)});e.$parsers.push(function(a){return a?k:m})},hidden:z,button:z,submit:z,reset:z,file:z},yc=["$browser","$sniffer","$filter","$parse",function(a,c,d,e){return{restrict:"E",require:["?ngModel"],link:{pre:function(f,g,h,l){l[0]&&(Dd[Q(h.type)]||Dd.text)(f,g,h,l[0],c,a,d,e)}}}}],bg=/^(true|false|\d+)$/,ye=function(){return{restrict:"A",priority:100,compile:function(a,c){return bg.test(c.ngValue)?function(a,c,f){f.$set("value",a.$eval(f.ngValue))}:function(a,c,f){a.$watch(f.ngValue,function(a){f.$set("value",
a)})}}}},Zd=["$compile",function(a){return{restrict:"AC",compile:function(c){a.$$addBindingClass(c);return function(c,e,f){a.$$addBindingInfo(e,f.ngBind);e=e[0];c.$watch(f.ngBind,function(a){e.textContent=a===t?"":a})}}}}],ae=["$interpolate","$compile",function(a,c){return{compile:function(d){c.$$addBindingClass(d);return function(d,f,g){d=a(f.attr(g.$attr.ngBindTemplate));c.$$addBindingInfo(f,d.expressions);f=f[0];g.$observe("ngBindTemplate",function(a){f.textContent=a===t?"":a})}}}}],$d=["$sce",
"$parse","$compile",function(a,c,d){return{restrict:"A",compile:function(e,f){var g=c(f.ngBindHtml),h=c(f.ngBindHtml,function(a){return(a||"").toString()});d.$$addBindingClass(e);return function(c,e,f){d.$$addBindingInfo(e,f.ngBindHtml);c.$watch(h,function(){e.html(a.getTrustedHtml(g(c))||"")})}}}}],xe=ea({restrict:"A",require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),be=jc("",!0),de=jc("Odd",0),ce=jc("Even",1),ee=Ja({compile:function(a,c){c.$set("ngCloak",
t);a.removeClass("ng-cloak")}}),fe=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Dc={},cg={blur:!0,focus:!0};s("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var c=ya("ng-"+a);Dc[c]=["$parse","$rootScope",function(d,e){return{restrict:"A",compile:function(f,g){var h=d(g[c],null,!0);return function(c,d){d.on(a,function(d){var f=function(){h(c,{$event:d})};
cg[a]&&e.$$phase?c.$evalAsync(f):c.$apply(f)})}}}}]});var ie=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,l,k;c.$watch(e.ngIf,function(c){c?l||g(function(c,f){l=f;c[c.length++]=Y.createComment(" end ngIf: "+e.ngIf+" ");h={clone:c};a.enter(c,d.parent(),d)}):(k&&(k.remove(),k=null),l&&(l.$destroy(),l=null),h&&(k=ub(h.clone),a.leave(k).then(function(){k=null}),h=null))})}}}],je=["$templateRequest","$anchorScroll",
"$animate","$sce",function(a,c,d,e){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ca.noop,compile:function(f,g){var h=g.ngInclude||g.src,l=g.onload||"",k=g.autoscroll;return function(f,g,q,s,r){var t=0,p,v,w,L=function(){v&&(v.remove(),v=null);p&&(p.$destroy(),p=null);w&&(d.leave(w).then(function(){v=null}),v=w,w=null)};f.$watch(e.parseAsResourceUrl(h),function(e){var h=function(){!y(k)||k&&!f.$eval(k)||c()},q=++t;e?(a(e,!0).then(function(a){if(q===t){var c=f.$new();
s.template=a;a=r(c,function(a){L();d.enter(a,null,g).then(h)});p=c;w=a;p.$emit("$includeContentLoaded",e);f.$eval(l)}},function(){q===t&&(L(),f.$emit("$includeContentError",e))}),f.$emit("$includeContentRequested",e)):(L(),s.template=null)})}}}}],Ae=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){/SVG/.test(d[0].toString())?(d.empty(),a(Gc(f.template,Y).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),a(d.contents())(c))}}}],
ke=Ja({priority:450,compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),we=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,c,d,e){var f=c.attr(d.$attr.ngList)||", ",g="false"!==d.ngTrim,h=g?U(f):f;e.$parsers.push(function(a){if(!B(a)){var c=[];a&&s(a.split(h),function(a){a&&c.push(g?U(a):a)});return c}});e.$formatters.push(function(a){return H(a)?a.join(f):t});e.$isEmpty=function(a){return!a||!a.length}}}},lb="ng-valid",vd="ng-invalid",Sa="ng-pristine",
Mb="ng-dirty",xd="ng-pending",Ob=new S("ngModel"),dg=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,c,d,e,f,g,h,l,k,m){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=t;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success=
{};this.$pending=t;this.$name=m(d.name||"",!1)(a);var n=f(d.ngModel),q=n.assign,u=n,r=q,P=null,p=this;this.$$setOptions=function(a){if((p.$options=a)&&a.getterSetter){var c=f(d.ngModel+"()"),g=f(d.ngModel+"($$$p)");u=function(a){var d=n(a);G(d)&&(d=c(a));return d};r=function(a,c){G(n(a))?g(a,{$$$p:p.$modelValue}):q(a,p.$modelValue)}}else if(!n.assign)throw Ob("nonassign",d.ngModel,va(e));};this.$render=z;this.$isEmpty=function(a){return B(a)||""===a||null===a||a!==a};var v=e.inheritedData("$formController")||
Lb,w=0;sd({ctrl:this,$element:e,set:function(a,c){a[c]=!0},unset:function(a,c){delete a[c]},parentForm:v,$animate:g});this.$setPristine=function(){p.$dirty=!1;p.$pristine=!0;g.removeClass(e,Mb);g.addClass(e,Sa)};this.$setDirty=function(){p.$dirty=!0;p.$pristine=!1;g.removeClass(e,Sa);g.addClass(e,Mb);v.$setDirty()};this.$setUntouched=function(){p.$touched=!1;p.$untouched=!0;g.setClass(e,"ng-untouched","ng-touched")};this.$setTouched=function(){p.$touched=!0;p.$untouched=!1;g.setClass(e,"ng-touched",
"ng-untouched")};this.$rollbackViewValue=function(){h.cancel(P);p.$viewValue=p.$$lastCommittedViewValue;p.$render()};this.$validate=function(){if(!V(p.$modelValue)||!isNaN(p.$modelValue)){var a=p.$$rawModelValue,c=p.$valid,d=p.$modelValue,e=p.$options&&p.$options.allowInvalid;p.$$runValidators(p.$error[p.$$parserName||"parse"]?!1:t,a,p.$$lastCommittedViewValue,function(f){e||c===f||(p.$modelValue=f?a:t,p.$modelValue!==d&&p.$$writeModelToScope())})}};this.$$runValidators=function(a,c,d,e){function f(){var a=
!0;s(p.$validators,function(e,f){var g=e(c,d);a=a&&g;h(f,g)});return a?!0:(s(p.$asyncValidators,function(a,c){h(c,null)}),!1)}function g(){var a=[],e=!0;s(p.$asyncValidators,function(f,g){var l=f(c,d);if(!l||!G(l.then))throw Ob("$asyncValidators",l);h(g,t);a.push(l.then(function(){h(g,!0)},function(a){e=!1;h(g,!1)}))});a.length?k.all(a).then(function(){l(e)},z):l(!0)}function h(a,c){m===w&&p.$setValidity(a,c)}function l(a){m===w&&e(a)}w++;var m=w;(function(a){var c=p.$$parserName||"parse";if(a===
t)h(c,null);else if(h(c,a),!a)return s(p.$validators,function(a,c){h(c,null)}),s(p.$asyncValidators,function(a,c){h(c,null)}),!1;return!0})(a)?f()?g():l(!1):l(!1)};this.$commitViewValue=function(){var a=p.$viewValue;h.cancel(P);if(p.$$lastCommittedViewValue!==a||""===a&&p.$$hasNativeValidators)p.$$lastCommittedViewValue=a,p.$pristine&&this.$setDirty(),this.$$parseAndValidate()};this.$$parseAndValidate=function(){var c=p.$$lastCommittedViewValue,d=B(c)?t:!0;if(d)for(var e=0;e<p.$parsers.length;e++)if(c=
p.$parsers[e](c),B(c)){d=!1;break}V(p.$modelValue)&&isNaN(p.$modelValue)&&(p.$modelValue=u(a));var f=p.$modelValue,g=p.$options&&p.$options.allowInvalid;p.$$rawModelValue=c;g&&(p.$modelValue=c,p.$modelValue!==f&&p.$$writeModelToScope());p.$$runValidators(d,c,p.$$lastCommittedViewValue,function(a){g||(p.$modelValue=a?c:t,p.$modelValue!==f&&p.$$writeModelToScope())})};this.$$writeModelToScope=function(){r(a,p.$modelValue);s(p.$viewChangeListeners,function(a){try{a()}catch(d){c(d)}})};this.$setViewValue=
function(a,c){p.$viewValue=a;p.$options&&!p.$options.updateOnDefault||p.$$debounceViewValueCommit(c)};this.$$debounceViewValueCommit=function(c){var d=0,e=p.$options;e&&y(e.debounce)&&(e=e.debounce,V(e)?d=e:V(e[c])?d=e[c]:V(e["default"])&&(d=e["default"]));h.cancel(P);d?P=h(function(){p.$commitViewValue()},d):l.$$phase?p.$commitViewValue():a.$apply(function(){p.$commitViewValue()})};a.$watch(function(){var c=u(a);if(c!==p.$modelValue){p.$modelValue=p.$$rawModelValue=c;for(var d=p.$formatters,e=d.length,
f=c;e--;)f=d[e](f);p.$viewValue!==f&&(p.$viewValue=p.$$lastCommittedViewValue=f,p.$render(),p.$$runValidators(t,c,f,z))}return c})}],ve=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:dg,priority:1,compile:function(c){c.addClass(Sa).addClass("ng-untouched").addClass(lb);return{pre:function(a,c,f,g){var h=g[0],l=g[1]||Lb;h.$$setOptions(g[2]&&g[2].$options);l.$addControl(h);f.$observe("name",function(a){h.$name!==a&&l.$$renameControl(h,a)});a.$on("$destroy",
function(){l.$removeControl(h)})},post:function(c,e,f,g){var h=g[0];if(h.$options&&h.$options.updateOn)e.on(h.$options.updateOn,function(a){h.$$debounceViewValueCommit(a&&a.type)});e.on("blur",function(e){h.$touched||(a.$$phase?c.$evalAsync(h.$setTouched):c.$apply(h.$setTouched))})}}}}}],eg=/(\s+|^)default(\s+|$)/,ze=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,c){var d=this;this.$options=a.$eval(c.ngModelOptions);this.$options.updateOn!==t?(this.$options.updateOnDefault=
!1,this.$options.updateOn=U(this.$options.updateOn.replace(eg,function(){d.$options.updateOnDefault=!0;return" "}))):this.$options.updateOnDefault=!0}]}},le=Ja({terminal:!0,priority:1E3}),me=["$locale","$interpolate",function(a,c){var d=/{}/g,e=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(f,g,h){function l(a){g.text(a||"")}var k=h.count,m=h.$attr.when&&g.attr(h.$attr.when),n=h.offset||0,q=f.$eval(m)||{},u={},m=c.startSymbol(),r=c.endSymbol(),t=m+k+"-"+n+r,p=ca.noop,v;s(h,function(a,c){var d=
e.exec(c);d&&(d=(d[1]?"-":"")+Q(d[2]),q[d]=g.attr(h.$attr[c]))});s(q,function(a,e){u[e]=c(a.replace(d,t))});f.$watch(k,function(c){c=parseFloat(c);var d=isNaN(c);d||c in q||(c=a.pluralCat(c-n));c===v||d&&isNaN(v)||(p(),p=f.$watch(u[c],l),v=c)})}}}],ne=["$parse","$animate",function(a,c){var d=S("ngRepeat"),e=function(a,c,d,e,k,m,n){a[d]=e;k&&(a[k]=m);a.$index=c;a.$first=0===c;a.$last=c===n-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(c&1))};return{restrict:"A",multiElement:!0,transclude:"element",
priority:1E3,terminal:!0,$$tlb:!0,compile:function(f,g){var h=g.ngRepeat,l=Y.createComment(" end ngRepeat: "+h+" "),k=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!k)throw d("iexp",h);var m=k[1],n=k[2],q=k[3],u=k[4],k=m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!k)throw d("iidexp",m);var r=k[3]||k[1],y=k[2];if(q&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(q)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(q)))throw d("badident",
q);var p,v,w,B,z={$id:Na};u?p=a(u):(w=function(a,c){return Na(c)},B=function(a){return a});return function(a,f,g,k,m){p&&(v=function(c,d,e){y&&(z[y]=c);z[r]=d;z.$index=e;return p(a,z)});var u=ha();a.$watchCollection(n,function(g){var k,p,n=f[0],E,z=ha(),x,T,N,G,H,C,I;q&&(a[q]=g);if(Ta(g))H=g,p=v||w;else{p=v||B;H=[];for(I in g)g.hasOwnProperty(I)&&"$"!=I.charAt(0)&&H.push(I);H.sort()}x=H.length;I=Array(x);for(k=0;k<x;k++)if(T=g===H?k:H[k],N=g[T],G=p(T,N,k),u[G])C=u[G],delete u[G],z[G]=C,I[k]=C;else{if(z[G])throw s(I,
function(a){a&&a.scope&&(u[a.id]=a)}),d("dupes",h,G,N);I[k]={id:G,scope:t,clone:t};z[G]=!0}for(E in u){C=u[E];G=ub(C.clone);c.leave(G);if(G[0].parentNode)for(k=0,p=G.length;k<p;k++)G[k].$$NG_REMOVED=!0;C.scope.$destroy()}for(k=0;k<x;k++)if(T=g===H?k:H[k],N=g[T],C=I[k],C.scope){E=n;do E=E.nextSibling;while(E&&E.$$NG_REMOVED);C.clone[0]!=E&&c.move(ub(C.clone),null,D(n));n=C.clone[C.clone.length-1];e(C.scope,k,r,N,y,T,x)}else m(function(a,d){C.scope=d;var f=l.cloneNode(!1);a[a.length++]=f;c.enter(a,
null,D(n));n=f;C.clone=a;z[C.id]=C;e(C.scope,k,r,N,y,T,x)});u=z})}}}}],oe=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(c,d,e){c.$watch(e.ngShow,function(c){a[c?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],he=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(c,d,e){c.$watch(e.ngHide,function(c){a[c?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],pe=Ja(function(a,c,d){a.$watchCollection(d.ngStyle,
function(a,d){d&&a!==d&&s(d,function(a,d){c.css(d,"")});a&&c.css(a)})}),qe=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,f){var g=[],h=[],l=[],k=[],m=function(a,c){return function(){a.splice(c,1)}};c.$watch(e.ngSwitch||e.on,function(c){var d,e;d=0;for(e=l.length;d<e;++d)a.cancel(l[d]);d=l.length=0;for(e=k.length;d<e;++d){var r=ub(h[d].clone);k[d].$destroy();(l[d]=a.leave(r)).then(m(l,d))}h.length=0;k.length=0;(g=
f.cases["!"+c]||f.cases["?"])&&s(g,function(c){c.transclude(function(d,e){k.push(e);var f=c.element;d[d.length++]=Y.createComment(" end ngSwitchWhen: ");h.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],re=Ja({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,c,d,e,f){e.cases["!"+d.ngSwitchWhen]=e.cases["!"+d.ngSwitchWhen]||[];e.cases["!"+d.ngSwitchWhen].push({transclude:f,element:c})}}),se=Ja({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,
link:function(a,c,d,e,f){e.cases["?"]=e.cases["?"]||[];e.cases["?"].push({transclude:f,element:c})}}),ue=Ja({restrict:"EAC",link:function(a,c,d,e,f){if(!f)throw S("ngTransclude")("orphan",va(c));f(function(a){c.empty();c.append(a)})}}),Vd=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){"text/ng-template"==d.type&&a.put(d.id,c[0].text)}}}],fg=S("ngOptions"),te=ea({restrict:"A",terminal:!0}),Wd=["$compile","$parse",function(a,c){var d=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,
e={$setViewValue:z};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,c,d){var l=this,k={},m=e,n;l.databound=d.ngModel;l.init=function(a,c,d){m=a;n=d};l.addOption=function(c,d){Ma(c,'"option value"');k[c]=!0;m.$viewValue==c&&(a.val(c),n.parent()&&n.remove());d&&d[0].hasAttribute("selected")&&(d[0].selected=!0)};l.removeOption=function(a){this.hasOption(a)&&(delete k[a],m.$viewValue===a&&this.renderUnknownOption(a))};l.renderUnknownOption=function(c){c=
"? "+Na(c)+" ?";n.val(c);a.prepend(n);a.val(c);n.prop("selected",!0)};l.hasOption=function(a){return k.hasOwnProperty(a)};c.$on("$destroy",function(){l.renderUnknownOption=z})}],link:function(e,g,h,l){function k(a,c,d,e){d.$render=function(){var a=d.$viewValue;e.hasOption(a)?(C.parent()&&C.remove(),c.val(a),""===a&&p.prop("selected",!0)):B(a)&&p?c.val(""):e.renderUnknownOption(a)};c.on("change",function(){a.$apply(function(){C.parent()&&C.remove();d.$setViewValue(c.val())})})}function m(a,c,d){var e;
d.$render=function(){var a=new eb(d.$viewValue);s(c.find("option"),function(c){c.selected=y(a.get(c.value))})};a.$watch(function(){ga(e,d.$viewValue)||(e=ra(d.$viewValue),d.$render())});c.on("change",function(){a.$apply(function(){var a=[];s(c.find("option"),function(c){c.selected&&a.push(c.value)});d.$setViewValue(a)})})}function n(e,f,g){function h(a,c,d){S[x]=d;D&&(S[D]=c);return a(e,S)}function k(a){var c;if(u)if(M&&H(a)){c=new eb([]);for(var d=0;d<a.length;d++)c.put(h(M,null,a[d]),!0)}else c=
new eb(a);else M&&(a=h(M,null,a));return function(d,e){var f;f=M?M:B?B:F;return u?y(c.remove(h(f,d,e))):a===h(f,d,e)}}function l(){v||(e.$$postDigest(p),v=!0)}function m(a,c,d){a[c]=a[c]||0;a[c]+=d?1:-1}function p(){v=!1;var a={"":[]},c=[""],d,l,n,r,t;n=g.$viewValue;r=O(e)||[];var B=D?Object.keys(r).sort():r,x,A,H,F,N={};t=k(n);var J=!1,U,V;Q={};for(F=0;H=B.length,F<H;F++){x=F;if(D&&(x=B[F],"$"===x.charAt(0)))continue;A=r[x];d=h(I,x,A)||"";(l=a[d])||(l=a[d]=[],c.push(d));d=t(x,A);J=J||d;A=h(C,x,A);
A=y(A)?A:"";V=M?M(e,S):D?B[F]:F;M&&(Q[V]=x);l.push({id:V,label:A,selected:d})}u||(z||null===n?a[""].unshift({id:"",label:"",selected:!J}):J||a[""].unshift({id:"?",label:"",selected:!0}));x=0;for(B=c.length;x<B;x++){d=c[x];l=a[d];R.length<=x?(n={element:G.clone().attr("label",d),label:l.label},r=[n],R.push(r),f.append(n.element)):(r=R[x],n=r[0],n.label!=d&&n.element.attr("label",n.label=d));J=null;F=0;for(H=l.length;F<H;F++)d=l[F],(t=r[F+1])?(J=t.element,t.label!==d.label&&(m(N,t.label,!1),m(N,d.label,
!0),J.text(t.label=d.label),J.prop("label",t.label)),t.id!==d.id&&J.val(t.id=d.id),J[0].selected!==d.selected&&(J.prop("selected",t.selected=d.selected),Ra&&J.prop("selected",t.selected))):(""===d.id&&z?U=z:(U=w.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).prop("label",d.label).text(d.label),r.push(t={element:U,label:d.label,id:d.id,selected:d.selected}),m(N,d.label,!0),J?J.after(U):n.element.append(U),J=U);for(F++;r.length>F;)d=r.pop(),m(N,d.label,!1),d.element.remove()}for(;R.length>
x;){l=R.pop();for(F=1;F<l.length;++F)m(N,l[F].label,!1);l[0].element.remove()}s(N,function(a,c){0<a?q.addOption(c):0>a&&q.removeOption(c)})}var n;if(!(n=r.match(d)))throw fg("iexp",r,va(f));var C=c(n[2]||n[1]),x=n[4]||n[6],A=/ as /.test(n[0])&&n[1],B=A?c(A):null,D=n[5],I=c(n[3]||""),F=c(n[2]?n[1]:x),O=c(n[7]),M=n[8]?c(n[8]):null,Q={},R=[[{element:f,label:""}]],S={};z&&(a(z)(e),z.removeClass("ng-scope"),z.remove());f.empty();f.on("change",function(){e.$apply(function(){var a=O(e)||[],c;if(u)c=[],s(f.val(),
function(d){d=M?Q[d]:d;c.push("?"===d?t:""===d?null:h(B?B:F,d,a[d]))});else{var d=M?Q[f.val()]:f.val();c="?"===d?t:""===d?null:h(B?B:F,d,a[d])}g.$setViewValue(c);p()})});g.$render=p;e.$watchCollection(O,l);e.$watchCollection(function(){var a=O(e),c;if(a&&H(a)){c=Array(a.length);for(var d=0,f=a.length;d<f;d++)c[d]=h(C,d,a[d])}else if(a)for(d in c={},a)a.hasOwnProperty(d)&&(c[d]=h(C,d,a[d]));return c},l);u&&e.$watchCollection(function(){return g.$modelValue},l)}if(l[1]){var q=l[0];l=l[1];var u=h.multiple,
r=h.ngOptions,z=!1,p,v=!1,w=D(Y.createElement("option")),G=D(Y.createElement("optgroup")),C=w.clone();h=0;for(var A=g.children(),x=A.length;h<x;h++)if(""===A[h].value){p=z=A.eq(h);break}q.init(l,z,C);u&&(l.$isEmpty=function(a){return!a||0===a.length});r?n(e,g,l):u?m(e,g,l):k(e,g,l,q)}}}}],Yd=["$interpolate",function(a){var c={addOption:z,removeOption:z};return{restrict:"E",priority:100,compile:function(d,e){if(B(e.value)){var f=a(d.text(),!0);f||e.$set("value",d.text())}return function(a,d,e){var k=
d.parent(),m=k.data("$selectController")||k.parent().data("$selectController");m&&m.databound||(m=c);f?a.$watch(f,function(a,c){e.$set("value",a);c!==a&&m.removeOption(c);m.addOption(a,d)}):m.addOption(e.value,d);d.on("$destroy",function(){m.removeOption(e.value)})}}}}],Xd=ea({restrict:"E",terminal:!1}),Ac=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){e&&(d.required=!0,e.$validators.required=function(a,c){return!d.required||!e.$isEmpty(c)},d.$observe("required",function(){e.$validate()}))}}},
zc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f,g=d.ngPattern||d.pattern;d.$observe("pattern",function(a){F(a)&&0<a.length&&(a=new RegExp("^"+a+"$"));if(a&&!a.test)throw S("ngPattern")("noregexp",g,a,va(c));f=a||t;e.$validate()});e.$validators.pattern=function(a){return e.$isEmpty(a)||B(f)||f.test(a)}}}}},Cc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f=-1;d.$observe("maxlength",function(a){a=ba(a);f=isNaN(a)?-1:a;e.$validate()});
e.$validators.maxlength=function(a,c){return 0>f||e.$isEmpty(c)||c.length<=f}}}}},Bc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f=0;d.$observe("minlength",function(a){f=ba(a)||0;e.$validate()});e.$validators.minlength=function(a,c){return e.$isEmpty(c)||c.length>=f}}}}};M.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(Nd(),Pd(ca),D(Y).ready(function(){Jd(Y,tc)}))})(window,document);!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>');
//# sourceMappingURL=angular.min.js.map

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/angular/angular.min.js","/resources/assets/vendor/angular")

},{"_process":7,"buffer":3}],69:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/*
 AngularJS v1.3.0
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(M,f,S){'use strict';f.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){return function(T,B,k){k=k.ngAnimateChildren;f.isString(k)&&0===k.length?B.data("$$ngAnimateChildren",!0):T.$watch(k,function(f){B.data("$$ngAnimateChildren",!!f)})}}).factory("$$animateReflow",["$$rAF","$document",function(f,B){return function(k){return f(function(){k()})}}]).config(["$provide","$animateProvider",function(T,B){function k(f){for(var g=0;g<f.length;g++){var k=f[g];if(1==k.nodeType)return k}}
function N(f,g){return k(f)==k(g)}var s=f.noop,g=f.forEach,ba=B.$$selectors,$=f.isArray,ca=f.isString,da=f.isObject,t={running:!0};T.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest",function(O,M,I,U,x,C,P,S,V){function A(a,c){var b=a.data("$$ngAnimateState")||{};c&&(b.running=!0,b.structural=!0,a.data("$$ngAnimateState",b));return b.disabled||b.running&&b.structural}function z(a){var c,b=M.defer();b.promise.$$cancelFn=
function(){c&&c()};P.$$postDigest(function(){c=a(function(){b.resolve()})});return b.promise}function J(a){if(da(a))return a.tempClasses&&ca(a.tempClasses)&&(a.tempClasses=a.tempClasses.split(/\s+/)),a}function W(a,c,b){b=b||{};var e={};g(b,function(a,d){g(d.split(" "),function(d){e[d]=a})});var m=Object.create(null);g((a.attr("class")||"").split(/\s+/),function(a){m[a]=!0});var f=[],k=[];g(c.classes,function(a,d){var b=m[d],c=e[d]||{};!1===a?(b||"addClass"==c.event)&&k.push(d):!0===a&&(b&&"removeClass"!=
c.event||f.push(d))});return 0<f.length+k.length&&[f.join(" "),k.join(" ")]}function Q(a){if(a){var c=[],b={};a=a.substr(1).split(".");(U.transitions||U.animations)&&c.push(I.get(ba[""]));for(var e=0;e<a.length;e++){var f=a[e],k=ba[f];k&&!b[f]&&(c.push(I.get(k)),b[f]=!0)}return c}}function R(a,c,b,e){function m(a,d){var b=a[d],c=a["before"+d.charAt(0).toUpperCase()+d.substr(1)];if(b||c)return"leave"==d&&(c=b,b=null),l.push({event:d,fn:b}),H.push({event:d,fn:c}),!0}function k(c,h,G){var w=[];g(c,function(a){a.fn&&
w.push(a)});var f=0;g(w,function(c,n){var u=function(){a:{if(h){(h[n]||s)();if(++f<w.length)break a;h=null}G()}};switch(c.event){case "setClass":h.push(c.fn(a,F,d,u,e));break;case "animate":h.push(c.fn(a,b,e.from,e.to,u));break;case "addClass":h.push(c.fn(a,F||b,u,e));break;case "removeClass":h.push(c.fn(a,d||b,u,e));break;default:h.push(c.fn(a,u,e))}});h&&0===h.length&&G()}var p=a[0];if(p){e&&(e.to=e.to||{},e.from=e.from||{});var F,d;$(b)&&(F=b[0],d=b[1],F?d?b=F+" "+d:(b=F,c="addClass"):(b=d,c="removeClass"));
var h="setClass"==c,G=h||"addClass"==c||"removeClass"==c||"animate"==c,w=a.attr("class")+" "+b;if(X(w)){var u=s,n=[],H=[],q=s,r=[],l=[],w=(" "+w).replace(/\s+/g,".");g(Q(w),function(a){!m(a,c)&&h&&(m(a,"addClass"),m(a,"removeClass"))});return{node:p,event:c,className:b,isClassBased:G,isSetClassOperation:h,applyStyles:function(){e&&a.css(f.extend(e.from||{},e.to||{}))},before:function(a){u=a;k(H,n,function(){u=s;a()})},after:function(a){q=a;k(l,r,function(){q=s;a()})},cancel:function(){n&&(g(n,function(a){(a||
s)(!0)}),u(!0));r&&(g(r,function(a){(a||s)(!0)}),q(!0))}}}}}function y(a,c,b,e,m,k,p,F){function d(d){var h="$animate:"+d;H&&H[h]&&0<H[h].length&&C(function(){b.triggerHandler(h,{event:a,className:c})})}function h(){d("before")}function G(){d("after")}function w(){w.hasBeenRun||(w.hasBeenRun=!0,k())}function u(){if(!u.hasBeenRun){n&&n.applyStyles();u.hasBeenRun=!0;p&&p.tempClasses&&g(p.tempClasses,function(a){b.removeClass(a)});var h=b.data("$$ngAnimateState");h&&(n&&n.isClassBased?l(b,c):(C(function(){var d=
b.data("$$ngAnimateState")||{};v==d.index&&l(b,c,a)}),b.data("$$ngAnimateState",h)));d("close");F()}}var n=R(b,a,c,p);if(!n)return w(),h(),G(),u(),s;a=n.event;c=n.className;var H=f.element._data(n.node),H=H&&H.events;e||(e=m?m.parent():b.parent());if(Y(b,e))return w(),h(),G(),u(),s;e=b.data("$$ngAnimateState")||{};var q=e.active||{},r=e.totalActive||0,t=e.last;m=!1;if(0<r){r=[];if(n.isClassBased)"setClass"==t.event?(r.push(t),l(b,c)):q[c]&&(aa=q[c],aa.event==a?m=!0:(r.push(aa),l(b,c)));else if("leave"==
a&&q["ng-leave"])m=!0;else{for(var aa in q)r.push(q[aa]);e={};l(b,!0)}0<r.length&&g(r,function(a){a.cancel()})}!n.isClassBased||n.isSetClassOperation||"animate"==a||m||(m="addClass"==a==b.hasClass(c));if(m)return w(),h(),G(),d("close"),F(),s;q=e.active||{};r=e.totalActive||0;if("leave"==a)b.one("$destroy",function(a){a=f.element(this);var d=a.data("$$ngAnimateState");d&&(d=d.active["ng-leave"])&&(d.cancel(),l(a,"ng-leave"))});b.addClass("ng-animate");p&&p.tempClasses&&g(p.tempClasses,function(a){b.addClass(a)});
var v=Z++;r++;q[c]=n;b.data("$$ngAnimateState",{last:n,active:q,index:v,totalActive:r});h();n.before(function(d){var h=b.data("$$ngAnimateState");d=d||!h||!h.active[c]||n.isClassBased&&h.active[c].event!=a;w();!0===d?u():(G(),n.after(u))});return n.cancel}function K(a){if(a=k(a))a=f.isFunction(a.getElementsByClassName)?a.getElementsByClassName("ng-animate"):a.querySelectorAll(".ng-animate"),g(a,function(a){a=f.element(a);(a=a.data("$$ngAnimateState"))&&a.active&&g(a.active,function(a){a.cancel()})})}
function l(a,c){if(N(a,x))t.disabled||(t.running=!1,t.structural=!1);else if(c){var b=a.data("$$ngAnimateState")||{},e=!0===c;!e&&b.active&&b.active[c]&&(b.totalActive--,delete b.active[c]);if(e||!b.totalActive)a.removeClass("ng-animate"),a.removeData("$$ngAnimateState")}}function Y(a,c){if(t.disabled)return!0;if(N(a,x))return t.running;var b,e,k;do{if(0===c.length)break;var g=N(c,x),p=g?t:c.data("$$ngAnimateState")||{};if(p.disabled)return!0;g&&(k=!0);!1!==b&&(g=c.data("$$ngAnimateChildren"),f.isDefined(g)&&
(b=g));e=e||p.running||p.last&&!p.last.isClassBased}while(c=c.parent());return!k||!b&&e}x.data("$$ngAnimateState",t);var L=P.$watch(function(){return V.totalPendingRequests},function(a,c){0===a&&(L(),P.$$postDigest(function(){P.$$postDigest(function(){t.running=!1})}))}),Z=0,E=B.classNameFilter(),X=E?function(a){return E.test(a)}:function(){return!0};return{animate:function(a,c,b,e,g){e=e||"ng-inline-animate";g=J(g)||{};g.from=b?c:null;g.to=b?b:c;return z(function(b){return y("animate",e,f.element(k(a)),
null,null,s,g,b)})},enter:function(a,c,b,e){e=J(e);a=f.element(a);c=c&&f.element(c);b=b&&f.element(b);A(a,!0);O.enter(a,c,b);return z(function(g){return y("enter","ng-enter",f.element(k(a)),c,b,s,e,g)})},leave:function(a,c){c=J(c);a=f.element(a);K(a);A(a,!0);return z(function(b){return y("leave","ng-leave",f.element(k(a)),null,null,function(){O.leave(a)},c,b)})},move:function(a,c,b,e){e=J(e);a=f.element(a);c=c&&f.element(c);b=b&&f.element(b);K(a);A(a,!0);O.move(a,c,b);return z(function(g){return y("move",
"ng-move",f.element(k(a)),c,b,s,e,g)})},addClass:function(a,c,b){return this.setClass(a,c,[],b)},removeClass:function(a,c,b){return this.setClass(a,[],c,b)},setClass:function(a,c,b,e){e=J(e);a=f.element(a);a=f.element(k(a));if(A(a))return O.$$setClassImmediately(a,c,b,e);var m,l=a.data("$$animateClasses"),p=!!l;l||(l={classes:{}});m=l.classes;c=$(c)?c:c.split(" ");g(c,function(a){a&&a.length&&(m[a]=!0)});b=$(b)?b:b.split(" ");g(b,function(a){a&&a.length&&(m[a]=!1)});if(p)return e&&l.options&&(l.options=
f.extend(l.options||{},e)),l.promise;a.data("$$animateClasses",l={classes:m,options:e});return l.promise=z(function(b){var d=a.parent(),h=k(a),c=h.parentNode;if(!c||c.$$NG_REMOVED||h.$$NG_REMOVED)b();else{h=a.data("$$animateClasses");a.removeData("$$animateClasses");var c=a.data("$$ngAnimateState")||{},e=W(a,h,c.active);return e?y("setClass",e,a,d,null,function(){e[0]&&O.$$addClassImmediately(a,e[0]);e[1]&&O.$$removeClassImmediately(a,e[1])},h.options,b):b()}})},cancel:function(a){a.$$cancelFn()},
enabled:function(a,c){switch(arguments.length){case 2:if(a)l(c);else{var b=c.data("$$ngAnimateState")||{};b.disabled=!0;c.data("$$ngAnimateState",b)}break;case 1:t.disabled=!a;break;default:a=!t.disabled}return!!a}}}]);B.register("",["$window","$sniffer","$timeout","$$animateReflow",function(t,B,I,U){function x(){e||(e=U(function(){b=[];e=null;a={}}))}function C(c,d){e&&e();b.push(d);e=U(function(){g(b,function(a){a()});b=[];e=null;a={}})}function P(a,d){var h=k(a);a=f.element(h);p.push(a);h=Date.now()+
d;h<=N||(I.cancel(m),N=h,m=I(function(){T(p);p=[]},d,!1))}function T(a){g(a,function(a){(a=a.data("$$ngAnimateCSS3Data"))&&g(a.closeAnimationFns,function(a){a()})})}function V(b,d){var h=d?a[d]:null;if(!h){var c=0,e=0,f=0,k=0;g(b,function(a){if(1==a.nodeType){a=t.getComputedStyle(a)||{};c=Math.max(A(a[L+"Duration"]),c);e=Math.max(A(a[L+"Delay"]),e);k=Math.max(A(a[E+"Delay"]),k);var d=A(a[E+"Duration"]);0<d&&(d*=parseInt(a[E+"IterationCount"],10)||1);f=Math.max(d,f)}});h={total:0,transitionDelay:e,
transitionDuration:c,animationDelay:k,animationDuration:f};d&&(a[d]=h)}return h}function A(a){var d=0;a=ca(a)?a.split(/\s*,\s*/):[];g(a,function(a){d=Math.max(parseFloat(a)||0,d)});return d}function z(b,d,h,e){b=0<=["ng-enter","ng-leave","ng-move"].indexOf(h);var f,g=d.parent(),n=g.data("$$ngAnimateKey");n||(g.data("$$ngAnimateKey",++c),n=c);f=n+"-"+k(d).getAttribute("class");var g=f+" "+h,n=a[g]?++a[g].total:0,l={};if(0<n){var q=h+"-stagger",l=f+" "+q;(f=!a[l])&&d.addClass(q);l=V(d,l);f&&d.removeClass(q)}d.addClass(h);
var q=d.data("$$ngAnimateCSS3Data")||{},r=V(d,g);f=r.transitionDuration;r=r.animationDuration;if(b&&0===f&&0===r)return d.removeClass(h),!1;h=e||b&&0<f;b=0<r&&0<l.animationDelay&&0===l.animationDuration;d.data("$$ngAnimateCSS3Data",{stagger:l,cacheKey:g,running:q.running||0,itemIndex:n,blockTransition:h,closeAnimationFns:q.closeAnimationFns||[]});g=k(d);h&&(W(g,!0),e&&d.css(e));b&&(g.style[E+"PlayState"]="paused");return!0}function J(a,d,b,c,e){function f(){d.off(C,l);d.removeClass(q);d.removeClass(r);
z&&I.cancel(z);K(d,b);var a=k(d),c;for(c in p)a.style.removeProperty(p[c])}function l(a){a.stopPropagation();var d=a.originalEvent||a;a=d.$manualTimeStamp||d.timeStamp||Date.now();d=parseFloat(d.elapsedTime.toFixed(3));Math.max(a-B,0)>=A&&d>=x&&c()}var m=k(d);a=d.data("$$ngAnimateCSS3Data");if(-1!=m.getAttribute("class").indexOf(b)&&a){var q="",r="";g(b.split(" "),function(a,d){var b=(0<d?" ":"")+a;q+=b+"-active";r+=b+"-pending"});var p=[],t=a.itemIndex,v=a.stagger,s=0;if(0<t){s=0;0<v.transitionDelay&&
0===v.transitionDuration&&(s=v.transitionDelay*t);var y=0;0<v.animationDelay&&0===v.animationDuration&&(y=v.animationDelay*t,p.push(Y+"animation-play-state"));s=Math.round(100*Math.max(s,y))/100}s||(d.addClass(q),a.blockTransition&&W(m,!1));var D=V(d,a.cacheKey+" "+q),x=Math.max(D.transitionDuration,D.animationDuration);if(0===x)d.removeClass(q),K(d,b),c();else{!s&&e&&(D.transitionDuration||(d.css("transition",D.animationDuration+"s linear all"),p.push("transition")),d.css(e));var t=Math.max(D.transitionDelay,
D.animationDelay),A=1E3*t;0<p.length&&(v=m.getAttribute("style")||"",";"!==v.charAt(v.length-1)&&(v+=";"),m.setAttribute("style",v+" "));var B=Date.now(),C=X+" "+Z,t=1E3*(s+1.5*(t+x)),z;0<s&&(d.addClass(r),z=I(function(){z=null;0<D.transitionDuration&&W(m,!1);0<D.animationDuration&&(m.style[E+"PlayState"]="");d.addClass(q);d.removeClass(r);e&&(0===D.transitionDuration&&d.css("transition",D.animationDuration+"s linear all"),d.css(e),p.push("transition"))},1E3*s,!1));d.on(C,l);a.closeAnimationFns.push(function(){f();
c()});a.running++;P(d,t);return f}}else c()}function W(a,d){a.style[L+"Property"]=d?"none":""}function Q(a,d,b,c){if(z(a,d,b,c))return function(a){a&&K(d,b)}}function R(a,d,b,c,e){if(d.data("$$ngAnimateCSS3Data"))return J(a,d,b,c,e);K(d,b);c()}function y(a,d,b,c,e){var f=Q(a,d,b,e.from);if(f){var g=f;C(d,function(){g=R(a,d,b,c,e.to)});return function(a){(g||s)(a)}}x();c()}function K(a,d){a.removeClass(d);var b=a.data("$$ngAnimateCSS3Data");b&&(b.running&&b.running--,b.running&&0!==b.running||a.removeData("$$ngAnimateCSS3Data"))}
function l(a,d){var b="";a=$(a)?a:a.split(/\s+/);g(a,function(a,c){a&&0<a.length&&(b+=(0<c?" ":"")+a+d)});return b}var Y="",L,Z,E,X;M.ontransitionend===S&&M.onwebkittransitionend!==S?(Y="-webkit-",L="WebkitTransition",Z="webkitTransitionEnd transitionend"):(L="transition",Z="transitionend");M.onanimationend===S&&M.onwebkitanimationend!==S?(Y="-webkit-",E="WebkitAnimation",X="webkitAnimationEnd animationend"):(E="animation",X="animationend");var a={},c=0,b=[],e,m=null,N=0,p=[];return{animate:function(a,
d,b,c,e,f){f=f||{};f.from=b;f.to=c;return y("animate",a,d,e,f)},enter:function(a,b,c){c=c||{};return y("enter",a,"ng-enter",b,c)},leave:function(a,b,c){c=c||{};return y("leave",a,"ng-leave",b,c)},move:function(a,b,c){c=c||{};return y("move",a,"ng-move",b,c)},beforeSetClass:function(a,b,c,e,f){f=f||{};b=l(c,"-remove")+" "+l(b,"-add");if(f=Q("setClass",a,b,f.from))return C(a,e),f;x();e()},beforeAddClass:function(a,b,c,e){e=e||{};if(b=Q("addClass",a,l(b,"-add"),e.from))return C(a,c),b;x();c()},beforeRemoveClass:function(a,
b,c,e){e=e||{};if(b=Q("removeClass",a,l(b,"-remove"),e.from))return C(a,c),b;x();c()},setClass:function(a,b,c,e,f){f=f||{};c=l(c,"-remove");b=l(b,"-add");return R("setClass",a,c+" "+b,e,f.to)},addClass:function(a,b,c,e){e=e||{};return R("addClass",a,l(b,"-add"),c,e.to)},removeClass:function(a,b,c,e){e=e||{};return R("removeClass",a,l(b,"-remove"),c,e.to)}}}])}])})(window,window.angular);
//# sourceMappingURL=angular-animate.min.js.map

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/angular_animate/angular-animate.min.js","/resources/assets/vendor/angular_animate")

},{"_process":7,"buffer":3}],70:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/*! 3.1.2 */
!function(){function a(a,b){window.XMLHttpRequest.prototype[a]=b(window.XMLHttpRequest.prototype[a])}function b(a,b,c){try{Object.defineProperty(a,b,{get:c})}catch(d){}}var c=function(){try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(a)return!0}catch(b){if(void 0!=navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1};if(window.XMLHttpRequest&&!window.FormData||window.FileAPI&&FileAPI.forceLoad){var d=function(a){if(!a.__listeners){a.upload||(a.upload={}),a.__listeners=[];var b=a.upload.addEventListener;a.upload.addEventListener=function(c,d){a.__listeners[c]=d,b&&b.apply(this,arguments)}}};a("open",function(a){return function(b,c,e){d(this),this.__url=c;try{a.apply(this,[b,c,e])}catch(f){f.message.indexOf("Access is denied")>-1&&(this.__origError=f,a.apply(this,[b,"_fix_for_ie_crossdomain__",e]))}}}),a("getResponseHeader",function(a){return function(b){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(b):null==a?null:a.apply(this,[b])}}),a("getAllResponseHeaders",function(a){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==a?null:a.apply(this)}}),a("abort",function(a){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==a?null:a.apply(this)}}),a("setRequestHeader",function(a){return function(b,c){if("__setXHR_"===b){d(this);var e=c(this);e instanceof Function&&e(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[b]=c,a.apply(this,arguments)}}),a("send",function(a){return function(){var d=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var e=arguments[0],f={url:d.__url,jsonp:!1,cache:!0,complete:function(a,c){d.__completed=!0,!a&&d.__listeners.load&&d.__listeners.load({type:"load",loaded:d.__loaded,total:d.__total,target:d,lengthComputable:!0}),!a&&d.__listeners.loadend&&d.__listeners.loadend({type:"loadend",loaded:d.__loaded,total:d.__total,target:d,lengthComputable:!0}),"abort"===a&&d.__listeners.abort&&d.__listeners.abort({type:"abort",loaded:d.__loaded,total:d.__total,target:d,lengthComputable:!0}),void 0!==c.status&&b(d,"status",function(){return 0==c.status&&a&&"abort"!==a?500:c.status}),void 0!==c.statusText&&b(d,"statusText",function(){return c.statusText}),b(d,"readyState",function(){return 4}),void 0!==c.response&&b(d,"response",function(){return c.response});var e=c.responseText||(a&&0==c.status&&"abort"!==a?a:void 0);b(d,"responseText",function(){return e}),b(d,"response",function(){return e}),a&&b(d,"err",function(){return a}),d.__fileApiXHR=c,d.onreadystatechange&&d.onreadystatechange(),d.onload&&d.onload()},fileprogress:function(a){if(a.target=d,d.__listeners.progress&&d.__listeners.progress(a),d.__total=a.total,d.__loaded=a.loaded,a.total===a.loaded){var b=this;setTimeout(function(){d.__completed||(d.getAllResponseHeaders=function(){},b.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:d.__requestHeaders};f.data={},f.files={};for(var g=0;g<e.data.length;g++){var h=e.data[g];null!=h.val&&null!=h.val.name&&null!=h.val.size&&null!=h.val.type?f.files[h.key]=h.val:f.data[h.key]=h.val}setTimeout(function(){if(!c())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';d.__fileApiXHR=FileAPI.upload(f)},1)}else{if(this.__origError)throw this.__origError;a.apply(d,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0;var e=function(a){if(!c())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var b=angular.element(a);if(!b.attr("disabled")){for(var d=!1,e=0;e<b[0].attributes.length;e++){var f=b[0].attributes[e];if(-1!==f.name.indexOf("file-select")){d=!0;break}}if(!b.hasClass("js-fileapi-wrapper")&&(d||null!=b.attr("__afu_gen__"))&&(b.addClass("js-fileapi-wrapper"),null!=b.attr("__afu_gen__"))){for(var g=b[0].__refElem__&&angular.element(b[0].__refElem__)||b;g&&!g.attr("__refElem__");)g=angular.element(g[0].nextSibling);g.bind("mouseover",function(){(""===b.parent().css("position")||"static"===b.parent().css("position"))&&b.parent().css("position","relative"),b.css("position","absolute").css("top",g[0].offsetTop+"px").css("left",g[0].offsetLeft+"px").css("width",g[0].offsetWidth+"px").css("height",g[0].offsetHeight+"px").css("padding",g.css("padding")).css("margin",g.css("margin")).css("filter","alpha(opacity=0)"),g.attr("onclick",""),b.css("z-index","1000")})}}},f=function(a){return function(b){for(var c=FileAPI.getFiles(b),d=0;d<c.length;d++)void 0===c[d].size&&(c[d].size=0),void 0===c[d].name&&(c[d].name="file"),void 0===c[d].type&&(c[d].type="undefined");b.target||(b.target={}),b.target.files=c,b.target.files!=c&&(b.__files_=c),(b.__files_||b.target.files).item=function(a){return(b.__files_||b.target.files)[a]||null},a&&a.apply(this,[b])}},g=function(a,b){return("change"===b.toLowerCase()||"onchange"===b.toLowerCase())&&"file"==a.getAttribute("type")};HTMLInputElement.prototype.addEventListener&&(HTMLInputElement.prototype.addEventListener=function(a){return function(b,c,d,h){g(this,b)?(e(this),a.apply(this,[b,f(c),d,h])):a.apply(this,[b,c,d,h])}}(HTMLInputElement.prototype.addEventListener)),HTMLInputElement.prototype.attachEvent&&(HTMLInputElement.prototype.attachEvent=function(a){return function(b,c){g(this,b)?(e(this),window.jQuery?angular.element(this).bind("change",f(null)):a.apply(this,[b,f(c)])):a.apply(this,[b,c])}}(HTMLInputElement.prototype.attachEvent)),window.FormData=FormData=function(){return{append:function(a,b,c){b.__isFileAPIBlobShim&&(b=b.data[0]),this.data.push({key:a,val:b,name:c})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(a){return{data:a,__isFileAPIBlobShim:!0}},function(){if(window.FileAPI||(window.FileAPI={}),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var a,b,d,e,f,g=document.createElement("script"),h=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)a=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)b=window.FileAPI.jsPath;else for(d=0;d<h.length;d++)if(f=h[d].src,e=f.search(/\/angular\-file\-upload[\-a-zA-z0-9\.]*\.js/),e>-1){b=f.substring(0,e+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=b),g.setAttribute("src",a||b+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(g),FileAPI.hasFlash=c()}}(),FileAPI.disableFileInput=function(a,b){b?a.removeClass("js-fileapi-wrapper"):a.addClass("js-fileapi-wrapper")}}window.FileReader||(window.FileReader=function(){var a=this,b=!1;this.listeners={},this.addEventListener=function(b,c){a.listeners[b]=a.listeners[b]||[],a.listeners[b].push(c)},this.removeEventListener=function(b,c){a.listeners[b]&&a.listeners[b].splice(a.listeners[b].indexOf(c),1)},this.dispatchEvent=function(b){var c=a.listeners[b.type];if(c)for(var d=0;d<c.length;d++)c[d].call(a,b)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var c=function(b,c){var d={type:b,target:a,loaded:c.loaded,total:c.total,error:c.error};return null!=c.result&&(d.target.result=c.result),d},d=function(d){if(b||(b=!0,a.onloadstart&&a.onloadstart(c("loadstart",d))),"load"===d.type){a.onloadend&&a.onloadend(c("loadend",d));var e=c("load",d);a.onload&&a.onload(e),a.dispatchEvent(e)}else if("progress"===d.type){var e=c("progress",d);a.onprogress&&a.onprogress(e),a.dispatchEvent(e)}else{var e=c("error",d);a.onerror&&a.onerror(e),a.dispatchEvent(e)}};this.readAsArrayBuffer=function(a){FileAPI.readAsBinaryString(a,d)},this.readAsBinaryString=function(a){FileAPI.readAsBinaryString(a,d)},this.readAsDataURL=function(a){FileAPI.readAsDataURL(a,d)},this.readAsText=function(a){FileAPI.readAsText(a,d)}})}();
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/angularjs-file-upload/angular-file-upload-shim.min.js","/resources/assets/vendor/angularjs-file-upload")

},{"_process":7,"buffer":3}],71:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/*! 3.1.2 */
!function(){function a(a,b){window.XMLHttpRequest.prototype[a]=b(window.XMLHttpRequest.prototype[a])}function b(a,b,c,d,f,g,h){function i(){return"input"===b[0].tagName.toLowerCase()&&b.attr("type")&&"file"===b.attr("type").toLowerCase()}function j(c){g(function(){b.parent().length&&p.push(a.$watch(c,function(a,b){a!=b&&k()}))})}function k(){var c=b.clone();if(b.attr("__afu_gen__")&&angular.element(document.getElementById(b.attr("id").substring(1))).remove(),b.parent().length){for(var d=0;d<p.length;d++)p[d]();b.replaceWith(c),h(c)(a)}return c}function l(d,e){if(d){j(d);var g=f(d)(a);g?(b.attr(e,g),c[e]=g):(b.attr(e,null),delete c[e])}}function m(b){var e;e=b.__files_||b.target&&b.target.files,o(e,c,d,a,b)}function n(a){if(null!=q[0].value&&""!=q[0].value&&(q[0].value=null,-1===navigator.userAgent.indexOf("Trident/7")&&m({target:{files:[]}})),b.attr("__afu_clone__"))b.attr("__afu_clone__",null);else if(-1!==navigator.appVersion.indexOf("MSIE 10")||-1!==navigator.userAgent.indexOf("Trident/7")){var c=k();return c.attr("__afu_clone__",!0),c[0].click(),a.preventDefault(),a.stopPropagation(),!0}}function o(a,b,c,d,h){for(var i=[],j=[],k=f(b.ngAccept)(d),l=angular.isString(k)&&k?new RegExp(e(k),"gi"):null,m=l?null:b.ngAccept,n=0;n<a.length;n++){var o=a.item(n);!(!l||o.type.match(l)||null!=o.name&&o.name.match(l))||m&&!f(m)(d,{$file:o,$event:h})?j.push(o):i.push(o)}g(function(){c&&(f(b.ngModel).assign(d,i),c&&c.$setViewValue(null!=i&&0==i.length?"":i),b.ngModelRejected&&f(b.ngModelRejected).assign(d,j)),b.ngFileChange&&""!=b.ngFileChange&&f(b.ngFileChange)(d,{$files:i,$rejectedFiles:j,$event:h})})}var p=[];l(c.ngMultiple,"multiple"),l(c.ngAccept,"ng-accept"),l(c.ngCapture,"capture"),""!=c.ngFileSelect&&(c.ngFileChange=c.ngFileSelect);var q=b;if(i())b.bind("click",n);else{q=angular.element('<input type="file">'),b.attr("multiple")&&q.attr("multiple",b.attr("multiple")),b.attr("accept")&&q.attr("accept",b.attr("accept")),b.attr("capture")&&q.attr("capture",b.attr("capture"));for(var r in c)if(0==r.indexOf("inputFile")){var s=r.substring("inputFile".length);s=s[0].toLowerCase()+s.substring(1),q.attr(s,c[r])}q.css("width","0px").css("height","0px").css("position","absolute").css("padding",0).css("margin",0).css("overflow","hidden").attr("tabindex","-1").css("opacity",0).attr("__afu_gen__",!0),b.attr("__refElem__",!0),q[0].__refElem__=b[0],b.parent()[0].insertBefore(q[0],b[0]),b.css("overflow","hidden"),b.bind("click",function(a){n(a)||q[0].click()})}q.bind("change",m),b.on("$destroy",function(){for(var a=0;a<p.length;a++)p[a]();b[0]!=q[0]&&q.remove()}),p.push(a.$watch(c.ngModel,function(a,b){a==b||null!=a&&a.length||(-1!==navigator.appVersion.indexOf("MSIE 10")?k():q[0].value=null)}))}function c(a,b,c,f,g,h,i){function j(a,b,c){var d=!0;if(r||s){var e=c.dataTransfer.items;if(null!=e)for(var f=0;f<e.length&&d;f++)d=d&&("file"==e[f].kind||""==e[f].kind)&&(s&&g(s)(a,{$file:e[f],$event:c})||r&&null!=e[f].type&&e[f].type.match(r)||null!=e[f].name&&e[f].name.match(r))}var h=g(b.dragOverClass)(a,{$event:c});return h&&(h.delay&&(p=h.delay),h.accept&&(h=d?h.accept:h.reject)),h||b.dragOverClass||"dragover"}function k(b,c,d,e){function f(c){!(!r||c.type.match(r)||null!=c.name&&c.name.match(r))||s&&!g(s)(a,{$file:c,$event:b})?l.push(c):k.push(c)}function j(a,b,c){if(null!=b)if(b.isDirectory){var d=(c||"")+b.name;f({name:b.name,type:"directory",path:d});var e=b.createReader(),g=[];n++;var h=function(){e.readEntries(function(d){try{if(d.length)g=g.concat(Array.prototype.slice.call(d||[],0)),h();else{for(var e=0;e<g.length;e++)j(a,g[e],(c?c:"")+b.name+"/");n--}}catch(f){n--,console.error(f)}},function(){n--})};h()}else n++,b.file(function(a){try{n--,a.path=(c?c:"")+a.name,f(a)}catch(b){n--,console.error(b)}},function(){n--})}var k=[],l=[],m=b.dataTransfer.items,n=0;if(m&&m.length>0&&"file"!=i.protocol())for(var o=0;o<m.length;o++){if(m[o].webkitGetAsEntry&&m[o].webkitGetAsEntry()&&m[o].webkitGetAsEntry().isDirectory){var p=m[o].webkitGetAsEntry();if(p.isDirectory&&!d)continue;null!=p&&j(k,p)}else{var q=m[o].getAsFile();null!=q&&f(q)}if(!e&&k.length>0)break}else{var t=b.dataTransfer.files;if(null!=t)for(var o=0;o<t.length&&(f(t.item(o)),e||!(k.length>0));o++);}var u=0;!function v(a){h(function(){if(n)10*u++<2e4&&v(10);else{if(!e&&k.length>1){for(var a=0;"directory"==k[a].type;)a++;k=[k[a]]}c(k,l)}},a||0)}()}var l=d();if(c.dropAvailable&&h(function(){a.dropAvailable?a.dropAvailable.value=l:a.dropAvailable=l}),!l)return 0!=g(c.hideOnDropNotAvailable)(a)&&b.css("display","none"),void 0;var m,n=null,o=g(c.stopPropagation)(a),p=1,q=g(c.ngAccept)(a)||c.accept,r=angular.isString(q)&&q?new RegExp(e(q),"gi"):null,s=r?null:c.ngAccept;b[0].addEventListener("dragover",function(d){if(d.preventDefault(),o&&d.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var e=d.dataTransfer.effectAllowed;d.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy"}h.cancel(n),a.actualDragOverClass||(m=j(a,c,d)),b.addClass(m)},!1),b[0].addEventListener("dragenter",function(a){a.preventDefault(),o&&a.stopPropagation()},!1),b[0].addEventListener("dragleave",function(){n=h(function(){b.removeClass(m),m=null},p||1)},!1),""!=c.ngFileDrop&&(c.ngFileChange=a.ngFileDrop),b[0].addEventListener("drop",function(d){d.preventDefault(),o&&d.stopPropagation(),b.removeClass(m),m=null,k(d,function(b,e){h(function(){f&&(g(c.ngModel).assign(a,b),f&&f.$setViewValue(null!=b&&0==b.length?"":b)),c.ngModelRejected&&a[c.ngModelRejected]&&g(c.ngModelRejected).assign(a,e)}),h(function(){g(c.ngFileChange)(a,{$files:b,$rejectedFiles:e,$event:d})})},0!=g(c.allowDir)(a),c.multiple||g(c.ngMultiple)(a))},!1)}function d(){var a=document.createElement("div");return"draggable"in a&&"ondrop"in a}function e(a){if(a.length>2&&"/"===a[0]&&"/"===a[a.length-1])return a.substring(1,a.length-1);var b=a.split(","),c="";if(b.length>1)for(var d=0;d<b.length;d++)c+="("+e(b[d])+")",d<b.length-1&&(c+="|");else 0==a.indexOf(".")&&(a="*"+a),c="^"+a.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",c=c.replace(/\\\*/g,".*").replace(/\\\?/g,".");return c}window.XMLHttpRequest&&!window.XMLHttpRequest.__isFileAPIShim&&a("setRequestHeader",function(a){return function(b,c){if("__setXHR_"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}});var f=angular.module("angularFileUpload",[]);f.version="3.1.2",f.service("$upload",["$http","$q","$timeout",function(a,b,c){function d(d){d.method=d.method||"POST",d.headers=d.headers||{},d.transformRequest=d.transformRequest||function(b,c){return window.ArrayBuffer&&b instanceof window.ArrayBuffer?b:a.defaults.transformRequest[0](b,c)};var e=b.defer(),f=e.promise;return d.headers.__setXHR_=function(){return function(a){a&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener("progress",function(a){a.config=d,e.notify?e.notify(a):f.progress_fn&&c(function(){f.progress_fn(a)})},!1),a.upload.addEventListener("load",function(a){a.lengthComputable&&(a.config=d,e.notify?e.notify(a):f.progress_fn&&c(function(){f.progress_fn(a)}))},!1))}},a(d).then(function(a){e.resolve(a)},function(a){e.reject(a)},function(a){e.notify(a)}),f.success=function(a){return f.then(function(b){a(b.data,b.status,b.headers,d)}),f},f.error=function(a){return f.then(null,function(b){a(b.data,b.status,b.headers,d)}),f},f.progress=function(a){return f.progress_fn=a,f.then(null,null,function(b){a(b)}),f},f.abort=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),f},f.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(f,arguments),a.apply(f,arguments)}}(d.xhrFn),f},f}this.upload=function(a){a.headers=a.headers||{},a.headers["Content-Type"]=void 0;a.transformRequest;return a.transformRequest=a.transformRequest?"[object Array]"===Object.prototype.toString.call(a.transformRequest)?a.transformRequest:[a.transformRequest]:[],a.transformRequest.push(function(b){var c=new FormData,d={};for(var e in a.fields)d[e]=a.fields[e];if(b&&(d.data=b),a.formDataAppender)for(var e in d)a.formDataAppender(c,e,d[e]);else for(var e in d){var f=d[e];void 0!==f&&("[object String]"===Object.prototype.toString.call(f)?c.append(e,f):a.sendObjectsAsJsonBlob&&"object"==typeof f?c.append(e,new Blob([f],{type:"application/json"})):c.append(e,JSON.stringify(f)))}if(null!=a.file){var g=a.fileFormDataName||"file";if("[object Array]"===Object.prototype.toString.call(a.file))for(var h="[object String]"===Object.prototype.toString.call(g),i=0;i<a.file.length;i++)c.append(h?g:g[i],a.file[i],a.fileName&&a.fileName[i]||a.file[i].name);else c.append(g,a.file,a.fileName||a.file.name)}return c}),d(a)},this.http=function(a){return d(a)}}]),f.directive("ngFileSelect",["$parse","$timeout","$compile",function(a,c,d){return{restrict:"AEC",require:"?ngModel",link:function(e,f,g,h){b(e,f,g,h,a,c,d)}}}]),f.directive("ngFileDrop",["$parse","$timeout","$location",function(a,b,d){return{restrict:"AEC",require:"?ngModel",link:function(e,f,g,h){c(e,f,g,h,a,b,d)}}}]),f.directive("ngNoFileDrop",function(){return function(a,b){d()&&b.css("display","none")}}),f.directive("ngFileDropAvailable",["$parse","$timeout",function(a,b){return function(c,e,f){if(d()){var g=a(f.ngFileDropAvailable);b(function(){g(c)})}}}]);var g=angular.module("ngFileUpload",[]);for(var h in f)g[h]=f[h]}();
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/angularjs-file-upload/angular-file-upload.min.js","/resources/assets/vendor/angularjs-file-upload")

},{"_process":7,"buffer":3}],72:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
angular.module("ngFabForm",["ngMessages"]),angular.module("ngFabForm").directive("form",["ngFabFormDirective",function(a){"use strict";return a}]),angular.module("ngFabForm").directive("input",["ngFabFormValidationsDirective",function(a){"use strict";return a}]),angular.module("ngFabForm").directive("textarea",["ngFabFormValidationsDirective",function(a){"use strict";return a}]),angular.module("ngFabForm").directive("select",["ngFabFormValidationsDirective",function(a){"use strict";return a}]),angular.module("ngFabForm").provider("ngFabForm",function(){"use strict";function a(a,b){var d=angular.element(angular.element("<div/>").html(a));return angular.forEach(b,function(a,b){var e=new RegExp(c.validationMsgPrefix);if(b.match(e)){var f=b.replace(c.validationMsgPrefix,"");f=f.charAt(0).toLowerCase()+f.slice(1);var g=d[0].querySelector('[ng-message="'+f+'"]');angular.element(g).html(a)}}),d}var b,c={validationsTemplate:"default-validation-msgs.html",preventInvalidSubmit:!0,preventDoubleSubmit:!0,preventDoubleSubmitTimeoutLength:1e3,setFormDirtyOnSubmit:!0,scrollToAndFocusFirstErrorOnSubmit:!0,scrollAnimationTime:500,scrollOffset:-100,disabledForms:!0,globalFabFormDisable:!1,setNovalidate:!0,setNamesByNgModel:!0,setAsteriskForRequiredLabel:!1,asteriskStr:"*",validationMsgPrefix:"validationMsg",emailRegex:/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,watchForFormCtrl:!1,formChangeEvent:"NG_FAB_FORM_OPTIONS_CHANGED"},d=function(a,b,c){"checkbox"===c.type||"radio"===c.type?b.parent().after(a):b.after(a)},e=function(){function a(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}function b(a,b){var c=500,d=Math.abs(a),e=b/10;return b*d/c+e}return function(c,d,e){function f(){l+=m;var b=a(l,j,k,i);window.scrollTo(h,b),i>l?setTimeout(f,m):c.focus()}var g=c.getBoundingClientRect().top+parseInt(e),h=c.getBoundingClientRect().left,i=b(g,d),j=window.pageYOffset,k=g,l=0,m=20;return 0===k?void c.focus():void f()}}();return{extendConfig:function(a){c=angular.extend(c,a)},setInsertErrorTplFn:function(a){d=a},setScrollToFn:function(a){e=a},setCustomValidatorsFn:function(a){b=a},$get:function(){return{insertErrorTpl:d,addCustomValidations:a,customValidators:b,scrollTo:e,config:c}}}}),angular.module("ngFabForm").run(["$templateCache",function(a){"use strict";a.put("default-validation-msgs.html",'<div ng-messages="field.$error" class="validation" ng-show="attrs.required==\'\'|| attrs.required"><ul class="list-unstyled validation-errors" ng-show="field.$invalid && (field.$touched || field.$dirty || form.$triedSubmit)"><li ng-message="required">This field is required</li><li ng-message="ngFabEnsureExpression">Not valid condition</li><li ng-message="password">Please enter a valid password</li><li ng-message="email">Please enter a valid e-mail</li><li ng-message="pattern">Invalid input format</li><li ng-message="date">Please enter a valid date</li><li ng-message="time">Please enter a valid time</li><li ng-message="datetime">Please enter a valid date and time</li><li ng-message="datetime-local">Please enter a valid date and time</li><li ng-message="number">This field must be numeric</li><li ng-message="color">Please enter a valid color</li><li ng-message="range">Please enter a valid range</li><li ng-message="month">Please enter a valid month</li><li ng-message="url">Please enter a valid URL</li><li ng-message="file">Invalid file</li><li ng-message="minlength">Please use at least {{ attrs.minlength }} characters</li><li ng-message="maxlength">Please do not exceed {{ attrs.maxlength }} characters</li><li ng-message="ngFabMatch">The {{ attrs.type ===\'password\'? \'passwords\' : \'values\' }} should match</li><li ng-if="attrs.type == \'time\' " ng-message="min">The time provided should after {{ attrs.min |date: \'HH:MM\' }}</li><li ng-message="max" ng-if="attrs.type == \'time\' ">The time provided should be before {{attrs.max |date: \'HH:MM\'}}</li><li ng-message="min" ng-if="attrs.type == \'date\' ">The date provided should be after {{attrs.min |date:\'dd.MM.yy\'}}</li><li ng-message="max" ng-if="attrs.type == \'date\' ">The date provided should be before {{attrs.max |date: \'dd.MM.yy\'}}</li></ul><div class="validation-success" ng-show="field.$valid && !field.$invalid"></div></div>')}]),angular.module("ngFabForm").factory("ngFabFormValidationsDirective",["ngFabForm","$compile","$templateRequest","$rootScope","$timeout",function(a,b,c,d,e){"use strict";function f(e){var f=e.el,g=e.cfg,h=e.formCtrl,i=e.ngModelCtrl,j=e.attrs;e.currentValidationVars.tpl&&0!==Object.keys(e.currentValidationVars.tpl).length&&angular.element(e.currentValidationVars.tpl).remove(),c(g.validationsTemplate).then(function(c){var g=d.$new(!0);e.currentValidationVars.privateScope=g,c=a.addCustomValidations(c,j),g.attrs=j,g.form=h,g.field=i;var k=b(c.children())(g);e.currentValidationVars.tpl=k[0],a.insertErrorTpl(k[0],f,j)})}function g(a,b,c){var d=document.querySelectorAll('label[for="'+b.name+'"]');if(!d||d.length<1){var e=a[0].previousElementSibling;e&&"LABEL"===e.tagName&&(d=[e])}if(d&&d.length>0&&"radio"!==b.type&&"checkbox"!==b.type)for(var f=0;f<d.length;f++){var g=d[f];g.textContent.slice(-c.asteriskStr.length)!==c.asteriskStr&&(g.textContent=g.textContent+c.asteriskStr)}}return{restrict:"E",require:"?ngModel",compile:function(b,c){return!c.type||"submit"!==c.type.toLowerCase()&&"button"!==c.type.toLowerCase()?(a.config.setNamesByNgModel&&c.ngModel&&!c.name&&!a.config.globalFabFormDisable&&(b.attr("name",c.ngModel),c.name=c.ngModel),function(b,c,d,h){function i(a){!h||!k.validationsTemplate||0===Object.keys(h.$validators).length&&0===Object.keys(h.$asyncValidators).length||a&&k.validationsTemplate===a.validationsTemplate?!k.validationsTemplate&&o.tpl&&0!==Object.keys(o.tpl).length&&(o.privateScope.$destroy(),angular.element(o.tpl).remove()):f({el:c,cfg:k,formCtrl:l,ngModelCtrl:h,attrs:d,currentValidationVars:o}),!k.setAsteriskForRequiredLabel||d.required!==!0||a&&k.setAsteriskForRequiredLabel===a.setAsteriskForRequiredLabel&&k.asteriskStr===a.asteriskStr||g(c,d,k)}function j(){e(function(){if(l=c.controller("form"),l&&h){if(k||(k=l.ngFabFormConfig),!k)return;k.emailRegex&&"email"===d.type&&(h.$validators.email=function(a){return h.$isEmpty(a)||k.emailRegex.test(a)}),a.customValidators&&a.customValidators(h,d),i(),m=b.$on(a.formChangeEvent,function(a,b,c){k=b,i(c)})}},0)}var k,l,m,n,o={tpl:void 0,privateScope:void 0};a.config.watchForFormCtrl?n=b.$watch(function(){return c.controller("form")},function(a){a&&(n(),j())}):j(),b.$on("$destroy",function(){o&&o.privateScope&&o.privateScope.$destroy()})}):void 0}}}]),angular.module("ngFabForm").directive("ngFabEnsureExpression",["$http","$parse",function(a,b){"use strict";return{require:"ngModel",link:function(a,c,d,e){a.$watch(d.ngModel,function(){var c=b(d.ngFabEnsureExpression)(a);e.$setValidity("ngFabEnsureExpression",c),e.$validate()})}}}]),angular.module("ngFabForm").directive("ngFabMatch",function(){"use strict";return{require:"ngModel",restrict:"A",scope:{ngFabMatch:"="},link:function(a,b,c,d){d.$validators.ngFabMatch=function(b){return Boolean(b)&&b==a.ngFabMatch},a.$watch("ngFabMatch",function(){d.$validate()})}}}),angular.module("ngFabForm").directive("ngFabResetFormOn",function(){"use strict";return{require:"^form",restrict:"A",scope:{ngFabResetFormOn:"@",doNotClearInputs:"@"},link:function(a,b,c,d){c.ngFabResetFormOn||(c.ngFabResetFormOn="click"),b.on(c.ngFabResetFormOn,function(){c.doNotClearInputs?d.$resetForm():d.$resetForm(!0),a.$apply()})}}}),angular.module("ngFabForm").factory("ngFabFormDirective",["$compile","$timeout","ngFabForm",function(a,b,c){"use strict";function d(a){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation()}function e(a,b){if(b.disableForm){a.contents().wrap("<fieldset>");var c=a.children();b.$observe("disableForm",function(){"true"===b.disableForm||b.disableForm===!0?c.attr("disabled",!0):c.attr("disabled",!1)})}}function f(a,b,d,e){var f=a[0].querySelector(".ng-invalid");f&&b.$invalid&&c.scrollTo(f,parseInt(d),e)}return{restrict:"EAC",scope:!1,require:"form",compile:function(a,g){var h,i=angular.copy(c.config);if(i.globalFabFormDisable!==!0||!angular.isUndefined(g.ngFabForm))return!g.novalidate&&i.setNovalidate&&(a.attr("novalidate",!0),g.novalidate=!0),{pre:function(a,c,e,g){c.bind("submit",function(e){i.setFormDirtyOnSubmit&&a.$apply(function(){g.$triedSubmit=!0}),i.preventInvalidSubmit&&!g.$valid?d(e):i.preventDoubleSubmit&&(g.$preventDoubleSubmit&&d(e),h&&b.cancel(h),g.$preventDoubleSubmit=!0,h=b(function(){g.$preventDoubleSubmit=!1},i.preventDoubleSubmitTimeoutLength)),i.scrollToAndFocusFirstErrorOnSubmit&&f(c,g,i.scrollAnimationTime,i.scrollOffset)})},post:function(a,d,f,g){g.$triedSubmit=!1,g.$preventDoubleSubmit=!1,g.ngFabFormConfig=i,g.$resetForm=function(a){if(a===!0)for(var b=d.find("input"),c=0;c<b.length;c++){var e=angular.element(b[c]),f=e.controller("ngModel");f&&(f.$setViewValue(""),f.$render())}g.$triedSubmit=!1,g.$setPristine(),g.$setUntouched()},i.disabledForms&&e(d,f),f.ngFabFormOptions&&a.$watch(f.ngFabFormOptions,function(b){if(b){var d=angular.copy(i);i=g.ngFabFormConfig=angular.extend(i,b),a.$broadcast(c.formChangeEvent,i,d)}},!0),a.$on("$destroy",function(){h&&b.cancel(h)})}}}}}]),angular.module("ngFabForm").directive("ngForm",["ngFabFormDirective",function(a){"use strict";return a}]);
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/ng-fab-form/dist/ng-fab-form.min.js","/resources/assets/vendor/ng-fab-form/dist")

},{"_process":7,"buffer":3}],73:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
!function(a,b){b["true"]=a,/**
 * @license Rangy, a cross-browser JavaScript range and selection library
 * http://code.google.com/p/rangy/
 *
 * Copyright 2012, Tim Down
 * Licensed under the MIT license.
 * Version: 1.2.3
 * Build date: 26 February 2012
 */
window.rangy=function(){function a(a,b){var c=typeof a[b];return c==l||!(c!=k||!a[b])||"unknown"==c}function b(a,b){return!(typeof a[b]!=k||!a[b])}function c(a,b){return typeof a[b]!=m}function d(a){return function(b,c){for(var d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}function e(a){return a&&r(a,q)&&t(a,p)}function f(a){window.alert("Rangy not supported in your browser. Reason: "+a),u.initialized=!0,u.supported=!1}function g(a){var b="Rangy warning: "+a;u.config.alertOnWarn?window.alert(b):typeof window.console!=m&&typeof window.console.log!=m&&window.console.log(b)}function h(){if(!u.initialized){var c,d=!1,g=!1;a(document,"createRange")&&(c=document.createRange(),r(c,o)&&t(c,n)&&(d=!0),c.detach());var h=b(document,"body")?document.body:document.getElementsByTagName("body")[0];h&&a(h,"createTextRange")&&(c=h.createTextRange(),e(c)&&(g=!0)),d||g||f("Neither Range nor TextRange are implemented"),u.initialized=!0,u.features={implementsDomRange:d,implementsTextRange:g};for(var i=w.concat(v),j=0,k=i.length;k>j;++j)try{i[j](u)}catch(l){b(window,"console")&&a(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",l)}}}function i(a){a=a||window,h();for(var b=0,c=x.length;c>b;++b)x[b](a)}function j(a){this.name=a,this.initialized=!1,this.supported=!1}var k="object",l="function",m="undefined",n=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],o=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],p=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],q=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],r=d(a),s=d(b),t=d(c),u={version:"1.2.3",initialized:!1,supported:!0,util:{isHostMethod:a,isHostObject:b,isHostProperty:c,areHostMethods:r,areHostObjects:s,areHostProperties:t,isTextRange:e},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};u.fail=f,u.warn=g,{}.hasOwnProperty?u.util.extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}:f("hasOwnProperty not supported");var v=[],w=[];u.init=h,u.addInitListener=function(a){u.initialized?a(u):v.push(a)};var x=[];u.addCreateMissingNativeApiListener=function(a){x.push(a)},u.createMissingNativeApi=i,j.prototype.fail=function(a){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+a)},j.prototype.warn=function(a){u.warn("Module "+this.name+": "+a)},j.prototype.createError=function(a){return new Error("Error in Rangy "+this.name+" module: "+a)},u.createModule=function(a,b){var c=new j(a);u.modules[a]=c,w.push(function(a){b(a,c),c.initialized=!0,c.supported=!0})},u.requireModules=function(a){for(var b,c,d=0,e=a.length;e>d;++d){if(c=a[d],b=u.modules[c],!(b&&b instanceof j))throw new Error("Module '"+c+"' not found");if(!b.supported)throw new Error("Module '"+c+"' not supported")}};var y=!1,z=function(){y||(y=!0,u.initialized||h())};return typeof window==m?void f("No window found"):typeof document==m?void f("No document found"):(a(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",z,!1),a(window,"addEventListener")?window.addEventListener("load",z,!1):a(window,"attachEvent")?window.attachEvent("onload",z):f("Window does not have required addEventListener or attachEvent method"),u)}(),rangy.createModule("DomUtil",function(a,b){function c(a){var b;return typeof a.namespaceURI==z||null===(b=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==b}function d(a){var b=a.parentNode;return 1==b.nodeType?b:null}function e(a){for(var b=0;a=a.previousSibling;)b++;return b}function f(a){var b;return j(a)?a.length:(b=a.childNodes)?b.length:0}function g(a,b){var c,d=[];for(c=a;c;c=c.parentNode)d.push(c);for(c=b;c;c=c.parentNode)if(D(d,c))return c;return null}function h(a,b,c){for(var d=c?b:b.parentNode;d;){if(d===a)return!0;d=d.parentNode}return!1}function i(a,b,c){for(var d,e=c?a:a.parentNode;e;){if(d=e.parentNode,d===b)return e;e=d}return null}function j(a){var b=a.nodeType;return 3==b||4==b||8==b}function k(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a}function l(a,b){var c=a.cloneNode(!1);return c.deleteData(0,b),a.deleteData(b,a.length-b),k(c,a),c}function m(a){if(9==a.nodeType)return a;if(typeof a.ownerDocument!=z)return a.ownerDocument;if(typeof a.document!=z)return a.document;if(a.parentNode)return m(a.parentNode);throw new Error("getDocument: no document found for node")}function n(a){var b=m(a);if(typeof b.defaultView!=z)return b.defaultView;if(typeof b.parentWindow!=z)return b.parentWindow;throw new Error("Cannot get a window object for node")}function o(a){if(typeof a.contentDocument!=z)return a.contentDocument;if(typeof a.contentWindow!=z)return a.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function p(a){if(typeof a.contentWindow!=z)return a.contentWindow;if(typeof a.contentDocument!=z)return a.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function q(a){return A.isHostObject(a,"body")?a.body:a.getElementsByTagName("body")[0]}function r(a){for(var b;b=a.parentNode;)a=b;return a}function s(a,b,c,d){var f,h,j,k,l;if(a==c)return b===d?0:d>b?-1:1;if(f=i(c,a,!0))return b<=e(f)?-1:1;if(f=i(a,c,!0))return e(f)<d?-1:1;if(h=g(a,c),j=a===h?h:i(a,h,!0),k=c===h?h:i(c,h,!0),j===k)throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(l=h.firstChild;l;){if(l===j)return-1;if(l===k)return 1;l=l.nextSibling}throw new Error("Should not be here!")}function t(a){for(var b,c=m(a).createDocumentFragment();b=a.firstChild;)c.appendChild(b);return c}function u(a){if(!a)return"[No node]";if(j(a))return'"'+a.data+'"';if(1==a.nodeType){var b=a.id?' id="'+a.id+'"':"";return"<"+a.nodeName+b+">["+a.childNodes.length+"]"}return a.nodeName}function v(a){this.root=a,this._next=a}function w(a){return new v(a)}function x(a,b){this.node=a,this.offset=b}function y(a){this.code=this[a],this.codeName=a,this.message="DOMException: "+this.codeName}var z="undefined",A=a.util;A.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||b.fail("document missing a Node creation method"),A.isHostMethod(document,"getElementsByTagName")||b.fail("document missing getElementsByTagName method");var B=document.createElement("div");A.areHostMethods(B,["insertBefore","appendChild","cloneNode"]||!A.areHostObjects(B,["previousSibling","nextSibling","childNodes","parentNode"]))||b.fail("Incomplete Element implementation"),A.isHostProperty(B,"innerHTML")||b.fail("Element is missing innerHTML property");var C=document.createTextNode("test");A.areHostMethods(C,["splitText","deleteData","insertData","appendData","cloneNode"]||!A.areHostObjects(B,["previousSibling","nextSibling","childNodes","parentNode"])||!A.areHostProperties(C,["data"]))||b.fail("Incomplete Text Node implementation");var D=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1};v.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a,b,c=this._current=this._next;if(this._current)if(a=c.firstChild)this._next=a;else{for(b=null;c!==this.root&&!(b=c.nextSibling);)c=c.parentNode;this._next=b}return this._current},detach:function(){this._current=this._next=this.root=null}},x.prototype={equals:function(a){return this.node===a.node&this.offset==a.offset},inspect:function(){return"[DomPosition("+u(this.node)+":"+this.offset+")]"}},y.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},y.prototype.toString=function(){return this.message},a.dom={arrayContains:D,isHtmlNamespace:c,parentElement:d,getNodeIndex:e,getNodeLength:f,getCommonAncestor:g,isAncestorOf:h,getClosestAncestorIn:i,isCharacterDataNode:j,insertAfter:k,splitDataNode:l,getDocument:m,getWindow:n,getIframeWindow:p,getIframeDocument:o,getBody:q,getRootContainer:r,comparePoints:s,inspectNode:u,fragmentFromNodeChildren:t,createIterator:w,DomPosition:x},a.DOMException=y}),rangy.createModule("DomRange",function(a){function b(a,b){return 3!=a.nodeType&&(L.isAncestorOf(a,b.startContainer,!0)||L.isAncestorOf(a,b.endContainer,!0))}function c(a){return L.getDocument(a.startContainer)}function d(a,b,c){var d=a._listeners[b];if(d)for(var e=0,f=d.length;f>e;++e)d[e].call(a,{target:a,args:c})}function e(a){return new M(a.parentNode,L.getNodeIndex(a))}function f(a){return new M(a.parentNode,L.getNodeIndex(a)+1)}function g(a,b,c){var d=11==a.nodeType?a.firstChild:a;return L.isCharacterDataNode(b)?c==b.length?L.insertAfter(a,b):b.parentNode.insertBefore(a,0==c?b:L.splitDataNode(b,c)):c>=b.childNodes.length?b.appendChild(a):b.insertBefore(a,b.childNodes[c]),d}function h(a){for(var b,d,e,f=c(a.range).createDocumentFragment();d=a.next();){if(b=a.isPartiallySelectedSubtree(),d=d.cloneNode(!b),b&&(e=a.getSubtreeIterator(),d.appendChild(h(e)),e.detach(!0)),10==d.nodeType)throw new N("HIERARCHY_REQUEST_ERR");f.appendChild(d)}return f}function i(a,b,c){var d,e;c=c||{stop:!1};for(var f,g;f=a.next();)if(a.isPartiallySelectedSubtree()){if(b(f)===!1)return void(c.stop=!0);if(g=a.getSubtreeIterator(),i(g,b,c),g.detach(!0),c.stop)return}else for(d=L.createIterator(f);e=d.next();)if(b(e)===!1)return void(c.stop=!0)}function j(a){for(var b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),j(b),b.detach(!0)):a.remove()}function k(a){for(var b,d,e=c(a.range).createDocumentFragment();b=a.next();){if(a.isPartiallySelectedSubtree()?(b=b.cloneNode(!1),d=a.getSubtreeIterator(),b.appendChild(k(d)),d.detach(!0)):a.remove(),10==b.nodeType)throw new N("HIERARCHY_REQUEST_ERR");e.appendChild(b)}return e}function l(a,b,c){var d,e=!(!b||!b.length),f=!!c;e&&(d=new RegExp("^("+b.join("|")+")$"));var g=[];return i(new n(a,!1),function(a){e&&!d.test(a.nodeType)||f&&!c(a)||g.push(a)}),g}function m(a){var b="undefined"==typeof a.getName?"Range":a.getName();return"["+b+"("+L.inspectNode(a.startContainer)+":"+a.startOffset+", "+L.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function n(a,b){if(this.range=a,this.clonePartiallySelectedTextNodes=b,!a.collapsed){this.sc=a.startContainer,this.so=a.startOffset,this.ec=a.endContainer,this.eo=a.endOffset;var c=a.commonAncestorContainer;this.sc===this.ec&&L.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==c||L.isCharacterDataNode(this.sc)?L.getClosestAncestorIn(this.sc,c,!0):this.sc.childNodes[this.so],this._last=this.ec!==c||L.isCharacterDataNode(this.ec)?L.getClosestAncestorIn(this.ec,c,!0):this.ec.childNodes[this.eo-1])}}function o(a){this.code=this[a],this.codeName=a,this.message="RangeException: "+this.codeName}function p(a,b,c){this.nodes=l(a,b,c),this._next=this.nodes[0],this._position=0}function q(a){return function(b,c){for(var d,e=c?b:b.parentNode;e;){if(d=e.nodeType,L.arrayContains(a,d))return e;e=e.parentNode}return null}}function r(a,b){if(W(a,b))throw new o("INVALID_NODE_TYPE_ERR")}function s(a){if(!a.startContainer)throw new N("INVALID_STATE_ERR")}function t(a,b){if(!L.arrayContains(b,a.nodeType))throw new o("INVALID_NODE_TYPE_ERR")}function u(a,b){if(0>b||b>(L.isCharacterDataNode(a)?a.length:a.childNodes.length))throw new N("INDEX_SIZE_ERR")}function v(a,b){if(U(a,!0)!==U(b,!0))throw new N("WRONG_DOCUMENT_ERR")}function w(a){if(V(a,!0))throw new N("NO_MODIFICATION_ALLOWED_ERR")}function x(a,b){if(!a)throw new N(b)}function y(a){return!L.arrayContains(P,a.nodeType)&&!U(a,!0)}function z(a,b){return b<=(L.isCharacterDataNode(a)?a.length:a.childNodes.length)}function A(a){return!!a.startContainer&&!!a.endContainer&&!y(a.startContainer)&&!y(a.endContainer)&&z(a.startContainer,a.startOffset)&&z(a.endContainer,a.endOffset)}function B(a){if(s(a),!A(a))throw new Error("Range error: Range is no longer valid after DOM mutation ("+a.inspect()+")")}function C(){}function D(a){a.START_TO_START=ab,a.START_TO_END=bb,a.END_TO_END=cb,a.END_TO_START=db,a.NODE_BEFORE=eb,a.NODE_AFTER=fb,a.NODE_BEFORE_AND_AFTER=gb,a.NODE_INSIDE=hb}function E(a){D(a),D(a.prototype)}function F(a,b){return function(){B(this);var c,d,e=this.startContainer,g=this.startOffset,h=this.commonAncestorContainer,j=new n(this,!0);e!==h&&(c=L.getClosestAncestorIn(e,h,!0),d=f(c),e=d.node,g=d.offset),i(j,w),j.reset();var k=a(j);return j.detach(),b(this,e,g,e,g),k}}function G(c,d,g){function h(a,b){return function(c){s(this),t(c,O),t(T(c),P);var d=(a?e:f)(c);(b?i:l)(this,d.node,d.offset)}}function i(a,b,c){var e=a.endContainer,f=a.endOffset;(b!==a.startContainer||c!==a.startOffset)&&((T(b)!=T(e)||1==L.comparePoints(b,c,e,f))&&(e=b,f=c),d(a,b,c,e,f))}function l(a,b,c){var e=a.startContainer,f=a.startOffset;(b!==a.endContainer||c!==a.endOffset)&&((T(b)!=T(e)||-1==L.comparePoints(b,c,e,f))&&(e=b,f=c),d(a,e,f,b,c))}function m(a,b,c){(b!==a.startContainer||c!==a.startOffset||b!==a.endContainer||c!==a.endOffset)&&d(a,b,c,b,c)}c.prototype=new C,a.util.extend(c.prototype,{setStart:function(a,b){s(this),r(a,!0),u(a,b),i(this,a,b)},setEnd:function(a,b){s(this),r(a,!0),u(a,b),l(this,a,b)},setStartBefore:h(!0,!0),setStartAfter:h(!1,!0),setEndBefore:h(!0,!1),setEndAfter:h(!1,!1),collapse:function(a){B(this),a?d(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):d(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){s(this),r(a,!0),d(this,a,0,a,L.getNodeLength(a))},selectNode:function(a){s(this),r(a,!1),t(a,O);var b=e(a),c=f(a);d(this,b.node,b.offset,c.node,c.offset)},extractContents:F(k,d),deleteContents:F(j,d),canSurroundContents:function(){B(this),w(this.startContainer),w(this.endContainer);var a=new n(this,!0),c=a._first&&b(a._first,this)||a._last&&b(a._last,this);return a.detach(),!c},detach:function(){g(this)},splitBoundaries:function(){B(this);var a=this.startContainer,b=this.startOffset,c=this.endContainer,e=this.endOffset,f=a===c;L.isCharacterDataNode(c)&&e>0&&e<c.length&&L.splitDataNode(c,e),L.isCharacterDataNode(a)&&b>0&&b<a.length&&(a=L.splitDataNode(a,b),f?(e-=b,c=a):c==a.parentNode&&e>=L.getNodeIndex(a)&&e++,b=0),d(this,a,b,c,e)},normalizeBoundaries:function(){B(this);var a=this.startContainer,b=this.startOffset,c=this.endContainer,e=this.endOffset,f=function(a){var b=a.nextSibling;b&&b.nodeType==a.nodeType&&(c=a,e=a.length,a.appendData(b.data),b.parentNode.removeChild(b))},g=function(d){var f=d.previousSibling;if(f&&f.nodeType==d.nodeType){a=d;var g=d.length;if(b=f.length,d.insertData(0,f.data),f.parentNode.removeChild(f),a==c)e+=b,c=a;else if(c==d.parentNode){var h=L.getNodeIndex(d);e==h?(c=d,e=g):e>h&&e--}}},h=!0;if(L.isCharacterDataNode(c))c.length==e&&f(c);else{if(e>0){var i=c.childNodes[e-1];i&&L.isCharacterDataNode(i)&&f(i)}h=!this.collapsed}if(h){if(L.isCharacterDataNode(a))0==b&&g(a);else if(b<a.childNodes.length){var j=a.childNodes[b];j&&L.isCharacterDataNode(j)&&g(j)}}else a=c,b=e;d(this,a,b,c,e)},collapseToPoint:function(a,b){s(this),r(a,!0),u(a,b),m(this,a,b)}}),E(c)}function H(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a.commonAncestorContainer=a.collapsed?a.startContainer:L.getCommonAncestor(a.startContainer,a.endContainer)}function I(a,b,c,e,f){var g=a.startContainer!==b||a.startOffset!==c,h=a.endContainer!==e||a.endOffset!==f;a.startContainer=b,a.startOffset=c,a.endContainer=e,a.endOffset=f,H(a),d(a,"boundarychange",{startMoved:g,endMoved:h})}function J(a){s(a),a.startContainer=a.startOffset=a.endContainer=a.endOffset=null,a.collapsed=a.commonAncestorContainer=null,d(a,"detach",null),a._listeners=null}function K(a){this.startContainer=a,this.startOffset=0,this.endContainer=a,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},H(this)}a.requireModules(["DomUtil"]);var L=a.dom,M=L.DomPosition,N=a.DOMException;n.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;return a&&(this._next=a!==this._last?a.nextSibling:null,L.isCharacterDataNode(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so))),a},remove:function(){var a,b,c=this._current;!L.isCharacterDataNode(c)||c!==this.sc&&c!==this.ec?c.parentNode&&c.parentNode.removeChild(c):(a=c===this.sc?this.so:0,b=c===this.ec?this.eo:c.length,a!=b&&c.deleteData(a,b-a))},isPartiallySelectedSubtree:function(){var a=this._current;return b(a,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse();else{a=new K(c(this.range));var b=this._current,d=b,e=0,f=b,g=L.getNodeLength(b);L.isAncestorOf(b,this.sc,!0)&&(d=this.sc,e=this.so),L.isAncestorOf(b,this.ec,!0)&&(f=this.ec,g=this.eo),I(a,d,e,f,g)}return new n(a,this.clonePartiallySelectedTextNodes)},detach:function(a){a&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},o.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},o.prototype.toString=function(){return this.message},p.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var O=[1,3,4,5,7,8,10],P=[2,9,11],Q=[5,6,10,12],R=[1,3,4,5,7,8,10,11],S=[1,3,4,5,7,8],T=L.getRootContainer,U=q([9,11]),V=q(Q),W=q([6,10,12]),X=document.createElement("style"),Y=!1;try{X.innerHTML="<b>x</b>",Y=3==X.firstChild.nodeType}catch(Z){}a.features.htmlParsingConforms=Y;var $=Y?function(a){var b=this.startContainer,c=L.getDocument(b);if(!b)throw new N("INVALID_STATE_ERR");var d=null;return 1==b.nodeType?d=b:L.isCharacterDataNode(b)&&(d=L.parentElement(b)),d=null===d||"HTML"==d.nodeName&&L.isHtmlNamespace(L.getDocument(d).documentElement)&&L.isHtmlNamespace(d)?c.createElement("body"):d.cloneNode(!1),d.innerHTML=a,L.fragmentFromNodeChildren(d)}:function(a){s(this);var b=c(this),d=b.createElement("body");return d.innerHTML=a,L.fragmentFromNodeChildren(d)},_=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ab=0,bb=1,cb=2,db=3,eb=0,fb=1,gb=2,hb=3;C.prototype={attachListener:function(a,b){this._listeners[a].push(b)},compareBoundaryPoints:function(a,b){B(this),v(this.startContainer,b.startContainer);var c,d,e,f,g=a==db||a==ab?"start":"end",h=a==bb||a==ab?"start":"end";return c=this[g+"Container"],d=this[g+"Offset"],e=b[h+"Container"],f=b[h+"Offset"],L.comparePoints(c,d,e,f)},insertNode:function(a){if(B(this),t(a,R),w(this.startContainer),L.isAncestorOf(a,this.startContainer,!0))throw new N("HIERARCHY_REQUEST_ERR");var b=g(a,this.startContainer,this.startOffset);this.setStartBefore(b)},cloneContents:function(){B(this);var a,b;if(this.collapsed)return c(this).createDocumentFragment();if(this.startContainer===this.endContainer&&L.isCharacterDataNode(this.startContainer))return a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),b=c(this).createDocumentFragment(),b.appendChild(a),b;var d=new n(this,!0);return a=h(d),d.detach(),a},canSurroundContents:function(){B(this),w(this.startContainer),w(this.endContainer);var a=new n(this,!0),c=a._first&&b(a._first,this)||a._last&&b(a._last,this);return a.detach(),!c},surroundContents:function(a){if(t(a,S),!this.canSurroundContents())throw new o("BAD_BOUNDARYPOINTS_ERR");var b=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);g(a,this.startContainer,this.startOffset),a.appendChild(b),this.selectNode(a)},cloneRange:function(){B(this);for(var a,b=new K(c(this)),d=_.length;d--;)a=_[d],b[a]=this[a];return b},toString:function(){B(this);var a=this.startContainer;if(a===this.endContainer&&L.isCharacterDataNode(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[],c=new n(this,!0);return i(c,function(a){(3==a.nodeType||4==a.nodeType)&&b.push(a.data)}),c.detach(),b.join("")},compareNode:function(a){B(this);var b=a.parentNode,c=L.getNodeIndex(a);if(!b)throw new N("NOT_FOUND_ERR");var d=this.comparePoint(b,c),e=this.comparePoint(b,c+1);return 0>d?e>0?gb:eb:e>0?fb:hb},comparePoint:function(a,b){return B(this),x(a,"HIERARCHY_REQUEST_ERR"),v(a,this.startContainer),L.comparePoints(a,b,this.startContainer,this.startOffset)<0?-1:L.comparePoints(a,b,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:$,toHtml:function(){B(this);var a=c(this).createElement("div");return a.appendChild(this.cloneContents()),a.innerHTML},intersectsNode:function(a,b){if(B(this),x(a,"NOT_FOUND_ERR"),L.getDocument(a)!==c(this))return!1;var d=a.parentNode,e=L.getNodeIndex(a);x(d,"NOT_FOUND_ERR");var f=L.comparePoints(d,e,this.endContainer,this.endOffset),g=L.comparePoints(d,e+1,this.startContainer,this.startOffset);return b?0>=f&&g>=0:0>f&&g>0},isPointInRange:function(a,b){return B(this),x(a,"HIERARCHY_REQUEST_ERR"),v(a,this.startContainer),L.comparePoints(a,b,this.startContainer,this.startOffset)>=0&&L.comparePoints(a,b,this.endContainer,this.endOffset)<=0},intersectsRange:function(a,b){if(B(this),c(a)!=c(this))throw new N("WRONG_DOCUMENT_ERR");var d=L.comparePoints(this.startContainer,this.startOffset,a.endContainer,a.endOffset),e=L.comparePoints(this.endContainer,this.endOffset,a.startContainer,a.startOffset);return b?0>=d&&e>=0:0>d&&e>0},intersection:function(a){if(this.intersectsRange(a)){var b=L.comparePoints(this.startContainer,this.startOffset,a.startContainer,a.startOffset),c=L.comparePoints(this.endContainer,this.endOffset,a.endContainer,a.endOffset),d=this.cloneRange();return-1==b&&d.setStart(a.startContainer,a.startOffset),1==c&&d.setEnd(a.endContainer,a.endOffset),d}return null},union:function(a){if(this.intersectsRange(a,!0)){var b=this.cloneRange();return-1==L.comparePoints(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&b.setStart(a.startContainer,a.startOffset),1==L.comparePoints(a.endContainer,a.endOffset,this.endContainer,this.endOffset)&&b.setEnd(a.endContainer,a.endOffset),b}throw new o("Ranges do not intersect")},containsNode:function(a,b){return b?this.intersectsNode(a,!1):this.compareNode(a)==hb},containsNodeContents:function(a){return this.comparePoint(a,0)>=0&&this.comparePoint(a,L.getNodeLength(a))<=0},containsRange:function(a){return this.intersection(a).equals(a)},containsNodeText:function(a){var b=this.cloneRange();b.selectNode(a);var c=b.getNodes([3]);if(c.length>0){b.setStart(c[0],0);var d=c.pop();b.setEnd(d,d.length);var e=this.containsRange(b);return b.detach(),e}return this.containsNodeContents(a)},createNodeIterator:function(a,b){return B(this),new p(this,a,b)},getNodes:function(a,b){return B(this),l(this,a,b)},getDocument:function(){return c(this)},collapseBefore:function(a){s(this),this.setEndBefore(a),this.collapse(!1)},collapseAfter:function(a){s(this),this.setStartAfter(a),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(a){return K.rangesEqual(this,a)},isValid:function(){return A(this)},inspect:function(){return m(this)}},G(K,I,J),a.rangePrototype=C.prototype,K.rangeProperties=_,K.RangeIterator=n,K.copyComparisonConstants=E,K.createPrototypeRange=G,K.inspect=m,K.getRangeDocument=c,K.rangesEqual=function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset},a.DomRange=K,a.RangeException=o}),rangy.createModule("WrappedRange",function(a){function b(a){var b=a.parentElement(),c=a.duplicate();c.collapse(!0);var d=c.parentElement();c=a.duplicate(),c.collapse(!1);var e=c.parentElement(),f=d==e?d:g.getCommonAncestor(d,e);return f==b?f:g.getCommonAncestor(b,f)}function c(a){return 0==a.compareEndPoints("StartToEnd",a)}function d(a,b,c,d){var e=a.duplicate();e.collapse(c);var f=e.parentElement();if(g.isAncestorOf(b,f,!0)||(f=b),!f.canHaveHTML)return new h(f.parentNode,g.getNodeIndex(f));var i,j,k,l,m,n=g.getDocument(f).createElement("span"),o=c?"StartToStart":"StartToEnd";do f.insertBefore(n,n.previousSibling),e.moveToElementText(n);while((i=e.compareEndPoints(o,a))>0&&n.previousSibling);if(m=n.nextSibling,-1==i&&m&&g.isCharacterDataNode(m)){e.setEndPoint(c?"EndToStart":"EndToEnd",a);var p;if(/[\r\n]/.test(m.data)){var q=e.duplicate(),r=q.text.replace(/\r\n/g,"\r").length;for(p=q.moveStart("character",r);-1==(i=q.compareEndPoints("StartToEnd",q));)p++,q.moveStart("character",1)}else p=e.text.length;l=new h(m,p)}else j=(d||!c)&&n.previousSibling,k=(d||c)&&n.nextSibling,l=k&&g.isCharacterDataNode(k)?new h(k,0):j&&g.isCharacterDataNode(j)?new h(j,j.length):new h(f,g.getNodeIndex(n));return n.parentNode.removeChild(n),l}function e(a,b){var c,d,e,f,h=a.offset,i=g.getDocument(a.node),j=i.body.createTextRange(),k=g.isCharacterDataNode(a.node);return k?(c=a.node,d=c.parentNode):(f=a.node.childNodes,c=h<f.length?f[h]:null,d=a.node),e=i.createElement("span"),e.innerHTML="&#feff;",c?d.insertBefore(e,c):d.appendChild(e),j.moveToElementText(e),j.collapse(!b),d.removeChild(e),k&&j[b?"moveStart":"moveEnd"]("character",h),j}a.requireModules(["DomUtil","DomRange"]);var f,g=a.dom,h=g.DomPosition,i=a.DomRange;if(!a.features.implementsDomRange||a.features.implementsTextRange&&a.config.preferTextRange){if(a.features.implementsTextRange){f=function(a){this.textRange=a,this.refresh()},f.prototype=new i(document),f.prototype.refresh=function(){var a,e,f=b(this.textRange);c(this.textRange)?e=a=d(this.textRange,f,!0,!0):(a=d(this.textRange,f,!0,!1),e=d(this.textRange,f,!1,!1)),this.setStart(a.node,a.offset),this.setEnd(e.node,e.offset)},i.copyComparisonConstants(f);var j=function(){return this}();"undefined"==typeof j.Range&&(j.Range=f),a.createNativeRange=function(a){return a=a||document,a.body.createTextRange()}}}else!function(){function b(a){for(var b,c=k.length;c--;)b=k[c],a[b]=a.nativeRange[b]}function c(a,b,c,d,e){var f=a.startContainer!==b||a.startOffset!=c,g=a.endContainer!==d||a.endOffset!=e;(f||g)&&(a.setEnd(d,e),a.setStart(b,c))}function d(a){a.nativeRange.detach(),a.detached=!0;for(var b,c=k.length;c--;)b=k[c],a[b]=null}var e,h,j,k=i.rangeProperties;f=function(a){if(!a)throw new Error("Range must be specified");this.nativeRange=a,b(this)},i.createPrototypeRange(f,c,d),e=f.prototype,e.selectNode=function(a){this.nativeRange.selectNode(a),b(this)},e.deleteContents=function(){this.nativeRange.deleteContents(),b(this)},e.extractContents=function(){var a=this.nativeRange.extractContents();return b(this),a},e.cloneContents=function(){return this.nativeRange.cloneContents()},e.surroundContents=function(a){this.nativeRange.surroundContents(a),b(this)},e.collapse=function(a){this.nativeRange.collapse(a),b(this)},e.cloneRange=function(){return new f(this.nativeRange.cloneRange())},e.refresh=function(){b(this)},e.toString=function(){return this.nativeRange.toString()};var l=document.createTextNode("test");g.getBody(document).appendChild(l);var m=document.createRange();m.setStart(l,0),m.setEnd(l,0);try{m.setStart(l,1),h=!0,e.setStart=function(a,c){this.nativeRange.setStart(a,c),b(this)},e.setEnd=function(a,c){this.nativeRange.setEnd(a,c),b(this)},j=function(a){return function(c){this.nativeRange[a](c),b(this)}}}catch(n){h=!1,e.setStart=function(a,c){try{this.nativeRange.setStart(a,c)}catch(d){this.nativeRange.setEnd(a,c),this.nativeRange.setStart(a,c)}b(this)},e.setEnd=function(a,c){try{this.nativeRange.setEnd(a,c)}catch(d){this.nativeRange.setStart(a,c),this.nativeRange.setEnd(a,c)}b(this)},j=function(a,c){return function(d){try{this.nativeRange[a](d)}catch(e){this.nativeRange[c](d),this.nativeRange[a](d)}b(this)}}}e.setStartBefore=j("setStartBefore","setEndBefore"),e.setStartAfter=j("setStartAfter","setEndAfter"),e.setEndBefore=j("setEndBefore","setStartBefore"),e.setEndAfter=j("setEndAfter","setStartAfter"),m.selectNodeContents(l),e.selectNodeContents=m.startContainer==l&&m.endContainer==l&&0==m.startOffset&&m.endOffset==l.length?function(a){this.nativeRange.selectNodeContents(a),b(this)}:function(a){this.setStart(a,0),this.setEnd(a,i.getEndOffset(a))},m.selectNodeContents(l),m.setEnd(l,3);var o=document.createRange();o.selectNodeContents(l),o.setEnd(l,4),o.setStart(l,2),e.compareBoundaryPoints=-1==m.compareBoundaryPoints(m.START_TO_END,o)&1==m.compareBoundaryPoints(m.END_TO_START,o)?function(a,b){return b=b.nativeRange||b,a==b.START_TO_END?a=b.END_TO_START:a==b.END_TO_START&&(a=b.START_TO_END),this.nativeRange.compareBoundaryPoints(a,b)}:function(a,b){return this.nativeRange.compareBoundaryPoints(a,b.nativeRange||b)},a.util.isHostMethod(m,"createContextualFragment")&&(e.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)}),g.getBody(document).removeChild(l),m.detach(),o.detach()}(),a.createNativeRange=function(a){return a=a||document,a.createRange()};a.features.implementsTextRange&&(f.rangeToTextRange=function(a){if(a.collapsed){var b=e(new h(a.startContainer,a.startOffset),!0);return b}var c=e(new h(a.startContainer,a.startOffset),!0),d=e(new h(a.endContainer,a.endOffset),!1),f=g.getDocument(a.startContainer).body.createTextRange();return f.setEndPoint("StartToStart",c),f.setEndPoint("EndToEnd",d),f}),f.prototype.getName=function(){return"WrappedRange"},a.WrappedRange=f,a.createRange=function(b){return b=b||document,new f(a.createNativeRange(b))},a.createRangyRange=function(a){return a=a||document,new i(a)},a.createIframeRange=function(b){return a.createRange(g.getIframeDocument(b))},a.createIframeRangyRange=function(b){return a.createRangyRange(g.getIframeDocument(b))},a.addCreateMissingNativeApiListener(function(b){var c=b.document;"undefined"==typeof c.createRange&&(c.createRange=function(){return a.createRange(this)}),c=b=null})}),rangy.createModule("WrappedSelection",function(a,b){function c(a){return(a||window).getSelection()}function d(a){return(a||window).document.selection}function e(a,b,c){var d=c?"end":"start",e=c?"start":"end";a.anchorNode=b[d+"Container"],a.anchorOffset=b[d+"Offset"],a.focusNode=b[e+"Container"],a.focusOffset=b[e+"Offset"]}function f(a){var b=a.nativeSelection;a.anchorNode=b.anchorNode,a.anchorOffset=b.anchorOffset,a.focusNode=b.focusNode,a.focusOffset=b.focusOffset}function g(a){a.anchorNode=a.focusNode=null,a.anchorOffset=a.focusOffset=0,a.rangeCount=0,a.isCollapsed=!0,a._ranges.length=0}function h(b){var c;return b instanceof y?(c=b._selectionNativeRange,c||(c=a.createNativeRange(w.getDocument(b.startContainer)),c.setEnd(b.endContainer,b.endOffset),c.setStart(b.startContainer,b.startOffset),b._selectionNativeRange=c,b.attachListener("detach",function(){this._selectionNativeRange=null}))):b instanceof z?c=b.nativeRange:a.features.implementsDomRange&&b instanceof w.getWindow(b.startContainer).Range&&(c=b),c}function i(a){if(!a.length||1!=a[0].nodeType)return!1;for(var b=1,c=a.length;c>b;++b)if(!w.isAncestorOf(a[0],a[b]))return!1;return!0}function j(a){var b=a.getNodes();if(!i(b))throw new Error("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return b[0]}function k(a){return!!a&&"undefined"!=typeof a.text}function l(a,b){var c=new z(b);a._ranges=[c],e(a,c,!1),a.rangeCount=1,a.isCollapsed=c.collapsed}function m(b){if(b._ranges.length=0,"None"==b.docSelection.type)g(b);else{var c=b.docSelection.createRange();if(k(c))l(b,c);else{b.rangeCount=c.length;for(var d,f=w.getDocument(c.item(0)),h=0;h<b.rangeCount;++h)d=a.createRange(f),d.selectNode(c.item(h)),b._ranges.push(d);
b.isCollapsed=1==b.rangeCount&&b._ranges[0].collapsed,e(b,b._ranges[b.rangeCount-1],!1)}}}function n(a,b){for(var c=a.docSelection.createRange(),d=j(b),e=w.getDocument(c.item(0)),f=w.getBody(e).createControlRange(),g=0,h=c.length;h>g;++g)f.add(c.item(g));try{f.add(d)}catch(i){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}f.select(),m(a)}function o(a,b,c){this.nativeSelection=a,this.docSelection=b,this._ranges=[],this.win=c,this.refresh()}function p(a,b){for(var c,d=w.getDocument(b[0].startContainer),e=w.getBody(d).createControlRange(),f=0;f<rangeCount;++f){c=j(b[f]);try{e.add(c)}catch(g){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}e.select(),m(a)}function q(a,b){if(a.anchorNode&&w.getDocument(a.anchorNode)!==w.getDocument(b))throw new A("WRONG_DOCUMENT_ERR")}function r(a){var b=[],c=new B(a.anchorNode,a.anchorOffset),d=new B(a.focusNode,a.focusOffset),e="function"==typeof a.getName?a.getName():"Selection";if("undefined"!=typeof a.rangeCount)for(var f=0,g=a.rangeCount;g>f;++f)b[f]=y.inspect(a.getRangeAt(f));return"["+e+"(Ranges: "+b.join(", ")+")(anchor: "+c.inspect()+", focus: "+d.inspect()+"]"}a.requireModules(["DomUtil","DomRange","WrappedRange"]),a.config.checkSelectionRanges=!0;var s,t,u="boolean",v="_rangySelection",w=a.dom,x=a.util,y=a.DomRange,z=a.WrappedRange,A=a.DOMException,B=w.DomPosition,C="Control",D=a.util.isHostMethod(window,"getSelection"),E=a.util.isHostObject(document,"selection"),F=E&&(!D||a.config.preferTextRange);F?(s=d,a.isSelectionValid=function(a){var b=(a||window).document,c=b.selection;return"None"!=c.type||w.getDocument(c.createRange().parentElement())==b}):D?(s=c,a.isSelectionValid=function(){return!0}):b.fail("Neither document.selection or window.getSelection() detected."),a.getNativeSelection=s;var G=s(),H=a.createNativeRange(document),I=w.getBody(document),J=x.areHostObjects(G,["anchorNode","focusNode"]&&x.areHostProperties(G,["anchorOffset","focusOffset"]));a.features.selectionHasAnchorAndFocus=J;var K=x.isHostMethod(G,"extend");a.features.selectionHasExtend=K;var L="number"==typeof G.rangeCount;a.features.selectionHasRangeCount=L;var M=!1,N=!0;x.areHostMethods(G,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof G.rangeCount&&a.features.implementsDomRange&&!function(){var a=document.createElement("iframe");a.frameBorder=0,a.style.position="absolute",a.style.left="-10000px",I.appendChild(a);var b=w.getIframeDocument(a);b.open(),b.write("<html><head></head><body>12</body></html>"),b.close();var c=w.getIframeWindow(a).getSelection(),d=b.documentElement,e=d.lastChild,f=e.firstChild,g=b.createRange();g.setStart(f,1),g.collapse(!0),c.addRange(g),N=1==c.rangeCount,c.removeAllRanges();var h=g.cloneRange();g.setStart(f,0),h.setEnd(f,2),c.addRange(g),c.addRange(h),M=2==c.rangeCount,g.detach(),h.detach(),I.removeChild(a)}(),a.features.selectionSupportsMultipleRanges=M,a.features.collapsedNonEditableSelectionsSupported=N;var O,P=!1;I&&x.isHostMethod(I,"createControlRange")&&(O=I.createControlRange(),x.areHostProperties(O,["item","add"])&&(P=!0)),a.features.implementsControlRange=P,t=J?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:!1};var Q;x.isHostMethod(G,"getRangeAt")?Q=function(a,b){try{return a.getRangeAt(b)}catch(c){return null}}:J&&(Q=function(b){var c=w.getDocument(b.anchorNode),d=a.createRange(c);return d.setStart(b.anchorNode,b.anchorOffset),d.setEnd(b.focusNode,b.focusOffset),d.collapsed!==this.isCollapsed&&(d.setStart(b.focusNode,b.focusOffset),d.setEnd(b.anchorNode,b.anchorOffset)),d}),a.getSelection=function(a){a=a||window;var b=a[v],c=s(a),e=E?d(a):null;return b?(b.nativeSelection=c,b.docSelection=e,b.refresh(a)):(b=new o(c,e,a),a[v]=b),b},a.getIframeSelection=function(b){return a.getSelection(w.getIframeWindow(b))};var R=o.prototype;if(!F&&J&&x.areHostMethods(G,["removeAllRanges","addRange"])){R.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),g(this)};var S=function(b,c){var d=y.getRangeDocument(c),e=a.createRange(d);e.collapseToPoint(c.endContainer,c.endOffset),b.nativeSelection.addRange(h(e)),b.nativeSelection.extend(c.startContainer,c.startOffset),b.refresh()};R.addRange=L?function(b,c){if(P&&E&&this.docSelection.type==C)n(this,b);else if(c&&K)S(this,b);else{var d;if(M?d=this.rangeCount:(this.removeAllRanges(),d=0),this.nativeSelection.addRange(h(b)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==d+1){if(a.config.checkSelectionRanges){var f=Q(this.nativeSelection,this.rangeCount-1);f&&!y.rangesEqual(f,b)&&(b=new z(f))}this._ranges[this.rangeCount-1]=b,e(this,b,V(this.nativeSelection)),this.isCollapsed=t(this)}else this.refresh()}}:function(a,b){b&&K?S(this,a):(this.nativeSelection.addRange(h(a)),this.refresh())},R.setRanges=function(a){if(P&&a.length>1)p(this,a);else{this.removeAllRanges();for(var b=0,c=a.length;c>b;++b)this.addRange(a[b])}}}else{if(!(x.isHostMethod(G,"empty")&&x.isHostMethod(H,"select")&&P&&F))return b.fail("No means of selecting a Range or TextRange was found"),!1;R.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var a;if(this.anchorNode)a=w.getDocument(this.anchorNode);else if(this.docSelection.type==C){var b=this.docSelection.createRange();b.length&&(a=w.getDocument(b.item(0)).body.createTextRange())}if(a){var c=a.body.createTextRange();c.select(),this.docSelection.empty()}}}catch(d){}g(this)},R.addRange=function(a){this.docSelection.type==C?n(this,a):(z.rangeToTextRange(a).select(),this._ranges[0]=a,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,e(this,a,!1))},R.setRanges=function(a){this.removeAllRanges();var b=a.length;b>1?p(this,a):b&&this.addRange(a[0])}}R.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new A("INDEX_SIZE_ERR");return this._ranges[a]};var T;if(F)T=function(b){var c;a.isSelectionValid(b.win)?c=b.docSelection.createRange():(c=w.getBody(b.win.document).createTextRange(),c.collapse(!0)),b.docSelection.type==C?m(b):k(c)?l(b,c):g(b)};else if(x.isHostMethod(G,"getRangeAt")&&"number"==typeof G.rangeCount)T=function(b){if(P&&E&&b.docSelection.type==C)m(b);else if(b._ranges.length=b.rangeCount=b.nativeSelection.rangeCount,b.rangeCount){for(var c=0,d=b.rangeCount;d>c;++c)b._ranges[c]=new a.WrappedRange(b.nativeSelection.getRangeAt(c));e(b,b._ranges[b.rangeCount-1],V(b.nativeSelection)),b.isCollapsed=t(b)}else g(b)};else{if(!J||typeof G.isCollapsed!=u||typeof H.collapsed!=u||!a.features.implementsDomRange)return b.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;T=function(a){var b,c=a.nativeSelection;c.anchorNode?(b=Q(c,0),a._ranges=[b],a.rangeCount=1,f(a),a.isCollapsed=t(a)):g(a)}}R.refresh=function(a){var b=a?this._ranges.slice(0):null;if(T(this),a){var c=b.length;if(c!=this._ranges.length)return!1;for(;c--;)if(!y.rangesEqual(b[c],this._ranges[c]))return!1;return!0}};var U=function(a,b){var c=a.getAllRanges(),d=!1;a.removeAllRanges();for(var e=0,f=c.length;f>e;++e)d||b!==c[e]?a.addRange(c[e]):d=!0;a.rangeCount||g(a)};R.removeRange=P?function(a){if(this.docSelection.type==C){for(var b,c=this.docSelection.createRange(),d=j(a),e=w.getDocument(c.item(0)),f=w.getBody(e).createControlRange(),g=!1,h=0,i=c.length;i>h;++h)b=c.item(h),b!==d||g?f.add(c.item(h)):g=!0;f.select(),m(this)}else U(this,a)}:function(a){U(this,a)};var V;!F&&J&&a.features.implementsDomRange?(V=function(a){var b=!1;return a.anchorNode&&(b=1==w.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)),b},R.isBackwards=function(){return V(this)}):V=R.isBackwards=function(){return!1},R.toString=function(){for(var a=[],b=0,c=this.rangeCount;c>b;++b)a[b]=""+this._ranges[b];return a.join("")},R.collapse=function(b,c){q(this,b);var d=a.createRange(w.getDocument(b));d.collapseToPoint(b,c),this.removeAllRanges(),this.addRange(d),this.isCollapsed=!0},R.collapseToStart=function(){if(!this.rangeCount)throw new A("INVALID_STATE_ERR");var a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)},R.collapseToEnd=function(){if(!this.rangeCount)throw new A("INVALID_STATE_ERR");var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)},R.selectAllChildren=function(b){q(this,b);var c=a.createRange(w.getDocument(b));c.selectNodeContents(b),this.removeAllRanges(),this.addRange(c)},R.deleteFromDocument=function(){if(P&&E&&this.docSelection.type==C){for(var a,b=this.docSelection.createRange();b.length;)a=b.item(0),b.remove(a),a.parentNode.removeChild(a);this.refresh()}else if(this.rangeCount){var c=this.getAllRanges();this.removeAllRanges();for(var d=0,e=c.length;e>d;++d)c[d].deleteContents();this.addRange(c[e-1])}},R.getAllRanges=function(){return this._ranges.slice(0)},R.setSingleRange=function(a){this.setRanges([a])},R.containsNode=function(a,b){for(var c=0,d=this._ranges.length;d>c;++c)if(this._ranges[c].containsNode(a,b))return!0;return!1},R.toHtml=function(){var a="";if(this.rangeCount){for(var b=y.getRangeDocument(this._ranges[0]).createElement("div"),c=0,d=this._ranges.length;d>c;++c)b.appendChild(this._ranges[c].cloneContents());a=b.innerHTML}return a},R.getName=function(){return"WrappedSelection"},R.inspect=function(){return r(this)},R.detach=function(){this.win[v]=null,this.win=this.anchorNode=this.focusNode=null},o.inspect=r,a.Selection=o,a.selectionPrototype=R,a.addCreateMissingNativeApiListener(function(b){"undefined"==typeof b.getSelection&&(b.getSelection=function(){return a.getSelection(this)}),b=null})}),/**
 * @license Selection save and restore module for Rangy.
 * Saves and restores user selections using marker invisible elements in the DOM.
 *
 * Part of Rangy, a cross-browser JavaScript range and selection library
 * http://code.google.com/p/rangy/
 *
 * Depends on Rangy core.
 *
 * Copyright 2012, Tim Down
 * Licensed under the MIT license.
 * Version: 1.2.3
 * Build date: 26 February 2012
 */
rangy.createModule("SaveRestore",function(a,b){function c(a,b){return(b||document).getElementById(a)}function d(a,b){var c,d="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),e=k.getDocument(a.startContainer),f=a.cloneRange();return f.collapse(b),c=e.createElement("span"),c.id=d,c.style.lineHeight="0",c.style.display="none",c.className="rangySelectionBoundary",c.appendChild(e.createTextNode(l)),f.insertNode(c),f.detach(),c}function e(a,d,e,f){var g=c(e,a);g?(d[f?"setStartBefore":"setEndBefore"](g),g.parentNode.removeChild(g)):b.warn("Marker element has been removed. Cannot restore selection.")}function f(a,b){return b.compareBoundaryPoints(a.START_TO_START,a)}function g(e){e=e||window;var g=e.document;if(!a.isSelectionValid(e))return void b.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus.");var h,i,j,k=a.getSelection(e),l=k.getAllRanges(),m=[];l.sort(f);for(var n=0,o=l.length;o>n;++n)j=l[n],j.collapsed?(i=d(j,!1),m.push({markerId:i.id,collapsed:!0})):(i=d(j,!1),h=d(j,!0),m[n]={startMarkerId:h.id,endMarkerId:i.id,collapsed:!1,backwards:1==l.length&&k.isBackwards()});for(n=o-1;n>=0;--n)j=l[n],j.collapsed?j.collapseBefore(c(m[n].markerId,g)):(j.setEndBefore(c(m[n].endMarkerId,g)),j.setStartAfter(c(m[n].startMarkerId,g)));return k.setRanges(l),{win:e,doc:g,rangeInfos:m,restored:!1}}function h(d,f){if(!d.restored){for(var g,h,i=d.rangeInfos,j=a.getSelection(d.win),k=[],l=i.length,m=l-1;m>=0;--m){if(g=i[m],h=a.createRange(d.doc),g.collapsed){var n=c(g.markerId,d.doc);if(n){n.style.display="inline";var o=n.previousSibling;o&&3==o.nodeType?(n.parentNode.removeChild(n),h.collapseToPoint(o,o.length)):(h.collapseBefore(n),n.parentNode.removeChild(n))}else b.warn("Marker element has been removed. Cannot restore selection.")}else e(d.doc,h,g.startMarkerId,!0),e(d.doc,h,g.endMarkerId,!1);1==l&&h.normalizeBoundaries(),k[m]=h}1==l&&f&&a.features.selectionHasExtend&&i[0].backwards?(j.removeAllRanges(),j.addRange(k[0],!0)):j.setRanges(k),d.restored=!0}}function i(a,b){var d=c(b,a);d&&d.parentNode.removeChild(d)}function j(a){for(var b,c=a.rangeInfos,d=0,e=c.length;e>d;++d)b=c[d],b.collapsed?i(a.doc,b.markerId):(i(a.doc,b.startMarkerId),i(a.doc,b.endMarkerId))}a.requireModules(["DomUtil","DomRange","WrappedRange"]);var k=a.dom,l="﻿";a.saveSelection=g,a.restoreSelection=h,a.removeMarkerElement=i,a.removeMarkers=j})}({},function(){return this}());
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/textAngular/dist/textAngular-rangy.min.js","/resources/assets/vendor/textAngular/dist")

},{"_process":7,"buffer":3}],74:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
!function(a,b){b["true"]=a,/**
 * @license AngularJS v1.3.10
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(a,b){"use strict";function c(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return f(b,k(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}function d(a){var c=[],d=k(c,b.noop);return d.chars(a),c.join("")}function e(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function f(a,c){function d(a,d,f,h){if(d=b.lowercase(d),A[d])for(;k.last()&&B[k.last()];)e("",k.last());z[d]&&k.last()==d&&e("",d),h=w[d]||!!h,h||k.push(d);var i={};f.replace(o,function(a,b,c,d,e){var f=c||d||e||"";i[b]=g(f)}),c.start&&c.start(d,i,h)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=k.length-1;f>=0&&k[f]!=d;f--);if(f>=0){for(e=k.length-1;e>=f;e--)c.end&&c.end(k[e]);k.length=f}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var f,h,i,j,k=[],u=a;for(k.last=function(){return k[k.length-1]};a;){if(j="",h=!0,k.last()&&D[k.last()]?(a=a.replace(new RegExp("([^]*)<\\s*\\/\\s*"+k.last()+"[^>]*>","i"),function(a,b){return b=b.replace(r,"$1").replace(t,"$1"),c.chars&&c.chars(g(b)),""}),e("",k.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),h=!1)):s.test(a)?(i=a.match(s),i&&(a=a.replace(i[0],""),h=!1)):q.test(a)?(i=a.match(n),i&&(a=a.substring(i[0].length),i[0].replace(n,e),h=!1)):p.test(a)&&(i=a.match(m),i?(i[4]&&(a=a.substring(i[0].length),i[0].replace(m,d)),h=!1):(j+="<",a=a.substring(1))),h&&(f=a.indexOf("<"),j+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(g(j)))),a==u)throw l("badparse","The sanitizer was unable to parse the following block of html: {0}",a);u=a}e()}function g(a){if(!a)return"";var b=K.exec(a),c=b[1],d=b[3],e=b[2];return e&&(J.innerHTML=e.replace(/</g,"&lt;"),e="textContent"in J?J.textContent:J.innerText),c+e+d}function h(a){return a.replace(/&/g,"&amp;").replace(u,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(v,function(a){var b=a.charCodeAt(0);return 159>=b||173==b||b>=1536&&1540>=b||1807==b||6068==b||6069==b||b>=8204&&8207>=b||b>=8232&&8239>=b||b>=8288&&8303>=b||65279==b||b>=65520&&65535>=b?"&#"+b+";":a}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(a){var c="",d=a.split(";");return b.forEach(d,function(a){var d=a.split(":");if(2==d.length){var e=L(b.lowercase(d[0])),a=L(b.lowercase(d[1]));(("color"===e||"background-color"===e)&&(a.match(/^rgb\([0-9%,\. ]*\)$/i)||a.match(/^rgba\([0-9%,\. ]*\)$/i)||a.match(/^hsl\([0-9%,\. ]*\)$/i)||a.match(/^hsla\([0-9%,\. ]*\)$/i)||a.match(/^#[0-9a-f]{3,6}$/i)||a.match(/^[a-z]*$/i))||"text-align"===e&&("left"===a||"right"===a||"center"===a||"justify"===a)||"float"===e&&("left"===a||"right"===a||"none"===a)||("width"===e||"height"===e)&&a.match(/[0-9\.]*(px|em|rem|%)/)||"direction"===e&&a.match(/^ltr|rtl|initial|inherit$/))&&(c+=e+": "+a+";")}}),c}function j(a,b,c,d){return"img"===a&&b["ta-insert-video"]&&("ta-insert-video"===c||"allowfullscreen"===c||"frameborder"===c||"contenteditable"===c&&"false"===d)?!0:!1}function k(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&D[a]&&(d=a),d||E[a]!==!0||(e("<"),e(a),b.forEach(f,function(d,g){var k=b.lowercase(g),l="img"===a&&"src"===k||"background"===k;("style"===k&&""!==(d=i(d))||j(a,f,k,d)||I[k]===!0&&(F[k]!==!0||c(d,l)))&&(e(" "),e(g),e('="'),e(h(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||E[a]!==!0||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(h(a))}}}var l=b.$$minErr("$sanitize"),m=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,n=/^<\/\s*([\w:-]+)[^>]*>/,o=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,p=/^</,q=/^<\//,r=/<!--(.*?)-->/g,s=/<!DOCTYPE([^>]*?)>/i,t=/<!\[CDATA\[(.*?)]]>/g,u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,v=/([^\#-~| |!])/g,w=e("area,br,col,hr,img,wbr"),x=e("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),y=e("rp,rt"),z=b.extend({},y,x),A=b.extend({},x,e("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),B=b.extend({},y,e("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),C=e("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),D=e("script,style"),E=b.extend({},w,A,B,z,C),F=e("background,cite,href,longdesc,src,usemap,xlink:href"),G=e("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),H=e("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),I=b.extend({},F,H,G),J=document.createElement("pre"),K=/^(\s*)([\s\S]*?)(\s*)$/,L=function(){return String.prototype.trim?function(a){return b.isString(a)?a.trim():a}:function(a){return b.isString(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}();b.module("ngSanitize",[]).provider("$sanitize",c),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/,e=/^mailto:/;return function(f,g){function h(a){a&&n.push(d(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&n.push('target="',g,'" '),n.push('href="',a.replace(/"/g,"&quot;"),'">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]||j[4]||(k=(j[3]?"http://":"mailto:")+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(e,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular)}({},function(){return this}());
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/textAngular/dist/textAngular-sanitize.min.js","/resources/assets/vendor/textAngular/dist")

},{"_process":7,"buffer":3}],75:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
!function(a,b){b["true"]=a,/*
@license textAngular
Author : Austin Anderson
License : 2013 MIT
Version 1.3.7

See README.md or https://github.com/fraywing/textAngular/wiki for requirements and use.
*/
angular.module("textAngularSetup",[]).value("taOptions",{toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},setup:{textEditorSetup:function(){},htmlEditorSetup:function(){}},defaultFileDropHandler:function(a,b){var c=new FileReader;return"image"===a.type.substring(0,5)?(c.onload=function(){""!==c.result&&b("insertImage",c.result,!0)},c.readAsDataURL(a),!0):!1}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(a){var b=angular.element("<iframe></iframe>"),c=a.prop("attributes");angular.forEach(c,function(a){b.attr(a.name,a.value)}),b.attr("src",b.attr("ta-insert-video")),a.replaceWith(b)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unqoute selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).run(["taRegisterTool","$window","taTranslations","taSelection",function(a,b,c,d){a("html",{iconclass:"fa fa-code",tooltiptext:c.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var e=function(a){return function(){return this.$editor().queryFormatBlockState(a)}},f=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(b){a(b.toLowerCase(),{buttontext:b.toUpperCase(),tooltiptext:c.heading.tooltip+b.charAt(1),action:f,activeState:e(b.toLowerCase())})}),a("p",{buttontext:"P",tooltiptext:c.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),a("pre",{buttontext:"pre",tooltiptext:c.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),a("ul",{iconclass:"fa fa-list-ul",tooltiptext:c.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),a("ol",{iconclass:"fa fa-list-ol",tooltiptext:c.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),a("quote",{iconclass:"fa fa-quote-right",tooltiptext:c.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),a("undo",{iconclass:"fa fa-undo",tooltiptext:c.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),a("redo",{iconclass:"fa fa-repeat",tooltiptext:c.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),a("bold",{iconclass:"fa fa-bold",tooltiptext:c.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),a("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:c.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(a){var b=!1;return a&&(b="left"===a.css("text-align")||"left"===a.attr("align")||"right"!==a.css("text-align")&&"center"!==a.css("text-align")&&"justify"!==a.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")),b=b||this.$editor().queryCommandState("justifyLeft")}}),a("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:c.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(a){var b=!1;return a&&(b="right"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyRight")}}),a("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:c.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(a){var b=!1;return a&&(b="center"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyCenter")}}),a("indent",{iconclass:"fa fa-indent",tooltiptext:c.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),a("outdent",{iconclass:"fa fa-outdent",tooltiptext:c.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1}}),a("italics",{iconclass:"fa fa-italic",tooltiptext:c.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),a("underline",{iconclass:"fa fa-underline",tooltiptext:c.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),a("strikeThrough",{iconclass:"fa fa-strikethrough",action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),a("clear",{iconclass:"fa fa-ban",tooltiptext:c.clear.tooltip,action:function(a,b){var c;this.$editor().wrapSelection("removeFormat",null);var e=angular.element(d.getSelectionElement()),f=function(a){a=angular.element(a);var b=a;angular.forEach(a.children(),function(a){var c=angular.element("<p></p>");c.html(angular.element(a).html()),b.after(c),b=c}),a.remove()};if(angular.forEach(e.find("ul"),f),angular.forEach(e.find("ol"),f),"li"===e[0].tagName.toLowerCase()){var g=e[0].parentNode.childNodes,h=[],i=[],j=!1;for(c=0;c<g.length;c++)g[c]===e[0]?j=!0:j?i.push(g[c]):h.push(g[c]);var k=angular.element(e[0].parentNode),l=angular.element("<p></p>");if(l.html(angular.element(e[0]).html()),0===h.length||0===i.length)0===i.length?k.after(l):k[0].parentNode.insertBefore(l[0],k[0]),0===h.length&&0===i.length?k.remove():angular.element(e[0]).remove();else{var m=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">"),n=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">");for(c=0;c<h.length;c++)m.append(angular.element(h[c]));for(c=0;c<i.length;c++)n.append(angular.element(i[c]));k.after(n),k.after(l),k.after(m),k.remove()}d.setSelectionToElementEnd(l[0])}var o=this.$editor(),p=function(a){a=angular.element(a),a[0]!==o.displayElements.text[0]&&a.removeAttr("class"),angular.forEach(a.children(),p)};angular.forEach(e,p),"li"!==e[0].tagName.toLowerCase()&&"ol"!==e[0].tagName.toLowerCase()&&"ul"!==e[0].tagName.toLowerCase()&&this.$editor().wrapSelection("formatBlock","default"),b()}});var g=function(a,b,c){var d=function(){c.updateTaBindtaTextElement(),c.hidePopover()};a.preventDefault(),c.displayElements.popover.css("width","375px");var e=c.displayElements.popoverContainer;e.empty();var f=angular.element('<div class="btn-group" style="padding-right: 6px;">'),g=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');g.on("click",function(a){a.preventDefault(),b.css({width:"100%",height:""}),d()});var h=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');h.on("click",function(a){a.preventDefault(),b.css({width:"50%",height:""}),d()});var i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');i.on("click",function(a){a.preventDefault(),b.css({width:"25%",height:""}),d()});var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');j.on("click",function(a){a.preventDefault(),b.css({width:"",height:""}),d()}),f.append(g),f.append(h),f.append(i),f.append(j),e.append(f),f=angular.element('<div class="btn-group" style="padding-right: 6px;">');var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');k.on("click",function(a){a.preventDefault(),b.css("float","left"),b.css("cssFloat","left"),b.css("styleFloat","left"),d()});var l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');l.on("click",function(a){a.preventDefault(),b.css("float","right"),b.css("cssFloat","right"),b.css("styleFloat","right"),d()});var m=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');m.on("click",function(a){a.preventDefault(),b.css("float",""),b.css("cssFloat",""),b.css("styleFloat",""),d()}),f.append(k),f.append(m),f.append(l),e.append(f),f=angular.element('<div class="btn-group">');var n=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');n.on("click",function(a){a.preventDefault(),b.remove(),d()}),f.append(n),e.append(f),c.showPopover(b),c.showResizeOverlay(b)};a("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:c.insertImage.tooltip,action:function(){var a;return a=b.prompt(c.insertImage.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("insertImage",a,!0):void 0},onElementSelect:{element:"img",action:g}}),a("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:c.insertVideo.tooltip,action:function(){var a;if(a=b.prompt(c.insertVideo.dialogPrompt,"https://"),a&&""!==a&&"https://"!==a){var d=a.match(/(\?|&)v=[^&]*/);if(d&&d.length>0){var e="https://www.youtube.com/embed/"+d[0].substring(3),f='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+d[0].substring(3)+'/hqdefault.jpg" ta-insert-video="'+e+'" contenteditable="false" src="" allowfullscreen="true" frameborder="0" />';return this.$editor().wrapSelection("insertHTML",f,!0)}}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:g}}),a("insertLink",{tooltiptext:c.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var a;return a=b.prompt(c.insertLink.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("createLink",a,!0):void 0},activeState:function(a){return a?"A"===a[0].tagName:!1},onElementSelect:{element:"a",action:function(a,d,e){a.preventDefault(),e.displayElements.popover.css("width","435px");var f=e.displayElements.popoverContainer;f.empty(),f.css("line-height","28px");var g=angular.element('<a href="'+d.attr("href")+'" target="_blank">'+d.attr("href")+"</a>");g.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),f.append(g);var h=angular.element('<div class="btn-group pull-right">'),i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+c.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>');i.on("click",function(a){a.preventDefault();var f=b.prompt(c.insertLink.dialogPrompt,d.attr("href"));f&&""!==f&&"http://"!==f&&(d.attr("href",f),e.updateTaBindtaTextElement()),e.hidePopover()}),h.append(i);var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+c.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>');j.on("click",function(a){a.preventDefault(),d.replaceWith(d.contents()),e.updateTaBindtaTextElement(),e.hidePopover()}),h.append(j);var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+c.editLink.targetToggle.buttontext+"</button>");"_blank"===d.attr("target")&&k.addClass("active"),k.on("click",function(a){a.preventDefault(),d.attr("target","_blank"===d.attr("target")?"":"_blank"),k.toggleClass("active"),e.updateTaBindtaTextElement()}),h.append(k),f.append(h),e.showPopover(d)}}}),a("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words:{{wordcount}}</div>',disabled:!0,wordcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerHTML,c=b.replace(/(<[^>]*?>)/gi," "),d=c.match(/\S+/g),e=d&&d.length||0;return this.wordcount=e,this.$editor().wordcount=e,!1}}),a("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters:{{charcount}}</div>',disabled:!0,charcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerText||a[0].textContent,c=b.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=c,this.$editor().charcount=c,!1}})}]),/*
@license textAngular
Author : Austin Anderson
License : 2013 MIT
Version 1.3.7

See README.md or https://github.com/fraywing/textAngular/wiki for requirements and use.
*/
function(){"Use Strict";function a(a){try{return 0!==angular.element(a).length}catch(b){return!1}}function b(b,c){if(!b||""===b||r.hasOwnProperty(b))throw"textAngular Error: A unique name is required for a Tool Definition";if(c.display&&(""===c.display||!a(c.display))||!c.display&&!c.buttontext&&!c.iconclass)throw'textAngular Error: Tool Definition for "'+b+'" does not have a valid display/iconclass/buttontext value';r[b]=c}var c={ie:function(){for(var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return b>4?b:a}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent)},d=!1;c.webkit&&(document.addEventListener("mousedown",function(a){var b=a||window.event,c=b.target;if(d&&null!==c){for(var e=!1,f=c;null!==f&&"html"!==f.tagName.toLowerCase()&&!e;)e="true"===f.contentEditable,f=f.parentNode;e||(document.getElementById("textAngular-editableFix-010203040506070809").setSelectionRange(0,0),c.focus(),c.select&&c.select())}d=!1},!1),angular.element(document).ready(function(){angular.element(document.body).append(angular.element('<input id="textAngular-editableFix-010203040506070809" class="ta-hidden-input" unselectable="on" tabIndex="-1">'))}));var e=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,f=/^(ul|li|ol)$/i,g=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var h,i,k,l,m;if(c.ie>8||void 0===c.ie){for(var n=document.styleSheets,o=0;o<n.length;o++)if((0===n[o].media.length||n[o].media.mediaText.match(/(all|screen)/gi))&&n[o].href&&n[o].href.match(/textangular\.(min\.|)css/gi)){h=n[o];break}h||(h=function(){var a=document.createElement("style");return c.webkit&&a.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(a),a.sheet}()),i=function(a,b){return l(h,a,b)},l=function(a,b,c){var d;return a.cssRules?d=Math.max(a.cssRules.length-1,0):a.rules&&(d=Math.max(a.rules.length-1,0)),a.insertRule?a.insertRule(b+"{"+c+"}",d):a.addRule(b,c,d),d},k=function(a){m(h,a)},m=function(a,b){a.removeRule?a.removeRule(b):a.deleteRule(b)}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(a){return a?""===a?void 0===c.ie?"div":c.ie<=8?"P":"p":c.ie<=8?a.toUpperCase():a:c.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(a,b){return function(c){var d=angular.element("<div></div>");return d[0].innerHTML=c,angular.forEach(a,function(a){var c=[];a.selector&&""!==a.selector?c=d.find(a.selector):a.customAttribute&&""!==a.customAttribute&&(c=b.getByAttribute(d,a.customAttribute)),angular.forEach(c,function(b){b=angular.element(b),a.selector&&""!==a.selector&&a.customAttribute&&""!==a.customAttribute?void 0!==b.attr(a.customAttribute)&&a.renderLogic(b):a.renderLogic(b)})}),d[0].innerHTML}}]).factory("taFixChrome",function(){var a=function(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c,d,e=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,f="",g=0;b=e.exec(a);)c=b[3]||b[4],c&&c.match(/line-height: 1.428571429;|color: inherit; line-height: 1.1;/i)&&(c=c.replace(/( |)font-family: inherit;|( |)line-height: 1.428571429;|( |)line-height:1.1;|( |)color: inherit;/gi,""),d="<"+b[1].trim(),c.length>0&&(d+=" style="+b[2].substring(0,1)+c+b[2].substring(0,1)),d+=b[5].trim()+">",f+=a.substring(g,b.index)+d,g=b.index+b[0].length);return f+=a.substring(g),g>0?f.replace(/<span\s*>(.*?)<\/span>(<br(\/|)>|)/gi,"$1"):a};return a}).factory("taSanitize",["$sanitize","taDOM",function(a){function b(a,b){for(var c,d=0,e=0,f=/<[^>]*>/gi;c=f.exec(a);)if(e=c.index,"/"===c[0].substr(1,1)){if(0===d)break;d--}else d++;return b+a.substring(0,e)+angular.element(b)[0].outerHTML.substring(b.length)+a.substring(e)}function c(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var d,f,g,h,j,k=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,l="",m="",n=0;f=k.exec(a);){g=f[3]||f[4];var o=new RegExp(i,"i");if(angular.isString(g)&&o.test(g)){h="";for(var p=new RegExp(i,"ig");subMatch=p.exec(g);)for(d=0;d<e.length;d++)subMatch[2*d+2]&&(h+="<"+e[d].tag+">");j=c(a.substring(n,f.index)),m+=l.length>0?b(j,l):j,g=g.replace(new RegExp(i,"ig"),""),m+="<"+f[1].trim(),g.length>0&&(m+=' style="'+g+'"'),m+=f[5]+">",n=f.index+f[0].length,l=h}}return m+=l.length>0?b(a.substring(n),l):a.substring(n)}function d(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi,d="",e=0;b=c.exec(a);)d+=a.substring(e,b.index),e=b.index+b[0].length,newTag="<"+b[1]+b[5],/style=("([^"]+)"|'([^']+)')/gi.test(newTag)?newTag=newTag.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(b[3]||b[4])+';"'):newTag+=' style="text-align:'+(b[3]||b[4])+';"',newTag+=">",d+=newTag;return d+a.substring(e)}for(var e=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],f=[],g=0;g<e.length;g++){var h="("+e[g].property+":\\s*(";for(j=0;j<e[g].values.length;j++)j>0&&(h+="|"),h+=e[g].values[j];h+=");)",f.push(h)}var i="("+f.join("|")+")";return function(b,e,f){if(!f)try{b=c(b)}catch(g){}b=d(b);var h;try{h=a(b),f&&(h=b)}catch(g){h=e||""}var i=h.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi);processedSafe=h.replace(/(&#(9|10);)*/gi,"");var j,k=/<pre[^>]*>.*?<\/pre[^>]*>/gi,l=0,m=0;for(h="";null!==(j=k.exec(processedSafe))&&l<i.length;)h+=processedSafe.substring(m,j.index)+i[l],m=j.index+j[0].length,l++;return h+processedSafe.substring(m)}}]).factory("taToolExecuteAction",["$q","$log",function(a,b){return function(c){void 0!==c&&(this.$editor=function(){return c});var d=a.defer(),e=d.promise,f=this.$editor();e["finally"](function(){f.endAction.call(f)});var g;try{g=this.action(d,f.startAction())}catch(h){b.error(h)}(g||void 0===g)&&d.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(a,b,c){var d=function(b,c){var d,e,f=b.find("li");for(e=f.length-1;e>=0;e--)d=angular.element("<"+c+">"+f[e].innerHTML+"</"+c+">"),b.after(d);b.remove(),a.setSelectionToElementEnd(d[0])},g=function(b){/(<br(|\/)>)$/i.test(b.innerHTML.trim())?a.setSelectionBeforeElement(angular.element(b).find("br")[0]):a.setSelectionToElementEnd(b)},h=function(a,b){var c=angular.element("<"+b+">"+a[0].innerHTML+"</"+b+">");a.after(c),a.remove(),g(c.find("li")[0])},i=function(a,c,d){for(var e="",f=0;f<a.length;f++)e+="<"+b("li")+">"+a[f].innerHTML+"</"+b("li")+">";var h=angular.element("<"+d+">"+e+"</"+d+">");c.after(h),c.remove(),g(h.find("li")[0])};return function(g,j){return g=b(g),function(k,l,m){var n,o,p,q,r,s,t,u=angular.element("<"+g+">");try{t=a.getSelectionElement()}catch(v){}var w=angular.element(t);if(void 0!==t){var x=t.tagName.toLowerCase();if("insertorderedlist"===k.toLowerCase()||"insertunorderedlist"===k.toLowerCase()){var y=b("insertorderedlist"===k.toLowerCase()?"ol":"ul");if(x===y)return d(w,g);if("li"===x&&w.parent()[0].tagName.toLowerCase()===y&&1===w.parent().children().length)return d(w.parent(),g);if("li"===x&&w.parent()[0].tagName.toLowerCase()!==y&&1===w.parent().children().length)return h(w.parent(),y);if(x.match(e)&&!w.hasClass("ta-bind")){if("ol"===x||"ul"===x)return h(w,y);var z=!1;return angular.forEach(w.children(),function(a){a.tagName.match(e)&&(z=!0)}),z?i(w.children(),w,y):i([angular.element("<div>"+t.innerHTML+"</div>")[0]],w,y)}if(x.match(e)){if(q=a.getOnlySelectedElements(),0===q.length)o=angular.element("<"+y+"><li>"+t.innerHTML+"</li></"+y+">"),w.html(""),w.append(o);else{if(1===q.length&&("ol"===q[0].tagName.toLowerCase()||"ul"===q[0].tagName.toLowerCase()))return q[0].tagName.toLowerCase()===y?d(angular.element(q[0]),g):h(angular.element(q[0]),y);p="";var A=[];for(n=0;n<q.length;n++)if(3!==q[n].nodeType){var B=angular.element(q[n]);if("li"===q[n].tagName.toLowerCase())continue;p+="ol"===q[n].tagName.toLowerCase()||"ul"===q[n].tagName.toLowerCase()?B[0].innerHTML:"span"!==q[n].tagName.toLowerCase()||"ol"!==q[n].childNodes[0].tagName.toLowerCase()&&"ul"!==q[n].childNodes[0].tagName.toLowerCase()?"<"+b("li")+">"+B[0].innerHTML+"</"+b("li")+">":B[0].childNodes[0].innerHTML,A.unshift(B)}o=angular.element("<"+y+">"+p+"</"+y+">"),A.pop().replaceWith(o),angular.forEach(A,function(a){a.remove()})}return void a.setSelectionToElementEnd(o[0])}}else{if("formatblock"===k.toLowerCase()){for(s=m.toLowerCase().replace(/[<>]/gi,""),"default"===s.trim()&&(s=g,m="<"+g+">"),o="li"===x?w.parent():w;!o[0].tagName||!o[0].tagName.match(e)&&!o.parent().attr("contenteditable");)o=o.parent(),x=(o[0].tagName||"").toLowerCase();if(x===s){q=o.children();var C=!1;for(n=0;n<q.length;n++)C=C||q[n].tagName.match(e);C?(o.after(q),r=o.next(),o.remove(),o=r):(u.append(o[0].childNodes),o.after(u),o.remove(),o=u)}else if(o.parent()[0].tagName.toLowerCase()!==s||o.parent().hasClass("ta-bind"))if(x.match(f))o.wrap(m);else{for(q=a.getOnlySelectedElements(),0===q.length&&(q=[o[0]]),n=0;n<q.length;n++)if(3===q[n].nodeType||!q[n].tagName.match(e))for(;3===q[n].nodeType||!q[n].tagName||!q[n].tagName.match(e);)q[n]=q[n].parentNode;if(angular.element(q[0]).hasClass("ta-bind"))o=angular.element(m),o[0].innerHTML=q[0].innerHTML,q[0].innerHTML=o[0].outerHTML;else if("blockquote"===s){for(p="",n=0;n<q.length;n++)p+=q[n].outerHTML;for(o=angular.element(m),o[0].innerHTML=p,q[0].parentNode.insertBefore(o[0],q[0]),n=q.length-1;n>=0;n--)q[n].parentNode&&q[n].parentNode.removeChild(q[n])}else for(n=0;n<q.length;n++)o=angular.element(m),o[0].innerHTML=q[n].innerHTML,q[n].parentNode.insertBefore(o[0],q[n]),q[n].parentNode.removeChild(q[n])}else{var D=o.parent(),E=D.contents();for(n=0;n<E.length;n++)D.parent().hasClass("ta-bind")&&3===E[n].nodeType&&(u=angular.element("<"+g+">"),u[0].innerHTML=E[n].outerHTML,E[n]=u[0]),D.parent()[0].insertBefore(E[n],D[0]);D.remove()}return void a.setSelectionToElementEnd(o[0])}if("createlink"===k.toLowerCase()){var F=a.getSelection();if(F.collapsed)return void a.insertHtml('<a href="'+m+'">'+m+"</a>",j)}else if("inserthtml"===k.toLowerCase())return void a.insertHtml(m,j)}}try{c[0].execCommand(k,l,m)}catch(v){}}}}]).service("taSelection",["$window","$document","taDOM",function(a,b,c){var d=b[0],f=a.rangy,h=function(a,b){return a.tagName&&a.tagName.match(/^br$/i)&&0===b&&!a.previousSibling?{element:a.parentNode,offset:0}:{element:a,offset:b}},i={getSelection:function(){var a=f.getSelection().getRangeAt(0),b=a.commonAncestorContainer,c={start:h(a.startContainer,a.startOffset),end:h(a.endContainer,a.endOffset),collapsed:a.collapsed};return b=3===b.nodeType?b.parentNode:b,c.container=b.parentNode===c.start.element||b.parentNode===c.end.element?b.parentNode:b,c},getOnlySelectedElements:function(){var a=f.getSelection().getRangeAt(0),b=a.commonAncestorContainer;return b=3===b.nodeType?b.parentNode:b,a.getNodes([1],function(a){return a.parentNode===b})},getSelectionElement:function(){return i.getSelection().container},setSelection:function(a,b,c){var d=f.createRange();d.setStart(a,b),d.setEnd(a,c),f.getSelection().setSingleRange(d)},setSelectionBeforeElement:function(a){var b=f.createRange();b.selectNode(a),b.collapse(!0),f.getSelection().setSingleRange(b)},setSelectionAfterElement:function(a){var b=f.createRange();b.selectNode(a),b.collapse(!1),f.getSelection().setSingleRange(b)},setSelectionToElementStart:function(a){var b=f.createRange();b.selectNodeContents(a),b.collapse(!0),f.getSelection().setSingleRange(b)},setSelectionToElementEnd:function(a){var b=f.createRange();b.selectNodeContents(a),b.collapse(!1),a.childNodes&&a.childNodes[a.childNodes.length-1]&&"br"===a.childNodes[a.childNodes.length-1].nodeName&&(b.startOffset=b.endOffset=b.startOffset-1),f.getSelection().setSingleRange(b)},insertHtml:function(a,b){var h,j,k,l,m,n,o,p=angular.element("<div>"+a+"</div>"),q=f.getSelection().getRangeAt(0),r=d.createDocumentFragment(),s=p[0].childNodes,t=!0;if(s.length>0){for(l=[],k=0;k<s.length;k++)"p"===s[k].nodeName.toLowerCase()&&""===s[k].innerHTML.trim()||3===s[k].nodeType&&""===s[k].nodeValue.trim()||(t=t&&!e.test(s[k].nodeName),l.push(s[k]));for(var u=0;u<l.length;u++)n=r.appendChild(l[u]);!t&&q.collapsed&&/^(|<br(|\/)>)$/i.test(q.startContainer.innerHTML)&&q.selectNode(q.startContainer)}else t=!0,n=r=d.createTextNode(a);if(t)q.deleteContents();else if(q.collapsed&&q.startContainer!==b)if(q.startContainer.innerHTML&&q.startContainer.innerHTML.match(/^<[^>]*>$/i))h=q.startContainer,1===q.startOffset?(q.setStartAfter(h),q.setEndAfter(h)):(q.setStartBefore(h),q.setEndBefore(h));else{if(3===q.startContainer.nodeType&&q.startContainer.parentNode!==b)for(h=q.startContainer.parentNode,j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,q.startContainer,q.startOffset);!g.test(h.nodeName);){angular.element(h).after(j),h=h.parentNode;var v=j;j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,v)}else h=q.startContainer,j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,void 0,void 0,q.startOffset);if(angular.element(h).after(j),q.setStartAfter(h),q.setEndAfter(h),/^(|<br(|\/)>)$/i.test(h.innerHTML.trim())&&(q.setStartBefore(h),q.setEndBefore(h),angular.element(h).remove()),/^(|<br(|\/)>)$/i.test(j.innerHTML.trim())&&angular.element(j).remove(),"li"===h.nodeName.toLowerCase()){for(o=d.createDocumentFragment(),m=0;m<r.childNodes.length;m++)p=angular.element("<li>"),c.transferChildNodes(r.childNodes[m],p[0]),c.transferNodeAttributes(r.childNodes[m],p[0]),o.appendChild(p[0]);r=o,n&&(n=r.childNodes[r.childNodes.length-1],n=n.childNodes[n.childNodes.length-1])}}else q.deleteContents();q.insertNode(r),n&&i.setSelectionToElementEnd(n)}};return i}]).service("taDOM",function(){var a={getByAttribute:function(b,c){var d=[],e=b.children();return e.length&&angular.forEach(e,function(b){d=d.concat(a.getByAttribute(angular.element(b),c))}),void 0!==b.attr(c)&&d.push(b),d},transferChildNodes:function(a,b){for(b.innerHTML="";a.childNodes.length>0;)b.appendChild(a.childNodes[0]);return b},splitNodes:function(b,c,d,e,f,g){if(!e&&isNaN(g))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var h=document.createDocumentFragment(),i=document.createDocumentFragment(),j=0;b.length>0&&(isNaN(g)||g!==j)&&b[0]!==e;)h.appendChild(b[0]),j++;for(!isNaN(f)&&f>=0&&b[0]&&(h.appendChild(document.createTextNode(b[0].nodeValue.substring(0,f))),b[0].nodeValue=b[0].nodeValue.substring(f));b.length>0;)i.appendChild(b[0]);a.transferChildNodes(h,c),a.transferChildNodes(i,d)},transferNodeAttributes:function(a,b){for(var c=0;c<a.attributes.length;c++)b.setAttribute(a.attributes[c].name,a.attributes[c].value);return b}};return a}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(a){var b=angular.element("<div/>");b.html(a);var c=b.text().length;return f>=c?(d.$setValidity("taMaxText",!0),a):void d.$setValidity("taMaxText",!1)}var f=parseInt(a.$eval(c.taMaxText));if(isNaN(f))throw"Max text must be an integer";c.$observe("taMaxText",function(a){if(f=parseInt(a),isNaN(f))throw"Max text must be an integer";d.$dirty&&d.$setViewValue(d.$viewValue)}),d.$parsers.unshift(e)}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(a){var b=angular.element("<div/>");b.html(a);var c=b.text().length;return!c||c>=f?(d.$setValidity("taMinText",!0),a):void d.$setValidity("taMinText",!1)}var f=parseInt(a.$eval(c.taMinText));if(isNaN(f))throw"Min text must be an integer";c.$observe("taMinText",function(a){if(f=parseInt(a),isNaN(f))throw"Min text must be an integer";d.$dirty&&d.$setViewValue(d.$viewValue)}),d.$parsers.unshift(e)}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){var a=/<(a|abbr|acronym|bdi|bdo|big|cite|code|del|dfn|img|ins|kbd|label|map|mark|q|ruby|rp|rt|s|samp|time|tt|var)[^>]*(>|$)/i;return function(b){return function(c){if(!c)return!0;var d,e=/(^[^<]|>)[^<]/i.exec(c);return e?d=e.index:(c=c.toString().replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,""),d=c.indexOf(">")),c=c.trim().substring(d,d+100),/^[^<>]+$/i.test(c)?!1:0===c.length||c===b||/^>(\s|&nbsp;)*<\/[^>]+>$/gi.test(c)?!0:/>\s*[^\s<]/i.test(c)||a.test(c)?!1:!0}}}]).directive("taBind",["taSanitize","$timeout","$window","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM",function(a,b,e,f,h,j,l,m,n,o,q,r,s){return{require:"ngModel",link:function(j,t,u,v){var w,x,y,z,A=void 0!==t.attr("contenteditable")&&t.attr("contenteditable"),B=A||"textarea"===t[0].tagName.toLowerCase()||"input"===t[0].tagName.toLowerCase(),C=!1,D=!1,E=!1,F=u.taUnsafeSanitizer||o.disableSanitizer,G=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,H=/^(8|13|32|46|59|61|107|109|186|187|188|189|190|191|192|219|220|221|222)$/i;void 0===u.taDefaultWrap&&(u.taDefaultWrap="p"),""===u.taDefaultWrap?(y="",z=void 0===c.ie?"<div><br></div>":c.ie>=11?"<p><br></p>":c.ie<=8?"<P>&nbsp;</P>":"<p>&nbsp;</p>"):(y=void 0===c.ie||c.ie>=11?"<"+u.taDefaultWrap+"><br></"+u.taDefaultWrap+">":c.ie<=8?"<"+u.taDefaultWrap.toUpperCase()+"></"+u.taDefaultWrap.toUpperCase()+">":"<"+u.taDefaultWrap+"></"+u.taDefaultWrap+">",z=void 0===c.ie||c.ie>=11?"<"+u.taDefaultWrap+"><br></"+u.taDefaultWrap+">":c.ie<=8?"<"+u.taDefaultWrap.toUpperCase()+">&nbsp;</"+u.taDefaultWrap.toUpperCase()+">":"<"+u.taDefaultWrap+">&nbsp;</"+u.taDefaultWrap+">");var I=q(z);u.taPaste&&(x=r(u.taPaste)),t.addClass("ta-bind");var J;j["$undoManager"+(u.id||"")]=v.$undoManager={_stack:[],_index:0,_max:1e3,push:function(a){return"undefined"==typeof a||null===a||"undefined"!=typeof this.current()&&null!==this.current()&&a===this.current()?a:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(a),J&&b.cancel(J),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,a)},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(a){return 0>a||a>this._stack.length-1?void 0:(this._index=a,this.current())},current:function(){return this._stack[this._index]}};var K=j["$undoTaBind"+(u.id||"")]=function(){if(!C&&A){var a=v.$undoManager.undo();"undefined"!=typeof a&&null!==a&&(Y(a),N(a,!1),l.setSelectionToElementEnd(t[0].childNodes.length?t[0].childNodes[t[0].childNodes.length-1]:t[0]))}},L=j["$redoTaBind"+(u.id||"")]=function(){if(!C&&A){var a=v.$undoManager.redo();"undefined"!=typeof a&&null!==a&&(Y(a),N(a,!1),l.setSelectionToElementEnd(t[0].childNodes.length?t[0].childNodes[t[0].childNodes.length-1]:t[0]))}},M=function(){if(A)return t[0].innerHTML;if(B)return t.val();throw"textAngular Error: attempting to update non-editable taBind"},N=function(a,b){E=!0,("undefined"==typeof b||null===b)&&(b=!0&&A),("undefined"==typeof a||null===a)&&(a=M()),I(a)?(""!==v.$viewValue&&v.$setViewValue(""),b&&""!==v.$undoManager.current()&&v.$undoManager.push("")):(X(),v.$viewValue!==a&&(v.$setViewValue(a),b&&v.$undoManager.push(a)))};if(j["updateTaBind"+(u.id||"")]=function(){C||N()},B)if(j.events={},A){var O=!1,P=function(c){if(c&&c.trim().length){if(c.match(/class=["']*Mso(Normal|List)/i)){var d=c.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);d=d?d[1]:c,d=d.replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,"");var e=angular.element("<div>"+d+"</div>"),f=angular.element("<div></div>"),g={element:null,lastIndent:[],lastLi:null,isUl:!1};g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0};for(var h=function(a){g.isUl=a,g.element=angular.element(a?"<ul>":"<ol>"),g.lastIndent=[],g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0},g.lastLevelMatch=null},i=0;i<=e[0].childNodes.length;i++)if(e[0].childNodes[i]&&"#text"!==e[0].childNodes[i].nodeName&&"p"===e[0].childNodes[i].tagName.toLowerCase()){var k=angular.element(e[0].childNodes[i]),m=(k.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);if(m){if(k[0].childNodes.length<2||k[0].childNodes[1].childNodes.length<1)continue;var n="bullet"===m[1].toLowerCase()||"number"!==m[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(k[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(k[0].childNodes[1].childNodes[0].innerHTML)),o=(k.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),p=parseFloat(o?o[1]:0),q=(k.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(q&&q[2]&&(p=parseInt(q[2])),q&&(!g.lastLevelMatch||q[1]!==g.lastLevelMatch[1])||!m[3]||"first"===m[3].toLowerCase()||null===g.lastIndent.peek()||g.isUl!==n&&g.lastIndent.peek()===p)h(n),f.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()<p)g.element=angular.element(n?"<ul>":"<ol>"),g.lastLi.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()>p){for(;null!=g.lastIndent.peek()&&g.lastIndent.peek()>p;)if("li"!==g.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(g.element.parent()[0].tagName.toLowerCase()))break;g.element=g.element.parent(),g.lastIndent.pop()}else g.element=g.element.parent();g.isUl="ul"===g.element[0].tagName.toLowerCase(),n!==g.isUl&&(h(n),f.append(g.element))}g.lastLevelMatch=q,p!==g.lastIndent.peek()&&g.lastIndent.push(p),g.lastLi=angular.element("<li>"),g.element.append(g.lastLi),g.lastLi.html(k.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),k.remove()}else h(!1),f.append(k)}var r=function(a){a=angular.element(a);for(var b=a[0].childNodes.length-1;b>=0;b--)a.after(a[0].childNodes[b]);a.remove()};angular.forEach(f.find("span"),function(a){a.removeAttribute("lang"),a.attributes.length<=0&&r(a)}),angular.forEach(f.find("font"),r),c=f.html()}else{if(c=c.replace(/<(|\/)meta[^>]*?>/gi,""),c.match(/<[^>]*?(ta-bind)[^>]*?>/)){if(c.match(/<[^>]*?(text-angular)[^>]*?>/)){var u=angular.element("<div>"+c+"</div>");u.find("textarea").remove();for(var w=s.getByAttribute(u,"ta-bind"),y=0;y<w.length;y++){for(var z=w[y][0].parentNode.parentNode,A=0;A<w[y][0].childNodes.length;A++)z.parentNode.insertBefore(w[y][0].childNodes[A],z);z.parentNode.removeChild(z)}c=u.html().replace('<br class="Apple-interchange-newline">',"")}}else c.match(/^<span/)&&(c=c.replace(/<(|\/)span[^>]*?>/gi,""));c=c.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}c=a(c,"",F),x&&(c=x(j,{$html:c})||c),l.insertHtml(c,t[0]),b(function(){v.$setViewValue(M()),O=!1,t.removeClass("processing-paste")},0)}else O=!1,t.removeClass("processing-paste")};if(t.on("paste",j.events.paste=function(a,c){if(c&&angular.extend(a,c),C||O)return a.stopPropagation(),a.preventDefault(),!1;O=!0,t.addClass("processing-paste");var d,g=(a.originalEvent||a).clipboardData;if(g&&g.getData){for(var h="",i=0;i<g.types.length;i++)h+=" "+g.types[i];return/text\/html/i.test(h)?d=g.getData("text/html"):/text\/plain/i.test(h)&&(d=g.getData("text/plain")),P(d),a.stopPropagation(),a.preventDefault(),!1}var j=e.rangy.saveSelection(),k=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');f.find("body").append(k),k[0].focus(),b(function(){e.rangy.restoreSelection(j),P(k[0].innerHTML),k.remove(),t[0].focus()},0)}),t.on("cut",j.events.cut=function(a){C?a.preventDefault():b(function(){v.$setViewValue(M())},0)}),t.on("keydown",j.events.keydown=function(a,b){if(b&&angular.extend(a,b),!C)if(!a.altKey&&a.metaKey||a.ctrlKey)90!==a.keyCode||a.shiftKey?(90===a.keyCode&&a.shiftKey||89===a.keyCode&&!a.shiftKey)&&(L(),a.preventDefault()):(K(),a.preventDefault());else if(13===a.keyCode&&!a.shiftKey){var c=l.getSelectionElement();if(!c.tagName.match(g))return;var d=angular.element(y);if(/^<br(|\/)>$/i.test(c.innerHTML.trim())&&"blockquote"===c.parentNode.tagName.toLowerCase()&&!c.nextSibling){$selection=angular.element(c);var e=$selection.parent();e.after(d),$selection.remove(),0===e.children().length&&e.remove(),l.setSelectionToElementStart(d[0]),a.preventDefault()}else/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(c.innerHTML.trim())&&"blockquote"===c.tagName.toLowerCase()&&($selection=angular.element(c),$selection.after(d),$selection.remove(),l.setSelectionToElementStart(d[0]),a.preventDefault())}}),t.on("keyup",j.events.keyup=function(a,c){if(c&&angular.extend(a,c),J&&b.cancel(J),!C&&!G.test(a.keyCode)){if(""!==y&&13===a.keyCode&&!a.shiftKey){for(var d=l.getSelectionElement();!d.tagName.match(g)&&d!==t[0];)d=d.parentNode;if(d.tagName.toLowerCase()!==u.taDefaultWrap&&"li"!==d.tagName.toLowerCase()&&(""===d.innerHTML.trim()||"<br>"===d.innerHTML.trim())){var f=angular.element(y);angular.element(d).replaceWith(f),l.setSelectionToElementStart(f[0])}}var h=M();if(""!==y&&""===h.trim())Y(y),l.setSelectionToElementStart(t.children()[0]);else if("<"!==h.substring(0,1)&&""!==u.taDefaultWrap){var i=e.rangy.saveSelection();h=M(),h="<"+u.taDefaultWrap+">"+h+"</"+u.taDefaultWrap+">",Y(h),e.rangy.restoreSelection(i)}var j=w!==a.keyCode&&H.test(a.keyCode);N(h,j),j||(J=b(function(){v.$undoManager.push(h)},250)),w=a.keyCode}}),t.on("blur",j.events.blur=function(){D=!1,C||N(),E=!0,v.$render()}),u.placeholder&&(c.ie>8||void 0===c.ie)){var Q;if(!u.id)throw"textAngular Error: An unique ID is required for placeholders to work";Q=i("#"+u.id+".placeholder-text:before",'content: "'+u.placeholder+'"'),j.$on("$destroy",function(){k(Q)})}t.on("focus",j.events.focus=function(){D=!0,t.removeClass("placeholder-text")}),t.on("mouseup",j.events.mouseup=function(){var a=l.getSelection();a.start.element===t[0]&&t.children().length&&l.setSelectionToElementStart(t.children()[0])}),t.on("mousedown",j.events.mousedown=function(a,b){b&&angular.extend(a,b),a.stopPropagation()})}else{t.on("change blur",j.events.change=j.events.blur=function(){C||v.$setViewValue(M())}),t.on("keydown",j.events.keydown=function(a,b){if(b&&angular.extend(a,b),9===a.keyCode){var c=this.selectionStart,d=this.selectionEnd,e=t.val();if(a.shiftKey){var f=e.lastIndexOf("\n",c),g=e.lastIndexOf("	",c);-1!==g&&g>=f&&(t.val(e.substring(0,g)+e.substring(g+1)),this.selectionStart=this.selectionEnd=c-1)}else t.val(e.substring(0,c)+"	"+e.substring(d)),this.selectionStart=this.selectionEnd=c+1;a.preventDefault()}});var R=function(a,b){for(var c="",d=0;b>d;d++)c+=a;return c},S=function(a,b){var c="",d=a.childNodes;b++,c+=R("	",b-1)+a.outerHTML.substring(0,a.outerHTML.indexOf("<li"));for(var e=0;e<d.length;e++)d[e].outerHTML&&(c+="ul"===d[e].nodeName.toLowerCase()||"ol"===d[e].nodeName.toLowerCase()?"\n"+S(d[e],b):"\n"+R("	",b)+d[e].outerHTML);return c+="\n"+R("	",b-1)+a.outerHTML.substring(a.outerHTML.lastIndexOf("<"))};v.$formatters.unshift(function(a){var b=angular.element("<div>"+a+"</div>")[0].childNodes;if(b.length>0){a="";for(var c=0;c<b.length;c++)b[c].outerHTML&&(a.length>0&&(a+="\n"),a+="ul"===b[c].nodeName.toLowerCase()||"ol"===b[c].nodeName.toLowerCase()?""+S(b[c],0):""+b[c].outerHTML)}return a})}var T=function(b){return v.$oldViewValue=a(h(b),v.$oldViewValue,F)},U=function(a){return u.required&&v.$setValidity("required",!I(a)),a};v.$parsers.push(T),v.$parsers.unshift(U),v.$formatters.push(T),v.$formatters.unshift(function(a){if(I(a))return a;var b=angular.element("<div>"+a+"</div>");return 0===b.children().length&&(a="<"+u.taDefaultWrap+">"+a+"</"+u.taDefaultWrap+">"),a}),v.$formatters.unshift(U),v.$formatters.unshift(function(a){return v.$undoManager.push(a||"")});var V=function(a){return j.$emit("ta-element-select",this),a.preventDefault(),!1},W=function(a,c){if(c&&angular.extend(a,c),!p&&!C){p=!0;var d;d=a.originalEvent?a.originalEvent.dataTransfer:a.dataTransfer,j.$emit("ta-drop-event",this,a,d),b(function(){p=!1,N()},100)}},X=j["reApplyOnSelectorHandlers"+(u.id||"")]=function(){C||angular.forEach(m,function(a){t.find(a).off("click",V).on("click",V)})},Y=function(a){t[0].innerHTML=a};v.$render=function(){var a=v.$viewValue||"";E||(A&&D&&(t.removeClass("placeholder-text"),t[0].blur(),b(function(){t[0].focus(),l.setSelectionToElementEnd(t.children()[t.children().length-1])},1)),A?(Y(u.placeholder?""===a?y:a:""===a?y:a),C?t.off("drop",W):(X(),t.on("drop",W))):"textarea"!==t[0].tagName.toLowerCase()&&"input"!==t[0].tagName.toLowerCase()?Y(n(a)):t.val(a)),A&&u.placeholder&&(""===a?D?t.removeClass("placeholder-text"):t.addClass("placeholder-text"):t.removeClass("placeholder-text")),E=!1},u.taReadonly&&(C=j.$eval(u.taReadonly),C?(t.addClass("ta-readonly"),("textarea"===t[0].tagName.toLowerCase()||"input"===t[0].tagName.toLowerCase())&&t.attr("disabled","disabled"),void 0!==t.attr("contenteditable")&&t.attr("contenteditable")&&t.removeAttr("contenteditable")):(t.removeClass("ta-readonly"),"textarea"===t[0].tagName.toLowerCase()||"input"===t[0].tagName.toLowerCase()?t.removeAttr("disabled"):A&&t.attr("contenteditable","true")),j.$watch(u.taReadonly,function(a,b){b!==a&&(a?(t.addClass("ta-readonly"),("textarea"===t[0].tagName.toLowerCase()||"input"===t[0].tagName.toLowerCase())&&t.attr("disabled","disabled"),void 0!==t.attr("contenteditable")&&t.attr("contenteditable")&&t.removeAttr("contenteditable"),angular.forEach(m,function(a){t.find(a).on("click",V)}),t.off("drop",W)):(t.removeClass("ta-readonly"),"textarea"===t[0].tagName.toLowerCase()||"input"===t[0].tagName.toLowerCase()?t.removeAttr("disabled"):A&&t.attr("contenteditable","true"),angular.forEach(m,function(a){t.find(a).off("click",V)}),t.on("drop",W)),C=a)})),A&&!C&&(angular.forEach(m,function(a){t.find(a).on("click",V)}),t.on("drop",W),t.on("blur",function(){c.webkit&&(d=!0)}))}}}]);var p=!1,q=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]),r={};q.constant("taRegisterTool",b),q.value("taTools",r),q.config([function(){angular.forEach(r,function(a,b){delete r[b]})}]),q.run([function(){if(!window.rangy)throw"rangy-core.js and rangy-selectionsaverestore.js are required for textAngular to work correctly, rangy-core is not yet loaded.";if(window.rangy.init(),!window.rangy.saveSelection)throw"rangy-selectionsaverestore.js is required for textAngular to work correctly."}]),q.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$window","$document","$animate","$log","$q","$parse",function(a,b,c,d,e,f,g,h,i,j,k,l){return{require:"?ngModel",scope:{},restrict:"EA",link:function(m,n,o,p){var q,r,s,t,u,v,w,x,y,z,A=o.serial?o.serial:Math.floor(1e16*Math.random());m._name=o.name?o.name:"textAngularEditor"+A;var B=function(a,c,d){b(function(){var b=function(){a.off(c,b),d.apply(this,arguments)};a.on(c,b)},100)};y=e(o.taDefaultWrap),angular.extend(m,angular.copy(c),{wrapSelection:function(a,b,c){"undo"===a.toLowerCase()?m["$undoTaBindtaTextElement"+A]():"redo"===a.toLowerCase()?m["$redoTaBindtaTextElement"+A]():(y(a,!1,b),c&&m["reApplyOnSelectorHandlerstaTextElement"+A](),m.displayElements.text[0].focus())},showHtml:m.$eval(o.taShowHtml)||!1}),o.taFocussedClass&&(m.classes.focussed=o.taFocussedClass),o.taTextEditorClass&&(m.classes.textEditor=o.taTextEditorClass),o.taHtmlEditorClass&&(m.classes.htmlEditor=o.taHtmlEditorClass),o.taTextEditorSetup&&(m.setup.textEditorSetup=m.$parent.$eval(o.taTextEditorSetup)),o.taHtmlEditorSetup&&(m.setup.htmlEditorSetup=m.$parent.$eval(o.taHtmlEditorSetup)),m.fileDropHandler=o.taFileDrop?m.$parent.$eval(o.taFileDrop):m.defaultFileDropHandler,w=n[0].innerHTML,n[0].innerHTML="",m.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},m.displayElements.popover.append(m.displayElements.popoverArrow),m.displayElements.popover.append(m.displayElements.popoverContainer),m.displayElements.scrollWindow.append(m.displayElements.popover),m.displayElements.popover.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1
}),m.showPopover=function(a){m.displayElements.popover.css("display","block"),m.reflowPopover(a),i.addClass(m.displayElements.popover,"in"),B(h.find("body"),"click keyup",function(){m.hidePopover()})},m.reflowPopover=function(a){m.displayElements.text[0].offsetHeight-51>a[0].offsetTop?(m.displayElements.popover.css("top",a[0].offsetTop+a[0].offsetHeight+"px"),m.displayElements.popover.removeClass("top").addClass("bottom")):(m.displayElements.popover.css("top",a[0].offsetTop-54+"px"),m.displayElements.popover.removeClass("bottom").addClass("top"));var b=m.displayElements.text[0].offsetWidth-m.displayElements.popover[0].offsetWidth,c=a[0].offsetLeft+a[0].offsetWidth/2-m.displayElements.popover[0].offsetWidth/2;m.displayElements.popover.css("left",Math.max(0,Math.min(b,c))+"px"),m.displayElements.popoverArrow.css("margin-left",Math.min(c,Math.max(0,c-b))-11+"px")},m.hidePopover=function(){var a=function(){m.displayElements.popover.css("display",""),m.displayElements.popoverContainer.attr("style",""),m.displayElements.popoverContainer.attr("class","popover-content")};k.when(i.removeClass(m.displayElements.popover,"in",a)).then(a)},m.displayElements.resize.overlay.append(m.displayElements.resize.background),angular.forEach(m.displayElements.resize.anchors,function(a){m.displayElements.resize.overlay.append(a)}),m.displayElements.resize.overlay.append(m.displayElements.resize.info),m.displayElements.scrollWindow.append(m.displayElements.resize.overlay),m.reflowResizeOverlay=function(a){a=angular.element(a)[0],m.displayElements.resize.overlay.css({display:"block",left:a.offsetLeft-5+"px",top:a.offsetTop-5+"px",width:a.offsetWidth+10+"px",height:a.offsetHeight+10+"px"}),m.displayElements.resize.info.text(a.offsetWidth+" x "+a.offsetHeight)},m.showResizeOverlay=function(a){var b=h.find("body");z=function(c){var d={width:parseInt(a.attr("width")),height:parseInt(a.attr("height")),x:c.clientX,y:c.clientY};(void 0===d.width||isNaN(d.width))&&(d.width=a[0].offsetWidth),(void 0===d.height||isNaN(d.height))&&(d.height=a[0].offsetHeight),m.hidePopover();var e=d.height/d.width,f=function(b){var c={x:Math.max(0,d.width+(b.clientX-d.x)),y:Math.max(0,d.height+(b.clientY-d.y))};if(b.shiftKey){var f=c.y/c.x;c.x=e>f?c.x:c.y/e,c.y=e>f?c.x*e:c.y}el=angular.element(a),el.attr("height",Math.max(0,c.y)),el.attr("width",Math.max(0,c.x)),m.reflowResizeOverlay(a)};b.on("mousemove",f),B(b,"mouseup",function(c){c.preventDefault(),c.stopPropagation(),b.off("mousemove",f),m.showPopover(a)}),c.stopPropagation(),c.preventDefault()},m.displayElements.resize.anchors[3].on("mousedown",z),m.reflowResizeOverlay(a),B(b,"click",function(){m.hideResizeOverlay()})},m.hideResizeOverlay=function(){m.displayElements.resize.anchors[3].off("mousedown",z),m.displayElements.resize.overlay.css("display","")},m.setup.htmlEditorSetup(m.displayElements.html),m.setup.textEditorSetup(m.displayElements.text),m.displayElements.html.attr({id:"taHtmlElement"+A,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html"}),m.displayElements.text.attr({id:"taTextElement"+A,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html"}),m.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),o.taDefaultWrap&&m.displayElements.text.attr("ta-default-wrap",o.taDefaultWrap),o.taUnsafeSanitizer&&(m.displayElements.text.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer),m.displayElements.html.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer)),m.displayElements.scrollWindow.append(m.displayElements.text),n.append(m.displayElements.scrollWindow),n.append(m.displayElements.html),m.displayElements.forminput.attr("name",m._name),n.append(m.displayElements.forminput),o.tabindex&&(n.removeAttr("tabindex"),m.displayElements.text.attr("tabindex",o.tabindex),m.displayElements.html.attr("tabindex",o.tabindex)),o.placeholder&&(m.displayElements.text.attr("placeholder",o.placeholder),m.displayElements.html.attr("placeholder",o.placeholder)),o.taDisabled&&(m.displayElements.text.attr("ta-readonly","disabled"),m.displayElements.html.attr("ta-readonly","disabled"),m.disabled=m.$parent.$eval(o.taDisabled),m.$parent.$watch(o.taDisabled,function(a){m.disabled=a,m.disabled?n.addClass(m.classes.disabled):n.removeClass(m.classes.disabled)})),o.taPaste&&(m._pasteHandler=function(a){return l(o.taPaste)(m.$parent,{$html:a})},m.displayElements.text.attr("ta-paste","_pasteHandler($html)")),a(m.displayElements.scrollWindow)(m),a(m.displayElements.html)(m),m.updateTaBindtaTextElement=m["updateTaBindtaTextElement"+A],m.updateTaBindtaHtmlElement=m["updateTaBindtaHtmlElement"+A],n.addClass("ta-root"),m.displayElements.scrollWindow.addClass("ta-text ta-editor "+m.classes.textEditor),m.displayElements.html.addClass("ta-html ta-editor "+m.classes.htmlEditor),m._actionRunning=!1;var C=!1;if(m.startAction=function(){return m._actionRunning=!0,C=g.rangy.saveSelection(),function(){C&&g.rangy.restoreSelection(C)}},m.endAction=function(){m._actionRunning=!1,C&&g.rangy.removeMarkers(C),C=!1,m.updateSelectedStyles(),m.showHtml||m["updateTaBindtaTextElement"+A]()},u=function(){m.focussed=!0,n.addClass(m.classes.focussed),x.focus(),n.triggerHandler("focus")},m.displayElements.html.on("focus",u),m.displayElements.text.on("focus",u),v=function(a){return m._actionRunning||h[0].activeElement===m.displayElements.html[0]||h[0].activeElement===m.displayElements.text[0]||(n.removeClass(m.classes.focussed),x.unfocus(),b(function(){m._bUpdateSelectedStyles=!1,n.triggerHandler("blur"),m.focussed=!1},0)),a.preventDefault(),!1},m.displayElements.html.on("blur",v),m.displayElements.text.on("blur",v),m.displayElements.text.on("paste",function(a){n.triggerHandler("paste",a)}),m.queryFormatBlockState=function(a){return!m.showHtml&&a.toLowerCase()===h[0].queryCommandValue("formatBlock").toLowerCase()},m.queryCommandState=function(a){return m.showHtml?"":h[0].queryCommandState(a)},m.switchView=function(){m.showHtml=!m.showHtml,i.enabled(!1,m.displayElements.html),i.enabled(!1,m.displayElements.text),m.showHtml?b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.html[0].focus()},100):b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.text[0].focus()},100)},o.ngModel){var D=!0;p.$render=function(){if(D){D=!1;var a=m.$parent.$eval(o.ngModel);void 0!==a&&null!==a||!w||""===w||p.$setViewValue(w)}m.displayElements.forminput.val(p.$viewValue),m._elementSelectTriggered||(m.html=p.$viewValue||"")};var E=function(a){return o.required&&p.$setValidity("required",!(!a||""===a.trim())),a};p.$parsers.push(E),p.$formatters.push(E)}else m.displayElements.forminput.val(w),m.html=w;if(m.$watch("html",function(a,b){a!==b&&(o.ngModel&&p.$viewValue!==a&&p.$setViewValue(a),m.displayElements.forminput.val(a))}),o.taTargetToolbars)x=f.registerEditor(m._name,m,o.taTargetToolbars.split(","));else{var F=angular.element('<div text-angular-toolbar name="textAngularToolbar'+A+'">');o.taToolbar&&F.attr("ta-toolbar",o.taToolbar),o.taToolbarClass&&F.attr("ta-toolbar-class",o.taToolbarClass),o.taToolbarGroupClass&&F.attr("ta-toolbar-group-class",o.taToolbarGroupClass),o.taToolbarButtonClass&&F.attr("ta-toolbar-button-class",o.taToolbarButtonClass),o.taToolbarActiveButtonClass&&F.attr("ta-toolbar-active-button-class",o.taToolbarActiveButtonClass),o.taFocussedClass&&F.attr("ta-focussed-class",o.taFocussedClass),n.prepend(F),a(F)(m.$parent),x=f.registerEditor(m._name,m,["textAngularToolbar"+A])}m.$on("$destroy",function(){f.unregisterEditor(m._name)}),m.$on("ta-element-select",function(a,b){x.triggerElementSelect(a,b)&&m["reApplyOnSelectorHandlerstaTextElement"+A]()}),m.$on("ta-drop-event",function(a,c,d,e){m.displayElements.text[0].focus(),e&&e.files&&e.files.length>0?(angular.forEach(e.files,function(a){try{k.when(m.fileDropHandler(a,m.wrapSelection)||m.fileDropHandler!==m.defaultFileDropHandler&&k.when(m.defaultFileDropHandler(a,m.wrapSelection))).then(function(){m["updateTaBindtaTextElement"+A]()})}catch(b){j.error(b)}}),d.preventDefault(),d.stopPropagation()):b(function(){m["updateTaBindtaTextElement"+A]()},0)}),m._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){m._bUpdateSelectedStyles=!1,m.focussed=!1}),m.updateSelectedStyles=function(){var a;void 0!==(a=d.getSelectionElement())&&a.parentNode!==m.displayElements.text[0]?x.updateSelectedStyles(angular.element(a)):x.updateSelectedStyles(),m._bUpdateSelectedStyles&&b(m.updateSelectedStyles,200)},q=function(){return m.focussed?void(m._bUpdateSelectedStyles||(m._bUpdateSelectedStyles=!0,m.$apply(function(){m.updateSelectedStyles()}))):void(m._bUpdateSelectedStyles=!1)},m.displayElements.html.on("keydown",q),m.displayElements.text.on("keydown",q),r=function(){m._bUpdateSelectedStyles=!1},m.displayElements.html.on("keyup",r),m.displayElements.text.on("keyup",r),s=function(a,b){b&&angular.extend(a,b),m.$apply(function(){return x.sendKeyCommand(a)?(m._bUpdateSelectedStyles||m.updateSelectedStyles(),a.preventDefault(),!1):void 0})},m.displayElements.html.on("keypress",s),m.displayElements.text.on("keypress",s),t=function(){m._bUpdateSelectedStyles=!1,m.$apply(function(){m.updateSelectedStyles()})},m.displayElements.html.on("mouseup",t),m.displayElements.text.on("mouseup",t)}}}]),q.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool",function(a,b,c){var d={},e={};return{registerEditor:function(c,f,g){if(!c||""===c)throw"textAngular Error: An editor requires a name";if(!f)throw"textAngular Error: An editor requires a scope";if(e[c])throw'textAngular Error: An Editor with name "'+c+'" already exists';var h=[];return angular.forEach(g,function(a){d[a]&&h.push(d[a])}),e[c]={scope:f,toolbars:g,_registerToolbar:function(a){this.toolbars.indexOf(a.name)>=0&&h.push(a)},editorFunctions:{disable:function(){angular.forEach(h,function(a){a.disabled=!0})},enable:function(){angular.forEach(h,function(a){a.disabled=!1})},focus:function(){angular.forEach(h,function(a){a._parent=f,a.disabled=!1,a.focussed=!0,f.focussed=!0})},unfocus:function(){angular.forEach(h,function(a){a.disabled=!0,a.focussed=!1}),f.focussed=!1},updateSelectedStyles:function(a){angular.forEach(h,function(b){angular.forEach(b.tools,function(c){c.activeState&&(b._parent=f,c.active=c.activeState(a))})})},sendKeyCommand:function(c){var d=!1;return(c.ctrlKey||c.metaKey)&&angular.forEach(b,function(b,e){if(b.commandKeyCode&&b.commandKeyCode===c.which)for(var g=0;g<h.length;g++)if(void 0!==h[g].tools[e]){a.call(h[g].tools[e],f),d=!0;break}}),d},triggerElementSelect:function(a,c){var d=function(a,b){for(var c=!0,d=0;d<b.length;d++)c=c&&a.attr(b[d]);return c},e=[],g={},i=!1;c=angular.element(c);var j=!1;if(angular.forEach(b,function(a,b){a.onElementSelect&&a.onElementSelect.element&&a.onElementSelect.element.toLowerCase()===c[0].tagName.toLowerCase()&&(!a.onElementSelect.filter||a.onElementSelect.filter(c))&&(j=j||angular.isArray(a.onElementSelect.onlyWithAttrs)&&d(c,a.onElementSelect.onlyWithAttrs),(!a.onElementSelect.onlyWithAttrs||d(c,a.onElementSelect.onlyWithAttrs))&&(g[b]=a))}),j?(angular.forEach(g,function(a,b){a.onElementSelect.onlyWithAttrs&&d(c,a.onElementSelect.onlyWithAttrs)&&e.push({name:b,tool:a})}),e.sort(function(a,b){return b.tool.onElementSelect.onlyWithAttrs.length-a.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(g,function(a,b){e.push({name:b,tool:a})}),e.length>0)for(var k=0;k<e.length;k++){for(var l=e[k].tool,m=e[k].name,n=0;n<h.length;n++)if(void 0!==h[n].tools[m]){l.onElementSelect.action.call(h[n].tools[m],a,c,f),i=!0;break}if(i)break}return i}}},e[c].editorFunctions},retrieveEditor:function(a){return e[a]},unregisterEditor:function(a){delete e[a]},registerToolbar:function(a){if(!a)throw"textAngular Error: A toolbar requires a scope";if(!a.name||""===a.name)throw"textAngular Error: A toolbar requires a name";if(d[a.name])throw'textAngular Error: A toolbar with name "'+a.name+'" already exists';d[a.name]=a,angular.forEach(e,function(b){b._registerToolbar(a)})},retrieveToolbar:function(a){return d[a]},retrieveToolbarsViaEditor:function(a){var b=[],c=this;return angular.forEach(this.retrieveEditor(a).toolbars,function(a){b.push(c.retrieveToolbar(a))}),b},unregisterToolbar:function(a){delete d[a]},updateToolsDisplay:function(a){var b=this;angular.forEach(a,function(a,c){b.updateToolDisplay(c,a)})},resetToolsDisplay:function(){var a=this;angular.forEach(b,function(b,c){a.resetToolDisplay(c)})},updateToolDisplay:function(a,b){var c=this;angular.forEach(d,function(d,e){c.updateToolbarToolDisplay(e,a,b)})},resetToolDisplay:function(a){var b=this;angular.forEach(d,function(c,d){b.resetToolbarToolDisplay(d,a)})},updateToolbarToolDisplay:function(a,b,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(b,c)},resetToolbarToolDisplay:function(a,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(c,b[c],!0)},removeTool:function(a){delete b[a],angular.forEach(d,function(b){delete b.tools[a];for(var c=0;c<b.toolbar.length;c++){for(var d,e=0;e<b.toolbar[c].length;e++){if(b.toolbar[c][e]===a){d={group:c,index:e};break}if(void 0!==d)break}void 0!==d&&(b.toolbar[d.group].slice(d.index,1),b._$element.children().eq(d.group).children().eq(d.index).remove())}})},addTool:function(a,b,e,f){c(a,b),angular.forEach(d,function(c){c.addTool(a,b,e,f)})},addToolToToolbar:function(a,b,e,f,g){c(a,b),d[e].addTool(a,b,f,g)},refreshEditor:function(a){if(!e[a])throw'textAngular Error: No Editor with name "'+a+'" exists';e[a].scope.updateTaBindtaTextElement(),e[a].scope.$$phase||e[a].scope.$digest()}}}]),q.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(a,b,c,d,e,f){return{scope:{name:"@"},restrict:"EA",link:function(g,h,i){if(!g.name||""===g.name)throw"textAngular Error: A toolbar requires a name";angular.extend(g,angular.copy(c)),i.taToolbar&&(g.toolbar=g.$parent.$eval(i.taToolbar)),i.taToolbarClass&&(g.classes.toolbar=i.taToolbarClass),i.taToolbarGroupClass&&(g.classes.toolbarGroup=i.taToolbarGroupClass),i.taToolbarButtonClass&&(g.classes.toolbarButton=i.taToolbarButtonClass),i.taToolbarActiveButtonClass&&(g.classes.toolbarButtonActive=i.taToolbarActiveButtonClass),i.taFocussedClass&&(g.classes.focussed=i.taFocussedClass),g.disabled=!0,g.focussed=!1,g._$element=h,h[0].innerHTML="",h.addClass("ta-toolbar "+g.classes.toolbar),g.$watch("focussed",function(){g.focussed?h.addClass(g.classes.focussed):h.removeClass(g.classes.focussed)});var j=function(b,c){var d;if(d=angular.element(b&&b.display?b.display:"<button type='button'>"),d.addClass(b&&b["class"]?b["class"]:g.classes.toolbarButton),d.attr("name",c.name),d.attr("unselectable","on"),d.attr("ng-disabled","isDisabled()"),d.attr("tabindex","-1"),d.attr("ng-click","executeAction()"),d.attr("ng-class","displayActiveToolClass(active)"),b&&b.tooltiptext&&d.attr("title",b.tooltiptext),d.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1}),b&&!b.display&&!c._display&&(d[0].innerHTML="",b.buttontext&&(d[0].innerHTML=b.buttontext),b.iconclass)){var e=angular.element("<i>"),f=d[0].innerHTML;e.addClass(b.iconclass),d[0].innerHTML="",d.append(e),f&&""!==f&&d.append("&nbsp;"+f)}return c._lastToolDefinition=angular.copy(b),a(d)(c)};g.tools={},g._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var k={$window:f,$editor:function(){return g._parent},isDisabled:function(){return"function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled},displayActiveToolClass:function(a){return a?g.classes.toolbarButtonActive:""},executeAction:e};angular.forEach(g.toolbar,function(a){var b=angular.element("<div>");b.addClass(g.classes.toolbarGroup),angular.forEach(a,function(a){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]),b.append(g.tools[a].$element)}),h.append(b)}),g.updateToolDisplay=function(a,b,c){var d=g.tools[a];if(d){if(d._lastToolDefinition&&!c&&(b=angular.extend({},d._lastToolDefinition,b)),null===b.buttontext&&null===b.iconclass&&null===b.display)throw'textAngular Error: Tool Definition for updating "'+a+'" does not have a valid display/iconclass/buttontext value';null===b.buttontext&&delete b.buttontext,null===b.iconclass&&delete b.iconclass,null===b.display&&delete b.display;var e=j(b,d);d.$element.replaceWith(e),d.$element=e}},g.addTool=function(a,b,c,e){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]);var f;void 0===c&&(c=g.toolbar.length-1),f=angular.element(h.children()[c]),void 0===e?(f.append(g.tools[a].$element),g.toolbar[c][g.toolbar[c].length-1]=a):(f.children().eq(e).after(g.tools[a].$element),g.toolbar[c][e]=a)},b.registerToolbar(g),g.$on("$destroy",function(){b.unregisterToolbar(g.name)})}}}])}()}({},function(){return this}());
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/textAngular/dist/textAngular.min.js","/resources/assets/vendor/textAngular/dist")

},{"_process":7,"buffer":3}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9sYXJhdmVsLWVsaXhpci1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluYXBwLmpzIiwibm9kZV9tb2R1bGVzL2pxdWVyeS9kaXN0L2pxdWVyeS5qcyIsIm5vZGVfbW9kdWxlcy9sYXJhdmVsLWVsaXhpci1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9idWZmZXIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvbGFyYXZlbC1lbGl4aXItYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnVmZmVyL25vZGVfbW9kdWxlcy9iYXNlNjQtanMvbGliL2I2NC5qcyIsIm5vZGVfbW9kdWxlcy9sYXJhdmVsLWVsaXhpci1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9idWZmZXIvbm9kZV9tb2R1bGVzL2llZWU3NTQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvbGFyYXZlbC1lbGl4aXItYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnVmZmVyL25vZGVfbW9kdWxlcy9pcy1hcnJheS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9sYXJhdmVsLWVsaXhpci1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvYmFzaWNkZXRhaWxjb250cm9sbGVyLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2Jpb2NvbnRyb2xsZXIuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvY29uZmlnY29udHJvbGxlci5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL2FsZXJ0ZGlyZWN0aXZlLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvYmlvZ3JhcGhpZXMvYmlvZ3JhcGh5LmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvY2xvc2Vjb250ZW50ZGlyZWN0aXZlLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvY29uZmlnbWVudS5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL2NvbmZpZ3VyYXRpb24vY2F0ZWdvcnkuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9jb250ZW50c2VsZWN0b3IuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9oYWxsb2RpcmVjdGl2ZS5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL3Byb2ZpbGVtZW51LmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvcmVzdW1lL2VkdWNhdGlvbi5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL3Jlc3VtZS9leHBlcmllbmNlLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvcmVzdW1lL2ludGVyZXN0LmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvcmVzdW1lL2xhbmd1YWdlLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvcmVzdW1lL3Jlc3VtZWRpcmVjdGl2ZS5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL3Jlc3VtZS9yZXN1bWVlZGl0Zm9ybS5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL3Jlc3VtZS9yZXN1bWVmb3JtLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvcmVzdW1lL3Jlc3VtZWxpc3QuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9yZXN1bWUvcmVzdW1lc2VsZWN0b3IuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9yZXN1bWUvc2VjdGlvbnMuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9yZXN1bWUvc2tpbGwuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9zYWxlYWJsZWJhc2ljLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvc2FsZWFibGVkZXRhaWxzLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvc2FsZWFibGVkZXRhaWxzbGlzdC5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL3NhbGVhYmxlcHJpY2VzbGlzdC5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9ob21lY29udHJvbGxlci5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9yZXN1bWVjb250cm9sbGVyLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3NhbGVhYmxlYWxsZGV0YWlsc2NvbnRyb2xsZXIuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvc2FsZWFibGVjb250cm9sbGVyLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3NhbGVhYmxlZGV0YWlsY29udHJvbGxlci5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9zYWxlYWJsZXByaWNlc2NvbnRyb2xsZXIuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvYmlvZ3JhcGh5c2VydmljZS5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9jYXRlZ29yeS5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9lZHVjYXRpb24uanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvZXhwZXJpZW5jZS5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9maWxlcHJvY2Vzc29yLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL2Zvcm1hdGZpbHRlcnNlcnZpY2UuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvaGVscGVycy5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9pbnRlcmVzdC5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9sYW5ndWFnZS5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9tZXNzYWdlc2VydmljZS5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9uZXdwYXNzd29yZHNlcnZpY2UuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvcHJvZmlsZXNlcnZpY2UuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvcmVzdW1laGVscGVyLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3Jlc3VtZXNlcnZpY2UuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvc2FsZWFibGVkZXRhaWxzLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3NhbGVhYmxlaGVscGVyLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3NhbGVhYmxlcHJpY2UuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvc2FsZWFibGVzZXJ2aWNlLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3NraWxsLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3RoZXBhY2tlci5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy91c2VyY29udGVudHR5cGVzZXJ2aWNlLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3VzZXJzZXJ2aWNlLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3VzZXJjb250cm9sbGVyLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9jb25maWcvbWVzc2FnZXMuanMiLCJyZXNvdXJjZXMvYXNzZXRzL3ZlbmRvci9hbmd1bGFyLW1lc3NhZ2VzL2FuZ3VsYXItbWVzc2FnZXMubWluLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy92ZW5kb3IvYW5ndWxhci1yZXN0bW9kL2Rpc3QvYW5ndWxhci1yZXN0bW9kLWJ1bmRsZS5qcyIsInJlc291cmNlcy9hc3NldHMvdmVuZG9yL2FuZ3VsYXItcmVzdG1vZC9kaXN0L3N0eWxlcy9hbXMubWluLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy92ZW5kb3IvYW5ndWxhci9hbmd1bGFyLWluZGV4LmpzIiwicmVzb3VyY2VzL2Fzc2V0cy92ZW5kb3IvYW5ndWxhci9hbmd1bGFyLm1pbi5qcyIsInJlc291cmNlcy9hc3NldHMvdmVuZG9yL2FuZ3VsYXJfYW5pbWF0ZS9hbmd1bGFyLWFuaW1hdGUubWluLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy92ZW5kb3IvYW5ndWxhcmpzLWZpbGUtdXBsb2FkL2FuZ3VsYXItZmlsZS11cGxvYWQtc2hpbS5taW4uanMiLCJyZXNvdXJjZXMvYXNzZXRzL3ZlbmRvci9hbmd1bGFyanMtZmlsZS11cGxvYWQvYW5ndWxhci1maWxlLXVwbG9hZC5taW4uanMiLCJyZXNvdXJjZXMvYXNzZXRzL3ZlbmRvci9uZy1mYWItZm9ybS9kaXN0L25nLWZhYi1mb3JtLm1pbi5qcyIsInJlc291cmNlcy9hc3NldHMvdmVuZG9yL3RleHRBbmd1bGFyL2Rpc3QvdGV4dEFuZ3VsYXItcmFuZ3kubWluLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy92ZW5kb3IvdGV4dEFuZ3VsYXIvZGlzdC90ZXh0QW5ndWxhci1zYW5pdGl6ZS5taW4uanMiLCJyZXNvdXJjZXMvYXNzZXRzL3ZlbmRvci90ZXh0QW5ndWxhci9kaXN0L3RleHRBbmd1bGFyLm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNqT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNyL1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNweUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDNUhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3BGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNqQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDekRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQy9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUMzR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDakZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDbkhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3JIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUMxRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDMUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN2SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUMzQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDOURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQzFGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNoSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNqREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUMzRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDbERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDbERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3JCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQzFrSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUMxUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ2hDQTtBQUNBOzs7OztBQ0RBO0FBQ0E7Ozs7O0FDREE7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnXG52YXIgSlF1ZXJ5ID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJy4vLi4vdmVuZG9yL2FuZ3VsYXIvYW5ndWxhci1pbmRleC5qcycpO1xudmFyIGFuZ3VsYXJfcmVzdG1vZCA9IHJlcXVpcmUoJy4vLi4vdmVuZG9yL2FuZ3VsYXItcmVzdG1vZC9kaXN0L2FuZ3VsYXItcmVzdG1vZC1idW5kbGUuanMnKTtcbnZhciByZXNfc3R5bGUgPSByZXF1aXJlKCcuLy4uL3ZlbmRvci9hbmd1bGFyLXJlc3Rtb2QvZGlzdC9zdHlsZXMvYW1zLm1pbi5qcycpO1xudmFyIHN0Y19tZXNzYWdlcyA9IHJlcXVpcmUoJy4vY29uZmlnL21lc3NhZ2VzLmpzJyk7XG5cblxudmFyIG5nRmFiRm9ybSA9IHJlcXVpcmUoJy4vLi4vdmVuZG9yL25nLWZhYi1mb3JtL2Rpc3QvbmctZmFiLWZvcm0ubWluLmpzJyk7XG52YXIgbmdNZXNzYWdlcyA9IHJlcXVpcmUoJy4vLi4vdmVuZG9yL2FuZ3VsYXItbWVzc2FnZXMvYW5ndWxhci1tZXNzYWdlcy5taW4uanMnKTtcblxudmFyIHRleHRBbmd1bGFyID0gcmVxdWlyZSgnLi8uLi92ZW5kb3IvdGV4dEFuZ3VsYXIvZGlzdC90ZXh0QW5ndWxhci1yYW5neS5taW4uanMnKTtcbnZhciBzYW5pdGl6ZSA9IHJlcXVpcmUoJy4vLi4vdmVuZG9yL3RleHRBbmd1bGFyL2Rpc3QvdGV4dEFuZ3VsYXItc2FuaXRpemUubWluLmpzJyk7XG52YXIgcmFuZ3kgPSByZXF1aXJlKCcuLy4uL3ZlbmRvci90ZXh0QW5ndWxhci9kaXN0L3RleHRBbmd1bGFyLm1pbi5qcycpO1xuXG52YXIgdXBsb2FkTGlicDEgPSByZXF1aXJlKCcuLi92ZW5kb3IvYW5ndWxhcmpzLWZpbGUtdXBsb2FkL2FuZ3VsYXItZmlsZS11cGxvYWQtc2hpbS5taW4uanMnKTtcbnZhciB1cGxvYWRMaWJwMiA9IHJlcXVpcmUoJy4uL3ZlbmRvci9hbmd1bGFyanMtZmlsZS11cGxvYWQvYW5ndWxhci1maWxlLXVwbG9hZC5taW4uanMnKTtcblxudmFyIG5nYW5pbWF0ZSA9IHJlcXVpcmUoJy4vLi4vdmVuZG9yL2FuZ3VsYXJfYW5pbWF0ZS9hbmd1bGFyLWFuaW1hdGUubWluLmpzJyk7XG5cblxudmFyIHByZlh5ekFwcCA9IGFuZ3VsYXIubW9kdWxlKCdwcmZYeXpBcHAnLFsncmVzdG1vZCcsJ25nRmFiRm9ybScsJ25nTWVzc2FnZXMnLCd0ZXh0QW5ndWxhcicsJ2FuZ3VsYXJGaWxlVXBsb2FkJywnbmdBbmltYXRlJ10pO1xuXG5wcmZYeXpBcHAuY29uZmlnKFsncmVzdG1vZFByb3ZpZGVyJywnJGh0dHBQcm92aWRlcicsJ25nRmFiRm9ybVByb3ZpZGVyJyxmdW5jdGlvbihyZXN0bW9kUHJvdmlkZXIsICRodHRwUHJvdmlkZXIsbmdGYWJGb3JtUHJvdmlkZXIpIHtcbiAgICByZXN0bW9kUHJvdmlkZXIucmViYXNlKCdBTVNBcGknKTtcbiAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXSA9IFwiWE1MSHR0cFJlcXVlc3RcIjtcbiAgICByZXN0bW9kUHJvdmlkZXIucmViYXNlKCdEZWZhdWx0UGFja2VyJyk7XG5cbiAgICBuZ0ZhYkZvcm1Qcm92aWRlci5leHRlbmRDb25maWcoe1xuICAgICAgICB2YWxpZGF0aW9uc1RlbXBsYXRlIDogJy4uLy4uL2pzL2FkbWluL2FuZ3VsYXIvdGVtcGxhdGVzL2N1c3RvbVZhbGlkYXRpb25UZW1wbGF0ZS5odG1sJ1xuICAgICAgICAvKixzZXRGb3JtRGlydHlPblN1Ym1pdDogdHJ1ZSovXG4gICAgfSk7XG5cbiAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKGZ1bmN0aW9uKCRxLCRyb290U2NvcGUsJHRpbWVvdXQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICdyZXF1ZXN0JzogZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zaG93U3lzdGVtQWxlcnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnNob3dTcGlubmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgJ3Jlc3BvbnNlJzogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnNob3dTcGlubmVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdyZXF1ZXN0RXJyb3InOmZ1bmN0aW9uKHJlamVjdGlvbil7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVqZWN0aW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlamVjdGlvbik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3Jlc3BvbnNlRXJyb3InOmZ1bmN0aW9uKHJlamVjdGlvbil7XG5cbiAgICAgICAgICAgICAgICB2YXIgc3RhdHVzID0gcmVqZWN0aW9uLnN0YXR1cztcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHN0YXR1cyl7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zaG93U3Bpbm5lciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zaG93U3lzdGVtQWxlcnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zeXN0ZW1BbGVydCA9IFwiSGEgY2FkdWNhZG8gdHUgc2VzacOzbi4gRGViZXMgaW5ncmVzYXIgbnVldmFtZW50ZSFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IFwiL2F1dGgvbG9nb3V0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LDQwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zaG93U3Bpbm5lciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnNob3dTeXN0ZW1BbGVydCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuc2hvd1N5c3RlbUFsZXJ0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuc3lzdGVtQWxlcnQgPSBcIlZheWEhIDooIEh1Ym8gdW4gcHJvYmxlbWEgZW4gbGEgcmVzcHVlc3RhIGRlbCBzZXJ2aWRvci4gPGJyPlwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUG9yIGZhdm9yIGludGVudGEgbGEgYWNjacOzbiBudWV2YW1lbnRlIG8gY29udGFjdGEgYWwgQWRtaW5pc3RyYWRvclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zaG93U3Bpbm5lciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnNob3dTeXN0ZW1BbGVydCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuc2hvd1N5c3RlbUFsZXJ0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuc3lzdGVtQWxlcnQgPSBcIlZheWEhIDooIE5vIHNlIGVuY29udHLDsyBlbCBzZXJ2aWNpbyBxdWUgcmVxdWllcmVzLiA8YnI+XCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJQb3IgZmF2b3IgaW50ZW50YSBsYSBhY2Npw7NuIG51ZXZhbWVudGUgbyBjb250YWN0YSBhbCBBZG1pbmlzdHJhZG9yXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgLypjYXNlIDQxMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vJHJvb3RTY29wZS5tZXNzYWdlVHlwZSA9ICdkYW5nZXInO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8kcm9vdFNjb3BlLmZpbGVUb29MYXJnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyRyb290U2NvcGUuZmlsZVRvb0xhcmdlTWVzc2FnZSA9IFwiRXN0w6EgaW50ZW50YW5kbyBzdWJpciB1biBhcmNoaXZvIGRlbWFzaWFkbyBwZXNhZG8uIEVsIGFyY2hpdm8gbm8gZGViZSBzdXBlcmFyIGxvcyA1TUJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiRXN0w6EgaW50ZW50YW5kbyBzdWJpciB1biBhcmNoaXZvIGRlbWFzaWFkbyBwZXNhZG8uIEVsIGFyY2hpdm8gbm8gZGViZSBzdXBlcmFyIGxvcyA1TUJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyovXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQgOlxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zaG93U3Bpbm5lciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnNob3dTeXN0ZW1BbGVydCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuc2hvd1N5c3RlbUFsZXJ0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuc3lzdGVtQWxlcnQgPSBcIlNlIGRldGVjdMOzIHVuIHByb2JsZW1hIGRlIGNvbmV4acOzbi4gPGJyPlwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUG9yIGZhdm9yIGNvbXBydWViYSBxdWUgZXN0w6FzIGNvbmVjdGFkYS9vIGEgdW5hIHJlZC4gU2kgcGVyc2lzdGVuIGxvcyBwcm9ibGVtYXMsIDxicj4gcG9yIGZhdm9yIGNvbnRhY3RhIGFsIEFkbWluaXN0cmFkb3IuXCI7XG5cblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlamVjdGlvbik7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcblxufV0pO1xuXG52YXIgaG9tZUNvbnRyb2xsZXIgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvaG9tZWNvbnRyb2xsZXInKTtcbnZhciBiaW9Db250cm9sbGVyID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL2Jpb2NvbnRyb2xsZXInKTtcbnZhciB1c2VyQ29udHJvbGxlciA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci91c2VyY29udHJvbGxlcicpO1xudmFyIGNvbmZpZ0NvbnRyb2xsZXIgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvY29uZmlnY29udHJvbGxlcicpO1xudmFyIHNhbGVhYmxlQ29udHJvbGxlciA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zYWxlYWJsZWNvbnRyb2xsZXInKTtcbnZhciBzYWxlYWJsZURldGFpbENvbnRyb2xsZXIgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvc2FsZWFibGVkZXRhaWxjb250cm9sbGVyJyk7XG52YXIgc2FsZWFibGVCYXNpY0NvbnRyb2xsZXIgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvYmFzaWNkZXRhaWxjb250cm9sbGVyJyk7XG52YXIgc2FsZWFibGVBbGxEZXRhaWxzQ29udHJvbGxlciA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zYWxlYWJsZWFsbGRldGFpbHNjb250cm9sbGVyJyk7XG52YXIgc2FsZWFibGVQcmljZUNvbnRyb2xsZXIgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvc2FsZWFibGVwcmljZXNjb250cm9sbGVyJyk7XG52YXIgcmVzdW1lQ29udHJvbGxlciA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9yZXN1bWVjb250cm9sbGVyJyk7XG5cbnZhciBtZXNzYWdlU2VydmljZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9tZXNzYWdlc2VydmljZScpO1xudmFyIHVzZXJTZXJ2aWNlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3VzZXJzZXJ2aWNlJyk7XG52YXIgdXNlckNvbnRlbnRUeXBlU2VydmljZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy91c2VyY29udGVudHR5cGVzZXJ2aWNlJyk7XG52YXIgcHJvZmlsZVNlcnZpY2UgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvcHJvZmlsZXNlcnZpY2UnKTtcbnZhciBzYWxlYWJsZVNlcnZpY2UgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvc2FsZWFibGVzZXJ2aWNlJyk7XG52YXIgYmlvU2VydmljZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9iaW9ncmFwaHlzZXJ2aWNlJyk7XG52YXIgdGhlUGFja2VyID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3RoZXBhY2tlcicpO1xudmFyIHNhbGVhYmxlRGV0YWlsU2VydmljZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9zYWxlYWJsZWRldGFpbHMnKTtcbnZhciBzYWxlYWJsZVByaWNlU2VydmljZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9zYWxlYWJsZXByaWNlJyk7XG52YXIgbmV3UGFzc3dvcmQgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvbmV3cGFzc3dvcmRzZXJ2aWNlJyk7XG52YXIgbnVtYmVyRm9ybWF0ID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL2Zvcm1hdGZpbHRlcnNlcnZpY2UnKTtcbnZhciBmaWxlUHJvY2Vzc29yID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL2ZpbGVwcm9jZXNzb3InKTtcbnZhciByZXN1bWVTZXJ2aWNlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3Jlc3VtZXNlcnZpY2UnKTtcbnZhciByZXN1bWVIZWxwZXIgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvcmVzdW1laGVscGVyJyk7XG52YXIgc2FsZWFibGVIZWxwZXIgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvc2FsZWFibGVoZWxwZXInKTtcbnZhciBleHBlcmllbmNlU2VydmljZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9leHBlcmllbmNlJyk7XG52YXIgaGVscGVyc1NlcnZpY2UgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvaGVscGVycycpO1xudmFyIGVkdWNhdGlvblNlcnZpY2UgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvZWR1Y2F0aW9uJyk7XG52YXIgc2tpbGxTZXJ2aWNlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3NraWxsJyk7XG52YXIgbGFuZ3VhZ2VTZXJ2aWNlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL2xhbmd1YWdlJyk7XG52YXIgaW50ZXJlc3RTZXJ2aWNlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL2ludGVyZXN0Jyk7XG52YXIgY2F0ZWdvcnlTZXJ2aWNlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL2NhdGVnb3J5Jyk7XG5cblxudmFyIGFsZXJ0RGlyZWN0aXZlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvYWxlcnRkaXJlY3RpdmUnKTtcbnZhciBjbG9zZUNvbnRlbnREaXJlY3RpdmUgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9jbG9zZWNvbnRlbnRkaXJlY3RpdmUnKTtcbnZhciBjb250ZW50U2VsZWN0b3JEaXJlY3RpdmUgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9jb250ZW50c2VsZWN0b3InKTtcbnZhciBwcm9kaWxlTWVudURpcmVjdGl2ZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL3Byb2ZpbGVtZW51Jyk7XG52YXIgY29uZmlnTWVudURpcmVjdGl2ZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL2NvbmZpZ21lbnUnKTtcbnZhciBjYXRlZ29yeURpcmVjdGl2ZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL2NvbmZpZ3VyYXRpb24vY2F0ZWdvcnknKTtcblxudmFyIHJlc3VtZVNlbGVjdG9yRGlyZWN0aXZlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvcmVzdW1lL3Jlc3VtZXNlbGVjdG9yJyk7XG52YXIgcmVzdW1lRGlyZWN0aXZlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvcmVzdW1lL3Jlc3VtZWRpcmVjdGl2ZScpO1xudmFyIHJlc3VtZUVkaXRGb3JtID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvcmVzdW1lL3Jlc3VtZWVkaXRmb3JtJyk7XG52YXIgcmVzdW1lRm9ybSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL3Jlc3VtZS9yZXN1bWVmb3JtJyk7XG52YXIgcmVzdW1lRXhwZXJpZW5jZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL3Jlc3VtZS9leHBlcmllbmNlJyk7XG52YXIgcmVzdW1lU2VjdGlvbnMgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9yZXN1bWUvc2VjdGlvbnMnKTtcbnZhciByZXN1bWVFZHVjYXRpb24gPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9yZXN1bWUvZWR1Y2F0aW9uJyk7XG52YXIgcmVzdW1lU2tpbGwgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9yZXN1bWUvc2tpbGwnKTtcbnZhciByZXN1bWVMYW5ndWFnZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL3Jlc3VtZS9sYW5ndWFnZScpO1xudmFyIHJlc3VtZUludGVyZXN0ID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvcmVzdW1lL2ludGVyZXN0Jyk7XG52YXIgYmlvRGlyZWN0aXZlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvYmlvZ3JhcGhpZXMvYmlvZ3JhcGh5Jyk7XG52YXIgcmVzdW1lTGlzdCA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL3Jlc3VtZS9yZXN1bWVsaXN0Jyk7XG5cbnZhciBzYWxlYWJsZURldGFpbHMgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9zYWxlYWJsZWRldGFpbHMnKTtcbnZhciBzYWxlYWJsZUJhc2ljID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvc2FsZWFibGViYXNpYycpO1xudmFyIHNhbGVhYmxlRGV0YWlsc0xpc3QgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9zYWxlYWJsZWRldGFpbHNsaXN0Jyk7XG52YXIgc2FsZWFibGVQcmljZXNMaXN0ID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvc2FsZWFibGVwcmljZXNsaXN0Jyk7XG52YXIgaGFsbG9FZGl0b3IgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9oYWxsb2RpcmVjdGl2ZScpO1xuXG5cbnByZlh5ekFwcC5mYWN0b3J5KCdNZXNzYWdlcycsW3N0Y19tZXNzYWdlc10pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ01lc3NhZ2VTZXJ2aWNlJyxbJ01lc3NhZ2VzJywnJHRpbWVvdXQnLG1lc3NhZ2VTZXJ2aWNlXSk7XG5wcmZYeXpBcHAuZmFjdG9yeSgnVXNlclNlcnZpY2UnLFsncmVzdG1vZCcsdXNlclNlcnZpY2VdKTtcbnByZlh5ekFwcC5mYWN0b3J5KCdQcm9maWxlU2VydmljZScsWydyZXN0bW9kJyxwcm9maWxlU2VydmljZV0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ1NhbGVhYmxlU2VydmljZScsWydyZXN0bW9kJyxzYWxlYWJsZVNlcnZpY2VdKTtcbnByZlh5ekFwcC5mYWN0b3J5KCdTYWxlYWJsZURldGFpbHNTZXJ2aWNlJyxbJ3Jlc3Rtb2QnLHNhbGVhYmxlRGV0YWlsU2VydmljZV0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ1NhbGVhYmxlUHJpY2VTZXJ2aWNlJyxbJ3Jlc3Rtb2QnLHNhbGVhYmxlUHJpY2VTZXJ2aWNlXSk7XG5wcmZYeXpBcHAuZmFjdG9yeSgnVXNlckNvbnRlbnRUeXBlJyxbJ3Jlc3Rtb2QnLHVzZXJDb250ZW50VHlwZVNlcnZpY2VdKTtcbnByZlh5ekFwcC5mYWN0b3J5KCdCaW9ncmFwaHlTZXJ2aWNlJyxbJ3Jlc3Rtb2QnLGJpb1NlcnZpY2VdKTtcbnByZlh5ekFwcC5mYWN0b3J5KCdUaGVQYWNrZXInLFt0aGVQYWNrZXJdKTtcbnByZlh5ekFwcC5mYWN0b3J5KCdOZXdQYXNzd29yZCcsWyckaHR0cCcsbmV3UGFzc3dvcmRdKTtcbnByZlh5ekFwcC5mYWN0b3J5KCdOdW1iZXJGb3JtYXRGaWx0ZXInLFtudW1iZXJGb3JtYXRdKTtcbnByZlh5ekFwcC5mYWN0b3J5KCdGaWxlUHJvY2Vzc29yJyxbJyR1cGxvYWQnLCckaHR0cCcsJ01lc3NhZ2VTZXJ2aWNlJyxmaWxlUHJvY2Vzc29yXSk7XG5wcmZYeXpBcHAuZmFjdG9yeSgnUmVzdW1lJyxbJ3Jlc3Rtb2QnLHJlc3VtZVNlcnZpY2VdKTtcbnByZlh5ekFwcC5mYWN0b3J5KCdFeHBlcmllbmNlJyxbJ3Jlc3Rtb2QnLGV4cGVyaWVuY2VTZXJ2aWNlXSk7XG5wcmZYeXpBcHAuZmFjdG9yeSgnUmVzdW1lSGVscGVyJyxbJyRodHRwJywnTWVzc2FnZVNlcnZpY2UnLHJlc3VtZUhlbHBlcl0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ1NhbGVhYmxlSGVscGVyJyxbJyRodHRwJywnTWVzc2FnZVNlcnZpY2UnLHNhbGVhYmxlSGVscGVyXSk7XG5wcmZYeXpBcHAuZmFjdG9yeSgnSGVscGVyJyxbaGVscGVyc1NlcnZpY2VdKTtcbnByZlh5ekFwcC5mYWN0b3J5KCdFZHVjYXRpb24nLFsncmVzdG1vZCcsZWR1Y2F0aW9uU2VydmljZV0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ1NraWxsJyxbJ3Jlc3Rtb2QnLHNraWxsU2VydmljZV0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ0xhbmd1YWdlJyxbJ3Jlc3Rtb2QnLGxhbmd1YWdlU2VydmljZV0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ0ludGVyZXN0JyxbJ3Jlc3Rtb2QnLGludGVyZXN0U2VydmljZV0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ0NhdGVnb3J5JyxbJ3Jlc3Rtb2QnLGNhdGVnb3J5U2VydmljZV0pO1xuXG5wcmZYeXpBcHAuZGlyZWN0aXZlKCdhbGVydCcsW2FsZXJ0RGlyZWN0aXZlXSk7XG5wcmZYeXpBcHAuZGlyZWN0aXZlKCdjbG9zZUNvbnRlbnQnLFtjbG9zZUNvbnRlbnREaXJlY3RpdmVdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ2NvbnRlbnRTZWxlY3RvcicsWydNZXNzYWdlU2VydmljZScsJ1VzZXJDb250ZW50VHlwZScsY29udGVudFNlbGVjdG9yRGlyZWN0aXZlXSk7XG5wcmZYeXpBcHAuZGlyZWN0aXZlKCdwcm9maWxlTWVudScsW3Byb2RpbGVNZW51RGlyZWN0aXZlXSk7XG5wcmZYeXpBcHAuZGlyZWN0aXZlKCdjb25maWdNZW51JyxbY29uZmlnTWVudURpcmVjdGl2ZV0pO1xucHJmWHl6QXBwLmRpcmVjdGl2ZSgnc2FsZWFibGVEZXRhaWxzJyxbJyR0ZW1wbGF0ZUNhY2hlJywnJGNvbXBpbGUnLCckcm9vdFNjb3BlJyxzYWxlYWJsZURldGFpbHNdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3NhbGVhYmxlQmFzaWMnLFsnU2FsZWFibGVTZXJ2aWNlJyxzYWxlYWJsZUJhc2ljXSk7XG5wcmZYeXpBcHAuZGlyZWN0aXZlKCdzYWxlYWJsZURldGFpbHNMaXN0Jyxbc2FsZWFibGVEZXRhaWxzTGlzdF0pO1xucHJmWHl6QXBwLmRpcmVjdGl2ZSgnc2FsZWFibGVQcmljZXNMaXN0Jyxbc2FsZWFibGVQcmljZXNMaXN0XSk7XG5wcmZYeXpBcHAuZGlyZWN0aXZlKCdoYWxsbycsW2hhbGxvRWRpdG9yXSk7XG5wcmZYeXpBcHAuZGlyZWN0aXZlKCdyZXN1bWVTZWxlY3RvcicsWydNZXNzYWdlU2VydmljZScscmVzdW1lU2VsZWN0b3JEaXJlY3RpdmVdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3Jlc3VtZScsWydNZXNzYWdlU2VydmljZScsJ1Jlc3VtZScsJyR0aW1lb3V0JywnUmVzdW1lSGVscGVyJyxyZXN1bWVEaXJlY3RpdmVdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3Jlc3VtZUVkaXRGb3JtJyxbJ01lc3NhZ2VTZXJ2aWNlJywnUmVzdW1lJywnUmVzdW1lSGVscGVyJywnJHRpbWVvdXQnLHJlc3VtZUVkaXRGb3JtXSk7XG5wcmZYeXpBcHAuZGlyZWN0aXZlKCdyZXN1bWVGb3JtJyxbJ01lc3NhZ2VTZXJ2aWNlJywnUmVzdW1lJywnUmVzdW1lSGVscGVyJywnJHRpbWVvdXQnLHJlc3VtZUZvcm1dKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3Jlc3VtZUV4cGVyaWVuY2UnLFsnTWVzc2FnZVNlcnZpY2UnLCdFeHBlcmllbmNlJywnJHRpbWVvdXQnLCdIZWxwZXInLHJlc3VtZUV4cGVyaWVuY2VdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3Jlc3VtZVNlY3Rpb25zJyxbJ1Jlc3VtZScscmVzdW1lU2VjdGlvbnNdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3Jlc3VtZUVkdWNhdGlvbicsWydNZXNzYWdlU2VydmljZScsJ0VkdWNhdGlvbicsJyR0aW1lb3V0JywnSGVscGVyJyxyZXN1bWVFZHVjYXRpb25dKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3Jlc3VtZVNraWxsJyxbJ01lc3NhZ2VTZXJ2aWNlJywnU2tpbGwnLCckdGltZW91dCcsJ0hlbHBlcicscmVzdW1lU2tpbGxdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3Jlc3VtZUxhbmd1YWdlJyxbJ01lc3NhZ2VTZXJ2aWNlJywnTGFuZ3VhZ2UnLCckdGltZW91dCcsJ0hlbHBlcicscmVzdW1lTGFuZ3VhZ2VdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3Jlc3VtZUludGVyZXN0JyxbJ01lc3NhZ2VTZXJ2aWNlJywnSW50ZXJlc3QnLCckdGltZW91dCcsJ0hlbHBlcicscmVzdW1lSW50ZXJlc3RdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ2Jpb2dyYXBoeScsWydNZXNzYWdlU2VydmljZScsJ0Jpb2dyYXBoeVNlcnZpY2UnLCckdGltZW91dCcsJ0hlbHBlcicsJyRodHRwJyxiaW9EaXJlY3RpdmVdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3Jlc3VtZUxpc3QnLFsnTWVzc2FnZVNlcnZpY2UnLCdSZXN1bWUnLCckdGltZW91dCcsJ0hlbHBlcicscmVzdW1lTGlzdF0pO1xucHJmWHl6QXBwLmRpcmVjdGl2ZSgnY2F0ZWdvcnlNYW5hZ2VyJyxbJ01lc3NhZ2VTZXJ2aWNlJywnQ2F0ZWdvcnknLCckdGltZW91dCcsJ0hlbHBlcicsY2F0ZWdvcnlEaXJlY3RpdmVdKTtcblxucHJmWHl6QXBwLmNvbnRyb2xsZXIoJ0hvbWVDdHJsJyxbJyRzY29wZScsJ1VzZXJTZXJ2aWNlJywnVXNlckNvbnRlbnRUeXBlJyxob21lQ29udHJvbGxlcl0pO1xucHJmWHl6QXBwLmNvbnRyb2xsZXIoJ0Jpb0N0cmwnLFsnJHNjb3BlJywnQmlvZ3JhcGh5U2VydmljZScsJ01lc3NhZ2VTZXJ2aWNlJyxiaW9Db250cm9sbGVyXSk7XG5wcmZYeXpBcHAuY29udHJvbGxlcignVXNlckN0cmwnLFsnJHNjb3BlJywnJHRpbWVvdXQnLCdVc2VyU2VydmljZScsJ1Byb2ZpbGVTZXJ2aWNlJywnTWVzc2FnZVNlcnZpY2UnLCdOZXdQYXNzd29yZCcsdXNlckNvbnRyb2xsZXJdKTtcbnByZlh5ekFwcC5jb250cm9sbGVyKCdDb25maWdDdHJsJyxbJyRzY29wZScsJyR0aW1lb3V0JywnTWVzc2FnZVNlcnZpY2UnLCdVc2VyQ29udGVudFR5cGUnLGNvbmZpZ0NvbnRyb2xsZXJdKTtcblxucHJmWHl6QXBwLmNvbnRyb2xsZXIoJ1NhbGVhYmxlQ3RybCcsWyckc2NvcGUnLCckcm9vdFNjb3BlJywnJHRpbWVvdXQnLCdTYWxlYWJsZVNlcnZpY2UnLCdNZXNzYWdlU2VydmljZScsJ1NhbGVhYmxlRGV0YWlsc1NlcnZpY2UnLHNhbGVhYmxlQ29udHJvbGxlcl0pO1xucHJmWHl6QXBwLmNvbnRyb2xsZXIoJ1NhbGVhYmxlRGV0YWlsQ3RybCcsWyckc2NvcGUnLCckcm9vdFNjb3BlJywnU2FsZWFibGVTZXJ2aWNlJywnTWVzc2FnZVNlcnZpY2UnLCckZWxlbWVudCcsJyRjb21waWxlJyxzYWxlYWJsZURldGFpbENvbnRyb2xsZXJdKTtcbnByZlh5ekFwcC5jb250cm9sbGVyKCdzYWxlYWJsZUJhc2ljQ3RybCcsWyckc2NvcGUnLCckcm9vdFNjb3BlJywnU2FsZWFibGVTZXJ2aWNlJywnTWVzc2FnZVNlcnZpY2UnLCdTYWxlYWJsZUhlbHBlcicsc2FsZWFibGVCYXNpY0NvbnRyb2xsZXJdKTtcbnByZlh5ekFwcC5jb250cm9sbGVyKCdzYWxlYWJsZUFsbERldGFpbHNDdHJsJyxbJyRzY29wZScsJyRyb290U2NvcGUnLCdTYWxlYWJsZURldGFpbHNTZXJ2aWNlJywnTWVzc2FnZVNlcnZpY2UnLCdGaWxlUHJvY2Vzc29yJyxzYWxlYWJsZUFsbERldGFpbHNDb250cm9sbGVyXSk7XG5wcmZYeXpBcHAuY29udHJvbGxlcignc2FsZWFibGVQcmljZUN0cmwnLFsnJHNjb3BlJywnJHJvb3RTY29wZScsJ1NhbGVhYmxlUHJpY2VTZXJ2aWNlJywnTWVzc2FnZVNlcnZpY2UnLHNhbGVhYmxlUHJpY2VDb250cm9sbGVyXSk7XG5wcmZYeXpBcHAuY29udHJvbGxlcigncmVzdW1lQ3RybCcsWyckc2NvcGUnLCckcm9vdFNjb3BlJywnUmVzdW1lSGVscGVyJywnTWVzc2FnZVNlcnZpY2UnLHJlc3VtZUNvbnRyb2xsZXJdKTsiLCIvKiFcbiAqIGpRdWVyeSBKYXZhU2NyaXB0IExpYnJhcnkgdjIuMS4zXG4gKiBodHRwOi8vanF1ZXJ5LmNvbS9cbiAqXG4gKiBJbmNsdWRlcyBTaXp6bGUuanNcbiAqIGh0dHA6Ly9zaXp6bGVqcy5jb20vXG4gKlxuICogQ29weXJpZ2h0IDIwMDUsIDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogRGF0ZTogMjAxNC0xMi0xOFQxNToxMVpcbiAqL1xuXG4oZnVuY3Rpb24oIGdsb2JhbCwgZmFjdG9yeSApIHtcblxuXHRpZiAoIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiICkge1xuXHRcdC8vIEZvciBDb21tb25KUyBhbmQgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgd2hlcmUgYSBwcm9wZXIgYHdpbmRvd2Bcblx0XHQvLyBpcyBwcmVzZW50LCBleGVjdXRlIHRoZSBmYWN0b3J5IGFuZCBnZXQgalF1ZXJ5LlxuXHRcdC8vIEZvciBlbnZpcm9ubWVudHMgdGhhdCBkbyBub3QgaGF2ZSBhIGB3aW5kb3dgIHdpdGggYSBgZG9jdW1lbnRgXG5cdFx0Ly8gKHN1Y2ggYXMgTm9kZS5qcyksIGV4cG9zZSBhIGZhY3RvcnkgYXMgbW9kdWxlLmV4cG9ydHMuXG5cdFx0Ly8gVGhpcyBhY2NlbnR1YXRlcyB0aGUgbmVlZCBmb3IgdGhlIGNyZWF0aW9uIG9mIGEgcmVhbCBgd2luZG93YC5cblx0XHQvLyBlLmcuIHZhciBqUXVlcnkgPSByZXF1aXJlKFwianF1ZXJ5XCIpKHdpbmRvdyk7XG5cdFx0Ly8gU2VlIHRpY2tldCAjMTQ1NDkgZm9yIG1vcmUgaW5mby5cblx0XHRtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbC5kb2N1bWVudCA/XG5cdFx0XHRmYWN0b3J5KCBnbG9iYWwsIHRydWUgKSA6XG5cdFx0XHRmdW5jdGlvbiggdyApIHtcblx0XHRcdFx0aWYgKCAhdy5kb2N1bWVudCApIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoIFwialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhY3RvcnkoIHcgKTtcblx0XHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0ZmFjdG9yeSggZ2xvYmFsICk7XG5cdH1cblxuLy8gUGFzcyB0aGlzIGlmIHdpbmRvdyBpcyBub3QgZGVmaW5lZCB5ZXRcbn0odHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uKCB3aW5kb3csIG5vR2xvYmFsICkge1xuXG4vLyBTdXBwb3J0OiBGaXJlZm94IDE4K1xuLy8gQ2FuJ3QgYmUgaW4gc3RyaWN0IG1vZGUsIHNldmVyYWwgbGlicyBpbmNsdWRpbmcgQVNQLk5FVCB0cmFjZVxuLy8gdGhlIHN0YWNrIHZpYSBhcmd1bWVudHMuY2FsbGVyLmNhbGxlZSBhbmQgRmlyZWZveCBkaWVzIGlmXG4vLyB5b3UgdHJ5IHRvIHRyYWNlIHRocm91Z2ggXCJ1c2Ugc3RyaWN0XCIgY2FsbCBjaGFpbnMuICgjMTMzMzUpXG4vL1xuXG52YXIgYXJyID0gW107XG5cbnZhciBzbGljZSA9IGFyci5zbGljZTtcblxudmFyIGNvbmNhdCA9IGFyci5jb25jYXQ7XG5cbnZhciBwdXNoID0gYXJyLnB1c2g7XG5cbnZhciBpbmRleE9mID0gYXJyLmluZGV4T2Y7XG5cbnZhciBjbGFzczJ0eXBlID0ge307XG5cbnZhciB0b1N0cmluZyA9IGNsYXNzMnR5cGUudG9TdHJpbmc7XG5cbnZhciBoYXNPd24gPSBjbGFzczJ0eXBlLmhhc093blByb3BlcnR5O1xuXG52YXIgc3VwcG9ydCA9IHt9O1xuXG5cblxudmFyXG5cdC8vIFVzZSB0aGUgY29ycmVjdCBkb2N1bWVudCBhY2NvcmRpbmdseSB3aXRoIHdpbmRvdyBhcmd1bWVudCAoc2FuZGJveClcblx0ZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQsXG5cblx0dmVyc2lvbiA9IFwiMi4xLjNcIixcblxuXHQvLyBEZWZpbmUgYSBsb2NhbCBjb3B5IG9mIGpRdWVyeVxuXHRqUXVlcnkgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQgKSB7XG5cdFx0Ly8gVGhlIGpRdWVyeSBvYmplY3QgaXMgYWN0dWFsbHkganVzdCB0aGUgaW5pdCBjb25zdHJ1Y3RvciAnZW5oYW5jZWQnXG5cdFx0Ly8gTmVlZCBpbml0IGlmIGpRdWVyeSBpcyBjYWxsZWQgKGp1c3QgYWxsb3cgZXJyb3IgdG8gYmUgdGhyb3duIGlmIG5vdCBpbmNsdWRlZClcblx0XHRyZXR1cm4gbmV3IGpRdWVyeS5mbi5pbml0KCBzZWxlY3RvciwgY29udGV4dCApO1xuXHR9LFxuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4xXG5cdC8vIE1ha2Ugc3VyZSB3ZSB0cmltIEJPTSBhbmQgTkJTUFxuXHRydHJpbSA9IC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxcblxuXHQvLyBNYXRjaGVzIGRhc2hlZCBzdHJpbmcgZm9yIGNhbWVsaXppbmdcblx0cm1zUHJlZml4ID0gL14tbXMtLyxcblx0cmRhc2hBbHBoYSA9IC8tKFtcXGRhLXpdKS9naSxcblxuXHQvLyBVc2VkIGJ5IGpRdWVyeS5jYW1lbENhc2UgYXMgY2FsbGJhY2sgdG8gcmVwbGFjZSgpXG5cdGZjYW1lbENhc2UgPSBmdW5jdGlvbiggYWxsLCBsZXR0ZXIgKSB7XG5cdFx0cmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpO1xuXHR9O1xuXG5qUXVlcnkuZm4gPSBqUXVlcnkucHJvdG90eXBlID0ge1xuXHQvLyBUaGUgY3VycmVudCB2ZXJzaW9uIG9mIGpRdWVyeSBiZWluZyB1c2VkXG5cdGpxdWVyeTogdmVyc2lvbixcblxuXHRjb25zdHJ1Y3RvcjogalF1ZXJ5LFxuXG5cdC8vIFN0YXJ0IHdpdGggYW4gZW1wdHkgc2VsZWN0b3Jcblx0c2VsZWN0b3I6IFwiXCIsXG5cblx0Ly8gVGhlIGRlZmF1bHQgbGVuZ3RoIG9mIGEgalF1ZXJ5IG9iamVjdCBpcyAwXG5cdGxlbmd0aDogMCxcblxuXHR0b0FycmF5OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2xpY2UuY2FsbCggdGhpcyApO1xuXHR9LFxuXG5cdC8vIEdldCB0aGUgTnRoIGVsZW1lbnQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXQgT1Jcblx0Ly8gR2V0IHRoZSB3aG9sZSBtYXRjaGVkIGVsZW1lbnQgc2V0IGFzIGEgY2xlYW4gYXJyYXlcblx0Z2V0OiBmdW5jdGlvbiggbnVtICkge1xuXHRcdHJldHVybiBudW0gIT0gbnVsbCA/XG5cblx0XHRcdC8vIFJldHVybiBqdXN0IHRoZSBvbmUgZWxlbWVudCBmcm9tIHRoZSBzZXRcblx0XHRcdCggbnVtIDwgMCA/IHRoaXNbIG51bSArIHRoaXMubGVuZ3RoIF0gOiB0aGlzWyBudW0gXSApIDpcblxuXHRcdFx0Ly8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgaW4gYSBjbGVhbiBhcnJheVxuXHRcdFx0c2xpY2UuY2FsbCggdGhpcyApO1xuXHR9LFxuXG5cdC8vIFRha2UgYW4gYXJyYXkgb2YgZWxlbWVudHMgYW5kIHB1c2ggaXQgb250byB0aGUgc3RhY2tcblx0Ly8gKHJldHVybmluZyB0aGUgbmV3IG1hdGNoZWQgZWxlbWVudCBzZXQpXG5cdHB1c2hTdGFjazogZnVuY3Rpb24oIGVsZW1zICkge1xuXG5cdFx0Ly8gQnVpbGQgYSBuZXcgalF1ZXJ5IG1hdGNoZWQgZWxlbWVudCBzZXRcblx0XHR2YXIgcmV0ID0galF1ZXJ5Lm1lcmdlKCB0aGlzLmNvbnN0cnVjdG9yKCksIGVsZW1zICk7XG5cblx0XHQvLyBBZGQgdGhlIG9sZCBvYmplY3Qgb250byB0aGUgc3RhY2sgKGFzIGEgcmVmZXJlbmNlKVxuXHRcdHJldC5wcmV2T2JqZWN0ID0gdGhpcztcblx0XHRyZXQuY29udGV4dCA9IHRoaXMuY29udGV4dDtcblxuXHRcdC8vIFJldHVybiB0aGUgbmV3bHktZm9ybWVkIGVsZW1lbnQgc2V0XG5cdFx0cmV0dXJuIHJldDtcblx0fSxcblxuXHQvLyBFeGVjdXRlIGEgY2FsbGJhY2sgZm9yIGV2ZXJ5IGVsZW1lbnQgaW4gdGhlIG1hdGNoZWQgc2V0LlxuXHQvLyAoWW91IGNhbiBzZWVkIHRoZSBhcmd1bWVudHMgd2l0aCBhbiBhcnJheSBvZiBhcmdzLCBidXQgdGhpcyBpc1xuXHQvLyBvbmx5IHVzZWQgaW50ZXJuYWxseS4pXG5cdGVhY2g6IGZ1bmN0aW9uKCBjYWxsYmFjaywgYXJncyApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmVhY2goIHRoaXMsIGNhbGxiYWNrLCBhcmdzICk7XG5cdH0sXG5cblx0bWFwOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkubWFwKHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBpICkge1xuXHRcdFx0cmV0dXJuIGNhbGxiYWNrLmNhbGwoIGVsZW0sIGksIGVsZW0gKTtcblx0XHR9KSk7XG5cdH0sXG5cblx0c2xpY2U6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggc2xpY2UuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApICk7XG5cdH0sXG5cblx0Zmlyc3Q6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmVxKCAwICk7XG5cdH0sXG5cblx0bGFzdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZXEoIC0xICk7XG5cdH0sXG5cblx0ZXE6IGZ1bmN0aW9uKCBpICkge1xuXHRcdHZhciBsZW4gPSB0aGlzLmxlbmd0aCxcblx0XHRcdGogPSAraSArICggaSA8IDAgPyBsZW4gOiAwICk7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqID49IDAgJiYgaiA8IGxlbiA/IFsgdGhpc1tqXSBdIDogW10gKTtcblx0fSxcblxuXHRlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnByZXZPYmplY3QgfHwgdGhpcy5jb25zdHJ1Y3RvcihudWxsKTtcblx0fSxcblxuXHQvLyBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG5cdC8vIEJlaGF2ZXMgbGlrZSBhbiBBcnJheSdzIG1ldGhvZCwgbm90IGxpa2UgYSBqUXVlcnkgbWV0aG9kLlxuXHRwdXNoOiBwdXNoLFxuXHRzb3J0OiBhcnIuc29ydCxcblx0c3BsaWNlOiBhcnIuc3BsaWNlXG59O1xuXG5qUXVlcnkuZXh0ZW5kID0galF1ZXJ5LmZuLmV4dGVuZCA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgb3B0aW9ucywgbmFtZSwgc3JjLCBjb3B5LCBjb3B5SXNBcnJheSwgY2xvbmUsXG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWzBdIHx8IHt9LFxuXHRcdGkgPSAxLFxuXHRcdGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXG5cdFx0ZGVlcCA9IGZhbHNlO1xuXG5cdC8vIEhhbmRsZSBhIGRlZXAgY29weSBzaXR1YXRpb25cblx0aWYgKCB0eXBlb2YgdGFyZ2V0ID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRkZWVwID0gdGFyZ2V0O1xuXG5cdFx0Ly8gU2tpcCB0aGUgYm9vbGVhbiBhbmQgdGhlIHRhcmdldFxuXHRcdHRhcmdldCA9IGFyZ3VtZW50c1sgaSBdIHx8IHt9O1xuXHRcdGkrKztcblx0fVxuXG5cdC8vIEhhbmRsZSBjYXNlIHdoZW4gdGFyZ2V0IGlzIGEgc3RyaW5nIG9yIHNvbWV0aGluZyAocG9zc2libGUgaW4gZGVlcCBjb3B5KVxuXHRpZiAoIHR5cGVvZiB0YXJnZXQgIT09IFwib2JqZWN0XCIgJiYgIWpRdWVyeS5pc0Z1bmN0aW9uKHRhcmdldCkgKSB7XG5cdFx0dGFyZ2V0ID0ge307XG5cdH1cblxuXHQvLyBFeHRlbmQgalF1ZXJ5IGl0c2VsZiBpZiBvbmx5IG9uZSBhcmd1bWVudCBpcyBwYXNzZWRcblx0aWYgKCBpID09PSBsZW5ndGggKSB7XG5cdFx0dGFyZ2V0ID0gdGhpcztcblx0XHRpLS07XG5cdH1cblxuXHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHQvLyBPbmx5IGRlYWwgd2l0aCBub24tbnVsbC91bmRlZmluZWQgdmFsdWVzXG5cdFx0aWYgKCAob3B0aW9ucyA9IGFyZ3VtZW50c1sgaSBdKSAhPSBudWxsICkge1xuXHRcdFx0Ly8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdFxuXHRcdFx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdFx0XHRzcmMgPSB0YXJnZXRbIG5hbWUgXTtcblx0XHRcdFx0Y29weSA9IG9wdGlvbnNbIG5hbWUgXTtcblxuXHRcdFx0XHQvLyBQcmV2ZW50IG5ldmVyLWVuZGluZyBsb29wXG5cdFx0XHRcdGlmICggdGFyZ2V0ID09PSBjb3B5ICkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVjdXJzZSBpZiB3ZSdyZSBtZXJnaW5nIHBsYWluIG9iamVjdHMgb3IgYXJyYXlzXG5cdFx0XHRcdGlmICggZGVlcCAmJiBjb3B5ICYmICggalF1ZXJ5LmlzUGxhaW5PYmplY3QoY29weSkgfHwgKGNvcHlJc0FycmF5ID0galF1ZXJ5LmlzQXJyYXkoY29weSkpICkgKSB7XG5cdFx0XHRcdFx0aWYgKCBjb3B5SXNBcnJheSApIHtcblx0XHRcdFx0XHRcdGNvcHlJc0FycmF5ID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBqUXVlcnkuaXNBcnJheShzcmMpID8gc3JjIDogW107XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmMgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3Qoc3JjKSA/IHNyYyA6IHt9O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE5ldmVyIG1vdmUgb3JpZ2luYWwgb2JqZWN0cywgY2xvbmUgdGhlbVxuXHRcdFx0XHRcdHRhcmdldFsgbmFtZSBdID0galF1ZXJ5LmV4dGVuZCggZGVlcCwgY2xvbmUsIGNvcHkgKTtcblxuXHRcdFx0XHQvLyBEb24ndCBicmluZyBpbiB1bmRlZmluZWQgdmFsdWVzXG5cdFx0XHRcdH0gZWxzZSBpZiAoIGNvcHkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHR0YXJnZXRbIG5hbWUgXSA9IGNvcHk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIG1vZGlmaWVkIG9iamVjdFxuXHRyZXR1cm4gdGFyZ2V0O1xufTtcblxualF1ZXJ5LmV4dGVuZCh7XG5cdC8vIFVuaXF1ZSBmb3IgZWFjaCBjb3B5IG9mIGpRdWVyeSBvbiB0aGUgcGFnZVxuXHRleHBhbmRvOiBcImpRdWVyeVwiICsgKCB2ZXJzaW9uICsgTWF0aC5yYW5kb20oKSApLnJlcGxhY2UoIC9cXEQvZywgXCJcIiApLFxuXG5cdC8vIEFzc3VtZSBqUXVlcnkgaXMgcmVhZHkgd2l0aG91dCB0aGUgcmVhZHkgbW9kdWxlXG5cdGlzUmVhZHk6IHRydWUsXG5cblx0ZXJyb3I6IGZ1bmN0aW9uKCBtc2cgKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCBtc2cgKTtcblx0fSxcblxuXHRub29wOiBmdW5jdGlvbigpIHt9LFxuXG5cdGlzRnVuY3Rpb246IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS50eXBlKG9iaikgPT09IFwiZnVuY3Rpb25cIjtcblx0fSxcblxuXHRpc0FycmF5OiBBcnJheS5pc0FycmF5LFxuXG5cdGlzV2luZG93OiBmdW5jdGlvbiggb2JqICkge1xuXHRcdHJldHVybiBvYmogIT0gbnVsbCAmJiBvYmogPT09IG9iai53aW5kb3c7XG5cdH0sXG5cblx0aXNOdW1lcmljOiBmdW5jdGlvbiggb2JqICkge1xuXHRcdC8vIHBhcnNlRmxvYXQgTmFOcyBudW1lcmljLWNhc3QgZmFsc2UgcG9zaXRpdmVzIChudWxsfHRydWV8ZmFsc2V8XCJcIilcblx0XHQvLyAuLi5idXQgbWlzaW50ZXJwcmV0cyBsZWFkaW5nLW51bWJlciBzdHJpbmdzLCBwYXJ0aWN1bGFybHkgaGV4IGxpdGVyYWxzIChcIjB4Li4uXCIpXG5cdFx0Ly8gc3VidHJhY3Rpb24gZm9yY2VzIGluZmluaXRpZXMgdG8gTmFOXG5cdFx0Ly8gYWRkaW5nIDEgY29ycmVjdHMgbG9zcyBvZiBwcmVjaXNpb24gZnJvbSBwYXJzZUZsb2F0ICgjMTUxMDApXG5cdFx0cmV0dXJuICFqUXVlcnkuaXNBcnJheSggb2JqICkgJiYgKG9iaiAtIHBhcnNlRmxvYXQoIG9iaiApICsgMSkgPj0gMDtcblx0fSxcblxuXHRpc1BsYWluT2JqZWN0OiBmdW5jdGlvbiggb2JqICkge1xuXHRcdC8vIE5vdCBwbGFpbiBvYmplY3RzOlxuXHRcdC8vIC0gQW55IG9iamVjdCBvciB2YWx1ZSB3aG9zZSBpbnRlcm5hbCBbW0NsYXNzXV0gcHJvcGVydHkgaXMgbm90IFwiW29iamVjdCBPYmplY3RdXCJcblx0XHQvLyAtIERPTSBub2Rlc1xuXHRcdC8vIC0gd2luZG93XG5cdFx0aWYgKCBqUXVlcnkudHlwZSggb2JqICkgIT09IFwib2JqZWN0XCIgfHwgb2JqLm5vZGVUeXBlIHx8IGpRdWVyeS5pc1dpbmRvdyggb2JqICkgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0aWYgKCBvYmouY29uc3RydWN0b3IgJiZcblx0XHRcdFx0IWhhc093bi5jYWxsKCBvYmouY29uc3RydWN0b3IucHJvdG90eXBlLCBcImlzUHJvdG90eXBlT2ZcIiApICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIElmIHRoZSBmdW5jdGlvbiBoYXNuJ3QgcmV0dXJuZWQgYWxyZWFkeSwgd2UncmUgY29uZmlkZW50IHRoYXRcblx0XHQvLyB8b2JqfCBpcyBhIHBsYWluIG9iamVjdCwgY3JlYXRlZCBieSB7fSBvciBjb25zdHJ1Y3RlZCB3aXRoIG5ldyBPYmplY3Rcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblxuXHRpc0VtcHR5T2JqZWN0OiBmdW5jdGlvbiggb2JqICkge1xuXHRcdHZhciBuYW1lO1xuXHRcdGZvciAoIG5hbWUgaW4gb2JqICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblxuXHR0eXBlOiBmdW5jdGlvbiggb2JqICkge1xuXHRcdGlmICggb2JqID09IG51bGwgKSB7XG5cdFx0XHRyZXR1cm4gb2JqICsgXCJcIjtcblx0XHR9XG5cdFx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjAsIGlPUzw2IChmdW5jdGlvbmlzaCBSZWdFeHApXG5cdFx0cmV0dXJuIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiID9cblx0XHRcdGNsYXNzMnR5cGVbIHRvU3RyaW5nLmNhbGwob2JqKSBdIHx8IFwib2JqZWN0XCIgOlxuXHRcdFx0dHlwZW9mIG9iajtcblx0fSxcblxuXHQvLyBFdmFsdWF0ZXMgYSBzY3JpcHQgaW4gYSBnbG9iYWwgY29udGV4dFxuXHRnbG9iYWxFdmFsOiBmdW5jdGlvbiggY29kZSApIHtcblx0XHR2YXIgc2NyaXB0LFxuXHRcdFx0aW5kaXJlY3QgPSBldmFsO1xuXG5cdFx0Y29kZSA9IGpRdWVyeS50cmltKCBjb2RlICk7XG5cblx0XHRpZiAoIGNvZGUgKSB7XG5cdFx0XHQvLyBJZiB0aGUgY29kZSBpbmNsdWRlcyBhIHZhbGlkLCBwcm9sb2d1ZSBwb3NpdGlvblxuXHRcdFx0Ly8gc3RyaWN0IG1vZGUgcHJhZ21hLCBleGVjdXRlIGNvZGUgYnkgaW5qZWN0aW5nIGFcblx0XHRcdC8vIHNjcmlwdCB0YWcgaW50byB0aGUgZG9jdW1lbnQuXG5cdFx0XHRpZiAoIGNvZGUuaW5kZXhPZihcInVzZSBzdHJpY3RcIikgPT09IDEgKSB7XG5cdFx0XHRcdHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG5cdFx0XHRcdHNjcmlwdC50ZXh0ID0gY29kZTtcblx0XHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCggc2NyaXB0ICkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggc2NyaXB0ICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gT3RoZXJ3aXNlLCBhdm9pZCB0aGUgRE9NIG5vZGUgY3JlYXRpb24sIGluc2VydGlvblxuXHRcdFx0Ly8gYW5kIHJlbW92YWwgYnkgdXNpbmcgYW4gaW5kaXJlY3QgZ2xvYmFsIGV2YWxcblx0XHRcdFx0aW5kaXJlY3QoIGNvZGUgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0Ly8gQ29udmVydCBkYXNoZWQgdG8gY2FtZWxDYXNlOyB1c2VkIGJ5IHRoZSBjc3MgYW5kIGRhdGEgbW9kdWxlc1xuXHQvLyBTdXBwb3J0OiBJRTktMTErXG5cdC8vIE1pY3Jvc29mdCBmb3Jnb3QgdG8gaHVtcCB0aGVpciB2ZW5kb3IgcHJlZml4ICgjOTU3Milcblx0Y2FtZWxDYXNlOiBmdW5jdGlvbiggc3RyaW5nICkge1xuXHRcdHJldHVybiBzdHJpbmcucmVwbGFjZSggcm1zUHJlZml4LCBcIm1zLVwiICkucmVwbGFjZSggcmRhc2hBbHBoYSwgZmNhbWVsQ2FzZSApO1xuXHR9LFxuXG5cdG5vZGVOYW1lOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0XHRyZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKTtcblx0fSxcblxuXHQvLyBhcmdzIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdGVhY2g6IGZ1bmN0aW9uKCBvYmosIGNhbGxiYWNrLCBhcmdzICkge1xuXHRcdHZhciB2YWx1ZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bGVuZ3RoID0gb2JqLmxlbmd0aCxcblx0XHRcdGlzQXJyYXkgPSBpc0FycmF5bGlrZSggb2JqICk7XG5cblx0XHRpZiAoIGFyZ3MgKSB7XG5cdFx0XHRpZiAoIGlzQXJyYXkgKSB7XG5cdFx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRcdHZhbHVlID0gY2FsbGJhY2suYXBwbHkoIG9ialsgaSBdLCBhcmdzICk7XG5cblx0XHRcdFx0XHRpZiAoIHZhbHVlID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm9yICggaSBpbiBvYmogKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjay5hcHBseSggb2JqWyBpIF0sIGFyZ3MgKTtcblxuXHRcdFx0XHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBBIHNwZWNpYWwsIGZhc3QsIGNhc2UgZm9yIHRoZSBtb3N0IGNvbW1vbiB1c2Ugb2YgZWFjaFxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAoIGlzQXJyYXkgKSB7XG5cdFx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRcdHZhbHVlID0gY2FsbGJhY2suY2FsbCggb2JqWyBpIF0sIGksIG9ialsgaSBdICk7XG5cblx0XHRcdFx0XHRpZiAoIHZhbHVlID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm9yICggaSBpbiBvYmogKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKTtcblxuXHRcdFx0XHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG9iajtcblx0fSxcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMVxuXHR0cmltOiBmdW5jdGlvbiggdGV4dCApIHtcblx0XHRyZXR1cm4gdGV4dCA9PSBudWxsID9cblx0XHRcdFwiXCIgOlxuXHRcdFx0KCB0ZXh0ICsgXCJcIiApLnJlcGxhY2UoIHJ0cmltLCBcIlwiICk7XG5cdH0sXG5cblx0Ly8gcmVzdWx0cyBpcyBmb3IgaW50ZXJuYWwgdXNhZ2Ugb25seVxuXHRtYWtlQXJyYXk6IGZ1bmN0aW9uKCBhcnIsIHJlc3VsdHMgKSB7XG5cdFx0dmFyIHJldCA9IHJlc3VsdHMgfHwgW107XG5cblx0XHRpZiAoIGFyciAhPSBudWxsICkge1xuXHRcdFx0aWYgKCBpc0FycmF5bGlrZSggT2JqZWN0KGFycikgKSApIHtcblx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCByZXQsXG5cdFx0XHRcdFx0dHlwZW9mIGFyciA9PT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdFx0WyBhcnIgXSA6IGFyclxuXHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cHVzaC5jYWxsKCByZXQsIGFyciApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByZXQ7XG5cdH0sXG5cblx0aW5BcnJheTogZnVuY3Rpb24oIGVsZW0sIGFyciwgaSApIHtcblx0XHRyZXR1cm4gYXJyID09IG51bGwgPyAtMSA6IGluZGV4T2YuY2FsbCggYXJyLCBlbGVtLCBpICk7XG5cdH0sXG5cblx0bWVyZ2U6IGZ1bmN0aW9uKCBmaXJzdCwgc2Vjb25kICkge1xuXHRcdHZhciBsZW4gPSArc2Vjb25kLmxlbmd0aCxcblx0XHRcdGogPSAwLFxuXHRcdFx0aSA9IGZpcnN0Lmxlbmd0aDtcblxuXHRcdGZvciAoIDsgaiA8IGxlbjsgaisrICkge1xuXHRcdFx0Zmlyc3RbIGkrKyBdID0gc2Vjb25kWyBqIF07XG5cdFx0fVxuXG5cdFx0Zmlyc3QubGVuZ3RoID0gaTtcblxuXHRcdHJldHVybiBmaXJzdDtcblx0fSxcblxuXHRncmVwOiBmdW5jdGlvbiggZWxlbXMsIGNhbGxiYWNrLCBpbnZlcnQgKSB7XG5cdFx0dmFyIGNhbGxiYWNrSW52ZXJzZSxcblx0XHRcdG1hdGNoZXMgPSBbXSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bGVuZ3RoID0gZWxlbXMubGVuZ3RoLFxuXHRcdFx0Y2FsbGJhY2tFeHBlY3QgPSAhaW52ZXJ0O1xuXG5cdFx0Ly8gR28gdGhyb3VnaCB0aGUgYXJyYXksIG9ubHkgc2F2aW5nIHRoZSBpdGVtc1xuXHRcdC8vIHRoYXQgcGFzcyB0aGUgdmFsaWRhdG9yIGZ1bmN0aW9uXG5cdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRjYWxsYmFja0ludmVyc2UgPSAhY2FsbGJhY2soIGVsZW1zWyBpIF0sIGkgKTtcblx0XHRcdGlmICggY2FsbGJhY2tJbnZlcnNlICE9PSBjYWxsYmFja0V4cGVjdCApIHtcblx0XHRcdFx0bWF0Y2hlcy5wdXNoKCBlbGVtc1sgaSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1hdGNoZXM7XG5cdH0sXG5cblx0Ly8gYXJnIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdG1hcDogZnVuY3Rpb24oIGVsZW1zLCBjYWxsYmFjaywgYXJnICkge1xuXHRcdHZhciB2YWx1ZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bGVuZ3RoID0gZWxlbXMubGVuZ3RoLFxuXHRcdFx0aXNBcnJheSA9IGlzQXJyYXlsaWtlKCBlbGVtcyApLFxuXHRcdFx0cmV0ID0gW107XG5cblx0XHQvLyBHbyB0aHJvdWdoIHRoZSBhcnJheSwgdHJhbnNsYXRpbmcgZWFjaCBvZiB0aGUgaXRlbXMgdG8gdGhlaXIgbmV3IHZhbHVlc1xuXHRcdGlmICggaXNBcnJheSApIHtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTtcblxuXHRcdFx0XHRpZiAoIHZhbHVlICE9IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0LnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdC8vIEdvIHRocm91Z2ggZXZlcnkga2V5IG9uIHRoZSBvYmplY3QsXG5cdFx0fSBlbHNlIHtcblx0XHRcdGZvciAoIGkgaW4gZWxlbXMgKSB7XG5cdFx0XHRcdHZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApO1xuXG5cdFx0XHRcdGlmICggdmFsdWUgIT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXQucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEZsYXR0ZW4gYW55IG5lc3RlZCBhcnJheXNcblx0XHRyZXR1cm4gY29uY2F0LmFwcGx5KCBbXSwgcmV0ICk7XG5cdH0sXG5cblx0Ly8gQSBnbG9iYWwgR1VJRCBjb3VudGVyIGZvciBvYmplY3RzXG5cdGd1aWQ6IDEsXG5cblx0Ly8gQmluZCBhIGZ1bmN0aW9uIHRvIGEgY29udGV4dCwgb3B0aW9uYWxseSBwYXJ0aWFsbHkgYXBwbHlpbmcgYW55XG5cdC8vIGFyZ3VtZW50cy5cblx0cHJveHk6IGZ1bmN0aW9uKCBmbiwgY29udGV4dCApIHtcblx0XHR2YXIgdG1wLCBhcmdzLCBwcm94eTtcblxuXHRcdGlmICggdHlwZW9mIGNvbnRleHQgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHR0bXAgPSBmblsgY29udGV4dCBdO1xuXHRcdFx0Y29udGV4dCA9IGZuO1xuXHRcdFx0Zm4gPSB0bXA7XG5cdFx0fVxuXG5cdFx0Ly8gUXVpY2sgY2hlY2sgdG8gZGV0ZXJtaW5lIGlmIHRhcmdldCBpcyBjYWxsYWJsZSwgaW4gdGhlIHNwZWNcblx0XHQvLyB0aGlzIHRocm93cyBhIFR5cGVFcnJvciwgYnV0IHdlIHdpbGwganVzdCByZXR1cm4gdW5kZWZpbmVkLlxuXHRcdGlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCBmbiApICkge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHQvLyBTaW11bGF0ZWQgYmluZFxuXHRcdGFyZ3MgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMsIDIgKTtcblx0XHRwcm94eSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGZuLmFwcGx5KCBjb250ZXh0IHx8IHRoaXMsIGFyZ3MuY29uY2F0KCBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSApICk7XG5cdFx0fTtcblxuXHRcdC8vIFNldCB0aGUgZ3VpZCBvZiB1bmlxdWUgaGFuZGxlciB0byB0aGUgc2FtZSBvZiBvcmlnaW5hbCBoYW5kbGVyLCBzbyBpdCBjYW4gYmUgcmVtb3ZlZFxuXHRcdHByb3h5Lmd1aWQgPSBmbi5ndWlkID0gZm4uZ3VpZCB8fCBqUXVlcnkuZ3VpZCsrO1xuXG5cdFx0cmV0dXJuIHByb3h5O1xuXHR9LFxuXG5cdG5vdzogRGF0ZS5ub3csXG5cblx0Ly8galF1ZXJ5LnN1cHBvcnQgaXMgbm90IHVzZWQgaW4gQ29yZSBidXQgb3RoZXIgcHJvamVjdHMgYXR0YWNoIHRoZWlyXG5cdC8vIHByb3BlcnRpZXMgdG8gaXQgc28gaXQgbmVlZHMgdG8gZXhpc3QuXG5cdHN1cHBvcnQ6IHN1cHBvcnRcbn0pO1xuXG4vLyBQb3B1bGF0ZSB0aGUgY2xhc3MydHlwZSBtYXBcbmpRdWVyeS5lYWNoKFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvclwiLnNwbGl0KFwiIFwiKSwgZnVuY3Rpb24oaSwgbmFtZSkge1xuXHRjbGFzczJ0eXBlWyBcIltvYmplY3QgXCIgKyBuYW1lICsgXCJdXCIgXSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcbn0pO1xuXG5mdW5jdGlvbiBpc0FycmF5bGlrZSggb2JqICkge1xuXHR2YXIgbGVuZ3RoID0gb2JqLmxlbmd0aCxcblx0XHR0eXBlID0galF1ZXJ5LnR5cGUoIG9iaiApO1xuXG5cdGlmICggdHlwZSA9PT0gXCJmdW5jdGlvblwiIHx8IGpRdWVyeS5pc1dpbmRvdyggb2JqICkgKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0aWYgKCBvYmoubm9kZVR5cGUgPT09IDEgJiYgbGVuZ3RoICkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0cmV0dXJuIHR5cGUgPT09IFwiYXJyYXlcIiB8fCBsZW5ndGggPT09IDAgfHxcblx0XHR0eXBlb2YgbGVuZ3RoID09PSBcIm51bWJlclwiICYmIGxlbmd0aCA+IDAgJiYgKCBsZW5ndGggLSAxICkgaW4gb2JqO1xufVxudmFyIFNpenpsZSA9XG4vKiFcbiAqIFNpenpsZSBDU1MgU2VsZWN0b3IgRW5naW5lIHYyLjIuMC1wcmVcbiAqIGh0dHA6Ly9zaXp6bGVqcy5jb20vXG4gKlxuICogQ29weXJpZ2h0IDIwMDgsIDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogRGF0ZTogMjAxNC0xMi0xNlxuICovXG4oZnVuY3Rpb24oIHdpbmRvdyApIHtcblxudmFyIGksXG5cdHN1cHBvcnQsXG5cdEV4cHIsXG5cdGdldFRleHQsXG5cdGlzWE1MLFxuXHR0b2tlbml6ZSxcblx0Y29tcGlsZSxcblx0c2VsZWN0LFxuXHRvdXRlcm1vc3RDb250ZXh0LFxuXHRzb3J0SW5wdXQsXG5cdGhhc0R1cGxpY2F0ZSxcblxuXHQvLyBMb2NhbCBkb2N1bWVudCB2YXJzXG5cdHNldERvY3VtZW50LFxuXHRkb2N1bWVudCxcblx0ZG9jRWxlbSxcblx0ZG9jdW1lbnRJc0hUTUwsXG5cdHJidWdneVFTQSxcblx0cmJ1Z2d5TWF0Y2hlcyxcblx0bWF0Y2hlcyxcblx0Y29udGFpbnMsXG5cblx0Ly8gSW5zdGFuY2Utc3BlY2lmaWMgZGF0YVxuXHRleHBhbmRvID0gXCJzaXp6bGVcIiArIDEgKiBuZXcgRGF0ZSgpLFxuXHRwcmVmZXJyZWREb2MgPSB3aW5kb3cuZG9jdW1lbnQsXG5cdGRpcnJ1bnMgPSAwLFxuXHRkb25lID0gMCxcblx0Y2xhc3NDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdHRva2VuQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHRjb21waWxlckNhY2hlID0gY3JlYXRlQ2FjaGUoKSxcblx0c29ydE9yZGVyID0gZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIDA7XG5cdH0sXG5cblx0Ly8gR2VuZXJhbC1wdXJwb3NlIGNvbnN0YW50c1xuXHRNQVhfTkVHQVRJVkUgPSAxIDw8IDMxLFxuXG5cdC8vIEluc3RhbmNlIG1ldGhvZHNcblx0aGFzT3duID0gKHt9KS5oYXNPd25Qcm9wZXJ0eSxcblx0YXJyID0gW10sXG5cdHBvcCA9IGFyci5wb3AsXG5cdHB1c2hfbmF0aXZlID0gYXJyLnB1c2gsXG5cdHB1c2ggPSBhcnIucHVzaCxcblx0c2xpY2UgPSBhcnIuc2xpY2UsXG5cdC8vIFVzZSBhIHN0cmlwcGVkLWRvd24gaW5kZXhPZiBhcyBpdCdzIGZhc3RlciB0aGFuIG5hdGl2ZVxuXHQvLyBodHRwOi8vanNwZXJmLmNvbS90aG9yLWluZGV4b2YtdnMtZm9yLzVcblx0aW5kZXhPZiA9IGZ1bmN0aW9uKCBsaXN0LCBlbGVtICkge1xuXHRcdHZhciBpID0gMCxcblx0XHRcdGxlbiA9IGxpc3QubGVuZ3RoO1xuXHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0aWYgKCBsaXN0W2ldID09PSBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gaTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIC0xO1xuXHR9LFxuXG5cdGJvb2xlYW5zID0gXCJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZFwiLFxuXG5cdC8vIFJlZ3VsYXIgZXhwcmVzc2lvbnNcblxuXHQvLyBXaGl0ZXNwYWNlIGNoYXJhY3RlcnMgaHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy1zZWxlY3RvcnMvI3doaXRlc3BhY2Vcblx0d2hpdGVzcGFjZSA9IFwiW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl1cIixcblx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy1zeW50YXgvI2NoYXJhY3RlcnNcblx0Y2hhcmFjdGVyRW5jb2RpbmcgPSBcIig/OlxcXFxcXFxcLnxbXFxcXHctXXxbXlxcXFx4MDAtXFxcXHhhMF0pK1wiLFxuXG5cdC8vIExvb3NlbHkgbW9kZWxlZCBvbiBDU1MgaWRlbnRpZmllciBjaGFyYWN0ZXJzXG5cdC8vIEFuIHVucXVvdGVkIHZhbHVlIHNob3VsZCBiZSBhIENTUyBpZGVudGlmaWVyIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc2VsZWN0b3JzLyNhdHRyaWJ1dGUtc2VsZWN0b3JzXG5cdC8vIFByb3BlciBzeW50YXg6IGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCN2YWx1ZS1kZWYtaWRlbnRpZmllclxuXHRpZGVudGlmaWVyID0gY2hhcmFjdGVyRW5jb2RpbmcucmVwbGFjZSggXCJ3XCIsIFwidyNcIiApLFxuXG5cdC8vIEF0dHJpYnV0ZSBzZWxlY3RvcnM6IGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jYXR0cmlidXRlLXNlbGVjdG9yc1xuXHRhdHRyaWJ1dGVzID0gXCJcXFxcW1wiICsgd2hpdGVzcGFjZSArIFwiKihcIiArIGNoYXJhY3RlckVuY29kaW5nICsgXCIpKD86XCIgKyB3aGl0ZXNwYWNlICtcblx0XHQvLyBPcGVyYXRvciAoY2FwdHVyZSAyKVxuXHRcdFwiKihbKl4kfCF+XT89KVwiICsgd2hpdGVzcGFjZSArXG5cdFx0Ly8gXCJBdHRyaWJ1dGUgdmFsdWVzIG11c3QgYmUgQ1NTIGlkZW50aWZpZXJzIFtjYXB0dXJlIDVdIG9yIHN0cmluZ3MgW2NhcHR1cmUgMyBvciBjYXB0dXJlIDRdXCJcblx0XHRcIiooPzonKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCJ8KFwiICsgaWRlbnRpZmllciArIFwiKSl8KVwiICsgd2hpdGVzcGFjZSArXG5cdFx0XCIqXFxcXF1cIixcblxuXHRwc2V1ZG9zID0gXCI6KFwiICsgY2hhcmFjdGVyRW5jb2RpbmcgKyBcIikoPzpcXFxcKChcIiArXG5cdFx0Ly8gVG8gcmVkdWNlIHRoZSBudW1iZXIgb2Ygc2VsZWN0b3JzIG5lZWRpbmcgdG9rZW5pemUgaW4gdGhlIHByZUZpbHRlciwgcHJlZmVyIGFyZ3VtZW50czpcblx0XHQvLyAxLiBxdW90ZWQgKGNhcHR1cmUgMzsgY2FwdHVyZSA0IG9yIGNhcHR1cmUgNSlcblx0XHRcIignKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCIpfFwiICtcblx0XHQvLyAyLiBzaW1wbGUgKGNhcHR1cmUgNilcblx0XHRcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpW1xcXFxdXXxcIiArIGF0dHJpYnV0ZXMgKyBcIikqKXxcIiArXG5cdFx0Ly8gMy4gYW55dGhpbmcgZWxzZSAoY2FwdHVyZSAyKVxuXHRcdFwiLipcIiArXG5cdFx0XCIpXFxcXCl8KVwiLFxuXG5cdC8vIExlYWRpbmcgYW5kIG5vbi1lc2NhcGVkIHRyYWlsaW5nIHdoaXRlc3BhY2UsIGNhcHR1cmluZyBzb21lIG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlcnMgcHJlY2VkaW5nIHRoZSBsYXR0ZXJcblx0cndoaXRlc3BhY2UgPSBuZXcgUmVnRXhwKCB3aGl0ZXNwYWNlICsgXCIrXCIsIFwiZ1wiICksXG5cdHJ0cmltID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIrfCgoPzpefFteXFxcXFxcXFxdKSg/OlxcXFxcXFxcLikqKVwiICsgd2hpdGVzcGFjZSArIFwiKyRcIiwgXCJnXCIgKSxcblxuXHRyY29tbWEgPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIiosXCIgKyB3aGl0ZXNwYWNlICsgXCIqXCIgKSxcblx0cmNvbWJpbmF0b3JzID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqKFs+K35dfFwiICsgd2hpdGVzcGFjZSArIFwiKVwiICsgd2hpdGVzcGFjZSArIFwiKlwiICksXG5cblx0cmF0dHJpYnV0ZVF1b3RlcyA9IG5ldyBSZWdFeHAoIFwiPVwiICsgd2hpdGVzcGFjZSArIFwiKihbXlxcXFxdJ1xcXCJdKj8pXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXF1cIiwgXCJnXCIgKSxcblxuXHRycHNldWRvID0gbmV3IFJlZ0V4cCggcHNldWRvcyApLFxuXHRyaWRlbnRpZmllciA9IG5ldyBSZWdFeHAoIFwiXlwiICsgaWRlbnRpZmllciArIFwiJFwiICksXG5cblx0bWF0Y2hFeHByID0ge1xuXHRcdFwiSURcIjogbmV3IFJlZ0V4cCggXCJeIyhcIiArIGNoYXJhY3RlckVuY29kaW5nICsgXCIpXCIgKSxcblx0XHRcIkNMQVNTXCI6IG5ldyBSZWdFeHAoIFwiXlxcXFwuKFwiICsgY2hhcmFjdGVyRW5jb2RpbmcgKyBcIilcIiApLFxuXHRcdFwiVEFHXCI6IG5ldyBSZWdFeHAoIFwiXihcIiArIGNoYXJhY3RlckVuY29kaW5nLnJlcGxhY2UoIFwid1wiLCBcIncqXCIgKSArIFwiKVwiICksXG5cdFx0XCJBVFRSXCI6IG5ldyBSZWdFeHAoIFwiXlwiICsgYXR0cmlidXRlcyApLFxuXHRcdFwiUFNFVURPXCI6IG5ldyBSZWdFeHAoIFwiXlwiICsgcHNldWRvcyApLFxuXHRcdFwiQ0hJTERcIjogbmV3IFJlZ0V4cCggXCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXFxcKFwiICsgd2hpdGVzcGFjZSArXG5cdFx0XHRcIiooZXZlbnxvZGR8KChbKy1dfCkoXFxcXGQqKW58KVwiICsgd2hpdGVzcGFjZSArIFwiKig/OihbKy1dfClcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFx0XCIqKFxcXFxkKyl8KSlcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcKXwpXCIsIFwiaVwiICksXG5cdFx0XCJib29sXCI6IG5ldyBSZWdFeHAoIFwiXig/OlwiICsgYm9vbGVhbnMgKyBcIikkXCIsIFwiaVwiICksXG5cdFx0Ly8gRm9yIHVzZSBpbiBsaWJyYXJpZXMgaW1wbGVtZW50aW5nIC5pcygpXG5cdFx0Ly8gV2UgdXNlIHRoaXMgZm9yIFBPUyBtYXRjaGluZyBpbiBgc2VsZWN0YFxuXHRcdFwibmVlZHNDb250ZXh0XCI6IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFxcXChcIiArXG5cdFx0XHR3aGl0ZXNwYWNlICsgXCIqKCg/Oi1cXFxcZCk/XFxcXGQqKVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFwpfCkoPz1bXi1dfCQpXCIsIFwiaVwiIClcblx0fSxcblxuXHRyaW5wdXRzID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxcblx0cmhlYWRlciA9IC9eaFxcZCQvaSxcblxuXHRybmF0aXZlID0gL15bXntdK1xce1xccypcXFtuYXRpdmUgXFx3LyxcblxuXHQvLyBFYXNpbHktcGFyc2VhYmxlL3JldHJpZXZhYmxlIElEIG9yIFRBRyBvciBDTEFTUyBzZWxlY3RvcnNcblx0cnF1aWNrRXhwciA9IC9eKD86IyhbXFx3LV0rKXwoXFx3Kyl8XFwuKFtcXHctXSspKSQvLFxuXG5cdHJzaWJsaW5nID0gL1srfl0vLFxuXHRyZXNjYXBlID0gLyd8XFxcXC9nLFxuXG5cdC8vIENTUyBlc2NhcGVzIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCNlc2NhcGVkLWNoYXJhY3RlcnNcblx0cnVuZXNjYXBlID0gbmV3IFJlZ0V4cCggXCJcXFxcXFxcXChbXFxcXGRhLWZdezEsNn1cIiArIHdoaXRlc3BhY2UgKyBcIj98KFwiICsgd2hpdGVzcGFjZSArIFwiKXwuKVwiLCBcImlnXCIgKSxcblx0ZnVuZXNjYXBlID0gZnVuY3Rpb24oIF8sIGVzY2FwZWQsIGVzY2FwZWRXaGl0ZXNwYWNlICkge1xuXHRcdHZhciBoaWdoID0gXCIweFwiICsgZXNjYXBlZCAtIDB4MTAwMDA7XG5cdFx0Ly8gTmFOIG1lYW5zIG5vbi1jb2RlcG9pbnRcblx0XHQvLyBTdXBwb3J0OiBGaXJlZm94PDI0XG5cdFx0Ly8gV29ya2Fyb3VuZCBlcnJvbmVvdXMgbnVtZXJpYyBpbnRlcnByZXRhdGlvbiBvZiArXCIweFwiXG5cdFx0cmV0dXJuIGhpZ2ggIT09IGhpZ2ggfHwgZXNjYXBlZFdoaXRlc3BhY2UgP1xuXHRcdFx0ZXNjYXBlZCA6XG5cdFx0XHRoaWdoIDwgMCA/XG5cdFx0XHRcdC8vIEJNUCBjb2RlcG9pbnRcblx0XHRcdFx0U3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCArIDB4MTAwMDAgKSA6XG5cdFx0XHRcdC8vIFN1cHBsZW1lbnRhbCBQbGFuZSBjb2RlcG9pbnQgKHN1cnJvZ2F0ZSBwYWlyKVxuXHRcdFx0XHRTdHJpbmcuZnJvbUNoYXJDb2RlKCBoaWdoID4+IDEwIHwgMHhEODAwLCBoaWdoICYgMHgzRkYgfCAweERDMDAgKTtcblx0fSxcblxuXHQvLyBVc2VkIGZvciBpZnJhbWVzXG5cdC8vIFNlZSBzZXREb2N1bWVudCgpXG5cdC8vIFJlbW92aW5nIHRoZSBmdW5jdGlvbiB3cmFwcGVyIGNhdXNlcyBhIFwiUGVybWlzc2lvbiBEZW5pZWRcIlxuXHQvLyBlcnJvciBpbiBJRVxuXHR1bmxvYWRIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0c2V0RG9jdW1lbnQoKTtcblx0fTtcblxuLy8gT3B0aW1pemUgZm9yIHB1c2guYXBwbHkoIF8sIE5vZGVMaXN0IClcbnRyeSB7XG5cdHB1c2guYXBwbHkoXG5cdFx0KGFyciA9IHNsaWNlLmNhbGwoIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzICkpLFxuXHRcdHByZWZlcnJlZERvYy5jaGlsZE5vZGVzXG5cdCk7XG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4wXG5cdC8vIERldGVjdCBzaWxlbnRseSBmYWlsaW5nIHB1c2guYXBwbHlcblx0YXJyWyBwcmVmZXJyZWREb2MuY2hpbGROb2Rlcy5sZW5ndGggXS5ub2RlVHlwZTtcbn0gY2F0Y2ggKCBlICkge1xuXHRwdXNoID0geyBhcHBseTogYXJyLmxlbmd0aCA/XG5cblx0XHQvLyBMZXZlcmFnZSBzbGljZSBpZiBwb3NzaWJsZVxuXHRcdGZ1bmN0aW9uKCB0YXJnZXQsIGVscyApIHtcblx0XHRcdHB1c2hfbmF0aXZlLmFwcGx5KCB0YXJnZXQsIHNsaWNlLmNhbGwoZWxzKSApO1xuXHRcdH0gOlxuXG5cdFx0Ly8gU3VwcG9ydDogSUU8OVxuXHRcdC8vIE90aGVyd2lzZSBhcHBlbmQgZGlyZWN0bHlcblx0XHRmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7XG5cdFx0XHR2YXIgaiA9IHRhcmdldC5sZW5ndGgsXG5cdFx0XHRcdGkgPSAwO1xuXHRcdFx0Ly8gQ2FuJ3QgdHJ1c3QgTm9kZUxpc3QubGVuZ3RoXG5cdFx0XHR3aGlsZSAoICh0YXJnZXRbaisrXSA9IGVsc1tpKytdKSApIHt9XG5cdFx0XHR0YXJnZXQubGVuZ3RoID0gaiAtIDE7XG5cdFx0fVxuXHR9O1xufVxuXG5mdW5jdGlvbiBTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICkge1xuXHR2YXIgbWF0Y2gsIGVsZW0sIG0sIG5vZGVUeXBlLFxuXHRcdC8vIFFTQSB2YXJzXG5cdFx0aSwgZ3JvdXBzLCBvbGQsIG5pZCwgbmV3Q29udGV4dCwgbmV3U2VsZWN0b3I7XG5cblx0aWYgKCAoIGNvbnRleHQgPyBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCA6IHByZWZlcnJlZERvYyApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggY29udGV4dCApO1xuXHR9XG5cblx0Y29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7XG5cdHJlc3VsdHMgPSByZXN1bHRzIHx8IFtdO1xuXHRub2RlVHlwZSA9IGNvbnRleHQubm9kZVR5cGU7XG5cblx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgfHwgIXNlbGVjdG9yIHx8XG5cdFx0bm9kZVR5cGUgIT09IDEgJiYgbm9kZVR5cGUgIT09IDkgJiYgbm9kZVR5cGUgIT09IDExICkge1xuXG5cdFx0cmV0dXJuIHJlc3VsdHM7XG5cdH1cblxuXHRpZiAoICFzZWVkICYmIGRvY3VtZW50SXNIVE1MICkge1xuXG5cdFx0Ly8gVHJ5IHRvIHNob3J0Y3V0IGZpbmQgb3BlcmF0aW9ucyB3aGVuIHBvc3NpYmxlIChlLmcuLCBub3QgdW5kZXIgRG9jdW1lbnRGcmFnbWVudClcblx0XHRpZiAoIG5vZGVUeXBlICE9PSAxMSAmJiAobWF0Y2ggPSBycXVpY2tFeHByLmV4ZWMoIHNlbGVjdG9yICkpICkge1xuXHRcdFx0Ly8gU3BlZWQtdXA6IFNpenpsZShcIiNJRFwiKVxuXHRcdFx0aWYgKCAobSA9IG1hdGNoWzFdKSApIHtcblx0XHRcdFx0aWYgKCBub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0XHRlbGVtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggbSApO1xuXHRcdFx0XHRcdC8vIENoZWNrIHBhcmVudE5vZGUgdG8gY2F0Y2ggd2hlbiBCbGFja2JlcnJ5IDQuNiByZXR1cm5zXG5cdFx0XHRcdFx0Ly8gbm9kZXMgdGhhdCBhcmUgbm8gbG9uZ2VyIGluIHRoZSBkb2N1bWVudCAoalF1ZXJ5ICM2OTYzKVxuXHRcdFx0XHRcdGlmICggZWxlbSAmJiBlbGVtLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdFx0XHQvLyBIYW5kbGUgdGhlIGNhc2Ugd2hlcmUgSUUsIE9wZXJhLCBhbmQgV2Via2l0IHJldHVybiBpdGVtc1xuXHRcdFx0XHRcdFx0Ly8gYnkgbmFtZSBpbnN0ZWFkIG9mIElEXG5cdFx0XHRcdFx0XHRpZiAoIGVsZW0uaWQgPT09IG0gKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3VsdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIENvbnRleHQgaXMgbm90IGEgZG9jdW1lbnRcblx0XHRcdFx0XHRpZiAoIGNvbnRleHQub3duZXJEb2N1bWVudCAmJiAoZWxlbSA9IGNvbnRleHQub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZCggbSApKSAmJlxuXHRcdFx0XHRcdFx0Y29udGFpbnMoIGNvbnRleHQsIGVsZW0gKSAmJiBlbGVtLmlkID09PSBtICkge1xuXHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0Ly8gU3BlZWQtdXA6IFNpenpsZShcIlRBR1wiKVxuXHRcdFx0fSBlbHNlIGlmICggbWF0Y2hbMl0gKSB7XG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHNlbGVjdG9yICkgKTtcblx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cblx0XHRcdC8vIFNwZWVkLXVwOiBTaXp6bGUoXCIuQ0xBU1NcIilcblx0XHRcdH0gZWxzZSBpZiAoIChtID0gbWF0Y2hbM10pICYmIHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApIHtcblx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCBtICkgKTtcblx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUVNBIHBhdGhcblx0XHRpZiAoIHN1cHBvcnQucXNhICYmICghcmJ1Z2d5UVNBIHx8ICFyYnVnZ3lRU0EudGVzdCggc2VsZWN0b3IgKSkgKSB7XG5cdFx0XHRuaWQgPSBvbGQgPSBleHBhbmRvO1xuXHRcdFx0bmV3Q29udGV4dCA9IGNvbnRleHQ7XG5cdFx0XHRuZXdTZWxlY3RvciA9IG5vZGVUeXBlICE9PSAxICYmIHNlbGVjdG9yO1xuXG5cdFx0XHQvLyBxU0Egd29ya3Mgc3RyYW5nZWx5IG9uIEVsZW1lbnQtcm9vdGVkIHF1ZXJpZXNcblx0XHRcdC8vIFdlIGNhbiB3b3JrIGFyb3VuZCB0aGlzIGJ5IHNwZWNpZnlpbmcgYW4gZXh0cmEgSUQgb24gdGhlIHJvb3Rcblx0XHRcdC8vIGFuZCB3b3JraW5nIHVwIGZyb20gdGhlcmUgKFRoYW5rcyB0byBBbmRyZXcgRHVwb250IGZvciB0aGUgdGVjaG5pcXVlKVxuXHRcdFx0Ly8gSUUgOCBkb2Vzbid0IHdvcmsgb24gb2JqZWN0IGVsZW1lbnRzXG5cdFx0XHRpZiAoIG5vZGVUeXBlID09PSAxICYmIGNvbnRleHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJvYmplY3RcIiApIHtcblx0XHRcdFx0Z3JvdXBzID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cblx0XHRcdFx0aWYgKCAob2xkID0gY29udGV4dC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSkgKSB7XG5cdFx0XHRcdFx0bmlkID0gb2xkLnJlcGxhY2UoIHJlc2NhcGUsIFwiXFxcXCQmXCIgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb250ZXh0LnNldEF0dHJpYnV0ZSggXCJpZFwiLCBuaWQgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRuaWQgPSBcIltpZD0nXCIgKyBuaWQgKyBcIiddIFwiO1xuXG5cdFx0XHRcdGkgPSBncm91cHMubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRncm91cHNbaV0gPSBuaWQgKyB0b1NlbGVjdG9yKCBncm91cHNbaV0gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRuZXdDb250ZXh0ID0gcnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dDtcblx0XHRcdFx0bmV3U2VsZWN0b3IgPSBncm91cHMuam9pbihcIixcIik7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggbmV3U2VsZWN0b3IgKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cyxcblx0XHRcdFx0XHRcdG5ld0NvbnRleHQucXVlcnlTZWxlY3RvckFsbCggbmV3U2VsZWN0b3IgKVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdH0gY2F0Y2gocXNhRXJyb3IpIHtcblx0XHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0XHRpZiAoICFvbGQgKSB7XG5cdFx0XHRcdFx0XHRjb250ZXh0LnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIEFsbCBvdGhlcnNcblx0cmV0dXJuIHNlbGVjdCggc2VsZWN0b3IucmVwbGFjZSggcnRyaW0sIFwiJDFcIiApLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGtleS12YWx1ZSBjYWNoZXMgb2YgbGltaXRlZCBzaXplXG4gKiBAcmV0dXJucyB7RnVuY3Rpb24oc3RyaW5nLCBPYmplY3QpfSBSZXR1cm5zIHRoZSBPYmplY3QgZGF0YSBhZnRlciBzdG9yaW5nIGl0IG9uIGl0c2VsZiB3aXRoXG4gKlx0cHJvcGVydHkgbmFtZSB0aGUgKHNwYWNlLXN1ZmZpeGVkKSBzdHJpbmcgYW5kIChpZiB0aGUgY2FjaGUgaXMgbGFyZ2VyIHRoYW4gRXhwci5jYWNoZUxlbmd0aClcbiAqXHRkZWxldGluZyB0aGUgb2xkZXN0IGVudHJ5XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUNhY2hlKCkge1xuXHR2YXIga2V5cyA9IFtdO1xuXG5cdGZ1bmN0aW9uIGNhY2hlKCBrZXksIHZhbHVlICkge1xuXHRcdC8vIFVzZSAoa2V5ICsgXCIgXCIpIHRvIGF2b2lkIGNvbGxpc2lvbiB3aXRoIG5hdGl2ZSBwcm90b3R5cGUgcHJvcGVydGllcyAoc2VlIElzc3VlICMxNTcpXG5cdFx0aWYgKCBrZXlzLnB1c2goIGtleSArIFwiIFwiICkgPiBFeHByLmNhY2hlTGVuZ3RoICkge1xuXHRcdFx0Ly8gT25seSBrZWVwIHRoZSBtb3N0IHJlY2VudCBlbnRyaWVzXG5cdFx0XHRkZWxldGUgY2FjaGVbIGtleXMuc2hpZnQoKSBdO1xuXHRcdH1cblx0XHRyZXR1cm4gKGNhY2hlWyBrZXkgKyBcIiBcIiBdID0gdmFsdWUpO1xuXHR9XG5cdHJldHVybiBjYWNoZTtcbn1cblxuLyoqXG4gKiBNYXJrIGEgZnVuY3Rpb24gZm9yIHNwZWNpYWwgdXNlIGJ5IFNpenpsZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIG1hcmtcbiAqL1xuZnVuY3Rpb24gbWFya0Z1bmN0aW9uKCBmbiApIHtcblx0Zm5bIGV4cGFuZG8gXSA9IHRydWU7XG5cdHJldHVybiBmbjtcbn1cblxuLyoqXG4gKiBTdXBwb3J0IHRlc3RpbmcgdXNpbmcgYW4gZWxlbWVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gUGFzc2VkIHRoZSBjcmVhdGVkIGRpdiBhbmQgZXhwZWN0cyBhIGJvb2xlYW4gcmVzdWx0XG4gKi9cbmZ1bmN0aW9uIGFzc2VydCggZm4gKSB7XG5cdHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG5cdHRyeSB7XG5cdFx0cmV0dXJuICEhZm4oIGRpdiApO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9IGZpbmFsbHkge1xuXHRcdC8vIFJlbW92ZSBmcm9tIGl0cyBwYXJlbnQgYnkgZGVmYXVsdFxuXHRcdGlmICggZGl2LnBhcmVudE5vZGUgKSB7XG5cdFx0XHRkaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggZGl2ICk7XG5cdFx0fVxuXHRcdC8vIHJlbGVhc2UgbWVtb3J5IGluIElFXG5cdFx0ZGl2ID0gbnVsbDtcblx0fVxufVxuXG4vKipcbiAqIEFkZHMgdGhlIHNhbWUgaGFuZGxlciBmb3IgYWxsIG9mIHRoZSBzcGVjaWZpZWQgYXR0cnNcbiAqIEBwYXJhbSB7U3RyaW5nfSBhdHRycyBQaXBlLXNlcGFyYXRlZCBsaXN0IG9mIGF0dHJpYnV0ZXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIgVGhlIG1ldGhvZCB0aGF0IHdpbGwgYmUgYXBwbGllZFxuICovXG5mdW5jdGlvbiBhZGRIYW5kbGUoIGF0dHJzLCBoYW5kbGVyICkge1xuXHR2YXIgYXJyID0gYXR0cnMuc3BsaXQoXCJ8XCIpLFxuXHRcdGkgPSBhdHRycy5sZW5ndGg7XG5cblx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0RXhwci5hdHRySGFuZGxlWyBhcnJbaV0gXSA9IGhhbmRsZXI7XG5cdH1cbn1cblxuLyoqXG4gKiBDaGVja3MgZG9jdW1lbnQgb3JkZXIgb2YgdHdvIHNpYmxpbmdzXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGFcbiAqIEBwYXJhbSB7RWxlbWVudH0gYlxuICogQHJldHVybnMge051bWJlcn0gUmV0dXJucyBsZXNzIHRoYW4gMCBpZiBhIHByZWNlZGVzIGIsIGdyZWF0ZXIgdGhhbiAwIGlmIGEgZm9sbG93cyBiXG4gKi9cbmZ1bmN0aW9uIHNpYmxpbmdDaGVjayggYSwgYiApIHtcblx0dmFyIGN1ciA9IGIgJiYgYSxcblx0XHRkaWZmID0gY3VyICYmIGEubm9kZVR5cGUgPT09IDEgJiYgYi5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0KCB+Yi5zb3VyY2VJbmRleCB8fCBNQVhfTkVHQVRJVkUgKSAtXG5cdFx0XHQoIH5hLnNvdXJjZUluZGV4IHx8IE1BWF9ORUdBVElWRSApO1xuXG5cdC8vIFVzZSBJRSBzb3VyY2VJbmRleCBpZiBhdmFpbGFibGUgb24gYm90aCBub2Rlc1xuXHRpZiAoIGRpZmYgKSB7XG5cdFx0cmV0dXJuIGRpZmY7XG5cdH1cblxuXHQvLyBDaGVjayBpZiBiIGZvbGxvd3MgYVxuXHRpZiAoIGN1ciApIHtcblx0XHR3aGlsZSAoIChjdXIgPSBjdXIubmV4dFNpYmxpbmcpICkge1xuXHRcdFx0aWYgKCBjdXIgPT09IGIgKSB7XG5cdFx0XHRcdHJldHVybiAtMTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gYSA/IDEgOiAtMTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIGlucHV0IHR5cGVzXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5mdW5jdGlvbiBjcmVhdGVJbnB1dFBzZXVkbyggdHlwZSApIHtcblx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdHJldHVybiBuYW1lID09PSBcImlucHV0XCIgJiYgZWxlbS50eXBlID09PSB0eXBlO1xuXHR9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgYnV0dG9uc1xuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQnV0dG9uUHNldWRvKCB0eXBlICkge1xuXHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0cmV0dXJuIChuYW1lID09PSBcImlucHV0XCIgfHwgbmFtZSA9PT0gXCJidXR0b25cIikgJiYgZWxlbS50eXBlID09PSB0eXBlO1xuXHR9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgcG9zaXRpb25hbHNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oIGZuICkge1xuXHRyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBhcmd1bWVudCApIHtcblx0XHRhcmd1bWVudCA9ICthcmd1bWVudDtcblx0XHRyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkge1xuXHRcdFx0dmFyIGosXG5cdFx0XHRcdG1hdGNoSW5kZXhlcyA9IGZuKCBbXSwgc2VlZC5sZW5ndGgsIGFyZ3VtZW50ICksXG5cdFx0XHRcdGkgPSBtYXRjaEluZGV4ZXMubGVuZ3RoO1xuXG5cdFx0XHQvLyBNYXRjaCBlbGVtZW50cyBmb3VuZCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4ZXNcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRpZiAoIHNlZWRbIChqID0gbWF0Y2hJbmRleGVzW2ldKSBdICkge1xuXHRcdFx0XHRcdHNlZWRbal0gPSAhKG1hdGNoZXNbal0gPSBzZWVkW2pdKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgYSBub2RlIGZvciB2YWxpZGl0eSBhcyBhIFNpenpsZSBjb250ZXh0XG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0PX0gY29udGV4dFxuICogQHJldHVybnMge0VsZW1lbnR8T2JqZWN0fEJvb2xlYW59IFRoZSBpbnB1dCBub2RlIGlmIGFjY2VwdGFibGUsIG90aGVyd2lzZSBhIGZhbHN5IHZhbHVlXG4gKi9cbmZ1bmN0aW9uIHRlc3RDb250ZXh0KCBjb250ZXh0ICkge1xuXHRyZXR1cm4gY29udGV4dCAmJiB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb250ZXh0O1xufVxuXG4vLyBFeHBvc2Ugc3VwcG9ydCB2YXJzIGZvciBjb252ZW5pZW5jZVxuc3VwcG9ydCA9IFNpenpsZS5zdXBwb3J0ID0ge307XG5cbi8qKlxuICogRGV0ZWN0cyBYTUwgbm9kZXNcbiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsZW0gQW4gZWxlbWVudCBvciBhIGRvY3VtZW50XG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZmYgZWxlbSBpcyBhIG5vbi1IVE1MIFhNTCBub2RlXG4gKi9cbmlzWE1MID0gU2l6emxlLmlzWE1MID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdC8vIGRvY3VtZW50RWxlbWVudCBpcyB2ZXJpZmllZCBmb3IgY2FzZXMgd2hlcmUgaXQgZG9lc24ndCB5ZXQgZXhpc3Rcblx0Ly8gKHN1Y2ggYXMgbG9hZGluZyBpZnJhbWVzIGluIElFIC0gIzQ4MzMpXG5cdHZhciBkb2N1bWVudEVsZW1lbnQgPSBlbGVtICYmIChlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSkuZG9jdW1lbnRFbGVtZW50O1xuXHRyZXR1cm4gZG9jdW1lbnRFbGVtZW50ID8gZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lICE9PSBcIkhUTUxcIiA6IGZhbHNlO1xufTtcblxuLyoqXG4gKiBTZXRzIGRvY3VtZW50LXJlbGF0ZWQgdmFyaWFibGVzIG9uY2UgYmFzZWQgb24gdGhlIGN1cnJlbnQgZG9jdW1lbnRcbiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IFtkb2NdIEFuIGVsZW1lbnQgb3IgZG9jdW1lbnQgb2JqZWN0IHRvIHVzZSB0byBzZXQgdGhlIGRvY3VtZW50XG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjdXJyZW50IGRvY3VtZW50XG4gKi9cbnNldERvY3VtZW50ID0gU2l6emxlLnNldERvY3VtZW50ID0gZnVuY3Rpb24oIG5vZGUgKSB7XG5cdHZhciBoYXNDb21wYXJlLCBwYXJlbnQsXG5cdFx0ZG9jID0gbm9kZSA/IG5vZGUub3duZXJEb2N1bWVudCB8fCBub2RlIDogcHJlZmVycmVkRG9jO1xuXG5cdC8vIElmIG5vIGRvY3VtZW50IGFuZCBkb2N1bWVudEVsZW1lbnQgaXMgYXZhaWxhYmxlLCByZXR1cm5cblx0aWYgKCBkb2MgPT09IGRvY3VtZW50IHx8IGRvYy5ub2RlVHlwZSAhPT0gOSB8fCAhZG9jLmRvY3VtZW50RWxlbWVudCApIHtcblx0XHRyZXR1cm4gZG9jdW1lbnQ7XG5cdH1cblxuXHQvLyBTZXQgb3VyIGRvY3VtZW50XG5cdGRvY3VtZW50ID0gZG9jO1xuXHRkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblx0cGFyZW50ID0gZG9jLmRlZmF1bHRWaWV3O1xuXG5cdC8vIFN1cHBvcnQ6IElFPjhcblx0Ly8gSWYgaWZyYW1lIGRvY3VtZW50IGlzIGFzc2lnbmVkIHRvIFwiZG9jdW1lbnRcIiB2YXJpYWJsZSBhbmQgaWYgaWZyYW1lIGhhcyBiZWVuIHJlbG9hZGVkLFxuXHQvLyBJRSB3aWxsIHRocm93IFwicGVybWlzc2lvbiBkZW5pZWRcIiBlcnJvciB3aGVuIGFjY2Vzc2luZyBcImRvY3VtZW50XCIgdmFyaWFibGUsIHNlZSBqUXVlcnkgIzEzOTM2XG5cdC8vIElFNi04IGRvIG5vdCBzdXBwb3J0IHRoZSBkZWZhdWx0VmlldyBwcm9wZXJ0eSBzbyBwYXJlbnQgd2lsbCBiZSB1bmRlZmluZWRcblx0aWYgKCBwYXJlbnQgJiYgcGFyZW50ICE9PSBwYXJlbnQudG9wICkge1xuXHRcdC8vIElFMTEgZG9lcyBub3QgaGF2ZSBhdHRhY2hFdmVudCwgc28gYWxsIG11c3Qgc3VmZmVyXG5cdFx0aWYgKCBwYXJlbnQuYWRkRXZlbnRMaXN0ZW5lciApIHtcblx0XHRcdHBhcmVudC5hZGRFdmVudExpc3RlbmVyKCBcInVubG9hZFwiLCB1bmxvYWRIYW5kbGVyLCBmYWxzZSApO1xuXHRcdH0gZWxzZSBpZiAoIHBhcmVudC5hdHRhY2hFdmVudCApIHtcblx0XHRcdHBhcmVudC5hdHRhY2hFdmVudCggXCJvbnVubG9hZFwiLCB1bmxvYWRIYW5kbGVyICk7XG5cdFx0fVxuXHR9XG5cblx0LyogU3VwcG9ydCB0ZXN0c1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cdGRvY3VtZW50SXNIVE1MID0gIWlzWE1MKCBkb2MgKTtcblxuXHQvKiBBdHRyaWJ1dGVzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBTdXBwb3J0OiBJRTw4XG5cdC8vIFZlcmlmeSB0aGF0IGdldEF0dHJpYnV0ZSByZWFsbHkgcmV0dXJucyBhdHRyaWJ1dGVzIGFuZCBub3QgcHJvcGVydGllc1xuXHQvLyAoZXhjZXB0aW5nIElFOCBib29sZWFucylcblx0c3VwcG9ydC5hdHRyaWJ1dGVzID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdFx0ZGl2LmNsYXNzTmFtZSA9IFwiaVwiO1xuXHRcdHJldHVybiAhZGl2LmdldEF0dHJpYnV0ZShcImNsYXNzTmFtZVwiKTtcblx0fSk7XG5cblx0LyogZ2V0RWxlbWVudChzKUJ5KlxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gQ2hlY2sgaWYgZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpIHJldHVybnMgb25seSBlbGVtZW50c1xuXHRzdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdFx0ZGl2LmFwcGVuZENoaWxkKCBkb2MuY3JlYXRlQ29tbWVudChcIlwiKSApO1xuXHRcdHJldHVybiAhZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKS5sZW5ndGg7XG5cdH0pO1xuXG5cdC8vIFN1cHBvcnQ6IElFPDlcblx0c3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0gcm5hdGl2ZS50ZXN0KCBkb2MuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApO1xuXG5cdC8vIFN1cHBvcnQ6IElFPDEwXG5cdC8vIENoZWNrIGlmIGdldEVsZW1lbnRCeUlkIHJldHVybnMgZWxlbWVudHMgYnkgbmFtZVxuXHQvLyBUaGUgYnJva2VuIGdldEVsZW1lbnRCeUlkIG1ldGhvZHMgZG9uJ3QgcGljayB1cCBwcm9ncmFtYXRpY2FsbHktc2V0IG5hbWVzLFxuXHQvLyBzbyB1c2UgYSByb3VuZGFib3V0IGdldEVsZW1lbnRzQnlOYW1lIHRlc3Rcblx0c3VwcG9ydC5nZXRCeUlkID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZGl2ICkuaWQgPSBleHBhbmRvO1xuXHRcdHJldHVybiAhZG9jLmdldEVsZW1lbnRzQnlOYW1lIHx8ICFkb2MuZ2V0RWxlbWVudHNCeU5hbWUoIGV4cGFuZG8gKS5sZW5ndGg7XG5cdH0pO1xuXG5cdC8vIElEIGZpbmQgYW5kIGZpbHRlclxuXHRpZiAoIHN1cHBvcnQuZ2V0QnlJZCApIHtcblx0XHRFeHByLmZpbmRbXCJJRFwiXSA9IGZ1bmN0aW9uKCBpZCwgY29udGV4dCApIHtcblx0XHRcdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQgIT09IFwidW5kZWZpbmVkXCIgJiYgZG9jdW1lbnRJc0hUTUwgKSB7XG5cdFx0XHRcdHZhciBtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggaWQgKTtcblx0XHRcdFx0Ly8gQ2hlY2sgcGFyZW50Tm9kZSB0byBjYXRjaCB3aGVuIEJsYWNrYmVycnkgNC42IHJldHVybnNcblx0XHRcdFx0Ly8gbm9kZXMgdGhhdCBhcmUgbm8gbG9uZ2VyIGluIHRoZSBkb2N1bWVudCAjNjk2M1xuXHRcdFx0XHRyZXR1cm4gbSAmJiBtLnBhcmVudE5vZGUgPyBbIG0gXSA6IFtdO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0RXhwci5maWx0ZXJbXCJJRFwiXSA9IGZ1bmN0aW9uKCBpZCApIHtcblx0XHRcdHZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoXCJpZFwiKSA9PT0gYXR0cklkO1xuXHRcdFx0fTtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdC8vIFN1cHBvcnQ6IElFNi83XG5cdFx0Ly8gZ2V0RWxlbWVudEJ5SWQgaXMgbm90IHJlbGlhYmxlIGFzIGEgZmluZCBzaG9ydGN1dFxuXHRcdGRlbGV0ZSBFeHByLmZpbmRbXCJJRFwiXTtcblxuXHRcdEV4cHIuZmlsdGVyW1wiSURcIl0gPSAgZnVuY3Rpb24oIGlkICkge1xuXHRcdFx0dmFyIGF0dHJJZCA9IGlkLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciBub2RlID0gdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlTm9kZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtcblx0XHRcdFx0cmV0dXJuIG5vZGUgJiYgbm9kZS52YWx1ZSA9PT0gYXR0cklkO1xuXHRcdFx0fTtcblx0XHR9O1xuXHR9XG5cblx0Ly8gVGFnXG5cdEV4cHIuZmluZFtcIlRBR1wiXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgP1xuXHRcdGZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSBcInVuZGVmaW5lZFwiICkge1xuXHRcdFx0XHRyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7XG5cblx0XHRcdC8vIERvY3VtZW50RnJhZ21lbnQgbm9kZXMgZG9uJ3QgaGF2ZSBnRUJUTlxuXHRcdFx0fSBlbHNlIGlmICggc3VwcG9ydC5xc2EgKSB7XG5cdFx0XHRcdHJldHVybiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIHRhZyApO1xuXHRcdFx0fVxuXHRcdH0gOlxuXG5cdFx0ZnVuY3Rpb24oIHRhZywgY29udGV4dCApIHtcblx0XHRcdHZhciBlbGVtLFxuXHRcdFx0XHR0bXAgPSBbXSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdC8vIEJ5IGhhcHB5IGNvaW5jaWRlbmNlLCBhIChicm9rZW4pIGdFQlROIGFwcGVhcnMgb24gRG9jdW1lbnRGcmFnbWVudCBub2RlcyB0b29cblx0XHRcdFx0cmVzdWx0cyA9IGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApO1xuXG5cdFx0XHQvLyBGaWx0ZXIgb3V0IHBvc3NpYmxlIGNvbW1lbnRzXG5cdFx0XHRpZiAoIHRhZyA9PT0gXCIqXCIgKSB7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdHRtcC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHRtcDtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdH07XG5cblx0Ly8gQ2xhc3Ncblx0RXhwci5maW5kW1wiQ0xBU1NcIl0gPSBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiYgZnVuY3Rpb24oIGNsYXNzTmFtZSwgY29udGV4dCApIHtcblx0XHRpZiAoIGRvY3VtZW50SXNIVE1MICkge1xuXHRcdFx0cmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggY2xhc3NOYW1lICk7XG5cdFx0fVxuXHR9O1xuXG5cdC8qIFFTQS9tYXRjaGVzU2VsZWN0b3Jcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIFFTQSBhbmQgbWF0Y2hlc1NlbGVjdG9yIHN1cHBvcnRcblxuXHQvLyBtYXRjaGVzU2VsZWN0b3IoOmFjdGl2ZSkgcmVwb3J0cyBmYWxzZSB3aGVuIHRydWUgKElFOS9PcGVyYSAxMS41KVxuXHRyYnVnZ3lNYXRjaGVzID0gW107XG5cblx0Ly8gcVNhKDpmb2N1cykgcmVwb3J0cyBmYWxzZSB3aGVuIHRydWUgKENocm9tZSAyMSlcblx0Ly8gV2UgYWxsb3cgdGhpcyBiZWNhdXNlIG9mIGEgYnVnIGluIElFOC85IHRoYXQgdGhyb3dzIGFuIGVycm9yXG5cdC8vIHdoZW5ldmVyIGBkb2N1bWVudC5hY3RpdmVFbGVtZW50YCBpcyBhY2Nlc3NlZCBvbiBhbiBpZnJhbWVcblx0Ly8gU28sIHdlIGFsbG93IDpmb2N1cyB0byBwYXNzIHRocm91Z2ggUVNBIGFsbCB0aGUgdGltZSB0byBhdm9pZCB0aGUgSUUgZXJyb3Jcblx0Ly8gU2VlIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEzMzc4XG5cdHJidWdneVFTQSA9IFtdO1xuXG5cdGlmICggKHN1cHBvcnQucXNhID0gcm5hdGl2ZS50ZXN0KCBkb2MucXVlcnlTZWxlY3RvckFsbCApKSApIHtcblx0XHQvLyBCdWlsZCBRU0EgcmVnZXhcblx0XHQvLyBSZWdleCBzdHJhdGVneSBhZG9wdGVkIGZyb20gRGllZ28gUGVyaW5pXG5cdFx0YXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdFx0XHQvLyBTZWxlY3QgaXMgc2V0IHRvIGVtcHR5IHN0cmluZyBvbiBwdXJwb3NlXG5cdFx0XHQvLyBUaGlzIGlzIHRvIHRlc3QgSUUncyB0cmVhdG1lbnQgb2Ygbm90IGV4cGxpY2l0bHlcblx0XHRcdC8vIHNldHRpbmcgYSBib29sZWFuIGNvbnRlbnQgYXR0cmlidXRlLFxuXHRcdFx0Ly8gc2luY2UgaXRzIHByZXNlbmNlIHNob3VsZCBiZSBlbm91Z2hcblx0XHRcdC8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEyMzU5XG5cdFx0XHRkb2NFbGVtLmFwcGVuZENoaWxkKCBkaXYgKS5pbm5lckhUTUwgPSBcIjxhIGlkPSdcIiArIGV4cGFuZG8gKyBcIic+PC9hPlwiICtcblx0XHRcdFx0XCI8c2VsZWN0IGlkPSdcIiArIGV4cGFuZG8gKyBcIi1cXGZdJyBtc2FsbG93Y2FwdHVyZT0nJz5cIiArXG5cdFx0XHRcdFwiPG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIjtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4LCBPcGVyYSAxMS0xMi4xNlxuXHRcdFx0Ly8gTm90aGluZyBzaG91bGQgYmUgc2VsZWN0ZWQgd2hlbiBlbXB0eSBzdHJpbmdzIGZvbGxvdyBePSBvciAkPSBvciAqPVxuXHRcdFx0Ly8gVGhlIHRlc3QgYXR0cmlidXRlIG11c3QgYmUgdW5rbm93biBpbiBPcGVyYSBidXQgXCJzYWZlXCIgZm9yIFdpblJUXG5cdFx0XHQvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvaGg0NjUzODguYXNweCNhdHRyaWJ1dGVfc2VjdGlvblxuXHRcdFx0aWYgKCBkaXYucXVlcnlTZWxlY3RvckFsbChcIlttc2FsbG93Y2FwdHVyZV49JyddXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiWypeJF09XCIgKyB3aGl0ZXNwYWNlICsgXCIqKD86Jyd8XFxcIlxcXCIpXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4XG5cdFx0XHQvLyBCb29sZWFuIGF0dHJpYnV0ZXMgYW5kIFwidmFsdWVcIiBhcmUgbm90IHRyZWF0ZWQgY29ycmVjdGx5XG5cdFx0XHRpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbChcIltzZWxlY3RlZF1cIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJcXFxcW1wiICsgd2hpdGVzcGFjZSArIFwiKig/OnZhbHVlfFwiICsgYm9vbGVhbnMgKyBcIilcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWU8MjksIEFuZHJvaWQ8NC4yKywgU2FmYXJpPDcuMCssIGlPUzw3LjArLCBQaGFudG9tSlM8MS45LjcrXG5cdFx0XHRpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCggXCJbaWR+PVwiICsgZXhwYW5kbyArIFwiLV1cIiApLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCJ+PVwiKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gV2Via2l0L09wZXJhIC0gOmNoZWNrZWQgc2hvdWxkIHJldHVybiBzZWxlY3RlZCBvcHRpb24gZWxlbWVudHNcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkXG5cdFx0XHQvLyBJRTggdGhyb3dzIGVycm9yIGhlcmUgYW5kIHdpbGwgbm90IHNlZSBsYXRlciB0ZXN0c1xuXHRcdFx0aWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCI6Y2hlY2tlZFwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKFwiOmNoZWNrZWRcIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IFNhZmFyaSA4KywgaU9TIDgrXG5cdFx0XHQvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM2ODUxXG5cdFx0XHQvLyBJbi1wYWdlIGBzZWxlY3RvciNpZCBzaWJpbmctY29tYmluYXRvciBzZWxlY3RvcmAgZmFpbHNcblx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKCBcImEjXCIgKyBleHBhbmRvICsgXCIrKlwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaChcIi4jLitbK35dXCIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0YXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdFx0XHQvLyBTdXBwb3J0OiBXaW5kb3dzIDggTmF0aXZlIEFwcHNcblx0XHRcdC8vIFRoZSB0eXBlIGFuZCBuYW1lIGF0dHJpYnV0ZXMgYXJlIHJlc3RyaWN0ZWQgZHVyaW5nIC5pbm5lckhUTUwgYXNzaWdubWVudFxuXHRcdFx0dmFyIGlucHV0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblx0XHRcdGlucHV0LnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIFwiaGlkZGVuXCIgKTtcblx0XHRcdGRpdi5hcHBlbmRDaGlsZCggaW5wdXQgKS5zZXRBdHRyaWJ1dGUoIFwibmFtZVwiLCBcIkRcIiApO1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRThcblx0XHRcdC8vIEVuZm9yY2UgY2FzZS1zZW5zaXRpdml0eSBvZiBuYW1lIGF0dHJpYnV0ZVxuXHRcdFx0aWYgKCBkaXYucXVlcnlTZWxlY3RvckFsbChcIltuYW1lPWRdXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwibmFtZVwiICsgd2hpdGVzcGFjZSArIFwiKlsqXiR8IX5dPz1cIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBGRiAzLjUgLSA6ZW5hYmxlZC86ZGlzYWJsZWQgYW5kIGhpZGRlbiBlbGVtZW50cyAoaGlkZGVuIGVsZW1lbnRzIGFyZSBzdGlsbCBlbmFibGVkKVxuXHRcdFx0Ly8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHNcblx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiOmVuYWJsZWRcIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCI6ZW5hYmxlZFwiLCBcIjpkaXNhYmxlZFwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE9wZXJhIDEwLTExIGRvZXMgbm90IHRocm93IG9uIHBvc3QtY29tbWEgaW52YWxpZCBwc2V1ZG9zXG5cdFx0XHRkaXYucXVlcnlTZWxlY3RvckFsbChcIiosOnhcIik7XG5cdFx0XHRyYnVnZ3lRU0EucHVzaChcIiwuKjpcIik7XG5cdFx0fSk7XG5cdH1cblxuXHRpZiAoIChzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciA9IHJuYXRpdmUudGVzdCggKG1hdGNoZXMgPSBkb2NFbGVtLm1hdGNoZXMgfHxcblx0XHRkb2NFbGVtLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ubW96TWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0ZG9jRWxlbS5vTWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0ZG9jRWxlbS5tc01hdGNoZXNTZWxlY3RvcikgKSkgKSB7XG5cblx0XHRhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcblx0XHRcdC8vIENoZWNrIHRvIHNlZSBpZiBpdCdzIHBvc3NpYmxlIHRvIGRvIG1hdGNoZXNTZWxlY3RvclxuXHRcdFx0Ly8gb24gYSBkaXNjb25uZWN0ZWQgbm9kZSAoSUUgOSlcblx0XHRcdHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggPSBtYXRjaGVzLmNhbGwoIGRpdiwgXCJkaXZcIiApO1xuXG5cdFx0XHQvLyBUaGlzIHNob3VsZCBmYWlsIHdpdGggYW4gZXhjZXB0aW9uXG5cdFx0XHQvLyBHZWNrbyBkb2VzIG5vdCBlcnJvciwgcmV0dXJucyBmYWxzZSBpbnN0ZWFkXG5cdFx0XHRtYXRjaGVzLmNhbGwoIGRpdiwgXCJbcyE9JyddOnhcIiApO1xuXHRcdFx0cmJ1Z2d5TWF0Y2hlcy5wdXNoKCBcIiE9XCIsIHBzZXVkb3MgKTtcblx0XHR9KTtcblx0fVxuXG5cdHJidWdneVFTQSA9IHJidWdneVFTQS5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5UVNBLmpvaW4oXCJ8XCIpICk7XG5cdHJidWdneU1hdGNoZXMgPSByYnVnZ3lNYXRjaGVzLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lNYXRjaGVzLmpvaW4oXCJ8XCIpICk7XG5cblx0LyogQ29udGFpbnNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRoYXNDb21wYXJlID0gcm5hdGl2ZS50ZXN0KCBkb2NFbGVtLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICk7XG5cblx0Ly8gRWxlbWVudCBjb250YWlucyBhbm90aGVyXG5cdC8vIFB1cnBvc2VmdWxseSBkb2VzIG5vdCBpbXBsZW1lbnQgaW5jbHVzaXZlIGRlc2NlbmRlbnRcblx0Ly8gQXMgaW4sIGFuIGVsZW1lbnQgZG9lcyBub3QgY29udGFpbiBpdHNlbGZcblx0Y29udGFpbnMgPSBoYXNDb21wYXJlIHx8IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb250YWlucyApID9cblx0XHRmdW5jdGlvbiggYSwgYiApIHtcblx0XHRcdHZhciBhZG93biA9IGEubm9kZVR5cGUgPT09IDkgPyBhLmRvY3VtZW50RWxlbWVudCA6IGEsXG5cdFx0XHRcdGJ1cCA9IGIgJiYgYi5wYXJlbnROb2RlO1xuXHRcdFx0cmV0dXJuIGEgPT09IGJ1cCB8fCAhISggYnVwICYmIGJ1cC5ub2RlVHlwZSA9PT0gMSAmJiAoXG5cdFx0XHRcdGFkb3duLmNvbnRhaW5zID9cblx0XHRcdFx0XHRhZG93bi5jb250YWlucyggYnVwICkgOlxuXHRcdFx0XHRcdGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24gJiYgYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYnVwICkgJiAxNlxuXHRcdFx0KSk7XG5cdFx0fSA6XG5cdFx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0XHRpZiAoIGIgKSB7XG5cdFx0XHRcdHdoaWxlICggKGIgPSBiLnBhcmVudE5vZGUpICkge1xuXHRcdFx0XHRcdGlmICggYiA9PT0gYSApIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH07XG5cblx0LyogU29ydGluZ1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gRG9jdW1lbnQgb3JkZXIgc29ydGluZ1xuXHRzb3J0T3JkZXIgPSBoYXNDb21wYXJlID9cblx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cblx0XHQvLyBGbGFnIGZvciBkdXBsaWNhdGUgcmVtb3ZhbFxuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9XG5cblx0XHQvLyBTb3J0IG9uIG1ldGhvZCBleGlzdGVuY2UgaWYgb25seSBvbmUgaW5wdXQgaGFzIGNvbXBhcmVEb2N1bWVudFBvc2l0aW9uXG5cdFx0dmFyIGNvbXBhcmUgPSAhYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAtICFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO1xuXHRcdGlmICggY29tcGFyZSApIHtcblx0XHRcdHJldHVybiBjb21wYXJlO1xuXHRcdH1cblxuXHRcdC8vIENhbGN1bGF0ZSBwb3NpdGlvbiBpZiBib3RoIGlucHV0cyBiZWxvbmcgdG8gdGhlIHNhbWUgZG9jdW1lbnRcblx0XHRjb21wYXJlID0gKCBhLm93bmVyRG9jdW1lbnQgfHwgYSApID09PSAoIGIub3duZXJEb2N1bWVudCB8fCBiICkgP1xuXHRcdFx0YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYiApIDpcblxuXHRcdFx0Ly8gT3RoZXJ3aXNlIHdlIGtub3cgdGhleSBhcmUgZGlzY29ubmVjdGVkXG5cdFx0XHQxO1xuXG5cdFx0Ly8gRGlzY29ubmVjdGVkIG5vZGVzXG5cdFx0aWYgKCBjb21wYXJlICYgMSB8fFxuXHRcdFx0KCFzdXBwb3J0LnNvcnREZXRhY2hlZCAmJiBiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBhICkgPT09IGNvbXBhcmUpICkge1xuXG5cdFx0XHQvLyBDaG9vc2UgdGhlIGZpcnN0IGVsZW1lbnQgdGhhdCBpcyByZWxhdGVkIHRvIG91ciBwcmVmZXJyZWQgZG9jdW1lbnRcblx0XHRcdGlmICggYSA9PT0gZG9jIHx8IGEub3duZXJEb2N1bWVudCA9PT0gcHJlZmVycmVkRG9jICYmIGNvbnRhaW5zKHByZWZlcnJlZERvYywgYSkgKSB7XG5cdFx0XHRcdHJldHVybiAtMTtcblx0XHRcdH1cblx0XHRcdGlmICggYiA9PT0gZG9jIHx8IGIub3duZXJEb2N1bWVudCA9PT0gcHJlZmVycmVkRG9jICYmIGNvbnRhaW5zKHByZWZlcnJlZERvYywgYikgKSB7XG5cdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYWludGFpbiBvcmlnaW5hbCBvcmRlclxuXHRcdFx0cmV0dXJuIHNvcnRJbnB1dCA/XG5cdFx0XHRcdCggaW5kZXhPZiggc29ydElucHV0LCBhICkgLSBpbmRleE9mKCBzb3J0SW5wdXQsIGIgKSApIDpcblx0XHRcdFx0MDtcblx0XHR9XG5cblx0XHRyZXR1cm4gY29tcGFyZSAmIDQgPyAtMSA6IDE7XG5cdH0gOlxuXHRmdW5jdGlvbiggYSwgYiApIHtcblx0XHQvLyBFeGl0IGVhcmx5IGlmIHRoZSBub2RlcyBhcmUgaWRlbnRpY2FsXG5cdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZhciBjdXIsXG5cdFx0XHRpID0gMCxcblx0XHRcdGF1cCA9IGEucGFyZW50Tm9kZSxcblx0XHRcdGJ1cCA9IGIucGFyZW50Tm9kZSxcblx0XHRcdGFwID0gWyBhIF0sXG5cdFx0XHRicCA9IFsgYiBdO1xuXG5cdFx0Ly8gUGFyZW50bGVzcyBub2RlcyBhcmUgZWl0aGVyIGRvY3VtZW50cyBvciBkaXNjb25uZWN0ZWRcblx0XHRpZiAoICFhdXAgfHwgIWJ1cCApIHtcblx0XHRcdHJldHVybiBhID09PSBkb2MgPyAtMSA6XG5cdFx0XHRcdGIgPT09IGRvYyA/IDEgOlxuXHRcdFx0XHRhdXAgPyAtMSA6XG5cdFx0XHRcdGJ1cCA/IDEgOlxuXHRcdFx0XHRzb3J0SW5wdXQgP1xuXHRcdFx0XHQoIGluZGV4T2YoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZiggc29ydElucHV0LCBiICkgKSA6XG5cdFx0XHRcdDA7XG5cblx0XHQvLyBJZiB0aGUgbm9kZXMgYXJlIHNpYmxpbmdzLCB3ZSBjYW4gZG8gYSBxdWljayBjaGVja1xuXHRcdH0gZWxzZSBpZiAoIGF1cCA9PT0gYnVwICkge1xuXHRcdFx0cmV0dXJuIHNpYmxpbmdDaGVjayggYSwgYiApO1xuXHRcdH1cblxuXHRcdC8vIE90aGVyd2lzZSB3ZSBuZWVkIGZ1bGwgbGlzdHMgb2YgdGhlaXIgYW5jZXN0b3JzIGZvciBjb21wYXJpc29uXG5cdFx0Y3VyID0gYTtcblx0XHR3aGlsZSAoIChjdXIgPSBjdXIucGFyZW50Tm9kZSkgKSB7XG5cdFx0XHRhcC51bnNoaWZ0KCBjdXIgKTtcblx0XHR9XG5cdFx0Y3VyID0gYjtcblx0XHR3aGlsZSAoIChjdXIgPSBjdXIucGFyZW50Tm9kZSkgKSB7XG5cdFx0XHRicC51bnNoaWZ0KCBjdXIgKTtcblx0XHR9XG5cblx0XHQvLyBXYWxrIGRvd24gdGhlIHRyZWUgbG9va2luZyBmb3IgYSBkaXNjcmVwYW5jeVxuXHRcdHdoaWxlICggYXBbaV0gPT09IGJwW2ldICkge1xuXHRcdFx0aSsrO1xuXHRcdH1cblxuXHRcdHJldHVybiBpID9cblx0XHRcdC8vIERvIGEgc2libGluZyBjaGVjayBpZiB0aGUgbm9kZXMgaGF2ZSBhIGNvbW1vbiBhbmNlc3RvclxuXHRcdFx0c2libGluZ0NoZWNrKCBhcFtpXSwgYnBbaV0gKSA6XG5cblx0XHRcdC8vIE90aGVyd2lzZSBub2RlcyBpbiBvdXIgZG9jdW1lbnQgc29ydCBmaXJzdFxuXHRcdFx0YXBbaV0gPT09IHByZWZlcnJlZERvYyA/IC0xIDpcblx0XHRcdGJwW2ldID09PSBwcmVmZXJyZWREb2MgPyAxIDpcblx0XHRcdDA7XG5cdH07XG5cblx0cmV0dXJuIGRvYztcbn07XG5cblNpenpsZS5tYXRjaGVzID0gZnVuY3Rpb24oIGV4cHIsIGVsZW1lbnRzICkge1xuXHRyZXR1cm4gU2l6emxlKCBleHByLCBudWxsLCBudWxsLCBlbGVtZW50cyApO1xufTtcblxuU2l6emxlLm1hdGNoZXNTZWxlY3RvciA9IGZ1bmN0aW9uKCBlbGVtLCBleHByICkge1xuXHQvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWRcblx0aWYgKCAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtICkgIT09IGRvY3VtZW50ICkge1xuXHRcdHNldERvY3VtZW50KCBlbGVtICk7XG5cdH1cblxuXHQvLyBNYWtlIHN1cmUgdGhhdCBhdHRyaWJ1dGUgc2VsZWN0b3JzIGFyZSBxdW90ZWRcblx0ZXhwciA9IGV4cHIucmVwbGFjZSggcmF0dHJpYnV0ZVF1b3RlcywgXCI9JyQxJ11cIiApO1xuXG5cdGlmICggc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3IgJiYgZG9jdW1lbnRJc0hUTUwgJiZcblx0XHQoICFyYnVnZ3lNYXRjaGVzIHx8ICFyYnVnZ3lNYXRjaGVzLnRlc3QoIGV4cHIgKSApICYmXG5cdFx0KCAhcmJ1Z2d5UVNBICAgICB8fCAhcmJ1Z2d5UVNBLnRlc3QoIGV4cHIgKSApICkge1xuXG5cdFx0dHJ5IHtcblx0XHRcdHZhciByZXQgPSBtYXRjaGVzLmNhbGwoIGVsZW0sIGV4cHIgKTtcblxuXHRcdFx0Ly8gSUUgOSdzIG1hdGNoZXNTZWxlY3RvciByZXR1cm5zIGZhbHNlIG9uIGRpc2Nvbm5lY3RlZCBub2Rlc1xuXHRcdFx0aWYgKCByZXQgfHwgc3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaCB8fFxuXHRcdFx0XHRcdC8vIEFzIHdlbGwsIGRpc2Nvbm5lY3RlZCBub2RlcyBhcmUgc2FpZCB0byBiZSBpbiBhIGRvY3VtZW50XG5cdFx0XHRcdFx0Ly8gZnJhZ21lbnQgaW4gSUUgOVxuXHRcdFx0XHRcdGVsZW0uZG9jdW1lbnQgJiYgZWxlbS5kb2N1bWVudC5ub2RlVHlwZSAhPT0gMTEgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZSkge31cblx0fVxuXG5cdHJldHVybiBTaXp6bGUoIGV4cHIsIGRvY3VtZW50LCBudWxsLCBbIGVsZW0gXSApLmxlbmd0aCA+IDA7XG59O1xuXG5TaXp6bGUuY29udGFpbnMgPSBmdW5jdGlvbiggY29udGV4dCwgZWxlbSApIHtcblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdGlmICggKCBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggY29udGV4dCApO1xuXHR9XG5cdHJldHVybiBjb250YWlucyggY29udGV4dCwgZWxlbSApO1xufTtcblxuU2l6emxlLmF0dHIgPSBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdGlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHR9XG5cblx0dmFyIGZuID0gRXhwci5hdHRySGFuZGxlWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSxcblx0XHQvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IE9iamVjdC5wcm90b3R5cGUgcHJvcGVydGllcyAoalF1ZXJ5ICMxMzgwNylcblx0XHR2YWwgPSBmbiAmJiBoYXNPd24uY2FsbCggRXhwci5hdHRySGFuZGxlLCBuYW1lLnRvTG93ZXJDYXNlKCkgKSA/XG5cdFx0XHRmbiggZWxlbSwgbmFtZSwgIWRvY3VtZW50SXNIVE1MICkgOlxuXHRcdFx0dW5kZWZpbmVkO1xuXG5cdHJldHVybiB2YWwgIT09IHVuZGVmaW5lZCA/XG5cdFx0dmFsIDpcblx0XHRzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWRvY3VtZW50SXNIVE1MID9cblx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICkgOlxuXHRcdFx0KHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZShuYW1lKSkgJiYgdmFsLnNwZWNpZmllZCA/XG5cdFx0XHRcdHZhbC52YWx1ZSA6XG5cdFx0XHRcdG51bGw7XG59O1xuXG5TaXp6bGUuZXJyb3IgPSBmdW5jdGlvbiggbXNnICkge1xuXHR0aHJvdyBuZXcgRXJyb3IoIFwiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogXCIgKyBtc2cgKTtcbn07XG5cbi8qKlxuICogRG9jdW1lbnQgc29ydGluZyBhbmQgcmVtb3ZpbmcgZHVwbGljYXRlc1xuICogQHBhcmFtIHtBcnJheUxpa2V9IHJlc3VsdHNcbiAqL1xuU2l6emxlLnVuaXF1ZVNvcnQgPSBmdW5jdGlvbiggcmVzdWx0cyApIHtcblx0dmFyIGVsZW0sXG5cdFx0ZHVwbGljYXRlcyA9IFtdLFxuXHRcdGogPSAwLFxuXHRcdGkgPSAwO1xuXG5cdC8vIFVubGVzcyB3ZSAqa25vdyogd2UgY2FuIGRldGVjdCBkdXBsaWNhdGVzLCBhc3N1bWUgdGhlaXIgcHJlc2VuY2Vcblx0aGFzRHVwbGljYXRlID0gIXN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcztcblx0c29ydElucHV0ID0gIXN1cHBvcnQuc29ydFN0YWJsZSAmJiByZXN1bHRzLnNsaWNlKCAwICk7XG5cdHJlc3VsdHMuc29ydCggc29ydE9yZGVyICk7XG5cblx0aWYgKCBoYXNEdXBsaWNhdGUgKSB7XG5cdFx0d2hpbGUgKCAoZWxlbSA9IHJlc3VsdHNbaSsrXSkgKSB7XG5cdFx0XHRpZiAoIGVsZW0gPT09IHJlc3VsdHNbIGkgXSApIHtcblx0XHRcdFx0aiA9IGR1cGxpY2F0ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdHJlc3VsdHMuc3BsaWNlKCBkdXBsaWNhdGVzWyBqIF0sIDEgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBDbGVhciBpbnB1dCBhZnRlciBzb3J0aW5nIHRvIHJlbGVhc2Ugb2JqZWN0c1xuXHQvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9zaXp6bGUvcHVsbC8yMjVcblx0c29ydElucHV0ID0gbnVsbDtcblxuXHRyZXR1cm4gcmVzdWx0cztcbn07XG5cbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbiBmb3IgcmV0cmlldmluZyB0aGUgdGV4dCB2YWx1ZSBvZiBhbiBhcnJheSBvZiBET00gbm9kZXNcbiAqIEBwYXJhbSB7QXJyYXl8RWxlbWVudH0gZWxlbVxuICovXG5nZXRUZXh0ID0gU2l6emxlLmdldFRleHQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0dmFyIG5vZGUsXG5cdFx0cmV0ID0gXCJcIixcblx0XHRpID0gMCxcblx0XHRub2RlVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cblx0aWYgKCAhbm9kZVR5cGUgKSB7XG5cdFx0Ly8gSWYgbm8gbm9kZVR5cGUsIHRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgYW4gYXJyYXlcblx0XHR3aGlsZSAoIChub2RlID0gZWxlbVtpKytdKSApIHtcblx0XHRcdC8vIERvIG5vdCB0cmF2ZXJzZSBjb21tZW50IG5vZGVzXG5cdFx0XHRyZXQgKz0gZ2V0VGV4dCggbm9kZSApO1xuXHRcdH1cblx0fSBlbHNlIGlmICggbm9kZVR5cGUgPT09IDEgfHwgbm9kZVR5cGUgPT09IDkgfHwgbm9kZVR5cGUgPT09IDExICkge1xuXHRcdC8vIFVzZSB0ZXh0Q29udGVudCBmb3IgZWxlbWVudHNcblx0XHQvLyBpbm5lclRleHQgdXNhZ2UgcmVtb3ZlZCBmb3IgY29uc2lzdGVuY3kgb2YgbmV3IGxpbmVzIChqUXVlcnkgIzExMTUzKVxuXHRcdGlmICggdHlwZW9mIGVsZW0udGV4dENvbnRlbnQgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS50ZXh0Q29udGVudDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gVHJhdmVyc2UgaXRzIGNoaWxkcmVuXG5cdFx0XHRmb3IgKCBlbGVtID0gZWxlbS5maXJzdENoaWxkOyBlbGVtOyBlbGVtID0gZWxlbS5uZXh0U2libGluZyApIHtcblx0XHRcdFx0cmV0ICs9IGdldFRleHQoIGVsZW0gKTtcblx0XHRcdH1cblx0XHR9XG5cdH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAzIHx8IG5vZGVUeXBlID09PSA0ICkge1xuXHRcdHJldHVybiBlbGVtLm5vZGVWYWx1ZTtcblx0fVxuXHQvLyBEbyBub3QgaW5jbHVkZSBjb21tZW50IG9yIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb24gbm9kZXNcblxuXHRyZXR1cm4gcmV0O1xufTtcblxuRXhwciA9IFNpenpsZS5zZWxlY3RvcnMgPSB7XG5cblx0Ly8gQ2FuIGJlIGFkanVzdGVkIGJ5IHRoZSB1c2VyXG5cdGNhY2hlTGVuZ3RoOiA1MCxcblxuXHRjcmVhdGVQc2V1ZG86IG1hcmtGdW5jdGlvbixcblxuXHRtYXRjaDogbWF0Y2hFeHByLFxuXG5cdGF0dHJIYW5kbGU6IHt9LFxuXG5cdGZpbmQ6IHt9LFxuXG5cdHJlbGF0aXZlOiB7XG5cdFx0XCI+XCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiwgZmlyc3Q6IHRydWUgfSxcblx0XHRcIiBcIjogeyBkaXI6IFwicGFyZW50Tm9kZVwiIH0sXG5cdFx0XCIrXCI6IHsgZGlyOiBcInByZXZpb3VzU2libGluZ1wiLCBmaXJzdDogdHJ1ZSB9LFxuXHRcdFwiflwiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiB9XG5cdH0sXG5cblx0cHJlRmlsdGVyOiB7XG5cdFx0XCJBVFRSXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdG1hdGNoWzFdID0gbWF0Y2hbMV0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblxuXHRcdFx0Ly8gTW92ZSB0aGUgZ2l2ZW4gdmFsdWUgdG8gbWF0Y2hbM10gd2hldGhlciBxdW90ZWQgb3IgdW5xdW90ZWRcblx0XHRcdG1hdGNoWzNdID0gKCBtYXRjaFszXSB8fCBtYXRjaFs0XSB8fCBtYXRjaFs1XSB8fCBcIlwiICkucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblxuXHRcdFx0aWYgKCBtYXRjaFsyXSA9PT0gXCJ+PVwiICkge1xuXHRcdFx0XHRtYXRjaFszXSA9IFwiIFwiICsgbWF0Y2hbM10gKyBcIiBcIjtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG1hdGNoLnNsaWNlKCAwLCA0ICk7XG5cdFx0fSxcblxuXHRcdFwiQ0hJTERcIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0LyogbWF0Y2hlcyBmcm9tIG1hdGNoRXhwcltcIkNISUxEXCJdXG5cdFx0XHRcdDEgdHlwZSAob25seXxudGh8Li4uKVxuXHRcdFx0XHQyIHdoYXQgKGNoaWxkfG9mLXR5cGUpXG5cdFx0XHRcdDMgYXJndW1lbnQgKGV2ZW58b2RkfFxcZCp8XFxkKm4oWystXVxcZCspP3wuLi4pXG5cdFx0XHRcdDQgeG4tY29tcG9uZW50IG9mIHhuK3kgYXJndW1lbnQgKFsrLV0/XFxkKm58KVxuXHRcdFx0XHQ1IHNpZ24gb2YgeG4tY29tcG9uZW50XG5cdFx0XHRcdDYgeCBvZiB4bi1jb21wb25lbnRcblx0XHRcdFx0NyBzaWduIG9mIHktY29tcG9uZW50XG5cdFx0XHRcdDggeSBvZiB5LWNvbXBvbmVudFxuXHRcdFx0Ki9cblx0XHRcdG1hdGNoWzFdID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcblxuXHRcdFx0aWYgKCBtYXRjaFsxXS5zbGljZSggMCwgMyApID09PSBcIm50aFwiICkge1xuXHRcdFx0XHQvLyBudGgtKiByZXF1aXJlcyBhcmd1bWVudFxuXHRcdFx0XHRpZiAoICFtYXRjaFszXSApIHtcblx0XHRcdFx0XHRTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBudW1lcmljIHggYW5kIHkgcGFyYW1ldGVycyBmb3IgRXhwci5maWx0ZXIuQ0hJTERcblx0XHRcdFx0Ly8gcmVtZW1iZXIgdGhhdCBmYWxzZS90cnVlIGNhc3QgcmVzcGVjdGl2ZWx5IHRvIDAvMVxuXHRcdFx0XHRtYXRjaFs0XSA9ICsoIG1hdGNoWzRdID8gbWF0Y2hbNV0gKyAobWF0Y2hbNl0gfHwgMSkgOiAyICogKCBtYXRjaFszXSA9PT0gXCJldmVuXCIgfHwgbWF0Y2hbM10gPT09IFwib2RkXCIgKSApO1xuXHRcdFx0XHRtYXRjaFs1XSA9ICsoICggbWF0Y2hbN10gKyBtYXRjaFs4XSApIHx8IG1hdGNoWzNdID09PSBcIm9kZFwiICk7XG5cblx0XHRcdC8vIG90aGVyIHR5cGVzIHByb2hpYml0IGFyZ3VtZW50c1xuXHRcdFx0fSBlbHNlIGlmICggbWF0Y2hbM10gKSB7XG5cdFx0XHRcdFNpenpsZS5lcnJvciggbWF0Y2hbMF0gKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG1hdGNoO1xuXHRcdH0sXG5cblx0XHRcIlBTRVVET1wiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHR2YXIgZXhjZXNzLFxuXHRcdFx0XHR1bnF1b3RlZCA9ICFtYXRjaFs2XSAmJiBtYXRjaFsyXTtcblxuXHRcdFx0aWYgKCBtYXRjaEV4cHJbXCJDSElMRFwiXS50ZXN0KCBtYXRjaFswXSApICkge1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWNjZXB0IHF1b3RlZCBhcmd1bWVudHMgYXMtaXNcblx0XHRcdGlmICggbWF0Y2hbM10gKSB7XG5cdFx0XHRcdG1hdGNoWzJdID0gbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgXCJcIjtcblxuXHRcdFx0Ly8gU3RyaXAgZXhjZXNzIGNoYXJhY3RlcnMgZnJvbSB1bnF1b3RlZCBhcmd1bWVudHNcblx0XHRcdH0gZWxzZSBpZiAoIHVucXVvdGVkICYmIHJwc2V1ZG8udGVzdCggdW5xdW90ZWQgKSAmJlxuXHRcdFx0XHQvLyBHZXQgZXhjZXNzIGZyb20gdG9rZW5pemUgKHJlY3Vyc2l2ZWx5KVxuXHRcdFx0XHQoZXhjZXNzID0gdG9rZW5pemUoIHVucXVvdGVkLCB0cnVlICkpICYmXG5cdFx0XHRcdC8vIGFkdmFuY2UgdG8gdGhlIG5leHQgY2xvc2luZyBwYXJlbnRoZXNpc1xuXHRcdFx0XHQoZXhjZXNzID0gdW5xdW90ZWQuaW5kZXhPZiggXCIpXCIsIHVucXVvdGVkLmxlbmd0aCAtIGV4Y2VzcyApIC0gdW5xdW90ZWQubGVuZ3RoKSApIHtcblxuXHRcdFx0XHQvLyBleGNlc3MgaXMgYSBuZWdhdGl2ZSBpbmRleFxuXHRcdFx0XHRtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwLCBleGNlc3MgKTtcblx0XHRcdFx0bWF0Y2hbMl0gPSB1bnF1b3RlZC5zbGljZSggMCwgZXhjZXNzICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJldHVybiBvbmx5IGNhcHR1cmVzIG5lZWRlZCBieSB0aGUgcHNldWRvIGZpbHRlciBtZXRob2QgKHR5cGUgYW5kIGFyZ3VtZW50KVxuXHRcdFx0cmV0dXJuIG1hdGNoLnNsaWNlKCAwLCAzICk7XG5cdFx0fVxuXHR9LFxuXG5cdGZpbHRlcjoge1xuXG5cdFx0XCJUQUdcIjogZnVuY3Rpb24oIG5vZGVOYW1lU2VsZWN0b3IgKSB7XG5cdFx0XHR2YXIgbm9kZU5hbWUgPSBub2RlTmFtZVNlbGVjdG9yLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICkudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiBub2RlTmFtZVNlbGVjdG9yID09PSBcIipcIiA/XG5cdFx0XHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSA6XG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbm9kZU5hbWU7XG5cdFx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiQ0xBU1NcIjogZnVuY3Rpb24oIGNsYXNzTmFtZSApIHtcblx0XHRcdHZhciBwYXR0ZXJuID0gY2xhc3NDYWNoZVsgY2xhc3NOYW1lICsgXCIgXCIgXTtcblxuXHRcdFx0cmV0dXJuIHBhdHRlcm4gfHxcblx0XHRcdFx0KHBhdHRlcm4gPSBuZXcgUmVnRXhwKCBcIihefFwiICsgd2hpdGVzcGFjZSArIFwiKVwiICsgY2xhc3NOYW1lICsgXCIoXCIgKyB3aGl0ZXNwYWNlICsgXCJ8JClcIiApKSAmJlxuXHRcdFx0XHRjbGFzc0NhY2hlKCBjbGFzc05hbWUsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiBwYXR0ZXJuLnRlc3QoIHR5cGVvZiBlbGVtLmNsYXNzTmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBlbGVtLmNsYXNzTmFtZSB8fCB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGUgIT09IFwidW5kZWZpbmVkXCIgJiYgZWxlbS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSB8fCBcIlwiICk7XG5cdFx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRcIkFUVFJcIjogZnVuY3Rpb24oIG5hbWUsIG9wZXJhdG9yLCBjaGVjayApIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIHJlc3VsdCA9IFNpenpsZS5hdHRyKCBlbGVtLCBuYW1lICk7XG5cblx0XHRcdFx0aWYgKCByZXN1bHQgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXR1cm4gb3BlcmF0b3IgPT09IFwiIT1cIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoICFvcGVyYXRvciApIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJlc3VsdCArPSBcIlwiO1xuXG5cdFx0XHRcdHJldHVybiBvcGVyYXRvciA9PT0gXCI9XCIgPyByZXN1bHQgPT09IGNoZWNrIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIhPVwiID8gcmVzdWx0ICE9PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiXj1cIiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID09PSAwIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIqPVwiID8gY2hlY2sgJiYgcmVzdWx0LmluZGV4T2YoIGNoZWNrICkgPiAtMSA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiJD1cIiA/IGNoZWNrICYmIHJlc3VsdC5zbGljZSggLWNoZWNrLmxlbmd0aCApID09PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwifj1cIiA/ICggXCIgXCIgKyByZXN1bHQucmVwbGFjZSggcndoaXRlc3BhY2UsIFwiIFwiICkgKyBcIiBcIiApLmluZGV4T2YoIGNoZWNrICkgPiAtMSA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwifD1cIiA/IHJlc3VsdCA9PT0gY2hlY2sgfHwgcmVzdWx0LnNsaWNlKCAwLCBjaGVjay5sZW5ndGggKyAxICkgPT09IGNoZWNrICsgXCItXCIgOlxuXHRcdFx0XHRcdGZhbHNlO1xuXHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0XCJDSElMRFwiOiBmdW5jdGlvbiggdHlwZSwgd2hhdCwgYXJndW1lbnQsIGZpcnN0LCBsYXN0ICkge1xuXHRcdFx0dmFyIHNpbXBsZSA9IHR5cGUuc2xpY2UoIDAsIDMgKSAhPT0gXCJudGhcIixcblx0XHRcdFx0Zm9yd2FyZCA9IHR5cGUuc2xpY2UoIC00ICkgIT09IFwibGFzdFwiLFxuXHRcdFx0XHRvZlR5cGUgPSB3aGF0ID09PSBcIm9mLXR5cGVcIjtcblxuXHRcdFx0cmV0dXJuIGZpcnN0ID09PSAxICYmIGxhc3QgPT09IDAgP1xuXG5cdFx0XHRcdC8vIFNob3J0Y3V0IGZvciA6bnRoLSoobilcblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuICEhZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0XHR9IDpcblxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdHZhciBjYWNoZSwgb3V0ZXJDYWNoZSwgbm9kZSwgZGlmZiwgbm9kZUluZGV4LCBzdGFydCxcblx0XHRcdFx0XHRcdGRpciA9IHNpbXBsZSAhPT0gZm9yd2FyZCA/IFwibmV4dFNpYmxpbmdcIiA6IFwicHJldmlvdXNTaWJsaW5nXCIsXG5cdFx0XHRcdFx0XHRwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGUsXG5cdFx0XHRcdFx0XHRuYW1lID0gb2ZUeXBlICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxcblx0XHRcdFx0XHRcdHVzZUNhY2hlID0gIXhtbCAmJiAhb2ZUeXBlO1xuXG5cdFx0XHRcdFx0aWYgKCBwYXJlbnQgKSB7XG5cblx0XHRcdFx0XHRcdC8vIDooZmlyc3R8bGFzdHxvbmx5KS0oY2hpbGR8b2YtdHlwZSlcblx0XHRcdFx0XHRcdGlmICggc2ltcGxlICkge1xuXHRcdFx0XHRcdFx0XHR3aGlsZSAoIGRpciApIHtcblx0XHRcdFx0XHRcdFx0XHRub2RlID0gZWxlbTtcblx0XHRcdFx0XHRcdFx0XHR3aGlsZSAoIChub2RlID0gbm9kZVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBvZlR5cGUgPyBub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgOiBub2RlLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdC8vIFJldmVyc2UgZGlyZWN0aW9uIGZvciA6b25seS0qIChpZiB3ZSBoYXZlbid0IHlldCBkb25lIHNvKVxuXHRcdFx0XHRcdFx0XHRcdHN0YXJ0ID0gZGlyID0gdHlwZSA9PT0gXCJvbmx5XCIgJiYgIXN0YXJ0ICYmIFwibmV4dFNpYmxpbmdcIjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0c3RhcnQgPSBbIGZvcndhcmQgPyBwYXJlbnQuZmlyc3RDaGlsZCA6IHBhcmVudC5sYXN0Q2hpbGQgXTtcblxuXHRcdFx0XHRcdFx0Ly8gbm9uLXhtbCA6bnRoLWNoaWxkKC4uLikgc3RvcmVzIGNhY2hlIGRhdGEgb24gYHBhcmVudGBcblx0XHRcdFx0XHRcdGlmICggZm9yd2FyZCAmJiB1c2VDYWNoZSApIHtcblx0XHRcdFx0XHRcdFx0Ly8gU2VlayBgZWxlbWAgZnJvbSBhIHByZXZpb3VzbHktY2FjaGVkIGluZGV4XG5cdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBwYXJlbnRbIGV4cGFuZG8gXSB8fCAocGFyZW50WyBleHBhbmRvIF0gPSB7fSk7XG5cdFx0XHRcdFx0XHRcdGNhY2hlID0gb3V0ZXJDYWNoZVsgdHlwZSBdIHx8IFtdO1xuXHRcdFx0XHRcdFx0XHRub2RlSW5kZXggPSBjYWNoZVswXSA9PT0gZGlycnVucyAmJiBjYWNoZVsxXTtcblx0XHRcdFx0XHRcdFx0ZGlmZiA9IGNhY2hlWzBdID09PSBkaXJydW5zICYmIGNhY2hlWzJdO1xuXHRcdFx0XHRcdFx0XHRub2RlID0gbm9kZUluZGV4ICYmIHBhcmVudC5jaGlsZE5vZGVzWyBub2RlSW5kZXggXTtcblxuXHRcdFx0XHRcdFx0XHR3aGlsZSAoIChub2RlID0gKytub2RlSW5kZXggJiYgbm9kZSAmJiBub2RlWyBkaXIgXSB8fFxuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gRmFsbGJhY2sgdG8gc2Vla2luZyBgZWxlbWAgZnJvbSB0aGUgc3RhcnRcblx0XHRcdFx0XHRcdFx0XHQoZGlmZiA9IG5vZGVJbmRleCA9IDApIHx8IHN0YXJ0LnBvcCgpKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIFdoZW4gZm91bmQsIGNhY2hlIGluZGV4ZXMgb24gYHBhcmVudGAgYW5kIGJyZWFrXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBub2RlLm5vZGVUeXBlID09PSAxICYmICsrZGlmZiAmJiBub2RlID09PSBlbGVtICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0b3V0ZXJDYWNoZVsgdHlwZSBdID0gWyBkaXJydW5zLCBub2RlSW5kZXgsIGRpZmYgXTtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBVc2UgcHJldmlvdXNseS1jYWNoZWQgZWxlbWVudCBpbmRleCBpZiBhdmFpbGFibGVcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIHVzZUNhY2hlICYmIChjYWNoZSA9IChlbGVtWyBleHBhbmRvIF0gfHwgKGVsZW1bIGV4cGFuZG8gXSA9IHt9KSlbIHR5cGUgXSkgJiYgY2FjaGVbMF0gPT09IGRpcnJ1bnMgKSB7XG5cdFx0XHRcdFx0XHRcdGRpZmYgPSBjYWNoZVsxXTtcblxuXHRcdFx0XHRcdFx0Ly8geG1sIDpudGgtY2hpbGQoLi4uKSBvciA6bnRoLWxhc3QtY2hpbGQoLi4uKSBvciA6bnRoKC1sYXN0KT8tb2YtdHlwZSguLi4pXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBVc2UgdGhlIHNhbWUgbG9vcCBhcyBhYm92ZSB0byBzZWVrIGBlbGVtYCBmcm9tIHRoZSBzdGFydFxuXHRcdFx0XHRcdFx0XHR3aGlsZSAoIChub2RlID0gKytub2RlSW5kZXggJiYgbm9kZSAmJiBub2RlWyBkaXIgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdChkaWZmID0gbm9kZUluZGV4ID0gMCkgfHwgc3RhcnQucG9wKCkpICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCAoIG9mVHlwZSA/IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6IG5vZGUubm9kZVR5cGUgPT09IDEgKSAmJiArK2RpZmYgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBDYWNoZSB0aGUgaW5kZXggb2YgZWFjaCBlbmNvdW50ZXJlZCBlbGVtZW50XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHVzZUNhY2hlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQobm9kZVsgZXhwYW5kbyBdIHx8IChub2RlWyBleHBhbmRvIF0gPSB7fSkpWyB0eXBlIF0gPSBbIGRpcnJ1bnMsIGRpZmYgXTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBub2RlID09PSBlbGVtICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gSW5jb3Jwb3JhdGUgdGhlIG9mZnNldCwgdGhlbiBjaGVjayBhZ2FpbnN0IGN5Y2xlIHNpemVcblx0XHRcdFx0XHRcdGRpZmYgLT0gbGFzdDtcblx0XHRcdFx0XHRcdHJldHVybiBkaWZmID09PSBmaXJzdCB8fCAoIGRpZmYgJSBmaXJzdCA9PT0gMCAmJiBkaWZmIC8gZmlyc3QgPj0gMCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0XCJQU0VVRE9cIjogZnVuY3Rpb24oIHBzZXVkbywgYXJndW1lbnQgKSB7XG5cdFx0XHQvLyBwc2V1ZG8tY2xhc3MgbmFtZXMgYXJlIGNhc2UtaW5zZW5zaXRpdmVcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jcHNldWRvLWNsYXNzZXNcblx0XHRcdC8vIFByaW9yaXRpemUgYnkgY2FzZSBzZW5zaXRpdml0eSBpbiBjYXNlIGN1c3RvbSBwc2V1ZG9zIGFyZSBhZGRlZCB3aXRoIHVwcGVyY2FzZSBsZXR0ZXJzXG5cdFx0XHQvLyBSZW1lbWJlciB0aGF0IHNldEZpbHRlcnMgaW5oZXJpdHMgZnJvbSBwc2V1ZG9zXG5cdFx0XHR2YXIgYXJncyxcblx0XHRcdFx0Zm4gPSBFeHByLnBzZXVkb3NbIHBzZXVkbyBdIHx8IEV4cHIuc2V0RmlsdGVyc1sgcHNldWRvLnRvTG93ZXJDYXNlKCkgXSB8fFxuXHRcdFx0XHRcdFNpenpsZS5lcnJvciggXCJ1bnN1cHBvcnRlZCBwc2V1ZG86IFwiICsgcHNldWRvICk7XG5cblx0XHRcdC8vIFRoZSB1c2VyIG1heSB1c2UgY3JlYXRlUHNldWRvIHRvIGluZGljYXRlIHRoYXRcblx0XHRcdC8vIGFyZ3VtZW50cyBhcmUgbmVlZGVkIHRvIGNyZWF0ZSB0aGUgZmlsdGVyIGZ1bmN0aW9uXG5cdFx0XHQvLyBqdXN0IGFzIFNpenpsZSBkb2VzXG5cdFx0XHRpZiAoIGZuWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdHJldHVybiBmbiggYXJndW1lbnQgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQnV0IG1haW50YWluIHN1cHBvcnQgZm9yIG9sZCBzaWduYXR1cmVzXG5cdFx0XHRpZiAoIGZuLmxlbmd0aCA+IDEgKSB7XG5cdFx0XHRcdGFyZ3MgPSBbIHBzZXVkbywgcHNldWRvLCBcIlwiLCBhcmd1bWVudCBdO1xuXHRcdFx0XHRyZXR1cm4gRXhwci5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KCBwc2V1ZG8udG9Mb3dlckNhc2UoKSApID9cblx0XHRcdFx0XHRtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMgKSB7XG5cdFx0XHRcdFx0XHR2YXIgaWR4LFxuXHRcdFx0XHRcdFx0XHRtYXRjaGVkID0gZm4oIHNlZWQsIGFyZ3VtZW50ICksXG5cdFx0XHRcdFx0XHRcdGkgPSBtYXRjaGVkLmxlbmd0aDtcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRpZHggPSBpbmRleE9mKCBzZWVkLCBtYXRjaGVkW2ldICk7XG5cdFx0XHRcdFx0XHRcdHNlZWRbIGlkeCBdID0gISggbWF0Y2hlc1sgaWR4IF0gPSBtYXRjaGVkW2ldICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSkgOlxuXHRcdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZuKCBlbGVtLCAwLCBhcmdzICk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZuO1xuXHRcdH1cblx0fSxcblxuXHRwc2V1ZG9zOiB7XG5cdFx0Ly8gUG90ZW50aWFsbHkgY29tcGxleCBwc2V1ZG9zXG5cdFx0XCJub3RcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdC8vIFRyaW0gdGhlIHNlbGVjdG9yIHBhc3NlZCB0byBjb21waWxlXG5cdFx0XHQvLyB0byBhdm9pZCB0cmVhdGluZyBsZWFkaW5nIGFuZCB0cmFpbGluZ1xuXHRcdFx0Ly8gc3BhY2VzIGFzIGNvbWJpbmF0b3JzXG5cdFx0XHR2YXIgaW5wdXQgPSBbXSxcblx0XHRcdFx0cmVzdWx0cyA9IFtdLFxuXHRcdFx0XHRtYXRjaGVyID0gY29tcGlsZSggc2VsZWN0b3IucmVwbGFjZSggcnRyaW0sIFwiJDFcIiApICk7XG5cblx0XHRcdHJldHVybiBtYXRjaGVyWyBleHBhbmRvIF0gP1xuXHRcdFx0XHRtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMsIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHR2YXIgZWxlbSxcblx0XHRcdFx0XHRcdHVubWF0Y2hlZCA9IG1hdGNoZXIoIHNlZWQsIG51bGwsIHhtbCwgW10gKSxcblx0XHRcdFx0XHRcdGkgPSBzZWVkLmxlbmd0aDtcblxuXHRcdFx0XHRcdC8vIE1hdGNoIGVsZW1lbnRzIHVubWF0Y2hlZCBieSBgbWF0Y2hlcmBcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGlmICggKGVsZW0gPSB1bm1hdGNoZWRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHRzZWVkW2ldID0gIShtYXRjaGVzW2ldID0gZWxlbSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSA6XG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdFx0aW5wdXRbMF0gPSBlbGVtO1xuXHRcdFx0XHRcdG1hdGNoZXIoIGlucHV0LCBudWxsLCB4bWwsIHJlc3VsdHMgKTtcblx0XHRcdFx0XHQvLyBEb24ndCBrZWVwIHRoZSBlbGVtZW50IChpc3N1ZSAjMjk5KVxuXHRcdFx0XHRcdGlucHV0WzBdID0gbnVsbDtcblx0XHRcdFx0XHRyZXR1cm4gIXJlc3VsdHMucG9wKCk7XG5cdFx0XHRcdH07XG5cdFx0fSksXG5cblx0XHRcImhhc1wiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gU2l6emxlKCBzZWxlY3RvciwgZWxlbSApLmxlbmd0aCA+IDA7XG5cdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0XCJjb250YWluc1wiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0XHR0ZXh0ID0gdGV4dC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gKCBlbGVtLnRleHRDb250ZW50IHx8IGVsZW0uaW5uZXJUZXh0IHx8IGdldFRleHQoIGVsZW0gKSApLmluZGV4T2YoIHRleHQgKSA+IC0xO1xuXHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdC8vIFwiV2hldGhlciBhbiBlbGVtZW50IGlzIHJlcHJlc2VudGVkIGJ5IGEgOmxhbmcoKSBzZWxlY3RvclxuXHRcdC8vIGlzIGJhc2VkIHNvbGVseSBvbiB0aGUgZWxlbWVudCdzIGxhbmd1YWdlIHZhbHVlXG5cdFx0Ly8gYmVpbmcgZXF1YWwgdG8gdGhlIGlkZW50aWZpZXIgQyxcblx0XHQvLyBvciBiZWdpbm5pbmcgd2l0aCB0aGUgaWRlbnRpZmllciBDIGltbWVkaWF0ZWx5IGZvbGxvd2VkIGJ5IFwiLVwiLlxuXHRcdC8vIFRoZSBtYXRjaGluZyBvZiBDIGFnYWluc3QgdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZSBpcyBwZXJmb3JtZWQgY2FzZS1pbnNlbnNpdGl2ZWx5LlxuXHRcdC8vIFRoZSBpZGVudGlmaWVyIEMgZG9lcyBub3QgaGF2ZSB0byBiZSBhIHZhbGlkIGxhbmd1YWdlIG5hbWUuXCJcblx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2xhbmctcHNldWRvXG5cdFx0XCJsYW5nXCI6IG1hcmtGdW5jdGlvbiggZnVuY3Rpb24oIGxhbmcgKSB7XG5cdFx0XHQvLyBsYW5nIHZhbHVlIG11c3QgYmUgYSB2YWxpZCBpZGVudGlmaWVyXG5cdFx0XHRpZiAoICFyaWRlbnRpZmllci50ZXN0KGxhbmcgfHwgXCJcIikgKSB7XG5cdFx0XHRcdFNpenpsZS5lcnJvciggXCJ1bnN1cHBvcnRlZCBsYW5nOiBcIiArIGxhbmcgKTtcblx0XHRcdH1cblx0XHRcdGxhbmcgPSBsYW5nLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICkudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIGVsZW1MYW5nO1xuXHRcdFx0XHRkbyB7XG5cdFx0XHRcdFx0aWYgKCAoZWxlbUxhbmcgPSBkb2N1bWVudElzSFRNTCA/XG5cdFx0XHRcdFx0XHRlbGVtLmxhbmcgOlxuXHRcdFx0XHRcdFx0ZWxlbS5nZXRBdHRyaWJ1dGUoXCJ4bWw6bGFuZ1wiKSB8fCBlbGVtLmdldEF0dHJpYnV0ZShcImxhbmdcIikpICkge1xuXG5cdFx0XHRcdFx0XHRlbGVtTGFuZyA9IGVsZW1MYW5nLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZWxlbUxhbmcgPT09IGxhbmcgfHwgZWxlbUxhbmcuaW5kZXhPZiggbGFuZyArIFwiLVwiICkgPT09IDA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IHdoaWxlICggKGVsZW0gPSBlbGVtLnBhcmVudE5vZGUpICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdC8vIE1pc2NlbGxhbmVvdXNcblx0XHRcInRhcmdldFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBoYXNoID0gd2luZG93LmxvY2F0aW9uICYmIHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xuXHRcdFx0cmV0dXJuIGhhc2ggJiYgaGFzaC5zbGljZSggMSApID09PSBlbGVtLmlkO1xuXHRcdH0sXG5cblx0XHRcInJvb3RcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gZG9jRWxlbTtcblx0XHR9LFxuXG5cdFx0XCJmb2N1c1wiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmICghZG9jdW1lbnQuaGFzRm9jdXMgfHwgZG9jdW1lbnQuaGFzRm9jdXMoKSkgJiYgISEoZWxlbS50eXBlIHx8IGVsZW0uaHJlZiB8fCB+ZWxlbS50YWJJbmRleCk7XG5cdFx0fSxcblxuXHRcdC8vIEJvb2xlYW4gcHJvcGVydGllc1xuXHRcdFwiZW5hYmxlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtLmRpc2FibGVkID09PSBmYWxzZTtcblx0XHR9LFxuXG5cdFx0XCJkaXNhYmxlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtLmRpc2FibGVkID09PSB0cnVlO1xuXHRcdH0sXG5cblx0XHRcImNoZWNrZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHQvLyBJbiBDU1MzLCA6Y2hlY2tlZCBzaG91bGQgcmV0dXJuIGJvdGggY2hlY2tlZCBhbmQgc2VsZWN0ZWQgZWxlbWVudHNcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkXG5cdFx0XHR2YXIgbm9kZU5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gKG5vZGVOYW1lID09PSBcImlucHV0XCIgJiYgISFlbGVtLmNoZWNrZWQpIHx8IChub2RlTmFtZSA9PT0gXCJvcHRpb25cIiAmJiAhIWVsZW0uc2VsZWN0ZWQpO1xuXHRcdH0sXG5cblx0XHRcInNlbGVjdGVkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0Ly8gQWNjZXNzaW5nIHRoaXMgcHJvcGVydHkgbWFrZXMgc2VsZWN0ZWQtYnktZGVmYXVsdFxuXHRcdFx0Ly8gb3B0aW9ucyBpbiBTYWZhcmkgd29yayBwcm9wZXJseVxuXHRcdFx0aWYgKCBlbGVtLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdGVsZW0ucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZWxlbS5zZWxlY3RlZCA9PT0gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0Ly8gQ29udGVudHNcblx0XHRcImVtcHR5XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNlbXB0eS1wc2V1ZG9cblx0XHRcdC8vIDplbXB0eSBpcyBuZWdhdGVkIGJ5IGVsZW1lbnQgKDEpIG9yIGNvbnRlbnQgbm9kZXMgKHRleHQ6IDM7IGNkYXRhOiA0OyBlbnRpdHkgcmVmOiA1KSxcblx0XHRcdC8vICAgYnV0IG5vdCBieSBvdGhlcnMgKGNvbW1lbnQ6IDg7IHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb246IDc7IGV0Yy4pXG5cdFx0XHQvLyBub2RlVHlwZSA8IDYgd29ya3MgYmVjYXVzZSBhdHRyaWJ1dGVzICgyKSBkbyBub3QgYXBwZWFyIGFzIGNoaWxkcmVuXG5cdFx0XHRmb3IgKCBlbGVtID0gZWxlbS5maXJzdENoaWxkOyBlbGVtOyBlbGVtID0gZWxlbS5uZXh0U2libGluZyApIHtcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlIDwgNiApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0sXG5cblx0XHRcInBhcmVudFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAhRXhwci5wc2V1ZG9zW1wiZW1wdHlcIl0oIGVsZW0gKTtcblx0XHR9LFxuXG5cdFx0Ly8gRWxlbWVudC9pbnB1dCB0eXBlc1xuXHRcdFwiaGVhZGVyXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIHJoZWFkZXIudGVzdCggZWxlbS5ub2RlTmFtZSApO1xuXHRcdH0sXG5cblx0XHRcImlucHV0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIHJpbnB1dHMudGVzdCggZWxlbS5ub2RlTmFtZSApO1xuXHRcdH0sXG5cblx0XHRcImJ1dHRvblwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIG5hbWUgPT09IFwiaW5wdXRcIiAmJiBlbGVtLnR5cGUgPT09IFwiYnV0dG9uXCIgfHwgbmFtZSA9PT0gXCJidXR0b25cIjtcblx0XHR9LFxuXG5cdFx0XCJ0ZXh0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIGF0dHI7XG5cdFx0XHRyZXR1cm4gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImlucHV0XCIgJiZcblx0XHRcdFx0ZWxlbS50eXBlID09PSBcInRleHRcIiAmJlxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFPDhcblx0XHRcdFx0Ly8gTmV3IEhUTUw1IGF0dHJpYnV0ZSB2YWx1ZXMgKGUuZy4sIFwic2VhcmNoXCIpIGFwcGVhciB3aXRoIGVsZW0udHlwZSA9PT0gXCJ0ZXh0XCJcblx0XHRcdFx0KCAoYXR0ciA9IGVsZW0uZ2V0QXR0cmlidXRlKFwidHlwZVwiKSkgPT0gbnVsbCB8fCBhdHRyLnRvTG93ZXJDYXNlKCkgPT09IFwidGV4dFwiICk7XG5cdFx0fSxcblxuXHRcdC8vIFBvc2l0aW9uLWluLWNvbGxlY3Rpb25cblx0XHRcImZpcnN0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gWyAwIF07XG5cdFx0fSksXG5cblx0XHRcImxhc3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gWyBsZW5ndGggLSAxIF07XG5cdFx0fSksXG5cblx0XHRcImVxXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcblx0XHRcdHJldHVybiBbIGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQgXTtcblx0XHR9KSxcblxuXHRcdFwiZXZlblwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcblx0XHRcdHZhciBpID0gMDtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KSxcblxuXHRcdFwib2RkXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuXHRcdFx0dmFyIGkgPSAxO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pLFxuXG5cdFx0XCJsdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHR2YXIgaSA9IGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQ7XG5cdFx0XHRmb3IgKCA7IC0taSA+PSAwOyApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSksXG5cblx0XHRcImd0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcblx0XHRcdHZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDtcblx0XHRcdGZvciAoIDsgKytpIDwgbGVuZ3RoOyApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSlcblx0fVxufTtcblxuRXhwci5wc2V1ZG9zW1wibnRoXCJdID0gRXhwci5wc2V1ZG9zW1wiZXFcIl07XG5cbi8vIEFkZCBidXR0b24vaW5wdXQgdHlwZSBwc2V1ZG9zXG5mb3IgKCBpIGluIHsgcmFkaW86IHRydWUsIGNoZWNrYm94OiB0cnVlLCBmaWxlOiB0cnVlLCBwYXNzd29yZDogdHJ1ZSwgaW1hZ2U6IHRydWUgfSApIHtcblx0RXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVJbnB1dFBzZXVkbyggaSApO1xufVxuZm9yICggaSBpbiB7IHN1Ym1pdDogdHJ1ZSwgcmVzZXQ6IHRydWUgfSApIHtcblx0RXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVCdXR0b25Qc2V1ZG8oIGkgKTtcbn1cblxuLy8gRWFzeSBBUEkgZm9yIGNyZWF0aW5nIG5ldyBzZXRGaWx0ZXJzXG5mdW5jdGlvbiBzZXRGaWx0ZXJzKCkge31cbnNldEZpbHRlcnMucHJvdG90eXBlID0gRXhwci5maWx0ZXJzID0gRXhwci5wc2V1ZG9zO1xuRXhwci5zZXRGaWx0ZXJzID0gbmV3IHNldEZpbHRlcnMoKTtcblxudG9rZW5pemUgPSBTaXp6bGUudG9rZW5pemUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIHBhcnNlT25seSApIHtcblx0dmFyIG1hdGNoZWQsIG1hdGNoLCB0b2tlbnMsIHR5cGUsXG5cdFx0c29GYXIsIGdyb3VwcywgcHJlRmlsdGVycyxcblx0XHRjYWNoZWQgPSB0b2tlbkNhY2hlWyBzZWxlY3RvciArIFwiIFwiIF07XG5cblx0aWYgKCBjYWNoZWQgKSB7XG5cdFx0cmV0dXJuIHBhcnNlT25seSA/IDAgOiBjYWNoZWQuc2xpY2UoIDAgKTtcblx0fVxuXG5cdHNvRmFyID0gc2VsZWN0b3I7XG5cdGdyb3VwcyA9IFtdO1xuXHRwcmVGaWx0ZXJzID0gRXhwci5wcmVGaWx0ZXI7XG5cblx0d2hpbGUgKCBzb0ZhciApIHtcblxuXHRcdC8vIENvbW1hIGFuZCBmaXJzdCBydW5cblx0XHRpZiAoICFtYXRjaGVkIHx8IChtYXRjaCA9IHJjb21tYS5leGVjKCBzb0ZhciApKSApIHtcblx0XHRcdGlmICggbWF0Y2ggKSB7XG5cdFx0XHRcdC8vIERvbid0IGNvbnN1bWUgdHJhaWxpbmcgY29tbWFzIGFzIHZhbGlkXG5cdFx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoWzBdLmxlbmd0aCApIHx8IHNvRmFyO1xuXHRcdFx0fVxuXHRcdFx0Z3JvdXBzLnB1c2goICh0b2tlbnMgPSBbXSkgKTtcblx0XHR9XG5cblx0XHRtYXRjaGVkID0gZmFsc2U7XG5cblx0XHQvLyBDb21iaW5hdG9yc1xuXHRcdGlmICggKG1hdGNoID0gcmNvbWJpbmF0b3JzLmV4ZWMoIHNvRmFyICkpICkge1xuXHRcdFx0bWF0Y2hlZCA9IG1hdGNoLnNoaWZ0KCk7XG5cdFx0XHR0b2tlbnMucHVzaCh7XG5cdFx0XHRcdHZhbHVlOiBtYXRjaGVkLFxuXHRcdFx0XHQvLyBDYXN0IGRlc2NlbmRhbnQgY29tYmluYXRvcnMgdG8gc3BhY2Vcblx0XHRcdFx0dHlwZTogbWF0Y2hbMF0ucmVwbGFjZSggcnRyaW0sIFwiIFwiIClcblx0XHRcdH0pO1xuXHRcdFx0c29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hlZC5sZW5ndGggKTtcblx0XHR9XG5cblx0XHQvLyBGaWx0ZXJzXG5cdFx0Zm9yICggdHlwZSBpbiBFeHByLmZpbHRlciApIHtcblx0XHRcdGlmICggKG1hdGNoID0gbWF0Y2hFeHByWyB0eXBlIF0uZXhlYyggc29GYXIgKSkgJiYgKCFwcmVGaWx0ZXJzWyB0eXBlIF0gfHxcblx0XHRcdFx0KG1hdGNoID0gcHJlRmlsdGVyc1sgdHlwZSBdKCBtYXRjaCApKSkgKSB7XG5cdFx0XHRcdG1hdGNoZWQgPSBtYXRjaC5zaGlmdCgpO1xuXHRcdFx0XHR0b2tlbnMucHVzaCh7XG5cdFx0XHRcdFx0dmFsdWU6IG1hdGNoZWQsXG5cdFx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0XHRtYXRjaGVzOiBtYXRjaFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hlZC5sZW5ndGggKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoICFtYXRjaGVkICkge1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSBsZW5ndGggb2YgdGhlIGludmFsaWQgZXhjZXNzXG5cdC8vIGlmIHdlJ3JlIGp1c3QgcGFyc2luZ1xuXHQvLyBPdGhlcndpc2UsIHRocm93IGFuIGVycm9yIG9yIHJldHVybiB0b2tlbnNcblx0cmV0dXJuIHBhcnNlT25seSA/XG5cdFx0c29GYXIubGVuZ3RoIDpcblx0XHRzb0ZhciA/XG5cdFx0XHRTaXp6bGUuZXJyb3IoIHNlbGVjdG9yICkgOlxuXHRcdFx0Ly8gQ2FjaGUgdGhlIHRva2Vuc1xuXHRcdFx0dG9rZW5DYWNoZSggc2VsZWN0b3IsIGdyb3VwcyApLnNsaWNlKCAwICk7XG59O1xuXG5mdW5jdGlvbiB0b1NlbGVjdG9yKCB0b2tlbnMgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSB0b2tlbnMubGVuZ3RoLFxuXHRcdHNlbGVjdG9yID0gXCJcIjtcblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0c2VsZWN0b3IgKz0gdG9rZW5zW2ldLnZhbHVlO1xuXHR9XG5cdHJldHVybiBzZWxlY3Rvcjtcbn1cblxuZnVuY3Rpb24gYWRkQ29tYmluYXRvciggbWF0Y2hlciwgY29tYmluYXRvciwgYmFzZSApIHtcblx0dmFyIGRpciA9IGNvbWJpbmF0b3IuZGlyLFxuXHRcdGNoZWNrTm9uRWxlbWVudHMgPSBiYXNlICYmIGRpciA9PT0gXCJwYXJlbnROb2RlXCIsXG5cdFx0ZG9uZU5hbWUgPSBkb25lKys7XG5cblx0cmV0dXJuIGNvbWJpbmF0b3IuZmlyc3QgP1xuXHRcdC8vIENoZWNrIGFnYWluc3QgY2xvc2VzdCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudFxuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgY2hlY2tOb25FbGVtZW50cyApIHtcblx0XHRcdFx0XHRyZXR1cm4gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IDpcblxuXHRcdC8vIENoZWNrIGFnYWluc3QgYWxsIGFuY2VzdG9yL3ByZWNlZGluZyBlbGVtZW50c1xuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHR2YXIgb2xkQ2FjaGUsIG91dGVyQ2FjaGUsXG5cdFx0XHRcdG5ld0NhY2hlID0gWyBkaXJydW5zLCBkb25lTmFtZSBdO1xuXG5cdFx0XHQvLyBXZSBjYW4ndCBzZXQgYXJiaXRyYXJ5IGRhdGEgb24gWE1MIG5vZGVzLCBzbyB0aGV5IGRvbid0IGJlbmVmaXQgZnJvbSBkaXIgY2FjaGluZ1xuXHRcdFx0aWYgKCB4bWwgKSB7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gZWxlbVsgZXhwYW5kbyBdIHx8IChlbGVtWyBleHBhbmRvIF0gPSB7fSk7XG5cdFx0XHRcdFx0XHRpZiAoIChvbGRDYWNoZSA9IG91dGVyQ2FjaGVbIGRpciBdKSAmJlxuXHRcdFx0XHRcdFx0XHRvbGRDYWNoZVsgMCBdID09PSBkaXJydW5zICYmIG9sZENhY2hlWyAxIF0gPT09IGRvbmVOYW1lICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIEFzc2lnbiB0byBuZXdDYWNoZSBzbyByZXN1bHRzIGJhY2stcHJvcGFnYXRlIHRvIHByZXZpb3VzIGVsZW1lbnRzXG5cdFx0XHRcdFx0XHRcdHJldHVybiAobmV3Q2FjaGVbIDIgXSA9IG9sZENhY2hlWyAyIF0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gUmV1c2UgbmV3Y2FjaGUgc28gcmVzdWx0cyBiYWNrLXByb3BhZ2F0ZSB0byBwcmV2aW91cyBlbGVtZW50c1xuXHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlWyBkaXIgXSA9IG5ld0NhY2hlO1xuXG5cdFx0XHRcdFx0XHRcdC8vIEEgbWF0Y2ggbWVhbnMgd2UncmUgZG9uZTsgYSBmYWlsIG1lYW5zIHdlIGhhdmUgdG8ga2VlcCBjaGVja2luZ1xuXHRcdFx0XHRcdFx0XHRpZiAoIChuZXdDYWNoZVsgMiBdID0gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkpICkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcbn1cblxuZnVuY3Rpb24gZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICkge1xuXHRyZXR1cm4gbWF0Y2hlcnMubGVuZ3RoID4gMSA/XG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciBpID0gbWF0Y2hlcnMubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGlmICggIW1hdGNoZXJzW2ldKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0gOlxuXHRcdG1hdGNoZXJzWzBdO1xufVxuXG5mdW5jdGlvbiBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciwgY29udGV4dHMsIHJlc3VsdHMgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHRzW2ldLCByZXN1bHRzICk7XG5cdH1cblx0cmV0dXJuIHJlc3VsdHM7XG59XG5cbmZ1bmN0aW9uIGNvbmRlbnNlKCB1bm1hdGNoZWQsIG1hcCwgZmlsdGVyLCBjb250ZXh0LCB4bWwgKSB7XG5cdHZhciBlbGVtLFxuXHRcdG5ld1VubWF0Y2hlZCA9IFtdLFxuXHRcdGkgPSAwLFxuXHRcdGxlbiA9IHVubWF0Y2hlZC5sZW5ndGgsXG5cdFx0bWFwcGVkID0gbWFwICE9IG51bGw7XG5cblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0aWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7XG5cdFx0XHRpZiAoICFmaWx0ZXIgfHwgZmlsdGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0bmV3VW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0aWYgKCBtYXBwZWQgKSB7XG5cdFx0XHRcdFx0bWFwLnB1c2goIGkgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBuZXdVbm1hdGNoZWQ7XG59XG5cbmZ1bmN0aW9uIHNldE1hdGNoZXIoIHByZUZpbHRlciwgc2VsZWN0b3IsIG1hdGNoZXIsIHBvc3RGaWx0ZXIsIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApIHtcblx0aWYgKCBwb3N0RmlsdGVyICYmICFwb3N0RmlsdGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0cG9zdEZpbHRlciA9IHNldE1hdGNoZXIoIHBvc3RGaWx0ZXIgKTtcblx0fVxuXHRpZiAoIHBvc3RGaW5kZXIgJiYgIXBvc3RGaW5kZXJbIGV4cGFuZG8gXSApIHtcblx0XHRwb3N0RmluZGVyID0gc2V0TWF0Y2hlciggcG9zdEZpbmRlciwgcG9zdFNlbGVjdG9yICk7XG5cdH1cblx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgcmVzdWx0cywgY29udGV4dCwgeG1sICkge1xuXHRcdHZhciB0ZW1wLCBpLCBlbGVtLFxuXHRcdFx0cHJlTWFwID0gW10sXG5cdFx0XHRwb3N0TWFwID0gW10sXG5cdFx0XHRwcmVleGlzdGluZyA9IHJlc3VsdHMubGVuZ3RoLFxuXG5cdFx0XHQvLyBHZXQgaW5pdGlhbCBlbGVtZW50cyBmcm9tIHNlZWQgb3IgY29udGV4dFxuXHRcdFx0ZWxlbXMgPSBzZWVkIHx8IG11bHRpcGxlQ29udGV4dHMoIHNlbGVjdG9yIHx8IFwiKlwiLCBjb250ZXh0Lm5vZGVUeXBlID8gWyBjb250ZXh0IF0gOiBjb250ZXh0LCBbXSApLFxuXG5cdFx0XHQvLyBQcmVmaWx0ZXIgdG8gZ2V0IG1hdGNoZXIgaW5wdXQsIHByZXNlcnZpbmcgYSBtYXAgZm9yIHNlZWQtcmVzdWx0cyBzeW5jaHJvbml6YXRpb25cblx0XHRcdG1hdGNoZXJJbiA9IHByZUZpbHRlciAmJiAoIHNlZWQgfHwgIXNlbGVjdG9yICkgP1xuXHRcdFx0XHRjb25kZW5zZSggZWxlbXMsIHByZU1hcCwgcHJlRmlsdGVyLCBjb250ZXh0LCB4bWwgKSA6XG5cdFx0XHRcdGVsZW1zLFxuXG5cdFx0XHRtYXRjaGVyT3V0ID0gbWF0Y2hlciA/XG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgYSBwb3N0RmluZGVyLCBvciBmaWx0ZXJlZCBzZWVkLCBvciBub24tc2VlZCBwb3N0RmlsdGVyIG9yIHByZWV4aXN0aW5nIHJlc3VsdHMsXG5cdFx0XHRcdHBvc3RGaW5kZXIgfHwgKCBzZWVkID8gcHJlRmlsdGVyIDogcHJlZXhpc3RpbmcgfHwgcG9zdEZpbHRlciApID9cblxuXHRcdFx0XHRcdC8vIC4uLmludGVybWVkaWF0ZSBwcm9jZXNzaW5nIGlzIG5lY2Vzc2FyeVxuXHRcdFx0XHRcdFtdIDpcblxuXHRcdFx0XHRcdC8vIC4uLm90aGVyd2lzZSB1c2UgcmVzdWx0cyBkaXJlY3RseVxuXHRcdFx0XHRcdHJlc3VsdHMgOlxuXHRcdFx0XHRtYXRjaGVySW47XG5cblx0XHQvLyBGaW5kIHByaW1hcnkgbWF0Y2hlc1xuXHRcdGlmICggbWF0Y2hlciApIHtcblx0XHRcdG1hdGNoZXIoIG1hdGNoZXJJbiwgbWF0Y2hlck91dCwgY29udGV4dCwgeG1sICk7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgcG9zdEZpbHRlclxuXHRcdGlmICggcG9zdEZpbHRlciApIHtcblx0XHRcdHRlbXAgPSBjb25kZW5zZSggbWF0Y2hlck91dCwgcG9zdE1hcCApO1xuXHRcdFx0cG9zdEZpbHRlciggdGVtcCwgW10sIGNvbnRleHQsIHhtbCApO1xuXG5cdFx0XHQvLyBVbi1tYXRjaCBmYWlsaW5nIGVsZW1lbnRzIGJ5IG1vdmluZyB0aGVtIGJhY2sgdG8gbWF0Y2hlckluXG5cdFx0XHRpID0gdGVtcC5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCAoZWxlbSA9IHRlbXBbaV0pICkge1xuXHRcdFx0XHRcdG1hdGNoZXJPdXRbIHBvc3RNYXBbaV0gXSA9ICEobWF0Y2hlckluWyBwb3N0TWFwW2ldIF0gPSBlbGVtKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICggc2VlZCApIHtcblx0XHRcdGlmICggcG9zdEZpbmRlciB8fCBwcmVGaWx0ZXIgKSB7XG5cdFx0XHRcdGlmICggcG9zdEZpbmRlciApIHtcblx0XHRcdFx0XHQvLyBHZXQgdGhlIGZpbmFsIG1hdGNoZXJPdXQgYnkgY29uZGVuc2luZyB0aGlzIGludGVybWVkaWF0ZSBpbnRvIHBvc3RGaW5kZXIgY29udGV4dHNcblx0XHRcdFx0XHR0ZW1wID0gW107XG5cdFx0XHRcdFx0aSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoZWxlbSA9IG1hdGNoZXJPdXRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIG1hdGNoZXJJbiBzaW5jZSBlbGVtIGlzIG5vdCB5ZXQgYSBmaW5hbCBtYXRjaFxuXHRcdFx0XHRcdFx0XHR0ZW1wLnB1c2goIChtYXRjaGVySW5baV0gPSBlbGVtKSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRwb3N0RmluZGVyKCBudWxsLCAobWF0Y2hlck91dCA9IFtdKSwgdGVtcCwgeG1sICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBNb3ZlIG1hdGNoZWQgZWxlbWVudHMgZnJvbSBzZWVkIHRvIHJlc3VsdHMgdG8ga2VlcCB0aGVtIHN5bmNocm9uaXplZFxuXHRcdFx0XHRpID0gbWF0Y2hlck91dC5sZW5ndGg7XG5cdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdGlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSAmJlxuXHRcdFx0XHRcdFx0KHRlbXAgPSBwb3N0RmluZGVyID8gaW5kZXhPZiggc2VlZCwgZWxlbSApIDogcHJlTWFwW2ldKSA+IC0xICkge1xuXG5cdFx0XHRcdFx0XHRzZWVkW3RlbXBdID0gIShyZXN1bHRzW3RlbXBdID0gZWxlbSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBBZGQgZWxlbWVudHMgdG8gcmVzdWx0cywgdGhyb3VnaCBwb3N0RmluZGVyIGlmIGRlZmluZWRcblx0XHR9IGVsc2Uge1xuXHRcdFx0bWF0Y2hlck91dCA9IGNvbmRlbnNlKFxuXHRcdFx0XHRtYXRjaGVyT3V0ID09PSByZXN1bHRzID9cblx0XHRcdFx0XHRtYXRjaGVyT3V0LnNwbGljZSggcHJlZXhpc3RpbmcsIG1hdGNoZXJPdXQubGVuZ3RoICkgOlxuXHRcdFx0XHRcdG1hdGNoZXJPdXRcblx0XHRcdCk7XG5cdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cdFx0XHRcdHBvc3RGaW5kZXIoIG51bGwsIHJlc3VsdHMsIG1hdGNoZXJPdXQsIHhtbCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgbWF0Y2hlck91dCApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59XG5cbmZ1bmN0aW9uIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMgKSB7XG5cdHZhciBjaGVja0NvbnRleHQsIG1hdGNoZXIsIGosXG5cdFx0bGVuID0gdG9rZW5zLmxlbmd0aCxcblx0XHRsZWFkaW5nUmVsYXRpdmUgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbMF0udHlwZSBdLFxuXHRcdGltcGxpY2l0UmVsYXRpdmUgPSBsZWFkaW5nUmVsYXRpdmUgfHwgRXhwci5yZWxhdGl2ZVtcIiBcIl0sXG5cdFx0aSA9IGxlYWRpbmdSZWxhdGl2ZSA/IDEgOiAwLFxuXG5cdFx0Ly8gVGhlIGZvdW5kYXRpb25hbCBtYXRjaGVyIGVuc3VyZXMgdGhhdCBlbGVtZW50cyBhcmUgcmVhY2hhYmxlIGZyb20gdG9wLWxldmVsIGNvbnRleHQocylcblx0XHRtYXRjaENvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtID09PSBjaGVja0NvbnRleHQ7XG5cdFx0fSwgaW1wbGljaXRSZWxhdGl2ZSwgdHJ1ZSApLFxuXHRcdG1hdGNoQW55Q29udGV4dCA9IGFkZENvbWJpbmF0b3IoIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGluZGV4T2YoIGNoZWNrQ29udGV4dCwgZWxlbSApID4gLTE7XG5cdFx0fSwgaW1wbGljaXRSZWxhdGl2ZSwgdHJ1ZSApLFxuXHRcdG1hdGNoZXJzID0gWyBmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIHJldCA9ICggIWxlYWRpbmdSZWxhdGl2ZSAmJiAoIHhtbCB8fCBjb250ZXh0ICE9PSBvdXRlcm1vc3RDb250ZXh0ICkgKSB8fCAoXG5cdFx0XHRcdChjaGVja0NvbnRleHQgPSBjb250ZXh0KS5ub2RlVHlwZSA/XG5cdFx0XHRcdFx0bWF0Y2hDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSA6XG5cdFx0XHRcdFx0bWF0Y2hBbnlDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSApO1xuXHRcdFx0Ly8gQXZvaWQgaGFuZ2luZyBvbnRvIGVsZW1lbnQgKGlzc3VlICMyOTkpXG5cdFx0XHRjaGVja0NvbnRleHQgPSBudWxsO1xuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9IF07XG5cblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0aWYgKCAobWF0Y2hlciA9IEV4cHIucmVsYXRpdmVbIHRva2Vuc1tpXS50eXBlIF0pICkge1xuXHRcdFx0bWF0Y2hlcnMgPSBbIGFkZENvbWJpbmF0b3IoZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICksIG1hdGNoZXIpIF07XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1hdGNoZXIgPSBFeHByLmZpbHRlclsgdG9rZW5zW2ldLnR5cGUgXS5hcHBseSggbnVsbCwgdG9rZW5zW2ldLm1hdGNoZXMgKTtcblxuXHRcdFx0Ly8gUmV0dXJuIHNwZWNpYWwgdXBvbiBzZWVpbmcgYSBwb3NpdGlvbmFsIG1hdGNoZXJcblx0XHRcdGlmICggbWF0Y2hlclsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHQvLyBGaW5kIHRoZSBuZXh0IHJlbGF0aXZlIG9wZXJhdG9yIChpZiBhbnkpIGZvciBwcm9wZXIgaGFuZGxpbmdcblx0XHRcdFx0aiA9ICsraTtcblx0XHRcdFx0Zm9yICggOyBqIDwgbGVuOyBqKysgKSB7XG5cdFx0XHRcdFx0aWYgKCBFeHByLnJlbGF0aXZlWyB0b2tlbnNbal0udHlwZSBdICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBzZXRNYXRjaGVyKFxuXHRcdFx0XHRcdGkgPiAxICYmIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLFxuXHRcdFx0XHRcdGkgPiAxICYmIHRvU2VsZWN0b3IoXG5cdFx0XHRcdFx0XHQvLyBJZiB0aGUgcHJlY2VkaW5nIHRva2VuIHdhcyBhIGRlc2NlbmRhbnQgY29tYmluYXRvciwgaW5zZXJ0IGFuIGltcGxpY2l0IGFueS1lbGVtZW50IGAqYFxuXHRcdFx0XHRcdFx0dG9rZW5zLnNsaWNlKCAwLCBpIC0gMSApLmNvbmNhdCh7IHZhbHVlOiB0b2tlbnNbIGkgLSAyIF0udHlwZSA9PT0gXCIgXCIgPyBcIipcIiA6IFwiXCIgfSlcblx0XHRcdFx0XHQpLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSxcblx0XHRcdFx0XHRtYXRjaGVyLFxuXHRcdFx0XHRcdGkgPCBqICYmIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMuc2xpY2UoIGksIGogKSApLFxuXHRcdFx0XHRcdGogPCBsZW4gJiYgbWF0Y2hlckZyb21Ub2tlbnMoICh0b2tlbnMgPSB0b2tlbnMuc2xpY2UoIGogKSkgKSxcblx0XHRcdFx0XHRqIDwgbGVuICYmIHRvU2VsZWN0b3IoIHRva2VucyApXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0XHRtYXRjaGVycy5wdXNoKCBtYXRjaGVyICk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSB7XG5cdHZhciBieVNldCA9IHNldE1hdGNoZXJzLmxlbmd0aCA+IDAsXG5cdFx0YnlFbGVtZW50ID0gZWxlbWVudE1hdGNoZXJzLmxlbmd0aCA+IDAsXG5cdFx0c3VwZXJNYXRjaGVyID0gZnVuY3Rpb24oIHNlZWQsIGNvbnRleHQsIHhtbCwgcmVzdWx0cywgb3V0ZXJtb3N0ICkge1xuXHRcdFx0dmFyIGVsZW0sIGosIG1hdGNoZXIsXG5cdFx0XHRcdG1hdGNoZWRDb3VudCA9IDAsXG5cdFx0XHRcdGkgPSBcIjBcIixcblx0XHRcdFx0dW5tYXRjaGVkID0gc2VlZCAmJiBbXSxcblx0XHRcdFx0c2V0TWF0Y2hlZCA9IFtdLFxuXHRcdFx0XHRjb250ZXh0QmFja3VwID0gb3V0ZXJtb3N0Q29udGV4dCxcblx0XHRcdFx0Ly8gV2UgbXVzdCBhbHdheXMgaGF2ZSBlaXRoZXIgc2VlZCBlbGVtZW50cyBvciBvdXRlcm1vc3QgY29udGV4dFxuXHRcdFx0XHRlbGVtcyA9IHNlZWQgfHwgYnlFbGVtZW50ICYmIEV4cHIuZmluZFtcIlRBR1wiXSggXCIqXCIsIG91dGVybW9zdCApLFxuXHRcdFx0XHQvLyBVc2UgaW50ZWdlciBkaXJydW5zIGlmZiB0aGlzIGlzIHRoZSBvdXRlcm1vc3QgbWF0Y2hlclxuXHRcdFx0XHRkaXJydW5zVW5pcXVlID0gKGRpcnJ1bnMgKz0gY29udGV4dEJhY2t1cCA9PSBudWxsID8gMSA6IE1hdGgucmFuZG9tKCkgfHwgMC4xKSxcblx0XHRcdFx0bGVuID0gZWxlbXMubGVuZ3RoO1xuXG5cdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0b3V0ZXJtb3N0Q29udGV4dCA9IGNvbnRleHQgIT09IGRvY3VtZW50ICYmIGNvbnRleHQ7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCBlbGVtZW50cyBwYXNzaW5nIGVsZW1lbnRNYXRjaGVycyBkaXJlY3RseSB0byByZXN1bHRzXG5cdFx0XHQvLyBLZWVwIGBpYCBhIHN0cmluZyBpZiB0aGVyZSBhcmUgbm8gZWxlbWVudHMgc28gYG1hdGNoZWRDb3VudGAgd2lsbCBiZSBcIjAwXCIgYmVsb3dcblx0XHRcdC8vIFN1cHBvcnQ6IElFPDksIFNhZmFyaVxuXHRcdFx0Ly8gVG9sZXJhdGUgTm9kZUxpc3QgcHJvcGVydGllcyAoSUU6IFwibGVuZ3RoXCI7IFNhZmFyaTogPG51bWJlcj4pIG1hdGNoaW5nIGVsZW1lbnRzIGJ5IGlkXG5cdFx0XHRmb3IgKCA7IGkgIT09IGxlbiAmJiAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0XHRcdGlmICggYnlFbGVtZW50ICYmIGVsZW0gKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAobWF0Y2hlciA9IGVsZW1lbnRNYXRjaGVyc1tqKytdKSApIHtcblx0XHRcdFx0XHRcdGlmICggbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3VsdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdFx0XHRkaXJydW5zID0gZGlycnVuc1VuaXF1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBUcmFjayB1bm1hdGNoZWQgZWxlbWVudHMgZm9yIHNldCBmaWx0ZXJzXG5cdFx0XHRcdGlmICggYnlTZXQgKSB7XG5cdFx0XHRcdFx0Ly8gVGhleSB3aWxsIGhhdmUgZ29uZSB0aHJvdWdoIGFsbCBwb3NzaWJsZSBtYXRjaGVyc1xuXHRcdFx0XHRcdGlmICggKGVsZW0gPSAhbWF0Y2hlciAmJiBlbGVtKSApIHtcblx0XHRcdFx0XHRcdG1hdGNoZWRDb3VudC0tO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIExlbmd0aGVuIHRoZSBhcnJheSBmb3IgZXZlcnkgZWxlbWVudCwgbWF0Y2hlZCBvciBub3Rcblx0XHRcdFx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRcdFx0XHR1bm1hdGNoZWQucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBBcHBseSBzZXQgZmlsdGVycyB0byB1bm1hdGNoZWQgZWxlbWVudHNcblx0XHRcdG1hdGNoZWRDb3VudCArPSBpO1xuXHRcdFx0aWYgKCBieVNldCAmJiBpICE9PSBtYXRjaGVkQ291bnQgKSB7XG5cdFx0XHRcdGogPSAwO1xuXHRcdFx0XHR3aGlsZSAoIChtYXRjaGVyID0gc2V0TWF0Y2hlcnNbaisrXSkgKSB7XG5cdFx0XHRcdFx0bWF0Y2hlciggdW5tYXRjaGVkLCBzZXRNYXRjaGVkLCBjb250ZXh0LCB4bWwgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggc2VlZCApIHtcblx0XHRcdFx0XHQvLyBSZWludGVncmF0ZSBlbGVtZW50IG1hdGNoZXMgdG8gZWxpbWluYXRlIHRoZSBuZWVkIGZvciBzb3J0aW5nXG5cdFx0XHRcdFx0aWYgKCBtYXRjaGVkQ291bnQgPiAwICkge1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRcdGlmICggISh1bm1hdGNoZWRbaV0gfHwgc2V0TWF0Y2hlZFtpXSkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0TWF0Y2hlZFtpXSA9IHBvcC5jYWxsKCByZXN1bHRzICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBEaXNjYXJkIGluZGV4IHBsYWNlaG9sZGVyIHZhbHVlcyB0byBnZXQgb25seSBhY3R1YWwgbWF0Y2hlc1xuXHRcdFx0XHRcdHNldE1hdGNoZWQgPSBjb25kZW5zZSggc2V0TWF0Y2hlZCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQWRkIG1hdGNoZXMgdG8gcmVzdWx0c1xuXHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBzZXRNYXRjaGVkICk7XG5cblx0XHRcdFx0Ly8gU2VlZGxlc3Mgc2V0IG1hdGNoZXMgc3VjY2VlZGluZyBtdWx0aXBsZSBzdWNjZXNzZnVsIG1hdGNoZXJzIHN0aXB1bGF0ZSBzb3J0aW5nXG5cdFx0XHRcdGlmICggb3V0ZXJtb3N0ICYmICFzZWVkICYmIHNldE1hdGNoZWQubGVuZ3RoID4gMCAmJlxuXHRcdFx0XHRcdCggbWF0Y2hlZENvdW50ICsgc2V0TWF0Y2hlcnMubGVuZ3RoICkgPiAxICkge1xuXG5cdFx0XHRcdFx0U2l6emxlLnVuaXF1ZVNvcnQoIHJlc3VsdHMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBPdmVycmlkZSBtYW5pcHVsYXRpb24gb2YgZ2xvYmFscyBieSBuZXN0ZWQgbWF0Y2hlcnNcblx0XHRcdGlmICggb3V0ZXJtb3N0ICkge1xuXHRcdFx0XHRkaXJydW5zID0gZGlycnVuc1VuaXF1ZTtcblx0XHRcdFx0b3V0ZXJtb3N0Q29udGV4dCA9IGNvbnRleHRCYWNrdXA7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB1bm1hdGNoZWQ7XG5cdFx0fTtcblxuXHRyZXR1cm4gYnlTZXQgP1xuXHRcdG1hcmtGdW5jdGlvbiggc3VwZXJNYXRjaGVyICkgOlxuXHRcdHN1cGVyTWF0Y2hlcjtcbn1cblxuY29tcGlsZSA9IFNpenpsZS5jb21waWxlID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBtYXRjaCAvKiBJbnRlcm5hbCBVc2UgT25seSAqLyApIHtcblx0dmFyIGksXG5cdFx0c2V0TWF0Y2hlcnMgPSBbXSxcblx0XHRlbGVtZW50TWF0Y2hlcnMgPSBbXSxcblx0XHRjYWNoZWQgPSBjb21waWxlckNhY2hlWyBzZWxlY3RvciArIFwiIFwiIF07XG5cblx0aWYgKCAhY2FjaGVkICkge1xuXHRcdC8vIEdlbmVyYXRlIGEgZnVuY3Rpb24gb2YgcmVjdXJzaXZlIGZ1bmN0aW9ucyB0aGF0IGNhbiBiZSB1c2VkIHRvIGNoZWNrIGVhY2ggZWxlbWVudFxuXHRcdGlmICggIW1hdGNoICkge1xuXHRcdFx0bWF0Y2ggPSB0b2tlbml6ZSggc2VsZWN0b3IgKTtcblx0XHR9XG5cdFx0aSA9IG1hdGNoLmxlbmd0aDtcblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdGNhY2hlZCA9IG1hdGNoZXJGcm9tVG9rZW5zKCBtYXRjaFtpXSApO1xuXHRcdFx0aWYgKCBjYWNoZWRbIGV4cGFuZG8gXSApIHtcblx0XHRcdFx0c2V0TWF0Y2hlcnMucHVzaCggY2FjaGVkICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtZW50TWF0Y2hlcnMucHVzaCggY2FjaGVkICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ2FjaGUgdGhlIGNvbXBpbGVkIGZ1bmN0aW9uXG5cdFx0Y2FjaGVkID0gY29tcGlsZXJDYWNoZSggc2VsZWN0b3IsIG1hdGNoZXJGcm9tR3JvdXBNYXRjaGVycyggZWxlbWVudE1hdGNoZXJzLCBzZXRNYXRjaGVycyApICk7XG5cblx0XHQvLyBTYXZlIHNlbGVjdG9yIGFuZCB0b2tlbml6YXRpb25cblx0XHRjYWNoZWQuc2VsZWN0b3IgPSBzZWxlY3Rvcjtcblx0fVxuXHRyZXR1cm4gY2FjaGVkO1xufTtcblxuLyoqXG4gKiBBIGxvdy1sZXZlbCBzZWxlY3Rpb24gZnVuY3Rpb24gdGhhdCB3b3JrcyB3aXRoIFNpenpsZSdzIGNvbXBpbGVkXG4gKiAgc2VsZWN0b3IgZnVuY3Rpb25zXG4gKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gc2VsZWN0b3IgQSBzZWxlY3RvciBvciBhIHByZS1jb21waWxlZFxuICogIHNlbGVjdG9yIGZ1bmN0aW9uIGJ1aWx0IHdpdGggU2l6emxlLmNvbXBpbGVcbiAqIEBwYXJhbSB7RWxlbWVudH0gY29udGV4dFxuICogQHBhcmFtIHtBcnJheX0gW3Jlc3VsdHNdXG4gKiBAcGFyYW0ge0FycmF5fSBbc2VlZF0gQSBzZXQgb2YgZWxlbWVudHMgdG8gbWF0Y2ggYWdhaW5zdFxuICovXG5zZWxlY3QgPSBTaXp6bGUuc2VsZWN0ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICkge1xuXHR2YXIgaSwgdG9rZW5zLCB0b2tlbiwgdHlwZSwgZmluZCxcblx0XHRjb21waWxlZCA9IHR5cGVvZiBzZWxlY3RvciA9PT0gXCJmdW5jdGlvblwiICYmIHNlbGVjdG9yLFxuXHRcdG1hdGNoID0gIXNlZWQgJiYgdG9rZW5pemUoIChzZWxlY3RvciA9IGNvbXBpbGVkLnNlbGVjdG9yIHx8IHNlbGVjdG9yKSApO1xuXG5cdHJlc3VsdHMgPSByZXN1bHRzIHx8IFtdO1xuXG5cdC8vIFRyeSB0byBtaW5pbWl6ZSBvcGVyYXRpb25zIGlmIHRoZXJlIGlzIG5vIHNlZWQgYW5kIG9ubHkgb25lIGdyb3VwXG5cdGlmICggbWF0Y2gubGVuZ3RoID09PSAxICkge1xuXG5cdFx0Ly8gVGFrZSBhIHNob3J0Y3V0IGFuZCBzZXQgdGhlIGNvbnRleHQgaWYgdGhlIHJvb3Qgc2VsZWN0b3IgaXMgYW4gSURcblx0XHR0b2tlbnMgPSBtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwICk7XG5cdFx0aWYgKCB0b2tlbnMubGVuZ3RoID4gMiAmJiAodG9rZW4gPSB0b2tlbnNbMF0pLnR5cGUgPT09IFwiSURcIiAmJlxuXHRcdFx0XHRzdXBwb3J0LmdldEJ5SWQgJiYgY29udGV4dC5ub2RlVHlwZSA9PT0gOSAmJiBkb2N1bWVudElzSFRNTCAmJlxuXHRcdFx0XHRFeHByLnJlbGF0aXZlWyB0b2tlbnNbMV0udHlwZSBdICkge1xuXG5cdFx0XHRjb250ZXh0ID0gKCBFeHByLmZpbmRbXCJJRFwiXSggdG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKHJ1bmVzY2FwZSwgZnVuZXNjYXBlKSwgY29udGV4dCApIHx8IFtdIClbMF07XG5cdFx0XHRpZiAoICFjb250ZXh0ICkge1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblxuXHRcdFx0Ly8gUHJlY29tcGlsZWQgbWF0Y2hlcnMgd2lsbCBzdGlsbCB2ZXJpZnkgYW5jZXN0cnksIHNvIHN0ZXAgdXAgYSBsZXZlbFxuXHRcdFx0fSBlbHNlIGlmICggY29tcGlsZWQgKSB7XG5cdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0LnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cblx0XHRcdHNlbGVjdG9yID0gc2VsZWN0b3Iuc2xpY2UoIHRva2Vucy5zaGlmdCgpLnZhbHVlLmxlbmd0aCApO1xuXHRcdH1cblxuXHRcdC8vIEZldGNoIGEgc2VlZCBzZXQgZm9yIHJpZ2h0LXRvLWxlZnQgbWF0Y2hpbmdcblx0XHRpID0gbWF0Y2hFeHByW1wibmVlZHNDb250ZXh0XCJdLnRlc3QoIHNlbGVjdG9yICkgPyAwIDogdG9rZW5zLmxlbmd0aDtcblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdHRva2VuID0gdG9rZW5zW2ldO1xuXG5cdFx0XHQvLyBBYm9ydCBpZiB3ZSBoaXQgYSBjb21iaW5hdG9yXG5cdFx0XHRpZiAoIEV4cHIucmVsYXRpdmVbICh0eXBlID0gdG9rZW4udHlwZSkgXSApIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIChmaW5kID0gRXhwci5maW5kWyB0eXBlIF0pICkge1xuXHRcdFx0XHQvLyBTZWFyY2gsIGV4cGFuZGluZyBjb250ZXh0IGZvciBsZWFkaW5nIHNpYmxpbmcgY29tYmluYXRvcnNcblx0XHRcdFx0aWYgKCAoc2VlZCA9IGZpbmQoXG5cdFx0XHRcdFx0dG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLFxuXHRcdFx0XHRcdHJzaWJsaW5nLnRlc3QoIHRva2Vuc1swXS50eXBlICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHRcblx0XHRcdFx0KSkgKSB7XG5cblx0XHRcdFx0XHQvLyBJZiBzZWVkIGlzIGVtcHR5IG9yIG5vIHRva2VucyByZW1haW4sIHdlIGNhbiByZXR1cm4gZWFybHlcblx0XHRcdFx0XHR0b2tlbnMuc3BsaWNlKCBpLCAxICk7XG5cdFx0XHRcdFx0c2VsZWN0b3IgPSBzZWVkLmxlbmd0aCAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKTtcblx0XHRcdFx0XHRpZiAoICFzZWxlY3RvciApIHtcblx0XHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIHNlZWQgKTtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ29tcGlsZSBhbmQgZXhlY3V0ZSBhIGZpbHRlcmluZyBmdW5jdGlvbiBpZiBvbmUgaXMgbm90IHByb3ZpZGVkXG5cdC8vIFByb3ZpZGUgYG1hdGNoYCB0byBhdm9pZCByZXRva2VuaXphdGlvbiBpZiB3ZSBtb2RpZmllZCB0aGUgc2VsZWN0b3IgYWJvdmVcblx0KCBjb21waWxlZCB8fCBjb21waWxlKCBzZWxlY3RvciwgbWF0Y2ggKSApKFxuXHRcdHNlZWQsXG5cdFx0Y29udGV4dCxcblx0XHQhZG9jdW1lbnRJc0hUTUwsXG5cdFx0cmVzdWx0cyxcblx0XHRyc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0XG5cdCk7XG5cdHJldHVybiByZXN1bHRzO1xufTtcblxuLy8gT25lLXRpbWUgYXNzaWdubWVudHNcblxuLy8gU29ydCBzdGFiaWxpdHlcbnN1cHBvcnQuc29ydFN0YWJsZSA9IGV4cGFuZG8uc3BsaXQoXCJcIikuc29ydCggc29ydE9yZGVyICkuam9pbihcIlwiKSA9PT0gZXhwYW5kbztcblxuLy8gU3VwcG9ydDogQ2hyb21lIDE0LTM1K1xuLy8gQWx3YXlzIGFzc3VtZSBkdXBsaWNhdGVzIGlmIHRoZXkgYXJlbid0IHBhc3NlZCB0byB0aGUgY29tcGFyaXNvbiBmdW5jdGlvblxuc3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzID0gISFoYXNEdXBsaWNhdGU7XG5cbi8vIEluaXRpYWxpemUgYWdhaW5zdCB0aGUgZGVmYXVsdCBkb2N1bWVudFxuc2V0RG9jdW1lbnQoKTtcblxuLy8gU3VwcG9ydDogV2Via2l0PDUzNy4zMiAtIFNhZmFyaSA2LjAuMy9DaHJvbWUgMjUgKGZpeGVkIGluIENocm9tZSAyNylcbi8vIERldGFjaGVkIG5vZGVzIGNvbmZvdW5kaW5nbHkgZm9sbG93ICplYWNoIG90aGVyKlxuc3VwcG9ydC5zb3J0RGV0YWNoZWQgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdjEgKSB7XG5cdC8vIFNob3VsZCByZXR1cm4gMSwgYnV0IHJldHVybnMgNCAoZm9sbG93aW5nKVxuXHRyZXR1cm4gZGl2MS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSApICYgMTtcbn0pO1xuXG4vLyBTdXBwb3J0OiBJRTw4XG4vLyBQcmV2ZW50IGF0dHJpYnV0ZS9wcm9wZXJ0eSBcImludGVycG9sYXRpb25cIlxuLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L21zNTM2NDI5JTI4VlMuODUlMjkuYXNweFxuaWYgKCAhYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdGRpdi5pbm5lckhUTUwgPSBcIjxhIGhyZWY9JyMnPjwvYT5cIjtcblx0cmV0dXJuIGRpdi5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcImhyZWZcIikgPT09IFwiI1wiIDtcbn0pICkge1xuXHRhZGRIYW5kbGUoIFwidHlwZXxocmVmfGhlaWdodHx3aWR0aFwiLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7XG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUsIG5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJ0eXBlXCIgPyAxIDogMiApO1xuXHRcdH1cblx0fSk7XG59XG5cbi8vIFN1cHBvcnQ6IElFPDlcbi8vIFVzZSBkZWZhdWx0VmFsdWUgaW4gcGxhY2Ugb2YgZ2V0QXR0cmlidXRlKFwidmFsdWVcIilcbmlmICggIXN1cHBvcnQuYXR0cmlidXRlcyB8fCAhYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdGRpdi5pbm5lckhUTUwgPSBcIjxpbnB1dC8+XCI7XG5cdGRpdi5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSggXCJ2YWx1ZVwiLCBcIlwiICk7XG5cdHJldHVybiBkaXYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiApID09PSBcIlwiO1xufSkgKSB7XG5cdGFkZEhhbmRsZSggXCJ2YWx1ZVwiLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7XG5cdFx0aWYgKCAhaXNYTUwgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImlucHV0XCIgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kZWZhdWx0VmFsdWU7XG5cdFx0fVxuXHR9KTtcbn1cblxuLy8gU3VwcG9ydDogSUU8OVxuLy8gVXNlIGdldEF0dHJpYnV0ZU5vZGUgdG8gZmV0Y2ggYm9vbGVhbnMgd2hlbiBnZXRBdHRyaWJ1dGUgbGllc1xuaWYgKCAhYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdHJldHVybiBkaXYuZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIikgPT0gbnVsbDtcbn0pICkge1xuXHRhZGRIYW5kbGUoIGJvb2xlYW5zLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7XG5cdFx0dmFyIHZhbDtcblx0XHRpZiAoICFpc1hNTCApIHtcblx0XHRcdHJldHVybiBlbGVtWyBuYW1lIF0gPT09IHRydWUgPyBuYW1lLnRvTG93ZXJDYXNlKCkgOlxuXHRcdFx0XHRcdCh2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoIG5hbWUgKSkgJiYgdmFsLnNwZWNpZmllZCA/XG5cdFx0XHRcdFx0dmFsLnZhbHVlIDpcblx0XHRcdFx0bnVsbDtcblx0XHR9XG5cdH0pO1xufVxuXG5yZXR1cm4gU2l6emxlO1xuXG59KSggd2luZG93ICk7XG5cblxuXG5qUXVlcnkuZmluZCA9IFNpenpsZTtcbmpRdWVyeS5leHByID0gU2l6emxlLnNlbGVjdG9ycztcbmpRdWVyeS5leHByW1wiOlwiXSA9IGpRdWVyeS5leHByLnBzZXVkb3M7XG5qUXVlcnkudW5pcXVlID0gU2l6emxlLnVuaXF1ZVNvcnQ7XG5qUXVlcnkudGV4dCA9IFNpenpsZS5nZXRUZXh0O1xualF1ZXJ5LmlzWE1MRG9jID0gU2l6emxlLmlzWE1MO1xualF1ZXJ5LmNvbnRhaW5zID0gU2l6emxlLmNvbnRhaW5zO1xuXG5cblxudmFyIHJuZWVkc0NvbnRleHQgPSBqUXVlcnkuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQ7XG5cbnZhciByc2luZ2xlVGFnID0gKC9ePChcXHcrKVxccypcXC8/Pig/OjxcXC9cXDE+fCkkLyk7XG5cblxuXG52YXIgcmlzU2ltcGxlID0gL14uW146I1xcW1xcLixdKiQvO1xuXG4vLyBJbXBsZW1lbnQgdGhlIGlkZW50aWNhbCBmdW5jdGlvbmFsaXR5IGZvciBmaWx0ZXIgYW5kIG5vdFxuZnVuY3Rpb24gd2lubm93KCBlbGVtZW50cywgcXVhbGlmaWVyLCBub3QgKSB7XG5cdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHF1YWxpZmllciApICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtLCBpICkge1xuXHRcdFx0LyoganNoaW50IC1XMDE4ICovXG5cdFx0XHRyZXR1cm4gISFxdWFsaWZpZXIuY2FsbCggZWxlbSwgaSwgZWxlbSApICE9PSBub3Q7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGlmICggcXVhbGlmaWVyLm5vZGVUeXBlICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuICggZWxlbSA9PT0gcXVhbGlmaWVyICkgIT09IG5vdDtcblx0XHR9KTtcblxuXHR9XG5cblx0aWYgKCB0eXBlb2YgcXVhbGlmaWVyID09PSBcInN0cmluZ1wiICkge1xuXHRcdGlmICggcmlzU2ltcGxlLnRlc3QoIHF1YWxpZmllciApICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5maWx0ZXIoIHF1YWxpZmllciwgZWxlbWVudHMsIG5vdCApO1xuXHRcdH1cblxuXHRcdHF1YWxpZmllciA9IGpRdWVyeS5maWx0ZXIoIHF1YWxpZmllciwgZWxlbWVudHMgKTtcblx0fVxuXG5cdHJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiAoIGluZGV4T2YuY2FsbCggcXVhbGlmaWVyLCBlbGVtICkgPj0gMCApICE9PSBub3Q7XG5cdH0pO1xufVxuXG5qUXVlcnkuZmlsdGVyID0gZnVuY3Rpb24oIGV4cHIsIGVsZW1zLCBub3QgKSB7XG5cdHZhciBlbGVtID0gZWxlbXNbIDAgXTtcblxuXHRpZiAoIG5vdCApIHtcblx0XHRleHByID0gXCI6bm90KFwiICsgZXhwciArIFwiKVwiO1xuXHR9XG5cblx0cmV0dXJuIGVsZW1zLmxlbmd0aCA9PT0gMSAmJiBlbGVtLm5vZGVUeXBlID09PSAxID9cblx0XHRqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoIGVsZW0sIGV4cHIgKSA/IFsgZWxlbSBdIDogW10gOlxuXHRcdGpRdWVyeS5maW5kLm1hdGNoZXMoIGV4cHIsIGpRdWVyeS5ncmVwKCBlbGVtcywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5ub2RlVHlwZSA9PT0gMTtcblx0XHR9KSk7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0ZmluZDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBpLFxuXHRcdFx0bGVuID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRyZXQgPSBbXSxcblx0XHRcdHNlbGYgPSB0aGlzO1xuXG5cdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGpRdWVyeSggc2VsZWN0b3IgKS5maWx0ZXIoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdFx0aWYgKCBqUXVlcnkuY29udGFpbnMoIHNlbGZbIGkgXSwgdGhpcyApICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KSApO1xuXHRcdH1cblxuXHRcdGZvciAoIGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRqUXVlcnkuZmluZCggc2VsZWN0b3IsIHNlbGZbIGkgXSwgcmV0ICk7XG5cdFx0fVxuXG5cdFx0Ly8gTmVlZGVkIGJlY2F1c2UgJCggc2VsZWN0b3IsIGNvbnRleHQgKSBiZWNvbWVzICQoIGNvbnRleHQgKS5maW5kKCBzZWxlY3RvciApXG5cdFx0cmV0ID0gdGhpcy5wdXNoU3RhY2soIGxlbiA+IDEgPyBqUXVlcnkudW5pcXVlKCByZXQgKSA6IHJldCApO1xuXHRcdHJldC5zZWxlY3RvciA9IHRoaXMuc2VsZWN0b3IgPyB0aGlzLnNlbGVjdG9yICsgXCIgXCIgKyBzZWxlY3RvciA6IHNlbGVjdG9yO1xuXHRcdHJldHVybiByZXQ7XG5cdH0sXG5cdGZpbHRlcjogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KHRoaXMsIHNlbGVjdG9yIHx8IFtdLCBmYWxzZSkgKTtcblx0fSxcblx0bm90OiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCB3aW5ub3codGhpcywgc2VsZWN0b3IgfHwgW10sIHRydWUpICk7XG5cdH0sXG5cdGlzOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuICEhd2lubm93KFxuXHRcdFx0dGhpcyxcblxuXHRcdFx0Ly8gSWYgdGhpcyBpcyBhIHBvc2l0aW9uYWwvcmVsYXRpdmUgc2VsZWN0b3IsIGNoZWNrIG1lbWJlcnNoaXAgaW4gdGhlIHJldHVybmVkIHNldFxuXHRcdFx0Ly8gc28gJChcInA6Zmlyc3RcIikuaXMoXCJwOmxhc3RcIikgd29uJ3QgcmV0dXJuIHRydWUgZm9yIGEgZG9jIHdpdGggdHdvIFwicFwiLlxuXHRcdFx0dHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICYmIHJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3IgKSA/XG5cdFx0XHRcdGpRdWVyeSggc2VsZWN0b3IgKSA6XG5cdFx0XHRcdHNlbGVjdG9yIHx8IFtdLFxuXHRcdFx0ZmFsc2Vcblx0XHQpLmxlbmd0aDtcblx0fVxufSk7XG5cblxuLy8gSW5pdGlhbGl6ZSBhIGpRdWVyeSBvYmplY3RcblxuXG4vLyBBIGNlbnRyYWwgcmVmZXJlbmNlIHRvIHRoZSByb290IGpRdWVyeShkb2N1bWVudClcbnZhciByb290alF1ZXJ5LFxuXG5cdC8vIEEgc2ltcGxlIHdheSB0byBjaGVjayBmb3IgSFRNTCBzdHJpbmdzXG5cdC8vIFByaW9yaXRpemUgI2lkIG92ZXIgPHRhZz4gdG8gYXZvaWQgWFNTIHZpYSBsb2NhdGlvbi5oYXNoICgjOTUyMSlcblx0Ly8gU3RyaWN0IEhUTUwgcmVjb2duaXRpb24gKCMxMTI5MDogbXVzdCBzdGFydCB3aXRoIDwpXG5cdHJxdWlja0V4cHIgPSAvXig/OlxccyooPFtcXHdcXFddKz4pW14+XSp8IyhbXFx3LV0qKSkkLyxcblxuXHRpbml0ID0galF1ZXJ5LmZuLmluaXQgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQgKSB7XG5cdFx0dmFyIG1hdGNoLCBlbGVtO1xuXG5cdFx0Ly8gSEFORExFOiAkKFwiXCIpLCAkKG51bGwpLCAkKHVuZGVmaW5lZCksICQoZmFsc2UpXG5cdFx0aWYgKCAhc2VsZWN0b3IgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cblx0XHQvLyBIYW5kbGUgSFRNTCBzdHJpbmdzXG5cdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRpZiAoIHNlbGVjdG9yWzBdID09PSBcIjxcIiAmJiBzZWxlY3Rvclsgc2VsZWN0b3IubGVuZ3RoIC0gMSBdID09PSBcIj5cIiAmJiBzZWxlY3Rvci5sZW5ndGggPj0gMyApIHtcblx0XHRcdFx0Ly8gQXNzdW1lIHRoYXQgc3RyaW5ncyB0aGF0IHN0YXJ0IGFuZCBlbmQgd2l0aCA8PiBhcmUgSFRNTCBhbmQgc2tpcCB0aGUgcmVnZXggY2hlY2tcblx0XHRcdFx0bWF0Y2ggPSBbIG51bGwsIHNlbGVjdG9yLCBudWxsIF07XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYXRjaCBodG1sIG9yIG1ha2Ugc3VyZSBubyBjb250ZXh0IGlzIHNwZWNpZmllZCBmb3IgI2lkXG5cdFx0XHRpZiAoIG1hdGNoICYmIChtYXRjaFsxXSB8fCAhY29udGV4dCkgKSB7XG5cblx0XHRcdFx0Ly8gSEFORExFOiAkKGh0bWwpIC0+ICQoYXJyYXkpXG5cdFx0XHRcdGlmICggbWF0Y2hbMV0gKSB7XG5cdFx0XHRcdFx0Y29udGV4dCA9IGNvbnRleHQgaW5zdGFuY2VvZiBqUXVlcnkgPyBjb250ZXh0WzBdIDogY29udGV4dDtcblxuXHRcdFx0XHRcdC8vIE9wdGlvbiB0byBydW4gc2NyaXB0cyBpcyB0cnVlIGZvciBiYWNrLWNvbXBhdFxuXHRcdFx0XHRcdC8vIEludGVudGlvbmFsbHkgbGV0IHRoZSBlcnJvciBiZSB0aHJvd24gaWYgcGFyc2VIVE1MIGlzIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCB0aGlzLCBqUXVlcnkucGFyc2VIVE1MKFxuXHRcdFx0XHRcdFx0bWF0Y2hbMV0sXG5cdFx0XHRcdFx0XHRjb250ZXh0ICYmIGNvbnRleHQubm9kZVR5cGUgPyBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCA6IGRvY3VtZW50LFxuXHRcdFx0XHRcdFx0dHJ1ZVxuXHRcdFx0XHRcdCkgKTtcblxuXHRcdFx0XHRcdC8vIEhBTkRMRTogJChodG1sLCBwcm9wcylcblx0XHRcdFx0XHRpZiAoIHJzaW5nbGVUYWcudGVzdCggbWF0Y2hbMV0gKSAmJiBqUXVlcnkuaXNQbGFpbk9iamVjdCggY29udGV4dCApICkge1xuXHRcdFx0XHRcdFx0Zm9yICggbWF0Y2ggaW4gY29udGV4dCApIHtcblx0XHRcdFx0XHRcdFx0Ly8gUHJvcGVydGllcyBvZiBjb250ZXh0IGFyZSBjYWxsZWQgYXMgbWV0aG9kcyBpZiBwb3NzaWJsZVxuXHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB0aGlzWyBtYXRjaCBdICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpc1sgbWF0Y2ggXSggY29udGV4dFsgbWF0Y2ggXSApO1xuXG5cdFx0XHRcdFx0XHRcdC8vIC4uLmFuZCBvdGhlcndpc2Ugc2V0IGFzIGF0dHJpYnV0ZXNcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmF0dHIoIG1hdGNoLCBjb250ZXh0WyBtYXRjaCBdICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdFx0XHQvLyBIQU5ETEU6ICQoI2lkKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggbWF0Y2hbMl0gKTtcblxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEJsYWNrYmVycnkgNC42XG5cdFx0XHRcdFx0Ly8gZ0VCSUQgcmV0dXJucyBub2RlcyBubyBsb25nZXIgaW4gdGhlIGRvY3VtZW50ICgjNjk2Mylcblx0XHRcdFx0XHRpZiAoIGVsZW0gJiYgZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRcdFx0Ly8gSW5qZWN0IHRoZSBlbGVtZW50IGRpcmVjdGx5IGludG8gdGhlIGpRdWVyeSBvYmplY3Rcblx0XHRcdFx0XHRcdHRoaXMubGVuZ3RoID0gMTtcblx0XHRcdFx0XHRcdHRoaXNbMF0gPSBlbGVtO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHRoaXMuY29udGV4dCA9IGRvY3VtZW50O1xuXHRcdFx0XHRcdHRoaXMuc2VsZWN0b3IgPSBzZWxlY3Rvcjtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBIQU5ETEU6ICQoZXhwciwgJCguLi4pKVxuXHRcdFx0fSBlbHNlIGlmICggIWNvbnRleHQgfHwgY29udGV4dC5qcXVlcnkgKSB7XG5cdFx0XHRcdHJldHVybiAoIGNvbnRleHQgfHwgcm9vdGpRdWVyeSApLmZpbmQoIHNlbGVjdG9yICk7XG5cblx0XHRcdC8vIEhBTkRMRTogJChleHByLCBjb250ZXh0KVxuXHRcdFx0Ly8gKHdoaWNoIGlzIGp1c3QgZXF1aXZhbGVudCB0bzogJChjb250ZXh0KS5maW5kKGV4cHIpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5jb25zdHJ1Y3RvciggY29udGV4dCApLmZpbmQoIHNlbGVjdG9yICk7XG5cdFx0XHR9XG5cblx0XHQvLyBIQU5ETEU6ICQoRE9NRWxlbWVudClcblx0XHR9IGVsc2UgaWYgKCBzZWxlY3Rvci5ub2RlVHlwZSApIHtcblx0XHRcdHRoaXMuY29udGV4dCA9IHRoaXNbMF0gPSBzZWxlY3Rvcjtcblx0XHRcdHRoaXMubGVuZ3RoID0gMTtcblx0XHRcdHJldHVybiB0aGlzO1xuXG5cdFx0Ly8gSEFORExFOiAkKGZ1bmN0aW9uKVxuXHRcdC8vIFNob3J0Y3V0IGZvciBkb2N1bWVudCByZWFkeVxuXHRcdH0gZWxzZSBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBzZWxlY3RvciApICkge1xuXHRcdFx0cmV0dXJuIHR5cGVvZiByb290alF1ZXJ5LnJlYWR5ICE9PSBcInVuZGVmaW5lZFwiID9cblx0XHRcdFx0cm9vdGpRdWVyeS5yZWFkeSggc2VsZWN0b3IgKSA6XG5cdFx0XHRcdC8vIEV4ZWN1dGUgaW1tZWRpYXRlbHkgaWYgcmVhZHkgaXMgbm90IHByZXNlbnRcblx0XHRcdFx0c2VsZWN0b3IoIGpRdWVyeSApO1xuXHRcdH1cblxuXHRcdGlmICggc2VsZWN0b3Iuc2VsZWN0b3IgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHRoaXMuc2VsZWN0b3IgPSBzZWxlY3Rvci5zZWxlY3Rvcjtcblx0XHRcdHRoaXMuY29udGV4dCA9IHNlbGVjdG9yLmNvbnRleHQ7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGpRdWVyeS5tYWtlQXJyYXkoIHNlbGVjdG9yLCB0aGlzICk7XG5cdH07XG5cbi8vIEdpdmUgdGhlIGluaXQgZnVuY3Rpb24gdGhlIGpRdWVyeSBwcm90b3R5cGUgZm9yIGxhdGVyIGluc3RhbnRpYXRpb25cbmluaXQucHJvdG90eXBlID0galF1ZXJ5LmZuO1xuXG4vLyBJbml0aWFsaXplIGNlbnRyYWwgcmVmZXJlbmNlXG5yb290alF1ZXJ5ID0galF1ZXJ5KCBkb2N1bWVudCApO1xuXG5cbnZhciBycGFyZW50c3ByZXYgPSAvXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxcblx0Ly8gTWV0aG9kcyBndWFyYW50ZWVkIHRvIHByb2R1Y2UgYSB1bmlxdWUgc2V0IHdoZW4gc3RhcnRpbmcgZnJvbSBhIHVuaXF1ZSBzZXRcblx0Z3VhcmFudGVlZFVuaXF1ZSA9IHtcblx0XHRjaGlsZHJlbjogdHJ1ZSxcblx0XHRjb250ZW50czogdHJ1ZSxcblx0XHRuZXh0OiB0cnVlLFxuXHRcdHByZXY6IHRydWVcblx0fTtcblxualF1ZXJ5LmV4dGVuZCh7XG5cdGRpcjogZnVuY3Rpb24oIGVsZW0sIGRpciwgdW50aWwgKSB7XG5cdFx0dmFyIG1hdGNoZWQgPSBbXSxcblx0XHRcdHRydW5jYXRlID0gdW50aWwgIT09IHVuZGVmaW5lZDtcblxuXHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgJiYgZWxlbS5ub2RlVHlwZSAhPT0gOSApIHtcblx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0aWYgKCB0cnVuY2F0ZSAmJiBqUXVlcnkoIGVsZW0gKS5pcyggdW50aWwgKSApIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHRtYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIG1hdGNoZWQ7XG5cdH0sXG5cblx0c2libGluZzogZnVuY3Rpb24oIG4sIGVsZW0gKSB7XG5cdFx0dmFyIG1hdGNoZWQgPSBbXTtcblxuXHRcdGZvciAoIDsgbjsgbiA9IG4ubmV4dFNpYmxpbmcgKSB7XG5cdFx0XHRpZiAoIG4ubm9kZVR5cGUgPT09IDEgJiYgbiAhPT0gZWxlbSApIHtcblx0XHRcdFx0bWF0Y2hlZC5wdXNoKCBuICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1hdGNoZWQ7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0aGFzOiBmdW5jdGlvbiggdGFyZ2V0ICkge1xuXHRcdHZhciB0YXJnZXRzID0galF1ZXJ5KCB0YXJnZXQsIHRoaXMgKSxcblx0XHRcdGwgPSB0YXJnZXRzLmxlbmd0aDtcblxuXHRcdHJldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpIHtcblx0XHRcdHZhciBpID0gMDtcblx0XHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0aWYgKCBqUXVlcnkuY29udGFpbnMoIHRoaXMsIHRhcmdldHNbaV0gKSApIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdGNsb3Nlc3Q6IGZ1bmN0aW9uKCBzZWxlY3RvcnMsIGNvbnRleHQgKSB7XG5cdFx0dmFyIGN1cixcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0bWF0Y2hlZCA9IFtdLFxuXHRcdFx0cG9zID0gcm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvcnMgKSB8fCB0eXBlb2Ygc2VsZWN0b3JzICE9PSBcInN0cmluZ1wiID9cblx0XHRcdFx0alF1ZXJ5KCBzZWxlY3RvcnMsIGNvbnRleHQgfHwgdGhpcy5jb250ZXh0ICkgOlxuXHRcdFx0XHQwO1xuXG5cdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0Zm9yICggY3VyID0gdGhpc1tpXTsgY3VyICYmIGN1ciAhPT0gY29udGV4dDsgY3VyID0gY3VyLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdC8vIEFsd2F5cyBza2lwIGRvY3VtZW50IGZyYWdtZW50c1xuXHRcdFx0XHRpZiAoIGN1ci5ub2RlVHlwZSA8IDExICYmIChwb3MgP1xuXHRcdFx0XHRcdHBvcy5pbmRleChjdXIpID4gLTEgOlxuXG5cdFx0XHRcdFx0Ly8gRG9uJ3QgcGFzcyBub24tZWxlbWVudHMgdG8gU2l6emxlXG5cdFx0XHRcdFx0Y3VyLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdFx0XHRqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoY3VyLCBzZWxlY3RvcnMpKSApIHtcblxuXHRcdFx0XHRcdG1hdGNoZWQucHVzaCggY3VyICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIG1hdGNoZWQubGVuZ3RoID4gMSA/IGpRdWVyeS51bmlxdWUoIG1hdGNoZWQgKSA6IG1hdGNoZWQgKTtcblx0fSxcblxuXHQvLyBEZXRlcm1pbmUgdGhlIHBvc2l0aW9uIG9mIGFuIGVsZW1lbnQgd2l0aGluIHRoZSBzZXRcblx0aW5kZXg6IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0Ly8gTm8gYXJndW1lbnQsIHJldHVybiBpbmRleCBpbiBwYXJlbnRcblx0XHRpZiAoICFlbGVtICkge1xuXHRcdFx0cmV0dXJuICggdGhpc1sgMCBdICYmIHRoaXNbIDAgXS5wYXJlbnROb2RlICkgPyB0aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aCA6IC0xO1xuXHRcdH1cblxuXHRcdC8vIEluZGV4IGluIHNlbGVjdG9yXG5cdFx0aWYgKCB0eXBlb2YgZWxlbSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHJldHVybiBpbmRleE9mLmNhbGwoIGpRdWVyeSggZWxlbSApLCB0aGlzWyAwIF0gKTtcblx0XHR9XG5cblx0XHQvLyBMb2NhdGUgdGhlIHBvc2l0aW9uIG9mIHRoZSBkZXNpcmVkIGVsZW1lbnRcblx0XHRyZXR1cm4gaW5kZXhPZi5jYWxsKCB0aGlzLFxuXG5cdFx0XHQvLyBJZiBpdCByZWNlaXZlcyBhIGpRdWVyeSBvYmplY3QsIHRoZSBmaXJzdCBlbGVtZW50IGlzIHVzZWRcblx0XHRcdGVsZW0uanF1ZXJ5ID8gZWxlbVsgMCBdIDogZWxlbVxuXHRcdCk7XG5cdH0sXG5cblx0YWRkOiBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQgKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKFxuXHRcdFx0alF1ZXJ5LnVuaXF1ZShcblx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCB0aGlzLmdldCgpLCBqUXVlcnkoIHNlbGVjdG9yLCBjb250ZXh0ICkgKVxuXHRcdFx0KVxuXHRcdCk7XG5cdH0sXG5cblx0YWRkQmFjazogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLmFkZCggc2VsZWN0b3IgPT0gbnVsbCA/XG5cdFx0XHR0aGlzLnByZXZPYmplY3QgOiB0aGlzLnByZXZPYmplY3QuZmlsdGVyKHNlbGVjdG9yKVxuXHRcdCk7XG5cdH1cbn0pO1xuXG5mdW5jdGlvbiBzaWJsaW5nKCBjdXIsIGRpciApIHtcblx0d2hpbGUgKCAoY3VyID0gY3VyW2Rpcl0pICYmIGN1ci5ub2RlVHlwZSAhPT0gMSApIHt9XG5cdHJldHVybiBjdXI7XG59XG5cbmpRdWVyeS5lYWNoKHtcblx0cGFyZW50OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdHJldHVybiBwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlICE9PSAxMSA/IHBhcmVudCA6IG51bGw7XG5cdH0sXG5cdHBhcmVudHM6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBqUXVlcnkuZGlyKCBlbGVtLCBcInBhcmVudE5vZGVcIiApO1xuXHR9LFxuXHRwYXJlbnRzVW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIsIHVudGlsICk7XG5cdH0sXG5cdG5leHQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5nKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcblx0fSxcblx0cHJldjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmcoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dEFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwibmV4dFNpYmxpbmdcIiApO1xuXHR9LFxuXHRwcmV2QWxsOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmRpciggZWxlbSwgXCJwcmV2aW91c1NpYmxpbmdcIiApO1xuXHR9LFxuXHRuZXh0VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiLCB1bnRpbCApO1xuXHR9LFxuXHRwcmV2VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmRpciggZWxlbSwgXCJwcmV2aW91c1NpYmxpbmdcIiwgdW50aWwgKTtcblx0fSxcblx0c2libGluZ3M6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBqUXVlcnkuc2libGluZyggKCBlbGVtLnBhcmVudE5vZGUgfHwge30gKS5maXJzdENoaWxkLCBlbGVtICk7XG5cdH0sXG5cdGNoaWxkcmVuOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LnNpYmxpbmcoIGVsZW0uZmlyc3RDaGlsZCApO1xuXHR9LFxuXHRjb250ZW50czogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGVsZW0uY29udGVudERvY3VtZW50IHx8IGpRdWVyeS5tZXJnZSggW10sIGVsZW0uY2hpbGROb2RlcyApO1xuXHR9XG59LCBmdW5jdGlvbiggbmFtZSwgZm4gKSB7XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHVudGlsLCBzZWxlY3RvciApIHtcblx0XHR2YXIgbWF0Y2hlZCA9IGpRdWVyeS5tYXAoIHRoaXMsIGZuLCB1bnRpbCApO1xuXG5cdFx0aWYgKCBuYW1lLnNsaWNlKCAtNSApICE9PSBcIlVudGlsXCIgKSB7XG5cdFx0XHRzZWxlY3RvciA9IHVudGlsO1xuXHRcdH1cblxuXHRcdGlmICggc2VsZWN0b3IgJiYgdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0bWF0Y2hlZCA9IGpRdWVyeS5maWx0ZXIoIHNlbGVjdG9yLCBtYXRjaGVkICk7XG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzLmxlbmd0aCA+IDEgKSB7XG5cdFx0XHQvLyBSZW1vdmUgZHVwbGljYXRlc1xuXHRcdFx0aWYgKCAhZ3VhcmFudGVlZFVuaXF1ZVsgbmFtZSBdICkge1xuXHRcdFx0XHRqUXVlcnkudW5pcXVlKCBtYXRjaGVkICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJldmVyc2Ugb3JkZXIgZm9yIHBhcmVudHMqIGFuZCBwcmV2LWRlcml2YXRpdmVzXG5cdFx0XHRpZiAoIHJwYXJlbnRzcHJldi50ZXN0KCBuYW1lICkgKSB7XG5cdFx0XHRcdG1hdGNoZWQucmV2ZXJzZSgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggbWF0Y2hlZCApO1xuXHR9O1xufSk7XG52YXIgcm5vdHdoaXRlID0gKC9cXFMrL2cpO1xuXG5cblxuLy8gU3RyaW5nIHRvIE9iamVjdCBvcHRpb25zIGZvcm1hdCBjYWNoZVxudmFyIG9wdGlvbnNDYWNoZSA9IHt9O1xuXG4vLyBDb252ZXJ0IFN0cmluZy1mb3JtYXR0ZWQgb3B0aW9ucyBpbnRvIE9iamVjdC1mb3JtYXR0ZWQgb25lcyBhbmQgc3RvcmUgaW4gY2FjaGVcbmZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnMoIG9wdGlvbnMgKSB7XG5cdHZhciBvYmplY3QgPSBvcHRpb25zQ2FjaGVbIG9wdGlvbnMgXSA9IHt9O1xuXHRqUXVlcnkuZWFjaCggb3B0aW9ucy5tYXRjaCggcm5vdHdoaXRlICkgfHwgW10sIGZ1bmN0aW9uKCBfLCBmbGFnICkge1xuXHRcdG9iamVjdFsgZmxhZyBdID0gdHJ1ZTtcblx0fSk7XG5cdHJldHVybiBvYmplY3Q7XG59XG5cbi8qXG4gKiBDcmVhdGUgYSBjYWxsYmFjayBsaXN0IHVzaW5nIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczpcbiAqXG4gKlx0b3B0aW9uczogYW4gb3B0aW9uYWwgbGlzdCBvZiBzcGFjZS1zZXBhcmF0ZWQgb3B0aW9ucyB0aGF0IHdpbGwgY2hhbmdlIGhvd1xuICpcdFx0XHR0aGUgY2FsbGJhY2sgbGlzdCBiZWhhdmVzIG9yIGEgbW9yZSB0cmFkaXRpb25hbCBvcHRpb24gb2JqZWN0XG4gKlxuICogQnkgZGVmYXVsdCBhIGNhbGxiYWNrIGxpc3Qgd2lsbCBhY3QgbGlrZSBhbiBldmVudCBjYWxsYmFjayBsaXN0IGFuZCBjYW4gYmVcbiAqIFwiZmlyZWRcIiBtdWx0aXBsZSB0aW1lcy5cbiAqXG4gKiBQb3NzaWJsZSBvcHRpb25zOlxuICpcbiAqXHRvbmNlOlx0XHRcdHdpbGwgZW5zdXJlIHRoZSBjYWxsYmFjayBsaXN0IGNhbiBvbmx5IGJlIGZpcmVkIG9uY2UgKGxpa2UgYSBEZWZlcnJlZClcbiAqXG4gKlx0bWVtb3J5Olx0XHRcdHdpbGwga2VlcCB0cmFjayBvZiBwcmV2aW91cyB2YWx1ZXMgYW5kIHdpbGwgY2FsbCBhbnkgY2FsbGJhY2sgYWRkZWRcbiAqXHRcdFx0XHRcdGFmdGVyIHRoZSBsaXN0IGhhcyBiZWVuIGZpcmVkIHJpZ2h0IGF3YXkgd2l0aCB0aGUgbGF0ZXN0IFwibWVtb3JpemVkXCJcbiAqXHRcdFx0XHRcdHZhbHVlcyAobGlrZSBhIERlZmVycmVkKVxuICpcbiAqXHR1bmlxdWU6XHRcdFx0d2lsbCBlbnN1cmUgYSBjYWxsYmFjayBjYW4gb25seSBiZSBhZGRlZCBvbmNlIChubyBkdXBsaWNhdGUgaW4gdGhlIGxpc3QpXG4gKlxuICpcdHN0b3BPbkZhbHNlOlx0aW50ZXJydXB0IGNhbGxpbmdzIHdoZW4gYSBjYWxsYmFjayByZXR1cm5zIGZhbHNlXG4gKlxuICovXG5qUXVlcnkuQ2FsbGJhY2tzID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cblx0Ly8gQ29udmVydCBvcHRpb25zIGZyb20gU3RyaW5nLWZvcm1hdHRlZCB0byBPYmplY3QtZm9ybWF0dGVkIGlmIG5lZWRlZFxuXHQvLyAod2UgY2hlY2sgaW4gY2FjaGUgZmlyc3QpXG5cdG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIiA/XG5cdFx0KCBvcHRpb25zQ2FjaGVbIG9wdGlvbnMgXSB8fCBjcmVhdGVPcHRpb25zKCBvcHRpb25zICkgKSA6XG5cdFx0alF1ZXJ5LmV4dGVuZCgge30sIG9wdGlvbnMgKTtcblxuXHR2YXIgLy8gTGFzdCBmaXJlIHZhbHVlIChmb3Igbm9uLWZvcmdldHRhYmxlIGxpc3RzKVxuXHRcdG1lbW9yeSxcblx0XHQvLyBGbGFnIHRvIGtub3cgaWYgbGlzdCB3YXMgYWxyZWFkeSBmaXJlZFxuXHRcdGZpcmVkLFxuXHRcdC8vIEZsYWcgdG8ga25vdyBpZiBsaXN0IGlzIGN1cnJlbnRseSBmaXJpbmdcblx0XHRmaXJpbmcsXG5cdFx0Ly8gRmlyc3QgY2FsbGJhY2sgdG8gZmlyZSAodXNlZCBpbnRlcm5hbGx5IGJ5IGFkZCBhbmQgZmlyZVdpdGgpXG5cdFx0ZmlyaW5nU3RhcnQsXG5cdFx0Ly8gRW5kIG9mIHRoZSBsb29wIHdoZW4gZmlyaW5nXG5cdFx0ZmlyaW5nTGVuZ3RoLFxuXHRcdC8vIEluZGV4IG9mIGN1cnJlbnRseSBmaXJpbmcgY2FsbGJhY2sgKG1vZGlmaWVkIGJ5IHJlbW92ZSBpZiBuZWVkZWQpXG5cdFx0ZmlyaW5nSW5kZXgsXG5cdFx0Ly8gQWN0dWFsIGNhbGxiYWNrIGxpc3Rcblx0XHRsaXN0ID0gW10sXG5cdFx0Ly8gU3RhY2sgb2YgZmlyZSBjYWxscyBmb3IgcmVwZWF0YWJsZSBsaXN0c1xuXHRcdHN0YWNrID0gIW9wdGlvbnMub25jZSAmJiBbXSxcblx0XHQvLyBGaXJlIGNhbGxiYWNrc1xuXHRcdGZpcmUgPSBmdW5jdGlvbiggZGF0YSApIHtcblx0XHRcdG1lbW9yeSA9IG9wdGlvbnMubWVtb3J5ICYmIGRhdGE7XG5cdFx0XHRmaXJlZCA9IHRydWU7XG5cdFx0XHRmaXJpbmdJbmRleCA9IGZpcmluZ1N0YXJ0IHx8IDA7XG5cdFx0XHRmaXJpbmdTdGFydCA9IDA7XG5cdFx0XHRmaXJpbmdMZW5ndGggPSBsaXN0Lmxlbmd0aDtcblx0XHRcdGZpcmluZyA9IHRydWU7XG5cdFx0XHRmb3IgKCA7IGxpc3QgJiYgZmlyaW5nSW5kZXggPCBmaXJpbmdMZW5ndGg7IGZpcmluZ0luZGV4KysgKSB7XG5cdFx0XHRcdGlmICggbGlzdFsgZmlyaW5nSW5kZXggXS5hcHBseSggZGF0YVsgMCBdLCBkYXRhWyAxIF0gKSA9PT0gZmFsc2UgJiYgb3B0aW9ucy5zdG9wT25GYWxzZSApIHtcblx0XHRcdFx0XHRtZW1vcnkgPSBmYWxzZTsgLy8gVG8gcHJldmVudCBmdXJ0aGVyIGNhbGxzIHVzaW5nIGFkZFxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRmaXJpbmcgPSBmYWxzZTtcblx0XHRcdGlmICggbGlzdCApIHtcblx0XHRcdFx0aWYgKCBzdGFjayApIHtcblx0XHRcdFx0XHRpZiAoIHN0YWNrLmxlbmd0aCApIHtcblx0XHRcdFx0XHRcdGZpcmUoIHN0YWNrLnNoaWZ0KCkgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZiAoIG1lbW9yeSApIHtcblx0XHRcdFx0XHRsaXN0ID0gW107XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2VsZi5kaXNhYmxlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdC8vIEFjdHVhbCBDYWxsYmFja3Mgb2JqZWN0XG5cdFx0c2VsZiA9IHtcblx0XHRcdC8vIEFkZCBhIGNhbGxiYWNrIG9yIGEgY29sbGVjdGlvbiBvZiBjYWxsYmFja3MgdG8gdGhlIGxpc3Rcblx0XHRcdGFkZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggbGlzdCApIHtcblx0XHRcdFx0XHQvLyBGaXJzdCwgd2Ugc2F2ZSB0aGUgY3VycmVudCBsZW5ndGhcblx0XHRcdFx0XHR2YXIgc3RhcnQgPSBsaXN0Lmxlbmd0aDtcblx0XHRcdFx0XHQoZnVuY3Rpb24gYWRkKCBhcmdzICkge1xuXHRcdFx0XHRcdFx0alF1ZXJ5LmVhY2goIGFyZ3MsIGZ1bmN0aW9uKCBfLCBhcmcgKSB7XG5cdFx0XHRcdFx0XHRcdHZhciB0eXBlID0galF1ZXJ5LnR5cGUoIGFyZyApO1xuXHRcdFx0XHRcdFx0XHRpZiAoIHR5cGUgPT09IFwiZnVuY3Rpb25cIiApIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoICFvcHRpb25zLnVuaXF1ZSB8fCAhc2VsZi5oYXMoIGFyZyApICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bGlzdC5wdXNoKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGFyZyAmJiBhcmcubGVuZ3RoICYmIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gSW5zcGVjdCByZWN1cnNpdmVseVxuXHRcdFx0XHRcdFx0XHRcdGFkZCggYXJnICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pKCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHQvLyBEbyB3ZSBuZWVkIHRvIGFkZCB0aGUgY2FsbGJhY2tzIHRvIHRoZVxuXHRcdFx0XHRcdC8vIGN1cnJlbnQgZmlyaW5nIGJhdGNoP1xuXHRcdFx0XHRcdGlmICggZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0ZmlyaW5nTGVuZ3RoID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRcdFx0Ly8gV2l0aCBtZW1vcnksIGlmIHdlJ3JlIG5vdCBmaXJpbmcgdGhlblxuXHRcdFx0XHRcdC8vIHdlIHNob3VsZCBjYWxsIHJpZ2h0IGF3YXlcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCBtZW1vcnkgKSB7XG5cdFx0XHRcdFx0XHRmaXJpbmdTdGFydCA9IHN0YXJ0O1xuXHRcdFx0XHRcdFx0ZmlyZSggbWVtb3J5ICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdC8vIFJlbW92ZSBhIGNhbGxiYWNrIGZyb20gdGhlIGxpc3Rcblx0XHRcdHJlbW92ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggbGlzdCApIHtcblx0XHRcdFx0XHRqUXVlcnkuZWFjaCggYXJndW1lbnRzLCBmdW5jdGlvbiggXywgYXJnICkge1xuXHRcdFx0XHRcdFx0dmFyIGluZGV4O1xuXHRcdFx0XHRcdFx0d2hpbGUgKCAoIGluZGV4ID0galF1ZXJ5LmluQXJyYXkoIGFyZywgbGlzdCwgaW5kZXggKSApID4gLTEgKSB7XG5cdFx0XHRcdFx0XHRcdGxpc3Quc3BsaWNlKCBpbmRleCwgMSApO1xuXHRcdFx0XHRcdFx0XHQvLyBIYW5kbGUgZmlyaW5nIGluZGV4ZXNcblx0XHRcdFx0XHRcdFx0aWYgKCBmaXJpbmcgKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBpbmRleCA8PSBmaXJpbmdMZW5ndGggKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRmaXJpbmdMZW5ndGgtLTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBpbmRleCA8PSBmaXJpbmdJbmRleCApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGZpcmluZ0luZGV4LS07XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gQ2hlY2sgaWYgYSBnaXZlbiBjYWxsYmFjayBpcyBpbiB0aGUgbGlzdC5cblx0XHRcdC8vIElmIG5vIGFyZ3VtZW50IGlzIGdpdmVuLCByZXR1cm4gd2hldGhlciBvciBub3QgbGlzdCBoYXMgY2FsbGJhY2tzIGF0dGFjaGVkLlxuXHRcdFx0aGFzOiBmdW5jdGlvbiggZm4gKSB7XG5cdFx0XHRcdHJldHVybiBmbiA/IGpRdWVyeS5pbkFycmF5KCBmbiwgbGlzdCApID4gLTEgOiAhISggbGlzdCAmJiBsaXN0Lmxlbmd0aCApO1xuXHRcdFx0fSxcblx0XHRcdC8vIFJlbW92ZSBhbGwgY2FsbGJhY2tzIGZyb20gdGhlIGxpc3Rcblx0XHRcdGVtcHR5OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0bGlzdCA9IFtdO1xuXHRcdFx0XHRmaXJpbmdMZW5ndGggPSAwO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHQvLyBIYXZlIHRoZSBsaXN0IGRvIG5vdGhpbmcgYW55bW9yZVxuXHRcdFx0ZGlzYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGxpc3QgPSBzdGFjayA9IG1lbW9yeSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gSXMgaXQgZGlzYWJsZWQ/XG5cdFx0XHRkaXNhYmxlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhbGlzdDtcblx0XHRcdH0sXG5cdFx0XHQvLyBMb2NrIHRoZSBsaXN0IGluIGl0cyBjdXJyZW50IHN0YXRlXG5cdFx0XHRsb2NrOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0c3RhY2sgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdGlmICggIW1lbW9yeSApIHtcblx0XHRcdFx0XHRzZWxmLmRpc2FibGUoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHQvLyBJcyBpdCBsb2NrZWQ/XG5cdFx0XHRsb2NrZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gIXN0YWNrO1xuXHRcdFx0fSxcblx0XHRcdC8vIENhbGwgYWxsIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBjb250ZXh0IGFuZCBhcmd1bWVudHNcblx0XHRcdGZpcmVXaXRoOiBmdW5jdGlvbiggY29udGV4dCwgYXJncyApIHtcblx0XHRcdFx0aWYgKCBsaXN0ICYmICggIWZpcmVkIHx8IHN0YWNrICkgKSB7XG5cdFx0XHRcdFx0YXJncyA9IGFyZ3MgfHwgW107XG5cdFx0XHRcdFx0YXJncyA9IFsgY29udGV4dCwgYXJncy5zbGljZSA/IGFyZ3Muc2xpY2UoKSA6IGFyZ3MgXTtcblx0XHRcdFx0XHRpZiAoIGZpcmluZyApIHtcblx0XHRcdFx0XHRcdHN0YWNrLnB1c2goIGFyZ3MgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0ZmlyZSggYXJncyApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHQvLyBDYWxsIGFsbCB0aGUgY2FsbGJhY2tzIHdpdGggdGhlIGdpdmVuIGFyZ3VtZW50c1xuXHRcdFx0ZmlyZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNlbGYuZmlyZVdpdGgoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHQvLyBUbyBrbm93IGlmIHRoZSBjYWxsYmFja3MgaGF2ZSBhbHJlYWR5IGJlZW4gY2FsbGVkIGF0IGxlYXN0IG9uY2Vcblx0XHRcdGZpcmVkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICEhZmlyZWQ7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRyZXR1cm4gc2VsZjtcbn07XG5cblxualF1ZXJ5LmV4dGVuZCh7XG5cblx0RGVmZXJyZWQ6IGZ1bmN0aW9uKCBmdW5jICkge1xuXHRcdHZhciB0dXBsZXMgPSBbXG5cdFx0XHRcdC8vIGFjdGlvbiwgYWRkIGxpc3RlbmVyLCBsaXN0ZW5lciBsaXN0LCBmaW5hbCBzdGF0ZVxuXHRcdFx0XHRbIFwicmVzb2x2ZVwiLCBcImRvbmVcIiwgalF1ZXJ5LkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLCBcInJlc29sdmVkXCIgXSxcblx0XHRcdFx0WyBcInJlamVjdFwiLCBcImZhaWxcIiwgalF1ZXJ5LkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLCBcInJlamVjdGVkXCIgXSxcblx0XHRcdFx0WyBcIm5vdGlmeVwiLCBcInByb2dyZXNzXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJtZW1vcnlcIikgXVxuXHRcdFx0XSxcblx0XHRcdHN0YXRlID0gXCJwZW5kaW5nXCIsXG5cdFx0XHRwcm9taXNlID0ge1xuXHRcdFx0XHRzdGF0ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHN0YXRlO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRhbHdheXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGRlZmVycmVkLmRvbmUoIGFyZ3VtZW50cyApLmZhaWwoIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR0aGVuOiBmdW5jdGlvbiggLyogZm5Eb25lLCBmbkZhaWwsIGZuUHJvZ3Jlc3MgKi8gKSB7XG5cdFx0XHRcdFx0dmFyIGZucyA9IGFyZ3VtZW50cztcblx0XHRcdFx0XHRyZXR1cm4galF1ZXJ5LkRlZmVycmVkKGZ1bmN0aW9uKCBuZXdEZWZlciApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5lYWNoKCB0dXBsZXMsIGZ1bmN0aW9uKCBpLCB0dXBsZSApIHtcblx0XHRcdFx0XHRcdFx0dmFyIGZuID0galF1ZXJ5LmlzRnVuY3Rpb24oIGZuc1sgaSBdICkgJiYgZm5zWyBpIF07XG5cdFx0XHRcdFx0XHRcdC8vIGRlZmVycmVkWyBkb25lIHwgZmFpbCB8IHByb2dyZXNzIF0gZm9yIGZvcndhcmRpbmcgYWN0aW9ucyB0byBuZXdEZWZlclxuXHRcdFx0XHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbMV0gXShmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgcmV0dXJuZWQgPSBmbiAmJiBmbi5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCByZXR1cm5lZCAmJiBqUXVlcnkuaXNGdW5jdGlvbiggcmV0dXJuZWQucHJvbWlzZSApICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuZWQucHJvbWlzZSgpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5kb25lKCBuZXdEZWZlci5yZXNvbHZlIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0LmZhaWwoIG5ld0RlZmVyLnJlamVjdCApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5wcm9ncmVzcyggbmV3RGVmZXIubm90aWZ5ICk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5ld0RlZmVyWyB0dXBsZVsgMCBdICsgXCJXaXRoXCIgXSggdGhpcyA9PT0gcHJvbWlzZSA/IG5ld0RlZmVyLnByb21pc2UoKSA6IHRoaXMsIGZuID8gWyByZXR1cm5lZCBdIDogYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0Zm5zID0gbnVsbDtcblx0XHRcdFx0XHR9KS5wcm9taXNlKCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdC8vIEdldCBhIHByb21pc2UgZm9yIHRoaXMgZGVmZXJyZWRcblx0XHRcdFx0Ly8gSWYgb2JqIGlzIHByb3ZpZGVkLCB0aGUgcHJvbWlzZSBhc3BlY3QgaXMgYWRkZWQgdG8gdGhlIG9iamVjdFxuXHRcdFx0XHRwcm9taXNlOiBmdW5jdGlvbiggb2JqICkge1xuXHRcdFx0XHRcdHJldHVybiBvYmogIT0gbnVsbCA/IGpRdWVyeS5leHRlbmQoIG9iaiwgcHJvbWlzZSApIDogcHJvbWlzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlZmVycmVkID0ge307XG5cblx0XHQvLyBLZWVwIHBpcGUgZm9yIGJhY2stY29tcGF0XG5cdFx0cHJvbWlzZS5waXBlID0gcHJvbWlzZS50aGVuO1xuXG5cdFx0Ly8gQWRkIGxpc3Qtc3BlY2lmaWMgbWV0aG9kc1xuXHRcdGpRdWVyeS5lYWNoKCB0dXBsZXMsIGZ1bmN0aW9uKCBpLCB0dXBsZSApIHtcblx0XHRcdHZhciBsaXN0ID0gdHVwbGVbIDIgXSxcblx0XHRcdFx0c3RhdGVTdHJpbmcgPSB0dXBsZVsgMyBdO1xuXG5cdFx0XHQvLyBwcm9taXNlWyBkb25lIHwgZmFpbCB8IHByb2dyZXNzIF0gPSBsaXN0LmFkZFxuXHRcdFx0cHJvbWlzZVsgdHVwbGVbMV0gXSA9IGxpc3QuYWRkO1xuXG5cdFx0XHQvLyBIYW5kbGUgc3RhdGVcblx0XHRcdGlmICggc3RhdGVTdHJpbmcgKSB7XG5cdFx0XHRcdGxpc3QuYWRkKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdC8vIHN0YXRlID0gWyByZXNvbHZlZCB8IHJlamVjdGVkIF1cblx0XHRcdFx0XHRzdGF0ZSA9IHN0YXRlU3RyaW5nO1xuXG5cdFx0XHRcdC8vIFsgcmVqZWN0X2xpc3QgfCByZXNvbHZlX2xpc3QgXS5kaXNhYmxlOyBwcm9ncmVzc19saXN0LmxvY2tcblx0XHRcdFx0fSwgdHVwbGVzWyBpIF4gMSBdWyAyIF0uZGlzYWJsZSwgdHVwbGVzWyAyIF1bIDIgXS5sb2NrICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGRlZmVycmVkWyByZXNvbHZlIHwgcmVqZWN0IHwgbm90aWZ5IF1cblx0XHRcdGRlZmVycmVkWyB0dXBsZVswXSBdID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGRlZmVycmVkWyB0dXBsZVswXSArIFwiV2l0aFwiIF0oIHRoaXMgPT09IGRlZmVycmVkID8gcHJvbWlzZSA6IHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH07XG5cdFx0XHRkZWZlcnJlZFsgdHVwbGVbMF0gKyBcIldpdGhcIiBdID0gbGlzdC5maXJlV2l0aDtcblx0XHR9KTtcblxuXHRcdC8vIE1ha2UgdGhlIGRlZmVycmVkIGEgcHJvbWlzZVxuXHRcdHByb21pc2UucHJvbWlzZSggZGVmZXJyZWQgKTtcblxuXHRcdC8vIENhbGwgZ2l2ZW4gZnVuYyBpZiBhbnlcblx0XHRpZiAoIGZ1bmMgKSB7XG5cdFx0XHRmdW5jLmNhbGwoIGRlZmVycmVkLCBkZWZlcnJlZCApO1xuXHRcdH1cblxuXHRcdC8vIEFsbCBkb25lIVxuXHRcdHJldHVybiBkZWZlcnJlZDtcblx0fSxcblxuXHQvLyBEZWZlcnJlZCBoZWxwZXJcblx0d2hlbjogZnVuY3Rpb24oIHN1Ym9yZGluYXRlIC8qICwgLi4uLCBzdWJvcmRpbmF0ZU4gKi8gKSB7XG5cdFx0dmFyIGkgPSAwLFxuXHRcdFx0cmVzb2x2ZVZhbHVlcyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApLFxuXHRcdFx0bGVuZ3RoID0gcmVzb2x2ZVZhbHVlcy5sZW5ndGgsXG5cblx0XHRcdC8vIHRoZSBjb3VudCBvZiB1bmNvbXBsZXRlZCBzdWJvcmRpbmF0ZXNcblx0XHRcdHJlbWFpbmluZyA9IGxlbmd0aCAhPT0gMSB8fCAoIHN1Ym9yZGluYXRlICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCBzdWJvcmRpbmF0ZS5wcm9taXNlICkgKSA/IGxlbmd0aCA6IDAsXG5cblx0XHRcdC8vIHRoZSBtYXN0ZXIgRGVmZXJyZWQuIElmIHJlc29sdmVWYWx1ZXMgY29uc2lzdCBvZiBvbmx5IGEgc2luZ2xlIERlZmVycmVkLCBqdXN0IHVzZSB0aGF0LlxuXHRcdFx0ZGVmZXJyZWQgPSByZW1haW5pbmcgPT09IDEgPyBzdWJvcmRpbmF0ZSA6IGpRdWVyeS5EZWZlcnJlZCgpLFxuXG5cdFx0XHQvLyBVcGRhdGUgZnVuY3Rpb24gZm9yIGJvdGggcmVzb2x2ZSBhbmQgcHJvZ3Jlc3MgdmFsdWVzXG5cdFx0XHR1cGRhdGVGdW5jID0gZnVuY3Rpb24oIGksIGNvbnRleHRzLCB2YWx1ZXMgKSB7XG5cdFx0XHRcdHJldHVybiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRcdFx0Y29udGV4dHNbIGkgXSA9IHRoaXM7XG5cdFx0XHRcdFx0dmFsdWVzWyBpIF0gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApIDogdmFsdWU7XG5cdFx0XHRcdFx0aWYgKCB2YWx1ZXMgPT09IHByb2dyZXNzVmFsdWVzICkge1xuXHRcdFx0XHRcdFx0ZGVmZXJyZWQubm90aWZ5V2l0aCggY29udGV4dHMsIHZhbHVlcyApO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoICEoIC0tcmVtYWluaW5nICkgKSB7XG5cdFx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggY29udGV4dHMsIHZhbHVlcyApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdH0sXG5cblx0XHRcdHByb2dyZXNzVmFsdWVzLCBwcm9ncmVzc0NvbnRleHRzLCByZXNvbHZlQ29udGV4dHM7XG5cblx0XHQvLyBBZGQgbGlzdGVuZXJzIHRvIERlZmVycmVkIHN1Ym9yZGluYXRlczsgdHJlYXQgb3RoZXJzIGFzIHJlc29sdmVkXG5cdFx0aWYgKCBsZW5ndGggPiAxICkge1xuXHRcdFx0cHJvZ3Jlc3NWYWx1ZXMgPSBuZXcgQXJyYXkoIGxlbmd0aCApO1xuXHRcdFx0cHJvZ3Jlc3NDb250ZXh0cyA9IG5ldyBBcnJheSggbGVuZ3RoICk7XG5cdFx0XHRyZXNvbHZlQ29udGV4dHMgPSBuZXcgQXJyYXkoIGxlbmd0aCApO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdGlmICggcmVzb2x2ZVZhbHVlc1sgaSBdICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCByZXNvbHZlVmFsdWVzWyBpIF0ucHJvbWlzZSApICkge1xuXHRcdFx0XHRcdHJlc29sdmVWYWx1ZXNbIGkgXS5wcm9taXNlKClcblx0XHRcdFx0XHRcdC5kb25lKCB1cGRhdGVGdW5jKCBpLCByZXNvbHZlQ29udGV4dHMsIHJlc29sdmVWYWx1ZXMgKSApXG5cdFx0XHRcdFx0XHQuZmFpbCggZGVmZXJyZWQucmVqZWN0IClcblx0XHRcdFx0XHRcdC5wcm9ncmVzcyggdXBkYXRlRnVuYyggaSwgcHJvZ3Jlc3NDb250ZXh0cywgcHJvZ3Jlc3NWYWx1ZXMgKSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC0tcmVtYWluaW5nO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gSWYgd2UncmUgbm90IHdhaXRpbmcgb24gYW55dGhpbmcsIHJlc29sdmUgdGhlIG1hc3RlclxuXHRcdGlmICggIXJlbWFpbmluZyApIHtcblx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCByZXNvbHZlQ29udGV4dHMsIHJlc29sdmVWYWx1ZXMgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuXHR9XG59KTtcblxuXG4vLyBUaGUgZGVmZXJyZWQgdXNlZCBvbiBET00gcmVhZHlcbnZhciByZWFkeUxpc3Q7XG5cbmpRdWVyeS5mbi5yZWFkeSA9IGZ1bmN0aW9uKCBmbiApIHtcblx0Ly8gQWRkIHRoZSBjYWxsYmFja1xuXHRqUXVlcnkucmVhZHkucHJvbWlzZSgpLmRvbmUoIGZuICk7XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG5qUXVlcnkuZXh0ZW5kKHtcblx0Ly8gSXMgdGhlIERPTSByZWFkeSB0byBiZSB1c2VkPyBTZXQgdG8gdHJ1ZSBvbmNlIGl0IG9jY3Vycy5cblx0aXNSZWFkeTogZmFsc2UsXG5cblx0Ly8gQSBjb3VudGVyIHRvIHRyYWNrIGhvdyBtYW55IGl0ZW1zIHRvIHdhaXQgZm9yIGJlZm9yZVxuXHQvLyB0aGUgcmVhZHkgZXZlbnQgZmlyZXMuIFNlZSAjNjc4MVxuXHRyZWFkeVdhaXQ6IDEsXG5cblx0Ly8gSG9sZCAob3IgcmVsZWFzZSkgdGhlIHJlYWR5IGV2ZW50XG5cdGhvbGRSZWFkeTogZnVuY3Rpb24oIGhvbGQgKSB7XG5cdFx0aWYgKCBob2xkICkge1xuXHRcdFx0alF1ZXJ5LnJlYWR5V2FpdCsrO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRqUXVlcnkucmVhZHkoIHRydWUgKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gSGFuZGxlIHdoZW4gdGhlIERPTSBpcyByZWFkeVxuXHRyZWFkeTogZnVuY3Rpb24oIHdhaXQgKSB7XG5cblx0XHQvLyBBYm9ydCBpZiB0aGVyZSBhcmUgcGVuZGluZyBob2xkcyBvciB3ZSdyZSBhbHJlYWR5IHJlYWR5XG5cdFx0aWYgKCB3YWl0ID09PSB0cnVlID8gLS1qUXVlcnkucmVhZHlXYWl0IDogalF1ZXJ5LmlzUmVhZHkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gUmVtZW1iZXIgdGhhdCB0aGUgRE9NIGlzIHJlYWR5XG5cdFx0alF1ZXJ5LmlzUmVhZHkgPSB0cnVlO1xuXG5cdFx0Ly8gSWYgYSBub3JtYWwgRE9NIFJlYWR5IGV2ZW50IGZpcmVkLCBkZWNyZW1lbnQsIGFuZCB3YWl0IGlmIG5lZWQgYmVcblx0XHRpZiAoIHdhaXQgIT09IHRydWUgJiYgLS1qUXVlcnkucmVhZHlXYWl0ID4gMCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBJZiB0aGVyZSBhcmUgZnVuY3Rpb25zIGJvdW5kLCB0byBleGVjdXRlXG5cdFx0cmVhZHlMaXN0LnJlc29sdmVXaXRoKCBkb2N1bWVudCwgWyBqUXVlcnkgXSApO1xuXG5cdFx0Ly8gVHJpZ2dlciBhbnkgYm91bmQgcmVhZHkgZXZlbnRzXG5cdFx0aWYgKCBqUXVlcnkuZm4udHJpZ2dlckhhbmRsZXIgKSB7XG5cdFx0XHRqUXVlcnkoIGRvY3VtZW50ICkudHJpZ2dlckhhbmRsZXIoIFwicmVhZHlcIiApO1xuXHRcdFx0alF1ZXJ5KCBkb2N1bWVudCApLm9mZiggXCJyZWFkeVwiICk7XG5cdFx0fVxuXHR9XG59KTtcblxuLyoqXG4gKiBUaGUgcmVhZHkgZXZlbnQgaGFuZGxlciBhbmQgc2VsZiBjbGVhbnVwIG1ldGhvZFxuICovXG5mdW5jdGlvbiBjb21wbGV0ZWQoKSB7XG5cdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwiRE9NQ29udGVudExvYWRlZFwiLCBjb21wbGV0ZWQsIGZhbHNlICk7XG5cdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCBcImxvYWRcIiwgY29tcGxldGVkLCBmYWxzZSApO1xuXHRqUXVlcnkucmVhZHkoKTtcbn1cblxualF1ZXJ5LnJlYWR5LnByb21pc2UgPSBmdW5jdGlvbiggb2JqICkge1xuXHRpZiAoICFyZWFkeUxpc3QgKSB7XG5cblx0XHRyZWFkeUxpc3QgPSBqUXVlcnkuRGVmZXJyZWQoKTtcblxuXHRcdC8vIENhdGNoIGNhc2VzIHdoZXJlICQoZG9jdW1lbnQpLnJlYWR5KCkgaXMgY2FsbGVkIGFmdGVyIHRoZSBicm93c2VyIGV2ZW50IGhhcyBhbHJlYWR5IG9jY3VycmVkLlxuXHRcdC8vIFdlIG9uY2UgdHJpZWQgdG8gdXNlIHJlYWR5U3RhdGUgXCJpbnRlcmFjdGl2ZVwiIGhlcmUsIGJ1dCBpdCBjYXVzZWQgaXNzdWVzIGxpa2UgdGhlIG9uZVxuXHRcdC8vIGRpc2NvdmVyZWQgYnkgQ2hyaXNTIGhlcmU6IGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEyMjgyI2NvbW1lbnQ6MTVcblx0XHRpZiAoIGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwiY29tcGxldGVcIiApIHtcblx0XHRcdC8vIEhhbmRsZSBpdCBhc3luY2hyb25vdXNseSB0byBhbGxvdyBzY3JpcHRzIHRoZSBvcHBvcnR1bml0eSB0byBkZWxheSByZWFkeVxuXHRcdFx0c2V0VGltZW91dCggalF1ZXJ5LnJlYWR5ICk7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBVc2UgdGhlIGhhbmR5IGV2ZW50IGNhbGxiYWNrXG5cdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCBcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY29tcGxldGVkLCBmYWxzZSApO1xuXG5cdFx0XHQvLyBBIGZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQsIHRoYXQgd2lsbCBhbHdheXMgd29ya1xuXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIFwibG9hZFwiLCBjb21wbGV0ZWQsIGZhbHNlICk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZWFkeUxpc3QucHJvbWlzZSggb2JqICk7XG59O1xuXG4vLyBLaWNrIG9mZiB0aGUgRE9NIHJlYWR5IGNoZWNrIGV2ZW4gaWYgdGhlIHVzZXIgZG9lcyBub3RcbmpRdWVyeS5yZWFkeS5wcm9taXNlKCk7XG5cblxuXG5cbi8vIE11bHRpZnVuY3Rpb25hbCBtZXRob2QgdG8gZ2V0IGFuZCBzZXQgdmFsdWVzIG9mIGEgY29sbGVjdGlvblxuLy8gVGhlIHZhbHVlL3MgY2FuIG9wdGlvbmFsbHkgYmUgZXhlY3V0ZWQgaWYgaXQncyBhIGZ1bmN0aW9uXG52YXIgYWNjZXNzID0galF1ZXJ5LmFjY2VzcyA9IGZ1bmN0aW9uKCBlbGVtcywgZm4sIGtleSwgdmFsdWUsIGNoYWluYWJsZSwgZW1wdHlHZXQsIHJhdyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGxlbiA9IGVsZW1zLmxlbmd0aCxcblx0XHRidWxrID0ga2V5ID09IG51bGw7XG5cblx0Ly8gU2V0cyBtYW55IHZhbHVlc1xuXHRpZiAoIGpRdWVyeS50eXBlKCBrZXkgKSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRjaGFpbmFibGUgPSB0cnVlO1xuXHRcdGZvciAoIGkgaW4ga2V5ICkge1xuXHRcdFx0alF1ZXJ5LmFjY2VzcyggZWxlbXMsIGZuLCBpLCBrZXlbaV0sIHRydWUsIGVtcHR5R2V0LCByYXcgKTtcblx0XHR9XG5cblx0Ly8gU2V0cyBvbmUgdmFsdWVcblx0fSBlbHNlIGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRjaGFpbmFibGUgPSB0cnVlO1xuXG5cdFx0aWYgKCAhalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyYXcgPSB0cnVlO1xuXHRcdH1cblxuXHRcdGlmICggYnVsayApIHtcblx0XHRcdC8vIEJ1bGsgb3BlcmF0aW9ucyBydW4gYWdhaW5zdCB0aGUgZW50aXJlIHNldFxuXHRcdFx0aWYgKCByYXcgKSB7XG5cdFx0XHRcdGZuLmNhbGwoIGVsZW1zLCB2YWx1ZSApO1xuXHRcdFx0XHRmbiA9IG51bGw7XG5cblx0XHRcdC8vIC4uLmV4Y2VwdCB3aGVuIGV4ZWN1dGluZyBmdW5jdGlvbiB2YWx1ZXNcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJ1bGsgPSBmbjtcblx0XHRcdFx0Zm4gPSBmdW5jdGlvbiggZWxlbSwga2V5LCB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gYnVsay5jYWxsKCBqUXVlcnkoIGVsZW0gKSwgdmFsdWUgKTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIGZuICkge1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdGZuKCBlbGVtc1tpXSwga2V5LCByYXcgPyB2YWx1ZSA6IHZhbHVlLmNhbGwoIGVsZW1zW2ldLCBpLCBmbiggZWxlbXNbaV0sIGtleSApICkgKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gY2hhaW5hYmxlID9cblx0XHRlbGVtcyA6XG5cblx0XHQvLyBHZXRzXG5cdFx0YnVsayA/XG5cdFx0XHRmbi5jYWxsKCBlbGVtcyApIDpcblx0XHRcdGxlbiA/IGZuKCBlbGVtc1swXSwga2V5ICkgOiBlbXB0eUdldDtcbn07XG5cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gb2JqZWN0IGNhbiBoYXZlIGRhdGFcbiAqL1xualF1ZXJ5LmFjY2VwdERhdGEgPSBmdW5jdGlvbiggb3duZXIgKSB7XG5cdC8vIEFjY2VwdHMgb25seTpcblx0Ly8gIC0gTm9kZVxuXHQvLyAgICAtIE5vZGUuRUxFTUVOVF9OT0RFXG5cdC8vICAgIC0gTm9kZS5ET0NVTUVOVF9OT0RFXG5cdC8vICAtIE9iamVjdFxuXHQvLyAgICAtIEFueVxuXHQvKiBqc2hpbnQgLVcwMTggKi9cblx0cmV0dXJuIG93bmVyLm5vZGVUeXBlID09PSAxIHx8IG93bmVyLm5vZGVUeXBlID09PSA5IHx8ICEoICtvd25lci5ub2RlVHlwZSApO1xufTtcblxuXG5mdW5jdGlvbiBEYXRhKCkge1xuXHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQsXG5cdC8vIE9sZCBXZWJLaXQgZG9lcyBub3QgaGF2ZSBPYmplY3QucHJldmVudEV4dGVuc2lvbnMvZnJlZXplIG1ldGhvZCxcblx0Ly8gcmV0dXJuIG5ldyBlbXB0eSBvYmplY3QgaW5zdGVhZCB3aXRoIG5vIFtbc2V0XV0gYWNjZXNzb3Jcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCB0aGlzLmNhY2hlID0ge30sIDAsIHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHt9O1xuXHRcdH1cblx0fSk7XG5cblx0dGhpcy5leHBhbmRvID0galF1ZXJ5LmV4cGFuZG8gKyBEYXRhLnVpZCsrO1xufVxuXG5EYXRhLnVpZCA9IDE7XG5EYXRhLmFjY2VwdHMgPSBqUXVlcnkuYWNjZXB0RGF0YTtcblxuRGF0YS5wcm90b3R5cGUgPSB7XG5cdGtleTogZnVuY3Rpb24oIG93bmVyICkge1xuXHRcdC8vIFdlIGNhbiBhY2NlcHQgZGF0YSBmb3Igbm9uLWVsZW1lbnQgbm9kZXMgaW4gbW9kZXJuIGJyb3dzZXJzLFxuXHRcdC8vIGJ1dCB3ZSBzaG91bGQgbm90LCBzZWUgIzgzMzUuXG5cdFx0Ly8gQWx3YXlzIHJldHVybiB0aGUga2V5IGZvciBhIGZyb3plbiBvYmplY3QuXG5cdFx0aWYgKCAhRGF0YS5hY2NlcHRzKCBvd25lciApICkge1xuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0dmFyIGRlc2NyaXB0b3IgPSB7fSxcblx0XHRcdC8vIENoZWNrIGlmIHRoZSBvd25lciBvYmplY3QgYWxyZWFkeSBoYXMgYSBjYWNoZSBrZXlcblx0XHRcdHVubG9jayA9IG93bmVyWyB0aGlzLmV4cGFuZG8gXTtcblxuXHRcdC8vIElmIG5vdCwgY3JlYXRlIG9uZVxuXHRcdGlmICggIXVubG9jayApIHtcblx0XHRcdHVubG9jayA9IERhdGEudWlkKys7XG5cblx0XHRcdC8vIFNlY3VyZSBpdCBpbiBhIG5vbi1lbnVtZXJhYmxlLCBub24td3JpdGFibGUgcHJvcGVydHlcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGRlc2NyaXB0b3JbIHRoaXMuZXhwYW5kbyBdID0geyB2YWx1ZTogdW5sb2NrIH07XG5cdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCBvd25lciwgZGVzY3JpcHRvciApO1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkPDRcblx0XHRcdC8vIEZhbGxiYWNrIHRvIGEgbGVzcyBzZWN1cmUgZGVmaW5pdGlvblxuXHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0XHRcdGRlc2NyaXB0b3JbIHRoaXMuZXhwYW5kbyBdID0gdW5sb2NrO1xuXHRcdFx0XHRqUXVlcnkuZXh0ZW5kKCBvd25lciwgZGVzY3JpcHRvciApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEVuc3VyZSB0aGUgY2FjaGUgb2JqZWN0XG5cdFx0aWYgKCAhdGhpcy5jYWNoZVsgdW5sb2NrIF0gKSB7XG5cdFx0XHR0aGlzLmNhY2hlWyB1bmxvY2sgXSA9IHt9O1xuXHRcdH1cblxuXHRcdHJldHVybiB1bmxvY2s7XG5cdH0sXG5cdHNldDogZnVuY3Rpb24oIG93bmVyLCBkYXRhLCB2YWx1ZSApIHtcblx0XHR2YXIgcHJvcCxcblx0XHRcdC8vIFRoZXJlIG1heSBiZSBhbiB1bmxvY2sgYXNzaWduZWQgdG8gdGhpcyBub2RlLFxuXHRcdFx0Ly8gaWYgdGhlcmUgaXMgbm8gZW50cnkgZm9yIHRoaXMgXCJvd25lclwiLCBjcmVhdGUgb25lIGlubGluZVxuXHRcdFx0Ly8gYW5kIHNldCB0aGUgdW5sb2NrIGFzIHRob3VnaCBhbiBvd25lciBlbnRyeSBoYWQgYWx3YXlzIGV4aXN0ZWRcblx0XHRcdHVubG9jayA9IHRoaXMua2V5KCBvd25lciApLFxuXHRcdFx0Y2FjaGUgPSB0aGlzLmNhY2hlWyB1bmxvY2sgXTtcblxuXHRcdC8vIEhhbmRsZTogWyBvd25lciwga2V5LCB2YWx1ZSBdIGFyZ3Ncblx0XHRpZiAoIHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0Y2FjaGVbIGRhdGEgXSA9IHZhbHVlO1xuXG5cdFx0Ly8gSGFuZGxlOiBbIG93bmVyLCB7IHByb3BlcnRpZXMgfSBdIGFyZ3Ncblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gRnJlc2ggYXNzaWdubWVudHMgYnkgb2JqZWN0IGFyZSBzaGFsbG93IGNvcGllZFxuXHRcdFx0aWYgKCBqUXVlcnkuaXNFbXB0eU9iamVjdCggY2FjaGUgKSApIHtcblx0XHRcdFx0alF1ZXJ5LmV4dGVuZCggdGhpcy5jYWNoZVsgdW5sb2NrIF0sIGRhdGEgKTtcblx0XHRcdC8vIE90aGVyd2lzZSwgY29weSB0aGUgcHJvcGVydGllcyBvbmUtYnktb25lIHRvIHRoZSBjYWNoZSBvYmplY3Rcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZvciAoIHByb3AgaW4gZGF0YSApIHtcblx0XHRcdFx0XHRjYWNoZVsgcHJvcCBdID0gZGF0YVsgcHJvcCBdO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBjYWNoZTtcblx0fSxcblx0Z2V0OiBmdW5jdGlvbiggb3duZXIsIGtleSApIHtcblx0XHQvLyBFaXRoZXIgYSB2YWxpZCBjYWNoZSBpcyBmb3VuZCwgb3Igd2lsbCBiZSBjcmVhdGVkLlxuXHRcdC8vIE5ldyBjYWNoZXMgd2lsbCBiZSBjcmVhdGVkIGFuZCB0aGUgdW5sb2NrIHJldHVybmVkLFxuXHRcdC8vIGFsbG93aW5nIGRpcmVjdCBhY2Nlc3MgdG8gdGhlIG5ld2x5IGNyZWF0ZWRcblx0XHQvLyBlbXB0eSBkYXRhIG9iamVjdC4gQSB2YWxpZCBvd25lciBvYmplY3QgbXVzdCBiZSBwcm92aWRlZC5cblx0XHR2YXIgY2FjaGUgPSB0aGlzLmNhY2hlWyB0aGlzLmtleSggb3duZXIgKSBdO1xuXG5cdFx0cmV0dXJuIGtleSA9PT0gdW5kZWZpbmVkID9cblx0XHRcdGNhY2hlIDogY2FjaGVbIGtleSBdO1xuXHR9LFxuXHRhY2Nlc3M6IGZ1bmN0aW9uKCBvd25lciwga2V5LCB2YWx1ZSApIHtcblx0XHR2YXIgc3RvcmVkO1xuXHRcdC8vIEluIGNhc2VzIHdoZXJlIGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gTm8ga2V5IHdhcyBzcGVjaWZpZWRcblx0XHQvLyAgIDIuIEEgc3RyaW5nIGtleSB3YXMgc3BlY2lmaWVkLCBidXQgbm8gdmFsdWUgcHJvdmlkZWRcblx0XHQvL1xuXHRcdC8vIFRha2UgdGhlIFwicmVhZFwiIHBhdGggYW5kIGFsbG93IHRoZSBnZXQgbWV0aG9kIHRvIGRldGVybWluZVxuXHRcdC8vIHdoaWNoIHZhbHVlIHRvIHJldHVybiwgcmVzcGVjdGl2ZWx5IGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gVGhlIGVudGlyZSBjYWNoZSBvYmplY3Rcblx0XHQvLyAgIDIuIFRoZSBkYXRhIHN0b3JlZCBhdCB0aGUga2V5XG5cdFx0Ly9cblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkIHx8XG5cdFx0XHRcdCgoa2V5ICYmIHR5cGVvZiBrZXkgPT09IFwic3RyaW5nXCIpICYmIHZhbHVlID09PSB1bmRlZmluZWQpICkge1xuXG5cdFx0XHRzdG9yZWQgPSB0aGlzLmdldCggb3duZXIsIGtleSApO1xuXG5cdFx0XHRyZXR1cm4gc3RvcmVkICE9PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRzdG9yZWQgOiB0aGlzLmdldCggb3duZXIsIGpRdWVyeS5jYW1lbENhc2Uoa2V5KSApO1xuXHRcdH1cblxuXHRcdC8vIFsqXVdoZW4gdGhlIGtleSBpcyBub3QgYSBzdHJpbmcsIG9yIGJvdGggYSBrZXkgYW5kIHZhbHVlXG5cdFx0Ly8gYXJlIHNwZWNpZmllZCwgc2V0IG9yIGV4dGVuZCAoZXhpc3Rpbmcgb2JqZWN0cykgd2l0aCBlaXRoZXI6XG5cdFx0Ly9cblx0XHQvLyAgIDEuIEFuIG9iamVjdCBvZiBwcm9wZXJ0aWVzXG5cdFx0Ly8gICAyLiBBIGtleSBhbmQgdmFsdWVcblx0XHQvL1xuXHRcdHRoaXMuc2V0KCBvd25lciwga2V5LCB2YWx1ZSApO1xuXG5cdFx0Ly8gU2luY2UgdGhlIFwic2V0XCIgcGF0aCBjYW4gaGF2ZSB0d28gcG9zc2libGUgZW50cnkgcG9pbnRzXG5cdFx0Ly8gcmV0dXJuIHRoZSBleHBlY3RlZCBkYXRhIGJhc2VkIG9uIHdoaWNoIHBhdGggd2FzIHRha2VuWypdXG5cdFx0cmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IGtleTtcblx0fSxcblx0cmVtb3ZlOiBmdW5jdGlvbiggb3duZXIsIGtleSApIHtcblx0XHR2YXIgaSwgbmFtZSwgY2FtZWwsXG5cdFx0XHR1bmxvY2sgPSB0aGlzLmtleSggb3duZXIgKSxcblx0XHRcdGNhY2hlID0gdGhpcy5jYWNoZVsgdW5sb2NrIF07XG5cblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dGhpcy5jYWNoZVsgdW5sb2NrIF0gPSB7fTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBTdXBwb3J0IGFycmF5IG9yIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmcgb2Yga2V5c1xuXHRcdFx0aWYgKCBqUXVlcnkuaXNBcnJheSgga2V5ICkgKSB7XG5cdFx0XHRcdC8vIElmIFwibmFtZVwiIGlzIGFuIGFycmF5IG9mIGtleXMuLi5cblx0XHRcdFx0Ly8gV2hlbiBkYXRhIGlzIGluaXRpYWxseSBjcmVhdGVkLCB2aWEgKFwia2V5XCIsIFwidmFsXCIpIHNpZ25hdHVyZSxcblx0XHRcdFx0Ly8ga2V5cyB3aWxsIGJlIGNvbnZlcnRlZCB0byBjYW1lbENhc2UuXG5cdFx0XHRcdC8vIFNpbmNlIHRoZXJlIGlzIG5vIHdheSB0byB0ZWxsIF9ob3dfIGEga2V5IHdhcyBhZGRlZCwgcmVtb3ZlXG5cdFx0XHRcdC8vIGJvdGggcGxhaW4ga2V5IGFuZCBjYW1lbENhc2Uga2V5LiAjMTI3ODZcblx0XHRcdFx0Ly8gVGhpcyB3aWxsIG9ubHkgcGVuYWxpemUgdGhlIGFycmF5IGFyZ3VtZW50IHBhdGguXG5cdFx0XHRcdG5hbWUgPSBrZXkuY29uY2F0KCBrZXkubWFwKCBqUXVlcnkuY2FtZWxDYXNlICkgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNhbWVsID0galF1ZXJ5LmNhbWVsQ2FzZSgga2V5ICk7XG5cdFx0XHRcdC8vIFRyeSB0aGUgc3RyaW5nIGFzIGEga2V5IGJlZm9yZSBhbnkgbWFuaXB1bGF0aW9uXG5cdFx0XHRcdGlmICgga2V5IGluIGNhY2hlICkge1xuXHRcdFx0XHRcdG5hbWUgPSBbIGtleSwgY2FtZWwgXTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBJZiBhIGtleSB3aXRoIHRoZSBzcGFjZXMgZXhpc3RzLCB1c2UgaXQuXG5cdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCBjcmVhdGUgYW4gYXJyYXkgYnkgbWF0Y2hpbmcgbm9uLXdoaXRlc3BhY2Vcblx0XHRcdFx0XHRuYW1lID0gY2FtZWw7XG5cdFx0XHRcdFx0bmFtZSA9IG5hbWUgaW4gY2FjaGUgP1xuXHRcdFx0XHRcdFx0WyBuYW1lIF0gOiAoIG5hbWUubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aSA9IG5hbWUubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGRlbGV0ZSBjYWNoZVsgbmFtZVsgaSBdIF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRoYXNEYXRhOiBmdW5jdGlvbiggb3duZXIgKSB7XG5cdFx0cmV0dXJuICFqUXVlcnkuaXNFbXB0eU9iamVjdChcblx0XHRcdHRoaXMuY2FjaGVbIG93bmVyWyB0aGlzLmV4cGFuZG8gXSBdIHx8IHt9XG5cdFx0KTtcblx0fSxcblx0ZGlzY2FyZDogZnVuY3Rpb24oIG93bmVyICkge1xuXHRcdGlmICggb3duZXJbIHRoaXMuZXhwYW5kbyBdICkge1xuXHRcdFx0ZGVsZXRlIHRoaXMuY2FjaGVbIG93bmVyWyB0aGlzLmV4cGFuZG8gXSBdO1xuXHRcdH1cblx0fVxufTtcbnZhciBkYXRhX3ByaXYgPSBuZXcgRGF0YSgpO1xuXG52YXIgZGF0YV91c2VyID0gbmV3IERhdGEoKTtcblxuXG5cbi8vXHRJbXBsZW1lbnRhdGlvbiBTdW1tYXJ5XG4vL1xuLy9cdDEuIEVuZm9yY2UgQVBJIHN1cmZhY2UgYW5kIHNlbWFudGljIGNvbXBhdGliaWxpdHkgd2l0aCAxLjkueCBicmFuY2hcbi8vXHQyLiBJbXByb3ZlIHRoZSBtb2R1bGUncyBtYWludGFpbmFiaWxpdHkgYnkgcmVkdWNpbmcgdGhlIHN0b3JhZ2Vcbi8vXHRcdHBhdGhzIHRvIGEgc2luZ2xlIG1lY2hhbmlzbS5cbi8vXHQzLiBVc2UgdGhlIHNhbWUgc2luZ2xlIG1lY2hhbmlzbSB0byBzdXBwb3J0IFwicHJpdmF0ZVwiIGFuZCBcInVzZXJcIiBkYXRhLlxuLy9cdDQuIF9OZXZlcl8gZXhwb3NlIFwicHJpdmF0ZVwiIGRhdGEgdG8gdXNlciBjb2RlIChUT0RPOiBEcm9wIF9kYXRhLCBfcmVtb3ZlRGF0YSlcbi8vXHQ1LiBBdm9pZCBleHBvc2luZyBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzIG9uIHVzZXIgb2JqZWN0cyAoZWcuIGV4cGFuZG8gcHJvcGVydGllcylcbi8vXHQ2LiBQcm92aWRlIGEgY2xlYXIgcGF0aCBmb3IgaW1wbGVtZW50YXRpb24gdXBncmFkZSB0byBXZWFrTWFwIGluIDIwMTRcblxudmFyIHJicmFjZSA9IC9eKD86XFx7W1xcd1xcV10qXFx9fFxcW1tcXHdcXFddKlxcXSkkLyxcblx0cm11bHRpRGFzaCA9IC8oW0EtWl0pL2c7XG5cbmZ1bmN0aW9uIGRhdGFBdHRyKCBlbGVtLCBrZXksIGRhdGEgKSB7XG5cdHZhciBuYW1lO1xuXG5cdC8vIElmIG5vdGhpbmcgd2FzIGZvdW5kIGludGVybmFsbHksIHRyeSB0byBmZXRjaCBhbnlcblx0Ly8gZGF0YSBmcm9tIHRoZSBIVE1MNSBkYXRhLSogYXR0cmlidXRlXG5cdGlmICggZGF0YSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0bmFtZSA9IFwiZGF0YS1cIiArIGtleS5yZXBsYWNlKCBybXVsdGlEYXNoLCBcIi0kMVwiICkudG9Mb3dlckNhc2UoKTtcblx0XHRkYXRhID0gZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUgKTtcblxuXHRcdGlmICggdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRkYXRhID0gZGF0YSA9PT0gXCJ0cnVlXCIgPyB0cnVlIDpcblx0XHRcdFx0XHRkYXRhID09PSBcImZhbHNlXCIgPyBmYWxzZSA6XG5cdFx0XHRcdFx0ZGF0YSA9PT0gXCJudWxsXCIgPyBudWxsIDpcblx0XHRcdFx0XHQvLyBPbmx5IGNvbnZlcnQgdG8gYSBudW1iZXIgaWYgaXQgZG9lc24ndCBjaGFuZ2UgdGhlIHN0cmluZ1xuXHRcdFx0XHRcdCtkYXRhICsgXCJcIiA9PT0gZGF0YSA/ICtkYXRhIDpcblx0XHRcdFx0XHRyYnJhY2UudGVzdCggZGF0YSApID8galF1ZXJ5LnBhcnNlSlNPTiggZGF0YSApIDpcblx0XHRcdFx0XHRkYXRhO1xuXHRcdFx0fSBjYXRjaCggZSApIHt9XG5cblx0XHRcdC8vIE1ha2Ugc3VyZSB3ZSBzZXQgdGhlIGRhdGEgc28gaXQgaXNuJ3QgY2hhbmdlZCBsYXRlclxuXHRcdFx0ZGF0YV91c2VyLnNldCggZWxlbSwga2V5LCBkYXRhICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBkYXRhO1xufVxuXG5qUXVlcnkuZXh0ZW5kKHtcblx0aGFzRGF0YTogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRhdGFfdXNlci5oYXNEYXRhKCBlbGVtICkgfHwgZGF0YV9wcml2Lmhhc0RhdGEoIGVsZW0gKTtcblx0fSxcblxuXHRkYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZGF0YSApIHtcblx0XHRyZXR1cm4gZGF0YV91c2VyLmFjY2VzcyggZWxlbSwgbmFtZSwgZGF0YSApO1xuXHR9LFxuXG5cdHJlbW92ZURhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdGRhdGFfdXNlci5yZW1vdmUoIGVsZW0sIG5hbWUgKTtcblx0fSxcblxuXHQvLyBUT0RPOiBOb3cgdGhhdCBhbGwgY2FsbHMgdG8gX2RhdGEgYW5kIF9yZW1vdmVEYXRhIGhhdmUgYmVlbiByZXBsYWNlZFxuXHQvLyB3aXRoIGRpcmVjdCBjYWxscyB0byBkYXRhX3ByaXYgbWV0aG9kcywgdGhlc2UgY2FuIGJlIGRlcHJlY2F0ZWQuXG5cdF9kYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZGF0YSApIHtcblx0XHRyZXR1cm4gZGF0YV9wcml2LmFjY2VzcyggZWxlbSwgbmFtZSwgZGF0YSApO1xuXHR9LFxuXG5cdF9yZW1vdmVEYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0XHRkYXRhX3ByaXYucmVtb3ZlKCBlbGVtLCBuYW1lICk7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0ZGF0YTogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0dmFyIGksIG5hbWUsIGRhdGEsXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdLFxuXHRcdFx0YXR0cnMgPSBlbGVtICYmIGVsZW0uYXR0cmlidXRlcztcblxuXHRcdC8vIEdldHMgYWxsIHZhbHVlc1xuXHRcdGlmICgga2V5ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRpZiAoIHRoaXMubGVuZ3RoICkge1xuXHRcdFx0XHRkYXRhID0gZGF0YV91c2VyLmdldCggZWxlbSApO1xuXG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAhZGF0YV9wcml2LmdldCggZWxlbSwgXCJoYXNEYXRhQXR0cnNcIiApICkge1xuXHRcdFx0XHRcdGkgPSBhdHRycy5sZW5ndGg7XG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFMTErXG5cdFx0XHRcdFx0XHQvLyBUaGUgYXR0cnMgZWxlbWVudHMgY2FuIGJlIG51bGwgKCMxNDg5NClcblx0XHRcdFx0XHRcdGlmICggYXR0cnNbIGkgXSApIHtcblx0XHRcdFx0XHRcdFx0bmFtZSA9IGF0dHJzWyBpIF0ubmFtZTtcblx0XHRcdFx0XHRcdFx0aWYgKCBuYW1lLmluZGV4T2YoIFwiZGF0YS1cIiApID09PSAwICkge1xuXHRcdFx0XHRcdFx0XHRcdG5hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lLnNsaWNlKDUpICk7XG5cdFx0XHRcdFx0XHRcdFx0ZGF0YUF0dHIoIGVsZW0sIG5hbWUsIGRhdGFbIG5hbWUgXSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRhdGFfcHJpdi5zZXQoIGVsZW0sIFwiaGFzRGF0YUF0dHJzXCIsIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGF0YTtcblx0XHR9XG5cblx0XHQvLyBTZXRzIG11bHRpcGxlIHZhbHVlc1xuXHRcdGlmICggdHlwZW9mIGtleSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGRhdGFfdXNlci5zZXQoIHRoaXMsIGtleSApO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0dmFyIGRhdGEsXG5cdFx0XHRcdGNhbWVsS2V5ID0galF1ZXJ5LmNhbWVsQ2FzZSgga2V5ICk7XG5cblx0XHRcdC8vIFRoZSBjYWxsaW5nIGpRdWVyeSBvYmplY3QgKGVsZW1lbnQgbWF0Y2hlcykgaXMgbm90IGVtcHR5XG5cdFx0XHQvLyAoYW5kIHRoZXJlZm9yZSBoYXMgYW4gZWxlbWVudCBhcHBlYXJzIGF0IHRoaXNbIDAgXSkgYW5kIHRoZVxuXHRcdFx0Ly8gYHZhbHVlYCBwYXJhbWV0ZXIgd2FzIG5vdCB1bmRlZmluZWQuIEFuIGVtcHR5IGpRdWVyeSBvYmplY3Rcblx0XHRcdC8vIHdpbGwgcmVzdWx0IGluIGB1bmRlZmluZWRgIGZvciBlbGVtID0gdGhpc1sgMCBdIHdoaWNoIHdpbGxcblx0XHRcdC8vIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhbiBhdHRlbXB0IHRvIHJlYWQgYSBkYXRhIGNhY2hlIGlzIG1hZGUuXG5cdFx0XHRpZiAoIGVsZW0gJiYgdmFsdWUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBnZXQgZGF0YSBmcm9tIHRoZSBjYWNoZVxuXHRcdFx0XHQvLyB3aXRoIHRoZSBrZXkgYXMtaXNcblx0XHRcdFx0ZGF0YSA9IGRhdGFfdXNlci5nZXQoIGVsZW0sIGtleSApO1xuXHRcdFx0XHRpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEF0dGVtcHQgdG8gZ2V0IGRhdGEgZnJvbSB0aGUgY2FjaGVcblx0XHRcdFx0Ly8gd2l0aCB0aGUga2V5IGNhbWVsaXplZFxuXHRcdFx0XHRkYXRhID0gZGF0YV91c2VyLmdldCggZWxlbSwgY2FtZWxLZXkgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIFwiZGlzY292ZXJcIiB0aGUgZGF0YSBpblxuXHRcdFx0XHQvLyBIVE1MNSBjdXN0b20gZGF0YS0qIGF0dHJzXG5cdFx0XHRcdGRhdGEgPSBkYXRhQXR0ciggZWxlbSwgY2FtZWxLZXksIHVuZGVmaW5lZCApO1xuXHRcdFx0XHRpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFdlIHRyaWVkIHJlYWxseSBoYXJkLCBidXQgdGhlIGRhdGEgZG9lc24ndCBleGlzdC5cblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZXQgdGhlIGRhdGEuLi5cblx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gRmlyc3QsIGF0dGVtcHQgdG8gc3RvcmUgYSBjb3B5IG9yIHJlZmVyZW5jZSBvZiBhbnlcblx0XHRcdFx0Ly8gZGF0YSB0aGF0IG1pZ2h0J3ZlIGJlZW4gc3RvcmUgd2l0aCBhIGNhbWVsQ2FzZWQga2V5LlxuXHRcdFx0XHR2YXIgZGF0YSA9IGRhdGFfdXNlci5nZXQoIHRoaXMsIGNhbWVsS2V5ICk7XG5cblx0XHRcdFx0Ly8gRm9yIEhUTUw1IGRhdGEtKiBhdHRyaWJ1dGUgaW50ZXJvcCwgd2UgaGF2ZSB0b1xuXHRcdFx0XHQvLyBzdG9yZSBwcm9wZXJ0eSBuYW1lcyB3aXRoIGRhc2hlcyBpbiBhIGNhbWVsQ2FzZSBmb3JtLlxuXHRcdFx0XHQvLyBUaGlzIG1pZ2h0IG5vdCBhcHBseSB0byBhbGwgcHJvcGVydGllcy4uLipcblx0XHRcdFx0ZGF0YV91c2VyLnNldCggdGhpcywgY2FtZWxLZXksIHZhbHVlICk7XG5cblx0XHRcdFx0Ly8gKi4uLiBJbiB0aGUgY2FzZSBvZiBwcm9wZXJ0aWVzIHRoYXQgbWlnaHQgX2FjdHVhbGx5X1xuXHRcdFx0XHQvLyBoYXZlIGRhc2hlcywgd2UgbmVlZCB0byBhbHNvIHN0b3JlIGEgY29weSBvZiB0aGF0XG5cdFx0XHRcdC8vIHVuY2hhbmdlZCBwcm9wZXJ0eS5cblx0XHRcdFx0aWYgKCBrZXkuaW5kZXhPZihcIi1cIikgIT09IC0xICYmIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRkYXRhX3VzZXIuc2V0KCB0aGlzLCBrZXksIHZhbHVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSwgbnVsbCwgdHJ1ZSApO1xuXHR9LFxuXG5cdHJlbW92ZURhdGE6IGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGRhdGFfdXNlci5yZW1vdmUoIHRoaXMsIGtleSApO1xuXHRcdH0pO1xuXHR9XG59KTtcblxuXG5qUXVlcnkuZXh0ZW5kKHtcblx0cXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCBkYXRhICkge1xuXHRcdHZhciBxdWV1ZTtcblxuXHRcdGlmICggZWxlbSApIHtcblx0XHRcdHR5cGUgPSAoIHR5cGUgfHwgXCJmeFwiICkgKyBcInF1ZXVlXCI7XG5cdFx0XHRxdWV1ZSA9IGRhdGFfcHJpdi5nZXQoIGVsZW0sIHR5cGUgKTtcblxuXHRcdFx0Ly8gU3BlZWQgdXAgZGVxdWV1ZSBieSBnZXR0aW5nIG91dCBxdWlja2x5IGlmIHRoaXMgaXMganVzdCBhIGxvb2t1cFxuXHRcdFx0aWYgKCBkYXRhICkge1xuXHRcdFx0XHRpZiAoICFxdWV1ZSB8fCBqUXVlcnkuaXNBcnJheSggZGF0YSApICkge1xuXHRcdFx0XHRcdHF1ZXVlID0gZGF0YV9wcml2LmFjY2VzcyggZWxlbSwgdHlwZSwgalF1ZXJ5Lm1ha2VBcnJheShkYXRhKSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHF1ZXVlLnB1c2goIGRhdGEgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHF1ZXVlIHx8IFtdO1xuXHRcdH1cblx0fSxcblxuXHRkZXF1ZXVlOiBmdW5jdGlvbiggZWxlbSwgdHlwZSApIHtcblx0XHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cblx0XHR2YXIgcXVldWUgPSBqUXVlcnkucXVldWUoIGVsZW0sIHR5cGUgKSxcblx0XHRcdHN0YXJ0TGVuZ3RoID0gcXVldWUubGVuZ3RoLFxuXHRcdFx0Zm4gPSBxdWV1ZS5zaGlmdCgpLFxuXHRcdFx0aG9va3MgPSBqUXVlcnkuX3F1ZXVlSG9va3MoIGVsZW0sIHR5cGUgKSxcblx0XHRcdG5leHQgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIGVsZW0sIHR5cGUgKTtcblx0XHRcdH07XG5cblx0XHQvLyBJZiB0aGUgZnggcXVldWUgaXMgZGVxdWV1ZWQsIGFsd2F5cyByZW1vdmUgdGhlIHByb2dyZXNzIHNlbnRpbmVsXG5cdFx0aWYgKCBmbiA9PT0gXCJpbnByb2dyZXNzXCIgKSB7XG5cdFx0XHRmbiA9IHF1ZXVlLnNoaWZ0KCk7XG5cdFx0XHRzdGFydExlbmd0aC0tO1xuXHRcdH1cblxuXHRcdGlmICggZm4gKSB7XG5cblx0XHRcdC8vIEFkZCBhIHByb2dyZXNzIHNlbnRpbmVsIHRvIHByZXZlbnQgdGhlIGZ4IHF1ZXVlIGZyb20gYmVpbmdcblx0XHRcdC8vIGF1dG9tYXRpY2FsbHkgZGVxdWV1ZWRcblx0XHRcdGlmICggdHlwZSA9PT0gXCJmeFwiICkge1xuXHRcdFx0XHRxdWV1ZS51bnNoaWZ0KCBcImlucHJvZ3Jlc3NcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDbGVhciB1cCB0aGUgbGFzdCBxdWV1ZSBzdG9wIGZ1bmN0aW9uXG5cdFx0XHRkZWxldGUgaG9va3Muc3RvcDtcblx0XHRcdGZuLmNhbGwoIGVsZW0sIG5leHQsIGhvb2tzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCAhc3RhcnRMZW5ndGggJiYgaG9va3MgKSB7XG5cdFx0XHRob29rcy5lbXB0eS5maXJlKCk7XG5cdFx0fVxuXHR9LFxuXG5cdC8vIE5vdCBwdWJsaWMgLSBnZW5lcmF0ZSBhIHF1ZXVlSG9va3Mgb2JqZWN0LCBvciByZXR1cm4gdGhlIGN1cnJlbnQgb25lXG5cdF9xdWV1ZUhvb2tzOiBmdW5jdGlvbiggZWxlbSwgdHlwZSApIHtcblx0XHR2YXIga2V5ID0gdHlwZSArIFwicXVldWVIb29rc1wiO1xuXHRcdHJldHVybiBkYXRhX3ByaXYuZ2V0KCBlbGVtLCBrZXkgKSB8fCBkYXRhX3ByaXYuYWNjZXNzKCBlbGVtLCBrZXksIHtcblx0XHRcdGVtcHR5OiBqUXVlcnkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikuYWRkKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXRhX3ByaXYucmVtb3ZlKCBlbGVtLCBbIHR5cGUgKyBcInF1ZXVlXCIsIGtleSBdICk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdHF1ZXVlOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgc2V0dGVyID0gMjtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRkYXRhID0gdHlwZTtcblx0XHRcdHR5cGUgPSBcImZ4XCI7XG5cdFx0XHRzZXR0ZXItLTtcblx0XHR9XG5cblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggPCBzZXR0ZXIgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnF1ZXVlKCB0aGlzWzBdLCB0eXBlICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRhdGEgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHR0aGlzIDpcblx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBkYXRhICk7XG5cblx0XHRcdFx0Ly8gRW5zdXJlIGEgaG9va3MgZm9yIHRoaXMgcXVldWVcblx0XHRcdFx0alF1ZXJ5Ll9xdWV1ZUhvb2tzKCB0aGlzLCB0eXBlICk7XG5cblx0XHRcdFx0aWYgKCB0eXBlID09PSBcImZ4XCIgJiYgcXVldWVbMF0gIT09IFwiaW5wcm9ncmVzc1wiICkge1xuXHRcdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHR9LFxuXHRkZXF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHR9KTtcblx0fSxcblx0Y2xlYXJRdWV1ZTogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0cmV0dXJuIHRoaXMucXVldWUoIHR5cGUgfHwgXCJmeFwiLCBbXSApO1xuXHR9LFxuXHQvLyBHZXQgYSBwcm9taXNlIHJlc29sdmVkIHdoZW4gcXVldWVzIG9mIGEgY2VydGFpbiB0eXBlXG5cdC8vIGFyZSBlbXB0aWVkIChmeCBpcyB0aGUgdHlwZSBieSBkZWZhdWx0KVxuXHRwcm9taXNlOiBmdW5jdGlvbiggdHlwZSwgb2JqICkge1xuXHRcdHZhciB0bXAsXG5cdFx0XHRjb3VudCA9IDEsXG5cdFx0XHRkZWZlciA9IGpRdWVyeS5EZWZlcnJlZCgpLFxuXHRcdFx0ZWxlbWVudHMgPSB0aGlzLFxuXHRcdFx0aSA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0cmVzb2x2ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoICEoIC0tY291bnQgKSApIHtcblx0XHRcdFx0XHRkZWZlci5yZXNvbHZlV2l0aCggZWxlbWVudHMsIFsgZWxlbWVudHMgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0aWYgKCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdG9iaiA9IHR5cGU7XG5cdFx0XHR0eXBlID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdHRtcCA9IGRhdGFfcHJpdi5nZXQoIGVsZW1lbnRzWyBpIF0sIHR5cGUgKyBcInF1ZXVlSG9va3NcIiApO1xuXHRcdFx0aWYgKCB0bXAgJiYgdG1wLmVtcHR5ICkge1xuXHRcdFx0XHRjb3VudCsrO1xuXHRcdFx0XHR0bXAuZW1wdHkuYWRkKCByZXNvbHZlICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJlc29sdmUoKTtcblx0XHRyZXR1cm4gZGVmZXIucHJvbWlzZSggb2JqICk7XG5cdH1cbn0pO1xudmFyIHBudW0gPSAoL1srLV0/KD86XFxkKlxcLnwpXFxkKyg/OltlRV1bKy1dP1xcZCt8KS8pLnNvdXJjZTtcblxudmFyIGNzc0V4cGFuZCA9IFsgXCJUb3BcIiwgXCJSaWdodFwiLCBcIkJvdHRvbVwiLCBcIkxlZnRcIiBdO1xuXG52YXIgaXNIaWRkZW4gPSBmdW5jdGlvbiggZWxlbSwgZWwgKSB7XG5cdFx0Ly8gaXNIaWRkZW4gbWlnaHQgYmUgY2FsbGVkIGZyb20galF1ZXJ5I2ZpbHRlciBmdW5jdGlvbjtcblx0XHQvLyBpbiB0aGF0IGNhc2UsIGVsZW1lbnQgd2lsbCBiZSBzZWNvbmQgYXJndW1lbnRcblx0XHRlbGVtID0gZWwgfHwgZWxlbTtcblx0XHRyZXR1cm4galF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSA9PT0gXCJub25lXCIgfHwgIWpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICk7XG5cdH07XG5cbnZhciByY2hlY2thYmxlVHlwZSA9ICgvXig/OmNoZWNrYm94fHJhZGlvKSQvaSk7XG5cblxuXG4oZnVuY3Rpb24oKSB7XG5cdHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcblx0XHRkaXYgPSBmcmFnbWVudC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApICksXG5cdFx0aW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKTtcblxuXHQvLyBTdXBwb3J0OiBTYWZhcmk8PTUuMVxuXHQvLyBDaGVjayBzdGF0ZSBsb3N0IGlmIHRoZSBuYW1lIGlzIHNldCAoIzExMjE3KVxuXHQvLyBTdXBwb3J0OiBXaW5kb3dzIFdlYiBBcHBzIChXV0EpXG5cdC8vIGBuYW1lYCBhbmQgYHR5cGVgIG11c3QgdXNlIC5zZXRBdHRyaWJ1dGUgZm9yIFdXQSAoIzE0OTAxKVxuXHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCBcInJhZGlvXCIgKTtcblx0aW5wdXQuc2V0QXR0cmlidXRlKCBcImNoZWNrZWRcIiwgXCJjaGVja2VkXCIgKTtcblx0aW5wdXQuc2V0QXR0cmlidXRlKCBcIm5hbWVcIiwgXCJ0XCIgKTtcblxuXHRkaXYuYXBwZW5kQ2hpbGQoIGlucHV0ICk7XG5cblx0Ly8gU3VwcG9ydDogU2FmYXJpPD01LjEsIEFuZHJvaWQ8NC4yXG5cdC8vIE9sZGVyIFdlYktpdCBkb2Vzbid0IGNsb25lIGNoZWNrZWQgc3RhdGUgY29ycmVjdGx5IGluIGZyYWdtZW50c1xuXHRzdXBwb3J0LmNoZWNrQ2xvbmUgPSBkaXYuY2xvbmVOb2RlKCB0cnVlICkuY2xvbmVOb2RlKCB0cnVlICkubGFzdENoaWxkLmNoZWNrZWQ7XG5cblx0Ly8gU3VwcG9ydDogSUU8PTExK1xuXHQvLyBNYWtlIHN1cmUgdGV4dGFyZWEgKGFuZCBjaGVja2JveCkgZGVmYXVsdFZhbHVlIGlzIHByb3Blcmx5IGNsb25lZFxuXHRkaXYuaW5uZXJIVE1MID0gXCI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+XCI7XG5cdHN1cHBvcnQubm9DbG9uZUNoZWNrZWQgPSAhIWRpdi5jbG9uZU5vZGUoIHRydWUgKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlO1xufSkoKTtcbnZhciBzdHJ1bmRlZmluZWQgPSB0eXBlb2YgdW5kZWZpbmVkO1xuXG5cblxuc3VwcG9ydC5mb2N1c2luQnViYmxlcyA9IFwib25mb2N1c2luXCIgaW4gd2luZG93O1xuXG5cbnZhclxuXHRya2V5RXZlbnQgPSAvXmtleS8sXG5cdHJtb3VzZUV2ZW50ID0gL14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51KXxjbGljay8sXG5cdHJmb2N1c01vcnBoID0gL14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLFxuXHRydHlwZW5hbWVzcGFjZSA9IC9eKFteLl0qKSg/OlxcLiguKyl8KSQvO1xuXG5mdW5jdGlvbiByZXR1cm5UcnVlKCkge1xuXHRyZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gcmV0dXJuRmFsc2UoKSB7XG5cdHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gc2FmZUFjdGl2ZUVsZW1lbnQoKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG5cdH0gY2F0Y2ggKCBlcnIgKSB7IH1cbn1cblxuLypcbiAqIEhlbHBlciBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGV2ZW50cyAtLSBub3QgcGFydCBvZiB0aGUgcHVibGljIGludGVyZmFjZS5cbiAqIFByb3BzIHRvIERlYW4gRWR3YXJkcycgYWRkRXZlbnQgbGlicmFyeSBmb3IgbWFueSBvZiB0aGUgaWRlYXMuXG4gKi9cbmpRdWVyeS5ldmVudCA9IHtcblxuXHRnbG9iYWw6IHt9LFxuXG5cdGFkZDogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBkYXRhLCBzZWxlY3RvciApIHtcblxuXHRcdHZhciBoYW5kbGVPYmpJbiwgZXZlbnRIYW5kbGUsIHRtcCxcblx0XHRcdGV2ZW50cywgdCwgaGFuZGxlT2JqLFxuXHRcdFx0c3BlY2lhbCwgaGFuZGxlcnMsIHR5cGUsIG5hbWVzcGFjZXMsIG9yaWdUeXBlLFxuXHRcdFx0ZWxlbURhdGEgPSBkYXRhX3ByaXYuZ2V0KCBlbGVtICk7XG5cblx0XHQvLyBEb24ndCBhdHRhY2ggZXZlbnRzIHRvIG5vRGF0YSBvciB0ZXh0L2NvbW1lbnQgbm9kZXMgKGJ1dCBhbGxvdyBwbGFpbiBvYmplY3RzKVxuXHRcdGlmICggIWVsZW1EYXRhICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIENhbGxlciBjYW4gcGFzcyBpbiBhbiBvYmplY3Qgb2YgY3VzdG9tIGRhdGEgaW4gbGlldSBvZiB0aGUgaGFuZGxlclxuXHRcdGlmICggaGFuZGxlci5oYW5kbGVyICkge1xuXHRcdFx0aGFuZGxlT2JqSW4gPSBoYW5kbGVyO1xuXHRcdFx0aGFuZGxlciA9IGhhbmRsZU9iakluLmhhbmRsZXI7XG5cdFx0XHRzZWxlY3RvciA9IGhhbmRsZU9iakluLnNlbGVjdG9yO1xuXHRcdH1cblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBoYW5kbGVyIGhhcyBhIHVuaXF1ZSBJRCwgdXNlZCB0byBmaW5kL3JlbW92ZSBpdCBsYXRlclxuXHRcdGlmICggIWhhbmRsZXIuZ3VpZCApIHtcblx0XHRcdGhhbmRsZXIuZ3VpZCA9IGpRdWVyeS5ndWlkKys7XG5cdFx0fVxuXG5cdFx0Ly8gSW5pdCB0aGUgZWxlbWVudCdzIGV2ZW50IHN0cnVjdHVyZSBhbmQgbWFpbiBoYW5kbGVyLCBpZiB0aGlzIGlzIHRoZSBmaXJzdFxuXHRcdGlmICggIShldmVudHMgPSBlbGVtRGF0YS5ldmVudHMpICkge1xuXHRcdFx0ZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzID0ge307XG5cdFx0fVxuXHRcdGlmICggIShldmVudEhhbmRsZSA9IGVsZW1EYXRhLmhhbmRsZSkgKSB7XG5cdFx0XHRldmVudEhhbmRsZSA9IGVsZW1EYXRhLmhhbmRsZSA9IGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0XHQvLyBEaXNjYXJkIHRoZSBzZWNvbmQgZXZlbnQgb2YgYSBqUXVlcnkuZXZlbnQudHJpZ2dlcigpIGFuZFxuXHRcdFx0XHQvLyB3aGVuIGFuIGV2ZW50IGlzIGNhbGxlZCBhZnRlciBhIHBhZ2UgaGFzIHVubG9hZGVkXG5cdFx0XHRcdHJldHVybiB0eXBlb2YgalF1ZXJ5ICE9PSBzdHJ1bmRlZmluZWQgJiYgalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCAhPT0gZS50eXBlID9cblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQuZGlzcGF0Y2guYXBwbHkoIGVsZW0sIGFyZ3VtZW50cyApIDogdW5kZWZpbmVkO1xuXHRcdFx0fTtcblx0XHR9XG5cblx0XHQvLyBIYW5kbGUgbXVsdGlwbGUgZXZlbnRzIHNlcGFyYXRlZCBieSBhIHNwYWNlXG5cdFx0dHlwZXMgPSAoIHR5cGVzIHx8IFwiXCIgKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgWyBcIlwiIF07XG5cdFx0dCA9IHR5cGVzLmxlbmd0aDtcblx0XHR3aGlsZSAoIHQtLSApIHtcblx0XHRcdHRtcCA9IHJ0eXBlbmFtZXNwYWNlLmV4ZWMoIHR5cGVzW3RdICkgfHwgW107XG5cdFx0XHR0eXBlID0gb3JpZ1R5cGUgPSB0bXBbMV07XG5cdFx0XHRuYW1lc3BhY2VzID0gKCB0bXBbMl0gfHwgXCJcIiApLnNwbGl0KCBcIi5cIiApLnNvcnQoKTtcblxuXHRcdFx0Ly8gVGhlcmUgKm11c3QqIGJlIGEgdHlwZSwgbm8gYXR0YWNoaW5nIG5hbWVzcGFjZS1vbmx5IGhhbmRsZXJzXG5cdFx0XHRpZiAoICF0eXBlICkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgZXZlbnQgY2hhbmdlcyBpdHMgdHlwZSwgdXNlIHRoZSBzcGVjaWFsIGV2ZW50IGhhbmRsZXJzIGZvciB0aGUgY2hhbmdlZCB0eXBlXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblxuXHRcdFx0Ly8gSWYgc2VsZWN0b3IgZGVmaW5lZCwgZGV0ZXJtaW5lIHNwZWNpYWwgZXZlbnQgYXBpIHR5cGUsIG90aGVyd2lzZSBnaXZlbiB0eXBlXG5cdFx0XHR0eXBlID0gKCBzZWxlY3RvciA/IHNwZWNpYWwuZGVsZWdhdGVUeXBlIDogc3BlY2lhbC5iaW5kVHlwZSApIHx8IHR5cGU7XG5cblx0XHRcdC8vIFVwZGF0ZSBzcGVjaWFsIGJhc2VkIG9uIG5ld2x5IHJlc2V0IHR5cGVcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXG5cdFx0XHQvLyBoYW5kbGVPYmogaXMgcGFzc2VkIHRvIGFsbCBldmVudCBoYW5kbGVyc1xuXHRcdFx0aGFuZGxlT2JqID0galF1ZXJ5LmV4dGVuZCh7XG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdG9yaWdUeXBlOiBvcmlnVHlwZSxcblx0XHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdFx0aGFuZGxlcjogaGFuZGxlcixcblx0XHRcdFx0Z3VpZDogaGFuZGxlci5ndWlkLFxuXHRcdFx0XHRzZWxlY3Rvcjogc2VsZWN0b3IsXG5cdFx0XHRcdG5lZWRzQ29udGV4dDogc2VsZWN0b3IgJiYgalF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICksXG5cdFx0XHRcdG5hbWVzcGFjZTogbmFtZXNwYWNlcy5qb2luKFwiLlwiKVxuXHRcdFx0fSwgaGFuZGxlT2JqSW4gKTtcblxuXHRcdFx0Ly8gSW5pdCB0aGUgZXZlbnQgaGFuZGxlciBxdWV1ZSBpZiB3ZSdyZSB0aGUgZmlyc3Rcblx0XHRcdGlmICggIShoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdKSApIHtcblx0XHRcdFx0aGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSA9IFtdO1xuXHRcdFx0XHRoYW5kbGVycy5kZWxlZ2F0ZUNvdW50ID0gMDtcblxuXHRcdFx0XHQvLyBPbmx5IHVzZSBhZGRFdmVudExpc3RlbmVyIGlmIHRoZSBzcGVjaWFsIGV2ZW50cyBoYW5kbGVyIHJldHVybnMgZmFsc2Vcblx0XHRcdFx0aWYgKCAhc3BlY2lhbC5zZXR1cCB8fCBzcGVjaWFsLnNldHVwLmNhbGwoIGVsZW0sIGRhdGEsIG5hbWVzcGFjZXMsIGV2ZW50SGFuZGxlICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5hZGRFdmVudExpc3RlbmVyICkge1xuXHRcdFx0XHRcdFx0ZWxlbS5hZGRFdmVudExpc3RlbmVyKCB0eXBlLCBldmVudEhhbmRsZSwgZmFsc2UgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBzcGVjaWFsLmFkZCApIHtcblx0XHRcdFx0c3BlY2lhbC5hZGQuY2FsbCggZWxlbSwgaGFuZGxlT2JqICk7XG5cblx0XHRcdFx0aWYgKCAhaGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCApIHtcblx0XHRcdFx0XHRoYW5kbGVPYmouaGFuZGxlci5ndWlkID0gaGFuZGxlci5ndWlkO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCB0byB0aGUgZWxlbWVudCdzIGhhbmRsZXIgbGlzdCwgZGVsZWdhdGVzIGluIGZyb250XG5cdFx0XHRpZiAoIHNlbGVjdG9yICkge1xuXHRcdFx0XHRoYW5kbGVycy5zcGxpY2UoIGhhbmRsZXJzLmRlbGVnYXRlQ291bnQrKywgMCwgaGFuZGxlT2JqICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRoYW5kbGVycy5wdXNoKCBoYW5kbGVPYmogKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gS2VlcCB0cmFjayBvZiB3aGljaCBldmVudHMgaGF2ZSBldmVyIGJlZW4gdXNlZCwgZm9yIGV2ZW50IG9wdGltaXphdGlvblxuXHRcdFx0alF1ZXJ5LmV2ZW50Lmdsb2JhbFsgdHlwZSBdID0gdHJ1ZTtcblx0XHR9XG5cblx0fSxcblxuXHQvLyBEZXRhY2ggYW4gZXZlbnQgb3Igc2V0IG9mIGV2ZW50cyBmcm9tIGFuIGVsZW1lbnRcblx0cmVtb3ZlOiBmdW5jdGlvbiggZWxlbSwgdHlwZXMsIGhhbmRsZXIsIHNlbGVjdG9yLCBtYXBwZWRUeXBlcyApIHtcblxuXHRcdHZhciBqLCBvcmlnQ291bnQsIHRtcCxcblx0XHRcdGV2ZW50cywgdCwgaGFuZGxlT2JqLFxuXHRcdFx0c3BlY2lhbCwgaGFuZGxlcnMsIHR5cGUsIG5hbWVzcGFjZXMsIG9yaWdUeXBlLFxuXHRcdFx0ZWxlbURhdGEgPSBkYXRhX3ByaXYuaGFzRGF0YSggZWxlbSApICYmIGRhdGFfcHJpdi5nZXQoIGVsZW0gKTtcblxuXHRcdGlmICggIWVsZW1EYXRhIHx8ICEoZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBPbmNlIGZvciBlYWNoIHR5cGUubmFtZXNwYWNlIGluIHR5cGVzOyB0eXBlIG1heSBiZSBvbWl0dGVkXG5cdFx0dHlwZXMgPSAoIHR5cGVzIHx8IFwiXCIgKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgWyBcIlwiIF07XG5cdFx0dCA9IHR5cGVzLmxlbmd0aDtcblx0XHR3aGlsZSAoIHQtLSApIHtcblx0XHRcdHRtcCA9IHJ0eXBlbmFtZXNwYWNlLmV4ZWMoIHR5cGVzW3RdICkgfHwgW107XG5cdFx0XHR0eXBlID0gb3JpZ1R5cGUgPSB0bXBbMV07XG5cdFx0XHRuYW1lc3BhY2VzID0gKCB0bXBbMl0gfHwgXCJcIiApLnNwbGl0KCBcIi5cIiApLnNvcnQoKTtcblxuXHRcdFx0Ly8gVW5iaW5kIGFsbCBldmVudHMgKG9uIHRoaXMgbmFtZXNwYWNlLCBpZiBwcm92aWRlZCkgZm9yIHRoZSBlbGVtZW50XG5cdFx0XHRpZiAoICF0eXBlICkge1xuXHRcdFx0XHRmb3IgKCB0eXBlIGluIGV2ZW50cyApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCBlbGVtLCB0eXBlICsgdHlwZXNbIHQgXSwgaGFuZGxlciwgc2VsZWN0b3IsIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cdFx0XHR0eXBlID0gKCBzZWxlY3RvciA/IHNwZWNpYWwuZGVsZWdhdGVUeXBlIDogc3BlY2lhbC5iaW5kVHlwZSApIHx8IHR5cGU7XG5cdFx0XHRoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdIHx8IFtdO1xuXHRcdFx0dG1wID0gdG1wWzJdICYmIG5ldyBSZWdFeHAoIFwiKF58XFxcXC4pXCIgKyBuYW1lc3BhY2VzLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKSArIFwiKFxcXFwufCQpXCIgKTtcblxuXHRcdFx0Ly8gUmVtb3ZlIG1hdGNoaW5nIGV2ZW50c1xuXHRcdFx0b3JpZ0NvdW50ID0gaiA9IGhhbmRsZXJzLmxlbmd0aDtcblx0XHRcdHdoaWxlICggai0tICkge1xuXHRcdFx0XHRoYW5kbGVPYmogPSBoYW5kbGVyc1sgaiBdO1xuXG5cdFx0XHRcdGlmICggKCBtYXBwZWRUeXBlcyB8fCBvcmlnVHlwZSA9PT0gaGFuZGxlT2JqLm9yaWdUeXBlICkgJiZcblx0XHRcdFx0XHQoICFoYW5kbGVyIHx8IGhhbmRsZXIuZ3VpZCA9PT0gaGFuZGxlT2JqLmd1aWQgKSAmJlxuXHRcdFx0XHRcdCggIXRtcCB8fCB0bXAudGVzdCggaGFuZGxlT2JqLm5hbWVzcGFjZSApICkgJiZcblx0XHRcdFx0XHQoICFzZWxlY3RvciB8fCBzZWxlY3RvciA9PT0gaGFuZGxlT2JqLnNlbGVjdG9yIHx8IHNlbGVjdG9yID09PSBcIioqXCIgJiYgaGFuZGxlT2JqLnNlbGVjdG9yICkgKSB7XG5cdFx0XHRcdFx0aGFuZGxlcnMuc3BsaWNlKCBqLCAxICk7XG5cblx0XHRcdFx0XHRpZiAoIGhhbmRsZU9iai5zZWxlY3RvciApIHtcblx0XHRcdFx0XHRcdGhhbmRsZXJzLmRlbGVnYXRlQ291bnQtLTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCBzcGVjaWFsLnJlbW92ZSApIHtcblx0XHRcdFx0XHRcdHNwZWNpYWwucmVtb3ZlLmNhbGwoIGVsZW0sIGhhbmRsZU9iaiApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZW1vdmUgZ2VuZXJpYyBldmVudCBoYW5kbGVyIGlmIHdlIHJlbW92ZWQgc29tZXRoaW5nIGFuZCBubyBtb3JlIGhhbmRsZXJzIGV4aXN0XG5cdFx0XHQvLyAoYXZvaWRzIHBvdGVudGlhbCBmb3IgZW5kbGVzcyByZWN1cnNpb24gZHVyaW5nIHJlbW92YWwgb2Ygc3BlY2lhbCBldmVudCBoYW5kbGVycylcblx0XHRcdGlmICggb3JpZ0NvdW50ICYmICFoYW5kbGVycy5sZW5ndGggKSB7XG5cdFx0XHRcdGlmICggIXNwZWNpYWwudGVhcmRvd24gfHwgc3BlY2lhbC50ZWFyZG93bi5jYWxsKCBlbGVtLCBuYW1lc3BhY2VzLCBlbGVtRGF0YS5oYW5kbGUgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LnJlbW92ZUV2ZW50KCBlbGVtLCB0eXBlLCBlbGVtRGF0YS5oYW5kbGUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGRlbGV0ZSBldmVudHNbIHR5cGUgXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgdGhlIGV4cGFuZG8gaWYgaXQncyBubyBsb25nZXIgdXNlZFxuXHRcdGlmICggalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGV2ZW50cyApICkge1xuXHRcdFx0ZGVsZXRlIGVsZW1EYXRhLmhhbmRsZTtcblx0XHRcdGRhdGFfcHJpdi5yZW1vdmUoIGVsZW0sIFwiZXZlbnRzXCIgKTtcblx0XHR9XG5cdH0sXG5cblx0dHJpZ2dlcjogZnVuY3Rpb24oIGV2ZW50LCBkYXRhLCBlbGVtLCBvbmx5SGFuZGxlcnMgKSB7XG5cblx0XHR2YXIgaSwgY3VyLCB0bXAsIGJ1YmJsZVR5cGUsIG9udHlwZSwgaGFuZGxlLCBzcGVjaWFsLFxuXHRcdFx0ZXZlbnRQYXRoID0gWyBlbGVtIHx8IGRvY3VtZW50IF0sXG5cdFx0XHR0eXBlID0gaGFzT3duLmNhbGwoIGV2ZW50LCBcInR5cGVcIiApID8gZXZlbnQudHlwZSA6IGV2ZW50LFxuXHRcdFx0bmFtZXNwYWNlcyA9IGhhc093bi5jYWxsKCBldmVudCwgXCJuYW1lc3BhY2VcIiApID8gZXZlbnQubmFtZXNwYWNlLnNwbGl0KFwiLlwiKSA6IFtdO1xuXG5cdFx0Y3VyID0gdG1wID0gZWxlbSA9IGVsZW0gfHwgZG9jdW1lbnQ7XG5cblx0XHQvLyBEb24ndCBkbyBldmVudHMgb24gdGV4dCBhbmQgY29tbWVudCBub2Rlc1xuXHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtLm5vZGVUeXBlID09PSA4ICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIGZvY3VzL2JsdXIgbW9ycGhzIHRvIGZvY3VzaW4vb3V0OyBlbnN1cmUgd2UncmUgbm90IGZpcmluZyB0aGVtIHJpZ2h0IG5vd1xuXHRcdGlmICggcmZvY3VzTW9ycGgudGVzdCggdHlwZSArIGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIHR5cGUuaW5kZXhPZihcIi5cIikgPj0gMCApIHtcblx0XHRcdC8vIE5hbWVzcGFjZWQgdHJpZ2dlcjsgY3JlYXRlIGEgcmVnZXhwIHRvIG1hdGNoIGV2ZW50IHR5cGUgaW4gaGFuZGxlKClcblx0XHRcdG5hbWVzcGFjZXMgPSB0eXBlLnNwbGl0KFwiLlwiKTtcblx0XHRcdHR5cGUgPSBuYW1lc3BhY2VzLnNoaWZ0KCk7XG5cdFx0XHRuYW1lc3BhY2VzLnNvcnQoKTtcblx0XHR9XG5cdFx0b250eXBlID0gdHlwZS5pbmRleE9mKFwiOlwiKSA8IDAgJiYgXCJvblwiICsgdHlwZTtcblxuXHRcdC8vIENhbGxlciBjYW4gcGFzcyBpbiBhIGpRdWVyeS5FdmVudCBvYmplY3QsIE9iamVjdCwgb3IganVzdCBhbiBldmVudCB0eXBlIHN0cmluZ1xuXHRcdGV2ZW50ID0gZXZlbnRbIGpRdWVyeS5leHBhbmRvIF0gP1xuXHRcdFx0ZXZlbnQgOlxuXHRcdFx0bmV3IGpRdWVyeS5FdmVudCggdHlwZSwgdHlwZW9mIGV2ZW50ID09PSBcIm9iamVjdFwiICYmIGV2ZW50ICk7XG5cblx0XHQvLyBUcmlnZ2VyIGJpdG1hc2s6ICYgMSBmb3IgbmF0aXZlIGhhbmRsZXJzOyAmIDIgZm9yIGpRdWVyeSAoYWx3YXlzIHRydWUpXG5cdFx0ZXZlbnQuaXNUcmlnZ2VyID0gb25seUhhbmRsZXJzID8gMiA6IDM7XG5cdFx0ZXZlbnQubmFtZXNwYWNlID0gbmFtZXNwYWNlcy5qb2luKFwiLlwiKTtcblx0XHRldmVudC5uYW1lc3BhY2VfcmUgPSBldmVudC5uYW1lc3BhY2UgP1xuXHRcdFx0bmV3IFJlZ0V4cCggXCIoXnxcXFxcLilcIiArIG5hbWVzcGFjZXMuam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpICsgXCIoXFxcXC58JClcIiApIDpcblx0XHRcdG51bGw7XG5cblx0XHQvLyBDbGVhbiB1cCB0aGUgZXZlbnQgaW4gY2FzZSBpdCBpcyBiZWluZyByZXVzZWRcblx0XHRldmVudC5yZXN1bHQgPSB1bmRlZmluZWQ7XG5cdFx0aWYgKCAhZXZlbnQudGFyZ2V0ICkge1xuXHRcdFx0ZXZlbnQudGFyZ2V0ID0gZWxlbTtcblx0XHR9XG5cblx0XHQvLyBDbG9uZSBhbnkgaW5jb21pbmcgZGF0YSBhbmQgcHJlcGVuZCB0aGUgZXZlbnQsIGNyZWF0aW5nIHRoZSBoYW5kbGVyIGFyZyBsaXN0XG5cdFx0ZGF0YSA9IGRhdGEgPT0gbnVsbCA/XG5cdFx0XHRbIGV2ZW50IF0gOlxuXHRcdFx0alF1ZXJ5Lm1ha2VBcnJheSggZGF0YSwgWyBldmVudCBdICk7XG5cblx0XHQvLyBBbGxvdyBzcGVjaWFsIGV2ZW50cyB0byBkcmF3IG91dHNpZGUgdGhlIGxpbmVzXG5cdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cdFx0aWYgKCAhb25seUhhbmRsZXJzICYmIHNwZWNpYWwudHJpZ2dlciAmJiBzcGVjaWFsLnRyaWdnZXIuYXBwbHkoIGVsZW0sIGRhdGEgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRGV0ZXJtaW5lIGV2ZW50IHByb3BhZ2F0aW9uIHBhdGggaW4gYWR2YW5jZSwgcGVyIFczQyBldmVudHMgc3BlYyAoIzk5NTEpXG5cdFx0Ly8gQnViYmxlIHVwIHRvIGRvY3VtZW50LCB0aGVuIHRvIHdpbmRvdzsgd2F0Y2ggZm9yIGEgZ2xvYmFsIG93bmVyRG9jdW1lbnQgdmFyICgjOTcyNClcblx0XHRpZiAoICFvbmx5SGFuZGxlcnMgJiYgIXNwZWNpYWwubm9CdWJibGUgJiYgIWpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkge1xuXG5cdFx0XHRidWJibGVUeXBlID0gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgfHwgdHlwZTtcblx0XHRcdGlmICggIXJmb2N1c01vcnBoLnRlc3QoIGJ1YmJsZVR5cGUgKyB0eXBlICkgKSB7XG5cdFx0XHRcdGN1ciA9IGN1ci5wYXJlbnROb2RlO1xuXHRcdFx0fVxuXHRcdFx0Zm9yICggOyBjdXI7IGN1ciA9IGN1ci5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRldmVudFBhdGgucHVzaCggY3VyICk7XG5cdFx0XHRcdHRtcCA9IGN1cjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gT25seSBhZGQgd2luZG93IGlmIHdlIGdvdCB0byBkb2N1bWVudCAoZS5nLiwgbm90IHBsYWluIG9iaiBvciBkZXRhY2hlZCBET00pXG5cdFx0XHRpZiAoIHRtcCA9PT0gKGVsZW0ub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudCkgKSB7XG5cdFx0XHRcdGV2ZW50UGF0aC5wdXNoKCB0bXAuZGVmYXVsdFZpZXcgfHwgdG1wLnBhcmVudFdpbmRvdyB8fCB3aW5kb3cgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBGaXJlIGhhbmRsZXJzIG9uIHRoZSBldmVudCBwYXRoXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAoY3VyID0gZXZlbnRQYXRoW2krK10pICYmICFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXG5cdFx0XHRldmVudC50eXBlID0gaSA+IDEgP1xuXHRcdFx0XHRidWJibGVUeXBlIDpcblx0XHRcdFx0c3BlY2lhbC5iaW5kVHlwZSB8fCB0eXBlO1xuXG5cdFx0XHQvLyBqUXVlcnkgaGFuZGxlclxuXHRcdFx0aGFuZGxlID0gKCBkYXRhX3ByaXYuZ2V0KCBjdXIsIFwiZXZlbnRzXCIgKSB8fCB7fSApWyBldmVudC50eXBlIF0gJiYgZGF0YV9wcml2LmdldCggY3VyLCBcImhhbmRsZVwiICk7XG5cdFx0XHRpZiAoIGhhbmRsZSApIHtcblx0XHRcdFx0aGFuZGxlLmFwcGx5KCBjdXIsIGRhdGEgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTmF0aXZlIGhhbmRsZXJcblx0XHRcdGhhbmRsZSA9IG9udHlwZSAmJiBjdXJbIG9udHlwZSBdO1xuXHRcdFx0aWYgKCBoYW5kbGUgJiYgaGFuZGxlLmFwcGx5ICYmIGpRdWVyeS5hY2NlcHREYXRhKCBjdXIgKSApIHtcblx0XHRcdFx0ZXZlbnQucmVzdWx0ID0gaGFuZGxlLmFwcGx5KCBjdXIsIGRhdGEgKTtcblx0XHRcdFx0aWYgKCBldmVudC5yZXN1bHQgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0ZXZlbnQudHlwZSA9IHR5cGU7XG5cblx0XHQvLyBJZiBub2JvZHkgcHJldmVudGVkIHRoZSBkZWZhdWx0IGFjdGlvbiwgZG8gaXQgbm93XG5cdFx0aWYgKCAhb25seUhhbmRsZXJzICYmICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcblxuXHRcdFx0aWYgKCAoIXNwZWNpYWwuX2RlZmF1bHQgfHwgc3BlY2lhbC5fZGVmYXVsdC5hcHBseSggZXZlbnRQYXRoLnBvcCgpLCBkYXRhICkgPT09IGZhbHNlKSAmJlxuXHRcdFx0XHRqUXVlcnkuYWNjZXB0RGF0YSggZWxlbSApICkge1xuXG5cdFx0XHRcdC8vIENhbGwgYSBuYXRpdmUgRE9NIG1ldGhvZCBvbiB0aGUgdGFyZ2V0IHdpdGggdGhlIHNhbWUgbmFtZSBuYW1lIGFzIHRoZSBldmVudC5cblx0XHRcdFx0Ly8gRG9uJ3QgZG8gZGVmYXVsdCBhY3Rpb25zIG9uIHdpbmRvdywgdGhhdCdzIHdoZXJlIGdsb2JhbCB2YXJpYWJsZXMgYmUgKCM2MTcwKVxuXHRcdFx0XHRpZiAoIG9udHlwZSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggZWxlbVsgdHlwZSBdICkgJiYgIWpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkge1xuXG5cdFx0XHRcdFx0Ly8gRG9uJ3QgcmUtdHJpZ2dlciBhbiBvbkZPTyBldmVudCB3aGVuIHdlIGNhbGwgaXRzIEZPTygpIG1ldGhvZFxuXHRcdFx0XHRcdHRtcCA9IGVsZW1bIG9udHlwZSBdO1xuXG5cdFx0XHRcdFx0aWYgKCB0bXAgKSB7XG5cdFx0XHRcdFx0XHRlbGVtWyBvbnR5cGUgXSA9IG51bGw7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gUHJldmVudCByZS10cmlnZ2VyaW5nIG9mIHRoZSBzYW1lIGV2ZW50LCBzaW5jZSB3ZSBhbHJlYWR5IGJ1YmJsZWQgaXQgYWJvdmVcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcmVkID0gdHlwZTtcblx0XHRcdFx0XHRlbGVtWyB0eXBlIF0oKTtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcmVkID0gdW5kZWZpbmVkO1xuXG5cdFx0XHRcdFx0aWYgKCB0bXAgKSB7XG5cdFx0XHRcdFx0XHRlbGVtWyBvbnR5cGUgXSA9IHRtcDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZXZlbnQucmVzdWx0O1xuXHR9LFxuXG5cdGRpc3BhdGNoOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cblx0XHQvLyBNYWtlIGEgd3JpdGFibGUgalF1ZXJ5LkV2ZW50IGZyb20gdGhlIG5hdGl2ZSBldmVudCBvYmplY3Rcblx0XHRldmVudCA9IGpRdWVyeS5ldmVudC5maXgoIGV2ZW50ICk7XG5cblx0XHR2YXIgaSwgaiwgcmV0LCBtYXRjaGVkLCBoYW5kbGVPYmosXG5cdFx0XHRoYW5kbGVyUXVldWUgPSBbXSxcblx0XHRcdGFyZ3MgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSxcblx0XHRcdGhhbmRsZXJzID0gKCBkYXRhX3ByaXYuZ2V0KCB0aGlzLCBcImV2ZW50c1wiICkgfHwge30gKVsgZXZlbnQudHlwZSBdIHx8IFtdLFxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyBldmVudC50eXBlIF0gfHwge307XG5cblx0XHQvLyBVc2UgdGhlIGZpeC1lZCBqUXVlcnkuRXZlbnQgcmF0aGVyIHRoYW4gdGhlIChyZWFkLW9ubHkpIG5hdGl2ZSBldmVudFxuXHRcdGFyZ3NbMF0gPSBldmVudDtcblx0XHRldmVudC5kZWxlZ2F0ZVRhcmdldCA9IHRoaXM7XG5cblx0XHQvLyBDYWxsIHRoZSBwcmVEaXNwYXRjaCBob29rIGZvciB0aGUgbWFwcGVkIHR5cGUsIGFuZCBsZXQgaXQgYmFpbCBpZiBkZXNpcmVkXG5cdFx0aWYgKCBzcGVjaWFsLnByZURpc3BhdGNoICYmIHNwZWNpYWwucHJlRGlzcGF0Y2guY2FsbCggdGhpcywgZXZlbnQgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRGV0ZXJtaW5lIGhhbmRsZXJzXG5cdFx0aGFuZGxlclF1ZXVlID0galF1ZXJ5LmV2ZW50LmhhbmRsZXJzLmNhbGwoIHRoaXMsIGV2ZW50LCBoYW5kbGVycyApO1xuXG5cdFx0Ly8gUnVuIGRlbGVnYXRlcyBmaXJzdDsgdGhleSBtYXkgd2FudCB0byBzdG9wIHByb3BhZ2F0aW9uIGJlbmVhdGggdXNcblx0XHRpID0gMDtcblx0XHR3aGlsZSAoIChtYXRjaGVkID0gaGFuZGxlclF1ZXVlWyBpKysgXSkgJiYgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cdFx0XHRldmVudC5jdXJyZW50VGFyZ2V0ID0gbWF0Y2hlZC5lbGVtO1xuXG5cdFx0XHRqID0gMDtcblx0XHRcdHdoaWxlICggKGhhbmRsZU9iaiA9IG1hdGNoZWQuaGFuZGxlcnNbIGorKyBdKSAmJiAhZXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblxuXHRcdFx0XHQvLyBUcmlnZ2VyZWQgZXZlbnQgbXVzdCBlaXRoZXIgMSkgaGF2ZSBubyBuYW1lc3BhY2UsIG9yIDIpIGhhdmUgbmFtZXNwYWNlKHMpXG5cdFx0XHRcdC8vIGEgc3Vic2V0IG9yIGVxdWFsIHRvIHRob3NlIGluIHRoZSBib3VuZCBldmVudCAoYm90aCBjYW4gaGF2ZSBubyBuYW1lc3BhY2UpLlxuXHRcdFx0XHRpZiAoICFldmVudC5uYW1lc3BhY2VfcmUgfHwgZXZlbnQubmFtZXNwYWNlX3JlLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApIHtcblxuXHRcdFx0XHRcdGV2ZW50LmhhbmRsZU9iaiA9IGhhbmRsZU9iajtcblx0XHRcdFx0XHRldmVudC5kYXRhID0gaGFuZGxlT2JqLmRhdGE7XG5cblx0XHRcdFx0XHRyZXQgPSAoIChqUXVlcnkuZXZlbnQuc3BlY2lhbFsgaGFuZGxlT2JqLm9yaWdUeXBlIF0gfHwge30pLmhhbmRsZSB8fCBoYW5kbGVPYmouaGFuZGxlciApXG5cdFx0XHRcdFx0XHRcdC5hcHBseSggbWF0Y2hlZC5lbGVtLCBhcmdzICk7XG5cblx0XHRcdFx0XHRpZiAoIHJldCAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoZXZlbnQucmVzdWx0ID0gcmV0KSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhbGwgdGhlIHBvc3REaXNwYXRjaCBob29rIGZvciB0aGUgbWFwcGVkIHR5cGVcblx0XHRpZiAoIHNwZWNpYWwucG9zdERpc3BhdGNoICkge1xuXHRcdFx0c3BlY2lhbC5wb3N0RGlzcGF0Y2guY2FsbCggdGhpcywgZXZlbnQgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZXZlbnQucmVzdWx0O1xuXHR9LFxuXG5cdGhhbmRsZXJzOiBmdW5jdGlvbiggZXZlbnQsIGhhbmRsZXJzICkge1xuXHRcdHZhciBpLCBtYXRjaGVzLCBzZWwsIGhhbmRsZU9iaixcblx0XHRcdGhhbmRsZXJRdWV1ZSA9IFtdLFxuXHRcdFx0ZGVsZWdhdGVDb3VudCA9IGhhbmRsZXJzLmRlbGVnYXRlQ291bnQsXG5cdFx0XHRjdXIgPSBldmVudC50YXJnZXQ7XG5cblx0XHQvLyBGaW5kIGRlbGVnYXRlIGhhbmRsZXJzXG5cdFx0Ly8gQmxhY2staG9sZSBTVkcgPHVzZT4gaW5zdGFuY2UgdHJlZXMgKCMxMzE4MClcblx0XHQvLyBBdm9pZCBub24tbGVmdC1jbGljayBidWJibGluZyBpbiBGaXJlZm94ICgjMzg2MSlcblx0XHRpZiAoIGRlbGVnYXRlQ291bnQgJiYgY3VyLm5vZGVUeXBlICYmICghZXZlbnQuYnV0dG9uIHx8IGV2ZW50LnR5cGUgIT09IFwiY2xpY2tcIikgKSB7XG5cblx0XHRcdGZvciAoIDsgY3VyICE9PSB0aGlzOyBjdXIgPSBjdXIucGFyZW50Tm9kZSB8fCB0aGlzICkge1xuXG5cdFx0XHRcdC8vIERvbid0IHByb2Nlc3MgY2xpY2tzIG9uIGRpc2FibGVkIGVsZW1lbnRzICgjNjkxMSwgIzgxNjUsICMxMTM4MiwgIzExNzY0KVxuXHRcdFx0XHRpZiAoIGN1ci5kaXNhYmxlZCAhPT0gdHJ1ZSB8fCBldmVudC50eXBlICE9PSBcImNsaWNrXCIgKSB7XG5cdFx0XHRcdFx0bWF0Y2hlcyA9IFtdO1xuXHRcdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgZGVsZWdhdGVDb3VudDsgaSsrICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlT2JqID0gaGFuZGxlcnNbIGkgXTtcblxuXHRcdFx0XHRcdFx0Ly8gRG9uJ3QgY29uZmxpY3Qgd2l0aCBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKCMxMzIwMylcblx0XHRcdFx0XHRcdHNlbCA9IGhhbmRsZU9iai5zZWxlY3RvciArIFwiIFwiO1xuXG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXNbIHNlbCBdID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0XHRcdG1hdGNoZXNbIHNlbCBdID0gaGFuZGxlT2JqLm5lZWRzQ29udGV4dCA/XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5KCBzZWwsIHRoaXMgKS5pbmRleCggY3VyICkgPj0gMCA6XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LmZpbmQoIHNlbCwgdGhpcywgbnVsbCwgWyBjdXIgXSApLmxlbmd0aDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICggbWF0Y2hlc1sgc2VsIF0gKSB7XG5cdFx0XHRcdFx0XHRcdG1hdGNoZXMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggbWF0Y2hlcy5sZW5ndGggKSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVyUXVldWUucHVzaCh7IGVsZW06IGN1ciwgaGFuZGxlcnM6IG1hdGNoZXMgfSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIHRoZSByZW1haW5pbmcgKGRpcmVjdGx5LWJvdW5kKSBoYW5kbGVyc1xuXHRcdGlmICggZGVsZWdhdGVDb3VudCA8IGhhbmRsZXJzLmxlbmd0aCApIHtcblx0XHRcdGhhbmRsZXJRdWV1ZS5wdXNoKHsgZWxlbTogdGhpcywgaGFuZGxlcnM6IGhhbmRsZXJzLnNsaWNlKCBkZWxlZ2F0ZUNvdW50ICkgfSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGhhbmRsZXJRdWV1ZTtcblx0fSxcblxuXHQvLyBJbmNsdWRlcyBzb21lIGV2ZW50IHByb3BzIHNoYXJlZCBieSBLZXlFdmVudCBhbmQgTW91c2VFdmVudFxuXHRwcm9wczogXCJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2hcIi5zcGxpdChcIiBcIiksXG5cblx0Zml4SG9va3M6IHt9LFxuXG5cdGtleUhvb2tzOiB7XG5cdFx0cHJvcHM6IFwiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZVwiLnNwbGl0KFwiIFwiKSxcblx0XHRmaWx0ZXI6IGZ1bmN0aW9uKCBldmVudCwgb3JpZ2luYWwgKSB7XG5cblx0XHRcdC8vIEFkZCB3aGljaCBmb3Iga2V5IGV2ZW50c1xuXHRcdFx0aWYgKCBldmVudC53aGljaCA9PSBudWxsICkge1xuXHRcdFx0XHRldmVudC53aGljaCA9IG9yaWdpbmFsLmNoYXJDb2RlICE9IG51bGwgPyBvcmlnaW5hbC5jaGFyQ29kZSA6IG9yaWdpbmFsLmtleUNvZGU7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBldmVudDtcblx0XHR9XG5cdH0sXG5cblx0bW91c2VIb29rczoge1xuXHRcdHByb3BzOiBcImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudFwiLnNwbGl0KFwiIFwiKSxcblx0XHRmaWx0ZXI6IGZ1bmN0aW9uKCBldmVudCwgb3JpZ2luYWwgKSB7XG5cdFx0XHR2YXIgZXZlbnREb2MsIGRvYywgYm9keSxcblx0XHRcdFx0YnV0dG9uID0gb3JpZ2luYWwuYnV0dG9uO1xuXG5cdFx0XHQvLyBDYWxjdWxhdGUgcGFnZVgvWSBpZiBtaXNzaW5nIGFuZCBjbGllbnRYL1kgYXZhaWxhYmxlXG5cdFx0XHRpZiAoIGV2ZW50LnBhZ2VYID09IG51bGwgJiYgb3JpZ2luYWwuY2xpZW50WCAhPSBudWxsICkge1xuXHRcdFx0XHRldmVudERvYyA9IGV2ZW50LnRhcmdldC5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50O1xuXHRcdFx0XHRkb2MgPSBldmVudERvYy5kb2N1bWVudEVsZW1lbnQ7XG5cdFx0XHRcdGJvZHkgPSBldmVudERvYy5ib2R5O1xuXG5cdFx0XHRcdGV2ZW50LnBhZ2VYID0gb3JpZ2luYWwuY2xpZW50WCArICggZG9jICYmIGRvYy5zY3JvbGxMZWZ0IHx8IGJvZHkgJiYgYm9keS5zY3JvbGxMZWZ0IHx8IDAgKSAtICggZG9jICYmIGRvYy5jbGllbnRMZWZ0IHx8IGJvZHkgJiYgYm9keS5jbGllbnRMZWZ0IHx8IDAgKTtcblx0XHRcdFx0ZXZlbnQucGFnZVkgPSBvcmlnaW5hbC5jbGllbnRZICsgKCBkb2MgJiYgZG9jLnNjcm9sbFRvcCAgfHwgYm9keSAmJiBib2R5LnNjcm9sbFRvcCAgfHwgMCApIC0gKCBkb2MgJiYgZG9jLmNsaWVudFRvcCAgfHwgYm9keSAmJiBib2R5LmNsaWVudFRvcCAgfHwgMCApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgd2hpY2ggZm9yIGNsaWNrOiAxID09PSBsZWZ0OyAyID09PSBtaWRkbGU7IDMgPT09IHJpZ2h0XG5cdFx0XHQvLyBOb3RlOiBidXR0b24gaXMgbm90IG5vcm1hbGl6ZWQsIHNvIGRvbid0IHVzZSBpdFxuXHRcdFx0aWYgKCAhZXZlbnQud2hpY2ggJiYgYnV0dG9uICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdGV2ZW50LndoaWNoID0gKCBidXR0b24gJiAxID8gMSA6ICggYnV0dG9uICYgMiA/IDMgOiAoIGJ1dHRvbiAmIDQgPyAyIDogMCApICkgKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGV2ZW50O1xuXHRcdH1cblx0fSxcblxuXHRmaXg6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRpZiAoIGV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdICkge1xuXHRcdFx0cmV0dXJuIGV2ZW50O1xuXHRcdH1cblxuXHRcdC8vIENyZWF0ZSBhIHdyaXRhYmxlIGNvcHkgb2YgdGhlIGV2ZW50IG9iamVjdCBhbmQgbm9ybWFsaXplIHNvbWUgcHJvcGVydGllc1xuXHRcdHZhciBpLCBwcm9wLCBjb3B5LFxuXHRcdFx0dHlwZSA9IGV2ZW50LnR5cGUsXG5cdFx0XHRvcmlnaW5hbEV2ZW50ID0gZXZlbnQsXG5cdFx0XHRmaXhIb29rID0gdGhpcy5maXhIb29rc1sgdHlwZSBdO1xuXG5cdFx0aWYgKCAhZml4SG9vayApIHtcblx0XHRcdHRoaXMuZml4SG9va3NbIHR5cGUgXSA9IGZpeEhvb2sgPVxuXHRcdFx0XHRybW91c2VFdmVudC50ZXN0KCB0eXBlICkgPyB0aGlzLm1vdXNlSG9va3MgOlxuXHRcdFx0XHRya2V5RXZlbnQudGVzdCggdHlwZSApID8gdGhpcy5rZXlIb29rcyA6XG5cdFx0XHRcdHt9O1xuXHRcdH1cblx0XHRjb3B5ID0gZml4SG9vay5wcm9wcyA/IHRoaXMucHJvcHMuY29uY2F0KCBmaXhIb29rLnByb3BzICkgOiB0aGlzLnByb3BzO1xuXG5cdFx0ZXZlbnQgPSBuZXcgalF1ZXJ5LkV2ZW50KCBvcmlnaW5hbEV2ZW50ICk7XG5cblx0XHRpID0gY29weS5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRwcm9wID0gY29weVsgaSBdO1xuXHRcdFx0ZXZlbnRbIHByb3AgXSA9IG9yaWdpbmFsRXZlbnRbIHByb3AgXTtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBDb3Jkb3ZhIDIuNSAoV2ViS2l0KSAoIzEzMjU1KVxuXHRcdC8vIEFsbCBldmVudHMgc2hvdWxkIGhhdmUgYSB0YXJnZXQ7IENvcmRvdmEgZGV2aWNlcmVhZHkgZG9lc24ndFxuXHRcdGlmICggIWV2ZW50LnRhcmdldCApIHtcblx0XHRcdGV2ZW50LnRhcmdldCA9IGRvY3VtZW50O1xuXHRcdH1cblxuXHRcdC8vIFN1cHBvcnQ6IFNhZmFyaSA2LjArLCBDaHJvbWU8Mjhcblx0XHQvLyBUYXJnZXQgc2hvdWxkIG5vdCBiZSBhIHRleHQgbm9kZSAoIzUwNCwgIzEzMTQzKVxuXHRcdGlmICggZXZlbnQudGFyZ2V0Lm5vZGVUeXBlID09PSAzICkge1xuXHRcdFx0ZXZlbnQudGFyZ2V0ID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZpeEhvb2suZmlsdGVyID8gZml4SG9vay5maWx0ZXIoIGV2ZW50LCBvcmlnaW5hbEV2ZW50ICkgOiBldmVudDtcblx0fSxcblxuXHRzcGVjaWFsOiB7XG5cdFx0bG9hZDoge1xuXHRcdFx0Ly8gUHJldmVudCB0cmlnZ2VyZWQgaW1hZ2UubG9hZCBldmVudHMgZnJvbSBidWJibGluZyB0byB3aW5kb3cubG9hZFxuXHRcdFx0bm9CdWJibGU6IHRydWVcblx0XHR9LFxuXHRcdGZvY3VzOiB7XG5cdFx0XHQvLyBGaXJlIG5hdGl2ZSBldmVudCBpZiBwb3NzaWJsZSBzbyBibHVyL2ZvY3VzIHNlcXVlbmNlIGlzIGNvcnJlY3Rcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHRoaXMgIT09IHNhZmVBY3RpdmVFbGVtZW50KCkgJiYgdGhpcy5mb2N1cyApIHtcblx0XHRcdFx0XHR0aGlzLmZvY3VzKCk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0ZGVsZWdhdGVUeXBlOiBcImZvY3VzaW5cIlxuXHRcdH0sXG5cdFx0Ymx1cjoge1xuXHRcdFx0dHJpZ2dlcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggdGhpcyA9PT0gc2FmZUFjdGl2ZUVsZW1lbnQoKSAmJiB0aGlzLmJsdXIgKSB7XG5cdFx0XHRcdFx0dGhpcy5ibHVyKCk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0ZGVsZWdhdGVUeXBlOiBcImZvY3Vzb3V0XCJcblx0XHR9LFxuXHRcdGNsaWNrOiB7XG5cdFx0XHQvLyBGb3IgY2hlY2tib3gsIGZpcmUgbmF0aXZlIGV2ZW50IHNvIGNoZWNrZWQgc3RhdGUgd2lsbCBiZSByaWdodFxuXHRcdFx0dHJpZ2dlcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggdGhpcy50eXBlID09PSBcImNoZWNrYm94XCIgJiYgdGhpcy5jbGljayAmJiBqUXVlcnkubm9kZU5hbWUoIHRoaXMsIFwiaW5wdXRcIiApICkge1xuXHRcdFx0XHRcdHRoaXMuY2xpY2soKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdC8vIEZvciBjcm9zcy1icm93c2VyIGNvbnNpc3RlbmN5LCBkb24ndCBmaXJlIG5hdGl2ZSAuY2xpY2soKSBvbiBsaW5rc1xuXHRcdFx0X2RlZmF1bHQ6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0cmV0dXJuIGpRdWVyeS5ub2RlTmFtZSggZXZlbnQudGFyZ2V0LCBcImFcIiApO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRiZWZvcmV1bmxvYWQ6IHtcblx0XHRcdHBvc3REaXNwYXRjaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggMjArXG5cdFx0XHRcdC8vIEZpcmVmb3ggZG9lc24ndCBhbGVydCBpZiB0aGUgcmV0dXJuVmFsdWUgZmllbGQgaXMgbm90IHNldC5cblx0XHRcdFx0aWYgKCBldmVudC5yZXN1bHQgIT09IHVuZGVmaW5lZCAmJiBldmVudC5vcmlnaW5hbEV2ZW50ICkge1xuXHRcdFx0XHRcdGV2ZW50Lm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWUgPSBldmVudC5yZXN1bHQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0c2ltdWxhdGU6IGZ1bmN0aW9uKCB0eXBlLCBlbGVtLCBldmVudCwgYnViYmxlICkge1xuXHRcdC8vIFBpZ2d5YmFjayBvbiBhIGRvbm9yIGV2ZW50IHRvIHNpbXVsYXRlIGEgZGlmZmVyZW50IG9uZS5cblx0XHQvLyBGYWtlIG9yaWdpbmFsRXZlbnQgdG8gYXZvaWQgZG9ub3IncyBzdG9wUHJvcGFnYXRpb24sIGJ1dCBpZiB0aGVcblx0XHQvLyBzaW11bGF0ZWQgZXZlbnQgcHJldmVudHMgZGVmYXVsdCB0aGVuIHdlIGRvIHRoZSBzYW1lIG9uIHRoZSBkb25vci5cblx0XHR2YXIgZSA9IGpRdWVyeS5leHRlbmQoXG5cdFx0XHRuZXcgalF1ZXJ5LkV2ZW50KCksXG5cdFx0XHRldmVudCxcblx0XHRcdHtcblx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0aXNTaW11bGF0ZWQ6IHRydWUsXG5cdFx0XHRcdG9yaWdpbmFsRXZlbnQ6IHt9XG5cdFx0XHR9XG5cdFx0KTtcblx0XHRpZiAoIGJ1YmJsZSApIHtcblx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCBlLCBudWxsLCBlbGVtICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGpRdWVyeS5ldmVudC5kaXNwYXRjaC5jYWxsKCBlbGVtLCBlICk7XG5cdFx0fVxuXHRcdGlmICggZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0fVxuXHR9XG59O1xuXG5qUXVlcnkucmVtb3ZlRXZlbnQgPSBmdW5jdGlvbiggZWxlbSwgdHlwZSwgaGFuZGxlICkge1xuXHRpZiAoIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciApIHtcblx0XHRlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoIHR5cGUsIGhhbmRsZSwgZmFsc2UgKTtcblx0fVxufTtcblxualF1ZXJ5LkV2ZW50ID0gZnVuY3Rpb24oIHNyYywgcHJvcHMgKSB7XG5cdC8vIEFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCB0aGUgJ25ldycga2V5d29yZFxuXHRpZiAoICEodGhpcyBpbnN0YW5jZW9mIGpRdWVyeS5FdmVudCkgKSB7XG5cdFx0cmV0dXJuIG5ldyBqUXVlcnkuRXZlbnQoIHNyYywgcHJvcHMgKTtcblx0fVxuXG5cdC8vIEV2ZW50IG9iamVjdFxuXHRpZiAoIHNyYyAmJiBzcmMudHlwZSApIHtcblx0XHR0aGlzLm9yaWdpbmFsRXZlbnQgPSBzcmM7XG5cdFx0dGhpcy50eXBlID0gc3JjLnR5cGU7XG5cblx0XHQvLyBFdmVudHMgYnViYmxpbmcgdXAgdGhlIGRvY3VtZW50IG1heSBoYXZlIGJlZW4gbWFya2VkIGFzIHByZXZlbnRlZFxuXHRcdC8vIGJ5IGEgaGFuZGxlciBsb3dlciBkb3duIHRoZSB0cmVlOyByZWZsZWN0IHRoZSBjb3JyZWN0IHZhbHVlLlxuXHRcdHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gc3JjLmRlZmF1bHRQcmV2ZW50ZWQgfHxcblx0XHRcdFx0c3JjLmRlZmF1bHRQcmV2ZW50ZWQgPT09IHVuZGVmaW5lZCAmJlxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMFxuXHRcdFx0XHRzcmMucmV0dXJuVmFsdWUgPT09IGZhbHNlID9cblx0XHRcdHJldHVyblRydWUgOlxuXHRcdFx0cmV0dXJuRmFsc2U7XG5cblx0Ly8gRXZlbnQgdHlwZVxuXHR9IGVsc2Uge1xuXHRcdHRoaXMudHlwZSA9IHNyYztcblx0fVxuXG5cdC8vIFB1dCBleHBsaWNpdGx5IHByb3ZpZGVkIHByb3BlcnRpZXMgb250byB0aGUgZXZlbnQgb2JqZWN0XG5cdGlmICggcHJvcHMgKSB7XG5cdFx0alF1ZXJ5LmV4dGVuZCggdGhpcywgcHJvcHMgKTtcblx0fVxuXG5cdC8vIENyZWF0ZSBhIHRpbWVzdGFtcCBpZiBpbmNvbWluZyBldmVudCBkb2Vzbid0IGhhdmUgb25lXG5cdHRoaXMudGltZVN0YW1wID0gc3JjICYmIHNyYy50aW1lU3RhbXAgfHwgalF1ZXJ5Lm5vdygpO1xuXG5cdC8vIE1hcmsgaXQgYXMgZml4ZWRcblx0dGhpc1sgalF1ZXJ5LmV4cGFuZG8gXSA9IHRydWU7XG59O1xuXG4vLyBqUXVlcnkuRXZlbnQgaXMgYmFzZWQgb24gRE9NMyBFdmVudHMgYXMgc3BlY2lmaWVkIGJ5IHRoZSBFQ01BU2NyaXB0IExhbmd1YWdlIEJpbmRpbmdcbi8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMDMvV0QtRE9NLUxldmVsLTMtRXZlbnRzLTIwMDMwMzMxL2VjbWEtc2NyaXB0LWJpbmRpbmcuaHRtbFxualF1ZXJ5LkV2ZW50LnByb3RvdHlwZSA9IHtcblx0aXNEZWZhdWx0UHJldmVudGVkOiByZXR1cm5GYWxzZSxcblx0aXNQcm9wYWdhdGlvblN0b3BwZWQ6IHJldHVybkZhbHNlLFxuXHRpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDogcmV0dXJuRmFsc2UsXG5cblx0cHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50O1xuXG5cdFx0dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSByZXR1cm5UcnVlO1xuXG5cdFx0aWYgKCBlICYmIGUucHJldmVudERlZmF1bHQgKSB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0fVxuXHR9LFxuXHRzdG9wUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50O1xuXG5cdFx0dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVyblRydWU7XG5cblx0XHRpZiAoIGUgJiYgZS5zdG9wUHJvcGFnYXRpb24gKSB7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdH1cblx0fSxcblx0c3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlO1xuXG5cdFx0aWYgKCBlICYmIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uICkge1xuXHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHR9XG5cblx0XHR0aGlzLnN0b3BQcm9wYWdhdGlvbigpO1xuXHR9XG59O1xuXG4vLyBDcmVhdGUgbW91c2VlbnRlci9sZWF2ZSBldmVudHMgdXNpbmcgbW91c2VvdmVyL291dCBhbmQgZXZlbnQtdGltZSBjaGVja3Ncbi8vIFN1cHBvcnQ6IENocm9tZSAxNStcbmpRdWVyeS5lYWNoKHtcblx0bW91c2VlbnRlcjogXCJtb3VzZW92ZXJcIixcblx0bW91c2VsZWF2ZTogXCJtb3VzZW91dFwiLFxuXHRwb2ludGVyZW50ZXI6IFwicG9pbnRlcm92ZXJcIixcblx0cG9pbnRlcmxlYXZlOiBcInBvaW50ZXJvdXRcIlxufSwgZnVuY3Rpb24oIG9yaWcsIGZpeCApIHtcblx0alF1ZXJ5LmV2ZW50LnNwZWNpYWxbIG9yaWcgXSA9IHtcblx0XHRkZWxlZ2F0ZVR5cGU6IGZpeCxcblx0XHRiaW5kVHlwZTogZml4LFxuXG5cdFx0aGFuZGxlOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHR2YXIgcmV0LFxuXHRcdFx0XHR0YXJnZXQgPSB0aGlzLFxuXHRcdFx0XHRyZWxhdGVkID0gZXZlbnQucmVsYXRlZFRhcmdldCxcblx0XHRcdFx0aGFuZGxlT2JqID0gZXZlbnQuaGFuZGxlT2JqO1xuXG5cdFx0XHQvLyBGb3IgbW91c2VudGVyL2xlYXZlIGNhbGwgdGhlIGhhbmRsZXIgaWYgcmVsYXRlZCBpcyBvdXRzaWRlIHRoZSB0YXJnZXQuXG5cdFx0XHQvLyBOQjogTm8gcmVsYXRlZFRhcmdldCBpZiB0aGUgbW91c2UgbGVmdC9lbnRlcmVkIHRoZSBicm93c2VyIHdpbmRvd1xuXHRcdFx0aWYgKCAhcmVsYXRlZCB8fCAocmVsYXRlZCAhPT0gdGFyZ2V0ICYmICFqUXVlcnkuY29udGFpbnMoIHRhcmdldCwgcmVsYXRlZCApKSApIHtcblx0XHRcdFx0ZXZlbnQudHlwZSA9IGhhbmRsZU9iai5vcmlnVHlwZTtcblx0XHRcdFx0cmV0ID0gaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRldmVudC50eXBlID0gZml4O1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9XG5cdH07XG59KTtcblxuLy8gU3VwcG9ydDogRmlyZWZveCwgQ2hyb21lLCBTYWZhcmlcbi8vIENyZWF0ZSBcImJ1YmJsaW5nXCIgZm9jdXMgYW5kIGJsdXIgZXZlbnRzXG5pZiAoICFzdXBwb3J0LmZvY3VzaW5CdWJibGVzICkge1xuXHRqUXVlcnkuZWFjaCh7IGZvY3VzOiBcImZvY3VzaW5cIiwgYmx1cjogXCJmb2N1c291dFwiIH0sIGZ1bmN0aW9uKCBvcmlnLCBmaXggKSB7XG5cblx0XHQvLyBBdHRhY2ggYSBzaW5nbGUgY2FwdHVyaW5nIGhhbmRsZXIgb24gdGhlIGRvY3VtZW50IHdoaWxlIHNvbWVvbmUgd2FudHMgZm9jdXNpbi9mb2N1c291dFxuXHRcdHZhciBoYW5kbGVyID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHRqUXVlcnkuZXZlbnQuc2ltdWxhdGUoIGZpeCwgZXZlbnQudGFyZ2V0LCBqUXVlcnkuZXZlbnQuZml4KCBldmVudCApLCB0cnVlICk7XG5cdFx0XHR9O1xuXG5cdFx0alF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGZpeCBdID0ge1xuXHRcdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgZG9jID0gdGhpcy5vd25lckRvY3VtZW50IHx8IHRoaXMsXG5cdFx0XHRcdFx0YXR0YWNoZXMgPSBkYXRhX3ByaXYuYWNjZXNzKCBkb2MsIGZpeCApO1xuXG5cdFx0XHRcdGlmICggIWF0dGFjaGVzICkge1xuXHRcdFx0XHRcdGRvYy5hZGRFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZGF0YV9wcml2LmFjY2VzcyggZG9jLCBmaXgsICggYXR0YWNoZXMgfHwgMCApICsgMSApO1xuXHRcdFx0fSxcblx0XHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLFxuXHRcdFx0XHRcdGF0dGFjaGVzID0gZGF0YV9wcml2LmFjY2VzcyggZG9jLCBmaXggKSAtIDE7XG5cblx0XHRcdFx0aWYgKCAhYXR0YWNoZXMgKSB7XG5cdFx0XHRcdFx0ZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoIG9yaWcsIGhhbmRsZXIsIHRydWUgKTtcblx0XHRcdFx0XHRkYXRhX3ByaXYucmVtb3ZlKCBkb2MsIGZpeCApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZGF0YV9wcml2LmFjY2VzcyggZG9jLCBmaXgsIGF0dGFjaGVzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9KTtcbn1cblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cblx0b246IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCAvKklOVEVSTkFMKi8gb25lICkge1xuXHRcdHZhciBvcmlnRm4sIHR5cGU7XG5cblx0XHQvLyBUeXBlcyBjYW4gYmUgYSBtYXAgb2YgdHlwZXMvaGFuZGxlcnNcblx0XHRpZiAoIHR5cGVvZiB0eXBlcyA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdC8vICggdHlwZXMtT2JqZWN0LCBzZWxlY3RvciwgZGF0YSApXG5cdFx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0Ly8gKCB0eXBlcy1PYmplY3QsIGRhdGEgKVxuXHRcdFx0XHRkYXRhID0gZGF0YSB8fCBzZWxlY3Rvcjtcblx0XHRcdFx0c2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0XHR9XG5cdFx0XHRmb3IgKCB0eXBlIGluIHR5cGVzICkge1xuXHRcdFx0XHR0aGlzLm9uKCB0eXBlLCBzZWxlY3RvciwgZGF0YSwgdHlwZXNbIHR5cGUgXSwgb25lICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cblx0XHRpZiAoIGRhdGEgPT0gbnVsbCAmJiBmbiA9PSBudWxsICkge1xuXHRcdFx0Ly8gKCB0eXBlcywgZm4gKVxuXHRcdFx0Zm4gPSBzZWxlY3Rvcjtcblx0XHRcdGRhdGEgPSBzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHR9IGVsc2UgaWYgKCBmbiA9PSBudWxsICkge1xuXHRcdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdC8vICggdHlwZXMsIHNlbGVjdG9yLCBmbiApXG5cdFx0XHRcdGZuID0gZGF0YTtcblx0XHRcdFx0ZGF0YSA9IHVuZGVmaW5lZDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vICggdHlwZXMsIGRhdGEsIGZuIClcblx0XHRcdFx0Zm4gPSBkYXRhO1xuXHRcdFx0XHRkYXRhID0gc2VsZWN0b3I7XG5cdFx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoIGZuID09PSBmYWxzZSApIHtcblx0XHRcdGZuID0gcmV0dXJuRmFsc2U7XG5cdFx0fSBlbHNlIGlmICggIWZuICkge1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0aWYgKCBvbmUgPT09IDEgKSB7XG5cdFx0XHRvcmlnRm4gPSBmbjtcblx0XHRcdGZuID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHQvLyBDYW4gdXNlIGFuIGVtcHR5IHNldCwgc2luY2UgZXZlbnQgY29udGFpbnMgdGhlIGluZm9cblx0XHRcdFx0alF1ZXJ5KCkub2ZmKCBldmVudCApO1xuXHRcdFx0XHRyZXR1cm4gb3JpZ0ZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdH07XG5cdFx0XHQvLyBVc2Ugc2FtZSBndWlkIHNvIGNhbGxlciBjYW4gcmVtb3ZlIHVzaW5nIG9yaWdGblxuXHRcdFx0Zm4uZ3VpZCA9IG9yaWdGbi5ndWlkIHx8ICggb3JpZ0ZuLmd1aWQgPSBqUXVlcnkuZ3VpZCsrICk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LmFkZCggdGhpcywgdHlwZXMsIGZuLCBkYXRhLCBzZWxlY3RvciApO1xuXHRcdH0pO1xuXHR9LFxuXHRvbmU6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCAxICk7XG5cdH0sXG5cdG9mZjogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZm4gKSB7XG5cdFx0dmFyIGhhbmRsZU9iaiwgdHlwZTtcblx0XHRpZiAoIHR5cGVzICYmIHR5cGVzLnByZXZlbnREZWZhdWx0ICYmIHR5cGVzLmhhbmRsZU9iaiApIHtcblx0XHRcdC8vICggZXZlbnQgKSAgZGlzcGF0Y2hlZCBqUXVlcnkuRXZlbnRcblx0XHRcdGhhbmRsZU9iaiA9IHR5cGVzLmhhbmRsZU9iajtcblx0XHRcdGpRdWVyeSggdHlwZXMuZGVsZWdhdGVUYXJnZXQgKS5vZmYoXG5cdFx0XHRcdGhhbmRsZU9iai5uYW1lc3BhY2UgPyBoYW5kbGVPYmoub3JpZ1R5cGUgKyBcIi5cIiArIGhhbmRsZU9iai5uYW1lc3BhY2UgOiBoYW5kbGVPYmoub3JpZ1R5cGUsXG5cdFx0XHRcdGhhbmRsZU9iai5zZWxlY3Rvcixcblx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXJcblx0XHRcdCk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdFx0aWYgKCB0eXBlb2YgdHlwZXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHQvLyAoIHR5cGVzLW9iamVjdCBbLCBzZWxlY3Rvcl0gKVxuXHRcdFx0Zm9yICggdHlwZSBpbiB0eXBlcyApIHtcblx0XHRcdFx0dGhpcy5vZmYoIHR5cGUsIHNlbGVjdG9yLCB0eXBlc1sgdHlwZSBdICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdFx0aWYgKCBzZWxlY3RvciA9PT0gZmFsc2UgfHwgdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cdFx0XHQvLyAoIHR5cGVzIFssIGZuXSApXG5cdFx0XHRmbiA9IHNlbGVjdG9yO1xuXHRcdFx0c2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmICggZm4gPT09IGZhbHNlICkge1xuXHRcdFx0Zm4gPSByZXR1cm5GYWxzZTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIHRoaXMsIHR5cGVzLCBmbiwgc2VsZWN0b3IgKTtcblx0XHR9KTtcblx0fSxcblxuXHR0cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIHRoaXMgKTtcblx0XHR9KTtcblx0fSxcblx0dHJpZ2dlckhhbmRsZXI6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkge1xuXHRcdHZhciBlbGVtID0gdGhpc1swXTtcblx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIGVsZW0sIHRydWUgKTtcblx0XHR9XG5cdH1cbn0pO1xuXG5cbnZhclxuXHRyeGh0bWxUYWcgPSAvPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Ol0rKVtePl0qKVxcLz4vZ2ksXG5cdHJ0YWdOYW1lID0gLzwoW1xcdzpdKykvLFxuXHRyaHRtbCA9IC88fCYjP1xcdys7Lyxcblx0cm5vSW5uZXJodG1sID0gLzwoPzpzY3JpcHR8c3R5bGV8bGluaykvaSxcblx0Ly8gY2hlY2tlZD1cImNoZWNrZWRcIiBvciBjaGVja2VkXG5cdHJjaGVja2VkID0gL2NoZWNrZWRcXHMqKD86W149XXw9XFxzKi5jaGVja2VkLikvaSxcblx0cnNjcmlwdFR5cGUgPSAvXiR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pLFxuXHRyc2NyaXB0VHlwZU1hc2tlZCA9IC9edHJ1ZVxcLyguKikvLFxuXHRyY2xlYW5TY3JpcHQgPSAvXlxccyo8ISg/OlxcW0NEQVRBXFxbfC0tKXwoPzpcXF1cXF18LS0pPlxccyokL2csXG5cblx0Ly8gV2UgaGF2ZSB0byBjbG9zZSB0aGVzZSB0YWdzIHRvIHN1cHBvcnQgWEhUTUwgKCMxMzIwMClcblx0d3JhcE1hcCA9IHtcblxuXHRcdC8vIFN1cHBvcnQ6IElFOVxuXHRcdG9wdGlvbjogWyAxLCBcIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz5cIiwgXCI8L3NlbGVjdD5cIiBdLFxuXG5cdFx0dGhlYWQ6IFsgMSwgXCI8dGFibGU+XCIsIFwiPC90YWJsZT5cIiBdLFxuXHRcdGNvbDogWyAyLCBcIjx0YWJsZT48Y29sZ3JvdXA+XCIsIFwiPC9jb2xncm91cD48L3RhYmxlPlwiIF0sXG5cdFx0dHI6IFsgMiwgXCI8dGFibGU+PHRib2R5PlwiLCBcIjwvdGJvZHk+PC90YWJsZT5cIiBdLFxuXHRcdHRkOiBbIDMsIFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsIFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCIgXSxcblxuXHRcdF9kZWZhdWx0OiBbIDAsIFwiXCIsIFwiXCIgXVxuXHR9O1xuXG4vLyBTdXBwb3J0OiBJRTlcbndyYXBNYXAub3B0Z3JvdXAgPSB3cmFwTWFwLm9wdGlvbjtcblxud3JhcE1hcC50Ym9keSA9IHdyYXBNYXAudGZvb3QgPSB3cmFwTWFwLmNvbGdyb3VwID0gd3JhcE1hcC5jYXB0aW9uID0gd3JhcE1hcC50aGVhZDtcbndyYXBNYXAudGggPSB3cmFwTWFwLnRkO1xuXG4vLyBTdXBwb3J0OiAxLnggY29tcGF0aWJpbGl0eVxuLy8gTWFuaXB1bGF0aW5nIHRhYmxlcyByZXF1aXJlcyBhIHRib2R5XG5mdW5jdGlvbiBtYW5pcHVsYXRpb25UYXJnZXQoIGVsZW0sIGNvbnRlbnQgKSB7XG5cdHJldHVybiBqUXVlcnkubm9kZU5hbWUoIGVsZW0sIFwidGFibGVcIiApICYmXG5cdFx0alF1ZXJ5Lm5vZGVOYW1lKCBjb250ZW50Lm5vZGVUeXBlICE9PSAxMSA/IGNvbnRlbnQgOiBjb250ZW50LmZpcnN0Q2hpbGQsIFwidHJcIiApID9cblxuXHRcdGVsZW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0Ym9keVwiKVswXSB8fFxuXHRcdFx0ZWxlbS5hcHBlbmRDaGlsZCggZWxlbS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiKSApIDpcblx0XHRlbGVtO1xufVxuXG4vLyBSZXBsYWNlL3Jlc3RvcmUgdGhlIHR5cGUgYXR0cmlidXRlIG9mIHNjcmlwdCBlbGVtZW50cyBmb3Igc2FmZSBET00gbWFuaXB1bGF0aW9uXG5mdW5jdGlvbiBkaXNhYmxlU2NyaXB0KCBlbGVtICkge1xuXHRlbGVtLnR5cGUgPSAoZWxlbS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpICE9PSBudWxsKSArIFwiL1wiICsgZWxlbS50eXBlO1xuXHRyZXR1cm4gZWxlbTtcbn1cbmZ1bmN0aW9uIHJlc3RvcmVTY3JpcHQoIGVsZW0gKSB7XG5cdHZhciBtYXRjaCA9IHJzY3JpcHRUeXBlTWFza2VkLmV4ZWMoIGVsZW0udHlwZSApO1xuXG5cdGlmICggbWF0Y2ggKSB7XG5cdFx0ZWxlbS50eXBlID0gbWF0Y2hbIDEgXTtcblx0fSBlbHNlIHtcblx0XHRlbGVtLnJlbW92ZUF0dHJpYnV0ZShcInR5cGVcIik7XG5cdH1cblxuXHRyZXR1cm4gZWxlbTtcbn1cblxuLy8gTWFyayBzY3JpcHRzIGFzIGhhdmluZyBhbHJlYWR5IGJlZW4gZXZhbHVhdGVkXG5mdW5jdGlvbiBzZXRHbG9iYWxFdmFsKCBlbGVtcywgcmVmRWxlbWVudHMgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsID0gZWxlbXMubGVuZ3RoO1xuXG5cdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRkYXRhX3ByaXYuc2V0KFxuXHRcdFx0ZWxlbXNbIGkgXSwgXCJnbG9iYWxFdmFsXCIsICFyZWZFbGVtZW50cyB8fCBkYXRhX3ByaXYuZ2V0KCByZWZFbGVtZW50c1sgaSBdLCBcImdsb2JhbEV2YWxcIiApXG5cdFx0KTtcblx0fVxufVxuXG5mdW5jdGlvbiBjbG9uZUNvcHlFdmVudCggc3JjLCBkZXN0ICkge1xuXHR2YXIgaSwgbCwgdHlwZSwgcGRhdGFPbGQsIHBkYXRhQ3VyLCB1ZGF0YU9sZCwgdWRhdGFDdXIsIGV2ZW50cztcblxuXHRpZiAoIGRlc3Qubm9kZVR5cGUgIT09IDEgKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gMS4gQ29weSBwcml2YXRlIGRhdGE6IGV2ZW50cywgaGFuZGxlcnMsIGV0Yy5cblx0aWYgKCBkYXRhX3ByaXYuaGFzRGF0YSggc3JjICkgKSB7XG5cdFx0cGRhdGFPbGQgPSBkYXRhX3ByaXYuYWNjZXNzKCBzcmMgKTtcblx0XHRwZGF0YUN1ciA9IGRhdGFfcHJpdi5zZXQoIGRlc3QsIHBkYXRhT2xkICk7XG5cdFx0ZXZlbnRzID0gcGRhdGFPbGQuZXZlbnRzO1xuXG5cdFx0aWYgKCBldmVudHMgKSB7XG5cdFx0XHRkZWxldGUgcGRhdGFDdXIuaGFuZGxlO1xuXHRcdFx0cGRhdGFDdXIuZXZlbnRzID0ge307XG5cblx0XHRcdGZvciAoIHR5cGUgaW4gZXZlbnRzICkge1xuXHRcdFx0XHRmb3IgKCBpID0gMCwgbCA9IGV2ZW50c1sgdHlwZSBdLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQuYWRkKCBkZXN0LCB0eXBlLCBldmVudHNbIHR5cGUgXVsgaSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyAyLiBDb3B5IHVzZXIgZGF0YVxuXHRpZiAoIGRhdGFfdXNlci5oYXNEYXRhKCBzcmMgKSApIHtcblx0XHR1ZGF0YU9sZCA9IGRhdGFfdXNlci5hY2Nlc3MoIHNyYyApO1xuXHRcdHVkYXRhQ3VyID0galF1ZXJ5LmV4dGVuZCgge30sIHVkYXRhT2xkICk7XG5cblx0XHRkYXRhX3VzZXIuc2V0KCBkZXN0LCB1ZGF0YUN1ciApO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGdldEFsbCggY29udGV4dCwgdGFnICkge1xuXHR2YXIgcmV0ID0gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSA/IGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyB8fCBcIipcIiApIDpcblx0XHRcdGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCA/IGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCggdGFnIHx8IFwiKlwiICkgOlxuXHRcdFx0W107XG5cblx0cmV0dXJuIHRhZyA9PT0gdW5kZWZpbmVkIHx8IHRhZyAmJiBqUXVlcnkubm9kZU5hbWUoIGNvbnRleHQsIHRhZyApID9cblx0XHRqUXVlcnkubWVyZ2UoIFsgY29udGV4dCBdLCByZXQgKSA6XG5cdFx0cmV0O1xufVxuXG4vLyBGaXggSUUgYnVncywgc2VlIHN1cHBvcnQgdGVzdHNcbmZ1bmN0aW9uIGZpeElucHV0KCBzcmMsIGRlc3QgKSB7XG5cdHZhciBub2RlTmFtZSA9IGRlc3Qubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblxuXHQvLyBGYWlscyB0byBwZXJzaXN0IHRoZSBjaGVja2VkIHN0YXRlIG9mIGEgY2xvbmVkIGNoZWNrYm94IG9yIHJhZGlvIGJ1dHRvbi5cblx0aWYgKCBub2RlTmFtZSA9PT0gXCJpbnB1dFwiICYmIHJjaGVja2FibGVUeXBlLnRlc3QoIHNyYy50eXBlICkgKSB7XG5cdFx0ZGVzdC5jaGVja2VkID0gc3JjLmNoZWNrZWQ7XG5cblx0Ly8gRmFpbHMgdG8gcmV0dXJuIHRoZSBzZWxlY3RlZCBvcHRpb24gdG8gdGhlIGRlZmF1bHQgc2VsZWN0ZWQgc3RhdGUgd2hlbiBjbG9uaW5nIG9wdGlvbnNcblx0fSBlbHNlIGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiB8fCBub2RlTmFtZSA9PT0gXCJ0ZXh0YXJlYVwiICkge1xuXHRcdGRlc3QuZGVmYXVsdFZhbHVlID0gc3JjLmRlZmF1bHRWYWx1ZTtcblx0fVxufVxuXG5qUXVlcnkuZXh0ZW5kKHtcblx0Y2xvbmU6IGZ1bmN0aW9uKCBlbGVtLCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApIHtcblx0XHR2YXIgaSwgbCwgc3JjRWxlbWVudHMsIGRlc3RFbGVtZW50cyxcblx0XHRcdGNsb25lID0gZWxlbS5jbG9uZU5vZGUoIHRydWUgKSxcblx0XHRcdGluUGFnZSA9IGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICk7XG5cblx0XHQvLyBGaXggSUUgY2xvbmluZyBpc3N1ZXNcblx0XHRpZiAoICFzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkICYmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBlbGVtLm5vZGVUeXBlID09PSAxMSApICYmXG5cdFx0XHRcdCFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblxuXHRcdFx0Ly8gV2UgZXNjaGV3IFNpenpsZSBoZXJlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zOiBodHRwOi8vanNwZXJmLmNvbS9nZXRhbGwtdnMtc2l6emxlLzJcblx0XHRcdGRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUgKTtcblx0XHRcdHNyY0VsZW1lbnRzID0gZ2V0QWxsKCBlbGVtICk7XG5cblx0XHRcdGZvciAoIGkgPSAwLCBsID0gc3JjRWxlbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRmaXhJbnB1dCggc3JjRWxlbWVudHNbIGkgXSwgZGVzdEVsZW1lbnRzWyBpIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDb3B5IHRoZSBldmVudHMgZnJvbSB0aGUgb3JpZ2luYWwgdG8gdGhlIGNsb25lXG5cdFx0aWYgKCBkYXRhQW5kRXZlbnRzICkge1xuXHRcdFx0aWYgKCBkZWVwRGF0YUFuZEV2ZW50cyApIHtcblx0XHRcdFx0c3JjRWxlbWVudHMgPSBzcmNFbGVtZW50cyB8fCBnZXRBbGwoIGVsZW0gKTtcblx0XHRcdFx0ZGVzdEVsZW1lbnRzID0gZGVzdEVsZW1lbnRzIHx8IGdldEFsbCggY2xvbmUgKTtcblxuXHRcdFx0XHRmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0XHRjbG9uZUNvcHlFdmVudCggc3JjRWxlbWVudHNbIGkgXSwgZGVzdEVsZW1lbnRzWyBpIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2xvbmVDb3B5RXZlbnQoIGVsZW0sIGNsb25lICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeVxuXHRcdGRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUsIFwic2NyaXB0XCIgKTtcblx0XHRpZiAoIGRlc3RFbGVtZW50cy5sZW5ndGggPiAwICkge1xuXHRcdFx0c2V0R2xvYmFsRXZhbCggZGVzdEVsZW1lbnRzLCAhaW5QYWdlICYmIGdldEFsbCggZWxlbSwgXCJzY3JpcHRcIiApICk7XG5cdFx0fVxuXG5cdFx0Ly8gUmV0dXJuIHRoZSBjbG9uZWQgc2V0XG5cdFx0cmV0dXJuIGNsb25lO1xuXHR9LFxuXG5cdGJ1aWxkRnJhZ21lbnQ6IGZ1bmN0aW9uKCBlbGVtcywgY29udGV4dCwgc2NyaXB0cywgc2VsZWN0aW9uICkge1xuXHRcdHZhciBlbGVtLCB0bXAsIHRhZywgd3JhcCwgY29udGFpbnMsIGosXG5cdFx0XHRmcmFnbWVudCA9IGNvbnRleHQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuXHRcdFx0bm9kZXMgPSBbXSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IGVsZW1zLmxlbmd0aDtcblxuXHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdGVsZW0gPSBlbGVtc1sgaSBdO1xuXG5cdFx0XHRpZiAoIGVsZW0gfHwgZWxlbSA9PT0gMCApIHtcblxuXHRcdFx0XHQvLyBBZGQgbm9kZXMgZGlyZWN0bHlcblx0XHRcdFx0aWYgKCBqUXVlcnkudHlwZSggZWxlbSApID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFF0V2ViS2l0LCBQaGFudG9tSlNcblx0XHRcdFx0XHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCBub2RlcywgZWxlbS5ub2RlVHlwZSA/IFsgZWxlbSBdIDogZWxlbSApO1xuXG5cdFx0XHRcdC8vIENvbnZlcnQgbm9uLWh0bWwgaW50byBhIHRleHQgbm9kZVxuXHRcdFx0XHR9IGVsc2UgaWYgKCAhcmh0bWwudGVzdCggZWxlbSApICkge1xuXHRcdFx0XHRcdG5vZGVzLnB1c2goIGNvbnRleHQuY3JlYXRlVGV4dE5vZGUoIGVsZW0gKSApO1xuXG5cdFx0XHRcdC8vIENvbnZlcnQgaHRtbCBpbnRvIERPTSBub2Rlc1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRtcCA9IHRtcCB8fCBmcmFnbWVudC5hcHBlbmRDaGlsZCggY29udGV4dC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpICk7XG5cblx0XHRcdFx0XHQvLyBEZXNlcmlhbGl6ZSBhIHN0YW5kYXJkIHJlcHJlc2VudGF0aW9uXG5cdFx0XHRcdFx0dGFnID0gKCBydGFnTmFtZS5leGVjKCBlbGVtICkgfHwgWyBcIlwiLCBcIlwiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdFx0d3JhcCA9IHdyYXBNYXBbIHRhZyBdIHx8IHdyYXBNYXAuX2RlZmF1bHQ7XG5cdFx0XHRcdFx0dG1wLmlubmVySFRNTCA9IHdyYXBbIDEgXSArIGVsZW0ucmVwbGFjZSggcnhodG1sVGFnLCBcIjwkMT48LyQyPlwiICkgKyB3cmFwWyAyIF07XG5cblx0XHRcdFx0XHQvLyBEZXNjZW5kIHRocm91Z2ggd3JhcHBlcnMgdG8gdGhlIHJpZ2h0IGNvbnRlbnRcblx0XHRcdFx0XHRqID0gd3JhcFsgMCBdO1xuXHRcdFx0XHRcdHdoaWxlICggai0tICkge1xuXHRcdFx0XHRcdFx0dG1wID0gdG1wLmxhc3RDaGlsZDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBRdFdlYktpdCwgUGhhbnRvbUpTXG5cdFx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggbm9kZXMsIHRtcC5jaGlsZE5vZGVzICk7XG5cblx0XHRcdFx0XHQvLyBSZW1lbWJlciB0aGUgdG9wLWxldmVsIGNvbnRhaW5lclxuXHRcdFx0XHRcdHRtcCA9IGZyYWdtZW50LmZpcnN0Q2hpbGQ7XG5cblx0XHRcdFx0XHQvLyBFbnN1cmUgdGhlIGNyZWF0ZWQgbm9kZXMgYXJlIG9ycGhhbmVkICgjMTIzOTIpXG5cdFx0XHRcdFx0dG1wLnRleHRDb250ZW50ID0gXCJcIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFJlbW92ZSB3cmFwcGVyIGZyb20gZnJhZ21lbnRcblx0XHRmcmFnbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG5cblx0XHRpID0gMDtcblx0XHR3aGlsZSAoIChlbGVtID0gbm9kZXNbIGkrKyBdKSApIHtcblxuXHRcdFx0Ly8gIzQwODcgLSBJZiBvcmlnaW4gYW5kIGRlc3RpbmF0aW9uIGVsZW1lbnRzIGFyZSB0aGUgc2FtZSwgYW5kIHRoaXMgaXNcblx0XHRcdC8vIHRoYXQgZWxlbWVudCwgZG8gbm90IGRvIGFueXRoaW5nXG5cdFx0XHRpZiAoIHNlbGVjdGlvbiAmJiBqUXVlcnkuaW5BcnJheSggZWxlbSwgc2VsZWN0aW9uICkgIT09IC0xICkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Y29udGFpbnMgPSBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXG5cdFx0XHQvLyBBcHBlbmQgdG8gZnJhZ21lbnRcblx0XHRcdHRtcCA9IGdldEFsbCggZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGVsZW0gKSwgXCJzY3JpcHRcIiApO1xuXG5cdFx0XHQvLyBQcmVzZXJ2ZSBzY3JpcHQgZXZhbHVhdGlvbiBoaXN0b3J5XG5cdFx0XHRpZiAoIGNvbnRhaW5zICkge1xuXHRcdFx0XHRzZXRHbG9iYWxFdmFsKCB0bXAgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2FwdHVyZSBleGVjdXRhYmxlc1xuXHRcdFx0aWYgKCBzY3JpcHRzICkge1xuXHRcdFx0XHRqID0gMDtcblx0XHRcdFx0d2hpbGUgKCAoZWxlbSA9IHRtcFsgaisrIF0pICkge1xuXHRcdFx0XHRcdGlmICggcnNjcmlwdFR5cGUudGVzdCggZWxlbS50eXBlIHx8IFwiXCIgKSApIHtcblx0XHRcdFx0XHRcdHNjcmlwdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmcmFnbWVudDtcblx0fSxcblxuXHRjbGVhbkRhdGE6IGZ1bmN0aW9uKCBlbGVtcyApIHtcblx0XHR2YXIgZGF0YSwgZWxlbSwgdHlwZSwga2V5LFxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7IChlbGVtID0gZWxlbXNbIGkgXSkgIT09IHVuZGVmaW5lZDsgaSsrICkge1xuXHRcdFx0aWYgKCBqUXVlcnkuYWNjZXB0RGF0YSggZWxlbSApICkge1xuXHRcdFx0XHRrZXkgPSBlbGVtWyBkYXRhX3ByaXYuZXhwYW5kbyBdO1xuXG5cdFx0XHRcdGlmICgga2V5ICYmIChkYXRhID0gZGF0YV9wcml2LmNhY2hlWyBrZXkgXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBkYXRhLmV2ZW50cyApIHtcblx0XHRcdFx0XHRcdGZvciAoIHR5cGUgaW4gZGF0YS5ldmVudHMgKSB7XG5cdFx0XHRcdFx0XHRcdGlmICggc3BlY2lhbFsgdHlwZSBdICkge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKTtcblxuXHRcdFx0XHRcdFx0XHQvLyBUaGlzIGlzIGEgc2hvcnRjdXQgdG8gYXZvaWQgalF1ZXJ5LmV2ZW50LnJlbW92ZSdzIG92ZXJoZWFkXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LnJlbW92ZUV2ZW50KCBlbGVtLCB0eXBlLCBkYXRhLmhhbmRsZSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggZGF0YV9wcml2LmNhY2hlWyBrZXkgXSApIHtcblx0XHRcdFx0XHRcdC8vIERpc2NhcmQgYW55IHJlbWFpbmluZyBgcHJpdmF0ZWAgZGF0YVxuXHRcdFx0XHRcdFx0ZGVsZXRlIGRhdGFfcHJpdi5jYWNoZVsga2V5IF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvLyBEaXNjYXJkIGFueSByZW1haW5pbmcgYHVzZXJgIGRhdGFcblx0XHRcdGRlbGV0ZSBkYXRhX3VzZXIuY2FjaGVbIGVsZW1bIGRhdGFfdXNlci5leHBhbmRvIF0gXTtcblx0XHR9XG5cdH1cbn0pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0dGV4dDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID9cblx0XHRcdFx0alF1ZXJ5LnRleHQoIHRoaXMgKSA6XG5cdFx0XHRcdHRoaXMuZW1wdHkoKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdFx0dGhpcy50ZXh0Q29udGVudCA9IHZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0fSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggKTtcblx0fSxcblxuXHRhcHBlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmRvbU1hbmlwKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdHZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTtcblx0XHRcdFx0dGFyZ2V0LmFwcGVuZENoaWxkKCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0cHJlcGVuZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZG9tTWFuaXAoIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0dmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApO1xuXHRcdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0YXJnZXQuZmlyc3RDaGlsZCApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdGJlZm9yZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZG9tTWFuaXAoIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcyApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdGFmdGVyOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5kb21NYW5pcCggYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdGlmICggdGhpcy5wYXJlbnROb2RlICkge1xuXHRcdFx0XHR0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0aGlzLm5leHRTaWJsaW5nICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0cmVtb3ZlOiBmdW5jdGlvbiggc2VsZWN0b3IsIGtlZXBEYXRhIC8qIEludGVybmFsIFVzZSBPbmx5ICovICkge1xuXHRcdHZhciBlbGVtLFxuXHRcdFx0ZWxlbXMgPSBzZWxlY3RvciA/IGpRdWVyeS5maWx0ZXIoIHNlbGVjdG9yLCB0aGlzICkgOiB0aGlzLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7IChlbGVtID0gZWxlbXNbaV0pICE9IG51bGw7IGkrKyApIHtcblx0XHRcdGlmICggIWtlZXBEYXRhICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSApICk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRpZiAoIGtlZXBEYXRhICYmIGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgKSB7XG5cdFx0XHRcdFx0c2V0R2xvYmFsRXZhbCggZ2V0QWxsKCBlbGVtLCBcInNjcmlwdFwiICkgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbGVtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIGVsZW0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRlbXB0eTogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGVsZW0sXG5cdFx0XHRpID0gMDtcblxuXHRcdGZvciAoIDsgKGVsZW0gPSB0aGlzW2ldKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cblx0XHRcdFx0Ly8gUHJldmVudCBtZW1vcnkgbGVha3Ncblx0XHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCBlbGVtLCBmYWxzZSApICk7XG5cblx0XHRcdFx0Ly8gUmVtb3ZlIGFueSByZW1haW5pbmcgbm9kZXNcblx0XHRcdFx0ZWxlbS50ZXh0Q29udGVudCA9IFwiXCI7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0Y2xvbmU6IGZ1bmN0aW9uKCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApIHtcblx0XHRkYXRhQW5kRXZlbnRzID0gZGF0YUFuZEV2ZW50cyA9PSBudWxsID8gZmFsc2UgOiBkYXRhQW5kRXZlbnRzO1xuXHRcdGRlZXBEYXRhQW5kRXZlbnRzID0gZGVlcERhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGRhdGFBbmRFdmVudHMgOiBkZWVwRGF0YUFuZEV2ZW50cztcblxuXHRcdHJldHVybiB0aGlzLm1hcChmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBqUXVlcnkuY2xvbmUoIHRoaXMsIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICk7XG5cdFx0fSk7XG5cdH0sXG5cblx0aHRtbDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBlbGVtID0gdGhpc1sgMCBdIHx8IHt9LFxuXHRcdFx0XHRpID0gMCxcblx0XHRcdFx0bCA9IHRoaXMubGVuZ3RoO1xuXG5cdFx0XHRpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0uaW5uZXJIVE1MO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZWUgaWYgd2UgY2FuIHRha2UgYSBzaG9ydGN1dCBhbmQganVzdCB1c2UgaW5uZXJIVE1MXG5cdFx0XHRpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiAhcm5vSW5uZXJodG1sLnRlc3QoIHZhbHVlICkgJiZcblx0XHRcdFx0IXdyYXBNYXBbICggcnRhZ05hbWUuZXhlYyggdmFsdWUgKSB8fCBbIFwiXCIsIFwiXCIgXSApWyAxIF0udG9Mb3dlckNhc2UoKSBdICkge1xuXG5cdFx0XHRcdHZhbHVlID0gdmFsdWUucmVwbGFjZSggcnhodG1sVGFnLCBcIjwkMT48LyQyPlwiICk7XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0XHRlbGVtID0gdGhpc1sgaSBdIHx8IHt9O1xuXG5cdFx0XHRcdFx0XHQvLyBSZW1vdmUgZWxlbWVudCBub2RlcyBhbmQgcHJldmVudCBtZW1vcnkgbGVha3Ncblx0XHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCBlbGVtLCBmYWxzZSApICk7XG5cdFx0XHRcdFx0XHRcdGVsZW0uaW5uZXJIVE1MID0gdmFsdWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0ZWxlbSA9IDA7XG5cblx0XHRcdFx0Ly8gSWYgdXNpbmcgaW5uZXJIVE1MIHRocm93cyBhbiBleGNlcHRpb24sIHVzZSB0aGUgZmFsbGJhY2sgbWV0aG9kXG5cdFx0XHRcdH0gY2F0Y2goIGUgKSB7fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHRcdHRoaXMuZW1wdHkoKS5hcHBlbmQoIHZhbHVlICk7XG5cdFx0XHR9XG5cdFx0fSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggKTtcblx0fSxcblxuXHRyZXBsYWNlV2l0aDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGFyZyA9IGFyZ3VtZW50c1sgMCBdO1xuXG5cdFx0Ly8gTWFrZSB0aGUgY2hhbmdlcywgcmVwbGFjaW5nIGVhY2ggY29udGV4dCBlbGVtZW50IHdpdGggdGhlIG5ldyBjb250ZW50XG5cdFx0dGhpcy5kb21NYW5pcCggYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdGFyZyA9IHRoaXMucGFyZW50Tm9kZTtcblxuXHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCB0aGlzICkgKTtcblxuXHRcdFx0aWYgKCBhcmcgKSB7XG5cdFx0XHRcdGFyZy5yZXBsYWNlQ2hpbGQoIGVsZW0sIHRoaXMgKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIEZvcmNlIHJlbW92YWwgaWYgdGhlcmUgd2FzIG5vIG5ldyBjb250ZW50IChlLmcuLCBmcm9tIGVtcHR5IGFyZ3VtZW50cylcblx0XHRyZXR1cm4gYXJnICYmIChhcmcubGVuZ3RoIHx8IGFyZy5ub2RlVHlwZSkgPyB0aGlzIDogdGhpcy5yZW1vdmUoKTtcblx0fSxcblxuXHRkZXRhY2g6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5yZW1vdmUoIHNlbGVjdG9yLCB0cnVlICk7XG5cdH0sXG5cblx0ZG9tTWFuaXA6IGZ1bmN0aW9uKCBhcmdzLCBjYWxsYmFjayApIHtcblxuXHRcdC8vIEZsYXR0ZW4gYW55IG5lc3RlZCBhcnJheXNcblx0XHRhcmdzID0gY29uY2F0LmFwcGx5KCBbXSwgYXJncyApO1xuXG5cdFx0dmFyIGZyYWdtZW50LCBmaXJzdCwgc2NyaXB0cywgaGFzU2NyaXB0cywgbm9kZSwgZG9jLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRzZXQgPSB0aGlzLFxuXHRcdFx0aU5vQ2xvbmUgPSBsIC0gMSxcblx0XHRcdHZhbHVlID0gYXJnc1sgMCBdLFxuXHRcdFx0aXNGdW5jdGlvbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApO1xuXG5cdFx0Ly8gV2UgY2FuJ3QgY2xvbmVOb2RlIGZyYWdtZW50cyB0aGF0IGNvbnRhaW4gY2hlY2tlZCwgaW4gV2ViS2l0XG5cdFx0aWYgKCBpc0Z1bmN0aW9uIHx8XG5cdFx0XHRcdCggbCA+IDEgJiYgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmXG5cdFx0XHRcdFx0IXN1cHBvcnQuY2hlY2tDbG9uZSAmJiByY2hlY2tlZC50ZXN0KCB2YWx1ZSApICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCBpbmRleCApIHtcblx0XHRcdFx0dmFyIHNlbGYgPSBzZXQuZXEoIGluZGV4ICk7XG5cdFx0XHRcdGlmICggaXNGdW5jdGlvbiApIHtcblx0XHRcdFx0XHRhcmdzWyAwIF0gPSB2YWx1ZS5jYWxsKCB0aGlzLCBpbmRleCwgc2VsZi5odG1sKCkgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzZWxmLmRvbU1hbmlwKCBhcmdzLCBjYWxsYmFjayApO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKCBsICkge1xuXHRcdFx0ZnJhZ21lbnQgPSBqUXVlcnkuYnVpbGRGcmFnbWVudCggYXJncywgdGhpc1sgMCBdLm93bmVyRG9jdW1lbnQsIGZhbHNlLCB0aGlzICk7XG5cdFx0XHRmaXJzdCA9IGZyYWdtZW50LmZpcnN0Q2hpbGQ7XG5cblx0XHRcdGlmICggZnJhZ21lbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgKSB7XG5cdFx0XHRcdGZyYWdtZW50ID0gZmlyc3Q7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggZmlyc3QgKSB7XG5cdFx0XHRcdHNjcmlwdHMgPSBqUXVlcnkubWFwKCBnZXRBbGwoIGZyYWdtZW50LCBcInNjcmlwdFwiICksIGRpc2FibGVTY3JpcHQgKTtcblx0XHRcdFx0aGFzU2NyaXB0cyA9IHNjcmlwdHMubGVuZ3RoO1xuXG5cdFx0XHRcdC8vIFVzZSB0aGUgb3JpZ2luYWwgZnJhZ21lbnQgZm9yIHRoZSBsYXN0IGl0ZW0gaW5zdGVhZCBvZiB0aGUgZmlyc3QgYmVjYXVzZSBpdCBjYW4gZW5kIHVwXG5cdFx0XHRcdC8vIGJlaW5nIGVtcHRpZWQgaW5jb3JyZWN0bHkgaW4gY2VydGFpbiBzaXR1YXRpb25zICgjODA3MCkuXG5cdFx0XHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0XHRub2RlID0gZnJhZ21lbnQ7XG5cblx0XHRcdFx0XHRpZiAoIGkgIT09IGlOb0Nsb25lICkge1xuXHRcdFx0XHRcdFx0bm9kZSA9IGpRdWVyeS5jbG9uZSggbm9kZSwgdHJ1ZSwgdHJ1ZSApO1xuXG5cdFx0XHRcdFx0XHQvLyBLZWVwIHJlZmVyZW5jZXMgdG8gY2xvbmVkIHNjcmlwdHMgZm9yIGxhdGVyIHJlc3RvcmF0aW9uXG5cdFx0XHRcdFx0XHRpZiAoIGhhc1NjcmlwdHMgKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFF0V2ViS2l0XG5cdFx0XHRcdFx0XHRcdC8vIGpRdWVyeS5tZXJnZSBiZWNhdXNlIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Ncblx0XHRcdFx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCBzY3JpcHRzLCBnZXRBbGwoIG5vZGUsIFwic2NyaXB0XCIgKSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwoIHRoaXNbIGkgXSwgbm9kZSwgaSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBoYXNTY3JpcHRzICkge1xuXHRcdFx0XHRcdGRvYyA9IHNjcmlwdHNbIHNjcmlwdHMubGVuZ3RoIC0gMSBdLm93bmVyRG9jdW1lbnQ7XG5cblx0XHRcdFx0XHQvLyBSZWVuYWJsZSBzY3JpcHRzXG5cdFx0XHRcdFx0alF1ZXJ5Lm1hcCggc2NyaXB0cywgcmVzdG9yZVNjcmlwdCApO1xuXG5cdFx0XHRcdFx0Ly8gRXZhbHVhdGUgZXhlY3V0YWJsZSBzY3JpcHRzIG9uIGZpcnN0IGRvY3VtZW50IGluc2VydGlvblxuXHRcdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgaGFzU2NyaXB0czsgaSsrICkge1xuXHRcdFx0XHRcdFx0bm9kZSA9IHNjcmlwdHNbIGkgXTtcblx0XHRcdFx0XHRcdGlmICggcnNjcmlwdFR5cGUudGVzdCggbm9kZS50eXBlIHx8IFwiXCIgKSAmJlxuXHRcdFx0XHRcdFx0XHQhZGF0YV9wcml2LmFjY2Vzcyggbm9kZSwgXCJnbG9iYWxFdmFsXCIgKSAmJiBqUXVlcnkuY29udGFpbnMoIGRvYywgbm9kZSApICkge1xuXG5cdFx0XHRcdFx0XHRcdGlmICggbm9kZS5zcmMgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gT3B0aW9uYWwgQUpBWCBkZXBlbmRlbmN5LCBidXQgd29uJ3QgcnVuIHNjcmlwdHMgaWYgbm90IHByZXNlbnRcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5fZXZhbFVybCApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5fZXZhbFVybCggbm9kZS5zcmMgKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5Lmdsb2JhbEV2YWwoIG5vZGUudGV4dENvbnRlbnQucmVwbGFjZSggcmNsZWFuU2NyaXB0LCBcIlwiICkgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG59KTtcblxualF1ZXJ5LmVhY2goe1xuXHRhcHBlbmRUbzogXCJhcHBlbmRcIixcblx0cHJlcGVuZFRvOiBcInByZXBlbmRcIixcblx0aW5zZXJ0QmVmb3JlOiBcImJlZm9yZVwiLFxuXHRpbnNlcnRBZnRlcjogXCJhZnRlclwiLFxuXHRyZXBsYWNlQWxsOiBcInJlcGxhY2VXaXRoXCJcbn0sIGZ1bmN0aW9uKCBuYW1lLCBvcmlnaW5hbCApIHtcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0dmFyIGVsZW1zLFxuXHRcdFx0cmV0ID0gW10sXG5cdFx0XHRpbnNlcnQgPSBqUXVlcnkoIHNlbGVjdG9yICksXG5cdFx0XHRsYXN0ID0gaW5zZXJ0Lmxlbmd0aCAtIDEsXG5cdFx0XHRpID0gMDtcblxuXHRcdGZvciAoIDsgaSA8PSBsYXN0OyBpKysgKSB7XG5cdFx0XHRlbGVtcyA9IGkgPT09IGxhc3QgPyB0aGlzIDogdGhpcy5jbG9uZSggdHJ1ZSApO1xuXHRcdFx0alF1ZXJ5KCBpbnNlcnRbIGkgXSApWyBvcmlnaW5hbCBdKCBlbGVtcyApO1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBRdFdlYktpdFxuXHRcdFx0Ly8gLmdldCgpIGJlY2F1c2UgcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93c1xuXHRcdFx0cHVzaC5hcHBseSggcmV0LCBlbGVtcy5nZXQoKSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggcmV0ICk7XG5cdH07XG59KTtcblxuXG52YXIgaWZyYW1lLFxuXHRlbGVtZGlzcGxheSA9IHt9O1xuXG4vKipcbiAqIFJldHJpZXZlIHRoZSBhY3R1YWwgZGlzcGxheSBvZiBhIGVsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIG5vZGVOYW1lIG9mIHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge09iamVjdH0gZG9jIERvY3VtZW50IG9iamVjdFxuICovXG4vLyBDYWxsZWQgb25seSBmcm9tIHdpdGhpbiBkZWZhdWx0RGlzcGxheVxuZnVuY3Rpb24gYWN0dWFsRGlzcGxheSggbmFtZSwgZG9jICkge1xuXHR2YXIgc3R5bGUsXG5cdFx0ZWxlbSA9IGpRdWVyeSggZG9jLmNyZWF0ZUVsZW1lbnQoIG5hbWUgKSApLmFwcGVuZFRvKCBkb2MuYm9keSApLFxuXG5cdFx0Ly8gZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUgbWlnaHQgYmUgcmVsaWFibHkgdXNlZCBvbmx5IG9uIGF0dGFjaGVkIGVsZW1lbnRcblx0XHRkaXNwbGF5ID0gd2luZG93LmdldERlZmF1bHRDb21wdXRlZFN0eWxlICYmICggc3R5bGUgPSB3aW5kb3cuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUoIGVsZW1bIDAgXSApICkgP1xuXG5cdFx0XHQvLyBVc2Ugb2YgdGhpcyBtZXRob2QgaXMgYSB0ZW1wb3JhcnkgZml4IChtb3JlIGxpa2Ugb3B0aW1pemF0aW9uKSB1bnRpbCBzb21ldGhpbmcgYmV0dGVyIGNvbWVzIGFsb25nLFxuXHRcdFx0Ly8gc2luY2UgaXQgd2FzIHJlbW92ZWQgZnJvbSBzcGVjaWZpY2F0aW9uIGFuZCBzdXBwb3J0ZWQgb25seSBpbiBGRlxuXHRcdFx0c3R5bGUuZGlzcGxheSA6IGpRdWVyeS5jc3MoIGVsZW1bIDAgXSwgXCJkaXNwbGF5XCIgKTtcblxuXHQvLyBXZSBkb24ndCBoYXZlIGFueSBkYXRhIHN0b3JlZCBvbiB0aGUgZWxlbWVudCxcblx0Ly8gc28gdXNlIFwiZGV0YWNoXCIgbWV0aG9kIGFzIGZhc3Qgd2F5IHRvIGdldCByaWQgb2YgdGhlIGVsZW1lbnRcblx0ZWxlbS5kZXRhY2goKTtcblxuXHRyZXR1cm4gZGlzcGxheTtcbn1cblxuLyoqXG4gKiBUcnkgdG8gZGV0ZXJtaW5lIHRoZSBkZWZhdWx0IGRpc3BsYXkgdmFsdWUgb2YgYW4gZWxlbWVudFxuICogQHBhcmFtIHtTdHJpbmd9IG5vZGVOYW1lXG4gKi9cbmZ1bmN0aW9uIGRlZmF1bHREaXNwbGF5KCBub2RlTmFtZSApIHtcblx0dmFyIGRvYyA9IGRvY3VtZW50LFxuXHRcdGRpc3BsYXkgPSBlbGVtZGlzcGxheVsgbm9kZU5hbWUgXTtcblxuXHRpZiAoICFkaXNwbGF5ICkge1xuXHRcdGRpc3BsYXkgPSBhY3R1YWxEaXNwbGF5KCBub2RlTmFtZSwgZG9jICk7XG5cblx0XHQvLyBJZiB0aGUgc2ltcGxlIHdheSBmYWlscywgcmVhZCBmcm9tIGluc2lkZSBhbiBpZnJhbWVcblx0XHRpZiAoIGRpc3BsYXkgPT09IFwibm9uZVwiIHx8ICFkaXNwbGF5ICkge1xuXG5cdFx0XHQvLyBVc2UgdGhlIGFscmVhZHktY3JlYXRlZCBpZnJhbWUgaWYgcG9zc2libGVcblx0XHRcdGlmcmFtZSA9IChpZnJhbWUgfHwgalF1ZXJ5KCBcIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz5cIiApKS5hcHBlbmRUbyggZG9jLmRvY3VtZW50RWxlbWVudCApO1xuXG5cdFx0XHQvLyBBbHdheXMgd3JpdGUgYSBuZXcgSFRNTCBza2VsZXRvbiBzbyBXZWJraXQgYW5kIEZpcmVmb3ggZG9uJ3QgY2hva2Ugb24gcmV1c2Vcblx0XHRcdGRvYyA9IGlmcmFtZVsgMCBdLmNvbnRlbnREb2N1bWVudDtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUVcblx0XHRcdGRvYy53cml0ZSgpO1xuXHRcdFx0ZG9jLmNsb3NlKCk7XG5cblx0XHRcdGRpc3BsYXkgPSBhY3R1YWxEaXNwbGF5KCBub2RlTmFtZSwgZG9jICk7XG5cdFx0XHRpZnJhbWUuZGV0YWNoKCk7XG5cdFx0fVxuXG5cdFx0Ly8gU3RvcmUgdGhlIGNvcnJlY3QgZGVmYXVsdCBkaXNwbGF5XG5cdFx0ZWxlbWRpc3BsYXlbIG5vZGVOYW1lIF0gPSBkaXNwbGF5O1xuXHR9XG5cblx0cmV0dXJuIGRpc3BsYXk7XG59XG52YXIgcm1hcmdpbiA9ICgvXm1hcmdpbi8pO1xuXG52YXIgcm51bW5vbnB4ID0gbmV3IFJlZ0V4cCggXCJeKFwiICsgcG51bSArIFwiKSg/IXB4KVthLXolXSskXCIsIFwiaVwiICk7XG5cbnZhciBnZXRTdHlsZXMgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0XHQvLyBTdXBwb3J0OiBJRTw9MTErLCBGaXJlZm94PD0zMCsgKCMxNTA5OCwgIzE0MTUwKVxuXHRcdC8vIElFIHRocm93cyBvbiBlbGVtZW50cyBjcmVhdGVkIGluIHBvcHVwc1xuXHRcdC8vIEZGIG1lYW53aGlsZSB0aHJvd3Mgb24gZnJhbWUgZWxlbWVudHMgdGhyb3VnaCBcImRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGVcIlxuXHRcdGlmICggZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3Lm9wZW5lciApIHtcblx0XHRcdHJldHVybiBlbGVtLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSggZWxlbSwgbnVsbCApO1xuXHRcdH1cblxuXHRcdHJldHVybiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggZWxlbSwgbnVsbCApO1xuXHR9O1xuXG5cblxuZnVuY3Rpb24gY3VyQ1NTKCBlbGVtLCBuYW1lLCBjb21wdXRlZCApIHtcblx0dmFyIHdpZHRoLCBtaW5XaWR0aCwgbWF4V2lkdGgsIHJldCxcblx0XHRzdHlsZSA9IGVsZW0uc3R5bGU7XG5cblx0Y29tcHV0ZWQgPSBjb21wdXRlZCB8fCBnZXRTdHlsZXMoIGVsZW0gKTtcblxuXHQvLyBTdXBwb3J0OiBJRTlcblx0Ly8gZ2V0UHJvcGVydHlWYWx1ZSBpcyBvbmx5IG5lZWRlZCBmb3IgLmNzcygnZmlsdGVyJykgKCMxMjUzNylcblx0aWYgKCBjb21wdXRlZCApIHtcblx0XHRyZXQgPSBjb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKCBuYW1lICkgfHwgY29tcHV0ZWRbIG5hbWUgXTtcblx0fVxuXG5cdGlmICggY29tcHV0ZWQgKSB7XG5cblx0XHRpZiAoIHJldCA9PT0gXCJcIiAmJiAhalF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKSApIHtcblx0XHRcdHJldCA9IGpRdWVyeS5zdHlsZSggZWxlbSwgbmFtZSApO1xuXHRcdH1cblxuXHRcdC8vIFN1cHBvcnQ6IGlPUyA8IDZcblx0XHQvLyBBIHRyaWJ1dGUgdG8gdGhlIFwiYXdlc29tZSBoYWNrIGJ5IERlYW4gRWR3YXJkc1wiXG5cdFx0Ly8gaU9TIDwgNiAoYXQgbGVhc3QpIHJldHVybnMgcGVyY2VudGFnZSBmb3IgYSBsYXJnZXIgc2V0IG9mIHZhbHVlcywgYnV0IHdpZHRoIHNlZW1zIHRvIGJlIHJlbGlhYmx5IHBpeGVsc1xuXHRcdC8vIHRoaXMgaXMgYWdhaW5zdCB0aGUgQ1NTT00gZHJhZnQgc3BlYzogaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3Nzb20vI3Jlc29sdmVkLXZhbHVlc1xuXHRcdGlmICggcm51bW5vbnB4LnRlc3QoIHJldCApICYmIHJtYXJnaW4udGVzdCggbmFtZSApICkge1xuXG5cdFx0XHQvLyBSZW1lbWJlciB0aGUgb3JpZ2luYWwgdmFsdWVzXG5cdFx0XHR3aWR0aCA9IHN0eWxlLndpZHRoO1xuXHRcdFx0bWluV2lkdGggPSBzdHlsZS5taW5XaWR0aDtcblx0XHRcdG1heFdpZHRoID0gc3R5bGUubWF4V2lkdGg7XG5cblx0XHRcdC8vIFB1dCBpbiB0aGUgbmV3IHZhbHVlcyB0byBnZXQgYSBjb21wdXRlZCB2YWx1ZSBvdXRcblx0XHRcdHN0eWxlLm1pbldpZHRoID0gc3R5bGUubWF4V2lkdGggPSBzdHlsZS53aWR0aCA9IHJldDtcblx0XHRcdHJldCA9IGNvbXB1dGVkLndpZHRoO1xuXG5cdFx0XHQvLyBSZXZlcnQgdGhlIGNoYW5nZWQgdmFsdWVzXG5cdFx0XHRzdHlsZS53aWR0aCA9IHdpZHRoO1xuXHRcdFx0c3R5bGUubWluV2lkdGggPSBtaW5XaWR0aDtcblx0XHRcdHN0eWxlLm1heFdpZHRoID0gbWF4V2lkdGg7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHJldCAhPT0gdW5kZWZpbmVkID9cblx0XHQvLyBTdXBwb3J0OiBJRVxuXHRcdC8vIElFIHJldHVybnMgekluZGV4IHZhbHVlIGFzIGFuIGludGVnZXIuXG5cdFx0cmV0ICsgXCJcIiA6XG5cdFx0cmV0O1xufVxuXG5cbmZ1bmN0aW9uIGFkZEdldEhvb2tJZiggY29uZGl0aW9uRm4sIGhvb2tGbiApIHtcblx0Ly8gRGVmaW5lIHRoZSBob29rLCB3ZSdsbCBjaGVjayBvbiB0aGUgZmlyc3QgcnVuIGlmIGl0J3MgcmVhbGx5IG5lZWRlZC5cblx0cmV0dXJuIHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBjb25kaXRpb25GbigpICkge1xuXHRcdFx0XHQvLyBIb29rIG5vdCBuZWVkZWQgKG9yIGl0J3Mgbm90IHBvc3NpYmxlIHRvIHVzZSBpdCBkdWVcblx0XHRcdFx0Ly8gdG8gbWlzc2luZyBkZXBlbmRlbmN5KSwgcmVtb3ZlIGl0LlxuXHRcdFx0XHRkZWxldGUgdGhpcy5nZXQ7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSG9vayBuZWVkZWQ7IHJlZGVmaW5lIGl0IHNvIHRoYXQgdGhlIHN1cHBvcnQgdGVzdCBpcyBub3QgZXhlY3V0ZWQgYWdhaW4uXG5cdFx0XHRyZXR1cm4gKHRoaXMuZ2V0ID0gaG9va0ZuKS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0fVxuXHR9O1xufVxuXG5cbihmdW5jdGlvbigpIHtcblx0dmFyIHBpeGVsUG9zaXRpb25WYWwsIGJveFNpemluZ1JlbGlhYmxlVmFsLFxuXHRcdGRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXG5cdFx0Y29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApLFxuXHRcdGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcblxuXHRpZiAoICFkaXYuc3R5bGUgKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gU3VwcG9ydDogSUU5LTExK1xuXHQvLyBTdHlsZSBvZiBjbG9uZWQgZWxlbWVudCBhZmZlY3RzIHNvdXJjZSBlbGVtZW50IGNsb25lZCAoIzg5MDgpXG5cdGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9IFwiY29udGVudC1ib3hcIjtcblx0ZGl2LmNsb25lTm9kZSggdHJ1ZSApLnN0eWxlLmJhY2tncm91bmRDbGlwID0gXCJcIjtcblx0c3VwcG9ydC5jbGVhckNsb25lU3R5bGUgPSBkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPT09IFwiY29udGVudC1ib3hcIjtcblxuXHRjb250YWluZXIuc3R5bGUuY3NzVGV4dCA9IFwiYm9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7bWFyZ2luLXRvcDoxcHg7XCIgK1xuXHRcdFwicG9zaXRpb246YWJzb2x1dGVcIjtcblx0Y29udGFpbmVyLmFwcGVuZENoaWxkKCBkaXYgKTtcblxuXHQvLyBFeGVjdXRpbmcgYm90aCBwaXhlbFBvc2l0aW9uICYgYm94U2l6aW5nUmVsaWFibGUgdGVzdHMgcmVxdWlyZSBvbmx5IG9uZSBsYXlvdXRcblx0Ly8gc28gdGhleSdyZSBleGVjdXRlZCBhdCB0aGUgc2FtZSB0aW1lIHRvIHNhdmUgdGhlIHNlY29uZCBjb21wdXRhdGlvbi5cblx0ZnVuY3Rpb24gY29tcHV0ZVBpeGVsUG9zaXRpb25BbmRCb3hTaXppbmdSZWxpYWJsZSgpIHtcblx0XHRkaXYuc3R5bGUuY3NzVGV4dCA9XG5cdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94PDI5LCBBbmRyb2lkIDIuM1xuXHRcdFx0Ly8gVmVuZG9yLXByZWZpeCBib3gtc2l6aW5nXG5cdFx0XHRcIi13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O1wiICtcblx0XHRcdFwiYm94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luLXRvcDoxJTt0b3A6MSU7XCIgK1xuXHRcdFx0XCJib3JkZXI6MXB4O3BhZGRpbmc6MXB4O3dpZHRoOjRweDtwb3NpdGlvbjphYnNvbHV0ZVwiO1xuXHRcdGRpdi5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGNvbnRhaW5lciApO1xuXG5cdFx0dmFyIGRpdlN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGRpdiwgbnVsbCApO1xuXHRcdHBpeGVsUG9zaXRpb25WYWwgPSBkaXZTdHlsZS50b3AgIT09IFwiMSVcIjtcblx0XHRib3hTaXppbmdSZWxpYWJsZVZhbCA9IGRpdlN0eWxlLndpZHRoID09PSBcIjRweFwiO1xuXG5cdFx0ZG9jRWxlbS5yZW1vdmVDaGlsZCggY29udGFpbmVyICk7XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBub2RlLmpzIGpzZG9tXG5cdC8vIERvbid0IGFzc3VtZSB0aGF0IGdldENvbXB1dGVkU3R5bGUgaXMgYSBwcm9wZXJ0eSBvZiB0aGUgZ2xvYmFsIG9iamVjdFxuXHRpZiAoIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlICkge1xuXHRcdGpRdWVyeS5leHRlbmQoIHN1cHBvcnQsIHtcblx0XHRcdHBpeGVsUG9zaXRpb246IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdC8vIFRoaXMgdGVzdCBpcyBleGVjdXRlZCBvbmx5IG9uY2UgYnV0IHdlIHN0aWxsIGRvIG1lbW9pemluZ1xuXHRcdFx0XHQvLyBzaW5jZSB3ZSBjYW4gdXNlIHRoZSBib3hTaXppbmdSZWxpYWJsZSBwcmUtY29tcHV0aW5nLlxuXHRcdFx0XHQvLyBObyBuZWVkIHRvIGNoZWNrIGlmIHRoZSB0ZXN0IHdhcyBhbHJlYWR5IHBlcmZvcm1lZCwgdGhvdWdoLlxuXHRcdFx0XHRjb21wdXRlUGl4ZWxQb3NpdGlvbkFuZEJveFNpemluZ1JlbGlhYmxlKCk7XG5cdFx0XHRcdHJldHVybiBwaXhlbFBvc2l0aW9uVmFsO1xuXHRcdFx0fSxcblx0XHRcdGJveFNpemluZ1JlbGlhYmxlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBib3hTaXppbmdSZWxpYWJsZVZhbCA9PSBudWxsICkge1xuXHRcdFx0XHRcdGNvbXB1dGVQaXhlbFBvc2l0aW9uQW5kQm94U2l6aW5nUmVsaWFibGUoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gYm94U2l6aW5nUmVsaWFibGVWYWw7XG5cdFx0XHR9LFxuXHRcdFx0cmVsaWFibGVNYXJnaW5SaWdodDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCAyLjNcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgZGl2IHdpdGggZXhwbGljaXQgd2lkdGggYW5kIG5vIG1hcmdpbi1yaWdodCBpbmNvcnJlY3RseVxuXHRcdFx0XHQvLyBnZXRzIGNvbXB1dGVkIG1hcmdpbi1yaWdodCBiYXNlZCBvbiB3aWR0aCBvZiBjb250YWluZXIuICgjMzMzMylcblx0XHRcdFx0Ly8gV2ViS2l0IEJ1ZyAxMzM0MyAtIGdldENvbXB1dGVkU3R5bGUgcmV0dXJucyB3cm9uZyB2YWx1ZSBmb3IgbWFyZ2luLXJpZ2h0XG5cdFx0XHRcdC8vIFRoaXMgc3VwcG9ydCBmdW5jdGlvbiBpcyBvbmx5IGV4ZWN1dGVkIG9uY2Ugc28gbm8gbWVtb2l6aW5nIGlzIG5lZWRlZC5cblx0XHRcdFx0dmFyIHJldCxcblx0XHRcdFx0XHRtYXJnaW5EaXYgPSBkaXYuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSApO1xuXG5cdFx0XHRcdC8vIFJlc2V0IENTUzogYm94LXNpemluZzsgZGlzcGxheTsgbWFyZ2luOyBib3JkZXI7IHBhZGRpbmdcblx0XHRcdFx0bWFyZ2luRGl2LnN0eWxlLmNzc1RleHQgPSBkaXYuc3R5bGUuY3NzVGV4dCA9XG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveDwyOSwgQW5kcm9pZCAyLjNcblx0XHRcdFx0XHQvLyBWZW5kb3ItcHJlZml4IGJveC1zaXppbmdcblx0XHRcdFx0XHRcIi13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7XCIgK1xuXHRcdFx0XHRcdFwiYm94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MFwiO1xuXHRcdFx0XHRtYXJnaW5EaXYuc3R5bGUubWFyZ2luUmlnaHQgPSBtYXJnaW5EaXYuc3R5bGUud2lkdGggPSBcIjBcIjtcblx0XHRcdFx0ZGl2LnN0eWxlLndpZHRoID0gXCIxcHhcIjtcblx0XHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggY29udGFpbmVyICk7XG5cblx0XHRcdFx0cmV0ID0gIXBhcnNlRmxvYXQoIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBtYXJnaW5EaXYsIG51bGwgKS5tYXJnaW5SaWdodCApO1xuXG5cdFx0XHRcdGRvY0VsZW0ucmVtb3ZlQ2hpbGQoIGNvbnRhaW5lciApO1xuXHRcdFx0XHRkaXYucmVtb3ZlQ2hpbGQoIG1hcmdpbkRpdiApO1xuXG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn0pKCk7XG5cblxuLy8gQSBtZXRob2QgZm9yIHF1aWNrbHkgc3dhcHBpbmcgaW4vb3V0IENTUyBwcm9wZXJ0aWVzIHRvIGdldCBjb3JyZWN0IGNhbGN1bGF0aW9ucy5cbmpRdWVyeS5zd2FwID0gZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIGNhbGxiYWNrLCBhcmdzICkge1xuXHR2YXIgcmV0LCBuYW1lLFxuXHRcdG9sZCA9IHt9O1xuXG5cdC8vIFJlbWVtYmVyIHRoZSBvbGQgdmFsdWVzLCBhbmQgaW5zZXJ0IHRoZSBuZXcgb25lc1xuXHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0b2xkWyBuYW1lIF0gPSBlbGVtLnN0eWxlWyBuYW1lIF07XG5cdFx0ZWxlbS5zdHlsZVsgbmFtZSBdID0gb3B0aW9uc1sgbmFtZSBdO1xuXHR9XG5cblx0cmV0ID0gY2FsbGJhY2suYXBwbHkoIGVsZW0sIGFyZ3MgfHwgW10gKTtcblxuXHQvLyBSZXZlcnQgdGhlIG9sZCB2YWx1ZXNcblx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdGVsZW0uc3R5bGVbIG5hbWUgXSA9IG9sZFsgbmFtZSBdO1xuXHR9XG5cblx0cmV0dXJuIHJldDtcbn07XG5cblxudmFyXG5cdC8vIFN3YXBwYWJsZSBpZiBkaXNwbGF5IGlzIG5vbmUgb3Igc3RhcnRzIHdpdGggdGFibGUgZXhjZXB0IFwidGFibGVcIiwgXCJ0YWJsZS1jZWxsXCIsIG9yIFwidGFibGUtY2FwdGlvblwiXG5cdC8vIFNlZSBoZXJlIGZvciBkaXNwbGF5IHZhbHVlczogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9DU1MvZGlzcGxheVxuXHRyZGlzcGxheXN3YXAgPSAvXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sXG5cdHJudW1zcGxpdCA9IG5ldyBSZWdFeHAoIFwiXihcIiArIHBudW0gKyBcIikoLiopJFwiLCBcImlcIiApLFxuXHRycmVsTnVtID0gbmV3IFJlZ0V4cCggXCJeKFsrLV0pPShcIiArIHBudW0gKyBcIilcIiwgXCJpXCIgKSxcblxuXHRjc3NTaG93ID0geyBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLCB2aXNpYmlsaXR5OiBcImhpZGRlblwiLCBkaXNwbGF5OiBcImJsb2NrXCIgfSxcblx0Y3NzTm9ybWFsVHJhbnNmb3JtID0ge1xuXHRcdGxldHRlclNwYWNpbmc6IFwiMFwiLFxuXHRcdGZvbnRXZWlnaHQ6IFwiNDAwXCJcblx0fSxcblxuXHRjc3NQcmVmaXhlcyA9IFsgXCJXZWJraXRcIiwgXCJPXCIsIFwiTW96XCIsIFwibXNcIiBdO1xuXG4vLyBSZXR1cm4gYSBjc3MgcHJvcGVydHkgbWFwcGVkIHRvIGEgcG90ZW50aWFsbHkgdmVuZG9yIHByZWZpeGVkIHByb3BlcnR5XG5mdW5jdGlvbiB2ZW5kb3JQcm9wTmFtZSggc3R5bGUsIG5hbWUgKSB7XG5cblx0Ly8gU2hvcnRjdXQgZm9yIG5hbWVzIHRoYXQgYXJlIG5vdCB2ZW5kb3IgcHJlZml4ZWRcblx0aWYgKCBuYW1lIGluIHN0eWxlICkge1xuXHRcdHJldHVybiBuYW1lO1xuXHR9XG5cblx0Ly8gQ2hlY2sgZm9yIHZlbmRvciBwcmVmaXhlZCBuYW1lc1xuXHR2YXIgY2FwTmFtZSA9IG5hbWVbMF0udG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoMSksXG5cdFx0b3JpZ05hbWUgPSBuYW1lLFxuXHRcdGkgPSBjc3NQcmVmaXhlcy5sZW5ndGg7XG5cblx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0bmFtZSA9IGNzc1ByZWZpeGVzWyBpIF0gKyBjYXBOYW1lO1xuXHRcdGlmICggbmFtZSBpbiBzdHlsZSApIHtcblx0XHRcdHJldHVybiBuYW1lO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBvcmlnTmFtZTtcbn1cblxuZnVuY3Rpb24gc2V0UG9zaXRpdmVOdW1iZXIoIGVsZW0sIHZhbHVlLCBzdWJ0cmFjdCApIHtcblx0dmFyIG1hdGNoZXMgPSBybnVtc3BsaXQuZXhlYyggdmFsdWUgKTtcblx0cmV0dXJuIG1hdGNoZXMgP1xuXHRcdC8vIEd1YXJkIGFnYWluc3QgdW5kZWZpbmVkIFwic3VidHJhY3RcIiwgZS5nLiwgd2hlbiB1c2VkIGFzIGluIGNzc0hvb2tzXG5cdFx0TWF0aC5tYXgoIDAsIG1hdGNoZXNbIDEgXSAtICggc3VidHJhY3QgfHwgMCApICkgKyAoIG1hdGNoZXNbIDIgXSB8fCBcInB4XCIgKSA6XG5cdFx0dmFsdWU7XG59XG5cbmZ1bmN0aW9uIGF1Z21lbnRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSwgaXNCb3JkZXJCb3gsIHN0eWxlcyApIHtcblx0dmFyIGkgPSBleHRyYSA9PT0gKCBpc0JvcmRlckJveCA/IFwiYm9yZGVyXCIgOiBcImNvbnRlbnRcIiApID9cblx0XHQvLyBJZiB3ZSBhbHJlYWR5IGhhdmUgdGhlIHJpZ2h0IG1lYXN1cmVtZW50LCBhdm9pZCBhdWdtZW50YXRpb25cblx0XHQ0IDpcblx0XHQvLyBPdGhlcndpc2UgaW5pdGlhbGl6ZSBmb3IgaG9yaXpvbnRhbCBvciB2ZXJ0aWNhbCBwcm9wZXJ0aWVzXG5cdFx0bmFtZSA9PT0gXCJ3aWR0aFwiID8gMSA6IDAsXG5cblx0XHR2YWwgPSAwO1xuXG5cdGZvciAoIDsgaSA8IDQ7IGkgKz0gMiApIHtcblx0XHQvLyBCb3RoIGJveCBtb2RlbHMgZXhjbHVkZSBtYXJnaW4sIHNvIGFkZCBpdCBpZiB3ZSB3YW50IGl0XG5cdFx0aWYgKCBleHRyYSA9PT0gXCJtYXJnaW5cIiApIHtcblx0XHRcdHZhbCArPSBqUXVlcnkuY3NzKCBlbGVtLCBleHRyYSArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XHR9XG5cblx0XHRpZiAoIGlzQm9yZGVyQm94ICkge1xuXHRcdFx0Ly8gYm9yZGVyLWJveCBpbmNsdWRlcyBwYWRkaW5nLCBzbyByZW1vdmUgaXQgaWYgd2Ugd2FudCBjb250ZW50XG5cdFx0XHRpZiAoIGV4dHJhID09PSBcImNvbnRlbnRcIiApIHtcblx0XHRcdFx0dmFsIC09IGpRdWVyeS5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBib3JkZXIgbm9yIG1hcmdpbiwgc28gcmVtb3ZlIGJvcmRlclxuXHRcdFx0aWYgKCBleHRyYSAhPT0gXCJtYXJnaW5cIiApIHtcblx0XHRcdFx0dmFsIC09IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIEF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGNvbnRlbnQsIHNvIGFkZCBwYWRkaW5nXG5cdFx0XHR2YWwgKz0galF1ZXJ5LmNzcyggZWxlbSwgXCJwYWRkaW5nXCIgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7XG5cblx0XHRcdC8vIEF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGNvbnRlbnQgbm9yIHBhZGRpbmcsIHNvIGFkZCBib3JkZXJcblx0XHRcdGlmICggZXh0cmEgIT09IFwicGFkZGluZ1wiICkge1xuXHRcdFx0XHR2YWwgKz0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3JkZXJcIiArIGNzc0V4cGFuZFsgaSBdICsgXCJXaWR0aFwiLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdmFsO1xufVxuXG5mdW5jdGlvbiBnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSApIHtcblxuXHQvLyBTdGFydCB3aXRoIG9mZnNldCBwcm9wZXJ0eSwgd2hpY2ggaXMgZXF1aXZhbGVudCB0byB0aGUgYm9yZGVyLWJveCB2YWx1ZVxuXHR2YXIgdmFsdWVJc0JvcmRlckJveCA9IHRydWUsXG5cdFx0dmFsID0gbmFtZSA9PT0gXCJ3aWR0aFwiID8gZWxlbS5vZmZzZXRXaWR0aCA6IGVsZW0ub2Zmc2V0SGVpZ2h0LFxuXHRcdHN0eWxlcyA9IGdldFN0eWxlcyggZWxlbSApLFxuXHRcdGlzQm9yZGVyQm94ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3hTaXppbmdcIiwgZmFsc2UsIHN0eWxlcyApID09PSBcImJvcmRlci1ib3hcIjtcblxuXHQvLyBTb21lIG5vbi1odG1sIGVsZW1lbnRzIHJldHVybiB1bmRlZmluZWQgZm9yIG9mZnNldFdpZHRoLCBzbyBjaGVjayBmb3IgbnVsbC91bmRlZmluZWRcblx0Ly8gc3ZnIC0gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NjQ5Mjg1XG5cdC8vIE1hdGhNTCAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTQ5MTY2OFxuXHRpZiAoIHZhbCA8PSAwIHx8IHZhbCA9PSBudWxsICkge1xuXHRcdC8vIEZhbGwgYmFjayB0byBjb21wdXRlZCB0aGVuIHVuY29tcHV0ZWQgY3NzIGlmIG5lY2Vzc2FyeVxuXHRcdHZhbCA9IGN1ckNTUyggZWxlbSwgbmFtZSwgc3R5bGVzICk7XG5cdFx0aWYgKCB2YWwgPCAwIHx8IHZhbCA9PSBudWxsICkge1xuXHRcdFx0dmFsID0gZWxlbS5zdHlsZVsgbmFtZSBdO1xuXHRcdH1cblxuXHRcdC8vIENvbXB1dGVkIHVuaXQgaXMgbm90IHBpeGVscy4gU3RvcCBoZXJlIGFuZCByZXR1cm4uXG5cdFx0aWYgKCBybnVtbm9ucHgudGVzdCh2YWwpICkge1xuXHRcdFx0cmV0dXJuIHZhbDtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBmb3Igc3R5bGUgaW4gY2FzZSBhIGJyb3dzZXIgd2hpY2ggcmV0dXJucyB1bnJlbGlhYmxlIHZhbHVlc1xuXHRcdC8vIGZvciBnZXRDb21wdXRlZFN0eWxlIHNpbGVudGx5IGZhbGxzIGJhY2sgdG8gdGhlIHJlbGlhYmxlIGVsZW0uc3R5bGVcblx0XHR2YWx1ZUlzQm9yZGVyQm94ID0gaXNCb3JkZXJCb3ggJiZcblx0XHRcdCggc3VwcG9ydC5ib3hTaXppbmdSZWxpYWJsZSgpIHx8IHZhbCA9PT0gZWxlbS5zdHlsZVsgbmFtZSBdICk7XG5cblx0XHQvLyBOb3JtYWxpemUgXCJcIiwgYXV0bywgYW5kIHByZXBhcmUgZm9yIGV4dHJhXG5cdFx0dmFsID0gcGFyc2VGbG9hdCggdmFsICkgfHwgMDtcblx0fVxuXG5cdC8vIFVzZSB0aGUgYWN0aXZlIGJveC1zaXppbmcgbW9kZWwgdG8gYWRkL3N1YnRyYWN0IGlycmVsZXZhbnQgc3R5bGVzXG5cdHJldHVybiAoIHZhbCArXG5cdFx0YXVnbWVudFdpZHRoT3JIZWlnaHQoXG5cdFx0XHRlbGVtLFxuXHRcdFx0bmFtZSxcblx0XHRcdGV4dHJhIHx8ICggaXNCb3JkZXJCb3ggPyBcImJvcmRlclwiIDogXCJjb250ZW50XCIgKSxcblx0XHRcdHZhbHVlSXNCb3JkZXJCb3gsXG5cdFx0XHRzdHlsZXNcblx0XHQpXG5cdCkgKyBcInB4XCI7XG59XG5cbmZ1bmN0aW9uIHNob3dIaWRlKCBlbGVtZW50cywgc2hvdyApIHtcblx0dmFyIGRpc3BsYXksIGVsZW0sIGhpZGRlbixcblx0XHR2YWx1ZXMgPSBbXSxcblx0XHRpbmRleCA9IDAsXG5cdFx0bGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoO1xuXG5cdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0ZWxlbSA9IGVsZW1lbnRzWyBpbmRleCBdO1xuXHRcdGlmICggIWVsZW0uc3R5bGUgKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHR2YWx1ZXNbIGluZGV4IF0gPSBkYXRhX3ByaXYuZ2V0KCBlbGVtLCBcIm9sZGRpc3BsYXlcIiApO1xuXHRcdGRpc3BsYXkgPSBlbGVtLnN0eWxlLmRpc3BsYXk7XG5cdFx0aWYgKCBzaG93ICkge1xuXHRcdFx0Ly8gUmVzZXQgdGhlIGlubGluZSBkaXNwbGF5IG9mIHRoaXMgZWxlbWVudCB0byBsZWFybiBpZiBpdCBpc1xuXHRcdFx0Ly8gYmVpbmcgaGlkZGVuIGJ5IGNhc2NhZGVkIHJ1bGVzIG9yIG5vdFxuXHRcdFx0aWYgKCAhdmFsdWVzWyBpbmRleCBdICYmIGRpc3BsYXkgPT09IFwibm9uZVwiICkge1xuXHRcdFx0XHRlbGVtLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZXQgZWxlbWVudHMgd2hpY2ggaGF2ZSBiZWVuIG92ZXJyaWRkZW4gd2l0aCBkaXNwbGF5OiBub25lXG5cdFx0XHQvLyBpbiBhIHN0eWxlc2hlZXQgdG8gd2hhdGV2ZXIgdGhlIGRlZmF1bHQgYnJvd3NlciBzdHlsZSBpc1xuXHRcdFx0Ly8gZm9yIHN1Y2ggYW4gZWxlbWVudFxuXHRcdFx0aWYgKCBlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwiXCIgJiYgaXNIaWRkZW4oIGVsZW0gKSApIHtcblx0XHRcdFx0dmFsdWVzWyBpbmRleCBdID0gZGF0YV9wcml2LmFjY2VzcyggZWxlbSwgXCJvbGRkaXNwbGF5XCIsIGRlZmF1bHREaXNwbGF5KGVsZW0ubm9kZU5hbWUpICk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGhpZGRlbiA9IGlzSGlkZGVuKCBlbGVtICk7XG5cblx0XHRcdGlmICggZGlzcGxheSAhPT0gXCJub25lXCIgfHwgIWhpZGRlbiApIHtcblx0XHRcdFx0ZGF0YV9wcml2LnNldCggZWxlbSwgXCJvbGRkaXNwbGF5XCIsIGhpZGRlbiA/IGRpc3BsYXkgOiBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gU2V0IHRoZSBkaXNwbGF5IG9mIG1vc3Qgb2YgdGhlIGVsZW1lbnRzIGluIGEgc2Vjb25kIGxvb3Bcblx0Ly8gdG8gYXZvaWQgdGhlIGNvbnN0YW50IHJlZmxvd1xuXHRmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdGVsZW0gPSBlbGVtZW50c1sgaW5kZXggXTtcblx0XHRpZiAoICFlbGVtLnN0eWxlICkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdGlmICggIXNob3cgfHwgZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIiB8fCBlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwiXCIgKSB7XG5cdFx0XHRlbGVtLnN0eWxlLmRpc3BsYXkgPSBzaG93ID8gdmFsdWVzWyBpbmRleCBdIHx8IFwiXCIgOiBcIm5vbmVcIjtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZWxlbWVudHM7XG59XG5cbmpRdWVyeS5leHRlbmQoe1xuXG5cdC8vIEFkZCBpbiBzdHlsZSBwcm9wZXJ0eSBob29rcyBmb3Igb3ZlcnJpZGluZyB0aGUgZGVmYXVsdFxuXHQvLyBiZWhhdmlvciBvZiBnZXR0aW5nIGFuZCBzZXR0aW5nIGEgc3R5bGUgcHJvcGVydHlcblx0Y3NzSG9va3M6IHtcblx0XHRvcGFjaXR5OiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRcdFx0aWYgKCBjb21wdXRlZCApIHtcblxuXHRcdFx0XHRcdC8vIFdlIHNob3VsZCBhbHdheXMgZ2V0IGEgbnVtYmVyIGJhY2sgZnJvbSBvcGFjaXR5XG5cdFx0XHRcdFx0dmFyIHJldCA9IGN1ckNTUyggZWxlbSwgXCJvcGFjaXR5XCIgKTtcblx0XHRcdFx0XHRyZXR1cm4gcmV0ID09PSBcIlwiID8gXCIxXCIgOiByZXQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0Ly8gRG9uJ3QgYXV0b21hdGljYWxseSBhZGQgXCJweFwiIHRvIHRoZXNlIHBvc3NpYmx5LXVuaXRsZXNzIHByb3BlcnRpZXNcblx0Y3NzTnVtYmVyOiB7XG5cdFx0XCJjb2x1bW5Db3VudFwiOiB0cnVlLFxuXHRcdFwiZmlsbE9wYWNpdHlcIjogdHJ1ZSxcblx0XHRcImZsZXhHcm93XCI6IHRydWUsXG5cdFx0XCJmbGV4U2hyaW5rXCI6IHRydWUsXG5cdFx0XCJmb250V2VpZ2h0XCI6IHRydWUsXG5cdFx0XCJsaW5lSGVpZ2h0XCI6IHRydWUsXG5cdFx0XCJvcGFjaXR5XCI6IHRydWUsXG5cdFx0XCJvcmRlclwiOiB0cnVlLFxuXHRcdFwib3JwaGFuc1wiOiB0cnVlLFxuXHRcdFwid2lkb3dzXCI6IHRydWUsXG5cdFx0XCJ6SW5kZXhcIjogdHJ1ZSxcblx0XHRcInpvb21cIjogdHJ1ZVxuXHR9LFxuXG5cdC8vIEFkZCBpbiBwcm9wZXJ0aWVzIHdob3NlIG5hbWVzIHlvdSB3aXNoIHRvIGZpeCBiZWZvcmVcblx0Ly8gc2V0dGluZyBvciBnZXR0aW5nIHRoZSB2YWx1ZVxuXHRjc3NQcm9wczoge1xuXHRcdFwiZmxvYXRcIjogXCJjc3NGbG9hdFwiXG5cdH0sXG5cblx0Ly8gR2V0IGFuZCBzZXQgdGhlIHN0eWxlIHByb3BlcnR5IG9uIGEgRE9NIE5vZGVcblx0c3R5bGU6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSwgZXh0cmEgKSB7XG5cblx0XHQvLyBEb24ndCBzZXQgc3R5bGVzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXNcblx0XHRpZiAoICFlbGVtIHx8IGVsZW0ubm9kZVR5cGUgPT09IDMgfHwgZWxlbS5ub2RlVHlwZSA9PT0gOCB8fCAhZWxlbS5zdHlsZSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG5hbWVcblx0XHR2YXIgcmV0LCB0eXBlLCBob29rcyxcblx0XHRcdG9yaWdOYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZSApLFxuXHRcdFx0c3R5bGUgPSBlbGVtLnN0eWxlO1xuXG5cdFx0bmFtZSA9IGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSB8fCAoIGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSA9IHZlbmRvclByb3BOYW1lKCBzdHlsZSwgb3JpZ05hbWUgKSApO1xuXG5cdFx0Ly8gR2V0cyBob29rIGZvciB0aGUgcHJlZml4ZWQgdmVyc2lvbiwgdGhlbiB1bnByZWZpeGVkIHZlcnNpb25cblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTtcblxuXHRcdC8vIENoZWNrIGlmIHdlJ3JlIHNldHRpbmcgYSB2YWx1ZVxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cblx0XHRcdC8vIENvbnZlcnQgXCIrPVwiIG9yIFwiLT1cIiB0byByZWxhdGl2ZSBudW1iZXJzICgjNzM0NSlcblx0XHRcdGlmICggdHlwZSA9PT0gXCJzdHJpbmdcIiAmJiAocmV0ID0gcnJlbE51bS5leGVjKCB2YWx1ZSApKSApIHtcblx0XHRcdFx0dmFsdWUgPSAoIHJldFsxXSArIDEgKSAqIHJldFsyXSArIHBhcnNlRmxvYXQoIGpRdWVyeS5jc3MoIGVsZW0sIG5hbWUgKSApO1xuXHRcdFx0XHQvLyBGaXhlcyBidWcgIzkyMzdcblx0XHRcdFx0dHlwZSA9IFwibnVtYmVyXCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE1ha2Ugc3VyZSB0aGF0IG51bGwgYW5kIE5hTiB2YWx1ZXMgYXJlbid0IHNldCAoIzcxMTYpXG5cdFx0XHRpZiAoIHZhbHVlID09IG51bGwgfHwgdmFsdWUgIT09IHZhbHVlICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGEgbnVtYmVyLCBhZGQgJ3B4JyB0byB0aGUgKGV4Y2VwdCBmb3IgY2VydGFpbiBDU1MgcHJvcGVydGllcylcblx0XHRcdGlmICggdHlwZSA9PT0gXCJudW1iZXJcIiAmJiAhalF1ZXJ5LmNzc051bWJlclsgb3JpZ05hbWUgXSApIHtcblx0XHRcdFx0dmFsdWUgKz0gXCJweFwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRTktMTErXG5cdFx0XHQvLyBiYWNrZ3JvdW5kLSogcHJvcHMgYWZmZWN0IG9yaWdpbmFsIGNsb25lJ3MgdmFsdWVzXG5cdFx0XHRpZiAoICFzdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZSAmJiB2YWx1ZSA9PT0gXCJcIiAmJiBuYW1lLmluZGV4T2YoIFwiYmFja2dyb3VuZFwiICkgPT09IDAgKSB7XG5cdFx0XHRcdHN0eWxlWyBuYW1lIF0gPSBcImluaGVyaXRcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCwgdXNlIHRoYXQgdmFsdWUsIG90aGVyd2lzZSBqdXN0IHNldCB0aGUgc3BlY2lmaWVkIHZhbHVlXG5cdFx0XHRpZiAoICFob29rcyB8fCAhKFwic2V0XCIgaW4gaG9va3MpIHx8ICh2YWx1ZSA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIGV4dHJhICkpICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHN0eWxlWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdH1cblxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkIGdldCB0aGUgbm9uLWNvbXB1dGVkIHZhbHVlIGZyb20gdGhlcmVcblx0XHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBmYWxzZSwgZXh0cmEgKSkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gT3RoZXJ3aXNlIGp1c3QgZ2V0IHRoZSB2YWx1ZSBmcm9tIHRoZSBzdHlsZSBvYmplY3Rcblx0XHRcdHJldHVybiBzdHlsZVsgbmFtZSBdO1xuXHRcdH1cblx0fSxcblxuXHRjc3M6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBleHRyYSwgc3R5bGVzICkge1xuXHRcdHZhciB2YWwsIG51bSwgaG9va3MsXG5cdFx0XHRvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKTtcblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHdlJ3JlIHdvcmtpbmcgd2l0aCB0aGUgcmlnaHQgbmFtZVxuXHRcdG5hbWUgPSBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gfHwgKCBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gPSB2ZW5kb3JQcm9wTmFtZSggZWxlbS5zdHlsZSwgb3JpZ05hbWUgKSApO1xuXG5cdFx0Ly8gVHJ5IHByZWZpeGVkIG5hbWUgZm9sbG93ZWQgYnkgdGhlIHVucHJlZml4ZWQgbmFtZVxuXHRcdGhvb2tzID0galF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0gfHwgalF1ZXJ5LmNzc0hvb2tzWyBvcmlnTmFtZSBdO1xuXG5cdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIGNvbXB1dGVkIHZhbHVlIGZyb20gdGhlcmVcblx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgKSB7XG5cdFx0XHR2YWwgPSBob29rcy5nZXQoIGVsZW0sIHRydWUsIGV4dHJhICk7XG5cdFx0fVxuXG5cdFx0Ly8gT3RoZXJ3aXNlLCBpZiBhIHdheSB0byBnZXQgdGhlIGNvbXB1dGVkIHZhbHVlIGV4aXN0cywgdXNlIHRoYXRcblx0XHRpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dmFsID0gY3VyQ1NTKCBlbGVtLCBuYW1lLCBzdHlsZXMgKTtcblx0XHR9XG5cblx0XHQvLyBDb252ZXJ0IFwibm9ybWFsXCIgdG8gY29tcHV0ZWQgdmFsdWVcblx0XHRpZiAoIHZhbCA9PT0gXCJub3JtYWxcIiAmJiBuYW1lIGluIGNzc05vcm1hbFRyYW5zZm9ybSApIHtcblx0XHRcdHZhbCA9IGNzc05vcm1hbFRyYW5zZm9ybVsgbmFtZSBdO1xuXHRcdH1cblxuXHRcdC8vIE1ha2UgbnVtZXJpYyBpZiBmb3JjZWQgb3IgYSBxdWFsaWZpZXIgd2FzIHByb3ZpZGVkIGFuZCB2YWwgbG9va3MgbnVtZXJpY1xuXHRcdGlmICggZXh0cmEgPT09IFwiXCIgfHwgZXh0cmEgKSB7XG5cdFx0XHRudW0gPSBwYXJzZUZsb2F0KCB2YWwgKTtcblx0XHRcdHJldHVybiBleHRyYSA9PT0gdHJ1ZSB8fCBqUXVlcnkuaXNOdW1lcmljKCBudW0gKSA/IG51bSB8fCAwIDogdmFsO1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsO1xuXHR9XG59KTtcblxualF1ZXJ5LmVhY2goWyBcImhlaWdodFwiLCBcIndpZHRoXCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdID0ge1xuXHRcdGdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkLCBleHRyYSApIHtcblx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cblx0XHRcdFx0Ly8gQ2VydGFpbiBlbGVtZW50cyBjYW4gaGF2ZSBkaW1lbnNpb24gaW5mbyBpZiB3ZSBpbnZpc2libHkgc2hvdyB0aGVtXG5cdFx0XHRcdC8vIGJ1dCBpdCBtdXN0IGhhdmUgYSBjdXJyZW50IGRpc3BsYXkgc3R5bGUgdGhhdCB3b3VsZCBiZW5lZml0XG5cdFx0XHRcdHJldHVybiByZGlzcGxheXN3YXAudGVzdCggalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSApICYmIGVsZW0ub2Zmc2V0V2lkdGggPT09IDAgP1xuXHRcdFx0XHRcdGpRdWVyeS5zd2FwKCBlbGVtLCBjc3NTaG93LCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHJldHVybiBnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSApO1xuXHRcdFx0XHRcdH0pIDpcblx0XHRcdFx0XHRnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSApO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSwgZXh0cmEgKSB7XG5cdFx0XHR2YXIgc3R5bGVzID0gZXh0cmEgJiYgZ2V0U3R5bGVzKCBlbGVtICk7XG5cdFx0XHRyZXR1cm4gc2V0UG9zaXRpdmVOdW1iZXIoIGVsZW0sIHZhbHVlLCBleHRyYSA/XG5cdFx0XHRcdGF1Z21lbnRXaWR0aE9ySGVpZ2h0KFxuXHRcdFx0XHRcdGVsZW0sXG5cdFx0XHRcdFx0bmFtZSxcblx0XHRcdFx0XHRleHRyYSxcblx0XHRcdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCBcImJveFNpemluZ1wiLCBmYWxzZSwgc3R5bGVzICkgPT09IFwiYm9yZGVyLWJveFwiLFxuXHRcdFx0XHRcdHN0eWxlc1xuXHRcdFx0XHQpIDogMFxuXHRcdFx0KTtcblx0XHR9XG5cdH07XG59KTtcblxuLy8gU3VwcG9ydDogQW5kcm9pZCAyLjNcbmpRdWVyeS5jc3NIb29rcy5tYXJnaW5SaWdodCA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5yZWxpYWJsZU1hcmdpblJpZ2h0LFxuXHRmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0aWYgKCBjb21wdXRlZCApIHtcblx0XHRcdHJldHVybiBqUXVlcnkuc3dhcCggZWxlbSwgeyBcImRpc3BsYXlcIjogXCJpbmxpbmUtYmxvY2tcIiB9LFxuXHRcdFx0XHRjdXJDU1MsIFsgZWxlbSwgXCJtYXJnaW5SaWdodFwiIF0gKTtcblx0XHR9XG5cdH1cbik7XG5cbi8vIFRoZXNlIGhvb2tzIGFyZSB1c2VkIGJ5IGFuaW1hdGUgdG8gZXhwYW5kIHByb3BlcnRpZXNcbmpRdWVyeS5lYWNoKHtcblx0bWFyZ2luOiBcIlwiLFxuXHRwYWRkaW5nOiBcIlwiLFxuXHRib3JkZXI6IFwiV2lkdGhcIlxufSwgZnVuY3Rpb24oIHByZWZpeCwgc3VmZml4ICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIHByZWZpeCArIHN1ZmZpeCBdID0ge1xuXHRcdGV4cGFuZDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0dmFyIGkgPSAwLFxuXHRcdFx0XHRleHBhbmRlZCA9IHt9LFxuXG5cdFx0XHRcdC8vIEFzc3VtZXMgYSBzaW5nbGUgbnVtYmVyIGlmIG5vdCBhIHN0cmluZ1xuXHRcdFx0XHRwYXJ0cyA9IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IHZhbHVlLnNwbGl0KFwiIFwiKSA6IFsgdmFsdWUgXTtcblxuXHRcdFx0Zm9yICggOyBpIDwgNDsgaSsrICkge1xuXHRcdFx0XHRleHBhbmRlZFsgcHJlZml4ICsgY3NzRXhwYW5kWyBpIF0gKyBzdWZmaXggXSA9XG5cdFx0XHRcdFx0cGFydHNbIGkgXSB8fCBwYXJ0c1sgaSAtIDIgXSB8fCBwYXJ0c1sgMCBdO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZXhwYW5kZWQ7XG5cdFx0fVxuXHR9O1xuXG5cdGlmICggIXJtYXJnaW4udGVzdCggcHJlZml4ICkgKSB7XG5cdFx0alF1ZXJ5LmNzc0hvb2tzWyBwcmVmaXggKyBzdWZmaXggXS5zZXQgPSBzZXRQb3NpdGl2ZU51bWJlcjtcblx0fVxufSk7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRjc3M6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgc3R5bGVzLCBsZW4sXG5cdFx0XHRcdG1hcCA9IHt9LFxuXHRcdFx0XHRpID0gMDtcblxuXHRcdFx0aWYgKCBqUXVlcnkuaXNBcnJheSggbmFtZSApICkge1xuXHRcdFx0XHRzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKTtcblx0XHRcdFx0bGVuID0gbmFtZS5sZW5ndGg7XG5cblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdFx0bWFwWyBuYW1lWyBpIF0gXSA9IGpRdWVyeS5jc3MoIGVsZW0sIG5hbWVbIGkgXSwgZmFsc2UsIHN0eWxlcyApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIG1hcDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUsIHZhbHVlICkgOlxuXHRcdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCBuYW1lICk7XG5cdFx0fSwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG5cdH0sXG5cdHNob3c6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzaG93SGlkZSggdGhpcywgdHJ1ZSApO1xuXHR9LFxuXHRoaWRlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2hvd0hpZGUoIHRoaXMgKTtcblx0fSxcblx0dG9nZ2xlOiBmdW5jdGlvbiggc3RhdGUgKSB7XG5cdFx0aWYgKCB0eXBlb2Ygc3RhdGUgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdFx0cmV0dXJuIHN0YXRlID8gdGhpcy5zaG93KCkgOiB0aGlzLmhpZGUoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBpc0hpZGRlbiggdGhpcyApICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5zaG93KCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5oaWRlKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG5cbmZ1bmN0aW9uIFR3ZWVuKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZyApIHtcblx0cmV0dXJuIG5ldyBUd2Vlbi5wcm90b3R5cGUuaW5pdCggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKTtcbn1cbmpRdWVyeS5Ud2VlbiA9IFR3ZWVuO1xuXG5Ud2Vlbi5wcm90b3R5cGUgPSB7XG5cdGNvbnN0cnVjdG9yOiBUd2Vlbixcblx0aW5pdDogZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nLCB1bml0ICkge1xuXHRcdHRoaXMuZWxlbSA9IGVsZW07XG5cdFx0dGhpcy5wcm9wID0gcHJvcDtcblx0XHR0aGlzLmVhc2luZyA9IGVhc2luZyB8fCBcInN3aW5nXCI7XG5cdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0XHR0aGlzLnN0YXJ0ID0gdGhpcy5ub3cgPSB0aGlzLmN1cigpO1xuXHRcdHRoaXMuZW5kID0gZW5kO1xuXHRcdHRoaXMudW5pdCA9IHVuaXQgfHwgKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gPyBcIlwiIDogXCJweFwiICk7XG5cdH0sXG5cdGN1cjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGhvb2tzID0gVHdlZW4ucHJvcEhvb2tzWyB0aGlzLnByb3AgXTtcblxuXHRcdHJldHVybiBob29rcyAmJiBob29rcy5nZXQgP1xuXHRcdFx0aG9va3MuZ2V0KCB0aGlzICkgOlxuXHRcdFx0VHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCggdGhpcyApO1xuXHR9LFxuXHRydW46IGZ1bmN0aW9uKCBwZXJjZW50ICkge1xuXHRcdHZhciBlYXNlZCxcblx0XHRcdGhvb2tzID0gVHdlZW4ucHJvcEhvb2tzWyB0aGlzLnByb3AgXTtcblxuXHRcdGlmICggdGhpcy5vcHRpb25zLmR1cmF0aW9uICkge1xuXHRcdFx0dGhpcy5wb3MgPSBlYXNlZCA9IGpRdWVyeS5lYXNpbmdbIHRoaXMuZWFzaW5nIF0oXG5cdFx0XHRcdHBlcmNlbnQsIHRoaXMub3B0aW9ucy5kdXJhdGlvbiAqIHBlcmNlbnQsIDAsIDEsIHRoaXMub3B0aW9ucy5kdXJhdGlvblxuXHRcdFx0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5wb3MgPSBlYXNlZCA9IHBlcmNlbnQ7XG5cdFx0fVxuXHRcdHRoaXMubm93ID0gKCB0aGlzLmVuZCAtIHRoaXMuc3RhcnQgKSAqIGVhc2VkICsgdGhpcy5zdGFydDtcblxuXHRcdGlmICggdGhpcy5vcHRpb25zLnN0ZXAgKSB7XG5cdFx0XHR0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKCB0aGlzLmVsZW0sIHRoaXMubm93LCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBob29rcyAmJiBob29rcy5zZXQgKSB7XG5cdFx0XHRob29rcy5zZXQoIHRoaXMgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0VHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LnNldCggdGhpcyApO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcztcblx0fVxufTtcblxuVHdlZW4ucHJvdG90eXBlLmluaXQucHJvdG90eXBlID0gVHdlZW4ucHJvdG90eXBlO1xuXG5Ud2Vlbi5wcm9wSG9va3MgPSB7XG5cdF9kZWZhdWx0OiB7XG5cdFx0Z2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0XHR2YXIgcmVzdWx0O1xuXG5cdFx0XHRpZiAoIHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSAhPSBudWxsICYmXG5cdFx0XHRcdCghdHdlZW4uZWxlbS5zdHlsZSB8fCB0d2Vlbi5lbGVtLnN0eWxlWyB0d2Vlbi5wcm9wIF0gPT0gbnVsbCkgKSB7XG5cdFx0XHRcdHJldHVybiB0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF07XG5cdFx0XHR9XG5cblx0XHRcdC8vIFBhc3NpbmcgYW4gZW1wdHkgc3RyaW5nIGFzIGEgM3JkIHBhcmFtZXRlciB0byAuY3NzIHdpbGwgYXV0b21hdGljYWxseVxuXHRcdFx0Ly8gYXR0ZW1wdCBhIHBhcnNlRmxvYXQgYW5kIGZhbGxiYWNrIHRvIGEgc3RyaW5nIGlmIHRoZSBwYXJzZSBmYWlscy5cblx0XHRcdC8vIFNpbXBsZSB2YWx1ZXMgc3VjaCBhcyBcIjEwcHhcIiBhcmUgcGFyc2VkIHRvIEZsb2F0O1xuXHRcdFx0Ly8gY29tcGxleCB2YWx1ZXMgc3VjaCBhcyBcInJvdGF0ZSgxcmFkKVwiIGFyZSByZXR1cm5lZCBhcy1pcy5cblx0XHRcdHJlc3VsdCA9IGpRdWVyeS5jc3MoIHR3ZWVuLmVsZW0sIHR3ZWVuLnByb3AsIFwiXCIgKTtcblx0XHRcdC8vIEVtcHR5IHN0cmluZ3MsIG51bGwsIHVuZGVmaW5lZCBhbmQgXCJhdXRvXCIgYXJlIGNvbnZlcnRlZCB0byAwLlxuXHRcdFx0cmV0dXJuICFyZXN1bHQgfHwgcmVzdWx0ID09PSBcImF1dG9cIiA/IDAgOiByZXN1bHQ7XG5cdFx0fSxcblx0XHRzZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHtcblx0XHRcdC8vIFVzZSBzdGVwIGhvb2sgZm9yIGJhY2sgY29tcGF0LlxuXHRcdFx0Ly8gVXNlIGNzc0hvb2sgaWYgaXRzIHRoZXJlLlxuXHRcdFx0Ly8gVXNlIC5zdHlsZSBpZiBhdmFpbGFibGUgYW5kIHVzZSBwbGFpbiBwcm9wZXJ0aWVzIHdoZXJlIGF2YWlsYWJsZS5cblx0XHRcdGlmICggalF1ZXJ5LmZ4LnN0ZXBbIHR3ZWVuLnByb3AgXSApIHtcblx0XHRcdFx0alF1ZXJ5LmZ4LnN0ZXBbIHR3ZWVuLnByb3AgXSggdHdlZW4gKTtcblx0XHRcdH0gZWxzZSBpZiAoIHR3ZWVuLmVsZW0uc3R5bGUgJiYgKCB0d2Vlbi5lbGVtLnN0eWxlWyBqUXVlcnkuY3NzUHJvcHNbIHR3ZWVuLnByb3AgXSBdICE9IG51bGwgfHwgalF1ZXJ5LmNzc0hvb2tzWyB0d2Vlbi5wcm9wIF0gKSApIHtcblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCB0d2Vlbi5ub3cgKyB0d2Vlbi51bml0ICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gPSB0d2Vlbi5ub3c7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG4vLyBTdXBwb3J0OiBJRTlcbi8vIFBhbmljIGJhc2VkIGFwcHJvYWNoIHRvIHNldHRpbmcgdGhpbmdzIG9uIGRpc2Nvbm5lY3RlZCBub2Rlc1xuVHdlZW4ucHJvcEhvb2tzLnNjcm9sbFRvcCA9IFR3ZWVuLnByb3BIb29rcy5zY3JvbGxMZWZ0ID0ge1xuXHRzZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHtcblx0XHRpZiAoIHR3ZWVuLmVsZW0ubm9kZVR5cGUgJiYgdHdlZW4uZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93O1xuXHRcdH1cblx0fVxufTtcblxualF1ZXJ5LmVhc2luZyA9IHtcblx0bGluZWFyOiBmdW5jdGlvbiggcCApIHtcblx0XHRyZXR1cm4gcDtcblx0fSxcblx0c3dpbmc6IGZ1bmN0aW9uKCBwICkge1xuXHRcdHJldHVybiAwLjUgLSBNYXRoLmNvcyggcCAqIE1hdGguUEkgKSAvIDI7XG5cdH1cbn07XG5cbmpRdWVyeS5meCA9IFR3ZWVuLnByb3RvdHlwZS5pbml0O1xuXG4vLyBCYWNrIENvbXBhdCA8MS44IGV4dGVuc2lvbiBwb2ludFxualF1ZXJ5LmZ4LnN0ZXAgPSB7fTtcblxuXG5cblxudmFyXG5cdGZ4Tm93LCB0aW1lcklkLFxuXHRyZnh0eXBlcyA9IC9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxcblx0cmZ4bnVtID0gbmV3IFJlZ0V4cCggXCJeKD86KFsrLV0pPXwpKFwiICsgcG51bSArIFwiKShbYS16JV0qKSRcIiwgXCJpXCIgKSxcblx0cnJ1biA9IC9xdWV1ZUhvb2tzJC8sXG5cdGFuaW1hdGlvblByZWZpbHRlcnMgPSBbIGRlZmF1bHRQcmVmaWx0ZXIgXSxcblx0dHdlZW5lcnMgPSB7XG5cdFx0XCIqXCI6IFsgZnVuY3Rpb24oIHByb3AsIHZhbHVlICkge1xuXHRcdFx0dmFyIHR3ZWVuID0gdGhpcy5jcmVhdGVUd2VlbiggcHJvcCwgdmFsdWUgKSxcblx0XHRcdFx0dGFyZ2V0ID0gdHdlZW4uY3VyKCksXG5cdFx0XHRcdHBhcnRzID0gcmZ4bnVtLmV4ZWMoIHZhbHVlICksXG5cdFx0XHRcdHVuaXQgPSBwYXJ0cyAmJiBwYXJ0c1sgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApLFxuXG5cdFx0XHRcdC8vIFN0YXJ0aW5nIHZhbHVlIGNvbXB1dGF0aW9uIGlzIHJlcXVpcmVkIGZvciBwb3RlbnRpYWwgdW5pdCBtaXNtYXRjaGVzXG5cdFx0XHRcdHN0YXJ0ID0gKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gfHwgdW5pdCAhPT0gXCJweFwiICYmICt0YXJnZXQgKSAmJlxuXHRcdFx0XHRcdHJmeG51bS5leGVjKCBqUXVlcnkuY3NzKCB0d2Vlbi5lbGVtLCBwcm9wICkgKSxcblx0XHRcdFx0c2NhbGUgPSAxLFxuXHRcdFx0XHRtYXhJdGVyYXRpb25zID0gMjA7XG5cblx0XHRcdGlmICggc3RhcnQgJiYgc3RhcnRbIDMgXSAhPT0gdW5pdCApIHtcblx0XHRcdFx0Ly8gVHJ1c3QgdW5pdHMgcmVwb3J0ZWQgYnkgalF1ZXJ5LmNzc1xuXHRcdFx0XHR1bml0ID0gdW5pdCB8fCBzdGFydFsgMyBdO1xuXG5cdFx0XHRcdC8vIE1ha2Ugc3VyZSB3ZSB1cGRhdGUgdGhlIHR3ZWVuIHByb3BlcnRpZXMgbGF0ZXIgb25cblx0XHRcdFx0cGFydHMgPSBwYXJ0cyB8fCBbXTtcblxuXHRcdFx0XHQvLyBJdGVyYXRpdmVseSBhcHByb3hpbWF0ZSBmcm9tIGEgbm9uemVybyBzdGFydGluZyBwb2ludFxuXHRcdFx0XHRzdGFydCA9ICt0YXJnZXQgfHwgMTtcblxuXHRcdFx0XHRkbyB7XG5cdFx0XHRcdFx0Ly8gSWYgcHJldmlvdXMgaXRlcmF0aW9uIHplcm9lZCBvdXQsIGRvdWJsZSB1bnRpbCB3ZSBnZXQgKnNvbWV0aGluZyouXG5cdFx0XHRcdFx0Ly8gVXNlIHN0cmluZyBmb3IgZG91Ymxpbmcgc28gd2UgZG9uJ3QgYWNjaWRlbnRhbGx5IHNlZSBzY2FsZSBhcyB1bmNoYW5nZWQgYmVsb3dcblx0XHRcdFx0XHRzY2FsZSA9IHNjYWxlIHx8IFwiLjVcIjtcblxuXHRcdFx0XHRcdC8vIEFkanVzdCBhbmQgYXBwbHlcblx0XHRcdFx0XHRzdGFydCA9IHN0YXJ0IC8gc2NhbGU7XG5cdFx0XHRcdFx0alF1ZXJ5LnN0eWxlKCB0d2Vlbi5lbGVtLCBwcm9wLCBzdGFydCArIHVuaXQgKTtcblxuXHRcdFx0XHQvLyBVcGRhdGUgc2NhbGUsIHRvbGVyYXRpbmcgemVybyBvciBOYU4gZnJvbSB0d2Vlbi5jdXIoKSxcblx0XHRcdFx0Ly8gYnJlYWsgdGhlIGxvb3AgaWYgc2NhbGUgaXMgdW5jaGFuZ2VkIG9yIHBlcmZlY3QsIG9yIGlmIHdlJ3ZlIGp1c3QgaGFkIGVub3VnaFxuXHRcdFx0XHR9IHdoaWxlICggc2NhbGUgIT09IChzY2FsZSA9IHR3ZWVuLmN1cigpIC8gdGFyZ2V0KSAmJiBzY2FsZSAhPT0gMSAmJiAtLW1heEl0ZXJhdGlvbnMgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVXBkYXRlIHR3ZWVuIHByb3BlcnRpZXNcblx0XHRcdGlmICggcGFydHMgKSB7XG5cdFx0XHRcdHN0YXJ0ID0gdHdlZW4uc3RhcnQgPSArc3RhcnQgfHwgK3RhcmdldCB8fCAwO1xuXHRcdFx0XHR0d2Vlbi51bml0ID0gdW5pdDtcblx0XHRcdFx0Ly8gSWYgYSArPS8tPSB0b2tlbiB3YXMgcHJvdmlkZWQsIHdlJ3JlIGRvaW5nIGEgcmVsYXRpdmUgYW5pbWF0aW9uXG5cdFx0XHRcdHR3ZWVuLmVuZCA9IHBhcnRzWyAxIF0gP1xuXHRcdFx0XHRcdHN0YXJ0ICsgKCBwYXJ0c1sgMSBdICsgMSApICogcGFydHNbIDIgXSA6XG5cdFx0XHRcdFx0K3BhcnRzWyAyIF07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHR9IF1cblx0fTtcblxuLy8gQW5pbWF0aW9ucyBjcmVhdGVkIHN5bmNocm9ub3VzbHkgd2lsbCBydW4gc3luY2hyb25vdXNseVxuZnVuY3Rpb24gY3JlYXRlRnhOb3coKSB7XG5cdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0ZnhOb3cgPSB1bmRlZmluZWQ7XG5cdH0pO1xuXHRyZXR1cm4gKCBmeE5vdyA9IGpRdWVyeS5ub3coKSApO1xufVxuXG4vLyBHZW5lcmF0ZSBwYXJhbWV0ZXJzIHRvIGNyZWF0ZSBhIHN0YW5kYXJkIGFuaW1hdGlvblxuZnVuY3Rpb24gZ2VuRngoIHR5cGUsIGluY2x1ZGVXaWR0aCApIHtcblx0dmFyIHdoaWNoLFxuXHRcdGkgPSAwLFxuXHRcdGF0dHJzID0geyBoZWlnaHQ6IHR5cGUgfTtcblxuXHQvLyBJZiB3ZSBpbmNsdWRlIHdpZHRoLCBzdGVwIHZhbHVlIGlzIDEgdG8gZG8gYWxsIGNzc0V4cGFuZCB2YWx1ZXMsXG5cdC8vIG90aGVyd2lzZSBzdGVwIHZhbHVlIGlzIDIgdG8gc2tpcCBvdmVyIExlZnQgYW5kIFJpZ2h0XG5cdGluY2x1ZGVXaWR0aCA9IGluY2x1ZGVXaWR0aCA/IDEgOiAwO1xuXHRmb3IgKCA7IGkgPCA0IDsgaSArPSAyIC0gaW5jbHVkZVdpZHRoICkge1xuXHRcdHdoaWNoID0gY3NzRXhwYW5kWyBpIF07XG5cdFx0YXR0cnNbIFwibWFyZ2luXCIgKyB3aGljaCBdID0gYXR0cnNbIFwicGFkZGluZ1wiICsgd2hpY2ggXSA9IHR5cGU7XG5cdH1cblxuXHRpZiAoIGluY2x1ZGVXaWR0aCApIHtcblx0XHRhdHRycy5vcGFjaXR5ID0gYXR0cnMud2lkdGggPSB0eXBlO1xuXHR9XG5cblx0cmV0dXJuIGF0dHJzO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVUd2VlbiggdmFsdWUsIHByb3AsIGFuaW1hdGlvbiApIHtcblx0dmFyIHR3ZWVuLFxuXHRcdGNvbGxlY3Rpb24gPSAoIHR3ZWVuZXJzWyBwcm9wIF0gfHwgW10gKS5jb25jYXQoIHR3ZWVuZXJzWyBcIipcIiBdICksXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoO1xuXHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdGlmICggKHR3ZWVuID0gY29sbGVjdGlvblsgaW5kZXggXS5jYWxsKCBhbmltYXRpb24sIHByb3AsIHZhbHVlICkpICkge1xuXG5cdFx0XHQvLyBXZSdyZSBkb25lIHdpdGggdGhpcyBwcm9wZXJ0eVxuXHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBkZWZhdWx0UHJlZmlsdGVyKCBlbGVtLCBwcm9wcywgb3B0cyApIHtcblx0LyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuXHR2YXIgcHJvcCwgdmFsdWUsIHRvZ2dsZSwgdHdlZW4sIGhvb2tzLCBvbGRmaXJlLCBkaXNwbGF5LCBjaGVja0Rpc3BsYXksXG5cdFx0YW5pbSA9IHRoaXMsXG5cdFx0b3JpZyA9IHt9LFxuXHRcdHN0eWxlID0gZWxlbS5zdHlsZSxcblx0XHRoaWRkZW4gPSBlbGVtLm5vZGVUeXBlICYmIGlzSGlkZGVuKCBlbGVtICksXG5cdFx0ZGF0YVNob3cgPSBkYXRhX3ByaXYuZ2V0KCBlbGVtLCBcImZ4c2hvd1wiICk7XG5cblx0Ly8gSGFuZGxlIHF1ZXVlOiBmYWxzZSBwcm9taXNlc1xuXHRpZiAoICFvcHRzLnF1ZXVlICkge1xuXHRcdGhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCBcImZ4XCIgKTtcblx0XHRpZiAoIGhvb2tzLnVucXVldWVkID09IG51bGwgKSB7XG5cdFx0XHRob29rcy51bnF1ZXVlZCA9IDA7XG5cdFx0XHRvbGRmaXJlID0gaG9va3MuZW1wdHkuZmlyZTtcblx0XHRcdGhvb2tzLmVtcHR5LmZpcmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAhaG9va3MudW5xdWV1ZWQgKSB7XG5cdFx0XHRcdFx0b2xkZmlyZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0XHRob29rcy51bnF1ZXVlZCsrO1xuXG5cdFx0YW5pbS5hbHdheXMoZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyBFbnN1cmUgdGhlIGNvbXBsZXRlIGhhbmRsZXIgaXMgY2FsbGVkIGJlZm9yZSB0aGlzIGNvbXBsZXRlc1xuXHRcdFx0YW5pbS5hbHdheXMoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGhvb2tzLnVucXVldWVkLS07XG5cdFx0XHRcdGlmICggIWpRdWVyeS5xdWV1ZSggZWxlbSwgXCJmeFwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRcdGhvb2tzLmVtcHR5LmZpcmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBIZWlnaHQvd2lkdGggb3ZlcmZsb3cgcGFzc1xuXHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgKCBcImhlaWdodFwiIGluIHByb3BzIHx8IFwid2lkdGhcIiBpbiBwcm9wcyApICkge1xuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IG5vdGhpbmcgc25lYWtzIG91dFxuXHRcdC8vIFJlY29yZCBhbGwgMyBvdmVyZmxvdyBhdHRyaWJ1dGVzIGJlY2F1c2UgSUU5LTEwIGRvIG5vdFxuXHRcdC8vIGNoYW5nZSB0aGUgb3ZlcmZsb3cgYXR0cmlidXRlIHdoZW4gb3ZlcmZsb3dYIGFuZFxuXHRcdC8vIG92ZXJmbG93WSBhcmUgc2V0IHRvIHRoZSBzYW1lIHZhbHVlXG5cdFx0b3B0cy5vdmVyZmxvdyA9IFsgc3R5bGUub3ZlcmZsb3csIHN0eWxlLm92ZXJmbG93WCwgc3R5bGUub3ZlcmZsb3dZIF07XG5cblx0XHQvLyBTZXQgZGlzcGxheSBwcm9wZXJ0eSB0byBpbmxpbmUtYmxvY2sgZm9yIGhlaWdodC93aWR0aFxuXHRcdC8vIGFuaW1hdGlvbnMgb24gaW5saW5lIGVsZW1lbnRzIHRoYXQgYXJlIGhhdmluZyB3aWR0aC9oZWlnaHQgYW5pbWF0ZWRcblx0XHRkaXNwbGF5ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKTtcblxuXHRcdC8vIFRlc3QgZGVmYXVsdCBkaXNwbGF5IGlmIGRpc3BsYXkgaXMgY3VycmVudGx5IFwibm9uZVwiXG5cdFx0Y2hlY2tEaXNwbGF5ID0gZGlzcGxheSA9PT0gXCJub25lXCIgP1xuXHRcdFx0ZGF0YV9wcml2LmdldCggZWxlbSwgXCJvbGRkaXNwbGF5XCIgKSB8fCBkZWZhdWx0RGlzcGxheSggZWxlbS5ub2RlTmFtZSApIDogZGlzcGxheTtcblxuXHRcdGlmICggY2hlY2tEaXNwbGF5ID09PSBcImlubGluZVwiICYmIGpRdWVyeS5jc3MoIGVsZW0sIFwiZmxvYXRcIiApID09PSBcIm5vbmVcIiApIHtcblx0XHRcdHN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiO1xuXHRcdH1cblx0fVxuXG5cdGlmICggb3B0cy5vdmVyZmxvdyApIHtcblx0XHRzdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG5cdFx0YW5pbS5hbHdheXMoZnVuY3Rpb24oKSB7XG5cdFx0XHRzdHlsZS5vdmVyZmxvdyA9IG9wdHMub3ZlcmZsb3dbIDAgXTtcblx0XHRcdHN0eWxlLm92ZXJmbG93WCA9IG9wdHMub3ZlcmZsb3dbIDEgXTtcblx0XHRcdHN0eWxlLm92ZXJmbG93WSA9IG9wdHMub3ZlcmZsb3dbIDIgXTtcblx0XHR9KTtcblx0fVxuXG5cdC8vIHNob3cvaGlkZSBwYXNzXG5cdGZvciAoIHByb3AgaW4gcHJvcHMgKSB7XG5cdFx0dmFsdWUgPSBwcm9wc1sgcHJvcCBdO1xuXHRcdGlmICggcmZ4dHlwZXMuZXhlYyggdmFsdWUgKSApIHtcblx0XHRcdGRlbGV0ZSBwcm9wc1sgcHJvcCBdO1xuXHRcdFx0dG9nZ2xlID0gdG9nZ2xlIHx8IHZhbHVlID09PSBcInRvZ2dsZVwiO1xuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gKCBoaWRkZW4gPyBcImhpZGVcIiA6IFwic2hvd1wiICkgKSB7XG5cblx0XHRcdFx0Ly8gSWYgdGhlcmUgaXMgZGF0YVNob3cgbGVmdCBvdmVyIGZyb20gYSBzdG9wcGVkIGhpZGUgb3Igc2hvdyBhbmQgd2UgYXJlIGdvaW5nIHRvIHByb2NlZWQgd2l0aCBzaG93LCB3ZSBzaG91bGQgcHJldGVuZCB0byBiZSBoaWRkZW5cblx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gXCJzaG93XCIgJiYgZGF0YVNob3cgJiYgZGF0YVNob3dbIHByb3AgXSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdGhpZGRlbiA9IHRydWU7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdG9yaWdbIHByb3AgXSA9IGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gfHwgalF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wICk7XG5cblx0XHQvLyBBbnkgbm9uLWZ4IHZhbHVlIHN0b3BzIHVzIGZyb20gcmVzdG9yaW5nIHRoZSBvcmlnaW5hbCBkaXNwbGF5IHZhbHVlXG5cdFx0fSBlbHNlIHtcblx0XHRcdGRpc3BsYXkgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHR9XG5cblx0aWYgKCAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoIG9yaWcgKSApIHtcblx0XHRpZiAoIGRhdGFTaG93ICkge1xuXHRcdFx0aWYgKCBcImhpZGRlblwiIGluIGRhdGFTaG93ICkge1xuXHRcdFx0XHRoaWRkZW4gPSBkYXRhU2hvdy5oaWRkZW47XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRhdGFTaG93ID0gZGF0YV9wcml2LmFjY2VzcyggZWxlbSwgXCJmeHNob3dcIiwge30gKTtcblx0XHR9XG5cblx0XHQvLyBTdG9yZSBzdGF0ZSBpZiBpdHMgdG9nZ2xlIC0gZW5hYmxlcyAuc3RvcCgpLnRvZ2dsZSgpIHRvIFwicmV2ZXJzZVwiXG5cdFx0aWYgKCB0b2dnbGUgKSB7XG5cdFx0XHRkYXRhU2hvdy5oaWRkZW4gPSAhaGlkZGVuO1xuXHRcdH1cblx0XHRpZiAoIGhpZGRlbiApIHtcblx0XHRcdGpRdWVyeSggZWxlbSApLnNob3coKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YW5pbS5kb25lKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRqUXVlcnkoIGVsZW0gKS5oaWRlKCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0YW5pbS5kb25lKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHByb3A7XG5cblx0XHRcdGRhdGFfcHJpdi5yZW1vdmUoIGVsZW0sIFwiZnhzaG93XCIgKTtcblx0XHRcdGZvciAoIHByb3AgaW4gb3JpZyApIHtcblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wLCBvcmlnWyBwcm9wIF0gKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRmb3IgKCBwcm9wIGluIG9yaWcgKSB7XG5cdFx0XHR0d2VlbiA9IGNyZWF0ZVR3ZWVuKCBoaWRkZW4gPyBkYXRhU2hvd1sgcHJvcCBdIDogMCwgcHJvcCwgYW5pbSApO1xuXG5cdFx0XHRpZiAoICEoIHByb3AgaW4gZGF0YVNob3cgKSApIHtcblx0XHRcdFx0ZGF0YVNob3dbIHByb3AgXSA9IHR3ZWVuLnN0YXJ0O1xuXHRcdFx0XHRpZiAoIGhpZGRlbiApIHtcblx0XHRcdFx0XHR0d2Vlbi5lbmQgPSB0d2Vlbi5zdGFydDtcblx0XHRcdFx0XHR0d2Vlbi5zdGFydCA9IHByb3AgPT09IFwid2lkdGhcIiB8fCBwcm9wID09PSBcImhlaWdodFwiID8gMSA6IDA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0Ly8gSWYgdGhpcyBpcyBhIG5vb3AgbGlrZSAuaGlkZSgpLmhpZGUoKSwgcmVzdG9yZSBhbiBvdmVyd3JpdHRlbiBkaXNwbGF5IHZhbHVlXG5cdH0gZWxzZSBpZiAoIChkaXNwbGF5ID09PSBcIm5vbmVcIiA/IGRlZmF1bHREaXNwbGF5KCBlbGVtLm5vZGVOYW1lICkgOiBkaXNwbGF5KSA9PT0gXCJpbmxpbmVcIiApIHtcblx0XHRzdHlsZS5kaXNwbGF5ID0gZGlzcGxheTtcblx0fVxufVxuXG5mdW5jdGlvbiBwcm9wRmlsdGVyKCBwcm9wcywgc3BlY2lhbEVhc2luZyApIHtcblx0dmFyIGluZGV4LCBuYW1lLCBlYXNpbmcsIHZhbHVlLCBob29rcztcblxuXHQvLyBjYW1lbENhc2UsIHNwZWNpYWxFYXNpbmcgYW5kIGV4cGFuZCBjc3NIb29rIHBhc3Ncblx0Zm9yICggaW5kZXggaW4gcHJvcHMgKSB7XG5cdFx0bmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIGluZGV4ICk7XG5cdFx0ZWFzaW5nID0gc3BlY2lhbEVhc2luZ1sgbmFtZSBdO1xuXHRcdHZhbHVlID0gcHJvcHNbIGluZGV4IF07XG5cdFx0aWYgKCBqUXVlcnkuaXNBcnJheSggdmFsdWUgKSApIHtcblx0XHRcdGVhc2luZyA9IHZhbHVlWyAxIF07XG5cdFx0XHR2YWx1ZSA9IHByb3BzWyBpbmRleCBdID0gdmFsdWVbIDAgXTtcblx0XHR9XG5cblx0XHRpZiAoIGluZGV4ICE9PSBuYW1lICkge1xuXHRcdFx0cHJvcHNbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0ZGVsZXRlIHByb3BzWyBpbmRleCBdO1xuXHRcdH1cblxuXHRcdGhvb2tzID0galF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF07XG5cdFx0aWYgKCBob29rcyAmJiBcImV4cGFuZFwiIGluIGhvb2tzICkge1xuXHRcdFx0dmFsdWUgPSBob29rcy5leHBhbmQoIHZhbHVlICk7XG5cdFx0XHRkZWxldGUgcHJvcHNbIG5hbWUgXTtcblxuXHRcdFx0Ly8gTm90IHF1aXRlICQuZXh0ZW5kLCB0aGlzIHdvbid0IG92ZXJ3cml0ZSBleGlzdGluZyBrZXlzLlxuXHRcdFx0Ly8gUmV1c2luZyAnaW5kZXgnIGJlY2F1c2Ugd2UgaGF2ZSB0aGUgY29ycmVjdCBcIm5hbWVcIlxuXHRcdFx0Zm9yICggaW5kZXggaW4gdmFsdWUgKSB7XG5cdFx0XHRcdGlmICggISggaW5kZXggaW4gcHJvcHMgKSApIHtcblx0XHRcdFx0XHRwcm9wc1sgaW5kZXggXSA9IHZhbHVlWyBpbmRleCBdO1xuXHRcdFx0XHRcdHNwZWNpYWxFYXNpbmdbIGluZGV4IF0gPSBlYXNpbmc7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0c3BlY2lhbEVhc2luZ1sgbmFtZSBdID0gZWFzaW5nO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBBbmltYXRpb24oIGVsZW0sIHByb3BlcnRpZXMsIG9wdGlvbnMgKSB7XG5cdHZhciByZXN1bHQsXG5cdFx0c3RvcHBlZCxcblx0XHRpbmRleCA9IDAsXG5cdFx0bGVuZ3RoID0gYW5pbWF0aW9uUHJlZmlsdGVycy5sZW5ndGgsXG5cdFx0ZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gRG9uJ3QgbWF0Y2ggZWxlbSBpbiB0aGUgOmFuaW1hdGVkIHNlbGVjdG9yXG5cdFx0XHRkZWxldGUgdGljay5lbGVtO1xuXHRcdH0pLFxuXHRcdHRpY2sgPSBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGN1cnJlbnRUaW1lID0gZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcblx0XHRcdFx0cmVtYWluaW5nID0gTWF0aC5tYXgoIDAsIGFuaW1hdGlvbi5zdGFydFRpbWUgKyBhbmltYXRpb24uZHVyYXRpb24gLSBjdXJyZW50VGltZSApLFxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDIuM1xuXHRcdFx0XHQvLyBBcmNoYWljIGNyYXNoIGJ1ZyB3b24ndCBhbGxvdyB1cyB0byB1c2UgYDEgLSAoIDAuNSB8fCAwIClgICgjMTI0OTcpXG5cdFx0XHRcdHRlbXAgPSByZW1haW5pbmcgLyBhbmltYXRpb24uZHVyYXRpb24gfHwgMCxcblx0XHRcdFx0cGVyY2VudCA9IDEgLSB0ZW1wLFxuXHRcdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRcdGxlbmd0aCA9IGFuaW1hdGlvbi50d2VlbnMubGVuZ3RoO1xuXG5cdFx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcblx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIHBlcmNlbnQgKTtcblx0XHRcdH1cblxuXHRcdFx0ZGVmZXJyZWQubm90aWZ5V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIHBlcmNlbnQsIHJlbWFpbmluZyBdKTtcblxuXHRcdFx0aWYgKCBwZXJjZW50IDwgMSAmJiBsZW5ndGggKSB7XG5cdFx0XHRcdHJldHVybiByZW1haW5pbmc7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24gXSApO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRhbmltYXRpb24gPSBkZWZlcnJlZC5wcm9taXNlKHtcblx0XHRcdGVsZW06IGVsZW0sXG5cdFx0XHRwcm9wczogalF1ZXJ5LmV4dGVuZCgge30sIHByb3BlcnRpZXMgKSxcblx0XHRcdG9wdHM6IGpRdWVyeS5leHRlbmQoIHRydWUsIHsgc3BlY2lhbEVhc2luZzoge30gfSwgb3B0aW9ucyApLFxuXHRcdFx0b3JpZ2luYWxQcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLFxuXHRcdFx0b3JpZ2luYWxPcHRpb25zOiBvcHRpb25zLFxuXHRcdFx0c3RhcnRUaW1lOiBmeE5vdyB8fCBjcmVhdGVGeE5vdygpLFxuXHRcdFx0ZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb24sXG5cdFx0XHR0d2VlbnM6IFtdLFxuXHRcdFx0Y3JlYXRlVHdlZW46IGZ1bmN0aW9uKCBwcm9wLCBlbmQgKSB7XG5cdFx0XHRcdHZhciB0d2VlbiA9IGpRdWVyeS5Ud2VlbiggZWxlbSwgYW5pbWF0aW9uLm9wdHMsIHByb3AsIGVuZCxcblx0XHRcdFx0XHRcdGFuaW1hdGlvbi5vcHRzLnNwZWNpYWxFYXNpbmdbIHByb3AgXSB8fCBhbmltYXRpb24ub3B0cy5lYXNpbmcgKTtcblx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVucy5wdXNoKCB0d2VlbiApO1xuXHRcdFx0XHRyZXR1cm4gdHdlZW47XG5cdFx0XHR9LFxuXHRcdFx0c3RvcDogZnVuY3Rpb24oIGdvdG9FbmQgKSB7XG5cdFx0XHRcdHZhciBpbmRleCA9IDAsXG5cdFx0XHRcdFx0Ly8gSWYgd2UgYXJlIGdvaW5nIHRvIHRoZSBlbmQsIHdlIHdhbnQgdG8gcnVuIGFsbCB0aGUgdHdlZW5zXG5cdFx0XHRcdFx0Ly8gb3RoZXJ3aXNlIHdlIHNraXAgdGhpcyBwYXJ0XG5cdFx0XHRcdFx0bGVuZ3RoID0gZ290b0VuZCA/IGFuaW1hdGlvbi50d2VlbnMubGVuZ3RoIDogMDtcblx0XHRcdFx0aWYgKCBzdG9wcGVkICkge1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHN0b3BwZWQgPSB0cnVlO1xuXHRcdFx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcblx0XHRcdFx0XHRhbmltYXRpb24udHdlZW5zWyBpbmRleCBdLnJ1biggMSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVzb2x2ZSB3aGVuIHdlIHBsYXllZCB0aGUgbGFzdCBmcmFtZTsgb3RoZXJ3aXNlLCByZWplY3Rcblx0XHRcdFx0aWYgKCBnb3RvRW5kICkge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgZ290b0VuZCBdICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIGdvdG9FbmQgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fVxuXHRcdH0pLFxuXHRcdHByb3BzID0gYW5pbWF0aW9uLnByb3BzO1xuXG5cdHByb3BGaWx0ZXIoIHByb3BzLCBhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nICk7XG5cblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7XG5cdFx0cmVzdWx0ID0gYW5pbWF0aW9uUHJlZmlsdGVyc1sgaW5kZXggXS5jYWxsKCBhbmltYXRpb24sIGVsZW0sIHByb3BzLCBhbmltYXRpb24ub3B0cyApO1xuXHRcdGlmICggcmVzdWx0ICkge1xuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cdH1cblxuXHRqUXVlcnkubWFwKCBwcm9wcywgY3JlYXRlVHdlZW4sIGFuaW1hdGlvbiApO1xuXG5cdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGFuaW1hdGlvbi5vcHRzLnN0YXJ0ICkgKSB7XG5cdFx0YW5pbWF0aW9uLm9wdHMuc3RhcnQuY2FsbCggZWxlbSwgYW5pbWF0aW9uICk7XG5cdH1cblxuXHRqUXVlcnkuZngudGltZXIoXG5cdFx0alF1ZXJ5LmV4dGVuZCggdGljaywge1xuXHRcdFx0ZWxlbTogZWxlbSxcblx0XHRcdGFuaW06IGFuaW1hdGlvbixcblx0XHRcdHF1ZXVlOiBhbmltYXRpb24ub3B0cy5xdWV1ZVxuXHRcdH0pXG5cdCk7XG5cblx0Ly8gYXR0YWNoIGNhbGxiYWNrcyBmcm9tIG9wdGlvbnNcblx0cmV0dXJuIGFuaW1hdGlvbi5wcm9ncmVzcyggYW5pbWF0aW9uLm9wdHMucHJvZ3Jlc3MgKVxuXHRcdC5kb25lKCBhbmltYXRpb24ub3B0cy5kb25lLCBhbmltYXRpb24ub3B0cy5jb21wbGV0ZSApXG5cdFx0LmZhaWwoIGFuaW1hdGlvbi5vcHRzLmZhaWwgKVxuXHRcdC5hbHdheXMoIGFuaW1hdGlvbi5vcHRzLmFsd2F5cyApO1xufVxuXG5qUXVlcnkuQW5pbWF0aW9uID0galF1ZXJ5LmV4dGVuZCggQW5pbWF0aW9uLCB7XG5cblx0dHdlZW5lcjogZnVuY3Rpb24oIHByb3BzLCBjYWxsYmFjayApIHtcblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBwcm9wcyApICkge1xuXHRcdFx0Y2FsbGJhY2sgPSBwcm9wcztcblx0XHRcdHByb3BzID0gWyBcIipcIiBdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRwcm9wcyA9IHByb3BzLnNwbGl0KFwiIFwiKTtcblx0XHR9XG5cblx0XHR2YXIgcHJvcCxcblx0XHRcdGluZGV4ID0gMCxcblx0XHRcdGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcblxuXHRcdGZvciAoIDsgaW5kZXggPCBsZW5ndGggOyBpbmRleCsrICkge1xuXHRcdFx0cHJvcCA9IHByb3BzWyBpbmRleCBdO1xuXHRcdFx0dHdlZW5lcnNbIHByb3AgXSA9IHR3ZWVuZXJzWyBwcm9wIF0gfHwgW107XG5cdFx0XHR0d2VlbmVyc1sgcHJvcCBdLnVuc2hpZnQoIGNhbGxiYWNrICk7XG5cdFx0fVxuXHR9LFxuXG5cdHByZWZpbHRlcjogZnVuY3Rpb24oIGNhbGxiYWNrLCBwcmVwZW5kICkge1xuXHRcdGlmICggcHJlcGVuZCApIHtcblx0XHRcdGFuaW1hdGlvblByZWZpbHRlcnMudW5zaGlmdCggY2FsbGJhY2sgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YW5pbWF0aW9uUHJlZmlsdGVycy5wdXNoKCBjYWxsYmFjayApO1xuXHRcdH1cblx0fVxufSk7XG5cbmpRdWVyeS5zcGVlZCA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBmbiApIHtcblx0dmFyIG9wdCA9IHNwZWVkICYmIHR5cGVvZiBzcGVlZCA9PT0gXCJvYmplY3RcIiA/IGpRdWVyeS5leHRlbmQoIHt9LCBzcGVlZCApIDoge1xuXHRcdGNvbXBsZXRlOiBmbiB8fCAhZm4gJiYgZWFzaW5nIHx8XG5cdFx0XHRqUXVlcnkuaXNGdW5jdGlvbiggc3BlZWQgKSAmJiBzcGVlZCxcblx0XHRkdXJhdGlvbjogc3BlZWQsXG5cdFx0ZWFzaW5nOiBmbiAmJiBlYXNpbmcgfHwgZWFzaW5nICYmICFqUXVlcnkuaXNGdW5jdGlvbiggZWFzaW5nICkgJiYgZWFzaW5nXG5cdH07XG5cblx0b3B0LmR1cmF0aW9uID0galF1ZXJ5LmZ4Lm9mZiA/IDAgOiB0eXBlb2Ygb3B0LmR1cmF0aW9uID09PSBcIm51bWJlclwiID8gb3B0LmR1cmF0aW9uIDpcblx0XHRvcHQuZHVyYXRpb24gaW4galF1ZXJ5LmZ4LnNwZWVkcyA/IGpRdWVyeS5meC5zcGVlZHNbIG9wdC5kdXJhdGlvbiBdIDogalF1ZXJ5LmZ4LnNwZWVkcy5fZGVmYXVsdDtcblxuXHQvLyBOb3JtYWxpemUgb3B0LnF1ZXVlIC0gdHJ1ZS91bmRlZmluZWQvbnVsbCAtPiBcImZ4XCJcblx0aWYgKCBvcHQucXVldWUgPT0gbnVsbCB8fCBvcHQucXVldWUgPT09IHRydWUgKSB7XG5cdFx0b3B0LnF1ZXVlID0gXCJmeFwiO1xuXHR9XG5cblx0Ly8gUXVldWVpbmdcblx0b3B0Lm9sZCA9IG9wdC5jb21wbGV0ZTtcblxuXHRvcHQuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBvcHQub2xkICkgKSB7XG5cdFx0XHRvcHQub2xkLmNhbGwoIHRoaXMgKTtcblx0XHR9XG5cblx0XHRpZiAoIG9wdC5xdWV1ZSApIHtcblx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCBvcHQucXVldWUgKTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIG9wdDtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRmYWRlVG86IGZ1bmN0aW9uKCBzcGVlZCwgdG8sIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cblx0XHQvLyBTaG93IGFueSBoaWRkZW4gZWxlbWVudHMgYWZ0ZXIgc2V0dGluZyBvcGFjaXR5IHRvIDBcblx0XHRyZXR1cm4gdGhpcy5maWx0ZXIoIGlzSGlkZGVuICkuY3NzKCBcIm9wYWNpdHlcIiwgMCApLnNob3coKVxuXG5cdFx0XHQvLyBBbmltYXRlIHRvIHRoZSB2YWx1ZSBzcGVjaWZpZWRcblx0XHRcdC5lbmQoKS5hbmltYXRlKHsgb3BhY2l0eTogdG8gfSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fSxcblx0YW5pbWF0ZTogZnVuY3Rpb24oIHByb3AsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXHRcdHZhciBlbXB0eSA9IGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBwcm9wICksXG5cdFx0XHRvcHRhbGwgPSBqUXVlcnkuc3BlZWQoIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICksXG5cdFx0XHRkb0FuaW1hdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQvLyBPcGVyYXRlIG9uIGEgY29weSBvZiBwcm9wIHNvIHBlci1wcm9wZXJ0eSBlYXNpbmcgd29uJ3QgYmUgbG9zdFxuXHRcdFx0XHR2YXIgYW5pbSA9IEFuaW1hdGlvbiggdGhpcywgalF1ZXJ5LmV4dGVuZCgge30sIHByb3AgKSwgb3B0YWxsICk7XG5cblx0XHRcdFx0Ly8gRW1wdHkgYW5pbWF0aW9ucywgb3IgZmluaXNoaW5nIHJlc29sdmVzIGltbWVkaWF0ZWx5XG5cdFx0XHRcdGlmICggZW1wdHkgfHwgZGF0YV9wcml2LmdldCggdGhpcywgXCJmaW5pc2hcIiApICkge1xuXHRcdFx0XHRcdGFuaW0uc3RvcCggdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0ZG9BbmltYXRpb24uZmluaXNoID0gZG9BbmltYXRpb247XG5cblx0XHRyZXR1cm4gZW1wdHkgfHwgb3B0YWxsLnF1ZXVlID09PSBmYWxzZSA/XG5cdFx0XHR0aGlzLmVhY2goIGRvQW5pbWF0aW9uICkgOlxuXHRcdFx0dGhpcy5xdWV1ZSggb3B0YWxsLnF1ZXVlLCBkb0FuaW1hdGlvbiApO1xuXHR9LFxuXHRzdG9wOiBmdW5jdGlvbiggdHlwZSwgY2xlYXJRdWV1ZSwgZ290b0VuZCApIHtcblx0XHR2YXIgc3RvcFF1ZXVlID0gZnVuY3Rpb24oIGhvb2tzICkge1xuXHRcdFx0dmFyIHN0b3AgPSBob29rcy5zdG9wO1xuXHRcdFx0ZGVsZXRlIGhvb2tzLnN0b3A7XG5cdFx0XHRzdG9wKCBnb3RvRW5kICk7XG5cdFx0fTtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRnb3RvRW5kID0gY2xlYXJRdWV1ZTtcblx0XHRcdGNsZWFyUXVldWUgPSB0eXBlO1xuXHRcdFx0dHlwZSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0aWYgKCBjbGVhclF1ZXVlICYmIHR5cGUgIT09IGZhbHNlICkge1xuXHRcdFx0dGhpcy5xdWV1ZSggdHlwZSB8fCBcImZ4XCIsIFtdICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdHZhciBkZXF1ZXVlID0gdHJ1ZSxcblx0XHRcdFx0aW5kZXggPSB0eXBlICE9IG51bGwgJiYgdHlwZSArIFwicXVldWVIb29rc1wiLFxuXHRcdFx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzLFxuXHRcdFx0XHRkYXRhID0gZGF0YV9wcml2LmdldCggdGhpcyApO1xuXG5cdFx0XHRpZiAoIGluZGV4ICkge1xuXHRcdFx0XHRpZiAoIGRhdGFbIGluZGV4IF0gJiYgZGF0YVsgaW5kZXggXS5zdG9wICkge1xuXHRcdFx0XHRcdHN0b3BRdWV1ZSggZGF0YVsgaW5kZXggXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKCBpbmRleCBpbiBkYXRhICkge1xuXHRcdFx0XHRcdGlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgJiYgcnJ1bi50ZXN0KCBpbmRleCApICkge1xuXHRcdFx0XHRcdFx0c3RvcFF1ZXVlKCBkYXRhWyBpbmRleCBdICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGZvciAoIGluZGV4ID0gdGltZXJzLmxlbmd0aDsgaW5kZXgtLTsgKSB7XG5cdFx0XHRcdGlmICggdGltZXJzWyBpbmRleCBdLmVsZW0gPT09IHRoaXMgJiYgKHR5cGUgPT0gbnVsbCB8fCB0aW1lcnNbIGluZGV4IF0ucXVldWUgPT09IHR5cGUpICkge1xuXHRcdFx0XHRcdHRpbWVyc1sgaW5kZXggXS5hbmltLnN0b3AoIGdvdG9FbmQgKTtcblx0XHRcdFx0XHRkZXF1ZXVlID0gZmFsc2U7XG5cdFx0XHRcdFx0dGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdGFydCB0aGUgbmV4dCBpbiB0aGUgcXVldWUgaWYgdGhlIGxhc3Qgc3RlcCB3YXNuJ3QgZm9yY2VkLlxuXHRcdFx0Ly8gVGltZXJzIGN1cnJlbnRseSB3aWxsIGNhbGwgdGhlaXIgY29tcGxldGUgY2FsbGJhY2tzLCB3aGljaFxuXHRcdFx0Ly8gd2lsbCBkZXF1ZXVlIGJ1dCBvbmx5IGlmIHRoZXkgd2VyZSBnb3RvRW5kLlxuXHRcdFx0aWYgKCBkZXF1ZXVlIHx8ICFnb3RvRW5kICkge1xuXHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXHRmaW5pc2g6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdGlmICggdHlwZSAhPT0gZmFsc2UgKSB7XG5cdFx0XHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaW5kZXgsXG5cdFx0XHRcdGRhdGEgPSBkYXRhX3ByaXYuZ2V0KCB0aGlzICksXG5cdFx0XHRcdHF1ZXVlID0gZGF0YVsgdHlwZSArIFwicXVldWVcIiBdLFxuXHRcdFx0XHRob29rcyA9IGRhdGFbIHR5cGUgKyBcInF1ZXVlSG9va3NcIiBdLFxuXHRcdFx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzLFxuXHRcdFx0XHRsZW5ndGggPSBxdWV1ZSA/IHF1ZXVlLmxlbmd0aCA6IDA7XG5cblx0XHRcdC8vIEVuYWJsZSBmaW5pc2hpbmcgZmxhZyBvbiBwcml2YXRlIGRhdGFcblx0XHRcdGRhdGEuZmluaXNoID0gdHJ1ZTtcblxuXHRcdFx0Ly8gRW1wdHkgdGhlIHF1ZXVlIGZpcnN0XG5cdFx0XHRqUXVlcnkucXVldWUoIHRoaXMsIHR5cGUsIFtdICk7XG5cblx0XHRcdGlmICggaG9va3MgJiYgaG9va3Muc3RvcCApIHtcblx0XHRcdFx0aG9va3Muc3RvcC5jYWxsKCB0aGlzLCB0cnVlICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIExvb2sgZm9yIGFueSBhY3RpdmUgYW5pbWF0aW9ucywgYW5kIGZpbmlzaCB0aGVtXG5cdFx0XHRmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkge1xuXHRcdFx0XHRpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmIHRpbWVyc1sgaW5kZXggXS5xdWV1ZSA9PT0gdHlwZSApIHtcblx0XHRcdFx0XHR0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCB0cnVlICk7XG5cdFx0XHRcdFx0dGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb29rIGZvciBhbnkgYW5pbWF0aW9ucyBpbiB0aGUgb2xkIHF1ZXVlIGFuZCBmaW5pc2ggdGhlbVxuXHRcdFx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdFx0aWYgKCBxdWV1ZVsgaW5kZXggXSAmJiBxdWV1ZVsgaW5kZXggXS5maW5pc2ggKSB7XG5cdFx0XHRcdFx0cXVldWVbIGluZGV4IF0uZmluaXNoLmNhbGwoIHRoaXMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBUdXJuIG9mZiBmaW5pc2hpbmcgZmxhZ1xuXHRcdFx0ZGVsZXRlIGRhdGEuZmluaXNoO1xuXHRcdH0pO1xuXHR9XG59KTtcblxualF1ZXJ5LmVhY2goWyBcInRvZ2dsZVwiLCBcInNob3dcIiwgXCJoaWRlXCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdHZhciBjc3NGbiA9IGpRdWVyeS5mblsgbmFtZSBdO1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gc3BlZWQgPT0gbnVsbCB8fCB0eXBlb2Ygc3BlZWQgPT09IFwiYm9vbGVhblwiID9cblx0XHRcdGNzc0ZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKSA6XG5cdFx0XHR0aGlzLmFuaW1hdGUoIGdlbkZ4KCBuYW1lLCB0cnVlICksIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH07XG59KTtcblxuLy8gR2VuZXJhdGUgc2hvcnRjdXRzIGZvciBjdXN0b20gYW5pbWF0aW9uc1xualF1ZXJ5LmVhY2goe1xuXHRzbGlkZURvd246IGdlbkZ4KFwic2hvd1wiKSxcblx0c2xpZGVVcDogZ2VuRngoXCJoaWRlXCIpLFxuXHRzbGlkZVRvZ2dsZTogZ2VuRngoXCJ0b2dnbGVcIiksXG5cdGZhZGVJbjogeyBvcGFjaXR5OiBcInNob3dcIiB9LFxuXHRmYWRlT3V0OiB7IG9wYWNpdHk6IFwiaGlkZVwiIH0sXG5cdGZhZGVUb2dnbGU6IHsgb3BhY2l0eTogXCJ0b2dnbGVcIiB9XG59LCBmdW5jdGlvbiggbmFtZSwgcHJvcHMgKSB7XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiB0aGlzLmFuaW1hdGUoIHByb3BzLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApO1xuXHR9O1xufSk7XG5cbmpRdWVyeS50aW1lcnMgPSBbXTtcbmpRdWVyeS5meC50aWNrID0gZnVuY3Rpb24oKSB7XG5cdHZhciB0aW1lcixcblx0XHRpID0gMCxcblx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzO1xuXG5cdGZ4Tm93ID0galF1ZXJ5Lm5vdygpO1xuXG5cdGZvciAoIDsgaSA8IHRpbWVycy5sZW5ndGg7IGkrKyApIHtcblx0XHR0aW1lciA9IHRpbWVyc1sgaSBdO1xuXHRcdC8vIENoZWNrcyB0aGUgdGltZXIgaGFzIG5vdCBhbHJlYWR5IGJlZW4gcmVtb3ZlZFxuXHRcdGlmICggIXRpbWVyKCkgJiYgdGltZXJzWyBpIF0gPT09IHRpbWVyICkge1xuXHRcdFx0dGltZXJzLnNwbGljZSggaS0tLCAxICk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKCAhdGltZXJzLmxlbmd0aCApIHtcblx0XHRqUXVlcnkuZnguc3RvcCgpO1xuXHR9XG5cdGZ4Tm93ID0gdW5kZWZpbmVkO1xufTtcblxualF1ZXJ5LmZ4LnRpbWVyID0gZnVuY3Rpb24oIHRpbWVyICkge1xuXHRqUXVlcnkudGltZXJzLnB1c2goIHRpbWVyICk7XG5cdGlmICggdGltZXIoKSApIHtcblx0XHRqUXVlcnkuZnguc3RhcnQoKTtcblx0fSBlbHNlIHtcblx0XHRqUXVlcnkudGltZXJzLnBvcCgpO1xuXHR9XG59O1xuXG5qUXVlcnkuZnguaW50ZXJ2YWwgPSAxMztcblxualF1ZXJ5LmZ4LnN0YXJ0ID0gZnVuY3Rpb24oKSB7XG5cdGlmICggIXRpbWVySWQgKSB7XG5cdFx0dGltZXJJZCA9IHNldEludGVydmFsKCBqUXVlcnkuZngudGljaywgalF1ZXJ5LmZ4LmludGVydmFsICk7XG5cdH1cbn07XG5cbmpRdWVyeS5meC5zdG9wID0gZnVuY3Rpb24oKSB7XG5cdGNsZWFySW50ZXJ2YWwoIHRpbWVySWQgKTtcblx0dGltZXJJZCA9IG51bGw7XG59O1xuXG5qUXVlcnkuZnguc3BlZWRzID0ge1xuXHRzbG93OiA2MDAsXG5cdGZhc3Q6IDIwMCxcblx0Ly8gRGVmYXVsdCBzcGVlZFxuXHRfZGVmYXVsdDogNDAwXG59O1xuXG5cbi8vIEJhc2VkIG9mZiBvZiB0aGUgcGx1Z2luIGJ5IENsaW50IEhlbGZlcnMsIHdpdGggcGVybWlzc2lvbi5cbi8vIGh0dHA6Ly9ibGluZHNpZ25hbHMuY29tL2luZGV4LnBocC8yMDA5LzA3L2pxdWVyeS1kZWxheS9cbmpRdWVyeS5mbi5kZWxheSA9IGZ1bmN0aW9uKCB0aW1lLCB0eXBlICkge1xuXHR0aW1lID0galF1ZXJ5LmZ4ID8galF1ZXJ5LmZ4LnNwZWVkc1sgdGltZSBdIHx8IHRpbWUgOiB0aW1lO1xuXHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cblx0cmV0dXJuIHRoaXMucXVldWUoIHR5cGUsIGZ1bmN0aW9uKCBuZXh0LCBob29rcyApIHtcblx0XHR2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoIG5leHQsIHRpbWUgKTtcblx0XHRob29rcy5zdG9wID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRjbGVhclRpbWVvdXQoIHRpbWVvdXQgKTtcblx0XHR9O1xuXHR9KTtcbn07XG5cblxuKGZ1bmN0aW9uKCkge1xuXHR2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKSxcblx0XHRzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInNlbGVjdFwiICksXG5cdFx0b3B0ID0gc2VsZWN0LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcIm9wdGlvblwiICkgKTtcblxuXHRpbnB1dC50eXBlID0gXCJjaGVja2JveFwiO1xuXG5cdC8vIFN1cHBvcnQ6IGlPUzw9NS4xLCBBbmRyb2lkPD00LjIrXG5cdC8vIERlZmF1bHQgdmFsdWUgZm9yIGEgY2hlY2tib3ggc2hvdWxkIGJlIFwib25cIlxuXHRzdXBwb3J0LmNoZWNrT24gPSBpbnB1dC52YWx1ZSAhPT0gXCJcIjtcblxuXHQvLyBTdXBwb3J0OiBJRTw9MTErXG5cdC8vIE11c3QgYWNjZXNzIHNlbGVjdGVkSW5kZXggdG8gbWFrZSBkZWZhdWx0IG9wdGlvbnMgc2VsZWN0XG5cdHN1cHBvcnQub3B0U2VsZWN0ZWQgPSBvcHQuc2VsZWN0ZWQ7XG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw9Mi4zXG5cdC8vIE9wdGlvbnMgaW5zaWRlIGRpc2FibGVkIHNlbGVjdHMgYXJlIGluY29ycmVjdGx5IG1hcmtlZCBhcyBkaXNhYmxlZFxuXHRzZWxlY3QuZGlzYWJsZWQgPSB0cnVlO1xuXHRzdXBwb3J0Lm9wdERpc2FibGVkID0gIW9wdC5kaXNhYmxlZDtcblxuXHQvLyBTdXBwb3J0OiBJRTw9MTErXG5cdC8vIEFuIGlucHV0IGxvc2VzIGl0cyB2YWx1ZSBhZnRlciBiZWNvbWluZyBhIHJhZGlvXG5cdGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICk7XG5cdGlucHV0LnZhbHVlID0gXCJ0XCI7XG5cdGlucHV0LnR5cGUgPSBcInJhZGlvXCI7XG5cdHN1cHBvcnQucmFkaW9WYWx1ZSA9IGlucHV0LnZhbHVlID09PSBcInRcIjtcbn0pKCk7XG5cblxudmFyIG5vZGVIb29rLCBib29sSG9vayxcblx0YXR0ckhhbmRsZSA9IGpRdWVyeS5leHByLmF0dHJIYW5kbGU7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRhdHRyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgalF1ZXJ5LmF0dHIsIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApO1xuXHR9LFxuXG5cdHJlbW92ZUF0dHI6IGZ1bmN0aW9uKCBuYW1lICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggdGhpcywgbmFtZSApO1xuXHRcdH0pO1xuXHR9XG59KTtcblxualF1ZXJ5LmV4dGVuZCh7XG5cdGF0dHI6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSApIHtcblx0XHR2YXIgaG9va3MsIHJldCxcblx0XHRcdG5UeXBlID0gZWxlbS5ub2RlVHlwZTtcblxuXHRcdC8vIGRvbid0IGdldC9zZXQgYXR0cmlidXRlcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXNcblx0XHRpZiAoICFlbGVtIHx8IG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEZhbGxiYWNrIHRvIHByb3Agd2hlbiBhdHRyaWJ1dGVzIGFyZSBub3Qgc3VwcG9ydGVkXG5cdFx0aWYgKCB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGUgPT09IHN0cnVuZGVmaW5lZCApIHtcblx0XHRcdHJldHVybiBqUXVlcnkucHJvcCggZWxlbSwgbmFtZSwgdmFsdWUgKTtcblx0XHR9XG5cblx0XHQvLyBBbGwgYXR0cmlidXRlcyBhcmUgbG93ZXJjYXNlXG5cdFx0Ly8gR3JhYiBuZWNlc3NhcnkgaG9vayBpZiBvbmUgaXMgZGVmaW5lZFxuXHRcdGlmICggblR5cGUgIT09IDEgfHwgIWpRdWVyeS5pc1hNTERvYyggZWxlbSApICkge1xuXHRcdFx0bmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdGhvb2tzID0galF1ZXJ5LmF0dHJIb29rc1sgbmFtZSBdIHx8XG5cdFx0XHRcdCggalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC50ZXN0KCBuYW1lICkgPyBib29sSG9vayA6IG5vZGVIb29rICk7XG5cdFx0fVxuXG5cdFx0aWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRpZiAoIHZhbHVlID09PSBudWxsICkge1xuXHRcdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBob29rcyAmJiBcInNldFwiIGluIGhvb2tzICYmIChyZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkpICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBuYW1lLCB2YWx1ZSArIFwiXCIgKTtcblx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkpICE9PSBudWxsICkge1xuXHRcdFx0cmV0dXJuIHJldDtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXQgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBuYW1lICk7XG5cblx0XHRcdC8vIE5vbi1leGlzdGVudCBhdHRyaWJ1dGVzIHJldHVybiBudWxsLCB3ZSBub3JtYWxpemUgdG8gdW5kZWZpbmVkXG5cdFx0XHRyZXR1cm4gcmV0ID09IG51bGwgP1xuXHRcdFx0XHR1bmRlZmluZWQgOlxuXHRcdFx0XHRyZXQ7XG5cdFx0fVxuXHR9LFxuXG5cdHJlbW92ZUF0dHI6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHR2YXIgbmFtZSwgcHJvcE5hbWUsXG5cdFx0XHRpID0gMCxcblx0XHRcdGF0dHJOYW1lcyA9IHZhbHVlICYmIHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKTtcblxuXHRcdGlmICggYXR0ck5hbWVzICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHR3aGlsZSAoIChuYW1lID0gYXR0ck5hbWVzW2krK10pICkge1xuXHRcdFx0XHRwcm9wTmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTtcblxuXHRcdFx0XHQvLyBCb29sZWFuIGF0dHJpYnV0ZXMgZ2V0IHNwZWNpYWwgdHJlYXRtZW50ICgjMTA4NzApXG5cdFx0XHRcdGlmICggalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC50ZXN0KCBuYW1lICkgKSB7XG5cdFx0XHRcdFx0Ly8gU2V0IGNvcnJlc3BvbmRpbmcgcHJvcGVydHkgdG8gZmFsc2Vcblx0XHRcdFx0XHRlbGVtWyBwcm9wTmFtZSBdID0gZmFsc2U7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRlbGVtLnJlbW92ZUF0dHJpYnV0ZSggbmFtZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRhdHRySG9va3M6IHtcblx0XHR0eXBlOiB7XG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdFx0aWYgKCAhc3VwcG9ydC5yYWRpb1ZhbHVlICYmIHZhbHVlID09PSBcInJhZGlvXCIgJiZcblx0XHRcdFx0XHRqUXVlcnkubm9kZU5hbWUoIGVsZW0sIFwiaW5wdXRcIiApICkge1xuXHRcdFx0XHRcdHZhciB2YWwgPSBlbGVtLnZhbHVlO1xuXHRcdFx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgdmFsdWUgKTtcblx0XHRcdFx0XHRpZiAoIHZhbCApIHtcblx0XHRcdFx0XHRcdGVsZW0udmFsdWUgPSB2YWw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufSk7XG5cbi8vIEhvb2tzIGZvciBib29sZWFuIGF0dHJpYnV0ZXNcbmJvb2xIb29rID0ge1xuXHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSwgbmFtZSApIHtcblx0XHRpZiAoIHZhbHVlID09PSBmYWxzZSApIHtcblx0XHRcdC8vIFJlbW92ZSBib29sZWFuIGF0dHJpYnV0ZXMgd2hlbiBzZXQgdG8gZmFsc2Vcblx0XHRcdGpRdWVyeS5yZW1vdmVBdHRyKCBlbGVtLCBuYW1lICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lICk7XG5cdFx0fVxuXHRcdHJldHVybiBuYW1lO1xuXHR9XG59O1xualF1ZXJ5LmVhY2goIGpRdWVyeS5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKCAvXFx3Ky9nICksIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHR2YXIgZ2V0dGVyID0gYXR0ckhhbmRsZVsgbmFtZSBdIHx8IGpRdWVyeS5maW5kLmF0dHI7XG5cblx0YXR0ckhhbmRsZVsgbmFtZSBdID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdHZhciByZXQsIGhhbmRsZTtcblx0XHRpZiAoICFpc1hNTCApIHtcblx0XHRcdC8vIEF2b2lkIGFuIGluZmluaXRlIGxvb3AgYnkgdGVtcG9yYXJpbHkgcmVtb3ZpbmcgdGhpcyBmdW5jdGlvbiBmcm9tIHRoZSBnZXR0ZXJcblx0XHRcdGhhbmRsZSA9IGF0dHJIYW5kbGVbIG5hbWUgXTtcblx0XHRcdGF0dHJIYW5kbGVbIG5hbWUgXSA9IHJldDtcblx0XHRcdHJldCA9IGdldHRlciggZWxlbSwgbmFtZSwgaXNYTUwgKSAhPSBudWxsID9cblx0XHRcdFx0bmFtZS50b0xvd2VyQ2FzZSgpIDpcblx0XHRcdFx0bnVsbDtcblx0XHRcdGF0dHJIYW5kbGVbIG5hbWUgXSA9IGhhbmRsZTtcblx0XHR9XG5cdFx0cmV0dXJuIHJldDtcblx0fTtcbn0pO1xuXG5cblxuXG52YXIgcmZvY3VzYWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2k7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRwcm9wOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgalF1ZXJ5LnByb3AsIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApO1xuXHR9LFxuXG5cdHJlbW92ZVByb3A6IGZ1bmN0aW9uKCBuYW1lICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRkZWxldGUgdGhpc1sgalF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lIF07XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZXh0ZW5kKHtcblx0cHJvcEZpeDoge1xuXHRcdFwiZm9yXCI6IFwiaHRtbEZvclwiLFxuXHRcdFwiY2xhc3NcIjogXCJjbGFzc05hbWVcIlxuXHR9LFxuXG5cdHByb3A6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSApIHtcblx0XHR2YXIgcmV0LCBob29rcywgbm90eG1sLFxuXHRcdFx0blR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdFx0Ly8gRG9uJ3QgZ2V0L3NldCBwcm9wZXJ0aWVzIG9uIHRleHQsIGNvbW1lbnQgYW5kIGF0dHJpYnV0ZSBub2Rlc1xuXHRcdGlmICggIWVsZW0gfHwgblR5cGUgPT09IDMgfHwgblR5cGUgPT09IDggfHwgblR5cGUgPT09IDIgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0bm90eG1sID0gblR5cGUgIT09IDEgfHwgIWpRdWVyeS5pc1hNTERvYyggZWxlbSApO1xuXG5cdFx0aWYgKCBub3R4bWwgKSB7XG5cdFx0XHQvLyBGaXggbmFtZSBhbmQgYXR0YWNoIGhvb2tzXG5cdFx0XHRuYW1lID0galF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lO1xuXHRcdFx0aG9va3MgPSBqUXVlcnkucHJvcEhvb2tzWyBuYW1lIF07XG5cdFx0fVxuXG5cdFx0aWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0cmV0dXJuIGhvb2tzICYmIFwic2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIG5hbWUgKSkgIT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdHJldCA6XG5cdFx0XHRcdCggZWxlbVsgbmFtZSBdID0gdmFsdWUgKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkpICE9PSBudWxsID9cblx0XHRcdFx0cmV0IDpcblx0XHRcdFx0ZWxlbVsgbmFtZSBdO1xuXHRcdH1cblx0fSxcblxuXHRwcm9wSG9va3M6IHtcblx0XHR0YWJJbmRleDoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0uaGFzQXR0cmlidXRlKCBcInRhYmluZGV4XCIgKSB8fCByZm9jdXNhYmxlLnRlc3QoIGVsZW0ubm9kZU5hbWUgKSB8fCBlbGVtLmhyZWYgP1xuXHRcdFx0XHRcdGVsZW0udGFiSW5kZXggOlxuXHRcdFx0XHRcdC0xO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSk7XG5cbmlmICggIXN1cHBvcnQub3B0U2VsZWN0ZWQgKSB7XG5cdGpRdWVyeS5wcm9wSG9va3Muc2VsZWN0ZWQgPSB7XG5cdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7XG5cdFx0XHRpZiAoIHBhcmVudCAmJiBwYXJlbnQucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0cGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0fTtcbn1cblxualF1ZXJ5LmVhY2goW1xuXHRcInRhYkluZGV4XCIsXG5cdFwicmVhZE9ubHlcIixcblx0XCJtYXhMZW5ndGhcIixcblx0XCJjZWxsU3BhY2luZ1wiLFxuXHRcImNlbGxQYWRkaW5nXCIsXG5cdFwicm93U3BhblwiLFxuXHRcImNvbFNwYW5cIixcblx0XCJ1c2VNYXBcIixcblx0XCJmcmFtZUJvcmRlclwiLFxuXHRcImNvbnRlbnRFZGl0YWJsZVwiXG5dLCBmdW5jdGlvbigpIHtcblx0alF1ZXJ5LnByb3BGaXhbIHRoaXMudG9Mb3dlckNhc2UoKSBdID0gdGhpcztcbn0pO1xuXG5cblxuXG52YXIgcmNsYXNzID0gL1tcXHRcXHJcXG5cXGZdL2c7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRhZGRDbGFzczogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLFxuXHRcdFx0cHJvY2VlZCA9IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiB2YWx1ZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bGVuID0gdGhpcy5sZW5ndGg7XG5cblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaiApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuYWRkQ2xhc3MoIHZhbHVlLmNhbGwoIHRoaXMsIGosIHRoaXMuY2xhc3NOYW1lICkgKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICggcHJvY2VlZCApIHtcblx0XHRcdC8vIFRoZSBkaXNqdW5jdGlvbiBoZXJlIGlzIGZvciBiZXR0ZXIgY29tcHJlc3NpYmlsaXR5IChzZWUgcmVtb3ZlQ2xhc3MpXG5cdFx0XHRjbGFzc2VzID0gKCB2YWx1ZSB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdO1xuXG5cdFx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdFx0ZWxlbSA9IHRoaXNbIGkgXTtcblx0XHRcdFx0Y3VyID0gZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAoIGVsZW0uY2xhc3NOYW1lID9cblx0XHRcdFx0XHQoIFwiIFwiICsgZWxlbS5jbGFzc05hbWUgKyBcIiBcIiApLnJlcGxhY2UoIHJjbGFzcywgXCIgXCIgKSA6XG5cdFx0XHRcdFx0XCIgXCJcblx0XHRcdFx0KTtcblxuXHRcdFx0XHRpZiAoIGN1ciApIHtcblx0XHRcdFx0XHRqID0gMDtcblx0XHRcdFx0XHR3aGlsZSAoIChjbGF6eiA9IGNsYXNzZXNbaisrXSkgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGN1ci5pbmRleE9mKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIgKSA8IDAgKSB7XG5cdFx0XHRcdFx0XHRcdGN1ciArPSBjbGF6eiArIFwiIFwiO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIG9ubHkgYXNzaWduIGlmIGRpZmZlcmVudCB0byBhdm9pZCB1bm5lZWRlZCByZW5kZXJpbmcuXG5cdFx0XHRcdFx0ZmluYWxWYWx1ZSA9IGpRdWVyeS50cmltKCBjdXIgKTtcblx0XHRcdFx0XHRpZiAoIGVsZW0uY2xhc3NOYW1lICE9PSBmaW5hbFZhbHVlICkge1xuXHRcdFx0XHRcdFx0ZWxlbS5jbGFzc05hbWUgPSBmaW5hbFZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHJlbW92ZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0dmFyIGNsYXNzZXMsIGVsZW0sIGN1ciwgY2xhenosIGosIGZpbmFsVmFsdWUsXG5cdFx0XHRwcm9jZWVkID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMCB8fCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWUsXG5cdFx0XHRpID0gMCxcblx0XHRcdGxlbiA9IHRoaXMubGVuZ3RoO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGogKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnJlbW92ZUNsYXNzKCB2YWx1ZS5jYWxsKCB0aGlzLCBqLCB0aGlzLmNsYXNzTmFtZSApICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0aWYgKCBwcm9jZWVkICkge1xuXHRcdFx0Y2xhc3NlcyA9ICggdmFsdWUgfHwgXCJcIiApLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblxuXHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdGVsZW0gPSB0aGlzWyBpIF07XG5cdFx0XHRcdC8vIFRoaXMgZXhwcmVzc2lvbiBpcyBoZXJlIGZvciBiZXR0ZXIgY29tcHJlc3NpYmlsaXR5IChzZWUgYWRkQ2xhc3MpXG5cdFx0XHRcdGN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgKCBlbGVtLmNsYXNzTmFtZSA/XG5cdFx0XHRcdFx0KCBcIiBcIiArIGVsZW0uY2xhc3NOYW1lICsgXCIgXCIgKS5yZXBsYWNlKCByY2xhc3MsIFwiIFwiICkgOlxuXHRcdFx0XHRcdFwiXCJcblx0XHRcdFx0KTtcblxuXHRcdFx0XHRpZiAoIGN1ciApIHtcblx0XHRcdFx0XHRqID0gMDtcblx0XHRcdFx0XHR3aGlsZSAoIChjbGF6eiA9IGNsYXNzZXNbaisrXSkgKSB7XG5cdFx0XHRcdFx0XHQvLyBSZW1vdmUgKmFsbCogaW5zdGFuY2VzXG5cdFx0XHRcdFx0XHR3aGlsZSAoIGN1ci5pbmRleE9mKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIgKSA+PSAwICkge1xuXHRcdFx0XHRcdFx0XHRjdXIgPSBjdXIucmVwbGFjZSggXCIgXCIgKyBjbGF6eiArIFwiIFwiLCBcIiBcIiApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE9ubHkgYXNzaWduIGlmIGRpZmZlcmVudCB0byBhdm9pZCB1bm5lZWRlZCByZW5kZXJpbmcuXG5cdFx0XHRcdFx0ZmluYWxWYWx1ZSA9IHZhbHVlID8galF1ZXJ5LnRyaW0oIGN1ciApIDogXCJcIjtcblx0XHRcdFx0XHRpZiAoIGVsZW0uY2xhc3NOYW1lICE9PSBmaW5hbFZhbHVlICkge1xuXHRcdFx0XHRcdFx0ZWxlbS5jbGFzc05hbWUgPSBmaW5hbFZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHRvZ2dsZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUsIHN0YXRlVmFsICkge1xuXHRcdHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXG5cdFx0aWYgKCB0eXBlb2Ygc3RhdGVWYWwgPT09IFwiYm9vbGVhblwiICYmIHR5cGUgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gc3RhdGVWYWwgPyB0aGlzLmFkZENsYXNzKCB2YWx1ZSApIDogdGhpcy5yZW1vdmVDbGFzcyggdmFsdWUgKTtcblx0XHR9XG5cblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkudG9nZ2xlQ2xhc3MoIHZhbHVlLmNhbGwodGhpcywgaSwgdGhpcy5jbGFzc05hbWUsIHN0YXRlVmFsKSwgc3RhdGVWYWwgKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIHR5cGUgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdC8vIFRvZ2dsZSBpbmRpdmlkdWFsIGNsYXNzIG5hbWVzXG5cdFx0XHRcdHZhciBjbGFzc05hbWUsXG5cdFx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdFx0c2VsZiA9IGpRdWVyeSggdGhpcyApLFxuXHRcdFx0XHRcdGNsYXNzTmFtZXMgPSB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107XG5cblx0XHRcdFx0d2hpbGUgKCAoY2xhc3NOYW1lID0gY2xhc3NOYW1lc1sgaSsrIF0pICkge1xuXHRcdFx0XHRcdC8vIENoZWNrIGVhY2ggY2xhc3NOYW1lIGdpdmVuLCBzcGFjZSBzZXBhcmF0ZWQgbGlzdFxuXHRcdFx0XHRcdGlmICggc2VsZi5oYXNDbGFzcyggY2xhc3NOYW1lICkgKSB7XG5cdFx0XHRcdFx0XHRzZWxmLnJlbW92ZUNsYXNzKCBjbGFzc05hbWUgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0c2VsZi5hZGRDbGFzcyggY2xhc3NOYW1lICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdC8vIFRvZ2dsZSB3aG9sZSBjbGFzcyBuYW1lXG5cdFx0XHR9IGVsc2UgaWYgKCB0eXBlID09PSBzdHJ1bmRlZmluZWQgfHwgdHlwZSA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0XHRcdGlmICggdGhpcy5jbGFzc05hbWUgKSB7XG5cdFx0XHRcdFx0Ly8gc3RvcmUgY2xhc3NOYW1lIGlmIHNldFxuXHRcdFx0XHRcdGRhdGFfcHJpdi5zZXQoIHRoaXMsIFwiX19jbGFzc05hbWVfX1wiLCB0aGlzLmNsYXNzTmFtZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gSWYgdGhlIGVsZW1lbnQgaGFzIGEgY2xhc3MgbmFtZSBvciBpZiB3ZSdyZSBwYXNzZWQgYGZhbHNlYCxcblx0XHRcdFx0Ly8gdGhlbiByZW1vdmUgdGhlIHdob2xlIGNsYXNzbmFtZSAoaWYgdGhlcmUgd2FzIG9uZSwgdGhlIGFib3ZlIHNhdmVkIGl0KS5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGJyaW5nIGJhY2sgd2hhdGV2ZXIgd2FzIHByZXZpb3VzbHkgc2F2ZWQgKGlmIGFueXRoaW5nKSxcblx0XHRcdFx0Ly8gZmFsbGluZyBiYWNrIHRvIHRoZSBlbXB0eSBzdHJpbmcgaWYgbm90aGluZyB3YXMgc3RvcmVkLlxuXHRcdFx0XHR0aGlzLmNsYXNzTmFtZSA9IHRoaXMuY2xhc3NOYW1lIHx8IHZhbHVlID09PSBmYWxzZSA/IFwiXCIgOiBkYXRhX3ByaXYuZ2V0KCB0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiApIHx8IFwiXCI7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0aGFzQ2xhc3M6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgY2xhc3NOYW1lID0gXCIgXCIgKyBzZWxlY3RvciArIFwiIFwiLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsID0gdGhpcy5sZW5ndGg7XG5cdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0aWYgKCB0aGlzW2ldLm5vZGVUeXBlID09PSAxICYmIChcIiBcIiArIHRoaXNbaV0uY2xhc3NOYW1lICsgXCIgXCIpLnJlcGxhY2UocmNsYXNzLCBcIiBcIikuaW5kZXhPZiggY2xhc3NOYW1lICkgPj0gMCApIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59KTtcblxuXG5cblxudmFyIHJyZXR1cm4gPSAvXFxyL2c7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHR2YWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YXIgaG9va3MsIHJldCwgaXNGdW5jdGlvbixcblx0XHRcdGVsZW0gPSB0aGlzWzBdO1xuXG5cdFx0aWYgKCAhYXJndW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdGlmICggZWxlbSApIHtcblx0XHRcdFx0aG9va3MgPSBqUXVlcnkudmFsSG9va3NbIGVsZW0udHlwZSBdIHx8IGpRdWVyeS52YWxIb29rc1sgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07XG5cblx0XHRcdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmIChyZXQgPSBob29rcy5nZXQoIGVsZW0sIFwidmFsdWVcIiApKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXQgPSBlbGVtLnZhbHVlO1xuXG5cdFx0XHRcdHJldHVybiB0eXBlb2YgcmV0ID09PSBcInN0cmluZ1wiID9cblx0XHRcdFx0XHQvLyBIYW5kbGUgbW9zdCBjb21tb24gc3RyaW5nIGNhc2VzXG5cdFx0XHRcdFx0cmV0LnJlcGxhY2UocnJldHVybiwgXCJcIikgOlxuXHRcdFx0XHRcdC8vIEhhbmRsZSBjYXNlcyB3aGVyZSB2YWx1ZSBpcyBudWxsL3VuZGVmIG9yIG51bWJlclxuXHRcdFx0XHRcdHJldCA9PSBudWxsID8gXCJcIiA6IHJldDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKTtcblxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHR2YXIgdmFsO1xuXG5cdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgIT09IDEgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBpc0Z1bmN0aW9uICkge1xuXHRcdFx0XHR2YWwgPSB2YWx1ZS5jYWxsKCB0aGlzLCBpLCBqUXVlcnkoIHRoaXMgKS52YWwoKSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFsID0gdmFsdWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRyZWF0IG51bGwvdW5kZWZpbmVkIGFzIFwiXCI7IGNvbnZlcnQgbnVtYmVycyB0byBzdHJpbmdcblx0XHRcdGlmICggdmFsID09IG51bGwgKSB7XG5cdFx0XHRcdHZhbCA9IFwiXCI7XG5cblx0XHRcdH0gZWxzZSBpZiAoIHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIgKSB7XG5cdFx0XHRcdHZhbCArPSBcIlwiO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBqUXVlcnkuaXNBcnJheSggdmFsICkgKSB7XG5cdFx0XHRcdHZhbCA9IGpRdWVyeS5tYXAoIHZhbCwgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0XHRcdHJldHVybiB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICsgXCJcIjtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdGhvb2tzID0galF1ZXJ5LnZhbEhvb2tzWyB0aGlzLnR5cGUgXSB8fCBqUXVlcnkudmFsSG9va3NbIHRoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSBdO1xuXG5cdFx0XHQvLyBJZiBzZXQgcmV0dXJucyB1bmRlZmluZWQsIGZhbGwgYmFjayB0byBub3JtYWwgc2V0dGluZ1xuXHRcdFx0aWYgKCAhaG9va3MgfHwgIShcInNldFwiIGluIGhvb2tzKSB8fCBob29rcy5zZXQoIHRoaXMsIHZhbCwgXCJ2YWx1ZVwiICkgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0dGhpcy52YWx1ZSA9IHZhbDtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxufSk7XG5cbmpRdWVyeS5leHRlbmQoe1xuXHR2YWxIb29rczoge1xuXHRcdG9wdGlvbjoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIHZhbCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIFwidmFsdWVcIiApO1xuXHRcdFx0XHRyZXR1cm4gdmFsICE9IG51bGwgP1xuXHRcdFx0XHRcdHZhbCA6XG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUxMC0xMStcblx0XHRcdFx0XHQvLyBvcHRpb24udGV4dCB0aHJvd3MgZXhjZXB0aW9ucyAoIzE0Njg2LCAjMTQ4NTgpXG5cdFx0XHRcdFx0alF1ZXJ5LnRyaW0oIGpRdWVyeS50ZXh0KCBlbGVtICkgKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdHNlbGVjdDoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIHZhbHVlLCBvcHRpb24sXG5cdFx0XHRcdFx0b3B0aW9ucyA9IGVsZW0ub3B0aW9ucyxcblx0XHRcdFx0XHRpbmRleCA9IGVsZW0uc2VsZWN0ZWRJbmRleCxcblx0XHRcdFx0XHRvbmUgPSBlbGVtLnR5cGUgPT09IFwic2VsZWN0LW9uZVwiIHx8IGluZGV4IDwgMCxcblx0XHRcdFx0XHR2YWx1ZXMgPSBvbmUgPyBudWxsIDogW10sXG5cdFx0XHRcdFx0bWF4ID0gb25lID8gaW5kZXggKyAxIDogb3B0aW9ucy5sZW5ndGgsXG5cdFx0XHRcdFx0aSA9IGluZGV4IDwgMCA/XG5cdFx0XHRcdFx0XHRtYXggOlxuXHRcdFx0XHRcdFx0b25lID8gaW5kZXggOiAwO1xuXG5cdFx0XHRcdC8vIExvb3AgdGhyb3VnaCBhbGwgdGhlIHNlbGVjdGVkIG9wdGlvbnNcblx0XHRcdFx0Zm9yICggOyBpIDwgbWF4OyBpKysgKSB7XG5cdFx0XHRcdFx0b3B0aW9uID0gb3B0aW9uc1sgaSBdO1xuXG5cdFx0XHRcdFx0Ly8gSUU2LTkgZG9lc24ndCB1cGRhdGUgc2VsZWN0ZWQgYWZ0ZXIgZm9ybSByZXNldCAoIzI1NTEpXG5cdFx0XHRcdFx0aWYgKCAoIG9wdGlvbi5zZWxlY3RlZCB8fCBpID09PSBpbmRleCApICYmXG5cdFx0XHRcdFx0XHRcdC8vIERvbid0IHJldHVybiBvcHRpb25zIHRoYXQgYXJlIGRpc2FibGVkIG9yIGluIGEgZGlzYWJsZWQgb3B0Z3JvdXBcblx0XHRcdFx0XHRcdFx0KCBzdXBwb3J0Lm9wdERpc2FibGVkID8gIW9wdGlvbi5kaXNhYmxlZCA6IG9wdGlvbi5nZXRBdHRyaWJ1dGUoIFwiZGlzYWJsZWRcIiApID09PSBudWxsICkgJiZcblx0XHRcdFx0XHRcdFx0KCAhb3B0aW9uLnBhcmVudE5vZGUuZGlzYWJsZWQgfHwgIWpRdWVyeS5ub2RlTmFtZSggb3B0aW9uLnBhcmVudE5vZGUsIFwib3B0Z3JvdXBcIiApICkgKSB7XG5cblx0XHRcdFx0XHRcdC8vIEdldCB0aGUgc3BlY2lmaWMgdmFsdWUgZm9yIHRoZSBvcHRpb25cblx0XHRcdFx0XHRcdHZhbHVlID0galF1ZXJ5KCBvcHRpb24gKS52YWwoKTtcblxuXHRcdFx0XHRcdFx0Ly8gV2UgZG9uJ3QgbmVlZCBhbiBhcnJheSBmb3Igb25lIHNlbGVjdHNcblx0XHRcdFx0XHRcdGlmICggb25lICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIE11bHRpLVNlbGVjdHMgcmV0dXJuIGFuIGFycmF5XG5cdFx0XHRcdFx0XHR2YWx1ZXMucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdmFsdWVzO1xuXHRcdFx0fSxcblxuXHRcdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRcdHZhciBvcHRpb25TZXQsIG9wdGlvbixcblx0XHRcdFx0XHRvcHRpb25zID0gZWxlbS5vcHRpb25zLFxuXHRcdFx0XHRcdHZhbHVlcyA9IGpRdWVyeS5tYWtlQXJyYXkoIHZhbHVlICksXG5cdFx0XHRcdFx0aSA9IG9wdGlvbnMubGVuZ3RoO1xuXG5cdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdG9wdGlvbiA9IG9wdGlvbnNbIGkgXTtcblx0XHRcdFx0XHRpZiAoIChvcHRpb24uc2VsZWN0ZWQgPSBqUXVlcnkuaW5BcnJheSggb3B0aW9uLnZhbHVlLCB2YWx1ZXMgKSA+PSAwKSApIHtcblx0XHRcdFx0XHRcdG9wdGlvblNldCA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRm9yY2UgYnJvd3NlcnMgdG8gYmVoYXZlIGNvbnNpc3RlbnRseSB3aGVuIG5vbi1tYXRjaGluZyB2YWx1ZSBpcyBzZXRcblx0XHRcdFx0aWYgKCAhb3B0aW9uU2V0ICkge1xuXHRcdFx0XHRcdGVsZW0uc2VsZWN0ZWRJbmRleCA9IC0xO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB2YWx1ZXM7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59KTtcblxuLy8gUmFkaW9zIGFuZCBjaGVja2JveGVzIGdldHRlci9zZXR0ZXJcbmpRdWVyeS5lYWNoKFsgXCJyYWRpb1wiLCBcImNoZWNrYm94XCIgXSwgZnVuY3Rpb24oKSB7XG5cdGpRdWVyeS52YWxIb29rc1sgdGhpcyBdID0ge1xuXHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0aWYgKCBqUXVlcnkuaXNBcnJheSggdmFsdWUgKSApIHtcblx0XHRcdFx0cmV0dXJuICggZWxlbS5jaGVja2VkID0galF1ZXJ5LmluQXJyYXkoIGpRdWVyeShlbGVtKS52YWwoKSwgdmFsdWUgKSA+PSAwICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRpZiAoICFzdXBwb3J0LmNoZWNrT24gKSB7XG5cdFx0alF1ZXJ5LnZhbEhvb2tzWyB0aGlzIF0uZ2V0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSA9PT0gbnVsbCA/IFwib25cIiA6IGVsZW0udmFsdWU7XG5cdFx0fTtcblx0fVxufSk7XG5cblxuXG5cbi8vIFJldHVybiBqUXVlcnkgZm9yIGF0dHJpYnV0ZXMtb25seSBpbmNsdXNpb25cblxuXG5qUXVlcnkuZWFjaCggKFwiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgXCIgK1xuXHRcIm1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIFwiICtcblx0XCJjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51XCIpLnNwbGl0KFwiIFwiKSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cblx0Ly8gSGFuZGxlIGV2ZW50IGJpbmRpbmdcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAwID9cblx0XHRcdHRoaXMub24oIG5hbWUsIG51bGwsIGRhdGEsIGZuICkgOlxuXHRcdFx0dGhpcy50cmlnZ2VyKCBuYW1lICk7XG5cdH07XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGhvdmVyOiBmdW5jdGlvbiggZm5PdmVyLCBmbk91dCApIHtcblx0XHRyZXR1cm4gdGhpcy5tb3VzZWVudGVyKCBmbk92ZXIgKS5tb3VzZWxlYXZlKCBmbk91dCB8fCBmbk92ZXIgKTtcblx0fSxcblxuXHRiaW5kOiBmdW5jdGlvbiggdHlwZXMsIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9uKCB0eXBlcywgbnVsbCwgZGF0YSwgZm4gKTtcblx0fSxcblx0dW5iaW5kOiBmdW5jdGlvbiggdHlwZXMsIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9mZiggdHlwZXMsIG51bGwsIGZuICk7XG5cdH0sXG5cblx0ZGVsZWdhdGU6IGZ1bmN0aW9uKCBzZWxlY3RvciwgdHlwZXMsIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICk7XG5cdH0sXG5cdHVuZGVsZWdhdGU6IGZ1bmN0aW9uKCBzZWxlY3RvciwgdHlwZXMsIGZuICkge1xuXHRcdC8vICggbmFtZXNwYWNlICkgb3IgKCBzZWxlY3RvciwgdHlwZXMgWywgZm5dIClcblx0XHRyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IHRoaXMub2ZmKCBzZWxlY3RvciwgXCIqKlwiICkgOiB0aGlzLm9mZiggdHlwZXMsIHNlbGVjdG9yIHx8IFwiKipcIiwgZm4gKTtcblx0fVxufSk7XG5cblxudmFyIG5vbmNlID0galF1ZXJ5Lm5vdygpO1xuXG52YXIgcnF1ZXJ5ID0gKC9cXD8vKTtcblxuXG5cbi8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG4vLyBXb3JrYXJvdW5kIGZhaWx1cmUgdG8gc3RyaW5nLWNhc3QgbnVsbCBpbnB1dFxualF1ZXJ5LnBhcnNlSlNPTiA9IGZ1bmN0aW9uKCBkYXRhICkge1xuXHRyZXR1cm4gSlNPTi5wYXJzZSggZGF0YSArIFwiXCIgKTtcbn07XG5cblxuLy8gQ3Jvc3MtYnJvd3NlciB4bWwgcGFyc2luZ1xualF1ZXJ5LnBhcnNlWE1MID0gZnVuY3Rpb24oIGRhdGEgKSB7XG5cdHZhciB4bWwsIHRtcDtcblx0aWYgKCAhZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IElFOVxuXHR0cnkge1xuXHRcdHRtcCA9IG5ldyBET01QYXJzZXIoKTtcblx0XHR4bWwgPSB0bXAucGFyc2VGcm9tU3RyaW5nKCBkYXRhLCBcInRleHQveG1sXCIgKTtcblx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0eG1sID0gdW5kZWZpbmVkO1xuXHR9XG5cblx0aWYgKCAheG1sIHx8IHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJwYXJzZXJlcnJvclwiICkubGVuZ3RoICkge1xuXHRcdGpRdWVyeS5lcnJvciggXCJJbnZhbGlkIFhNTDogXCIgKyBkYXRhICk7XG5cdH1cblx0cmV0dXJuIHhtbDtcbn07XG5cblxudmFyXG5cdHJoYXNoID0gLyMuKiQvLFxuXHRydHMgPSAvKFs/Jl0pXz1bXiZdKi8sXG5cdHJoZWFkZXJzID0gL14oLio/KTpbIFxcdF0qKFteXFxyXFxuXSopJC9tZyxcblx0Ly8gIzc2NTMsICM4MTI1LCAjODE1MjogbG9jYWwgcHJvdG9jb2wgZGV0ZWN0aW9uXG5cdHJsb2NhbFByb3RvY29sID0gL14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8sXG5cdHJub0NvbnRlbnQgPSAvXig/OkdFVHxIRUFEKSQvLFxuXHRycHJvdG9jb2wgPSAvXlxcL1xcLy8sXG5cdHJ1cmwgPSAvXihbXFx3ListXSs6KSg/OlxcL1xcLyg/OlteXFwvPyNdKkB8KShbXlxcLz8jOl0qKSg/OjooXFxkKyl8KXwpLyxcblxuXHQvKiBQcmVmaWx0ZXJzXG5cdCAqIDEpIFRoZXkgYXJlIHVzZWZ1bCB0byBpbnRyb2R1Y2UgY3VzdG9tIGRhdGFUeXBlcyAoc2VlIGFqYXgvanNvbnAuanMgZm9yIGFuIGV4YW1wbGUpXG5cdCAqIDIpIFRoZXNlIGFyZSBjYWxsZWQ6XG5cdCAqICAgIC0gQkVGT1JFIGFza2luZyBmb3IgYSB0cmFuc3BvcnRcblx0ICogICAgLSBBRlRFUiBwYXJhbSBzZXJpYWxpemF0aW9uIChzLmRhdGEgaXMgYSBzdHJpbmcgaWYgcy5wcm9jZXNzRGF0YSBpcyB0cnVlKVxuXHQgKiAzKSBrZXkgaXMgdGhlIGRhdGFUeXBlXG5cdCAqIDQpIHRoZSBjYXRjaGFsbCBzeW1ib2wgXCIqXCIgY2FuIGJlIHVzZWRcblx0ICogNSkgZXhlY3V0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gY29udGludWUgZG93biB0byBcIipcIiBpZiBuZWVkZWRcblx0ICovXG5cdHByZWZpbHRlcnMgPSB7fSxcblxuXHQvKiBUcmFuc3BvcnRzIGJpbmRpbmdzXG5cdCAqIDEpIGtleSBpcyB0aGUgZGF0YVR5cGVcblx0ICogMikgdGhlIGNhdGNoYWxsIHN5bWJvbCBcIipcIiBjYW4gYmUgdXNlZFxuXHQgKiAzKSBzZWxlY3Rpb24gd2lsbCBzdGFydCB3aXRoIHRyYW5zcG9ydCBkYXRhVHlwZSBhbmQgVEhFTiBnbyB0byBcIipcIiBpZiBuZWVkZWRcblx0ICovXG5cdHRyYW5zcG9ydHMgPSB7fSxcblxuXHQvLyBBdm9pZCBjb21tZW50LXByb2xvZyBjaGFyIHNlcXVlbmNlICgjMTAwOTgpOyBtdXN0IGFwcGVhc2UgbGludCBhbmQgZXZhZGUgY29tcHJlc3Npb25cblx0YWxsVHlwZXMgPSBcIiovXCIuY29uY2F0KCBcIipcIiApLFxuXG5cdC8vIERvY3VtZW50IGxvY2F0aW9uXG5cdGFqYXhMb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxuXG5cdC8vIFNlZ21lbnQgbG9jYXRpb24gaW50byBwYXJ0c1xuXHRhamF4TG9jUGFydHMgPSBydXJsLmV4ZWMoIGFqYXhMb2NhdGlvbi50b0xvd2VyQ2FzZSgpICkgfHwgW107XG5cbi8vIEJhc2UgXCJjb25zdHJ1Y3RvclwiIGZvciBqUXVlcnkuYWpheFByZWZpbHRlciBhbmQgalF1ZXJ5LmFqYXhUcmFuc3BvcnRcbmZ1bmN0aW9uIGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlICkge1xuXG5cdC8vIGRhdGFUeXBlRXhwcmVzc2lvbiBpcyBvcHRpb25hbCBhbmQgZGVmYXVsdHMgdG8gXCIqXCJcblx0cmV0dXJuIGZ1bmN0aW9uKCBkYXRhVHlwZUV4cHJlc3Npb24sIGZ1bmMgKSB7XG5cblx0XHRpZiAoIHR5cGVvZiBkYXRhVHlwZUV4cHJlc3Npb24gIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRmdW5jID0gZGF0YVR5cGVFeHByZXNzaW9uO1xuXHRcdFx0ZGF0YVR5cGVFeHByZXNzaW9uID0gXCIqXCI7XG5cdFx0fVxuXG5cdFx0dmFyIGRhdGFUeXBlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRkYXRhVHlwZXMgPSBkYXRhVHlwZUV4cHJlc3Npb24udG9Mb3dlckNhc2UoKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107XG5cblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBmdW5jICkgKSB7XG5cdFx0XHQvLyBGb3IgZWFjaCBkYXRhVHlwZSBpbiB0aGUgZGF0YVR5cGVFeHByZXNzaW9uXG5cdFx0XHR3aGlsZSAoIChkYXRhVHlwZSA9IGRhdGFUeXBlc1tpKytdKSApIHtcblx0XHRcdFx0Ly8gUHJlcGVuZCBpZiByZXF1ZXN0ZWRcblx0XHRcdFx0aWYgKCBkYXRhVHlwZVswXSA9PT0gXCIrXCIgKSB7XG5cdFx0XHRcdFx0ZGF0YVR5cGUgPSBkYXRhVHlwZS5zbGljZSggMSApIHx8IFwiKlwiO1xuXHRcdFx0XHRcdChzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gPSBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10pLnVuc2hpZnQoIGZ1bmMgKTtcblxuXHRcdFx0XHQvLyBPdGhlcndpc2UgYXBwZW5kXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0KHN0cnVjdHVyZVsgZGF0YVR5cGUgXSA9IHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSkucHVzaCggZnVuYyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufVxuXG4vLyBCYXNlIGluc3BlY3Rpb24gZnVuY3Rpb24gZm9yIHByZWZpbHRlcnMgYW5kIHRyYW5zcG9ydHNcbmZ1bmN0aW9uIGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUsIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKSB7XG5cblx0dmFyIGluc3BlY3RlZCA9IHt9LFxuXHRcdHNlZWtpbmdUcmFuc3BvcnQgPSAoIHN0cnVjdHVyZSA9PT0gdHJhbnNwb3J0cyApO1xuXG5cdGZ1bmN0aW9uIGluc3BlY3QoIGRhdGFUeXBlICkge1xuXHRcdHZhciBzZWxlY3RlZDtcblx0XHRpbnNwZWN0ZWRbIGRhdGFUeXBlIF0gPSB0cnVlO1xuXHRcdGpRdWVyeS5lYWNoKCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10sIGZ1bmN0aW9uKCBfLCBwcmVmaWx0ZXJPckZhY3RvcnkgKSB7XG5cdFx0XHR2YXIgZGF0YVR5cGVPclRyYW5zcG9ydCA9IHByZWZpbHRlck9yRmFjdG9yeSggb3B0aW9ucywgb3JpZ2luYWxPcHRpb25zLCBqcVhIUiApO1xuXHRcdFx0aWYgKCB0eXBlb2YgZGF0YVR5cGVPclRyYW5zcG9ydCA9PT0gXCJzdHJpbmdcIiAmJiAhc2Vla2luZ1RyYW5zcG9ydCAmJiAhaW5zcGVjdGVkWyBkYXRhVHlwZU9yVHJhbnNwb3J0IF0gKSB7XG5cdFx0XHRcdG9wdGlvbnMuZGF0YVR5cGVzLnVuc2hpZnQoIGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcblx0XHRcdFx0aW5zcGVjdCggZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9IGVsc2UgaWYgKCBzZWVraW5nVHJhbnNwb3J0ICkge1xuXHRcdFx0XHRyZXR1cm4gISggc2VsZWN0ZWQgPSBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHNlbGVjdGVkO1xuXHR9XG5cblx0cmV0dXJuIGluc3BlY3QoIG9wdGlvbnMuZGF0YVR5cGVzWyAwIF0gKSB8fCAhaW5zcGVjdGVkWyBcIipcIiBdICYmIGluc3BlY3QoIFwiKlwiICk7XG59XG5cbi8vIEEgc3BlY2lhbCBleHRlbmQgZm9yIGFqYXggb3B0aW9uc1xuLy8gdGhhdCB0YWtlcyBcImZsYXRcIiBvcHRpb25zIChub3QgdG8gYmUgZGVlcCBleHRlbmRlZClcbi8vIEZpeGVzICM5ODg3XG5mdW5jdGlvbiBhamF4RXh0ZW5kKCB0YXJnZXQsIHNyYyApIHtcblx0dmFyIGtleSwgZGVlcCxcblx0XHRmbGF0T3B0aW9ucyA9IGpRdWVyeS5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnMgfHwge307XG5cblx0Zm9yICgga2V5IGluIHNyYyApIHtcblx0XHRpZiAoIHNyY1sga2V5IF0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdCggZmxhdE9wdGlvbnNbIGtleSBdID8gdGFyZ2V0IDogKCBkZWVwIHx8IChkZWVwID0ge30pICkgKVsga2V5IF0gPSBzcmNbIGtleSBdO1xuXHRcdH1cblx0fVxuXHRpZiAoIGRlZXAgKSB7XG5cdFx0alF1ZXJ5LmV4dGVuZCggdHJ1ZSwgdGFyZ2V0LCBkZWVwICk7XG5cdH1cblxuXHRyZXR1cm4gdGFyZ2V0O1xufVxuXG4vKiBIYW5kbGVzIHJlc3BvbnNlcyB0byBhbiBhamF4IHJlcXVlc3Q6XG4gKiAtIGZpbmRzIHRoZSByaWdodCBkYXRhVHlwZSAobWVkaWF0ZXMgYmV0d2VlbiBjb250ZW50LXR5cGUgYW5kIGV4cGVjdGVkIGRhdGFUeXBlKVxuICogLSByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlXG4gKi9cbmZ1bmN0aW9uIGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKSB7XG5cblx0dmFyIGN0LCB0eXBlLCBmaW5hbERhdGFUeXBlLCBmaXJzdERhdGFUeXBlLFxuXHRcdGNvbnRlbnRzID0gcy5jb250ZW50cyxcblx0XHRkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcztcblxuXHQvLyBSZW1vdmUgYXV0byBkYXRhVHlwZSBhbmQgZ2V0IGNvbnRlbnQtdHlwZSBpbiB0aGUgcHJvY2Vzc1xuXHR3aGlsZSAoIGRhdGFUeXBlc1sgMCBdID09PSBcIipcIiApIHtcblx0XHRkYXRhVHlwZXMuc2hpZnQoKTtcblx0XHRpZiAoIGN0ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRjdCA9IHMubWltZVR5cGUgfHwganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIik7XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ2hlY2sgaWYgd2UncmUgZGVhbGluZyB3aXRoIGEga25vd24gY29udGVudC10eXBlXG5cdGlmICggY3QgKSB7XG5cdFx0Zm9yICggdHlwZSBpbiBjb250ZW50cyApIHtcblx0XHRcdGlmICggY29udGVudHNbIHR5cGUgXSAmJiBjb250ZW50c1sgdHlwZSBdLnRlc3QoIGN0ICkgKSB7XG5cdFx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCB0eXBlICk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIENoZWNrIHRvIHNlZSBpZiB3ZSBoYXZlIGEgcmVzcG9uc2UgZm9yIHRoZSBleHBlY3RlZCBkYXRhVHlwZVxuXHRpZiAoIGRhdGFUeXBlc1sgMCBdIGluIHJlc3BvbnNlcyApIHtcblx0XHRmaW5hbERhdGFUeXBlID0gZGF0YVR5cGVzWyAwIF07XG5cdH0gZWxzZSB7XG5cdFx0Ly8gVHJ5IGNvbnZlcnRpYmxlIGRhdGFUeXBlc1xuXHRcdGZvciAoIHR5cGUgaW4gcmVzcG9uc2VzICkge1xuXHRcdFx0aWYgKCAhZGF0YVR5cGVzWyAwIF0gfHwgcy5jb252ZXJ0ZXJzWyB0eXBlICsgXCIgXCIgKyBkYXRhVHlwZXNbMF0gXSApIHtcblx0XHRcdFx0ZmluYWxEYXRhVHlwZSA9IHR5cGU7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAhZmlyc3REYXRhVHlwZSApIHtcblx0XHRcdFx0Zmlyc3REYXRhVHlwZSA9IHR5cGU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vIE9yIGp1c3QgdXNlIGZpcnN0IG9uZVxuXHRcdGZpbmFsRGF0YVR5cGUgPSBmaW5hbERhdGFUeXBlIHx8IGZpcnN0RGF0YVR5cGU7XG5cdH1cblxuXHQvLyBJZiB3ZSBmb3VuZCBhIGRhdGFUeXBlXG5cdC8vIFdlIGFkZCB0aGUgZGF0YVR5cGUgdG8gdGhlIGxpc3QgaWYgbmVlZGVkXG5cdC8vIGFuZCByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgcmVzcG9uc2Vcblx0aWYgKCBmaW5hbERhdGFUeXBlICkge1xuXHRcdGlmICggZmluYWxEYXRhVHlwZSAhPT0gZGF0YVR5cGVzWyAwIF0gKSB7XG5cdFx0XHRkYXRhVHlwZXMudW5zaGlmdCggZmluYWxEYXRhVHlwZSApO1xuXHRcdH1cblx0XHRyZXR1cm4gcmVzcG9uc2VzWyBmaW5hbERhdGFUeXBlIF07XG5cdH1cbn1cblxuLyogQ2hhaW4gY29udmVyc2lvbnMgZ2l2ZW4gdGhlIHJlcXVlc3QgYW5kIHRoZSBvcmlnaW5hbCByZXNwb25zZVxuICogQWxzbyBzZXRzIHRoZSByZXNwb25zZVhYWCBmaWVsZHMgb24gdGhlIGpxWEhSIGluc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIGFqYXhDb252ZXJ0KCBzLCByZXNwb25zZSwganFYSFIsIGlzU3VjY2VzcyApIHtcblx0dmFyIGNvbnYyLCBjdXJyZW50LCBjb252LCB0bXAsIHByZXYsXG5cdFx0Y29udmVydGVycyA9IHt9LFxuXHRcdC8vIFdvcmsgd2l0aCBhIGNvcHkgb2YgZGF0YVR5cGVzIGluIGNhc2Ugd2UgbmVlZCB0byBtb2RpZnkgaXQgZm9yIGNvbnZlcnNpb25cblx0XHRkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcy5zbGljZSgpO1xuXG5cdC8vIENyZWF0ZSBjb252ZXJ0ZXJzIG1hcCB3aXRoIGxvd2VyY2FzZWQga2V5c1xuXHRpZiAoIGRhdGFUeXBlc1sgMSBdICkge1xuXHRcdGZvciAoIGNvbnYgaW4gcy5jb252ZXJ0ZXJzICkge1xuXHRcdFx0Y29udmVydGVyc1sgY29udi50b0xvd2VyQ2FzZSgpIF0gPSBzLmNvbnZlcnRlcnNbIGNvbnYgXTtcblx0XHR9XG5cdH1cblxuXHRjdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7XG5cblx0Ly8gQ29udmVydCB0byBlYWNoIHNlcXVlbnRpYWwgZGF0YVR5cGVcblx0d2hpbGUgKCBjdXJyZW50ICkge1xuXG5cdFx0aWYgKCBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gKSB7XG5cdFx0XHRqcVhIUlsgcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdIF0gPSByZXNwb25zZTtcblx0XHR9XG5cblx0XHQvLyBBcHBseSB0aGUgZGF0YUZpbHRlciBpZiBwcm92aWRlZFxuXHRcdGlmICggIXByZXYgJiYgaXNTdWNjZXNzICYmIHMuZGF0YUZpbHRlciApIHtcblx0XHRcdHJlc3BvbnNlID0gcy5kYXRhRmlsdGVyKCByZXNwb25zZSwgcy5kYXRhVHlwZSApO1xuXHRcdH1cblxuXHRcdHByZXYgPSBjdXJyZW50O1xuXHRcdGN1cnJlbnQgPSBkYXRhVHlwZXMuc2hpZnQoKTtcblxuXHRcdGlmICggY3VycmVudCApIHtcblxuXHRcdC8vIFRoZXJlJ3Mgb25seSB3b3JrIHRvIGRvIGlmIGN1cnJlbnQgZGF0YVR5cGUgaXMgbm9uLWF1dG9cblx0XHRcdGlmICggY3VycmVudCA9PT0gXCIqXCIgKSB7XG5cblx0XHRcdFx0Y3VycmVudCA9IHByZXY7XG5cblx0XHRcdC8vIENvbnZlcnQgcmVzcG9uc2UgaWYgcHJldiBkYXRhVHlwZSBpcyBub24tYXV0byBhbmQgZGlmZmVycyBmcm9tIGN1cnJlbnRcblx0XHRcdH0gZWxzZSBpZiAoIHByZXYgIT09IFwiKlwiICYmIHByZXYgIT09IGN1cnJlbnQgKSB7XG5cblx0XHRcdFx0Ly8gU2VlayBhIGRpcmVjdCBjb252ZXJ0ZXJcblx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIHByZXYgKyBcIiBcIiArIGN1cnJlbnQgXSB8fCBjb252ZXJ0ZXJzWyBcIiogXCIgKyBjdXJyZW50IF07XG5cblx0XHRcdFx0Ly8gSWYgbm9uZSBmb3VuZCwgc2VlayBhIHBhaXJcblx0XHRcdFx0aWYgKCAhY29udiApIHtcblx0XHRcdFx0XHRmb3IgKCBjb252MiBpbiBjb252ZXJ0ZXJzICkge1xuXG5cdFx0XHRcdFx0XHQvLyBJZiBjb252MiBvdXRwdXRzIGN1cnJlbnRcblx0XHRcdFx0XHRcdHRtcCA9IGNvbnYyLnNwbGl0KCBcIiBcIiApO1xuXHRcdFx0XHRcdFx0aWYgKCB0bXBbIDEgXSA9PT0gY3VycmVudCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBJZiBwcmV2IGNhbiBiZSBjb252ZXJ0ZWQgdG8gYWNjZXB0ZWQgaW5wdXRcblx0XHRcdFx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIHByZXYgKyBcIiBcIiArIHRtcFsgMCBdIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRjb252ZXJ0ZXJzWyBcIiogXCIgKyB0bXBbIDAgXSBdO1xuXHRcdFx0XHRcdFx0XHRpZiAoIGNvbnYgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gQ29uZGVuc2UgZXF1aXZhbGVuY2UgY29udmVydGVyc1xuXHRcdFx0XHRcdFx0XHRcdGlmICggY29udiA9PT0gdHJ1ZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBjb252MiBdO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCBpbnNlcnQgdGhlIGludGVybWVkaWF0ZSBkYXRhVHlwZVxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGNvbnZlcnRlcnNbIGNvbnYyIF0gIT09IHRydWUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjdXJyZW50ID0gdG1wWyAwIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRkYXRhVHlwZXMudW5zaGlmdCggdG1wWyAxIF0gKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBcHBseSBjb252ZXJ0ZXIgKGlmIG5vdCBhbiBlcXVpdmFsZW5jZSlcblx0XHRcdFx0aWYgKCBjb252ICE9PSB0cnVlICkge1xuXG5cdFx0XHRcdFx0Ly8gVW5sZXNzIGVycm9ycyBhcmUgYWxsb3dlZCB0byBidWJibGUsIGNhdGNoIGFuZCByZXR1cm4gdGhlbVxuXHRcdFx0XHRcdGlmICggY29udiAmJiBzWyBcInRocm93c1wiIF0gKSB7XG5cdFx0XHRcdFx0XHRyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlID0gY29udiggcmVzcG9uc2UgKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4geyBzdGF0ZTogXCJwYXJzZXJlcnJvclwiLCBlcnJvcjogY29udiA/IGUgOiBcIk5vIGNvbnZlcnNpb24gZnJvbSBcIiArIHByZXYgKyBcIiB0byBcIiArIGN1cnJlbnQgfTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4geyBzdGF0ZTogXCJzdWNjZXNzXCIsIGRhdGE6IHJlc3BvbnNlIH07XG59XG5cbmpRdWVyeS5leHRlbmQoe1xuXG5cdC8vIENvdW50ZXIgZm9yIGhvbGRpbmcgdGhlIG51bWJlciBvZiBhY3RpdmUgcXVlcmllc1xuXHRhY3RpdmU6IDAsXG5cblx0Ly8gTGFzdC1Nb2RpZmllZCBoZWFkZXIgY2FjaGUgZm9yIG5leHQgcmVxdWVzdFxuXHRsYXN0TW9kaWZpZWQ6IHt9LFxuXHRldGFnOiB7fSxcblxuXHRhamF4U2V0dGluZ3M6IHtcblx0XHR1cmw6IGFqYXhMb2NhdGlvbixcblx0XHR0eXBlOiBcIkdFVFwiLFxuXHRcdGlzTG9jYWw6IHJsb2NhbFByb3RvY29sLnRlc3QoIGFqYXhMb2NQYXJ0c1sgMSBdICksXG5cdFx0Z2xvYmFsOiB0cnVlLFxuXHRcdHByb2Nlc3NEYXRhOiB0cnVlLFxuXHRcdGFzeW5jOiB0cnVlLFxuXHRcdGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiLFxuXHRcdC8qXG5cdFx0dGltZW91dDogMCxcblx0XHRkYXRhOiBudWxsLFxuXHRcdGRhdGFUeXBlOiBudWxsLFxuXHRcdHVzZXJuYW1lOiBudWxsLFxuXHRcdHBhc3N3b3JkOiBudWxsLFxuXHRcdGNhY2hlOiBudWxsLFxuXHRcdHRocm93czogZmFsc2UsXG5cdFx0dHJhZGl0aW9uYWw6IGZhbHNlLFxuXHRcdGhlYWRlcnM6IHt9LFxuXHRcdCovXG5cblx0XHRhY2NlcHRzOiB7XG5cdFx0XHRcIipcIjogYWxsVHlwZXMsXG5cdFx0XHR0ZXh0OiBcInRleHQvcGxhaW5cIixcblx0XHRcdGh0bWw6IFwidGV4dC9odG1sXCIsXG5cdFx0XHR4bWw6IFwiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbFwiLFxuXHRcdFx0anNvbjogXCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHRcIlxuXHRcdH0sXG5cblx0XHRjb250ZW50czoge1xuXHRcdFx0eG1sOiAveG1sLyxcblx0XHRcdGh0bWw6IC9odG1sLyxcblx0XHRcdGpzb246IC9qc29uL1xuXHRcdH0sXG5cblx0XHRyZXNwb25zZUZpZWxkczoge1xuXHRcdFx0eG1sOiBcInJlc3BvbnNlWE1MXCIsXG5cdFx0XHR0ZXh0OiBcInJlc3BvbnNlVGV4dFwiLFxuXHRcdFx0anNvbjogXCJyZXNwb25zZUpTT05cIlxuXHRcdH0sXG5cblx0XHQvLyBEYXRhIGNvbnZlcnRlcnNcblx0XHQvLyBLZXlzIHNlcGFyYXRlIHNvdXJjZSAob3IgY2F0Y2hhbGwgXCIqXCIpIGFuZCBkZXN0aW5hdGlvbiB0eXBlcyB3aXRoIGEgc2luZ2xlIHNwYWNlXG5cdFx0Y29udmVydGVyczoge1xuXG5cdFx0XHQvLyBDb252ZXJ0IGFueXRoaW5nIHRvIHRleHRcblx0XHRcdFwiKiB0ZXh0XCI6IFN0cmluZyxcblxuXHRcdFx0Ly8gVGV4dCB0byBodG1sICh0cnVlID0gbm8gdHJhbnNmb3JtYXRpb24pXG5cdFx0XHRcInRleHQgaHRtbFwiOiB0cnVlLFxuXG5cdFx0XHQvLyBFdmFsdWF0ZSB0ZXh0IGFzIGEganNvbiBleHByZXNzaW9uXG5cdFx0XHRcInRleHQganNvblwiOiBqUXVlcnkucGFyc2VKU09OLFxuXG5cdFx0XHQvLyBQYXJzZSB0ZXh0IGFzIHhtbFxuXHRcdFx0XCJ0ZXh0IHhtbFwiOiBqUXVlcnkucGFyc2VYTUxcblx0XHR9LFxuXG5cdFx0Ly8gRm9yIG9wdGlvbnMgdGhhdCBzaG91bGRuJ3QgYmUgZGVlcCBleHRlbmRlZDpcblx0XHQvLyB5b3UgY2FuIGFkZCB5b3VyIG93biBjdXN0b20gb3B0aW9ucyBoZXJlIGlmXG5cdFx0Ly8gYW5kIHdoZW4geW91IGNyZWF0ZSBvbmUgdGhhdCBzaG91bGRuJ3QgYmVcblx0XHQvLyBkZWVwIGV4dGVuZGVkIChzZWUgYWpheEV4dGVuZClcblx0XHRmbGF0T3B0aW9uczoge1xuXHRcdFx0dXJsOiB0cnVlLFxuXHRcdFx0Y29udGV4dDogdHJ1ZVxuXHRcdH1cblx0fSxcblxuXHQvLyBDcmVhdGVzIGEgZnVsbCBmbGVkZ2VkIHNldHRpbmdzIG9iamVjdCBpbnRvIHRhcmdldFxuXHQvLyB3aXRoIGJvdGggYWpheFNldHRpbmdzIGFuZCBzZXR0aW5ncyBmaWVsZHMuXG5cdC8vIElmIHRhcmdldCBpcyBvbWl0dGVkLCB3cml0ZXMgaW50byBhamF4U2V0dGluZ3MuXG5cdGFqYXhTZXR1cDogZnVuY3Rpb24oIHRhcmdldCwgc2V0dGluZ3MgKSB7XG5cdFx0cmV0dXJuIHNldHRpbmdzID9cblxuXHRcdFx0Ly8gQnVpbGRpbmcgYSBzZXR0aW5ncyBvYmplY3Rcblx0XHRcdGFqYXhFeHRlbmQoIGFqYXhFeHRlbmQoIHRhcmdldCwgalF1ZXJ5LmFqYXhTZXR0aW5ncyApLCBzZXR0aW5ncyApIDpcblxuXHRcdFx0Ly8gRXh0ZW5kaW5nIGFqYXhTZXR0aW5nc1xuXHRcdFx0YWpheEV4dGVuZCggalF1ZXJ5LmFqYXhTZXR0aW5ncywgdGFyZ2V0ICk7XG5cdH0sXG5cblx0YWpheFByZWZpbHRlcjogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBwcmVmaWx0ZXJzICksXG5cdGFqYXhUcmFuc3BvcnQ6IGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggdHJhbnNwb3J0cyApLFxuXG5cdC8vIE1haW4gbWV0aG9kXG5cdGFqYXg6IGZ1bmN0aW9uKCB1cmwsIG9wdGlvbnMgKSB7XG5cblx0XHQvLyBJZiB1cmwgaXMgYW4gb2JqZWN0LCBzaW11bGF0ZSBwcmUtMS41IHNpZ25hdHVyZVxuXHRcdGlmICggdHlwZW9mIHVybCA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdG9wdGlvbnMgPSB1cmw7XG5cdFx0XHR1cmwgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0Ly8gRm9yY2Ugb3B0aW9ucyB0byBiZSBhbiBvYmplY3Rcblx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuXHRcdHZhciB0cmFuc3BvcnQsXG5cdFx0XHQvLyBVUkwgd2l0aG91dCBhbnRpLWNhY2hlIHBhcmFtXG5cdFx0XHRjYWNoZVVSTCxcblx0XHRcdC8vIFJlc3BvbnNlIGhlYWRlcnNcblx0XHRcdHJlc3BvbnNlSGVhZGVyc1N0cmluZyxcblx0XHRcdHJlc3BvbnNlSGVhZGVycyxcblx0XHRcdC8vIHRpbWVvdXQgaGFuZGxlXG5cdFx0XHR0aW1lb3V0VGltZXIsXG5cdFx0XHQvLyBDcm9zcy1kb21haW4gZGV0ZWN0aW9uIHZhcnNcblx0XHRcdHBhcnRzLFxuXHRcdFx0Ly8gVG8ga25vdyBpZiBnbG9iYWwgZXZlbnRzIGFyZSB0byBiZSBkaXNwYXRjaGVkXG5cdFx0XHRmaXJlR2xvYmFscyxcblx0XHRcdC8vIExvb3AgdmFyaWFibGVcblx0XHRcdGksXG5cdFx0XHQvLyBDcmVhdGUgdGhlIGZpbmFsIG9wdGlvbnMgb2JqZWN0XG5cdFx0XHRzID0galF1ZXJ5LmFqYXhTZXR1cCgge30sIG9wdGlvbnMgKSxcblx0XHRcdC8vIENhbGxiYWNrcyBjb250ZXh0XG5cdFx0XHRjYWxsYmFja0NvbnRleHQgPSBzLmNvbnRleHQgfHwgcyxcblx0XHRcdC8vIENvbnRleHQgZm9yIGdsb2JhbCBldmVudHMgaXMgY2FsbGJhY2tDb250ZXh0IGlmIGl0IGlzIGEgRE9NIG5vZGUgb3IgalF1ZXJ5IGNvbGxlY3Rpb25cblx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dCA9IHMuY29udGV4dCAmJiAoIGNhbGxiYWNrQ29udGV4dC5ub2RlVHlwZSB8fCBjYWxsYmFja0NvbnRleHQuanF1ZXJ5ICkgP1xuXHRcdFx0XHRqUXVlcnkoIGNhbGxiYWNrQ29udGV4dCApIDpcblx0XHRcdFx0alF1ZXJ5LmV2ZW50LFxuXHRcdFx0Ly8gRGVmZXJyZWRzXG5cdFx0XHRkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpLFxuXHRcdFx0Y29tcGxldGVEZWZlcnJlZCA9IGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcblx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRzdGF0dXNDb2RlID0gcy5zdGF0dXNDb2RlIHx8IHt9LFxuXHRcdFx0Ly8gSGVhZGVycyAodGhleSBhcmUgc2VudCBhbGwgYXQgb25jZSlcblx0XHRcdHJlcXVlc3RIZWFkZXJzID0ge30sXG5cdFx0XHRyZXF1ZXN0SGVhZGVyc05hbWVzID0ge30sXG5cdFx0XHQvLyBUaGUganFYSFIgc3RhdGVcblx0XHRcdHN0YXRlID0gMCxcblx0XHRcdC8vIERlZmF1bHQgYWJvcnQgbWVzc2FnZVxuXHRcdFx0c3RyQWJvcnQgPSBcImNhbmNlbGVkXCIsXG5cdFx0XHQvLyBGYWtlIHhoclxuXHRcdFx0anFYSFIgPSB7XG5cdFx0XHRcdHJlYWR5U3RhdGU6IDAsXG5cblx0XHRcdFx0Ly8gQnVpbGRzIGhlYWRlcnMgaGFzaHRhYmxlIGlmIG5lZWRlZFxuXHRcdFx0XHRnZXRSZXNwb25zZUhlYWRlcjogZnVuY3Rpb24oIGtleSApIHtcblx0XHRcdFx0XHR2YXIgbWF0Y2g7XG5cdFx0XHRcdFx0aWYgKCBzdGF0ZSA9PT0gMiApIHtcblx0XHRcdFx0XHRcdGlmICggIXJlc3BvbnNlSGVhZGVycyApIHtcblx0XHRcdFx0XHRcdFx0cmVzcG9uc2VIZWFkZXJzID0ge307XG5cdFx0XHRcdFx0XHRcdHdoaWxlICggKG1hdGNoID0gcmhlYWRlcnMuZXhlYyggcmVzcG9uc2VIZWFkZXJzU3RyaW5nICkpICkge1xuXHRcdFx0XHRcdFx0XHRcdHJlc3BvbnNlSGVhZGVyc1sgbWF0Y2hbMV0udG9Mb3dlckNhc2UoKSBdID0gbWF0Y2hbIDIgXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0bWF0Y2ggPSByZXNwb25zZUhlYWRlcnNbIGtleS50b0xvd2VyQ2FzZSgpIF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBtYXRjaCA9PSBudWxsID8gbnVsbCA6IG1hdGNoO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFJhdyBzdHJpbmdcblx0XHRcdFx0Z2V0QWxsUmVzcG9uc2VIZWFkZXJzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4gc3RhdGUgPT09IDIgPyByZXNwb25zZUhlYWRlcnNTdHJpbmcgOiBudWxsO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIENhY2hlcyB0aGUgaGVhZGVyXG5cdFx0XHRcdHNldFJlcXVlc3RIZWFkZXI6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRcdFx0XHR2YXIgbG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdFx0aWYgKCAhc3RhdGUgKSB7XG5cdFx0XHRcdFx0XHRuYW1lID0gcmVxdWVzdEhlYWRlcnNOYW1lc1sgbG5hbWUgXSA9IHJlcXVlc3RIZWFkZXJzTmFtZXNbIGxuYW1lIF0gfHwgbmFtZTtcblx0XHRcdFx0XHRcdHJlcXVlc3RIZWFkZXJzWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gT3ZlcnJpZGVzIHJlc3BvbnNlIGNvbnRlbnQtdHlwZSBoZWFkZXJcblx0XHRcdFx0b3ZlcnJpZGVNaW1lVHlwZTogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0XHRcdFx0aWYgKCAhc3RhdGUgKSB7XG5cdFx0XHRcdFx0XHRzLm1pbWVUeXBlID0gdHlwZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3Ncblx0XHRcdFx0c3RhdHVzQ29kZTogZnVuY3Rpb24oIG1hcCApIHtcblx0XHRcdFx0XHR2YXIgY29kZTtcblx0XHRcdFx0XHRpZiAoIG1hcCApIHtcblx0XHRcdFx0XHRcdGlmICggc3RhdGUgPCAyICkge1xuXHRcdFx0XHRcdFx0XHRmb3IgKCBjb2RlIGluIG1hcCApIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBMYXp5LWFkZCB0aGUgbmV3IGNhbGxiYWNrIGluIGEgd2F5IHRoYXQgcHJlc2VydmVzIG9sZCBvbmVzXG5cdFx0XHRcdFx0XHRcdFx0c3RhdHVzQ29kZVsgY29kZSBdID0gWyBzdGF0dXNDb2RlWyBjb2RlIF0sIG1hcFsgY29kZSBdIF07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIEV4ZWN1dGUgdGhlIGFwcHJvcHJpYXRlIGNhbGxiYWNrc1xuXHRcdFx0XHRcdFx0XHRqcVhIUi5hbHdheXMoIG1hcFsganFYSFIuc3RhdHVzIF0gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gQ2FuY2VsIHRoZSByZXF1ZXN0XG5cdFx0XHRcdGFib3J0OiBmdW5jdGlvbiggc3RhdHVzVGV4dCApIHtcblx0XHRcdFx0XHR2YXIgZmluYWxUZXh0ID0gc3RhdHVzVGV4dCB8fCBzdHJBYm9ydDtcblx0XHRcdFx0XHRpZiAoIHRyYW5zcG9ydCApIHtcblx0XHRcdFx0XHRcdHRyYW5zcG9ydC5hYm9ydCggZmluYWxUZXh0ICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRvbmUoIDAsIGZpbmFsVGV4dCApO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0Ly8gQXR0YWNoIGRlZmVycmVkc1xuXHRcdGRlZmVycmVkLnByb21pc2UoIGpxWEhSICkuY29tcGxldGUgPSBjb21wbGV0ZURlZmVycmVkLmFkZDtcblx0XHRqcVhIUi5zdWNjZXNzID0ganFYSFIuZG9uZTtcblx0XHRqcVhIUi5lcnJvciA9IGpxWEhSLmZhaWw7XG5cblx0XHQvLyBSZW1vdmUgaGFzaCBjaGFyYWN0ZXIgKCM3NTMxOiBhbmQgc3RyaW5nIHByb21vdGlvbilcblx0XHQvLyBBZGQgcHJvdG9jb2wgaWYgbm90IHByb3ZpZGVkIChwcmVmaWx0ZXJzIG1pZ2h0IGV4cGVjdCBpdClcblx0XHQvLyBIYW5kbGUgZmFsc3kgdXJsIGluIHRoZSBzZXR0aW5ncyBvYmplY3QgKCMxMDA5MzogY29uc2lzdGVuY3kgd2l0aCBvbGQgc2lnbmF0dXJlKVxuXHRcdC8vIFdlIGFsc28gdXNlIHRoZSB1cmwgcGFyYW1ldGVyIGlmIGF2YWlsYWJsZVxuXHRcdHMudXJsID0gKCAoIHVybCB8fCBzLnVybCB8fCBhamF4TG9jYXRpb24gKSArIFwiXCIgKS5yZXBsYWNlKCByaGFzaCwgXCJcIiApXG5cdFx0XHQucmVwbGFjZSggcnByb3RvY29sLCBhamF4TG9jUGFydHNbIDEgXSArIFwiLy9cIiApO1xuXG5cdFx0Ly8gQWxpYXMgbWV0aG9kIG9wdGlvbiB0byB0eXBlIGFzIHBlciB0aWNrZXQgIzEyMDA0XG5cdFx0cy50eXBlID0gb3B0aW9ucy5tZXRob2QgfHwgb3B0aW9ucy50eXBlIHx8IHMubWV0aG9kIHx8IHMudHlwZTtcblxuXHRcdC8vIEV4dHJhY3QgZGF0YVR5cGVzIGxpc3Rcblx0XHRzLmRhdGFUeXBlcyA9IGpRdWVyeS50cmltKCBzLmRhdGFUeXBlIHx8IFwiKlwiICkudG9Mb3dlckNhc2UoKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgWyBcIlwiIF07XG5cblx0XHQvLyBBIGNyb3NzLWRvbWFpbiByZXF1ZXN0IGlzIGluIG9yZGVyIHdoZW4gd2UgaGF2ZSBhIHByb3RvY29sOmhvc3Q6cG9ydCBtaXNtYXRjaFxuXHRcdGlmICggcy5jcm9zc0RvbWFpbiA9PSBudWxsICkge1xuXHRcdFx0cGFydHMgPSBydXJsLmV4ZWMoIHMudXJsLnRvTG93ZXJDYXNlKCkgKTtcblx0XHRcdHMuY3Jvc3NEb21haW4gPSAhISggcGFydHMgJiZcblx0XHRcdFx0KCBwYXJ0c1sgMSBdICE9PSBhamF4TG9jUGFydHNbIDEgXSB8fCBwYXJ0c1sgMiBdICE9PSBhamF4TG9jUGFydHNbIDIgXSB8fFxuXHRcdFx0XHRcdCggcGFydHNbIDMgXSB8fCAoIHBhcnRzWyAxIF0gPT09IFwiaHR0cDpcIiA/IFwiODBcIiA6IFwiNDQzXCIgKSApICE9PVxuXHRcdFx0XHRcdFx0KCBhamF4TG9jUGFydHNbIDMgXSB8fCAoIGFqYXhMb2NQYXJ0c1sgMSBdID09PSBcImh0dHA6XCIgPyBcIjgwXCIgOiBcIjQ0M1wiICkgKSApXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdC8vIENvbnZlcnQgZGF0YSBpZiBub3QgYWxyZWFkeSBhIHN0cmluZ1xuXHRcdGlmICggcy5kYXRhICYmIHMucHJvY2Vzc0RhdGEgJiYgdHlwZW9mIHMuZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHMuZGF0YSA9IGpRdWVyeS5wYXJhbSggcy5kYXRhLCBzLnRyYWRpdGlvbmFsICk7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgcHJlZmlsdGVyc1xuXHRcdGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBwcmVmaWx0ZXJzLCBzLCBvcHRpb25zLCBqcVhIUiApO1xuXG5cdFx0Ly8gSWYgcmVxdWVzdCB3YXMgYWJvcnRlZCBpbnNpZGUgYSBwcmVmaWx0ZXIsIHN0b3AgdGhlcmVcblx0XHRpZiAoIHN0YXRlID09PSAyICkge1xuXHRcdFx0cmV0dXJuIGpxWEhSO1xuXHRcdH1cblxuXHRcdC8vIFdlIGNhbiBmaXJlIGdsb2JhbCBldmVudHMgYXMgb2Ygbm93IGlmIGFza2VkIHRvXG5cdFx0Ly8gRG9uJ3QgZmlyZSBldmVudHMgaWYgalF1ZXJ5LmV2ZW50IGlzIHVuZGVmaW5lZCBpbiBhbiBBTUQtdXNhZ2Ugc2NlbmFyaW8gKCMxNTExOClcblx0XHRmaXJlR2xvYmFscyA9IGpRdWVyeS5ldmVudCAmJiBzLmdsb2JhbDtcblxuXHRcdC8vIFdhdGNoIGZvciBhIG5ldyBzZXQgb2YgcmVxdWVzdHNcblx0XHRpZiAoIGZpcmVHbG9iYWxzICYmIGpRdWVyeS5hY3RpdmUrKyA9PT0gMCApIHtcblx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKFwiYWpheFN0YXJ0XCIpO1xuXHRcdH1cblxuXHRcdC8vIFVwcGVyY2FzZSB0aGUgdHlwZVxuXHRcdHMudHlwZSA9IHMudHlwZS50b1VwcGVyQ2FzZSgpO1xuXG5cdFx0Ly8gRGV0ZXJtaW5lIGlmIHJlcXVlc3QgaGFzIGNvbnRlbnRcblx0XHRzLmhhc0NvbnRlbnQgPSAhcm5vQ29udGVudC50ZXN0KCBzLnR5cGUgKTtcblxuXHRcdC8vIFNhdmUgdGhlIFVSTCBpbiBjYXNlIHdlJ3JlIHRveWluZyB3aXRoIHRoZSBJZi1Nb2RpZmllZC1TaW5jZVxuXHRcdC8vIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciBsYXRlciBvblxuXHRcdGNhY2hlVVJMID0gcy51cmw7XG5cblx0XHQvLyBNb3JlIG9wdGlvbnMgaGFuZGxpbmcgZm9yIHJlcXVlc3RzIHdpdGggbm8gY29udGVudFxuXHRcdGlmICggIXMuaGFzQ29udGVudCApIHtcblxuXHRcdFx0Ly8gSWYgZGF0YSBpcyBhdmFpbGFibGUsIGFwcGVuZCBkYXRhIHRvIHVybFxuXHRcdFx0aWYgKCBzLmRhdGEgKSB7XG5cdFx0XHRcdGNhY2hlVVJMID0gKCBzLnVybCArPSAoIHJxdWVyeS50ZXN0KCBjYWNoZVVSTCApID8gXCImXCIgOiBcIj9cIiApICsgcy5kYXRhICk7XG5cdFx0XHRcdC8vICM5NjgyOiByZW1vdmUgZGF0YSBzbyB0aGF0IGl0J3Mgbm90IHVzZWQgaW4gYW4gZXZlbnR1YWwgcmV0cnlcblx0XHRcdFx0ZGVsZXRlIHMuZGF0YTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIGFudGktY2FjaGUgaW4gdXJsIGlmIG5lZWRlZFxuXHRcdFx0aWYgKCBzLmNhY2hlID09PSBmYWxzZSApIHtcblx0XHRcdFx0cy51cmwgPSBydHMudGVzdCggY2FjaGVVUkwgKSA/XG5cblx0XHRcdFx0XHQvLyBJZiB0aGVyZSBpcyBhbHJlYWR5IGEgJ18nIHBhcmFtZXRlciwgc2V0IGl0cyB2YWx1ZVxuXHRcdFx0XHRcdGNhY2hlVVJMLnJlcGxhY2UoIHJ0cywgXCIkMV89XCIgKyBub25jZSsrICkgOlxuXG5cdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGFkZCBvbmUgdG8gdGhlIGVuZFxuXHRcdFx0XHRcdGNhY2hlVVJMICsgKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/IFwiJlwiIDogXCI/XCIgKSArIFwiXz1cIiArIG5vbmNlKys7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBJZi1Nb2RpZmllZC1TaW5jZSBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIsIGlmIGluIGlmTW9kaWZpZWQgbW9kZS5cblx0XHRpZiAoIHMuaWZNb2RpZmllZCApIHtcblx0XHRcdGlmICggalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApIHtcblx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJJZi1Nb2RpZmllZC1TaW5jZVwiLCBqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdICk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICkge1xuXHRcdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIklmLU5vbmUtTWF0Y2hcIiwgalF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBTZXQgdGhlIGNvcnJlY3QgaGVhZGVyLCBpZiBkYXRhIGlzIGJlaW5nIHNlbnRcblx0XHRpZiAoIHMuZGF0YSAmJiBzLmhhc0NvbnRlbnQgJiYgcy5jb250ZW50VHlwZSAhPT0gZmFsc2UgfHwgb3B0aW9ucy5jb250ZW50VHlwZSApIHtcblx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiQ29udGVudC1UeXBlXCIsIHMuY29udGVudFR5cGUgKTtcblx0XHR9XG5cblx0XHQvLyBTZXQgdGhlIEFjY2VwdHMgaGVhZGVyIGZvciB0aGUgc2VydmVyLCBkZXBlbmRpbmcgb24gdGhlIGRhdGFUeXBlXG5cdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlcihcblx0XHRcdFwiQWNjZXB0XCIsXG5cdFx0XHRzLmRhdGFUeXBlc1sgMCBdICYmIHMuYWNjZXB0c1sgcy5kYXRhVHlwZXNbMF0gXSA/XG5cdFx0XHRcdHMuYWNjZXB0c1sgcy5kYXRhVHlwZXNbMF0gXSArICggcy5kYXRhVHlwZXNbIDAgXSAhPT0gXCIqXCIgPyBcIiwgXCIgKyBhbGxUeXBlcyArIFwiOyBxPTAuMDFcIiA6IFwiXCIgKSA6XG5cdFx0XHRcdHMuYWNjZXB0c1sgXCIqXCIgXVxuXHRcdCk7XG5cblx0XHQvLyBDaGVjayBmb3IgaGVhZGVycyBvcHRpb25cblx0XHRmb3IgKCBpIGluIHMuaGVhZGVycyApIHtcblx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIGksIHMuaGVhZGVyc1sgaSBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gQWxsb3cgY3VzdG9tIGhlYWRlcnMvbWltZXR5cGVzIGFuZCBlYXJseSBhYm9ydFxuXHRcdGlmICggcy5iZWZvcmVTZW5kICYmICggcy5iZWZvcmVTZW5kLmNhbGwoIGNhbGxiYWNrQ29udGV4dCwganFYSFIsIHMgKSA9PT0gZmFsc2UgfHwgc3RhdGUgPT09IDIgKSApIHtcblx0XHRcdC8vIEFib3J0IGlmIG5vdCBkb25lIGFscmVhZHkgYW5kIHJldHVyblxuXHRcdFx0cmV0dXJuIGpxWEhSLmFib3J0KCk7XG5cdFx0fVxuXG5cdFx0Ly8gQWJvcnRpbmcgaXMgbm8gbG9uZ2VyIGEgY2FuY2VsbGF0aW9uXG5cdFx0c3RyQWJvcnQgPSBcImFib3J0XCI7XG5cblx0XHQvLyBJbnN0YWxsIGNhbGxiYWNrcyBvbiBkZWZlcnJlZHNcblx0XHRmb3IgKCBpIGluIHsgc3VjY2VzczogMSwgZXJyb3I6IDEsIGNvbXBsZXRlOiAxIH0gKSB7XG5cdFx0XHRqcVhIUlsgaSBdKCBzWyBpIF0gKTtcblx0XHR9XG5cblx0XHQvLyBHZXQgdHJhbnNwb3J0XG5cdFx0dHJhbnNwb3J0ID0gaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHRyYW5zcG9ydHMsIHMsIG9wdGlvbnMsIGpxWEhSICk7XG5cblx0XHQvLyBJZiBubyB0cmFuc3BvcnQsIHdlIGF1dG8tYWJvcnRcblx0XHRpZiAoICF0cmFuc3BvcnQgKSB7XG5cdFx0XHRkb25lKCAtMSwgXCJObyBUcmFuc3BvcnRcIiApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRqcVhIUi5yZWFkeVN0YXRlID0gMTtcblxuXHRcdFx0Ly8gU2VuZCBnbG9iYWwgZXZlbnRcblx0XHRcdGlmICggZmlyZUdsb2JhbHMgKSB7XG5cdFx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBcImFqYXhTZW5kXCIsIFsganFYSFIsIHMgXSApO1xuXHRcdFx0fVxuXHRcdFx0Ly8gVGltZW91dFxuXHRcdFx0aWYgKCBzLmFzeW5jICYmIHMudGltZW91dCA+IDAgKSB7XG5cdFx0XHRcdHRpbWVvdXRUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0anFYSFIuYWJvcnQoXCJ0aW1lb3V0XCIpO1xuXHRcdFx0XHR9LCBzLnRpbWVvdXQgKTtcblx0XHRcdH1cblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0c3RhdGUgPSAxO1xuXHRcdFx0XHR0cmFuc3BvcnQuc2VuZCggcmVxdWVzdEhlYWRlcnMsIGRvbmUgKTtcblx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXHRcdFx0XHQvLyBQcm9wYWdhdGUgZXhjZXB0aW9uIGFzIGVycm9yIGlmIG5vdCBkb25lXG5cdFx0XHRcdGlmICggc3RhdGUgPCAyICkge1xuXHRcdFx0XHRcdGRvbmUoIC0xLCBlICk7XG5cdFx0XHRcdC8vIFNpbXBseSByZXRocm93IG90aGVyd2lzZVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRocm93IGU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWxsYmFjayBmb3Igd2hlbiBldmVyeXRoaW5nIGlzIGRvbmVcblx0XHRmdW5jdGlvbiBkb25lKCBzdGF0dXMsIG5hdGl2ZVN0YXR1c1RleHQsIHJlc3BvbnNlcywgaGVhZGVycyApIHtcblx0XHRcdHZhciBpc1N1Y2Nlc3MsIHN1Y2Nlc3MsIGVycm9yLCByZXNwb25zZSwgbW9kaWZpZWQsXG5cdFx0XHRcdHN0YXR1c1RleHQgPSBuYXRpdmVTdGF0dXNUZXh0O1xuXG5cdFx0XHQvLyBDYWxsZWQgb25jZVxuXHRcdFx0aWYgKCBzdGF0ZSA9PT0gMiApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdGF0ZSBpcyBcImRvbmVcIiBub3dcblx0XHRcdHN0YXRlID0gMjtcblxuXHRcdFx0Ly8gQ2xlYXIgdGltZW91dCBpZiBpdCBleGlzdHNcblx0XHRcdGlmICggdGltZW91dFRpbWVyICkge1xuXHRcdFx0XHRjbGVhclRpbWVvdXQoIHRpbWVvdXRUaW1lciApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBEZXJlZmVyZW5jZSB0cmFuc3BvcnQgZm9yIGVhcmx5IGdhcmJhZ2UgY29sbGVjdGlvblxuXHRcdFx0Ly8gKG5vIG1hdHRlciBob3cgbG9uZyB0aGUganFYSFIgb2JqZWN0IHdpbGwgYmUgdXNlZClcblx0XHRcdHRyYW5zcG9ydCA9IHVuZGVmaW5lZDtcblxuXHRcdFx0Ly8gQ2FjaGUgcmVzcG9uc2UgaGVhZGVyc1xuXHRcdFx0cmVzcG9uc2VIZWFkZXJzU3RyaW5nID0gaGVhZGVycyB8fCBcIlwiO1xuXG5cdFx0XHQvLyBTZXQgcmVhZHlTdGF0ZVxuXHRcdFx0anFYSFIucmVhZHlTdGF0ZSA9IHN0YXR1cyA+IDAgPyA0IDogMDtcblxuXHRcdFx0Ly8gRGV0ZXJtaW5lIGlmIHN1Y2Nlc3NmdWxcblx0XHRcdGlzU3VjY2VzcyA9IHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwIHx8IHN0YXR1cyA9PT0gMzA0O1xuXG5cdFx0XHQvLyBHZXQgcmVzcG9uc2UgZGF0YVxuXHRcdFx0aWYgKCByZXNwb25zZXMgKSB7XG5cdFx0XHRcdHJlc3BvbnNlID0gYWpheEhhbmRsZVJlc3BvbnNlcyggcywganFYSFIsIHJlc3BvbnNlcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb252ZXJ0IG5vIG1hdHRlciB3aGF0ICh0aGF0IHdheSByZXNwb25zZVhYWCBmaWVsZHMgYXJlIGFsd2F5cyBzZXQpXG5cdFx0XHRyZXNwb25zZSA9IGFqYXhDb252ZXJ0KCBzLCByZXNwb25zZSwganFYSFIsIGlzU3VjY2VzcyApO1xuXG5cdFx0XHQvLyBJZiBzdWNjZXNzZnVsLCBoYW5kbGUgdHlwZSBjaGFpbmluZ1xuXHRcdFx0aWYgKCBpc1N1Y2Nlc3MgKSB7XG5cblx0XHRcdFx0Ly8gU2V0IHRoZSBJZi1Nb2RpZmllZC1TaW5jZSBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIsIGlmIGluIGlmTW9kaWZpZWQgbW9kZS5cblx0XHRcdFx0aWYgKCBzLmlmTW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0bW9kaWZpZWQgPSBqcVhIUi5nZXRSZXNwb25zZUhlYWRlcihcIkxhc3QtTW9kaWZpZWRcIik7XG5cdFx0XHRcdFx0aWYgKCBtb2RpZmllZCApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gPSBtb2RpZmllZDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bW9kaWZpZWQgPSBqcVhIUi5nZXRSZXNwb25zZUhlYWRlcihcImV0YWdcIik7XG5cdFx0XHRcdFx0aWYgKCBtb2RpZmllZCApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gaWYgbm8gY29udGVudFxuXHRcdFx0XHRpZiAoIHN0YXR1cyA9PT0gMjA0IHx8IHMudHlwZSA9PT0gXCJIRUFEXCIgKSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IFwibm9jb250ZW50XCI7XG5cblx0XHRcdFx0Ly8gaWYgbm90IG1vZGlmaWVkXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHN0YXR1cyA9PT0gMzA0ICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcIm5vdG1vZGlmaWVkXCI7XG5cblx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBkYXRhLCBsZXQncyBjb252ZXJ0IGl0XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IHJlc3BvbnNlLnN0YXRlO1xuXHRcdFx0XHRcdHN1Y2Nlc3MgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0XHRcdGVycm9yID0gcmVzcG9uc2UuZXJyb3I7XG5cdFx0XHRcdFx0aXNTdWNjZXNzID0gIWVycm9yO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBFeHRyYWN0IGVycm9yIGZyb20gc3RhdHVzVGV4dCBhbmQgbm9ybWFsaXplIGZvciBub24tYWJvcnRzXG5cdFx0XHRcdGVycm9yID0gc3RhdHVzVGV4dDtcblx0XHRcdFx0aWYgKCBzdGF0dXMgfHwgIXN0YXR1c1RleHQgKSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IFwiZXJyb3JcIjtcblx0XHRcdFx0XHRpZiAoIHN0YXR1cyA8IDAgKSB7XG5cdFx0XHRcdFx0XHRzdGF0dXMgPSAwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZXQgZGF0YSBmb3IgdGhlIGZha2UgeGhyIG9iamVjdFxuXHRcdFx0anFYSFIuc3RhdHVzID0gc3RhdHVzO1xuXHRcdFx0anFYSFIuc3RhdHVzVGV4dCA9ICggbmF0aXZlU3RhdHVzVGV4dCB8fCBzdGF0dXNUZXh0ICkgKyBcIlwiO1xuXG5cdFx0XHQvLyBTdWNjZXNzL0Vycm9yXG5cdFx0XHRpZiAoIGlzU3VjY2VzcyApIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBzdWNjZXNzLCBzdGF0dXNUZXh0LCBqcVhIUiBdICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkZWZlcnJlZC5yZWplY3RXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQsIGVycm9yIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3Ncblx0XHRcdGpxWEhSLnN0YXR1c0NvZGUoIHN0YXR1c0NvZGUgKTtcblx0XHRcdHN0YXR1c0NvZGUgPSB1bmRlZmluZWQ7XG5cblx0XHRcdGlmICggZmlyZUdsb2JhbHMgKSB7XG5cdFx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBpc1N1Y2Nlc3MgPyBcImFqYXhTdWNjZXNzXCIgOiBcImFqYXhFcnJvclwiLFxuXHRcdFx0XHRcdFsganFYSFIsIHMsIGlzU3VjY2VzcyA/IHN1Y2Nlc3MgOiBlcnJvciBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbXBsZXRlXG5cdFx0XHRjb21wbGV0ZURlZmVycmVkLmZpcmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQgXSApO1xuXG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4Q29tcGxldGVcIiwgWyBqcVhIUiwgcyBdICk7XG5cdFx0XHRcdC8vIEhhbmRsZSB0aGUgZ2xvYmFsIEFKQVggY291bnRlclxuXHRcdFx0XHRpZiAoICEoIC0talF1ZXJ5LmFjdGl2ZSApICkge1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKFwiYWpheFN0b3BcIik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4ganFYSFI7XG5cdH0sXG5cblx0Z2V0SlNPTjogZnVuY3Rpb24oIHVybCwgZGF0YSwgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgZGF0YSwgY2FsbGJhY2ssIFwianNvblwiICk7XG5cdH0sXG5cblx0Z2V0U2NyaXB0OiBmdW5jdGlvbiggdXJsLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdldCggdXJsLCB1bmRlZmluZWQsIGNhbGxiYWNrLCBcInNjcmlwdFwiICk7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZWFjaCggWyBcImdldFwiLCBcInBvc3RcIiBdLCBmdW5jdGlvbiggaSwgbWV0aG9kICkge1xuXHRqUXVlcnlbIG1ldGhvZCBdID0gZnVuY3Rpb24oIHVybCwgZGF0YSwgY2FsbGJhY2ssIHR5cGUgKSB7XG5cdFx0Ly8gU2hpZnQgYXJndW1lbnRzIGlmIGRhdGEgYXJndW1lbnQgd2FzIG9taXR0ZWRcblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBkYXRhICkgKSB7XG5cdFx0XHR0eXBlID0gdHlwZSB8fCBjYWxsYmFjaztcblx0XHRcdGNhbGxiYWNrID0gZGF0YTtcblx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGpRdWVyeS5hamF4KHtcblx0XHRcdHVybDogdXJsLFxuXHRcdFx0dHlwZTogbWV0aG9kLFxuXHRcdFx0ZGF0YVR5cGU6IHR5cGUsXG5cdFx0XHRkYXRhOiBkYXRhLFxuXHRcdFx0c3VjY2VzczogY2FsbGJhY2tcblx0XHR9KTtcblx0fTtcbn0pO1xuXG5cbmpRdWVyeS5fZXZhbFVybCA9IGZ1bmN0aW9uKCB1cmwgKSB7XG5cdHJldHVybiBqUXVlcnkuYWpheCh7XG5cdFx0dXJsOiB1cmwsXG5cdFx0dHlwZTogXCJHRVRcIixcblx0XHRkYXRhVHlwZTogXCJzY3JpcHRcIixcblx0XHRhc3luYzogZmFsc2UsXG5cdFx0Z2xvYmFsOiBmYWxzZSxcblx0XHRcInRocm93c1wiOiB0cnVlXG5cdH0pO1xufTtcblxuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0d3JhcEFsbDogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0dmFyIHdyYXA7XG5cblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBodG1sICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS53cmFwQWxsKCBodG1sLmNhbGwodGhpcywgaSkgKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICggdGhpc1sgMCBdICkge1xuXG5cdFx0XHQvLyBUaGUgZWxlbWVudHMgdG8gd3JhcCB0aGUgdGFyZ2V0IGFyb3VuZFxuXHRcdFx0d3JhcCA9IGpRdWVyeSggaHRtbCwgdGhpc1sgMCBdLm93bmVyRG9jdW1lbnQgKS5lcSggMCApLmNsb25lKCB0cnVlICk7XG5cblx0XHRcdGlmICggdGhpc1sgMCBdLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHdyYXAuaW5zZXJ0QmVmb3JlKCB0aGlzWyAwIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0d3JhcC5tYXAoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBlbGVtID0gdGhpcztcblxuXHRcdFx0XHR3aGlsZSAoIGVsZW0uZmlyc3RFbGVtZW50Q2hpbGQgKSB7XG5cdFx0XHRcdFx0ZWxlbSA9IGVsZW0uZmlyc3RFbGVtZW50Q2hpbGQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gZWxlbTtcblx0XHRcdH0pLmFwcGVuZCggdGhpcyApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHdyYXBJbm5lcjogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcElubmVyKCBodG1sLmNhbGwodGhpcywgaSkgKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc2VsZiA9IGpRdWVyeSggdGhpcyApLFxuXHRcdFx0XHRjb250ZW50cyA9IHNlbGYuY29udGVudHMoKTtcblxuXHRcdFx0aWYgKCBjb250ZW50cy5sZW5ndGggKSB7XG5cdFx0XHRcdGNvbnRlbnRzLndyYXBBbGwoIGh0bWwgKTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c2VsZi5hcHBlbmQoIGh0bWwgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHR3cmFwOiBmdW5jdGlvbiggaHRtbCApIHtcblx0XHR2YXIgaXNGdW5jdGlvbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBodG1sICk7XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcEFsbCggaXNGdW5jdGlvbiA/IGh0bWwuY2FsbCh0aGlzLCBpKSA6IGh0bWwgKTtcblx0XHR9KTtcblx0fSxcblxuXHR1bndyYXA6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoICFqUXVlcnkubm9kZU5hbWUoIHRoaXMsIFwiYm9keVwiICkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnJlcGxhY2VXaXRoKCB0aGlzLmNoaWxkTm9kZXMgKTtcblx0XHRcdH1cblx0XHR9KS5lbmQoKTtcblx0fVxufSk7XG5cblxualF1ZXJ5LmV4cHIuZmlsdGVycy5oaWRkZW4gPSBmdW5jdGlvbiggZWxlbSApIHtcblx0Ly8gU3VwcG9ydDogT3BlcmEgPD0gMTIuMTJcblx0Ly8gT3BlcmEgcmVwb3J0cyBvZmZzZXRXaWR0aHMgYW5kIG9mZnNldEhlaWdodHMgbGVzcyB0aGFuIHplcm8gb24gc29tZSBlbGVtZW50c1xuXHRyZXR1cm4gZWxlbS5vZmZzZXRXaWR0aCA8PSAwICYmIGVsZW0ub2Zmc2V0SGVpZ2h0IDw9IDA7XG59O1xualF1ZXJ5LmV4cHIuZmlsdGVycy52aXNpYmxlID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHJldHVybiAhalF1ZXJ5LmV4cHIuZmlsdGVycy5oaWRkZW4oIGVsZW0gKTtcbn07XG5cblxuXG5cbnZhciByMjAgPSAvJTIwL2csXG5cdHJicmFja2V0ID0gL1xcW1xcXSQvLFxuXHRyQ1JMRiA9IC9cXHI/XFxuL2csXG5cdHJzdWJtaXR0ZXJUeXBlcyA9IC9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxcblx0cnN1Ym1pdHRhYmxlID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO1xuXG5mdW5jdGlvbiBidWlsZFBhcmFtcyggcHJlZml4LCBvYmosIHRyYWRpdGlvbmFsLCBhZGQgKSB7XG5cdHZhciBuYW1lO1xuXG5cdGlmICggalF1ZXJ5LmlzQXJyYXkoIG9iaiApICkge1xuXHRcdC8vIFNlcmlhbGl6ZSBhcnJheSBpdGVtLlxuXHRcdGpRdWVyeS5lYWNoKCBvYmosIGZ1bmN0aW9uKCBpLCB2ICkge1xuXHRcdFx0aWYgKCB0cmFkaXRpb25hbCB8fCByYnJhY2tldC50ZXN0KCBwcmVmaXggKSApIHtcblx0XHRcdFx0Ly8gVHJlYXQgZWFjaCBhcnJheSBpdGVtIGFzIGEgc2NhbGFyLlxuXHRcdFx0XHRhZGQoIHByZWZpeCwgdiApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBJdGVtIGlzIG5vbi1zY2FsYXIgKGFycmF5IG9yIG9iamVjdCksIGVuY29kZSBpdHMgbnVtZXJpYyBpbmRleC5cblx0XHRcdFx0YnVpbGRQYXJhbXMoIHByZWZpeCArIFwiW1wiICsgKCB0eXBlb2YgdiA9PT0gXCJvYmplY3RcIiA/IGkgOiBcIlwiICkgKyBcIl1cIiwgdiwgdHJhZGl0aW9uYWwsIGFkZCApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdH0gZWxzZSBpZiAoICF0cmFkaXRpb25hbCAmJiBqUXVlcnkudHlwZSggb2JqICkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0Ly8gU2VyaWFsaXplIG9iamVjdCBpdGVtLlxuXHRcdGZvciAoIG5hbWUgaW4gb2JqICkge1xuXHRcdFx0YnVpbGRQYXJhbXMoIHByZWZpeCArIFwiW1wiICsgbmFtZSArIFwiXVwiLCBvYmpbIG5hbWUgXSwgdHJhZGl0aW9uYWwsIGFkZCApO1xuXHRcdH1cblxuXHR9IGVsc2Uge1xuXHRcdC8vIFNlcmlhbGl6ZSBzY2FsYXIgaXRlbS5cblx0XHRhZGQoIHByZWZpeCwgb2JqICk7XG5cdH1cbn1cblxuLy8gU2VyaWFsaXplIGFuIGFycmF5IG9mIGZvcm0gZWxlbWVudHMgb3IgYSBzZXQgb2Zcbi8vIGtleS92YWx1ZXMgaW50byBhIHF1ZXJ5IHN0cmluZ1xualF1ZXJ5LnBhcmFtID0gZnVuY3Rpb24oIGEsIHRyYWRpdGlvbmFsICkge1xuXHR2YXIgcHJlZml4LFxuXHRcdHMgPSBbXSxcblx0XHRhZGQgPSBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcblx0XHRcdC8vIElmIHZhbHVlIGlzIGEgZnVuY3Rpb24sIGludm9rZSBpdCBhbmQgcmV0dXJuIGl0cyB2YWx1ZVxuXHRcdFx0dmFsdWUgPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSA/IHZhbHVlKCkgOiAoIHZhbHVlID09IG51bGwgPyBcIlwiIDogdmFsdWUgKTtcblx0XHRcdHNbIHMubGVuZ3RoIF0gPSBlbmNvZGVVUklDb21wb25lbnQoIGtleSApICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoIHZhbHVlICk7XG5cdFx0fTtcblxuXHQvLyBTZXQgdHJhZGl0aW9uYWwgdG8gdHJ1ZSBmb3IgalF1ZXJ5IDw9IDEuMy4yIGJlaGF2aW9yLlxuXHRpZiAoIHRyYWRpdGlvbmFsID09PSB1bmRlZmluZWQgKSB7XG5cdFx0dHJhZGl0aW9uYWwgPSBqUXVlcnkuYWpheFNldHRpbmdzICYmIGpRdWVyeS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWw7XG5cdH1cblxuXHQvLyBJZiBhbiBhcnJheSB3YXMgcGFzc2VkIGluLCBhc3N1bWUgdGhhdCBpdCBpcyBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzLlxuXHRpZiAoIGpRdWVyeS5pc0FycmF5KCBhICkgfHwgKCBhLmpxdWVyeSAmJiAhalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGEgKSApICkge1xuXHRcdC8vIFNlcmlhbGl6ZSB0aGUgZm9ybSBlbGVtZW50c1xuXHRcdGpRdWVyeS5lYWNoKCBhLCBmdW5jdGlvbigpIHtcblx0XHRcdGFkZCggdGhpcy5uYW1lLCB0aGlzLnZhbHVlICk7XG5cdFx0fSk7XG5cblx0fSBlbHNlIHtcblx0XHQvLyBJZiB0cmFkaXRpb25hbCwgZW5jb2RlIHRoZSBcIm9sZFwiIHdheSAodGhlIHdheSAxLjMuMiBvciBvbGRlclxuXHRcdC8vIGRpZCBpdCksIG90aGVyd2lzZSBlbmNvZGUgcGFyYW1zIHJlY3Vyc2l2ZWx5LlxuXHRcdGZvciAoIHByZWZpeCBpbiBhICkge1xuXHRcdFx0YnVpbGRQYXJhbXMoIHByZWZpeCwgYVsgcHJlZml4IF0sIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIHJlc3VsdGluZyBzZXJpYWxpemF0aW9uXG5cdHJldHVybiBzLmpvaW4oIFwiJlwiICkucmVwbGFjZSggcjIwLCBcIitcIiApO1xufTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdHNlcmlhbGl6ZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5wYXJhbSggdGhpcy5zZXJpYWxpemVBcnJheSgpICk7XG5cdH0sXG5cdHNlcmlhbGl6ZUFycmF5OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyBDYW4gYWRkIHByb3BIb29rIGZvciBcImVsZW1lbnRzXCIgdG8gZmlsdGVyIG9yIGFkZCBmb3JtIGVsZW1lbnRzXG5cdFx0XHR2YXIgZWxlbWVudHMgPSBqUXVlcnkucHJvcCggdGhpcywgXCJlbGVtZW50c1wiICk7XG5cdFx0XHRyZXR1cm4gZWxlbWVudHMgPyBqUXVlcnkubWFrZUFycmF5KCBlbGVtZW50cyApIDogdGhpcztcblx0XHR9KVxuXHRcdC5maWx0ZXIoZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgdHlwZSA9IHRoaXMudHlwZTtcblxuXHRcdFx0Ly8gVXNlIC5pcyggXCI6ZGlzYWJsZWRcIiApIHNvIHRoYXQgZmllbGRzZXRbZGlzYWJsZWRdIHdvcmtzXG5cdFx0XHRyZXR1cm4gdGhpcy5uYW1lICYmICFqUXVlcnkoIHRoaXMgKS5pcyggXCI6ZGlzYWJsZWRcIiApICYmXG5cdFx0XHRcdHJzdWJtaXR0YWJsZS50ZXN0KCB0aGlzLm5vZGVOYW1lICkgJiYgIXJzdWJtaXR0ZXJUeXBlcy50ZXN0KCB0eXBlICkgJiZcblx0XHRcdFx0KCB0aGlzLmNoZWNrZWQgfHwgIXJjaGVja2FibGVUeXBlLnRlc3QoIHR5cGUgKSApO1xuXHRcdH0pXG5cdFx0Lm1hcChmdW5jdGlvbiggaSwgZWxlbSApIHtcblx0XHRcdHZhciB2YWwgPSBqUXVlcnkoIHRoaXMgKS52YWwoKTtcblxuXHRcdFx0cmV0dXJuIHZhbCA9PSBudWxsID9cblx0XHRcdFx0bnVsbCA6XG5cdFx0XHRcdGpRdWVyeS5pc0FycmF5KCB2YWwgKSA/XG5cdFx0XHRcdFx0alF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcblx0XHRcdFx0XHR9KSA6XG5cdFx0XHRcdFx0eyBuYW1lOiBlbGVtLm5hbWUsIHZhbHVlOiB2YWwucmVwbGFjZSggckNSTEYsIFwiXFxyXFxuXCIgKSB9O1xuXHRcdH0pLmdldCgpO1xuXHR9XG59KTtcblxuXG5qUXVlcnkuYWpheFNldHRpbmdzLnhociA9IGZ1bmN0aW9uKCkge1xuXHR0cnkge1xuXHRcdHJldHVybiBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0fSBjYXRjaCggZSApIHt9XG59O1xuXG52YXIgeGhySWQgPSAwLFxuXHR4aHJDYWxsYmFja3MgPSB7fSxcblx0eGhyU3VjY2Vzc1N0YXR1cyA9IHtcblx0XHQvLyBmaWxlIHByb3RvY29sIGFsd2F5cyB5aWVsZHMgc3RhdHVzIGNvZGUgMCwgYXNzdW1lIDIwMFxuXHRcdDA6IDIwMCxcblx0XHQvLyBTdXBwb3J0OiBJRTlcblx0XHQvLyAjMTQ1MDogc29tZXRpbWVzIElFIHJldHVybnMgMTIyMyB3aGVuIGl0IHNob3VsZCBiZSAyMDRcblx0XHQxMjIzOiAyMDRcblx0fSxcblx0eGhyU3VwcG9ydGVkID0galF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIoKTtcblxuLy8gU3VwcG9ydDogSUU5XG4vLyBPcGVuIHJlcXVlc3RzIG11c3QgYmUgbWFudWFsbHkgYWJvcnRlZCBvbiB1bmxvYWQgKCM1MjgwKVxuLy8gU2VlIGh0dHBzOi8vc3VwcG9ydC5taWNyb3NvZnQuY29tL2tiLzI4NTY3NDYgZm9yIG1vcmUgaW5mb1xuaWYgKCB3aW5kb3cuYXR0YWNoRXZlbnQgKSB7XG5cdHdpbmRvdy5hdHRhY2hFdmVudCggXCJvbnVubG9hZFwiLCBmdW5jdGlvbigpIHtcblx0XHRmb3IgKCB2YXIga2V5IGluIHhockNhbGxiYWNrcyApIHtcblx0XHRcdHhockNhbGxiYWNrc1sga2V5IF0oKTtcblx0XHR9XG5cdH0pO1xufVxuXG5zdXBwb3J0LmNvcnMgPSAhIXhoclN1cHBvcnRlZCAmJiAoIFwid2l0aENyZWRlbnRpYWxzXCIgaW4geGhyU3VwcG9ydGVkICk7XG5zdXBwb3J0LmFqYXggPSB4aHJTdXBwb3J0ZWQgPSAhIXhoclN1cHBvcnRlZDtcblxualF1ZXJ5LmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cdHZhciBjYWxsYmFjaztcblxuXHQvLyBDcm9zcyBkb21haW4gb25seSBhbGxvd2VkIGlmIHN1cHBvcnRlZCB0aHJvdWdoIFhNTEh0dHBSZXF1ZXN0XG5cdGlmICggc3VwcG9ydC5jb3JzIHx8IHhoclN1cHBvcnRlZCAmJiAhb3B0aW9ucy5jcm9zc0RvbWFpbiApIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0c2VuZDogZnVuY3Rpb24oIGhlYWRlcnMsIGNvbXBsZXRlICkge1xuXHRcdFx0XHR2YXIgaSxcblx0XHRcdFx0XHR4aHIgPSBvcHRpb25zLnhocigpLFxuXHRcdFx0XHRcdGlkID0gKyt4aHJJZDtcblxuXHRcdFx0XHR4aHIub3Blbiggb3B0aW9ucy50eXBlLCBvcHRpb25zLnVybCwgb3B0aW9ucy5hc3luYywgb3B0aW9ucy51c2VybmFtZSwgb3B0aW9ucy5wYXNzd29yZCApO1xuXG5cdFx0XHRcdC8vIEFwcGx5IGN1c3RvbSBmaWVsZHMgaWYgcHJvdmlkZWRcblx0XHRcdFx0aWYgKCBvcHRpb25zLnhockZpZWxkcyApIHtcblx0XHRcdFx0XHRmb3IgKCBpIGluIG9wdGlvbnMueGhyRmllbGRzICkge1xuXHRcdFx0XHRcdFx0eGhyWyBpIF0gPSBvcHRpb25zLnhockZpZWxkc1sgaSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIE92ZXJyaWRlIG1pbWUgdHlwZSBpZiBuZWVkZWRcblx0XHRcdFx0aWYgKCBvcHRpb25zLm1pbWVUeXBlICYmIHhoci5vdmVycmlkZU1pbWVUeXBlICkge1xuXHRcdFx0XHRcdHhoci5vdmVycmlkZU1pbWVUeXBlKCBvcHRpb25zLm1pbWVUeXBlICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBYLVJlcXVlc3RlZC1XaXRoIGhlYWRlclxuXHRcdFx0XHQvLyBGb3IgY3Jvc3MtZG9tYWluIHJlcXVlc3RzLCBzZWVpbmcgYXMgY29uZGl0aW9ucyBmb3IgYSBwcmVmbGlnaHQgYXJlXG5cdFx0XHRcdC8vIGFraW4gdG8gYSBqaWdzYXcgcHV6emxlLCB3ZSBzaW1wbHkgbmV2ZXIgc2V0IGl0IHRvIGJlIHN1cmUuXG5cdFx0XHRcdC8vIChpdCBjYW4gYWx3YXlzIGJlIHNldCBvbiBhIHBlci1yZXF1ZXN0IGJhc2lzIG9yIGV2ZW4gdXNpbmcgYWpheFNldHVwKVxuXHRcdFx0XHQvLyBGb3Igc2FtZS1kb21haW4gcmVxdWVzdHMsIHdvbid0IGNoYW5nZSBoZWFkZXIgaWYgYWxyZWFkeSBwcm92aWRlZC5cblx0XHRcdFx0aWYgKCAhb3B0aW9ucy5jcm9zc0RvbWFpbiAmJiAhaGVhZGVyc1tcIlgtUmVxdWVzdGVkLVdpdGhcIl0gKSB7XG5cdFx0XHRcdFx0aGVhZGVyc1tcIlgtUmVxdWVzdGVkLVdpdGhcIl0gPSBcIlhNTEh0dHBSZXF1ZXN0XCI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTZXQgaGVhZGVyc1xuXHRcdFx0XHRmb3IgKCBpIGluIGhlYWRlcnMgKSB7XG5cdFx0XHRcdFx0eGhyLnNldFJlcXVlc3RIZWFkZXIoIGksIGhlYWRlcnNbIGkgXSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQ2FsbGJhY2tcblx0XHRcdFx0Y2FsbGJhY2sgPSBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0XHRkZWxldGUgeGhyQ2FsbGJhY2tzWyBpZCBdO1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjayA9IHhoci5vbmxvYWQgPSB4aHIub25lcnJvciA9IG51bGw7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCB0eXBlID09PSBcImFib3J0XCIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0eGhyLmFib3J0KCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIHR5cGUgPT09IFwiZXJyb3JcIiApIHtcblx0XHRcdFx0XHRcdFx0XHRjb21wbGV0ZShcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGZpbGU6IHByb3RvY29sIGFsd2F5cyB5aWVsZHMgc3RhdHVzIDA7IHNlZSAjODYwNSwgIzE0MjA3XG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzLFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1c1RleHRcblx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGNvbXBsZXRlKFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyU3VjY2Vzc1N0YXR1c1sgeGhyLnN0YXR1cyBdIHx8IHhoci5zdGF0dXMsXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzVGV4dCxcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFOVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWNjZXNzaW5nIGJpbmFyeS1kYXRhIHJlc3BvbnNlVGV4dCB0aHJvd3MgYW4gZXhjZXB0aW9uXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyAoIzExNDI2KVxuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZW9mIHhoci5yZXNwb25zZVRleHQgPT09IFwic3RyaW5nXCIgPyB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRleHQ6IHhoci5yZXNwb25zZVRleHRcblx0XHRcdFx0XHRcdFx0XHRcdH0gOiB1bmRlZmluZWQsXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKClcblx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvLyBMaXN0ZW4gdG8gZXZlbnRzXG5cdFx0XHRcdHhoci5vbmxvYWQgPSBjYWxsYmFjaygpO1xuXHRcdFx0XHR4aHIub25lcnJvciA9IGNhbGxiYWNrKFwiZXJyb3JcIik7XG5cblx0XHRcdFx0Ly8gQ3JlYXRlIHRoZSBhYm9ydCBjYWxsYmFja1xuXHRcdFx0XHRjYWxsYmFjayA9IHhockNhbGxiYWNrc1sgaWQgXSA9IGNhbGxiYWNrKFwiYWJvcnRcIik7XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHQvLyBEbyBzZW5kIHRoZSByZXF1ZXN0ICh0aGlzIG1heSByYWlzZSBhbiBleGNlcHRpb24pXG5cdFx0XHRcdFx0eGhyLnNlbmQoIG9wdGlvbnMuaGFzQ29udGVudCAmJiBvcHRpb25zLmRhdGEgfHwgbnVsbCApO1xuXHRcdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0XHQvLyAjMTQ2ODM6IE9ubHkgcmV0aHJvdyBpZiB0aGlzIGhhc24ndCBiZWVuIG5vdGlmaWVkIGFzIGFuIGVycm9yIHlldFxuXHRcdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblxuXHRcdFx0YWJvcnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG59KTtcblxuXG5cblxuLy8gSW5zdGFsbCBzY3JpcHQgZGF0YVR5cGVcbmpRdWVyeS5hamF4U2V0dXAoe1xuXHRhY2NlcHRzOiB7XG5cdFx0c2NyaXB0OiBcInRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0XCJcblx0fSxcblx0Y29udGVudHM6IHtcblx0XHRzY3JpcHQ6IC8oPzpqYXZhfGVjbWEpc2NyaXB0L1xuXHR9LFxuXHRjb252ZXJ0ZXJzOiB7XG5cdFx0XCJ0ZXh0IHNjcmlwdFwiOiBmdW5jdGlvbiggdGV4dCApIHtcblx0XHRcdGpRdWVyeS5nbG9iYWxFdmFsKCB0ZXh0ICk7XG5cdFx0XHRyZXR1cm4gdGV4dDtcblx0XHR9XG5cdH1cbn0pO1xuXG4vLyBIYW5kbGUgY2FjaGUncyBzcGVjaWFsIGNhc2UgYW5kIGNyb3NzRG9tYWluXG5qUXVlcnkuYWpheFByZWZpbHRlciggXCJzY3JpcHRcIiwgZnVuY3Rpb24oIHMgKSB7XG5cdGlmICggcy5jYWNoZSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdHMuY2FjaGUgPSBmYWxzZTtcblx0fVxuXHRpZiAoIHMuY3Jvc3NEb21haW4gKSB7XG5cdFx0cy50eXBlID0gXCJHRVRcIjtcblx0fVxufSk7XG5cbi8vIEJpbmQgc2NyaXB0IHRhZyBoYWNrIHRyYW5zcG9ydFxualF1ZXJ5LmFqYXhUcmFuc3BvcnQoIFwic2NyaXB0XCIsIGZ1bmN0aW9uKCBzICkge1xuXHQvLyBUaGlzIHRyYW5zcG9ydCBvbmx5IGRlYWxzIHdpdGggY3Jvc3MgZG9tYWluIHJlcXVlc3RzXG5cdGlmICggcy5jcm9zc0RvbWFpbiApIHtcblx0XHR2YXIgc2NyaXB0LCBjYWxsYmFjaztcblx0XHRyZXR1cm4ge1xuXHRcdFx0c2VuZDogZnVuY3Rpb24oIF8sIGNvbXBsZXRlICkge1xuXHRcdFx0XHRzY3JpcHQgPSBqUXVlcnkoXCI8c2NyaXB0PlwiKS5wcm9wKHtcblx0XHRcdFx0XHRhc3luYzogdHJ1ZSxcblx0XHRcdFx0XHRjaGFyc2V0OiBzLnNjcmlwdENoYXJzZXQsXG5cdFx0XHRcdFx0c3JjOiBzLnVybFxuXHRcdFx0XHR9KS5vbihcblx0XHRcdFx0XHRcImxvYWQgZXJyb3JcIixcblx0XHRcdFx0XHRjYWxsYmFjayA9IGZ1bmN0aW9uKCBldnQgKSB7XG5cdFx0XHRcdFx0XHRzY3JpcHQucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRjYWxsYmFjayA9IG51bGw7XG5cdFx0XHRcdFx0XHRpZiAoIGV2dCApIHtcblx0XHRcdFx0XHRcdFx0Y29tcGxldGUoIGV2dC50eXBlID09PSBcImVycm9yXCIgPyA0MDQgOiAyMDAsIGV2dC50eXBlICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpO1xuXHRcdFx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKCBzY3JpcHRbIDAgXSApO1xuXHRcdFx0fSxcblx0XHRcdGFib3J0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxufSk7XG5cblxuXG5cbnZhciBvbGRDYWxsYmFja3MgPSBbXSxcblx0cmpzb25wID0gLyg9KVxcPyg/PSZ8JCl8XFw/XFw/LztcblxuLy8gRGVmYXVsdCBqc29ucCBzZXR0aW5nc1xualF1ZXJ5LmFqYXhTZXR1cCh7XG5cdGpzb25wOiBcImNhbGxiYWNrXCIsXG5cdGpzb25wQ2FsbGJhY2s6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBjYWxsYmFjayA9IG9sZENhbGxiYWNrcy5wb3AoKSB8fCAoIGpRdWVyeS5leHBhbmRvICsgXCJfXCIgKyAoIG5vbmNlKysgKSApO1xuXHRcdHRoaXNbIGNhbGxiYWNrIF0gPSB0cnVlO1xuXHRcdHJldHVybiBjYWxsYmFjaztcblx0fVxufSk7XG5cbi8vIERldGVjdCwgbm9ybWFsaXplIG9wdGlvbnMgYW5kIGluc3RhbGwgY2FsbGJhY2tzIGZvciBqc29ucCByZXF1ZXN0c1xualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIFwianNvbiBqc29ucFwiLCBmdW5jdGlvbiggcywgb3JpZ2luYWxTZXR0aW5ncywganFYSFIgKSB7XG5cblx0dmFyIGNhbGxiYWNrTmFtZSwgb3ZlcndyaXR0ZW4sIHJlc3BvbnNlQ29udGFpbmVyLFxuXHRcdGpzb25Qcm9wID0gcy5qc29ucCAhPT0gZmFsc2UgJiYgKCByanNvbnAudGVzdCggcy51cmwgKSA/XG5cdFx0XHRcInVybFwiIDpcblx0XHRcdHR5cGVvZiBzLmRhdGEgPT09IFwic3RyaW5nXCIgJiYgISggcy5jb250ZW50VHlwZSB8fCBcIlwiICkuaW5kZXhPZihcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSAmJiByanNvbnAudGVzdCggcy5kYXRhICkgJiYgXCJkYXRhXCJcblx0XHQpO1xuXG5cdC8vIEhhbmRsZSBpZmYgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZSBpcyBcImpzb25wXCIgb3Igd2UgaGF2ZSBhIHBhcmFtZXRlciB0byBzZXRcblx0aWYgKCBqc29uUHJvcCB8fCBzLmRhdGFUeXBlc1sgMCBdID09PSBcImpzb25wXCIgKSB7XG5cblx0XHQvLyBHZXQgY2FsbGJhY2sgbmFtZSwgcmVtZW1iZXJpbmcgcHJlZXhpc3RpbmcgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIGl0XG5cdFx0Y2FsbGJhY2tOYW1lID0gcy5qc29ucENhbGxiYWNrID0galF1ZXJ5LmlzRnVuY3Rpb24oIHMuanNvbnBDYWxsYmFjayApID9cblx0XHRcdHMuanNvbnBDYWxsYmFjaygpIDpcblx0XHRcdHMuanNvbnBDYWxsYmFjaztcblxuXHRcdC8vIEluc2VydCBjYWxsYmFjayBpbnRvIHVybCBvciBmb3JtIGRhdGFcblx0XHRpZiAoIGpzb25Qcm9wICkge1xuXHRcdFx0c1sganNvblByb3AgXSA9IHNbIGpzb25Qcm9wIF0ucmVwbGFjZSggcmpzb25wLCBcIiQxXCIgKyBjYWxsYmFja05hbWUgKTtcblx0XHR9IGVsc2UgaWYgKCBzLmpzb25wICE9PSBmYWxzZSApIHtcblx0XHRcdHMudXJsICs9ICggcnF1ZXJ5LnRlc3QoIHMudXJsICkgPyBcIiZcIiA6IFwiP1wiICkgKyBzLmpzb25wICsgXCI9XCIgKyBjYWxsYmFja05hbWU7XG5cdFx0fVxuXG5cdFx0Ly8gVXNlIGRhdGEgY29udmVydGVyIHRvIHJldHJpZXZlIGpzb24gYWZ0ZXIgc2NyaXB0IGV4ZWN1dGlvblxuXHRcdHMuY29udmVydGVyc1tcInNjcmlwdCBqc29uXCJdID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoICFyZXNwb25zZUNvbnRhaW5lciApIHtcblx0XHRcdFx0alF1ZXJ5LmVycm9yKCBjYWxsYmFja05hbWUgKyBcIiB3YXMgbm90IGNhbGxlZFwiICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzcG9uc2VDb250YWluZXJbIDAgXTtcblx0XHR9O1xuXG5cdFx0Ly8gZm9yY2UganNvbiBkYXRhVHlwZVxuXHRcdHMuZGF0YVR5cGVzWyAwIF0gPSBcImpzb25cIjtcblxuXHRcdC8vIEluc3RhbGwgY2FsbGJhY2tcblx0XHRvdmVyd3JpdHRlbiA9IHdpbmRvd1sgY2FsbGJhY2tOYW1lIF07XG5cdFx0d2luZG93WyBjYWxsYmFja05hbWUgXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmVzcG9uc2VDb250YWluZXIgPSBhcmd1bWVudHM7XG5cdFx0fTtcblxuXHRcdC8vIENsZWFuLXVwIGZ1bmN0aW9uIChmaXJlcyBhZnRlciBjb252ZXJ0ZXJzKVxuXHRcdGpxWEhSLmFsd2F5cyhmdW5jdGlvbigpIHtcblx0XHRcdC8vIFJlc3RvcmUgcHJlZXhpc3RpbmcgdmFsdWVcblx0XHRcdHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBvdmVyd3JpdHRlbjtcblxuXHRcdFx0Ly8gU2F2ZSBiYWNrIGFzIGZyZWVcblx0XHRcdGlmICggc1sgY2FsbGJhY2tOYW1lIF0gKSB7XG5cdFx0XHRcdC8vIG1ha2Ugc3VyZSB0aGF0IHJlLXVzaW5nIHRoZSBvcHRpb25zIGRvZXNuJ3Qgc2NyZXcgdGhpbmdzIGFyb3VuZFxuXHRcdFx0XHRzLmpzb25wQ2FsbGJhY2sgPSBvcmlnaW5hbFNldHRpbmdzLmpzb25wQ2FsbGJhY2s7XG5cblx0XHRcdFx0Ly8gc2F2ZSB0aGUgY2FsbGJhY2sgbmFtZSBmb3IgZnV0dXJlIHVzZVxuXHRcdFx0XHRvbGRDYWxsYmFja3MucHVzaCggY2FsbGJhY2tOYW1lICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENhbGwgaWYgaXQgd2FzIGEgZnVuY3Rpb24gYW5kIHdlIGhhdmUgYSByZXNwb25zZVxuXHRcdFx0aWYgKCByZXNwb25zZUNvbnRhaW5lciAmJiBqUXVlcnkuaXNGdW5jdGlvbiggb3ZlcndyaXR0ZW4gKSApIHtcblx0XHRcdFx0b3ZlcndyaXR0ZW4oIHJlc3BvbnNlQ29udGFpbmVyWyAwIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0cmVzcG9uc2VDb250YWluZXIgPSBvdmVyd3JpdHRlbiA9IHVuZGVmaW5lZDtcblx0XHR9KTtcblxuXHRcdC8vIERlbGVnYXRlIHRvIHNjcmlwdFxuXHRcdHJldHVybiBcInNjcmlwdFwiO1xuXHR9XG59KTtcblxuXG5cblxuLy8gZGF0YTogc3RyaW5nIG9mIGh0bWxcbi8vIGNvbnRleHQgKG9wdGlvbmFsKTogSWYgc3BlY2lmaWVkLCB0aGUgZnJhZ21lbnQgd2lsbCBiZSBjcmVhdGVkIGluIHRoaXMgY29udGV4dCwgZGVmYXVsdHMgdG8gZG9jdW1lbnRcbi8vIGtlZXBTY3JpcHRzIChvcHRpb25hbCk6IElmIHRydWUsIHdpbGwgaW5jbHVkZSBzY3JpcHRzIHBhc3NlZCBpbiB0aGUgaHRtbCBzdHJpbmdcbmpRdWVyeS5wYXJzZUhUTUwgPSBmdW5jdGlvbiggZGF0YSwgY29udGV4dCwga2VlcFNjcmlwdHMgKSB7XG5cdGlmICggIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblx0aWYgKCB0eXBlb2YgY29udGV4dCA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0a2VlcFNjcmlwdHMgPSBjb250ZXh0O1xuXHRcdGNvbnRleHQgPSBmYWxzZTtcblx0fVxuXHRjb250ZXh0ID0gY29udGV4dCB8fCBkb2N1bWVudDtcblxuXHR2YXIgcGFyc2VkID0gcnNpbmdsZVRhZy5leGVjKCBkYXRhICksXG5cdFx0c2NyaXB0cyA9ICFrZWVwU2NyaXB0cyAmJiBbXTtcblxuXHQvLyBTaW5nbGUgdGFnXG5cdGlmICggcGFyc2VkICkge1xuXHRcdHJldHVybiBbIGNvbnRleHQuY3JlYXRlRWxlbWVudCggcGFyc2VkWzFdICkgXTtcblx0fVxuXG5cdHBhcnNlZCA9IGpRdWVyeS5idWlsZEZyYWdtZW50KCBbIGRhdGEgXSwgY29udGV4dCwgc2NyaXB0cyApO1xuXG5cdGlmICggc2NyaXB0cyAmJiBzY3JpcHRzLmxlbmd0aCApIHtcblx0XHRqUXVlcnkoIHNjcmlwdHMgKS5yZW1vdmUoKTtcblx0fVxuXG5cdHJldHVybiBqUXVlcnkubWVyZ2UoIFtdLCBwYXJzZWQuY2hpbGROb2RlcyApO1xufTtcblxuXG4vLyBLZWVwIGEgY29weSBvZiB0aGUgb2xkIGxvYWQgbWV0aG9kXG52YXIgX2xvYWQgPSBqUXVlcnkuZm4ubG9hZDtcblxuLyoqXG4gKiBMb2FkIGEgdXJsIGludG8gYSBwYWdlXG4gKi9cbmpRdWVyeS5mbi5sb2FkID0gZnVuY3Rpb24oIHVybCwgcGFyYW1zLCBjYWxsYmFjayApIHtcblx0aWYgKCB0eXBlb2YgdXJsICE9PSBcInN0cmluZ1wiICYmIF9sb2FkICkge1xuXHRcdHJldHVybiBfbG9hZC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdH1cblxuXHR2YXIgc2VsZWN0b3IsIHR5cGUsIHJlc3BvbnNlLFxuXHRcdHNlbGYgPSB0aGlzLFxuXHRcdG9mZiA9IHVybC5pbmRleE9mKFwiIFwiKTtcblxuXHRpZiAoIG9mZiA+PSAwICkge1xuXHRcdHNlbGVjdG9yID0galF1ZXJ5LnRyaW0oIHVybC5zbGljZSggb2ZmICkgKTtcblx0XHR1cmwgPSB1cmwuc2xpY2UoIDAsIG9mZiApO1xuXHR9XG5cblx0Ly8gSWYgaXQncyBhIGZ1bmN0aW9uXG5cdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHBhcmFtcyApICkge1xuXG5cdFx0Ly8gV2UgYXNzdW1lIHRoYXQgaXQncyB0aGUgY2FsbGJhY2tcblx0XHRjYWxsYmFjayA9IHBhcmFtcztcblx0XHRwYXJhbXMgPSB1bmRlZmluZWQ7XG5cblx0Ly8gT3RoZXJ3aXNlLCBidWlsZCBhIHBhcmFtIHN0cmluZ1xuXHR9IGVsc2UgaWYgKCBwYXJhbXMgJiYgdHlwZW9mIHBhcmFtcyA9PT0gXCJvYmplY3RcIiApIHtcblx0XHR0eXBlID0gXCJQT1NUXCI7XG5cdH1cblxuXHQvLyBJZiB3ZSBoYXZlIGVsZW1lbnRzIHRvIG1vZGlmeSwgbWFrZSB0aGUgcmVxdWVzdFxuXHRpZiAoIHNlbGYubGVuZ3RoID4gMCApIHtcblx0XHRqUXVlcnkuYWpheCh7XG5cdFx0XHR1cmw6IHVybCxcblxuXHRcdFx0Ly8gaWYgXCJ0eXBlXCIgdmFyaWFibGUgaXMgdW5kZWZpbmVkLCB0aGVuIFwiR0VUXCIgbWV0aG9kIHdpbGwgYmUgdXNlZFxuXHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdGRhdGFUeXBlOiBcImh0bWxcIixcblx0XHRcdGRhdGE6IHBhcmFtc1xuXHRcdH0pLmRvbmUoZnVuY3Rpb24oIHJlc3BvbnNlVGV4dCApIHtcblxuXHRcdFx0Ly8gU2F2ZSByZXNwb25zZSBmb3IgdXNlIGluIGNvbXBsZXRlIGNhbGxiYWNrXG5cdFx0XHRyZXNwb25zZSA9IGFyZ3VtZW50cztcblxuXHRcdFx0c2VsZi5odG1sKCBzZWxlY3RvciA/XG5cblx0XHRcdFx0Ly8gSWYgYSBzZWxlY3RvciB3YXMgc3BlY2lmaWVkLCBsb2NhdGUgdGhlIHJpZ2h0IGVsZW1lbnRzIGluIGEgZHVtbXkgZGl2XG5cdFx0XHRcdC8vIEV4Y2x1ZGUgc2NyaXB0cyB0byBhdm9pZCBJRSAnUGVybWlzc2lvbiBEZW5pZWQnIGVycm9yc1xuXHRcdFx0XHRqUXVlcnkoXCI8ZGl2PlwiKS5hcHBlbmQoIGpRdWVyeS5wYXJzZUhUTUwoIHJlc3BvbnNlVGV4dCApICkuZmluZCggc2VsZWN0b3IgKSA6XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIHVzZSB0aGUgZnVsbCByZXN1bHRcblx0XHRcdFx0cmVzcG9uc2VUZXh0ICk7XG5cblx0XHR9KS5jb21wbGV0ZSggY2FsbGJhY2sgJiYgZnVuY3Rpb24oIGpxWEhSLCBzdGF0dXMgKSB7XG5cdFx0XHRzZWxmLmVhY2goIGNhbGxiYWNrLCByZXNwb25zZSB8fCBbIGpxWEhSLnJlc3BvbnNlVGV4dCwgc3RhdHVzLCBqcVhIUiBdICk7XG5cdFx0fSk7XG5cdH1cblxuXHRyZXR1cm4gdGhpcztcbn07XG5cblxuXG5cbi8vIEF0dGFjaCBhIGJ1bmNoIG9mIGZ1bmN0aW9ucyBmb3IgaGFuZGxpbmcgY29tbW9uIEFKQVggZXZlbnRzXG5qUXVlcnkuZWFjaCggWyBcImFqYXhTdGFydFwiLCBcImFqYXhTdG9wXCIsIFwiYWpheENvbXBsZXRlXCIsIFwiYWpheEVycm9yXCIsIFwiYWpheFN1Y2Nlc3NcIiwgXCJhamF4U2VuZFwiIF0sIGZ1bmN0aW9uKCBpLCB0eXBlICkge1xuXHRqUXVlcnkuZm5bIHR5cGUgXSA9IGZ1bmN0aW9uKCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZSwgZm4gKTtcblx0fTtcbn0pO1xuXG5cblxuXG5qUXVlcnkuZXhwci5maWx0ZXJzLmFuaW1hdGVkID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHJldHVybiBqUXVlcnkuZ3JlcChqUXVlcnkudGltZXJzLCBmdW5jdGlvbiggZm4gKSB7XG5cdFx0cmV0dXJuIGVsZW0gPT09IGZuLmVsZW07XG5cdH0pLmxlbmd0aDtcbn07XG5cblxuXG5cbnZhciBkb2NFbGVtID0gd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuLyoqXG4gKiBHZXRzIGEgd2luZG93IGZyb20gYW4gZWxlbWVudFxuICovXG5mdW5jdGlvbiBnZXRXaW5kb3coIGVsZW0gKSB7XG5cdHJldHVybiBqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSA/IGVsZW0gOiBlbGVtLm5vZGVUeXBlID09PSA5ICYmIGVsZW0uZGVmYXVsdFZpZXc7XG59XG5cbmpRdWVyeS5vZmZzZXQgPSB7XG5cdHNldE9mZnNldDogZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIGkgKSB7XG5cdFx0dmFyIGN1clBvc2l0aW9uLCBjdXJMZWZ0LCBjdXJDU1NUb3AsIGN1clRvcCwgY3VyT2Zmc2V0LCBjdXJDU1NMZWZ0LCBjYWxjdWxhdGVQb3NpdGlvbixcblx0XHRcdHBvc2l0aW9uID0galF1ZXJ5LmNzcyggZWxlbSwgXCJwb3NpdGlvblwiICksXG5cdFx0XHRjdXJFbGVtID0galF1ZXJ5KCBlbGVtICksXG5cdFx0XHRwcm9wcyA9IHt9O1xuXG5cdFx0Ly8gU2V0IHBvc2l0aW9uIGZpcnN0LCBpbi1jYXNlIHRvcC9sZWZ0IGFyZSBzZXQgZXZlbiBvbiBzdGF0aWMgZWxlbVxuXHRcdGlmICggcG9zaXRpb24gPT09IFwic3RhdGljXCIgKSB7XG5cdFx0XHRlbGVtLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xuXHRcdH1cblxuXHRcdGN1ck9mZnNldCA9IGN1ckVsZW0ub2Zmc2V0KCk7XG5cdFx0Y3VyQ1NTVG9wID0galF1ZXJ5LmNzcyggZWxlbSwgXCJ0b3BcIiApO1xuXHRcdGN1ckNTU0xlZnQgPSBqUXVlcnkuY3NzKCBlbGVtLCBcImxlZnRcIiApO1xuXHRcdGNhbGN1bGF0ZVBvc2l0aW9uID0gKCBwb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiIHx8IHBvc2l0aW9uID09PSBcImZpeGVkXCIgKSAmJlxuXHRcdFx0KCBjdXJDU1NUb3AgKyBjdXJDU1NMZWZ0ICkuaW5kZXhPZihcImF1dG9cIikgPiAtMTtcblxuXHRcdC8vIE5lZWQgdG8gYmUgYWJsZSB0byBjYWxjdWxhdGUgcG9zaXRpb24gaWYgZWl0aGVyXG5cdFx0Ly8gdG9wIG9yIGxlZnQgaXMgYXV0byBhbmQgcG9zaXRpb24gaXMgZWl0aGVyIGFic29sdXRlIG9yIGZpeGVkXG5cdFx0aWYgKCBjYWxjdWxhdGVQb3NpdGlvbiApIHtcblx0XHRcdGN1clBvc2l0aW9uID0gY3VyRWxlbS5wb3NpdGlvbigpO1xuXHRcdFx0Y3VyVG9wID0gY3VyUG9zaXRpb24udG9wO1xuXHRcdFx0Y3VyTGVmdCA9IGN1clBvc2l0aW9uLmxlZnQ7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y3VyVG9wID0gcGFyc2VGbG9hdCggY3VyQ1NTVG9wICkgfHwgMDtcblx0XHRcdGN1ckxlZnQgPSBwYXJzZUZsb2F0KCBjdXJDU1NMZWZ0ICkgfHwgMDtcblx0XHR9XG5cblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBvcHRpb25zICkgKSB7XG5cdFx0XHRvcHRpb25zID0gb3B0aW9ucy5jYWxsKCBlbGVtLCBpLCBjdXJPZmZzZXQgKTtcblx0XHR9XG5cblx0XHRpZiAoIG9wdGlvbnMudG9wICE9IG51bGwgKSB7XG5cdFx0XHRwcm9wcy50b3AgPSAoIG9wdGlvbnMudG9wIC0gY3VyT2Zmc2V0LnRvcCApICsgY3VyVG9wO1xuXHRcdH1cblx0XHRpZiAoIG9wdGlvbnMubGVmdCAhPSBudWxsICkge1xuXHRcdFx0cHJvcHMubGVmdCA9ICggb3B0aW9ucy5sZWZ0IC0gY3VyT2Zmc2V0LmxlZnQgKSArIGN1ckxlZnQ7XG5cdFx0fVxuXG5cdFx0aWYgKCBcInVzaW5nXCIgaW4gb3B0aW9ucyApIHtcblx0XHRcdG9wdGlvbnMudXNpbmcuY2FsbCggZWxlbSwgcHJvcHMgKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjdXJFbGVtLmNzcyggcHJvcHMgKTtcblx0XHR9XG5cdH1cbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRvZmZzZXQ6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdHJldHVybiBvcHRpb25zID09PSB1bmRlZmluZWQgP1xuXHRcdFx0XHR0aGlzIDpcblx0XHRcdFx0dGhpcy5lYWNoKGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRcdGpRdWVyeS5vZmZzZXQuc2V0T2Zmc2V0KCB0aGlzLCBvcHRpb25zLCBpICk7XG5cdFx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHZhciBkb2NFbGVtLCB3aW4sXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdLFxuXHRcdFx0Ym94ID0geyB0b3A6IDAsIGxlZnQ6IDAgfSxcblx0XHRcdGRvYyA9IGVsZW0gJiYgZWxlbS5vd25lckRvY3VtZW50O1xuXG5cdFx0aWYgKCAhZG9jICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGRvY0VsZW0gPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXG5cdFx0Ly8gTWFrZSBzdXJlIGl0J3Mgbm90IGEgZGlzY29ubmVjdGVkIERPTSBub2RlXG5cdFx0aWYgKCAhalF1ZXJ5LmNvbnRhaW5zKCBkb2NFbGVtLCBlbGVtICkgKSB7XG5cdFx0XHRyZXR1cm4gYm94O1xuXHRcdH1cblxuXHRcdC8vIFN1cHBvcnQ6IEJsYWNrQmVycnkgNSwgaU9TIDMgKG9yaWdpbmFsIGlQaG9uZSlcblx0XHQvLyBJZiB3ZSBkb24ndCBoYXZlIGdCQ1IsIGp1c3QgdXNlIDAsMCByYXRoZXIgdGhhbiBlcnJvclxuXHRcdGlmICggdHlwZW9mIGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICE9PSBzdHJ1bmRlZmluZWQgKSB7XG5cdFx0XHRib3ggPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdH1cblx0XHR3aW4gPSBnZXRXaW5kb3coIGRvYyApO1xuXHRcdHJldHVybiB7XG5cdFx0XHR0b3A6IGJveC50b3AgKyB3aW4ucGFnZVlPZmZzZXQgLSBkb2NFbGVtLmNsaWVudFRvcCxcblx0XHRcdGxlZnQ6IGJveC5sZWZ0ICsgd2luLnBhZ2VYT2Zmc2V0IC0gZG9jRWxlbS5jbGllbnRMZWZ0XG5cdFx0fTtcblx0fSxcblxuXHRwb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCAhdGhpc1sgMCBdICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHZhciBvZmZzZXRQYXJlbnQsIG9mZnNldCxcblx0XHRcdGVsZW0gPSB0aGlzWyAwIF0sXG5cdFx0XHRwYXJlbnRPZmZzZXQgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuXG5cdFx0Ly8gRml4ZWQgZWxlbWVudHMgYXJlIG9mZnNldCBmcm9tIHdpbmRvdyAocGFyZW50T2Zmc2V0ID0ge3RvcDowLCBsZWZ0OiAwfSwgYmVjYXVzZSBpdCBpcyBpdHMgb25seSBvZmZzZXQgcGFyZW50XG5cdFx0aWYgKCBqUXVlcnkuY3NzKCBlbGVtLCBcInBvc2l0aW9uXCIgKSA9PT0gXCJmaXhlZFwiICkge1xuXHRcdFx0Ly8gQXNzdW1lIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBpcyB0aGVyZSB3aGVuIGNvbXB1dGVkIHBvc2l0aW9uIGlzIGZpeGVkXG5cdFx0XHRvZmZzZXQgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIEdldCAqcmVhbCogb2Zmc2V0UGFyZW50XG5cdFx0XHRvZmZzZXRQYXJlbnQgPSB0aGlzLm9mZnNldFBhcmVudCgpO1xuXG5cdFx0XHQvLyBHZXQgY29ycmVjdCBvZmZzZXRzXG5cdFx0XHRvZmZzZXQgPSB0aGlzLm9mZnNldCgpO1xuXHRcdFx0aWYgKCAhalF1ZXJ5Lm5vZGVOYW1lKCBvZmZzZXRQYXJlbnRbIDAgXSwgXCJodG1sXCIgKSApIHtcblx0XHRcdFx0cGFyZW50T2Zmc2V0ID0gb2Zmc2V0UGFyZW50Lm9mZnNldCgpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgb2Zmc2V0UGFyZW50IGJvcmRlcnNcblx0XHRcdHBhcmVudE9mZnNldC50b3AgKz0galF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50WyAwIF0sIFwiYm9yZGVyVG9wV2lkdGhcIiwgdHJ1ZSApO1xuXHRcdFx0cGFyZW50T2Zmc2V0LmxlZnQgKz0galF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50WyAwIF0sIFwiYm9yZGVyTGVmdFdpZHRoXCIsIHRydWUgKTtcblx0XHR9XG5cblx0XHQvLyBTdWJ0cmFjdCBwYXJlbnQgb2Zmc2V0cyBhbmQgZWxlbWVudCBtYXJnaW5zXG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogb2Zmc2V0LnRvcCAtIHBhcmVudE9mZnNldC50b3AgLSBqUXVlcnkuY3NzKCBlbGVtLCBcIm1hcmdpblRvcFwiLCB0cnVlICksXG5cdFx0XHRsZWZ0OiBvZmZzZXQubGVmdCAtIHBhcmVudE9mZnNldC5sZWZ0IC0galF1ZXJ5LmNzcyggZWxlbSwgXCJtYXJnaW5MZWZ0XCIsIHRydWUgKVxuXHRcdH07XG5cdH0sXG5cblx0b2Zmc2V0UGFyZW50OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgb2Zmc2V0UGFyZW50ID0gdGhpcy5vZmZzZXRQYXJlbnQgfHwgZG9jRWxlbTtcblxuXHRcdFx0d2hpbGUgKCBvZmZzZXRQYXJlbnQgJiYgKCAhalF1ZXJ5Lm5vZGVOYW1lKCBvZmZzZXRQYXJlbnQsIFwiaHRtbFwiICkgJiYgalF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCBcInBvc2l0aW9uXCIgKSA9PT0gXCJzdGF0aWNcIiApICkge1xuXHRcdFx0XHRvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0UGFyZW50O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gb2Zmc2V0UGFyZW50IHx8IGRvY0VsZW07XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG4vLyBDcmVhdGUgc2Nyb2xsTGVmdCBhbmQgc2Nyb2xsVG9wIG1ldGhvZHNcbmpRdWVyeS5lYWNoKCB7IHNjcm9sbExlZnQ6IFwicGFnZVhPZmZzZXRcIiwgc2Nyb2xsVG9wOiBcInBhZ2VZT2Zmc2V0XCIgfSwgZnVuY3Rpb24oIG1ldGhvZCwgcHJvcCApIHtcblx0dmFyIHRvcCA9IFwicGFnZVlPZmZzZXRcIiA9PT0gcHJvcDtcblxuXHRqUXVlcnkuZm5bIG1ldGhvZCBdID0gZnVuY3Rpb24oIHZhbCApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbWV0aG9kLCB2YWwgKSB7XG5cdFx0XHR2YXIgd2luID0gZ2V0V2luZG93KCBlbGVtICk7XG5cblx0XHRcdGlmICggdmFsID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiB3aW4gPyB3aW5bIHByb3AgXSA6IGVsZW1bIG1ldGhvZCBdO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHdpbiApIHtcblx0XHRcdFx0d2luLnNjcm9sbFRvKFxuXHRcdFx0XHRcdCF0b3AgPyB2YWwgOiB3aW5kb3cucGFnZVhPZmZzZXQsXG5cdFx0XHRcdFx0dG9wID8gdmFsIDogd2luZG93LnBhZ2VZT2Zmc2V0XG5cdFx0XHRcdCk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsZW1bIG1ldGhvZCBdID0gdmFsO1xuXHRcdFx0fVxuXHRcdH0sIG1ldGhvZCwgdmFsLCBhcmd1bWVudHMubGVuZ3RoLCBudWxsICk7XG5cdH07XG59KTtcblxuLy8gU3VwcG9ydDogU2FmYXJpPDcrLCBDaHJvbWU8MzcrXG4vLyBBZGQgdGhlIHRvcC9sZWZ0IGNzc0hvb2tzIHVzaW5nIGpRdWVyeS5mbi5wb3NpdGlvblxuLy8gV2Via2l0IGJ1ZzogaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTI5MDg0XG4vLyBCbGluayBidWc6IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0yMjkyODBcbi8vIGdldENvbXB1dGVkU3R5bGUgcmV0dXJucyBwZXJjZW50IHdoZW4gc3BlY2lmaWVkIGZvciB0b3AvbGVmdC9ib3R0b20vcmlnaHQ7XG4vLyByYXRoZXIgdGhhbiBtYWtlIHRoZSBjc3MgbW9kdWxlIGRlcGVuZCBvbiB0aGUgb2Zmc2V0IG1vZHVsZSwganVzdCBjaGVjayBmb3IgaXQgaGVyZVxualF1ZXJ5LmVhY2goIFsgXCJ0b3BcIiwgXCJsZWZ0XCIgXSwgZnVuY3Rpb24oIGksIHByb3AgKSB7XG5cdGpRdWVyeS5jc3NIb29rc1sgcHJvcCBdID0gYWRkR2V0SG9va0lmKCBzdXBwb3J0LnBpeGVsUG9zaXRpb24sXG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdFx0aWYgKCBjb21wdXRlZCApIHtcblx0XHRcdFx0Y29tcHV0ZWQgPSBjdXJDU1MoIGVsZW0sIHByb3AgKTtcblx0XHRcdFx0Ly8gSWYgY3VyQ1NTIHJldHVybnMgcGVyY2VudGFnZSwgZmFsbGJhY2sgdG8gb2Zmc2V0XG5cdFx0XHRcdHJldHVybiBybnVtbm9ucHgudGVzdCggY29tcHV0ZWQgKSA/XG5cdFx0XHRcdFx0alF1ZXJ5KCBlbGVtICkucG9zaXRpb24oKVsgcHJvcCBdICsgXCJweFwiIDpcblx0XHRcdFx0XHRjb21wdXRlZDtcblx0XHRcdH1cblx0XHR9XG5cdCk7XG59KTtcblxuXG4vLyBDcmVhdGUgaW5uZXJIZWlnaHQsIGlubmVyV2lkdGgsIGhlaWdodCwgd2lkdGgsIG91dGVySGVpZ2h0IGFuZCBvdXRlcldpZHRoIG1ldGhvZHNcbmpRdWVyeS5lYWNoKCB7IEhlaWdodDogXCJoZWlnaHRcIiwgV2lkdGg6IFwid2lkdGhcIiB9LCBmdW5jdGlvbiggbmFtZSwgdHlwZSApIHtcblx0alF1ZXJ5LmVhY2goIHsgcGFkZGluZzogXCJpbm5lclwiICsgbmFtZSwgY29udGVudDogdHlwZSwgXCJcIjogXCJvdXRlclwiICsgbmFtZSB9LCBmdW5jdGlvbiggZGVmYXVsdEV4dHJhLCBmdW5jTmFtZSApIHtcblx0XHQvLyBNYXJnaW4gaXMgb25seSBmb3Igb3V0ZXJIZWlnaHQsIG91dGVyV2lkdGhcblx0XHRqUXVlcnkuZm5bIGZ1bmNOYW1lIF0gPSBmdW5jdGlvbiggbWFyZ2luLCB2YWx1ZSApIHtcblx0XHRcdHZhciBjaGFpbmFibGUgPSBhcmd1bWVudHMubGVuZ3RoICYmICggZGVmYXVsdEV4dHJhIHx8IHR5cGVvZiBtYXJnaW4gIT09IFwiYm9vbGVhblwiICksXG5cdFx0XHRcdGV4dHJhID0gZGVmYXVsdEV4dHJhIHx8ICggbWFyZ2luID09PSB0cnVlIHx8IHZhbHVlID09PSB0cnVlID8gXCJtYXJnaW5cIiA6IFwiYm9yZGVyXCIgKTtcblxuXHRcdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIHR5cGUsIHZhbHVlICkge1xuXHRcdFx0XHR2YXIgZG9jO1xuXG5cdFx0XHRcdGlmICggalF1ZXJ5LmlzV2luZG93KCBlbGVtICkgKSB7XG5cdFx0XHRcdFx0Ly8gQXMgb2YgNS84LzIwMTIgdGhpcyB3aWxsIHlpZWxkIGluY29ycmVjdCByZXN1bHRzIGZvciBNb2JpbGUgU2FmYXJpLCBidXQgdGhlcmVcblx0XHRcdFx0XHQvLyBpc24ndCBhIHdob2xlIGxvdCB3ZSBjYW4gZG8uIFNlZSBwdWxsIHJlcXVlc3QgYXQgdGhpcyBVUkwgZm9yIGRpc2N1c3Npb246XG5cdFx0XHRcdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvcHVsbC83NjRcblx0XHRcdFx0XHRyZXR1cm4gZWxlbS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbIFwiY2xpZW50XCIgKyBuYW1lIF07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBHZXQgZG9jdW1lbnQgd2lkdGggb3IgaGVpZ2h0XG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0XHRkb2MgPSBlbGVtLmRvY3VtZW50RWxlbWVudDtcblxuXHRcdFx0XHRcdC8vIEVpdGhlciBzY3JvbGxbV2lkdGgvSGVpZ2h0XSBvciBvZmZzZXRbV2lkdGgvSGVpZ2h0XSBvciBjbGllbnRbV2lkdGgvSGVpZ2h0XSxcblx0XHRcdFx0XHQvLyB3aGljaGV2ZXIgaXMgZ3JlYXRlc3Rcblx0XHRcdFx0XHRyZXR1cm4gTWF0aC5tYXgoXG5cdFx0XHRcdFx0XHRlbGVtLmJvZHlbIFwic2Nyb2xsXCIgKyBuYW1lIF0sIGRvY1sgXCJzY3JvbGxcIiArIG5hbWUgXSxcblx0XHRcdFx0XHRcdGVsZW0uYm9keVsgXCJvZmZzZXRcIiArIG5hbWUgXSwgZG9jWyBcIm9mZnNldFwiICsgbmFtZSBdLFxuXHRcdFx0XHRcdFx0ZG9jWyBcImNsaWVudFwiICsgbmFtZSBdXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID9cblx0XHRcdFx0XHQvLyBHZXQgd2lkdGggb3IgaGVpZ2h0IG9uIHRoZSBlbGVtZW50LCByZXF1ZXN0aW5nIGJ1dCBub3QgZm9yY2luZyBwYXJzZUZsb2F0XG5cdFx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgdHlwZSwgZXh0cmEgKSA6XG5cblx0XHRcdFx0XHQvLyBTZXQgd2lkdGggb3IgaGVpZ2h0IG9uIHRoZSBlbGVtZW50XG5cdFx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCB0eXBlLCB2YWx1ZSwgZXh0cmEgKTtcblx0XHRcdH0sIHR5cGUsIGNoYWluYWJsZSA/IG1hcmdpbiA6IHVuZGVmaW5lZCwgY2hhaW5hYmxlLCBudWxsICk7XG5cdFx0fTtcblx0fSk7XG59KTtcblxuXG4vLyBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIGNvbnRhaW5lZCBpbiB0aGUgbWF0Y2hlZCBlbGVtZW50IHNldFxualF1ZXJ5LmZuLnNpemUgPSBmdW5jdGlvbigpIHtcblx0cmV0dXJuIHRoaXMubGVuZ3RoO1xufTtcblxualF1ZXJ5LmZuLmFuZFNlbGYgPSBqUXVlcnkuZm4uYWRkQmFjaztcblxuXG5cblxuLy8gUmVnaXN0ZXIgYXMgYSBuYW1lZCBBTUQgbW9kdWxlLCBzaW5jZSBqUXVlcnkgY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoIG90aGVyXG4vLyBmaWxlcyB0aGF0IG1heSB1c2UgZGVmaW5lLCBidXQgbm90IHZpYSBhIHByb3BlciBjb25jYXRlbmF0aW9uIHNjcmlwdCB0aGF0XG4vLyB1bmRlcnN0YW5kcyBhbm9ueW1vdXMgQU1EIG1vZHVsZXMuIEEgbmFtZWQgQU1EIGlzIHNhZmVzdCBhbmQgbW9zdCByb2J1c3Rcbi8vIHdheSB0byByZWdpc3Rlci4gTG93ZXJjYXNlIGpxdWVyeSBpcyB1c2VkIGJlY2F1c2UgQU1EIG1vZHVsZSBuYW1lcyBhcmVcbi8vIGRlcml2ZWQgZnJvbSBmaWxlIG5hbWVzLCBhbmQgalF1ZXJ5IGlzIG5vcm1hbGx5IGRlbGl2ZXJlZCBpbiBhIGxvd2VyY2FzZVxuLy8gZmlsZSBuYW1lLiBEbyB0aGlzIGFmdGVyIGNyZWF0aW5nIHRoZSBnbG9iYWwgc28gdGhhdCBpZiBhbiBBTUQgbW9kdWxlIHdhbnRzXG4vLyB0byBjYWxsIG5vQ29uZmxpY3QgdG8gaGlkZSB0aGlzIHZlcnNpb24gb2YgalF1ZXJ5LCBpdCB3aWxsIHdvcmsuXG5cbi8vIE5vdGUgdGhhdCBmb3IgbWF4aW11bSBwb3J0YWJpbGl0eSwgbGlicmFyaWVzIHRoYXQgYXJlIG5vdCBqUXVlcnkgc2hvdWxkXG4vLyBkZWNsYXJlIHRoZW1zZWx2ZXMgYXMgYW5vbnltb3VzIG1vZHVsZXMsIGFuZCBhdm9pZCBzZXR0aW5nIGEgZ2xvYmFsIGlmIGFuXG4vLyBBTUQgbG9hZGVyIGlzIHByZXNlbnQuIGpRdWVyeSBpcyBhIHNwZWNpYWwgY2FzZS4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2pyYnVya2UvcmVxdWlyZWpzL3dpa2kvVXBkYXRpbmctZXhpc3RpbmctbGlicmFyaWVzI3dpa2ktYW5vblxuXG5pZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xuXHRkZWZpbmUoIFwianF1ZXJ5XCIsIFtdLCBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4galF1ZXJ5O1xuXHR9KTtcbn1cblxuXG5cblxudmFyXG5cdC8vIE1hcCBvdmVyIGpRdWVyeSBpbiBjYXNlIG9mIG92ZXJ3cml0ZVxuXHRfalF1ZXJ5ID0gd2luZG93LmpRdWVyeSxcblxuXHQvLyBNYXAgb3ZlciB0aGUgJCBpbiBjYXNlIG9mIG92ZXJ3cml0ZVxuXHRfJCA9IHdpbmRvdy4kO1xuXG5qUXVlcnkubm9Db25mbGljdCA9IGZ1bmN0aW9uKCBkZWVwICkge1xuXHRpZiAoIHdpbmRvdy4kID09PSBqUXVlcnkgKSB7XG5cdFx0d2luZG93LiQgPSBfJDtcblx0fVxuXG5cdGlmICggZGVlcCAmJiB3aW5kb3cualF1ZXJ5ID09PSBqUXVlcnkgKSB7XG5cdFx0d2luZG93LmpRdWVyeSA9IF9qUXVlcnk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5O1xufTtcblxuLy8gRXhwb3NlIGpRdWVyeSBhbmQgJCBpZGVudGlmaWVycywgZXZlbiBpbiBBTURcbi8vICgjNzEwMiNjb21tZW50OjEwLCBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9wdWxsLzU1Nylcbi8vIGFuZCBDb21tb25KUyBmb3IgYnJvd3NlciBlbXVsYXRvcnMgKCMxMzU2NilcbmlmICggdHlwZW9mIG5vR2xvYmFsID09PSBzdHJ1bmRlZmluZWQgKSB7XG5cdHdpbmRvdy5qUXVlcnkgPSB3aW5kb3cuJCA9IGpRdWVyeTtcbn1cblxuXG5cblxucmV0dXJuIGpRdWVyeTtcblxufSkpO1xuIiwiLyohXG4gKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqL1xuXG52YXIgYmFzZTY0ID0gcmVxdWlyZSgnYmFzZTY0LWpzJylcbnZhciBpZWVlNzU0ID0gcmVxdWlyZSgnaWVlZTc1NCcpXG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ2lzLWFycmF5JylcblxuZXhwb3J0cy5CdWZmZXIgPSBCdWZmZXJcbmV4cG9ydHMuU2xvd0J1ZmZlciA9IFNsb3dCdWZmZXJcbmV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MFxuQnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXG5cbnZhciBrTWF4TGVuZ3RoID0gMHgzZmZmZmZmZlxudmFyIHJvb3RQYXJlbnQgPSB7fVxuXG4vKipcbiAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6XG4gKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuICogICA9PT0gZmFsc2UgICBVc2UgT2JqZWN0IGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KVxuICpcbiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcbiAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy5cbiAqXG4gKiBOb3RlOlxuICpcbiAqIC0gSW1wbGVtZW50YXRpb24gbXVzdCBzdXBwb3J0IGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLlxuICogICBGaXJlZm94IDQtMjkgbGFja2VkIHN1cHBvcnQsIGZpeGVkIGluIEZpcmVmb3ggMzArLlxuICogICBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY5NTQzOC5cbiAqXG4gKiAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxuICpcbiAqICAtIElFMTAgaGFzIGEgYnJva2VuIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhcnJheXMgb2ZcbiAqICAgIGluY29ycmVjdCBsZW5ndGggaW4gc29tZSBzaXR1YXRpb25zLlxuICpcbiAqIFdlIGRldGVjdCB0aGVzZSBidWdneSBicm93c2VycyBhbmQgc2V0IGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGAgdG8gYGZhbHNlYCBzbyB0aGV5IHdpbGxcbiAqIGdldCB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uLCB3aGljaCBpcyBzbG93ZXIgYnV0IHdpbGwgd29yayBjb3JyZWN0bHkuXG4gKi9cbkJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gKGZ1bmN0aW9uICgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgYnVmID0gbmV3IEFycmF5QnVmZmVyKDApXG4gICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KGJ1ZilcbiAgICBhcnIuZm9vID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfVxuICAgIHJldHVybiA0MiA9PT0gYXJyLmZvbygpICYmIC8vIHR5cGVkIGFycmF5IGluc3RhbmNlcyBjYW4gYmUgYXVnbWVudGVkXG4gICAgICAgIHR5cGVvZiBhcnIuc3ViYXJyYXkgPT09ICdmdW5jdGlvbicgJiYgLy8gY2hyb21lIDktMTAgbGFjayBgc3ViYXJyYXlgXG4gICAgICAgIG5ldyBVaW50OEFycmF5KDEpLnN1YmFycmF5KDEsIDEpLmJ5dGVMZW5ndGggPT09IDAgLy8gaWUxMCBoYXMgYnJva2VuIGBzdWJhcnJheWBcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59KSgpXG5cbi8qKlxuICogQ2xhc3M6IEJ1ZmZlclxuICogPT09PT09PT09PT09PVxuICpcbiAqIFRoZSBCdWZmZXIgY29uc3RydWN0b3IgcmV0dXJucyBpbnN0YW5jZXMgb2YgYFVpbnQ4QXJyYXlgIHRoYXQgYXJlIGF1Z21lbnRlZFxuICogd2l0aCBmdW5jdGlvbiBwcm9wZXJ0aWVzIGZvciBhbGwgdGhlIG5vZGUgYEJ1ZmZlcmAgQVBJIGZ1bmN0aW9ucy4gV2UgdXNlXG4gKiBgVWludDhBcnJheWAgc28gdGhhdCBzcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdCByZXR1cm5zXG4gKiBhIHNpbmdsZSBvY3RldC5cbiAqXG4gKiBCeSBhdWdtZW50aW5nIHRoZSBpbnN0YW5jZXMsIHdlIGNhbiBhdm9pZCBtb2RpZnlpbmcgdGhlIGBVaW50OEFycmF5YFxuICogcHJvdG90eXBlLlxuICovXG5mdW5jdGlvbiBCdWZmZXIgKHN1YmplY3QsIGVuY29kaW5nLCBub1plcm8pIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEJ1ZmZlcikpXG4gICAgcmV0dXJuIG5ldyBCdWZmZXIoc3ViamVjdCwgZW5jb2RpbmcsIG5vWmVybylcblxuICB2YXIgdHlwZSA9IHR5cGVvZiBzdWJqZWN0XG5cbiAgLy8gRmluZCB0aGUgbGVuZ3RoXG4gIHZhciBsZW5ndGhcbiAgaWYgKHR5cGUgPT09ICdudW1iZXInKVxuICAgIGxlbmd0aCA9IHN1YmplY3QgPiAwID8gc3ViamVjdCA+Pj4gMCA6IDBcbiAgZWxzZSBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICBsZW5ndGggPSBCdWZmZXIuYnl0ZUxlbmd0aChzdWJqZWN0LCBlbmNvZGluZylcbiAgfSBlbHNlIGlmICh0eXBlID09PSAnb2JqZWN0JyAmJiBzdWJqZWN0ICE9PSBudWxsKSB7IC8vIGFzc3VtZSBvYmplY3QgaXMgYXJyYXktbGlrZVxuICAgIGlmIChzdWJqZWN0LnR5cGUgPT09ICdCdWZmZXInICYmIGlzQXJyYXkoc3ViamVjdC5kYXRhKSlcbiAgICAgIHN1YmplY3QgPSBzdWJqZWN0LmRhdGFcbiAgICBsZW5ndGggPSArc3ViamVjdC5sZW5ndGggPiAwID8gTWF0aC5mbG9vcigrc3ViamVjdC5sZW5ndGgpIDogMFxuICB9IGVsc2VcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdtdXN0IHN0YXJ0IHdpdGggbnVtYmVyLCBidWZmZXIsIGFycmF5IG9yIHN0cmluZycpXG5cbiAgaWYgKGxlbmd0aCA+IGtNYXhMZW5ndGgpXG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArXG4gICAgICAnc2l6ZTogMHgnICsga01heExlbmd0aC50b1N0cmluZygxNikgKyAnIGJ5dGVzJylcblxuICB2YXIgYnVmXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIFByZWZlcnJlZDogUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICBidWYgPSBCdWZmZXIuX2F1Z21lbnQobmV3IFVpbnQ4QXJyYXkobGVuZ3RoKSlcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIFRISVMgaW5zdGFuY2Ugb2YgQnVmZmVyIChjcmVhdGVkIGJ5IGBuZXdgKVxuICAgIGJ1ZiA9IHRoaXNcbiAgICBidWYubGVuZ3RoID0gbGVuZ3RoXG4gICAgYnVmLl9pc0J1ZmZlciA9IHRydWVcbiAgfVxuXG4gIHZhciBpXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiB0eXBlb2Ygc3ViamVjdC5ieXRlTGVuZ3RoID09PSAnbnVtYmVyJykge1xuICAgIC8vIFNwZWVkIG9wdGltaXphdGlvbiAtLSB1c2Ugc2V0IGlmIHdlJ3JlIGNvcHlpbmcgZnJvbSBhIHR5cGVkIGFycmF5XG4gICAgYnVmLl9zZXQoc3ViamVjdClcbiAgfSBlbHNlIGlmIChpc0FycmF5aXNoKHN1YmplY3QpKSB7XG4gICAgLy8gVHJlYXQgYXJyYXktaXNoIG9iamVjdHMgYXMgYSBieXRlIGFycmF5XG4gICAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihzdWJqZWN0KSkge1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxuICAgICAgICBidWZbaV0gPSBzdWJqZWN0LnJlYWRVSW50OChpKVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXG4gICAgICAgIGJ1ZltpXSA9ICgoc3ViamVjdFtpXSAlIDI1NikgKyAyNTYpICUgMjU2XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgYnVmLndyaXRlKHN1YmplY3QsIDAsIGVuY29kaW5nKVxuICB9IGVsc2UgaWYgKHR5cGUgPT09ICdudW1iZXInICYmICFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiAhbm9aZXJvKSB7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBidWZbaV0gPSAwXG4gICAgfVxuICB9XG5cbiAgaWYgKGxlbmd0aCA+IDAgJiYgbGVuZ3RoIDw9IEJ1ZmZlci5wb29sU2l6ZSlcbiAgICBidWYucGFyZW50ID0gcm9vdFBhcmVudFxuXG4gIHJldHVybiBidWZcbn1cblxuZnVuY3Rpb24gU2xvd0J1ZmZlcihzdWJqZWN0LCBlbmNvZGluZywgbm9aZXJvKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTbG93QnVmZmVyKSlcbiAgICByZXR1cm4gbmV3IFNsb3dCdWZmZXIoc3ViamVjdCwgZW5jb2RpbmcsIG5vWmVybylcblxuICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihzdWJqZWN0LCBlbmNvZGluZywgbm9aZXJvKVxuICBkZWxldGUgYnVmLnBhcmVudFxuICByZXR1cm4gYnVmXG59XG5cbkJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIChiKSB7XG4gIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpXG59XG5cbkJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlci5pc0J1ZmZlcihiKSlcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzJylcblxuICB2YXIgeCA9IGEubGVuZ3RoXG4gIHZhciB5ID0gYi5sZW5ndGhcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IE1hdGgubWluKHgsIHkpOyBpIDwgbGVuICYmIGFbaV0gPT09IGJbaV07IGkrKykge31cbiAgaWYgKGkgIT09IGxlbikge1xuICAgIHggPSBhW2ldXG4gICAgeSA9IGJbaV1cbiAgfVxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbkJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7XG4gIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAnaGV4JzpcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgY2FzZSAnYXNjaWknOlxuICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgY2FzZSAnYmFzZTY0JzpcbiAgICBjYXNlICdyYXcnOlxuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5CdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gKGxpc3QsIHRvdGFsTGVuZ3RoKSB7XG4gIGlmICghaXNBcnJheShsaXN0KSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVXNhZ2U6IEJ1ZmZlci5jb25jYXQobGlzdFssIGxlbmd0aF0pJylcblxuICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcigwKVxuICB9IGVsc2UgaWYgKGxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIGxpc3RbMF1cbiAgfVxuXG4gIHZhciBpXG4gIGlmICh0b3RhbExlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdG90YWxMZW5ndGggPSAwXG4gICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRvdGFsTGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoXG4gICAgfVxuICB9XG5cbiAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIodG90YWxMZW5ndGgpXG4gIHZhciBwb3MgPSAwXG4gIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldXG4gICAgaXRlbS5jb3B5KGJ1ZiwgcG9zKVxuICAgIHBvcyArPSBpdGVtLmxlbmd0aFxuICB9XG4gIHJldHVybiBidWZcbn1cblxuQnVmZmVyLmJ5dGVMZW5ndGggPSBmdW5jdGlvbiAoc3RyLCBlbmNvZGluZykge1xuICB2YXIgcmV0XG4gIHN0ciA9IHN0ciArICcnXG4gIHN3aXRjaCAoZW5jb2RpbmcgfHwgJ3V0ZjgnKSB7XG4gICAgY2FzZSAnYXNjaWknOlxuICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgY2FzZSAncmF3JzpcbiAgICAgIHJldCA9IHN0ci5sZW5ndGhcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAndWNzMic6XG4gICAgY2FzZSAndWNzLTInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgIHJldCA9IHN0ci5sZW5ndGggKiAyXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2hleCc6XG4gICAgICByZXQgPSBzdHIubGVuZ3RoID4+PiAxXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3V0ZjgnOlxuICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgIHJldCA9IHV0ZjhUb0J5dGVzKHN0cikubGVuZ3RoXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICByZXQgPSBiYXNlNjRUb0J5dGVzKHN0cikubGVuZ3RoXG4gICAgICBicmVha1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXQgPSBzdHIubGVuZ3RoXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG4vLyBwcmUtc2V0IGZvciB2YWx1ZXMgdGhhdCBtYXkgZXhpc3QgaW4gdGhlIGZ1dHVyZVxuQnVmZmVyLnByb3RvdHlwZS5sZW5ndGggPSB1bmRlZmluZWRcbkJ1ZmZlci5wcm90b3R5cGUucGFyZW50ID0gdW5kZWZpbmVkXG5cbi8vIHRvU3RyaW5nKGVuY29kaW5nLCBzdGFydD0wLCBlbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcblxuICBzdGFydCA9IHN0YXJ0ID4+PiAwXG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA9PT0gSW5maW5pdHkgPyB0aGlzLmxlbmd0aCA6IGVuZCA+Pj4gMFxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG4gIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmIChlbmQgPD0gc3RhcnQpIHJldHVybiAnJ1xuXG4gIHdoaWxlICh0cnVlKSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGJpbmFyeVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSlcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDBcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc3RyID0gJydcbiAgdmFyIG1heCA9IGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVNcbiAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuICAgIHN0ciA9IHRoaXMudG9TdHJpbmcoJ2hleCcsIDAsIG1heCkubWF0Y2goLy57Mn0vZykuam9pbignICcpXG4gICAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KVxuICAgICAgc3RyICs9ICcgLi4uICdcbiAgfVxuICByZXR1cm4gJzxCdWZmZXIgJyArIHN0ciArICc+J1xufVxuXG5CdWZmZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiAoYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKVxufVxuXG4vLyBgZ2V0YCB3aWxsIGJlIHJlbW92ZWQgaW4gTm9kZSAwLjEzK1xuQnVmZmVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gIGNvbnNvbGUubG9nKCcuZ2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC4nKVxuICByZXR1cm4gdGhpcy5yZWFkVUludDgob2Zmc2V0KVxufVxuXG4vLyBgc2V0YCB3aWxsIGJlIHJlbW92ZWQgaW4gTm9kZSAwLjEzK1xuQnVmZmVyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodiwgb2Zmc2V0KSB7XG4gIGNvbnNvbGUubG9nKCcuc2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC4nKVxuICByZXR1cm4gdGhpcy53cml0ZVVJbnQ4KHYsIG9mZnNldClcbn1cblxuZnVuY3Rpb24gaGV4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICBvZmZzZXQgPSBOdW1iZXIob2Zmc2V0KSB8fCAwXG4gIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gIH0gZWxzZSB7XG4gICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aClcbiAgICBpZiAobGVuZ3RoID4gcmVtYWluaW5nKSB7XG4gICAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgICB9XG4gIH1cblxuICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0c1xuICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuXG4gIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG4gICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgYnl0ZSA9IHBhcnNlSW50KHN0cmluZy5zdWJzdHIoaSAqIDIsIDIpLCAxNilcbiAgICBpZiAoaXNOYU4oYnl0ZSkpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSBieXRlXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgdmFyIGNoYXJzV3JpdHRlbiA9IGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbiAgcmV0dXJuIGNoYXJzV3JpdHRlblxufVxuXG5mdW5jdGlvbiBhc2NpaVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgdmFyIGNoYXJzV3JpdHRlbiA9IGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG4gIHJldHVybiBjaGFyc1dyaXR0ZW5cbn1cblxuZnVuY3Rpb24gYmluYXJ5V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgdmFyIGNoYXJzV3JpdHRlbiA9IGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxuICByZXR1cm4gY2hhcnNXcml0dGVuXG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHZhciBjaGFyc1dyaXR0ZW4gPSBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgsIDIpXG4gIHJldHVybiBjaGFyc1dyaXR0ZW5cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZykge1xuICAvLyBTdXBwb3J0IGJvdGggKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKVxuICAvLyBhbmQgdGhlIGxlZ2FjeSAoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpXG4gIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7XG4gICAgaWYgKCFpc0Zpbml0ZShsZW5ndGgpKSB7XG4gICAgICBlbmNvZGluZyA9IGxlbmd0aFxuICAgICAgbGVuZ3RoID0gdW5kZWZpbmVkXG4gICAgfVxuICB9IGVsc2UgeyAgLy8gbGVnYWN5XG4gICAgdmFyIHN3YXAgPSBlbmNvZGluZ1xuICAgIGVuY29kaW5nID0gb2Zmc2V0XG4gICAgb2Zmc2V0ID0gbGVuZ3RoXG4gICAgbGVuZ3RoID0gc3dhcFxuICB9XG5cbiAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMFxuXG4gIGlmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDAgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpXG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2F0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzJyk7XG5cbiAgdmFyIHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gIH0gZWxzZSB7XG4gICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aClcbiAgICBpZiAobGVuZ3RoID4gcmVtYWluaW5nKSB7XG4gICAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgICB9XG4gIH1cbiAgZW5jb2RpbmcgPSBTdHJpbmcoZW5jb2RpbmcgfHwgJ3V0ZjgnKS50b0xvd2VyQ2FzZSgpXG5cbiAgdmFyIHJldFxuICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgY2FzZSAnaGV4JzpcbiAgICAgIHJldCA9IGhleFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3V0ZjgnOlxuICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgIHJldCA9IHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdhc2NpaSc6XG4gICAgICByZXQgPSBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICByZXQgPSBiaW5hcnlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgcmV0ID0gYmFzZTY0V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAndWNzMic6XG4gICAgY2FzZSAndWNzLTInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgIHJldCA9IHV0ZjE2bGVXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuICAgICAgYnJlYWtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ0J1ZmZlcicsXG4gICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApXG4gIH1cbn1cblxuZnVuY3Rpb24gYmFzZTY0U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1ZilcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKVxuICB9XG59XG5cbmZ1bmN0aW9uIHV0ZjhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXMgPSAnJ1xuICB2YXIgdG1wID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgaWYgKGJ1ZltpXSA8PSAweDdGKSB7XG4gICAgICByZXMgKz0gZGVjb2RlVXRmOENoYXIodG1wKSArIFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKVxuICAgICAgdG1wID0gJydcbiAgICB9IGVsc2Uge1xuICAgICAgdG1wICs9ICclJyArIGJ1ZltpXS50b1N0cmluZygxNilcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzICsgZGVjb2RlVXRmOENoYXIodG1wKVxufVxuXG5mdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBiaW5hcnlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBoZXhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cbiAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cbiAgdmFyIG91dCA9ICcnXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gb3V0XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKVxuICB2YXIgcmVzID0gJydcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIChzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBzdGFydCA9IH5+c3RhcnRcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXG4gIGlmIChzdGFydCA8IDApIHtcbiAgICBzdGFydCArPSBsZW47XG4gICAgaWYgKHN0YXJ0IDwgMClcbiAgICAgIHN0YXJ0ID0gMFxuICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7XG4gICAgc3RhcnQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCAwKSB7XG4gICAgZW5kICs9IGxlblxuICAgIGlmIChlbmQgPCAwKVxuICAgICAgZW5kID0gMFxuICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuICAgIGVuZCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IHN0YXJ0KVxuICAgIGVuZCA9IHN0YXJ0XG5cbiAgdmFyIG5ld0J1ZlxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBuZXdCdWYgPSBCdWZmZXIuX2F1Z21lbnQodGhpcy5zdWJhcnJheShzdGFydCwgZW5kKSlcbiAgfSBlbHNlIHtcbiAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydFxuICAgIG5ld0J1ZiA9IG5ldyBCdWZmZXIoc2xpY2VMZW4sIHVuZGVmaW5lZCwgdHJ1ZSlcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlTGVuOyBpKyspIHtcbiAgICAgIG5ld0J1ZltpXSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfVxuXG4gIGlmIChuZXdCdWYubGVuZ3RoKVxuICAgIG5ld0J1Zi5wYXJlbnQgPSB0aGlzLnBhcmVudCB8fCB0aGlzXG5cbiAgcmV0dXJuIG5ld0J1ZlxufVxuXG4vKlxuICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuXG4gKi9cbmZ1bmN0aW9uIGNoZWNrT2Zmc2V0IChvZmZzZXQsIGV4dCwgbGVuZ3RoKSB7XG4gIGlmICgob2Zmc2V0ICUgMSkgIT09IDAgfHwgb2Zmc2V0IDwgMClcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aClcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRMRSA9IGZ1bmN0aW9uIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpXG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXVxuICB2YXIgbXVsID0gMVxuICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpXG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bDtcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkxFID0gZnVuY3Rpb24gKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDgpIHwgdGhpc1tvZmZzZXQgKyAxXVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKCh0aGlzW29mZnNldF0pIHxcbiAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSkgK1xuICAgICAgKHRoaXNbb2Zmc2V0ICsgM10gKiAweDEwMDAwMDApXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkJFID0gZnVuY3Rpb24gKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArXG4gICAgICAoKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICAgIHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSlcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKVxuICAgIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgaSA9IGJ5dGVMZW5ndGhcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pXVxuICB3aGlsZSAoaSA+IDAgJiYgKG11bCAqPSAweDEwMCkpXG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bFxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKVxuICAgIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKVxuICAgIHJldHVybiAodGhpc1tvZmZzZXRdKVxuICByZXR1cm4gKCgweGZmIC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgMV0gfCAodGhpc1tvZmZzZXRdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpIHxcbiAgICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRCRSA9IGZ1bmN0aW9uIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCA1MiwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlQkUgPSBmdW5jdGlvbiAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpXG59XG5cbmZ1bmN0aW9uIGNoZWNrSW50IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignYnVmZmVyIG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKVxuICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCd2YWx1ZSBpcyBvdXQgb2YgYm91bmRzJylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludExFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSwgMClcblxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpID4+PiAwICYgMHhGRlxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50QkUgPSBmdW5jdGlvbiAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpLCAwKVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpXG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgPj4+IDAgJiAweEZGXG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4ZmYsIDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWVcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MTYgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgMik7IGkgPCBqOyBpKyspIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgJiAoMHhmZiA8PCAoOCAqIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpKSkpID4+PlxuICAgICAgKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkgKiA4XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gdmFsdWVcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Ugb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSB2YWx1ZVxuICB9IGVsc2Ugb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7IGkrKykge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldF0gPSB2YWx1ZVxuICB9IGVsc2Ugb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDNdID0gdmFsdWVcbiAgfSBlbHNlIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50TEUgPSBmdW5jdGlvbiAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0ludCh0aGlzLFxuICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgIG9mZnNldCxcbiAgICAgICAgICAgICBieXRlTGVuZ3RoLFxuICAgICAgICAgICAgIE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSkgLSAxLFxuICAgICAgICAgICAgIC1NYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpKVxuICB9XG5cbiAgdmFyIGkgPSAwXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpXG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRCRSA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSW50KHRoaXMsXG4gICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgb2Zmc2V0LFxuICAgICAgICAgICAgIGJ5dGVMZW5ndGgsXG4gICAgICAgICAgICAgTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKSAtIDEsXG4gICAgICAgICAgICAgLU1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSkpXG4gIH1cblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMFxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSlcbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gdmFsdWVcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Ugb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9IHZhbHVlXG4gIH0gZWxzZSBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgfSBlbHNlIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSB2YWx1ZVxuICB9IGVsc2Ugb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbmZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3ZhbHVlIGlzIG91dCBvZiBib3VuZHMnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2luZGV4IG91dCBvZiByYW5nZScpXG4gIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCwgMy40MDI4MjM0NjYzODUyODg2ZSszOCwgLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpXG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRSA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG5mdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgOCwgMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgsIC0xLjc5NzY5MzEzNDg2MjMxNTdFKzMwOClcbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpXG4gIHJldHVybiBvZmZzZXQgKyA4XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVMRSA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG4vLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiAodGFyZ2V0LCB0YXJnZXRfc3RhcnQsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHNvdXJjZSA9IHRoaXNcblxuICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0X3N0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldF9zdGFydCA9IHRhcmdldC5sZW5ndGhcbiAgaWYgKCF0YXJnZXRfc3RhcnQpIHRhcmdldF9zdGFydCA9IDBcbiAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxuICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCBzb3VyY2UubGVuZ3RoID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIEZhdGFsIGVycm9yIGNvbmRpdGlvbnNcbiAgaWYgKHRhcmdldF9zdGFydCA8IDApXG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3RhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHNvdXJjZS5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgaWYgKGVuZCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcycpXG5cbiAgLy8gQXJlIHdlIG9vYj9cbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKVxuICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0X3N0YXJ0IDwgZW5kIC0gc3RhcnQpXG4gICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldF9zdGFydCArIHN0YXJ0XG5cbiAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0XG5cbiAgaWYgKGxlbiA8IDEwMDAgfHwgIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRfc3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRhcmdldC5fc2V0KHRoaXMuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKSwgdGFyZ2V0X3N0YXJ0KVxuICB9XG5cbiAgcmV0dXJuIGxlblxufVxuXG4vLyBmaWxsKHZhbHVlLCBzdGFydD0wLCBlbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uICh2YWx1ZSwgc3RhcnQsIGVuZCkge1xuICBpZiAoIXZhbHVlKSB2YWx1ZSA9IDBcbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kKSBlbmQgPSB0aGlzLmxlbmd0aFxuXG4gIGlmIChlbmQgPCBzdGFydCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2VuZCA8IHN0YXJ0JylcblxuICAvLyBGaWxsIDAgYnl0ZXM7IHdlJ3JlIGRvbmVcbiAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVyblxuICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVyblxuXG4gIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzdGFydCBvdXQgb2YgYm91bmRzJylcbiAgaWYgKGVuZCA8IDAgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdlbmQgb3V0IG9mIGJvdW5kcycpXG5cbiAgdmFyIGlcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICB0aGlzW2ldID0gdmFsdWVcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIGJ5dGVzID0gdXRmOFRvQnl0ZXModmFsdWUudG9TdHJpbmcoKSlcbiAgICB2YXIgbGVuID0gYnl0ZXMubGVuZ3RoXG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgdGhpc1tpXSA9IGJ5dGVzW2kgJSBsZW5dXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXNcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGBBcnJheUJ1ZmZlcmAgd2l0aCB0aGUgKmNvcGllZCogbWVtb3J5IG9mIHRoZSBidWZmZXIgaW5zdGFuY2UuXG4gKiBBZGRlZCBpbiBOb2RlIDAuMTIuIE9ubHkgYXZhaWxhYmxlIGluIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBBcnJheUJ1ZmZlci5cbiAqL1xuQnVmZmVyLnByb3RvdHlwZS50b0FycmF5QnVmZmVyID0gZnVuY3Rpb24gKCkge1xuICBpZiAodHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgICByZXR1cm4gKG5ldyBCdWZmZXIodGhpcykpLmJ1ZmZlclxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYnVmID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5sZW5ndGgpXG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYnVmLmxlbmd0aDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICAgIGJ1ZltpXSA9IHRoaXNbaV1cbiAgICAgIH1cbiAgICAgIHJldHVybiBidWYuYnVmZmVyXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0J1ZmZlci50b0FycmF5QnVmZmVyIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyJylcbiAgfVxufVxuXG4vLyBIRUxQRVIgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09XG5cbnZhciBCUCA9IEJ1ZmZlci5wcm90b3R5cGVcblxuLyoqXG4gKiBBdWdtZW50IGEgVWludDhBcnJheSAqaW5zdGFuY2UqIChub3QgdGhlIFVpbnQ4QXJyYXkgY2xhc3MhKSB3aXRoIEJ1ZmZlciBtZXRob2RzXG4gKi9cbkJ1ZmZlci5fYXVnbWVudCA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgYXJyLmNvbnN0cnVjdG9yID0gQnVmZmVyXG4gIGFyci5faXNCdWZmZXIgPSB0cnVlXG5cbiAgLy8gc2F2ZSByZWZlcmVuY2UgdG8gb3JpZ2luYWwgVWludDhBcnJheSBnZXQvc2V0IG1ldGhvZHMgYmVmb3JlIG92ZXJ3cml0aW5nXG4gIGFyci5fZ2V0ID0gYXJyLmdldFxuICBhcnIuX3NldCA9IGFyci5zZXRcblxuICAvLyBkZXByZWNhdGVkLCB3aWxsIGJlIHJlbW92ZWQgaW4gbm9kZSAwLjEzK1xuICBhcnIuZ2V0ID0gQlAuZ2V0XG4gIGFyci5zZXQgPSBCUC5zZXRcblxuICBhcnIud3JpdGUgPSBCUC53cml0ZVxuICBhcnIudG9TdHJpbmcgPSBCUC50b1N0cmluZ1xuICBhcnIudG9Mb2NhbGVTdHJpbmcgPSBCUC50b1N0cmluZ1xuICBhcnIudG9KU09OID0gQlAudG9KU09OXG4gIGFyci5lcXVhbHMgPSBCUC5lcXVhbHNcbiAgYXJyLmNvbXBhcmUgPSBCUC5jb21wYXJlXG4gIGFyci5jb3B5ID0gQlAuY29weVxuICBhcnIuc2xpY2UgPSBCUC5zbGljZVxuICBhcnIucmVhZFVJbnRMRSA9IEJQLnJlYWRVSW50TEVcbiAgYXJyLnJlYWRVSW50QkUgPSBCUC5yZWFkVUludEJFXG4gIGFyci5yZWFkVUludDggPSBCUC5yZWFkVUludDhcbiAgYXJyLnJlYWRVSW50MTZMRSA9IEJQLnJlYWRVSW50MTZMRVxuICBhcnIucmVhZFVJbnQxNkJFID0gQlAucmVhZFVJbnQxNkJFXG4gIGFyci5yZWFkVUludDMyTEUgPSBCUC5yZWFkVUludDMyTEVcbiAgYXJyLnJlYWRVSW50MzJCRSA9IEJQLnJlYWRVSW50MzJCRVxuICBhcnIucmVhZEludExFID0gQlAucmVhZEludExFXG4gIGFyci5yZWFkSW50QkUgPSBCUC5yZWFkSW50QkVcbiAgYXJyLnJlYWRJbnQ4ID0gQlAucmVhZEludDhcbiAgYXJyLnJlYWRJbnQxNkxFID0gQlAucmVhZEludDE2TEVcbiAgYXJyLnJlYWRJbnQxNkJFID0gQlAucmVhZEludDE2QkVcbiAgYXJyLnJlYWRJbnQzMkxFID0gQlAucmVhZEludDMyTEVcbiAgYXJyLnJlYWRJbnQzMkJFID0gQlAucmVhZEludDMyQkVcbiAgYXJyLnJlYWRGbG9hdExFID0gQlAucmVhZEZsb2F0TEVcbiAgYXJyLnJlYWRGbG9hdEJFID0gQlAucmVhZEZsb2F0QkVcbiAgYXJyLnJlYWREb3VibGVMRSA9IEJQLnJlYWREb3VibGVMRVxuICBhcnIucmVhZERvdWJsZUJFID0gQlAucmVhZERvdWJsZUJFXG4gIGFyci53cml0ZVVJbnQ4ID0gQlAud3JpdGVVSW50OFxuICBhcnIud3JpdGVVSW50TEUgPSBCUC53cml0ZVVJbnRMRVxuICBhcnIud3JpdGVVSW50QkUgPSBCUC53cml0ZVVJbnRCRVxuICBhcnIud3JpdGVVSW50MTZMRSA9IEJQLndyaXRlVUludDE2TEVcbiAgYXJyLndyaXRlVUludDE2QkUgPSBCUC53cml0ZVVJbnQxNkJFXG4gIGFyci53cml0ZVVJbnQzMkxFID0gQlAud3JpdGVVSW50MzJMRVxuICBhcnIud3JpdGVVSW50MzJCRSA9IEJQLndyaXRlVUludDMyQkVcbiAgYXJyLndyaXRlSW50TEUgPSBCUC53cml0ZUludExFXG4gIGFyci53cml0ZUludEJFID0gQlAud3JpdGVJbnRCRVxuICBhcnIud3JpdGVJbnQ4ID0gQlAud3JpdGVJbnQ4XG4gIGFyci53cml0ZUludDE2TEUgPSBCUC53cml0ZUludDE2TEVcbiAgYXJyLndyaXRlSW50MTZCRSA9IEJQLndyaXRlSW50MTZCRVxuICBhcnIud3JpdGVJbnQzMkxFID0gQlAud3JpdGVJbnQzMkxFXG4gIGFyci53cml0ZUludDMyQkUgPSBCUC53cml0ZUludDMyQkVcbiAgYXJyLndyaXRlRmxvYXRMRSA9IEJQLndyaXRlRmxvYXRMRVxuICBhcnIud3JpdGVGbG9hdEJFID0gQlAud3JpdGVGbG9hdEJFXG4gIGFyci53cml0ZURvdWJsZUxFID0gQlAud3JpdGVEb3VibGVMRVxuICBhcnIud3JpdGVEb3VibGVCRSA9IEJQLndyaXRlRG91YmxlQkVcbiAgYXJyLmZpbGwgPSBCUC5maWxsXG4gIGFyci5pbnNwZWN0ID0gQlAuaW5zcGVjdFxuICBhcnIudG9BcnJheUJ1ZmZlciA9IEJQLnRvQXJyYXlCdWZmZXJcblxuICByZXR1cm4gYXJyXG59XG5cbnZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXitcXC8wLTlBLXpcXC1dL2dcblxuZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikge1xuICAvLyBOb2RlIHN0cmlwcyBvdXQgaW52YWxpZCBjaGFyYWN0ZXJzIGxpa2UgXFxuIGFuZCBcXHQgZnJvbSB0aGUgc3RyaW5nLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgc3RyID0gc3RyaW5ndHJpbShzdHIpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICcnKVxuICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG4gIGlmIChzdHIubGVuZ3RoIDwgMikgcmV0dXJuICcnXG4gIC8vIE5vZGUgYWxsb3dzIGZvciBub24tcGFkZGVkIGJhc2U2NCBzdHJpbmdzIChtaXNzaW5nIHRyYWlsaW5nID09PSksIGJhc2U2NC1qcyBkb2VzIG5vdFxuICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHtcbiAgICBzdHIgPSBzdHIgKyAnPSdcbiAgfVxuICByZXR1cm4gc3RyXG59XG5cbmZ1bmN0aW9uIHN0cmluZ3RyaW0gKHN0cikge1xuICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpXG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpXG59XG5cbmZ1bmN0aW9uIGlzQXJyYXlpc2ggKHN1YmplY3QpIHtcbiAgcmV0dXJuIGlzQXJyYXkoc3ViamVjdCkgfHwgQnVmZmVyLmlzQnVmZmVyKHN1YmplY3QpIHx8XG4gICAgICBzdWJqZWN0ICYmIHR5cGVvZiBzdWJqZWN0ID09PSAnb2JqZWN0JyAmJlxuICAgICAgdHlwZW9mIHN1YmplY3QubGVuZ3RoID09PSAnbnVtYmVyJ1xufVxuXG5mdW5jdGlvbiB0b0hleCAobikge1xuICBpZiAobiA8IDE2KSByZXR1cm4gJzAnICsgbi50b1N0cmluZygxNilcbiAgcmV0dXJuIG4udG9TdHJpbmcoMTYpXG59XG5cbmZ1bmN0aW9uIHV0ZjhUb0J5dGVzKHN0cmluZywgdW5pdHMpIHtcbiAgdmFyIGNvZGVQb2ludCwgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aFxuICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcbiAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eVxuICB2YXIgYnl0ZXMgPSBbXVxuICB2YXIgaSA9IDBcblxuICBmb3IgKDsgaTxsZW5ndGg7IGkrKykge1xuICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpXG5cbiAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50XG4gICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHtcblxuICAgICAgLy8gbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmIChsZWFkU3Vycm9nYXRlKSB7XG5cbiAgICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvd1xuICAgICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyB2YWxpZCBzdXJyb2dhdGUgcGFpclxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb2RlUG9pbnQgPSBsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwIHwgMHgxMDAwMFxuICAgICAgICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gbm8gbGVhZCB5ZXRcbiAgICAgIGVsc2Uge1xuXG4gICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWxcbiAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyB1bnBhaXJlZCBsZWFkXG4gICAgICAgIGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHtcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdmFsaWQgbGVhZFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHZhbGlkIGJtcCBjaGFyLCBidXQgbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gICAgfVxuXG4gICAgLy8gZW5jb2RlIHV0ZjhcbiAgICBpZiAoY29kZVBvaW50IDwgMHg4MCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKGNvZGVQb2ludClcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDIwMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHgxMiB8IDB4RjAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7XG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLlxuICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRilcbiAgfVxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7XG4gIHZhciBjLCBoaSwgbG9cbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG5cbiAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcblxuICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKVxuICAgIGhpID0gYyA+PiA4XG4gICAgbG8gPSBjICUgMjU2XG4gICAgYnl0ZUFycmF5LnB1c2gobG8pXG4gICAgYnl0ZUFycmF5LnB1c2goaGkpXG4gIH1cblxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMgKHN0cikge1xuICByZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KGJhc2U2NGNsZWFuKHN0cikpXG59XG5cbmZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCwgdW5pdFNpemUpIHtcbiAgaWYgKHVuaXRTaXplKSBsZW5ndGggLT0gbGVuZ3RoICUgdW5pdFNpemU7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoKGkgKyBvZmZzZXQgPj0gZHN0Lmxlbmd0aCkgfHwgKGkgPj0gc3JjLmxlbmd0aCkpXG4gICAgICBicmVha1xuICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXVxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIGRlY29kZVV0ZjhDaGFyIChzdHIpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHN0cilcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoMHhGRkZEKSAvLyBVVEYgOCBpbnZhbGlkIGNoYXJcbiAgfVxufVxuIiwidmFyIGxvb2t1cCA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJztcblxuOyhmdW5jdGlvbiAoZXhwb3J0cykge1xuXHQndXNlIHN0cmljdCc7XG5cbiAgdmFyIEFyciA9ICh0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgPyBVaW50OEFycmF5XG4gICAgOiBBcnJheVxuXG5cdHZhciBQTFVTICAgPSAnKycuY2hhckNvZGVBdCgwKVxuXHR2YXIgU0xBU0ggID0gJy8nLmNoYXJDb2RlQXQoMClcblx0dmFyIE5VTUJFUiA9ICcwJy5jaGFyQ29kZUF0KDApXG5cdHZhciBMT1dFUiAgPSAnYScuY2hhckNvZGVBdCgwKVxuXHR2YXIgVVBQRVIgID0gJ0EnLmNoYXJDb2RlQXQoMClcblx0dmFyIFBMVVNfVVJMX1NBRkUgPSAnLScuY2hhckNvZGVBdCgwKVxuXHR2YXIgU0xBU0hfVVJMX1NBRkUgPSAnXycuY2hhckNvZGVBdCgwKVxuXG5cdGZ1bmN0aW9uIGRlY29kZSAoZWx0KSB7XG5cdFx0dmFyIGNvZGUgPSBlbHQuY2hhckNvZGVBdCgwKVxuXHRcdGlmIChjb2RlID09PSBQTFVTIHx8XG5cdFx0ICAgIGNvZGUgPT09IFBMVVNfVVJMX1NBRkUpXG5cdFx0XHRyZXR1cm4gNjIgLy8gJysnXG5cdFx0aWYgKGNvZGUgPT09IFNMQVNIIHx8XG5cdFx0ICAgIGNvZGUgPT09IFNMQVNIX1VSTF9TQUZFKVxuXHRcdFx0cmV0dXJuIDYzIC8vICcvJ1xuXHRcdGlmIChjb2RlIDwgTlVNQkVSKVxuXHRcdFx0cmV0dXJuIC0xIC8vbm8gbWF0Y2hcblx0XHRpZiAoY29kZSA8IE5VTUJFUiArIDEwKVxuXHRcdFx0cmV0dXJuIGNvZGUgLSBOVU1CRVIgKyAyNiArIDI2XG5cdFx0aWYgKGNvZGUgPCBVUFBFUiArIDI2KVxuXHRcdFx0cmV0dXJuIGNvZGUgLSBVUFBFUlxuXHRcdGlmIChjb2RlIDwgTE9XRVIgKyAyNilcblx0XHRcdHJldHVybiBjb2RlIC0gTE9XRVIgKyAyNlxuXHR9XG5cblx0ZnVuY3Rpb24gYjY0VG9CeXRlQXJyYXkgKGI2NCkge1xuXHRcdHZhciBpLCBqLCBsLCB0bXAsIHBsYWNlSG9sZGVycywgYXJyXG5cblx0XHRpZiAoYjY0Lmxlbmd0aCAlIDQgPiAwKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQnKVxuXHRcdH1cblxuXHRcdC8vIHRoZSBudW1iZXIgb2YgZXF1YWwgc2lnbnMgKHBsYWNlIGhvbGRlcnMpXG5cdFx0Ly8gaWYgdGhlcmUgYXJlIHR3byBwbGFjZWhvbGRlcnMsIHRoYW4gdGhlIHR3byBjaGFyYWN0ZXJzIGJlZm9yZSBpdFxuXHRcdC8vIHJlcHJlc2VudCBvbmUgYnl0ZVxuXHRcdC8vIGlmIHRoZXJlIGlzIG9ubHkgb25lLCB0aGVuIHRoZSB0aHJlZSBjaGFyYWN0ZXJzIGJlZm9yZSBpdCByZXByZXNlbnQgMiBieXRlc1xuXHRcdC8vIHRoaXMgaXMganVzdCBhIGNoZWFwIGhhY2sgdG8gbm90IGRvIGluZGV4T2YgdHdpY2Vcblx0XHR2YXIgbGVuID0gYjY0Lmxlbmd0aFxuXHRcdHBsYWNlSG9sZGVycyA9ICc9JyA9PT0gYjY0LmNoYXJBdChsZW4gLSAyKSA/IDIgOiAnPScgPT09IGI2NC5jaGFyQXQobGVuIC0gMSkgPyAxIDogMFxuXG5cdFx0Ly8gYmFzZTY0IGlzIDQvMyArIHVwIHRvIHR3byBjaGFyYWN0ZXJzIG9mIHRoZSBvcmlnaW5hbCBkYXRhXG5cdFx0YXJyID0gbmV3IEFycihiNjQubGVuZ3RoICogMyAvIDQgLSBwbGFjZUhvbGRlcnMpXG5cblx0XHQvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG5cdFx0bCA9IHBsYWNlSG9sZGVycyA+IDAgPyBiNjQubGVuZ3RoIC0gNCA6IGI2NC5sZW5ndGhcblxuXHRcdHZhciBMID0gMFxuXG5cdFx0ZnVuY3Rpb24gcHVzaCAodikge1xuXHRcdFx0YXJyW0wrK10gPSB2XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMCwgaiA9IDA7IGkgPCBsOyBpICs9IDQsIGogKz0gMykge1xuXHRcdFx0dG1wID0gKGRlY29kZShiNjQuY2hhckF0KGkpKSA8PCAxOCkgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDEpKSA8PCAxMikgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDIpKSA8PCA2KSB8IGRlY29kZShiNjQuY2hhckF0KGkgKyAzKSlcblx0XHRcdHB1c2goKHRtcCAmIDB4RkYwMDAwKSA+PiAxNilcblx0XHRcdHB1c2goKHRtcCAmIDB4RkYwMCkgPj4gOClcblx0XHRcdHB1c2godG1wICYgMHhGRilcblx0XHR9XG5cblx0XHRpZiAocGxhY2VIb2xkZXJzID09PSAyKSB7XG5cdFx0XHR0bXAgPSAoZGVjb2RlKGI2NC5jaGFyQXQoaSkpIDw8IDIpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAxKSkgPj4gNClcblx0XHRcdHB1c2godG1wICYgMHhGRilcblx0XHR9IGVsc2UgaWYgKHBsYWNlSG9sZGVycyA9PT0gMSkge1xuXHRcdFx0dG1wID0gKGRlY29kZShiNjQuY2hhckF0KGkpKSA8PCAxMCkgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDEpKSA8PCA0KSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMikpID4+IDIpXG5cdFx0XHRwdXNoKCh0bXAgPj4gOCkgJiAweEZGKVxuXHRcdFx0cHVzaCh0bXAgJiAweEZGKVxuXHRcdH1cblxuXHRcdHJldHVybiBhcnJcblx0fVxuXG5cdGZ1bmN0aW9uIHVpbnQ4VG9CYXNlNjQgKHVpbnQ4KSB7XG5cdFx0dmFyIGksXG5cdFx0XHRleHRyYUJ5dGVzID0gdWludDgubGVuZ3RoICUgMywgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXNcblx0XHRcdG91dHB1dCA9IFwiXCIsXG5cdFx0XHR0ZW1wLCBsZW5ndGhcblxuXHRcdGZ1bmN0aW9uIGVuY29kZSAobnVtKSB7XG5cdFx0XHRyZXR1cm4gbG9va3VwLmNoYXJBdChudW0pXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHtcblx0XHRcdHJldHVybiBlbmNvZGUobnVtID4+IDE4ICYgMHgzRikgKyBlbmNvZGUobnVtID4+IDEyICYgMHgzRikgKyBlbmNvZGUobnVtID4+IDYgJiAweDNGKSArIGVuY29kZShudW0gJiAweDNGKVxuXHRcdH1cblxuXHRcdC8vIGdvIHRocm91Z2ggdGhlIGFycmF5IGV2ZXJ5IHRocmVlIGJ5dGVzLCB3ZSdsbCBkZWFsIHdpdGggdHJhaWxpbmcgc3R1ZmYgbGF0ZXJcblx0XHRmb3IgKGkgPSAwLCBsZW5ndGggPSB1aW50OC5sZW5ndGggLSBleHRyYUJ5dGVzOyBpIDwgbGVuZ3RoOyBpICs9IDMpIHtcblx0XHRcdHRlbXAgPSAodWludDhbaV0gPDwgMTYpICsgKHVpbnQ4W2kgKyAxXSA8PCA4KSArICh1aW50OFtpICsgMl0pXG5cdFx0XHRvdXRwdXQgKz0gdHJpcGxldFRvQmFzZTY0KHRlbXApXG5cdFx0fVxuXG5cdFx0Ly8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuXHRcdHN3aXRjaCAoZXh0cmFCeXRlcykge1xuXHRcdFx0Y2FzZSAxOlxuXHRcdFx0XHR0ZW1wID0gdWludDhbdWludDgubGVuZ3RoIC0gMV1cblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSh0ZW1wID4+IDIpXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUoKHRlbXAgPDwgNCkgJiAweDNGKVxuXHRcdFx0XHRvdXRwdXQgKz0gJz09J1xuXHRcdFx0XHRicmVha1xuXHRcdFx0Y2FzZSAyOlxuXHRcdFx0XHR0ZW1wID0gKHVpbnQ4W3VpbnQ4Lmxlbmd0aCAtIDJdIDw8IDgpICsgKHVpbnQ4W3VpbnQ4Lmxlbmd0aCAtIDFdKVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKHRlbXAgPj4gMTApXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUoKHRlbXAgPj4gNCkgJiAweDNGKVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wIDw8IDIpICYgMHgzRilcblx0XHRcdFx0b3V0cHV0ICs9ICc9J1xuXHRcdFx0XHRicmVha1xuXHRcdH1cblxuXHRcdHJldHVybiBvdXRwdXRcblx0fVxuXG5cdGV4cG9ydHMudG9CeXRlQXJyYXkgPSBiNjRUb0J5dGVBcnJheVxuXHRleHBvcnRzLmZyb21CeXRlQXJyYXkgPSB1aW50OFRvQmFzZTY0XG59KHR5cGVvZiBleHBvcnRzID09PSAndW5kZWZpbmVkJyA/ICh0aGlzLmJhc2U2NGpzID0ge30pIDogZXhwb3J0cykpXG4iLCJleHBvcnRzLnJlYWQgPSBmdW5jdGlvbihidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtLFxuICAgICAgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMSxcbiAgICAgIGVNYXggPSAoMSA8PCBlTGVuKSAtIDEsXG4gICAgICBlQmlhcyA9IGVNYXggPj4gMSxcbiAgICAgIG5CaXRzID0gLTcsXG4gICAgICBpID0gaXNMRSA/IChuQnl0ZXMgLSAxKSA6IDAsXG4gICAgICBkID0gaXNMRSA/IC0xIDogMSxcbiAgICAgIHMgPSBidWZmZXJbb2Zmc2V0ICsgaV07XG5cbiAgaSArPSBkO1xuXG4gIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpO1xuICBzID4+PSAoLW5CaXRzKTtcbiAgbkJpdHMgKz0gZUxlbjtcbiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IGUgKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCk7XG5cbiAgbSA9IGUgJiAoKDEgPDwgKC1uQml0cykpIC0gMSk7XG4gIGUgPj49ICgtbkJpdHMpO1xuICBuQml0cyArPSBtTGVuO1xuICBmb3IgKDsgbkJpdHMgPiAwOyBtID0gbSAqIDI1NiArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KTtcblxuICBpZiAoZSA9PT0gMCkge1xuICAgIGUgPSAxIC0gZUJpYXM7XG4gIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KTtcbiAgfSBlbHNlIHtcbiAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pO1xuICAgIGUgPSBlIC0gZUJpYXM7XG4gIH1cbiAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbik7XG59O1xuXG5leHBvcnRzLndyaXRlID0gZnVuY3Rpb24oYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG0sIGMsXG4gICAgICBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxLFxuICAgICAgZU1heCA9ICgxIDw8IGVMZW4pIC0gMSxcbiAgICAgIGVCaWFzID0gZU1heCA+PiAxLFxuICAgICAgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApLFxuICAgICAgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpLFxuICAgICAgZCA9IGlzTEUgPyAxIDogLTEsXG4gICAgICBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwO1xuXG4gIHZhbHVlID0gTWF0aC5hYnModmFsdWUpO1xuXG4gIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7XG4gICAgbSA9IGlzTmFOKHZhbHVlKSA/IDEgOiAwO1xuICAgIGUgPSBlTWF4O1xuICB9IGVsc2Uge1xuICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKTtcbiAgICBpZiAodmFsdWUgKiAoYyA9IE1hdGgucG93KDIsIC1lKSkgPCAxKSB7XG4gICAgICBlLS07XG4gICAgICBjICo9IDI7XG4gICAgfVxuICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgdmFsdWUgKz0gcnQgLyBjO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcyk7XG4gICAgfVxuICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuICAgICAgZSsrO1xuICAgICAgYyAvPSAyO1xuICAgIH1cblxuICAgIGlmIChlICsgZUJpYXMgPj0gZU1heCkge1xuICAgICAgbSA9IDA7XG4gICAgICBlID0gZU1heDtcbiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICBtID0gKHZhbHVlICogYyAtIDEpICogTWF0aC5wb3coMiwgbUxlbik7XG4gICAgICBlID0gZSArIGVCaWFzO1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbik7XG4gICAgICBlID0gMDtcbiAgICB9XG4gIH1cblxuICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBtICYgMHhmZiwgaSArPSBkLCBtIC89IDI1NiwgbUxlbiAtPSA4KTtcblxuICBlID0gKGUgPDwgbUxlbikgfCBtO1xuICBlTGVuICs9IG1MZW47XG4gIGZvciAoOyBlTGVuID4gMDsgYnVmZmVyW29mZnNldCArIGldID0gZSAmIDB4ZmYsIGkgKz0gZCwgZSAvPSAyNTYsIGVMZW4gLT0gOCk7XG5cbiAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4O1xufTtcbiIsIlxuLyoqXG4gKiBpc0FycmF5XG4gKi9cblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG4vKipcbiAqIHRvU3RyaW5nXG4gKi9cblxudmFyIHN0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8qKlxuICogV2hldGhlciBvciBub3QgdGhlIGdpdmVuIGB2YWxgXG4gKiBpcyBhbiBhcnJheS5cbiAqXG4gKiBleGFtcGxlOlxuICpcbiAqICAgICAgICBpc0FycmF5KFtdKTtcbiAqICAgICAgICAvLyA+IHRydWVcbiAqICAgICAgICBpc0FycmF5KGFyZ3VtZW50cyk7XG4gKiAgICAgICAgLy8gPiBmYWxzZVxuICogICAgICAgIGlzQXJyYXkoJycpO1xuICogICAgICAgIC8vID4gZmFsc2VcbiAqXG4gKiBAcGFyYW0ge21peGVkfSB2YWxcbiAqIEByZXR1cm4ge2Jvb2x9XG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5IHx8IGZ1bmN0aW9uICh2YWwpIHtcbiAgcmV0dXJuICEhIHZhbCAmJiAnW29iamVjdCBBcnJheV0nID09IHN0ci5jYWxsKHZhbCk7XG59O1xuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuICAgIHZhciBjdXJyZW50UXVldWU7XG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHZhciBpID0gLTE7XG4gICAgICAgIHdoaWxlICgrK2kgPCBsZW4pIHtcbiAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtpXSgpO1xuICAgICAgICB9XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbn1cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgcXVldWUucHVzaChmdW4pO1xuICAgIGlmICghZHJhaW5pbmcpIHtcbiAgICAgICAgc2V0VGltZW91dChkcmFpblF1ZXVlLCAwKTtcbiAgICB9XG59O1xuXG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxuLy8gVE9ETyhzaHR5bG1hbilcbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsInZhciBzYWxlYWJsZUJhc2ljQ3RybCA9IGZ1bmN0aW9uKCRzY29wZSwkcm9vdFNjb3BlLFNhbGVhYmxlU2VydmljZSxNZXNzYWdlU2VydmljZSxTYWxlYWJsZUhlbHBlcil7XG5cbiAgICAkcm9vdFNjb3BlLiRvbihcIm5ld0Jhc2ljRGV0YWlsXCIsZnVuY3Rpb24oZXZlbnQpe1xuICAgICAgICBTYWxlYWJsZUhlbHBlci5jYXRlZ29yeUxpc3QoJy9jYXRsaXN0Jywkc2NvcGUpO1xuXG4gICAgICAgIC8vdmFyIG51bWJlck9mU2FsZWFibGVzID0gJHNjb3BlLiRwYXJlbnQuc2FsZWFibGVzLmxlbmd0aDtcbiAgICAgICAgdmFyIHNhbGVhYmxlID0gU2FsZWFibGVTZXJ2aWNlLiRidWlsZCgpO1xuICAgICAgICBzYWxlYWJsZS50eXBlID0wO1xuICAgICAgICBzYWxlYWJsZS5mZWF0dXJlZCA9IDA7XG5cbiAgICAgICAgLyppZihudW1iZXJPZlNhbGVhYmxlcz09MCl7XG5cbiAgICAgICAgfSovXG4gICAgICAgIC8vJHNjb3BlLnNhbGVhYmxlID0gYW5ndWxhci5jb3B5KCRzY29wZS5tYXN0ZXIpO1xuICAgICAgICAkc2NvcGUuc2FsZWFibGUgPSBzYWxlYWJsZTtcblxuXG5cbiAgICAgICAgJHNjb3BlLnVwZGF0ZVNhbGVhYmxlID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgaWYoJHNjb3BlLnNhbGVhYmxlLmlzZmVhdHVyZWQpe1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWxlYWJsZS5mZWF0dXJlZCA9IDE7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FsZWFibGUuZmVhdHVyZWQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnNhbGVhYmxlLmNhdGVnb3JpZXMpO1xuICAgICAgICAgICAgc2FsZWFibGUuJHNhdmUoKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSxtZXRhKTtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KFwic2FsZWFibGVDcmVhdGVkXCIsc2FsZWFibGUpO1xuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICAkcm9vdFNjb3BlLiRvbihcImVkaXRCYXNpY0RldGFpbFwiLGZ1bmN0aW9uKGV2ZW50LHNhbGVhYmxlKXtcbiAgICAgICAgU2FsZWFibGVIZWxwZXIuY2F0ZWdvcnlMaXN0KCcvY2F0bGlzdCcsJHNjb3BlKTtcbiAgICAgICAgU2FsZWFibGVIZWxwZXIuc2FsQ2F0ZWdvcnlMaXN0KCcvc2FsY2F0bGlzdC8nK3NhbGVhYmxlLmlkLCRzY29wZSk7XG4gICAgICAgICRzY29wZS5zYWxlYWJsZSA9IHNhbGVhYmxlO1xuICAgICAgICAkc2NvcGUudXBkYXRlU2FsZWFibGUgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBpZigkc2NvcGUuc2FsZWFibGUuaXNmZWF0dXJlZCl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhbGVhYmxlLmZlYXR1cmVkID0gMTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWxlYWJsZS5mZWF0dXJlZCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzYWxlYWJsZS4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uKGRhdGEpe1xuXG4gICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsbWV0YSk7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kZW1pdChcInNhbGVhYmxlVXBkYXRlZFwiLHNhbGVhYmxlKTtcblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG5cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNhbGVhYmxlQmFzaWNDdHJsO1xuIiwiXG52YXIgYmlvQ29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSxCaW9ncmFwaHlTZXJ2aWNlLE1lc3NhZ2VTZXJ2aWNlKXtcblxuXG4gICAgdmFyIGRhdGEgPSBCaW9ncmFwaHlTZXJ2aWNlLiRmaW5kKDApO1xuXG4gICAgJHNjb3BlLnByb2ZpbGUgPSBkYXRhLiRmZXRjaCgpO1xuXG4gICAgJHNjb3BlLnVwZGF0ZUJpbyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGRhdGEuJHNhdmUoKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcblxuICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuXG4gICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiaW9Db250cm9sbGVyOyIsInZhciBjb25maWdDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCR0aW1lb3V0LE1lc3NhZ2VTZXJ2aWNlLFVzZXJDb250ZW50VHlwZSl7XG5cbiAgICB2YXIgY29udGVudHR5cGVzID0gVXNlckNvbnRlbnRUeXBlLiRzZWFyY2goKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgJHNjb3BlLnVzZXJjb250ZW50dHlwZXMgPSBkYXRhO1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLmVkaXRVc2VyQ29udGVudCA9IGZ1bmN0aW9uKGNvbnRlbnQpe1xuICAgICAgICAkc2NvcGUuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgICRzY29wZS5zaG93RWRpdENvbnRlbnRJdGVtID0gdHJ1ZTtcbiAgICB9XG4gICAgJHNjb3BlLnVwZGF0ZVVzZXJDb250ZW50ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGlzSG9tZSA9ICRzY29wZS5jb250ZW50LmlzaG9tZTtcbiAgICAgICAgdmFyIGFzSG9tZSA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuY29udGVudC5hc2hvbWUgPSAwO1xuICAgICAgICBpZihpc0hvbWUpe1xuICAgICAgICAgICAgJHNjb3BlLmNvbnRlbnQuYXNob21lID0gMTtcbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUuY29udGVudC4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgJHNjb3BlLnVzZXJjb250ZW50dHlwZXMuJHJlZnJlc2goKTtcbiAgICAgICAgICAgICRzY29wZS5zaG93RWRpdENvbnRlbnRJdGVtID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUuY2hhbmdlU3RhdGVDb250ZW50ID0gZnVuY3Rpb24oJGV2ZW50LHVzZXJjb250ZW50KXtcbiAgICAgICAgdmFyIGNoZWNrYm94ID0gJGV2ZW50LnRhcmdldDtcbiAgICAgICAgdmFyIGFjdGlvbiA9IChjaGVja2JveC5jaGVja2VkID8gdHJ1ZTogZmFsc2UpO1xuXG4gICAgICAgIHVzZXJjb250ZW50LmFjdGl2ZSA9IGFjdGlvbjtcbiAgICAgICAgdXNlcmNvbnRlbnQuJHNhdmUoKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICRzY29wZS51c2VyY29udGVudHR5cGVzLiRyZWZyZXNoKCk7XG4gICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgJHNjb3BlLnNldEFzSG9tZSA9IGZ1bmN0aW9uKCRldmVudCx1c2VyY29udGVudCl7XG4gICAgICAgIHZhciBjaGVja2JveCA9ICRldmVudC50YXJnZXQ7XG4gICAgICAgIHZhciBhY3Rpb24gPSAoY2hlY2tib3guY2hlY2tlZCA/IHRydWU6IGZhbHNlKTtcblxuICAgICAgICB1c2VyY29udGVudC5hc2hvbWUgPSBhY3Rpb247XG4gICAgICAgIHVzZXJjb250ZW50LiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAkc2NvcGUudXNlcmNvbnRlbnR0eXBlcy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSxtZXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59XG5tb2R1bGUuZXhwb3J0cyA9IGNvbmZpZ0NvbnRyb2xsZXI7XG5cbiIsIi8qKlxuICogQ3JlYXRlZCBieSBtYWNpbnRvc2ggb24gMi8zLzE1LlxuICovXG52YXIgYWxlcnREaXJlY3RpdmUgPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOlwiLi4vLi4vanMvYWRtaW4vYW5ndWxhci90ZW1wbGF0ZXMvYWxlcnQuaHRtbFwiLFxuICAgICAgICByZXN0cmljdDpcIkVBXCIsXG4gICAgICAgIHNjb3BlIDoge1xuICAgICAgICAgICAgbWVzc2FnZTpcIj1tc2dlXCJcbiAgICAgICAgfSxcblxuICAgICAgICBjb250cm9sbGVyOmZ1bmN0aW9uKCRzY29wZSl7XG5cbiAgICAgICAgICAgICRzY29wZS5zaG93QWxlcnQgPSB0cnVlO1xuICAgICAgICAgICAgJHNjb3BlLmRlc3Ryb3lBbGVydCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRwYXJlbnQuc2hvd0FsZXJ0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGFsZXJ0RGlyZWN0aXZlO1xuIiwidmFyIGJpb0RpcmVjdGl2ZSA9IGZ1bmN0aW9uKE1lc3NhZ2VTZXJ2aWNlLEJpbywkdGltZW91dCxIZWxwZXIsJGh0dHApe1xuICAgIHJldHVybiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOlwiLi4vLi4vanMvYWRtaW4vYW5ndWxhci90ZW1wbGF0ZXMvYmlvZ3JhcGhpZXMvYmlvZ3JhcGhpZXMuaHRtbFwiLFxuICAgICAgICByZXN0cmljdDpcIkVBXCIsXG4gICAgICAgIHNjb3BlOnt9LFxuICAgICAgICBjb250cm9sbGVyOmZ1bmN0aW9uKCRzY29wZSwkcm9vdFNjb3BlKSB7XG4gICAgICAgICAgICAkc2NvcGUuY2xvc2VGb3JtID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgYmlvcyA9IEJpby4kc2VhcmNoKCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJpb3MgPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5iaW9zLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0Tm9JdGVtc0luZm9NZXNzYWdlKCRzY29wZSwgXCIgYmlvZ3JhZsOtYXNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIuIFB1bHNhIGVsIGJvdMOzbiBOdWV2YSBwYXJhIGNyZWFyIHVuYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cblxuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5uZXdCaW8gPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmlvID0gQmlvLiRidWlsZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJpbyA9IGJpbztcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZUJpbyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpby4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5iaW9zLiRyZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5iaW9Gb3JtLiRyZXNldEZvcm0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEJpbyA9IGZ1bmN0aW9uIChiaW8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYmlvID0gYmlvO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlQmlvID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmlvLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJpb3MuJHJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJpb0Zvcm0uJHJlc2V0Rm9ybSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAvL2RlbGV0ZVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVtb3ZlQmlvID0gZnVuY3Rpb24gKGJpbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJpbyA9IGJpbztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtYXRpb24gPSBNZXNzYWdlU2VydmljZS5zZXRDb25maXJtRGVsZXRlTWVzc2FnZShcIiBiaW9ncmFmw61hXCIsIFwiIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW8uJGRlc3Ryb3koKS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5iaW9zLiRyZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vY2hhbmdlIHN0YXR1c1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hhbmdlU3RhdHVzID0gZnVuY3Rpb24gKCRldmVudCwgYmlvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tib3ggPSAkZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IChjaGVja2JveC5jaGVja2VkID8gdHJ1ZSA6IGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYmlvLnN0YXR1cyA9IGFjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpby4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJpb3MuJHJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2V0RGVmID0gZnVuY3Rpb24gKCRldmVudCwgYmlvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImFxdWlcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKnZhciBjaGVja2JveCA9ICRldmVudC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gKGNoZWNrYm94LmNoZWNrZWQgPyB0cnVlIDogZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBiaW8uc3RhdHVzID0gYWN0aW9uOyovXG4gICAgICAgICAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KFwiL2Jpb2dyYXBoeS9zZXREZWZhdWx0L1wiK2Jpby5pZCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYmlvcy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cblxuXG5cblxuXG4gICAgICAgIH1cbiAgICB9XG5cbn1cbm1vZHVsZS5leHBvcnRzID0gYmlvRGlyZWN0aXZlO1xuIiwidmFyIGNsb3NlQ29udGVudERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6J0VBJyxcbiAgICAgICAgdGVtcGxhdGU6JzxhIGhyZWY9XCJcIiBuZy1jbGljaz1cImRlc3Ryb3lTZWN0aW9uKClcIiBjbGFzcz1cInB1bGwtcmlnaHQgcmVtb3ZlLWJ1dHRvblwiIGRhdGEtaWNvbj1cIiYjeGU3MGRcIiA+PC9hPicsXG5cbiAgICAgICAgc2NvcGU6e3JlbW92ZTonJid9LFxuICAgICAgICBjb250cm9sbGVyOmZ1bmN0aW9uKCRzY29wZSl7XG4gICAgICAgICAgICAkc2NvcGUuZGVzdHJveVNlY3Rpb24gPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICRzY29wZS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjbG9zZUNvbnRlbnREaXJlY3RpdmU7XG4iLCJ2YXIgY29uZmlnTWVudSA9IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6XCJFQVwiLFxuICAgICAgICB0ZW1wbGF0ZVVybDpcIi4uLy4uL2pzL2FkbWluL2FuZ3VsYXIvdGVtcGxhdGVzL2NvbmZpZ19tZW51Lmh0bWxcIlxuICAgIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gY29uZmlnTWVudTsiLCJ2YXIgY2F0ZWdvcnlEaXJlY3RpdmUgPSBmdW5jdGlvbihNZXNzYWdlU2VydmljZSxDYXRlZ29yeSwkdGltZW91dCxIZWxwZXIpe1xuICAgIHJldHVybiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOlwiLi4vLi4vanMvYWRtaW4vYW5ndWxhci90ZW1wbGF0ZXMvY29uZmlndXJhdGlvbi9jYXRlZ29yaWVzLmh0bWxcIixcbiAgICAgICAgcmVzdHJpY3Q6XCJFQVwiLFxuICAgICAgICBzY29wZTp7fSxcbiAgICAgICAgY29udHJvbGxlcjpmdW5jdGlvbigkc2NvcGUsJHJvb3RTY29wZSkge1xuICAgICAgICAgICAgJHNjb3BlLmNsb3NlRm9ybSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSxmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjYXRlZ29yaWVzID0gQ2F0ZWdvcnkuJHNlYXJjaCgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmNhdGVnb3JpZXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXROb0l0ZW1zSW5mb01lc3NhZ2UoJHNjb3BlLCBcIiBjYXRlZ29yw61hc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi4gUHVsc2EgZWwgYm90w7NuIE51ZXZhIHBhcmEgY3JlYXIgdW5hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmV3Q2F0ZWdvcnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhdGVnb3J5ID0gQ2F0ZWdvcnkuJGJ1aWxkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2F0ZWdvcnkgPSBjYXRlZ29yeTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZUNhdGVnb3J5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5LiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMuJHJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3J5Rm9ybS4kcmVzZXRGb3JtKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRDYXRlZ29yeSA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlQ2F0ZWdvcnkgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeS4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jYXRlZ29yaWVzLiRyZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jYXRlZ29yeUZvcm0uJHJlc2V0Rm9ybSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAvL2RlbGV0ZVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVtb3ZlQ2F0ZWdvcnkgPSBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmZpcm1hdGlvbiA9IE1lc3NhZ2VTZXJ2aWNlLnNldENvbmZpcm1EZWxldGVNZXNzYWdlKFwiIGNhdGVnb3LDrWFcIiwgXCIgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5LiRkZXN0cm95KCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRyZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAvL2NoYW5nZSBzdGF0dXNcbiAgICAgICAgICAgICAgICAgICAgLyokc2NvcGUuY2hhbmdlU3RhdHVzID0gZnVuY3Rpb24gKCRldmVudCwgY2F0ZWdvcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGVja2JveCA9ICRldmVudC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gKGNoZWNrYm94LmNoZWNrZWQgPyB0cnVlIDogZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeS5zdGF0dXMgPSBhY3Rpb247XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeS4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNhdGVnb3JpZXMuJHJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTsqL1xuXG4gICAgICAgIH1cbiAgICB9XG5cbn1cbm1vZHVsZS5leHBvcnRzID0gY2F0ZWdvcnlEaXJlY3RpdmU7XG4iLCJ2YXIgY29udGVudFNlbGVjdG9yID0gZnVuY3Rpb24oTWVzc2FnZVNlcnZpY2UsVXNlckNvbnRlbnRUeXBlKXtcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZW1wbGF0ZVVybDpcIi4uLy4uL2pzL2FkbWluL2FuZ3VsYXIvdGVtcGxhdGVzL2NvbnRlbnRfc2VsZWN0b3IuaHRtbFwiLFxuICAgICAgICByZXN0cmljdDpcIkVBXCIsXG4gICAgICAgIHNjb3BlOnt9LFxuICAgICAgICB0cmFuc2NsdWRlOnRydWUsXG4gICAgICAgIGNvbnRyb2xsZXI6ZnVuY3Rpb24oJHNjb3BlLCR0aW1lb3V0KXtcbiAgICAgICAgICAgICRzY29wZS5pbmZvQ29udGVudFNlbGVjdG9yID0gTWVzc2FnZVNlcnZpY2UuZ2V0KCdjb250ZW50c2VsZWN0b3JfaW5mbycpLm1lc3NhZ2U7XG4gICAgICAgICAgICB2YXIgY29udGVudHR5cGVzID0gVXNlckNvbnRlbnRUeXBlLiRzZWFyY2goKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcmNvbnRlbnR0eXBlcyA9IGRhdGE7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZUNvbnRlbnQgPSBmdW5jdGlvbigkZXZlbnQsdXNlcmNvbnRlbnQpe1xuXG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrYm94ID0gJGV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gKGNoZWNrYm94LmNoZWNrZWQgPyB0cnVlOiBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICB1c2VyY29udGVudC5hY3RpdmUgPSBhY3Rpb247XG4gICAgICAgICAgICAgICAgdXNlcmNvbnRlbnQuJHNhdmUoKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjb250ZW50U2VsZWN0b3I7IiwidmFyIGhhbGxvID0gZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uICgkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsIG5nTW9kZWxDdHJsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygkZWxlbWVudCk7XG4gICAgICAgICAgICAkKHRoaXMpLmhhbGxvKHtcbiAgICAgICAgICAgICAgICBwbHVnaW5zOiB7XG4gICAgICAgICAgICAgICAgICAgICdoYWxsb2Zvcm1hdCc6IHt9LFxuICAgICAgICAgICAgICAgICAgICAnaGFsbG9ibG9jayc6IHt9LFxuICAgICAgICAgICAgICAgICAgICAnaGFsbG9qdXN0aWZ5Jzoge30sXG4gICAgICAgICAgICAgICAgICAgICdoYWxsb2xpc3RzJzoge30sXG4gICAgICAgICAgICAgICAgICAgICdoYWxsb3JldW5kbyc6IHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnRzID0gbmdNb2RlbEN0cmwuJHZpZXdWYWx1ZTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmhhbGxvKCdzZXRDb250ZW50cycsIGNvbnRlbnRzKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH1cbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGhhbGxvIiwidmFyIHByb2ZpbGVNZW51ID0gZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDpcIkVBXCIsXG4gICAgICAgIHRlbXBsYXRlVXJsOlwiLi4vLi4vanMvYWRtaW4vYW5ndWxhci90ZW1wbGF0ZXMvcHJvZmlsZV9tZW51Lmh0bWxcIlxuICAgIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gcHJvZmlsZU1lbnU7IiwidmFyIGVkdWNhdGlvbkRpcmVjdGl2ZSA9IGZ1bmN0aW9uKE1lc3NhZ2VTZXJ2aWNlLEVkdWNhdGlvbiwkdGltZW91dCxIZWxwZXIpe1xuICAgIHJldHVybiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOlwiLi4vLi4vanMvYWRtaW4vYW5ndWxhci90ZW1wbGF0ZXMvcmVzdW1lL2VkdWNhdGlvbi5odG1sXCIsXG4gICAgICAgIHJlc3RyaWN0OlwiRUFcIixcbiAgICAgICAgc2NvcGU6e30sXG4gICAgICAgIGNvbnRyb2xsZXI6ZnVuY3Rpb24oJHNjb3BlLCRyb290U2NvcGUpIHtcbiAgICAgICAgICAgICRzY29wZS5jbG9zZUZvcm0gPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSxmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsZmFsc2UpO1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJ3Jlc3VtZUNoYW5nZScsZnVuY3Rpb24oZXZlbnQsYXJncyl7XG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIGFyZ3MucmVzdW1lICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bWVJZCA9IGFyZ3MucmVzdW1lLmlkO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWR1Y2F0aW9ucyA9IEVkdWNhdGlvbi4kc2VhcmNoKHtyZXN1bWVfaWQ6IHJlc3VtZUlkfSkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lZHVjYXRpb25zID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZWR1Y2F0aW9ucy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldE5vSXRlbXNJbmZvTWVzc2FnZSgkc2NvcGUsIFwiIGVzdHVkaW9zXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLiBQdWxzYSBlbCBib3TDs24gTnVldmEgcGFyYSBjcmVhciB1bmFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5uZXdFZHVjYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVkdWNhdGlvbiA9IEVkdWNhdGlvbi4kYnVpbGQoe3Jlc3VtZV9pZDogcmVzdW1lSWQsIGluaXRkYXRlOiAnJywgZW5kZGF0ZTogJyd9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lZHVjYXRpb24gPSBlZHVjYXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9udGhvcHRpb25zID0gSGVscGVyLm1vbnRocygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkdWNhdGlvbi5pbml0bW9udGggPSBIZWxwZXIubW9udGhzKClbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWR1Y2F0aW9uLmVuZG1vbnRoID0gSGVscGVyLm1vbnRocygpWzBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlRWR1Y2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0N1cnJlbnQgPSAkc2NvcGUuZWR1Y2F0aW9uLmN1cnJlbnRwbGFjZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWR1Y2F0aW9uLmN1cnJlbnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0N1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkdWNhdGlvbi5jdXJyZW50ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkdWNhdGlvbi5pbml0ZGF0ZSA9ICRzY29wZS5lZHVjYXRpb24uaW5pdG1vbnRoICsgXCItXCIgKyAkc2NvcGUuZWR1Y2F0aW9uLmluaXR5ZWFyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lZHVjYXRpb24uZW5kZGF0ZSA9ICRzY29wZS5lZHVjYXRpb24uZW5kbW9udGggKyBcIi1cIiArICRzY29wZS5lZHVjYXRpb24uZW5keWVhcjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkdWNhdGlvbi4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lZHVjYXRpb25zLiRyZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lZHVjYXRpb25Gb3JtLiRyZXNldEZvcm0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEVkdWNhdGlvbiA9IGZ1bmN0aW9uIChlZHVjYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9udGhvcHRpb25zID0gSGVscGVyLm1vbnRocygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltb250aEluZGV4ID0gSGVscGVyLm1vbnRocygpLmluZGV4T2YoZWR1Y2F0aW9uLmltb250aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW1vbnRoSW5kZXggPSBIZWxwZXIubW9udGhzKCkuaW5kZXhPZihlZHVjYXRpb24uZW1vbnRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lZHVjYXRpb24gPSBlZHVjYXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWR1Y2F0aW9uLmluaXRtb250aCA9ICRzY29wZS5tb250aG9wdGlvbnNbaW1vbnRoSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkdWNhdGlvbi5lbmRtb250aCA9ICRzY29wZS5tb250aG9wdGlvbnNbZW1vbnRoSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkdWNhdGlvbi5pbml0eWVhciA9IGVkdWNhdGlvbi5peWVhcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lZHVjYXRpb24uZW5keWVhciA9IGVkdWNhdGlvbi5leWVhcjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZUVkdWNhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNDdXJyZW50ID0gJHNjb3BlLmVkdWNhdGlvbi5jdXJyZW50cGxhY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkdWNhdGlvbi5jdXJyZW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNDdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lZHVjYXRpb24uY3VycmVudCA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lZHVjYXRpb24uaW5pdGRhdGUgPSAkc2NvcGUuZWR1Y2F0aW9uLmluaXRtb250aCArIFwiLVwiICsgJHNjb3BlLmVkdWNhdGlvbi5pbml0eWVhcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWR1Y2F0aW9uLmVuZGRhdGUgPSAkc2NvcGUuZWR1Y2F0aW9uLmVuZG1vbnRoICsgXCItXCIgKyAkc2NvcGUuZWR1Y2F0aW9uLmVuZHllYXI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZHVjYXRpb24uJHNhdmUoKS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWR1Y2F0aW9ucy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWR1Y2F0aW9uRm9ybS4kcmVzZXRGb3JtKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vZGVsZXRlXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZW1vdmVFZHVjYXRpb24gPSBmdW5jdGlvbiAoZWR1Y2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWR1Y2F0aW9uID0gZWR1Y2F0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmZpcm1hdGlvbiA9IE1lc3NhZ2VTZXJ2aWNlLnNldENvbmZpcm1EZWxldGVNZXNzYWdlKFwiIGVzdHVkaW9cIiwgXCIgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkdWNhdGlvbi4kZGVzdHJveSgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgLy9jaGFuZ2Ugc3RhdHVzXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jaGFuZ2VTdGF0dXMgPSBmdW5jdGlvbiAoJGV2ZW50LCBlZHVjYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGVja2JveCA9ICRldmVudC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gKGNoZWNrYm94LmNoZWNrZWQgPyB0cnVlIDogZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBlZHVjYXRpb24uc3RhdHVzID0gYWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWR1Y2F0aW9uLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWR1Y2F0aW9ucy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cblxuXG5cbiAgICAgICAgfVxuICAgIH1cblxufVxubW9kdWxlLmV4cG9ydHMgPSBlZHVjYXRpb25EaXJlY3RpdmU7XG4iLCJ2YXIgZXhwZXJpZW5jZURpcmVjdGl2ZSA9IGZ1bmN0aW9uKE1lc3NhZ2VTZXJ2aWNlLEV4cGVyaWVuY2UsJHRpbWVvdXQsSGVscGVyKXtcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZW1wbGF0ZVVybDpcIi4uLy4uL2pzL2FkbWluL2FuZ3VsYXIvdGVtcGxhdGVzL3Jlc3VtZS9leHBlcmllbmNlLmh0bWxcIixcbiAgICAgICAgcmVzdHJpY3Q6XCJFQVwiLFxuICAgICAgICBzY29wZTp7fSxcbiAgICAgICAgY29udHJvbGxlcjpmdW5jdGlvbigkc2NvcGUsJHJvb3RTY29wZSl7XG4gICAgICAgICAgICAkc2NvcGUuY2xvc2VGb3JtID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLGZhbHNlKTtcbiAgICAgICAgICAgICRyb290U2NvcGUuJG9uKCdyZXN1bWVDaGFuZ2UnLGZ1bmN0aW9uKGV2ZW50LGFyZ3Mpe1xuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBhcmdzLnJlc3VtZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdW1lSWQgPSBhcmdzLnJlc3VtZS5pZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4cGVyaWVuY2VzID0gRXhwZXJpZW5jZS4kc2VhcmNoKHtyZXN1bWVfaWQ6IHJlc3VtZUlkfSkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5leHBlcmllbmNlcyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmV4cGVyaWVuY2VzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0Tm9JdGVtc0luZm9NZXNzYWdlKCRzY29wZSwgXCIgZXhwZXJpZW5jaWFzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLiBQdWxzYSBlbCBib3TDs24gTnVldmEgcGFyYSBjcmVhciB1bmFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vbmV3XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5uZXdFeHBlcmllbmNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHBlcmllbmNlID0gRXhwZXJpZW5jZS4kYnVpbGQoe3Jlc3VtZV9pZDogcmVzdW1lSWQsIGluaXRkYXRlOiAnJywgZW5kZGF0ZTogJyd9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5leHBlcmllbmNlID0gZXhwZXJpZW5jZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tb250aG9wdGlvbnMgPSBIZWxwZXIubW9udGhzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhwZXJpZW5jZS5pbml0bW9udGggPSBIZWxwZXIubW9udGhzKClbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhwZXJpZW5jZS5lbmRtb250aCA9IEhlbHBlci5tb250aHMoKVswXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZUV4cGVyaWVuY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzQ3VycmVudCA9ICRzY29wZS5leHBlcmllbmNlLmN1cnJlbnRwbGFjZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhwZXJpZW5jZS5jdXJyZW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNDdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5leHBlcmllbmNlLmN1cnJlbnQgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhwZXJpZW5jZS5pbml0ZGF0ZSA9ICRzY29wZS5leHBlcmllbmNlLmluaXRtb250aCArIFwiLVwiICsgJHNjb3BlLmV4cGVyaWVuY2UuaW5pdHllYXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVyaWVuY2UuZW5kZGF0ZSA9ICRzY29wZS5leHBlcmllbmNlLmVuZG1vbnRoICsgXCItXCIgKyAkc2NvcGUuZXhwZXJpZW5jZS5lbmR5ZWFyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZXJpZW5jZS4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5leHBlcmllbmNlcy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhwZXJpZW5jZUZvcm0uJHJlc2V0Rm9ybSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAvL2VkaXRcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRFeHBlcmllbmNlID0gZnVuY3Rpb24gKGV4cGVyaWVuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9udGhvcHRpb25zID0gSGVscGVyLm1vbnRocygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltb250aEluZGV4ID0gSGVscGVyLm1vbnRocygpLmluZGV4T2YoZXhwZXJpZW5jZS5pbW9udGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVtb250aEluZGV4ID0gSGVscGVyLm1vbnRocygpLmluZGV4T2YoZXhwZXJpZW5jZS5lbW9udGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVyaWVuY2UgPSBleHBlcmllbmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVyaWVuY2UuaW5pdG1vbnRoID0gJHNjb3BlLm1vbnRob3B0aW9uc1tpbW9udGhJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhwZXJpZW5jZS5lbmRtb250aCA9ICRzY29wZS5tb250aG9wdGlvbnNbZW1vbnRoSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVyaWVuY2UuaW5pdHllYXIgPSBleHBlcmllbmNlLml5ZWFyO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVyaWVuY2UuZW5keWVhciA9IGV4cGVyaWVuY2UuZXllYXI7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZUV4cGVyaWVuY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzQ3VycmVudCA9ICRzY29wZS5leHBlcmllbmNlLmN1cnJlbnRwbGFjZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhwZXJpZW5jZS5jdXJyZW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNDdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5leHBlcmllbmNlLmN1cnJlbnQgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhwZXJpZW5jZS5pbml0ZGF0ZSA9ICRzY29wZS5leHBlcmllbmNlLmluaXRtb250aCArIFwiLVwiICsgJHNjb3BlLmV4cGVyaWVuY2UuaW5pdHllYXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVyaWVuY2UuZW5kZGF0ZSA9ICRzY29wZS5leHBlcmllbmNlLmVuZG1vbnRoICsgXCItXCIgKyAkc2NvcGUuZXhwZXJpZW5jZS5lbmR5ZWFyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZXJpZW5jZS4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5leHBlcmllbmNlcy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhwZXJpZW5jZUZvcm0uJHJlc2V0Rm9ybSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAvL2RlbGV0ZVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVtb3ZlRXhwZXJpZW5jZSA9IGZ1bmN0aW9uIChleHBlcmllbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhwZXJpZW5jZSA9IGV4cGVyaWVuY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWF0aW9uID0gTWVzc2FnZVNlcnZpY2Uuc2V0Q29uZmlybURlbGV0ZU1lc3NhZ2UoXCIgZXhwZXJpZW5jaWFcIiwgXCIgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVyaWVuY2UuJGRlc3Ryb3koKS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vY2hhbmdlIHN0YXR1c1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hhbmdlU3RhdHVzID0gZnVuY3Rpb24gKCRldmVudCwgZXhwZXJpZW5jZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrYm94ID0gJGV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSAoY2hlY2tib3guY2hlY2tlZCA/IHRydWUgOiBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVyaWVuY2Uuc3RhdHVzID0gYWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZXJpZW5jZS4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVyaWVuY2VzLiRyZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9LFxuICAgICAgICBsaW5rOmZ1bmN0aW9uKHNjb3BlLGVsZW1lbnQpe1xuICAgICAgICAgICAgLy8kKGVsZW1lbnQpLmVmZmVjdChcImhpZ2hsaWdodFwiLCB7fSwgMzAwMCk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cbm1vZHVsZS5leHBvcnRzID0gZXhwZXJpZW5jZURpcmVjdGl2ZTtcbiIsInZhciBpbnRlcmVzdERpcmVjdGl2ZSA9IGZ1bmN0aW9uKE1lc3NhZ2VTZXJ2aWNlLEludGVyZXN0LCR0aW1lb3V0LEhlbHBlcil7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6XCIuLi8uLi9qcy9hZG1pbi9hbmd1bGFyL3RlbXBsYXRlcy9yZXN1bWUvaW50ZXJlc3RzLmh0bWxcIixcbiAgICAgICAgcmVzdHJpY3Q6XCJFQVwiLFxuICAgICAgICBzY29wZTp7fSxcbiAgICAgICAgY29udHJvbGxlcjpmdW5jdGlvbigkc2NvcGUsJHJvb3RTY29wZSkge1xuICAgICAgICAgICAgJHNjb3BlLmNsb3NlRm9ybSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSxmYWxzZSk7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbigncmVzdW1lQ2hhbmdlJyxmdW5jdGlvbihldmVudCxhcmdzKXtcbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgYXJncy5yZXN1bWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VtZUlkID0gYXJncy5yZXN1bWUuaWQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnRlcmVzdHMgPSBJbnRlcmVzdC4kc2VhcmNoKHtyZXN1bWVfaWQ6IHJlc3VtZUlkfSkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcmVzdHMgPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5pbnRlcmVzdHMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXROb0l0ZW1zSW5mb01lc3NhZ2UoJHNjb3BlLCBcIiBpbnRlcmVzZXMgcHJvZmVzaW9uYWxlc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi4gUHVsc2EgZWwgYm90w7NuIE51ZXZvIHBhcmEgY3JlYXIgdW5vXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmV3SW50ZXJlc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGludGVyZXN0ID0gSW50ZXJlc3QuJGJ1aWxkKHtyZXN1bWVfaWQ6IHJlc3VtZUlkfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW50ZXJlc3QgPSBpbnRlcmVzdDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZUludGVyZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVyZXN0LiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmludGVyZXN0cy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW50ZXJlc3RGb3JtLiRyZXNldEZvcm0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdEludGVyZXN0ID0gZnVuY3Rpb24gKGludGVyZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmludGVyZXN0ID0gaW50ZXJlc3Q7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVJbnRlcmVzdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVyZXN0LiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmludGVyZXN0cy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW50ZXJlc3RGb3JtLiRyZXNldEZvcm0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgLy9kZWxldGVcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlbW92ZUludGVyZXN0ID0gZnVuY3Rpb24gKGludGVyZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW50ZXJlc3QgPSBpbnRlcmVzdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtYXRpb24gPSBNZXNzYWdlU2VydmljZS5zZXRDb25maXJtRGVsZXRlTWVzc2FnZShcIiBpZGlvbWFcIiwgXCIgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVyZXN0LiRkZXN0cm95KCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRyZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAvL2NoYW5nZSBzdGF0dXNcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYW5nZVN0YXR1cyA9IGZ1bmN0aW9uICgkZXZlbnQsIGludGVyZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tib3ggPSAkZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IChjaGVja2JveC5jaGVja2VkID8gdHJ1ZSA6IGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJlc3Quc3RhdHVzID0gYWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJlc3QuJHNhdmUoKS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcmVzdHMuJHJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG5cblxuXG4gICAgICAgIH1cbiAgICB9XG5cbn1cbm1vZHVsZS5leHBvcnRzID0gaW50ZXJlc3REaXJlY3RpdmU7XG4iLCJ2YXIgbGFuZ3VhZ2VEaXJlY3RpdmUgPSBmdW5jdGlvbihNZXNzYWdlU2VydmljZSxMYW5ndWFnZSwkdGltZW91dCxIZWxwZXIpe1xuICAgIHJldHVybiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOlwiLi4vLi4vanMvYWRtaW4vYW5ndWxhci90ZW1wbGF0ZXMvcmVzdW1lL2xhbmd1YWdlcy5odG1sXCIsXG4gICAgICAgIHJlc3RyaWN0OlwiRUFcIixcbiAgICAgICAgc2NvcGU6e30sXG4gICAgICAgIGNvbnRyb2xsZXI6ZnVuY3Rpb24oJHNjb3BlLCRyb290U2NvcGUpIHtcbiAgICAgICAgICAgICRzY29wZS5jbG9zZUZvcm0gPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSxmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsZmFsc2UpO1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJ3Jlc3VtZUNoYW5nZScsZnVuY3Rpb24oZXZlbnQsYXJncyl7XG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIGFyZ3MucmVzdW1lICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bWVJZCA9IGFyZ3MucmVzdW1lLmlkO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGFuZ3VhZ2VzID0gTGFuZ3VhZ2UuJHNlYXJjaCh7cmVzdW1lX2lkOiByZXN1bWVJZH0pLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGFuZ3VhZ2VzID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUubGFuZ3VhZ2VzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0Tm9JdGVtc0luZm9NZXNzYWdlKCRzY29wZSwgXCIgaWRpb21hc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi4gUHVsc2EgZWwgYm90w7NuIE51ZXZvIHBhcmEgY3JlYXIgdW5vXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmV3TGFuZ3VhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhbmd1YWdlID0gTGFuZ3VhZ2UuJGJ1aWxkKHtyZXN1bWVfaWQ6IHJlc3VtZUlkfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGFuZ3VhZ2UgPSBsYW5ndWFnZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZUxhbmd1YWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxhbmd1YWdlcy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGFuZ3VhZ2VGb3JtLiRyZXNldEZvcm0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdExhbmd1YWdlID0gZnVuY3Rpb24gKGxhbmd1YWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxhbmd1YWdlID0gbGFuZ3VhZ2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVMYW5ndWFnZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxhbmd1YWdlcy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGFuZ3VhZ2VGb3JtLiRyZXNldEZvcm0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgLy9kZWxldGVcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlbW92ZUxhbmd1YWdlID0gZnVuY3Rpb24gKGxhbmd1YWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGFuZ3VhZ2UgPSBsYW5ndWFnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtYXRpb24gPSBNZXNzYWdlU2VydmljZS5zZXRDb25maXJtRGVsZXRlTWVzc2FnZShcIiBpZGlvbWFcIiwgXCIgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlLiRkZXN0cm95KCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRyZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAvL2NoYW5nZSBzdGF0dXNcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYW5nZVN0YXR1cyA9IGZ1bmN0aW9uICgkZXZlbnQsIGxhbmd1YWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tib3ggPSAkZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IChjaGVja2JveC5jaGVja2VkID8gdHJ1ZSA6IGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2Uuc3RhdHVzID0gYWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2UuJHNhdmUoKS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sYW5ndWFnZXMuJHJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG5cblxuXG4gICAgICAgIH1cbiAgICB9XG5cbn1cbm1vZHVsZS5leHBvcnRzID0gbGFuZ3VhZ2VEaXJlY3RpdmU7XG4iLCJ2YXIgcmVzdW1lRGlyZWN0aXZlID0gZnVuY3Rpb24oTWVzc2FnZVNlcnZpY2UsUmVzdW1lLCR0aW1lb3V0LFJlc3VtZUhlbHBlcil7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6XCIuLi8uLi9qcy9hZG1pbi9hbmd1bGFyL3RlbXBsYXRlcy9yZXN1bWUvcmVzdW1lLmh0bWxcIixcbiAgICAgICAgcmVzdHJpY3Q6XCJFQVwiLFxuICAgICAgICBzY29wZTp7XG5cbiAgICAgICAgfSxcbiAgICAgICAgY29udHJvbGxlcjpmdW5jdGlvbigkc2NvcGUsJHJvb3RTY29wZSl7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbignbm9SZXN1bWVGb3VuZCcsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXROb0l0ZW1zSW5mb01lc3NhZ2UoJHNjb3BlLCBcIiByw6lzdW3DqXNcIixcbiAgICAgICAgICAgICAgICAgICAgXCIuIFB1bHNhIGVsIGJvdMOzbiBOdWV2byBwYXJhIGNyZWFyXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICRyb290U2NvcGUuJG9uKCdyZXN1bWVDaGFuZ2UnLGZ1bmN0aW9uKGV2ZW50LGFyZ3Mpe1xuXG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIGFyZ3MucmVzdW1lICE9PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLy9iaW9ncmFwaGllcyBkcm9wZG93biBsaXN0XG4gICAgICAgICAgICAgICAgICAgIC8vUmVzdW1lSGVscGVyLmJpb0Ryb3BEb3duTGlzdCgnL2Jpb19kcm9wX2xpc3QnLCRzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bWVzID0gUmVzdW1lLiRzZWFyY2goKS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlc3VtZXMgPSBkYXRhO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnJlc3VtZXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXROb0l0ZW1zSW5mb01lc3NhZ2UoJHNjb3BlLCBcIiByw6lzdW3DqXNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIuIFB1bHNhIGVsIGJvdMOzbiBOdWV2byBwYXJhIGNyZWFyIHVub1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdW1lID0gUmVzdW1lLiRmaW5kKGFyZ3MucmVzdW1lLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlc3VtZSA9IHJlc3VtZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZVJlc3VtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZXN1bWUuJHNhdmUoKS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd1Jlc3VtZUZvcm0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRzY29wZS5uZXdSZXN1bWUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93ZWRSZXN1bWVGb3JtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KFwibmV3UmVzdW1lXCIpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZVJlc3VtZSA9IGZ1bmN0aW9uKHJlc3VtZSl7XG4gICAgICAgICAgICAgICAgdmFyIGNvbmZpcm1hdGlvbiA9IE1lc3NhZ2VTZXJ2aWNlLnNldENvbmZpcm1EZWxldGVNZXNzYWdlKFwiIHLDqXN1bcOpXCIsXCIuIFRvZG9zIGxhcyBzZWNjaW9uZXMgZGVsIHLDqXN1bcOpIHNlcsOhbiBlbGltaW5hZGFzIHRhbWJpw6luLi4uXCIpO1xuICAgICAgICAgICAgICAgIGlmKGNvbmZpcm1hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICByZXN1bWUuJGRlc3Ryb3koKS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gXCIvYWRtaW4vcmVzdW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLnB1YmxpY2F0aW9uID0gZnVuY3Rpb24ocmVzdW1lLCB0b0JlUHVibGlzaGVkKXtcbiAgICAgICAgICAgICAgICBpZih0b0JlUHVibGlzaGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VtZS5hY3RpdmUgPSAxO1xuICAgICAgICAgICAgICAgICAgICAvL3B1Ymxpc2ggcmVzdW1lXG4gICAgICAgICAgICAgICAgICAgIFJlc3VtZUhlbHBlci5wdWJsaXNoUmVzdW1lKCRzY29wZSwkcm9vdFNjb3BlLFwiL3B1Ymxpc2hfcmVzdW1lL1wiK3Jlc3VtZS5pZClcbiAgICAgICAgICAgICAgICB9ICBlbHNle1xuICAgICAgICAgICAgICAgICAgICByZXN1bWUuYWN0aXZlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdW1lLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLnNldERlZmF1bHQgPSBmdW5jdGlvbihyZXN1bWUsIGlzRGVmYXVsdCl7XG4gICAgICAgICAgICAgICAgaWYoaXNEZWZhdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VtZS5kZWZhdWx0ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgLy9wdWJsaXNoIHJlc3VtZVxuICAgICAgICAgICAgICAgICAgICBSZXN1bWVIZWxwZXIucHVibGlzaFJlc3VtZSgkc2NvcGUsJHJvb3RTY29wZSxcIi9kZWZhdWx0X3Jlc3VtZS9cIityZXN1bWUuaWQpXG4gICAgICAgICAgICAgICAgfSAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgcmVzdW1lLmRlZmF1bHQgPSAwO1xuICAgICAgICAgICAgICAgICAgICByZXN1bWUuJHNhdmUoKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuY2xvbmVSZXN1bWUgPSBmdW5jdGlvbihyZXN1bWUpe1xuICAgICAgICAgICAgICAgIFJlc3VtZUhlbHBlci5jbG9uZVJlc3VtZSgkc2NvcGUsJHJvb3RTY29wZSxcIi9jbG9uZV9yZXN1bWUvXCIrcmVzdW1lLmlkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLnNob3dSZXN1bWVFZGl0Rm9ybSA9IGZ1bmN0aW9uKHJlc3VtZSl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dlZEVkaXRSZXN1bWVGb3JtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KFwiZWRpdFJlc3VtZVwiLHJlc3VtZSk7XG4gICAgICAgICAgICB9XG5cblxuXG4gICAgICAgICAgICAkc2NvcGUuY2xvc2VBZnRlclVwZGF0ZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dlZEVkaXRSZXN1bWVGb3JtID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5jbG9zZUFmdGVyQ3JlYXRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd2VkUmVzdW1lRm9ybSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiRzY29wZS4kd2F0Y2goJyR2aWV3Q29udGVudExvYWRlZCcsIGZ1bmN0aW9uKClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImxvYWRpbmdcIik7XG4gICAgICAgICAgICB9KTsqL1xuXG4gICAgICAgIH1cbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVzdW1lRGlyZWN0aXZlOyIsInZhciByZXN1bWVFZGl0RGlyZWN0aXZlID0gZnVuY3Rpb24oTWVzc2FnZVNlcnZpY2UsUmVzdW1lLFJlc3VtZUhlbHBlciwkdGltZW91dCl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6XCIuLi8uLi9qcy9hZG1pbi9hbmd1bGFyL3RlbXBsYXRlcy9yZXN1bWUvcmVzdW1lZWRpdGZvcm0uaHRtbFwiLFxuICAgICAgICByZXN0cmljdDpcIkVBXCIsXG4gICAgICAgIHNjb3BlOntcblxuICAgICAgICAgICAgY2xvc2U6XCImY2xvc2VcIlxuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyOmZ1bmN0aW9uKCRzY29wZSwkcm9vdFNjb3BlKXtcblxuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oXCJlZGl0UmVzdW1lXCIsZnVuY3Rpb24oZXZlbnQscmVzdW1lKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bWUgICk7XG4gICAgICAgICAgICAgICAgLy9iaW9ncmFwaGllcyBkcm9wZG93biBsaXN0XG4gICAgICAgICAgICAgICAgUmVzdW1lSGVscGVyLmJpb0Ryb3BEb3duTGlzdCgnL2Jpb19kcm9wX2xpc3QnLCRzY29wZSk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlc3VtZSA9IHJlc3VtZTtcbiAgICAgICAgICAgICAgICB2YXIgYmlvSWQgPSByZXN1bWUuYmlvZ3JhcGh5SWQ7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlc3VtZS5iaW9ncmFwaHlfaWQgPSBiaW9JZC50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJHNjb3BlKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2xvc2VGb3JtID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vJHNjb3BlLnJlc3VtZS5iaW9ncmFwaHlJZCA9IDE7Ly8kc2NvcGUuYmlvc1skc2NvcGUucmVzdW1lLmJpb2dyYXBoeV9pZF07XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhdmVSZXN1bWUgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZXN1bWUuJHNhdmUoKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KFwidXBkYXRlUmVzdW1lTGlzdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoXCJyZXN1bWVDaGFuZ2VcIixkYXRhLiRyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsb3NlKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSw0MDAwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8kc2NvcGUuJHBhcmVudC5zaG93ZWRFZGl0UmVzdW1lRm9ybSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIH1cbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVzdW1lRWRpdERpcmVjdGl2ZTsiLCJ2YXIgcmVzdW1lQ3JlYXRpb25EaXJlY3RpdmUgPSBmdW5jdGlvbihNZXNzYWdlU2VydmljZSxSZXN1bWUsUmVzdW1lSGVscGVyLCR0aW1lb3V0KXtcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZW1wbGF0ZVVybDpcIi4uLy4uL2pzL2FkbWluL2FuZ3VsYXIvdGVtcGxhdGVzL3Jlc3VtZS9yZXN1bWVmb3JtLmh0bWxcIixcbiAgICAgICAgcmVzdHJpY3Q6XCJFQVwiLFxuICAgICAgICBzY29wZTp7XG4gICAgICAgICAgICBjbG9zZTpcIiZjbG9zZVwiXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRyb2xsZXI6ZnVuY3Rpb24oJHNjb3BlLCRyb290U2NvcGUpe1xuICAgICAgICAgICAgJHNjb3BlLmNsb3NlRm9ybSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRyb290U2NvcGUuJG9uKFwibmV3UmVzdW1lXCIsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvL2Jpb2dyYXBoaWVzIGRyb3Bkb3duIGxpc3RcbiAgICAgICAgICAgICAgICBSZXN1bWVIZWxwZXIuYmlvRHJvcERvd25MaXN0KCcvYmlvX2Ryb3BfbGlzdCcsJHNjb3BlKTtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdW1lID0gUmVzdW1lLiRidWlsZCgpO1xuICAgICAgICAgICAgICAgICRzY29wZS5yZXN1bWUgPSByZXN1bWU7XG5cblxuICAgICAgICAgICAgICAgICRzY29wZS5jcmVhdGVSZXN1bWUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlc3VtZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VtZS4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSxtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoXCJ1cGRhdGVSZXN1bWVMaXN0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kZW1pdChcInJlc3VtZUNoYW5nZVwiLGRhdGEuJHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xvc2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8kc2NvcGUuJGRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sNDAwMCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIH1cbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVzdW1lQ3JlYXRpb25EaXJlY3RpdmU7IiwidmFyIHJlc3VtZUxpc3QgPSBmdW5jdGlvbihNZXNzYWdlU2VydmljZSxSZXN1bWUsJHRpbWVvdXQsSGVscGVyKXtcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZW1wbGF0ZVVybDpcIi4uLy4uL2pzL2FkbWluL2FuZ3VsYXIvdGVtcGxhdGVzL3Jlc3VtZS9yZXN1bWVsaXN0Lmh0bWxcIixcbiAgICAgICAgcmVzdHJpY3Q6XCJFQVwiLFxuICAgICAgICBzY29wZTp7fSxcbiAgICAgICAgY29udHJvbGxlcjpmdW5jdGlvbigkc2NvcGUsJHJvb3RTY29wZSkge1xuICAgICAgICAgICAgJHNjb3BlLmNsb3NlRm9ybSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSxmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVzdW1lcyA9IFJlc3VtZS4kc2VhcmNoKCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZXN1bWVzID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucmVzdW1lcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldE5vSXRlbXNJbmZvTWVzc2FnZSgkc2NvcGUsIFwiIHLDqXN1bcOpc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi4gUHVsc2EgZWwgYm90w7NuIE51ZXZvIHBhcmEgY3JlYXIgdW5vXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmV3UmVzdW1lID0gZnVuY3Rpb24gKCkge1xuXG5cblxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lZGl0UmVzdW1lID0gZnVuY3Rpb24gKGVkdWNhdGlvbikge1xuXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgLy9kZWxldGVcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlbW92ZVJlc3VtZSA9IGZ1bmN0aW9uIChlZHVjYXRpb24pIHtcblxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vY2hhbmdlIHN0YXR1c1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2V0RGVmYXVsdCA9IGZ1bmN0aW9uICgkZXZlbnQsIHJlc3VtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrYm94ID0gJGV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSAoY2hlY2tib3guY2hlY2tlZCA/IHRydWUgOiBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VtZS5kZWZhdWx0ID0gYWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdW1lLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVzdW1lcy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93RGV0YWlsID0gZnVuY3Rpb24ocmVzdW1lKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdW1lOntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6cmVzdW1lLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoXCJyZXN1bWVDaGFuZ2VcIixkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG5cbn1cbm1vZHVsZS5leHBvcnRzID0gcmVzdW1lTGlzdDtcbiIsInZhciBjb250ZW50U2VsZWN0b3IgPSBmdW5jdGlvbihNZXNzYWdlU2VydmljZSl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6XCIuLi8uLi9qcy9hZG1pbi9hbmd1bGFyL3RlbXBsYXRlcy9yZXN1bWUvcmVzdW1lX3NlbGVjdG9yLmh0bWxcIixcbiAgICAgICAgcmVzdHJpY3Q6XCJFQVwiLFxuICAgICAgICBzY29wZTp7fSxcbiAgICAgICAgdHJhbnNjbHVkZTp0cnVlLFxuICAgICAgICBjb250cm9sbGVyOmZ1bmN0aW9uKCRzY29wZSwkdGltZW91dCl7XG4gICAgICAgICAgICAkc2NvcGUuaW5mb1Jlc3VtZVNlbGVjdG9yID0gTWVzc2FnZVNlcnZpY2UuZ2V0KCdyZXN1bWVzZWxlY3Rvcl9pbmZvJykubWVzc2FnZTtcbiAgICAgICAgICAgIC8vVE9ETyBnZXQgc2VjdGlvbnMgYWNjb3JkaW5nIHRvIHVzZXIgcmVzdW1lXG5cbiAgICAgICAgICAgIHZhciBzZWN0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICB7YWxpYXM6XCJFeHBlcmllbmNpYVwiLGxpbms6XCJleHBlcmllbmNlXCJ9LFxuICAgICAgICAgICAgICAgIHthbGlhczpcIkVzdHVkaW9zXCIsbGluazpcInN0dWR5XCJ9LFxuICAgICAgICAgICAgICAgIHthbGlhczpcIkhhYmlsaWRhZGVzIC8gQ29ub2NpbWllbnRvc1wiLGxpbms6XCJza2lsbHNcIn0sXG4gICAgICAgICAgICAgICAge2FsaWFzOlwiSWRpb21hc1wiLGxpbms6XCJsYW5ndWFnZXNcIn0sXG4gICAgICAgICAgICAgICAge2FsaWFzOlwiSW50ZXJlc2VzIFByb2Zlc2lvbmFsZXNcIixsaW5rOlwicGVyc29uYWxcIn1cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICAkc2NvcGUuc2VjdGlvbnMgPSBzZWN0aW9ucztcblxuXG4gICAgICAgIH1cbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY29udGVudFNlbGVjdG9yOyIsInZhciBzZWN0aW9uc0RpcmVjdGl2ZSA9IGZ1bmN0aW9uKFJlc3VtZSl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6XCIuLi8uLi9qcy9hZG1pbi9hbmd1bGFyL3RlbXBsYXRlcy9yZXN1bWUvc2VjdGlvbnMuaHRtbFwiLFxuICAgICAgICByZXN0cmljdDpcIkVBXCIsXG4gICAgICAgIHNjb3BlOnt9LFxuICAgICAgICBjb250cm9sbGVyOmZ1bmN0aW9uKCRzY29wZSwkcm9vdFNjb3BlKXtcbiAgICAgICAgICAgICRyb290U2NvcGUuJG9uKCdyZXN1bWVDaGFuZ2UnLGZ1bmN0aW9uKGV2ZW50LGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3MucmVzdW1lICE9PSBcInVuZGVmaW5lZFwiKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VtZSA9IFJlc3VtZS4kZmluZChhcmdzLnJlc3VtZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZXN1bWUgPSByZXN1bWUuJHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCl7XG4gICAgICAgICAgICAvLyQoZWxlbWVudCkuZWZmZWN0KFwiaGlnaGxpZ2h0XCIsIHt9LCAzMDAwKTtcbiAgICAgICAgfVxuICAgIH1cblxufVxubW9kdWxlLmV4cG9ydHMgPSBzZWN0aW9uc0RpcmVjdGl2ZTtcbiIsInZhciBza2lsbERpcmVjdGl2ZSA9IGZ1bmN0aW9uKE1lc3NhZ2VTZXJ2aWNlLFNraWxsLCR0aW1lb3V0LEhlbHBlcil7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6XCIuLi8uLi9qcy9hZG1pbi9hbmd1bGFyL3RlbXBsYXRlcy9yZXN1bWUvc2tpbGxzLmh0bWxcIixcbiAgICAgICAgcmVzdHJpY3Q6XCJFQVwiLFxuICAgICAgICBzY29wZTp7fSxcbiAgICAgICAgY29udHJvbGxlcjpmdW5jdGlvbigkc2NvcGUsJHJvb3RTY29wZSkge1xuICAgICAgICAgICAgJHNjb3BlLmNsb3NlRm9ybSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSxmYWxzZSk7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbigncmVzdW1lQ2hhbmdlJyxmdW5jdGlvbihldmVudCxhcmdzKXtcbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgYXJncy5yZXN1bWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VtZUlkID0gYXJncy5yZXN1bWUuaWQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBza2lsbHMgPSBTa2lsbC4kc2VhcmNoKHtyZXN1bWVfaWQ6IHJlc3VtZUlkfSkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5za2lsbHMgPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5za2lsbHMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXROb0l0ZW1zSW5mb01lc3NhZ2UoJHNjb3BlLCBcIiBoYWJpbGlkYWRlc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi4gUHVsc2EgZWwgYm90w7NuIE51ZXZhIHBhcmEgY3JlYXIgdW5hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmV3U2tpbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNraWxsID0gU2tpbGwuJGJ1aWxkKHtyZXN1bWVfaWQ6IHJlc3VtZUlkfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2tpbGwgPSBza2lsbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZVNraWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraWxsLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNraWxscy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2tpbGxGb3JtLiRyZXNldEZvcm0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdFNraWxsID0gZnVuY3Rpb24gKHNraWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNraWxsID0gc2tpbGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVTa2lsbCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraWxsLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNraWxscy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2tpbGxGb3JtLiRyZXNldEZvcm0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgLy9kZWxldGVcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlbW92ZVNraWxsID0gZnVuY3Rpb24gKHNraWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2tpbGwgPSBza2lsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtYXRpb24gPSBNZXNzYWdlU2VydmljZS5zZXRDb25maXJtRGVsZXRlTWVzc2FnZShcIiBoYWJpbGlkYWRcIiwgXCIgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraWxsLiRkZXN0cm95KCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRyZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAvL2NoYW5nZSBzdGF0dXNcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYW5nZVN0YXR1cyA9IGZ1bmN0aW9uICgkZXZlbnQsIHNraWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tib3ggPSAkZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IChjaGVja2JveC5jaGVja2VkID8gdHJ1ZSA6IGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2tpbGwuc3RhdHVzID0gYWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2tpbGwuJHNhdmUoKS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5za2lsbHMuJHJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG5cblxuXG4gICAgICAgIH1cbiAgICB9XG5cbn1cbm1vZHVsZS5leHBvcnRzID0gc2tpbGxEaXJlY3RpdmU7XG4iLCJ2YXIgc2FsZWFibGVCYXNpYyA9IGZ1bmN0aW9uKFNhbGVhYmxlU2VydmljZSl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6XCJFQVwiLFxuICAgICAgICB0ZW1wbGF0ZVVybDpcIi4uLy4uL2pzL2FkbWluL2FuZ3VsYXIvdGVtcGxhdGVzL3NhbGVhYmxlX2Jhc2ljLmh0bWxcIixcbiAgICAgICAgcmVwbGFjZTp0cnVlLFxuICAgICAgICBjb250cm9sbGVyOlwic2FsZWFibGVCYXNpY0N0cmxcIixcbiAgICAgICAgc2NvcGU6e31cblxuICAgIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gc2FsZWFibGVCYXNpYzsiLCJ2YXIgc2FsZWFibGVEZXRhaWxzID0gZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUsJGNvbXBpbGUsJHJvb3RTY29wZSl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHJhbnNjbHVkZTogJ2VsZW1lbnQnICAgICxcbiAgICAgICAgcmVzdHJpY3Q6XCJFQVwiLFxuICAgICAgICB0ZW1wbGF0ZVVybDpcIi4uLy4uL2pzL2FkbWluL2FuZ3VsYXIvdGVtcGxhdGVzL3NhbGVhYmxlX2RldGFpbHMuaHRtbFwiLFxuICAgICAgICByZXBsYWNlOnRydWUsXG5cbiAgICAgICAgY29udHJvbGxlcjpcIlNhbGVhYmxlRGV0YWlsQ3RybFwiLFxuICAgICAgICBsaW5rOmZ1bmN0aW9uKHNjb3BlLCRlbGVtZW50LCRhdHRycywkY3RybCx0cmFuc2NsdWRlKXtcbiAgICAgICAgICAgICRyb290U2NvcGUuJG9uKFwibmV3QmFzaWNEZXRhaWxcIixmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICQoJyN0YWJzZiBhW2hyZWY9XCIjcGlsbHRhYjFcIl0nKS50YWIoJ3Nob3cnKTtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgfVxuICAgIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gc2FsZWFibGVEZXRhaWxzOyIsInZhciBzYWxlYWJsZUJhc2ljID0gZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDpcIkVBXCIsXG4gICAgICAgIHRlbXBsYXRlVXJsOlwiLi4vLi4vanMvYWRtaW4vYW5ndWxhci90ZW1wbGF0ZXMvc2FsZWFibGVfZGV0YWlsc19saXN0Lmh0bWxcIixcbiAgICAgICAgcmVwbGFjZTp0cnVlLFxuICAgICAgICBzY29wZTp7c2FsZWFibGU6XCI9XCJ9LFxuICAgICAgICBjb250cm9sbGVyOlwic2FsZWFibGVBbGxEZXRhaWxzQ3RybFwiXG5cbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IHNhbGVhYmxlQmFzaWM7IiwidmFyIHNhbGVhYmxlUHJpY2VzID0gZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDpcIkVBXCIsXG4gICAgICAgIHRlbXBsYXRlVXJsOlwiLi4vLi4vanMvYWRtaW4vYW5ndWxhci90ZW1wbGF0ZXMvc2FsZWFibGVfcHJpY2VzX2xpc3QuaHRtbFwiLFxuICAgICAgICByZXBsYWNlOnRydWUsXG4gICAgICAgIHNjb3BlOntzYWxlYWJsZTpcIj1cIn0sXG4gICAgICAgIGNvbnRyb2xsZXI6XCJzYWxlYWJsZVByaWNlQ3RybFwiXG5cbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IHNhbGVhYmxlUHJpY2VzIiwiXG52YXIgaG9tZUNvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsVXNlclNlcnZpY2UsVXNlckNvbnRlbnRUeXBlKXtcbiAgICAvL2NvbnNvbGUubG9nKCRzY29wZSk7XG4gICAgJHNjb3BlLnNob3dBbGVydCA9IHRydWU7XG4gICAgJHNjb3BlLm5vUHJvZmlsZU1zZ2UgPSAnRXN0ZSBlcyB0dSBwcmltZXJhIHNlc2nDs24gZW4gZXN0ZSBwYW5lbCBkZSBjb250cm9sLiAnK1xuICAgICdQb3IgZmF2b3IsIGEgY29udGludWFjacOzbiBjb21wbGV0YSB0dXMgZGF0b3MgcGVyc29uYWxlcy4nK1xuICAgICAgICAnU2kgbm8gZGVzZWFzIGFjdHVhbGl6YXIgdHVzIGRhdG9zLCBwdWVkZXMgaGFjZXJsbyBlbiBvdHJvIG1vbWVudG8gZGVzZGUgW1BlcmZpbF0geScrXG4gICAgJ2NvbnRpbnVhciBjb24gbGFzIG90cmFzIG9wY2lvbmVzIGRlIGVzdGUgcGFuZWwgZGUgY29udHJvbC4nO1xuXG5cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhvbWVDb250cm9sbGVyOyIsInZhciByZXN1bWVDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCRyb290U2NvcGUsUmVzdW1lSGVscGVyLE1lc3NhZ2VTZXJ2aWNlKXtcbiAgICBSZXN1bWVIZWxwZXIuZHJvcERvd25MaXN0KCcvcmVzdW1lX2Ryb3BfbGlzdCcsJHNjb3BlKTtcbiAgICBSZXN1bWVIZWxwZXIuZ2V0UmVzdW1lKCRzY29wZSwkcm9vdFNjb3BlLCcvcHVibGlzaGVkcmVzdW1lJyk7XG5cblxuXG4gICAgJHJvb3RTY29wZS4kb24oXCJ1cGRhdGVSZXN1bWVMaXN0XCIsZnVuY3Rpb24oKXtcbiAgICAgICAgUmVzdW1lSGVscGVyLmRyb3BEb3duTGlzdCgnL3Jlc3VtZV9kcm9wX2xpc3QnLCRzY29wZSk7XG4gICAgfSk7XG5cbiAgICAkc2NvcGUuZ2V0UmVzdW1lID0gZnVuY3Rpb24oaWQpe1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICByZXN1bWU6e1xuICAgICAgICAgICAgICBpZDppZFxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgJHJvb3RTY29wZS4kZW1pdChcInJlc3VtZUNoYW5nZVwiLGRhdGEpO1xuICAgIH1cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlc3VtZUNvbnRyb2xsZXI7XG4iLCJ2YXIgc2FsZWFibGVBbGxEZXRhaWxzID0gZnVuY3Rpb24oJHNjb3BlLCRyb290U2NvcGUsU2FsZWFibGVEZXRhaWxzU2VydmljZSxNZXNzYWdlU2VydmljZSxGaWxlUHJvY2Vzc29yKXtcblxuICAgICRzY29wZS5vbkZpbGVTZWxlY3QgPSBmdW5jdGlvbigkZmlsZXMpIHtcbiAgICAgICAgJHNjb3BlLmZpbGVzID0gJGZpbGVzO1xuXG4gICAgfTtcbiAgICAkc2NvcGUuaGFzSWNvbiA9IGZhbHNlO1xuICAgIHZhciBzYWxlYWJsZV9pZCA9ICRzY29wZS5zYWxlYWJsZS5pZDtcbiAgICB2YXIgZGV0YWlscyA9IFNhbGVhYmxlRGV0YWlsc1NlcnZpY2UuJHNlYXJjaCh7c2FsZWFibGVfaWQ6c2FsZWFibGVfaWR9KS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgdmFyIGl0ZW1zX251bWJlciA9IGRhdGEubGVuZ3RoO1xuXG4gICAgICAgIGlmKGl0ZW1zX251bWJlcj09MCl7XG4gICAgICAgICAgICAvL3ZhciBsaW5rVG9OZXcgPSBcIi4gQ3JlYSB5YSB1bm8gbnVldm8hXCI7XG4gICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXROb0l0ZW1zSW5mb01lc3NhZ2UoJHNjb3BlLFwiZGV0YWxsZXNcIixcIiAuQ3JlYSB1bm8gbnVldm8hXCIpO1xuICAgICAgICB9XG4gICAgfSkuJHJlc29sdmUoKTtcbiAgICAkc2NvcGUuc2FsZWFibGUuZGV0YWlscyA9IGRldGFpbHM7XG5cbiAgICB2YXIgZGV0YWlsID0gU2FsZWFibGVEZXRhaWxzU2VydmljZS4kYnVpbGQoKTtcbiAgICBkZXRhaWwuc2FsZWFibGVfaWQgPSBzYWxlYWJsZV9pZDtcbiAgICBkZXRhaWwudHlwZSA9IDA7XG4gICAgJHNjb3BlLmRldGFpbCA9IGRldGFpbDtcblxuXG4gICAgJHNjb3BlLnVwZGF0ZURldGFpbCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGRldGFpbC4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSxtZXRhKTtcbiAgICAgICAgICAgIGRldGFpbHMuJHJlZnJlc2goKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmVkaXREZXRhaWw9ZnVuY3Rpb24oZGV0YWlsKXtcbiAgICAgICAgJHNjb3BlLmZpbGVzID0gW107XG4gICAgICAgIC8vZG93bmxvYWQgZGV0YWlsIGljb24gdG8gbG9hZFxuICAgICAgICBGaWxlUHJvY2Vzc29yLmRvd25sb2FkKCRzY29wZSwnL3NhbGVhYmxlZGV0YWlsLycrZGV0YWlsLmlkKycvaWNvbicpO1xuICAgICAgICAvLyRzY29wZS5kZXNjcmlwdGl2ZUljb24gPSBcIlwiO1xuICAgICAgICAkc2NvcGUuc2hvd0RldGFpbEZvcm0gPSB0cnVlO1xuICAgICAgICAkc2NvcGUuZGV0YWlsID0gZGV0YWlsO1xuICAgICAgICAkc2NvcGUudXBkYXRlRGV0YWlsID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGRldGFpbC4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICAgICAgICAgIC8vdXBsb2FkIGZpbGVcbiAgICAgICAgICAgICAgICBpZigkc2NvcGUuZmlsZXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIEZpbGVQcm9jZXNzb3IudXBsb2FkKCRzY29wZSwnL3VwbG9hZFNhbGVhYmxlRGV0YWlsSWNvbicsZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5maWxlcyA9IFtdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUubmV3RGV0YWlsID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJHNjb3BlLmhhc0ljb24gPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLnNob3dEZXRhaWxGb3JtID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLmZpbGVzID0gW107XG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5maWxlcy5sZW5ndGgpO1xuICAgICAgICAvLyRzY29wZS5zYWxlYWJsZURldGFpbEZvcm0uJHNldFByaXN0aW5lKCk7XG4gICAgICAgIHZhciBkZXRhaWwgPSBTYWxlYWJsZURldGFpbHNTZXJ2aWNlLiRidWlsZCgpO1xuICAgICAgICBkZXRhaWwuc2FsZWFibGVfaWQgPSBzYWxlYWJsZV9pZDtcbiAgICAgICAgZGV0YWlsLnR5cGUgPSAwO1xuICAgICAgICAkc2NvcGUuZGV0YWlsID0gZGV0YWlsO1xuXG4gICAgICAgICRzY29wZS51cGRhdGVEZXRhaWwgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgZGV0YWlsLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsbWV0YSk7XG4gICAgICAgICAgICAgICAgZGV0YWlscy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIGlmKCRzY29wZS5maWxlcy5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgRmlsZVByb2Nlc3Nvci51cGxvYWQoJHNjb3BlLCcvdXBsb2FkU2FsZWFibGVEZXRhaWxJY29uJyxkYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmZpbGVzID0gW107XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLnJlbW92ZURldGFpbCA9IGZ1bmN0aW9uKGRldGFpbCl7XG4gICAgICAgIHZhciBjb25maXJtYXRpb24gPSBNZXNzYWdlU2VydmljZS5zZXRDb25maXJtRGVsZXRlTWVzc2FnZShcImRldGFsbGVcIixcIiBcIik7XG4gICAgICAgIGlmKGNvbmZpcm1hdGlvbil7XG4gICAgICAgICAgICBkZXRhaWwuJGRlc3Ryb3koKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSxtZXRhKTtcbiAgICAgICAgICAgICAgICAvLyRzY29wZS5zYWxlYWJsZURldGFpbEZvcm0uJHNldFByaXN0aW5lKCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgZGV0YWlsID0gU2FsZWFibGVEZXRhaWxzU2VydmljZS4kYnVpbGQoKTtcbiAgICAgICAgICAgICAgICBkZXRhaWwuc2FsZWFibGVfaWQgPSBzYWxlYWJsZV9pZDtcbiAgICAgICAgICAgICAgICBkZXRhaWwudHlwZSA9IDA7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmRldGFpbCA9IGRldGFpbDtcbiAgICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlRGV0YWlsID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlscy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8kcm9vdFNjb3BlLiRlbWl0KCdzYWxlYWJsZVVwZGF0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cblxuXG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzYWxlYWJsZUFsbERldGFpbHM7XG4iLCJ2YXIgc2FsZWFibGVDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCRyb290U2NvcGUsJHRpbWVvdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2FsZWFibGVTZXJ2aWNlLE1lc3NhZ2VTZXJ2aWNlKXtcbiAgICAkc2NvcGUubWFzdGVyID0ge307XG5cbiAgICB2YXIgc2FsZWFibGVzID0gU2FsZWFibGVTZXJ2aWNlLiRzZWFyY2goKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhkYXRhLmxlbmd0aCk7XG4gICAgICAgIHZhciBpdGVtc19udW1iZXIgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgaWYoaXRlbXNfbnVtYmVyPT0wKXtcbiAgICAgICAgICAgIHZhciBsaW5rVG9OZXcgPSBcIi4gQ3JlYSB5YSB1bm8gbnVldm8hXCI7XG4gICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXROb0l0ZW1zSW5mb01lc3NhZ2UoJHNjb3BlLFwic2VydmljaW9zIG8gcHJvZHVjdG9zXCIsbGlua1RvTmV3KTtcblxuICAgICAgICB9LyplbHNle1xuICAgICAgICAgICAgJHNjb3BlLnNhbGVhYmxlcyA9IGRhdGE7XG5cbiAgICAgICAgfSovXG4gICAgfSk7XG5cbiAgICAkc2NvcGUuc2FsZWFibGVzID0gc2FsZWFibGVzO1xuXG4gICAgJHNjb3BlLnJlbW92ZVNhbGVhYmxlID0gZnVuY3Rpb24oc2FsZWFibGUpe1xuICAgICAgICB2YXIgY29uZmlybWF0aW9uID0gTWVzc2FnZVNlcnZpY2Uuc2V0Q29uZmlybURlbGV0ZU1lc3NhZ2UoXCIgc2VydmljaW8gbyBwcm9kdWN0b1wiLFwiIFNlIGRlc3RydWlyw6FuIHRhbWJpw6luIHRvZG9zIHN1cyBkZXRhbGxlcy5cIik7XG4gICAgICAgIGlmKGNvbmZpcm1hdGlvbil7XG4gICAgICAgICAgICBzYWxlYWJsZS4kZGVzdHJveSgpLiR0aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvL0RldGFpbHNcbiAgICAvL25ldzogY3JlYXRlIGEgbmV3IGRldGFpbHMgXCJ3aXphcmRcIiBpbnN0YW5jZVxuICAgICRzY29wZS5uZXdEZXRhaWxzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJHNjb3BlLnNob3dEZXRhaWxzID0gdHJ1ZTtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCduZXdEZXRhaWxzJyk7XG4gICAgfVxuICAgIC8vZWRpdDogd2l6YXJkLCBlZGl0IGZhc2hpb25cbiAgICAkc2NvcGUuZWRpdERldGFpbHMgPSBmdW5jdGlvbihzYWxlYWJsZSl7XG4gICAgICAgICRzY29wZS5zaG93RGV0YWlscyA9IHRydWU7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnZWRpdERldGFpbHMnLHNhbGVhYmxlKTtcbiAgICB9XG5cbiAgICAvL2Nsb3NlIHdpemFyZFxuICAgICRzY29wZS5jbG9zZVdpemFyZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRzY29wZS5zaG93RGV0YWlscyA9IGZhbHNlO1xuICAgICAgICBsb2NhdGlvbi5ocmVmID0gJy9hZG1pbi9zZXJ2aWNlcyc7XG4gICAgfVxuXG5cbn1cbm1vZHVsZS5leHBvcnRzID0gc2FsZWFibGVDb250cm9sbGVyOyIsInZhciBzYWxlYWJsZURldGFpbEN0cmwgPSBmdW5jdGlvbigkc2NvcGUsJHJvb3RTY29wZSxTYWxlYWJsZVNlcnZpY2UsTWVzc2FnZVNlcnZpY2UsJGVsZW1lbnQsJGNvbXBpbGUpe1xuXG4gICAgJHJvb3RTY29wZS4kb24oJ25ld0RldGFpbHMnLGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgJHNjb3BlLnNhbGVhYmxlID0ge307XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnbmV3QmFzaWNEZXRhaWwnKTtcbiAgICB9KTtcblxuICAgICRyb290U2NvcGUuJG9uKCdzYWxlYWJsZUNyZWF0ZWQnLGZ1bmN0aW9uKGV2ZW50LGRhdGEpe1xuICAgICAgICAkc2NvcGUuc2FsZWFibGVzLiRyZWZyZXNoKCk7XG4gICAgICAgICRzY29wZS5zYWxlYWJsZSA9IGRhdGE7XG4gICAgfSk7XG4gICAgJHJvb3RTY29wZS4kb24oJ2VkaXREZXRhaWxzJyxmdW5jdGlvbihldmVudCxzYWxlYWJsZSl7XG4gICAgICAgICRzY29wZS5zYWxlYWJsZSA9IHNhbGVhYmxlO1xuICAgICAgICAkc2NvcGUuc2FsZWFibGVzLiRyZWZyZXNoKCk7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnZWRpdEJhc2ljRGV0YWlsJyxzYWxlYWJsZSk7XG4gICAgfSlcblxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2FsZWFibGVEZXRhaWxDdHJsO1xuIiwidmFyIHNhbGVhYmxlUHJpY2VzID0gZnVuY3Rpb24oJHNjb3BlLCRyb290U2NvcGUsU2FsZWFibGVQcmljZVNlcnZpY2UsTWVzc2FnZVNlcnZpY2Upe1xuXG4gICAgLyp2YXIgcmVzZXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAkc2NvcGUuc2FsZWFibGVQcmljZUZvcm0uJHNldFByaXN0aW5lKCk7XG4gICAgICAgICRzY29wZS5wcmljZSA9IGFuZ3VsYXIuY29weSh7fSk7XG4gICAgfSovXG5cbiAgICB2YXIgc2FsZWFibGVfaWQgPSAkc2NvcGUuc2FsZWFibGUuaWQ7XG4gICAgdmFyIHByaWNlcyA9IFNhbGVhYmxlUHJpY2VTZXJ2aWNlLiRzZWFyY2goe3NhbGVhYmxlX2lkOnNhbGVhYmxlX2lkfSkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgIHZhciBpdGVtc19udW1iZXIgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgaWYoaXRlbXNfbnVtYmVyPT0wKXtcbiAgICAgICAgICAgIC8vdmFyIGxpbmtUb05ldyA9IFwiLiBDcmVhIHlhIHVubyBudWV2byFcIjtcbiAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldE5vSXRlbXNJbmZvTWVzc2FnZSgkc2NvcGUsXCJwcmVjaW9zXCIsXCIgLkNyZWEgdW5vIG51ZXZvIVwiKTtcbiAgICAgICAgfVxuICAgIH0pLiRyZXNvbHZlKCk7XG5cbiAgICAkc2NvcGUuc2FsZWFibGUucHJpY2VzID0gcHJpY2VzO1xuXG4gICAgdmFyIHByaWNlID0gU2FsZWFibGVQcmljZVNlcnZpY2UuJGJ1aWxkKCk7XG4gICAgcHJpY2Uuc2FsZWFibGVfaWQgPSBzYWxlYWJsZV9pZDtcbiAgICAkc2NvcGUucHJpY2UgPSBwcmljZTtcblxuICAgICRzY29wZS51cGRhdGVQcmljZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHByaWNlLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICAgICAgcHJpY2VzLiRyZWZyZXNoKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICRzY29wZS5lZGl0UHJpY2U9ZnVuY3Rpb24ocHJpY2Upe1xuICAgICAgICAkc2NvcGUuc2hvd1ByaWNlRm9ybSA9IHRydWU7XG4gICAgICAgICRzY29wZS5wcmljZSA9IHByaWNlO1xuICAgICAgICAkc2NvcGUudXBkYXRlUHJpY2UgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcHJpY2UuJHNhdmUoKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSxtZXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLm5ld1ByaWNlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJHNjb3BlLnNob3dQcmljZUZvcm0gPSB0cnVlO1xuICAgICAgICAvLyRzY29wZS5zYWxlYWJsZVByaWNlRm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgdmFyIHByaWNlID0gU2FsZWFibGVQcmljZVNlcnZpY2UuJGJ1aWxkKCk7XG4gICAgICAgIHByaWNlLnNhbGVhYmxlX2lkID0gc2FsZWFibGVfaWQ7XG4gICAgICAgICRzY29wZS5wcmljZSA9IHByaWNlO1xuXG4gICAgICAgICRzY29wZS51cGRhdGVQcmljZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBwcmljZS4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICAgICAgICAgIHByaWNlcy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93UHJpY2VGb3JtID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5yZW1vdmVQcmljZSA9IGZ1bmN0aW9uKHByaWNlKXtcbiAgICAgICAgdmFyIGNvbmZpcm1hdGlvbiA9IE1lc3NhZ2VTZXJ2aWNlLnNldENvbmZpcm1EZWxldGVNZXNzYWdlKFwiIHByZWNpb1wiLFwiIFwiKTtcbiAgICAgICAgaWYoY29uZmlybWF0aW9uKXtcbiAgICAgICAgICAgIHByaWNlLiRkZXN0cm95KCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRyZXNwb25zZS5kYXRhO1xuXG4gICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSxtZXRhKTtcbiAgICAgICAgICAgICAgICAvL3Mkc2NvcGUuc2FsZWFibGVQcmljZUZvcm0uJHNldFByaXN0aW5lKCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcHJpY2UgPSBTYWxlYWJsZVByaWNlU2VydmljZS4kYnVpbGQoKTtcbiAgICAgICAgICAgICAgICBwcmljZS5zYWxlYWJsZV9pZCA9IHNhbGVhYmxlX2lkO1xuICAgICAgICAgICAgICAgICRzY29wZS5wcmljZSA9IHByaWNlO1xuICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVQcmljZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHByaWNlLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VzLiRyZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd1ByaWNlRm9ybSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxuXG5cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNhbGVhYmxlUHJpY2VzO1xuIiwiXG52YXIgYmlvU2VydmljZSA9IGZ1bmN0aW9uKHJlc3Rtb2Qpe1xuICAgIHJldHVybiByZXN0bW9kLm1vZGVsKCcvYmlvJykubWl4KCdEZWZhdWx0UGFja2VyJyx7XG4gICAgICRjb25maWc6e2pzb25NZXRhOiAnLid9XG5cbiAgICAgfSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGJpb1NlcnZpY2U7IiwidmFyIGNhdGVnb3J5U2VydmljZSA9IGZ1bmN0aW9uKHJlc3Rtb2Qpe1xuICAgIHJldHVybiByZXN0bW9kLm1vZGVsKCcvY2F0JykubWl4KCdEZWZhdWx0UGFja2VyJyx7XG4gICAgICAgICRjb25maWc6e2pzb25NZXRhOiAnLid9XG4gICAgfSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGNhdGVnb3J5U2VydmljZTsiLCJ2YXIgZWR1Y2F0aW9uU2VydmljZSA9IGZ1bmN0aW9uKHJlc3Rtb2Qpe1xuICAgIHJldHVybiByZXN0bW9kLm1vZGVsKCcvZWR1Y2F0aW9uJykubWl4KCdEZWZhdWx0UGFja2VyJyx7XG4gICAgICAgICRjb25maWc6e2pzb25NZXRhOiAnLid9XG4gICAgfSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGVkdWNhdGlvblNlcnZpY2U7IiwidmFyIGV4cGVyaWVuY2VTZXJ2aWNlID0gZnVuY3Rpb24ocmVzdG1vZCl7XG4gICAgcmV0dXJuIHJlc3Rtb2QubW9kZWwoJy9leHBlcmllbmNlJykubWl4KCdEZWZhdWx0UGFja2VyJyx7XG4gICAgICAgICRjb25maWc6e2pzb25NZXRhOiAnLid9XG4gICAgfSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGV4cGVyaWVuY2VTZXJ2aWNlOyIsInZhciBmaWxlUHJvY2Vzc29yID0gZnVuY3Rpb24oJHVwbG9hZCwkaHR0cCxNZXNzYWdlU2VydmljZSl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdXBsb2FkOmZ1bmN0aW9uKHNjb3BlLHBhdGgsZGF0YSl7XG5cbiAgICAgICAgICAgICAgICB2YXIgZmlsZXMgPSBzY29wZS5maWxlc1swXTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlcyk7XG4gICAgICAgICAgICAgICAgdmFyIG51bWJlck9mRmlsZXMgPSBzY29wZS5maWxlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYobnVtYmVyT2ZGaWxlcyA+IDEgJiYgbnVtYmVyT2ZGaWxlcyA8IDgpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZXMgPSBzY29wZS5maWxlcztcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihudW1iZXJPZkZpbGVzID4gNyl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibm8gY2FyZ3VlIGFzaWlpaWlcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vZm9yICh2YXIgaSA9IDA7IGkgPCBzY29wZS5maWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIC8vdmFyIGZpbGUgPSBzY29wZS5maWxlc1tpXTtcbiAgICAgICAgICAgICAgICAvL3ZhciBmaWxlID0gc2NvcGUuZmlsZXM7XG4gICAgICAgICAgICAgICAgc2NvcGUudXBsb2FkID0gJHVwbG9hZC51cGxvYWQoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6IHBhdGgsIC8vdXBsb2FkLnBocCBzY3JpcHQsIG5vZGUuanMgcm91dGUsIG9yIHNlcnZsZXQgdXJsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLCAvL29yICdQVVQnLFxuICAgICAgICAgICAgICAgICAgICBmaWxlOiBmaWxlcyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICAgICAgICAgIH0pLnByb2dyZXNzKGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICBzY29wZS5nZXRQZXJjZW50YWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KDEwMC4wICogZXZ0LmxvYWRlZCAvIGV2dC50b3RhbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuaGFzSWNvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLmRlc2NyaXB0aXZlSWNvbiA9IGRhdGEuaW1nO1xuICAgICAgICAgICAgICAgICAgICBzY29wZS5nZXRQZXJjZW50YWdlPWZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRTZXJ2ZXJWYWxpZGF0aW9uTWVzc2FnZShzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLmVycm9ycyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICB9LFxuICAgICAgICBkb3dubG9hZDpmdW5jdGlvbihzY29wZSxwYXRoKXtcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQocGF0aCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuZGVzY3JpcHRpdmVJY29uID0gZGF0YS5pbWc7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuXG4gICAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBmaWxlUHJvY2Vzc29yOyIsInZhciBudW1iZXJGb3JtYXQgPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiBmdW5jdGlvbihfdmFsdWUpIHtcbiAgICAgICAgdmFyIG51bWJlckZvcm1hdHRlZCA9IHBhcnNlRmxvYXQoX3ZhbHVlKTtcbiAgICAgICAgcmV0dXJuIG51bWJlckZvcm1hdHRlZDtcbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IG51bWJlckZvcm1hdDtcbiIsInZhciBoZWxwZXJTZXJ2aWNlID0gZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuICAgICAgICBtb250aHM6ZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBtb250aHMgPSBbXCJlbmVyb1wiLFwiZmVicmVyb1wiLFwibWFyem9cIixcImFicmlsXCIsXG4gICAgICAgICAgICAgICAgXCJtYXlvXCIsXCJqdW5pb1wiLFwianVsaW9cIixcImFnb3N0b1wiLFxuICAgICAgICAgICAgICAgIFwic2VwdGllbWJyZVwiLFwib2N0dWJyZVwiLFwibm92aWVtYnJlXCIsXCJkaWNpZW1icmVcIl07XG4gICAgICAgICAgICByZXR1cm4gbW9udGhzO1xuICAgICAgICB9LFxuICAgICAgICBlbmFibGVGb3JtOmZ1bmN0aW9uKHNjb3BlLHN0YXR1cyl7XG4gICAgICAgICAgICBpZihzdGF0dXMpe1xuICAgICAgICAgICAgICAgIHNjb3BlLmdyaWRTaG93biA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHNjb3BlLmZvcm1TaG93biA9IHRydWU7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBzY29wZS5ncmlkU2hvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNjb3BlLmZvcm1TaG93biA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBnZXRDaGVja0J1dHRvblN0YXR1czpmdW5jdGlvbihldmVudCl7XG4gICAgICAgICAgICB2YXIgY2hlY2tib3ggPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgYWN0aW9uID0gKGNoZWNrYm94LmNoZWNrZWQgPyB0cnVlOiBmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm4gYWN0aW9uO1xuICAgICAgICB9XG4gICAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBoZWxwZXJTZXJ2aWNlOyIsInZhciBpbnRlcmVzdFNlcnZpY2UgPSBmdW5jdGlvbihyZXN0bW9kKXtcbiAgICByZXR1cm4gcmVzdG1vZC5tb2RlbCgnL2ludGVyZXN0JykubWl4KCdEZWZhdWx0UGFja2VyJyx7XG4gICAgICAgICRjb25maWc6e2pzb25NZXRhOiAnLid9XG4gICAgfSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGludGVyZXN0U2VydmljZTsiLCJ2YXIgbGFuZ3VhZ2VTZXJ2aWNlID0gZnVuY3Rpb24ocmVzdG1vZCl7XG4gICAgcmV0dXJuIHJlc3Rtb2QubW9kZWwoJy9sYW5ndWFnZScpLm1peCgnRGVmYXVsdFBhY2tlcicse1xuICAgICAgICAkY29uZmlnOntqc29uTWV0YTogJy4nfVxuICAgIH0pO1xufVxubW9kdWxlLmV4cG9ydHMgPSBsYW5ndWFnZVNlcnZpY2U7IiwidmFyIG1lc3NhZ2VTZXJ2aWNlID0gZnVuY3Rpb24oTWVzc2FnZXMsJHRpbWVvdXQpe1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldDpmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIE1lc3NhZ2VzLmZpbHRlcihmdW5jdGlvbiggb2JqICkge1xuICAgICAgICAgICAgLy8gY29lcmNlIGJvdGggb2JqLmlkIGFuZCBpZCB0byBudW1iZXJzXG4gICAgICAgICAgICAvLyBmb3IgdmFsICYgdHlwZSBjb21wYXJpc29uXG4gICAgICAgICAgICAgICAgLy9yZXR1cm4gK29iai5uYW1lID09PSArbmFtZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLm5hbWUgPT09IG5hbWU7XG4gICAgICAgICAgICB9KVsgMCBdO1xuICAgICAgICB9LFxuICAgICAgICBzZXRBbGVydE1lc3NhZ2U6ZnVuY3Rpb24oc2NvcGUsZGF0YSl7XG4gICAgICAgICAgICBzY29wZS5TaG93UmVzdWx0QWxlcnQgPSB0cnVlO1xuICAgICAgICAgICAgc2NvcGUucmVzdWx0ID0gZGF0YTtcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgc2NvcGUuU2hvd1Jlc3VsdEFsZXJ0ID0gZmFsc2U7XG4gICAgICAgICAgICB9LDQwMDApO1xuICAgICAgICB9LFxuICAgICAgICBzZXRTZXJ2ZXJWYWxpZGF0aW9uTWVzc2FnZTpmdW5jdGlvbihzY29wZSl7XG4gICAgICAgICAgICBzY29wZS5TaG93U2VydmVyRXJyb3JzID0gdHJ1ZTtcbiAgICAgICAgICAgIHNjb3BlLnJlc3VsdCA9IFwiTG9zIGRhdG9zIG5vIHNlIHB1ZGllcm9uIGd1YXJkYXJcIitcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiIGRlYmlkbyBhIGxvcyBzaWd1aWVudGVzIGVycm9yZXMuIFBvciBmYXZvciBjb3Jyw61nZWxvcy5cIjtcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgc2NvcGUuU2hvd1NlcnZlckVycm9ycyA9IGZhbHNlO1xuICAgICAgICAgICAgfSw1MDAwKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0Tm9JdGVtc0luZm9NZXNzYWdlOmZ1bmN0aW9uKHNjb3BlLGRhdGF0eXBlLGFkZGl0aW9uYWwpe1xuICAgICAgICAgICAgc2NvcGUuc2hvd05vSXRlbXNBbGVydCA9IHRydWU7XG4gICAgICAgICAgICBzY29wZS5yZXN1bHQgPSBcIk5vIHNlIGhhbiBlbmNvbnRyYWRvIFwiK2RhdGF0eXBlK2FkZGl0aW9uYWw7XG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHNjb3BlLnNob3dOb0l0ZW1zQWxlcnQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0sODAwMCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldENvbmZpcm1EZWxldGVNZXNzYWdlOmZ1bmN0aW9uKGl0ZW0sIGFkZGl0aW9uYWwpe1xuICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm0oXCJSZWFsbWVudGUgZGVzZWFzIGVsaW1pbmFyIGVzdGUvYVwiK2l0ZW0rXCI/LiBcIithZGRpdGlvbmFsK1wiXCIpO1xuICAgICAgICB9XG5cbiAgICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBtZXNzYWdlU2VydmljZTtcbiIsInZhciBuZXdQYXNzd29yZCA9IGZ1bmN0aW9uKCRodHRwKXtcbiAgICAvLyRodHRwLnBvc3QoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB1cGRhdGVQYXNzd29yZDpmdW5jdGlvbih1c2VySWQsZGF0YSl7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FkbWluL25ld3Bhc3N3b3JkLycrdXNlcklkLCBkYXRhKTtcbiAgICAgICAgfVxuICAgIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXdQYXNzd29yZDsiLCJcbnZhciBwcm9maWxlU2VydmljZSA9IGZ1bmN0aW9uKHJlc3Rtb2Qpe1xuICAgIHJldHVybiByZXN0bW9kLm1vZGVsKCcvcHJvZmlsZScpLm1peCgnRGVmYXVsdFBhY2tlcicse1xuICAgICAgICAkY29uZmlnOntqc29uTWV0YTogJy4nfVxuICAgIH0pO1xufVxubW9kdWxlLmV4cG9ydHMgPSBwcm9maWxlU2VydmljZTtcbiIsInZhciByZXN1bWVIZWxwZXIgPSBmdW5jdGlvbigkaHR0cCxNZXNzYWdlU2VydmljZSl7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBkcm9wRG93bkxpc3Q6ZnVuY3Rpb24ocGF0aCxzY29wZSl7XG4gICAgICAgICAgICAkaHR0cC5nZXQocGF0aCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICBzY29wZS5yZXN1bWVzID0gZGF0YS5yZXN1bWVzO1xuICAgICAgICAgICAgICAgIHNjb3BlLnJlc3VtZSA9IHNjb3BlLnJlc3VtZXNbNV07XG4gICAgICAgICAgICB9KS5lcnJvcigpO1xuICAgICAgICB9LFxuICAgICAgICBiaW9Ecm9wRG93bkxpc3Q6ZnVuY3Rpb24ocGF0aCxzY29wZSl7XG4gICAgICAgICAgICAkaHR0cC5nZXQocGF0aCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICBzY29wZS5iaW9zID0gZGF0YS5iaW9zO1xuICAgICAgICAgICAgfSkuZXJyb3IoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0UmVzdW1lOmZ1bmN0aW9uKHNjb3BlLHJvb3RTY29wZSxwYXRoKXtcbiAgICAgICAgICAgICRodHRwLmdldChwYXRoKS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIHZhciByZXN1bWUgPSBkYXRhLmRhdGEucmVzdW1lO1xuXG4gICAgICAgICAgICAgICAgaWYocmVzdW1lID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvb3RTY29wZS4kZW1pdChcIm5vUmVzdW1lRm91bmRcIik7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIHJvb3RTY29wZS4kZW1pdChcInJlc3VtZUNoYW5nZVwiLCBkYXRhLmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0sXG4gICAgICAgIHB1Ymxpc2hSZXN1bWU6ZnVuY3Rpb24oc2NvcGUscm9vdFNjb3BlLHBhdGgpe1xuICAgICAgICAgICAgJGh0dHAucG9zdChwYXRoKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZShzY29wZSxtZXRhKTtcbiAgICAgICAgICAgIH0pLmVycm9yKCk7XG5cbiAgICAgICAgfSxcbiAgICAgICAgY2xvbmVSZXN1bWU6ZnVuY3Rpb24oc2NvcGUscm9vdFNjb3BlLHBhdGgpe1xuICAgICAgICAgICAgJGh0dHAucG9zdChwYXRoKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIHJvb3RTY29wZS4kZW1pdChcInJlc3VtZUNoYW5nZVwiLGRhdGEpO1xuICAgICAgICAgICAgICAgIHJvb3RTY29wZS4kZW1pdChcInVwZGF0ZVJlc3VtZUxpc3RcIixkYXRhKTtcbiAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2Uoc2NvcGUsbWV0YSk7XG5cbiAgICAgICAgICAgIH0pLmVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgLyp1bnB1Ymxpc2hSZXN1bWU6ZnVuY3Rpb24oc2NvcGUscm9vdFNjb3BlLHBhdGgpe1xuICAgICAgICAgICAgJGh0dHAucG9zdChwYXRoKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidW5wdVwiKTtcbiAgICAgICAgICAgIH0pLmVycm9yKCk7XG4gICAgICAgIH0qL1xuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXN1bWVIZWxwZXI7IiwidmFyIHJlc3VtZVNlcnZpY2UgPSBmdW5jdGlvbihyZXN0bW9kKXtcbiAgICByZXR1cm4gcmVzdG1vZC5tb2RlbCgnL3Jlc3VtZScpLm1peCgnRGVmYXVsdFBhY2tlcicse1xuICAgICAgICAkY29uZmlnOntqc29uTWV0YTogJy4nfVxuICAgIH0pO1xufVxubW9kdWxlLmV4cG9ydHMgPSByZXN1bWVTZXJ2aWNlOyIsInZhciBzZWxlYWJsZURldGFpbHMgPSBmdW5jdGlvbihyZXN0bW9kKXtcbiAgICByZXR1cm4gcmVzdG1vZC5tb2RlbCgnL3NhbGVhYmxlZGV0YWlsJykubWl4KCdEZWZhdWx0UGFja2VyJyx7XG4gICAgICAgICRjb25maWc6e2pzb25NZXRhOiAnLid9XG4gICAgfSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IHNlbGVhYmxlRGV0YWlsczsiLCJ2YXIgc2FsZWFibGVIZWxwZXIgPSBmdW5jdGlvbigkaHR0cCxNZXNzYWdlU2VydmljZSl7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjYXRlZ29yeUxpc3Q6ZnVuY3Rpb24ocGF0aCxzY29wZSl7XG4gICAgICAgICAgICAkaHR0cC5nZXQocGF0aCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICBzY29wZS5jYXRvcHRpb25zID0gZGF0YS5jYXRlZ29yaWVzO1xuICAgICAgICAgICAgfSkuZXJyb3IoKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2FsQ2F0ZWdvcnlMaXN0OmZ1bmN0aW9uKHBhdGgsc2NvcGUpe1xuICAgICAgICAgICAgJGh0dHAuZ2V0KHBhdGgpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgdmFyIGNhdHMgPSBkYXRhLmNhdGVnb3JpZXM7XG4gICAgICAgICAgICAgICAgc2NvcGUuc2FsZWFibGUuY2F0ZWdvcmllcyA9IGNhdHM7XG4gICAgICAgICAgICB9KS5lcnJvcigpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNhbGVhYmxlSGVscGVyOyIsInZhciBzZWxlYWJsZVByaWNlID0gZnVuY3Rpb24ocmVzdG1vZCl7XG4gICAgcmV0dXJuIHJlc3Rtb2QubW9kZWwoJy9zYWxlYWJsZXByaWNlJykubWl4KCdEZWZhdWx0UGFja2VyJyx7XG4gICAgICAgICRjb25maWc6e2pzb25NZXRhOiAnLid9XG4gICAgfSkubWl4KHtcbiAgICAgICAgYW1tb3VudDoge2RlY29kZTonTnVtYmVyRm9ybWF0J30sXG4gICAgICAgIGRpc2NvdW50OntkZWNvZGU6J051bWJlckZvcm1hdCd9XG4gICAgfSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IHNlbGVhYmxlUHJpY2U7IiwidmFyIHNlbGVhYmxlU2VydmljZSA9IGZ1bmN0aW9uKHJlc3Rtb2Qpe1xuICAgIHJldHVybiByZXN0bW9kLm1vZGVsKCcvc2FsZWFibGUnKS5taXgoJ0RlZmF1bHRQYWNrZXInLHtcbiAgICAgICAgJGNvbmZpZzp7anNvbk1ldGE6ICcuJ31cbiAgICB9KTtcbn1cbm1vZHVsZS5leHBvcnRzID0gc2VsZWFibGVTZXJ2aWNlOyIsInZhciBza2lsbFNlcnZpY2UgPSBmdW5jdGlvbihyZXN0bW9kKXtcbiAgICByZXR1cm4gcmVzdG1vZC5tb2RlbCgnL3NraWxsJykubWl4KCdEZWZhdWx0UGFja2VyJyx7XG4gICAgICAgICRjb25maWc6e2pzb25NZXRhOiAnLid9XG4gICAgfSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IHNraWxsU2VydmljZTsiLCJ2YXIgdGhlUGFja2VyID0gIGZ1bmN0aW9uKCkge1xuXG4gICAgZnVuY3Rpb24gTXlQYWNrZXIoX21vZGVsKSB7XG4gICAgICAgIC8vdGhpcy5tZXRhID0gX21vZGVsLiRnZXRQcm9wZXJ0eSgnanNvbk1ldGEnLCAnbWV0YScpO1xuICAgICAgICBjb25zb2xlLmxvZyhfbW9kZWwpO1xuICAgICAgICAvLyB5b3UgY2FuIHNldCBzb21lIG1vZGVsIHNwZWNpZmljIGJlaGF2aW91ciBoZXJlLCBsaWtlIHRoZSBwcm9wZXJ0eSBiZWluZyBleHRyYWN0ZWQuXG4gICAgfVxuXG4gICAgTXlQYWNrZXIucHJvdG90eXBlID0ge1xuICAgICAgICB1blBhY2s6IGZ1bmN0aW9uKF9yYXdEYXRhLCBfcmVjb3JkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhfcmF3RGF0YSk7XG4gICAgICAgICAgICBfcmVjb3JkLiRtZXRhZGF0YSA9IF9yYXdEYXRhOyAvLyBzdG9yZSBtZXRhZGF0YSBhc3NvY2lhdGVkIHdpdGggcmVxdWVzdFxuICAgICAgICAgICAgcmV0dXJuIF9yYXdEYXRhLm15UHJvcDsgLy8gZXh0cmFjdCBwcm9wZXJ0eSBmcm9tIHJlcXVlc3QgZGF0YS5cbiAgICAgICAgfSxcbiAgICAgICAgdW5QYWNrTWFueTogZnVuY3Rpb24oX3Jhd0RhdGEsIF9jb2xsZWN0aW9uKSB7XG5cbiAgICAgICAgICAgIF9jb2xsZWN0aW9uLiRtZXRhZGF0YSA9IF9yYXdEYXRhOyAvLyBzdG9yZSBtZXRhZGF0YSBhc3NvY2lhdGVkIHdpdGggcmVxdWVzdFxuICAgICAgICAgICAgcmV0dXJuIF9jb2xsZWN0aW9uLm15UHJvcDsgLy8gZXh0cmFjdCBwcm9wZXJ0eSBmcm9tIHJlcXVlc3QgZGF0YS5cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gTXlQYWNrZXI7XG59O1xubW9kdWxlLmV4cG9ydHMgPSB0aGVQYWNrZXI7XG4iLCJ2YXIgdXNlckNvbnRlbnRUeXBlID0gZnVuY3Rpb24ocmVzdG1vZCl7XG4gICAgcmV0dXJuIHJlc3Rtb2QubW9kZWwoJy91c2VyY29udGVudHR5cGUnKS5taXgoJ0RlZmF1bHRQYWNrZXInLHtcbiAgICAgICAgJGNvbmZpZzp7anNvbk1ldGE6ICcuJ31cbiAgICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB1c2VyQ29udGVudFR5cGU7XG5cblxuIiwiXG52YXIgdXNlclNlcnZpY2UgPSBmdW5jdGlvbihyZXN0bW9kKXtcbiAgICByZXR1cm4gcmVzdG1vZC5tb2RlbCgnL3VzZXInKS5taXgoJ0RlZmF1bHRQYWNrZXInLHtcbiAgICAgICAgJGNvbmZpZzp7anNvbk1ldGE6ICcuJ31cbiAgICB9KTtcbn1cbm1vZHVsZS5leHBvcnRzID0gdXNlclNlcnZpY2U7IiwidmFyIHVzZXJDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCR0aW1lb3V0LFVzZXJTZXJ2aWNlLCBQcm9maWxlU2VydmljZSxNZXNzYWdlU2VydmljZSxOZXdQYXNzd29yZCl7XG5cbiAgICB2YXIgdXNlciA9IFVzZXJTZXJ2aWNlLiRmaW5kKDApO1xuICAgIHZhciBwcm9maWxlID0gUHJvZmlsZVNlcnZpY2UuJGZpbmQoMCk7XG4gICAgJHNjb3BlLnByb2ZpbGUgPSBwcm9maWxlLiRmZXRjaCgpO1xuICAgICRzY29wZS51c2VyID0gdXNlci4kZmV0Y2goKTtcblxuICAgICRzY29wZS51cGRhdGVVc2VyID0gZnVuY3Rpb24oKXtcblxuICAgICAgICB1c2VyLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICB9LGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgJHNjb3BlLmVycm9ycyA9IGRhdGEuJHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRTZXJ2ZXJWYWxpZGF0aW9uTWVzc2FnZSgkc2NvcGUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUudXBkYXRlUGFzc3dvcmQgPSBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgY2hhbmdlZFBhc3N3b3JkID0ge1xuICAgICAgICAgIHBhc3N3b3JkOiRzY29wZS5wYXNzd29yZFxuICAgICAgICB9O1xuICAgICAgICB2YXIgbmV3UGFzc3dvcmQgPSBOZXdQYXNzd29yZC51cGRhdGVQYXNzd29yZCh1c2VyLmlkLGNoYW5nZWRQYXNzd29yZCk7XG4gICAgICAgIG5ld1Bhc3N3b3JkLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEubWV0YTtcbiAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsbWV0YSk7XG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICRzY29wZS5wYXNzd29yZCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dQYXNzd29yZENoYW5nZSA9IGZhbHNlO1xuICAgICAgICAgICAgfSw0MDAwKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICRzY29wZS51cGRhdGVQZXJzb25hbEluZm8gPSBmdW5jdGlvbigpe1xuICAgICAgICBwcm9maWxlLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICB9LGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgJHNjb3BlLmVycm9ycyA9IGRhdGEuJHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRTZXJ2ZXJWYWxpZGF0aW9uTWVzc2FnZSgkc2NvcGUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgJHNjb3BlLnVwZGF0ZVNvY2lhbEluZm8gPSBmdW5jdGlvbigpe1xuICAgICAgICBwcm9maWxlLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICB9LGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgJHNjb3BlLmVycm9ycyA9IGRhdGEuJHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRTZXJ2ZXJWYWxpZGF0aW9uTWVzc2FnZSgkc2NvcGUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB1c2VyQ29udHJvbGxlcjtcbiIsInZhciBzdGNfbWVzc2FnZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFtcblxuICAgICAgICB7XG4gICAgICAgICAgICBcImNvZGVcIjogNzAxLFxuICAgICAgICAgICAgXCJuYW1lXCI6XCJjb250ZW50c2VsZWN0b3JfaW5mb1wiLFxuICAgICAgICAgICAgXCJtZXNzYWdlXCI6ICdBY3RpdmEgbGFzIG9wY2lvbmVzIHF1ZSBxdWllcmVzIHF1ZSBhcGFyZXpjYW4gZW4gdHUgc2l0aW8gV2ViLicrXG4gICAgICAgICAgICAnUG9yIGVqZW1wbG8sIHNpIG5vIGVzIHR1IG9iamV0aXZvIG1vc3RyYXIgU2VydmljaW9zIGEgdHVzIHZpc2l0YW50ZXMsIHB1ZWRlcyBkZXNhY3RpdmFyIGxhIGNhc2lsbGEgXCJTZXJ2aWNpb3NcIiB5IGVzZSBjb250ZW5pZG8gbm8gc2UgbW9zdHJhcsOhLicsXG4gICAgICAgICAgICBcInR5cGVcIjogXCJpbmZvXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgXCJjb2RlXCI6IDcwMixcbiAgICAgICAgICAgIFwibmFtZVwiOlwicmVzdW1lc2VsZWN0b3JfaW5mb1wiLFxuICAgICAgICAgICAgXCJtZXNzYWdlXCI6ICdQdWxzYSBsYSBvcGNpw7NuIHBhcmEgaXIgYSBsYSBzZWNjacOzbiBkZWwgUsOpc3Vtw6kgaW5kaWNhZGEnLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwiaW5mb1wiXG4gICAgICAgIH0sXG5cbiAgICBdXG5cbn07XG5tb2R1bGUuZXhwb3J0cyA9IHN0Y19tZXNzYWdlcztcbiIsIi8qXG4gQW5ndWxhckpTIHYxLjMuMTNcbiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuIExpY2Vuc2U6IE1JVFxuKi9cbihmdW5jdGlvbihyLGYscyl7J3VzZSBzdHJpY3QnO2YubW9kdWxlKFwibmdNZXNzYWdlc1wiLFtdKS5kaXJlY3RpdmUoXCJuZ01lc3NhZ2VzXCIsW1wiJGNvbXBpbGVcIixcIiRhbmltYXRlXCIsXCIkdGVtcGxhdGVSZXF1ZXN0XCIsZnVuY3Rpb24ocSxrLGwpe3JldHVybntyZXN0cmljdDpcIkFFXCIsY29udHJvbGxlcjpmdW5jdGlvbigpe3RoaXMuJHJlbmRlck5nTWVzc2FnZUNsYXNzZXM9Zi5ub29wO3ZhciBiPVtdO3RoaXMucmVnaXN0ZXJNZXNzYWdlPWZ1bmN0aW9uKGQsYSl7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXS50eXBlPT1hLnR5cGUpe2lmKGQhPWMpe3ZhciBnPWJbZF07YltkXT1iW2NdO2Q8Yi5sZW5ndGg/YltjXT1nOmIuc3BsaWNlKDAsYyl9cmV0dXJufWIuc3BsaWNlKGQsMCxhKX07dGhpcy5yZW5kZXJNZXNzYWdlcz1mdW5jdGlvbihkLGEpe2Q9ZHx8e307dmFyIGM7Zi5mb3JFYWNoKGIsZnVuY3Rpb24oYil7dmFyIGU7aWYoZT0hY3x8YSllPWRbYi50eXBlXSxlPW51bGwhPT1cbmUmJiExIT09ZSYmZTtlPyhiLmF0dGFjaCgpLGM9ITApOmIuZGV0YWNoKCl9KTt0aGlzLnJlbmRlckVsZW1lbnRDbGFzc2VzKGMpfX0scmVxdWlyZTpcIm5nTWVzc2FnZXNcIixsaW5rOmZ1bmN0aW9uKGIsZCxhLGMpe2MucmVuZGVyRWxlbWVudENsYXNzZXM9ZnVuY3Rpb24oYil7Yj9rLnNldENsYXNzKGQsXCJuZy1hY3RpdmVcIixcIm5nLWluYWN0aXZlXCIpOmsuc2V0Q2xhc3MoZCxcIm5nLWluYWN0aXZlXCIsXCJuZy1hY3RpdmVcIil9O3ZhciBnPWYuaXNTdHJpbmcoYS5uZ01lc3NhZ2VzTXVsdGlwbGUpfHxmLmlzU3RyaW5nKGEubXVsdGlwbGUpLGU7Yi4kd2F0Y2hDb2xsZWN0aW9uKGEubmdNZXNzYWdlc3x8YVtcImZvclwiXSxmdW5jdGlvbihiKXtlPWI7Yy5yZW5kZXJNZXNzYWdlcyhiLGcpfSk7KGE9YS5uZ01lc3NhZ2VzSW5jbHVkZXx8YS5pbmNsdWRlKSYmbChhKS50aGVuKGZ1bmN0aW9uKGEpe3ZhciBoO2E9Zi5lbGVtZW50KFwiPGRpdi8+XCIpLmh0bWwoYSk7Zi5mb3JFYWNoKGEuY2hpbGRyZW4oKSxcbmZ1bmN0aW9uKGEpe2E9Zi5lbGVtZW50KGEpO2g/aC5hZnRlcihhKTpkLnByZXBlbmQoYSk7aD1hO3EoYSkoYil9KTtjLnJlbmRlck1lc3NhZ2VzKGUsZyl9KX19fV0pLmRpcmVjdGl2ZShcIm5nTWVzc2FnZVwiLFtcIiRhbmltYXRlXCIsZnVuY3Rpb24oZil7cmV0dXJue3JlcXVpcmU6XCJebmdNZXNzYWdlc1wiLHRyYW5zY2x1ZGU6XCJlbGVtZW50XCIsdGVybWluYWw6ITAscmVzdHJpY3Q6XCJBRVwiLGxpbms6ZnVuY3Rpb24oayxsLGIsZCxhKXtmb3IodmFyIGMsZyxlPWxbMF0sbj1lLnBhcmVudE5vZGUsaD0wLHA9MDtoPG4uY2hpbGROb2Rlcy5sZW5ndGg7aCsrKXt2YXIgbT1uLmNoaWxkTm9kZXNbaF07aWYoOD09bS5ub2RlVHlwZSYmMDw9bS5ub2RlVmFsdWUuaW5kZXhPZihcIm5nTWVzc2FnZVwiKSl7aWYobT09PWUpe2M9cDticmVha31wKyt9fWQucmVnaXN0ZXJNZXNzYWdlKGMse3R5cGU6Yi5uZ01lc3NhZ2V8fGIud2hlbixhdHRhY2g6ZnVuY3Rpb24oKXtnfHxhKGssZnVuY3Rpb24oYSl7Zi5lbnRlcihhLFxubnVsbCxsKTtnPWF9KX0sZGV0YWNoOmZ1bmN0aW9uKGEpe2cmJihmLmxlYXZlKGcpLGc9bnVsbCl9fSl9fX1dKX0pKHdpbmRvdyx3aW5kb3cuYW5ndWxhcik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmd1bGFyLW1lc3NhZ2VzLm1pbi5qcy5tYXBcbiIsIi8qKlxuICogQVBJIEJvdW5kIE1vZGVscyBmb3IgQW5ndWxhckpTXG4gKiBAdmVyc2lvbiB2MS4xLjcgLSAyMDE1LTAxLTA2XG4gKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci1wbGF0YW51cy9yZXN0bW9kXG4gKiBAYXV0aG9yIElnbmFjaW8gQmFpeGFzIDxpZ25hY2lvQHBsYXRhbi51cz5cbiAqIEBsaWNlbnNlIE1JVCBMaWNlbnNlLCBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICovXG5cbihmdW5jdGlvbihhbmd1bGFyLCB1bmRlZmluZWQpIHtcbid1c2Ugc3RyaWN0Jztcbi8qKlxuICogQW5ndWxhciBpbmZsZWN0aW9uIGxpYnJhcnlcbiAqIEB2ZXJzaW9uIHYwLjIuMCAtIDIwMTQtMDgtMjJcbiAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9wbGF0YW51cy9hbmd1bGFyLWluZmxlY3RvclxuICogQGF1dGhvciBJZ25hY2lvIEJhaXhhcyA8aWduYWNpb0BwbGF0YW4udXM+XG4gKiBAbGljZW5zZSBNSVQgTGljZW5zZSwgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcbiAqL1xuXG4oZnVuY3Rpb24oYW5ndWxhciwgdW5kZWZpbmVkKSB7XG5hbmd1bGFyLm1vZHVsZSgncGxhdGFudXMuaW5mbGVjdG9yJywgW10pXG4gIC8qKlxuICAgKiBAY2xhc3MgaW5mbGVjdG9yUHJvdmlkZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFRoZSBpbmZsZWN0b3JQcm92aWRlciBleHBvc2VzIGluZmxlY3RvciBjb25maWd1cmF0aW9uIG9wdGlvbnMsIG1haW5seSByZWxhdGVkIHRvIGxvY2FsZXMuXG4gICAqL1xuICAucHJvdmlkZXIoJ2luZmxlY3RvcicsIFtmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgYWN0aXZlTG9jYWxlID0gJ2VuJywgbG9jYWxlTWFwID0ge1xuICAgICAgLyoqXG4gICAgICAgKiBFbmdsaXNoIHRyYW5zZm9ybWF0aW9uIHJ1bGVzLlxuICAgICAgICpcbiAgICAgICAqIFRha2VuIGZyb20gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9pbmZsZWN0aW9uLWpzL3NvdXJjZS9icm93c2UvdHJ1bmsvaW5mbGVjdGlvbi5qc1xuICAgICAgICovXG4gICAgICBlbjoge1xuICAgICAgICB1bmNvdW50YWJsZTogW1xuICAgICAgICAgICdtdXNpYycsICdhcnQnLCAnbG92ZScsICdoYXBwaW5lc3MnLCAnYWR2aWNlJywgJ2Z1cm5pdHVyZScsICdsdWdnYWdlJyxcbiAgICAgICAgICAnc3VnYXInLCAnYnV0dGVyJywgJ3dhdGVyJywgJ2VsZWN0cmljaXR5JywgJ2dhcycsICdwb3dlcicsICdjdXJyZW5jeScsXG4gICAgICAgICAgJ2VxdWlwbWVudCcsICdpbmZvcm1hdGlvbicsICdyaWNlJywgJ21vbmV5JywgJ3NwZWNpZXMnLCAnc2VyaWVzJyxcbiAgICAgICAgICAnZmlzaCcsICdzaGVlcCcsICdtb29zZScsICdkZWVyJywgJ25ld3MnXG4gICAgICAgIF0sXG5cbiAgICAgICAgcGx1cmFsOiBbXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhtKWFuJCcsICdnaScpLCAgICAgICAgICAgICAgICAgJyQxZW4nXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKHBlKXJzb24kJywgJ2dpJyksICAgICAgICAgICAgICAnJDFvcGxlJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhjaGlsZCkkJywgJ2dpJyksICAgICAgICAgICAgICAgJyQxcmVuJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJ14ob3gpJCcsICdnaScpLCAgICAgICAgICAgICAgICAgJyQxZW4nXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKGF4fHRlc3QpaXMkJywgJ2dpJyksICAgICAgICAgICAnJDFlcyddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcob2N0b3B8dmlyKXVzJCcsICdnaScpLCAgICAgICAgICckMWknXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKGFsaWFzfHN0YXR1cykkJywgJ2dpJyksICAgICAgICAnJDFlcyddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcoYnUpcyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICckMXNlcyddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcoYnVmZmFsfHRvbWF0fHBvdGF0KW8kJywgJ2dpJyksICckMW9lcyddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcoW3RpXSl1bSQnLCAnZ2knKSwgICAgICAgICAgICAgICckMWEnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnc2lzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAnc2VzJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyg/OihbXmZdKWZlfChbbHJdKWYpJCcsICdnaScpLCAgJyQxJDJ2ZXMnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKGhpdmUpJCcsICdnaScpLCAgICAgICAgICAgICAgICAnJDFzJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhbXmFlaW91eV18cXUpeSQnLCAnZ2knKSwgICAgICAgJyQxaWVzJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyh4fGNofHNzfHNoKSQnLCAnZ2knKSwgICAgICAgICAgJyQxZXMnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKG1hdHJ8dmVydHxpbmQpaXh8ZXgkJywgJ2dpJyksICAnJDFpY2VzJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhbbXxsXSlvdXNlJCcsICdnaScpLCAgICAgICAgICAgJyQxaWNlJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhxdWl6KSQnLCAnZ2knKSwgICAgICAgICAgICAgICAgJyQxemVzJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJ3MkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgJ3MnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAncyddXG4gICAgICAgIF0sXG5cbiAgICAgICAgc2luZ3VsYXI6IFtcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKG0pZW4kJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMWFuJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhwZSlvcGxlJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDFyc29uJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhjaGlsZClyZW4kJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDEnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKFt0aV0pYSQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMXVtJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJygoYSluYWx5fChiKWF8KGQpaWFnbm98KHApYXJlbnRoZXwocClyb2dub3wocyl5bm9wfCh0KWhlKXNlcyQnLCdnaScpLCAnJDEkMnNpcyddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcoaGl2ZSlzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyh0aXZlKXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDEnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKGN1cnZlKXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMSddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcoW2xyXSl2ZXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxZiddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcoW15mb10pdmVzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxZmUnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKFteYWVpb3V5XXxxdSlpZXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMXknXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKHMpZXJpZXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMWVyaWVzJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhtKW92aWVzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDFvdmllJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyh4fGNofHNzfHNoKWVzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDEnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKFttfGxdKWljZSQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMW91c2UnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKGJ1cyllcyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMSddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcobyllcyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhzaG9lKXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDEnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKGNyaXN8YXh8dGVzdCllcyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMWlzJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhvY3RvcHx2aXIpaSQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDF1cyddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcoYWxpYXN8c3RhdHVzKWVzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJ14ob3gpZW4nLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDEnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKHZlcnR8aW5kKWljZXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMWV4J10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhtYXRyKWljZXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDFpeCddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcocXVpeil6ZXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJ3MkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJ11cbiAgICAgICAgXVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBoZWxwZXIgZnVuY3Rpb24gdXNlZCBieSBzaW5ndWxhcml6ZSBhbmQgcGx1cmFsaXplXG4gICAgZnVuY3Rpb24gYXBwbHlSdWxlcyhfc3RyaW5nLCBfcnVsZVNldCwgX3NraXApIHtcblxuICAgICAgaWYoX3NraXAuaW5kZXhPZihfc3RyaW5nLnRvTG93ZXJDYXNlKCkpID09PSAtMSkge1xuICAgICAgICB2YXIgaSA9IDAsIHJ1bGU7XG4gICAgICAgIHdoaWxlKHJ1bGUgPSBfcnVsZVNldFtpKytdKSB7XG4gICAgICAgICAgaWYoX3N0cmluZy5tYXRjaChydWxlWzBdKSkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdHJpbmcucmVwbGFjZShydWxlWzBdLCBydWxlWzFdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9zdHJpbmc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgaW5mbGVjdG9yUHJvdmlkZXIjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKlxuICAgICAgICogUmVnaXN0ZXJzIGEgbmV3IGxvY2FsZSwgc2VlIHRoZSBkZWZhdWx0IGVuZ2xpc2ggbG9jYWxlIGltcGxlbWVudGF0aW9uIGZvciBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcmVxdWlyZWQgc3RydWN0dXJlLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfbG9jYWxlIExvY2FsZSBuYW1lXG4gICAgICAgKiBAcGFyYW0ge29iamVjdH0gX2RlZiBMb2NhbGUgZGVmaW5pdGlvblxuICAgICAgICovXG4gICAgICByZWdpc3RlckxvY2FsZTogZnVuY3Rpb24oX2xvY2FsZSwgX2RlZikge1xuICAgICAgICBsb2NhbGVNYXBbX2xvY2FsZV0gPSBfZGVmO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgaW5mbGVjdG9yUHJvdmlkZXIjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKlxuICAgICAgICogU2V0cyB0aGUgZGVmYXVsdCBsb2NhbGUsIGRlZmF1bHRzIHRvICdlbidcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gX2xvY2FsZSBMb2NhbGUgbmFtZVxuICAgICAgICovXG4gICAgICBzZXRMb2NhbGU6IGZ1bmN0aW9uKF9sb2NhbGUpIHtcbiAgICAgICAgYWN0aXZlTG9jYWxlID0gX2xvY2FsZTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQGNsYXNzIGluZmxlY3RvclxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICpcbiAgICAgICAqIFRoZSBpbmZsZWN0b3Igc2VydmljZSBwcm92aWRlcyBhIHNldCBvZiBzdHJpbmcgdHJhbnNmb3JtYXRpb24gbWV0aG9kcy5cbiAgICAgICAqL1xuICAgICAgJGdldDogWyckbG9nJywgZnVuY3Rpb24oJGxvZykge1xuXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRSdWxlc0ZvcihfbG9jYWxlKSB7XG4gICAgICAgICAgX2xvY2FsZSA9IF9sb2NhbGUgfHwgYWN0aXZlTG9jYWxlO1xuICAgICAgICAgIHZhciBydWxlcyA9IGxvY2FsZU1hcFtfbG9jYWxlXTtcbiAgICAgICAgICBpZighcnVsZXMpICRsb2cud2FybignSW52YWxpZCBpbmZsZWN0b3IgbG9jYWxlICcgKyBfbG9jYWxlKTtcbiAgICAgICAgICByZXR1cm4gcnVsZXM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG1lbWJlcm9mIGluZmxlY3RvciNcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqXG4gICAgICAgICAgICogVHJhbnNmb3JtIGEgc3RyaW5nIHRvIGNhbWVsY2FzZSwgcmVtb3ZpbmcgZXZlcnkgc3BhY2UsIGRhc2ggYW5kIHVuZGVyc2NvcmVcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfc3RyaW5nIFN0cmluZyB0byB0cmFuc2Zvcm1cbiAgICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IF9jb25zdGFudCBJZiBzZXQgdG8gZmFsc2UsIGZpcnN0IGxldHRlciBpcyBub3QgdXBwZXJjYXNlZCwgZGVmYXVsdHMgdG8gZmFsc2UuXG4gICAgICAgICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdHJhbnNmb3JtZWQgc3RyaW5nXG4gICAgICAgICAgICovXG4gICAgICAgICAgY2FtZWxpemU6IGZ1bmN0aW9uKF9zdHJpbmcsIF9jb25zdGFudCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBfc3RyaW5nICE9PSAnc3RyaW5nJykgcmV0dXJuIF9zdHJpbmc7XG4gICAgICAgICAgICByZXR1cm4gX3N0cmluZy5yZXBsYWNlKC8oPzpeWy1fXFxzXSp8Wy1fXFxzXSspKFtBLVpcXGRdKS9naSwgZnVuY3Rpb24gKG1hdGNoLCBfZmlyc3QsIF9pbmRleCkge1xuICAgICAgICAgICAgICByZXR1cm4gKCFfY29uc3RhbnQgJiYgX2luZGV4ID09PSAwKSA/IF9maXJzdCA6IF9maXJzdC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBtZW1iZXJvZiBpbmZsZWN0b3IjXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIFRyYW5zZm9ybXMgYSBjYW1lbGNhc2Ugc3RyaW5nIHRvIGEgc25ha2VjYXNlIHN0cmluZ1xuICAgICAgICAgICAqXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF9zdHJpbmcgU3RyaW5nIHRvIHRyYW5zZm9ybVxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfc2VwIFNlcGFyYXRvciwgZGVmYXVsdHMgdG8gJy0nXG4gICAgICAgICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdHJhbnNmb3JtZWQgc3RyaW5nXG4gICAgICAgICAgICovXG4gICAgICAgICAgcGFyYW1ldGVyaXplOiBmdW5jdGlvbihfc3RyaW5nLCBfc2VwKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIF9zdHJpbmcgIT09ICdzdHJpbmcnKSByZXR1cm4gX3N0cmluZztcbiAgICAgICAgICAgIHJldHVybiBfc3RyaW5nLnJlcGxhY2UoLyg/OltBLVpdK3xbMC05XSspL2csIGZ1bmN0aW9uIChfbWF0Y2gsIF9pbmRleCkge1xuICAgICAgICAgICAgICByZXR1cm4gX2luZGV4ID09PSAwID8gX21hdGNoIDogKF9zZXAgfHwgJy0nKSArIF9tYXRjaDtcbiAgICAgICAgICAgIH0pLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBtZW1iZXJvZiBpbmZsZWN0b3IjXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIFRyYW5zZm9ybXMgYSBzdHJpbmcgdG8gc25ha2VjYXNlLCByZXBsYWNlcyBldmVyeSBzcGFjZSwgZGFzaCBhbmQgdW5kZXJjb3JlIGJ5IHRoZSBwcm92aWRlZCBzZXBhcmF0b3IuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gX3N0cmluZyBTdHJpbmcgdG8gdHJhbnNmb3JtXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF9zZXAgU2VwYXJhdG9yLCBkZWZhdWx0cyB0byAnLSdcbiAgICAgICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB0cmFuc2Zvcm1lZCBzdHJpbmdcbiAgICAgICAgICAgKi9cbiAgICAgICAgICBkYXNoZXJpemU6IGZ1bmN0aW9uKF9zdHJpbmcsIF9zZXApIHtcbiAgICAgICAgICAgIHJldHVybiBfc3RyaW5nLnJlcGxhY2UoL1stX1xcc10rL2csIF9zZXAgfHwgJy0nKTtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG1lbWJlcm9mIGluZmxlY3RvciNcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqXG4gICAgICAgICAgICogVHJhbnNmb3JtcyBhIHN0cmluZyB0byBpdHMgc2luZ3VsYXIgZm9ybS5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfc3RyaW5nIFN0cmluZyB0byB0cmFuc2Zvcm1cbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gX2xvY2FsZSkgTG9jYWxlIHRvIHVzZSwgZGVmYXVsdHMgdG8gdGhlIGRlZmF1bHQgbG9jYWxlXG4gICAgICAgICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdHJhbnNmb3JtZWQgc3RyaW5nXG4gICAgICAgICAgICovXG4gICAgICAgICAgc2luZ3VsYXJpemU6IGZ1bmN0aW9uKF9zdHJpbmcsIF9sb2NhbGUpIHtcbiAgICAgICAgICAgIHZhciBydWxlcyA9IGxvYWRSdWxlc0ZvcihfbG9jYWxlKTtcbiAgICAgICAgICAgIHJldHVybiBydWxlcyA/IGFwcGx5UnVsZXMoX3N0cmluZywgcnVsZXMuc2luZ3VsYXIsIHJ1bGVzLnVuY291bnRhYmxlKSA6IF9zdHJpbmc7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBtZW1iZXJvZiBpbmZsZWN0b3IjXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIFRyYW5zZm9ybXMgYSBzdHJpbmcgdG8gaXRzIHBsdXJhbCBmb3JtLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF9zdHJpbmcgU3RyaW5nIHRvIHRyYW5zZm9ybVxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfbG9jYWxlKSBMb2NhbGUgdG8gdXNlLCBkZWZhdWx0cyB0byB0aGUgZGVmYXVsdCBsb2NhbGVcbiAgICAgICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB0cmFuc2Zvcm1lZCBzdHJpbmdcbiAgICAgICAgICAgKi9cbiAgICAgICAgICBwbHVyYWxpemU6IGZ1bmN0aW9uKF9zdHJpbmcsIF9sb2NhbGUpIHtcbiAgICAgICAgICAgIHZhciBydWxlcyA9IGxvYWRSdWxlc0ZvcihfbG9jYWxlKTtcbiAgICAgICAgICAgIHJldHVybiBydWxlcyA/IGFwcGx5UnVsZXMoX3N0cmluZywgcnVsZXMucGx1cmFsLCBydWxlcy51bmNvdW50YWJsZSkgOiBfc3RyaW5nO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgfV1cbiAgICB9O1xuICB9XSk7XG5cbn0pKGFuZ3VsYXIpO1xuLy8gUHJlbG9hZCBzb21lIGFuZ3VsYXIgc3R1ZmZcbnZhciBSTU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdyZXN0bW9kJywgWyduZycsICdwbGF0YW51cy5pbmZsZWN0b3InXSk7XG5cbi8qKlxuICogQGNsYXNzIHJlc3Rtb2RQcm92aWRlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFRoZSByZXN0bW9kUHJvdmlkZXIgZXhwb3NlcyByZXN0bW9kIGNvbmZpZ3VyYXRpb24gbWV0aG9kc1xuICovXG5STU1vZHVsZS5wcm92aWRlcigncmVzdG1vZCcsIFtmdW5jdGlvbigpIHtcblxuICB2YXIgQkFTRV9DSEFJTiA9IFsnUk1CdWlsZGVyRXh0JywgJ1JNQnVpbGRlclJlbGF0aW9ucycsICdSTUJ1aWxkZXJDb21wdXRlZCddO1xuXG4gIGZ1bmN0aW9uIHdyYXBJbkludm9rZShfbWl4aW4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oX2luamVjdG9yKSB7XG4gICAgICBfaW5qZWN0b3IuaW52b2tlKF9taXhpbiwgdGhpcywgeyAkYnVpbGRlcjogdGhpcyB9KTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgcmVzdG1vZFByb3ZpZGVyI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICpcbiAgICAgKiBBZGRzIGJhc2UgbWl4aW5zIGZvciBldmVyeSBnZW5lcmF0ZWQgbW9kZWwuXG4gICAgICpcbiAgICAgKiAqKkFUVEVOVElPTioqIE1vZGVsIG5hbWVzIHNob3VsZCBOT1QgYmUgYWRkZWQgdG8gdGhpcyBjaGFpbi5cbiAgICAgKlxuICAgICAqIEFsbCBtaXhpbnMgYWRkZWQgdG8gdGhlIGNoYWluIGFyZSBwcmVwZW5kZWQgdG8gZXZlcnkgZ2VuZXJhdGVkIG1vZGVsLlxuICAgICAqXG4gICAgICogVXNhZ2U6XG4gICAgICpcbiAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICogJHByb3ZpZGVyLnJlYmFzZSgnQ2hhbmdlTW9kZWwnLCAnTGF6eVJlbGF0aW9ucycsICdUaHJvdHRsZWRNb2RlbCcpXG4gICAgICogYGBgXG4gICAgICovXG4gICAgcmViYXNlOiBmdW5jdGlvbigvKiBfbWl4X25hbWVzICovKSB7XG4gICAgICB2YXIgbWl4aW4sIGksIGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgZm9yKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIG1peGluID0gYXJndW1lbnRzW2ldO1xuICAgICAgICBpZihhbmd1bGFyLmlzQXJyYXkobWl4aW4pIHx8IGFuZ3VsYXIuaXNGdW5jdGlvbihtaXhpbikpIHtcbiAgICAgICAgICBtaXhpbiA9IHdyYXBJbkludm9rZShtaXhpbik7XG4gICAgICAgIH1cbiAgICAgICAgQkFTRV9DSEFJTi5wdXNoKG1peGluKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAY2xhc3MgcmVzdG1vZFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICpcbiAgICAgKiBUaGUgcmVzdG1vZCBzZXJ2aWNlIHByb3ZpZGVzIGZhY3RvcnkgbWV0aG9kcyBmb3IgdGhlIGRpZmZlcmVudCByZXN0bW9kIGNvbnN1bWFibGVzLlxuICAgICAqL1xuICAgICRnZXQ6IFsnUk1Nb2RlbEZhY3RvcnknLCAnJGxvZycsIGZ1bmN0aW9uKGJ1aWxkTW9kZWwsICRsb2cpIHtcblxuICAgICAgdmFyIGFycmF5U2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5cbiAgICAgIHZhciByZXN0bW9kID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlck9mIHJlc3Rtb2QjXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgbW9kZWwgZmFjdG9yeSBpcyB1c2VkIHRvIGdlbmVyYXRlIG5ldyByZXN0bW9kIG1vZGVsIHR5cGVzLiBJdCdzIHJlY29tbWVuZGVkIHRvIHB1dCBtb2RlbHMgaW5zaWRlIGZhY3RvcmllcyxcbiAgICAgICAgICogdGhpcyBpcyB1c2VmdWxsIGxhdGVyIHdoZW4gZGVmaW5pbmcgcmVsYXRpb25zIGFuZCBpbmhlcml0YW5jZSwgc2luY2UgdGhlIGFuZ3VsYXIgJGluamVjdG9yIGlzIHVzZWQgYnlcbiAgICAgICAgICogdGhlc2UgZmVhdHVyZXMuIEl0J3MgYWxzbyB0aGUgYW5ndWxhciB3YXkgb2YgZG9pbmcgdGhpbmdzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBBIHNpbXBsZSBtb2RlbCBjYW4gYmUgYnVpbHQgbGlrZSB0aGlzOlxuICAgICAgICAgKlxuICAgICAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICAgICAqIGFuZ3VsYXIubW9kdWxlKCdiaWtlLWFwcCcpLmZhY3RvcnkoJ0Jpa2UnLCBmdW5jdGlvbihyZXN0bW9kKSB7XG4gICAgICAgICAqICAgcmV0dXJuIHJlc3Rtb2QubW9kZWwoJy9iaWtlcycpO1xuICAgICAgICAgKiB9KTtcbiAgICAgICAgICpgYGBcbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGBfdXJsYCBwYXJhbWV0ZXIgaXMgdGhlIHJlc291cmNlIHVybCB0aGUgZ2VuZXJhdGVkIG1vZGVsIHdpbGwgYmUgYm91bmQgdG8sIGlmIGBudWxsYCBpcyBnaXZlbiB0aGVuXG4gICAgICAgICAqIHRoZSBtb2RlbCBpcyAqbmVzdGVkKiBhbmQgY2FuIG9ubHkgYmUgdXNlZCBpbiBhbm90aGVyIG1vZGVsIGNvbnRleHQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBtb2RlbCBhbHNvIGFjY2VwdHMgb25lIG9yIG1vcmUgZGVmaW5pdGlvbiBwcm92aWRlcnMgYXMgb25lIG9yIG1vcmUgYXJndW1lbnRzIGFmdGVyIHRoZSBfdXJsIHBhcmFtZXRlcixcbiAgICAgICAgICogcG9zaWJsZSBkZWZpbml0aW9uIHByb3ZpZGVycyBhcmU6XG4gICAgICAgICAqXG4gICAgICAgICAqICogQSBkZWZpbml0aW9uIG9iamVjdCAobW9yZSBvbiB0aGlzIGF0IHRoZSB7QGxpbmsgQnVpbGRlckFwaX0pOlxuICAgICAgICAgKlxuICAgICAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICAgICAqIHJlc3Rtb2QubW9kZWwoJy9iaWtlcycsIHtcbiAgICAgICAgICogICB2aWV3ZWQ6IHsgaW5pdDogZmFsc2UgfSxcbiAgICAgICAgICogICBwYXJ0czogeyBoYXNNYW55OiAnUGFydCcgfSxcbiAgICAgICAgICogICAnfmFmdGVyQ3JlYXRlJzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAqICAgICBhbGVydCgnQmlrZSBjcmVhdGVkISEnKTtcbiAgICAgICAgICogICB9XG4gICAgICAgICAqIH0pO1xuICAgICAgICAgKmBgYFxuICAgICAgICAgKlxuICAgICAgICAgKiAqIEEgZGVmaW5pdGlvbiBmdW5jdGlvbiAobW9yZSBvbiB0aGlzIGF0IHRoZSB7QGxpbmsgQnVpbGRlckFwaX0pOlxuICAgICAgICAgKlxuICAgICAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICAgICAqIHJlc3Rtb2QubW9kZWwoJy9iaWtlcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgKiAgIHRoaXMuYXR0ckRlZmF1bHQoJ3ZpZXdlZCcsIGZhbHNlKTtcbiAgICAgICAgICogICB0aGlzLmF0dHJNYXNrKCdpZCcsICdDVScpO1xuICAgICAgICAgKiB9KTtcbiAgICAgICAgICpgYGBcbiAgICAgICAgICpcbiAgICAgICAgICogKiBBIG1peGluIChnZW5lcmF0ZWQgdXNpbmcgdGhlIG1peGluIG1ldGhvZCkgb3IgbW9kZWwgZmFjdG9yeSBuYW1lOlxuICAgICAgICAgKlxuICAgICAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICAgICAqIHJlc3Rtb2QubW9kZWwoJy9iaWtlcycsICdCYXNlTW9kZWwnLCAnUGFnZWRNb2RlbCcpO1xuICAgICAgICAgKmBgYFxuICAgICAgICAgKlxuICAgICAgICAgKiAqIEEgbWl4aW4gKGdlbmVyYXRlZCB1c2luZyB0aGUgbWl4aW4gbWV0aG9kKSBvciBtb2RlbCBvYmplY3Q6XG4gICAgICAgICAqXG4gICAgICAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAgICAgICogcmVzdG1vZC5tb2RlbCgnL2Jpa2VzJywgQmFzZU1vZGVsLCBQYWdlZE1vZGVsKTtcbiAgICAgICAgICogYGBgXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfdXJsIFJlc291cmNlIHVybC5cbiAgICAgICAgICogQHBhcmFtIHttaXhlZH0gX21peCBPbmUgb3IgbW9yZSBtaXhpbnMsIGRlc2NyaXB0aW9uIG9iamVjdHMgb3IgZGVzY3JpcHRpb24gYmxvY2tzLlxuICAgICAgICAgKiBAcmV0dXJuIHtTdGF0aWNBcGl9IFRoZSBuZXcgbW9kZWwuXG4gICAgICAgICAqL1xuICAgICAgICBtb2RlbDogZnVuY3Rpb24oX2Jhc2VVcmwvKiAsIF9taXggKi8pIHtcbiAgICAgICAgICB2YXIgbW9kZWwgPSBidWlsZE1vZGVsKF9iYXNlVXJsLCBCQVNFX0NIQUlOKTtcblxuICAgICAgICAgIGlmKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBtb2RlbC5taXgoYXJyYXlTbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgICAgICAgICAgJGxvZy53YXJuKCdQYXNzaW5nIG1peGlucyBhbmQgZGlmaW5pdGlvbnMgaW4gdGhlIG1vZGVsIG1ldGhvZCB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gcmVzdG1vZCAxLjIsIHVzZSByZXN0bW9kLm1vZGVsKCkubWl4KCkgaW5zdGVhZC4nKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gbW9kZWw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXJPZiByZXN0bW9kI1xuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIG1peGluIGZhY3RvcnkgaXMgdXNlZCB0byBwYWNrIG1vZGVsIGJlaGF2aW9ycyB3aXRob3V0IHRoZSBvdmVybG9hZCBvZiBnZW5lcmF0aW5nIGEgbmV3XG4gICAgICAgICAqIG1vZGVsLiBUaGUgbWl4aW4gY2FuIHRoZW4gYmUgcGFzc2VkIGFzIGFyZ3VtZW50IHRvIGEgY2FsbCB0byB7QGxpbmsgcmVzdG1vZCNtb2RlbCNtb2RlbH1cbiAgICAgICAgICogdG8gZXh0ZW5kIHRoZSBtb2RlbCBjYXBhYmlsaXRpZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEEgbWl4aW4gY2FuIGFsc28gYmUgcGFzc2VkIHRvIHRoZSB7QGxpbmsgcmVzdG1vZFByb3ZpZGVyI3JlYmFzZX0gbWV0aG9kIHRvIHByb3ZpZGVcbiAgICAgICAgICogYSBiYXNlIGJlaGF2aW9yIGZvciBhbGwgZ2VuZXJhdGVkIG1vZGVscy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHttaXhlZH0gX21peCBPbmUgb3IgbW9yZSBtaXhpbnMsIGRlc2NyaXB0aW9uIG9iamVjdHMgb3IgZGVzY3JpcHRpb24gYmxvY2tzLlxuICAgICAgICAgKiBAcmV0dXJuIHtvYmplY3R9IFRoZSBtaXhpblxuICAgICAgICAgKi9cbiAgICAgICAgbWl4aW46IGZ1bmN0aW9uKC8qIF9taXggKi8pIHtcbiAgICAgICAgICByZXR1cm4geyAkaXNBYnN0cmFjdDogdHJ1ZSwgJCRjaGFpbjogYXJyYXlTbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgfTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlck9mIHJlc3Rtb2QjXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBTaG9yY3V0IG1ldGhvZCB1c2VkIHRvIGNyZWF0ZSBzaW5nbGV0b24gcmVzb3VyY2VzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBTYW1lIGFzIGNhbGxpbmcgYHJlc3Rtb2QubW9kZWwobnVsbCkuJHNpbmdsZShfdXJsKWBcbiAgICAgICAgICpcbiAgICAgICAgICogQ2hlY2sgdGhlIHtAbGluayBTdGF0aWNBcGkjJHNpbmdsZX0gZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF91cmwgUmVzb3VyY2UgdXJsLFxuICAgICAgICAgKiBAcGFyYW0ge21peGVkfSBfbWl4IE1peGluIGNoYWluLlxuICAgICAgICAgKiBAcmV0dXJuIHtSZWNvcmRBcGl9IE5ldyByZXNvdXJjZSBpbnN0YW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIHNpbmdsZXRvbjogZnVuY3Rpb24oX3VybC8qLCBfbWl4ICovKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3Rtb2QubW9kZWwuYXBwbHkodGhpcywgYXJndW1lbnRzKS5zaW5nbGUoX3VybCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHJldHVybiByZXN0bW9kO1xuICAgIH1dXG4gIH07XG59XSlcbi5mYWN0b3J5KCdtb2RlbCcsIFsncmVzdG1vZCcsIGZ1bmN0aW9uKHJlc3Rtb2QpIHtcbiAgcmV0dXJuIHJlc3Rtb2QubW9kZWw7XG59XSlcbi5mYWN0b3J5KCdtaXhpbicsIFsncmVzdG1vZCcsIGZ1bmN0aW9uKHJlc3Rtb2QpIHtcbiAgcmV0dXJuIHJlc3Rtb2QubWl4aW47XG59XSk7XG5cblJNTW9kdWxlLmZhY3RvcnkoJ1JNQ29sbGVjdGlvbkFwaScsIFsnUk1VdGlscycsIGZ1bmN0aW9uKFV0aWxzKSB7XG5cbiAgdmFyIGV4dGVuZCA9IGFuZ3VsYXIuZXh0ZW5kO1xuXG4gIC8qKlxuICAgKiBAY2xhc3MgQ29sbGVjdGlvbkFwaVxuICAgKlxuICAgKiBAZXh0ZW5kcyBTY29wZUFwaVxuICAgKiBAZXh0ZW5kcyBDb21tb25BcGlcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEEgcmVzdG1vZCBjb2xsZWN0aW9uIGlzIGFuIGV4dGVuZGVkIGFycmF5IHR5cGUgYm91bmQgUkVTVCByZXNvdXJjZSByb3V0ZS5cbiAgICpcbiAgICogRXZlcnkgdGltZSBhIG5ldyByZXN0bW9kIG1vZGVsIGlzIGNyZWF0ZWQsIGFuIGFzc29jaWF0ZWQgY29sbGVjdGlvbiB0eXBlIGlzIGNyZWF0ZWQgdG9vLlxuICAgKlxuICAgKiBUT0RPOiB0YWxrIGFib3V0IGZldGNoL3JlZnJlc2ggYmVoYXZpb3VyLCBsaWZlY3ljbGVzLCBjb2xsZWN0aW9uIHNjb3BlcywgYWRkaW5nL3JlbW92aW5nXG4gICAqXG4gICAqIEZvciBgJGZldGNoYCBvbiBhIGNvbGxlY3Rpb246XG4gICAqXG4gICAqICogYmVmb3JlLWZldGNoLW1hbnlcbiAgICogKiBiZWZvcmUtcmVxdWVzdFxuICAgKiAqIGFmdGVyLXJlcXVlc3RbLWVycm9yXVxuICAgKiAqIGFmdGVyLWZlZWQgKGNhbGxlZCBmb3IgZXZlcnkgcmVjb3JkIGlmIG5vIGVycm9ycylcbiAgICogKiBhZnRlci1mZWVkLW1hbnkgKG9ubHkgY2FsbGVkIGlmIG5vIGVycm9ycylcbiAgICogKiBhZnRlci1mZXRjaC1tYW55Wy1lcnJvcl1cbiAgICpcbiAgICogQHByb3BlcnR5IHtib29sZWFufSAkaXNDb2xsZWN0aW9uIEhlbHBlciBmbGFnIHRvIHNlcGFyYXRlIGNvbGxlY3Rpb25zIGZyb20gdGhlIG1haW4gdHlwZVxuICAgKiBAcHJvcGVydHkge29iamVjdH0gJHNjb3BlIFRoZSBjb2xsZWN0aW9uIHNjb3BlIChoaWVyYXJjaGljYWwgc2NvcGUsIG5vdCBhbmd1bGFyIHNjb3BlKVxuICAgKiBAcHJvcGVydHkge29iamVjdH0gJHBhcmFtcyBUaGUgY29sbGVjdGlvbiBxdWVyeSBwYXJhbWV0ZXJzXG4gICAqXG4gICAqL1xuICByZXR1cm4ge1xuXG4gICAgJGlzQ29sbGVjdGlvbjogdHJ1ZSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBDb2xsZWN0aW9uQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIENhbGxlZCBieSBjb2xsZWN0aW9uIGNvbnN0cnVjdG9yIG9uIGluaXRpYWxpemF0aW9uLlxuICAgICAqXG4gICAgICogTm90ZTogSXMgYmV0dGVyIHRvIGFkZCBhIGhvb2sgb24gYWZ0ZXItaW5pdCB0aGFuIG92ZXJyaWRpbmcgdGhpcyBtZXRob2QuXG4gICAgICovXG4gICAgJGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gYWZ0ZXIgaW5pdGlhbGl6YXRpb24gaG9va1xuICAgICAgdGhpcy4kZGlzcGF0Y2goJ2FmdGVyLWNvbGxlY3Rpb24taW5pdCcpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgQ29sbGVjdGlvbkFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBGZWVkcyByYXcgY29sbGVjdGlvbiBkYXRhIGludG8gdGhlIGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBmb3IgdXNlIGluIGNvbGxlY3Rpb25zIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2FycmF5fSBfcmF3IERhdGEgdG8gYWRkXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBfbWFzayAnQ1JVJyBtYXNrXG4gICAgICogQHJldHVybiB7Q29sbGVjdGlvbkFwaX0gc2VsZlxuICAgICAqL1xuICAgICRkZWNvZGU6IGZ1bmN0aW9uKF9yYXcsIF9tYXNrKSB7XG5cbiAgICAgIFV0aWxzLmFzc2VydChfcmF3ICYmIGFuZ3VsYXIuaXNBcnJheShfcmF3KSwgJ0NvbGxlY3Rpb24gJGRlY29kZSBleHBlY3RlZCBhcnJheScpO1xuXG4gICAgICBmb3IodmFyIGkgPSAwLCBsID0gX3Jhdy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdGhpcy4kYnVpbGRSYXcoX3Jhd1tpXSwgX21hc2spLiRyZXZlYWwoKTsgLy8gYnVpbGQgYW5kIGRpc2Nsb3NlIGV2ZXJ5IGl0ZW0uXG4gICAgICB9XG5cbiAgICAgIHRoaXMuJGRpc3BhdGNoKCdhZnRlci1mZWVkLW1hbnknLCBbX3Jhd10pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBDb2xsZWN0aW9uQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIEVuY29kZXMgYXJyYXkgZGF0YSBpbnRvIGEgaXRzIHNlcmlhbGl6ZWQgdmVyc2lvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gX21hc2sgJ0NSVScgbWFza1xuICAgICAqIEByZXR1cm4ge0NvbGxlY3Rpb25BcGl9IHNlbGZcbiAgICAgKi9cbiAgICAkZW5jb2RlOiBmdW5jdGlvbihfbWFzaykge1xuICAgICAgdmFyIHJhdyA9IFtdO1xuICAgICAgZm9yKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHJhdy5wdXNoKHRoaXNbaV0uJGVuY29kZShfbWFzaykpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLiRkaXNwYXRjaCgnYmVmb3JlLXJlbmRlci1tYW55JywgW3Jhd10pO1xuICAgICAgcmV0dXJuIHJhdztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIENvbGxlY3Rpb25BcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gUmVzZXRzIHRoZSBjb2xsZWN0aW9uJ3MgY29udGVudHNcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0NvbGxlY3Rpb25BcGl9IHNlbGZcbiAgICAgKi9cbiAgICAkY2xlYXI6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuJGFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5sZW5ndGggPSAwOyAvLyByZXNldCB0aGUgY29sbGVjdGlvbiBjb250ZW50c1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBDb2xsZWN0aW9uQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIEJlZ2luIGEgc2VydmVyIHJlcXVlc3QgdG8gcG9wdWxhdGUgY29sbGVjdGlvbi4gVGhpcyBtZXRob2QgZG9lcyBub3RcbiAgICAgKiBjbGVhciB0aGUgY29sbGVjdGlvbiBjb250ZW50cyBieSBkZWZhdWx0LCB1c2UgYCRyZWZyZXNoYCB0byByZXNldCBhbmQgZmV0Y2guXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBmb3IgdXNlIGluIGNvbGxlY3Rpb25zIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdHxmdW5jdGlvbn0gX3BhcmFtcyBBZGRpdGlvbmFsIHJlcXVlc3QgcGFyYW1ldGVycywgbm90IHN0b3JlZCBpbiBjb2xsZWN0aW9uLFxuICAgICAqIGlmIGEgZnVuY3Rpb24gaXMgZ2l2ZW4sIHRoZW4gaXQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgcmVxdWVzdCBvYmplY3QgdG8gYWxsb3cgcmVxdWV0IGN1c3RvbWl6YXRpb24uXG4gICAgICogQHJldHVybiB7Q29sbGVjdGlvbkFwaX0gc2VsZlxuICAgICAqL1xuICAgICRmZXRjaDogZnVuY3Rpb24oX3BhcmFtcykge1xuICAgICAgcmV0dXJuIHRoaXMuJGFjdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJlcXVlc3QgPSB7IG1ldGhvZDogJ0dFVCcsIHVybDogdGhpcy4kdXJsKCdmZXRjaE1hbnknKSwgcGFyYW1zOiB0aGlzLiRwYXJhbXMgfTtcblxuICAgICAgICBpZihfcGFyYW1zKSB7XG4gICAgICAgICAgcmVxdWVzdC5wYXJhbXMgPSByZXF1ZXN0LnBhcmFtcyA/IGV4dGVuZChyZXF1ZXN0LnBhcmFtcywgX3BhcmFtcykgOiBfcGFyYW1zO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVE9ETzogY2hlY2sgdGhhdCBjb2xsZWN0aW9uIGlzIGJvdW5kLlxuXG4gICAgICAgIHRoaXNcbiAgICAgICAgICAuJGRpc3BhdGNoKCdiZWZvcmUtZmV0Y2gtbWFueScsIFtyZXF1ZXN0XSlcbiAgICAgICAgICAuJHNlbmQocmVxdWVzdCwgZnVuY3Rpb24oX3Jlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgIC4kdW53cmFwKF9yZXNwb25zZS5kYXRhKVxuICAgICAgICAgICAgICAuJGRpc3BhdGNoKCdhZnRlci1mZXRjaC1tYW55JywgW19yZXNwb25zZV0pO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKF9yZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy4kZGlzcGF0Y2goJ2FmdGVyLWZldGNoLW1hbnktZXJyb3InLCBbX3Jlc3BvbnNlXSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIENvbGxlY3Rpb25BcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gQWRkcyBhbiBpdGVtIHRvIHRoZSBiYWNrIG9mIHRoZSBjb2xsZWN0aW9uLiBUaGlzIG1ldGhvZCBkb2VzIG5vdCBhdHRlbXB0IHRvIHNlbmQgY2hhbmdlc1xuICAgICAqIHRvIHRoZSBzZXJ2ZXIuIFRvIGNyZWF0ZSBhIG5ldyBpdGVtIGFuZCBhZGQgaXQgdXNlICRjcmVhdGUgb3IgJGJ1aWxkLlxuICAgICAqXG4gICAgICogVHJpZ2dlcnMgYWZ0ZXItYWRkIGNhbGxiYWNrcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UmVjb3JkQXBpfSBfb2JqIEl0ZW0gdG8gYmUgYWRkZWRcbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uQXBpfSBzZWxmXG4gICAgICovXG4gICAgJGFkZDogZnVuY3Rpb24oX29iaiwgX2lkeCkge1xuICAgICAgVXRpbHMuYXNzZXJ0KF9vYmouJHR5cGUgJiYgX29iai4kdHlwZSA9PT0gdGhpcy4kdHlwZSwgJ0NvbGxlY3Rpb24gJGFkZCBleHBlY3RzIHJlY29yZCBvZiB0aGUgc2FtZSAkdHlwZScpO1xuXG4gICAgICByZXR1cm4gdGhpcy4kYWN0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZihfb2JqLiRwb3NpdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYoX2lkeCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnNwbGljZShfaWR4LCAwLCBfb2JqKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wdXNoKF9vYmopO1xuICAgICAgICAgIH1cbiAgICAgICAgICBfb2JqLiRwb3NpdGlvbiA9IHRydWU7IC8vIHVzZSB0cnVlIGZvciBub3csIGtlZXBpbmcgcG9zaXRpb24gdXBkYXRlZCBjYW4gYmUgZXhwZW5zaXZlXG4gICAgICAgICAgdGhpcy4kZGlzcGF0Y2goJ2FmdGVyLWFkZCcsIFtfb2JqXSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgQ29sbGVjdGlvbkFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiAgUmVtb3ZlcyBhbiBpdGVtIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCBzZW5kIGEgREVMRVRFIHJlcXVlc3QgdG8gdGhlIHNlcnZlciwgaXQganVzdCByZW1vdmVzIHRoZVxuICAgICAqIGl0ZW0gbG9jYWxseS4gVG8gcmVtb3ZlIGFuIGl0ZW0gQU5EIHNlbmQgYSBERUxFVEUgdXNlIHRoZSBpdGVtJ3MgJGRlc3Ryb3kgbWV0aG9kLlxuICAgICAqXG4gICAgICogVHJpZ2dlcnMgYWZ0ZXItcmVtb3ZlIGNhbGxiYWNrcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UmVjb3JkQXBpfSBfb2JqIEl0ZW0gdG8gYmUgcmVtb3ZlZFxuICAgICAqIEByZXR1cm4ge0NvbGxlY3Rpb25BcGl9IHNlbGZcbiAgICAgKi9cbiAgICAkcmVtb3ZlOiBmdW5jdGlvbihfb2JqKSB7XG4gICAgICByZXR1cm4gdGhpcy4kYWN0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaWR4ID0gdGhpcy4kaW5kZXhPZihfb2JqKTtcbiAgICAgICAgaWYoaWR4ICE9PSAtMSkge1xuICAgICAgICAgIHRoaXMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgX29iai4kcG9zaXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgdGhpcy4kZGlzcGF0Y2goJ2FmdGVyLXJlbW92ZScsIFtfb2JqXSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgQ29sbGVjdGlvbkFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBGaW5kcyB0aGUgbG9jYXRpb24gb2YgYW4gb2JqZWN0IGluIHRoZSBhcnJheS5cbiAgICAgKlxuICAgICAqIElmIGEgZnVuY3Rpb24gaXMgcHJvdmlkZWQgdGhlbiB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGl0ZW0gZm9yIHdoaWNoIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRydWUgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlY29yZEFwaXxmdW5jdGlvbn0gX29iaiBPYmplY3QgdG8gZmluZFxuICAgICAqIEByZXR1cm4ge251bWJlcn0gT2JqZWN0IGluZGV4IG9yIC0xIGlmIG5vdCBmb3VuZFxuICAgICAqL1xuICAgICRpbmRleE9mOiBmdW5jdGlvbihfb2JqKSB7XG4gICAgICB2YXIgYWNjZXB0ID0gdHlwZW9mIF9vYmogPT09ICdmdW5jdGlvbicgPyBfb2JqIDogZmFsc2U7XG4gICAgICBmb3IodmFyIGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYoYWNjZXB0ID8gYWNjZXB0KHRoaXNbaV0pIDogdGhpc1tpXSA9PT0gX29iaikgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICB9O1xuXG59XSk7XG5STU1vZHVsZS5mYWN0b3J5KCdSTUNvbW1vbkFwaScsIFsnJGh0dHAnLCAnUk1GYXN0UScsICckbG9nJywgZnVuY3Rpb24oJGh0dHAsICRxLCAkbG9nKSB7XG5cbiAgdmFyIEVNUFRZX0FSUkFZID0gW107XG5cbiAgZnVuY3Rpb24gd3JhcFByb21pc2UoX2N0eCwgX2Z1bikge1xuICAgIHZhciBkc3AgPSBfY3R4LiRkaXNwYXRjaGVyKCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKF9sYXN0KSB7XG4gICAgICAvLyBzYXZlIGFuZCByZXNldCBwcm9taXNlXG4gICAgICB2YXIgb2xkUHJvbWlzZSA9IF9jdHguJHByb21pc2U7XG4gICAgICBfY3R4LiRwcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgdHJ5IHtcbiAgICAgICAgX2N0eC4kbGFzdCA9IF9sYXN0O1xuICAgICAgICB2YXIgcmVzdWx0ID0gZHNwID8gX2N0eC4kZGVjb3JhdGUoZHNwLCBfZnVuLCBbX2N0eF0pIDogX2Z1bi5jYWxsKF9jdHgsIF9jdHgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyBfY3R4LiRwcm9taXNlIDogcmVzdWx0O1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgX2N0eC4kcHJvbWlzZSA9IG9sZFByb21pc2U7IC8vIHJlc3RvcmUgb2xkIHByb21pc2VcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEBjbGFzcyBDb21tb25BcGlcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFByb3ZpZGVzIGEgY29tbW9uIGZyYW1ld29yayBmb3IgcmVzdG1vZCByZXNvdXJjZXMuXG4gICAqXG4gICAqIFRoaXMgQVBJIGlzIGluY2x1ZGVkIGluIHtAbGluayBSZWNvcmRBcGl9IGFuZCB7QGxpbmsgQ29sbGVjdGlvbkFwaX0uXG4gICAqIG1ha2luZyBpdHMgbWV0aG9kcyBhdmFpbGFibGUgaW4gZXZlcnkgc3RydWN0dXJlIGdlbmVyYXRlZCBieSByZXN0bW9kLlxuICAgKlxuICAgKiBUT0RPOiBEZXNjcmliZSBob29rIG1lY2hhbmlzbSwgcHJvbWlzZSBtZWNoYW5pc20gYW5kIHNlbmQgbGlmZWN5Y2xlLlxuICAgKlxuICAgKiBAcHJvcGVydHkge3Byb21pc2V9ICRwcm9taXNlIFRoZSBsYXN0IG9wZXJhdGlvbiBwcm9taXNlICh1bmRlZmluZWQgaWYgbm8gcHJvbWlzZSBoYXMgYmVlbiBjcmVhdGVkIHlldClcbiAgICogQHByb3BlcnR5IHthcnJheX0gJHBlbmRpbmcgUGVuZGluZyByZXF1ZXN0cyBhc3NvY2lhdGVkIHRvIHRoaXMgcmVzb3VyY2UgKHVuZGVmaW5lZCBpZiBubyByZXF1ZXN0IGhhcyBiZWVuIGluaXRpYXRlZClcbiAgICogQHByb3BlcnR5IHtvYmplY3R9ICQkY2IgU2NvcGUgY2FsbCBiYWNrcyAodW5kZWZpbmVkIGlmIG5vIGNhbGxiYWNrcyBoYXZlIGJlZW4gZGVmaW5lZCwgcHJpdmF0ZSBhcGkpXG4gICAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259ICQkZHNwIFRoZSBjdXJyZW50IGV2ZW50IGRpc3BhdGNoZXIgKHByaXZhdGUgYXBpKVxuICAgKi9cbiAgdmFyIENvbW1vbkFwaSA9IHtcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBDb21tb25BcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gR2V0cyB0aGlzIHJlc291cmNlIHVybC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfZm9yIEludGVuZGVkIHVzYWdlIGZvciB0aGUgdXJsIChvcHRpb25hbClcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSByZXNvdXJjZSB1cmwuXG4gICAgICovXG4gICAgJHVybDogZnVuY3Rpb24oX2Zvcikge1xuICAgICAgaWYoX2Zvcikge1xuICAgICAgICBfZm9yID0gJyQnICsgX2ZvciArICdVcmxGb3InO1xuICAgICAgICBpZih0aGlzLiRzY29wZVtfZm9yXSkgcmV0dXJuIHRoaXMuJHNjb3BlW19mb3JdKHRoaXMpO1xuICAgICAgfSBlbHNlIGlmKHRoaXMuJHNjb3BlLiRjYW5vbmljYWxVcmxGb3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHNjb3BlLiRjYW5vbmljYWxVcmxGb3IodGhpcyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLiRzY29wZS4kdXJsRm9yKHRoaXMpO1xuICAgIH0sXG5cbiAgICAvLyBIb29rcyBBUElcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBDb21tb25BcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gRXhlY3V0ZXMgYSBnaXZlbiBob29rIGNhbGxiYWNrcyB1c2luZyB0aGUgY3VycmVudCBkaXNwYXRjaGVyIGNvbnRleHQuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCB0byBwcm92aWRlIGN1c3RvbSBvYmplY3QgbGlmZWN5Y2xlIGhvb2tzLlxuICAgICAqXG4gICAgICogVXNhZ2U6XG4gICAgICpcbiAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICogdmFyIG1peGluID0gcmVzdG1vZC5taXhpbih7XG4gICAgICogICB0cmlnZ2VyRHVtbXk6IGZ1bmN0aW9uKF9wYXJhbSkge1xuICAgICAqICAgICB0aGlzLiRkaXNwYXRjaCgnZHVtbXktaG9vaycsIF9wYXJhbSk7XG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiAvLyBUaGVuIGhvb2sgY2FuIGJlIHVzZWQgYXQgbW9kZWwgZGVmaW5pdGlvbiB0byBwcm92aWRlIHR5cGUtbGV2ZWwgY3VzdG9taXphdGlvbjpcbiAgICAgKiB2YXIgQmlrZSAkcmVzbW9kLm1vZGVsKCcvYXBpL2Jpa2VzJywgbWl4aW4sIHtcbiAgICAgKiAgICd+ZHVtbXktaG9vayc6IGZ1bmN0aW9uKCkge1xuICAgICAqICAgICBhbGVydCgnVGhpcyBpcyBjYWxsZWQgZm9yIGV2ZXJ5IGJpa2UnKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogLy8gb3IgYXQgaW5zdGFuY2UgbGV2ZWw6XG4gICAgICogdmFyIG15QmlrZSA9IEJpa2UuJGJ1aWxkKCk7XG4gICAgICogbXlCaWtlLiRvbignZHVtbXktaG9vaycsIGZ1bmN0aW9uKCkge1xuICAgICAqICAgYWxlcnQoJ1RoaXMgaXMgY2FsbGVkIGZvciBteUJpa2Ugb25seScpO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogLy8gb3IgZXZlbnQgYXQgZGVjb3JhdGVkIGNvbnRleHQgbGV2ZWxcbiAgICAgKiBteUJpa2UuJGRlY29yYXRlKHtcbiAgICAgKiAgICdkdW1teS1ob29rJzogZnVuY3Rpb24oKSB7XG4gICAgICogICAgIGFsZXJ0KCdUaGlzIGlzIGNhbGxlZCBmb3IgbXlCaWtlIG9ubHkgaW5zaWRlIHRoZSBkZWNvcmF0ZWQgY29udGV4dCcpO1xuICAgICAqICAgfVxuICAgICAqIH0sIGZ1Y3Rpb24oKSB7XG4gICAgICogIC8vIGRlY29yYXRlZCBjb250ZXh0XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IF9ob29rIEhvb2sgbmFtZVxuICAgICAqIEBwYXJhbSAge2FycmF5fSBfYXJncyBIb29rIGFyZ3VtZW50c1xuICAgICAqIEBwYXJhbSAge29iamVjdH0gX2N0eCBIb29rIGV4ZWN1dGlvbiBjb250ZXh0IG92ZXJyaWRlXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtDb21tb25BcGl9IHNlbGZcbiAgICAgKi9cbiAgICAkZGlzcGF0Y2g6IGZ1bmN0aW9uKF9ob29rLCBfYXJncywgX2N0eCkge1xuICAgICAgdmFyIGNicywgaSwgY2IsIGRzcCA9IHRoaXMuJCRkc3A7XG5cbiAgICAgIGlmKCFfY3R4KSBfY3R4ID0gdGhpcztcblxuICAgICAgLy8gY29udGV4dCBjYWxsYmFja3NcbiAgICAgIGlmKGRzcCkge1xuICAgICAgICB0aGlzLiQkZHNwID0gdW5kZWZpbmVkOyAvLyBkaXNhYmxlIGRzcCBmb3IgaG9va3NcbiAgICAgICAgZHNwKF9ob29rLCBfYXJncywgX2N0eCk7XG4gICAgICB9XG5cbiAgICAgIC8vIGluc3RhbmNlIGNhbGxiYWNrc1xuICAgICAgaWYodGhpcy4kJGNiICYmIChjYnMgPSB0aGlzLiQkY2JbX2hvb2tdKSkge1xuICAgICAgICBmb3IoaSA9IDA7ICEhKGNiID0gY2JzW2ldKTsgaSsrKSB7XG4gICAgICAgICAgY2IuYXBwbHkoX2N0eCwgX2FyZ3MgfHwgRU1QVFlfQVJSQVkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGJ1YmJsZSB1cCB0aGUgb2JqZWN0IHNjb3BlLCBidWJibGUgdG8gdHlwZSBvbmx5IGlmIHRoZXJlIGlzbnQgYSB2aWFibGUgcGFyZW50IHNjb3BlLlxuICAgICAgaWYodGhpcy4kc2NvcGUgJiYgdGhpcy4kc2NvcGUuJGRpc3BhdGNoKSB7XG4gICAgICAgIHRoaXMuJHNjb3BlLiRkaXNwYXRjaChfaG9vaywgX2FyZ3MsIF9jdHgpO1xuICAgICAgfSBlbHNlIGlmKHRoaXMuJHR5cGUpIHtcbiAgICAgICAgdGhpcy4kdHlwZS4kZGlzcGF0Y2goX2hvb2ssIF9hcmdzLCBfY3R4KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy4kJGRzcCA9IGRzcDsgLy8gcmVlbmFibGUgZHNwLlxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIENvbW1vbkFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBSZWdpc3RlcnMgYW4gaW5zdGFuY2UgaG9vay5cbiAgICAgKlxuICAgICAqIEFuIGluc3RhbmNlIGhvb2sgaXMgY2FsbGVkIG9ubHkgZm9yIGV2ZW50cyBnZW5lcmF0ZWQgYnkgdGhlIGNhbGxpbmcgb2JqZWN0LlxuICAgICAqXG4gICAgICogYGBgamF2YXNjcmlwdFxuICAgICAqIHZhciBiaWtlID0gTW9kZWwuJGJ1aWxkKCksIGJpa2UyID0gTW9kZWwuJGJ1aWxkKCk7XG4gICAgICogYmlrZS4kb24oJ2JlZm9yZS1zYXZlJywgZnVuY3Rpb24oKSB7IGFsZXJ0KCdzYXZlZCEnKTsgfSk7XG4gICAgICpcbiAgICAgKiBiaWtlLiRzYXZlKCk7IC8vICdzYXZlZCEnIGFsZXJ0IGlzIHNob3duIGFmdGVyIGJpa2UgaXMgc2F2ZWRcbiAgICAgKiBiaWtlMi4kc2F2ZSgpOyAvLyBubyBhbGVydCBpcyBzaG93biBhZnRlciBiaWtlMiBpcyBzYXZlZFxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IF9ob29rIEhvb2sgbmFtZVxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IF9mdW4gQ2FsbGJhY2tcbiAgICAgKiBAcmV0dXJuIHtDb21tb25BcGl9IHNlbGZcbiAgICAgKi9cbiAgICAkb246IGZ1bmN0aW9uKF9ob29rLCBfZnVuKSB7XG4gICAgICB2YXIgaG9va3MgPSAodGhpcy4kJGNiIHx8ICh0aGlzLiQkY2IgPSB7fSkpW19ob29rXSB8fCAodGhpcy4kJGNiW19ob29rXSA9IFtdKTtcbiAgICAgIGhvb2tzLnB1c2goX2Z1bik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIENvbW1vbkFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBSZWdpc3RlcnMgaG9va3MgdG8gYmUgdXNlZCBvbmx5IGluc2lkZSB0aGUgZ2l2ZW4gZnVuY3Rpb24gKGRlY29yYXRlZCBjb250ZXh0KS5cbiAgICAgKlxuICAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAgKiAvLyBzcGVjaWFsIGZldGNoIG1ldGhvZCB0aGF0IHNlbmRzIGEgc3BlY2lhbCB0b2tlbiBoZWFkZXIuXG4gICAgICogcmVzdG1vZC5taXhpbih7XG4gICAgICogICAkZmV0Y2hXaXRoVG9rZW46IGZ1bmN0aW9uKF90b2tlbikge1xuICAgICAqICAgICByZXR1cm4gdGhpcy4kZGVjb3JhdGUoe1xuICAgICAqICAgICAgICdiZWZvcmUtZmV0Y2gnOiBmdW5jdGlvbihfcmVxKSB7XG4gICAgICogICAgICAgICBfcmVxLmhlYWRlcnMgPSBfcmVxLmhlYWRlcnMgfHwge307XG4gICAgICogICAgICAgICBfcmVxLmhlYWRlcnNbJ1Rva2VuJ10gPSBfdG9rZW47XG4gICAgICogICAgICAgfVxuICAgICAqICAgICApLCBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgICByZXR1cm4gdGhpcy4kZmV0Y2goKTtcbiAgICAgKiAgICAgfSlcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fGZ1bmN0aW9ufSBfaG9va3MgSG9vayBtYXBwaW5nIG9iamVjdCBvciBob29rIGV4ZWN1dGlvbiBtZXRob2QuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gX2Z1biBGdW5jdGlvbiB0byBiZSBleGVjdXRlZCBpbiB3aXRoIGRlY29yYXRlZCBjb250ZXh0LCB0aGlzIGZ1bmN0aW9uIGlzIGV4ZWN1dGVkIGluIHRoZSBjYWxsZWUgb2JqZWN0IGNvbnRleHQuXG4gICAgICogQHJldHVybiB7Q29tbW9uQXBpfSBzZWxmXG4gICAgICovXG4gICAgJGRlY29yYXRlOiBmdW5jdGlvbihfaG9va3MsIF9mdW4sIF9hcmdzKSB7XG5cbiAgICAgIHZhciBvbGREaXNwYXRjaGVyID0gdGhpcy4kJGRzcDtcblxuICAgICAgLy8gc2V0IG5ldyBkaXNwYXRjaGVyXG4gICAgICB0aGlzLiQkZHNwID0gKHR5cGVvZiBfaG9va3MgPT09ICdmdW5jdGlvbicgfHwgIV9ob29rcykgPyBfaG9va3MgOiBmdW5jdGlvbihfaG9vaywgX2FyZ3MsIF9jdHgpIHtcbiAgICAgICAgaWYob2xkRGlzcGF0Y2hlcikgb2xkRGlzcGF0Y2hlci5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgICAgICB2YXIgZXh0cmFDYiA9IF9ob29rc1tfaG9va107XG4gICAgICAgIGlmKGV4dHJhQ2IpIGV4dHJhQ2IuYXBwbHkoX2N0eCwgX2FyZ3MgfHwgRU1QVFlfQVJSQVkpO1xuICAgICAgfTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIF9mdW4uYXBwbHkodGhpcywgX2FyZ3MpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLy8gcmVzZXQgZGlzcGF0Y2hlciB3aXRoIG9sZCB2YWx1ZVxuICAgICAgICB0aGlzLiQkZHNwID0gb2xkRGlzcGF0Y2hlcjtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIENvbW1vbkFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBSZXRyaWV2ZXMgdGhlIGN1cnJlbnQgb2JqZWN0J3MgZXZlbnQgZGlzcGF0Y2hlciBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIGluIGNvbmp1Y3Rpb24gd2l0aCBgJGRlY29yYXRlYCB0byBwcm92aWRlIGEgY29uc2lzdGVudCBob29rIGNvbnRleHRcbiAgICAgKiBkdXJpbmcgYXN5bmMgb3BlcmF0aW9ucy4gVGhpcyBpcyBpbXBvcnRhbnQgd2hlbiBidWlsZGluZyBleHRlbnNpb25zIHRoYXQgd2FudCB0byBzdXBwb3J0IHRoZVxuICAgICAqIGNvbnRleHR1YWwgaG9vayBzeXN0ZW0gaW4gYXN5bmNocm9uaWMgb3BlcmF0aW9ucy5cbiAgICAgKlxuICAgICAqIEZvciBtb3JlIGluZm9ybWF0aW9uIGFib291dCBjb250ZXh0dWFsIGhvb2tzLCBzZWUgdGhlIHtAbGluayBDb21tb25BcGkjZGVjb3JhdGV9IGRvY3VtZW50YXRpb24uXG4gICAgICpcbiAgICAgKiBVc2FnZTpcbiAgICAgKlxuICAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAgKiByZXN0bW9kLm1peGluKHtcbiAgICAgKiAgICRzYXZlQW5kVHJhY2s6IGZ1bmN0aW9uKCkge1xuICAgICAqICAgICB2YXIgZHNwID0gdGhpcy4kZGlzcGF0Y2hlcigpLCAvLyBjYXB0dXJlIHRoZSBjdXJyZW50IGRpc3BhdGNoZXIgZnVuY3Rpb24uXG4gICAgICogICAgICAgICBzZWxmID0gdGhpcztcbiAgICAgKiAgICAgdGhpcy4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uKCkge1xuICAgICAqICAgICAgIHRoaXMuJHNlbmQoeyBwYXRoOiAnL3RyYWNlcycsIGRhdGE6ICdibGUnIH0sIGZ1bmN0aW9uKCkge1xuICAgICAqICAgICAgICAgdGhpcy4kZGVjb3JhdGUoZHNwLCBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgICAgICAgLy8gdGhlIGV2ZW50IGlzIGRpc3BhdGNoZWQgdXNpbmcgdGhlIGRpc3BhdGNoZXIgZnVuY3Rpb24gYXZhaWxhYmxlIHdoZW4gJHNhdmVBbmRUcmFjayB3YXMgY2FsbGVkLlxuICAgICAqICAgICAgICAgICB0aGlzLiRkaXNwYXRjaCgndHJhY2Utc3RvcmVkJyk7XG4gICAgICogICAgICAgICB9KTtcbiAgICAgKiAgICAgICB9KTtcbiAgICAgKiAgICAgfSk7XG4gICAgICogICB9XG4gICAgICogfSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9ufSBEaXNwYXRjaGVyIGV2YWx1YXRvclxuICAgICAqL1xuICAgICRkaXNwYXRjaGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLiQkZHNwO1xuICAgIH0sXG5cbiAgICAvLyBQcm9taXNlIEFQSVxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIENvbW1vbkFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBSZXR1cm5zIHRoaXMgb2JqZWN0IGxhc3QgcHJvbWlzZS5cbiAgICAgKlxuICAgICAqIElmIHByb21pc2UgZG9lcyBub3QgZXhpc3QsIHRoZW4gYSBuZXcgb25lIGlzIGdlbmVyYXRlZCB0aGF0IHJlc29sdmVzIHRvIHRoZSBvYmplY3QgaXRzZWYuIFRoZVxuICAgICAqIG5ldyBwcm9taXNlIGlzIG5vdCBzZXQgYXMgdGhlIGN1cnJlbnQgb2JqZWN0IHByb21pc2UsIGZvciB0aGF0IHVzZSBgJHRoZW5gLlxuICAgICAqXG4gICAgICogVXNhZ2U6XG4gICAgICpcbiAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICogY29sLiRmZXRjaCgpLiRhc1Byb21pc2UoKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3Byb21pc2V9ICRxIHByb21pc2VcbiAgICAgKi9cbiAgICAkYXNQcm9taXNlOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICByZXR1cm4gdGhpcy4kcHJvbWlzZSA/IHRoaXMuJHByb21pc2UudGhlbihcbiAgICAgICAgZnVuY3Rpb24oKSB7IHJldHVybiBfdGhpczsgfSxcbiAgICAgICAgZnVuY3Rpb24oKSB7IHJldHVybiAkcS5yZWplY3QoX3RoaXMpOyB9XG4gICAgICApIDogJHEud2hlbih0aGlzKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIENvbW1vbkFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBQcm9taXNlIGNoYWluaW5nIG1ldGhvZCwga2VlcHMgdGhlIG1vZGVsIGluc3RhbmNlIGFzIHRoZSBjaGFpbiBjb250ZXh0LlxuICAgICAqXG4gICAgICogQ2FsbHMgYCRxLnRoZW5gIG9uIHRoZSBtb2RlbCdzIGxhc3QgcHJvbWlzZS5cbiAgICAgKlxuICAgICAqIFVzYWdlOlxuICAgICAqXG4gICAgICogYGBgamF2YXNjcmlwdFxuICAgICAqIGNvbC4kZmV0Y2goKS4kdGhlbihmdW5jdGlvbigpIHsgfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBfc3VjY2VzcyBzdWNjZXNzIGNhbGxiYWNrXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gX2Vycm9yIGVycm9yIGNhbGxiYWNrXG4gICAgICogQHJldHVybiB7Q29tbW9uQXBpfSBzZWxmXG4gICAgICovXG4gICAgJHRoZW46IGZ1bmN0aW9uKF9zdWNjZXNzLCBfZXJyb3IpIHtcblxuICAgICAgaWYoIXRoaXMuJHByb21pc2UpIHtcbiAgICAgICAgdGhpcy4kcHJvbWlzZSA9ICRxLndoZW4od3JhcFByb21pc2UodGhpcywgX3N1Y2Nlc3MpKHRoaXMpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuJHByb21pc2UgPSB0aGlzLiRwcm9taXNlLnRoZW4oXG4gICAgICAgICAgX3N1Y2Nlc3MgPyB3cmFwUHJvbWlzZSh0aGlzLCBfc3VjY2VzcykgOiBfc3VjY2VzcyxcbiAgICAgICAgICBfZXJyb3IgPyB3cmFwUHJvbWlzZSh0aGlzLCBfZXJyb3IpIDogX2Vycm9yXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgQ29tbW9uQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIFByb21pc2UgY2hhaW5pbmcgbWV0aG9kLCBzaW1pbGFyIHRvIHRoZW4gYnV0IGV4ZWN1dGVzIHNhbWUgY2FsbGJhY2sgaW4gc3VjY2VzcyBvciBlcnJvci5cbiAgICAgKlxuICAgICAqIFVzYWdlOlxuICAgICAqXG4gICAgICogYGBgamF2YXNjcmlwdFxuICAgICAqIGNvbC4kZmV0Y2goKS4kYWx3YXlzKGZ1bmN0aW9uKCkgeyB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IF9mdW4gc3VjY2Vzcy9lcnJvciBjYWxsYmFja1xuICAgICAqIEByZXR1cm4ge0NvbW1vbkFwaX0gc2VsZlxuICAgICAqL1xuICAgICRhbHdheXM6IGZ1bmN0aW9uKF9mdW4pIHtcbiAgICAgIHJldHVybiB0aGlzLiR0aGVuKF9mdW4sIF9mdW4pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgQ29tbW9uQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIFByb21pc2UgY2hhaW5pbmcsIGtlZXBzIHRoZSBtb2RlbCBpbnN0YW5jZSBhcyB0aGUgY2hhaW4gY29udGV4dC5cbiAgICAgKlxuICAgICAqIENhbGxzIMK0JHEuZmluYWxsecK0IG9uIHRoZSBjb2xsZWN0aW9uJ3MgbGFzdCBwcm9taXNlLCB1cGRhdGVzIGxhc3QgcHJvbWlzZSB3aXRoIGZpbmFsbHkgcmVzdWx0LlxuICAgICAqXG4gICAgICogVXNhZ2U6XG4gICAgICpcbiAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICogY29sLiRmZXRjaCgpLiRmaW5hbGx5KGZ1bmN0aW9uKCkgeyB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IF9jYiBjYWxsYmFja1xuICAgICAqIEByZXR1cm4ge0NvbW1vbkFwaX0gc2VsZlxuICAgICAqL1xuICAgICRmaW5hbGx5OiBmdW5jdGlvbihfY2IpIHtcbiAgICAgIHRoaXMuJHByb21pc2UgPSB0aGlzLiRwcm9taXNlWydmaW5hbGx5J10od3JhcFByb21pc2UodGhpcywgX2NiKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gQ29tbXVuaWNhdGlvbiBBUElcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBDb21tb25BcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gTG93IGxldmVsIGNvbW11bmljYXRpb24gbWV0aG9kLCB3cmFwcyB0aGUgJGh0dHAgYXBpLlxuICAgICAqXG4gICAgICogKiBZb3UgY2FuIGFjY2VzcyBsYXN0IHJlcXVlc3QgcHJvbWlzZSB1c2luZyB0aGUgYCRhc1Byb21pc2VgIG1ldGhvZC5cbiAgICAgKiAqIFBlbmRpbmcgcmVxdWVzdHMgd2lsbCBiZSBhdmFpbGFibGUgYXQgdGhlICRwZW5kaW5nIHByb3BlcnR5IChhcnJheSkuXG4gICAgICogKiBDdXJyZW50IHJlcXVlc3QgZXhlY3V0aW9uIHN0YXR1cyBjYW4gYmUgcXVlcmllZCB1c2luZyB0aGUgJHN0YXR1cyBwcm9wZXJ0eSAoY3VycmVudCByZXF1ZXN0LCBub3QgbGFzdCkuXG4gICAgICogKiBUaGUgJHN0YXR1cyBwcm9wZXJ0eSByZWZlcnMgdG8gdGhlIGN1cnJlbnQgcmVxdWVzdCBpbnNpZGUgJHNlbmQgYF9zdWNjZXNzYCBhbmQgYF9lcnJvcmAgY2FsbGJhY2tzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IF9vcHRpb25zICRodHRwIG9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBfc3VjY2VzcyBzdWNlc3MgY2FsbGJhY2sgKHN5bmMpXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gX2Vycm9yIGVycm9yIGNhbGxiYWNrIChzeW5jKVxuICAgICAqIEByZXR1cm4ge0NvbW1vbkFwaX0gc2VsZlxuICAgICAqL1xuICAgICRzZW5kOiBmdW5jdGlvbihfb3B0aW9ucywgX3N1Y2Nlc3MsIF9lcnJvcikge1xuXG4gICAgICAvLyBtYWtlIHN1cmUgYSBzdHlsZSBiYXNlIHdhcyBzZWxlY3RlZCBmb3IgdGhlIG1vZGVsXG4gICAgICBpZighdGhpcy4kdHlwZS5nZXRQcm9wZXJ0eSgnc3R5bGUnKSkge1xuICAgICAgICAkbG9nLndhcm4oJ05vIEFQSSBzdHlsZSBiYXNlIHdhcyBzZWxlY3RlZCwgc2VlIHRoZSBBcGkgSW50ZWdyYXRpb24gRkFRIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHRoaXMgd2FybmluZycpO1xuICAgICAgfVxuXG4gICAgICB2YXIgYWN0aW9uID0gdGhpcy4kJGFjdGlvbjtcblxuICAgICAgcmV0dXJuIHRoaXMuJGFsd2F5cyhmdW5jdGlvbigpIHtcblxuICAgICAgICB0aGlzLiRyZXNwb25zZSA9IG51bGw7XG4gICAgICAgIHRoaXMuJHN0YXR1cyA9ICdwZW5kaW5nJztcbiAgICAgICAgdGhpcy4kZGlzcGF0Y2goJ2JlZm9yZS1yZXF1ZXN0JywgW19vcHRpb25zXSk7XG5cbiAgICAgICAgcmV0dXJuICRodHRwKF9vcHRpb25zKS50aGVuKHdyYXBQcm9taXNlKHRoaXMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKGFjdGlvbiAmJiBhY3Rpb24uY2FuY2VsZWQpIHtcbiAgICAgICAgICAgIC8vIGlmIHJlcXVlc3Qgd2FzIGNhbmNlbGVkIGR1cmluZyByZXF1ZXN0LCBpZ25vcmUgcG9zdCByZXF1ZXN0IGFjdGlvbnMuXG4gICAgICAgICAgICB0aGlzLiRzdGF0dXMgPSAgJ2NhbmNlbGVkJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy4kc3RhdHVzID0gJ29rJztcbiAgICAgICAgICAgIHRoaXMuJHJlc3BvbnNlID0gdGhpcy4kbGFzdDtcbiAgICAgICAgICAgIHRoaXMuJGRpc3BhdGNoKCdhZnRlci1yZXF1ZXN0JywgW3RoaXMuJGxhc3RdKTtcbiAgICAgICAgICAgIGlmKF9zdWNjZXNzKSBfc3VjY2Vzcy5jYWxsKHRoaXMsIHRoaXMuJGxhc3QpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSksIHdyYXBQcm9taXNlKHRoaXMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKGFjdGlvbiAmJiBhY3Rpb24uY2FuY2VsZWQpIHtcbiAgICAgICAgICAgIC8vIGlmIHJlcXVlc3Qgd2FzIGNhbmNlbGVkIGR1cmluZyByZXF1ZXN0LCBpZ25vcmUgZXJyb3IgaGFuZGxpbmdcbiAgICAgICAgICAgIHRoaXMuJHN0YXR1cyA9ICdjYW5jZWxlZCc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuJHN0YXR1cyA9ICdlcnJvcic7XG4gICAgICAgICAgICB0aGlzLiRyZXNwb25zZSA9IHRoaXMuJGxhc3Q7XG5cbiAgICAgICAgICAgIC8vIElERUE6IENvbnNpZGVyIGZsdXNoaW5nIHBlbmRpbmcgcmVxdWVzdCBpbiBjYXNlIG9mIGFuIGVycm9yLiBBbHNvIGNvbnRpbnVlIGlnbm9yaW5nIHJlcXVlc3RzXG4gICAgICAgICAgICAvLyB1bnRpbCB0aGUgZXJyb3IgZmxhZyBpcyByZXNldCBieSB1c2VyLlxuXG4gICAgICAgICAgICB0aGlzLiRkaXNwYXRjaCgnYWZ0ZXItcmVxdWVzdC1lcnJvcicsIFt0aGlzLiRsYXN0XSk7XG4gICAgICAgICAgICBpZihfZXJyb3IpIF9lcnJvci5jYWxsKHRoaXMsIHRoaXMuJGxhc3QpO1xuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdCh0aGlzKTsgLy8gVE9ETzogdGhpcyB3aWxsIHN0ZXAgb3ZlciBhbnkgcHJvbWlzZSBnZW5lcmF0ZWQgaW4gX2Vycm9yISFcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvLyBBY3Rpb25zIEFQSVxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIENvbW1vbkFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBSZWdpc3RlcnMgYSBuZXcgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIGluIHRoZSBwcm9taXNlIHF1ZXVlLlxuICAgICAqXG4gICAgICogUmVnaXN0ZXJlZCBwZW5kaW5nIGFjdGlvbnMgY2FuIGJlIGNhbmNlbGVkIHVzaW5nIGAkY2FuY2VsYFxuICAgICAqXG4gICAgICogYCRjYW5jZWxgIHdpbGwgYWxzbyBjYW5jZWwgYW55IG9uZ29pbmcgY2FsbCB0byBgJHNlbmRgICh3aWxsIG5vdCBhYm9ydCBpdCB5ZXQgdGhvdWdoLi4uKVxuICAgICAqXG4gICAgICogQHJldHVybiB7Q29tbW9uQXBpfSBzZWxmXG4gICAgICovXG4gICAgJGFjdGlvbjogZnVuY3Rpb24oX2Z1bikge1xuICAgICAgdmFyIHN0YXR1cyA9IHtcbiAgICAgICAgY2FuY2VsZWQ6IGZhbHNlXG4gICAgICB9LCBwZW5kaW5nID0gdGhpcy4kcGVuZGluZyB8fCAodGhpcy4kcGVuZGluZyA9IFtdKTtcblxuICAgICAgcGVuZGluZy5wdXNoKHN0YXR1cyk7XG5cbiAgICAgIHJldHVybiB0aGlzLiRhbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvbGRBY3Rpb24gPSB0aGlzLiQkYWN0aW9uO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmKCFzdGF0dXMuY2FuY2VsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuJCRhY3Rpb24gPSBzdGF0dXM7XG4gICAgICAgICAgICByZXR1cm4gX2Z1bi5jYWxsKHRoaXMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHRoaXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAvLyByZXN0b3JlIG9iamVjdCBzdGF0ZSBhbmQgcGVuZGluZyBhY3Rpb25zXG4gICAgICAgICAgdGhpcy4kJGFjdGlvbiA9IG9sZEFjdGlvbjtcbiAgICAgICAgfVxuICAgICAgfSkuJGZpbmFsbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGFmdGVyIGFjdGlvbiBhbmQgcmVsYXRlZCBhc3luYyBjb2RlIGZpbmlzaGVzLCByZW1vdmUgc3RhdHVzIGZyb20gcGVuZGluZyBsaXN0XG4gICAgICAgIHBlbmRpbmcuc3BsaWNlKHBlbmRpbmcuaW5kZXhPZihzdGF0dXMpLCAxKTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgQ29tbW9uQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIENhbmNlbHMgYWxsIHBlbmRpbmcgYWN0aW9ucyByZWdpc3RlcmVkIHdpdGggJGFjdGlvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0NvbW1vbkFwaX0gc2VsZlxuICAgICAqL1xuICAgICRjYW5jZWw6IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gY2FuY2VsIGV2ZXJ5IHBlbmRpbmcgcmVxdWVzdC5cbiAgICAgIGlmKHRoaXMuJHBlbmRpbmcpIHtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKHRoaXMuJHBlbmRpbmcsIGZ1bmN0aW9uKF9zdGF0dXMpIHtcbiAgICAgICAgICBfc3RhdHVzLmNhbmNlbGVkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgQ29tbW9uQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIFJldHVybnMgdHJ1ZSBpZiBvYmplY3QgaGFzIHF1ZXVlZCBhY3Rpb25zXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBPYmplY3QgcmVxdWVzdCBwZW5kaW5nIHN0YXR1cy5cbiAgICAgKi9cbiAgICAkaGFzUGVuZGluZ0FjdGlvbnM6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBlbmRpbmdDb3VudCA9IDA7XG5cbiAgICAgIGlmKHRoaXMuJHBlbmRpbmcpIHtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKHRoaXMuJHBlbmRpbmcsIGZ1bmN0aW9uKF9zdGF0dXMpIHtcbiAgICAgICAgICBpZighX3N0YXR1cy5jYW5jZWxlZCkgcGVuZGluZ0NvdW50Kys7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGVuZGluZ0NvdW50ID4gMDtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIENvbW1vbkFwaTtcblxufV0pO1xuUk1Nb2R1bGUuZmFjdG9yeSgnUk1FeHRlbmRlZEFwaScsIFsnJHEnLCAnUk1QYWNrZXJDYWNoZScsIGZ1bmN0aW9uKCRxLCBwYWNrZXJDYWNoZSkge1xuXG4gIC8qKlxuICAgKiBAY2xhc3MgRXh0ZW5kZWRBcGlcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFByb3ZpZGVzIGEgY29tbW9uIGZyYW1ld29yayAqKm9uIHRvcCoqIG9mIHRoZSB7QGxpbmsgUmVjb3JkQXBpfSBhbmQge0BsaW5rIENvbGxlY3Rpb25BcGl9LlxuICAgKlxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59ICRyZXNvbHZlZCBUaGUgY29sbGVjdGlvbiByZXNvbHZlIHN0YXR1cywgaXMgdW5kZWZpbmVkIG9uIGludGlhbGl6YXRpb25cbiAgICovXG4gIHJldHVybiB7XG5cbiAgICAvLyBvdmVycmlkZSBkZWNvZGUgdG8gZGV0ZWN0IHJlc29sdXRpb24gb2YgcmVzb3VyY2VcbiAgICAkZGVjb2RlOiBmdW5jdGlvbihfcmF3LCBfbWFzaykge1xuICAgICAgaWYodGhpcy4kcmVzb2x2ZWQgPT09IGZhbHNlICYmIHRoaXMuJGNsZWFyKSB0aGlzLiRjbGVhcigpOyAvLyBjbGVhciBpZiBub3QgcmVzb2x2ZWQuXG4gICAgICB0aGlzLiRzdXBlcihfcmF3LCBfbWFzayk7XG4gICAgICB0aGlzLiRyZXNvbHZlZCA9IHRydWU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8vIE1pc2MgY29tbW9uIG1ldGhvZHNcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBFeHRlbmRlZEFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogVW5wYWNrcyBhbmQgZGVjb2RlIHJhdyBkYXRhIGZyb20gYSBzZXJ2ZXIgZ2VuZXJhdGVkIHN0cnVjdHVyZS5cbiAgICAgKlxuICAgICAqIEFUVEVOVElPTjogZG8gbm90IG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGNoYW5nZSB0aGUgb2JqZWN0IHdyYXBwaW5nIHN0cmF0ZWd5LFxuICAgICAqIGluc3RlYWQsIG92ZXJyaWRlIHRoZSBzdGF0aWMge0BsaW5rIE1vZGVsLiR1bnBhY2t9IG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge21peGVkfSBfcmF3IFJhdyBzZXJ2ZXIgZGF0YVxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gX21hc2sgJ0NSVScgbWFza1xuICAgICAqIEByZXR1cm4ge0V4dGVuZGVkQXBpfSB0aGlzXG4gICAgICovXG4gICAgJHVud3JhcDogZnVuY3Rpb24oX3JhdywgX21hc2spIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHBhY2tlckNhY2hlLnByZXBhcmUoKTtcbiAgICAgICAgX3JhdyA9IHRoaXMuJHR5cGUudW5wYWNrKHRoaXMsIF9yYXcpO1xuICAgICAgICByZXR1cm4gdGhpcy4kZGVjb2RlKF9yYXcsIF9tYXNrKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHBhY2tlckNhY2hlLmNsZWFyKCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBFeHRlbmRlZEFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogRW5jb2RlIGFuZCBwYWNrcyBvYmplY3QgaW50byBhIHNlcnZlciBjb21wYXRpYmxlIHN0cnVjdHVyZSB0aGF0IGNhbiBiZSB1c2VkIGZvciBQVVQvUE9TVCBvcGVyYXRpb25zLlxuICAgICAqXG4gICAgICogQVRURU5USU9OOiBkbyBub3Qgb3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gY2hhbmdlIHRoZSBvYmplY3Qgd3JhcHBpbmcgc3RyYXRlZ3ksXG4gICAgICogaW5zdGVhZCwgb3ZlcnJpZGUgdGhlIHN0YXRpYyB7QGxpbmsgTW9kZWwuJHBhY2t9IG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gX21hc2sgJ0NSVScgbWFza1xuICAgICAqIEByZXR1cm4ge3N0cmluZ30gcmF3IGRhdGFcbiAgICAgKi9cbiAgICAkd3JhcDogZnVuY3Rpb24oX21hc2spIHtcbiAgICAgIHZhciByYXcgPSB0aGlzLiRlbmNvZGUoX21hc2spO1xuICAgICAgcmF3ID0gdGhpcy4kdHlwZS5wYWNrKHRoaXMsIHJhdyk7XG4gICAgICByZXR1cm4gcmF3O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgRXh0ZW5kZWRBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gUmVzZXRzIHRoZSByZXNvdXJjZSdzICRyZXNvbHZlZCBzdGF0dXMuXG4gICAgICpcbiAgICAgKiBBZnRlciBiZWluZyByZXNldCwgY2FsbHMgdG8gYCRyZXNvbHZlYCB3aWxsIGV4ZWN1dGUgYSBuZXcgJGZldGNoLlxuICAgICAqXG4gICAgICogQWxzbywgaWYgcmVzZXQsIHJlc291cmNlIHdpbGwgYmUgY2xlYXJlZCBvbiBuZXcgZGF0YS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0V4dGVuZGVkQXBpfSBzZWxmXG4gICAgICovXG4gICAgJHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIC8vIGNhbmNlbCBvdXRzaWRlIHByb21pc2UgY2hhaW5cbiAgICAgIC8vIFRPRE86IGZpbmQgYSB3YXkgb2Ygb25seSBpZ25vcmluZyByZXF1ZXN0cyB0aGF0IHdpbGwgbGVhZCB0byByZXNvbHV0aW9uLCBtYXliZSB1c2luZyBhY3Rpb24gbWV0YWRhdGFcbiAgICAgIHJldHVybiB0aGlzLiRjYW5jZWwoKS4kYWN0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLiRyZXNvbHZlZCA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBFeHRlbmRlZEFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBSZXNvbHZlcyB0aGUgcmVzb3VyY2UncyBjb250ZW50cy5cbiAgICAgKlxuICAgICAqIElmIGFscmVhZHkgcmVzb2x2ZWQgdGhlbiB0aGlzIG1ldGhvZCB3aWxsIHJldHVybiBhIHJlc29sdmVkIHByb21pc2UsIGlmIG5vdCB0aGVuXG4gICAgICogaXQgd2lsbCBpbml0aWF0ZSBhIGAkZmV0Y2hgIG9wZXJhdGlvbiBhbmQgcmV0dXJuIHRoZSBvcGVyYXRpb24gcHJvbWlzZS5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgdHJpZ2dlciBhIGBiZWZvcmUtcmVzb2x2ZWAgZXZlbnQgYmVmb3JlIGNoZWNraW5nIHRoZSByZXNvbHZlIHN0YXR1cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge29iamVjdH0gX3BhcmFtcyBgJGZldGNoYCBwYXJhbXNcbiAgICAgKiBAcmV0dXJuIHtwcm9taXNlfSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIHJlc291cmNlLlxuICAgICAqL1xuICAgICRyZXNvbHZlOiBmdW5jdGlvbihfcGFyYW1zKSB7XG4gICAgICByZXR1cm4gdGhpcy4kYWN0aW9uKGZ1bmN0aW9uKCkgeyAvLyBjaGFpbiByZXNvbHV0aW9uIGluIHJlcXVlc3QgcHJvbWlzZSBjaGFpblxuICAgICAgICB0aGlzLiRkaXNwYXRjaCgnYmVmb3JlLXJlc29sdmUnLCBbXSk7XG4gICAgICAgIGlmKCF0aGlzLiRyZXNvbHZlZCkgdGhpcy4kZmV0Y2goX3BhcmFtcyk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIEV4dGVuZGVkQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIFJlc2V0cyBhbmQgZmV0Y2hlcyB0aGUgcmVzb3VyY2UgY29udGVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IF9wYXJhbXMgYCRmZXRjaGAgcGFyYW1zXG4gICAgICogQHJldHVybiB7RXh0ZW5kZWRBcGl9IHNlbGZcbiAgICAgKi9cbiAgICAkcmVmcmVzaDogZnVuY3Rpb24oX3BhcmFtcykge1xuICAgICAgcmV0dXJuIHRoaXMuJHJlc2V0KCkuJGZldGNoKF9wYXJhbXMpO1xuICAgIH1cbiAgfTtcblxufV0pO1xuUk1Nb2R1bGUuZmFjdG9yeSgnUk1MaXN0QXBpJywgW2Z1bmN0aW9uKCkge1xuXG4gIC8qKlxuICAgKiBAY2xhc3MgTGlzdEFwaVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb24gQ29tbW9uIG1ldGhvZHMgZm9yIExpc3RzIGFuZCBDb2xsZWN0aW9ucy5cbiAgICovXG4gIHJldHVybiB7XG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgTGlzdEFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBHZW5lcmF0ZXMgYSBuZXcgbGlzdCBmcm9tIHRoaXMgb25lLlxuICAgICAqXG4gICAgICogSWYgY2FsbGVkIHdpdGhvdXQgYXJndW1lbnRzLCB0aGUgbGlzdCBpcyBwb3B1cGF0ZWQgd2l0aCB0aGUgc2FtZSBjb250ZW50cyBhcyB0aGlzIGxpc3QuXG4gICAgICpcbiAgICAgKiBJZiB0aGVyZSBpcyBhIHBlbmRpbmcgYXN5bmMgb3BlcmF0aW9uIG9uIHRoZSBob3N0IGNvbGxlY3Rpb24vbGlzdCwgdGhlbiB0aGlzIG1ldGhvZCB3aWxsXG4gICAgICogcmV0dXJuIGFuIGVtcHR5IGxpc3QgYW5kIGZpbGwgaXQgd2hlbiB0aGUgYXN5bmMgb3BlcmF0aW9uIGZpbmlzaGVzLiBJZiB5b3UgZG9uJ3QgbmVlZCB0aGUgYXN5bmMgYmVoYXZpb3JcbiAgICAgKiB0aGVuIHVzZSBgJHR5cGUubGlzdGAgZGlyZWN0bHkgdG8gZ2VuZXJhdGUgYSBuZXcgbGlzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IF9maWx0ZXIgQSBmaWx0ZXIgZnVuY3Rpb24gdGhhdCBzaG91bGQgcmV0dXJuIHRoZSBsaXN0IGNvbnRlbnRzIGFzIGFuIGFycmF5LlxuICAgICAqIEByZXR1cm4ge0xpc3RBcGl9IGxpc3RcbiAgICAgKi9cbiAgICAkYXNMaXN0OiBmdW5jdGlvbihfZmlsdGVyKSB7XG4gICAgICB2YXIgbGlzdCA9IHRoaXMuJHR5cGUubGlzdCgpLFxuICAgICAgICAgIHByb21pc2UgPSB0aGlzLiRhc1Byb21pc2UoKTtcblxuICAgICAgLy8gc2V0IHRoZSBsaXN0IGluaXRpYWwgcHJvbWlzZSB0byB0aGUgcmVzb2x1dGlvbiBvZiB0aGUgcGFyZW50IHByb21pc2UuXG4gICAgICBsaXN0LiRwcm9taXNlID0gcHJvbWlzZS50aGVuKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIGxpc3QucHVzaC5hcHBseShsaXN0LCBfZmlsdGVyID8gX2ZpbHRlcihfdGhpcykgOiBfdGhpcyk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfVxuICB9O1xuXG59XSk7XG5STU1vZHVsZS5mYWN0b3J5KCdSTVJlY29yZEFwaScsIFsnUk1VdGlscycsIGZ1bmN0aW9uKFV0aWxzKSB7XG5cbiAgLyoqXG4gICAqIEBjbGFzcyBSZWxhdGlvblNjb3BlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBTcGVjaWFsIHNjb3BlIGEgcmVjb3JkIHByb3ZpZGVzIHRvIHJlc291cmNlcyByZWxhdGVkIHZpYSBoYXNNYW55IG9yIGhhc09uZSByZWxhdGlvbi5cbiAgICovXG4gIHZhciBSZWxhdGlvblNjb3BlID0gZnVuY3Rpb24oX3Njb3BlLCBfdGFyZ2V0LCBfcGFydGlhbCkge1xuICAgIHRoaXMuJHNjb3BlID0gX3Njb3BlO1xuICAgIHRoaXMuJHRhcmdldCA9IF90YXJnZXQ7XG4gICAgdGhpcy4kcGFydGlhbCA9IFV0aWxzLmNsZWFuVXJsKF9wYXJ0aWFsKTtcbiAgfTtcblxuICBSZWxhdGlvblNjb3BlLnByb3RvdHlwZSA9IHtcblxuICAgICRuZXN0ZWRVcmw6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFV0aWxzLmpvaW5VcmwodGhpcy4kc2NvcGUuJHVybCgpLCB0aGlzLiRwYXJ0aWFsKTtcbiAgICB9LFxuXG4gICAgLy8gdXJsIGlzIG5lc3RlZCBmb3IgY29sbGVjdGlvbnMgYW5kIG5lc3RlZCByZWNvcmRzXG4gICAgJHVybEZvcjogZnVuY3Rpb24oX3Jlc291cmNlKSB7XG4gICAgICBpZihfcmVzb3VyY2UuJGlzQ29sbGVjdGlvbiB8fCB0aGlzLiR0YXJnZXQuaXNOZXN0ZWQoKSkge1xuICAgICAgICByZXR1cm4gdGhpcy4kbmVzdGVkVXJsKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy4kdGFyZ2V0LiR1cmxGb3IoX3Jlc291cmNlKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gYSByZWNvcmQncyBmZXRjaCB1cmwgaXMgYWx3YXlzIG5lc3RlZFxuICAgICRmZXRjaFVybEZvcjogZnVuY3Rpb24oLyogX3Jlc291cmNlICovKSB7XG4gICAgICByZXR1cm4gdGhpcy4kbmVzdGVkVXJsKCk7XG4gICAgfSxcblxuICAgIC8vIGNyZWF0ZSBpcyBub3QgcG9zaWJsZSBpbiBuZXN0ZWQgbWVtYmVyc1xuICAgICRjcmVhdGVVcmxGb3I6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3MgUmVjb3JkQXBpXG4gICAqIEBleHRlbmRzIENvbW1vbkFwaVxuICAgKlxuICAgKiBAcHJvcGVydHkge29iamVjdH0gJHNjb3BlIFRoZSByZWNvcmQncyBzY29wZSAoc2VlIHtAbGluayBTY29wZUFwaX0pXG4gICAqIEBwcm9wZXJ0eSB7bWl4ZWR9ICRwayBUaGUgcmVjb3JkJ3MgcHJpbWFyeSBrZXlcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFByb3ZpZGVzIHJlY29yZCBzeW5jaHJvbml6YXRpb24gYW5kIG1hbmlwdWxhdGlvbiBtZXRob2RzLiBUaGlzIGlzIHRoZSBiYXNlIEFQSSBmb3IgZXZlcnkgcmVzdG1vZCByZWNvcmQuXG4gICAqXG4gICAqIFRPRE86IFRhbGsgYWJvdXQgdGhlIG9iamVjdCBsaWZlY3ljbGUuXG4gICAqXG4gICAqICMjIyBPYmplY3QgbGlmZWN5Y2xlIGhvb2tzXG4gICAqXG4gICAqIEZvciBgJGZldGNoYDpcbiAgICpcbiAgICogKiBiZWZvcmUtZmV0Y2hcbiAgICogKiBiZWZvcmUtcmVxdWVzdFxuICAgKiAqIGFmdGVyLXJlcXVlc3RbLWVycm9yXVxuICAgKiAqIGFmdGVyLWZlZWQgKG9ubHkgY2FsbGVkIGlmIG5vIGVycm9ycylcbiAgICogKiBhZnRlci1mZXRjaFstZXJyb3JdXG4gICAqXG4gICAqIEZvciBgJHNhdmVgIHdoZW4gY3JlYXRpbmc6XG4gICAqXG4gICAqICogYmVmb3JlLXJlbmRlclxuICAgKiAqIGJlZm9yZS1zYXZlXG4gICAqICogYmVmb3JlLWNyZWF0ZVxuICAgKiAqIGJlZm9yZS1yZXF1ZXN0XG4gICAqICogYWZ0ZXItcmVxdWVzdFstZXJyb3JdXG4gICAqICogYWZ0ZXItZmVlZCAob25seSBjYWxsZWQgaWYgbm8gZXJyb3JzKVxuICAgKiAqIGFmdGVyLWNyZWF0ZVstZXJyb3JdXG4gICAqICogYWZ0ZXItc2F2ZVstZXJyb3JdXG4gICAqXG4gICAqIEZvciBgJHNhdmVgIHdoZW4gdXBkYXRpbmc6XG4gICAqXG4gICAqICogYmVmb3JlLXJlbmRlclxuICAgKiAqIGJlZm9yZS1zYXZlXG4gICAqICogYmVmb3JlLXVwZGF0ZVxuICAgKiAqIGJlZm9yZS1yZXF1ZXN0XG4gICAqICogYWZ0ZXItcmVxdWVzdFstZXJyb3JdXG4gICAqICogYWZ0ZXItZmVlZCAob25seSBjYWxsZWQgaWYgbm8gZXJyb3JzKVxuICAgKiAqIGFmdGVyLXVwZGF0ZVstZXJyb3JdXG4gICAqICogYWZ0ZXItc2F2ZVstZXJyb3JdXG4gICAqXG4gICAqIEZvciBgJGRlc3Ryb3lgOlxuICAgKlxuICAgKiAqIGJlZm9yZS1kZXN0cm95XG4gICAqICogYmVmb3JlLXJlcXVlc3RcbiAgICogKiBhZnRlci1yZXF1ZXN0Wy1lcnJvcl1cbiAgICogKiBhZnRlci1kZXN0cm95Wy1lcnJvcl1cbiAgICpcbiAgICogQHByb3BlcnR5IHttaXhlZH0gJHBrIFRoZSByZWNvcmQgcHJpbWFyeSBrZXlcbiAgICogQHByb3BlcnR5IHtvYmplY3R9ICRzY29wZSBUaGUgY29sbGVjdGlvbiBzY29wZSAoaGllcmFyY2hpY2FsIHNjb3BlLCBub3QgYW5ndWxhciBzY29wZSlcbiAgICovXG5cdHJldHVybiB7XG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgUmVjb3JkQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIENhbGxlZCBieSByZWNvcmQgY29uc3RydWN0b3Igb24gaW5pdGlhbGl6YXRpb24uXG4gICAgICpcbiAgICAgKiBOb3RlOiBJcyBiZXR0ZXIgdG8gYWRkIGEgaG9vayB0byBhZnRlci1pbml0IHRoYW4gb3ZlcnJpZGluZyB0aGlzIG1ldGhvZC5cbiAgICAgKi9cbiAgICAkaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAvLyBhcHBseSBkZWZhdWx0c1xuICAgICAgdGhpcy4kc3VwZXIoKTtcblxuICAgICAgLy8gYWZ0ZXIgaW5pdGlhbGl6YXRpb24gaG9va1xuICAgICAgLy8gVE9ETzogcHV0IHRoaXMgb24gJG5ldyBzbyBpdCBjYW4gdXNlIHN0YWNrZWQgRFNQP1xuICAgICAgdGhpcy4kZGlzcGF0Y2goJ2FmdGVyLWluaXQnKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFJlY29yZEFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBDYWxsZWQgdGhlIHJlc291cmNlJ3Mgc2NvcGUgJHVybEZvciBtZXRob2QgdG8gYnVpbGQgdGhlIHVybCBmb3IgdGhlIHJlY29yZCB1c2luZyB0aGUgcHJvcGVyIHNjb3BlLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCB0aGUgcmVzb3VyY2UgcGFydGlhbCB1cmwgaXMganVzdCBpdHMgYCRwa2AgcHJvcGVydHkuIFRoaXMgY2FuIGJlIG92ZXJyaWRlbiB0byBwcm92aWRlIG90aGVyIHJvdXRpbmcgYXBwcm9hY2hlcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHJlc291cmNlIHBhcnRpYWwgdXJsXG4gICAgICovXG4gICAgJGJ1aWxkVXJsOiBmdW5jdGlvbihfc2NvcGUpIHtcbiAgICAgIHJldHVybiAodGhpcy4kcGsgPT09IHVuZGVmaW5lZCB8fCB0aGlzLiRwayA9PT0gbnVsbCkgPyBudWxsIDogVXRpbHMuam9pblVybChfc2NvcGUuJHVybCgpLCB0aGlzLiRwayArICcnKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFJlY29yZEFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBEZWZhdWx0IGl0ZW0gY2hpbGQgc2NvcGUgZmFjdG9yeS5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIG5vIGNyZWF0ZSB1cmwgaXMgcHJvdmlkZWQgYW5kIHRoZSB1cGRhdGUvZGVzdHJveSB1cmwgcHJvdmlkZXJzXG4gICAgICogYXR0ZW1wdCB0byBmaXJzdCB1c2UgdGhlIHVuc2NvcGVkIHJlc291cmNlIHVybC5cbiAgICAgKlxuICAgICAqIC8vIFRPRE86IGNyZWF0ZSBzcGVjaWFsIGFwaSB0byBob2xkIHNjb3BlIChzbyBpdCBpcyBub3QgbmVjZXNzYXJ5IHRvIHJlY3JlYXRlIHRoZSB3aG9sZSBvYmplY3QgZXZlcnkgdGltZS4pXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge21peGVkfSBfZm9yIFNjb3BlIHRhcmdldCB0eXBlLCBhY2NlcHRzIGFueSBtb2RlbCBjbGFzcy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX3BhcnRpYWwgUGFydGlhbCByb3V0ZS5cbiAgICAgKiBAcmV0dXJuIHtSZWxhdGlvblNjb3BlfSBOZXcgc2NvcGUuXG4gICAgICovXG4gICAgJGJ1aWxkU2NvcGU6IGZ1bmN0aW9uKF9mb3IsIF9wYXJ0aWFsKSB7XG4gICAgICBpZihfZm9yLiRidWlsZE93blNjb3BlKSB7XG4gICAgICAgIC8vIFRPRE9cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVsYXRpb25TY29wZSh0aGlzLCBfZm9yLCBfcGFydGlhbCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBSZWNvcmRBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gSXRlcmF0ZXMgb3ZlciB0aGUgb2JqZWN0IG5vbi1wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IF9mdW4gRnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaFxuICAgICAqIEByZXR1cm4ge1JlY29yZEFwaX0gc2VsZlxuICAgICAqL1xuICAgICRlYWNoOiBmdW5jdGlvbihfZnVuLCBfY3R4KSB7XG4gICAgICBmb3IodmFyIGtleSBpbiB0aGlzKSB7XG4gICAgICAgIGlmKHRoaXMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBrZXlbMF0gIT09ICckJykge1xuICAgICAgICAgIF9mdW4uY2FsbChfY3R4IHx8IHRoaXNba2V5XSwgdGhpc1trZXldLCBrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgUmVjb3JkQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIEZlZWQgcmF3IGRhdGEgdG8gdGhpcyBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBfcmF3IFJhdyBkYXRhIHRvIGJlIGZlZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfbWFzayAnQ1JVJyBtYXNrXG4gICAgICogQHJldHVybiB7UmVjb3JkQXBpfSB0aGlzXG4gICAgICovXG4gICAgJGRlY29kZTogZnVuY3Rpb24oX3JhdywgX21hc2spIHtcbiAgICAgIC8vIElERUE6IGxldCB1c2VyIG92ZXJyaWRlIHNlcmlhbGl6ZXJcbiAgICAgIHRoaXMuJHR5cGUuZGVjb2RlKHRoaXMsIF9yYXcsIF9tYXNrIHx8IFV0aWxzLlJFQURfTUFTSyk7XG4gICAgICBpZih0aGlzLiRwayA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuJHBrID09PSBudWxsKSB0aGlzLiRwayA9IHRoaXMuJHR5cGUuaW5mZXJLZXkoX3Jhdyk7IC8vIFRPRE86IHdhcm4gaWYga2V5IGNoYW5nZXNcbiAgICAgIHRoaXMuJGRpc3BhdGNoKCdhZnRlci1mZWVkJywgW19yYXddKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgUmVjb3JkQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIEdlbmVyYXRlIGRhdGEgdG8gYmUgc2VudCB0byB0aGUgc2VydmVyIHdoZW4gY3JlYXRpbmcvdXBkYXRpbmcgdGhlIHJlc291cmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IF9tYXNrICdDUlUnIG1hc2tcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IHJhdyBkYXRhXG4gICAgICovXG4gICAgJGVuY29kZTogZnVuY3Rpb24oX21hc2spIHtcbiAgICAgIHZhciByYXcgPSB0aGlzLiR0eXBlLmVuY29kZSh0aGlzLCBfbWFzayB8fCBVdGlscy5DUkVBVEVfTUFTSyk7XG4gICAgICB0aGlzLiRkaXNwYXRjaCgnYmVmb3JlLXJlbmRlcicsIFtyYXddKTtcbiAgICAgIHJldHVybiByYXc7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBSZWNvcmRBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gQmVnaW4gYSBzZXJ2ZXIgcmVxdWVzdCBmb3IgdXBkYXRlZCByZXNvdXJjZSBkYXRhLlxuICAgICAqXG4gICAgICogVGhlIHJlcXVlc3QncyBwcm9taXNlIGNhbiBiZSBhY2Nlc3NlZCB1c2luZyB0aGUgYCRhc1Byb21pc2VgIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBfcGFyYW1zIE9wdGlvbmFsIGxpc3Qgb2YgcGFyYW1zIHRvIGJlIHBhc3NlZCB0byBvYmplY3QgcmVxdWVzdC5cbiAgICAgKiBAcmV0dXJuIHtSZWNvcmRBcGl9IHRoaXNcbiAgICAgKi9cbiAgICAkZmV0Y2g6IGZ1bmN0aW9uKF9wYXJhbXMpIHtcbiAgICAgIHJldHVybiB0aGlzLiRhY3Rpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB1cmwgPSB0aGlzLiR1cmwoJ2ZldGNoJyk7XG4gICAgICAgIFV0aWxzLmFzc2VydCghIXVybCwgJ0NhbnQgJGZldGNoIGlmIHJlc291cmNlIGlzIG5vdCBib3VuZCcpO1xuXG4gICAgICAgIHZhciByZXF1ZXN0ID0geyBtZXRob2Q6ICdHRVQnLCB1cmw6IHVybCwgcGFyYW1zOiBfcGFyYW1zIH07XG5cbiAgICAgICAgdGhpcy4kZGlzcGF0Y2goJ2JlZm9yZS1mZXRjaCcsIFtyZXF1ZXN0XSk7XG4gICAgICAgIHRoaXMuJHNlbmQocmVxdWVzdCwgZnVuY3Rpb24oX3Jlc3BvbnNlKSB7XG4gICAgICAgICAgdGhpcy4kdW53cmFwKF9yZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICB0aGlzLiRkaXNwYXRjaCgnYWZ0ZXItZmV0Y2gnLCBbX3Jlc3BvbnNlXSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKF9yZXNwb25zZSkge1xuICAgICAgICAgIHRoaXMuJGRpc3BhdGNoKCdhZnRlci1mZXRjaC1lcnJvcicsIFtfcmVzcG9uc2VdKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFJlY29yZEFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBDb3B5aWVzIGFub3RoZXIgb2JqZWN0J3Mgbm9uLXByaXZhdGUgcHJvcGVydGllcy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIHJ1bnMgaW5zaWRlIHRoZSBwcm9taXNlIGNoYWluLCBzbyBjYWxsaW5nXG4gICAgICpcbiAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICogQmlrZS4kZmluZCgxKS4kZXh0ZW5kKHsgc2l6ZTogXCJMXCIgfSkuJHNhdmUoKTtcbiAgICAgKiBgYGBcbiAgICAgKiBXaWxsIGZpcnN0IGZldGNoIHRoZSBiaWtlIGRhdGEgYW5kIGFmdGVyIGl0IGlzIGxvYWRlZCB0aGUgbmV3IHNpemUgd2lsbCBiZSBhcHBsaWVkIGFuZCB0aGVuIHRoZVxuICAgICAqIHVwZGF0ZWQgbW9kZWwgc2F2ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gX290aGVyIE9iamVjdCB0byBtZXJnZS5cbiAgICAgKiBAcmV0dXJuIHtSZWNvcmRBcGl9IHNlbGZcbiAgICAgKi9cbiAgICAkZXh0ZW5kOiBmdW5jdGlvbihfb3RoZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLiRhY3Rpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvcih2YXIgdG1wIGluIF9vdGhlcikge1xuICAgICAgICAgIGlmIChfb3RoZXIuaGFzT3duUHJvcGVydHkodG1wKSAmJiB0bXBbMF0gIT09ICckJykge1xuICAgICAgICAgICAgdGhpc1t0bXBdID0gX290aGVyW3RtcF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFJlY29yZEFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBTaG9ydGN1dCBtZXRob2QgdXNlZCB0byBleHRlbmQgYW5kIHNhdmUgYSBtb2RlbC5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgbm90IGZvcmNlIGEgUFVULCBpZiBvYmplY3QgaXMgbmV3IGAkdXBkYXRlYCB3aWxsIGF0dGVtcHQgdG8gUE9TVC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBfb3RoZXIgRGF0YSB0byBjaGFuZ2VcbiAgICAgKiBAcmV0dXJuIHtSZWNvcmRBcGl9IHNlbGZcbiAgICAgKi9cbiAgICAkdXBkYXRlOiBmdW5jdGlvbihfb3RoZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLiRleHRlbmQoX290aGVyKS4kc2F2ZSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgUmVjb3JkQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIEJlZ2luIGEgc2VydmVyIHJlcXVlc3QgdG8gY3JlYXRlL3VwZGF0ZS9wYXRjaCByZXNvdXJjZS5cbiAgICAgKlxuICAgICAqIEEgcGF0Y2ggaXMgb25seSBleGVjdXRlZCBpZiBtb2RlbCBpcyBpZGVudGlmaWVkIGFuZCBhIHBhdGNoIHByb3BlcnR5IGxpc3QgaXMgZ2l2ZW4uIEl0IGlzIHBvc2libGUgdG9cbiAgICAgKiBjaGFuZ2UgdGhlIG1ldGhvZCB1c2VkIGZvciBQQVRDSCBvcGVyYXRpb25zIGJ5IHNldHRpbmcgdGhlIGBwYXRjaE1ldGhvZGAgY29uZmlndXJhdGlvbi5cbiAgICAgKlxuICAgICAqIElmIHJlc291cmNlIGlzIG5ldyBhbmQgaXQgYmVsb25ncyB0byBhIGNvbGxlY3Rpb24gYW5kIGl0IGhhc250IGJlZW4gcmV2ZWFsZWQsIHRoZW4gaXQgd2lsbCBiZSByZXZlYWxlZC5cbiAgICAgKlxuICAgICAqIFRoZSByZXF1ZXN0J3MgcHJvbWlzZSBjYW4gYmUgYWNjZXNzZWQgdXNpbmcgdGhlIGAkYXNQcm9taXNlYCBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2FycmF5fSBfcGF0Y2ggT3B0aW9uYWwgbGlzdCBvZiBwcm9wZXJ0aWVzIHRvIHNlbmQgaW4gdXBkYXRlIG9wZXJhdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtSZWNvcmRBcGl9IHRoaXNcbiAgICAgKi9cbiAgICAkc2F2ZTogZnVuY3Rpb24oX3BhdGNoKSB7XG4gICAgICByZXR1cm4gdGhpcy4kYWN0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdXJsID0gdGhpcy4kdXJsKCd1cGRhdGUnKSwgcmVxdWVzdDtcblxuICAgICAgICBpZih1cmwpIHtcblxuICAgICAgICAgIC8vIElmIGJvdW5kLCB1cGRhdGVcbiAgICAgICAgICBpZihfcGF0Y2gpIHtcbiAgICAgICAgICAgIHJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgIG1ldGhvZDogdGhpcy4kdHlwZS5nZXRQcm9wZXJ0eSgncGF0Y2hNZXRob2QnLCAnUEFUQ0gnKSwgLy8gYWxsb3cgdXNlciB0byBvdmVycmlkZSBwYXRjaCBtZXRob2RcbiAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgIC8vIFVzZSBzcGVjaWFsIG1hc2sgZm9yIHBhdGNoZXMsIG1hc2sgZXZlcnl0aGluZyB0aGF0IGlzIG5vdCBpbiB0aGUgcGF0Y2ggbGlzdC5cbiAgICAgICAgICAgICAgZGF0YTogdGhpcy4kd3JhcChmdW5jdGlvbihfbmFtZSkge1xuICAgICAgICAgICAgICAgIF9uYW1lID0gX25hbWUucmVwbGFjZSgnW10nLCAnJyk7XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9IF9wYXRjaC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgIGlmKF9uYW1lID09PSBfcGF0Y2hbaV0gfHxcbiAgICAgICAgICAgICAgICAgICAgX25hbWUuaW5kZXhPZihfcGF0Y2hbaV0gKyAnLicpID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgIF9wYXRjaFtpXS5pbmRleE9mKF9uYW1lICsgJy4nKSA9PT0gMFxuICAgICAgICAgICAgICAgICAgKSB7IHJldHVybiBmYWxzZTsgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVxdWVzdCA9IHsgbWV0aG9kOiAnUFVUJywgdXJsOiB1cmwsIGRhdGE6IHRoaXMuJHdyYXAoVXRpbHMuVVBEQVRFX01BU0spIH07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpc1xuICAgICAgICAgICAgLiRkaXNwYXRjaCgnYmVmb3JlLXVwZGF0ZScsIFtyZXF1ZXN0LCAhIV9wYXRjaF0pXG4gICAgICAgICAgICAuJGRpc3BhdGNoKCdiZWZvcmUtc2F2ZScsIFtyZXF1ZXN0XSlcbiAgICAgICAgICAgIC4kc2VuZChyZXF1ZXN0LCBmdW5jdGlvbihfcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgICAgIC4kdW53cmFwKF9yZXNwb25zZS5kYXRhKVxuICAgICAgICAgICAgICAgIC4kZGlzcGF0Y2goJ2FmdGVyLXVwZGF0ZScsIFtfcmVzcG9uc2UsICEhX3BhdGNoXSlcbiAgICAgICAgICAgICAgICAuJGRpc3BhdGNoKCdhZnRlci1zYXZlJywgW19yZXNwb25zZV0pO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oX3Jlc3BvbnNlKSB7XG4gICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICAgICAuJGRpc3BhdGNoKCdhZnRlci11cGRhdGUtZXJyb3InLCBbX3Jlc3BvbnNlLCAhIV9wYXRjaF0pXG4gICAgICAgICAgICAgICAgLiRkaXNwYXRjaCgnYWZ0ZXItc2F2ZS1lcnJvcicsIFtfcmVzcG9uc2VdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIElmIG5vdCBib3VuZCBjcmVhdGUuXG4gICAgICAgICAgdXJsID0gdGhpcy4kdXJsKCdjcmVhdGUnKSB8fCB0aGlzLiRzY29wZS4kdXJsKCk7XG4gICAgICAgICAgVXRpbHMuYXNzZXJ0KCEhdXJsLCAnQ2FudCAkY3JlYXRlIGlmIHBhcmVudCBzY29wZSBpcyBub3QgYm91bmQnKTtcblxuICAgICAgICAgIHJlcXVlc3QgPSB7IG1ldGhvZDogJ1BPU1QnLCB1cmw6IHVybCwgZGF0YTogdGhpcy4kd3JhcChVdGlscy5DUkVBVEVfTUFTSykgfTtcbiAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAuJGRpc3BhdGNoKCdiZWZvcmUtc2F2ZScsIFtyZXF1ZXN0XSlcbiAgICAgICAgICAgIC4kZGlzcGF0Y2goJ2JlZm9yZS1jcmVhdGUnLCBbcmVxdWVzdF0pXG4gICAgICAgICAgICAuJHNlbmQocmVxdWVzdCwgZnVuY3Rpb24oX3Jlc3BvbnNlKSB7XG4gICAgICAgICAgICAgIHRoaXMuJHVud3JhcChfcmVzcG9uc2UuZGF0YSk7XG5cbiAgICAgICAgICAgICAgLy8gcmV2ZWFsIGl0ZW0gKGlmIG5vdCB5ZXQgcG9zaXRpb25lZClcbiAgICAgICAgICAgICAgaWYodGhpcy4kc2NvcGUuJGlzQ29sbGVjdGlvbiAmJiB0aGlzLiRwb3NpdGlvbiA9PT0gdW5kZWZpbmVkICYmICF0aGlzLiRwcmV2ZW50UmV2ZWFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuJGFkZCh0aGlzLCB0aGlzLiRyZXZlYWxBdCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgLiRkaXNwYXRjaCgnYWZ0ZXItY3JlYXRlJywgW19yZXNwb25zZV0pXG4gICAgICAgICAgICAgICAgLiRkaXNwYXRjaCgnYWZ0ZXItc2F2ZScsIFtfcmVzcG9uc2VdKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKF9yZXNwb25zZSkge1xuICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgLiRkaXNwYXRjaCgnYWZ0ZXItY3JlYXRlLWVycm9yJywgW19yZXNwb25zZV0pXG4gICAgICAgICAgICAgICAgLiRkaXNwYXRjaCgnYWZ0ZXItc2F2ZS1lcnJvcicsIFtfcmVzcG9uc2VdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFJlY29yZEFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBCZWdpbiBhIHNlcnZlciByZXF1ZXN0IHRvIGRlc3Ryb3kgdGhlIHJlc291cmNlLlxuICAgICAqXG4gICAgICogVGhlIHJlcXVlc3QncyBwcm9taXNlIGNhbiBiZSBhY2Nlc3NlZCB1c2luZyB0aGUgYCRhc1Byb21pc2VgIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1JlY29yZEFwaX0gdGhpc1xuICAgICAqL1xuICAgICRkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLiRhY3Rpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB1cmwgPSB0aGlzLiR1cmwoJ2Rlc3Ryb3knKTtcbiAgICAgICAgaWYodXJsKVxuICAgICAgICB7XG4gICAgICAgICAgdmFyIHJlcXVlc3QgPSB7IG1ldGhvZDogJ0RFTEVURScsIHVybDogdXJsIH07XG5cbiAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAuJGRpc3BhdGNoKCdiZWZvcmUtZGVzdHJveScsIFtyZXF1ZXN0XSlcbiAgICAgICAgICAgIC4kc2VuZChyZXF1ZXN0LCBmdW5jdGlvbihfcmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgICAvLyByZW1vdmUgZnJvbSBzY29wZVxuICAgICAgICAgICAgICBpZih0aGlzLiRzY29wZS4kcmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kc2NvcGUuJHJlbW92ZSh0aGlzKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHRoaXMuJGRpc3BhdGNoKCdhZnRlci1kZXN0cm95JywgW19yZXNwb25zZV0pO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oX3Jlc3BvbnNlKSB7XG4gICAgICAgICAgICAgIHRoaXMuJGRpc3BhdGNoKCdhZnRlci1kZXN0cm95LWVycm9yJywgW19yZXNwb25zZV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgLy8gSWYgbm90IHlldCBib3VuZCwganVzdCByZW1vdmUgZnJvbSBwYXJlbnRcbiAgICAgICAgICBpZih0aGlzLiRzY29wZS4kcmVtb3ZlKSB0aGlzLiRzY29wZS4kcmVtb3ZlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gQ29sbGVjdGlvbiByZWxhdGVkIG1ldGhvZHMuXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgUmVjb3JkQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIENoYW5nZXMgdGhlIGxvY2F0aW9uIG9mIHRoZSBvYmplY3QgaW4gdGhlIGJvdW5kIGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBJZiBvYmplY3QgaGFzbid0IGJlZW4gcmV2ZWFsZWQsIHRoZW4gdGhpcyBtZXRob2Qgd2lsbCBjaGFuZ2UgdGhlIGluZGV4IHdoZXJlIG9iamVjdCB3aWxsIGJlIHJldmVhbGVkIGF0LlxuICAgICAqXG4gICAgICogQHBhcmFtICB7aW50ZWdlcn0gX3RvIE5ldyBvYmplY3QgcG9zaXRpb24gKGluZGV4KVxuICAgICAqIEByZXR1cm4ge1JlY29yZEFwaX0gdGhpc1xuICAgICAqL1xuICAgICRtb3ZlVG86IGZ1bmN0aW9uKF90bykge1xuICAgICAgaWYodGhpcy4kcG9zaXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBUT0RPOiBtb3ZlIGl0ZW0gdG8gZ2l2ZW4gaW5kZXguXG4gICAgICAgIC8vIFRPRE86IGNhbGxiYWNrXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLiRyZXZlYWxBdCA9IF90bztcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgUmVjb3JkQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIFJldmVhbCBpbiBjb2xsZWN0aW9uXG4gICAgICpcbiAgICAgKiBJZiBpbnN0YW5jZSBpcyBib3VuZCB0byBhIGNvbGxlY3Rpb24gYW5kIGl0IGhhc250IGJlZW4gcmV2ZWFsZWQgKGJlY2F1c2UgaXQncyBuZXcgYW5kIGhhc24ndCBiZWVuIHNhdmVkKSxcbiAgICAgKiB0aGVuIGNhbGxpbmcgdGhpcyBtZXRob2Qgd2l0aG91dCBwYXJhbWV0ZXJzIHdpbGwgZm9yY2UgdGhlIG9iamVjdCB0byBiZSBhZGRlZCB0byB0aGUgY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIElmIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aXRoICoqX3Nob3cqKiBzZXQgdG8gYGZhbHNlYCwgdGhlbiB0aGUgb2JqZWN0IHdvbnQgYmUgcmV2ZWFsZWQgYnkgYSBzYXZlIG9wZXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge2Jvb2xlYW59IF9zaG93IFdoZXRoZXIgdG8gcmV2ZWFsIGlubWVkaWF0ZWxseSBvciBwcmV2ZW50IGF1dG9tYXRpYyByZXZlYWwuXG4gICAgICogQHJldHVybiB7UmVjb3JkQXBpfSB0aGlzXG4gICAgICovXG4gICAgJHJldmVhbDogZnVuY3Rpb24oX3Nob3cpIHtcbiAgICAgIGlmKF9zaG93ID09PSB1bmRlZmluZWQgfHwgX3Nob3cpIHtcbiAgICAgICAgdGhpcy4kc2NvcGUuJGFkZCh0aGlzLCB0aGlzLiRyZXZlYWxBdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLiRwcmV2ZW50UmV2ZWFsID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcblxufV0pO1xuUk1Nb2R1bGUuZmFjdG9yeSgnUk1TY29wZUFwaScsIFsnUk1VdGlscycsIGZ1bmN0aW9uKFV0aWxzKSB7XG5cbiAgLyoqXG4gICAqIEBjbGFzcyBTY29wZUFwaVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb24gQ29tbW9uIGJlaGF2aW91ciBmb3IgcmVjb3JkIHNjb3Blcy5cbiAgICpcbiAgICogUmVjb3JkIHNjb3BlcyBhcmUgc3RhcnRpbmcgcG9pbnRzIGZvciByZWNvcmQgb3BlcmF0aW9ucyAobGlrZSBiYXNlIHR5cGUgb3IgYSBjb2xsZWN0aW9uKVxuICAgKlxuICAgKiBUT0RPOiBUYWxrIGFib3V0IHJlY29yZCBidWlsZGluZyBoZXJlXG4gICAqL1xuICByZXR1cm4ge1xuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFNjb3BlQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIHByb3ZpZGVzIHVybHMgZm9yIHNjb3BlJ3MgcmVzb3VyY2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHttaXhlZH0gX3Jlc291cmNlIFRoZSB0YXJnZXQgcmVzb3VyY2UuXG4gICAgICogQHJldHVybiB7c3RyaW5nfG51bGx9IFRoZSB1cmwgb3IgbmlsbCBpZiByZXNvdXJjZSBkb2VzIG5vdCBtZWV0IHRoZSB1cmwgcmVxdWlyZW1lbnRzLlxuICAgICAqL1xuICAgICR1cmxGb3I6IGZ1bmN0aW9uKF9yZXNvdXJjZSkge1xuICAgICAgLy8gZm9yY2UgaXRlbSB1bnNjb3BpbmcgaWYgbW9kZWwgaXMgbm90IG5lc3RlZCAobWF5YmUgbWFrZSB0aGlzIG9wdGlvbmFsKVxuICAgICAgdmFyIHNjb3BlID0gdGhpcy4kdHlwZS5pc05lc3RlZCgpID8gdGhpcyA6IHRoaXMuJHR5cGU7XG4gICAgICByZXR1cm4gdHlwZW9mIF9yZXNvdXJjZS4kYnVpbGRVcmwgPT09ICdmdW5jdGlvbicgPyBfcmVzb3VyY2UuJGJ1aWxkVXJsKHNjb3BlKSA6IHNjb3BlLiR1cmwoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFNjb3BlQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIEJ1aWxkcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGlzIG1vZGVsLCBib3VuZCB0byB0aGlzIGluc3RhbmNlIHNjb3BlLCBzZXRzIGl0cyBwcmltYXJ5IGtleS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bWl4ZWR9IF9wayBvYmplY3QgcHJpdmF0ZSBrZXlcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gX3Njb3BlIHNjb3BlIG92ZXJyaWRlIChvcHRpb25hbClcbiAgICAgKiBAcmV0dXJuIHtSZWNvcmRBcGl9IE5ldyBtb2RlbCBpbnN0YW5jZVxuICAgICAqL1xuICAgICRuZXc6IGZ1bmN0aW9uKF9waywgX3Njb3BlKSB7XG4gICAgICByZXR1cm4gdGhpcy4kc3VwZXIoX3BrLCBfc2NvcGUpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgU2NvcGVBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gQnVpbGRzIGEgbmV3IGluc3RhbmNlIG9mIHRoaXMgbW9kZWwsIGRvZXMgbm90IGFzc2lnbiBhIHBrIHRvIHRoZSBjcmVhdGVkIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEFUVEVOVElPTjogaXRlbSB3aWxsIG5vdCBzaG93IGluIGNvbGxlY3Rpb24gdW50aWwgYCRzYXZlYCBpcyBjYWxsZWQuIFRvIHJldmVhbCBpdGVtIGJlZm9yZSB0aGFuIGNhbGwgYCRyZXZlYWxgLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBfaW5pdCBJbml0aWFsIHZhbHVlc1xuICAgICAqIEByZXR1cm4ge1JlY29yZEFwaX0gc2luZ2xlIHJlY29yZFxuICAgICAqL1xuICAgICRidWlsZDogZnVuY3Rpb24oX2luaXQpIHtcbiAgICAgIHJldHVybiB0aGlzLiRuZXcoKS4kZXh0ZW5kKF9pbml0KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFNjb3BlQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIEJ1aWxkcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGlzIG1vZGVsIHVzaW5nIHVuZGVjb2RlZCBkYXRhLlxuICAgICAqXG4gICAgICogQVRURU5USU9OOiBkb2VzIG5vdCBhdXRvbWF0aWNhbGx5IHJldmVhbCBpdGVtIGluIGNvbGxlY3Rpb24sIGNoYWluIGEgY2FsbCB0byAkcmV2ZWFsIHRvIGRvIHNvLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBfcmF3IFVuZGVjb2RlZCBkYXRhXG4gICAgICogQHJldHVybiB7UmVjb3JkQXBpfSBzaW5nbGUgcmVjb3JkXG4gICAgICovXG4gICAgJGJ1aWxkUmF3OiBmdW5jdGlvbihfcmF3LCBfbWFzaykge1xuICAgICAgdmFyIG9iaiA9IHRoaXMuJG5ldyh0aGlzLiR0eXBlLmluZmVyS2V5KF9yYXcpKTtcbiAgICAgIG9iai4kZGVjb2RlKF9yYXcsIF9tYXNrKTtcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBTY29wZUFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBBdHRlbXB0cyB0byByZXNvbHZlIGEgcmVzb3VyY2UgdXNpbmcgcHJvdmlkZWQgcHJpdmF0ZSBrZXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge21peGVkfSBfcGsgUHJpdmF0ZSBrZXlcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gX3BhcmFtcyBBZGRpdGlvbmFsIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICAgKiBAcmV0dXJuIHtSZWNvcmRBcGl9IHNpbmdsZSByZWNvcmRcbiAgICAgKi9cbiAgICAkZmluZDogZnVuY3Rpb24oX3BrLCBfcGFyYW1zKSB7XG4gICAgICByZXR1cm4gdGhpcy4kbmV3KF9waykuJHJlc29sdmUoX3BhcmFtcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBTY29wZUFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBCdWlsZHMgYW5kIHNhdmVzIGEgbmV3IGluc3RhbmNlIG9mIHRoaXMgbW9kZWxcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge29iamVjdH0gX2F0dHIgRGF0YSB0byBiZSBzYXZlZFxuICAgICAqIEByZXR1cm4ge1JlY29yZEFwaX0gc2luZ2xlIHJlY29yZFxuICAgICAqL1xuICAgICRjcmVhdGU6IGZ1bmN0aW9uKF9hdHRyKSB7XG4gICAgICByZXR1cm4gdGhpcy4kYnVpbGQoX2F0dHIpLiRzYXZlKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBTY29wZUFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBCdWlsZHMgYSBuZXcgY29sbGVjdGlvbiBib3VuZCB0byB0aGlzIHNjb3BlLlxuICAgICAqXG4gICAgICogSWYgc2NvcGUgaXMgYW5vdGhlciBjb2xsZWN0aW9uIHRoZW4gaXQgd2lsbCBpbmhlcml0IGl0cyBwYXJhbWV0ZXJzXG4gICAgICpcbiAgICAgKiBDb2xsZWN0aW9ucyBhcmUgYm91bmQgdG8gYW4gYXBpIHJlc291cmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBfcGFyYW1zICBBZGRpdGlvbmFsIHF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBfc2NvcGUgIFNjb3BlIG92ZXJyaWRlIChvcHRpb25hbClcbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uQXBpfSBNb2RlbCBDb2xsZWN0aW9uXG4gICAgICovXG4gICAgJGNvbGxlY3Rpb246IGZ1bmN0aW9uKF9wYXJhbXMsIF9zY29wZSkge1xuICAgICAgcmV0dXJuIHRoaXMuJHN1cGVyKF9wYXJhbXMsIF9zY29wZSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBTY29wZUFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBHZW5lcmF0ZXMgYSBuZXcgY29sbGVjdGlvbiBib3VuZCB0byB0aGlzIGNvbnRleHQgYW5kIHVybCBhbmQgY2FsbHMgJGZldGNoIG9uIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IF9wYXJhbXMgQ29sbGVjdGlvbiBwYXJhbWV0ZXJzXG4gICAgICogQHJldHVybiB7Q29sbGVjdGlvbkFwaX0gcmVjb3JkIGNvbGxlY3Rpb25cbiAgICAgKi9cbiAgICAkc2VhcmNoOiBmdW5jdGlvbihfcGFyYW1zKSB7XG4gICAgICByZXR1cm4gdGhpcy4kY29sbGVjdGlvbihfcGFyYW1zKS4kZmV0Y2goKTtcbiAgICB9XG4gIH07XG5cbn1dKTtcblJNTW9kdWxlLmZhY3RvcnkoJ1JNQnVpbGRlcicsIFsnJGluamVjdG9yJywgJ2luZmxlY3RvcicsICckbG9nJywgJ1JNVXRpbHMnLCBmdW5jdGlvbigkaW5qZWN0b3IsIGluZmxlY3RvciwgJGxvZywgVXRpbHMpIHtcblxuICAvLyBUT0RPOiBhZGQgdXJsUHJlZml4IG9wdGlvblxuXG4gIHZhciBmb3JFYWNoID0gYW5ndWxhci5mb3JFYWNoLFxuICAgICAgaXNPYmplY3QgPSBhbmd1bGFyLmlzT2JqZWN0LFxuICAgICAgaXNBcnJheSA9IGFuZ3VsYXIuaXNBcnJheSxcbiAgICAgIGlzRnVuY3Rpb24gPSBhbmd1bGFyLmlzRnVuY3Rpb24sXG4gICAgICBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZCxcbiAgICAgIFZBUl9SR1ggPSAvXltBLVpdK1tBLVpfMC05XSokLztcblxuICAvKipcbiAgICogQGNsYXNzIEJ1aWxkZXJBcGlcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFByb3ZpZGVzIHRoZSBEU0wgZm9yIG1vZGVsIGdlbmVyYXRpb24sIGl0IHN1cHBvcnRzIHRvIG1vZGVzIG9mIG1vZGVsIGRlZmluaXRpb25zOlxuICAgKlxuICAgKiAjIyBEZWZpbml0aW9uIG9iamVjdFxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBwcmVmZXJyZWQgd2F5IG9mIGRlc2NyaWJpbmcgYSBtb2RlbCBiZWhhdmlvci5cbiAgICpcbiAgICogQSBtb2RlbCBkZXNjcmlwdGlvbiBvYmplY3QgbG9va3MgbGlrZSB0aGlzOlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIHJlc3Rtb2QubW9kZWwoe1xuICAgKlxuICAgKiAgIC8vIE1PREVMIENPTkZJR1VSQVRJT05cbiAgICpcbiAgICogICAkY29uZmlnOiB7XG4gICAqICAgICBuYW1lOiAncmVzb3VyY2UnLFxuICAgKiAgICAgcHJpbWFyeUtleTogJ19pZCdcbiAgICogICB9LFxuICAgKlxuICAgKiAgIC8vIEFUVFJJQlVURSBNT0RJRklFUlMgQU5EIFJFTEFUSU9OU1xuICAgKlxuICAgKiAgIHByb3BXaXRoRGVmYXVsdDogeyBpbml0OiAyMCB9LFxuICAgKiAgIHByb3BXaXRoRGVjb2RlcjogeyBkZWNvZGU6ICdkYXRlJywgY2hhaW46IHRydWUgfSxcbiAgICogICBoYXNNYW55UmVsYXRpb246IHsgaGFzTWFueTogJ090aGVyJyB9LFxuICAgKiAgIGhhc09uZVJlbGF0aW9uOiB7IGhhc09uZTogJ090aGVyJyB9LFxuICAgKlxuICAgKiAgIC8vIEhPT0tTXG4gICAqXG4gICAqICAgJGhvb2tzOiB7XG4gICAqICAgICAnYWZ0ZXItY3JlYXRlJzogZnVuY3Rpb24oKSB7XG4gICAqICAgICB9XG4gICAqICAgfSxcbiAgICpcbiAgICogICAvLyBNRVRIT0RTXG4gICAqXG4gICAqICAgJGV4dGVuZDoge1xuICAgKiAgICAgUmVjb3JkOiB7XG4gICAqICAgICAgIGluc3RhbmNlTWV0aG9kOiBmdW5jdGlvbigpIHtcbiAgICogICAgICAgfVxuICAgKiAgICAgfSxcbiAgICogICAgIE1vZGVsOiB7XG4gICAqICAgICAgIHNjb3BlTWV0aG9kOiBmdW5jdGlvbigpIHtcbiAgICogICAgICAgfVxuICAgKiAgICAgfVxuICAgKiAgIH1cbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBTcGVjaWFsIG1vZGVsIGNvbmZpZ3VyYXRpb24gdmFyaWFibGVzIGNhbiBiZSBzZXQgYnkgdXNpbmcgYSBgJGNvbmZpZ2AgYmxvY2s6XG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogcmVzdG1vZC5tb2RlbCh7XG4gICAqXG4gICAqICAgJGNvbmZpZzoge1xuICAgKiAgICAgbmFtZTogJ3Jlc291cmNlJyxcbiAgICogICAgIHByaW1hcnlLZXk6ICdfaWQnXG4gICAqICAgfVxuICAgKlxuICAgKiAgfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBXaXRoIHRoZSBleGNlcHRpb24gb2YgbW9kZWwgY29uZmlndXJhdGlvbiB2YXJpYWJsZXMgYW5kIHByb3BlcnRpZXMgc3RhcnRpbmcgd2l0aCBhIHNwZWNpYWwgY2hhcmFjdGVyICgqKkAqKiBvciAqKn4qKiksXG4gICAqIGVhY2ggcHJvcGVydHkgaW4gdGhlIGRlZmluaXRpb24gb2JqZWN0IGFzaWducyBhIGJlaGF2aW9yIHRvIHRoZSBzYW1lIG5hbWVkIHByb3BlcnR5IGluIGEgbW9kZWwncyByZWNvcmQuXG4gICAqXG4gICAqIFRvIG1vZGlmeSBhIHByb3BlcnR5IGJlaGF2aW9yIGFzc2lnbiBhbiBvYmplY3Qgd2l0aCB0aGUgZGVzaXJlZCBtb2RpZmllcnMgdG8gYVxuICAgKiBkZWZpbml0aW9uIHByb3BlcnR5IHdpdGggdGhlIHNhbWUgbmFtZS4gQnVpbHRpbiBtb2RpZmllcnMgYXJlOlxuICAgKlxuICAgKiBUaGUgZm9sbG93aW5nIGJ1aWx0IGluIHByb3BlcnR5IG1vZGlmaWVycyBhcmUgcHJvdmlkZWQgKHNlZSBlYWNoIG1hcHBlZC1tZXRob2QgZG9jcyBmb3IgdXNhZ2UgaW5mb3JtYXRpb24pOlxuICAgKlxuICAgKiAqIGBpbml0YCBzZXRzIGFuIGF0dHJpYnV0ZSBkZWZhdWx0IHZhbHVlLCBzZWUge0BsaW5rIEJ1aWxkZXJBcGkjYXR0ckRlZmF1bHR9XG4gICAqICogYG1hc2tgIGFuZCBgaWdub3JlYCBzZXRzIGFuIGF0dHJpYnV0ZSBtYXNrLCBzZWUge0BsaW5rIEJ1aWxkZXJBcGkjYXR0ck1hc2t9XG4gICAqICogYG1hcGAgc2V0cyBhbiBleHBsaWNpdCBzZXJ2ZXIgYXR0cmlidXRlIG1hcHBpbmcsIHNlZSB7QGxpbmsgQnVpbGRlckFwaSNhdHRyTWFwfVxuICAgKiAqIGBkZWNvZGVgIHNldHMgaG93IGFuIGF0dHJpYnV0ZSBpcyBkZWNvZGVkIGFmdGVyIGJlaW5nIGZldGNoLCBtYXBzIHRvIHtAbGluayBCdWlsZGVyQXBpI2F0dHJEZWNvZGVyfVxuICAgKiAqIGBlbmNvZGVgIHNldHMgaG93IGFuIGF0dHJpYnV0ZSBpcyBlbmNvZGVkIGJlZm9yZSBiZWluZyBzZW50LCBtYXBzIHRvIHtAbGluayBCdWlsZGVyQXBpI2F0dHJFbmNvZGVyfVxuICAgKiAqIGB2b2xhdGlsZWAgc2V0cyB0aGUgYXR0cmlidXRlIHZvbGF0aWxpdHksIG1hcHMgdG8ge0BsaW5rIEJ1aWxkZXJBcGkjYXR0clZvbGF0aWxlfVxuICAgKlxuICAgKiAqKkZvciByZWxhdGlvbnMgbW9kaWZpZXJzIHRha2UgYSBsb29rIGF0IHtAbGluayBSZWxhdGlvbkJ1aWxkZXJBcGl9KipcbiAgICpcbiAgICogKipGb3Igb3RoZXIgZXh0ZW5kZWQgYnVuZGxlZCBtZXRob2RzIGNoZWNrIG91dCB0aGUge0BsaW5rIEV4dGVuZGVkQnVpbGRlckFwaX0qKlxuICAgKlxuICAgKiBJZiBvdGhlciBraW5kIG9mIHZhbHVlIChkaWZmZXJlbnQgZnJvbSBvYmplY3Qgb3IgZnVuY3Rpb24pIGlzIHBhc3NlZCB0byBhIGRlZmluaXRpb24gcHJvcGVydHksXG4gICAqIHRoZW4gaXQgaXMgY29uc2lkZXJlZCB0byBiZSBhIGRlZmF1bHQgdmFsdWUuIChzYW1lIGFzIGNhbGxpbmcge0BsaW5rIEJ1aWxkZXJBcGkjZGVmaW5lfSBhdCBhIGRlZmluaXRpb24gZnVuY3Rpb24pXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogdmFyIE1vZGVsID0gcmVzdG1vZC5tb2RlbCgnLycsIHtcbiAgICogICBpbTIwOiAyMCAvLyBzYW1lIGFzIHsgaW5pdDogMjAgfVxuICAgKiB9KVxuICAgKlxuICAgKiAvLyB0aGVuIHNheSBoZWxsbyBpcyBhdmFpbGFibGUgZm9yIHVzZSBhdCBtb2RlbCByZWNvcmRzXG4gICAqIE1vZGVsLiRuZXcoKS5pbTIwOyAvLyAyMFxuICAgKiBgYGBcbiAgICpcbiAgICogVG8gYWRkL292ZXJyaWRlIG1ldGhvZHMgZnJvbSB0aGUgcmVjb3JkIGFwaSwgdXNlIHRoZSBgJGV4dGVuZGAgYmxvY2s6XG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogdmFyIE1vZGVsID0gcmVzdG1vZC5tb2RlbCgnLycsIHtcbiAgICogICAkZXh0ZW5kOiB7XG4gICAqICAgICBzYXlIZWxsbzogZnVuY3Rpb24oKSB7IGFsZXJ0KCdoZWxsbyEnKTsgfVxuICAgKiAgIH1cbiAgICogfSlcbiAgICpcbiAgICogLy8gdGhlbiBzYXkgaGVsbG8gaXMgYXZhaWxhYmxlIGZvciB1c2UgYXQgbW9kZWwgcmVjb3Jkc1xuICAgKiBNb2RlbC4kbmV3KCkuc2F5SGVsbG8oKTtcbiAgICogYGBgXG4gICAqXG4gICAqIFRvIGFkZCBhIHN0YXRpYyBtZXRob2Qgb3IgYSBjb2xsZWN0aW9uIG1ldGhvZCwgeW91IG11c3Qgc3BlY2lmeSB0aGUgbWV0aG9kIHNjb3BlOiAsIHByZWZpeCB0aGUgZGVmaW5pdGlvbiBrZXkgd2l0aCAqKl4qKiwgdG8gYWRkIGl0IHRvIHRoZSBtb2RlbCBjb2xsZWN0aW9uIHByb3RvdHlwZSxcbiAgICogcHJlZml4IGl0IHdpdGggKioqKiogc3RhdGljL2NvbGxlY3Rpb24gbWV0aG9kcyB0byB0aGUgTW9kZWwsIHByZWZpeCB0aGUgZGVmaW5pdGlvbiBwcm9wZXJ0eSBuYW1lIHdpdGggKipAKipcbiAgICogKHNhbWUgYXMgY2FsbGluZyB7QGxpbmsgQnVpbGRlckFwaSNzY29wZURlZmluZX0gYXQgYSBkZWZpbml0aW9uIGZ1bmN0aW9uKS5cbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiB2YXIgTW9kZWwgPSByZXN0bW9kLm1vZGVsKCcvJywge1xuICAgKiAgICRleHRlbmQ6IHtcbiAgICogICAgICdDb2xsZWN0aW9uLmNvdW50JzogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmxlbmd0aDsgfSwgIC8vIHNjb3BlIGlzIHNldCB1c2luZyBhIHByZWZpeFxuICAgKlxuICAgKiAgICAgTW9kZWw6IHtcbiAgICogICAgICAgc2F5SGVsbG86IGZ1bmN0aW9uKCkgeyBhbGVydCgnaGVsbG8hJyk7IH0gLy8gc2NvcGUgaXMgc2V0IHVzaW5nIGEgYmxvY2tcbiAgICogICAgIH1cbiAgICogfSlcbiAgICpcbiAgICogLy8gdGhlbiB0aGUgZm9sbG93aW5nIGNhbGwgd2lsbCBiZSB2YWxpZC5cbiAgICogTW9kZWwuc2F5SGVsbG8oKTtcbiAgICogTW9kZWwuJGNvbGxlY3Rpb24oKS5jb3VudCgpO1xuICAgKiBgYGBcbiAgICpcbiAgICogTW9yZSBpbmZvcm1hdGlvbiBhYm91dCBtZXRob2Qgc2NvcGVzIGNhbiBiZSBmb3VuZCBpbiB7QGxpbmsgQnVpbGRlckFwaSNkZWZpbmV9XG4gICAqXG4gICAqIFRvIGFkZCBob29rcyB0byB0aGUgTW9kZWwgbGlmZWN5Y2xlIGV2ZW50cyB1c2UgdGhlIGAkaG9va3NgIGJsb2NrOlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIHZhciBNb2RlbCA9IHJlc3Rtb2QubW9kZWwoJy8nLCB7XG4gICAqICAgJGhvb2tzOiB7XG4gICAqICAgICAnYWZ0ZXItaW5pdCc6IGZ1bmN0aW9uKCkgeyBhbGVydCgnaGVsbG8hJyk7IH1cbiAgICogICB9XG4gICAqIH0pXG4gICAqXG4gICAqIC8vIHRoZSBhZnRlci1pbml0IGhvb2sgaXMgY2FsbGVkIGFmdGVyIGV2ZXJ5IHJlY29yZCBpbml0aWFsaXphdGlvbi5cbiAgICogTW9kZWwuJG5ldygpOyAvLyBhbGVydHMgJ2hlbGxvISc7XG4gICAqIGBgYFxuICAgKlxuICAgKiAjIyBEZWZpbml0aW9uIGZ1bmN0aW9uXG4gICAqXG4gICAqIFRoZSBkZWZpbml0aW9uIGZ1bmN0aW9uIGdpdmVzIGNvbXBsZXRlIGFjY2VzcyB0byB0aGUgbW9kZWwgYnVpbGRlciBhcGksIGV2ZXJ5IG1vZGVsIGJ1aWxkZXIgZnVuY3Rpb24gZGVzY3JpYmVkXG4gICAqIGluIHRoaXMgcGFnZSBjYW4gYmUgY2FsbGVkIGZyb20gdGhlIGRlZmluaXRpb24gZnVuY3Rpb24gYnkgcmVmZXJlbmNpbmcgKnRoaXMqLlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIHJlc3Rtb2QubW9kZWwoJycsIGZ1bmN0aW9uKCkge1xuICAgKiAgIHRoaXMuYXR0ckRlZmF1bHQoJ3Byb3BXaXRoRGVmYXVsdCcsIDIwKVxuICAgKiAgICAgICAuYXR0ckFzQ29sbGVjdGlvbignaGFzTWFueVJlbGF0aW9uJywgJ01vZGVsTmFtZScpXG4gICAqICAgICAgIC5vbignYWZ0ZXItY3JlYXRlJywgZnVuY3Rpb24oKSB7XG4gICAqICAgICAgICAgLy8gZG8gc29tZXRoaW5nIGFmdGVyIGNyZWF0ZS5cbiAgICogICAgICAgfSk7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICovXG4gIGZ1bmN0aW9uIEJ1aWxkZXIoX2Jhc2VEc2wpIHtcblxuICAgIHZhciBtYXBwaW5ncyA9IHtcbiAgICAgIGluaXQ6IFsnYXR0ckRlZmF1bHQnXSxcbiAgICAgIG1hc2s6IFsnYXR0ck1hc2snXSxcbiAgICAgIGlnbm9yZTogWydhdHRyTWFzayddLFxuICAgICAgbWFwOiBbJ2F0dHJNYXAnLCAnZm9yY2UnXSxcbiAgICAgIGRlY29kZTogWydhdHRyRGVjb2RlcicsICdwYXJhbScsICdjaGFpbiddLFxuICAgICAgZW5jb2RlOiBbJ2F0dHJFbmNvZGVyJywgJ3BhcmFtJywgJ2NoYWluJ10sXG4gICAgICAndm9sYXRpbGUnOiBbJ2F0dHJWb2xhdGlsZSddXG4gICAgfTtcblxuICAgIC8vIERTTCBjb3JlIGZ1bmN0aW9ucy5cblxuICAgIHRoaXMuZHNsID0gZXh0ZW5kKF9iYXNlRHNsLCB7XG5cbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIEJ1aWxkZXJBcGkjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIFBhcnNlcyBhIGRlc2NyaXB0aW9uIG9iamVjdCwgY2FsbHMgdGhlIHByb3BlciBidWlsZGVyIG1ldGhvZCBkZXBlbmRpbmdcbiAgICAgICAqIG9uIGVhY2ggcHJvcGVydHkgZGVzY3JpcHRpb24gdHlwZS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge29iamVjdH0gX2Rlc2NyaXB0aW9uIFRoZSBkZXNjcmlwdGlvbiBvYmplY3RcbiAgICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgICAqL1xuICAgICAgZGVzY3JpYmU6IGZ1bmN0aW9uKF9kZXNjcmlwdGlvbikge1xuICAgICAgICBmb3JFYWNoKF9kZXNjcmlwdGlvbiwgZnVuY3Rpb24oX2Rlc2MsIF9hdHRyKSB7XG4gICAgICAgICAgc3dpdGNoKF9hdHRyLmNoYXJBdCgwKSkge1xuICAgICAgICAgIGNhc2UgJ0AnOlxuICAgICAgICAgICAgJGxvZy53YXJuKCdVc2FnZSBvZiBAIGluIGRlc2NyaXB0aW9uIG9iamVjdHMgd2lsbCBiZSByZW1vdmVkIGluIDEuMiwgdXNlIGEgJGV4dGVuZCBibG9jayBpbnN0ZWFkJyk7XG4gICAgICAgICAgICB0aGlzLmRlZmluZSgnU2NvcGUuJyArIF9hdHRyLnN1YnN0cmluZygxKSwgX2Rlc2MpOyAvLyBzZXQgc3RhdGljIG1ldGhvZFxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnfic6XG4gICAgICAgICAgICBfYXR0ciA9IGluZmxlY3Rvci5wYXJhbWV0ZXJpemUoX2F0dHIuc3Vic3RyaW5nKDEpKTtcbiAgICAgICAgICAgICRsb2cud2FybignVXNhZ2Ugb2YgfiBpbiBkZXNjcmlwdGlvbiBvYmplY3RzIHdpbGwgYmUgcmVtb3ZlZCBpbiAxLjIsIHVzZSBhICRob29rcyBibG9jayBpbnN0ZWFkJyk7XG4gICAgICAgICAgICB0aGlzLm9uKF9hdHRyLCBfZGVzYyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgaWYoX2F0dHIgPT09ICckY29uZmlnJykgeyAvLyBjb25maWd1cmF0aW9uIGJsb2NrXG4gICAgICAgICAgICAgIGZvcih2YXIga2V5IGluIF9kZXNjKSB7XG4gICAgICAgICAgICAgICAgaWYoX2Rlc2MuaGFzT3duUHJvcGVydHkoa2V5KSkgdGhpcy5zZXRQcm9wZXJ0eShrZXksIF9kZXNjW2tleV0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYoX2F0dHIgPT09ICckZXh0ZW5kJykgeyAvLyBleHRlbnNpb24gYmxvY2tcbiAgICAgICAgICAgICAgZm9yKHZhciBrZXkgaW4gX2Rlc2MpIHtcbiAgICAgICAgICAgICAgICBpZihfZGVzYy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB0aGlzLmRlZmluZShrZXksIF9kZXNjW2tleV0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYoX2F0dHIgPT09ICckaG9va3MnKSB7IC8vIGhvb2tzIGJsb2NrXG4gICAgICAgICAgICAgIGZvcih2YXIga2V5IGluIF9kZXNjKSB7XG4gICAgICAgICAgICAgICAgaWYoX2Rlc2MuaGFzT3duUHJvcGVydHkoa2V5KSkgdGhpcy5vbihrZXksIF9kZXNjW2tleV0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYoVkFSX1JHWC50ZXN0KF9hdHRyKSkge1xuICAgICAgICAgICAgICAkbG9nLndhcm4oJ1VzYWdlIG9mIH4gaW4gZGVzY3JpcHRpb24gb2JqZWN0cyB3aWxsIGJlIHJlbW92ZWQgaW4gMS4yLCB1c2UgYSAkY29uZmlnIGJsb2NrIGluc3RlYWQnKTtcbiAgICAgICAgICAgICAgX2F0dHIgPSBpbmZsZWN0b3IuY2FtZWxpemUoX2F0dHIudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydHkoX2F0dHIsIF9kZXNjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYoaXNPYmplY3QoX2Rlc2MpKSB0aGlzLmF0dHJpYnV0ZShfYXR0ciwgX2Rlc2MpO1xuICAgICAgICAgICAgZWxzZSBpZihpc0Z1bmN0aW9uKF9kZXNjKSkgdGhpcy5kZWZpbmUoX2F0dHIsIF9kZXNjKTtcbiAgICAgICAgICAgIGVsc2UgdGhpcy5hdHRyRGVmYXVsdChfYXR0ciwgX2Rlc2MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgQnVpbGRlckFwaSNcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gRXh0ZW5kcyB0aGUgYnVpbGRlciBEU0xcbiAgICAgICAqXG4gICAgICAgKiBBZGRzIGEgZnVuY3Rpb24gdG8gZGUgYnVpbGRlciBhbmQgYWx0ZXJuYXRpdmVseSBtYXBzIHRoZSBmdW5jdGlvbiB0byBhblxuICAgICAgICogYXR0cmlidXRlIGRlZmluaXRpb24ga2V5d29yZCB0aGF0IGNhbiBiZSBsYXRlciB1c2VkIHdoZW4gY2FsbGluZ1xuICAgICAgICogYGRlZmluZWAgb3IgYGF0dHJpYnV0ZWAuXG4gICAgICAgKlxuICAgICAgICogTWFwcGluZyB3b3JrcyBhcyBmb2xsb3dpbmc6XG4gICAgICAgKlxuICAgICAgICogICAgLy8gR2l2ZW4gdGhlIGZvbGxvd2luZyBjYWxsXG4gICAgICAgKiAgICBidWlsZGVyLmV4dGVuZCgndGVzdEF0dHInLCBmdW5jdGlvbihfYXR0ciwgX3Rlc3QsIF9wYXJhbTEsIHBhcmFtMikge1xuICAgICAgICogICAgICAvLyB3aGFyZXZlci4uXG4gICAgICAgKiAgICB9LCBbJ3Rlc3QnLCAndGVzdFAxJywgJ3Rlc3RQMiddKTtcbiAgICAgICAqXG4gICAgICAgKiAgICAvLyBBIGNhbGwgdG9cbiAgICAgICAqICAgIGJ1aWxkZXIuYXR0cmlidXRlKCdjaGFwdGVyJywgeyB0ZXN0OiAnaGVsbG8nLCB0ZXN0UDE6ICd3b3JsZCcgfSk7XG4gICAgICAgKlxuICAgICAgICogICAgLy8gSXRzIGVxdWl2YWxlbnQgdG9cbiAgICAgICAqICAgIGJ1aWxkZXIudGVzdEF0dHIoJ2NoYXB0ZXInLCAnaGVsbG8nLCAnd29ybGQnKTtcbiAgICAgICAqXG4gICAgICAgKiBUaGUgbWV0aG9kIGNhbiBhbHNvIGJlIHBhc3NlZCBhbiBvYmplY3Qgd2l0aCB2YXJpb3VzIG1ldGhvZHMgdG8gYmUgYWRkZWQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSBfbmFtZSBmdW5jdGlvbiBuYW1lIG9yIG9iamVjdCB0byBtZXJnZVxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gX2Z1biBmdW5jdGlvblxuICAgICAgICogQHBhcmFtIHthcnJheX0gX21hcHBpbmcgZnVuY3Rpb24gbWFwcGluZyBkZWZpbml0aW9uXG4gICAgICAgKiBAcmV0dXJuIHtCdWlsZGVyQXBpfSBzZWxmXG4gICAgICAgKi9cbiAgICAgIGV4dGVuZDogZnVuY3Rpb24oX25hbWUsIF9mdW4sIF9tYXBwaW5nKSB7XG4gICAgICAgIGlmKHR5cGVvZiBfbmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0aGlzW19uYW1lXSA9IFV0aWxzLm92ZXJyaWRlKHRoaXNbbmFtZV0sIF9mdW4pO1xuICAgICAgICAgIGlmKF9tYXBwaW5nKSB7XG4gICAgICAgICAgICBtYXBwaW5nc1tfbWFwcGluZ1swXV0gPSBfbWFwcGluZztcbiAgICAgICAgICAgIF9tYXBwaW5nWzBdID0gX25hbWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgVXRpbHMuZXh0ZW5kT3ZlcnJpZGVuKHRoaXMsIF9uYW1lKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBCdWlsZGVyQXBpI1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBTZXRzIGFuIGF0dHJpYnV0ZSBwcm9wZXJ0aWVzLlxuICAgICAgICpcbiAgICAgICAqIFRoaXMgbWV0aG9kIHVzZXMgdGhlIGF0dHJpYnV0ZSBtb2RpZmllcnMgbWFwcGluZyB0byBjYWxsIHByb3BlclxuICAgICAgICogbW9kaWZpZXJzIG9uIHRoZSBhcmd1bWVudC5cbiAgICAgICAqXG4gICAgICAgKiBGb3IgZXhhbXBsZSwgdXNpbmcgdGhlIGZvbGxvd2luZyBkZXNjcmlwdGlvbiBvbiB0aGUgY3JlYXRlZEF0IGF0dHJpYnV0ZVxuICAgICAgICpcbiAgICAgICAqICAgIHsgZGVjb2RlOiAnZGF0ZScsIHBhcmFtOyAnWVktbW0tZGQnIH1cbiAgICAgICAqXG4gICAgICAgKiBJcyB0aGUgc2FtZSBhcyBjYWxsaW5nXG4gICAgICAgKlxuICAgICAgICogICAgYnVpbGRlci5hdHRyRGVjb2RlcignY3JlYXRlZEF0JywgJ2RhdGUnLCAnWVktbW0tZGQnKVxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfbmFtZSBBdHRyaWJ1dGUgbmFtZVxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IF9kZXNjcmlwdGlvbiBEZXNjcmlwdGlvbiBvYmplY3RcbiAgICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgICAqL1xuICAgICAgYXR0cmlidXRlOiBmdW5jdGlvbihfbmFtZSwgX2Rlc2NyaXB0aW9uKSB7XG4gICAgICAgIHZhciBrZXksIG1hcCwgYXJncywgaTtcbiAgICAgICAgZm9yKGtleSBpbiBfZGVzY3JpcHRpb24pIHtcbiAgICAgICAgICBpZihfZGVzY3JpcHRpb24uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgbWFwID0gbWFwcGluZ3Nba2V5XTtcbiAgICAgICAgICAgIGlmKG1hcCkge1xuICAgICAgICAgICAgICBhcmdzID0gW19uYW1lLCBfZGVzY3JpcHRpb25ba2V5XV07XG4gICAgICAgICAgICAgIGZvcihpID0gMTsgaSA8IG1hcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGFyZ3MucHVzaChfZGVzY3JpcHRpb25bbWFwW2ldXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYXJncy5wdXNoKF9kZXNjcmlwdGlvbik7XG4gICAgICAgICAgICAgIHRoaXNbbWFwWzBdXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBCdWlsZGVyLnByb3RvdHlwZSA9IHtcblxuICAgIC8vIHVzZSB0aGUgYnVpbGRlciB0byBwcm9jZXNzIGEgbWl4aW4gY2hhaW5cbiAgICBjaGFpbjogZnVuY3Rpb24oX2NoYWluKSB7XG4gICAgICBmb3IodmFyIGkgPSAwLCBsID0gX2NoYWluLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0aGlzLm1peGluKF9jaGFpbltpXSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIHVzZSB0aGUgYnVpbGRlciB0byBwcm9jZXNzIGEgc2luZ2xlIG1peGluXG4gICAgbWl4aW46IGZ1bmN0aW9uKF9taXgpIHtcbiAgICAgIGlmKF9taXguJCRjaGFpbikge1xuICAgICAgICB0aGlzLmNoYWluKF9taXguJCRjaGFpbik7XG4gICAgICB9IGVsc2UgaWYodHlwZW9mIF9taXggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRoaXMubWl4aW4oJGluamVjdG9yLmdldChfbWl4KSk7XG4gICAgICB9IGVsc2UgaWYoaXNBcnJheShfbWl4KSkge1xuICAgICAgICB0aGlzLmNoYWluKF9taXgpO1xuICAgICAgfSBlbHNlIGlmKGlzRnVuY3Rpb24oX21peCkpIHtcbiAgICAgICAgX21peC5jYWxsKHRoaXMuZHNsLCAkaW5qZWN0b3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kc2wuZGVzY3JpYmUoX21peCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBCdWlsZGVyO1xuXG59XSk7XG5STU1vZHVsZS5mYWN0b3J5KCdSTUJ1aWxkZXJDb21wdXRlZCcsIFsncmVzdG1vZCcsXG4gIGZ1bmN0aW9uKHJlc3Rtb2QpIHtcbiAgICAvKipcbiAgICAgKiBAY2xhc3MgUk1CdWlsZGVyQ29tcHV0ZWRBcGlcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogQnVpbGRlciBEU0wgZXh0ZW5zaW9uIHRvIGJ1aWxkIGNvbXB1dGVkIHByb3BlcnRpZXMuXG4gICAgICpcbiAgICAgKiBBIGNvbXB1dGVkIHByb3BlcnR5IGlzIGEgXCJ2aXJ0dWFsXCIgcHJvcGVydHkgd2hpY2ggaXMgY3JlYXRlZCB1c2luZ1xuICAgICAqIG90aGVyIG1vZGVsIHByb3BlcnRpZXMuIEZvciBleGFtcGxlLCBhIHVzZXIgaGFzIGEgZmlyc3ROYW1lIGFuZCBsYXN0TmFtZSxcbiAgICAgKiBBIGNvbXB1dGVkIHByb3BlcnR5LCBmdWxsTmFtZSwgaXMgZ2VuZXJhdGVkIGZyb20gdGhlIHR3by5cbiAgICAgKlxuICAgICAqIEFkZHMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0eSBtb2RpZmllcnM6XG4gICAgICogKiBgY29tcHV0ZWRgIGZ1bmN0aW9uIHdpbGwgYmUgYXNzaWduZWQgYXMgZ2V0dGVyIHRvIE1vZGVsLCBtYXBzIHRvIHtAbGluayBSTUJ1aWxkZXJDb21wdXRlZEFwaSNhdHRyQXNDb21wdXRlZH1cbiAgICAgKlxuICAgICAqL1xuICAgIHZhciBFWFQgPSB7XG5cbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIFJNQnVpbGRlckNvbXB1dGVkQXBpI1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBSZWdpc3RlcnMgYSBtb2RlbCBjb21wdXRlZCBwcm9wZXJ0eVxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSAgX2F0dHIgQXR0cmlidXRlIG5hbWVcbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IF9mbiBGdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGRlc2lyZWQgYXR0cmlidXRlIHZhbHVlIHdoZW4gcnVuLlxuICAgICAgICogQHJldHVybiB7QnVpbGRlckFwaX0gc2VsZlxuICAgICAgICovXG4gICAgICBhdHRyQXNDb21wdXRlZDogZnVuY3Rpb24oX2F0dHIsIF9mbikge1xuICAgICAgICB0aGlzLmF0dHJDb21wdXRlZChfYXR0ciwgX2ZuKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiByZXN0bW9kLm1peGluKGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5leHRlbmQoJ2F0dHJBc0NvbXB1dGVkJywgRVhULmF0dHJBc0NvbXB1dGVkLCBbJ2NvbXB1dGVkJ10pO1xuICAgIH0pO1xuICB9XG5dKTtcblJNTW9kdWxlLmZhY3RvcnkoJ1JNQnVpbGRlckV4dCcsIFsnJGluamVjdG9yJywgJyRwYXJzZScsICdpbmZsZWN0b3InLCAnJGxvZycsICdyZXN0bW9kJywgZnVuY3Rpb24oJGluamVjdG9yLCAkcGFyc2UsIGluZmxlY3RvciwgJGxvZywgcmVzdG1vZCkge1xuXG4gIHZhciBiaW5kID0gYW5ndWxhci5iaW5kLFxuICAgICAgaXNGdW5jdGlvbiA9IGFuZ3VsYXIuaXNGdW5jdGlvbjtcblxuICAvKipcbiAgICogQGNsYXNzIEV4dGVuZGVkQnVpbGRlckFwaVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogTm9uLWNvcmUgYnVpbGRlciBleHRlbnNpb25zXG4gICAqXG4gICAqIEFkZHMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0eSBtb2RpZmllcnM6XG4gICAqICogYHNlcmlhbGl6ZWAgc2V0cyB0aGUgZW5jb2RlciBhbmQgZGVjb2RlciBiZWF2aW91ciBmb3IgYW4gYXR0cmlidXRlLCBtYXBzIHRvIHtAbGluayBCdWlsZGVyQXBpI2F0dHJTZXJpYWxpemVyfVxuICAgKlxuICAgKi9cbiAgdmFyIEVYVCA9IHtcbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgRXh0ZW5kZWRCdWlsZGVyQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIFNldHMgYW4gdXJsIHByZWZpeCB0byBiZSBhZGRlZCB0byBldmVyeSB1cmwgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbC5cbiAgICAgKlxuICAgICAqIFRoaXMgYXBwbGllcyBldmVuIHRvIG9iamVjdHMgZ2VuZXJhdGVkIGJ5IHRoZSBgJHNpbmdsZWAgbWV0aG9kLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBpbiBhIGJhc2UgbW9kZWwgbWl4aW4gc28gZXZlcnltb2RlbCB0aGF0IGV4dGVuZHMgZnJvbSBpdFxuICAgICAqIGdldHMgdGhlIHNhbWUgdXJsIHByZWZpeC5cbiAgICAgKlxuICAgICAqIFVzYWdlOlxuICAgICAqXG4gICAgICogYGBgamF2YXNjcmlwdFxuICAgICAqIHZhciBCYXNlTW9kZWwgPSByZXN0bW9kLm1peGluKGZ1bmN0aW9uKCkge1xuICAgICAqICAgdGhpcy5zZXRVcmxQcmVmaXgoJy9hcGknKTtcbiAgICAgKiB9KVxuICAgICAqXG4gICAgICogdmFyIGJpa2UgPSByZXN0bW9kLm1vZGVsKCcvYmlrZXMnLCBCYXNlTW9kZWwpLiRidWlsZCh7IGlkOiAxIH0pO1xuICAgICAqIGNvbnNvbGUubG9nKGJpa2UuJHVybCgpKSAvLyBvdXRwdXRzICcvYXBpL2Jpa2VzLzEnXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX3ByZWZpeCB1cmwgcG9ydGlvblxuICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgKi9cbiAgICBzZXRVcmxQcmVmaXg6IGZ1bmN0aW9uKF9wcmVmaXgpIHtcbiAgICAgIHJldHVybiB0aGlzLnNldFByb3BlcnR5KCd1cmxQcmVmaXgnLCBfcHJlZml4KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIEV4dGVuZGVkQnVpbGRlckFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBDaGFuZ2VzIHRoZSBtb2RlbCdzIHByaW1hcnkga2V5LlxuICAgICAqXG4gICAgICogUHJpbWFyeSBrZXlzIGFyZSBwYXNzZWQgdG8gc2NvcGUncyB1cmwgbWV0aG9kcyB0byBnZW5lcmF0ZSB1cmxzLiBUaGUgZGVmYXVsdCBwcmltYXJ5IGtleSBpcyAnaWQnLlxuICAgICAqXG4gICAgICogKipBVFRFTlRJT04qKiBQcmltYXJ5IGtleXMgYXJlIGV4dHJhY3RlZCBmcm9tIHJhdyBkYXRhLCBzbyBfa2V5IG11c3QgdXNlIHJhdyBhcGkgbmFtaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8ZnVuY3Rpb259IF9rZXkgTmV3IHByaW1hcnkga2V5LlxuICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgKi9cbiAgICBzZXRQcmltYXJ5S2V5OiBmdW5jdGlvbihfa2V5KSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXRQcm9wZXJ0eSgncHJpbWFyeUtleScsIF9rZXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgRXh0ZW5kZWRCdWlsZGVyQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIEFzc2lnbnMgYSBzZXJpYWxpemVyIHRvIGEgZ2l2ZW4gYXR0cmlidXRlLlxuICAgICAqXG4gICAgICogQSBfc2VyaWFsaXplciBpczpcbiAgICAgKiAqIGFuIG9iamVjdCB0aGF0IGRlZmluZXMgYm90aCBhIGBkZWNvZGVgIGFuZCBhIGBlbmNvZGVgIG1ldGhvZFxuICAgICAqICogYSBmdW5jdGlvbiB0aGF0IHdoZW4gY2FsbGVkIHJldHVybnMgYW4gb2JqZWN0IHRoYXQgbWF0Y2hlcyB0aGUgYWJvdmUgZGVzY3JpcHRpb24uXG4gICAgICogKiBhIHN0cmluZyB0aGF0IHJlcHJlc2VudHMgYW4gaW5qZWN0YWJsZSB0aGF0IG1hdGNoZXMgYW55IG9mIHRoZSBhYm92ZSBkZXNjcmlwdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX25hbWUgQXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xvYmplY3R8ZnVuY3Rpb259IF9zZXJpYWxpemVyIFRoZSBzZXJpYWxpemVyXG4gICAgICogQHJldHVybiB7QnVpbGRlckFwaX0gc2VsZlxuICAgICAqL1xuICAgIGF0dHJTZXJpYWxpemVyOiBmdW5jdGlvbihfbmFtZSwgX3NlcmlhbGl6ZXIsIF9vcHQpIHtcbiAgICAgIGlmKHR5cGVvZiBfc2VyaWFsaXplciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgX3NlcmlhbGl6ZXIgPSAkaW5qZWN0b3IuZ2V0KGluZmxlY3Rvci5jYW1lbGl6ZShfc2VyaWFsaXplciwgdHJ1ZSkgKyAnU2VyaWFsaXplcicpO1xuICAgICAgfVxuXG4gICAgICBpZihpc0Z1bmN0aW9uKF9zZXJpYWxpemVyKSkgX3NlcmlhbGl6ZXIgPSBfc2VyaWFsaXplcihfb3B0KTtcbiAgICAgIGlmKF9zZXJpYWxpemVyLmRlY29kZSkgdGhpcy5hdHRyRGVjb2RlcihfbmFtZSwgYmluZChfc2VyaWFsaXplciwgX3NlcmlhbGl6ZXIuZGVjb2RlKSk7XG4gICAgICBpZihfc2VyaWFsaXplci5lbmNvZGUpIHRoaXMuYXR0ckVuY29kZXIoX25hbWUsIGJpbmQoX3NlcmlhbGl6ZXIsIF9zZXJpYWxpemVyLmVuY29kZSkpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vLyBFeHBlcmltZW50YWwgbW9kaWZpZXJzXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgRXh0ZW5kZWRCdWlsZGVyQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIEV4cHJlc3Npb24gYXR0cmlidXRlcyBhcmUgZXZhbHVhdGVkIGV2ZXJ5IHRpbWUgbmV3IGRhdGEgaXMgZmVkIHRvIHRoZSBtb2RlbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSAgX25hbWUgQXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX2V4cHIgQW5ndWxhciBleHByZXNzaW9uIHRvIGV2YWx1YXRlXG4gICAgICogQHJldHVybiB7QnVpbGRlckFwaX0gc2VsZlxuICAgICAqL1xuICAgIGF0dHJFeHByZXNzaW9uOiBmdW5jdGlvbihfbmFtZSwgX2V4cHIpIHtcbiAgICAgIHZhciBmaWx0ZXIgPSAkcGFyc2UoX2V4cHIpO1xuICAgICAgcmV0dXJuIHRoaXMub24oJ2FmdGVyLWZlZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpc1tfbmFtZV0gPSBmaWx0ZXIodGhpcyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHJlc3Rtb2QubWl4aW4oZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5leHRlbmQoJ3NldFVybFByZWZpeCcsIEVYVC5zZXRVcmxQcmVmaXgpXG4gICAgICAgIC5leHRlbmQoJ3NldFByaW1hcnlLZXknLCBFWFQuc2V0UHJpbWFyeUtleSlcbiAgICAgICAgLmV4dGVuZCgnYXR0clNlcmlhbGl6ZXInLCBFWFQuYXR0clNlcmlhbGl6ZXIsIFsnc2VyaWFsaXplJ10pO1xuICB9KTtcbn1dKTtcblJNTW9kdWxlLmZhY3RvcnkoJ1JNQnVpbGRlclJlbGF0aW9ucycsIFsnJGluamVjdG9yJywgJ2luZmxlY3RvcicsICckbG9nJywgJ1JNVXRpbHMnLCAncmVzdG1vZCcsICdSTVBhY2tlckNhY2hlJywgZnVuY3Rpb24oJGluamVjdG9yLCBpbmZsZWN0b3IsICRsb2csIFV0aWxzLCByZXN0bW9kLCBwYWNrZXJDYWNoZSkge1xuXG4gIC8vIHdyYXBzIGEgaG9vayBjYWxsYmFjayB0byBnaXZlIGFjY2VzcyB0byB0aGUgJG93bmVyIG9iamVjdFxuICBmdW5jdGlvbiB3cmFwSG9vayhfZnVuLCBfb3duZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb2xkT3duZXIgPSB0aGlzLiRvd25lcjtcbiAgICAgIHRoaXMuJG93bmVyID0gX293bmVyO1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIF9mdW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRoaXMuJG93bmVyID0gb2xkT3duZXI7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIHdyYXBzIGEgYnVuY2ggb2YgaG9va3NcbiAgZnVuY3Rpb24gYXBwbHlIb29rcyhfdGFyZ2V0LCBfaG9va3MsIF9vd25lcikge1xuICAgIGZvcih2YXIga2V5IGluIF9ob29rcykge1xuICAgICAgaWYoX2hvb2tzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgX3RhcmdldC4kb24oa2V5LCB3cmFwSG9vayhfaG9va3Nba2V5XSwgX293bmVyKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBjbGFzcyBSZWxhdGlvbkJ1aWxkZXJBcGlcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEJ1aWxkZXIgRFNMIGV4dGVuc2lvbiB0byBidWlsZCBtb2RlbCByZWxhdGlvbnNcbiAgICpcbiAgICogQWRkcyB0aGUgZm9sbG93aW5nIHByb3BlcnR5IG1vZGlmaWVyczpcbiAgICogKiBgaGFzTWFueWAgc2V0cyBhIG9uZSB0byBtYW55IGhpZXJhcmNoaWNhbCByZWxhdGlvbiB1bmRlciB0aGUgYXR0cmlidXRlIG5hbWUsIG1hcHMgdG8ge0BsaW5rIFJlbGF0aW9uQnVpbGRlckFwaSNhdHRyQXNDb2xsZWN0aW9ufVxuICAgKiAqIGBoYXNPbmVgIHNldHMgYSBvbmUgdG8gb25lIGhpZXJhcmNoaWNhbCByZWxhdGlvbiB1bmRlciB0aGUgYXR0cmlidXRlIG5hbWUsIG1hcHMgdG8ge0BsaW5rIFJlbGF0aW9uQnVpbGRlckFwaSNhdHRyQXNSZXNvdXJjZX1cbiAgICogKiBgYmVsb25nc1RvYCBzZXRzIGEgb25lIHRvIG9uZSByZWZlcmVuY2UgcmVsYXRpb24gdW5kZXIgdGhlIGF0dHJpYnV0ZSBuYW1lLCBtYXBzIHRvIHtAbGluayBSZWxhdGlvbkJ1aWxkZXJBcGkjYXR0ckFzUmVmZXJlbmNlfVxuICAgKiAqIGBiZWxvbmdzVG9NYW55YCBzZXRzIGEgb25lIHRvIG1hbnkgcmVmZXJlbmNlIHJlbGF0aW9uIHVuZGVyIHRoZSBhdHRyaWJ1dGUgbmFtZSwgbWFwcyB0byB7QGxpbmsgUmVsYXRpb25CdWlsZGVyQXBpI2F0dHJBc1JlZmVyZW5jZVRvTWFueX1cbiAgICpcbiAgICovXG4gIHZhciBFWFQgPSB7XG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFJlbGF0aW9uQnVpbGRlckFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBSZWdpc3RlcnMgYSBtb2RlbCAqKnJlc291cmNlcyoqIHJlbGF0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gIF9uYW1lIEF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSBfbW9kZWwgT3RoZXIgbW9kZWwsIHN1cHBvcnRzIGEgbW9kZWwgbmFtZSBvciBhIGRpcmVjdCByZWZlcmVuY2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IF91cmwgUGFydGlhbCB1cmxcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX3NvdXJjZSBJbmxpbmUgcmVzb3VyY2UgYWxpYXMgKG9wdGlvbmFsKVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfaW52ZXJzZU9mIEludmVyc2UgcHJvcGVydHkgbmFtZSAob3B0aW9uYWwpXG4gICAgICogQHBhcmFtIHtvYmplY3R9IF9wYXJhbXMgR2VuZXJhdGVkIGNvbGxlY3Rpb24gZGVmYXVsdCBwYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIHtvYmplY3R9IF9ob29rcyBIb29rcyB0byBiZSBhcHBsaWVkIGp1c3QgdG8gdGhlIGdlbmVyYXRlZCBjb2xsZWN0aW9uXG4gICAgICogQHJldHVybiB7QnVpbGRlckFwaX0gc2VsZlxuICAgICAqL1xuICAgIGF0dHJBc0NvbGxlY3Rpb246IGZ1bmN0aW9uKF9hdHRyLCBfbW9kZWwsIF91cmwsIF9zb3VyY2UsIF9pbnZlcnNlT2YsIF9wYXJhbXMsIF9ob29rcykge1xuXG4gICAgICB2YXIgb3B0aW9ucywgZ2xvYmFsSG9va3M7IC8vIGdsb2JhbCByZWxhdGlvbiBjb25maWd1cmF0aW9uXG5cbiAgICAgIHRoaXMuYXR0ckRlZmF1bHQoX2F0dHIsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGlmKHR5cGVvZiBfbW9kZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgX21vZGVsID0gJGluamVjdG9yLmdldChfbW9kZWwpO1xuXG4gICAgICAgICAgLy8gcmV0cmlldmUgZ2xvYmFsIG9wdGlvbnNcbiAgICAgICAgICBvcHRpb25zID0gX21vZGVsLmdldFByb3BlcnR5KCdoYXNNYW55Jywge30pO1xuICAgICAgICAgIGdsb2JhbEhvb2tzID0gb3B0aW9ucy5ob29rcztcblxuICAgICAgICAgIGlmKF9pbnZlcnNlT2YpIHtcbiAgICAgICAgICAgIHZhciBkZXNjID0gX21vZGVsLiQkZ2V0RGVzY3JpcHRpb24oX2ludmVyc2VPZik7XG4gICAgICAgICAgICBpZighZGVzYyB8fCBkZXNjLnJlbGF0aW9uICE9PSAnYmVsb25nc190bycpIHtcbiAgICAgICAgICAgICAgJGxvZy53YXJuKCdNdXN0IGRlZmluZSBhbiBpbnZlcnNlIGJlbG9uZ3NUbyByZWxhdGlvbiBmb3IgaW52ZXJzZU9mIHRvIHdvcmsnKTtcbiAgICAgICAgICAgICAgX2ludmVyc2VPZiA9IGZhbHNlOyAvLyBkaXNhYmxlIHRoZSBpbnZlcnNlIGlmIG5vIGludmVyc2UgcmVsYXRpb24gaXMgZm91bmQuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNjb3BlID0gdGhpcy4kYnVpbGRTY29wZShfbW9kZWwsIF91cmwgfHwgX21vZGVsLmVuY29kZVVybE5hbWUoX2F0dHIpKSwgY29sO1xuXG4gICAgICAgIC8vIHNldHVwIGNvbGxlY3Rpb25cbiAgICAgICAgY29sID0gX21vZGVsLiRjb2xsZWN0aW9uKF9wYXJhbXMgfHwgbnVsbCwgc2NvcGUpO1xuICAgICAgICBpZihnbG9iYWxIb29rcykgYXBwbHlIb29rcyhjb2wsIGdsb2JhbEhvb2tzLCB0aGlzKTtcbiAgICAgICAgaWYoX2hvb2tzKSBhcHBseUhvb2tzKGNvbCwgX2hvb2tzLCB0aGlzKTtcbiAgICAgICAgY29sLiRkaXNwYXRjaCgnYWZ0ZXItaGFzLW1hbnktaW5pdCcpO1xuXG4gICAgICAgIC8vIHNldCBpbnZlcnNlIHByb3BlcnR5IGlmIHJlcXVpcmVkLlxuICAgICAgICBpZihfaW52ZXJzZU9mKSB7XG4gICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgIGNvbC4kb24oJ2FmdGVyLWFkZCcsIGZ1bmN0aW9uKF9vYmopIHtcbiAgICAgICAgICAgIF9vYmpbX2ludmVyc2VPZl0gPSBzZWxmO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvbDtcbiAgICAgIH0pO1xuXG4gICAgICBpZihfc291cmNlIHx8IF91cmwpIHRoaXMuYXR0ck1hcChfYXR0ciwgX3NvdXJjZSB8fCBfdXJsKTtcblxuICAgICAgdGhpcy5hdHRyRGVjb2RlcihfYXR0ciwgZnVuY3Rpb24oX3Jhdykge1xuICAgICAgICAgICAgdGhpc1tfYXR0cl0uJHJlc2V0KCkuJGRlY29kZShfcmF3KTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5hdHRyTWFzayhfYXR0ciwgVXRpbHMuV1JJVEVfTUFTSylcbiAgICAgICAgICAuYXR0ck1ldGEoX2F0dHIsIHsgcmVsYXRpb246ICdoYXNfbWFueScgfSk7XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgUmVsYXRpb25CdWlsZGVyQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIFJlZ2lzdGVycyBhIG1vZGVsICoqcmVzb3VyY2UqKiByZWxhdGlvblxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9ICBfbmFtZSBBdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gX21vZGVsIE90aGVyIG1vZGVsLCBzdXBwb3J0cyBhIG1vZGVsIG5hbWUgb3IgYSBkaXJlY3QgcmVmZXJlbmNlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfdXJsIFBhcnRpYWwgdXJsIChvcHRpb25hbClcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX3NvdXJjZSBJbmxpbmUgcmVzb3VyY2UgYWxpYXMgKG9wdGlvbmFsKVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfaW52ZXJzZU9mIEludmVyc2UgcHJvcGVydHkgbmFtZSAob3B0aW9uYWwpXG4gICAgICogQHBhcmFtIHtvYmplY3R9IF9ob29rcyBIb29rcyB0byBiZSBhcHBsaWVkIGp1c3QgdG8gdGhlIGluc3RhbnRpYXRlZCByZWNvcmRcbiAgICAgKiBAcmV0dXJuIHtCdWlsZGVyQXBpfSBzZWxmXG4gICAgICovXG4gICAgYXR0ckFzUmVzb3VyY2U6IGZ1bmN0aW9uKF9hdHRyLCBfbW9kZWwsIF91cmwsIF9zb3VyY2UsIF9pbnZlcnNlT2YsIF9ob29rcykge1xuXG4gICAgICB2YXIgb3B0aW9ucywgZ2xvYmFsSG9va3M7IC8vIGdsb2JhbCByZWxhdGlvbiBjb25maWd1cmF0aW9uXG5cbiAgICAgIHRoaXMuYXR0ckRlZmF1bHQoX2F0dHIsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGlmKHR5cGVvZiBfbW9kZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgX21vZGVsID0gJGluamVjdG9yLmdldChfbW9kZWwpO1xuXG4gICAgICAgICAgLy8gcmV0cmlldmUgZ2xvYmFsIG9wdGlvbnNcbiAgICAgICAgICBvcHRpb25zID0gX21vZGVsLmdldFByb3BlcnR5KCdoYXNPbmUnLCB7fSk7XG4gICAgICAgICAgZ2xvYmFsSG9va3MgPSBvcHRpb25zLmhvb2tzO1xuXG4gICAgICAgICAgaWYoX2ludmVyc2VPZikge1xuICAgICAgICAgICAgdmFyIGRlc2MgPSBfbW9kZWwuJCRnZXREZXNjcmlwdGlvbihfaW52ZXJzZU9mKTtcbiAgICAgICAgICAgIGlmKCFkZXNjIHx8IGRlc2MucmVsYXRpb24gIT09ICdiZWxvbmdzX3RvJykge1xuICAgICAgICAgICAgICAkbG9nLndhcm4oJ011c3QgZGVmaW5lIGFuIGludmVyc2UgYmVsb25nc1RvIHJlbGF0aW9uIGZvciBpbnZlcnNlT2YgdG8gd29yaycpO1xuICAgICAgICAgICAgICBfaW52ZXJzZU9mID0gZmFsc2U7IC8vIGRpc2FibGUgdGhlIGludmVyc2UgaWYgbm8gaW52ZXJzZSByZWxhdGlvbiBpcyBmb3VuZC5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2NvcGUgPSB0aGlzLiRidWlsZFNjb3BlKF9tb2RlbCwgX3VybCB8fCBfbW9kZWwuZW5jb2RlVXJsTmFtZShfYXR0cikpLCBpbnN0O1xuXG4gICAgICAgIC8vIHNldHVwIHJlY29yZFxuICAgICAgICBpbnN0ID0gX21vZGVsLiRuZXcobnVsbCwgc2NvcGUpO1xuICAgICAgICBpZihnbG9iYWxIb29rcykgYXBwbHlIb29rcyhpbnN0LCBnbG9iYWxIb29rcywgdGhpcyk7XG4gICAgICAgIGlmKF9ob29rcykgYXBwbHlIb29rcyhpbnN0LCBfaG9va3MsIHRoaXMpO1xuICAgICAgICBpbnN0LiRkaXNwYXRjaCgnYWZ0ZXItaGFzLW9uZS1pbml0Jyk7XG5cbiAgICAgICAgaWYoX2ludmVyc2VPZikge1xuICAgICAgICAgIGluc3RbX2ludmVyc2VPZl0gPSB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGluc3Q7XG4gICAgICB9KTtcblxuICAgICAgaWYoX3NvdXJjZSB8fCBfdXJsKSB0aGlzLmF0dHJNYXAoX2F0dHIsIF9zb3VyY2UgfHwgX3VybCk7XG5cbiAgICAgIHRoaXMuYXR0ckRlY29kZXIoX2F0dHIsIGZ1bmN0aW9uKF9yYXcpIHtcbiAgICAgICAgICAgIHRoaXNbX2F0dHJdLiRkZWNvZGUoX3Jhdyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuYXR0ck1hc2soX2F0dHIsIFV0aWxzLldSSVRFX01BU0spXG4gICAgICAgICAgLmF0dHJNZXRhKF9hdHRyLCB7IHJlbGF0aW9uOiAnaGFzX29uZScgfSk7XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgUmVsYXRpb25CdWlsZGVyQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIFJlZ2lzdGVycyBhIG1vZGVsICoqcmVmZXJlbmNlKiogcmVsYXRpb24uXG4gICAgICpcbiAgICAgKiBBIHJlZmVyZW5jZSByZWxhdGlvbiBleHBlY3RzIHRoZSBob3N0IG9iamVjdCB0byBwcm92aWRlIHRoZSBwcmltYXJ5IGtleSBvZiB0aGUgcmVmZXJlbmNlZCBvYmplY3Qgb3IgdGhlIHJlZmVyZW5jZWQgb2JqZWN0IGl0c2VsZiAoaW5jbHVkaW5nIGl0cyBrZXkpLlxuICAgICAqXG4gICAgICogRm9yIGV4YW1wbGUsIGdpdmVuIHRoZSBmb2xsb3dpbmcgcmVzb3VyY2Ugc3RydWN0dXJlIHdpdGggYSBmb3JlaWduIGtleTpcbiAgICAgKlxuICAgICAqIGBgYGpzb25cbiAgICAgKiB7XG4gICAgICogICB1c2VyX2lkOiAyMFxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIE9yIHRoaXMgb3RoZXIgc3RydWN0dXJlIHdpdGggaW5saW5lZCBkYXRhOlxuICAgICAqXG4gICAgICogYGBganNvblxuICAgICAqIHtcbiAgICAgKiAgIHVzZXI6IHtcbiAgICAgKiAgICAgaWQ6IDMwLFxuICAgICAqICAgICBuYW1lOiAnU3RldmUnXG4gICAgICogICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogWW91IHNob3VsZCBkZWZpbmUgdGhlIGZvbGxvd2luZyBtb2RlbDpcbiAgICAgKlxuICAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAgKiByZXN0bW9kLm1vZGVsKCcvYmlrZXMnLCB7XG4gICAgICogICB1c2VyOiB7IGJlbG9uZ3NUbzogJ1VzZXInIH0gLy8gd29ya3MgZm9yIGJvdGggY2FzZXMgZGV0YWlsZWQgYWJvdmVcbiAgICAgKiB9KVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogVGhlIG9iamVjdCBnZW5lcmF0ZWQgYnkgdGhlIHJlbGF0aW9uIGlzIG5vdCBzY29wZWQgdG8gdGhlIGhvc3Qgb2JqZWN0LCBidXQgdG8gaXQncyBiYXNlIGNsYXNzIGluc3RlYWQgKG5vdCBsaWtlIGhhc09uZSksXG4gICAgICogc28gdGhlIHR5cGUgc2hvdWxkIG5vdCBiZSBuZXN0ZWQuXG4gICAgICpcbiAgICAgKiBJdHMgYWxzbyBwb3NpYmxlIHRvIG92ZXJyaWRlIHRoZSAqKmZvcmVpZ24ga2V5IG5hbWUqKi5cbiAgICAgKlxuICAgICAqIFdoZW4gYSBvYmplY3QgY29udGFpbmluZyBhIGJlbG9uZ3NUbyByZWZlcmVuY2UgaXMgZW5jb2RlZCBmb3IgYSBzZXJ2ZXIgcmVxdWVzdCwgb25seSB0aGUgcHJpbWFyeSBrZXkgdmFsdWUgaXMgc2VudCB1c2luZyB0aGVcbiAgICAgKiBzYW1lICoqZm9yZWlnbiBrZXkgbmFtZSoqIHRoYXQgd2FzIHVzaW5nIG9uIGRlY29kaW5nLiAoYHVzZXJfaWRgIGluIHRoZSBhYm92ZSBleGFtcGxlKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSAgX25hbWUgQXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xvYmplY3R9IF9tb2RlbCBPdGhlciBtb2RlbCwgc3VwcG9ydHMgYSBtb2RlbCBuYW1lIG9yIGEgZGlyZWN0IHJlZmVyZW5jZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX2tleSBmb3JlaWduIGtleSBwcm9wZXJ0eSBuYW1lIChvcHRpb25hbCwgZGVmYXVsdHMgdG8gX2F0dHIgKyAnX2lkJykuXG4gICAgICogQHBhcmFtIHtib29sfSBfcHJlZmV0Y2ggaWYgc2V0IHRvIHRydWUsICRmZXRjaCB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgY2FsbGVkIG9uIHJlbGF0aW9uIG9iamVjdCBsb2FkLlxuICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgKi9cbiAgICBhdHRyQXNSZWZlcmVuY2U6IGZ1bmN0aW9uKF9hdHRyLCBfbW9kZWwsIF9rZXksIF9wcmVmZXRjaCkge1xuXG4gICAgICB0aGlzLmF0dHJEZWZhdWx0KF9hdHRyLCBudWxsKVxuICAgICAgICAgIC5hdHRyTWFzayhfYXR0ciwgVXRpbHMuV1JJVEVfTUFTSylcbiAgICAgICAgICAuYXR0ck1ldGEoX2F0dHIsIHsgcmVsYXRpb246ICdiZWxvbmdzX3RvJyB9KTtcblxuICAgICAgZnVuY3Rpb24gbG9hZE1vZGVsKCkge1xuICAgICAgICBpZih0eXBlb2YgX21vZGVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIF9tb2RlbCA9ICRpbmplY3Rvci5nZXQoX21vZGVsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUT0RPOiB0aGUgZm9sbG93aW5nIGNvZGUgYXNzdW1lcyB0aGF0IGF0dHJpYnV0ZSBpcyBhdCByb290IGxldmVsISAod2hlbiB1c2VzIHRoaXNbX2F0dHJdIG9yIHRoaXNbX2F0dHIgKyAnSWQnXSlcblxuICAgICAgLy8gaW5saW5lIGRhdGEgaGFuZGxpbmdcbiAgICAgIHRoaXMuYXR0ckRlY29kZXIoX2F0dHIsIGZ1bmN0aW9uKF9yYXcpIHtcbiAgICAgICAgaWYoX3JhdyA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGxvYWRNb2RlbCgpO1xuICAgICAgICBpZighdGhpc1tfYXR0cl0gfHwgdGhpc1tfYXR0cl0uJHBrICE9PSBfbW9kZWwuaW5mZXJLZXkoX3JhdykpIHtcbiAgICAgICAgICB0aGlzW19hdHRyXSA9IF9tb2RlbC4kYnVpbGRSYXcoX3Jhdyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpc1tfYXR0cl0uJGRlY29kZShfcmF3KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGZvcmVpZ24ga2V5IGhhbmRsaW5nXG4gICAgICBpZihfa2V5ICE9PSBmYWxzZSkge1xuICAgICAgICB0aGlzLmF0dHJNYXAoX2F0dHIgKyAnSWQnLCBfa2V5IHx8ICcqJywgdHJ1ZSkgLy8gc2V0IGEgZm9yY2VkIG1hcHBpbmcgdG8gYWx3YXlzIGdlbmVyYXRlIGtleVxuICAgICAgICAgICAgLmF0dHJEZWNvZGVyKF9hdHRyICsgJ0lkJywgZnVuY3Rpb24oX3ZhbHVlKSB7XG4gICAgICAgICAgICAgIGlmKF92YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgICAgICAgICAgIGlmKCF0aGlzW19hdHRyXSB8fCB0aGlzW19hdHRyXS4kcGsgIT09IF92YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmKF92YWx1ZSAhPT0gbnVsbCAmJiBfdmFsdWUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICBsb2FkTW9kZWwoKTtcbiAgICAgICAgICAgICAgICAgIHRoaXNbX2F0dHJdID0gcGFja2VyQ2FjaGUucmVzb2x2ZShfbW9kZWwuJG5ldyhfdmFsdWUpKTsgLy8gcmVzb2x2ZSBpbm1lZGlhdGVsbHkgaWYgY2FjaGVkXG4gICAgICAgICAgICAgICAgICBpZihfcHJlZmV0Y2gpIHRoaXNbX2F0dHJdLiRmZXRjaCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB0aGlzW19hdHRyXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmF0dHJFbmNvZGVyKF9hdHRyICsgJ0lkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzW19hdHRyXSA/IHRoaXNbX2F0dHJdLiRwayA6IG51bGw7XG4gICAgICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBSZWxhdGlvbkJ1aWxkZXJBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gUmVnaXN0ZXJzIGEgbW9kZWwgKipyZWZlcmVuY2UqKiByZWxhdGlvbi5cbiAgICAgKlxuICAgICAqIEEgcmVmZXJlbmNlIHJlbGF0aW9uIGV4cGVjdHMgdGhlIGhvc3Qgb2JqZWN0IHRvIHByb3ZpZGUgdGhlIHByaW1hcnkga2V5IG9mIHRoZSByZWZlcmVuY2VkIG9iamVjdHMgb3IgdGhlIHJlZmVyZW5jZWQgb2JqZWN0cyB0aGVtc2VsdmVzIChpbmNsdWRpbmcgaXRzIGtleSkuXG4gICAgICpcbiAgICAgKiBGb3IgZXhhbXBsZSwgZ2l2ZW4gdGhlIGZvbGxvd2luZyByZXNvdXJjZSBzdHJ1Y3R1cmUgd2l0aCBhIGZvcmVpZ24ga2V5IGFycmF5OlxuICAgICAqXG4gICAgICogYGBganNvblxuICAgICAqIHtcbiAgICAgKiAgIHVzZXJzX2lkczogWzIwLCAzMF1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBPciB0aGlzIG90aGVyIHN0cnVjdHVyZSB3aXRoIGlubGluZWQgZGF0YTpcbiAgICAgKlxuICAgICAqIGBgYGpzb25cbiAgICAgKiB7XG4gICAgICogICB1c2VyczogW3tcbiAgICAgKiAgICAgaWQ6IDIwLFxuICAgICAqICAgICBuYW1lOiAnU3RldmUnXG4gICAgICogICB9LHtcbiAgICAgKiAgICAgaWQ6IDMwLFxuICAgICAqICAgICBuYW1lOiAnUGlsaSdcbiAgICAgKiAgIH1dXG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogWW91IHNob3VsZCBkZWZpbmUgdGhlIGZvbGxvd2luZyBtb2RlbDpcbiAgICAgKlxuICAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAgKiByZXN0bW9kLm1vZGVsKCcvYmlrZXMnLCB7XG4gICAgICogICB1c2VyczogeyBiZWxvbmdzVG9NYW55OiAnVXNlcicgfSAvLyB3b3JrcyBmb3IgYm90aCBjYXNlcyBkZXRhaWxlZCBhYm92ZVxuICAgICAqIH0pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBUaGUgb2JqZWN0IGdlbmVyYXRlZCBieSB0aGUgcmVsYXRpb24gaXMgbm90IHNjb3BlZCB0byB0aGUgaG9zdCBvYmplY3QsIGJ1dCB0byBpdCdzIGJhc2UgY2xhc3MgaW5zdGVhZCAodW5saWtlIGhhc01hbnkpLFxuICAgICAqIHNvIHRoZSByZWZlcmVuY2VkIHR5cGUgc2hvdWxkIG5vdCBiZSBuZXN0ZWQuXG4gICAgICpcbiAgICAgKiBXaGVuIGEgb2JqZWN0IGNvbnRhaW5pbmcgYSBiZWxvbmdzVG9NYW55IHJlZmVyZW5jZSBpcyBlbmNvZGVkIGZvciBhIHNlcnZlciByZXF1ZXN0LCBvbmx5IHRoZSBwcmltYXJ5IGtleSB2YWx1ZSBpcyBzZW50IGZvciBlYWNoIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSAgX25hbWUgQXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xvYmplY3R9IF9tb2RlbCBPdGhlciBtb2RlbCwgc3VwcG9ydHMgYSBtb2RlbCBuYW1lIG9yIGEgZGlyZWN0IHJlZmVyZW5jZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX2tleXMgU2VydmVyIG5hbWUgZm9yIHRoZSBwcm9wZXJ0eSB0aGF0IGhvbGRzIHRoZSByZWZlcmVuY2VkIGtleXMgaW4gcmVzcG9uc2UgYW5kIHJlcXVlc3QuXG4gICAgICogQHJldHVybiB7QnVpbGRlckFwaX0gc2VsZlxuICAgICAqL1xuICAgIGF0dHJBc1JlZmVyZW5jZVRvTWFueTogZnVuY3Rpb24oX2F0dHIsIF9tb2RlbCwgX2tleXMpIHtcblxuICAgICAgdGhpcy5hdHRyRGVmYXVsdChfYXR0ciwgZnVuY3Rpb24oKSB7IHJldHVybiBbXTsgfSlcbiAgICAgICAgICAuYXR0ck1hc2soX2F0dHIsIFV0aWxzLldSSVRFX01BU0spXG4gICAgICAgICAgLmF0dHJNZXRhKF9hdHRyLCB7IHJlbGF0aW9uOiAnYmVsb25nc190b19tYW55JyB9KTtcblxuICAgICAgLy8gVE9ETzogdGhlIGZvbGxvd2luZyBjb2RlIGFzc3VtZXMgdGhhdCBhdHRyaWJ1dGUgaXMgYXQgcm9vdCBsZXZlbCEgKHdoZW4gdXNlcyB0aGlzW19hdHRyXSlcblxuICAgICAgZnVuY3Rpb24gbG9hZE1vZGVsKCkge1xuICAgICAgICBpZih0eXBlb2YgX21vZGVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIF9tb2RlbCA9ICRpbmplY3Rvci5nZXQoX21vZGVsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBwcm9jZXNzSW5ib3VuZChfcmF3LCBfcmVmKSB7XG4gICAgICAgIGxvYWRNb2RlbCgpO1xuICAgICAgICBfcmVmLmxlbmd0aCA9IDA7XG4gICAgICAgIC8vIFRPRE86IHJldXNlIG9iamVjdHMgdGhhdCBkbyBub3QgY2hhbmdlIChjb21wYXJlICRwa3MpXG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGwgPSBfcmF3Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIGlmKHR5cGVvZiBfcmF3W2ldID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgX3JlZi5wdXNoKF9tb2RlbC4kYnVpbGRSYXcoX3Jhd1tpXSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfcmVmLnB1c2gocGFja2VyQ2FjaGUucmVzb2x2ZShfbW9kZWwuJG5ldyhfcmF3W2ldKSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBpbmxpbmUgZGF0YSBoYW5kbGluZ1xuICAgICAgdGhpcy5hdHRyRGVjb2RlcihfYXR0ciwgZnVuY3Rpb24oX3Jhdykge1xuICAgICAgICAvLyBUT0RPOiBpZiBfa2V5cyA9PSBfYXR0ciB0aGVuIGluYm91bmQgZGF0YSB3aWxsIGJlIHByb2Nlc3NlZCB0d2ljZSFcbiAgICAgICAgaWYoX3JhdykgcHJvY2Vzc0luYm91bmQoX3JhdywgdGhpc1tfYXR0cl0pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIGZvcmVpZ24ga2V5IGhhbmRsaW5nXG4gICAgICBpZihfa2V5cyAhPT0gZmFsc2UpIHtcbiAgICAgICAgdmFyIGF0dHJJZHMgPSBpbmZsZWN0b3Iuc2luZ3VsYXJpemUoX2F0dHIpICsgJ0lkcyc7XG4gICAgICAgIHRoaXMuYXR0ck1hcChhdHRySWRzLCBfa2V5cyB8fCAnKicsIHRydWUpXG4gICAgICAgICAgICAuYXR0ckRlY29kZXIoYXR0cklkcywgZnVuY3Rpb24oX3Jhdykge1xuICAgICAgICAgICAgICBpZihfcmF3KSBwcm9jZXNzSW5ib3VuZChfcmF3LCB0aGlzW19hdHRyXSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmF0dHJFbmNvZGVyKGF0dHJJZHMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gW10sIG90aGVycyA9IHRoaXNbX2F0dHJdO1xuICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwLCBsID0gb3RoZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG90aGVyc1tpXS4kcGspO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiByZXN0bW9kLm1peGluKGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZXh0ZW5kKCdhdHRyQXNDb2xsZWN0aW9uJywgRVhULmF0dHJBc0NvbGxlY3Rpb24sIFsnaGFzTWFueScsICdwYXRoJywgJ3NvdXJjZScsICdpbnZlcnNlT2YnLCAncGFyYW1zJywgJ2hvb2tzJ10pIC8vIFRPRE86IHJlbmFtZSBzb3VyY2UgdG8gbWFwLCBidXQgZGlzYWJsZSBhdHRyTWFwIGlmIG1hcCBpcyB1c2VkIGhlcmUuLi5cbiAgICAgICAgLmV4dGVuZCgnYXR0ckFzUmVzb3VyY2UnLCBFWFQuYXR0ckFzUmVzb3VyY2UsIFsnaGFzT25lJywgJ3BhdGgnLCAnc291cmNlJywgJ2ludmVyc2VPZicsICdob29rcyddKVxuICAgICAgICAuZXh0ZW5kKCdhdHRyQXNSZWZlcmVuY2UnLCBFWFQuYXR0ckFzUmVmZXJlbmNlLCBbJ2JlbG9uZ3NUbycsICdrZXknLCAncHJlZmV0Y2gnXSlcbiAgICAgICAgLmV4dGVuZCgnYXR0ckFzUmVmZXJlbmNlVG9NYW55JywgRVhULmF0dHJBc1JlZmVyZW5jZVRvTWFueSwgWydiZWxvbmdzVG9NYW55JywgJ2tleXMnXSk7XG4gIH0pO1xuXG59XSk7XG5STU1vZHVsZS5mYWN0b3J5KCdSTU1vZGVsRmFjdG9yeScsIFsnJGluamVjdG9yJywgJyRsb2cnLCAnaW5mbGVjdG9yJywgJ1JNVXRpbHMnLCAnUk1TY29wZUFwaScsICdSTUNvbW1vbkFwaScsICdSTVJlY29yZEFwaScsICdSTUxpc3RBcGknLCAnUk1Db2xsZWN0aW9uQXBpJywgJ1JNRXh0ZW5kZWRBcGknLCAnUk1TZXJpYWxpemVyJywgJ1JNQnVpbGRlcicsXG4gIGZ1bmN0aW9uKCRpbmplY3RvciwgJGxvZywgaW5mbGVjdG9yLCBVdGlscywgU2NvcGVBcGksIENvbW1vbkFwaSwgUmVjb3JkQXBpLCBMaXN0QXBpLCBDb2xsZWN0aW9uQXBpLCBFeHRlbmRlZEFwaSwgU2VyaWFsaXplciwgQnVpbGRlcikge1xuXG4gIHZhciBOQU1FX1JHWCA9IC8oLio/KShbXlxcL10rKVxcLz8kLyxcbiAgICAgIGV4dGVuZCA9IFV0aWxzLmV4dGVuZE92ZXJyaWRlbjtcblxuICByZXR1cm4gZnVuY3Rpb24oX2Jhc2VVcmwsIF9iYXNlQ2hhaW4pIHtcblxuICAgIC8vIElERUE6IG1ha2UgY29uc3RydWN0b3IgaW5hY2Nlc3NpYmxlLCB1c2Ugc2VwYXJhdGUgdHlwZSBmb3IgcmVjb3Jkcz9cbiAgICAvLyAqIFdpbGwgZW5zdXJlIHByb3BlciB1c2FnZS5cbiAgICAvLyAqIFdpbGwgbG9zZSB0eXBlIGNoZWNraW5nXG4gICAgZnVuY3Rpb24gTW9kZWwoX3Njb3BlLCBfcGspIHtcbiAgICAgIHRoaXMuJHNjb3BlID0gX3Njb3BlIHx8IE1vZGVsO1xuICAgICAgdGhpcy4kcGsgPSBfcGs7XG4gICAgICB0aGlzLiRpbml0aWFsaXplKCk7XG4gICAgfVxuXG4gICAgX2Jhc2VVcmwgPSBVdGlscy5jbGVhblVybChfYmFzZVVybCk7XG5cbiAgICB2YXIgY29uZmlnID0ge1xuICAgICAgICBwcmltYXJ5S2V5OiAnaWQnLFxuICAgICAgICB1cmxQcmVmaXg6IG51bGxcbiAgICAgIH0sXG4gICAgICBzZXJpYWxpemVyID0gbmV3IFNlcmlhbGl6ZXIoTW9kZWwpLFxuICAgICAgZGVmYXVsdHMgPSBbXSwgICAgICAgICAgICAgICAgICAgIC8vIGF0dHJpYnV0ZSBkZWZhdWx0cyBhcyBhbiBhcnJheSBvZiBba2V5LCB2YWx1ZV1cbiAgICAgIGNvbXB1dGVzID0gW10sICAgICAgICAgICAgICAgICAgICAvLyBjb21wdXRlZCBhdHRyaWJ1dGVzXG4gICAgICBtZXRhID0ge30sICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXRyaWJ1dGUgbWV0YWRhdGFcbiAgICAgIGhvb2tzID0ge30sXG4gICAgICBidWlsZGVyOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIG1vZGVsIGJ1aWxkZXJcblxuICAgIC8vIG1ha2Ugc3VyZSB0aGUgcmVzb3VyY2UgbmFtZSBhbmQgcGx1cmFsIG5hbWUgYXJlIGF2YWlsYWJsZSBpZiBwb3NpYmxlOlxuXG4gICAgaWYoIWNvbmZpZy5uYW1lICYmIF9iYXNlVXJsKSB7XG4gICAgICBjb25maWcubmFtZSA9IGluZmxlY3Rvci5zaW5ndWxhcml6ZShfYmFzZVVybC5yZXBsYWNlKE5BTUVfUkdYLCAnJDInKSk7XG4gICAgfVxuXG4gICAgaWYoIWNvbmZpZy5wbHVyYWwgJiYgY29uZmlnLm5hbWUpIHtcbiAgICAgIGNvbmZpZy5wbHVyYWwgPSBpbmZsZWN0b3IucGx1cmFsaXplKGNvbmZpZy5uYW1lKTtcbiAgICB9XG5cbiAgICB2YXIgQ29sbGVjdGlvbiA9IFV0aWxzLmJ1aWxkQXJyYXlUeXBlKCksXG4gICAgICAgIExpc3QgPSBVdGlscy5idWlsZEFycmF5VHlwZSgpLFxuICAgICAgICBEdW1teSA9IGZ1bmN0aW9uKF9hc0NvbGxlY3Rpb24pIHtcbiAgICAgICAgICB0aGlzLiRpc0NvbGxlY3Rpb24gPSBfYXNDb2xsZWN0aW9uO1xuICAgICAgICAgIHRoaXMuJGluaXRpYWxpemUoKTsgLy8gVE9ETzogZGVwcmVjYXRlIHRoaXNcbiAgICAgICAgfTtcblxuICAgIC8vIENvbGxlY3Rpb24gZmFjdG9yeVxuICAgIGZ1bmN0aW9uIG5ld0NvbGxlY3Rpb24oX3BhcmFtcywgX3Njb3BlKSB7XG4gICAgICB2YXIgY29sID0gbmV3IENvbGxlY3Rpb24oKTtcbiAgICAgIGNvbC4kc2NvcGUgPSBfc2NvcGUgfHwgTW9kZWw7XG4gICAgICBjb2wuJHBhcmFtcyA9IF9wYXJhbXM7XG4gICAgICBjb2wuJGluaXRpYWxpemUoKTtcbiAgICAgIHJldHVybiBjb2w7XG4gICAgfVxuXG4gICAgLy8vLy8gU2V0dXAgc3RhdGljIGFwaVxuXG4gICAgLyoqXG4gICAgICogQGNsYXNzIFN0YXRpY0FwaVxuICAgICAqIEBleHRlbmRzIFNjb3BlQXBpXG4gICAgICogQGV4dGVuZHMgQ29tbW9uQXBpXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIFRoZSByZXN0bW9kIHR5cGUgQVBJLCBldmVyeSBnZW5lcmF0ZWQgcmVzdG1vZCBtb2RlbCB0eXBlIGV4cG9zZXMgdGhpcyBBUEkuXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkge29iamVjdH0gJHR5cGUgUmVmZXJlbmNlIHRvIHRoZSB0eXBlIGl0c2VsZiwgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCB0aGUge0BsaW5rIFNjb3BlQXBpfVxuICAgICAqXG4gICAgICogIyMjIyBBYm91dCBvYmplY3QgY3JlYXRpb25cbiAgICAgKlxuICAgICAqIERpcmVjdCBjb25zdHJ1Y3Rpb24gb2Ygb2JqZWN0IGluc3RhbmNlcyB1c2luZyBgbmV3YCBpcyBub3QgcmVjb21tZW5kZWQuIEEgY29sbGVjdGlvbiBvZlxuICAgICAqIHN0YXRpYyBtZXRob2RzIGFyZSBhdmFpbGFibGUgdG8gZ2VuZXJhdGUgbmV3IGluc3RhbmNlcyBvZiBhIG1vZGVsLCBmb3IgbW9yZSBpbmZvcm1hdGlvblxuICAgICAqIHJlYWQgdGhlIHtAbGluayBNb2RlbENvbGxlY3Rpb259IGRvY3VtZW50YXRpb24uXG4gICAgICovXG4gICAgZXh0ZW5kKE1vZGVsLCB7XG5cbiAgICAgIC8vIGdldHMgYW4gYXR0cmlidXRlIGRlc2NyaXB0aW9uIChtZXRhZGF0YSlcbiAgICAgICQkZ2V0RGVzY3JpcHRpb246IGZ1bmN0aW9uKF9hdHRyaWJ1dGUpIHtcbiAgICAgICAgcmV0dXJuIG1ldGFbX2F0dHJpYnV0ZV07XG4gICAgICB9LFxuXG4gICAgICAvLyBkZWZpbml0aW9uIGNoYWluXG4gICAgICAkJGNoYWluOiBbXSxcblxuICAgICAgLy8ga2VlcCBhIHJlZmVyZW5jZSB0byB0eXBlIGl0c2VsZiBmb3Igc2NvcGUgYXBpIGNvbXBhdGliaWxpdHlcbiAgICAgICR0eXBlOiBNb2RlbCxcblxuICAgICAgLy8gY3JlYXRlcyBhIG5ldyBtb2RlbCBib3VuZCBieSBkZWZhdWx0IHRvIHRoZSBzdGF0aWMgc2NvcGVcbiAgICAgICRuZXc6IGZ1bmN0aW9uKF9waywgX3Njb3BlKSB7XG4gICAgICAgIHJldHVybiBuZXcgTW9kZWwoX3Njb3BlIHx8IE1vZGVsLCBfcGspO1xuICAgICAgfSxcblxuICAgICAgLy8gY3JlYXRlcyBhIG5ldyBjb2xsZWN0aW9uIGJvdW5kIGJ5IGRlZmF1bHQgdG8gdGhlIHN0YXRpYyBzY29wZVxuICAgICAgJGNvbGxlY3Rpb246IG5ld0NvbGxlY3Rpb24sXG5cbiAgICAgIC8vIGdldHMgc2NvcGUgdXJsXG4gICAgICAkdXJsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy51cmxQcmVmaXggPyBVdGlscy5qb2luVXJsKGNvbmZpZy51cmxQcmVmaXgsIF9iYXNlVXJsKSA6IF9iYXNlVXJsO1xuICAgICAgfSxcblxuICAgICAgLy8gYnViYmxlcyBldmVudHMgY29tbWluZyBmcm9tIHJlbGF0ZWQgcmVzb3VyY2VzXG4gICAgICAkZGlzcGF0Y2g6IGZ1bmN0aW9uKF9ob29rLCBfYXJncywgX2N0eCkge1xuICAgICAgICB2YXIgY2JzID0gaG9va3NbX2hvb2tdLCBpLCBjYjtcbiAgICAgICAgaWYoY2JzKSB7XG4gICAgICAgICAgZm9yKGkgPSAwOyAhIShjYiA9IGNic1tpXSk7IGkrKykge1xuICAgICAgICAgICAgY2IuYXBwbHkoX2N0eCB8fCB0aGlzLCBfYXJncyB8fCBbXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgU3RhdGljQXBpI1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICpcbiAgICAgICAqIEV4dHJhY3RzIHRoZSBwcmltYXJ5IGtleSBmcm9tIHJhdyByZWNvcmQgZGF0YS5cbiAgICAgICAqXG4gICAgICAgKiBVc2VzIHRoZSBrZXkgY29uZmlndXJlZCBpbiB0aGUgUFJJTUFSWV9LRVkgdmFyaWFibGUgb3IgJ2lkJyBieSBkZWZhdWx0LlxuICAgICAgICpcbiAgICAgICAqIFNvbWUgY29uc2lkZXJhdGlvbnM6XG4gICAgICAgKiAqIFRoaXMgbWV0aG9kIGNhbiBiZSBvdmVycmlkZW4gdG8gaGFuZGxlIG90aGVyIHNjZW5hcmlvcy5cbiAgICAgICAqICogVGhpcyBtZXRob2Qgc2hvdWxkIG5vdCBjaGFuZ2UgdGhlIHJhdyBkYXRhIHBhc3NlZCB0byBpdC5cbiAgICAgICAqICogVGhlIHByaW1hcnkga2V5IHZhbHVlIGV4dHJhY3RlZCBieSB0aGlzIG1ldGhvZCBzaG91bGQgYmUgY29tcGFyYWJsZSB1c2luZyB0aGUgPT0gb3BlcmF0b3IuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtICB7c3RyaW5nfSBfcmF3RGF0YSBSYXcgb2JqZWN0IGRhdGEgKGJlZm9yZSBpdCBnb2VzIGludG8gZGVjb2RlKVxuICAgICAgICogQHJldHVybiB7bWl4ZWR9IFRoZSBwcmltYXJ5IGtleSB2YWx1ZS5cbiAgICAgICAqL1xuICAgICAgaW5mZXJLZXk6IGZ1bmN0aW9uKF9yYXdEYXRhKSB7XG4gICAgICAgIGlmKCFfcmF3RGF0YSB8fCB0eXBlb2YgX3Jhd0RhdGFbY29uZmlnLnByaW1hcnlLZXldID09PSAndW5kZWZpbmVkJykgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiBfcmF3RGF0YVtjb25maWcucHJpbWFyeUtleV07XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBTdGF0aWNBcGkjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKlxuICAgICAgICogR2V0cyBhIG1vZGVsJ3MgaW50ZXJuYWwgcHJvcGVydHkgdmFsdWUuXG4gICAgICAgKlxuICAgICAgICogU29tZSBidWlsdGluIHByb3BlcnRpZXM6XG4gICAgICAgKiAqIHVybFxuICAgICAgICogKiB1cmxQcmVmaXhcbiAgICAgICAqICogcHJpbWFyeUtleVxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSAge3N0cmluZ30gX2tleSBQcm9wZXJ0eSBuYW1lXG4gICAgICAgKiBAcGFyYW0gIHttaXhlZH0gX2RlZmF1bHQgVmFsdWUgdG8gcmV0dXJuIGlmIHByb3BlcnR5IGlzIG5vdCBkZWZpbmVkXG4gICAgICAgKiBAcmV0dXJuIHttaXhlZH0gdmFsdWVcbiAgICAgICAqL1xuICAgICAgZ2V0UHJvcGVydHk6IGZ1bmN0aW9uKF9rZXksIF9kZWZhdWx0KSB7XG4gICAgICAgIHZhciB2YWwgPSBjb25maWdbX2tleV07XG4gICAgICAgIHJldHVybiB2YWwgIT09IHVuZGVmaW5lZCA/IHZhbCA6IF9kZWZhdWx0O1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgU3RhdGljQXBpI1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBSZXR1cm5zIHRydWUgaWYgbW9kZWwgaXMgbmVzdGVkLlxuICAgICAgICpcbiAgICAgICAqIEFuIG5lc3RlZCBtb2RlbCBjYW4gb25seSBiZSB1c2VkIGFzIGEgbmVzdGVkIHJlc291cmNlICh1c2luZyBoYXNNYW55IG9yIGhhc09uZSByZWxhdGlvbnMpXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiBtb2RlbCBpcyBuZXN0ZWQuXG4gICAgICAgKi9cbiAgICAgIGlzTmVzdGVkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICFfYmFzZVVybDtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIFN0YXRpY0FwaSNcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gUmV0dXJucyBhIHJlc291cmNlIGJvdW5kIHRvIGEgZ2l2ZW4gdXJsLCB3aXRoIG5vIHBhcmVudCBzY29wZS5cbiAgICAgICAqXG4gICAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIHRvIGNyZWF0ZSBzaW5nbGV0b24gcmVzb3VyY2VzOlxuICAgICAgICpcbiAgICAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAgICAqIG1vZHVsZSgnQmlrZVNob3AnLCBbXSkuZmFjdG9yeSgnU3RhdHVzJywgZnVuY3Rpb24ocmVzdG1vZCkge1xuICAgICAgICogICByZXR1cm4gcmVzdG1vZC5tb2RlbChudWxsKS4kc2luZ2xlKCcvYXBpL3N0YXR1cycpO1xuICAgICAgICogfTspXG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gX3VybCBVcmwgdG8gYm91bmQgcmVzb3VyY2UgdG8uXG4gICAgICAgKiBAcmV0dXJuIHtNb2RlbH0gbmV3IHJlc291cmNlIGluc3RhbmNlLlxuICAgICAgICovXG4gICAgICBzaW5nbGU6IGZ1bmN0aW9uKF91cmwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNb2RlbCh7XG4gICAgICAgICAgJHVybEZvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gY29uZmlnLnVybFByZWZpeCA/IFV0aWxzLmpvaW5VcmwoY29uZmlnLnVybFByZWZpeCwgX3VybCkgOiBfdXJsO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgJycpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBCdWlsZHMgYSBuZXcgZHVtbXkgcmVzb3VyY2UsIHRoZSBkdW1teSByZXNvdXJjZSBjYW4gYmUgdXNlZCB0byBleGVjdXRlIHJhbmRvbSBxdWVyaWVzXG4gICAgICAgKiB1c2luZyB0aGUgc2FtZSBpbmZyYXN0cnVjdHVyZSBhcyByZWNvcmRzIGFuZCBjb2xsZWN0aW9ucy5cbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJuIHtEdW1teX0gdGhlIGR1bW15IG9iamVjdFxuICAgICAgICovXG4gICAgICBkdW1teTogZnVuY3Rpb24oX2FzQ29sbGVjdGlvbikge1xuICAgICAgICByZXR1cm4gbmV3IER1bW15KF9hc0NvbGxlY3Rpb24pO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGVzIGEgbmV3IHJlY29yZCBsaXN0LlxuICAgICAgICpcbiAgICAgICAqIEEgbGlzdCBpcyBhIG9yZGVyZWQgc2V0IG9mIHJlY29yZHMgbm90IGJvdW5kIHRvIGEgcGFydGljdWxhciBzY29wZS5cbiAgICAgICAqXG4gICAgICAgKiBDb250YWluZWQgcmVjb3JkcyBjYW4gYmVsb25nIHRvIGFueSBzY29wZS5cbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJuIHtMaXN0fSB0aGUgbmV3IGxpc3RcbiAgICAgICAqL1xuICAgICAgbGlzdDogZnVuY3Rpb24oX2l0ZW1zKSB7XG4gICAgICAgIHZhciBsaXN0ID0gbmV3IExpc3QoKTtcbiAgICAgICAgaWYoX2l0ZW1zKSBsaXN0LnB1c2guYXBwbHkobGlzdCwgX2l0ZW1zKTtcbiAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBTdGF0aWNBcGkjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIFJldHVybnMgdGhlIG1vZGVsIEFQSSBuYW1lLlxuICAgICAgICpcbiAgICAgICAqIFRoaXMgbmFtZSBzaG91bGQgbWF0Y2ggdGhlIG9uZSB1c2VkIHRocm91Z2hvdXQgdGhlIEFQSS4gSXQncyBvbmx5IHVzZWQgYnkgc29tZSBleHRlbmRlZFxuICAgICAgICogZnVuY3Rpb25hbGl0eSwgbGlrZSB0aGUgZGVmYXVsdCBwYWNrZXIuXG4gICAgICAgKlxuICAgICAgICogQnkgZGVmYXVsdCBtb2RlbCBuYW1lIGlzIGluZmVyZWQgZnJvbSB0aGUgdXJsLCBidXQgZm9yIG5lc3RlZCBtb2RlbHMgYW5kIHNwZWNpYWwgY2FzZXNcbiAgICAgICAqIGl0IHNob3VsZCBiZSBtYW51YWxseSBzZXQgYnkgd3JpdGluZyB0aGUgbmFtZSBhbmQgcGx1cmFsIHByb3BlcnRpZXM6XG4gICAgICAgKlxuICAgICAgICogYGBgamF2YXNjcmlwdFxuICAgICAgICogcmVzdG1vZC5tb2RlbChudWxsLCB7XG4gICAgICAgKiAgIF9fbmFtZV9fOiAncmVzb3VyY2UnLFxuICAgICAgICogICBfX3BsdXJhbF9fOiAncmVzb3VyY2luZXNzJyAvLyBzZXQgb25seSBpZiBpbmZsZWN0b3IgY2FudCBwcm9wZXJseSBnZXNzIHRoZSBuYW1lLlxuICAgICAgICogfSk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0cnVlLCByZXR1cm4gcGx1cmFsIG5hbWVcbiAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGJhc2UgdXJsLlxuICAgICAgICovXG4gICAgICBpZGVudGl0eTogZnVuY3Rpb24oX3BsdXJhbCkge1xuICAgICAgICByZXR1cm4gX3BsdXJhbCA/IGNvbmZpZy5wbHVyYWwgOiBjb25maWcubmFtZTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIFN0YXRpY0FwaSNcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gTW9kaWZpZXMgbW9kZWwgYmVoYXZpb3IuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtcyB7bWl4ZWR9IF9taXhpbnMgT25lIG9yIG1vcmUgbWl4aW5zIG9yIG1vZGVsIGRlZmluaXRpb25zLlxuICAgICAgICogQHJldHVybiB7TW9kZWx9IFRoZSBtb2RlbFxuICAgICAgICovXG4gICAgICBtaXg6IGZ1bmN0aW9uKC8qIG1peGlucyAqLykge1xuICAgICAgICBidWlsZGVyLmNoYWluKGFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuJCRjaGFpbi5wdXNoLmFwcGx5KHRoaXMuJCRjaGFpbiwgYXJndW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuXG4gICAgICAvLyBTdHJhdGVnaWVzXG5cbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIFN0YXRpY0FwaSNcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gVGhlIG1vZGVsIHVucGFja2luZyBzdHJhdGVneVxuICAgICAgICpcbiAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB0byBleHRyYWN0IHJlY29yZCBkYXRhIGZyb20gYSByZXF1ZXN0IHJlc3BvbnNlLCBpdHMgYWxzb1xuICAgICAgICogcmVzcG9uc2libGUgb2YgaGFuZGxpbmcgdGhlIHJlc3BvbnNlIG1ldGFkYXRhLlxuICAgICAgICpcbiAgICAgICAqIE92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGNoYW5nZSB0aGUgbWV0YWRhdGEgcHJvY2Vzc2luZyBzdHJhdGVneSwgYnkgZGVmYXVsdCBpdHMgYSBub29wXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtcyB7bWl4ZWR9IF9yZXNvdXJjZSBSZWxhdGVkIHJlc291cmNlIGluc3RhbmNlXG4gICAgICAgKiBAcGFyYW1zIHttaXhlZH0gX3JhdyBSZXNwb25zZSByYXcgZGF0YVxuICAgICAgICogQHJldHVybiB7bWl4ZWR9IFJlc291cmNlIHJhdyBkYXRhXG4gICAgICAgKi9cbiAgICAgIHVucGFjazogZnVuY3Rpb24oX3Jlc291cmNlLCBfcmF3KSB7IHJldHVybiBfcmF3OyB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBTdGF0aWNBcGkjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIFRoZSBtb2RlbCBwYWNraW5nIHN0cmF0ZWd5XG4gICAgICAgKlxuICAgICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIHRvIHdyYXAgcmF3IHJlY29yZCBkYXRhIHRvIGJlIHNlbnQgaW4gYSByZXF1ZXN0LlxuICAgICAgICpcbiAgICAgICAqIE92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGNoYW5nZSB0aGUgcmVxdWVzdCBwYWNraW5nIHN0cmF0ZWd5LCBieSBkZWZhdWx0IGl0cyBhIG5vb3BcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW1zIHttaXhlZH0gX3Jlc291cmNlIFJlbGF0ZWQgcmVzb3VyY2UgaW5zdGFuY2VcbiAgICAgICAqIEBwYXJhbXMge21peGVkfSBfcmF3IFJlY29yZCBkYXRhIHRvIGJlIHNlbnQgKGNhbiBiZSBhbiBhcnJheSBpZiByZXNvdXJjZSBpcyBjb2xsZWN0aW9uKVxuICAgICAgICogQHJldHVybiB7bWl4ZWR9IFdyYXBwZWQgZGF0YVxuICAgICAgICovXG4gICAgICBwYWNrOiBmdW5jdGlvbihfcmVjb3JkLCBfcmF3KSB7IHJldHVybiBfcmF3OyB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBTdGF0aWNBcGkjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIFRoZSBtb2RlbCBkZWNvZGluZyBzdHJhdGVneVxuICAgICAgICpcbiAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB0byBwb3B1bGF0ZSBhIHJlY29yZCBmcm9tIHJhdyBkYXRhICh1bnBwYWNrZWQpXG4gICAgICAgKi9cbiAgICAgIGRlY29kZTogc2VyaWFsaXplci5kZWNvZGUsXG5cbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIFN0YXRpY0FwaSNcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gVGhlIG1vZGVsIGVuY29kaW5nIHN0cmF0ZWd5XG4gICAgICAgKlxuICAgICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIHRvIGV4dHJhY3QgcmF3IGRhdGEgZnJvbSBhIHJlY29yZCB0byBiZSBzZW50IHRvIHNlcnZlciAoYmVmb3JlIHBhY2tpbmcpXG4gICAgICAgKi9cbiAgICAgIGVuY29kZTogc2VyaWFsaXplci5lbmNvZGUsXG5cbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIFN0YXRpY0FwaSNcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gVGhlIG1vZGVsIG5hbWUgZGVjb2Rpbmcgc3RyYXRlZ3lcbiAgICAgICAqXG4gICAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgb24gZXZlcnkgcmF3IHJlY29yZCBkYXRhIHByb3BlcnR5IHRvIHJlbmFtZSBpdCwgYnkgZGVmYXVsdCBpcyBub3QgZGVmaW5lZC5cbiAgICAgICAqXG4gICAgICAgKiBPdmVycmlkZSB0aGlzIG1ldGhvZCB0byBjaGFuZ2UgdGhlIHByb3BlcnR5IHJlbmFtaW5nIHN0cmF0ZWd5LlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbXMge3N0cmluZ30gX25hbWUgUmVzcG9uc2UgKHJhdykgbmFtZVxuICAgICAgICogQHJldHVybiB7c3RyaW5nfSBSZWNvcmQgbmFtZVxuICAgICAgICovXG4gICAgICBkZWNvZGVOYW1lOiBudWxsLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBTdGF0aWNBcGkjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIFRoZSBtb2RlbCBuYW1lIGVuY29kaW5nIHN0cmF0ZWd5XG4gICAgICAgKlxuICAgICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIHdoZW4gZW5jb2RpbmcgYSByZWNvcmQgdG8gcmVuYW1lIHRoZSByZWNvcmQgcHJvcGVydGllcyBpbnRvIHRoZSByYXcgZGF0YSBwcm9wZXJ0aWVzLFxuICAgICAgICogYnkgZGVmYXVsdCBpcyBub3QgZGVmaW5lZC5cbiAgICAgICAqXG4gICAgICAgKiBPdmVycmlkZSB0aGlzIG1ldGhvZCB0byBjaGFuZ2UgdGhlIHByb3BlcnR5IHJlbmFtaW5nIHN0cmF0ZWd5XG4gICAgICAgKlxuICAgICAgICogQHBhcmFtcyB7c3RyaW5nfSBfbmFtZSBSZWNvcmQgbmFtZVxuICAgICAgICogQHJldHVybiB7c3RyaW5nfSBSZXNwb25zZSAocmF3KSBuYW1lXG4gICAgICAgKi9cbiAgICAgIGVuY29kZU5hbWU6IG51bGwsXG5cbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIFN0YXRpY0FwaSNcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gVGhlIG1vZGVsIG5hbWUgdG8gdXJsIGVuY29kaW5nIHN0cmF0ZWd5XG4gICAgICAgKlxuICAgICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIHdoZW4gdHJhbnNsYXRpbmcgYSBuYW1lIGludG8gYW4gdXJsIGZyYWdtZW50IChtYWlubHkgYnkgcmVsYXRpb25zKS5cbiAgICAgICAqXG4gICAgICAgKiBCeSBkZWZhdWx0IGl0IHVzZXMgdGhlIGBpbmZsZWN0b3IucGFyYW1ldGVyaXplYCBtZXRob2QsIGluIDEuMiB0aGlzIHdpbGwgY2hhbmdlIGFuZCB0aGUgZGVmYXVsdFxuICAgICAgICogYmVoYXZpb3VyIHdpbGwgYmUgdG8gZG8gbm90aGluZy5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW1zIHtzdHJpbmd9IF9uYW1lIGxvY2FsIG5hbWVcbiAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gdXJsIGZyYWdtZW50XG4gICAgICAgKi9cbiAgICAgIGVuY29kZVVybE5hbWU6IGZ1bmN0aW9uKF9uYW1lKSB7XG4gICAgICAgICRsb2cud2FybignRGVmYXVsdCBwYXJlbWV0ZXJpemF0aW9uIG9mIHVybHMgd2lsbCBiZSBkaXNhYmxlZCBpbiAxLjIsIG92ZXJyaWRlIE1vZGVsLmVuY29kZVVybE5hbWUgd2l0aCBpbmZsZWN0b3IucGFyYW1ldGVyaXplIGluIHlvdXIgYmFzZSBtb2RlbCB0byBrZWVwIHRoZSBzYW1lIGJlaGF2aW91ci4nKTtcbiAgICAgICAgcmV0dXJuIGluZmxlY3Rvci5wYXJhbWV0ZXJpemUoX25hbWUpO1xuICAgICAgfVxuXG4gICAgfSwgU2NvcGVBcGkpO1xuXG4gICAgLy8vLy8gU2V0dXAgcmVjb3JkIGFwaVxuXG4gICAgZXh0ZW5kKE1vZGVsLnByb3RvdHlwZSwge1xuXG4gICAgICAkdHlwZTogTW9kZWwsXG5cbiAgICAgIC8vIGRlZmF1bHQgaW5pdGlhbGl6ZXI6IGxvYWRzIHRoZSBkZWZhdWx0IHBhcmFtZXRlciB2YWx1ZXNcbiAgICAgICRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHRtcCwgaSwgc2VsZiA9IHRoaXM7XG4gICAgICAgIGZvcihpID0gMDsgKHRtcCA9IGRlZmF1bHRzW2ldKTsgaSsrKSB7XG4gICAgICAgICAgdGhpc1t0bXBbMF1dID0gKHR5cGVvZiB0bXBbMV0gPT09ICdmdW5jdGlvbicpID8gdG1wWzFdLmFwcGx5KHRoaXMpIDogdG1wWzFdO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yKGkgPSAwOyAodG1wID0gY29tcHV0ZXNbaV0pOyBpKyspIHtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgdG1wWzBdLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZ2V0OiB0bXBbMV1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfSwgQ29tbW9uQXBpLCBSZWNvcmRBcGksIEV4dGVuZGVkQXBpKTtcblxuICAgIC8vLy8vIFNldHVwIGNvbGxlY3Rpb24gYXBpXG5cbiAgICBleHRlbmQoQ29sbGVjdGlvbi5wcm90b3R5cGUsIHtcblxuICAgICAgJHR5cGU6IE1vZGVsLFxuXG4gICAgICAvLyBwcm92aWRlIHJlY29yZCBjb250cnVjdG9yXG4gICAgICAkbmV3OiBmdW5jdGlvbihfcGssIF9zY29wZSkge1xuICAgICAgICByZXR1cm4gTW9kZWwuJG5ldyhfcGssIF9zY29wZSB8fCB0aGlzKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIHByb3ZpZGUgY29sbGVjdGlvbiBjb25zdHJ1Y3RvclxuICAgICAgJGNvbGxlY3Rpb246IGZ1bmN0aW9uKF9wYXJhbXMsIF9zY29wZSkge1xuICAgICAgICBfcGFyYW1zID0gdGhpcy4kcGFyYW1zID8gYW5ndWxhci5leHRlbmQoe30sIHRoaXMuJHBhcmFtcywgX3BhcmFtcykgOiBfcGFyYW1zO1xuICAgICAgICByZXR1cm4gbmV3Q29sbGVjdGlvbihfcGFyYW1zLCBfc2NvcGUgfHwgdGhpcy4kc2NvcGUpO1xuICAgICAgfVxuXG4gICAgfSwgTGlzdEFwaSwgU2NvcGVBcGksIENvbW1vbkFwaSwgQ29sbGVjdGlvbkFwaSwgRXh0ZW5kZWRBcGkpO1xuXG4gICAgLy8vLy8gU2V0dXAgbGlzdCBhcGlcblxuICAgIGV4dGVuZChMaXN0LnByb3RvdHlwZSwge1xuXG4gICAgICAkdHlwZTogTW9kZWxcblxuICAgIH0sIExpc3RBcGksIENvbW1vbkFwaSk7XG5cbiAgICAvLy8vLyBTZXR1cCBkdW1teSBhcGlcblxuICAgIGV4dGVuZChEdW1teS5wcm90b3R5cGUsIHtcblxuICAgICAgJHR5cGU6IE1vZGVsLFxuXG4gICAgICAkaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIE5vdGhpbmcgYnkgZGVmYXVsdFxuICAgICAgfVxuXG4gICAgfSwgQ29tbW9uQXBpKTtcblxuICAgIC8vLy8vIFNldHVwIGJ1aWxkZXJcblxuICAgIHZhciBBUElTID0ge1xuICAgICAgTW9kZWw6IE1vZGVsLFxuICAgICAgUmVjb3JkOiBNb2RlbC5wcm90b3R5cGUsXG4gICAgICBDb2xsZWN0aW9uOiBDb2xsZWN0aW9uLnByb3RvdHlwZSxcbiAgICAgIExpc3Q6IExpc3QucHJvdG90eXBlLFxuICAgICAgRHVtbXk6IER1bW15LnByb3RvdHlwZVxuICAgIH07XG5cbiAgICAvLyBoZWxwZXIgdXNlZCB0byBleHRlbmQgYXBpJ3NcbiAgICBmdW5jdGlvbiBoZWxwRGVmaW5lKF9hcGksIF9uYW1lLCBfZnVuKSB7XG4gICAgICB2YXIgYXBpID0gQVBJU1tfYXBpXTtcblxuICAgICAgVXRpbHMuYXNzZXJ0KCEhYXBpLCAnSW52YWxpZCBhcGkgbmFtZSAkMScsIF9hcGkpO1xuXG4gICAgICBpZihfbmFtZSkge1xuICAgICAgICBhcGlbX25hbWVdID0gVXRpbHMub3ZlcnJpZGUoYXBpW19uYW1lXSwgX2Z1bik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBVdGlscy5leHRlbmRPdmVycmlkZW4oYXBpLCBfZnVuKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBsb2FkIHRoZSBidWlsZGVyXG4gICAgYnVpbGRlciA9IG5ldyBCdWlsZGVyKGFuZ3VsYXIuZXh0ZW5kKHNlcmlhbGl6ZXIuZHNsKCksIHtcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgQnVpbGRlckFwaSNcbiAgICAgICAqXG4gICAgICAgKiBTZXRzIG9uZSBvZiB0aGUgbW9kZWwncyBjb25maWd1cmF0aW9uIHByb3BlcnRpZXMuXG4gICAgICAgKlxuICAgICAgICogVGhlIGZvbGxvd2luZyBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMgYXJlIGF2YWlsYWJsZSBieSBkZWZhdWx0OlxuICAgICAgICogKiBwcmltYXJ5S2V5OiBUaGUgbW9kZWwncyBwcmltYXJ5IGtleSwgZGVmYXVsdHMgdG8gKippZCoqLiBLZXlzIG11c3QgdXNlIHNlcnZlciBuYW1pbmcgY29udmVudGlvbiFcbiAgICAgICAqICogdXJsUHJlZml4OiBVcmwgcHJlZml4IHRvIHByZXBlbmQgdG8gcmVzb3VyY2UgdXJsLCB1c2VmdWxsIHRvIHVzZSBpbiBhIGJhc2UgbWl4aW4gd2hlbiBtdWx0aXBsZXMgbW9kZWxzIGhhdmUgdGhlIHNhbWUgcHJlZml4LlxuICAgICAgICogKiB1cmw6IFRoZSByZXNvdXJjZSBiYXNlIHVybCwgbnVsbCBieSBkZWZhdWx0LiBJZiBub3QgZ2l2ZW4gcmVzb3VyY2UgaXMgY29uc2lkZXJlZCBuZXN0ZWQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF9rZXkgVGhlIGNvbmZpZ3VyYXRpb24ga2V5IHRvIHNldC5cbiAgICAgICAqIEBwYXJhbSB7bWl4ZWR9IF92YWx1ZSBUaGUgY29uZmlndXJhdGlvbiB2YWx1ZS5cbiAgICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgICAqL1xuICAgICAgc2V0UHJvcGVydHk6IGZ1bmN0aW9uIChfa2V5LCBfdmFsdWUpIHtcbiAgICAgICAgY29uZmlnW19rZXldID0gX3ZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIEJ1aWxkZXJBcGkjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIFNldHMgdGhlIGRlZmF1bHQgdmFsdWUgZm9yIGFuIGF0dHJpYnV0ZS5cbiAgICAgICAqXG4gICAgICAgKiBEZWZhdWx0cyB2YWx1ZXMgYXJlIHNldCBvbmx5IG9uIG9iamVjdCBjb25zdHJ1Y3Rpb24gcGhhc2UuXG4gICAgICAgKlxuICAgICAgICogaWYgYF9pbml0YCBpcyBhIGZ1bmN0aW9uLCB0aGVuIGl0cyBldmFsdWF0ZWQgZXZlcnkgdGltZSB0aGVcbiAgICAgICAqIGRlZmF1bHQgdmFsdWUgaXMgcmVxdWlyZWQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF9hdHRyIEF0dHJpYnV0ZSBuYW1lXG4gICAgICAgKiBAcGFyYW0ge21peGVkfSBfaW5pdCBEZWZhdWxmIHZhbHVlIC8gaW5pbGluZSBmdW5jdGlvblxuICAgICAgICogQHJldHVybiB7QnVpbGRlckFwaX0gc2VsZlxuICAgICAgICovXG4gICAgICBhdHRyRGVmYXVsdDogZnVuY3Rpb24oX2F0dHIsIF9pbml0KSB7XG4gICAgICAgIGRlZmF1bHRzLnB1c2goW19hdHRyLCBfaW5pdF0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIEJ1aWxkZXJBcGkjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIFNldHMgYSBjb21wdXRlZCB2YWx1ZSBmb3IgYW4gYXR0cmlidXRlLlxuICAgICAgICpcbiAgICAgICAqIENvbXB1dGVkIHZhbHVlcyBhcmUgc2V0IG9ubHkgb24gb2JqZWN0IGNvbnN0cnVjdGlvbiBwaGFzZS5cbiAgICAgICAqIENvbXB1dGVkIHZhbHVlcyBhcmUgYWx3YXlzIG1hc2tlZFxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfYXR0ciBBdHRyaWJ1dGUgbmFtZVxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gX2ZuIEZ1bmN0aW9uIHRoYXQgcmV0dXJucyB2YWx1ZVxuICAgICAgICogQHJldHVybiB7QnVpbGRlckFwaX0gc2VsZlxuICAgICAgICovXG4gICAgICBhdHRyQ29tcHV0ZWQ6IGZ1bmN0aW9uKF9hdHRyLCBfZm4pIHtcbiAgICAgICAgY29tcHV0ZXMucHVzaChbX2F0dHIsIF9mbl0pO1xuICAgICAgICB0aGlzLmF0dHJNYXNrKF9hdHRyLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBCdWlsZGVyQXBpI1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBSZWdpc3RlcnMgYXR0cmlidXRlIG1ldGFkYXRhLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfbmFtZSBBdHRyaWJ1dGUgbmFtZVxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IF9tZXRhZGF0YSBBdHRyaWJ1dGUgbWV0YWRhdGFcbiAgICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgICAqL1xuICAgICAgYXR0ck1ldGE6IGZ1bmN0aW9uKF9uYW1lLCBfbWV0YWRhdGEpIHtcbiAgICAgICAgbWV0YVtfbmFtZV0gPSBleHRlbmQobWV0YVtfbmFtZV0gfHwge30sIF9tZXRhZGF0YSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgQnVpbGRlckFwaSNcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gQWRkcyBtZXRob2RzIHRvIHRoZSBtb2RlbFxuICAgICAgICpcbiAgICAgICAqIFRoaXMgbWV0aG9kIGFsbG93cyB0byBleHRlbmQgdGhlIGRpZmZlcmVudCBtb2RlbCBBUEkncy5cbiAgICAgICAqXG4gICAgICAgKiBUaGUgZm9sbG93aW5nIEFQSSdzIGNhbiBiZSBleHRlbmRlZCB1c2luZyB0aGlzIG1ldGhvZDpcbiAgICAgICAqICogTW9kZWw6IFRoZSBzdGF0aWMgQVBJLCBhZmZlY3RzIHRoZSBNb2RlbCBvYmplY3QgaXRzZWxmLlxuICAgICAgICogKiBSZWNvcmQ6IEFmZmVjdHMgZWFjaCByZWNvcmQgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbC5cbiAgICAgICAqICogQ29sbGVjdGlvbjogQWZmZWN0cyBlYWNoIGNvbGxlY3Rpb24gZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbC5cbiAgICAgICAqICogU2NvcGU6IEFmZmVjdHMgYm90aCB0aGUgc3RhdGljIEFQSSBhbmQgY29sbGVjdGlvbnMuXG4gICAgICAgKiAqIFJlc291cmNlOiBBZmZlY3RzIHJlY29yZHMgYW5kIGNvbGxlY3Rpb25zLlxuICAgICAgICpcbiAgICAgICAqIElmIG5vIGFwaSBpcyBnaXZlblxuICAgICAgICpcbiAgICAgICAqXG4gICAgICAgKiBJZiBubyBzY29wZSBpcyBnaXZlbixcbiAgICAgICAqIEJ5IGRlZmF1bHQgdGhpcyBtZXRob2QgZXh0ZW5kcyB0aGUgKipSZWNvcmQqKiBwcm90b3R5cGUuXG4gICAgICAgKiBJZiBjYWxsZWQgd2l0aCBhbiBvYmplY3RcbiAgICAgICAqIGluc3RlYWQgb2YgYSBmdW5jdGlvbiBpdCBjYW4gYmUgdXNlZCB0byBleHRlbmQgdGhlIGNvbGxlY3Rpb24gYW5kIHRoZSB0eXBlIHdpdGhcbiAgICAgICAqIHNwZWNpZmljIGltcGxlbWVudGF0aW9ucy5cbiAgICAgICAqXG4gICAgICAgKiBVc2FnZTpcbiAgICAgICAqXG4gICAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICAgKiByZXN0bW9kLm1peGluKGZ1bmN0aW9uKCkge1xuICAgICAgICogICB0aGlzLmRlZmluZSgnbXlSZWNvcmRNZXRob2QnLCBmdW5jdGlvbigpIHt9KVxuICAgICAgICogICAgICAgLmRlZmluZSgnTW9kZWwubXlTdGF0aWNNZXRob2QnLCBmdW5jdGlvbigpIHt9KVxuICAgICAgICogICAgICAgLmRlZmluZSgnQ29sbGVjdGlvbicsIHsgfSk7IC8vIG9iamVjdCB0byBleHRlbmQgY29sbGVjdGlvbiBhcGkgd2l0aFxuICAgICAgICogfSk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiBJdCBpcyBwb3NpYmxlIHRvIG92ZXJyaWRlIGFuIGV4aXN0aW5nIG1ldGhvZCB1c2luZyBkZWZpbmUsIGlmIG92ZXJyaWRlbixcbiAgICAgICAqIHRoZSBvbGQgbWV0aG9kIGNhbiBiZSBjYWxsZWQgdXNpbmcgYHRoaXMuJHN1cGVyYCBpbnNpZGUgZGUgbmV3IG1ldGhvZC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gX3doZXJlXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBfZnVuIEZ1bmN0aW9uIHRvIGRlZmluZSBvciBvYmplY3Qgd2l0aCBwYXJ0aWN1bGFyIGltcGxlbWVudGF0aW9uc1xuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF9hcGkgT25lIG9mIHRoZSBhcGkgbmFtZXMgbGlzdGVkIGFib3ZlLCBpZiBub3QgZ2l2ZW4gZGVmYXVsdHMgdG8gJ1JlY29yZCdcbiAgICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgICAqL1xuICAgICAgZGVmaW5lOiBmdW5jdGlvbihfd2hlcmUsIF9mdW4pIHtcblxuICAgICAgICB2YXIgbmFtZSA9IGZhbHNlLCBhcGkgPSAnUmVjb3JkJztcbiAgICAgICAgaWYodHlwZW9mIF9mdW4gPT09ICdvYmplY3QnICYmIF9mdW4pIHtcbiAgICAgICAgICBhcGkgPSBfd2hlcmU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmFtZSA9IF93aGVyZS5zcGxpdCgnLicpO1xuICAgICAgICAgIGlmKG5hbWUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBuYW1lID0gbmFtZVswXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXBpID0gbmFtZVswXTtcbiAgICAgICAgICAgIG5hbWUgPSBuYW1lWzFdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaChhcGkpIHtcbiAgICAgICAgLy8gVmlydHVhbCBBUEknc1xuICAgICAgICBjYXNlICdMaXN0JzpcbiAgICAgICAgICBoZWxwRGVmaW5lKCdDb2xsZWN0aW9uJywgbmFtZSwgX2Z1bik7XG4gICAgICAgICAgaGVscERlZmluZSgnTGlzdCcsIG5hbWUsIF9mdW4pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdTY29wZSc6XG4gICAgICAgICAgaGVscERlZmluZSgnTW9kZWwnLCBuYW1lLCBfZnVuKTtcbiAgICAgICAgICBoZWxwRGVmaW5lKCdDb2xsZWN0aW9uJywgbmFtZSwgX2Z1bik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1Jlc291cmNlJzpcbiAgICAgICAgICBoZWxwRGVmaW5lKCdSZWNvcmQnLCBuYW1lLCBfZnVuKTtcbiAgICAgICAgICBoZWxwRGVmaW5lKCdDb2xsZWN0aW9uJywgbmFtZSwgX2Z1bik7XG4gICAgICAgICAgaGVscERlZmluZSgnTGlzdCcsIG5hbWUsIF9mdW4pO1xuICAgICAgICAgIGhlbHBEZWZpbmUoJ0R1bW15JywgbmFtZSwgX2Z1bik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaGVscERlZmluZShhcGksIG5hbWUsIF9mdW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBCdWlsZGVyQXBpI1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBBZGRzIGFuIGV2ZW50IGhvb2tcbiAgICAgICAqXG4gICAgICAgKiBIb29rcyBhcmUgdXNlZCB0byBleHRlbmQgb3IgbW9kaWZ5IHRoZSBtb2RlbCBiZWhhdmlvciwgYW5kIGFyZSBub3RcbiAgICAgICAqIGRlc2lnbmVkIHRvIGJlIHVzZWQgYXMgYW4gZXZlbnQgbGlzdGVuaW5nIHN5c3RlbS5cbiAgICAgICAqXG4gICAgICAgKiBUaGUgZ2l2ZW4gZnVuY3Rpb24gaXMgZXhlY3V0ZWQgaW4gdGhlIGhvb2sncyBjb250ZXh0LCBkaWZmZXJlbnQgaG9va3NcbiAgICAgICAqIG1ha2UgZGlmZmVyZW50IHBhcmFtZXRlcnMgYXZhaWxhYmxlIHRvIGNhbGxiYWNrcy5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gX2hvb2sgVGhlIGhvb2sgbmFtZSwgcmVmZXIgdG8gcmVzdG1vZCBkb2NzIGZvciBidWlsdGluIGhvb2tzLlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gX2RvIGZ1bmN0aW9uIHRvIGJlIGV4ZWN1dGVkXG4gICAgICAgKiBAcmV0dXJuIHtCdWlsZGVyQXBpfSBzZWxmXG4gICAgICAgKi9cbiAgICAgIG9uOiBmdW5jdGlvbihfaG9vaywgX2RvKSB7XG4gICAgICAgIChob29rc1tfaG9va10gfHwgKGhvb2tzW19ob29rXSA9IFtdKSkucHVzaChfZG8pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICBidWlsZGVyLmNoYWluKF9iYXNlQ2hhaW4pOyAvLyBsb2FkIGJhc2UgY2hhaW4uXG5cbiAgICByZXR1cm4gTW9kZWw7XG4gIH07XG5cbn1dKTtcblxuLyoqXG4gKiBAY2xhc3MgRmFzdFFcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBTeW5jaHJvbm91cyBwcm9taXNlIGltcGxlbWVudGF0aW9uIChwYXJ0aWFsKVxuICpcbiAqL1xuUk1Nb2R1bGUuZmFjdG9yeSgnUk1GYXN0UScsIFtmdW5jdGlvbigpIHtcblxuICB2YXIgaXNGdW5jdGlvbiA9IGFuZ3VsYXIuaXNGdW5jdGlvbixcbiAgICAgIGNhdGNoRXJyb3IgPSBmdW5jdGlvbihfZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBfZXJyb3IpO1xuICAgICAgfTtcblxuICBmdW5jdGlvbiBzaW1wbGVRKF92YWwsIF93aXRoRXJyb3IpIHtcblxuICAgIGlmKF92YWwgJiYgaXNGdW5jdGlvbihfdmFsLnRoZW4pKSByZXR1cm4gd3JhcHBlZFEoX3ZhbCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc2ltcGxlOiB0cnVlLFxuXG4gICAgICB0aGVuOiBmdW5jdGlvbihfc3VjY2VzcywgX2Vycm9yKSB7XG4gICAgICAgIHJldHVybiBzaW1wbGVRKF93aXRoRXJyb3IgPyBfZXJyb3IoX3ZhbCkgOiBfc3VjY2VzcyhfdmFsKSk7XG4gICAgICB9LFxuICAgICAgJ2NhdGNoJzogY2F0Y2hFcnJvcixcbiAgICAgICdmaW5hbGx5JzogZnVuY3Rpb24oX2NiKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBfY2IoKTtcbiAgICAgICAgaWYocmVzdWx0ICYmIGlzRnVuY3Rpb24oX3ZhbC50aGVuKSkge1xuICAgICAgICAgIC8vIGlmIGZpbmFsbHkgcmV0dXJucyBhIHByb21pc2UsIHRoZW5cbiAgICAgICAgICByZXR1cm4gd3JhcHBlZFEoX3ZhbC50aGVuKFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7IHJldHVybiBfd2l0aEVycm9yID8gc2ltcGxlUShfdmFsLCB0cnVlKSA6IF92YWw7IH0sXG4gICAgICAgICAgICBmdW5jdGlvbigpIHsgcmV0dXJuIF93aXRoRXJyb3IgPyBzaW1wbGVRKF92YWwsIHRydWUpIDogX3ZhbDsgfSlcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHdyYXBwZWRRKF9wcm9taXNlKSB7XG4gICAgaWYoX3Byb21pc2Uuc2ltcGxlKSByZXR1cm4gX3Byb21pc2U7XG5cbiAgICB2YXIgc2ltcGxlO1xuXG4gICAgLy8gd2hlbiByZXNvbHZlZCwgbWFrZSAkcSBhIHNpbXBsZVFcbiAgICBfcHJvbWlzZS50aGVuKGZ1bmN0aW9uKF92YWwpIHtcbiAgICAgIHNpbXBsZSA9IHNpbXBsZVEoX3ZhbCk7XG4gICAgfSwgZnVuY3Rpb24oX3ZhbCkge1xuICAgICAgc2ltcGxlID0gc2ltcGxlUShfdmFsLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICB0aGVuOiBmdW5jdGlvbihfc3VjY2VzcywgX2Vycm9yKSB7XG4gICAgICAgIHJldHVybiBzaW1wbGUgP1xuICAgICAgICAgIHNpbXBsZS50aGVuKF9zdWNjZXNzLCBfZXJyb3IpIDpcbiAgICAgICAgICB3cmFwcGVkUShfcHJvbWlzZS50aGVuKF9zdWNjZXNzLCBfZXJyb3IpKTtcbiAgICAgIH0sXG4gICAgICAnY2F0Y2gnOiBjYXRjaEVycm9yLFxuICAgICAgJ2ZpbmFsbHknOiBmdW5jdGlvbihfY2IpIHtcbiAgICAgICAgcmV0dXJuIHNpbXBsZSA/XG4gICAgICAgICAgc2ltcGxlWydmaW5hbGx5J10oX2NiKSA6XG4gICAgICAgICAgd3JhcHBlZFEoX3Byb21pc2VbJ2ZpbmFsbHknXShfY2IpKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByZWplY3Q6IGZ1bmN0aW9uKF9yZWFzb24pIHtcbiAgICAgIHJldHVybiBzaW1wbGVRKF9yZWFzb24sIHRydWUpO1xuICAgIH0sXG5cbiAgICAvLyBub24gd2FpdGluZyBwcm9taXNlLCBpZiByZXNvbHZlZCBleGVjdXRlcyBpbW1lZGlhdGVseVxuICAgIHdoZW46IGZ1bmN0aW9uKF92YWwpIHtcbiAgICAgIHJldHVybiBzaW1wbGVRKF92YWwsIGZhbHNlKTtcbiAgICB9LFxuXG4gICAgd3JhcDogd3JhcHBlZFFcbiAgfTtcbn1dKTtcblxuUk1Nb2R1bGUuZmFjdG9yeSgnUk1QYWNrZXJDYWNoZScsIFtmdW5jdGlvbigpIHtcblxuICB2YXIgcGFja2VyQ2FjaGU7XG5cbiAgLyoqXG4gICAqIEBjbGFzcyBQYWNrZXJDYWNoZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogVGhlIHBhY2tlciBjYWNoZSBzZXJ2aWNlIGVuYWJsZXMgcGFja2luZyBzdHJhdGVnaWVzIHRvIHJlZ2lzdGVyIHJhdyBvYmplY3QgZGF0YSB0aGF0IGNhbiBiZSB0aGVuIHVzZWQgYnlcbiAgICogc3VwcG9ydGluZyByZWxhdGlvbnMgZHVyaW5nIHRoZSBkZWNvZGluZyBwcm9jZXNzIHRvIHByZWxvYWQgb3RoZXIgcmVsYXRlZCByZXNvdXJjZXMuXG4gICAqXG4gICAqIFRoaXMgaXMgc3BlY2lhbGx5IHVzZWZ1bCBmb3IgYXBpcyB0aGF0IGluY2x1ZGUgbGlua2VkIG9iamVjdHMgZGF0YSBpbiBleHRlcm5hbCBtZXRhZGF0YS5cbiAgICpcbiAgICogVGhlIHBhY2tlciBjYWNoZSBpcyByZXNldCBvbiBldmVyeSByZXNwb25zZSB1bndyYXBwaW5nIHNvIGl0J3Mgbm90IHN1cHBvc2VkIHRvIGJlIHVzZWQgYXMgYW5cbiAgICogYXBwbGljYXRpb24gd2lkZSBjYWNoZS5cbiAgICpcbiAgICogIyMjIEZvciBleHRlbnNpb24gZGV2ZWxvcGVyczpcbiAgICpcbiAgICogVXNlIHRoZSBgZmVlZGAgbWV0aG9kIHRvIGFkZCBuZXcgcmF3IGRhdGEgdG8gY2FjaGUuXG4gICAqXG4gICAqICMjIyBGb3IgcmVsYXRpb24gZGV2ZWxvcGVyczpcbiAgICpcbiAgICogVXNlIHRoZSBgcmVzb2x2ZWAgbWV0aG9kIHRvIGluamVjdCBjYWNoZSBkYXRhIGludG8gYSBnaXZlbiBpZGVudGlmaWVkIHJlY29yZC5cbiAgICpcbiAgICovXG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFBhY2tlckNhY2hlI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIEZlZWQgZGF0YSB0byB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX25hbWUgUmVzb3VyY2UgbmFtZSAoc2luZ3VsYXIpXG4gICAgICogQHBhcmFtIHthcnJheX0gX3Jhd1JlY29yZHMgUmF3IHJlY29yZCBkYXRhIGFzIGFuIGFycmF5XG4gICAgICovXG4gICAgZmVlZDogZnVuY3Rpb24oX25hbWUsIF9yYXdSZWNvcmRzKSB7XG4gICAgICBwYWNrZXJDYWNoZVtfbmFtZV0gPSBfcmF3UmVjb3JkczsgLy8gVE9ETzogbWF5YmUgYXBwZW5kIG5ldyByZWNvcmQgdG8gc3VwcG9ydCBleHRlbmRlZCBzY2VuYXJpb3MuXG4gICAgfSxcblxuICAgIC8vIElERUE6IGZlZWRTaW5nbGU6IHdvdWxkIHJlcXVpcmUgdHdvIHN0ZXAgcmVzb2x2ZSBtYW55IC0+IHNpbmdsZVxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFBhY2tlckNhY2hlI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIFNlYXJjaGVzIGZvciBkYXRhIG1hdGNoaW5nIHRoZSByZWNvcmQncyBwaywgaWYgZm91bmQgZGF0YSBpcyB0aGVuIGZlZCB0byB0aGUgcmVjb3JkIHVzaW5nICRkZWNvZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlY29yZEFwaX0gX3JlY29yZCByZXN0bW9kIHJlY29yZCB0byByZXNvbHZlLCBtdXN0IGJlIGlkZW50aWZpZWQuXG4gICAgICogQHJldHVybiB7UmVjb3JkQXBpfSBUaGUgcmVjb3JkLCBzbyBjYWxsIGNhbiBiZSBuZXN0ZWQuXG4gICAgICovXG4gICAgcmVzb2x2ZTogZnVuY3Rpb24oX3JlY29yZCkge1xuXG4gICAgICBpZihwYWNrZXJDYWNoZSkgeyAvLyBtYWtlIHN1cmUgdGhpcyBpcyBhIHBhY2tlciBjYWNoZSBlbmFibGVkIGNvbnRleHQuXG5cbiAgICAgICAgdmFyIG1vZGVsVHlwZSA9IF9yZWNvcmQuJHR5cGUsXG4gICAgICAgICAgICBjYWNoZSA9IHBhY2tlckNhY2hlW21vZGVsVHlwZS5pZGVudGl0eSh0cnVlKV07XG5cbiAgICAgICAgaWYoY2FjaGUgJiYgX3JlY29yZC4kcGspIHtcbiAgICAgICAgICBmb3IodmFyIGkgPSAwLCBsID0gY2FjaGUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBpZihfcmVjb3JkLiRwayA9PT0gbW9kZWxUeXBlLmluZmVyS2V5KGNhY2hlW2ldKSkgeyAvLyB0aGlzIGNvdWxkIGJlIHNvcnQgb2Ygc2xvdz8gbmFoXG4gICAgICAgICAgICAgIF9yZWNvcmQuJGRlY29kZShjYWNoZVtpXSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3JlY29yZDtcbiAgICB9LFxuXG4gICAgLy8gcHJpdmF0ZSBhcGkgbWV0aG9kIHVzZWQgYnkgdGhlIHVud3JhcHBlciBmdW5jdGlvbi5cbiAgICBwcmVwYXJlOiBmdW5jdGlvbigpIHtcbiAgICAgIHBhY2tlckNhY2hlID0ge307XG4gICAgfSxcblxuICAgIC8vIHByaXZhdGUgYXBpIGludGVybmFsIG1ldGhvZCB1c2VkIGJ5IHRoZSB1bndyYXBwZXIgZnVuY3Rpb24uXG4gICAgY2xlYXI6IGZ1bmN0aW9uKCkge1xuICAgICAgcGFja2VyQ2FjaGUgPSBudWxsO1xuICAgIH1cbiAgfTtcblxufV0pO1xuUk1Nb2R1bGUuZmFjdG9yeSgnUk1TZXJpYWxpemVyJywgWyckaW5qZWN0b3InLCAnaW5mbGVjdG9yJywgJyRmaWx0ZXInLCAnUk1VdGlscycsIGZ1bmN0aW9uKCRpbmplY3RvciwgaW5mbGVjdG9yLCAkZmlsdGVyLCBVdGlscykge1xuXG4gIGZ1bmN0aW9uIGV4dHJhY3QoX2Zyb20sIF9wYXRoKSB7XG4gICAgdmFyIG5vZGU7XG4gICAgZm9yKHZhciBpID0gMDsgX2Zyb20gJiYgKG5vZGUgPSBfcGF0aFtpXSk7IGkrKykge1xuICAgICAgX2Zyb20gPSBfZnJvbVtub2RlXTtcbiAgICB9XG4gICAgcmV0dXJuIF9mcm9tO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5zZXJ0KF9pbnRvLCBfcGF0aCwgX3ZhbHVlKSB7XG4gICAgZm9yKHZhciBpID0gMCwgbCA9IF9wYXRoLmxlbmd0aC0xOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgbm9kZSA9IF9wYXRoW2ldO1xuICAgICAgX2ludG8gPSBfaW50b1tub2RlXSB8fCAoX2ludG9bbm9kZV0gPSB7fSk7XG4gICAgfVxuICAgIF9pbnRvW19wYXRoW19wYXRoLmxlbmd0aC0xXV0gPSBfdmFsdWU7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24oX3N0cmF0ZWdpZXMpIHtcblxuICAgIHZhciBpc0FycmF5ID0gYW5ndWxhci5pc0FycmF5O1xuXG4gICAgLy8gUHJpdmF0ZSBzZXJpYWxpemVyIGF0dHJpYnV0ZXNcbiAgICB2YXIgbWFza3MgPSB7fSxcbiAgICAgICAgZGVjb2RlcnMgPSB7fSxcbiAgICAgICAgZW5jb2RlcnMgPSB7fSxcbiAgICAgICAgbWFwcGVkID0ge30sXG4gICAgICAgIG1hcHBpbmdzID0ge30sXG4gICAgICAgIHZvbCA9IHt9O1xuXG4gICAgZnVuY3Rpb24gaXNNYXNrZWQoX25hbWUsIF9tYXNrKSB7XG4gICAgICBpZih0eXBlb2YgX21hc2sgPT09ICdmdW5jdGlvbicpIHJldHVybiBfbWFzayhfbmFtZSk7XG4gICAgICB2YXIgbWFzayA9IG1hc2tzW19uYW1lXTtcbiAgICAgIHJldHVybiAobWFzayAmJiAobWFzayA9PT0gdHJ1ZSB8fCBtYXNrLmluZGV4T2YoX21hc2spICE9PSAtMSkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlY29kZShfZnJvbSwgX3RvLCBfcHJlZml4LCBfbWFzaywgX2N0eCkge1xuICAgICAgdmFyIGtleSwgZGVjb2RlZE5hbWUsIGZ1bGxOYW1lLCB2YWx1ZSwgbWFwcywgaXNNYXBwZWQsIGksIGwsXG4gICAgICAgICAgcHJlZml4ID0gX3ByZWZpeCA/IF9wcmVmaXggKyAnLicgOiAnJztcblxuICAgICAgLy8gZXhwbGljaXQgbWFwcGluZ3NcbiAgICAgIG1hcHMgPSBtYXBwaW5nc1tfcHJlZml4XTtcbiAgICAgIGlmKG1hcHMpIHtcbiAgICAgICAgZm9yKGkgPSAwLCBsID0gbWFwcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICBmdWxsTmFtZSA9IHByZWZpeCArIG1hcHNbaV0ucGF0aDtcbiAgICAgICAgICBpZihpc01hc2tlZChmdWxsTmFtZSwgX21hc2spKSBjb250aW51ZTtcblxuICAgICAgICAgIGlmKG1hcHNbaV0ubWFwKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGV4dHJhY3QoX2Zyb20sIG1hcHNbaV0ubWFwKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWUgPSBfZnJvbVtfc3RyYXRlZ2llcy5lbmNvZGVOYW1lID8gX3N0cmF0ZWdpZXMuZW5jb2RlTmFtZShtYXBzW2ldLnBhdGgpIDogbWFwc1tpXS5wYXRoXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZighbWFwc1tpXS5mb3JjZWQgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkgY29udGludWU7XG5cbiAgICAgICAgICB2YWx1ZSA9IGRlY29kZVByb3AodmFsdWUsIGZ1bGxOYW1lLCBfbWFzaywgX2N0eCk7XG4gICAgICAgICAgaWYodmFsdWUgIT09IHVuZGVmaW5lZCkgX3RvW21hcHNbaV0ucGF0aF0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBpbXBsaWNpdCBtYXBwaW5nc1xuICAgICAgZm9yKGtleSBpbiBfZnJvbSkge1xuICAgICAgICBpZihfZnJvbS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cbiAgICAgICAgICBkZWNvZGVkTmFtZSA9IF9zdHJhdGVnaWVzLmRlY29kZU5hbWUgPyBfc3RyYXRlZ2llcy5kZWNvZGVOYW1lKGtleSkgOiBrZXk7XG4gICAgICAgICAgaWYoZGVjb2RlZE5hbWVbMF0gPT09ICckJykgY29udGludWU7XG5cbiAgICAgICAgICBpZihtYXBzKSB7XG4gICAgICAgICAgICAvLyBpZ25vcmUgYWxyZWFkeSBtYXBwZWQga2V5c1xuICAgICAgICAgICAgLy8gVE9ETzogaWdub3JlIG5lc3RlZCBtYXBwaW5ncyB0b28uXG4gICAgICAgICAgICBmb3IoXG4gICAgICAgICAgICAgIC8vIGlzIHRoaXMgc28gbXVjaCBmYXN0ZXIgdGhhbiB1c2luZyAuc29tZT8gaHR0cDovL2pzcGVyZi5jb20vc29tZS12cy1mb3ItbG9vcFxuICAgICAgICAgICAgICBpc01hcHBlZCA9IGZhbHNlLCBpID0gMCwgbCA9IG1hcHMubGVuZ3RoO1xuICAgICAgICAgICAgICBpIDwgbCAmJiAhKGlzTWFwcGVkID0gKG1hcHNbaV0ubWFwUGF0aCA9PT0ga2V5KSk7XG4gICAgICAgICAgICAgIGkrK1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmKGlzTWFwcGVkKSBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmdWxsTmFtZSA9IHByZWZpeCArIGRlY29kZWROYW1lO1xuICAgICAgICAgIC8vIHByZXZlbnQgbWFza2VkIG9yIGFscmVhZHkgbWFwcGVkIHByb3BlcnRpZXMgdG8gYmUgc2V0XG4gICAgICAgICAgaWYobWFwcGVkW2Z1bGxOYW1lXSB8fCBpc01hc2tlZChmdWxsTmFtZSwgX21hc2spKSBjb250aW51ZTtcblxuICAgICAgICAgIHZhbHVlID0gZGVjb2RlUHJvcChfZnJvbVtrZXldLCBmdWxsTmFtZSwgX21hc2ssIF9jdHgpO1xuICAgICAgICAgIGlmKHZhbHVlICE9PSB1bmRlZmluZWQpIF90b1tkZWNvZGVkTmFtZV0gPSB2YWx1ZTsgLy8gaWdub3JlIHZhbHVlIGlmIGZpbHRlciByZXR1cm5zIHVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVjb2RlUHJvcChfdmFsdWUsIF9uYW1lLCBfbWFzaywgX2N0eCkge1xuICAgICAgdmFyIGZpbHRlciA9IGRlY29kZXJzW19uYW1lXSwgcmVzdWx0ID0gX3ZhbHVlO1xuXG4gICAgICBpZihmaWx0ZXIpIHtcbiAgICAgICAgcmVzdWx0ID0gZmlsdGVyLmNhbGwoX2N0eCwgX3ZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZih0eXBlb2YgX3ZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAvLyBJREVBOiBtYWtlIGV4dGVuZGVkIGRlY29kaW5nL2VuY29kaW5nIG9wdGlvbmFsLCBjb3VsZCBiZSBhIGxpdHRsZSB0YXhpbmcgZm9yIHNvbWUgYXBwc1xuICAgICAgICBpZihpc0FycmF5KF92YWx1ZSkpIHtcbiAgICAgICAgICByZXN1bHQgPSBbXTtcbiAgICAgICAgICBmb3IodmFyIGkgPSAwLCBsID0gX3ZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goZGVjb2RlUHJvcChfdmFsdWVbaV0sIF9uYW1lICsgJ1tdJywgX21hc2ssIF9jdHgpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZihfdmFsdWUpIHtcbiAgICAgICAgICByZXN1bHQgPSB7fTtcbiAgICAgICAgICBkZWNvZGUoX3ZhbHVlLCByZXN1bHQsIF9uYW1lLCBfbWFzaywgX2N0eCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmNvZGUoX2Zyb20sIF90bywgX3ByZWZpeCwgX21hc2ssIF9jdHgpIHtcbiAgICAgIHZhciBrZXksIGZ1bGxOYW1lLCBlbmNvZGVkTmFtZSwgdmFsdWUsIG1hcHMsXG4gICAgICAgICAgcHJlZml4ID0gX3ByZWZpeCA/IF9wcmVmaXggKyAnLicgOiAnJztcblxuICAgICAgLy8gaW1wbGljaXQgbWFwcGluZ3NcbiAgICAgIGZvcihrZXkgaW4gX2Zyb20pIHtcbiAgICAgICAgaWYoX2Zyb20uaGFzT3duUHJvcGVydHkoa2V5KSAmJiBrZXlbMF0gIT09ICckJykge1xuICAgICAgICAgIGZ1bGxOYW1lID0gcHJlZml4ICsga2V5O1xuICAgICAgICAgIC8vIHByZXZlbnQgbWFza2VkIG9yIGFscmVhZHkgbWFwcGVkIHByb3BlcnRpZXMgdG8gYmUgY29waWVkXG4gICAgICAgICAgaWYobWFwcGVkW2Z1bGxOYW1lXSB8fCBpc01hc2tlZChmdWxsTmFtZSwgX21hc2spKSBjb250aW51ZTtcblxuICAgICAgICAgIHZhbHVlID0gZW5jb2RlUHJvcChfZnJvbVtrZXldLCBmdWxsTmFtZSwgX21hc2ssIF9jdHgpO1xuICAgICAgICAgIGlmKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGVuY29kZWROYW1lID0gX3N0cmF0ZWdpZXMuZW5jb2RlTmFtZSA/IF9zdHJhdGVnaWVzLmVuY29kZU5hbWUoa2V5KSA6IGtleTtcbiAgICAgICAgICAgIF90b1tlbmNvZGVkTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZih2b2xbZnVsbE5hbWVdKSBkZWxldGUgX2Zyb21ba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBleHBsaWNpdCBtYXBwaW5nczpcbiAgICAgIG1hcHMgPSBtYXBwaW5nc1tfcHJlZml4XTtcbiAgICAgIGlmKG1hcHMpIHtcbiAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9IG1hcHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgZnVsbE5hbWUgPSBwcmVmaXggKyBtYXBzW2ldLnBhdGg7XG4gICAgICAgICAgaWYoaXNNYXNrZWQoZnVsbE5hbWUsIF9tYXNrKSkgY29udGludWU7XG5cbiAgICAgICAgICB2YWx1ZSA9IF9mcm9tW21hcHNbaV0ucGF0aF07XG4gICAgICAgICAgaWYoIW1hcHNbaV0uZm9yY2VkICYmIHZhbHVlID09PSB1bmRlZmluZWQpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgdmFsdWUgPSBlbmNvZGVQcm9wKHZhbHVlLCBmdWxsTmFtZSwgX21hc2ssIF9jdHgpO1xuICAgICAgICAgIGlmKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmKG1hcHNbaV0ubWFwKSB7XG4gICAgICAgICAgICAgIGluc2VydChfdG8sIG1hcHNbaV0ubWFwLCB2YWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBfdG9bX3N0cmF0ZWdpZXMuZW5jb2RlTmFtZSA/IF9zdHJhdGVnaWVzLmVuY29kZU5hbWUobWFwc1tpXS5wYXRoKSA6IG1hcHNbaV0ucGF0aF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmNvZGVQcm9wKF92YWx1ZSwgX25hbWUsIF9tYXNrLCBfY3R4KSB7XG4gICAgICB2YXIgZmlsdGVyID0gZW5jb2RlcnNbX25hbWVdLCByZXN1bHQgPSBfdmFsdWU7XG5cbiAgICAgIGlmKGZpbHRlcikge1xuICAgICAgICByZXN1bHQgPSBmaWx0ZXIuY2FsbChfY3R4LCBfdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmKF92YWx1ZSAhPT0gbnVsbCAmJiB0eXBlb2YgX3ZhbHVlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgX3ZhbHVlLnRvSlNPTiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBJREVBOiBtYWtlIGRlZXAgZGVjb2RpbmcvZW5jb2Rpbmcgb3B0aW9uYWwsIGNvdWxkIGJlIGEgbGl0dGxlIHRheGluZyBmb3Igc29tZSBhcHBzXG4gICAgICAgIGlmKGlzQXJyYXkoX3ZhbHVlKSkge1xuICAgICAgICAgIHJlc3VsdCA9IFtdO1xuICAgICAgICAgIGZvcih2YXIgaSA9IDAsIGwgPSBfdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChlbmNvZGVQcm9wKF92YWx1ZVtpXSwgX25hbWUgKyAnW10nLCBfbWFzaywgX2N0eCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmKF92YWx1ZSkge1xuICAgICAgICAgIHJlc3VsdCA9IHt9O1xuICAgICAgICAgIGVuY29kZShfdmFsdWUsIHJlc3VsdCwgX25hbWUsIF9tYXNrLCBfY3R4KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHJldHVybiB7XG5cbiAgICAgIC8vIGRlY29kZXMgYSByYXcgcmVjb3JkIGludG8gYSByZWNvcmRcbiAgICAgIGRlY29kZTogZnVuY3Rpb24oX3JlY29yZCwgX3JhdywgX21hc2spIHtcbiAgICAgICAgZGVjb2RlKF9yYXcsIF9yZWNvcmQsICcnLCBfbWFzaywgX3JlY29yZCk7XG4gICAgICB9LFxuXG4gICAgICAvLyBlbmNvZGVzIGEgcmVjb3JkLCByZXR1cm5pbmcgYSByYXcgcmVjb3JkXG4gICAgICBlbmNvZGU6IGZ1bmN0aW9uKF9yZWNvcmQsIF9tYXNrKSB7XG4gICAgICAgIHZhciByYXcgPSB7fTtcbiAgICAgICAgZW5jb2RlKF9yZWNvcmQsIHJhdywgJycsIF9tYXNrLCBfcmVjb3JkKTtcbiAgICAgICAgcmV0dXJuIHJhdztcbiAgICAgIH0sXG5cbiAgICAgIC8vIGJ1aWxkcyBhIHNlcmlhbGl6ZXJkIERTTCwgaXMgYSBzdGFuZGFsb25lIG9iamVjdCB0aGF0IGNhbiBiZSBleHRlbmRlZC5cbiAgICAgIGRzbDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgcmV0dXJuIHtcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBtZW1iZXJvZiBCdWlsZGVyQXBpI1xuICAgICAgICAgICAqXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uIFNldHMgYW4gYXR0cmlidXRlIG1hcHBpbmcuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBBbGxvd3MgYSBleHBsaWNpdCBzZXJ2ZXIgdG8gbW9kZWwgcHJvcGVydHkgbWFwcGluZyB0byBiZSBkZWZpbmVkLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogRm9yIGV4YW1wbGUsIHRvIG1hcCB0aGUgcmVzcG9uc2UgcHJvcGVydHkgYHN0YXRzLmNyZWF0ZWRfYXRgIHRvIG1vZGVsJ3MgYGNyZWF0ZWRgIHByb3BlcnR5LlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogYGBgamF2YXNjcmlwdFxuICAgICAgICAgICAqIGJ1aWxkZXIuYXR0ck1hcCgnY3JlYXRlZCcsICdzdGF0cy5jcmVhdGVkX2F0Jyk7XG4gICAgICAgICAgICogYGBgXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBJdCdzIGFsc28gcG9zaWJsZSB0byB1c2UgYSB3aWxkY2FyZCAnKicgYXMgc2VydmVyIG5hbWUgdG8gdXNlIHRoZSBkZWZhdWx0IG5hbWUgZGVjb2RlciBhc1xuICAgICAgICAgICAqIHNlcnZlciBuYW1lLiBUaGlzIGlzIHVzZWQgdG8gZm9yY2UgYSBwcm9wZXJ0eSB0byBiZSBwcm9jZXNzZWQgb24gZGVjb2RlL2VuY29kZSBldmVuIGlmIGl0c1xuICAgICAgICAgICAqIG5vdCBwcmVzZW50IG9uIHJlcXVlc3QvcmVjb3JkIChyZXNwZWN0aXZlbHkpLCBieSBkb2luZyB0aGlzIGl0cyBwb3NpYmxlLCBmb3IgZXhhbXBsZSwgdG8gZGVmaW5lXG4gICAgICAgICAgICogYSBkeW5hbWljIHByb3BlcnR5IHRoYXQgaXMgZ2VuZXJhdGVkIGF1dG9tYXRpY2FsbHkgYmVmb3JlIHRoZSBvYmplY3QgaXMgc2VuZCB0byB0aGUgc2VydmVyLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF9hdHRyIEF0dHJpYnV0ZSBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF9zZXJ2ZXJOYW1lIFNlcnZlciAocmVxdWVzdC9yZXNwb25zZSkgcHJvcGVydHkgbmFtZVxuICAgICAgICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgICAgICAgKi9cbiAgICAgICAgICBhdHRyTWFwOiBmdW5jdGlvbihfYXR0ciwgX3NlcnZlclBhdGgsIF9mb3JjZWQpIHtcbiAgICAgICAgICAgIC8vIGV4dHJhY3QgcGFyZW50IG5vZGUgZnJvbSBjbGllbnQgbmFtZTpcbiAgICAgICAgICAgIHZhciBpbmRleCA9IF9hdHRyLmxhc3RJbmRleE9mKCcuJyksXG4gICAgICAgICAgICAgICAgbm9kZSA9IGluZGV4ICE9PSAtMSA/IF9hdHRyLnN1YnN0cigwLCBpbmRleCkgOiAnJyxcbiAgICAgICAgICAgICAgICBsZWFmID0gaW5kZXggIT09IC0xID8gX2F0dHIuc3Vic3RyKGluZGV4ICsgMSkgOiBfYXR0cjtcblxuICAgICAgICAgICAgbWFwcGVkW19hdHRyXSA9IHRydWU7XG5cbiAgICAgICAgICAgIHZhciBub2RlcyA9IChtYXBwaW5nc1tub2RlXSB8fCAobWFwcGluZ3Nbbm9kZV0gPSBbXSkpO1xuICAgICAgICAgICAgbm9kZXMucHVzaCh7IHBhdGg6IGxlYWYsIG1hcDogX3NlcnZlclBhdGggPT09ICcqJyA/IG51bGwgOiBfc2VydmVyUGF0aC5zcGxpdCgnLicpLCBtYXBQYXRoOiBfc2VydmVyUGF0aCwgZm9yY2VkOiBfZm9yY2VkIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBtZW1iZXJvZiBCdWlsZGVyQXBpI1xuICAgICAgICAgICAqXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uIFNldHMgYW4gYXR0cmlidXRlIG1hc2suXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBBbiBhdHRyaWJ1dGUgbWFzayBwcmV2ZW50cyB0aGUgYXR0cmlidXRlIHRvIGJlIGxvYWRlZCBmcm9tIG9yIHNlbnQgdG8gdGhlIHNlcnZlciBvbiBjZXJ0YWluIG9wZXJhdGlvbnMuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBUaGUgYXR0cmlidXRlIG1hc2sgaXMgYSBzdHJpbmcgY29tcG9zZWQgYnk6XG4gICAgICAgICAgICogKiBDOiBUbyBwcmV2ZW50IGF0dHJpYnV0ZSBmcm9tIGJlaW5nIHNlbnQgb24gY3JlYXRlXG4gICAgICAgICAgICogKiBSOiBUbyBwcmV2ZW50IGF0dHJpYnV0ZSBmcm9tIGJlaW5nIGxvYWRlZCBmcm9tIHNlcnZlclxuICAgICAgICAgICAqICogVTogVG8gcHJldmVudCBhdHRyaWJ1dGUgZnJvbSBiZWluZyBzZW50IG9uIHVwZGF0ZVxuICAgICAgICAgICAqXG4gICAgICAgICAgICogRm9yIGV4YW1wbGUsIHRoZSBmb2xsb3dpbmcgd2lsbCBwcmV2ZW50IGFuIGF0dHJpYnV0ZSB0byBiZSBzZW5kIG9uIGNyZWF0ZSBvciB1cGRhdGU6XG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICAgICAgICogYnVpbGRlci5hdHRyTWFzaygncmVhZE9ubHknLCAnQ1UnKTtcbiAgICAgICAgICAgKiBgYGBcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIElmIGEgdHJ1ZSBib29sZWFuIHZhbHVlIGlzIHBhc3NlZCBhcyBtYXNrLCB0aGVuICdDUlUnIHdpbGwgYmUgdXNlZFxuICAgICAgICAgICAqIElmIGEgZmFsc2UgYm9vbGVhbiB2YWx1cyBpcyBwYXNzZWQgYXMgbWFzaywgdGhlbiBtYXNrIHdpbGwgYmUgcmVtb3ZlZFxuICAgICAgICAgICAqXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF9hdHRyIEF0dHJpYnV0ZSBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHtib29sZWFufHN0cmluZ30gX21hc2sgQXR0cmlidXRlIG1hc2tcbiAgICAgICAgICAgKiBAcmV0dXJuIHtCdWlsZGVyQXBpfSBzZWxmXG4gICAgICAgICAgICovXG4gICAgICAgICAgYXR0ck1hc2s6IGZ1bmN0aW9uKF9hdHRyLCBfbWFzaykge1xuICAgICAgICAgICAgaWYoIV9tYXNrKSB7XG4gICAgICAgICAgICAgIGRlbGV0ZSBtYXNrc1tfYXR0cl07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBtYXNrc1tfYXR0cl0gPSBfbWFzaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbWVtYmVyb2YgQnVpbGRlckFwaSNcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiBBc3NpZ25zIGEgZGVjb2RpbmcgZnVuY3Rpb24vZmlsdGVyIHRvIGEgZ2l2ZW4gYXR0cmlidXRlLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF9uYW1lIEF0dHJpYnV0ZSBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd8ZnVuY3Rpb259IF9maWx0ZXIgZmlsdGVyIG9yIGZ1bmN0aW9uIHRvIHJlZ2lzdGVyXG4gICAgICAgICAgICogQHBhcmFtIHttaXhlZH0gX2ZpbHRlclBhcmFtIE1pc2MgZmlsdGVyIHBhcmFtZXRlclxuICAgICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gX2NoYWluIElmIHRydWUsIGZpbHRlciBpcyBjaGFpbmVkIHRvIHRoZSBjdXJyZW50IGF0dHJpYnV0ZSBmaWx0ZXIuXG4gICAgICAgICAgICogQHJldHVybiB7QnVpbGRlckFwaX0gc2VsZlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGF0dHJEZWNvZGVyOiBmdW5jdGlvbihfYXR0ciwgX2ZpbHRlciwgX2ZpbHRlclBhcmFtLCBfY2hhaW4pIHtcblxuICAgICAgICAgICAgaWYodHlwZW9mIF9maWx0ZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIHZhciBmaWx0ZXIgPSAkZmlsdGVyKF9maWx0ZXIpO1xuICAgICAgICAgICAgICBfZmlsdGVyID0gZnVuY3Rpb24oX3ZhbHVlKSB7IHJldHVybiBmaWx0ZXIoX3ZhbHVlLCBfZmlsdGVyUGFyYW0pOyB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkZWNvZGVyc1tfYXR0cl0gPSBfY2hhaW4gPyBVdGlscy5jaGFpbihkZWNvZGVyc1tfYXR0cl0sIF9maWx0ZXIpIDogX2ZpbHRlcjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbWVtYmVyb2YgQnVpbGRlckFwaSNcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiBBc3NpZ25zIGEgZW5jb2RpbmcgZnVuY3Rpb24vZmlsdGVyIHRvIGEgZ2l2ZW4gYXR0cmlidXRlLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF9uYW1lIEF0dHJpYnV0ZSBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd8ZnVuY3Rpb259IF9maWx0ZXIgZmlsdGVyIG9yIGZ1bmN0aW9uIHRvIHJlZ2lzdGVyXG4gICAgICAgICAgICogQHBhcmFtIHttaXhlZH0gX2ZpbHRlclBhcmFtIE1pc2MgZmlsdGVyIHBhcmFtZXRlclxuICAgICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gX2NoYWluIElmIHRydWUsIGZpbHRlciBpcyBjaGFpbmVkIHRvIHRoZSBjdXJyZW50IGF0dHJpYnV0ZSBmaWx0ZXIuXG4gICAgICAgICAgICogQHJldHVybiB7QnVpbGRlckFwaX0gc2VsZlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGF0dHJFbmNvZGVyOiBmdW5jdGlvbihfYXR0ciwgX2ZpbHRlciwgX2ZpbHRlclBhcmFtLCBfY2hhaW4pIHtcblxuICAgICAgICAgICAgaWYodHlwZW9mIF9maWx0ZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIHZhciBmaWx0ZXIgPSAkZmlsdGVyKF9maWx0ZXIpO1xuICAgICAgICAgICAgICBfZmlsdGVyID0gZnVuY3Rpb24oX3ZhbHVlKSB7IHJldHVybiBmaWx0ZXIoX3ZhbHVlLCBfZmlsdGVyUGFyYW0pOyB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbmNvZGVyc1tfYXR0cl0gPSBfY2hhaW4gPyBVdGlscy5jaGFpbihlbmNvZGVyc1tfYXR0cl0sIF9maWx0ZXIpIDogX2ZpbHRlcjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbWVtYmVyb2YgQnVpbGRlckFwaSNcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiBNYWtlcyBhbiBhdHRyaWJ1dGUgdm9sYXRpbGUsIGEgdm9sYXRpbGUgYXR0cmlidXRlIGlzIGRlbGV0ZWQgZnJvbSBzb3VyY2UgYWZ0ZXIgZW5jb2RpbmcuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gX25hbWUgQXR0cmlidXRlIG5hbWVcbiAgICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IF9pc1ZvbGF0aWxlIGRlZmF1bHRzIHRvIHRydWUsIGlmIHNldCB0byBmYWxzZSB0aGVuIHRoZSBhdHRyaWJ1dGUgaXMgbm8gbG9uZ2VyIHZvbGF0aWxlLlxuICAgICAgICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgICAgICAgKi9cbiAgICAgICAgICBhdHRyVm9sYXRpbGU6IGZ1bmN0aW9uKF9hdHRyLCBfaXNWb2xhdGlsZSkge1xuICAgICAgICAgICAgdm9sW19hdHRyXSA9IF9pc1ZvbGF0aWxlID09PSB1bmRlZmluZWQgPyB0cnVlIDogX2lzVm9sYXRpbGU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxufV0pO1xuUk1Nb2R1bGUuZmFjdG9yeSgnRGVmYXVsdFBhY2tlcicsIFsncmVzdG1vZCcsICdpbmZsZWN0b3InLCAnUk1QYWNrZXJDYWNoZScsIGZ1bmN0aW9uKHJlc3Rtb2QsIGluZmxlY3RvciwgcGFja2VyQ2FjaGUpIHtcblxuICBmdW5jdGlvbiBpbmNsdWRlKF9zb3VyY2UsIF9saXN0LCBfZG8pIHtcbiAgICBmb3IodmFyIGkgPSAwLCBsID0gX2xpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBfZG8oX2xpc3RbaV0sIF9zb3VyY2VbX2xpc3RbaV1dKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBleGNsdWRlKF9zb3VyY2UsIF9za2lwLCBfZG8pIHtcbiAgICBmb3IodmFyIGtleSBpbiBfc291cmNlKSB7XG4gICAgICBpZihfc291cmNlLmhhc093blByb3BlcnR5KGtleSkgJiYgX3NraXAuaW5kZXhPZihrZXkpID09PSAtMSkge1xuICAgICAgICBfZG8oa2V5LCBfc291cmNlW2tleV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIHByb2Nlc3MgbGlua3MgYW5kIHN0b3JlcyB0aGVtIGluIHRoZSBwYWNrZXIgY2FjaGVcbiAgZnVuY3Rpb24gcHJvY2Vzc0ZlYXR1cmUoX3JhdywgX25hbWUsIF9mZWF0dXJlLCBfb3RoZXIsIF9kbykge1xuICAgIGlmKF9mZWF0dXJlID09PSAnLicgfHwgX2ZlYXR1cmUgPT09IHRydWUpIHtcbiAgICAgIHZhciBza2lwID0gW19uYW1lXTtcbiAgICAgIGlmKF9vdGhlcikgc2tpcC5wdXNoLmFwcGx5KHNraXAsIGFuZ3VsYXIuaXNBcnJheShfb3RoZXIpID8gX290aGVyIDogW19vdGhlcl0pO1xuICAgICAgZXhjbHVkZShfcmF3LCBza2lwLCBfZG8pO1xuICAgIH0gZWxzZSBpZih0eXBlb2YgX2ZlYXR1cmUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBleGNsdWRlKF9yYXdbX2ZlYXR1cmVdLCBbXSwgX2RvKTtcbiAgICB9IGVsc2UgeyAvLyBsaW5rcyBpcyBhbiBhcnJheVxuICAgICAgaW5jbHVkZShfcmF3LCBfZmVhdHVyZSwgX2RvKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGNsYXNzIERlZmF1bHRQYWNrZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFNpbXBsZSBgJHVucGFja2AgaW1wbGVtZW50YXRpb24gdGhhdCBhdHRlbXB0cyB0byBjb3ZlciB0aGUgc3RhbmRhcmQgcHJvcG9zZWQgYnlcbiAgICogW2FjdGl2ZV9tb2RlbF9zZXJpYWxpemVyc10oaHR0cHM6Ly9naXRodWIuY29tL3JhaWxzLWFwaS9hY3RpdmVfbW9kZWxfc2VyaWFsaXplcnMuXG4gICAqXG4gICAqIFRoaXMgaXMgYSBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhlIHdyYXBwaW5nIHN0cnVjdHVyZSByZWNvbW1lbnRlZCBieSB0aGUganNvbmFwaS5vcmcgc3RhbmRhcmQsXG4gICAqIGl0IHN1cHBvcnRzIHNpZGUgbG9hZGVkIGFzc29jaWF0ZWQgcmVzb3VyY2VzICh2aWEgc3VwcG9ydGluZyByZWxhdGlvbnMpIGFuZCBtZXRhZGF0YSBleHRyYWN0aW9uLlxuICAgKlxuICAgKiBUbyBhY3RpdmF0ZSBhZGQgbWl4aW4gdG8gbW9kZWwgY2hhaW5cbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiByZXN0bW9kUHJvdmlkZS5yZWJhc2UoJ0RlZmF1bHRQYWNrZXInKTtcbiAgICogYGBgXG4gICAqXG4gICAqICMjIyBKc29uIHJvb3RcbiAgICpcbiAgICogQnkgZGVmYXVsdCB0aGUgbWl4aW4gd2lsbCB1c2UgdGhlIHNpbmd1bGFyIG1vZGVsIG5hbWUgYXMganNvbiByb290IGZvciBzaW5nbGUgcmVzb3VyY2UgcmVxdWVzdHNcbiAgICogYW5kIHBsdXJhbGl6ZWQgbmFtZSBmb3IgY29sbGVjdGlvbiByZXF1ZXN0cy4gTWFrZSBzdXJlIHRoZSBtb2RlbCBuYW1lIGlzIGNvcnJlY3RseSBzZXQuXG4gICAqXG4gICAqIFRvIG92ZXJyaWRlIHRoZSBuYW1lIHVzZWQgYnkgdGhlIG1peGluIHNldCB0aGUgKipqc29uUm9vdFNpbmdsZSoqIGFuZCAqKmpzb25Sb290TWFueSoqIHZhcmlhYmxlcy5cbiAgICogT3Igc2V0ICoqanNvblJvb3QqKiB0byBvdmVycmlkZSBib3RoLlxuICAgKlxuICAgKiAjIyMgU2lkZSBsb2FkZWQgcmVzb3VyY2VzXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQgdGhlIG1peGluIHdpbGwgbG9vayBmb3IgbGlua3MgdG8gb3RoZXIgcmVzb3VyY2VzIGluIHRoZSAnbGlua2VkJyByb290IHByb3BlcnR5LCB5b3VcbiAgICogY2FuIGNoYW5nZSB0aGlzIGJ5IHNldHRpbmcgdGhlIGpzb25MaW5rcyB2YXJpYWJsZS4gVG8gdXNlIHRoZSByb290IGVsZW1lbnQgYXMgbGluayBzb3VyY2VcbiAgICogdXNlIGBqc29uTGlua3M6ICcuJ2AuIFlvdSBjYW4gYWxzbyBleHBsaWNpdGx5IHNlbGVjdCB3aGljaCBwcm9wZXJ0aWVzIHRvIGNvbnNpZGVyIGxpbmtzIHVzaW5nIGFuXG4gICAqIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLiBUbyBza2lwIGxpbmtzIHByb2Nlc3NpbmcgYWx0b2dldGhlciwgc2V0IGl0IHRvIGZhbHNlLlxuICAgKlxuICAgKiBMaW5rcyBhcmUgZXhwZWN0ZWQgdG8gdXNlIHRoZSBwbHVyYWxpemVkIHZlcnNpb24gb2YgdGhlIG5hbWUgZm9yIHRoZSByZWZlcmVuY2VkIG1vZGVsLiBGb3IgZXhhbXBsZSxcbiAgICogZ2l2ZW4gdGhlIGZvbGxvd2luZyByZXNwb25zZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7XG4gICAqICAgYmlrZXM6IFsuLi5dLFxuICAgKiAgIGxpbmtzIHtcbiAgICogICAgIHBhcnRzOiBbLi4uXVxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogUmVzdG1vZCB3aWxsIGV4cGVjdCB0aGF0IHRoZSBQYXJ0IG1vZGVsIHBsdXJhbCBuYW1lIGlzIGNvcnJlY3RseSBzZXQgcGFydHMuIE9ubHkgcHJvcGVydGllcyBkZWNsYXJlZFxuICAgKiBhcyByZWZlcmVuY2UgcmVsYXRpb25zIChiZWxvbmdzVG8gYW5kIGJlbG9uZ3NUb01hbnkpIHdpbGwgYmUgY29ycmVjdGx5IHJlc29sdmVkLlxuICAgKlxuICAgKiAjIyMgTWV0YWRhdGFcbiAgICpcbiAgICogQnkgZGVmYXVsdCBtZXRhZGF0YSBpcyBvbmx5IGNhcHR1cmVkIGlmIGl0IGNvbWVzIGluIHRoZSAnbWV0YScgcm9vdCBwcm9wZXJ0eS4gTWV0YWRhdGEgaXMgdGhlblxuICAgKiBzdG9yZWQgaW4gdGhlICRtZXRhIHByb3BlcnR5IG9mIHRoZSByZXNvdXJjZSBiZWluZyB1bndyYXBwZWQuXG4gICAqXG4gICAqIEp1c3QgbGlrZSBsaW5rcywgdG8gY2hhbmdlIHRoZSBtZXRhZGF0YSBzb3VyY2UgcHJvcGVydHkgc2V0IHRoZSBqc29uTWV0YSBwcm9wZXJ0eSB0byB0aGUgZGVzaXJlZCBuYW1lLCBzZXRcbiAgICogaXQgdG8gJy4nIHRvIGNhcHR1cmUgdGhlIGVudGlyZSByYXcgcmVzcG9uc2Ugb3Igc2V0IGl0IHRvIGZhbHNlIHRvIHNraXAgbWV0YWRhdGEgYW5kIHNldCBpdCB0byBhbiBhcnJheSBvZiBwcm9wZXJ0aWVzXG4gICAqIHRvIGJlIGV4dHJhY3Qgc2VsZWN0ZWQgcHJvcGVydGllcy5cbiAgICpcbiAgICogQHByb3BlcnR5IHttaXhlZH0gc2luZ2xlIFRoZSBleHBlY3RlZCBzaW5nbGUgcmVzb3VyY2Ugd3JhcHBlciBwcm9wZXJ0eSBuYW1lXG4gICAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBwbHVyYWwgVGhlIGV4cGVjdGVkIGNvbGxlY3Rpb24gd3JhcHBlciBwcm9wZXJ0eSBuYW1lXG4gICAqIEBwcm9wZXJ0eSB7bWl4ZWR9IGxpbmtzIFRoZSBsaW5rcyByZXBvc2l0b3J5IHByb3BlcnR5IG5hbWVcbiAgICogQHByb3BlcnR5IHtvYmplY3R9IG1ldGEgVGhlIG1ldGFkYXRhIHJlcG9zaXRvcnkgcHJvcGVydHkgbmFtZVxuICAgKlxuICAgKi9cbiAgcmV0dXJuIHJlc3Rtb2QubWl4aW4oZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5kZWZpbmUoJ01vZGVsLnVucGFjaycsIGZ1bmN0aW9uKF9yZXNvdXJjZSwgX3Jhdykge1xuICAgICAgdmFyIG5hbWUgPSBudWxsLFxuICAgICAgICAgIGxpbmtzID0gdGhpcy5nZXRQcm9wZXJ0eSgnanNvbkxpbmtzJywgJ2xpbmtlZCcpLFxuICAgICAgICAgIG1ldGEgPSB0aGlzLmdldFByb3BlcnR5KCdqc29uTWV0YScsICdtZXRhJyk7XG5cbiAgICAgIGlmKF9yZXNvdXJjZS4kaXNDb2xsZWN0aW9uKSB7XG4gICAgICAgIG5hbWUgPSB0aGlzLmdldFByb3BlcnR5KCdqc29uUm9vdE1hbnknKSB8fCB0aGlzLmdldFByb3BlcnR5KCdqc29uUm9vdCcpIHx8IHRoaXMuZ2V0UHJvcGVydHkoJ3BsdXJhbCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVE9ETzogdXNlIHBsdXJhbCBmb3Igc2luZ2xlIHJlc291cmNlIG9wdGlvbi5cbiAgICAgICAgbmFtZSA9IHRoaXMuZ2V0UHJvcGVydHkoJ2pzb25Sb290U2luZ2xlJykgfHwgdGhpcy5nZXRQcm9wZXJ0eSgnanNvblJvb3QnKSB8fCB0aGlzLmdldFByb3BlcnR5KCduYW1lJyk7XG4gICAgICB9XG5cbiAgICAgIGlmKG1ldGEpIHtcbiAgICAgICAgX3Jlc291cmNlLiRtZXRhZGF0YSA9IHt9O1xuICAgICAgICBwcm9jZXNzRmVhdHVyZShfcmF3LCBuYW1lLCBtZXRhLCBsaW5rcywgZnVuY3Rpb24oX2tleSwgX3ZhbHVlKSB7XG4gICAgICAgICAgX3Jlc291cmNlLiRtZXRhZGF0YVtfa2V5XSA9IF92YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmKGxpbmtzKSB7XG4gICAgICAgIHByb2Nlc3NGZWF0dXJlKF9yYXcsIG5hbWUsIGxpbmtzLCBtZXRhLCBmdW5jdGlvbihfa2V5LCBfdmFsdWUpIHtcbiAgICAgICAgICAvLyBUT0RPOiBjaGVjayB0aGF0IGNhY2hlIGlzIGFuIGFycmF5LlxuICAgICAgICAgIHBhY2tlckNhY2hlLmZlZWQoX2tleSwgX3ZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfcmF3W25hbWVdO1xuICAgIH0pO1xuICB9KTtcblxufV0pO1xuLyoqXG4gKiBAY2xhc3MgVXRpbHNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBWYXJpb3VzIHV0aWxpdGllcyB1c2VkIGFjcm9zcyB0aGUgbGlicmFyeS5cbiAqXG4gKi9cblJNTW9kdWxlLmZhY3RvcnkoJ1JNVXRpbHMnLCBbJyRsb2cnLCBmdW5jdGlvbigkbG9nKSB7XG5cbiAgLy8gZGV0ZXJtaW5lIGJyb3dzZXIgc3VwcG9ydCBmb3Igb2JqZWN0IHByb3RvdHlwZSBjaGFuZ2luZ1xuICB2YXIgSUZSQU1FX1JFRiA9IFtdO1xuICB2YXIgUFJPVE9fU0VUVEVSID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciBUZXN0ID0gZnVuY3Rpb24oKSB7fTtcbiAgICBpZihPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihfdGFyZ2V0LCBfcHJvdG8pIHtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKF90YXJnZXQsIF9wcm90byk7IC8vIE5vdCBzdXJlIGFib3V0IHN1cHBvcnRpbmcgdGhpcy4uLlxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYoKG5ldyBUZXN0KS5fX3Byb3RvX18gPT09IFRlc3QucHJvdG90eXBlKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oX3RhcmdldCwgX3Byb3RvKSB7XG4gICAgICAgIF90YXJnZXQuX19wcm90b19fID0gX3Byb3RvO1xuICAgICAgfTtcbiAgICB9XG4gIH0pKCk7XG5cbiAgdmFyIFV0aWxzID0ge1xuXG4gICAgLy8gSWdub3JlIE1hc2tzXG4gICAgQ1JFQVRFX01BU0s6ICdDJyxcbiAgICBVUERBVEVfTUFTSzogJ1UnLFxuICAgIFJFQURfTUFTSzogJ1InLFxuICAgIFdSSVRFX01BU0s6ICdDVScsXG4gICAgRlVMTF9NQVNLOiAnQ1JVJyxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBVdGlsc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICpcbiAgICAgKiBGb3JtYXRzIGEgc3RyaW5nXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IF9zdHIgU3RyaW5nIHRvIGZvcm1hdFxuICAgICAqIEBwYXJhbSAge2FycmF5fSBfYXJncyBTdHJpbmcgYXJndW1lbnRzXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBGb3JtYXRlZCBzdHJpbmdcbiAgICAgKi9cbiAgICBmb3JtYXQ6IGZ1bmN0aW9uKF9zdHIsIF9hcmdzKSB7XG4gICAgICBmb3IodmFyIGkgPSAwOyBfYXJncyAmJiBpIDwgX2FyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgX3N0ciA9IF9zdHIucmVwbGFjZSgnJCcgKyAoaSsxKSwgX2FyZ3NbaV0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9zdHI7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBVdGlsc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICpcbiAgICAgKiBUZXN0IGZvciBhIGNvbmRpdGlvbiB0byBiZSBtZXQsIGlmIG5vdCBhbiBleGNlcHRpb24gaXMgdGhyb3duLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gX2NvbmRpdGlvbiBDb25kaXRpb24gdG8gYXNzZXJ0XG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBfbXNnIEVycm9yIG1lc3NhZ2VcbiAgICAgKi9cbiAgICBhc3NlcnQ6IGZ1bmN0aW9uKF9jb25kaXRpb24sIF9tc2cgLyosIHBhcmFtcyAqLykge1xuICAgICAgaWYoIV9jb25kaXRpb24pIHtcbiAgICAgICAgdmFyIHBhcmFtcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgICAgIF9tc2cgPSBVdGlscy5mb3JtYXQoX21zZywgcGFyYW1zKTtcbiAgICAgICAgJGxvZy5lcnJvcihfbXNnKTsgLy8gbG9nIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKF9tc2cpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgVXRpbHNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogU2ltcGxlIHVybCBqb2luaW5nLCByZXR1cm5zIG51bGwgaWYgX2hlYWQgb3IgX3RhaWwgaXMgbnVsbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gX2hlYWQgVXJsIHByZWZpeFxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gX3RhaWwgVXJsIHN1ZmZpeFxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gUmVzdWx0aW5nIHVybFxuICAgICAqL1xuICAgIGpvaW5Vcmw6IGZ1bmN0aW9uKF9oZWFkLCBfdGFpbCkge1xuICAgICAgaWYoIV9oZWFkIHx8ICFfdGFpbCkgcmV0dXJuIG51bGw7XG4gICAgICByZXR1cm4gKF9oZWFkKycnKS5yZXBsYWNlKC9cXC8kLywgJycpICsgJy8nICsgKF90YWlsKycnKS5yZXBsYWNlKC9eXFwvLywgJycpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgVXRpbHNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogQ2xlYW5zIHRyYWlsaW5nIHNsYXNoZXMgZnJvbSBhbiB1cmxcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gX3VybCBVcmwgdG8gY2xlYW5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFJlc3VsdGluZyB1cmxcbiAgICAgKi9cbiAgICBjbGVhblVybDogZnVuY3Rpb24oX3VybCkge1xuICAgICAgcmV0dXJuIF91cmwgPyBfdXJsLnJlcGxhY2UoL1xcLyQvLCAnJykgOiBfdXJsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgVXRpbHNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogQ2hhaW5zIHRvIGZpbHRlcmluZyBmdW5jdGlvbnMgdG9nZXRoZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge2Z1bmN0aW9ufSBfZmlyc3Qgb3JpZ2luYWwgZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0gIHtmdW5jdGlvbn0gX2Z1biAgIGZ1bmN0aW9uIHRvIGNhbGwgb24gdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHJlc3VsdFxuICAgICAqIEByZXR1cm4ge21peGVkfSB2YWx1ZSByZXR1cm5lZCBieSB0aGUgbGFzdCBmdW5jdGlvbiBjYWxsXG4gICAgICovXG4gICAgY2hhaW46IGZ1bmN0aW9uKF9maXJzdCwgX2Z1bikge1xuICAgICAgaWYoIV9maXJzdCkgcmV0dXJuIF9mdW47XG4gICAgICByZXR1cm4gZnVuY3Rpb24oX3ZhbHVlKSB7XG4gICAgICAgIHJldHVybiBfZnVuLmNhbGwodGhpcywgX2ZpcnN0LmNhbGwodGhpcywgX3ZhbHVlKSk7XG4gICAgICB9O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgVXRpbHNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogT3ZlcnJpZGUgYSBwcm9wZXJ0eSB2YWx1ZSwgbWFraW5nIG92ZXJyaWRlbiBmdW5jdGlvbiBhdmFpbGFibGUgYXMgdGhpcy4kc3VwZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge2Z1bmN0aW9ufSBfc3VwZXIgT3JpZ2luYWwgdmFsdWVcbiAgICAgKiBAcGFyYW0gIHttaXhlZH0gX2Z1biBOZXcgcHJvcGVydHkgdmFsdWVcbiAgICAgKiBAcmV0dXJuIHttaXhlZH0gVmFsdWUgcmV0dXJuZWQgYnkgbmV3IGZ1bmN0aW9uXG4gICAgICovXG4gICAgb3ZlcnJpZGU6IGZ1bmN0aW9uKF9zdXBlciwgX2Z1bikge1xuICAgICAgaWYoIV9zdXBlciB8fCB0eXBlb2YgX2Z1biAhPT0gJ2Z1bmN0aW9uJykgcmV0dXJuIF9mdW47XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG9sZFN1cGVyID0gdGhpcy4kc3VwZXI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy4kc3VwZXIgPSBfc3VwZXI7XG4gICAgICAgICAgcmV0dXJuIF9mdW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0aGlzLiRzdXBlciA9IG9sZFN1cGVyO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgVXRpbHNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogRXh0ZW5kIGFuIG9iamVjdCB1c2luZyBgVXRpbHMub3ZlcnJpZGVgIGluc3RlYWQgb2YganVzdCByZXBsYWNpbmcgdGhlIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge29iamVjdH0gX3RhcmdldCBPYmplY3QgdG8gYmUgZXh0ZW5kZWRcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IF9vdGhlciAgU291cmNlIG9iamVjdFxuICAgICAqL1xuICAgIGV4dGVuZE92ZXJyaWRlbjogZnVuY3Rpb24oX3RhcmdldCkge1xuICAgICAgZm9yKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgb3RoZXIgPSBhcmd1bWVudHNbaV07XG4gICAgICAgIGZvcih2YXIga2V5IGluIG90aGVyKSB7XG4gICAgICAgICAgaWYob3RoZXIuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgX3RhcmdldFtrZXldID0gX3RhcmdldFtrZXldICYmIHR5cGVvZiBfdGFyZ2V0W2tleV0gPT09ICdmdW5jdGlvbicgPyBVdGlscy5vdmVycmlkZShfdGFyZ2V0W2tleV0sIG90aGVyW2tleV0pIDogb3RoZXJba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF90YXJnZXQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBVdGlsc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICpcbiAgICAgKiBHZW5lcmF0ZXMgYSBuZXcgYXJyYXkgdHlwZSwgaGFuZGxlcyBwbGF0Zm9ybSBzcGVjaWZpY3MgKGJhZy1PLWhhY2tzKVxuICAgICAqXG4gICAgICogQHJldHVybiB7b2JqZWN0fSBJbmRlcGVuZGVudCBhcnJheSB0eXBlLlxuICAgICAqL1xuICAgIGJ1aWxkQXJyYXlUeXBlOiBmdW5jdGlvbihfZm9yY2VJZnJhbWUpIHtcblxuICAgICAgdmFyIGFycmF5VHlwZTtcblxuICAgICAgaWYoUFJPVE9fU0VUVEVSICYmICFfZm9yY2VJZnJhbWUpIHtcblxuICAgICAgICAvLyBVc2Ugb2JqZWN0IHByb3RvdHlwZSBvdmVycmlkZSB0ZWNobmlxdWVcbiAgICAgICAgLy9cbiAgICAgICAgLy8gVmVyeSBuaWNlIGFycmF5IHN1YmNsYXNzaW5nIGFuYWx5c2lzOiBodHRwOi8vcGVyZmVjdGlvbmtpbGxzLmNvbS9ob3ctZWNtYXNjcmlwdC01LXN0aWxsLWRvZXMtbm90LWFsbG93LXRvLXN1YmNsYXNzLWFuLWFycmF5LyN3aHlfc3ViY2xhc3NfYW5fYXJyYXlcbiAgICAgICAgLy9cblxuICAgICAgICB2YXIgU3ViQXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgYXJyID0gWyBdO1xuICAgICAgICAgIGFyci5wdXNoLmFwcGx5KGFyciwgYXJndW1lbnRzKTtcbiAgICAgICAgICBQUk9UT19TRVRURVIoYXJyLCBTdWJBcnJheS5wcm90b3R5cGUpO1xuICAgICAgICAgIHJldHVybiBhcnI7XG4gICAgICAgIH07XG5cbiAgICAgICAgU3ViQXJyYXkucHJvdG90eXBlID0gW107XG4gICAgICAgIFN1YkFycmF5LnByb3RvdHlwZS5sYXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXNbdGhpcy5sZW5ndGggLSAxXTtcbiAgICAgICAgfTtcblxuICAgICAgICBhcnJheVR5cGUgPSBTdWJBcnJheTtcblxuICAgICAgfSBlbHNlICB7XG5cbiAgICAgICAgLy8gVXNlIGlmcmFtZSBoaWphY2sgdGVjaG5pcXVlIGZvciBJRTExPFxuICAgICAgICAvL1xuICAgICAgICAvLyBCYXNlZCBvbiB0aGUgYXdlc29tZSBibG9nIHBvc3Qgb2YgRGVhbiBFZHdhcmRzOiBodHRwOi8vZGVhbi5lZHdhcmRzLm5hbWUvd2VibG9nLzIwMDYvMTEvaG9vcmF5L1xuICAgICAgICAvL1xuXG4gICAgICAgIC8vIGNyZWF0ZSBhIGhpZGRlbiA8aWZyYW1lPi5cbiAgICAgICAgdmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgICAgICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgaWZyYW1lLmhlaWdodCA9IDA7XG4gICAgICAgIGlmcmFtZS53aWR0aCA9IDA7XG4gICAgICAgIGlmcmFtZS5ib3JkZXIgPSAwO1xuXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblxuICAgICAgICAvLyB3cml0ZSBhIHNjcmlwdCBpbnRvIHRoZSA8aWZyYW1lPiBhbmQgc3RlYWwgaXRzIEFycmF5IG9iamVjdC5cbiAgICAgICAgd2luZG93LmZyYW1lc1t3aW5kb3cuZnJhbWVzLmxlbmd0aCAtIDFdLmRvY3VtZW50LndyaXRlKCc8c2NyaXB0PnBhcmVudC5SZXN0bW9kQXJyYXkgPSBBcnJheTs8XFwvc2NyaXB0PicpO1xuXG4gICAgICAgIC8vIHRha2UgdGhlIGFycmF5IG9iamVjdCBhbmQgbW92ZSBpdCB0byBsb2NhbCBjb250ZXh0LlxuICAgICAgICBhcnJheVR5cGUgPSB3aW5kb3cuUmVzdG1vZEFycmF5O1xuICAgICAgICBkZWxldGUgd2luZG93LlJlc3Rtb2RBcnJheTtcblxuICAgICAgICAvLyBjb3B5IHRoaXMgY29udGV4dCBBcnJheSdzIGV4dGVuc2lvbnMgdG8gbmV3IGFycmF5IHR5cGUgKGNvdWxkIGJlIGEgbGl0dGxlIHNsb3cuLi4pXG4gICAgICAgIGZvcih2YXIga2V5IGluIEFycmF5LnByb3RvdHlwZSkge1xuICAgICAgICAgIGlmKHR5cGVvZiBBcnJheS5wcm90b3R5cGVba2V5XSA9PT0gJ2Z1bmN0aW9uJyAmJiAhYXJyYXlUeXBlLnByb3RvdHlwZVtrZXldKSB7XG4gICAgICAgICAgICBhcnJheVR5cGUucHJvdG90eXBlW2tleV0gPSBBcnJheS5wcm90b3R5cGVba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1vdmUgaWZyYW1lIGZyb20gRE9NLlxuICAgICAgICAvL1xuICAgICAgICAvLyBFdmVuIHRob3VnaCBNUyBzYXlzIHRoYXQgcmVtb3ZpbmcgaWZyYW1lIGZyb20gRE9NIHdpbGwgcmVsZWFzZSBpdCdzIHJlbGF0ZWQgc3RydWN0dXJlcyAoaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2dnNjIyOTI5KHY9dnMuODUpLmFzcHgpLFxuICAgICAgICAvLyBhY3R1YWxseSBrZWVwaW5nIGl0IHJlZmVyZW5jZWQgaGFzIHByb3ZlbiB0byBiZSBlbm91Z2ggdG8ga2VlcCB0aGUgc3RydWN0dXJlcyBhbGl2ZS4gKHRoYXQgaW5jbHVkZXMgb3VyIGFycmF5IHR5cGUpXG4gICAgICAgIC8vXG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaWZyYW1lKTtcbiAgICAgICAgSUZSQU1FX1JFRi5wdXNoKGlmcmFtZSk7IC8vIGtlZXAgaWZyYW1lIHJlZmVyZW5jZSFcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFycmF5VHlwZTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFV0aWxzO1xufV0pO1xufSkoYW5ndWxhcik7IiwiLyoqXG4gKiBBUEkgQm91bmQgTW9kZWxzIGZvciBBbmd1bGFySlNcbiAqIEB2ZXJzaW9uIHYxLjEuNyAtIDIwMTUtMDEtMDZcbiAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyLXBsYXRhbnVzL3Jlc3Rtb2RcbiAqIEBhdXRob3IgSWduYWNpbyBCYWl4YXMgPGlnbmFjaW9AcGxhdGFuLnVzPlxuICogQGxpY2Vuc2UgTUlUIExpY2Vuc2UsIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4gKi9cbiFmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjthLm1vZHVsZShcInJlc3Rtb2RcIikuZmFjdG9yeShcIkFNU0FwaVwiLFtcInJlc3Rtb2RcIixcImluZmxlY3RvclwiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubWl4aW4oXCJEZWZhdWx0UGFja2VyXCIseyRjb25maWc6e3N0eWxlOlwiQU1TXCIscHJpbWFyeUtleTpcImlkXCIsanNvbk1ldGE6XCJtZXRhXCIsanNvbkxpbmtzOlwibGlua3NcIn0sJGV4dGVuZDp7TW9kZWw6e2RlY29kZU5hbWU6Yi5jYW1lbGl6ZSxlbmNvZGVOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiBiLnBhcmFtZXRlcml6ZShhLFwiX1wiKX0sZW5jb2RlVXJsTmFtZTpiLnBhcmFtZXRlcml6ZX19fSl9XSl9KGFuZ3VsYXIpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBtYWNpbnRvc2ggb24gMS8yOC8xNS5cbiAqL1xuXG5yZXF1aXJlKCcuL2FuZ3VsYXIubWluLmpzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGFuZ3VsYXI7IiwiLypcbiBBbmd1bGFySlMgdjEuMy4xM1xuIChjKSAyMDEwLTIwMTQgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXG4gTGljZW5zZTogTUlUXG4qL1xuKGZ1bmN0aW9uKE0sWSx0KXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gUyhiKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHNbMF0sYztjPVwiW1wiKyhiP2IrXCI6XCI6XCJcIikrYStcIl0gaHR0cDovL2Vycm9ycy5hbmd1bGFyanMub3JnLzEuMy4xMy9cIisoYj9iK1wiL1wiOlwiXCIpK2E7Zm9yKGE9MTthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKXtjPWMrKDE9PWE/XCI/XCI6XCImXCIpK1wicFwiKyhhLTEpK1wiPVwiO3ZhciBkPWVuY29kZVVSSUNvbXBvbmVudCxlO2U9YXJndW1lbnRzW2FdO2U9XCJmdW5jdGlvblwiPT10eXBlb2YgZT9lLnRvU3RyaW5nKCkucmVwbGFjZSgvIFxce1tcXHNcXFNdKiQvLFwiXCIpOlwidW5kZWZpbmVkXCI9PXR5cGVvZiBlP1widW5kZWZpbmVkXCI6XCJzdHJpbmdcIiE9dHlwZW9mIGU/SlNPTi5zdHJpbmdpZnkoZSk6ZTtjKz1kKGUpfXJldHVybiBFcnJvcihjKX19ZnVuY3Rpb24gVGEoYil7aWYobnVsbD09Ynx8VWEoYikpcmV0dXJuITE7dmFyIGE9Yi5sZW5ndGg7cmV0dXJuIGIubm9kZVR5cGU9PT1cbm9hJiZhPyEwOkYoYil8fEgoYil8fDA9PT1hfHxcIm51bWJlclwiPT09dHlwZW9mIGEmJjA8YSYmYS0xIGluIGJ9ZnVuY3Rpb24gcyhiLGEsYyl7dmFyIGQsZTtpZihiKWlmKEcoYikpZm9yKGQgaW4gYilcInByb3RvdHlwZVwiPT1kfHxcImxlbmd0aFwiPT1kfHxcIm5hbWVcIj09ZHx8Yi5oYXNPd25Qcm9wZXJ0eSYmIWIuaGFzT3duUHJvcGVydHkoZCl8fGEuY2FsbChjLGJbZF0sZCxiKTtlbHNlIGlmKEgoYil8fFRhKGIpKXt2YXIgZj1cIm9iamVjdFwiIT09dHlwZW9mIGI7ZD0wO2ZvcihlPWIubGVuZ3RoO2Q8ZTtkKyspKGZ8fGQgaW4gYikmJmEuY2FsbChjLGJbZF0sZCxiKX1lbHNlIGlmKGIuZm9yRWFjaCYmYi5mb3JFYWNoIT09cyliLmZvckVhY2goYSxjLGIpO2Vsc2UgZm9yKGQgaW4gYiliLmhhc093blByb3BlcnR5KGQpJiZhLmNhbGwoYyxiW2RdLGQsYik7cmV0dXJuIGJ9ZnVuY3Rpb24gRWQoYixhLGMpe2Zvcih2YXIgZD1PYmplY3Qua2V5cyhiKS5zb3J0KCksZT0wO2U8ZC5sZW5ndGg7ZSsrKWEuY2FsbChjLFxuYltkW2VdXSxkW2VdKTtyZXR1cm4gZH1mdW5jdGlvbiBsYyhiKXtyZXR1cm4gZnVuY3Rpb24oYSxjKXtiKGMsYSl9fWZ1bmN0aW9uIEZkKCl7cmV0dXJuKytvYn1mdW5jdGlvbiBtYyhiLGEpe2E/Yi4kJGhhc2hLZXk9YTpkZWxldGUgYi4kJGhhc2hLZXl9ZnVuY3Rpb24geChiKXtmb3IodmFyIGE9Yi4kJGhhc2hLZXksYz0xLGQ9YXJndW1lbnRzLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT1hcmd1bWVudHNbY107aWYoZSlmb3IodmFyIGY9T2JqZWN0LmtleXMoZSksZz0wLGg9Zi5sZW5ndGg7ZzxoO2crKyl7dmFyIGw9ZltnXTtiW2xdPWVbbF19fW1jKGIsYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gYmEoYil7cmV0dXJuIHBhcnNlSW50KGIsMTApfWZ1bmN0aW9uIFBiKGIsYSl7cmV0dXJuIHgoT2JqZWN0LmNyZWF0ZShiKSxhKX1mdW5jdGlvbiB6KCl7fWZ1bmN0aW9uIHBhKGIpe3JldHVybiBifWZ1bmN0aW9uIGVhKGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBifX1mdW5jdGlvbiBCKGIpe3JldHVyblwidW5kZWZpbmVkXCI9PT1cbnR5cGVvZiBifWZ1bmN0aW9uIHkoYil7cmV0dXJuXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBifWZ1bmN0aW9uIEkoYil7cmV0dXJuIG51bGwhPT1iJiZcIm9iamVjdFwiPT09dHlwZW9mIGJ9ZnVuY3Rpb24gRihiKXtyZXR1cm5cInN0cmluZ1wiPT09dHlwZW9mIGJ9ZnVuY3Rpb24gVihiKXtyZXR1cm5cIm51bWJlclwiPT09dHlwZW9mIGJ9ZnVuY3Rpb24gcWEoYil7cmV0dXJuXCJbb2JqZWN0IERhdGVdXCI9PT1EYS5jYWxsKGIpfWZ1bmN0aW9uIEcoYil7cmV0dXJuXCJmdW5jdGlvblwiPT09dHlwZW9mIGJ9ZnVuY3Rpb24gcGIoYil7cmV0dXJuXCJbb2JqZWN0IFJlZ0V4cF1cIj09PURhLmNhbGwoYil9ZnVuY3Rpb24gVWEoYil7cmV0dXJuIGImJmIud2luZG93PT09Yn1mdW5jdGlvbiBWYShiKXtyZXR1cm4gYiYmYi4kZXZhbEFzeW5jJiZiLiR3YXRjaH1mdW5jdGlvbiBXYShiKXtyZXR1cm5cImJvb2xlYW5cIj09PXR5cGVvZiBifWZ1bmN0aW9uIG5jKGIpe3JldHVybiEoIWJ8fCEoYi5ub2RlTmFtZXx8Yi5wcm9wJiZcbmIuYXR0ciYmYi5maW5kKSl9ZnVuY3Rpb24gR2QoYil7dmFyIGE9e307Yj1iLnNwbGl0KFwiLFwiKTt2YXIgYztmb3IoYz0wO2M8Yi5sZW5ndGg7YysrKWFbYltjXV09ITA7cmV0dXJuIGF9ZnVuY3Rpb24gdWEoYil7cmV0dXJuIFEoYi5ub2RlTmFtZXx8YlswXSYmYlswXS5ub2RlTmFtZSl9ZnVuY3Rpb24gWGEoYixhKXt2YXIgYz1iLmluZGV4T2YoYSk7MDw9YyYmYi5zcGxpY2UoYywxKTtyZXR1cm4gYX1mdW5jdGlvbiBFYShiLGEsYyxkKXtpZihVYShiKXx8VmEoYikpdGhyb3cgS2EoXCJjcHdzXCIpO2lmKGEpe2lmKGI9PT1hKXRocm93IEthKFwiY3BpXCIpO2M9Y3x8W107ZD1kfHxbXTtpZihJKGIpKXt2YXIgZT1jLmluZGV4T2YoYik7aWYoLTEhPT1lKXJldHVybiBkW2VdO2MucHVzaChiKTtkLnB1c2goYSl9aWYoSChiKSlmb3IodmFyIGY9YS5sZW5ndGg9MDtmPGIubGVuZ3RoO2YrKyllPUVhKGJbZl0sbnVsbCxjLGQpLEkoYltmXSkmJihjLnB1c2goYltmXSksZC5wdXNoKGUpKSxhLnB1c2goZSk7XG5lbHNle3ZhciBnPWEuJCRoYXNoS2V5O0goYSk/YS5sZW5ndGg9MDpzKGEsZnVuY3Rpb24oYixjKXtkZWxldGUgYVtjXX0pO2ZvcihmIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShmKSYmKGU9RWEoYltmXSxudWxsLGMsZCksSShiW2ZdKSYmKGMucHVzaChiW2ZdKSxkLnB1c2goZSkpLGFbZl09ZSk7bWMoYSxnKX19ZWxzZSBpZihhPWIpSChiKT9hPUVhKGIsW10sYyxkKTpxYShiKT9hPW5ldyBEYXRlKGIuZ2V0VGltZSgpKTpwYihiKT8oYT1uZXcgUmVnRXhwKGIuc291cmNlLGIudG9TdHJpbmcoKS5tYXRjaCgvW15cXC9dKiQvKVswXSksYS5sYXN0SW5kZXg9Yi5sYXN0SW5kZXgpOkkoYikmJihlPU9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKGIpKSxhPUVhKGIsZSxjLGQpKTtyZXR1cm4gYX1mdW5jdGlvbiByYShiLGEpe2lmKEgoYikpe2E9YXx8W107Zm9yKHZhciBjPTAsZD1iLmxlbmd0aDtjPGQ7YysrKWFbY109YltjXX1lbHNlIGlmKEkoYikpZm9yKGMgaW4gYT1hfHx7fSxcbmIpaWYoXCIkXCIhPT1jLmNoYXJBdCgwKXx8XCIkXCIhPT1jLmNoYXJBdCgxKSlhW2NdPWJbY107cmV0dXJuIGF8fGJ9ZnVuY3Rpb24gZ2EoYixhKXtpZihiPT09YSlyZXR1cm4hMDtpZihudWxsPT09Ynx8bnVsbD09PWEpcmV0dXJuITE7aWYoYiE9PWImJmEhPT1hKXJldHVybiEwO3ZhciBjPXR5cGVvZiBiLGQ7aWYoYz09dHlwZW9mIGEmJlwib2JqZWN0XCI9PWMpaWYoSChiKSl7aWYoIUgoYSkpcmV0dXJuITE7aWYoKGM9Yi5sZW5ndGgpPT1hLmxlbmd0aCl7Zm9yKGQ9MDtkPGM7ZCsrKWlmKCFnYShiW2RdLGFbZF0pKXJldHVybiExO3JldHVybiEwfX1lbHNle2lmKHFhKGIpKXJldHVybiBxYShhKT9nYShiLmdldFRpbWUoKSxhLmdldFRpbWUoKSk6ITE7aWYocGIoYikmJnBiKGEpKXJldHVybiBiLnRvU3RyaW5nKCk9PWEudG9TdHJpbmcoKTtpZihWYShiKXx8VmEoYSl8fFVhKGIpfHxVYShhKXx8SChhKSlyZXR1cm4hMTtjPXt9O2ZvcihkIGluIGIpaWYoXCIkXCIhPT1kLmNoYXJBdCgwKSYmIUcoYltkXSkpe2lmKCFnYShiW2RdLFxuYVtkXSkpcmV0dXJuITE7Y1tkXT0hMH1mb3IoZCBpbiBhKWlmKCFjLmhhc093blByb3BlcnR5KGQpJiZcIiRcIiE9PWQuY2hhckF0KDApJiZhW2RdIT09dCYmIUcoYVtkXSkpcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gWWEoYixhLGMpe3JldHVybiBiLmNvbmNhdChaYS5jYWxsKGEsYykpfWZ1bmN0aW9uIG9jKGIsYSl7dmFyIGM9Mjxhcmd1bWVudHMubGVuZ3RoP1phLmNhbGwoYXJndW1lbnRzLDIpOltdO3JldHVybiFHKGEpfHxhIGluc3RhbmNlb2YgUmVnRXhwP2E6Yy5sZW5ndGg/ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9hLmFwcGx5KGIsWWEoYyxhcmd1bWVudHMsMCkpOmEuYXBwbHkoYixjKX06ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9hLmFwcGx5KGIsYXJndW1lbnRzKTphLmNhbGwoYil9fWZ1bmN0aW9uIEhkKGIsYSl7dmFyIGM9YTtcInN0cmluZ1wiPT09dHlwZW9mIGImJlwiJFwiPT09Yi5jaGFyQXQoMCkmJlwiJFwiPT09Yi5jaGFyQXQoMSk/XG5jPXQ6VWEoYSk/Yz1cIiRXSU5ET1dcIjphJiZZPT09YT9jPVwiJERPQ1VNRU5UXCI6VmEoYSkmJihjPVwiJFNDT1BFXCIpO3JldHVybiBjfWZ1bmN0aW9uICRhKGIsYSl7aWYoXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBiKXJldHVybiB0O1YoYSl8fChhPWE/MjpudWxsKTtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoYixIZCxhKX1mdW5jdGlvbiBwYyhiKXtyZXR1cm4gRihiKT9KU09OLnBhcnNlKGIpOmJ9ZnVuY3Rpb24gdmEoYil7Yj1EKGIpLmNsb25lKCk7dHJ5e2IuZW1wdHkoKX1jYXRjaChhKXt9dmFyIGM9RChcIjxkaXY+XCIpLmFwcGVuZChiKS5odG1sKCk7dHJ5e3JldHVybiBiWzBdLm5vZGVUeXBlPT09cWI/UShjKTpjLm1hdGNoKC9eKDxbXj5dKz4pLylbMV0ucmVwbGFjZSgvXjwoW1xcd1xcLV0rKS8sZnVuY3Rpb24oYSxiKXtyZXR1cm5cIjxcIitRKGIpfSl9Y2F0Y2goZCl7cmV0dXJuIFEoYyl9fWZ1bmN0aW9uIHFjKGIpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGIpfWNhdGNoKGEpe319ZnVuY3Rpb24gcmMoYil7dmFyIGE9XG57fSxjLGQ7cygoYnx8XCJcIikuc3BsaXQoXCImXCIpLGZ1bmN0aW9uKGIpe2ImJihjPWIucmVwbGFjZSgvXFwrL2csXCIlMjBcIikuc3BsaXQoXCI9XCIpLGQ9cWMoY1swXSkseShkKSYmKGI9eShjWzFdKT9xYyhjWzFdKTohMCxzYy5jYWxsKGEsZCk/SChhW2RdKT9hW2RdLnB1c2goYik6YVtkXT1bYVtkXSxiXTphW2RdPWIpKX0pO3JldHVybiBhfWZ1bmN0aW9uIFFiKGIpe3ZhciBhPVtdO3MoYixmdW5jdGlvbihiLGQpe0goYik/cyhiLGZ1bmN0aW9uKGIpe2EucHVzaChGYShkLCEwKSsoITA9PT1iP1wiXCI6XCI9XCIrRmEoYiwhMCkpKX0pOmEucHVzaChGYShkLCEwKSsoITA9PT1iP1wiXCI6XCI9XCIrRmEoYiwhMCkpKX0pO3JldHVybiBhLmxlbmd0aD9hLmpvaW4oXCImXCIpOlwiXCJ9ZnVuY3Rpb24gcmIoYil7cmV0dXJuIEZhKGIsITApLnJlcGxhY2UoLyUyNi9naSxcIiZcIikucmVwbGFjZSgvJTNEL2dpLFwiPVwiKS5yZXBsYWNlKC8lMkIvZ2ksXCIrXCIpfWZ1bmN0aW9uIEZhKGIsYSl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChiKS5yZXBsYWNlKC8lNDAvZ2ksXG5cIkBcIikucmVwbGFjZSgvJTNBL2dpLFwiOlwiKS5yZXBsYWNlKC8lMjQvZyxcIiRcIikucmVwbGFjZSgvJTJDL2dpLFwiLFwiKS5yZXBsYWNlKC8lM0IvZ2ksXCI7XCIpLnJlcGxhY2UoLyUyMC9nLGE/XCIlMjBcIjpcIitcIil9ZnVuY3Rpb24gSWQoYixhKXt2YXIgYyxkLGU9c2IubGVuZ3RoO2I9RChiKTtmb3IoZD0wO2Q8ZTsrK2QpaWYoYz1zYltkXSthLEYoYz1iLmF0dHIoYykpKXJldHVybiBjO3JldHVybiBudWxsfWZ1bmN0aW9uIEpkKGIsYSl7dmFyIGMsZCxlPXt9O3Moc2IsZnVuY3Rpb24oYSl7YSs9XCJhcHBcIjshYyYmYi5oYXNBdHRyaWJ1dGUmJmIuaGFzQXR0cmlidXRlKGEpJiYoYz1iLGQ9Yi5nZXRBdHRyaWJ1dGUoYSkpfSk7cyhzYixmdW5jdGlvbihhKXthKz1cImFwcFwiO3ZhciBlOyFjJiYoZT1iLnF1ZXJ5U2VsZWN0b3IoXCJbXCIrYS5yZXBsYWNlKFwiOlwiLFwiXFxcXDpcIikrXCJdXCIpKSYmKGM9ZSxkPWUuZ2V0QXR0cmlidXRlKGEpKX0pO2MmJihlLnN0cmljdERpPW51bGwhPT1JZChjLFwic3RyaWN0LWRpXCIpLFxuYShjLGQ/W2RdOltdLGUpKX1mdW5jdGlvbiB0YyhiLGEsYyl7SShjKXx8KGM9e30pO2M9eCh7c3RyaWN0RGk6ITF9LGMpO3ZhciBkPWZ1bmN0aW9uKCl7Yj1EKGIpO2lmKGIuaW5qZWN0b3IoKSl7dmFyIGQ9YlswXT09PVk/XCJkb2N1bWVudFwiOnZhKGIpO3Rocm93IEthKFwiYnRzdHJwZFwiLGQucmVwbGFjZSgvPC8sXCImbHQ7XCIpLnJlcGxhY2UoLz4vLFwiJmd0O1wiKSk7fWE9YXx8W107YS51bnNoaWZ0KFtcIiRwcm92aWRlXCIsZnVuY3Rpb24oYSl7YS52YWx1ZShcIiRyb290RWxlbWVudFwiLGIpfV0pO2MuZGVidWdJbmZvRW5hYmxlZCYmYS5wdXNoKFtcIiRjb21waWxlUHJvdmlkZXJcIixmdW5jdGlvbihhKXthLmRlYnVnSW5mb0VuYWJsZWQoITApfV0pO2EudW5zaGlmdChcIm5nXCIpO2Q9YWIoYSxjLnN0cmljdERpKTtkLmludm9rZShbXCIkcm9vdFNjb3BlXCIsXCIkcm9vdEVsZW1lbnRcIixcIiRjb21waWxlXCIsXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhLGIsYyxkKXthLiRhcHBseShmdW5jdGlvbigpe2IuZGF0YShcIiRpbmplY3RvclwiLFxuZCk7YyhiKShhKX0pfV0pO3JldHVybiBkfSxlPS9eTkdfRU5BQkxFX0RFQlVHX0lORk8hLyxmPS9eTkdfREVGRVJfQk9PVFNUUkFQIS87TSYmZS50ZXN0KE0ubmFtZSkmJihjLmRlYnVnSW5mb0VuYWJsZWQ9ITAsTS5uYW1lPU0ubmFtZS5yZXBsYWNlKGUsXCJcIikpO2lmKE0mJiFmLnRlc3QoTS5uYW1lKSlyZXR1cm4gZCgpO00ubmFtZT1NLm5hbWUucmVwbGFjZShmLFwiXCIpO2NhLnJlc3VtZUJvb3RzdHJhcD1mdW5jdGlvbihiKXtzKGIsZnVuY3Rpb24oYil7YS5wdXNoKGIpfSk7cmV0dXJuIGQoKX07RyhjYS5yZXN1bWVEZWZlcnJlZEJvb3RzdHJhcCkmJmNhLnJlc3VtZURlZmVycmVkQm9vdHN0cmFwKCl9ZnVuY3Rpb24gS2QoKXtNLm5hbWU9XCJOR19FTkFCTEVfREVCVUdfSU5GTyFcIitNLm5hbWU7TS5sb2NhdGlvbi5yZWxvYWQoKX1mdW5jdGlvbiBMZChiKXtiPWNhLmVsZW1lbnQoYikuaW5qZWN0b3IoKTtpZighYil0aHJvdyBLYShcInRlc3RcIik7cmV0dXJuIGIuZ2V0KFwiJCR0ZXN0YWJpbGl0eVwiKX1cbmZ1bmN0aW9uIHVjKGIsYSl7YT1hfHxcIl9cIjtyZXR1cm4gYi5yZXBsYWNlKE1kLGZ1bmN0aW9uKGIsZCl7cmV0dXJuKGQ/YTpcIlwiKStiLnRvTG93ZXJDYXNlKCl9KX1mdW5jdGlvbiBOZCgpe3ZhciBiO3ZjfHwoKHNhPU0ualF1ZXJ5KSYmc2EuZm4ub24/KEQ9c2EseChzYS5mbix7c2NvcGU6TGEuc2NvcGUsaXNvbGF0ZVNjb3BlOkxhLmlzb2xhdGVTY29wZSxjb250cm9sbGVyOkxhLmNvbnRyb2xsZXIsaW5qZWN0b3I6TGEuaW5qZWN0b3IsaW5oZXJpdGVkRGF0YTpMYS5pbmhlcml0ZWREYXRhfSksYj1zYS5jbGVhbkRhdGEsc2EuY2xlYW5EYXRhPWZ1bmN0aW9uKGEpe3ZhciBjO2lmKFJiKVJiPSExO2Vsc2UgZm9yKHZhciBkPTAsZTtudWxsIT0oZT1hW2RdKTtkKyspKGM9c2EuX2RhdGEoZSxcImV2ZW50c1wiKSkmJmMuJGRlc3Ryb3kmJnNhKGUpLnRyaWdnZXJIYW5kbGVyKFwiJGRlc3Ryb3lcIik7YihhKX0pOkQ9UixjYS5lbGVtZW50PUQsdmM9ITApfWZ1bmN0aW9uIFNiKGIsYSxjKXtpZighYil0aHJvdyBLYShcImFyZXFcIixcbmF8fFwiP1wiLGN8fFwicmVxdWlyZWRcIik7cmV0dXJuIGJ9ZnVuY3Rpb24gdGIoYixhLGMpe2MmJkgoYikmJihiPWJbYi5sZW5ndGgtMV0pO1NiKEcoYiksYSxcIm5vdCBhIGZ1bmN0aW9uLCBnb3QgXCIrKGImJlwib2JqZWN0XCI9PT10eXBlb2YgYj9iLmNvbnN0cnVjdG9yLm5hbWV8fFwiT2JqZWN0XCI6dHlwZW9mIGIpKTtyZXR1cm4gYn1mdW5jdGlvbiBNYShiLGEpe2lmKFwiaGFzT3duUHJvcGVydHlcIj09PWIpdGhyb3cgS2EoXCJiYWRuYW1lXCIsYSk7fWZ1bmN0aW9uIHdjKGIsYSxjKXtpZighYSlyZXR1cm4gYjthPWEuc3BsaXQoXCIuXCIpO2Zvcih2YXIgZCxlPWIsZj1hLmxlbmd0aCxnPTA7ZzxmO2crKylkPWFbZ10sYiYmKGI9KGU9YilbZF0pO3JldHVybiFjJiZHKGIpP29jKGUsYik6Yn1mdW5jdGlvbiB1YihiKXt2YXIgYT1iWzBdO2I9YltiLmxlbmd0aC0xXTt2YXIgYz1bYV07ZG97YT1hLm5leHRTaWJsaW5nO2lmKCFhKWJyZWFrO2MucHVzaChhKX13aGlsZShhIT09Yik7cmV0dXJuIEQoYyl9ZnVuY3Rpb24gaGEoKXtyZXR1cm4gT2JqZWN0LmNyZWF0ZShudWxsKX1cbmZ1bmN0aW9uIE9kKGIpe2Z1bmN0aW9uIGEoYSxiLGMpe3JldHVybiBhW2JdfHwoYVtiXT1jKCkpfXZhciBjPVMoXCIkaW5qZWN0b3JcIiksZD1TKFwibmdcIik7Yj1hKGIsXCJhbmd1bGFyXCIsT2JqZWN0KTtiLiQkbWluRXJyPWIuJCRtaW5FcnJ8fFM7cmV0dXJuIGEoYixcIm1vZHVsZVwiLGZ1bmN0aW9uKCl7dmFyIGI9e307cmV0dXJuIGZ1bmN0aW9uKGYsZyxoKXtpZihcImhhc093blByb3BlcnR5XCI9PT1mKXRocm93IGQoXCJiYWRuYW1lXCIsXCJtb2R1bGVcIik7ZyYmYi5oYXNPd25Qcm9wZXJ0eShmKSYmKGJbZl09bnVsbCk7cmV0dXJuIGEoYixmLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShjLGQsZSxmKXtmfHwoZj1iKTtyZXR1cm4gZnVuY3Rpb24oKXtmW2V8fFwicHVzaFwiXShbYyxkLGFyZ3VtZW50c10pO3JldHVybiB1fX1pZighZyl0aHJvdyBjKFwibm9tb2RcIixmKTt2YXIgYj1bXSxkPVtdLGU9W10scT1hKFwiJGluamVjdG9yXCIsXCJpbnZva2VcIixcInB1c2hcIixkKSx1PXtfaW52b2tlUXVldWU6YixfY29uZmlnQmxvY2tzOmQsXG5fcnVuQmxvY2tzOmUscmVxdWlyZXM6ZyxuYW1lOmYscHJvdmlkZXI6YShcIiRwcm92aWRlXCIsXCJwcm92aWRlclwiKSxmYWN0b3J5OmEoXCIkcHJvdmlkZVwiLFwiZmFjdG9yeVwiKSxzZXJ2aWNlOmEoXCIkcHJvdmlkZVwiLFwic2VydmljZVwiKSx2YWx1ZTphKFwiJHByb3ZpZGVcIixcInZhbHVlXCIpLGNvbnN0YW50OmEoXCIkcHJvdmlkZVwiLFwiY29uc3RhbnRcIixcInVuc2hpZnRcIiksYW5pbWF0aW9uOmEoXCIkYW5pbWF0ZVByb3ZpZGVyXCIsXCJyZWdpc3RlclwiKSxmaWx0ZXI6YShcIiRmaWx0ZXJQcm92aWRlclwiLFwicmVnaXN0ZXJcIiksY29udHJvbGxlcjphKFwiJGNvbnRyb2xsZXJQcm92aWRlclwiLFwicmVnaXN0ZXJcIiksZGlyZWN0aXZlOmEoXCIkY29tcGlsZVByb3ZpZGVyXCIsXCJkaXJlY3RpdmVcIiksY29uZmlnOnEscnVuOmZ1bmN0aW9uKGEpe2UucHVzaChhKTtyZXR1cm4gdGhpc319O2gmJnEoaCk7cmV0dXJuIHV9KX19KX1mdW5jdGlvbiBQZChiKXt4KGIse2Jvb3RzdHJhcDp0Yyxjb3B5OkVhLGV4dGVuZDp4LGVxdWFsczpnYSxcbmVsZW1lbnQ6RCxmb3JFYWNoOnMsaW5qZWN0b3I6YWIsbm9vcDp6LGJpbmQ6b2MsdG9Kc29uOiRhLGZyb21Kc29uOnBjLGlkZW50aXR5OnBhLGlzVW5kZWZpbmVkOkIsaXNEZWZpbmVkOnksaXNTdHJpbmc6Rixpc0Z1bmN0aW9uOkcsaXNPYmplY3Q6SSxpc051bWJlcjpWLGlzRWxlbWVudDpuYyxpc0FycmF5OkgsdmVyc2lvbjpRZCxpc0RhdGU6cWEsbG93ZXJjYXNlOlEsdXBwZXJjYXNlOnZiLGNhbGxiYWNrczp7Y291bnRlcjowfSxnZXRUZXN0YWJpbGl0eTpMZCwkJG1pbkVycjpTLCQkY3NwOmJiLHJlbG9hZFdpdGhEZWJ1Z0luZm86S2R9KTtjYj1PZChNKTt0cnl7Y2IoXCJuZ0xvY2FsZVwiKX1jYXRjaChhKXtjYihcIm5nTG9jYWxlXCIsW10pLnByb3ZpZGVyKFwiJGxvY2FsZVwiLFJkKX1jYihcIm5nXCIsW1wibmdMb2NhbGVcIl0sW1wiJHByb3ZpZGVcIixmdW5jdGlvbihhKXthLnByb3ZpZGVyKHskJHNhbml0aXplVXJpOlNkfSk7YS5wcm92aWRlcihcIiRjb21waWxlXCIseGMpLmRpcmVjdGl2ZSh7YTpUZCxcbmlucHV0OnljLHRleHRhcmVhOnljLGZvcm06VWQsc2NyaXB0OlZkLHNlbGVjdDpXZCxzdHlsZTpYZCxvcHRpb246WWQsbmdCaW5kOlpkLG5nQmluZEh0bWw6JGQsbmdCaW5kVGVtcGxhdGU6YWUsbmdDbGFzczpiZSxuZ0NsYXNzRXZlbjpjZSxuZ0NsYXNzT2RkOmRlLG5nQ2xvYWs6ZWUsbmdDb250cm9sbGVyOmZlLG5nRm9ybTpnZSxuZ0hpZGU6aGUsbmdJZjppZSxuZ0luY2x1ZGU6amUsbmdJbml0OmtlLG5nTm9uQmluZGFibGU6bGUsbmdQbHVyYWxpemU6bWUsbmdSZXBlYXQ6bmUsbmdTaG93Om9lLG5nU3R5bGU6cGUsbmdTd2l0Y2g6cWUsbmdTd2l0Y2hXaGVuOnJlLG5nU3dpdGNoRGVmYXVsdDpzZSxuZ09wdGlvbnM6dGUsbmdUcmFuc2NsdWRlOnVlLG5nTW9kZWw6dmUsbmdMaXN0OndlLG5nQ2hhbmdlOnhlLHBhdHRlcm46emMsbmdQYXR0ZXJuOnpjLHJlcXVpcmVkOkFjLG5nUmVxdWlyZWQ6QWMsbWlubGVuZ3RoOkJjLG5nTWlubGVuZ3RoOkJjLG1heGxlbmd0aDpDYyxuZ01heGxlbmd0aDpDYyxcbm5nVmFsdWU6eWUsbmdNb2RlbE9wdGlvbnM6emV9KS5kaXJlY3RpdmUoe25nSW5jbHVkZTpBZX0pLmRpcmVjdGl2ZSh3YikuZGlyZWN0aXZlKERjKTthLnByb3ZpZGVyKHskYW5jaG9yU2Nyb2xsOkJlLCRhbmltYXRlOkNlLCRicm93c2VyOkRlLCRjYWNoZUZhY3Rvcnk6RWUsJGNvbnRyb2xsZXI6RmUsJGRvY3VtZW50OkdlLCRleGNlcHRpb25IYW5kbGVyOkhlLCRmaWx0ZXI6RWMsJGludGVycG9sYXRlOkllLCRpbnRlcnZhbDpKZSwkaHR0cDpLZSwkaHR0cEJhY2tlbmQ6TGUsJGxvY2F0aW9uOk1lLCRsb2c6TmUsJHBhcnNlOk9lLCRyb290U2NvcGU6UGUsJHE6UWUsJCRxOlJlLCRzY2U6U2UsJHNjZURlbGVnYXRlOlRlLCRzbmlmZmVyOlVlLCR0ZW1wbGF0ZUNhY2hlOlZlLCR0ZW1wbGF0ZVJlcXVlc3Q6V2UsJCR0ZXN0YWJpbGl0eTpYZSwkdGltZW91dDpZZSwkd2luZG93OlplLCQkckFGOiRlLCQkYXN5bmNDYWxsYmFjazphZiwkJGpxTGl0ZTpiZn0pfV0pfWZ1bmN0aW9uIGRiKGIpe3JldHVybiBiLnJlcGxhY2UoY2YsXG5mdW5jdGlvbihhLGIsZCxlKXtyZXR1cm4gZT9kLnRvVXBwZXJDYXNlKCk6ZH0pLnJlcGxhY2UoZGYsXCJNb3okMVwiKX1mdW5jdGlvbiBGYyhiKXtiPWIubm9kZVR5cGU7cmV0dXJuIGI9PT1vYXx8IWJ8fDk9PT1ifWZ1bmN0aW9uIEdjKGIsYSl7dmFyIGMsZCxlPWEuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGY9W107aWYoVGIudGVzdChiKSl7Yz1jfHxlLmFwcGVuZENoaWxkKGEuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7ZD0oZWYuZXhlYyhiKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCk7ZD1pYVtkXXx8aWEuX2RlZmF1bHQ7Yy5pbm5lckhUTUw9ZFsxXStiLnJlcGxhY2UoZmYsXCI8JDE+PC8kMj5cIikrZFsyXTtmb3IoZD1kWzBdO2QtLTspYz1jLmxhc3RDaGlsZDtmPVlhKGYsYy5jaGlsZE5vZGVzKTtjPWUuZmlyc3RDaGlsZDtjLnRleHRDb250ZW50PVwiXCJ9ZWxzZSBmLnB1c2goYS5jcmVhdGVUZXh0Tm9kZShiKSk7ZS50ZXh0Q29udGVudD1cIlwiO2UuaW5uZXJIVE1MPVwiXCI7cyhmLGZ1bmN0aW9uKGEpe2UuYXBwZW5kQ2hpbGQoYSl9KTtcbnJldHVybiBlfWZ1bmN0aW9uIFIoYil7aWYoYiBpbnN0YW5jZW9mIFIpcmV0dXJuIGI7dmFyIGE7RihiKSYmKGI9VShiKSxhPSEwKTtpZighKHRoaXMgaW5zdGFuY2VvZiBSKSl7aWYoYSYmXCI8XCIhPWIuY2hhckF0KDApKXRocm93IFViKFwibm9zZWxcIik7cmV0dXJuIG5ldyBSKGIpfWlmKGEpe2E9WTt2YXIgYztiPShjPWdmLmV4ZWMoYikpP1thLmNyZWF0ZUVsZW1lbnQoY1sxXSldOihjPUdjKGIsYSkpP2MuY2hpbGROb2RlczpbXX1IYyh0aGlzLGIpfWZ1bmN0aW9uIFZiKGIpe3JldHVybiBiLmNsb25lTm9kZSghMCl9ZnVuY3Rpb24geGIoYixhKXthfHx5YihiKTtpZihiLnF1ZXJ5U2VsZWN0b3JBbGwpZm9yKHZhciBjPWIucXVlcnlTZWxlY3RvckFsbChcIipcIiksZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKyl5YihjW2RdKX1mdW5jdGlvbiBJYyhiLGEsYyxkKXtpZih5KGQpKXRocm93IFViKFwib2ZmYXJnc1wiKTt2YXIgZT0oZD16YihiKSkmJmQuZXZlbnRzLGY9ZCYmZC5oYW5kbGU7aWYoZilpZihhKXMoYS5zcGxpdChcIiBcIiksXG5mdW5jdGlvbihhKXtpZih5KGMpKXt2YXIgZD1lW2FdO1hhKGR8fFtdLGMpO2lmKGQmJjA8ZC5sZW5ndGgpcmV0dXJufWIucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGYsITEpO2RlbGV0ZSBlW2FdfSk7ZWxzZSBmb3IoYSBpbiBlKVwiJGRlc3Ryb3lcIiE9PWEmJmIucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGYsITEpLGRlbGV0ZSBlW2FdfWZ1bmN0aW9uIHliKGIsYSl7dmFyIGM9Yi5uZzMzOSxkPWMmJkFiW2NdO2QmJihhP2RlbGV0ZSBkLmRhdGFbYV06KGQuaGFuZGxlJiYoZC5ldmVudHMuJGRlc3Ryb3kmJmQuaGFuZGxlKHt9LFwiJGRlc3Ryb3lcIiksSWMoYikpLGRlbGV0ZSBBYltjXSxiLm5nMzM5PXQpKX1mdW5jdGlvbiB6YihiLGEpe3ZhciBjPWIubmczMzksYz1jJiZBYltjXTthJiYhYyYmKGIubmczMzk9Yz0rK2hmLGM9QWJbY109e2V2ZW50czp7fSxkYXRhOnt9LGhhbmRsZTp0fSk7cmV0dXJuIGN9ZnVuY3Rpb24gV2IoYixhLGMpe2lmKEZjKGIpKXt2YXIgZD15KGMpLGU9IWQmJmEmJiFJKGEpLFxuZj0hYTtiPShiPXpiKGIsIWUpKSYmYi5kYXRhO2lmKGQpYlthXT1jO2Vsc2V7aWYoZilyZXR1cm4gYjtpZihlKXJldHVybiBiJiZiW2FdO3goYixhKX19fWZ1bmN0aW9uIEJiKGIsYSl7cmV0dXJuIGIuZ2V0QXR0cmlidXRlPy0xPChcIiBcIisoYi5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIikrXCIgXCIpLnJlcGxhY2UoL1tcXG5cXHRdL2csXCIgXCIpLmluZGV4T2YoXCIgXCIrYStcIiBcIik6ITF9ZnVuY3Rpb24gQ2IoYixhKXthJiZiLnNldEF0dHJpYnV0ZSYmcyhhLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhKXtiLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsVSgoXCIgXCIrKGIuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLFwiIFwiKS5yZXBsYWNlKFwiIFwiK1UoYSkrXCIgXCIsXCIgXCIpKSl9KX1mdW5jdGlvbiBEYihiLGEpe2lmKGEmJmIuc2V0QXR0cmlidXRlKXt2YXIgYz0oXCIgXCIrKGIuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLFwiIFwiKTtcbnMoYS5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7YT1VKGEpOy0xPT09Yy5pbmRleE9mKFwiIFwiK2ErXCIgXCIpJiYoYys9YStcIiBcIil9KTtiLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsVShjKSl9fWZ1bmN0aW9uIEhjKGIsYSl7aWYoYSlpZihhLm5vZGVUeXBlKWJbYi5sZW5ndGgrK109YTtlbHNle3ZhciBjPWEubGVuZ3RoO2lmKFwibnVtYmVyXCI9PT10eXBlb2YgYyYmYS53aW5kb3chPT1hKXtpZihjKWZvcih2YXIgZD0wO2Q8YztkKyspYltiLmxlbmd0aCsrXT1hW2RdfWVsc2UgYltiLmxlbmd0aCsrXT1hfX1mdW5jdGlvbiBKYyhiLGEpe3JldHVybiBFYihiLFwiJFwiKyhhfHxcIm5nQ29udHJvbGxlclwiKStcIkNvbnRyb2xsZXJcIil9ZnVuY3Rpb24gRWIoYixhLGMpezk9PWIubm9kZVR5cGUmJihiPWIuZG9jdW1lbnRFbGVtZW50KTtmb3IoYT1IKGEpP2E6W2FdO2I7KXtmb3IodmFyIGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspaWYoKGM9RC5kYXRhKGIsYVtkXSkpIT09dClyZXR1cm4gYztiPWIucGFyZW50Tm9kZXx8XG4xMT09PWIubm9kZVR5cGUmJmIuaG9zdH19ZnVuY3Rpb24gS2MoYil7Zm9yKHhiKGIsITApO2IuZmlyc3RDaGlsZDspYi5yZW1vdmVDaGlsZChiLmZpcnN0Q2hpbGQpfWZ1bmN0aW9uIExjKGIsYSl7YXx8eGIoYik7dmFyIGM9Yi5wYXJlbnROb2RlO2MmJmMucmVtb3ZlQ2hpbGQoYil9ZnVuY3Rpb24gamYoYixhKXthPWF8fE07aWYoXCJjb21wbGV0ZVwiPT09YS5kb2N1bWVudC5yZWFkeVN0YXRlKWEuc2V0VGltZW91dChiKTtlbHNlIEQoYSkub24oXCJsb2FkXCIsYil9ZnVuY3Rpb24gTWMoYixhKXt2YXIgYz1GYlthLnRvTG93ZXJDYXNlKCldO3JldHVybiBjJiZOY1t1YShiKV0mJmN9ZnVuY3Rpb24ga2YoYixhKXt2YXIgYz1iLm5vZGVOYW1lO3JldHVybihcIklOUFVUXCI9PT1jfHxcIlRFWFRBUkVBXCI9PT1jKSYmT2NbYV19ZnVuY3Rpb24gbGYoYixhKXt2YXIgYz1mdW5jdGlvbihjLGUpe2MuaXNEZWZhdWx0UHJldmVudGVkPWZ1bmN0aW9uKCl7cmV0dXJuIGMuZGVmYXVsdFByZXZlbnRlZH07dmFyIGY9XG5hW2V8fGMudHlwZV0sZz1mP2YubGVuZ3RoOjA7aWYoZyl7aWYoQihjLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCkpe3ZhciBoPWMuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uO2Muc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7Yy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9ITA7Yy5zdG9wUHJvcGFnYXRpb24mJmMuc3RvcFByb3BhZ2F0aW9uKCk7aCYmaC5jYWxsKGMpfX1jLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPWZ1bmN0aW9uKCl7cmV0dXJuITA9PT1jLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZH07MTxnJiYoZj1yYShmKSk7Zm9yKHZhciBsPTA7bDxnO2wrKyljLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCl8fGZbbF0uY2FsbChiLGMpfX07Yy5lbGVtPWI7cmV0dXJuIGN9ZnVuY3Rpb24gYmYoKXt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4geChSLHtoYXNDbGFzczpmdW5jdGlvbihiLGEpe2IuYXR0ciYmKGI9YlswXSk7XG5yZXR1cm4gQmIoYixhKX0sYWRkQ2xhc3M6ZnVuY3Rpb24oYixhKXtiLmF0dHImJihiPWJbMF0pO3JldHVybiBEYihiLGEpfSxyZW1vdmVDbGFzczpmdW5jdGlvbihiLGEpe2IuYXR0ciYmKGI9YlswXSk7cmV0dXJuIENiKGIsYSl9fSl9fWZ1bmN0aW9uIE5hKGIsYSl7dmFyIGM9YiYmYi4kJGhhc2hLZXk7aWYoYylyZXR1cm5cImZ1bmN0aW9uXCI9PT10eXBlb2YgYyYmKGM9Yi4kJGhhc2hLZXkoKSksYztjPXR5cGVvZiBiO3JldHVybiBjPVwiZnVuY3Rpb25cIj09Y3x8XCJvYmplY3RcIj09YyYmbnVsbCE9PWI/Yi4kJGhhc2hLZXk9YytcIjpcIisoYXx8RmQpKCk6YytcIjpcIitifWZ1bmN0aW9uIGViKGIsYSl7aWYoYSl7dmFyIGM9MDt0aGlzLm5leHRVaWQ9ZnVuY3Rpb24oKXtyZXR1cm4rK2N9fXMoYix0aGlzLnB1dCx0aGlzKX1mdW5jdGlvbiBtZihiKXtyZXR1cm4oYj1iLnRvU3RyaW5nKCkucmVwbGFjZShQYyxcIlwiKS5tYXRjaChRYykpP1wiZnVuY3Rpb24oXCIrKGJbMV18fFwiXCIpLnJlcGxhY2UoL1tcXHNcXHJcXG5dKy8sXG5cIiBcIikrXCIpXCI6XCJmblwifWZ1bmN0aW9uIGFiKGIsYSl7ZnVuY3Rpb24gYyhhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtpZihJKGIpKXMoYixsYyhhKSk7ZWxzZSByZXR1cm4gYShiLGMpfX1mdW5jdGlvbiBkKGEsYil7TWEoYSxcInNlcnZpY2VcIik7aWYoRyhiKXx8SChiKSliPXEuaW5zdGFudGlhdGUoYik7aWYoIWIuJGdldCl0aHJvdyBHYShcInBnZXRcIixhKTtyZXR1cm4gblthK1wiUHJvdmlkZXJcIl09Yn1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9ci5pbnZva2UoYix0aGlzKTtpZihCKGMpKXRocm93IEdhKFwidW5kZWZcIixhKTtyZXR1cm4gY319ZnVuY3Rpb24gZihhLGIsYyl7cmV0dXJuIGQoYSx7JGdldDohMSE9PWM/ZShhLGIpOmJ9KX1mdW5jdGlvbiBnKGEpe3ZhciBiPVtdLGM7cyhhLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGQoYSl7dmFyIGIsYztiPTA7Zm9yKGM9YS5sZW5ndGg7YjxjO2IrKyl7dmFyIGU9YVtiXSxmPXEuZ2V0KGVbMF0pO2ZbZVsxXV0uYXBwbHkoZixcbmVbMl0pfX1pZighbS5nZXQoYSkpe20ucHV0KGEsITApO3RyeXtGKGEpPyhjPWNiKGEpLGI9Yi5jb25jYXQoZyhjLnJlcXVpcmVzKSkuY29uY2F0KGMuX3J1bkJsb2NrcyksZChjLl9pbnZva2VRdWV1ZSksZChjLl9jb25maWdCbG9ja3MpKTpHKGEpP2IucHVzaChxLmludm9rZShhKSk6SChhKT9iLnB1c2gocS5pbnZva2UoYSkpOnRiKGEsXCJtb2R1bGVcIil9Y2F0Y2goZSl7dGhyb3cgSChhKSYmKGE9YVthLmxlbmd0aC0xXSksZS5tZXNzYWdlJiZlLnN0YWNrJiYtMT09ZS5zdGFjay5pbmRleE9mKGUubWVzc2FnZSkmJihlPWUubWVzc2FnZStcIlxcblwiK2Uuc3RhY2spLEdhKFwibW9kdWxlcnJcIixhLGUuc3RhY2t8fGUubWVzc2FnZXx8ZSk7fX19KTtyZXR1cm4gYn1mdW5jdGlvbiBoKGIsYyl7ZnVuY3Rpb24gZChhLGUpe2lmKGIuaGFzT3duUHJvcGVydHkoYSkpe2lmKGJbYV09PT1sKXRocm93IEdhKFwiY2RlcFwiLGErXCIgPC0gXCIray5qb2luKFwiIDwtIFwiKSk7cmV0dXJuIGJbYV19dHJ5e3JldHVybiBrLnVuc2hpZnQoYSksXG5iW2FdPWwsYlthXT1jKGEsZSl9Y2F0Y2goZil7dGhyb3cgYlthXT09PWwmJmRlbGV0ZSBiW2FdLGY7fWZpbmFsbHl7ay5zaGlmdCgpfX1mdW5jdGlvbiBlKGIsYyxmLGcpe1wic3RyaW5nXCI9PT10eXBlb2YgZiYmKGc9ZixmPW51bGwpO3ZhciBoPVtdLGs9YWIuJCRhbm5vdGF0ZShiLGEsZyksbCxxLG47cT0wO2ZvcihsPWsubGVuZ3RoO3E8bDtxKyspe249a1txXTtpZihcInN0cmluZ1wiIT09dHlwZW9mIG4pdGhyb3cgR2EoXCJpdGtuXCIsbik7aC5wdXNoKGYmJmYuaGFzT3duUHJvcGVydHkobik/ZltuXTpkKG4sZykpfUgoYikmJihiPWJbbF0pO3JldHVybiBiLmFwcGx5KGMsaCl9cmV0dXJue2ludm9rZTplLGluc3RhbnRpYXRlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1PYmplY3QuY3JlYXRlKChIKGEpP2FbYS5sZW5ndGgtMV06YSkucHJvdG90eXBlfHxudWxsKTthPWUoYSxkLGIsYyk7cmV0dXJuIEkoYSl8fEcoYSk/YTpkfSxnZXQ6ZCxhbm5vdGF0ZTphYi4kJGFubm90YXRlLGhhczpmdW5jdGlvbihhKXtyZXR1cm4gbi5oYXNPd25Qcm9wZXJ0eShhK1xuXCJQcm92aWRlclwiKXx8Yi5oYXNPd25Qcm9wZXJ0eShhKX19fWE9ITA9PT1hO3ZhciBsPXt9LGs9W10sbT1uZXcgZWIoW10sITApLG49eyRwcm92aWRlOntwcm92aWRlcjpjKGQpLGZhY3Rvcnk6YyhmKSxzZXJ2aWNlOmMoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZihhLFtcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGEpe3JldHVybiBhLmluc3RhbnRpYXRlKGIpfV0pfSksdmFsdWU6YyhmdW5jdGlvbihhLGIpe3JldHVybiBmKGEsZWEoYiksITEpfSksY29uc3RhbnQ6YyhmdW5jdGlvbihhLGIpe01hKGEsXCJjb25zdGFudFwiKTtuW2FdPWI7dVthXT1ifSksZGVjb3JhdG9yOmZ1bmN0aW9uKGEsYil7dmFyIGM9cS5nZXQoYStcIlByb3ZpZGVyXCIpLGQ9Yy4kZ2V0O2MuJGdldD1mdW5jdGlvbigpe3ZhciBhPXIuaW52b2tlKGQsYyk7cmV0dXJuIHIuaW52b2tlKGIsbnVsbCx7JGRlbGVnYXRlOmF9KX19fX0scT1uLiRpbmplY3Rvcj1oKG4sZnVuY3Rpb24oYSxiKXtjYS5pc1N0cmluZyhiKSYmay5wdXNoKGIpO1xudGhyb3cgR2EoXCJ1bnByXCIsay5qb2luKFwiIDwtIFwiKSk7fSksdT17fSxyPXUuJGluamVjdG9yPWgodSxmdW5jdGlvbihhLGIpe3ZhciBjPXEuZ2V0KGErXCJQcm92aWRlclwiLGIpO3JldHVybiByLmludm9rZShjLiRnZXQsYyx0LGEpfSk7cyhnKGIpLGZ1bmN0aW9uKGEpe3IuaW52b2tlKGF8fHopfSk7cmV0dXJuIHJ9ZnVuY3Rpb24gQmUoKXt2YXIgYj0hMDt0aGlzLmRpc2FibGVBdXRvU2Nyb2xsaW5nPWZ1bmN0aW9uKCl7Yj0hMX07dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiRsb2NhdGlvblwiLFwiJHJvb3RTY29wZVwiLGZ1bmN0aW9uKGEsYyxkKXtmdW5jdGlvbiBlKGEpe3ZhciBiPW51bGw7QXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChhLGZ1bmN0aW9uKGEpe2lmKFwiYVwiPT09dWEoYSkpcmV0dXJuIGI9YSwhMH0pO3JldHVybiBifWZ1bmN0aW9uIGYoYil7aWYoYil7Yi5zY3JvbGxJbnRvVmlldygpO3ZhciBjO2M9Zy55T2Zmc2V0O0coYyk/Yz1jKCk6bmMoYyk/KGM9Y1swXSxjPVwiZml4ZWRcIiE9PVxuYS5nZXRDb21wdXRlZFN0eWxlKGMpLnBvc2l0aW9uPzA6Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20pOlYoYyl8fChjPTApO2MmJihiPWIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wLGEuc2Nyb2xsQnkoMCxiLWMpKX1lbHNlIGEuc2Nyb2xsVG8oMCwwKX1mdW5jdGlvbiBnKCl7dmFyIGE9Yy5oYXNoKCksYjthPyhiPWguZ2V0RWxlbWVudEJ5SWQoYSkpP2YoYik6KGI9ZShoLmdldEVsZW1lbnRzQnlOYW1lKGEpKSk/ZihiKTpcInRvcFwiPT09YSYmZihudWxsKTpmKG51bGwpfXZhciBoPWEuZG9jdW1lbnQ7YiYmZC4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gYy5oYXNoKCl9LGZ1bmN0aW9uKGEsYil7YT09PWImJlwiXCI9PT1hfHxqZihmdW5jdGlvbigpe2QuJGV2YWxBc3luYyhnKX0pfSk7cmV0dXJuIGd9XX1mdW5jdGlvbiBhZigpe3RoaXMuJGdldD1bXCIkJHJBRlwiLFwiJHRpbWVvdXRcIixmdW5jdGlvbihiLGEpe3JldHVybiBiLnN1cHBvcnRlZD9mdW5jdGlvbihhKXtyZXR1cm4gYihhKX06XG5mdW5jdGlvbihiKXtyZXR1cm4gYShiLDAsITEpfX1dfWZ1bmN0aW9uIG5mKGIsYSxjLGQpe2Z1bmN0aW9uIGUoYSl7dHJ5e2EuYXBwbHkobnVsbCxaYS5jYWxsKGFyZ3VtZW50cywxKSl9ZmluYWxseXtpZih2LS0sMD09PXYpZm9yKDt3Lmxlbmd0aDspdHJ5e3cucG9wKCkoKX1jYXRjaChiKXtjLmVycm9yKGIpfX19ZnVuY3Rpb24gZihhLGIpeyhmdW5jdGlvbiBOKCl7cyhMLGZ1bmN0aW9uKGEpe2EoKX0pO0M9YihOLGEpfSkoKX1mdW5jdGlvbiBnKCl7aCgpO2woKX1mdW5jdGlvbiBoKCl7QT1iLmhpc3Rvcnkuc3RhdGU7QT1CKEEpP251bGw6QTtnYShBLEopJiYoQT1KKTtKPUF9ZnVuY3Rpb24gbCgpe2lmKEUhPT1tLnVybCgpfHxPIT09QSlFPW0udXJsKCksTz1BLHMoVyxmdW5jdGlvbihhKXthKG0udXJsKCksQSl9KX1mdW5jdGlvbiBrKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGEpfWNhdGNoKGIpe3JldHVybiBhfX12YXIgbT10aGlzLG49YVswXSxxPWIubG9jYXRpb24sXG51PWIuaGlzdG9yeSxyPWIuc2V0VGltZW91dCxQPWIuY2xlYXJUaW1lb3V0LHA9e307bS5pc01vY2s9ITE7dmFyIHY9MCx3PVtdO20uJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdD1lO20uJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudD1mdW5jdGlvbigpe3YrK307bS5ub3RpZnlXaGVuTm9PdXRzdGFuZGluZ1JlcXVlc3RzPWZ1bmN0aW9uKGEpe3MoTCxmdW5jdGlvbihhKXthKCl9KTswPT09dj9hKCk6dy5wdXNoKGEpfTt2YXIgTD1bXSxDO20uYWRkUG9sbEZuPWZ1bmN0aW9uKGEpe0IoQykmJmYoMTAwLHIpO0wucHVzaChhKTtyZXR1cm4gYX07dmFyIEEsTyxFPXEuaHJlZixUPWEuZmluZChcImJhc2VcIiksWD1udWxsO2goKTtPPUE7bS51cmw9ZnVuY3Rpb24oYSxjLGUpe0IoZSkmJihlPW51bGwpO3EhPT1iLmxvY2F0aW9uJiYocT1iLmxvY2F0aW9uKTt1IT09Yi5oaXN0b3J5JiYodT1iLmhpc3RvcnkpO2lmKGEpe3ZhciBmPU89PT1lO2lmKEU9PT1hJiYoIWQuaGlzdG9yeXx8ZikpcmV0dXJuIG07XG52YXIgZz1FJiZIYShFKT09PUhhKGEpO0U9YTtPPWU7IWQuaGlzdG9yeXx8ZyYmZj8oZ3x8KFg9YSksYz9xLnJlcGxhY2UoYSk6Zz8oYz1xLGU9YS5pbmRleE9mKFwiI1wiKSxhPS0xPT09ZT9cIlwiOmEuc3Vic3RyKGUrMSksYy5oYXNoPWEpOnEuaHJlZj1hKToodVtjP1wicmVwbGFjZVN0YXRlXCI6XCJwdXNoU3RhdGVcIl0oZSxcIlwiLGEpLGgoKSxPPUEpO3JldHVybiBtfXJldHVybiBYfHxxLmhyZWYucmVwbGFjZSgvJTI3L2csXCInXCIpfTttLnN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIEF9O3ZhciBXPVtdLHdhPSExLEo9bnVsbDttLm9uVXJsQ2hhbmdlPWZ1bmN0aW9uKGEpe2lmKCF3YSl7aWYoZC5oaXN0b3J5KUQoYikub24oXCJwb3BzdGF0ZVwiLGcpO0QoYikub24oXCJoYXNoY2hhbmdlXCIsZyk7d2E9ITB9Vy5wdXNoKGEpO3JldHVybiBhfTttLiQkY2hlY2tVcmxDaGFuZ2U9bDttLmJhc2VIcmVmPWZ1bmN0aW9uKCl7dmFyIGE9VC5hdHRyKFwiaHJlZlwiKTtyZXR1cm4gYT9hLnJlcGxhY2UoL14oaHR0cHM/XFw6KT9cXC9cXC9bXlxcL10qLyxcblwiXCIpOlwiXCJ9O3ZhciBmYT17fSx5PVwiXCIsZGE9bS5iYXNlSHJlZigpO20uY29va2llcz1mdW5jdGlvbihhLGIpe3ZhciBkLGUsZixnO2lmKGEpYj09PXQ/bi5jb29raWU9ZW5jb2RlVVJJQ29tcG9uZW50KGEpK1wiPTtwYXRoPVwiK2RhK1wiO2V4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVRcIjpGKGIpJiYoZD0obi5jb29raWU9ZW5jb2RlVVJJQ29tcG9uZW50KGEpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChiKStcIjtwYXRoPVwiK2RhKS5sZW5ndGgrMSw0MDk2PGQmJmMud2FybihcIkNvb2tpZSAnXCIrYStcIicgcG9zc2libHkgbm90IHNldCBvciBvdmVyZmxvd2VkIGJlY2F1c2UgaXQgd2FzIHRvbyBsYXJnZSAoXCIrZCtcIiA+IDQwOTYgYnl0ZXMpIVwiKSk7ZWxzZXtpZihuLmNvb2tpZSE9PXkpZm9yKHk9bi5jb29raWUsZD15LnNwbGl0KFwiOyBcIiksZmE9e30sZj0wO2Y8ZC5sZW5ndGg7ZisrKWU9ZFtmXSxnPWUuaW5kZXhPZihcIj1cIiksMDxnJiYoYT1rKGUuc3Vic3RyaW5nKDAsZykpLFxuZmFbYV09PT10JiYoZmFbYV09ayhlLnN1YnN0cmluZyhnKzEpKSkpO3JldHVybiBmYX19O20uZGVmZXI9ZnVuY3Rpb24oYSxiKXt2YXIgYzt2Kys7Yz1yKGZ1bmN0aW9uKCl7ZGVsZXRlIHBbY107ZShhKX0sYnx8MCk7cFtjXT0hMDtyZXR1cm4gY307bS5kZWZlci5jYW5jZWw9ZnVuY3Rpb24oYSl7cmV0dXJuIHBbYV0/KGRlbGV0ZSBwW2FdLFAoYSksZSh6KSwhMCk6ITF9fWZ1bmN0aW9uIERlKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiRsb2dcIixcIiRzbmlmZmVyXCIsXCIkZG9jdW1lbnRcIixmdW5jdGlvbihiLGEsYyxkKXtyZXR1cm4gbmV3IG5mKGIsZCxhLGMpfV19ZnVuY3Rpb24gRWUoKXt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGIsZCl7ZnVuY3Rpb24gZShhKXthIT1uJiYocT9xPT1hJiYocT1hLm4pOnE9YSxmKGEubixhLnApLGYoYSxuKSxuPWEsbi5uPW51bGwpfWZ1bmN0aW9uIGYoYSxiKXthIT1iJiYoYSYmKGEucD1iKSxiJiYoYi5uPWEpKX1pZihiIGluIGEpdGhyb3cgUyhcIiRjYWNoZUZhY3RvcnlcIikoXCJpaWRcIixcbmIpO3ZhciBnPTAsaD14KHt9LGQse2lkOmJ9KSxsPXt9LGs9ZCYmZC5jYXBhY2l0eXx8TnVtYmVyLk1BWF9WQUxVRSxtPXt9LG49bnVsbCxxPW51bGw7cmV0dXJuIGFbYl09e3B1dDpmdW5jdGlvbihhLGIpe2lmKGs8TnVtYmVyLk1BWF9WQUxVRSl7dmFyIGM9bVthXXx8KG1bYV09e2tleTphfSk7ZShjKX1pZighQihiKSlyZXR1cm4gYSBpbiBsfHxnKyssbFthXT1iLGc+ayYmdGhpcy5yZW1vdmUocS5rZXkpLGJ9LGdldDpmdW5jdGlvbihhKXtpZihrPE51bWJlci5NQVhfVkFMVUUpe3ZhciBiPW1bYV07aWYoIWIpcmV0dXJuO2UoYil9cmV0dXJuIGxbYV19LHJlbW92ZTpmdW5jdGlvbihhKXtpZihrPE51bWJlci5NQVhfVkFMVUUpe3ZhciBiPW1bYV07aWYoIWIpcmV0dXJuO2I9PW4mJihuPWIucCk7Yj09cSYmKHE9Yi5uKTtmKGIubixiLnApO2RlbGV0ZSBtW2FdfWRlbGV0ZSBsW2FdO2ctLX0scmVtb3ZlQWxsOmZ1bmN0aW9uKCl7bD17fTtnPTA7bT17fTtuPXE9bnVsbH0sZGVzdHJveTpmdW5jdGlvbigpe209XG5oPWw9bnVsbDtkZWxldGUgYVtiXX0saW5mbzpmdW5jdGlvbigpe3JldHVybiB4KHt9LGgse3NpemU6Z30pfX19dmFyIGE9e307Yi5pbmZvPWZ1bmN0aW9uKCl7dmFyIGI9e307cyhhLGZ1bmN0aW9uKGEsZSl7YltlXT1hLmluZm8oKX0pO3JldHVybiBifTtiLmdldD1mdW5jdGlvbihiKXtyZXR1cm4gYVtiXX07cmV0dXJuIGJ9fWZ1bmN0aW9uIFZlKCl7dGhpcy4kZ2V0PVtcIiRjYWNoZUZhY3RvcnlcIixmdW5jdGlvbihiKXtyZXR1cm4gYihcInRlbXBsYXRlc1wiKX1dfWZ1bmN0aW9uIHhjKGIsYSl7ZnVuY3Rpb24gYyhhLGIpe3ZhciBjPS9eXFxzKihbQCZdfD0oXFwqPykpKFxcPz8pXFxzKihcXHcqKVxccyokLyxkPXt9O3MoYSxmdW5jdGlvbihhLGUpe3ZhciBmPWEubWF0Y2goYyk7aWYoIWYpdGhyb3cgamEoXCJpc2NwXCIsYixlLGEpO2RbZV09e21vZGU6ZlsxXVswXSxjb2xsZWN0aW9uOlwiKlwiPT09ZlsyXSxvcHRpb25hbDpcIj9cIj09PWZbM10sYXR0ck5hbWU6Zls0XXx8ZX19KTtyZXR1cm4gZH12YXIgZD1cbnt9LGU9L15cXHMqZGlyZWN0aXZlXFw6XFxzKihbXFx3XFwtXSspXFxzKyguKikkLyxmPS8oKFtcXHdcXC1dKykoPzpcXDooW147XSspKT87PykvLGc9R2QoXCJuZ1NyYyxuZ1NyY3NldCxzcmMsc3Jjc2V0XCIpLGg9L14oPzooXFxeXFxePyk/KFxcPyk/KFxcXlxcXj8pPyk/LyxsPS9eKG9uW2Etel0rfGZvcm1hY3Rpb24pJC87dGhpcy5kaXJlY3RpdmU9ZnVuY3Rpb24gbihhLGUpe01hKGEsXCJkaXJlY3RpdmVcIik7RihhKT8oU2IoZSxcImRpcmVjdGl2ZUZhY3RvcnlcIiksZC5oYXNPd25Qcm9wZXJ0eShhKXx8KGRbYV09W10sYi5mYWN0b3J5KGErXCJEaXJlY3RpdmVcIixbXCIkaW5qZWN0b3JcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsZnVuY3Rpb24oYixlKXt2YXIgZj1bXTtzKGRbYV0sZnVuY3Rpb24oZCxnKXt0cnl7dmFyIGg9Yi5pbnZva2UoZCk7RyhoKT9oPXtjb21waWxlOmVhKGgpfTohaC5jb21waWxlJiZoLmxpbmsmJihoLmNvbXBpbGU9ZWEoaC5saW5rKSk7aC5wcmlvcml0eT1oLnByaW9yaXR5fHwwO2guaW5kZXg9XG5nO2gubmFtZT1oLm5hbWV8fGE7aC5yZXF1aXJlPWgucmVxdWlyZXx8aC5jb250cm9sbGVyJiZoLm5hbWU7aC5yZXN0cmljdD1oLnJlc3RyaWN0fHxcIkVBXCI7SShoLnNjb3BlKSYmKGguJCRpc29sYXRlQmluZGluZ3M9YyhoLnNjb3BlLGgubmFtZSkpO2YucHVzaChoKX1jYXRjaChsKXtlKGwpfX0pO3JldHVybiBmfV0pKSxkW2FdLnB1c2goZSkpOnMoYSxsYyhuKSk7cmV0dXJuIHRoaXN9O3RoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24oYil7cmV0dXJuIHkoYik/KGEuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QoYiksdGhpcyk6YS5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCgpfTt0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihiKXtyZXR1cm4geShiKT8oYS5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QoYiksdGhpcyk6YS5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QoKX07dmFyIGs9ITA7dGhpcy5kZWJ1Z0luZm9FbmFibGVkPVxuZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSk/KGs9YSx0aGlzKTprfTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsXCIkaW50ZXJwb2xhdGVcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkdGVtcGxhdGVSZXF1ZXN0XCIsXCIkcGFyc2VcIixcIiRjb250cm9sbGVyXCIsXCIkcm9vdFNjb3BlXCIsXCIkZG9jdW1lbnRcIixcIiRzY2VcIixcIiRhbmltYXRlXCIsXCIkJHNhbml0aXplVXJpXCIsZnVuY3Rpb24oYSxiLGMscixQLHAsdix3LEwsQyxBKXtmdW5jdGlvbiBPKGEsYil7dHJ5e2EuYWRkQ2xhc3MoYil9Y2F0Y2goYyl7fX1mdW5jdGlvbiBFKGEsYixjLGQsZSl7YSBpbnN0YW5jZW9mIER8fChhPUQoYSkpO3MoYSxmdW5jdGlvbihiLGMpe2Iubm9kZVR5cGU9PXFiJiZiLm5vZGVWYWx1ZS5tYXRjaCgvXFxTKy8pJiYoYVtjXT1EKGIpLndyYXAoXCI8c3Bhbj48L3NwYW4+XCIpLnBhcmVudCgpWzBdKX0pO3ZhciBmPVQoYSxiLGEsYyxkLGUpO0UuJCRhZGRTY29wZUNsYXNzKGEpO3ZhciBnPW51bGw7cmV0dXJuIGZ1bmN0aW9uKGIsYyxcbmQpe1NiKGIsXCJzY29wZVwiKTtkPWR8fHt9O3ZhciBlPWQucGFyZW50Qm91bmRUcmFuc2NsdWRlRm4saD1kLnRyYW5zY2x1ZGVDb250cm9sbGVycztkPWQuZnV0dXJlUGFyZW50RWxlbWVudDtlJiZlLiQkYm91bmRUcmFuc2NsdWRlJiYoZT1lLiQkYm91bmRUcmFuc2NsdWRlKTtnfHwoZz0oZD1kJiZkWzBdKT9cImZvcmVpZ25vYmplY3RcIiE9PXVhKGQpJiZkLnRvU3RyaW5nKCkubWF0Y2goL1NWRy8pP1wic3ZnXCI6XCJodG1sXCI6XCJodG1sXCIpO2Q9XCJodG1sXCIhPT1nP0QoWGIoZyxEKFwiPGRpdj5cIikuYXBwZW5kKGEpLmh0bWwoKSkpOmM/TGEuY2xvbmUuY2FsbChhKTphO2lmKGgpZm9yKHZhciBsIGluIGgpZC5kYXRhKFwiJFwiK2wrXCJDb250cm9sbGVyXCIsaFtsXS5pbnN0YW5jZSk7RS4kJGFkZFNjb3BlSW5mbyhkLGIpO2MmJmMoZCxiKTtmJiZmKGIsZCxkLGUpO3JldHVybiBkfX1mdW5jdGlvbiBUKGEsYixjLGQsZSxmKXtmdW5jdGlvbiBnKGEsYyxkLGUpe3ZhciBmLGwsayxxLG4scCx3O2lmKHIpZm9yKHc9XG5BcnJheShjLmxlbmd0aCkscT0wO3E8aC5sZW5ndGg7cSs9MylmPWhbcV0sd1tmXT1jW2ZdO2Vsc2Ugdz1jO3E9MDtmb3Iobj1oLmxlbmd0aDtxPG47KWw9d1toW3ErK11dLGM9aFtxKytdLGY9aFtxKytdLGM/KGMuc2NvcGU/KGs9YS4kbmV3KCksRS4kJGFkZFNjb3BlSW5mbyhEKGwpLGspKTprPWEscD1jLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50P1goYSxjLnRyYW5zY2x1ZGUsZSxjLmVsZW1lbnRUcmFuc2NsdWRlT25UaGlzRWxlbWVudCk6IWMudGVtcGxhdGVPblRoaXNFbGVtZW50JiZlP2U6IWUmJmI/WChhLGIpOm51bGwsYyhmLGssbCxkLHApKTpmJiZmKGEsbC5jaGlsZE5vZGVzLHQsZSl9Zm9yKHZhciBoPVtdLGwsayxxLG4scixwPTA7cDxhLmxlbmd0aDtwKyspe2w9bmV3IFliO2s9VyhhW3BdLFtdLGwsMD09PXA/ZDp0LGUpOyhmPWsubGVuZ3RoP2ZhKGssYVtwXSxsLGIsYyxudWxsLFtdLFtdLGYpOm51bGwpJiZmLnNjb3BlJiZFLiQkYWRkU2NvcGVDbGFzcyhsLiQkZWxlbWVudCk7XG5sPWYmJmYudGVybWluYWx8fCEocT1hW3BdLmNoaWxkTm9kZXMpfHwhcS5sZW5ndGg/bnVsbDpUKHEsZj8oZi50cmFuc2NsdWRlT25UaGlzRWxlbWVudHx8IWYudGVtcGxhdGVPblRoaXNFbGVtZW50KSYmZi50cmFuc2NsdWRlOmIpO2lmKGZ8fGwpaC5wdXNoKHAsZixsKSxuPSEwLHI9cnx8ZjtmPW51bGx9cmV0dXJuIG4/ZzpudWxsfWZ1bmN0aW9uIFgoYSxiLGMsZCl7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmLGcsaCl7ZHx8KGQ9YS4kbmV3KCExLGgpLGQuJCR0cmFuc2NsdWRlZD0hMCk7cmV0dXJuIGIoZCxlLHtwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbjpjLHRyYW5zY2x1ZGVDb250cm9sbGVyczpmLGZ1dHVyZVBhcmVudEVsZW1lbnQ6Z30pfX1mdW5jdGlvbiBXKGEsYixjLGQsZyl7dmFyIGg9Yy4kYXR0cixsO3N3aXRjaChhLm5vZGVUeXBlKXtjYXNlIG9hOmRhKGIseWEodWEoYSkpLFwiRVwiLGQsZyk7Zm9yKHZhciBrLHEsbixyPWEuYXR0cmlidXRlcyxwPTAsdz1yJiZyLmxlbmd0aDtwPFxudztwKyspe3ZhciBQPSExLEw9ITE7az1yW3BdO2w9ay5uYW1lO3E9VShrLnZhbHVlKTtrPXlhKGwpO2lmKG49Z2IudGVzdChrKSlsPWwucmVwbGFjZShTYyxcIlwiKS5zdWJzdHIoOCkucmVwbGFjZSgvXyguKS9nLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9VcHBlckNhc2UoKX0pO3ZhciB1PWsucmVwbGFjZSgvKFN0YXJ0fEVuZCkkLyxcIlwiKTtCKHUpJiZrPT09dStcIlN0YXJ0XCImJihQPWwsTD1sLnN1YnN0cigwLGwubGVuZ3RoLTUpK1wiZW5kXCIsbD1sLnN1YnN0cigwLGwubGVuZ3RoLTYpKTtrPXlhKGwudG9Mb3dlckNhc2UoKSk7aFtrXT1sO2lmKG58fCFjLmhhc093blByb3BlcnR5KGspKWNba109cSxNYyhhLGspJiYoY1trXT0hMCk7UGEoYSxiLHEsayxuKTtkYShiLGssXCJBXCIsZCxnLFAsTCl9YT1hLmNsYXNzTmFtZTtJKGEpJiYoYT1hLmFuaW1WYWwpO2lmKEYoYSkmJlwiXCIhPT1hKWZvcig7bD1mLmV4ZWMoYSk7KWs9eWEobFsyXSksZGEoYixrLFwiQ1wiLGQsZykmJihjW2tdPVUobFszXSkpLFxuYT1hLnN1YnN0cihsLmluZGV4K2xbMF0ubGVuZ3RoKTticmVhaztjYXNlIHFiOk0oYixhLm5vZGVWYWx1ZSk7YnJlYWs7Y2FzZSA4OnRyeXtpZihsPWUuZXhlYyhhLm5vZGVWYWx1ZSkpaz15YShsWzFdKSxkYShiLGssXCJNXCIsZCxnKSYmKGNba109VShsWzJdKSl9Y2F0Y2godil7fX1iLnNvcnQoTik7cmV0dXJuIGJ9ZnVuY3Rpb24gd2EoYSxiLGMpe3ZhciBkPVtdLGU9MDtpZihiJiZhLmhhc0F0dHJpYnV0ZSYmYS5oYXNBdHRyaWJ1dGUoYikpe2Rve2lmKCFhKXRocm93IGphKFwidXRlcmRpclwiLGIsYyk7YS5ub2RlVHlwZT09b2EmJihhLmhhc0F0dHJpYnV0ZShiKSYmZSsrLGEuaGFzQXR0cmlidXRlKGMpJiZlLS0pO2QucHVzaChhKTthPWEubmV4dFNpYmxpbmd9d2hpbGUoMDxlKX1lbHNlIGQucHVzaChhKTtyZXR1cm4gRChkKX1mdW5jdGlvbiBKKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCxlLGYsZyxoKXtlPXdhKGVbMF0sYixjKTtyZXR1cm4gYShkLGUsZixnLGgpfX1mdW5jdGlvbiBmYShhLFxuZCxlLGYsZyxsLGssbixyKXtmdW5jdGlvbiB3KGEsYixjLGQpe2lmKGEpe2MmJihhPUooYSxjLGQpKTthLnJlcXVpcmU9Sy5yZXF1aXJlO2EuZGlyZWN0aXZlTmFtZT14O2lmKFQ9PT1LfHxLLiQkaXNvbGF0ZVNjb3BlKWE9WihhLHtpc29sYXRlU2NvcGU6ITB9KTtrLnB1c2goYSl9aWYoYil7YyYmKGI9SihiLGMsZCkpO2IucmVxdWlyZT1LLnJlcXVpcmU7Yi5kaXJlY3RpdmVOYW1lPXg7aWYoVD09PUt8fEsuJCRpc29sYXRlU2NvcGUpYj1aKGIse2lzb2xhdGVTY29wZTohMH0pO24ucHVzaChiKX19ZnVuY3Rpb24gTChhLGIsYyxkKXt2YXIgZSxmPVwiZGF0YVwiLGc9ITEsbD1jLGs7aWYoRihiKSl7az1iLm1hdGNoKGgpO2I9Yi5zdWJzdHJpbmcoa1swXS5sZW5ndGgpO2tbM10mJihrWzFdP2tbM109bnVsbDprWzFdPWtbM10pO1wiXlwiPT09a1sxXT9mPVwiaW5oZXJpdGVkRGF0YVwiOlwiXl5cIj09PWtbMV0mJihmPVwiaW5oZXJpdGVkRGF0YVwiLGw9Yy5wYXJlbnQoKSk7XCI/XCI9PT1rWzJdJiYoZz0hMCk7XG5lPW51bGw7ZCYmXCJkYXRhXCI9PT1mJiYoZT1kW2JdKSYmKGU9ZS5pbnN0YW5jZSk7ZT1lfHxsW2ZdKFwiJFwiK2IrXCJDb250cm9sbGVyXCIpO2lmKCFlJiYhZyl0aHJvdyBqYShcImN0cmVxXCIsYixhKTtyZXR1cm4gZXx8bnVsbH1IKGIpJiYoZT1bXSxzKGIsZnVuY3Rpb24oYil7ZS5wdXNoKEwoYSxiLGMsZCkpfSkpO3JldHVybiBlfWZ1bmN0aW9uIHYoYSxjLGYsZyxoKXtmdW5jdGlvbiBsKGEsYixjKXt2YXIgZDtWYShhKXx8KGM9YixiPWEsYT10KTt6JiYoZD1PKTtjfHwoYz16P1cucGFyZW50KCk6Vyk7cmV0dXJuIGgoYSxiLGQsYyx3YSl9dmFyIHIsdyx1LEEsTyxmYixXLEo7ZD09PWY/KEo9ZSxXPWUuJCRlbGVtZW50KTooVz1EKGYpLEo9bmV3IFliKFcsZSkpO1QmJihBPWMuJG5ldyghMCkpO2gmJihmYj1sLGZiLiQkYm91bmRUcmFuc2NsdWRlPWgpO0MmJihYPXt9LE89e30scyhDLGZ1bmN0aW9uKGEpe3ZhciBiPXskc2NvcGU6YT09PVR8fGEuJCRpc29sYXRlU2NvcGU/QTpjLCRlbGVtZW50OlcsXG4kYXR0cnM6SiwkdHJhbnNjbHVkZTpmYn07dT1hLmNvbnRyb2xsZXI7XCJAXCI9PXUmJih1PUpbYS5uYW1lXSk7Yj1wKHUsYiwhMCxhLmNvbnRyb2xsZXJBcyk7T1thLm5hbWVdPWI7enx8Vy5kYXRhKFwiJFwiK2EubmFtZStcIkNvbnRyb2xsZXJcIixiLmluc3RhbmNlKTtYW2EubmFtZV09Yn0pKTtpZihUKXtFLiQkYWRkU2NvcGVJbmZvKFcsQSwhMCwhKGthJiYoa2E9PT1UfHxrYT09PVQuJCRvcmlnaW5hbERpcmVjdGl2ZSkpKTtFLiQkYWRkU2NvcGVDbGFzcyhXLCEwKTtnPVgmJlhbVC5uYW1lXTt2YXIgeGE9QTtnJiZnLmlkZW50aWZpZXImJiEwPT09VC5iaW5kVG9Db250cm9sbGVyJiYoeGE9Zy5pbnN0YW5jZSk7cyhBLiQkaXNvbGF0ZUJpbmRpbmdzPVQuJCRpc29sYXRlQmluZGluZ3MsZnVuY3Rpb24oYSxkKXt2YXIgZT1hLmF0dHJOYW1lLGY9YS5vcHRpb25hbCxnLGgsbCxrO3N3aXRjaChhLm1vZGUpe2Nhc2UgXCJAXCI6Si4kb2JzZXJ2ZShlLGZ1bmN0aW9uKGEpe3hhW2RdPWF9KTtKLiQkb2JzZXJ2ZXJzW2VdLiQkc2NvcGU9XG5jO0pbZV0mJih4YVtkXT1iKEpbZV0pKGMpKTticmVhaztjYXNlIFwiPVwiOmlmKGYmJiFKW2VdKWJyZWFrO2g9UChKW2VdKTtrPWgubGl0ZXJhbD9nYTpmdW5jdGlvbihhLGIpe3JldHVybiBhPT09Ynx8YSE9PWEmJmIhPT1ifTtsPWguYXNzaWdufHxmdW5jdGlvbigpe2c9eGFbZF09aChjKTt0aHJvdyBqYShcIm5vbmFzc2lnblwiLEpbZV0sVC5uYW1lKTt9O2c9eGFbZF09aChjKTtmPWZ1bmN0aW9uKGEpe2soYSx4YVtkXSl8fChrKGEsZyk/bChjLGE9eGFbZF0pOnhhW2RdPWEpO3JldHVybiBnPWF9O2YuJHN0YXRlZnVsPSEwO2Y9YS5jb2xsZWN0aW9uP2MuJHdhdGNoQ29sbGVjdGlvbihKW2VdLGYpOmMuJHdhdGNoKFAoSltlXSxmKSxudWxsLGgubGl0ZXJhbCk7QS4kb24oXCIkZGVzdHJveVwiLGYpO2JyZWFrO2Nhc2UgXCImXCI6aD1QKEpbZV0pLHhhW2RdPWZ1bmN0aW9uKGEpe3JldHVybiBoKGMsYSl9fX0pfVgmJihzKFgsZnVuY3Rpb24oYSl7YSgpfSksWD1udWxsKTtnPTA7Zm9yKHI9ay5sZW5ndGg7ZzxcbnI7ZysrKXc9a1tnXSwkKHcsdy5pc29sYXRlU2NvcGU/QTpjLFcsSix3LnJlcXVpcmUmJkwody5kaXJlY3RpdmVOYW1lLHcucmVxdWlyZSxXLE8pLGZiKTt2YXIgd2E9YztUJiYoVC50ZW1wbGF0ZXx8bnVsbD09PVQudGVtcGxhdGVVcmwpJiYod2E9QSk7YSYmYSh3YSxmLmNoaWxkTm9kZXMsdCxoKTtmb3IoZz1uLmxlbmd0aC0xOzA8PWc7Zy0tKXc9bltnXSwkKHcsdy5pc29sYXRlU2NvcGU/QTpjLFcsSix3LnJlcXVpcmUmJkwody5kaXJlY3RpdmVOYW1lLHcucmVxdWlyZSxXLE8pLGZiKX1yPXJ8fHt9O2Zvcih2YXIgQT0tTnVtYmVyLk1BWF9WQUxVRSxPLEM9ci5jb250cm9sbGVyRGlyZWN0aXZlcyxYLFQ9ci5uZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUsa2E9ci50ZW1wbGF0ZURpcmVjdGl2ZSxmYT1yLm5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUsZGE9ITEsQj0hMSx6PXIuaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUsYWE9ZS4kJGVsZW1lbnQ9RChkKSxLLHgsTixBYT1mLFxuUSxNPTAsUj1hLmxlbmd0aDtNPFI7TSsrKXtLPWFbTV07dmFyIFBhPUsuJCRzdGFydCxnYj1LLiQkZW5kO1BhJiYoYWE9d2EoZCxQYSxnYikpO049dDtpZihBPksucHJpb3JpdHkpYnJlYWs7aWYoTj1LLnNjb3BlKUsudGVtcGxhdGVVcmx8fChJKE4pPyhPYShcIm5ldy9pc29sYXRlZCBzY29wZVwiLFR8fE8sSyxhYSksVD1LKTpPYShcIm5ldy9pc29sYXRlZCBzY29wZVwiLFQsSyxhYSkpLE89T3x8Szt4PUsubmFtZTshSy50ZW1wbGF0ZVVybCYmSy5jb250cm9sbGVyJiYoTj1LLmNvbnRyb2xsZXIsQz1DfHx7fSxPYShcIidcIit4K1wiJyBjb250cm9sbGVyXCIsQ1t4XSxLLGFhKSxDW3hdPUspO2lmKE49Sy50cmFuc2NsdWRlKWRhPSEwLEsuJCR0bGJ8fChPYShcInRyYW5zY2x1c2lvblwiLGZhLEssYWEpLGZhPUspLFwiZWxlbWVudFwiPT1OPyh6PSEwLEE9Sy5wcmlvcml0eSxOPWFhLGFhPWUuJCRlbGVtZW50PUQoWS5jcmVhdGVDb21tZW50KFwiIFwiK3grXCI6IFwiK2VbeF0rXCIgXCIpKSxkPWFhWzBdLFYoZyxaYS5jYWxsKE4sXG4wKSxkKSxBYT1FKE4sZixBLGwmJmwubmFtZSx7bm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTpmYX0pKTooTj1EKFZiKGQpKS5jb250ZW50cygpLGFhLmVtcHR5KCksQWE9RShOLGYpKTtpZihLLnRlbXBsYXRlKWlmKEI9ITAsT2EoXCJ0ZW1wbGF0ZVwiLGthLEssYWEpLGthPUssTj1HKEsudGVtcGxhdGUpP0sudGVtcGxhdGUoYWEsZSk6Sy50ZW1wbGF0ZSxOPVRjKE4pLEsucmVwbGFjZSl7bD1LO049VGIudGVzdChOKT9VYyhYYihLLnRlbXBsYXRlTmFtZXNwYWNlLFUoTikpKTpbXTtkPU5bMF07aWYoMSE9Ti5sZW5ndGh8fGQubm9kZVR5cGUhPT1vYSl0aHJvdyBqYShcInRwbHJ0XCIseCxcIlwiKTtWKGcsYWEsZCk7Uj17JGF0dHI6e319O049VyhkLFtdLFIpO3ZhciBiYT1hLnNwbGljZShNKzEsYS5sZW5ndGgtKE0rMSkpO1QmJnkoTik7YT1hLmNvbmNhdChOKS5jb25jYXQoYmEpO1JjKGUsUik7Uj1hLmxlbmd0aH1lbHNlIGFhLmh0bWwoTik7aWYoSy50ZW1wbGF0ZVVybClCPSEwLE9hKFwidGVtcGxhdGVcIixcbmthLEssYWEpLGthPUssSy5yZXBsYWNlJiYobD1LKSx2PVMoYS5zcGxpY2UoTSxhLmxlbmd0aC1NKSxhYSxlLGcsZGEmJkFhLGssbix7Y29udHJvbGxlckRpcmVjdGl2ZXM6QyxuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmU6VCx0ZW1wbGF0ZURpcmVjdGl2ZTprYSxub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlOmZhfSksUj1hLmxlbmd0aDtlbHNlIGlmKEsuY29tcGlsZSl0cnl7UT1LLmNvbXBpbGUoYWEsZSxBYSksRyhRKT93KG51bGwsUSxQYSxnYik6USYmdyhRLnByZSxRLnBvc3QsUGEsZ2IpfWNhdGNoKG9mKXtjKG9mLHZhKGFhKSl9Sy50ZXJtaW5hbCYmKHYudGVybWluYWw9ITAsQT1NYXRoLm1heChBLEsucHJpb3JpdHkpKX12LnNjb3BlPU8mJiEwPT09Ty5zY29wZTt2LnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50PWRhO3YuZWxlbWVudFRyYW5zY2x1ZGVPblRoaXNFbGVtZW50PXo7di50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQ9Qjt2LnRyYW5zY2x1ZGU9QWE7ci5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZT1cbno7cmV0dXJuIHZ9ZnVuY3Rpb24geShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YztiKyspYVtiXT1QYihhW2JdLHskJGlzb2xhdGVTY29wZTohMH0pfWZ1bmN0aW9uIGRhKGIsZSxmLGcsaCxsLGspe2lmKGU9PT1oKXJldHVybiBudWxsO2g9bnVsbDtpZihkLmhhc093blByb3BlcnR5KGUpKXt2YXIgcTtlPWEuZ2V0KGUrXCJEaXJlY3RpdmVcIik7Zm9yKHZhciByPTAscD1lLmxlbmd0aDtyPHA7cisrKXRyeXtxPWVbcl0sKGc9PT10fHxnPnEucHJpb3JpdHkpJiYtMSE9cS5yZXN0cmljdC5pbmRleE9mKGYpJiYobCYmKHE9UGIocSx7JCRzdGFydDpsLCQkZW5kOmt9KSksYi5wdXNoKHEpLGg9cSl9Y2F0Y2godyl7Yyh3KX19cmV0dXJuIGh9ZnVuY3Rpb24gQihiKXtpZihkLmhhc093blByb3BlcnR5KGIpKWZvcih2YXIgYz1hLmdldChiK1wiRGlyZWN0aXZlXCIpLGU9MCxmPWMubGVuZ3RoO2U8ZjtlKyspaWYoYj1jW2VdLGIubXVsdGlFbGVtZW50KXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIFJjKGEsXG5iKXt2YXIgYz1iLiRhdHRyLGQ9YS4kYXR0cixlPWEuJCRlbGVtZW50O3MoYSxmdW5jdGlvbihkLGUpe1wiJFwiIT1lLmNoYXJBdCgwKSYmKGJbZV0mJmJbZV0hPT1kJiYoZCs9KFwic3R5bGVcIj09PWU/XCI7XCI6XCIgXCIpK2JbZV0pLGEuJHNldChlLGQsITAsY1tlXSkpfSk7cyhiLGZ1bmN0aW9uKGIsZil7XCJjbGFzc1wiPT1mPyhPKGUsYiksYVtcImNsYXNzXCJdPShhW1wiY2xhc3NcIl0/YVtcImNsYXNzXCJdK1wiIFwiOlwiXCIpK2IpOlwic3R5bGVcIj09Zj8oZS5hdHRyKFwic3R5bGVcIixlLmF0dHIoXCJzdHlsZVwiKStcIjtcIitiKSxhLnN0eWxlPShhLnN0eWxlP2Euc3R5bGUrXCI7XCI6XCJcIikrYik6XCIkXCI9PWYuY2hhckF0KDApfHxhLmhhc093blByb3BlcnR5KGYpfHwoYVtmXT1iLGRbZl09Y1tmXSl9KX1mdW5jdGlvbiBTKGEsYixjLGQsZSxmLGcsaCl7dmFyIGw9W10sayxxLG49YlswXSxwPWEuc2hpZnQoKSx3PVBiKHAse3RlbXBsYXRlVXJsOm51bGwsdHJhbnNjbHVkZTpudWxsLHJlcGxhY2U6bnVsbCwkJG9yaWdpbmFsRGlyZWN0aXZlOnB9KSxcblA9RyhwLnRlbXBsYXRlVXJsKT9wLnRlbXBsYXRlVXJsKGIsYyk6cC50ZW1wbGF0ZVVybCx1PXAudGVtcGxhdGVOYW1lc3BhY2U7Yi5lbXB0eSgpO3IoTC5nZXRUcnVzdGVkUmVzb3VyY2VVcmwoUCkpLnRoZW4oZnVuY3Rpb24ocil7dmFyIEwsdjtyPVRjKHIpO2lmKHAucmVwbGFjZSl7cj1UYi50ZXN0KHIpP1VjKFhiKHUsVShyKSkpOltdO0w9clswXTtpZigxIT1yLmxlbmd0aHx8TC5ub2RlVHlwZSE9PW9hKXRocm93IGphKFwidHBscnRcIixwLm5hbWUsUCk7cj17JGF0dHI6e319O1YoZCxiLEwpO3ZhciBBPVcoTCxbXSxyKTtJKHAuc2NvcGUpJiZ5KEEpO2E9QS5jb25jYXQoYSk7UmMoYyxyKX1lbHNlIEw9bixiLmh0bWwocik7YS51bnNoaWZ0KHcpO2s9ZmEoYSxMLGMsZSxiLHAsZixnLGgpO3MoZCxmdW5jdGlvbihhLGMpe2E9PUwmJihkW2NdPWJbMF0pfSk7Zm9yKHE9VChiWzBdLmNoaWxkTm9kZXMsZSk7bC5sZW5ndGg7KXtyPWwuc2hpZnQoKTt2PWwuc2hpZnQoKTt2YXIgQz1sLnNoaWZ0KCksXG5FPWwuc2hpZnQoKSxBPWJbMF07aWYoIXIuJCRkZXN0cm95ZWQpe2lmKHYhPT1uKXt2YXIgSj12LmNsYXNzTmFtZTtoLmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlJiZwLnJlcGxhY2V8fChBPVZiKEwpKTtWKEMsRCh2KSxBKTtPKEQoQSksSil9dj1rLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50P1gocixrLnRyYW5zY2x1ZGUsRSk6RTtrKHEscixBLGQsdil9fWw9bnVsbH0pO3JldHVybiBmdW5jdGlvbihhLGIsYyxkLGUpe2E9ZTtiLiQkZGVzdHJveWVkfHwobD9sLnB1c2goYixjLGQsYSk6KGsudHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQmJihhPVgoYixrLnRyYW5zY2x1ZGUsZSkpLGsocSxiLGMsZCxhKSkpfX1mdW5jdGlvbiBOKGEsYil7dmFyIGM9Yi5wcmlvcml0eS1hLnByaW9yaXR5O3JldHVybiAwIT09Yz9jOmEubmFtZSE9PWIubmFtZT9hLm5hbWU8Yi5uYW1lPy0xOjE6YS5pbmRleC1iLmluZGV4fWZ1bmN0aW9uIE9hKGEsYixjLGQpe2lmKGIpdGhyb3cgamEoXCJtdWx0aWRpclwiLFxuYi5uYW1lLGMubmFtZSxhLHZhKGQpKTt9ZnVuY3Rpb24gTShhLGMpe3ZhciBkPWIoYywhMCk7ZCYmYS5wdXNoKHtwcmlvcml0eTowLGNvbXBpbGU6ZnVuY3Rpb24oYSl7YT1hLnBhcmVudCgpO3ZhciBiPSEhYS5sZW5ndGg7YiYmRS4kJGFkZEJpbmRpbmdDbGFzcyhhKTtyZXR1cm4gZnVuY3Rpb24oYSxjKXt2YXIgZT1jLnBhcmVudCgpO2J8fEUuJCRhZGRCaW5kaW5nQ2xhc3MoZSk7RS4kJGFkZEJpbmRpbmdJbmZvKGUsZC5leHByZXNzaW9ucyk7YS4kd2F0Y2goZCxmdW5jdGlvbihhKXtjWzBdLm5vZGVWYWx1ZT1hfSl9fX0pfWZ1bmN0aW9uIFhiKGEsYil7YT1RKGF8fFwiaHRtbFwiKTtzd2l0Y2goYSl7Y2FzZSBcInN2Z1wiOmNhc2UgXCJtYXRoXCI6dmFyIGM9WS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2MuaW5uZXJIVE1MPVwiPFwiK2ErXCI+XCIrYitcIjwvXCIrYStcIj5cIjtyZXR1cm4gYy5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXM7ZGVmYXVsdDpyZXR1cm4gYn19ZnVuY3Rpb24gUihhLGIpe2lmKFwic3JjZG9jXCI9PVxuYilyZXR1cm4gTC5IVE1MO3ZhciBjPXVhKGEpO2lmKFwieGxpbmtIcmVmXCI9PWJ8fFwiZm9ybVwiPT1jJiZcImFjdGlvblwiPT1ifHxcImltZ1wiIT1jJiYoXCJzcmNcIj09Ynx8XCJuZ1NyY1wiPT1iKSlyZXR1cm4gTC5SRVNPVVJDRV9VUkx9ZnVuY3Rpb24gUGEoYSxjLGQsZSxmKXt2YXIgaD1SKGEsZSk7Zj1nW2VdfHxmO3ZhciBrPWIoZCwhMCxoLGYpO2lmKGspe2lmKFwibXVsdGlwbGVcIj09PWUmJlwic2VsZWN0XCI9PT11YShhKSl0aHJvdyBqYShcInNlbG11bHRpXCIsdmEoYSkpO2MucHVzaCh7cHJpb3JpdHk6MTAwLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGEsYyxnKXtjPWcuJCRvYnNlcnZlcnN8fChnLiQkb2JzZXJ2ZXJzPXt9KTtpZihsLnRlc3QoZSkpdGhyb3cgamEoXCJub2RvbWV2ZW50c1wiKTt2YXIgbj1nW2VdO24hPT1kJiYoaz1uJiZiKG4sITAsaCxmKSxkPW4pO2smJihnW2VdPWsoYSksKGNbZV18fChjW2VdPVtdKSkuJCRpbnRlcj0hMCwoZy4kJG9ic2VydmVycyYmZy4kJG9ic2VydmVyc1tlXS4kJHNjb3BlfHxcbmEpLiR3YXRjaChrLGZ1bmN0aW9uKGEsYil7XCJjbGFzc1wiPT09ZSYmYSE9Yj9nLiR1cGRhdGVDbGFzcyhhLGIpOmcuJHNldChlLGEpfSkpfX19fSl9fWZ1bmN0aW9uIFYoYSxiLGMpe3ZhciBkPWJbMF0sZT1iLmxlbmd0aCxmPWQucGFyZW50Tm9kZSxnLGg7aWYoYSlmb3IoZz0wLGg9YS5sZW5ndGg7ZzxoO2crKylpZihhW2ddPT1kKXthW2crK109YztoPWcrZS0xO2Zvcih2YXIgbD1hLmxlbmd0aDtnPGw7ZysrLGgrKyloPGw/YVtnXT1hW2hdOmRlbGV0ZSBhW2ddO2EubGVuZ3RoLT1lLTE7YS5jb250ZXh0PT09ZCYmKGEuY29udGV4dD1jKTticmVha31mJiZmLnJlcGxhY2VDaGlsZChjLGQpO2E9WS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7YS5hcHBlbmRDaGlsZChkKTtEKGMpLmRhdGEoRChkKS5kYXRhKCkpO3NhPyhSYj0hMCxzYS5jbGVhbkRhdGEoW2RdKSk6ZGVsZXRlIEQuY2FjaGVbZFtELmV4cGFuZG9dXTtkPTE7Zm9yKGU9Yi5sZW5ndGg7ZDxlO2QrKylmPWJbZF0sRChmKS5yZW1vdmUoKSxcbmEuYXBwZW5kQ2hpbGQoZiksZGVsZXRlIGJbZF07YlswXT1jO2IubGVuZ3RoPTF9ZnVuY3Rpb24gWihhLGIpe3JldHVybiB4KGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxhLGIpfWZ1bmN0aW9uICQoYSxiLGQsZSxmLGcpe3RyeXthKGIsZCxlLGYsZyl9Y2F0Y2goaCl7YyhoLHZhKGQpKX19dmFyIFliPWZ1bmN0aW9uKGEsYil7aWYoYil7dmFyIGM9T2JqZWN0LmtleXMoYiksZCxlLGY7ZD0wO2ZvcihlPWMubGVuZ3RoO2Q8ZTtkKyspZj1jW2RdLHRoaXNbZl09YltmXX1lbHNlIHRoaXMuJGF0dHI9e307dGhpcy4kJGVsZW1lbnQ9YX07WWIucHJvdG90eXBlPXskbm9ybWFsaXplOnlhLCRhZGRDbGFzczpmdW5jdGlvbihhKXthJiYwPGEubGVuZ3RoJiZDLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LGEpfSwkcmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7YSYmMDxhLmxlbmd0aCYmQy5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCxhKX0sJHVwZGF0ZUNsYXNzOmZ1bmN0aW9uKGEsXG5iKXt2YXIgYz1WYyhhLGIpO2MmJmMubGVuZ3RoJiZDLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LGMpOyhjPVZjKGIsYSkpJiZjLmxlbmd0aCYmQy5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCxjKX0sJHNldDpmdW5jdGlvbihhLGIsZCxlKXt2YXIgZj10aGlzLiQkZWxlbWVudFswXSxnPU1jKGYsYSksaD1rZihmLGEpLGY9YTtnPyh0aGlzLiQkZWxlbWVudC5wcm9wKGEsYiksZT1nKTpoJiYodGhpc1toXT1iLGY9aCk7dGhpc1thXT1iO2U/dGhpcy4kYXR0clthXT1lOihlPXRoaXMuJGF0dHJbYV0pfHwodGhpcy4kYXR0clthXT1lPXVjKGEsXCItXCIpKTtnPXVhKHRoaXMuJCRlbGVtZW50KTtpZihcImFcIj09PWcmJlwiaHJlZlwiPT09YXx8XCJpbWdcIj09PWcmJlwic3JjXCI9PT1hKXRoaXNbYV09Yj1BKGIsXCJzcmNcIj09PWEpO2Vsc2UgaWYoXCJpbWdcIj09PWcmJlwic3Jjc2V0XCI9PT1hKXtmb3IodmFyIGc9XCJcIixoPVUoYiksbD0vKFxccytcXGQreFxccyosfFxccytcXGQrd1xccyosfFxccyssfCxcXHMrKS8sbD0vXFxzLy50ZXN0KGgpP1xubDovKCwpLyxoPWguc3BsaXQobCksbD1NYXRoLmZsb29yKGgubGVuZ3RoLzIpLGs9MDtrPGw7aysrKXZhciBxPTIqayxnPWcrQShVKGhbcV0pLCEwKSxnPWcrKFwiIFwiK1UoaFtxKzFdKSk7aD1VKGhbMiprXSkuc3BsaXQoL1xccy8pO2crPUEoVShoWzBdKSwhMCk7Mj09PWgubGVuZ3RoJiYoZys9XCIgXCIrVShoWzFdKSk7dGhpc1thXT1iPWd9ITEhPT1kJiYobnVsbD09PWJ8fGI9PT10P3RoaXMuJCRlbGVtZW50LnJlbW92ZUF0dHIoZSk6dGhpcy4kJGVsZW1lbnQuYXR0cihlLGIpKTsoYT10aGlzLiQkb2JzZXJ2ZXJzKSYmcyhhW2ZdLGZ1bmN0aW9uKGEpe3RyeXthKGIpfWNhdGNoKGQpe2MoZCl9fSl9LCRvYnNlcnZlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWMuJCRvYnNlcnZlcnN8fChjLiQkb2JzZXJ2ZXJzPWhhKCkpLGU9ZFthXXx8KGRbYV09W10pO2UucHVzaChiKTt2LiRldmFsQXN5bmMoZnVuY3Rpb24oKXshZS4kJGludGVyJiZjLmhhc093blByb3BlcnR5KGEpJiZiKGNbYV0pfSk7XG5yZXR1cm4gZnVuY3Rpb24oKXtYYShlLGIpfX19O3ZhciBBYT1iLnN0YXJ0U3ltYm9sKCksa2E9Yi5lbmRTeW1ib2woKSxUYz1cInt7XCI9PUFhfHxcIn19XCI9PWthP3BhOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL1xce1xcey9nLEFhKS5yZXBsYWNlKC99fS9nLGthKX0sZ2I9L15uZ0F0dHJbQS1aXS87RS4kJGFkZEJpbmRpbmdJbmZvPWs/ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmRhdGEoXCIkYmluZGluZ1wiKXx8W107SChiKT9jPWMuY29uY2F0KGIpOmMucHVzaChiKTthLmRhdGEoXCIkYmluZGluZ1wiLGMpfTp6O0UuJCRhZGRCaW5kaW5nQ2xhc3M9az9mdW5jdGlvbihhKXtPKGEsXCJuZy1iaW5kaW5nXCIpfTp6O0UuJCRhZGRTY29wZUluZm89az9mdW5jdGlvbihhLGIsYyxkKXthLmRhdGEoYz9kP1wiJGlzb2xhdGVTY29wZU5vVGVtcGxhdGVcIjpcIiRpc29sYXRlU2NvcGVcIjpcIiRzY29wZVwiLGIpfTp6O0UuJCRhZGRTY29wZUNsYXNzPWs/ZnVuY3Rpb24oYSxiKXtPKGEsYj9cIm5nLWlzb2xhdGUtc2NvcGVcIjpcblwibmctc2NvcGVcIil9Ono7cmV0dXJuIEV9XX1mdW5jdGlvbiB5YShiKXtyZXR1cm4gZGIoYi5yZXBsYWNlKFNjLFwiXCIpKX1mdW5jdGlvbiBWYyhiLGEpe3ZhciBjPVwiXCIsZD1iLnNwbGl0KC9cXHMrLyksZT1hLnNwbGl0KC9cXHMrLyksZj0wO2E6Zm9yKDtmPGQubGVuZ3RoO2YrKyl7Zm9yKHZhciBnPWRbZl0saD0wO2g8ZS5sZW5ndGg7aCsrKWlmKGc9PWVbaF0pY29udGludWUgYTtjKz0oMDxjLmxlbmd0aD9cIiBcIjpcIlwiKStnfXJldHVybiBjfWZ1bmN0aW9uIFVjKGIpe2I9RChiKTt2YXIgYT1iLmxlbmd0aDtpZigxPj1hKXJldHVybiBiO2Zvcig7YS0tOyk4PT09YlthXS5ub2RlVHlwZSYmcGYuY2FsbChiLGEsMSk7cmV0dXJuIGJ9ZnVuY3Rpb24gRmUoKXt2YXIgYj17fSxhPSExLGM9L14oXFxTKykoXFxzK2FzXFxzKyhcXHcrKSk/JC87dGhpcy5yZWdpc3Rlcj1mdW5jdGlvbihhLGMpe01hKGEsXCJjb250cm9sbGVyXCIpO0koYSk/eChiLGEpOmJbYV09Y307dGhpcy5hbGxvd0dsb2JhbHM9ZnVuY3Rpb24oKXthPVxuITB9O3RoaXMuJGdldD1bXCIkaW5qZWN0b3JcIixcIiR3aW5kb3dcIixmdW5jdGlvbihkLGUpe2Z1bmN0aW9uIGYoYSxiLGMsZCl7aWYoIWF8fCFJKGEuJHNjb3BlKSl0aHJvdyBTKFwiJGNvbnRyb2xsZXJcIikoXCJub3NjcFwiLGQsYik7YS4kc2NvcGVbYl09Y31yZXR1cm4gZnVuY3Rpb24oZyxoLGwsayl7dmFyIG0sbixxO2w9ITA9PT1sO2smJkYoaykmJihxPWspO2lmKEYoZykpe2s9Zy5tYXRjaChjKTtpZighayl0aHJvdyBxZihcImN0cmxmbXRcIixnKTtuPWtbMV07cT1xfHxrWzNdO2c9Yi5oYXNPd25Qcm9wZXJ0eShuKT9iW25dOndjKGguJHNjb3BlLG4sITApfHwoYT93YyhlLG4sITApOnQpO3RiKGcsbiwhMCl9aWYobClyZXR1cm4gbD0oSChnKT9nW2cubGVuZ3RoLTFdOmcpLnByb3RvdHlwZSxtPU9iamVjdC5jcmVhdGUobHx8bnVsbCkscSYmZihoLHEsbSxufHxnLm5hbWUpLHgoZnVuY3Rpb24oKXtkLmludm9rZShnLG0saCxuKTtyZXR1cm4gbX0se2luc3RhbmNlOm0saWRlbnRpZmllcjpxfSk7XG5tPWQuaW5zdGFudGlhdGUoZyxoLG4pO3EmJmYoaCxxLG0sbnx8Zy5uYW1lKTtyZXR1cm4gbX19XX1mdW5jdGlvbiBHZSgpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsZnVuY3Rpb24oYil7cmV0dXJuIEQoYi5kb2N1bWVudCl9XX1mdW5jdGlvbiBIZSgpe3RoaXMuJGdldD1bXCIkbG9nXCIsZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKGEsYyl7Yi5lcnJvci5hcHBseShiLGFyZ3VtZW50cyl9fV19ZnVuY3Rpb24gWmIoYixhKXtpZihGKGIpKXt2YXIgYz1iLnJlcGxhY2UocmYsXCJcIikudHJpbSgpO2lmKGMpe3ZhciBkPWEoXCJDb250ZW50LVR5cGVcIik7KGQ9ZCYmMD09PWQuaW5kZXhPZihXYykpfHwoZD0oZD1jLm1hdGNoKHNmKSkmJnRmW2RbMF1dLnRlc3QoYykpO2QmJihiPXBjKGMpKX19cmV0dXJuIGJ9ZnVuY3Rpb24gWGMoYil7dmFyIGE9aGEoKSxjLGQsZTtpZighYilyZXR1cm4gYTtzKGIuc3BsaXQoXCJcXG5cIiksZnVuY3Rpb24oYil7ZT1iLmluZGV4T2YoXCI6XCIpO2M9UShVKGIuc3Vic3RyKDAsXG5lKSkpO2Q9VShiLnN1YnN0cihlKzEpKTtjJiYoYVtjXT1hW2NdP2FbY10rXCIsIFwiK2Q6ZCl9KTtyZXR1cm4gYX1mdW5jdGlvbiBZYyhiKXt2YXIgYT1JKGIpP2I6dDtyZXR1cm4gZnVuY3Rpb24oYyl7YXx8KGE9WGMoYikpO3JldHVybiBjPyhjPWFbUShjKV0sdm9pZCAwPT09YyYmKGM9bnVsbCksYyk6YX19ZnVuY3Rpb24gWmMoYixhLGMsZCl7aWYoRyhkKSlyZXR1cm4gZChiLGEsYyk7cyhkLGZ1bmN0aW9uKGQpe2I9ZChiLGEsYyl9KTtyZXR1cm4gYn1mdW5jdGlvbiBLZSgpe3ZhciBiPXRoaXMuZGVmYXVsdHM9e3RyYW5zZm9ybVJlc3BvbnNlOltaYl0sdHJhbnNmb3JtUmVxdWVzdDpbZnVuY3Rpb24oYSl7cmV0dXJuIEkoYSkmJlwiW29iamVjdCBGaWxlXVwiIT09RGEuY2FsbChhKSYmXCJbb2JqZWN0IEJsb2JdXCIhPT1EYS5jYWxsKGEpJiZcIltvYmplY3QgRm9ybURhdGFdXCIhPT1EYS5jYWxsKGEpPyRhKGEpOmF9XSxoZWFkZXJzOntjb21tb246e0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKlwifSxcbnBvc3Q6cmEoJGIpLHB1dDpyYSgkYikscGF0Y2g6cmEoJGIpfSx4c3JmQ29va2llTmFtZTpcIlhTUkYtVE9LRU5cIix4c3JmSGVhZGVyTmFtZTpcIlgtWFNSRi1UT0tFTlwifSxhPSExO3RoaXMudXNlQXBwbHlBc3luYz1mdW5jdGlvbihiKXtyZXR1cm4geShiKT8oYT0hIWIsdGhpcyk6YX07dmFyIGM9dGhpcy5pbnRlcmNlcHRvcnM9W107dGhpcy4kZ2V0PVtcIiRodHRwQmFja2VuZFwiLFwiJGJyb3dzZXJcIixcIiRjYWNoZUZhY3RvcnlcIixcIiRyb290U2NvcGVcIixcIiRxXCIsXCIkaW5qZWN0b3JcIixmdW5jdGlvbihkLGUsZixnLGgsbCl7ZnVuY3Rpb24gayhhKXtmdW5jdGlvbiBjKGEpe3ZhciBiPXgoe30sYSk7Yi5kYXRhPWEuZGF0YT9aYyhhLmRhdGEsYS5oZWFkZXJzLGEuc3RhdHVzLGUudHJhbnNmb3JtUmVzcG9uc2UpOmEuZGF0YTthPWEuc3RhdHVzO3JldHVybiAyMDA8PWEmJjMwMD5hP2I6aC5yZWplY3QoYil9ZnVuY3Rpb24gZChhKXt2YXIgYixjPXt9O3MoYSxmdW5jdGlvbihhLGQpe0coYSk/KGI9XG5hKCksbnVsbCE9YiYmKGNbZF09YikpOmNbZF09YX0pO3JldHVybiBjfWlmKCFjYS5pc09iamVjdChhKSl0aHJvdyBTKFwiJGh0dHBcIikoXCJiYWRyZXFcIixhKTt2YXIgZT14KHttZXRob2Q6XCJnZXRcIix0cmFuc2Zvcm1SZXF1ZXN0OmIudHJhbnNmb3JtUmVxdWVzdCx0cmFuc2Zvcm1SZXNwb25zZTpiLnRyYW5zZm9ybVJlc3BvbnNlfSxhKTtlLmhlYWRlcnM9ZnVuY3Rpb24oYSl7dmFyIGM9Yi5oZWFkZXJzLGU9eCh7fSxhLmhlYWRlcnMpLGYsZyxjPXgoe30sYy5jb21tb24sY1tRKGEubWV0aG9kKV0pO2E6Zm9yKGYgaW4gYyl7YT1RKGYpO2ZvcihnIGluIGUpaWYoUShnKT09PWEpY29udGludWUgYTtlW2ZdPWNbZl19cmV0dXJuIGQoZSl9KGEpO2UubWV0aG9kPXZiKGUubWV0aG9kKTt2YXIgZj1bZnVuY3Rpb24oYSl7dmFyIGQ9YS5oZWFkZXJzLGU9WmMoYS5kYXRhLFljKGQpLHQsYS50cmFuc2Zvcm1SZXF1ZXN0KTtCKGUpJiZzKGQsZnVuY3Rpb24oYSxiKXtcImNvbnRlbnQtdHlwZVwiPT09UShiKSYmXG5kZWxldGUgZFtiXX0pO0IoYS53aXRoQ3JlZGVudGlhbHMpJiYhQihiLndpdGhDcmVkZW50aWFscykmJihhLndpdGhDcmVkZW50aWFscz1iLndpdGhDcmVkZW50aWFscyk7cmV0dXJuIG0oYSxlKS50aGVuKGMsYyl9LHRdLGc9aC53aGVuKGUpO2ZvcihzKHUsZnVuY3Rpb24oYSl7KGEucmVxdWVzdHx8YS5yZXF1ZXN0RXJyb3IpJiZmLnVuc2hpZnQoYS5yZXF1ZXN0LGEucmVxdWVzdEVycm9yKTsoYS5yZXNwb25zZXx8YS5yZXNwb25zZUVycm9yKSYmZi5wdXNoKGEucmVzcG9uc2UsYS5yZXNwb25zZUVycm9yKX0pO2YubGVuZ3RoOyl7YT1mLnNoaWZ0KCk7dmFyIGw9Zi5zaGlmdCgpLGc9Zy50aGVuKGEsbCl9Zy5zdWNjZXNzPWZ1bmN0aW9uKGEpe2cudGhlbihmdW5jdGlvbihiKXthKGIuZGF0YSxiLnN0YXR1cyxiLmhlYWRlcnMsZSl9KTtyZXR1cm4gZ307Zy5lcnJvcj1mdW5jdGlvbihhKXtnLnRoZW4obnVsbCxmdW5jdGlvbihiKXthKGIuZGF0YSxiLnN0YXR1cyxiLmhlYWRlcnMsZSl9KTtcbnJldHVybiBnfTtyZXR1cm4gZ31mdW5jdGlvbiBtKGMsZil7ZnVuY3Rpb24gbChiLGMsZCxlKXtmdW5jdGlvbiBmKCl7bShjLGIsZCxlKX1PJiYoMjAwPD1iJiYzMDA+Yj9PLnB1dChYLFtiLGMsWGMoZCksZV0pOk8ucmVtb3ZlKFgpKTthP2cuJGFwcGx5QXN5bmMoZik6KGYoKSxnLiQkcGhhc2V8fGcuJGFwcGx5KCkpfWZ1bmN0aW9uIG0oYSxiLGQsZSl7Yj1NYXRoLm1heChiLDApOygyMDA8PWImJjMwMD5iP0MucmVzb2x2ZTpDLnJlamVjdCkoe2RhdGE6YSxzdGF0dXM6YixoZWFkZXJzOlljKGQpLGNvbmZpZzpjLHN0YXR1c1RleHQ6ZX0pfWZ1bmN0aW9uIHcoYSl7bShhLmRhdGEsYS5zdGF0dXMscmEoYS5oZWFkZXJzKCkpLGEuc3RhdHVzVGV4dCl9ZnVuY3Rpb24gdSgpe3ZhciBhPWsucGVuZGluZ1JlcXVlc3RzLmluZGV4T2YoYyk7LTEhPT1hJiZrLnBlbmRpbmdSZXF1ZXN0cy5zcGxpY2UoYSwxKX12YXIgQz1oLmRlZmVyKCksQT1DLnByb21pc2UsTyxFLHM9Yy5oZWFkZXJzLFg9bihjLnVybCxcbmMucGFyYW1zKTtrLnBlbmRpbmdSZXF1ZXN0cy5wdXNoKGMpO0EudGhlbih1LHUpOyFjLmNhY2hlJiYhYi5jYWNoZXx8ITE9PT1jLmNhY2hlfHxcIkdFVFwiIT09Yy5tZXRob2QmJlwiSlNPTlBcIiE9PWMubWV0aG9kfHwoTz1JKGMuY2FjaGUpP2MuY2FjaGU6SShiLmNhY2hlKT9iLmNhY2hlOnEpO08mJihFPU8uZ2V0KFgpLHkoRSk/RSYmRyhFLnRoZW4pP0UudGhlbih3LHcpOkgoRSk/bShFWzFdLEVbMF0scmEoRVsyXSksRVszXSk6bShFLDIwMCx7fSxcIk9LXCIpOk8ucHV0KFgsQSkpO0IoRSkmJigoRT0kYyhjLnVybCk/ZS5jb29raWVzKClbYy54c3JmQ29va2llTmFtZXx8Yi54c3JmQ29va2llTmFtZV06dCkmJihzW2MueHNyZkhlYWRlck5hbWV8fGIueHNyZkhlYWRlck5hbWVdPUUpLGQoYy5tZXRob2QsWCxmLGwscyxjLnRpbWVvdXQsYy53aXRoQ3JlZGVudGlhbHMsYy5yZXNwb25zZVR5cGUpKTtyZXR1cm4gQX1mdW5jdGlvbiBuKGEsYil7aWYoIWIpcmV0dXJuIGE7dmFyIGM9W107RWQoYixcbmZ1bmN0aW9uKGEsYil7bnVsbD09PWF8fEIoYSl8fChIKGEpfHwoYT1bYV0pLHMoYSxmdW5jdGlvbihhKXtJKGEpJiYoYT1xYShhKT9hLnRvSVNPU3RyaW5nKCk6JGEoYSkpO2MucHVzaChGYShiKStcIj1cIitGYShhKSl9KSl9KTswPGMubGVuZ3RoJiYoYSs9KC0xPT1hLmluZGV4T2YoXCI/XCIpP1wiP1wiOlwiJlwiKStjLmpvaW4oXCImXCIpKTtyZXR1cm4gYX12YXIgcT1mKFwiJGh0dHBcIiksdT1bXTtzKGMsZnVuY3Rpb24oYSl7dS51bnNoaWZ0KEYoYSk/bC5nZXQoYSk6bC5pbnZva2UoYSkpfSk7ay5wZW5kaW5nUmVxdWVzdHM9W107KGZ1bmN0aW9uKGEpe3MoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2tbYV09ZnVuY3Rpb24oYixjKXtyZXR1cm4gayh4KGN8fHt9LHttZXRob2Q6YSx1cmw6Yn0pKX19KX0pKFwiZ2V0XCIsXCJkZWxldGVcIixcImhlYWRcIixcImpzb25wXCIpOyhmdW5jdGlvbihhKXtzKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtrW2FdPWZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4gayh4KGR8fHt9LHttZXRob2Q6YSxcbnVybDpiLGRhdGE6Y30pKX19KX0pKFwicG9zdFwiLFwicHV0XCIsXCJwYXRjaFwiKTtrLmRlZmF1bHRzPWI7cmV0dXJuIGt9XX1mdW5jdGlvbiB1Zigpe3JldHVybiBuZXcgTS5YTUxIdHRwUmVxdWVzdH1mdW5jdGlvbiBMZSgpe3RoaXMuJGdldD1bXCIkYnJvd3NlclwiLFwiJHdpbmRvd1wiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oYixhLGMpe3JldHVybiB2ZihiLHVmLGIuZGVmZXIsYS5hbmd1bGFyLmNhbGxiYWNrcyxjWzBdKX1dfWZ1bmN0aW9uIHZmKGIsYSxjLGQsZSl7ZnVuY3Rpb24gZihhLGIsYyl7dmFyIGY9ZS5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLG09bnVsbDtmLnR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIjtmLnNyYz1hO2YuYXN5bmM9ITA7bT1mdW5jdGlvbihhKXtmLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsbSwhMSk7Zi5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIixtLCExKTtlLmJvZHkucmVtb3ZlQ2hpbGQoZik7Zj1udWxsO3ZhciBnPS0xLHU9XCJ1bmtub3duXCI7YSYmKFwibG9hZFwiIT09XG5hLnR5cGV8fGRbYl0uY2FsbGVkfHwoYT17dHlwZTpcImVycm9yXCJ9KSx1PWEudHlwZSxnPVwiZXJyb3JcIj09PWEudHlwZT80MDQ6MjAwKTtjJiZjKGcsdSl9O2YuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixtLCExKTtmLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLG0sITEpO2UuYm9keS5hcHBlbmRDaGlsZChmKTtyZXR1cm4gbX1yZXR1cm4gZnVuY3Rpb24oZSxoLGwsayxtLG4scSx1KXtmdW5jdGlvbiByKCl7diYmdigpO3cmJncuYWJvcnQoKX1mdW5jdGlvbiBQKGEsZCxlLGYsZyl7QyE9PXQmJmMuY2FuY2VsKEMpO3Y9dz1udWxsO2EoZCxlLGYsZyk7Yi4kJGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0KHopfWIuJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudCgpO2g9aHx8Yi51cmwoKTtpZihcImpzb25wXCI9PVEoZSkpe3ZhciBwPVwiX1wiKyhkLmNvdW50ZXIrKykudG9TdHJpbmcoMzYpO2RbcF09ZnVuY3Rpb24oYSl7ZFtwXS5kYXRhPWE7ZFtwXS5jYWxsZWQ9ITB9O3ZhciB2PWYoaC5yZXBsYWNlKFwiSlNPTl9DQUxMQkFDS1wiLFxuXCJhbmd1bGFyLmNhbGxiYWNrcy5cIitwKSxwLGZ1bmN0aW9uKGEsYil7UChrLGEsZFtwXS5kYXRhLFwiXCIsYik7ZFtwXT16fSl9ZWxzZXt2YXIgdz1hKCk7dy5vcGVuKGUsaCwhMCk7cyhtLGZ1bmN0aW9uKGEsYil7eShhKSYmdy5zZXRSZXF1ZXN0SGVhZGVyKGIsYSl9KTt3Lm9ubG9hZD1mdW5jdGlvbigpe3ZhciBhPXcuc3RhdHVzVGV4dHx8XCJcIixiPVwicmVzcG9uc2VcImluIHc/dy5yZXNwb25zZTp3LnJlc3BvbnNlVGV4dCxjPTEyMjM9PT13LnN0YXR1cz8yMDQ6dy5zdGF0dXM7MD09PWMmJihjPWI/MjAwOlwiZmlsZVwiPT1CYShoKS5wcm90b2NvbD80MDQ6MCk7UChrLGMsYix3LmdldEFsbFJlc3BvbnNlSGVhZGVycygpLGEpfTtlPWZ1bmN0aW9uKCl7UChrLC0xLG51bGwsbnVsbCxcIlwiKX07dy5vbmVycm9yPWU7dy5vbmFib3J0PWU7cSYmKHcud2l0aENyZWRlbnRpYWxzPSEwKTtpZih1KXRyeXt3LnJlc3BvbnNlVHlwZT11fWNhdGNoKEwpe2lmKFwianNvblwiIT09dSl0aHJvdyBMO313LnNlbmQobHx8XG5udWxsKX1pZigwPG4pdmFyIEM9YyhyLG4pO2Vsc2UgbiYmRyhuLnRoZW4pJiZuLnRoZW4ocil9fWZ1bmN0aW9uIEllKCl7dmFyIGI9XCJ7e1wiLGE9XCJ9fVwiO3RoaXMuc3RhcnRTeW1ib2w9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/KGI9YSx0aGlzKTpifTt0aGlzLmVuZFN5bWJvbD1mdW5jdGlvbihiKXtyZXR1cm4gYj8oYT1iLHRoaXMpOmF9O3RoaXMuJGdldD1bXCIkcGFyc2VcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkc2NlXCIsZnVuY3Rpb24oYyxkLGUpe2Z1bmN0aW9uIGYoYSl7cmV0dXJuXCJcXFxcXFxcXFxcXFxcIithfWZ1bmN0aW9uIGcoZixnLHUscil7ZnVuY3Rpb24gUChjKXtyZXR1cm4gYy5yZXBsYWNlKGssYikucmVwbGFjZShtLGEpfWZ1bmN0aW9uIHAoYSl7dHJ5e3ZhciBiPWE7YT11P2UuZ2V0VHJ1c3RlZCh1LGIpOmUudmFsdWVPZihiKTt2YXIgYztpZihyJiYheShhKSljPWE7ZWxzZSBpZihudWxsPT1hKWM9XCJcIjtlbHNle3N3aXRjaCh0eXBlb2YgYSl7Y2FzZSBcInN0cmluZ1wiOmJyZWFrO2Nhc2UgXCJudW1iZXJcIjphPVxuXCJcIithO2JyZWFrO2RlZmF1bHQ6YT0kYShhKX1jPWF9cmV0dXJuIGN9Y2F0Y2goZyl7Yz1hYyhcImludGVyclwiLGYsZy50b1N0cmluZygpKSxkKGMpfX1yPSEhcjtmb3IodmFyIHYsdyxMPTAsQz1bXSxBPVtdLE89Zi5sZW5ndGgsRT1bXSxzPVtdO0w8TzspaWYoLTEhPSh2PWYuaW5kZXhPZihiLEwpKSYmLTEhPSh3PWYuaW5kZXhPZihhLHYraCkpKUwhPT12JiZFLnB1c2goUChmLnN1YnN0cmluZyhMLHYpKSksTD1mLnN1YnN0cmluZyh2K2gsdyksQy5wdXNoKEwpLEEucHVzaChjKEwscCkpLEw9dytsLHMucHVzaChFLmxlbmd0aCksRS5wdXNoKFwiXCIpO2Vsc2V7TCE9PU8mJkUucHVzaChQKGYuc3Vic3RyaW5nKEwpKSk7YnJlYWt9aWYodSYmMTxFLmxlbmd0aCl0aHJvdyBhYyhcIm5vY29uY2F0XCIsZik7aWYoIWd8fEMubGVuZ3RoKXt2YXIgWD1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPUMubGVuZ3RoO2I8YztiKyspe2lmKHImJkIoYVtiXSkpcmV0dXJuO0Vbc1tiXV09YVtiXX1yZXR1cm4gRS5qb2luKFwiXCIpfTtcbnJldHVybiB4KGZ1bmN0aW9uKGEpe3ZhciBiPTAsYz1DLmxlbmd0aCxlPUFycmF5KGMpO3RyeXtmb3IoO2I8YztiKyspZVtiXT1BW2JdKGEpO3JldHVybiBYKGUpfWNhdGNoKGcpe2E9YWMoXCJpbnRlcnJcIixmLGcudG9TdHJpbmcoKSksZChhKX19LHtleHA6ZixleHByZXNzaW9uczpDLCQkd2F0Y2hEZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGEuJHdhdGNoR3JvdXAoQSxmdW5jdGlvbihjLGUpe3ZhciBmPVgoYyk7RyhiKSYmYi5jYWxsKHRoaXMsZixjIT09ZT9kOmYsYSk7ZD1mfSxjKX19KX19dmFyIGg9Yi5sZW5ndGgsbD1hLmxlbmd0aCxrPW5ldyBSZWdFeHAoYi5yZXBsYWNlKC8uL2csZiksXCJnXCIpLG09bmV3IFJlZ0V4cChhLnJlcGxhY2UoLy4vZyxmKSxcImdcIik7Zy5zdGFydFN5bWJvbD1mdW5jdGlvbigpe3JldHVybiBifTtnLmVuZFN5bWJvbD1mdW5jdGlvbigpe3JldHVybiBhfTtyZXR1cm4gZ31dfWZ1bmN0aW9uIEplKCl7dGhpcy4kZ2V0PVtcIiRyb290U2NvcGVcIixcblwiJHdpbmRvd1wiLFwiJHFcIixcIiQkcVwiLGZ1bmN0aW9uKGIsYSxjLGQpe2Z1bmN0aW9uIGUoZSxoLGwsayl7dmFyIG09YS5zZXRJbnRlcnZhbCxuPWEuY2xlYXJJbnRlcnZhbCxxPTAsdT15KGspJiYhayxyPSh1P2Q6YykuZGVmZXIoKSxQPXIucHJvbWlzZTtsPXkobCk/bDowO1AudGhlbihudWxsLG51bGwsZSk7UC4kJGludGVydmFsSWQ9bShmdW5jdGlvbigpe3Iubm90aWZ5KHErKyk7MDxsJiZxPj1sJiYoci5yZXNvbHZlKHEpLG4oUC4kJGludGVydmFsSWQpLGRlbGV0ZSBmW1AuJCRpbnRlcnZhbElkXSk7dXx8Yi4kYXBwbHkoKX0saCk7ZltQLiQkaW50ZXJ2YWxJZF09cjtyZXR1cm4gUH12YXIgZj17fTtlLmNhbmNlbD1mdW5jdGlvbihiKXtyZXR1cm4gYiYmYi4kJGludGVydmFsSWQgaW4gZj8oZltiLiQkaW50ZXJ2YWxJZF0ucmVqZWN0KFwiY2FuY2VsZWRcIiksYS5jbGVhckludGVydmFsKGIuJCRpbnRlcnZhbElkKSxkZWxldGUgZltiLiQkaW50ZXJ2YWxJZF0sITApOiExfTtyZXR1cm4gZX1dfVxuZnVuY3Rpb24gUmQoKXt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm57aWQ6XCJlbi11c1wiLE5VTUJFUl9GT1JNQVRTOntERUNJTUFMX1NFUDpcIi5cIixHUk9VUF9TRVA6XCIsXCIsUEFUVEVSTlM6W3ttaW5JbnQ6MSxtaW5GcmFjOjAsbWF4RnJhYzozLHBvc1ByZTpcIlwiLHBvc1N1ZjpcIlwiLG5lZ1ByZTpcIi1cIixuZWdTdWY6XCJcIixnU2l6ZTozLGxnU2l6ZTozfSx7bWluSW50OjEsbWluRnJhYzoyLG1heEZyYWM6Mixwb3NQcmU6XCJcXHUwMGE0XCIscG9zU3VmOlwiXCIsbmVnUHJlOlwiKFxcdTAwYTRcIixuZWdTdWY6XCIpXCIsZ1NpemU6MyxsZ1NpemU6M31dLENVUlJFTkNZX1NZTTpcIiRcIn0sREFURVRJTUVfRk9STUFUUzp7TU9OVEg6XCJKYW51YXJ5IEZlYnJ1YXJ5IE1hcmNoIEFwcmlsIE1heSBKdW5lIEp1bHkgQXVndXN0IFNlcHRlbWJlciBPY3RvYmVyIE5vdmVtYmVyIERlY2VtYmVyXCIuc3BsaXQoXCIgXCIpLFNIT1JUTU9OVEg6XCJKYW4gRmViIE1hciBBcHIgTWF5IEp1biBKdWwgQXVnIFNlcCBPY3QgTm92IERlY1wiLnNwbGl0KFwiIFwiKSxcbkRBWTpcIlN1bmRheSBNb25kYXkgVHVlc2RheSBXZWRuZXNkYXkgVGh1cnNkYXkgRnJpZGF5IFNhdHVyZGF5XCIuc3BsaXQoXCIgXCIpLFNIT1JUREFZOlwiU3VuIE1vbiBUdWUgV2VkIFRodSBGcmkgU2F0XCIuc3BsaXQoXCIgXCIpLEFNUE1TOltcIkFNXCIsXCJQTVwiXSxtZWRpdW06XCJNTU0gZCwgeSBoOm1tOnNzIGFcIixcInNob3J0XCI6XCJNL2QveXkgaDptbSBhXCIsZnVsbERhdGU6XCJFRUVFLCBNTU1NIGQsIHlcIixsb25nRGF0ZTpcIk1NTU0gZCwgeVwiLG1lZGl1bURhdGU6XCJNTU0gZCwgeVwiLHNob3J0RGF0ZTpcIk0vZC95eVwiLG1lZGl1bVRpbWU6XCJoOm1tOnNzIGFcIixzaG9ydFRpbWU6XCJoOm1tIGFcIn0scGx1cmFsQ2F0OmZ1bmN0aW9uKGIpe3JldHVybiAxPT09Yj9cIm9uZVwiOlwib3RoZXJcIn19fX1mdW5jdGlvbiBiYyhiKXtiPWIuc3BsaXQoXCIvXCIpO2Zvcih2YXIgYT1iLmxlbmd0aDthLS07KWJbYV09cmIoYlthXSk7cmV0dXJuIGIuam9pbihcIi9cIil9ZnVuY3Rpb24gYWQoYixhKXt2YXIgYz1CYShiKTthLiQkcHJvdG9jb2w9XG5jLnByb3RvY29sO2EuJCRob3N0PWMuaG9zdG5hbWU7YS4kJHBvcnQ9YmEoYy5wb3J0KXx8d2ZbYy5wcm90b2NvbF18fG51bGx9ZnVuY3Rpb24gYmQoYixhKXt2YXIgYz1cIi9cIiE9PWIuY2hhckF0KDApO2MmJihiPVwiL1wiK2IpO3ZhciBkPUJhKGIpO2EuJCRwYXRoPWRlY29kZVVSSUNvbXBvbmVudChjJiZcIi9cIj09PWQucGF0aG5hbWUuY2hhckF0KDApP2QucGF0aG5hbWUuc3Vic3RyaW5nKDEpOmQucGF0aG5hbWUpO2EuJCRzZWFyY2g9cmMoZC5zZWFyY2gpO2EuJCRoYXNoPWRlY29kZVVSSUNvbXBvbmVudChkLmhhc2gpO2EuJCRwYXRoJiZcIi9cIiE9YS4kJHBhdGguY2hhckF0KDApJiYoYS4kJHBhdGg9XCIvXCIrYS4kJHBhdGgpfWZ1bmN0aW9uIHphKGIsYSl7aWYoMD09PWEuaW5kZXhPZihiKSlyZXR1cm4gYS5zdWJzdHIoYi5sZW5ndGgpfWZ1bmN0aW9uIEhhKGIpe3ZhciBhPWIuaW5kZXhPZihcIiNcIik7cmV0dXJuLTE9PWE/YjpiLnN1YnN0cigwLGEpfWZ1bmN0aW9uIEdiKGIpe3JldHVybiBiLnJlcGxhY2UoLygjLispfCMkLyxcblwiJDFcIil9ZnVuY3Rpb24gY2MoYil7cmV0dXJuIGIuc3Vic3RyKDAsSGEoYikubGFzdEluZGV4T2YoXCIvXCIpKzEpfWZ1bmN0aW9uIGRjKGIsYSl7dGhpcy4kJGh0bWw1PSEwO2E9YXx8XCJcIjt2YXIgYz1jYyhiKTthZChiLHRoaXMpO3RoaXMuJCRwYXJzZT1mdW5jdGlvbihhKXt2YXIgYj16YShjLGEpO2lmKCFGKGIpKXRocm93IEhiKFwiaXB0aHByZnhcIixhLGMpO2JkKGIsdGhpcyk7dGhpcy4kJHBhdGh8fCh0aGlzLiQkcGF0aD1cIi9cIik7dGhpcy4kJGNvbXBvc2UoKX07dGhpcy4kJGNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgYT1RYih0aGlzLiQkc2VhcmNoKSxiPXRoaXMuJCRoYXNoP1wiI1wiK3JiKHRoaXMuJCRoYXNoKTpcIlwiO3RoaXMuJCR1cmw9YmModGhpcy4kJHBhdGgpKyhhP1wiP1wiK2E6XCJcIikrYjt0aGlzLiQkYWJzVXJsPWMrdGhpcy4kJHVybC5zdWJzdHIoMSl9O3RoaXMuJCRwYXJzZUxpbmtVcmw9ZnVuY3Rpb24oZCxlKXtpZihlJiZcIiNcIj09PWVbMF0pcmV0dXJuIHRoaXMuaGFzaChlLnNsaWNlKDEpKSxcbiEwO3ZhciBmLGc7KGY9emEoYixkKSkhPT10PyhnPWYsZz0oZj16YShhLGYpKSE9PXQ/YysoemEoXCIvXCIsZil8fGYpOmIrZyk6KGY9emEoYyxkKSkhPT10P2c9YytmOmM9PWQrXCIvXCImJihnPWMpO2cmJnRoaXMuJCRwYXJzZShnKTtyZXR1cm4hIWd9fWZ1bmN0aW9uIGVjKGIsYSl7dmFyIGM9Y2MoYik7YWQoYix0aGlzKTt0aGlzLiQkcGFyc2U9ZnVuY3Rpb24oZCl7ZD16YShiLGQpfHx6YShjLGQpO3ZhciBlO1wiI1wiPT09ZC5jaGFyQXQoMCk/KGU9emEoYSxkKSxCKGUpJiYoZT1kKSk6ZT10aGlzLiQkaHRtbDU/ZDpcIlwiO2JkKGUsdGhpcyk7ZD10aGlzLiQkcGF0aDt2YXIgZj0vXlxcL1tBLVpdOihcXC8uKikvOzA9PT1lLmluZGV4T2YoYikmJihlPWUucmVwbGFjZShiLFwiXCIpKTtmLmV4ZWMoZSl8fChkPShlPWYuZXhlYyhkKSk/ZVsxXTpkKTt0aGlzLiQkcGF0aD1kO3RoaXMuJCRjb21wb3NlKCl9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGM9UWIodGhpcy4kJHNlYXJjaCksZT10aGlzLiQkaGFzaD9cblwiI1wiK3JiKHRoaXMuJCRoYXNoKTpcIlwiO3RoaXMuJCR1cmw9YmModGhpcy4kJHBhdGgpKyhjP1wiP1wiK2M6XCJcIikrZTt0aGlzLiQkYWJzVXJsPWIrKHRoaXMuJCR1cmw/YSt0aGlzLiQkdXJsOlwiXCIpfTt0aGlzLiQkcGFyc2VMaW5rVXJsPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIEhhKGIpPT1IYShhKT8odGhpcy4kJHBhcnNlKGEpLCEwKTohMX19ZnVuY3Rpb24gY2QoYixhKXt0aGlzLiQkaHRtbDU9ITA7ZWMuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBjPWNjKGIpO3RoaXMuJCRwYXJzZUxpbmtVcmw9ZnVuY3Rpb24oZCxlKXtpZihlJiZcIiNcIj09PWVbMF0pcmV0dXJuIHRoaXMuaGFzaChlLnNsaWNlKDEpKSwhMDt2YXIgZixnO2I9PUhhKGQpP2Y9ZDooZz16YShjLGQpKT9mPWIrYStnOmM9PT1kK1wiL1wiJiYoZj1jKTtmJiZ0aGlzLiQkcGFyc2UoZik7cmV0dXJuISFmfTt0aGlzLiQkY29tcG9zZT1mdW5jdGlvbigpe3ZhciBjPVFiKHRoaXMuJCRzZWFyY2gpLGU9dGhpcy4kJGhhc2g/XCIjXCIrcmIodGhpcy4kJGhhc2gpOlxuXCJcIjt0aGlzLiQkdXJsPWJjKHRoaXMuJCRwYXRoKSsoYz9cIj9cIitjOlwiXCIpK2U7dGhpcy4kJGFic1VybD1iK2ErdGhpcy4kJHVybH19ZnVuY3Rpb24gSWIoYil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbYl19fWZ1bmN0aW9uIGRkKGIsYSl7cmV0dXJuIGZ1bmN0aW9uKGMpe2lmKEIoYykpcmV0dXJuIHRoaXNbYl07dGhpc1tiXT1hKGMpO3RoaXMuJCRjb21wb3NlKCk7cmV0dXJuIHRoaXN9fWZ1bmN0aW9uIE1lKCl7dmFyIGI9XCJcIixhPXtlbmFibGVkOiExLHJlcXVpcmVCYXNlOiEwLHJld3JpdGVMaW5rczohMH07dGhpcy5oYXNoUHJlZml4PWZ1bmN0aW9uKGEpe3JldHVybiB5KGEpPyhiPWEsdGhpcyk6Yn07dGhpcy5odG1sNU1vZGU9ZnVuY3Rpb24oYil7cmV0dXJuIFdhKGIpPyhhLmVuYWJsZWQ9Yix0aGlzKTpJKGIpPyhXYShiLmVuYWJsZWQpJiYoYS5lbmFibGVkPWIuZW5hYmxlZCksV2EoYi5yZXF1aXJlQmFzZSkmJihhLnJlcXVpcmVCYXNlPWIucmVxdWlyZUJhc2UpLFdhKGIucmV3cml0ZUxpbmtzKSYmXG4oYS5yZXdyaXRlTGlua3M9Yi5yZXdyaXRlTGlua3MpLHRoaXMpOmF9O3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXCIkYnJvd3NlclwiLFwiJHNuaWZmZXJcIixcIiRyb290RWxlbWVudFwiLFwiJHdpbmRvd1wiLGZ1bmN0aW9uKGMsZCxlLGYsZyl7ZnVuY3Rpb24gaChhLGIsYyl7dmFyIGU9ay51cmwoKSxmPWsuJCRzdGF0ZTt0cnl7ZC51cmwoYSxiLGMpLGsuJCRzdGF0ZT1kLnN0YXRlKCl9Y2F0Y2goZyl7dGhyb3cgay51cmwoZSksay4kJHN0YXRlPWYsZzt9fWZ1bmN0aW9uIGwoYSxiKXtjLiRicm9hZGNhc3QoXCIkbG9jYXRpb25DaGFuZ2VTdWNjZXNzXCIsay5hYnNVcmwoKSxhLGsuJCRzdGF0ZSxiKX12YXIgayxtO209ZC5iYXNlSHJlZigpO3ZhciBuPWQudXJsKCkscTtpZihhLmVuYWJsZWQpe2lmKCFtJiZhLnJlcXVpcmVCYXNlKXRocm93IEhiKFwibm9iYXNlXCIpO3E9bi5zdWJzdHJpbmcoMCxuLmluZGV4T2YoXCIvXCIsbi5pbmRleE9mKFwiLy9cIikrMikpKyhtfHxcIi9cIik7bT1lLmhpc3Rvcnk/ZGM6Y2R9ZWxzZSBxPVxuSGEobiksbT1lYztrPW5ldyBtKHEsXCIjXCIrYik7ay4kJHBhcnNlTGlua1VybChuLG4pO2suJCRzdGF0ZT1kLnN0YXRlKCk7dmFyIHU9L15cXHMqKGphdmFzY3JpcHR8bWFpbHRvKTovaTtmLm9uKFwiY2xpY2tcIixmdW5jdGlvbihiKXtpZihhLnJld3JpdGVMaW5rcyYmIWIuY3RybEtleSYmIWIubWV0YUtleSYmIWIuc2hpZnRLZXkmJjIhPWIud2hpY2gmJjIhPWIuYnV0dG9uKXtmb3IodmFyIGU9RChiLnRhcmdldCk7XCJhXCIhPT11YShlWzBdKTspaWYoZVswXT09PWZbMF18fCEoZT1lLnBhcmVudCgpKVswXSlyZXR1cm47dmFyIGg9ZS5wcm9wKFwiaHJlZlwiKSxsPWUuYXR0cihcImhyZWZcIil8fGUuYXR0cihcInhsaW5rOmhyZWZcIik7SShoKSYmXCJbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXVwiPT09aC50b1N0cmluZygpJiYoaD1CYShoLmFuaW1WYWwpLmhyZWYpO3UudGVzdChoKXx8IWh8fGUuYXR0cihcInRhcmdldFwiKXx8Yi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8IWsuJCRwYXJzZUxpbmtVcmwoaCxcbmwpfHwoYi5wcmV2ZW50RGVmYXVsdCgpLGsuYWJzVXJsKCkhPWQudXJsKCkmJihjLiRhcHBseSgpLGcuYW5ndWxhcltcImZmLTY4NDIwOC1wcmV2ZW50RGVmYXVsdFwiXT0hMCkpfX0pO0diKGsuYWJzVXJsKCkpIT1HYihuKSYmZC51cmwoay5hYnNVcmwoKSwhMCk7dmFyIHI9ITA7ZC5vblVybENoYW5nZShmdW5jdGlvbihhLGIpe2MuJGV2YWxBc3luYyhmdW5jdGlvbigpe3ZhciBkPWsuYWJzVXJsKCksZT1rLiQkc3RhdGUsZjtrLiQkcGFyc2UoYSk7ay4kJHN0YXRlPWI7Zj1jLiRicm9hZGNhc3QoXCIkbG9jYXRpb25DaGFuZ2VTdGFydFwiLGEsZCxiLGUpLmRlZmF1bHRQcmV2ZW50ZWQ7ay5hYnNVcmwoKT09PWEmJihmPyhrLiQkcGFyc2UoZCksay4kJHN0YXRlPWUsaChkLCExLGUpKToocj0hMSxsKGQsZSkpKX0pO2MuJCRwaGFzZXx8Yy4kZGlnZXN0KCl9KTtjLiR3YXRjaChmdW5jdGlvbigpe3ZhciBhPUdiKGQudXJsKCkpLGI9R2Ioay5hYnNVcmwoKSksZj1kLnN0YXRlKCksZz1rLiQkcmVwbGFjZSxcbnE9YSE9PWJ8fGsuJCRodG1sNSYmZS5oaXN0b3J5JiZmIT09ay4kJHN0YXRlO2lmKHJ8fHEpcj0hMSxjLiRldmFsQXN5bmMoZnVuY3Rpb24oKXt2YXIgYj1rLmFic1VybCgpLGQ9Yy4kYnJvYWRjYXN0KFwiJGxvY2F0aW9uQ2hhbmdlU3RhcnRcIixiLGEsay4kJHN0YXRlLGYpLmRlZmF1bHRQcmV2ZW50ZWQ7ay5hYnNVcmwoKT09PWImJihkPyhrLiQkcGFyc2UoYSksay4kJHN0YXRlPWYpOihxJiZoKGIsZyxmPT09ay4kJHN0YXRlP251bGw6ay4kJHN0YXRlKSxsKGEsZikpKX0pO2suJCRyZXBsYWNlPSExfSk7cmV0dXJuIGt9XX1mdW5jdGlvbiBOZSgpe3ZhciBiPSEwLGE9dGhpczt0aGlzLmRlYnVnRW5hYmxlZD1mdW5jdGlvbihhKXtyZXR1cm4geShhKT8oYj1hLHRoaXMpOmJ9O3RoaXMuJGdldD1bXCIkd2luZG93XCIsZnVuY3Rpb24oYyl7ZnVuY3Rpb24gZChhKXthIGluc3RhbmNlb2YgRXJyb3ImJihhLnN0YWNrP2E9YS5tZXNzYWdlJiYtMT09PWEuc3RhY2suaW5kZXhPZihhLm1lc3NhZ2UpP1xuXCJFcnJvcjogXCIrYS5tZXNzYWdlK1wiXFxuXCIrYS5zdGFjazphLnN0YWNrOmEuc291cmNlVVJMJiYoYT1hLm1lc3NhZ2UrXCJcXG5cIithLnNvdXJjZVVSTCtcIjpcIithLmxpbmUpKTtyZXR1cm4gYX1mdW5jdGlvbiBlKGEpe3ZhciBiPWMuY29uc29sZXx8e30sZT1iW2FdfHxiLmxvZ3x8ejthPSExO3RyeXthPSEhZS5hcHBseX1jYXRjaChsKXt9cmV0dXJuIGE/ZnVuY3Rpb24oKXt2YXIgYT1bXTtzKGFyZ3VtZW50cyxmdW5jdGlvbihiKXthLnB1c2goZChiKSl9KTtyZXR1cm4gZS5hcHBseShiLGEpfTpmdW5jdGlvbihhLGIpe2UoYSxudWxsPT1iP1wiXCI6Yil9fXJldHVybntsb2c6ZShcImxvZ1wiKSxpbmZvOmUoXCJpbmZvXCIpLHdhcm46ZShcIndhcm5cIiksZXJyb3I6ZShcImVycm9yXCIpLGRlYnVnOmZ1bmN0aW9uKCl7dmFyIGM9ZShcImRlYnVnXCIpO3JldHVybiBmdW5jdGlvbigpe2ImJmMuYXBwbHkoYSxhcmd1bWVudHMpfX0oKX19XX1mdW5jdGlvbiB0YShiLGEpe2lmKFwiX19kZWZpbmVHZXR0ZXJfX1wiPT09XG5ifHxcIl9fZGVmaW5lU2V0dGVyX19cIj09PWJ8fFwiX19sb29rdXBHZXR0ZXJfX1wiPT09Ynx8XCJfX2xvb2t1cFNldHRlcl9fXCI9PT1ifHxcIl9fcHJvdG9fX1wiPT09Yil0aHJvdyBsYShcImlzZWNmbGRcIixhKTtyZXR1cm4gYn1mdW5jdGlvbiBtYShiLGEpe2lmKGIpe2lmKGIuY29uc3RydWN0b3I9PT1iKXRocm93IGxhKFwiaXNlY2ZuXCIsYSk7aWYoYi53aW5kb3c9PT1iKXRocm93IGxhKFwiaXNlY3dpbmRvd1wiLGEpO2lmKGIuY2hpbGRyZW4mJihiLm5vZGVOYW1lfHxiLnByb3AmJmIuYXR0ciYmYi5maW5kKSl0aHJvdyBsYShcImlzZWNkb21cIixhKTtpZihiPT09T2JqZWN0KXRocm93IGxhKFwiaXNlY29ialwiLGEpO31yZXR1cm4gYn1mdW5jdGlvbiBmYyhiKXtyZXR1cm4gYi5jb25zdGFudH1mdW5jdGlvbiBoYihiLGEsYyxkLGUpe21hKGIsZSk7bWEoYSxlKTtjPWMuc3BsaXQoXCIuXCIpO2Zvcih2YXIgZixnPTA7MTxjLmxlbmd0aDtnKyspe2Y9dGEoYy5zaGlmdCgpLGUpO3ZhciBoPTA9PT1nJiZhJiZhW2ZdfHxcbmJbZl07aHx8KGg9e30sYltmXT1oKTtiPW1hKGgsZSl9Zj10YShjLnNoaWZ0KCksZSk7bWEoYltmXSxlKTtyZXR1cm4gYltmXT1kfWZ1bmN0aW9uIFFhKGIpe3JldHVyblwiY29uc3RydWN0b3JcIj09Yn1mdW5jdGlvbiBlZChiLGEsYyxkLGUsZixnKXt0YShiLGYpO3RhKGEsZik7dGEoYyxmKTt0YShkLGYpO3RhKGUsZik7dmFyIGg9ZnVuY3Rpb24oYSl7cmV0dXJuIG1hKGEsZil9LGw9Z3x8UWEoYik/aDpwYSxrPWd8fFFhKGEpP2g6cGEsbT1nfHxRYShjKT9oOnBhLG49Z3x8UWEoZCk/aDpwYSxxPWd8fFFhKGUpP2g6cGE7cmV0dXJuIGZ1bmN0aW9uKGYsZyl7dmFyIGg9ZyYmZy5oYXNPd25Qcm9wZXJ0eShiKT9nOmY7aWYobnVsbD09aClyZXR1cm4gaDtoPWwoaFtiXSk7aWYoIWEpcmV0dXJuIGg7aWYobnVsbD09aClyZXR1cm4gdDtoPWsoaFthXSk7aWYoIWMpcmV0dXJuIGg7aWYobnVsbD09aClyZXR1cm4gdDtoPW0oaFtjXSk7aWYoIWQpcmV0dXJuIGg7aWYobnVsbD09aClyZXR1cm4gdDtcbmg9bihoW2RdKTtyZXR1cm4gZT9udWxsPT1oP3Q6aD1xKGhbZV0pOmh9fWZ1bmN0aW9uIHhmKGIsYSl7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7cmV0dXJuIGIoYyxkLG1hLGEpfX1mdW5jdGlvbiB5ZihiLGEsYyl7dmFyIGQ9YS5leHBlbnNpdmVDaGVja3MsZT1kP3pmOkFmLGY9ZVtiXTtpZihmKXJldHVybiBmO3ZhciBnPWIuc3BsaXQoXCIuXCIpLGg9Zy5sZW5ndGg7aWYoYS5jc3ApZj02Pmg/ZWQoZ1swXSxnWzFdLGdbMl0sZ1szXSxnWzRdLGMsZCk6ZnVuY3Rpb24oYSxiKXt2YXIgZT0wLGY7ZG8gZj1lZChnW2UrK10sZ1tlKytdLGdbZSsrXSxnW2UrK10sZ1tlKytdLGMsZCkoYSxiKSxiPXQsYT1mO3doaWxlKGU8aCk7cmV0dXJuIGZ9O2Vsc2V7dmFyIGw9XCJcIjtkJiYobCs9XCJzID0gZXNvKHMsIGZlKTtcXG5sID0gZXNvKGwsIGZlKTtcXG5cIik7dmFyIGs9ZDtzKGcsZnVuY3Rpb24oYSxiKXt0YShhLGMpO3ZhciBlPShiP1wic1wiOicoKGwmJmwuaGFzT3duUHJvcGVydHkoXCInK2ErJ1wiKSk/bDpzKScpK1xuXCIuXCIrYTtpZihkfHxRYShhKSllPVwiZXNvKFwiK2UrXCIsIGZlKVwiLGs9ITA7bCs9XCJpZihzID09IG51bGwpIHJldHVybiB1bmRlZmluZWQ7XFxucz1cIitlK1wiO1xcblwifSk7bCs9XCJyZXR1cm4gcztcIjthPW5ldyBGdW5jdGlvbihcInNcIixcImxcIixcImVzb1wiLFwiZmVcIixsKTthLnRvU3RyaW5nPWVhKGwpO2smJihhPXhmKGEsYykpO2Y9YX1mLnNoYXJlZEdldHRlcj0hMDtmLmFzc2lnbj1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIGhiKGEsZCxiLGMsYil9O3JldHVybiBlW2JdPWZ9ZnVuY3Rpb24gZ2MoYil7cmV0dXJuIEcoYi52YWx1ZU9mKT9iLnZhbHVlT2YoKTpCZi5jYWxsKGIpfWZ1bmN0aW9uIE9lKCl7dmFyIGI9aGEoKSxhPWhhKCk7dGhpcy4kZ2V0PVtcIiRmaWx0ZXJcIixcIiRzbmlmZmVyXCIsZnVuY3Rpb24oYyxkKXtmdW5jdGlvbiBlKGEpe3ZhciBiPWE7YS5zaGFyZWRHZXR0ZXImJihiPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEoYixjKX0sYi5saXRlcmFsPWEubGl0ZXJhbCxiLmNvbnN0YW50PWEuY29uc3RhbnQsXG5iLmFzc2lnbj1hLmFzc2lnbik7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9YVtjXTtlLmNvbnN0YW50fHwoZS5pbnB1dHM/ZihlLmlucHV0cyxiKTotMT09PWIuaW5kZXhPZihlKSYmYi5wdXNoKGUpKX1yZXR1cm4gYn1mdW5jdGlvbiBnKGEsYil7cmV0dXJuIG51bGw9PWF8fG51bGw9PWI/YT09PWI6XCJvYmplY3RcIj09PXR5cGVvZiBhJiYoYT1nYyhhKSxcIm9iamVjdFwiPT09dHlwZW9mIGEpPyExOmE9PT1ifHxhIT09YSYmYiE9PWJ9ZnVuY3Rpb24gaChhLGIsYyxkKXt2YXIgZT1kLiQkaW5wdXRzfHwoZC4kJGlucHV0cz1mKGQuaW5wdXRzLFtdKSksaDtpZigxPT09ZS5sZW5ndGgpe3ZhciBsPWcsZT1lWzBdO3JldHVybiBhLiR3YXRjaChmdW5jdGlvbihhKXt2YXIgYj1lKGEpO2coYixsKXx8KGg9ZChhKSxsPWImJmdjKGIpKTtyZXR1cm4gaH0sYixjKX1mb3IodmFyIGs9W10scT0wLG49ZS5sZW5ndGg7cTxuO3ErKylrW3FdPVxuZztyZXR1cm4gYS4kd2F0Y2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPSExLGM9MCxmPWUubGVuZ3RoO2M8ZjtjKyspe3ZhciBsPWVbY10oYSk7aWYoYnx8KGI9IWcobCxrW2NdKSkpa1tjXT1sJiZnYyhsKX1iJiYoaD1kKGEpKTtyZXR1cm4gaH0sYixjKX1mdW5jdGlvbiBsKGEsYixjLGQpe3ZhciBlLGY7cmV0dXJuIGU9YS4kd2F0Y2goZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSl9LGZ1bmN0aW9uKGEsYyxkKXtmPWE7RyhiKSYmYi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7eShhKSYmZC4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXt5KGYpJiZlKCl9KX0sYyl9ZnVuY3Rpb24gayhhLGIsYyxkKXtmdW5jdGlvbiBlKGEpe3ZhciBiPSEwO3MoYSxmdW5jdGlvbihhKXt5KGEpfHwoYj0hMSl9KTtyZXR1cm4gYn12YXIgZixnO3JldHVybiBmPWEuJHdhdGNoKGZ1bmN0aW9uKGEpe3JldHVybiBkKGEpfSxmdW5jdGlvbihhLGMsZCl7Zz1hO0coYikmJmIuY2FsbCh0aGlzLGEsYyxkKTtlKGEpJiZkLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe2UoZykmJlxuZigpfSl9LGMpfWZ1bmN0aW9uIG0oYSxiLGMsZCl7dmFyIGU7cmV0dXJuIGU9YS4kd2F0Y2goZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSl9LGZ1bmN0aW9uKGEsYyxkKXtHKGIpJiZiLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlKCl9LGMpfWZ1bmN0aW9uIG4oYSxiKXtpZighYilyZXR1cm4gYTt2YXIgYz1hLiQkd2F0Y2hEZWxlZ2F0ZSxjPWMhPT1rJiZjIT09bD9mdW5jdGlvbihjLGQpe3ZhciBlPWEoYyxkKTtyZXR1cm4gYihlLGMsZCl9OmZ1bmN0aW9uKGMsZCl7dmFyIGU9YShjLGQpLGY9YihlLGMsZCk7cmV0dXJuIHkoZSk/ZjplfTthLiQkd2F0Y2hEZWxlZ2F0ZSYmYS4kJHdhdGNoRGVsZWdhdGUhPT1oP2MuJCR3YXRjaERlbGVnYXRlPWEuJCR3YXRjaERlbGVnYXRlOmIuJHN0YXRlZnVsfHwoYy4kJHdhdGNoRGVsZWdhdGU9aCxjLmlucHV0cz1bYV0pO3JldHVybiBjfXZhciBxPXtjc3A6ZC5jc3AsZXhwZW5zaXZlQ2hlY2tzOiExfSx1PXtjc3A6ZC5jc3AsZXhwZW5zaXZlQ2hlY2tzOiEwfTtcbnJldHVybiBmdW5jdGlvbihkLGYsZyl7dmFyIHYsdyxMO3N3aXRjaCh0eXBlb2YgZCl7Y2FzZSBcInN0cmluZ1wiOkw9ZD1kLnRyaW0oKTt2YXIgQz1nP2E6Yjt2PUNbTF07dnx8KFwiOlwiPT09ZC5jaGFyQXQoMCkmJlwiOlwiPT09ZC5jaGFyQXQoMSkmJih3PSEwLGQ9ZC5zdWJzdHJpbmcoMikpLGc9Zz91OnEsdj1uZXcgaGMoZyksdj0obmV3IGliKHYsYyxnKSkucGFyc2UoZCksdi5jb25zdGFudD92LiQkd2F0Y2hEZWxlZ2F0ZT1tOnc/KHY9ZSh2KSx2LiQkd2F0Y2hEZWxlZ2F0ZT12LmxpdGVyYWw/azpsKTp2LmlucHV0cyYmKHYuJCR3YXRjaERlbGVnYXRlPWgpLENbTF09dik7cmV0dXJuIG4odixmKTtjYXNlIFwiZnVuY3Rpb25cIjpyZXR1cm4gbihkLGYpO2RlZmF1bHQ6cmV0dXJuIG4oeixmKX19fV19ZnVuY3Rpb24gUWUoKXt0aGlzLiRnZXQ9W1wiJHJvb3RTY29wZVwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixmdW5jdGlvbihiLGEpe3JldHVybiBmZChmdW5jdGlvbihhKXtiLiRldmFsQXN5bmMoYSl9LFxuYSl9XX1mdW5jdGlvbiBSZSgpe3RoaXMuJGdldD1bXCIkYnJvd3NlclwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixmdW5jdGlvbihiLGEpe3JldHVybiBmZChmdW5jdGlvbihhKXtiLmRlZmVyKGEpfSxhKX1dfWZ1bmN0aW9uIGZkKGIsYSl7ZnVuY3Rpb24gYyhhLGIsYyl7ZnVuY3Rpb24gZChiKXtyZXR1cm4gZnVuY3Rpb24oYyl7ZXx8KGU9ITAsYi5jYWxsKGEsYykpfX12YXIgZT0hMTtyZXR1cm5bZChiKSxkKGMpXX1mdW5jdGlvbiBkKCl7dGhpcy4kJHN0YXRlPXtzdGF0dXM6MH19ZnVuY3Rpb24gZShhLGIpe3JldHVybiBmdW5jdGlvbihjKXtiLmNhbGwoYSxjKX19ZnVuY3Rpb24gZihjKXshYy5wcm9jZXNzU2NoZWR1bGVkJiZjLnBlbmRpbmcmJihjLnByb2Nlc3NTY2hlZHVsZWQ9ITAsYihmdW5jdGlvbigpe3ZhciBiLGQsZTtlPWMucGVuZGluZztjLnByb2Nlc3NTY2hlZHVsZWQ9ITE7Yy5wZW5kaW5nPXQ7Zm9yKHZhciBmPTAsZz1lLmxlbmd0aDtmPGc7KytmKXtkPWVbZl1bMF07Yj1lW2ZdW2Muc3RhdHVzXTtcbnRyeXtHKGIpP2QucmVzb2x2ZShiKGMudmFsdWUpKToxPT09Yy5zdGF0dXM/ZC5yZXNvbHZlKGMudmFsdWUpOmQucmVqZWN0KGMudmFsdWUpfWNhdGNoKGgpe2QucmVqZWN0KGgpLGEoaCl9fX0pKX1mdW5jdGlvbiBnKCl7dGhpcy5wcm9taXNlPW5ldyBkO3RoaXMucmVzb2x2ZT1lKHRoaXMsdGhpcy5yZXNvbHZlKTt0aGlzLnJlamVjdD1lKHRoaXMsdGhpcy5yZWplY3QpO3RoaXMubm90aWZ5PWUodGhpcyx0aGlzLm5vdGlmeSl9dmFyIGg9UyhcIiRxXCIsVHlwZUVycm9yKTtkLnByb3RvdHlwZT17dGhlbjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9bmV3IGc7dGhpcy4kJHN0YXRlLnBlbmRpbmc9dGhpcy4kJHN0YXRlLnBlbmRpbmd8fFtdO3RoaXMuJCRzdGF0ZS5wZW5kaW5nLnB1c2goW2QsYSxiLGNdKTswPHRoaXMuJCRzdGF0ZS5zdGF0dXMmJmYodGhpcy4kJHN0YXRlKTtyZXR1cm4gZC5wcm9taXNlfSxcImNhdGNoXCI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudGhlbihudWxsLGEpfSxcImZpbmFsbHlcIjpmdW5jdGlvbihhLFxuYil7cmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbihiKXtyZXR1cm4gayhiLCEwLGEpfSxmdW5jdGlvbihiKXtyZXR1cm4gayhiLCExLGEpfSxiKX19O2cucHJvdG90eXBlPXtyZXNvbHZlOmZ1bmN0aW9uKGEpe3RoaXMucHJvbWlzZS4kJHN0YXRlLnN0YXR1c3x8KGE9PT10aGlzLnByb21pc2U/dGhpcy4kJHJlamVjdChoKFwicWN5Y2xlXCIsYSkpOnRoaXMuJCRyZXNvbHZlKGEpKX0sJCRyZXNvbHZlOmZ1bmN0aW9uKGIpe3ZhciBkLGU7ZT1jKHRoaXMsdGhpcy4kJHJlc29sdmUsdGhpcy4kJHJlamVjdCk7dHJ5e2lmKEkoYil8fEcoYikpZD1iJiZiLnRoZW47RyhkKT8odGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzPS0xLGQuY2FsbChiLGVbMF0sZVsxXSx0aGlzLm5vdGlmeSkpOih0aGlzLnByb21pc2UuJCRzdGF0ZS52YWx1ZT1iLHRoaXMucHJvbWlzZS4kJHN0YXRlLnN0YXR1cz0xLGYodGhpcy5wcm9taXNlLiQkc3RhdGUpKX1jYXRjaChnKXtlWzFdKGcpLGEoZyl9fSxyZWplY3Q6ZnVuY3Rpb24oYSl7dGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzfHxcbnRoaXMuJCRyZWplY3QoYSl9LCQkcmVqZWN0OmZ1bmN0aW9uKGEpe3RoaXMucHJvbWlzZS4kJHN0YXRlLnZhbHVlPWE7dGhpcy5wcm9taXNlLiQkc3RhdGUuc3RhdHVzPTI7Zih0aGlzLnByb21pc2UuJCRzdGF0ZSl9LG5vdGlmeTpmdW5jdGlvbihjKXt2YXIgZD10aGlzLnByb21pc2UuJCRzdGF0ZS5wZW5kaW5nOzA+PXRoaXMucHJvbWlzZS4kJHN0YXRlLnN0YXR1cyYmZCYmZC5sZW5ndGgmJmIoZnVuY3Rpb24oKXtmb3IodmFyIGIsZSxmPTAsZz1kLmxlbmd0aDtmPGc7ZisrKXtlPWRbZl1bMF07Yj1kW2ZdWzNdO3RyeXtlLm5vdGlmeShHKGIpP2IoYyk6Yyl9Y2F0Y2goaCl7YShoKX19fSl9fTt2YXIgbD1mdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBnO2I/Yy5yZXNvbHZlKGEpOmMucmVqZWN0KGEpO3JldHVybiBjLnByb21pc2V9LGs9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW51bGw7dHJ5e0coYykmJihkPWMoKSl9Y2F0Y2goZSl7cmV0dXJuIGwoZSwhMSl9cmV0dXJuIGQmJkcoZC50aGVuKT9cbmQudGhlbihmdW5jdGlvbigpe3JldHVybiBsKGEsYil9LGZ1bmN0aW9uKGEpe3JldHVybiBsKGEsITEpfSk6bChhLGIpfSxtPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW5ldyBnO2UucmVzb2x2ZShhKTtyZXR1cm4gZS5wcm9taXNlLnRoZW4oYixjLGQpfSxuPWZ1bmN0aW9uIHUoYSl7aWYoIUcoYSkpdGhyb3cgaChcIm5vcnNsdnJcIixhKTtpZighKHRoaXMgaW5zdGFuY2VvZiB1KSlyZXR1cm4gbmV3IHUoYSk7dmFyIGI9bmV3IGc7YShmdW5jdGlvbihhKXtiLnJlc29sdmUoYSl9LGZ1bmN0aW9uKGEpe2IucmVqZWN0KGEpfSk7cmV0dXJuIGIucHJvbWlzZX07bi5kZWZlcj1mdW5jdGlvbigpe3JldHVybiBuZXcgZ307bi5yZWplY3Q9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGc7Yi5yZWplY3QoYSk7cmV0dXJuIGIucHJvbWlzZX07bi53aGVuPW07bi5hbGw9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGcsYz0wLGQ9SChhKT9bXTp7fTtzKGEsZnVuY3Rpb24oYSxlKXtjKys7bShhKS50aGVuKGZ1bmN0aW9uKGEpe2QuaGFzT3duUHJvcGVydHkoZSl8fFxuKGRbZV09YSwtLWN8fGIucmVzb2x2ZShkKSl9LGZ1bmN0aW9uKGEpe2QuaGFzT3duUHJvcGVydHkoZSl8fGIucmVqZWN0KGEpfSl9KTswPT09YyYmYi5yZXNvbHZlKGQpO3JldHVybiBiLnByb21pc2V9O3JldHVybiBufWZ1bmN0aW9uICRlKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYixhKXt2YXIgYz1iLnJlcXVlc3RBbmltYXRpb25GcmFtZXx8Yi53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUsZD1iLmNhbmNlbEFuaW1hdGlvbkZyYW1lfHxiLndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lfHxiLndlYmtpdENhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSxlPSEhYyxmPWU/ZnVuY3Rpb24oYSl7dmFyIGI9YyhhKTtyZXR1cm4gZnVuY3Rpb24oKXtkKGIpfX06ZnVuY3Rpb24oYil7dmFyIGM9YShiLDE2LjY2LCExKTtyZXR1cm4gZnVuY3Rpb24oKXthLmNhbmNlbChjKX19O2Yuc3VwcG9ydGVkPWU7cmV0dXJuIGZ9XX1mdW5jdGlvbiBQZSgpe3ZhciBiPVxuMTAsYT1TKFwiJHJvb3RTY29wZVwiKSxjPW51bGwsZD1udWxsO3RoaXMuZGlnZXN0VHRsPWZ1bmN0aW9uKGEpe2FyZ3VtZW50cy5sZW5ndGgmJihiPWEpO3JldHVybiBifTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLFwiJHBhcnNlXCIsXCIkYnJvd3NlclwiLGZ1bmN0aW9uKGUsZixnLGgpe2Z1bmN0aW9uIGwoKXt0aGlzLiRpZD0rK29iO3RoaXMuJCRwaGFzZT10aGlzLiRwYXJlbnQ9dGhpcy4kJHdhdGNoZXJzPXRoaXMuJCRuZXh0U2libGluZz10aGlzLiQkcHJldlNpYmxpbmc9dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPW51bGw7dGhpcy4kcm9vdD10aGlzO3RoaXMuJCRkZXN0cm95ZWQ9ITE7dGhpcy4kJGxpc3RlbmVycz17fTt0aGlzLiQkbGlzdGVuZXJDb3VudD17fTt0aGlzLiQkaXNvbGF0ZUJpbmRpbmdzPW51bGx9ZnVuY3Rpb24gayhiKXtpZihyLiQkcGhhc2UpdGhyb3cgYShcImlucHJvZ1wiLHIuJCRwaGFzZSk7ci4kJHBoYXNlPWJ9ZnVuY3Rpb24gbShhLFxuYixjKXtkbyBhLiQkbGlzdGVuZXJDb3VudFtjXS09YiwwPT09YS4kJGxpc3RlbmVyQ291bnRbY10mJmRlbGV0ZSBhLiQkbGlzdGVuZXJDb3VudFtjXTt3aGlsZShhPWEuJHBhcmVudCl9ZnVuY3Rpb24gbigpe31mdW5jdGlvbiBxKCl7Zm9yKDt2Lmxlbmd0aDspdHJ5e3Yuc2hpZnQoKSgpfWNhdGNoKGEpe2YoYSl9ZD1udWxsfWZ1bmN0aW9uIHUoKXtudWxsPT09ZCYmKGQ9aC5kZWZlcihmdW5jdGlvbigpe3IuJGFwcGx5KHEpfSkpfWwucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpsLCRuZXc6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKCl7ZC4kJGRlc3Ryb3llZD0hMH12YXIgZDtiPWJ8fHRoaXM7YT8oZD1uZXcgbCxkLiRyb290PXRoaXMuJHJvb3QpOih0aGlzLiQkQ2hpbGRTY29wZXx8KHRoaXMuJCRDaGlsZFNjb3BlPWZ1bmN0aW9uKCl7dGhpcy4kJHdhdGNoZXJzPXRoaXMuJCRuZXh0U2libGluZz10aGlzLiQkY2hpbGRIZWFkPXRoaXMuJCRjaGlsZFRhaWw9bnVsbDt0aGlzLiQkbGlzdGVuZXJzPVxue307dGhpcy4kJGxpc3RlbmVyQ291bnQ9e307dGhpcy4kaWQ9KytvYjt0aGlzLiQkQ2hpbGRTY29wZT1udWxsfSx0aGlzLiQkQ2hpbGRTY29wZS5wcm90b3R5cGU9dGhpcyksZD1uZXcgdGhpcy4kJENoaWxkU2NvcGUpO2QuJHBhcmVudD1iO2QuJCRwcmV2U2libGluZz1iLiQkY2hpbGRUYWlsO2IuJCRjaGlsZEhlYWQ/KGIuJCRjaGlsZFRhaWwuJCRuZXh0U2libGluZz1kLGIuJCRjaGlsZFRhaWw9ZCk6Yi4kJGNoaWxkSGVhZD1iLiQkY2hpbGRUYWlsPWQ7KGF8fGIhPXRoaXMpJiZkLiRvbihcIiRkZXN0cm95XCIsYyk7cmV0dXJuIGR9LCR3YXRjaDpmdW5jdGlvbihhLGIsZCl7dmFyIGU9ZyhhKTtpZihlLiQkd2F0Y2hEZWxlZ2F0ZSlyZXR1cm4gZS4kJHdhdGNoRGVsZWdhdGUodGhpcyxiLGQsZSk7dmFyIGY9dGhpcy4kJHdhdGNoZXJzLGg9e2ZuOmIsbGFzdDpuLGdldDplLGV4cDphLGVxOiEhZH07Yz1udWxsO0coYil8fChoLmZuPXopO2Z8fChmPXRoaXMuJCR3YXRjaGVycz1bXSk7Zi51bnNoaWZ0KGgpO1xucmV0dXJuIGZ1bmN0aW9uKCl7WGEoZixoKTtjPW51bGx9fSwkd2F0Y2hHcm91cDpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXtoPSExO2w/KGw9ITEsYihlLGUsZykpOmIoZSxkLGcpfXZhciBkPUFycmF5KGEubGVuZ3RoKSxlPUFycmF5KGEubGVuZ3RoKSxmPVtdLGc9dGhpcyxoPSExLGw9ITA7aWYoIWEubGVuZ3RoKXt2YXIgaz0hMDtnLiRldmFsQXN5bmMoZnVuY3Rpb24oKXtrJiZiKGUsZSxnKX0pO3JldHVybiBmdW5jdGlvbigpe2s9ITF9fWlmKDE9PT1hLmxlbmd0aClyZXR1cm4gdGhpcy4kd2F0Y2goYVswXSxmdW5jdGlvbihhLGMsZil7ZVswXT1hO2RbMF09YztiKGUsYT09PWM/ZTpkLGYpfSk7cyhhLGZ1bmN0aW9uKGEsYil7dmFyIGw9Zy4kd2F0Y2goYSxmdW5jdGlvbihhLGYpe2VbYl09YTtkW2JdPWY7aHx8KGg9ITAsZy4kZXZhbEFzeW5jKGMpKX0pO2YucHVzaChsKX0pO3JldHVybiBmdW5jdGlvbigpe2Zvcig7Zi5sZW5ndGg7KWYuc2hpZnQoKSgpfX0sJHdhdGNoQ29sbGVjdGlvbjpmdW5jdGlvbihhLFxuYil7ZnVuY3Rpb24gYyhhKXtlPWE7dmFyIGIsZCxnLGg7aWYoIUIoZSkpe2lmKEkoZSkpaWYoVGEoZSkpZm9yKGYhPT1xJiYoZj1xLHU9Zi5sZW5ndGg9MCxrKyspLGE9ZS5sZW5ndGgsdSE9PWEmJihrKyssZi5sZW5ndGg9dT1hKSxiPTA7YjxhO2IrKyloPWZbYl0sZz1lW2JdLGQ9aCE9PWgmJmchPT1nLGR8fGg9PT1nfHwoaysrLGZbYl09Zyk7ZWxzZXtmIT09bSYmKGY9bT17fSx1PTAsaysrKTthPTA7Zm9yKGIgaW4gZSllLmhhc093blByb3BlcnR5KGIpJiYoYSsrLGc9ZVtiXSxoPWZbYl0sYiBpbiBmPyhkPWghPT1oJiZnIT09ZyxkfHxoPT09Z3x8KGsrKyxmW2JdPWcpKToodSsrLGZbYl09ZyxrKyspKTtpZih1PmEpZm9yKGIgaW4gaysrLGYpZS5oYXNPd25Qcm9wZXJ0eShiKXx8KHUtLSxkZWxldGUgZltiXSl9ZWxzZSBmIT09ZSYmKGY9ZSxrKyspO3JldHVybiBrfX1jLiRzdGF0ZWZ1bD0hMDt2YXIgZD10aGlzLGUsZixoLGw9MTxiLmxlbmd0aCxrPTAsbj1nKGEsYykscT1bXSxtPVxue30scD0hMCx1PTA7cmV0dXJuIHRoaXMuJHdhdGNoKG4sZnVuY3Rpb24oKXtwPyhwPSExLGIoZSxlLGQpKTpiKGUsaCxkKTtpZihsKWlmKEkoZSkpaWYoVGEoZSkpe2g9QXJyYXkoZS5sZW5ndGgpO2Zvcih2YXIgYT0wO2E8ZS5sZW5ndGg7YSsrKWhbYV09ZVthXX1lbHNlIGZvcihhIGluIGg9e30sZSlzYy5jYWxsKGUsYSkmJihoW2FdPWVbYV0pO2Vsc2UgaD1lfSl9LCRkaWdlc3Q6ZnVuY3Rpb24oKXt2YXIgZSxnLGwsbSx1LHYscz1iLHQsVz1bXSx5LEo7ayhcIiRkaWdlc3RcIik7aC4kJGNoZWNrVXJsQ2hhbmdlKCk7dGhpcz09PXImJm51bGwhPT1kJiYoaC5kZWZlci5jYW5jZWwoZCkscSgpKTtjPW51bGw7ZG97dj0hMTtmb3IodD10aGlzO1AubGVuZ3RoOyl7dHJ5e0o9UC5zaGlmdCgpLEouc2NvcGUuJGV2YWwoSi5leHByZXNzaW9uLEoubG9jYWxzKX1jYXRjaChEKXtmKEQpfWM9bnVsbH1hOmRve2lmKG09dC4kJHdhdGNoZXJzKWZvcih1PW0ubGVuZ3RoO3UtLTspdHJ5e2lmKGU9bVt1XSlpZigoZz1cbmUuZ2V0KHQpKSE9PShsPWUubGFzdCkmJiEoZS5lcT9nYShnLGwpOlwibnVtYmVyXCI9PT10eXBlb2YgZyYmXCJudW1iZXJcIj09PXR5cGVvZiBsJiZpc05hTihnKSYmaXNOYU4obCkpKXY9ITAsYz1lLGUubGFzdD1lLmVxP0VhKGcsbnVsbCk6ZyxlLmZuKGcsbD09PW4/ZzpsLHQpLDU+cyYmKHk9NC1zLFdbeV18fChXW3ldPVtdKSxXW3ldLnB1c2goe21zZzpHKGUuZXhwKT9cImZuOiBcIisoZS5leHAubmFtZXx8ZS5leHAudG9TdHJpbmcoKSk6ZS5leHAsbmV3VmFsOmcsb2xkVmFsOmx9KSk7ZWxzZSBpZihlPT09Yyl7dj0hMTticmVhayBhfX1jYXRjaChCKXtmKEIpfWlmKCEobT10LiQkY2hpbGRIZWFkfHx0IT09dGhpcyYmdC4kJG5leHRTaWJsaW5nKSlmb3IoO3QhPT10aGlzJiYhKG09dC4kJG5leHRTaWJsaW5nKTspdD10LiRwYXJlbnR9d2hpbGUodD1tKTtpZigodnx8UC5sZW5ndGgpJiYhcy0tKXRocm93IHIuJCRwaGFzZT1udWxsLGEoXCJpbmZkaWdcIixiLFcpO313aGlsZSh2fHxQLmxlbmd0aCk7XG5mb3Ioci4kJHBoYXNlPW51bGw7cC5sZW5ndGg7KXRyeXtwLnNoaWZ0KCkoKX1jYXRjaChkYSl7ZihkYSl9fSwkZGVzdHJveTpmdW5jdGlvbigpe2lmKCF0aGlzLiQkZGVzdHJveWVkKXt2YXIgYT10aGlzLiRwYXJlbnQ7dGhpcy4kYnJvYWRjYXN0KFwiJGRlc3Ryb3lcIik7dGhpcy4kJGRlc3Ryb3llZD0hMDtpZih0aGlzIT09cil7Zm9yKHZhciBiIGluIHRoaXMuJCRsaXN0ZW5lckNvdW50KW0odGhpcyx0aGlzLiQkbGlzdGVuZXJDb3VudFtiXSxiKTthLiQkY2hpbGRIZWFkPT10aGlzJiYoYS4kJGNoaWxkSGVhZD10aGlzLiQkbmV4dFNpYmxpbmcpO2EuJCRjaGlsZFRhaWw9PXRoaXMmJihhLiQkY2hpbGRUYWlsPXRoaXMuJCRwcmV2U2libGluZyk7dGhpcy4kJHByZXZTaWJsaW5nJiYodGhpcy4kJHByZXZTaWJsaW5nLiQkbmV4dFNpYmxpbmc9dGhpcy4kJG5leHRTaWJsaW5nKTt0aGlzLiQkbmV4dFNpYmxpbmcmJih0aGlzLiQkbmV4dFNpYmxpbmcuJCRwcmV2U2libGluZz10aGlzLiQkcHJldlNpYmxpbmcpO1xudGhpcy4kZGVzdHJveT10aGlzLiRkaWdlc3Q9dGhpcy4kYXBwbHk9dGhpcy4kZXZhbEFzeW5jPXRoaXMuJGFwcGx5QXN5bmM9ejt0aGlzLiRvbj10aGlzLiR3YXRjaD10aGlzLiR3YXRjaEdyb3VwPWZ1bmN0aW9uKCl7cmV0dXJuIHp9O3RoaXMuJCRsaXN0ZW5lcnM9e307dGhpcy4kcGFyZW50PXRoaXMuJCRuZXh0U2libGluZz10aGlzLiQkcHJldlNpYmxpbmc9dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPXRoaXMuJHJvb3Q9dGhpcy4kJHdhdGNoZXJzPW51bGx9fX0sJGV2YWw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZyhhKSh0aGlzLGIpfSwkZXZhbEFzeW5jOmZ1bmN0aW9uKGEsYil7ci4kJHBoYXNlfHxQLmxlbmd0aHx8aC5kZWZlcihmdW5jdGlvbigpe1AubGVuZ3RoJiZyLiRkaWdlc3QoKX0pO1AucHVzaCh7c2NvcGU6dGhpcyxleHByZXNzaW9uOmEsbG9jYWxzOmJ9KX0sJCRwb3N0RGlnZXN0OmZ1bmN0aW9uKGEpe3AucHVzaChhKX0sJGFwcGx5OmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gayhcIiRhcHBseVwiKSxcbnRoaXMuJGV2YWwoYSl9Y2F0Y2goYil7ZihiKX1maW5hbGx5e3IuJCRwaGFzZT1udWxsO3RyeXtyLiRkaWdlc3QoKX1jYXRjaChjKXt0aHJvdyBmKGMpLGM7fX19LCRhcHBseUFzeW5jOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtjLiRldmFsKGEpfXZhciBjPXRoaXM7YSYmdi5wdXNoKGIpO3UoKX0sJG9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy4kJGxpc3RlbmVyc1thXTtjfHwodGhpcy4kJGxpc3RlbmVyc1thXT1jPVtdKTtjLnB1c2goYik7dmFyIGQ9dGhpcztkbyBkLiQkbGlzdGVuZXJDb3VudFthXXx8KGQuJCRsaXN0ZW5lckNvdW50W2FdPTApLGQuJCRsaXN0ZW5lckNvdW50W2FdKys7d2hpbGUoZD1kLiRwYXJlbnQpO3ZhciBlPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQ9Yy5pbmRleE9mKGIpOy0xIT09ZCYmKGNbZF09bnVsbCxtKGUsMSxhKSl9fSwkZW1pdDpmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQsZT10aGlzLGc9ITEsaD17bmFtZTphLHRhcmdldFNjb3BlOmUsXG5zdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtnPSEwfSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2guZGVmYXVsdFByZXZlbnRlZD0hMH0sZGVmYXVsdFByZXZlbnRlZDohMX0sbD1ZYShbaF0sYXJndW1lbnRzLDEpLGssbTtkb3tkPWUuJCRsaXN0ZW5lcnNbYV18fGM7aC5jdXJyZW50U2NvcGU9ZTtrPTA7Zm9yKG09ZC5sZW5ndGg7azxtO2srKylpZihkW2tdKXRyeXtkW2tdLmFwcGx5KG51bGwsbCl9Y2F0Y2gobil7ZihuKX1lbHNlIGQuc3BsaWNlKGssMSksay0tLG0tLTtpZihnKXJldHVybiBoLmN1cnJlbnRTY29wZT1udWxsLGg7ZT1lLiRwYXJlbnR9d2hpbGUoZSk7aC5jdXJyZW50U2NvcGU9bnVsbDtyZXR1cm4gaH0sJGJyb2FkY2FzdDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD10aGlzLGU9e25hbWU6YSx0YXJnZXRTY29wZTp0aGlzLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7ZS5kZWZhdWx0UHJldmVudGVkPSEwfSxkZWZhdWx0UHJldmVudGVkOiExfTtpZighdGhpcy4kJGxpc3RlbmVyQ291bnRbYV0pcmV0dXJuIGU7XG5mb3IodmFyIGc9WWEoW2VdLGFyZ3VtZW50cywxKSxoLGw7Yz1kOyl7ZS5jdXJyZW50U2NvcGU9YztkPWMuJCRsaXN0ZW5lcnNbYV18fFtdO2g9MDtmb3IobD1kLmxlbmd0aDtoPGw7aCsrKWlmKGRbaF0pdHJ5e2RbaF0uYXBwbHkobnVsbCxnKX1jYXRjaChrKXtmKGspfWVsc2UgZC5zcGxpY2UoaCwxKSxoLS0sbC0tO2lmKCEoZD1jLiQkbGlzdGVuZXJDb3VudFthXSYmYy4kJGNoaWxkSGVhZHx8YyE9PXRoaXMmJmMuJCRuZXh0U2libGluZykpZm9yKDtjIT09dGhpcyYmIShkPWMuJCRuZXh0U2libGluZyk7KWM9Yy4kcGFyZW50fWUuY3VycmVudFNjb3BlPW51bGw7cmV0dXJuIGV9fTt2YXIgcj1uZXcgbCxQPXIuJCRhc3luY1F1ZXVlPVtdLHA9ci4kJHBvc3REaWdlc3RRdWV1ZT1bXSx2PXIuJCRhcHBseUFzeW5jUXVldWU9W107cmV0dXJuIHJ9XX1mdW5jdGlvbiBTZCgpe3ZhciBiPS9eXFxzKihodHRwcz98ZnRwfG1haWx0b3x0ZWx8ZmlsZSk6LyxhPS9eXFxzKigoaHR0cHM/fGZ0cHxmaWxlfGJsb2IpOnxkYXRhOmltYWdlXFwvKS87XG50aGlzLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0PWZ1bmN0aW9uKGEpe3JldHVybiB5KGEpPyhiPWEsdGhpcyk6Yn07dGhpcy5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24oYil7cmV0dXJuIHkoYik/KGE9Yix0aGlzKTphfTt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYyxkKXt2YXIgZT1kP2E6YixmO2Y9QmEoYykuaHJlZjtyZXR1cm5cIlwiPT09Znx8Zi5tYXRjaChlKT9jOlwidW5zYWZlOlwiK2Z9fX1mdW5jdGlvbiBDZihiKXtpZihcInNlbGZcIj09PWIpcmV0dXJuIGI7aWYoRihiKSl7aWYoLTE8Yi5pbmRleE9mKFwiKioqXCIpKXRocm93IENhKFwiaXdjYXJkXCIsYik7Yj1nZChiKS5yZXBsYWNlKFwiXFxcXCpcXFxcKlwiLFwiLipcIikucmVwbGFjZShcIlxcXFwqXCIsXCJbXjovLj8mO10qXCIpO3JldHVybiBuZXcgUmVnRXhwKFwiXlwiK2IrXCIkXCIpfWlmKHBiKGIpKXJldHVybiBuZXcgUmVnRXhwKFwiXlwiK2Iuc291cmNlK1wiJFwiKTt0aHJvdyBDYShcImltYXRjaGVyXCIpO31mdW5jdGlvbiBoZChiKXt2YXIgYT1cbltdO3koYikmJnMoYixmdW5jdGlvbihiKXthLnB1c2goQ2YoYikpfSk7cmV0dXJuIGF9ZnVuY3Rpb24gVGUoKXt0aGlzLlNDRV9DT05URVhUUz1uYTt2YXIgYj1bXCJzZWxmXCJdLGE9W107dGhpcy5yZXNvdXJjZVVybFdoaXRlbGlzdD1mdW5jdGlvbihhKXthcmd1bWVudHMubGVuZ3RoJiYoYj1oZChhKSk7cmV0dXJuIGJ9O3RoaXMucmVzb3VyY2VVcmxCbGFja2xpc3Q9ZnVuY3Rpb24oYil7YXJndW1lbnRzLmxlbmd0aCYmKGE9aGQoYikpO3JldHVybiBhfTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsZnVuY3Rpb24oYyl7ZnVuY3Rpb24gZChhLGIpe3JldHVyblwic2VsZlwiPT09YT8kYyhiKTohIWEuZXhlYyhiLmhyZWYpfWZ1bmN0aW9uIGUoYSl7dmFyIGI9ZnVuY3Rpb24oYSl7dGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiBhfX07YSYmKGIucHJvdG90eXBlPW5ldyBhKTtiLnByb3RvdHlwZS52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUoKX07XG5iLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCkudG9TdHJpbmcoKX07cmV0dXJuIGJ9dmFyIGY9ZnVuY3Rpb24oYSl7dGhyb3cgQ2EoXCJ1bnNhZmVcIik7fTtjLmhhcyhcIiRzYW5pdGl6ZVwiKSYmKGY9Yy5nZXQoXCIkc2FuaXRpemVcIikpO3ZhciBnPWUoKSxoPXt9O2hbbmEuSFRNTF09ZShnKTtoW25hLkNTU109ZShnKTtoW25hLlVSTF09ZShnKTtoW25hLkpTXT1lKGcpO2hbbmEuUkVTT1VSQ0VfVVJMXT1lKGhbbmEuVVJMXSk7cmV0dXJue3RydXN0QXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1oLmhhc093blByb3BlcnR5KGEpP2hbYV06bnVsbDtpZighYyl0aHJvdyBDYShcImljb250ZXh0XCIsYSxiKTtpZihudWxsPT09Ynx8Yj09PXR8fFwiXCI9PT1iKXJldHVybiBiO2lmKFwic3RyaW5nXCIhPT10eXBlb2YgYil0aHJvdyBDYShcIml0eXBlXCIsYSk7cmV0dXJuIG5ldyBjKGIpfSxnZXRUcnVzdGVkOmZ1bmN0aW9uKGMsZSl7aWYobnVsbD09PVxuZXx8ZT09PXR8fFwiXCI9PT1lKXJldHVybiBlO3ZhciBnPWguaGFzT3duUHJvcGVydHkoYyk/aFtjXTpudWxsO2lmKGcmJmUgaW5zdGFuY2VvZiBnKXJldHVybiBlLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7aWYoYz09PW5hLlJFU09VUkNFX1VSTCl7dmFyIGc9QmEoZS50b1N0cmluZygpKSxuLHEsdT0hMTtuPTA7Zm9yKHE9Yi5sZW5ndGg7bjxxO24rKylpZihkKGJbbl0sZykpe3U9ITA7YnJlYWt9aWYodSlmb3Iobj0wLHE9YS5sZW5ndGg7bjxxO24rKylpZihkKGFbbl0sZykpe3U9ITE7YnJlYWt9aWYodSlyZXR1cm4gZTt0aHJvdyBDYShcImluc2VjdXJsXCIsZS50b1N0cmluZygpKTt9aWYoYz09PW5hLkhUTUwpcmV0dXJuIGYoZSk7dGhyb3cgQ2EoXCJ1bnNhZmVcIik7fSx2YWx1ZU9mOmZ1bmN0aW9uKGEpe3JldHVybiBhIGluc3RhbmNlb2YgZz9hLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk6YX19fV19ZnVuY3Rpb24gU2UoKXt2YXIgYj0hMDt0aGlzLmVuYWJsZWQ9ZnVuY3Rpb24oYSl7YXJndW1lbnRzLmxlbmd0aCYmXG4oYj0hIWEpO3JldHVybiBifTt0aGlzLiRnZXQ9W1wiJHBhcnNlXCIsXCIkc2NlRGVsZWdhdGVcIixmdW5jdGlvbihhLGMpe2lmKGImJjg+UmEpdGhyb3cgQ2EoXCJpZXF1aXJrc1wiKTt2YXIgZD1yYShuYSk7ZC5pc0VuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gYn07ZC50cnVzdEFzPWMudHJ1c3RBcztkLmdldFRydXN0ZWQ9Yy5nZXRUcnVzdGVkO2QudmFsdWVPZj1jLnZhbHVlT2Y7Ynx8KGQudHJ1c3RBcz1kLmdldFRydXN0ZWQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYn0sZC52YWx1ZU9mPXBhKTtkLnBhcnNlQXM9ZnVuY3Rpb24oYixjKXt2YXIgZT1hKGMpO3JldHVybiBlLmxpdGVyYWwmJmUuY29uc3RhbnQ/ZTphKGMsZnVuY3Rpb24oYSl7cmV0dXJuIGQuZ2V0VHJ1c3RlZChiLGEpfSl9O3ZhciBlPWQucGFyc2VBcyxmPWQuZ2V0VHJ1c3RlZCxnPWQudHJ1c3RBcztzKG5hLGZ1bmN0aW9uKGEsYil7dmFyIGM9UShiKTtkW2RiKFwicGFyc2VfYXNfXCIrYyldPWZ1bmN0aW9uKGIpe3JldHVybiBlKGEsXG5iKX07ZFtkYihcImdldF90cnVzdGVkX1wiK2MpXT1mdW5jdGlvbihiKXtyZXR1cm4gZihhLGIpfTtkW2RiKFwidHJ1c3RfYXNfXCIrYyldPWZ1bmN0aW9uKGIpe3JldHVybiBnKGEsYil9fSk7cmV0dXJuIGR9XX1mdW5jdGlvbiBVZSgpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkZG9jdW1lbnRcIixmdW5jdGlvbihiLGEpe3ZhciBjPXt9LGQ9YmEoKC9hbmRyb2lkIChcXGQrKS8uZXhlYyhRKChiLm5hdmlnYXRvcnx8e30pLnVzZXJBZ2VudCkpfHxbXSlbMV0pLGU9L0JveGVlL2kudGVzdCgoYi5uYXZpZ2F0b3J8fHt9KS51c2VyQWdlbnQpLGY9YVswXXx8e30sZyxoPS9eKE1venx3ZWJraXR8bXMpKD89W0EtWl0pLyxsPWYuYm9keSYmZi5ib2R5LnN0eWxlLGs9ITEsbT0hMTtpZihsKXtmb3IodmFyIG4gaW4gbClpZihrPWguZXhlYyhuKSl7Zz1rWzBdO2c9Zy5zdWJzdHIoMCwxKS50b1VwcGVyQ2FzZSgpK2cuc3Vic3RyKDEpO2JyZWFrfWd8fChnPVwiV2Via2l0T3BhY2l0eVwiaW4gbCYmXCJ3ZWJraXRcIik7XG5rPSEhKFwidHJhbnNpdGlvblwiaW4gbHx8ZytcIlRyYW5zaXRpb25cImluIGwpO209ISEoXCJhbmltYXRpb25cImluIGx8fGcrXCJBbmltYXRpb25cImluIGwpOyFkfHxrJiZtfHwoaz1GKGYuYm9keS5zdHlsZS53ZWJraXRUcmFuc2l0aW9uKSxtPUYoZi5ib2R5LnN0eWxlLndlYmtpdEFuaW1hdGlvbikpfXJldHVybntoaXN0b3J5OiEoIWIuaGlzdG9yeXx8IWIuaGlzdG9yeS5wdXNoU3RhdGV8fDQ+ZHx8ZSksaGFzRXZlbnQ6ZnVuY3Rpb24oYSl7aWYoXCJpbnB1dFwiPT09YSYmMTE+PVJhKXJldHVybiExO2lmKEIoY1thXSkpe3ZhciBiPWYuY3JlYXRlRWxlbWVudChcImRpdlwiKTtjW2FdPVwib25cIithIGluIGJ9cmV0dXJuIGNbYV19LGNzcDpiYigpLHZlbmRvclByZWZpeDpnLHRyYW5zaXRpb25zOmssYW5pbWF0aW9uczptLGFuZHJvaWQ6ZH19XX1mdW5jdGlvbiBXZSgpe3RoaXMuJGdldD1bXCIkdGVtcGxhdGVDYWNoZVwiLFwiJGh0dHBcIixcIiRxXCIsZnVuY3Rpb24oYixhLGMpe2Z1bmN0aW9uIGQoZSxmKXtkLnRvdGFsUGVuZGluZ1JlcXVlc3RzKys7XG52YXIgZz1hLmRlZmF1bHRzJiZhLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlO0goZyk/Zz1nLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYSE9PVpifSk6Zz09PVpiJiYoZz1udWxsKTtyZXR1cm4gYS5nZXQoZSx7Y2FjaGU6Yix0cmFuc2Zvcm1SZXNwb25zZTpnfSkuZmluYWxseShmdW5jdGlvbigpe2QudG90YWxQZW5kaW5nUmVxdWVzdHMtLX0pLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGF0YX0sZnVuY3Rpb24oYSl7aWYoIWYpdGhyb3cgamEoXCJ0cGxvYWRcIixlKTtyZXR1cm4gYy5yZWplY3QoYSl9KX1kLnRvdGFsUGVuZGluZ1JlcXVlc3RzPTA7cmV0dXJuIGR9XX1mdW5jdGlvbiBYZSgpe3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXCIkYnJvd3NlclwiLFwiJGxvY2F0aW9uXCIsZnVuY3Rpb24oYixhLGMpe3JldHVybntmaW5kQmluZGluZ3M6ZnVuY3Rpb24oYSxiLGMpe2E9YS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibmctYmluZGluZ1wiKTt2YXIgZz1bXTtzKGEsZnVuY3Rpb24oYSl7dmFyIGQ9XG5jYS5lbGVtZW50KGEpLmRhdGEoXCIkYmluZGluZ1wiKTtkJiZzKGQsZnVuY3Rpb24oZCl7Yz8obmV3IFJlZ0V4cChcIihefFxcXFxzKVwiK2dkKGIpK1wiKFxcXFxzfFxcXFx8fCQpXCIpKS50ZXN0KGQpJiZnLnB1c2goYSk6LTEhPWQuaW5kZXhPZihiKSYmZy5wdXNoKGEpfSl9KTtyZXR1cm4gZ30sZmluZE1vZGVsczpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBnPVtcIm5nLVwiLFwiZGF0YS1uZy1cIixcIm5nXFxcXDpcIl0saD0wO2g8Zy5sZW5ndGg7KytoKXt2YXIgbD1hLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbXCIrZ1toXStcIm1vZGVsXCIrKGM/XCI9XCI6XCIqPVwiKSsnXCInK2IrJ1wiXScpO2lmKGwubGVuZ3RoKXJldHVybiBsfX0sZ2V0TG9jYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gYy51cmwoKX0sc2V0TG9jYXRpb246ZnVuY3Rpb24oYSl7YSE9PWMudXJsKCkmJihjLnVybChhKSxiLiRkaWdlc3QoKSl9LHdoZW5TdGFibGU6ZnVuY3Rpb24oYil7YS5ub3RpZnlXaGVuTm9PdXRzdGFuZGluZ1JlcXVlc3RzKGIpfX19XX1mdW5jdGlvbiBZZSgpe3RoaXMuJGdldD1cbltcIiRyb290U2NvcGVcIixcIiRicm93c2VyXCIsXCIkcVwiLFwiJCRxXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLGZ1bmN0aW9uKGIsYSxjLGQsZSl7ZnVuY3Rpb24gZihmLGwsayl7dmFyIG09eShrKSYmIWssbj0obT9kOmMpLmRlZmVyKCkscT1uLnByb21pc2U7bD1hLmRlZmVyKGZ1bmN0aW9uKCl7dHJ5e24ucmVzb2x2ZShmKCkpfWNhdGNoKGEpe24ucmVqZWN0KGEpLGUoYSl9ZmluYWxseXtkZWxldGUgZ1txLiQkdGltZW91dElkXX1tfHxiLiRhcHBseSgpfSxsKTtxLiQkdGltZW91dElkPWw7Z1tsXT1uO3JldHVybiBxfXZhciBnPXt9O2YuY2FuY2VsPWZ1bmN0aW9uKGIpe3JldHVybiBiJiZiLiQkdGltZW91dElkIGluIGc/KGdbYi4kJHRpbWVvdXRJZF0ucmVqZWN0KFwiY2FuY2VsZWRcIiksZGVsZXRlIGdbYi4kJHRpbWVvdXRJZF0sYS5kZWZlci5jYW5jZWwoYi4kJHRpbWVvdXRJZCkpOiExfTtyZXR1cm4gZn1dfWZ1bmN0aW9uIEJhKGIpe1JhJiYoWi5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsYiksYj1aLmhyZWYpO1xuWi5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsYik7cmV0dXJue2hyZWY6Wi5ocmVmLHByb3RvY29sOloucHJvdG9jb2w/Wi5wcm90b2NvbC5yZXBsYWNlKC86JC8sXCJcIik6XCJcIixob3N0OlouaG9zdCxzZWFyY2g6Wi5zZWFyY2g/Wi5zZWFyY2gucmVwbGFjZSgvXlxcPy8sXCJcIik6XCJcIixoYXNoOlouaGFzaD9aLmhhc2gucmVwbGFjZSgvXiMvLFwiXCIpOlwiXCIsaG9zdG5hbWU6Wi5ob3N0bmFtZSxwb3J0OloucG9ydCxwYXRobmFtZTpcIi9cIj09PVoucGF0aG5hbWUuY2hhckF0KDApP1oucGF0aG5hbWU6XCIvXCIrWi5wYXRobmFtZX19ZnVuY3Rpb24gJGMoYil7Yj1GKGIpP0JhKGIpOmI7cmV0dXJuIGIucHJvdG9jb2w9PT1pZC5wcm90b2NvbCYmYi5ob3N0PT09aWQuaG9zdH1mdW5jdGlvbiBaZSgpe3RoaXMuJGdldD1lYShNKX1mdW5jdGlvbiBFYyhiKXtmdW5jdGlvbiBhKGMsZCl7aWYoSShjKSl7dmFyIGU9e307cyhjLGZ1bmN0aW9uKGIsYyl7ZVtjXT1hKGMsYil9KTtyZXR1cm4gZX1yZXR1cm4gYi5mYWN0b3J5KGMrXG5cIkZpbHRlclwiLGQpfXRoaXMucmVnaXN0ZXI9YTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBhLmdldChiK1wiRmlsdGVyXCIpfX1dO2EoXCJjdXJyZW5jeVwiLGpkKTthKFwiZGF0ZVwiLGtkKTthKFwiZmlsdGVyXCIsRGYpO2EoXCJqc29uXCIsRWYpO2EoXCJsaW1pdFRvXCIsRmYpO2EoXCJsb3dlcmNhc2VcIixHZik7YShcIm51bWJlclwiLGxkKTthKFwib3JkZXJCeVwiLG1kKTthKFwidXBwZXJjYXNlXCIsSGYpfWZ1bmN0aW9uIERmKCl7cmV0dXJuIGZ1bmN0aW9uKGIsYSxjKXtpZighSChiKSlyZXR1cm4gYjt2YXIgZDtzd2l0Y2godHlwZW9mIGEpe2Nhc2UgXCJmdW5jdGlvblwiOmJyZWFrO2Nhc2UgXCJib29sZWFuXCI6Y2FzZSBcIm51bWJlclwiOmNhc2UgXCJzdHJpbmdcIjpkPSEwO2Nhc2UgXCJvYmplY3RcIjphPUlmKGEsYyxkKTticmVhaztkZWZhdWx0OnJldHVybiBifXJldHVybiBiLmZpbHRlcihhKX19ZnVuY3Rpb24gSWYoYixhLGMpe3ZhciBkPUkoYikmJlwiJFwiaW5cbmI7ITA9PT1hP2E9Z2E6RyhhKXx8KGE9ZnVuY3Rpb24oYSxiKXtpZihJKGEpfHxJKGIpKXJldHVybiExO2E9UShcIlwiK2EpO2I9UShcIlwiK2IpO3JldHVybi0xIT09YS5pbmRleE9mKGIpfSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBkJiYhSShlKT9JYShlLGIuJCxhLCExKTpJYShlLGIsYSxjKX19ZnVuY3Rpb24gSWEoYixhLGMsZCxlKXt2YXIgZj10eXBlb2YgYixnPXR5cGVvZiBhO2lmKFwic3RyaW5nXCI9PT1nJiZcIiFcIj09PWEuY2hhckF0KDApKXJldHVybiFJYShiLGEuc3Vic3RyaW5nKDEpLGMsZCk7aWYoSChiKSlyZXR1cm4gYi5zb21lKGZ1bmN0aW9uKGIpe3JldHVybiBJYShiLGEsYyxkKX0pO3N3aXRjaChmKXtjYXNlIFwib2JqZWN0XCI6dmFyIGg7aWYoZCl7Zm9yKGggaW4gYilpZihcIiRcIiE9PWguY2hhckF0KDApJiZJYShiW2hdLGEsYywhMCkpcmV0dXJuITA7cmV0dXJuIGU/ITE6SWEoYixhLGMsITEpfWlmKFwib2JqZWN0XCI9PT1nKXtmb3IoaCBpbiBhKWlmKGU9YVtoXSwhRyhlKSYmXG4oZj1cIiRcIj09PWgsIUlhKGY/YjpiW2hdLGUsYyxmLGYpKSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4gYyhiLGEpO2Nhc2UgXCJmdW5jdGlvblwiOnJldHVybiExO2RlZmF1bHQ6cmV0dXJuIGMoYixhKX19ZnVuY3Rpb24gamQoYil7dmFyIGE9Yi5OVU1CRVJfRk9STUFUUztyZXR1cm4gZnVuY3Rpb24oYixkLGUpe0IoZCkmJihkPWEuQ1VSUkVOQ1lfU1lNKTtCKGUpJiYoZT1hLlBBVFRFUk5TWzFdLm1heEZyYWMpO3JldHVybiBudWxsPT1iP2I6bmQoYixhLlBBVFRFUk5TWzFdLGEuR1JPVVBfU0VQLGEuREVDSU1BTF9TRVAsZSkucmVwbGFjZSgvXFx1MDBBNC9nLGQpfX1mdW5jdGlvbiBsZChiKXt2YXIgYT1iLk5VTUJFUl9GT1JNQVRTO3JldHVybiBmdW5jdGlvbihiLGQpe3JldHVybiBudWxsPT1iP2I6bmQoYixhLlBBVFRFUk5TWzBdLGEuR1JPVVBfU0VQLGEuREVDSU1BTF9TRVAsZCl9fWZ1bmN0aW9uIG5kKGIsYSxjLGQsZSl7aWYoIWlzRmluaXRlKGIpfHxJKGIpKXJldHVyblwiXCI7dmFyIGY9XG4wPmI7Yj1NYXRoLmFicyhiKTt2YXIgZz1iK1wiXCIsaD1cIlwiLGw9W10saz0hMTtpZigtMSE9PWcuaW5kZXhPZihcImVcIikpe3ZhciBtPWcubWF0Y2goLyhbXFxkXFwuXSspZSgtPykoXFxkKykvKTttJiZcIi1cIj09bVsyXSYmbVszXT5lKzE/Yj0wOihoPWcsaz0hMCl9aWYoaykwPGUmJjE+YiYmKGg9Yi50b0ZpeGVkKGUpLGI9cGFyc2VGbG9hdChoKSk7ZWxzZXtnPShnLnNwbGl0KG9kKVsxXXx8XCJcIikubGVuZ3RoO0IoZSkmJihlPU1hdGgubWluKE1hdGgubWF4KGEubWluRnJhYyxnKSxhLm1heEZyYWMpKTtiPSsoTWF0aC5yb3VuZCgrKGIudG9TdHJpbmcoKStcImVcIitlKSkudG9TdHJpbmcoKStcImVcIistZSk7dmFyIGc9KFwiXCIrYikuc3BsaXQob2QpLGs9Z1swXSxnPWdbMV18fFwiXCIsbj0wLHE9YS5sZ1NpemUsdT1hLmdTaXplO2lmKGsubGVuZ3RoPj1xK3UpZm9yKG49ay5sZW5ndGgtcSxtPTA7bTxuO20rKykwPT09KG4tbSkldSYmMCE9PW0mJihoKz1jKSxoKz1rLmNoYXJBdChtKTtmb3IobT1uO208ay5sZW5ndGg7bSsrKTA9PT1cbihrLmxlbmd0aC1tKSVxJiYwIT09bSYmKGgrPWMpLGgrPWsuY2hhckF0KG0pO2Zvcig7Zy5sZW5ndGg8ZTspZys9XCIwXCI7ZSYmXCIwXCIhPT1lJiYoaCs9ZCtnLnN1YnN0cigwLGUpKX0wPT09YiYmKGY9ITEpO2wucHVzaChmP2EubmVnUHJlOmEucG9zUHJlLGgsZj9hLm5lZ1N1ZjphLnBvc1N1Zik7cmV0dXJuIGwuam9pbihcIlwiKX1mdW5jdGlvbiBKYihiLGEsYyl7dmFyIGQ9XCJcIjswPmImJihkPVwiLVwiLGI9LWIpO2ZvcihiPVwiXCIrYjtiLmxlbmd0aDxhOyliPVwiMFwiK2I7YyYmKGI9Yi5zdWJzdHIoYi5sZW5ndGgtYSkpO3JldHVybiBkK2J9ZnVuY3Rpb24gJChiLGEsYyxkKXtjPWN8fDA7cmV0dXJuIGZ1bmN0aW9uKGUpe2U9ZVtcImdldFwiK2JdKCk7aWYoMDxjfHxlPi1jKWUrPWM7MD09PWUmJi0xMj09YyYmKGU9MTIpO3JldHVybiBKYihlLGEsZCl9fWZ1bmN0aW9uIEtiKGIsYSl7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dmFyIGU9Y1tcImdldFwiK2JdKCksZj12YihhP1wiU0hPUlRcIitiOmIpO3JldHVybiBkW2ZdW2VdfX1cbmZ1bmN0aW9uIHBkKGIpe3ZhciBhPShuZXcgRGF0ZShiLDAsMSkpLmdldERheSgpO3JldHVybiBuZXcgRGF0ZShiLDAsKDQ+PWE/NToxMiktYSl9ZnVuY3Rpb24gcWQoYil7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPXBkKGEuZ2V0RnVsbFllYXIoKSk7YT0rbmV3IERhdGUoYS5nZXRGdWxsWWVhcigpLGEuZ2V0TW9udGgoKSxhLmdldERhdGUoKSsoNC1hLmdldERheSgpKSktK2M7YT0xK01hdGgucm91bmQoYS82MDQ4RTUpO3JldHVybiBKYihhLGIpfX1mdW5jdGlvbiBrZChiKXtmdW5jdGlvbiBhKGEpe3ZhciBiO2lmKGI9YS5tYXRjaChjKSl7YT1uZXcgRGF0ZSgwKTt2YXIgZj0wLGc9MCxoPWJbOF0/YS5zZXRVVENGdWxsWWVhcjphLnNldEZ1bGxZZWFyLGw9Yls4XT9hLnNldFVUQ0hvdXJzOmEuc2V0SG91cnM7Yls5XSYmKGY9YmEoYls5XStiWzEwXSksZz1iYShiWzldK2JbMTFdKSk7aC5jYWxsKGEsYmEoYlsxXSksYmEoYlsyXSktMSxiYShiWzNdKSk7Zj1iYShiWzRdfHwwKS1mO1xuZz1iYShiWzVdfHwwKS1nO2g9YmEoYls2XXx8MCk7Yj1NYXRoLnJvdW5kKDFFMypwYXJzZUZsb2F0KFwiMC5cIisoYls3XXx8MCkpKTtsLmNhbGwoYSxmLGcsaCxiKX1yZXR1cm4gYX12YXIgYz0vXihcXGR7NH0pLT8oXFxkXFxkKS0/KFxcZFxcZCkoPzpUKFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86Oj8oXFxkXFxkKSg/OlxcLihcXGQrKSk/KT8pPyhafChbKy1dKShcXGRcXGQpOj8oXFxkXFxkKSk/KT8kLztyZXR1cm4gZnVuY3Rpb24oYyxlLGYpe3ZhciBnPVwiXCIsaD1bXSxsLGs7ZT1lfHxcIm1lZGl1bURhdGVcIjtlPWIuREFURVRJTUVfRk9STUFUU1tlXXx8ZTtGKGMpJiYoYz1KZi50ZXN0KGMpP2JhKGMpOmEoYykpO1YoYykmJihjPW5ldyBEYXRlKGMpKTtpZighcWEoYykpcmV0dXJuIGM7Zm9yKDtlOykoaz1LZi5leGVjKGUpKT8oaD1ZYShoLGssMSksZT1oLnBvcCgpKTooaC5wdXNoKGUpLGU9bnVsbCk7ZiYmXCJVVENcIj09PWYmJihjPW5ldyBEYXRlKGMuZ2V0VGltZSgpKSxjLnNldE1pbnV0ZXMoYy5nZXRNaW51dGVzKCkrXG5jLmdldFRpbWV6b25lT2Zmc2V0KCkpKTtzKGgsZnVuY3Rpb24oYSl7bD1MZlthXTtnKz1sP2woYyxiLkRBVEVUSU1FX0ZPUk1BVFMpOmEucmVwbGFjZSgvKF4nfCckKS9nLFwiXCIpLnJlcGxhY2UoLycnL2csXCInXCIpfSk7cmV0dXJuIGd9fWZ1bmN0aW9uIEVmKCl7cmV0dXJuIGZ1bmN0aW9uKGIsYSl7QihhKSYmKGE9Mik7cmV0dXJuICRhKGIsYSl9fWZ1bmN0aW9uIEZmKCl7cmV0dXJuIGZ1bmN0aW9uKGIsYSl7VihiKSYmKGI9Yi50b1N0cmluZygpKTtyZXR1cm4gSChiKXx8RihiKT8oYT1JbmZpbml0eT09PU1hdGguYWJzKE51bWJlcihhKSk/TnVtYmVyKGEpOmJhKGEpKT8wPGE/Yi5zbGljZSgwLGEpOmIuc2xpY2UoYSk6RihiKT9cIlwiOltdOmJ9fWZ1bmN0aW9uIG1kKGIpe3JldHVybiBmdW5jdGlvbihhLGMsZCl7ZnVuY3Rpb24gZShhLGIpe3JldHVybiBiP2Z1bmN0aW9uKGIsYyl7cmV0dXJuIGEoYyxiKX06YX1mdW5jdGlvbiBmKGEpe3N3aXRjaCh0eXBlb2YgYSl7Y2FzZSBcIm51bWJlclwiOmNhc2UgXCJib29sZWFuXCI6Y2FzZSBcInN0cmluZ1wiOnJldHVybiEwO1xuZGVmYXVsdDpyZXR1cm4hMX19ZnVuY3Rpb24gZyhhKXtyZXR1cm4gbnVsbD09PWE/XCJudWxsXCI6XCJmdW5jdGlvblwiPT09dHlwZW9mIGEudmFsdWVPZiYmKGE9YS52YWx1ZU9mKCksZihhKSl8fFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhLnRvU3RyaW5nJiYoYT1hLnRvU3RyaW5nKCksZihhKSk/YTpcIlwifWZ1bmN0aW9uIGgoYSxiKXt2YXIgYz10eXBlb2YgYSxkPXR5cGVvZiBiO2M9PT1kJiZcIm9iamVjdFwiPT09YyYmKGE9ZyhhKSxiPWcoYikpO3JldHVybiBjPT09ZD8oXCJzdHJpbmdcIj09PWMmJihhPWEudG9Mb3dlckNhc2UoKSxiPWIudG9Mb3dlckNhc2UoKSksYT09PWI/MDphPGI/LTE6MSk6YzxkPy0xOjF9aWYoIVRhKGEpKXJldHVybiBhO2M9SChjKT9jOltjXTswPT09Yy5sZW5ndGgmJihjPVtcIitcIl0pO2M9Yy5tYXAoZnVuY3Rpb24oYSl7dmFyIGM9ITEsZD1hfHxwYTtpZihGKGEpKXtpZihcIitcIj09YS5jaGFyQXQoMCl8fFwiLVwiPT1hLmNoYXJBdCgwKSljPVwiLVwiPT1hLmNoYXJBdCgwKSxhPWEuc3Vic3RyaW5nKDEpO1xuaWYoXCJcIj09PWEpcmV0dXJuIGUoaCxjKTtkPWIoYSk7aWYoZC5jb25zdGFudCl7dmFyIGY9ZCgpO3JldHVybiBlKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGgoYVtmXSxiW2ZdKX0sYyl9fXJldHVybiBlKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGgoZChhKSxkKGIpKX0sYyl9KTtyZXR1cm4gWmEuY2FsbChhKS5zb3J0KGUoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXShhLGIpO2lmKDAhPT1lKXJldHVybiBlfXJldHVybiAwfSxkKSl9fWZ1bmN0aW9uIEphKGIpe0coYikmJihiPXtsaW5rOmJ9KTtiLnJlc3RyaWN0PWIucmVzdHJpY3R8fFwiQUNcIjtyZXR1cm4gZWEoYil9ZnVuY3Rpb24gcmQoYixhLGMsZCxlKXt2YXIgZj10aGlzLGc9W10saD1mLiQkcGFyZW50Rm9ybT1iLnBhcmVudCgpLmNvbnRyb2xsZXIoXCJmb3JtXCIpfHxMYjtmLiRlcnJvcj17fTtmLiQkc3VjY2Vzcz17fTtmLiRwZW5kaW5nPXQ7Zi4kbmFtZT1lKGEubmFtZXx8YS5uZ0Zvcm18fFxuXCJcIikoYyk7Zi4kZGlydHk9ITE7Zi4kcHJpc3RpbmU9ITA7Zi4kdmFsaWQ9ITA7Zi4kaW52YWxpZD0hMTtmLiRzdWJtaXR0ZWQ9ITE7aC4kYWRkQ29udHJvbChmKTtmLiRyb2xsYmFja1ZpZXdWYWx1ZT1mdW5jdGlvbigpe3MoZyxmdW5jdGlvbihhKXthLiRyb2xsYmFja1ZpZXdWYWx1ZSgpfSl9O2YuJGNvbW1pdFZpZXdWYWx1ZT1mdW5jdGlvbigpe3MoZyxmdW5jdGlvbihhKXthLiRjb21taXRWaWV3VmFsdWUoKX0pfTtmLiRhZGRDb250cm9sPWZ1bmN0aW9uKGEpe01hKGEuJG5hbWUsXCJpbnB1dFwiKTtnLnB1c2goYSk7YS4kbmFtZSYmKGZbYS4kbmFtZV09YSl9O2YuJCRyZW5hbWVDb250cm9sPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS4kbmFtZTtmW2NdPT09YSYmZGVsZXRlIGZbY107ZltiXT1hO2EuJG5hbWU9Yn07Zi4kcmVtb3ZlQ29udHJvbD1mdW5jdGlvbihhKXthLiRuYW1lJiZmW2EuJG5hbWVdPT09YSYmZGVsZXRlIGZbYS4kbmFtZV07cyhmLiRwZW5kaW5nLGZ1bmN0aW9uKGIsYyl7Zi4kc2V0VmFsaWRpdHkoYyxcbm51bGwsYSl9KTtzKGYuJGVycm9yLGZ1bmN0aW9uKGIsYyl7Zi4kc2V0VmFsaWRpdHkoYyxudWxsLGEpfSk7cyhmLiQkc3VjY2VzcyxmdW5jdGlvbihiLGMpe2YuJHNldFZhbGlkaXR5KGMsbnVsbCxhKX0pO1hhKGcsYSl9O3NkKHtjdHJsOnRoaXMsJGVsZW1lbnQ6YixzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWFbYl07ZD8tMT09PWQuaW5kZXhPZihjKSYmZC5wdXNoKGMpOmFbYl09W2NdfSx1bnNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YVtiXTtkJiYoWGEoZCxjKSwwPT09ZC5sZW5ndGgmJmRlbGV0ZSBhW2JdKX0scGFyZW50Rm9ybTpoLCRhbmltYXRlOmR9KTtmLiRzZXREaXJ0eT1mdW5jdGlvbigpe2QucmVtb3ZlQ2xhc3MoYixTYSk7ZC5hZGRDbGFzcyhiLE1iKTtmLiRkaXJ0eT0hMDtmLiRwcmlzdGluZT0hMTtoLiRzZXREaXJ0eSgpfTtmLiRzZXRQcmlzdGluZT1mdW5jdGlvbigpe2Quc2V0Q2xhc3MoYixTYSxNYitcIiBuZy1zdWJtaXR0ZWRcIik7Zi4kZGlydHk9ITE7Zi4kcHJpc3RpbmU9XG4hMDtmLiRzdWJtaXR0ZWQ9ITE7cyhnLGZ1bmN0aW9uKGEpe2EuJHNldFByaXN0aW5lKCl9KX07Zi4kc2V0VW50b3VjaGVkPWZ1bmN0aW9uKCl7cyhnLGZ1bmN0aW9uKGEpe2EuJHNldFVudG91Y2hlZCgpfSl9O2YuJHNldFN1Ym1pdHRlZD1mdW5jdGlvbigpe2QuYWRkQ2xhc3MoYixcIm5nLXN1Ym1pdHRlZFwiKTtmLiRzdWJtaXR0ZWQ9ITA7aC4kc2V0U3VibWl0dGVkKCl9fWZ1bmN0aW9uIGljKGIpe2IuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gYi4kaXNFbXB0eShhKT9hOmEudG9TdHJpbmcoKX0pfWZ1bmN0aW9uIGpiKGIsYSxjLGQsZSxmKXt2YXIgZz1RKGFbMF0udHlwZSk7aWYoIWUuYW5kcm9pZCl7dmFyIGg9ITE7YS5vbihcImNvbXBvc2l0aW9uc3RhcnRcIixmdW5jdGlvbihhKXtoPSEwfSk7YS5vbihcImNvbXBvc2l0aW9uZW5kXCIsZnVuY3Rpb24oKXtoPSExO2woKX0pfXZhciBsPWZ1bmN0aW9uKGIpe2smJihmLmRlZmVyLmNhbmNlbChrKSxrPW51bGwpO2lmKCFoKXt2YXIgZT1cbmEudmFsKCk7Yj1iJiZiLnR5cGU7XCJwYXNzd29yZFwiPT09Z3x8Yy5uZ1RyaW0mJlwiZmFsc2VcIj09PWMubmdUcmltfHwoZT1VKGUpKTsoZC4kdmlld1ZhbHVlIT09ZXx8XCJcIj09PWUmJmQuJCRoYXNOYXRpdmVWYWxpZGF0b3JzKSYmZC4kc2V0Vmlld1ZhbHVlKGUsYil9fTtpZihlLmhhc0V2ZW50KFwiaW5wdXRcIikpYS5vbihcImlucHV0XCIsbCk7ZWxzZXt2YXIgayxtPWZ1bmN0aW9uKGEsYixjKXtrfHwoaz1mLmRlZmVyKGZ1bmN0aW9uKCl7az1udWxsO2ImJmIudmFsdWU9PT1jfHxsKGEpfSkpfTthLm9uKFwia2V5ZG93blwiLGZ1bmN0aW9uKGEpe3ZhciBiPWEua2V5Q29kZTs5MT09PWJ8fDE1PGImJjE5PmJ8fDM3PD1iJiY0MD49Ynx8bShhLHRoaXMsdGhpcy52YWx1ZSl9KTtpZihlLmhhc0V2ZW50KFwicGFzdGVcIikpYS5vbihcInBhc3RlIGN1dFwiLG0pfWEub24oXCJjaGFuZ2VcIixsKTtkLiRyZW5kZXI9ZnVuY3Rpb24oKXthLnZhbChkLiRpc0VtcHR5KGQuJHZpZXdWYWx1ZSk/XCJcIjpkLiR2aWV3VmFsdWUpfX1cbmZ1bmN0aW9uIE5iKGIsYSl7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dmFyIGUsZjtpZihxYShjKSlyZXR1cm4gYztpZihGKGMpKXsnXCInPT1jLmNoYXJBdCgwKSYmJ1wiJz09Yy5jaGFyQXQoYy5sZW5ndGgtMSkmJihjPWMuc3Vic3RyaW5nKDEsYy5sZW5ndGgtMSkpO2lmKE1mLnRlc3QoYykpcmV0dXJuIG5ldyBEYXRlKGMpO2IubGFzdEluZGV4PTA7aWYoZT1iLmV4ZWMoYykpcmV0dXJuIGUuc2hpZnQoKSxmPWQ/e3l5eXk6ZC5nZXRGdWxsWWVhcigpLE1NOmQuZ2V0TW9udGgoKSsxLGRkOmQuZ2V0RGF0ZSgpLEhIOmQuZ2V0SG91cnMoKSxtbTpkLmdldE1pbnV0ZXMoKSxzczpkLmdldFNlY29uZHMoKSxzc3M6ZC5nZXRNaWxsaXNlY29uZHMoKS8xRTN9Ont5eXl5OjE5NzAsTU06MSxkZDoxLEhIOjAsbW06MCxzczowLHNzczowfSxzKGUsZnVuY3Rpb24oYixjKXtjPGEubGVuZ3RoJiYoZlthW2NdXT0rYil9KSxuZXcgRGF0ZShmLnl5eXksZi5NTS0xLGYuZGQsZi5ISCxmLm1tLGYuc3N8fDAsXG4xRTMqZi5zc3N8fDApfXJldHVybiBOYU59fWZ1bmN0aW9uIGtiKGIsYSxjLGQpe3JldHVybiBmdW5jdGlvbihlLGYsZyxoLGwsayxtKXtmdW5jdGlvbiBuKGEpe3JldHVybiBhJiYhKGEuZ2V0VGltZSYmYS5nZXRUaW1lKCkhPT1hLmdldFRpbWUoKSl9ZnVuY3Rpb24gcShhKXtyZXR1cm4geShhKT9xYShhKT9hOmMoYSk6dH10ZChlLGYsZyxoKTtqYihlLGYsZyxoLGwsayk7dmFyIHU9aCYmaC4kb3B0aW9ucyYmaC4kb3B0aW9ucy50aW1lem9uZSxyO2guJCRwYXJzZXJOYW1lPWI7aC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGIpe3JldHVybiBoLiRpc0VtcHR5KGIpP251bGw6YS50ZXN0KGIpPyhiPWMoYixyKSxcIlVUQ1wiPT09dSYmYi5zZXRNaW51dGVzKGIuZ2V0TWludXRlcygpLWIuZ2V0VGltZXpvbmVPZmZzZXQoKSksYik6dH0pO2guJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtpZihhJiYhcWEoYSkpdGhyb3cgT2IoXCJkYXRlZm10XCIsYSk7aWYobihhKSl7aWYoKHI9YSkmJlwiVVRDXCI9PT1cbnUpe3ZhciBiPTZFNCpyLmdldFRpbWV6b25lT2Zmc2V0KCk7cj1uZXcgRGF0ZShyLmdldFRpbWUoKStiKX1yZXR1cm4gbShcImRhdGVcIikoYSxkLHUpfXI9bnVsbDtyZXR1cm5cIlwifSk7aWYoeShnLm1pbil8fGcubmdNaW4pe3ZhciBzO2guJHZhbGlkYXRvcnMubWluPWZ1bmN0aW9uKGEpe3JldHVybiFuKGEpfHxCKHMpfHxjKGEpPj1zfTtnLiRvYnNlcnZlKFwibWluXCIsZnVuY3Rpb24oYSl7cz1xKGEpO2guJHZhbGlkYXRlKCl9KX1pZih5KGcubWF4KXx8Zy5uZ01heCl7dmFyIHA7aC4kdmFsaWRhdG9ycy5tYXg9ZnVuY3Rpb24oYSl7cmV0dXJuIW4oYSl8fEIocCl8fGMoYSk8PXB9O2cuJG9ic2VydmUoXCJtYXhcIixmdW5jdGlvbihhKXtwPXEoYSk7aC4kdmFsaWRhdGUoKX0pfX19ZnVuY3Rpb24gdGQoYixhLGMsZCl7KGQuJCRoYXNOYXRpdmVWYWxpZGF0b3JzPUkoYVswXS52YWxpZGl0eSkpJiZkLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24oYil7dmFyIGM9YS5wcm9wKFwidmFsaWRpdHlcIil8fHt9O1xucmV0dXJuIGMuYmFkSW5wdXQmJiFjLnR5cGVNaXNtYXRjaD90OmJ9KX1mdW5jdGlvbiB1ZChiLGEsYyxkLGUpe2lmKHkoZCkpe2I9YihkKTtpZighYi5jb25zdGFudCl0aHJvdyBTKFwibmdNb2RlbFwiKShcImNvbnN0ZXhwclwiLGMsZCk7cmV0dXJuIGIoYSl9cmV0dXJuIGV9ZnVuY3Rpb24gamMoYixhKXtiPVwibmdDbGFzc1wiK2I7cmV0dXJuW1wiJGFuaW1hdGVcIixmdW5jdGlvbihjKXtmdW5jdGlvbiBkKGEsYil7dmFyIGM9W10sZD0wO2E6Zm9yKDtkPGEubGVuZ3RoO2QrKyl7Zm9yKHZhciBlPWFbZF0sbT0wO208Yi5sZW5ndGg7bSsrKWlmKGU9PWJbbV0pY29udGludWUgYTtjLnB1c2goZSl9cmV0dXJuIGN9ZnVuY3Rpb24gZShhKXtpZighSChhKSl7aWYoRihhKSlyZXR1cm4gYS5zcGxpdChcIiBcIik7aWYoSShhKSl7dmFyIGI9W107cyhhLGZ1bmN0aW9uKGEsYyl7YSYmKGI9Yi5jb25jYXQoYy5zcGxpdChcIiBcIikpKX0pO3JldHVybiBifX1yZXR1cm4gYX1yZXR1cm57cmVzdHJpY3Q6XCJBQ1wiLGxpbms6ZnVuY3Rpb24oZixcbmcsaCl7ZnVuY3Rpb24gbChhLGIpe3ZhciBjPWcuZGF0YShcIiRjbGFzc0NvdW50c1wiKXx8e30sZD1bXTtzKGEsZnVuY3Rpb24oYSl7aWYoMDxifHxjW2FdKWNbYV09KGNbYV18fDApK2IsY1thXT09PSsoMDxiKSYmZC5wdXNoKGEpfSk7Zy5kYXRhKFwiJGNsYXNzQ291bnRzXCIsYyk7cmV0dXJuIGQuam9pbihcIiBcIil9ZnVuY3Rpb24gayhiKXtpZighMD09PWF8fGYuJGluZGV4JTI9PT1hKXt2YXIgaz1lKGJ8fFtdKTtpZighbSl7dmFyIHU9bChrLDEpO2guJGFkZENsYXNzKHUpfWVsc2UgaWYoIWdhKGIsbSkpe3ZhciByPWUobSksdT1kKGssciksaz1kKHIsayksdT1sKHUsMSksaz1sKGssLTEpO3UmJnUubGVuZ3RoJiZjLmFkZENsYXNzKGcsdSk7ayYmay5sZW5ndGgmJmMucmVtb3ZlQ2xhc3MoZyxrKX19bT1yYShiKX12YXIgbTtmLiR3YXRjaChoW2JdLGssITApO2guJG9ic2VydmUoXCJjbGFzc1wiLGZ1bmN0aW9uKGEpe2soZi4kZXZhbChoW2JdKSl9KTtcIm5nQ2xhc3NcIiE9PWImJmYuJHdhdGNoKFwiJGluZGV4XCIsXG5mdW5jdGlvbihjLGQpe3ZhciBnPWMmMTtpZihnIT09KGQmMSkpe3ZhciBrPWUoZi4kZXZhbChoW2JdKSk7Zz09PWE/KGc9bChrLDEpLGguJGFkZENsYXNzKGcpKTooZz1sKGssLTEpLGguJHJlbW92ZUNsYXNzKGcpKX19KX19fV19ZnVuY3Rpb24gc2QoYil7ZnVuY3Rpb24gYShhLGIpe2ImJiFmW2FdPyhrLmFkZENsYXNzKGUsYSksZlthXT0hMCk6IWImJmZbYV0mJihrLnJlbW92ZUNsYXNzKGUsYSksZlthXT0hMSl9ZnVuY3Rpb24gYyhiLGMpe2I9Yj9cIi1cIit1YyhiLFwiLVwiKTpcIlwiO2EobGIrYiwhMD09PWMpO2EodmQrYiwhMT09PWMpfXZhciBkPWIuY3RybCxlPWIuJGVsZW1lbnQsZj17fSxnPWIuc2V0LGg9Yi51bnNldCxsPWIucGFyZW50Rm9ybSxrPWIuJGFuaW1hdGU7Zlt2ZF09IShmW2xiXT1lLmhhc0NsYXNzKGxiKSk7ZC4kc2V0VmFsaWRpdHk9ZnVuY3Rpb24oYixlLGYpe2U9PT10PyhkLiRwZW5kaW5nfHwoZC4kcGVuZGluZz17fSksZyhkLiRwZW5kaW5nLGIsZikpOihkLiRwZW5kaW5nJiZcbmgoZC4kcGVuZGluZyxiLGYpLHdkKGQuJHBlbmRpbmcpJiYoZC4kcGVuZGluZz10KSk7V2EoZSk/ZT8oaChkLiRlcnJvcixiLGYpLGcoZC4kJHN1Y2Nlc3MsYixmKSk6KGcoZC4kZXJyb3IsYixmKSxoKGQuJCRzdWNjZXNzLGIsZikpOihoKGQuJGVycm9yLGIsZiksaChkLiQkc3VjY2VzcyxiLGYpKTtkLiRwZW5kaW5nPyhhKHhkLCEwKSxkLiR2YWxpZD1kLiRpbnZhbGlkPXQsYyhcIlwiLG51bGwpKTooYSh4ZCwhMSksZC4kdmFsaWQ9d2QoZC4kZXJyb3IpLGQuJGludmFsaWQ9IWQuJHZhbGlkLGMoXCJcIixkLiR2YWxpZCkpO2U9ZC4kcGVuZGluZyYmZC4kcGVuZGluZ1tiXT90OmQuJGVycm9yW2JdPyExOmQuJCRzdWNjZXNzW2JdPyEwOm51bGw7YyhiLGUpO2wuJHNldFZhbGlkaXR5KGIsZSxkKX19ZnVuY3Rpb24gd2QoYil7aWYoYilmb3IodmFyIGEgaW4gYilyZXR1cm4hMTtyZXR1cm4hMH12YXIgTmY9L15cXC8oLispXFwvKFthLXpdKikkLyxRPWZ1bmN0aW9uKGIpe3JldHVybiBGKGIpP2IudG9Mb3dlckNhc2UoKTpcbmJ9LHNjPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksdmI9ZnVuY3Rpb24oYil7cmV0dXJuIEYoYik/Yi50b1VwcGVyQ2FzZSgpOmJ9LFJhLEQsc2EsWmE9W10uc2xpY2UscGY9W10uc3BsaWNlLE9mPVtdLnB1c2gsRGE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxLYT1TKFwibmdcIiksY2E9TS5hbmd1bGFyfHwoTS5hbmd1bGFyPXt9KSxjYixvYj0wO1JhPVkuZG9jdW1lbnRNb2RlO3ouJGluamVjdD1bXTtwYS4kaW5qZWN0PVtdO3ZhciBIPUFycmF5LmlzQXJyYXksVT1mdW5jdGlvbihiKXtyZXR1cm4gRihiKT9iLnRyaW0oKTpifSxnZD1mdW5jdGlvbihiKXtyZXR1cm4gYi5yZXBsYWNlKC8oWy0oKVxcW1xcXXt9Kz8qLiRcXF58LDojPCFcXFxcXSkvZyxcIlxcXFwkMVwiKS5yZXBsYWNlKC9cXHgwOC9nLFwiXFxcXHgwOFwiKX0sYmI9ZnVuY3Rpb24oKXtpZih5KGJiLmlzQWN0aXZlXykpcmV0dXJuIGJiLmlzQWN0aXZlXzt2YXIgYj0hKCFZLnF1ZXJ5U2VsZWN0b3IoXCJbbmctY3NwXVwiKSYmIVkucXVlcnlTZWxlY3RvcihcIltkYXRhLW5nLWNzcF1cIikpO1xuaWYoIWIpdHJ5e25ldyBGdW5jdGlvbihcIlwiKX1jYXRjaChhKXtiPSEwfXJldHVybiBiYi5pc0FjdGl2ZV89Yn0sc2I9W1wibmctXCIsXCJkYXRhLW5nLVwiLFwibmc6XCIsXCJ4LW5nLVwiXSxNZD0vW0EtWl0vZyx2Yz0hMSxSYixvYT0xLHFiPTMsUWQ9e2Z1bGw6XCIxLjMuMTNcIixtYWpvcjoxLG1pbm9yOjMsZG90OjEzLGNvZGVOYW1lOlwibWV0aWN1bG91cy1yaWZmbGVzaHVmZmxlXCJ9O1IuZXhwYW5kbz1cIm5nMzM5XCI7dmFyIEFiPVIuY2FjaGU9e30saGY9MTtSLl9kYXRhPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLmNhY2hlW2JbdGhpcy5leHBhbmRvXV18fHt9fTt2YXIgY2Y9LyhbXFw6XFwtXFxfXSsoLikpL2csZGY9L15tb3ooW0EtWl0pLyxQZj17bW91c2VsZWF2ZTpcIm1vdXNlb3V0XCIsbW91c2VlbnRlcjpcIm1vdXNlb3ZlclwifSxVYj1TKFwianFMaXRlXCIpLGdmPS9ePChcXHcrKVxccypcXC8/Pig/OjxcXC9cXDE+fCkkLyxUYj0vPHwmIz9cXHcrOy8sZWY9LzwoW1xcdzpdKykvLGZmPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6XSspW14+XSopXFwvPi9naSxcbmlhPXtvcHRpb246WzEsJzxzZWxlY3QgbXVsdGlwbGU9XCJtdWx0aXBsZVwiPicsXCI8L3NlbGVjdD5cIl0sdGhlYWQ6WzEsXCI8dGFibGU+XCIsXCI8L3RhYmxlPlwiXSxjb2w6WzIsXCI8dGFibGU+PGNvbGdyb3VwPlwiLFwiPC9jb2xncm91cD48L3RhYmxlPlwiXSx0cjpbMixcIjx0YWJsZT48dGJvZHk+XCIsXCI8L3Rib2R5PjwvdGFibGU+XCJdLHRkOlszLFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsXCI8L3RyPjwvdGJvZHk+PC90YWJsZT5cIl0sX2RlZmF1bHQ6WzAsXCJcIixcIlwiXX07aWEub3B0Z3JvdXA9aWEub3B0aW9uO2lhLnRib2R5PWlhLnRmb290PWlhLmNvbGdyb3VwPWlhLmNhcHRpb249aWEudGhlYWQ7aWEudGg9aWEudGQ7dmFyIExhPVIucHJvdG90eXBlPXtyZWFkeTpmdW5jdGlvbihiKXtmdW5jdGlvbiBhKCl7Y3x8KGM9ITAsYigpKX12YXIgYz0hMTtcImNvbXBsZXRlXCI9PT1ZLnJlYWR5U3RhdGU/c2V0VGltZW91dChhKToodGhpcy5vbihcIkRPTUNvbnRlbnRMb2FkZWRcIixhKSxSKE0pLm9uKFwibG9hZFwiLGEpKX0sXG50b1N0cmluZzpmdW5jdGlvbigpe3ZhciBiPVtdO3ModGhpcyxmdW5jdGlvbihhKXtiLnB1c2goXCJcIithKX0pO3JldHVyblwiW1wiK2Iuam9pbihcIiwgXCIpK1wiXVwifSxlcTpmdW5jdGlvbihiKXtyZXR1cm4gMDw9Yj9EKHRoaXNbYl0pOkQodGhpc1t0aGlzLmxlbmd0aCtiXSl9LGxlbmd0aDowLHB1c2g6T2Ysc29ydDpbXS5zb3J0LHNwbGljZTpbXS5zcGxpY2V9LEZiPXt9O3MoXCJtdWx0aXBsZSBzZWxlY3RlZCBjaGVja2VkIGRpc2FibGVkIHJlYWRPbmx5IHJlcXVpcmVkIG9wZW5cIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYil7RmJbUShiKV09Yn0pO3ZhciBOYz17fTtzKFwiaW5wdXQgc2VsZWN0IG9wdGlvbiB0ZXh0YXJlYSBidXR0b24gZm9ybSBkZXRhaWxzXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGIpe05jW2JdPSEwfSk7dmFyIE9jPXtuZ01pbmxlbmd0aDpcIm1pbmxlbmd0aFwiLG5nTWF4bGVuZ3RoOlwibWF4bGVuZ3RoXCIsbmdNaW46XCJtaW5cIixuZ01heDpcIm1heFwiLG5nUGF0dGVybjpcInBhdHRlcm5cIn07XG5zKHtkYXRhOldiLHJlbW92ZURhdGE6eWJ9LGZ1bmN0aW9uKGIsYSl7UlthXT1ifSk7cyh7ZGF0YTpXYixpbmhlcml0ZWREYXRhOkViLHNjb3BlOmZ1bmN0aW9uKGIpe3JldHVybiBELmRhdGEoYixcIiRzY29wZVwiKXx8RWIoYi5wYXJlbnROb2RlfHxiLFtcIiRpc29sYXRlU2NvcGVcIixcIiRzY29wZVwiXSl9LGlzb2xhdGVTY29wZTpmdW5jdGlvbihiKXtyZXR1cm4gRC5kYXRhKGIsXCIkaXNvbGF0ZVNjb3BlXCIpfHxELmRhdGEoYixcIiRpc29sYXRlU2NvcGVOb1RlbXBsYXRlXCIpfSxjb250cm9sbGVyOkpjLGluamVjdG9yOmZ1bmN0aW9uKGIpe3JldHVybiBFYihiLFwiJGluamVjdG9yXCIpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGIsYSl7Yi5yZW1vdmVBdHRyaWJ1dGUoYSl9LGhhc0NsYXNzOkJiLGNzczpmdW5jdGlvbihiLGEsYyl7YT1kYihhKTtpZih5KGMpKWIuc3R5bGVbYV09YztlbHNlIHJldHVybiBiLnN0eWxlW2FdfSxhdHRyOmZ1bmN0aW9uKGIsYSxjKXt2YXIgZD1RKGEpO2lmKEZiW2RdKWlmKHkoYykpYz9cbihiW2FdPSEwLGIuc2V0QXR0cmlidXRlKGEsZCkpOihiW2FdPSExLGIucmVtb3ZlQXR0cmlidXRlKGQpKTtlbHNlIHJldHVybiBiW2FdfHwoYi5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShhKXx8eikuc3BlY2lmaWVkP2Q6dDtlbHNlIGlmKHkoYykpYi5zZXRBdHRyaWJ1dGUoYSxjKTtlbHNlIGlmKGIuZ2V0QXR0cmlidXRlKXJldHVybiBiPWIuZ2V0QXR0cmlidXRlKGEsMiksbnVsbD09PWI/dDpifSxwcm9wOmZ1bmN0aW9uKGIsYSxjKXtpZih5KGMpKWJbYV09YztlbHNlIHJldHVybiBiW2FdfSx0ZXh0OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYihhLGIpe2lmKEIoYikpe3ZhciBkPWEubm9kZVR5cGU7cmV0dXJuIGQ9PT1vYXx8ZD09PXFiP2EudGV4dENvbnRlbnQ6XCJcIn1hLnRleHRDb250ZW50PWJ9Yi4kZHY9XCJcIjtyZXR1cm4gYn0oKSx2YWw6ZnVuY3Rpb24oYixhKXtpZihCKGEpKXtpZihiLm11bHRpcGxlJiZcInNlbGVjdFwiPT09dWEoYikpe3ZhciBjPVtdO3MoYi5vcHRpb25zLGZ1bmN0aW9uKGEpe2Euc2VsZWN0ZWQmJlxuYy5wdXNoKGEudmFsdWV8fGEudGV4dCl9KTtyZXR1cm4gMD09PWMubGVuZ3RoP251bGw6Y31yZXR1cm4gYi52YWx1ZX1iLnZhbHVlPWF9LGh0bWw6ZnVuY3Rpb24oYixhKXtpZihCKGEpKXJldHVybiBiLmlubmVySFRNTDt4YihiLCEwKTtiLmlubmVySFRNTD1hfSxlbXB0eTpLY30sZnVuY3Rpb24oYixhKXtSLnByb3RvdHlwZVthXT1mdW5jdGlvbihhLGQpe3ZhciBlLGYsZz10aGlzLmxlbmd0aDtpZihiIT09S2MmJigyPT1iLmxlbmd0aCYmYiE9PUJiJiZiIT09SmM/YTpkKT09PXQpe2lmKEkoYSkpe2ZvcihlPTA7ZTxnO2UrKylpZihiPT09V2IpYih0aGlzW2VdLGEpO2Vsc2UgZm9yKGYgaW4gYSliKHRoaXNbZV0sZixhW2ZdKTtyZXR1cm4gdGhpc31lPWIuJGR2O2c9ZT09PXQ/TWF0aC5taW4oZywxKTpnO2ZvcihmPTA7ZjxnO2YrKyl7dmFyIGg9Yih0aGlzW2ZdLGEsZCk7ZT1lP2UraDpofXJldHVybiBlfWZvcihlPTA7ZTxnO2UrKyliKHRoaXNbZV0sYSxkKTtyZXR1cm4gdGhpc319KTtcbnMoe3JlbW92ZURhdGE6eWIsb246ZnVuY3Rpb24gYShjLGQsZSxmKXtpZih5KGYpKXRocm93IFViKFwib25hcmdzXCIpO2lmKEZjKGMpKXt2YXIgZz16YihjLCEwKTtmPWcuZXZlbnRzO3ZhciBoPWcuaGFuZGxlO2h8fChoPWcuaGFuZGxlPWxmKGMsZikpO2Zvcih2YXIgZz0wPD1kLmluZGV4T2YoXCIgXCIpP2Quc3BsaXQoXCIgXCIpOltkXSxsPWcubGVuZ3RoO2wtLTspe2Q9Z1tsXTt2YXIgaz1mW2RdO2t8fChmW2RdPVtdLFwibW91c2VlbnRlclwiPT09ZHx8XCJtb3VzZWxlYXZlXCI9PT1kP2EoYyxQZltkXSxmdW5jdGlvbihhKXt2YXIgYz1hLnJlbGF0ZWRUYXJnZXQ7YyYmKGM9PT10aGlzfHx0aGlzLmNvbnRhaW5zKGMpKXx8aChhLGQpfSk6XCIkZGVzdHJveVwiIT09ZCYmYy5hZGRFdmVudExpc3RlbmVyKGQsaCwhMSksaz1mW2RdKTtrLnB1c2goZSl9fX0sb2ZmOkljLG9uZTpmdW5jdGlvbihhLGMsZCl7YT1EKGEpO2Eub24oYyxmdW5jdGlvbiBmKCl7YS5vZmYoYyxkKTthLm9mZihjLGYpfSk7YS5vbihjLFxuZCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKGEsYyl7dmFyIGQsZT1hLnBhcmVudE5vZGU7eGIoYSk7cyhuZXcgUihjKSxmdW5jdGlvbihjKXtkP2UuaW5zZXJ0QmVmb3JlKGMsZC5uZXh0U2libGluZyk6ZS5yZXBsYWNlQ2hpbGQoYyxhKTtkPWN9KX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7dmFyIGM9W107cyhhLmNoaWxkTm9kZXMsZnVuY3Rpb24oYSl7YS5ub2RlVHlwZT09PW9hJiZjLnB1c2goYSl9KTtyZXR1cm4gY30sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29udGVudERvY3VtZW50fHxhLmNoaWxkTm9kZXN8fFtdfSxhcHBlbmQ6ZnVuY3Rpb24oYSxjKXt2YXIgZD1hLm5vZGVUeXBlO2lmKGQ9PT1vYXx8MTE9PT1kKXtjPW5ldyBSKGMpO2Zvcih2YXIgZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKylhLmFwcGVuZENoaWxkKGNbZF0pfX0scHJlcGVuZDpmdW5jdGlvbihhLGMpe2lmKGEubm9kZVR5cGU9PT1vYSl7dmFyIGQ9YS5maXJzdENoaWxkO3MobmV3IFIoYyksZnVuY3Rpb24oYyl7YS5pbnNlcnRCZWZvcmUoYyxcbmQpfSl9fSx3cmFwOmZ1bmN0aW9uKGEsYyl7Yz1EKGMpLmVxKDApLmNsb25lKClbMF07dmFyIGQ9YS5wYXJlbnROb2RlO2QmJmQucmVwbGFjZUNoaWxkKGMsYSk7Yy5hcHBlbmRDaGlsZChhKX0scmVtb3ZlOkxjLGRldGFjaDpmdW5jdGlvbihhKXtMYyhhLCEwKX0sYWZ0ZXI6ZnVuY3Rpb24oYSxjKXt2YXIgZD1hLGU9YS5wYXJlbnROb2RlO2M9bmV3IFIoYyk7Zm9yKHZhciBmPTAsZz1jLmxlbmd0aDtmPGc7ZisrKXt2YXIgaD1jW2ZdO2UuaW5zZXJ0QmVmb3JlKGgsZC5uZXh0U2libGluZyk7ZD1ofX0sYWRkQ2xhc3M6RGIscmVtb3ZlQ2xhc3M6Q2IsdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxjLGQpe2MmJnMoYy5zcGxpdChcIiBcIiksZnVuY3Rpb24oYyl7dmFyIGY9ZDtCKGYpJiYoZj0hQmIoYSxjKSk7KGY/RGI6Q2IpKGEsYyl9KX0scGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybihhPWEucGFyZW50Tm9kZSkmJjExIT09YS5ub2RlVHlwZT9hOm51bGx9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubmV4dEVsZW1lbnRTaWJsaW5nfSxcbmZpbmQ6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYS5nZXRFbGVtZW50c0J5VGFnTmFtZT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGMpOltdfSxjbG9uZTpWYix0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGMsZCl7dmFyIGUsZixnPWMudHlwZXx8YyxoPXpiKGEpO2lmKGg9KGg9aCYmaC5ldmVudHMpJiZoW2ddKWU9e3ByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwfSxpc0RlZmF1bHRQcmV2ZW50ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMD09PXRoaXMuZGVmYXVsdFByZXZlbnRlZH0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9ITB9LGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOmZ1bmN0aW9uKCl7cmV0dXJuITA9PT10aGlzLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZH0sc3RvcFByb3BhZ2F0aW9uOnosdHlwZTpnLHRhcmdldDphfSxjLnR5cGUmJihlPXgoZSxcbmMpKSxjPXJhKGgpLGY9ZD9bZV0uY29uY2F0KGQpOltlXSxzKGMsZnVuY3Rpb24oYyl7ZS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpfHxjLmFwcGx5KGEsZil9KX19LGZ1bmN0aW9uKGEsYyl7Ui5wcm90b3R5cGVbY109ZnVuY3Rpb24oYyxlLGYpe2Zvcih2YXIgZyxoPTAsbD10aGlzLmxlbmd0aDtoPGw7aCsrKUIoZyk/KGc9YSh0aGlzW2hdLGMsZSxmKSx5KGcpJiYoZz1EKGcpKSk6SGMoZyxhKHRoaXNbaF0sYyxlLGYpKTtyZXR1cm4geShnKT9nOnRoaXN9O1IucHJvdG90eXBlLmJpbmQ9Ui5wcm90b3R5cGUub247Ui5wcm90b3R5cGUudW5iaW5kPVIucHJvdG90eXBlLm9mZn0pO2ViLnByb3RvdHlwZT17cHV0OmZ1bmN0aW9uKGEsYyl7dGhpc1tOYShhLHRoaXMubmV4dFVpZCldPWN9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1tOYShhLHRoaXMubmV4dFVpZCldfSxyZW1vdmU6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpc1thPU5hKGEsdGhpcy5uZXh0VWlkKV07ZGVsZXRlIHRoaXNbYV07XG5yZXR1cm4gY319O3ZhciBRYz0vXmZ1bmN0aW9uXFxzKlteXFwoXSpcXChcXHMqKFteXFwpXSopXFwpL20sUWY9LywvLFJmPS9eXFxzKihfPykoXFxTKz8pXFwxXFxzKiQvLFBjPS8oKFxcL1xcLy4qJCl8KFxcL1xcKltcXHNcXFNdKj9cXCpcXC8pKS9tZyxHYT1TKFwiJGluamVjdG9yXCIpO2FiLiQkYW5ub3RhdGU9ZnVuY3Rpb24oYSxjLGQpe3ZhciBlO2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKXtpZighKGU9YS4kaW5qZWN0KSl7ZT1bXTtpZihhLmxlbmd0aCl7aWYoYyl0aHJvdyBGKGQpJiZkfHwoZD1hLm5hbWV8fG1mKGEpKSxHYShcInN0cmljdGRpXCIsZCk7Yz1hLnRvU3RyaW5nKCkucmVwbGFjZShQYyxcIlwiKTtjPWMubWF0Y2goUWMpO3MoY1sxXS5zcGxpdChRZiksZnVuY3Rpb24oYSl7YS5yZXBsYWNlKFJmLGZ1bmN0aW9uKGEsYyxkKXtlLnB1c2goZCl9KX0pfWEuJGluamVjdD1lfX1lbHNlIEgoYSk/KGM9YS5sZW5ndGgtMSx0YihhW2NdLFwiZm5cIiksZT1hLnNsaWNlKDAsYykpOnRiKGEsXCJmblwiLCEwKTtyZXR1cm4gZX07XG52YXIgU2Y9UyhcIiRhbmltYXRlXCIpLENlPVtcIiRwcm92aWRlXCIsZnVuY3Rpb24oYSl7dGhpcy4kJHNlbGVjdG9ycz17fTt0aGlzLnJlZ2lzdGVyPWZ1bmN0aW9uKGMsZCl7dmFyIGU9YytcIi1hbmltYXRpb25cIjtpZihjJiZcIi5cIiE9Yy5jaGFyQXQoMCkpdGhyb3cgU2YoXCJub3Rjc2VsXCIsYyk7dGhpcy4kJHNlbGVjdG9yc1tjLnN1YnN0cigxKV09ZTthLmZhY3RvcnkoZSxkKX07dGhpcy5jbGFzc05hbWVGaWx0ZXI9ZnVuY3Rpb24oYSl7MT09PWFyZ3VtZW50cy5sZW5ndGgmJih0aGlzLiQkY2xhc3NOYW1lRmlsdGVyPWEgaW5zdGFuY2VvZiBSZWdFeHA/YTpudWxsKTtyZXR1cm4gdGhpcy4kJGNsYXNzTmFtZUZpbHRlcn07dGhpcy4kZ2V0PVtcIiQkcVwiLFwiJCRhc3luY0NhbGxiYWNrXCIsXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24oYSxkLGUpe2Z1bmN0aW9uIGYoZCl7dmFyIGYsZz1hLmRlZmVyKCk7Zy5wcm9taXNlLiQkY2FuY2VsRm49ZnVuY3Rpb24oKXtmJiZmKCl9O2UuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7Zj1cbmQoZnVuY3Rpb24oKXtnLnJlc29sdmUoKX0pfSk7cmV0dXJuIGcucHJvbWlzZX1mdW5jdGlvbiBnKGEsYyl7dmFyIGQ9W10sZT1bXSxmPWhhKCk7cygoYS5hdHRyKFwiY2xhc3NcIil8fFwiXCIpLnNwbGl0KC9cXHMrLyksZnVuY3Rpb24oYSl7ZlthXT0hMH0pO3MoYyxmdW5jdGlvbihhLGMpe3ZhciBnPWZbY107ITE9PT1hJiZnP2UucHVzaChjKTohMCE9PWF8fGd8fGQucHVzaChjKX0pO3JldHVybiAwPGQubGVuZ3RoK2UubGVuZ3RoJiZbZC5sZW5ndGg/ZDpudWxsLGUubGVuZ3RoP2U6bnVsbF19ZnVuY3Rpb24gaChhLGMsZCl7Zm9yKHZhciBlPTAsZj1jLmxlbmd0aDtlPGY7KytlKWFbY1tlXV09ZH1mdW5jdGlvbiBsKCl7bXx8KG09YS5kZWZlcigpLGQoZnVuY3Rpb24oKXttLnJlc29sdmUoKTttPW51bGx9KSk7cmV0dXJuIG0ucHJvbWlzZX1mdW5jdGlvbiBrKGEsYyl7aWYoY2EuaXNPYmplY3QoYykpe3ZhciBkPXgoYy5mcm9tfHx7fSxjLnRvfHx7fSk7YS5jc3MoZCl9fXZhciBtO3JldHVybnthbmltYXRlOmZ1bmN0aW9uKGEsXG5jLGQpe2soYSx7ZnJvbTpjLHRvOmR9KTtyZXR1cm4gbCgpfSxlbnRlcjpmdW5jdGlvbihhLGMsZCxlKXtrKGEsZSk7ZD9kLmFmdGVyKGEpOmMucHJlcGVuZChhKTtyZXR1cm4gbCgpfSxsZWF2ZTpmdW5jdGlvbihhLGMpe2EucmVtb3ZlKCk7cmV0dXJuIGwoKX0sbW92ZTpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gdGhpcy5lbnRlcihhLGMsZCxlKX0sYWRkQ2xhc3M6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiB0aGlzLnNldENsYXNzKGEsYyxbXSxkKX0sJCRhZGRDbGFzc0ltbWVkaWF0ZWx5OmZ1bmN0aW9uKGEsYyxkKXthPUQoYSk7Yz1GKGMpP2M6SChjKT9jLmpvaW4oXCIgXCIpOlwiXCI7cyhhLGZ1bmN0aW9uKGEpe0RiKGEsYyl9KTtrKGEsZCk7cmV0dXJuIGwoKX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiB0aGlzLnNldENsYXNzKGEsW10sYyxkKX0sJCRyZW1vdmVDbGFzc0ltbWVkaWF0ZWx5OmZ1bmN0aW9uKGEsYyxkKXthPUQoYSk7Yz1GKGMpP2M6SChjKT9jLmpvaW4oXCIgXCIpOlxuXCJcIjtzKGEsZnVuY3Rpb24oYSl7Q2IoYSxjKX0pO2soYSxkKTtyZXR1cm4gbCgpfSxzZXRDbGFzczpmdW5jdGlvbihhLGMsZCxlKXt2YXIgaz10aGlzLGw9ITE7YT1EKGEpO3ZhciBtPWEuZGF0YShcIiQkYW5pbWF0ZUNsYXNzZXNcIik7bT9lJiZtLm9wdGlvbnMmJihtLm9wdGlvbnM9Y2EuZXh0ZW5kKG0ub3B0aW9uc3x8e30sZSkpOihtPXtjbGFzc2VzOnt9LG9wdGlvbnM6ZX0sbD0hMCk7ZT1tLmNsYXNzZXM7Yz1IKGMpP2M6Yy5zcGxpdChcIiBcIik7ZD1IKGQpP2Q6ZC5zcGxpdChcIiBcIik7aChlLGMsITApO2goZSxkLCExKTtsJiYobS5wcm9taXNlPWYoZnVuY3Rpb24oYyl7dmFyIGQ9YS5kYXRhKFwiJCRhbmltYXRlQ2xhc3Nlc1wiKTthLnJlbW92ZURhdGEoXCIkJGFuaW1hdGVDbGFzc2VzXCIpO2lmKGQpe3ZhciBlPWcoYSxkLmNsYXNzZXMpO2UmJmsuJCRzZXRDbGFzc0ltbWVkaWF0ZWx5KGEsZVswXSxlWzFdLGQub3B0aW9ucyl9YygpfSksYS5kYXRhKFwiJCRhbmltYXRlQ2xhc3Nlc1wiLG0pKTtcbnJldHVybiBtLnByb21pc2V9LCQkc2V0Q2xhc3NJbW1lZGlhdGVseTpmdW5jdGlvbihhLGMsZCxlKXtjJiZ0aGlzLiQkYWRkQ2xhc3NJbW1lZGlhdGVseShhLGMpO2QmJnRoaXMuJCRyZW1vdmVDbGFzc0ltbWVkaWF0ZWx5KGEsZCk7ayhhLGUpO3JldHVybiBsKCl9LGVuYWJsZWQ6eixjYW5jZWw6en19XX1dLGphPVMoXCIkY29tcGlsZVwiKTt4Yy4kaW5qZWN0PVtcIiRwcm92aWRlXCIsXCIkJHNhbml0aXplVXJpUHJvdmlkZXJcIl07dmFyIFNjPS9eKCg/Onh8ZGF0YSlbXFw6XFwtX10pL2kscWY9UyhcIiRjb250cm9sbGVyXCIpLFdjPVwiYXBwbGljYXRpb24vanNvblwiLCRiPXtcIkNvbnRlbnQtVHlwZVwiOldjK1wiO2NoYXJzZXQ9dXRmLThcIn0sc2Y9L15cXFt8Xlxceyg/IVxceykvLHRmPXtcIltcIjovXSQvLFwie1wiOi99JC99LHJmPS9eXFwpXFxdXFx9Jyw/XFxuLyxhYz1TKFwiJGludGVycG9sYXRlXCIpLFRmPS9eKFteXFw/I10qKShcXD8oW14jXSopKT8oIyguKikpPyQvLHdmPXtodHRwOjgwLGh0dHBzOjQ0MyxmdHA6MjF9LEhiPVxuUyhcIiRsb2NhdGlvblwiKSxVZj17JCRodG1sNTohMSwkJHJlcGxhY2U6ITEsYWJzVXJsOkliKFwiJCRhYnNVcmxcIiksdXJsOmZ1bmN0aW9uKGEpe2lmKEIoYSkpcmV0dXJuIHRoaXMuJCR1cmw7dmFyIGM9VGYuZXhlYyhhKTsoY1sxXXx8XCJcIj09PWEpJiZ0aGlzLnBhdGgoZGVjb2RlVVJJQ29tcG9uZW50KGNbMV0pKTsoY1syXXx8Y1sxXXx8XCJcIj09PWEpJiZ0aGlzLnNlYXJjaChjWzNdfHxcIlwiKTt0aGlzLmhhc2goY1s1XXx8XCJcIik7cmV0dXJuIHRoaXN9LHByb3RvY29sOkliKFwiJCRwcm90b2NvbFwiKSxob3N0OkliKFwiJCRob3N0XCIpLHBvcnQ6SWIoXCIkJHBvcnRcIikscGF0aDpkZChcIiQkcGF0aFwiLGZ1bmN0aW9uKGEpe2E9bnVsbCE9PWE/YS50b1N0cmluZygpOlwiXCI7cmV0dXJuXCIvXCI9PWEuY2hhckF0KDApP2E6XCIvXCIrYX0pLHNlYXJjaDpmdW5jdGlvbihhLGMpe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIHRoaXMuJCRzZWFyY2g7Y2FzZSAxOmlmKEYoYSl8fFYoYSkpYT1cbmEudG9TdHJpbmcoKSx0aGlzLiQkc2VhcmNoPXJjKGEpO2Vsc2UgaWYoSShhKSlhPUVhKGEse30pLHMoYSxmdW5jdGlvbihjLGUpe251bGw9PWMmJmRlbGV0ZSBhW2VdfSksdGhpcy4kJHNlYXJjaD1hO2Vsc2UgdGhyb3cgSGIoXCJpc3JjaGFyZ1wiKTticmVhaztkZWZhdWx0OkIoYyl8fG51bGw9PT1jP2RlbGV0ZSB0aGlzLiQkc2VhcmNoW2FdOnRoaXMuJCRzZWFyY2hbYV09Y310aGlzLiQkY29tcG9zZSgpO3JldHVybiB0aGlzfSxoYXNoOmRkKFwiJCRoYXNoXCIsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPT1hP2EudG9TdHJpbmcoKTpcIlwifSkscmVwbGFjZTpmdW5jdGlvbigpe3RoaXMuJCRyZXBsYWNlPSEwO3JldHVybiB0aGlzfX07cyhbY2QsZWMsZGNdLGZ1bmN0aW9uKGEpe2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVWYpO2EucHJvdG90eXBlLnN0YXRlPWZ1bmN0aW9uKGMpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLiQkc3RhdGU7aWYoYSE9PWRjfHwhdGhpcy4kJGh0bWw1KXRocm93IEhiKFwibm9zdGF0ZVwiKTtcbnRoaXMuJCRzdGF0ZT1CKGMpP251bGw6YztyZXR1cm4gdGhpc319KTt2YXIgbGE9UyhcIiRwYXJzZVwiKSxWZj1GdW5jdGlvbi5wcm90b3R5cGUuY2FsbCxXZj1GdW5jdGlvbi5wcm90b3R5cGUuYXBwbHksWGY9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQsbWI9aGEoKTtzKHtcIm51bGxcIjpmdW5jdGlvbigpe3JldHVybiBudWxsfSxcInRydWVcIjpmdW5jdGlvbigpe3JldHVybiEwfSxcImZhbHNlXCI6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sdW5kZWZpbmVkOmZ1bmN0aW9uKCl7fX0sZnVuY3Rpb24oYSxjKXthLmNvbnN0YW50PWEubGl0ZXJhbD1hLnNoYXJlZEdldHRlcj0hMDttYltjXT1hfSk7bWJbXCJ0aGlzXCJdPWZ1bmN0aW9uKGEpe3JldHVybiBhfTttYltcInRoaXNcIl0uc2hhcmVkR2V0dGVyPSEwO3ZhciBuYj14KGhhKCkse1wiK1wiOmZ1bmN0aW9uKGEsYyxkLGUpe2Q9ZChhLGMpO2U9ZShhLGMpO3JldHVybiB5KGQpP3koZSk/ZCtlOmQ6eShlKT9lOnR9LFwiLVwiOmZ1bmN0aW9uKGEsYyxkLGUpe2Q9ZChhLFxuYyk7ZT1lKGEsYyk7cmV0dXJuKHkoZCk/ZDowKS0oeShlKT9lOjApfSxcIipcIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpKmUoYSxjKX0sXCIvXCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKS9lKGEsYyl9LFwiJVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyklZShhLGMpfSxcIj09PVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk9PT1lKGEsYyl9LFwiIT09XCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKSE9PWUoYSxjKX0sXCI9PVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk9PWUoYSxjKX0sXCIhPVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYykhPWUoYSxjKX0sXCI8XCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKTxlKGEsYyl9LFwiPlwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk+ZShhLGMpfSxcIjw9XCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKTw9ZShhLGMpfSxcIj49XCI6ZnVuY3Rpb24oYSxcbmMsZCxlKXtyZXR1cm4gZChhLGMpPj1lKGEsYyl9LFwiJiZcIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpJiZlKGEsYyl9LFwifHxcIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpfHxlKGEsYyl9LFwiIVwiOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4hZChhLGMpfSxcIj1cIjohMCxcInxcIjohMH0pLFlmPXtuOlwiXFxuXCIsZjpcIlxcZlwiLHI6XCJcXHJcIix0OlwiXFx0XCIsdjpcIlxcdlwiLFwiJ1wiOlwiJ1wiLCdcIic6J1wiJ30saGM9ZnVuY3Rpb24oYSl7dGhpcy5vcHRpb25zPWF9O2hjLnByb3RvdHlwZT17Y29uc3RydWN0b3I6aGMsbGV4OmZ1bmN0aW9uKGEpe3RoaXMudGV4dD1hO3RoaXMuaW5kZXg9MDtmb3IodGhpcy50b2tlbnM9W107dGhpcy5pbmRleDx0aGlzLnRleHQubGVuZ3RoOylpZihhPXRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCksJ1wiJz09PWF8fFwiJ1wiPT09YSl0aGlzLnJlYWRTdHJpbmcoYSk7ZWxzZSBpZih0aGlzLmlzTnVtYmVyKGEpfHxcIi5cIj09PWEmJnRoaXMuaXNOdW1iZXIodGhpcy5wZWVrKCkpKXRoaXMucmVhZE51bWJlcigpO1xuZWxzZSBpZih0aGlzLmlzSWRlbnQoYSkpdGhpcy5yZWFkSWRlbnQoKTtlbHNlIGlmKHRoaXMuaXMoYSxcIigpe31bXS4sOzo/XCIpKXRoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDphfSksdGhpcy5pbmRleCsrO2Vsc2UgaWYodGhpcy5pc1doaXRlc3BhY2UoYSkpdGhpcy5pbmRleCsrO2Vsc2V7dmFyIGM9YSt0aGlzLnBlZWsoKSxkPWMrdGhpcy5wZWVrKDIpLGU9bmJbY10sZj1uYltkXTtuYlthXXx8ZXx8Zj8oYT1mP2Q6ZT9jOmEsdGhpcy50b2tlbnMucHVzaCh7aW5kZXg6dGhpcy5pbmRleCx0ZXh0OmEsb3BlcmF0b3I6ITB9KSx0aGlzLmluZGV4Kz1hLmxlbmd0aCk6dGhpcy50aHJvd0Vycm9yKFwiVW5leHBlY3RlZCBuZXh0IGNoYXJhY3RlciBcIix0aGlzLmluZGV4LHRoaXMuaW5kZXgrMSl9cmV0dXJuIHRoaXMudG9rZW5zfSxpczpmdW5jdGlvbihhLGMpe3JldHVybi0xIT09Yy5pbmRleE9mKGEpfSxwZWVrOmZ1bmN0aW9uKGEpe2E9YXx8MTtyZXR1cm4gdGhpcy5pbmRleCtcbmE8dGhpcy50ZXh0Lmxlbmd0aD90aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgrYSk6ITF9LGlzTnVtYmVyOmZ1bmN0aW9uKGEpe3JldHVyblwiMFwiPD1hJiZcIjlcIj49YSYmXCJzdHJpbmdcIj09PXR5cGVvZiBhfSxpc1doaXRlc3BhY2U6ZnVuY3Rpb24oYSl7cmV0dXJuXCIgXCI9PT1hfHxcIlxcclwiPT09YXx8XCJcXHRcIj09PWF8fFwiXFxuXCI9PT1hfHxcIlxcdlwiPT09YXx8XCJcXHUwMGEwXCI9PT1hfSxpc0lkZW50OmZ1bmN0aW9uKGEpe3JldHVyblwiYVwiPD1hJiZcInpcIj49YXx8XCJBXCI8PWEmJlwiWlwiPj1hfHxcIl9cIj09PWF8fFwiJFwiPT09YX0saXNFeHBPcGVyYXRvcjpmdW5jdGlvbihhKXtyZXR1cm5cIi1cIj09PWF8fFwiK1wiPT09YXx8dGhpcy5pc051bWJlcihhKX0sdGhyb3dFcnJvcjpmdW5jdGlvbihhLGMsZCl7ZD1kfHx0aGlzLmluZGV4O2M9eShjKT9cInMgXCIrYytcIi1cIit0aGlzLmluZGV4K1wiIFtcIit0aGlzLnRleHQuc3Vic3RyaW5nKGMsZCkrXCJdXCI6XCIgXCIrZDt0aHJvdyBsYShcImxleGVyclwiLGEsYyx0aGlzLnRleHQpO1xufSxyZWFkTnVtYmVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVwiXCIsYz10aGlzLmluZGV4O3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspe3ZhciBkPVEodGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KSk7aWYoXCIuXCI9PWR8fHRoaXMuaXNOdW1iZXIoZCkpYSs9ZDtlbHNle3ZhciBlPXRoaXMucGVlaygpO2lmKFwiZVwiPT1kJiZ0aGlzLmlzRXhwT3BlcmF0b3IoZSkpYSs9ZDtlbHNlIGlmKHRoaXMuaXNFeHBPcGVyYXRvcihkKSYmZSYmdGhpcy5pc051bWJlcihlKSYmXCJlXCI9PWEuY2hhckF0KGEubGVuZ3RoLTEpKWErPWQ7ZWxzZSBpZighdGhpcy5pc0V4cE9wZXJhdG9yKGQpfHxlJiZ0aGlzLmlzTnVtYmVyKGUpfHxcImVcIiE9YS5jaGFyQXQoYS5sZW5ndGgtMSkpYnJlYWs7ZWxzZSB0aGlzLnRocm93RXJyb3IoXCJJbnZhbGlkIGV4cG9uZW50XCIpfXRoaXMuaW5kZXgrK310aGlzLnRva2Vucy5wdXNoKHtpbmRleDpjLHRleHQ6YSxjb25zdGFudDohMCx2YWx1ZTpOdW1iZXIoYSl9KX0scmVhZElkZW50OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVxudGhpcy5pbmRleDt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KXt2YXIgYz10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpO2lmKCF0aGlzLmlzSWRlbnQoYykmJiF0aGlzLmlzTnVtYmVyKGMpKWJyZWFrO3RoaXMuaW5kZXgrK310aGlzLnRva2Vucy5wdXNoKHtpbmRleDphLHRleHQ6dGhpcy50ZXh0LnNsaWNlKGEsdGhpcy5pbmRleCksaWRlbnRpZmllcjohMH0pfSxyZWFkU3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuaW5kZXg7dGhpcy5pbmRleCsrO2Zvcih2YXIgZD1cIlwiLGU9YSxmPSExO3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspe3ZhciBnPXRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCksZT1lK2c7aWYoZilcInVcIj09PWc/KGY9dGhpcy50ZXh0LnN1YnN0cmluZyh0aGlzLmluZGV4KzEsdGhpcy5pbmRleCs1KSxmLm1hdGNoKC9bXFxkYS1mXXs0fS9pKXx8dGhpcy50aHJvd0Vycm9yKFwiSW52YWxpZCB1bmljb2RlIGVzY2FwZSBbXFxcXHVcIitmK1wiXVwiKSx0aGlzLmluZGV4Kz1cbjQsZCs9U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChmLDE2KSkpOmQrPVlmW2ddfHxnLGY9ITE7ZWxzZSBpZihcIlxcXFxcIj09PWcpZj0hMDtlbHNle2lmKGc9PT1hKXt0aGlzLmluZGV4Kys7dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6Yyx0ZXh0OmUsY29uc3RhbnQ6ITAsdmFsdWU6ZH0pO3JldHVybn1kKz1nfXRoaXMuaW5kZXgrK310aGlzLnRocm93RXJyb3IoXCJVbnRlcm1pbmF0ZWQgcXVvdGVcIixjKX19O3ZhciBpYj1mdW5jdGlvbihhLGMsZCl7dGhpcy5sZXhlcj1hO3RoaXMuJGZpbHRlcj1jO3RoaXMub3B0aW9ucz1kfTtpYi5aRVJPPXgoZnVuY3Rpb24oKXtyZXR1cm4gMH0se3NoYXJlZEdldHRlcjohMCxjb25zdGFudDohMH0pO2liLnByb3RvdHlwZT17Y29uc3RydWN0b3I6aWIscGFyc2U6ZnVuY3Rpb24oYSl7dGhpcy50ZXh0PWE7dGhpcy50b2tlbnM9dGhpcy5sZXhlci5sZXgoYSk7YT10aGlzLnN0YXRlbWVudHMoKTswIT09dGhpcy50b2tlbnMubGVuZ3RoJiZ0aGlzLnRocm93RXJyb3IoXCJpcyBhbiB1bmV4cGVjdGVkIHRva2VuXCIsXG50aGlzLnRva2Vuc1swXSk7YS5saXRlcmFsPSEhYS5saXRlcmFsO2EuY29uc3RhbnQ9ISFhLmNvbnN0YW50O3JldHVybiBhfSxwcmltYXJ5OmZ1bmN0aW9uKCl7dmFyIGE7dGhpcy5leHBlY3QoXCIoXCIpPyhhPXRoaXMuZmlsdGVyQ2hhaW4oKSx0aGlzLmNvbnN1bWUoXCIpXCIpKTp0aGlzLmV4cGVjdChcIltcIik/YT10aGlzLmFycmF5RGVjbGFyYXRpb24oKTp0aGlzLmV4cGVjdChcIntcIik/YT10aGlzLm9iamVjdCgpOnRoaXMucGVlaygpLmlkZW50aWZpZXImJnRoaXMucGVlaygpLnRleHQgaW4gbWI/YT1tYlt0aGlzLmNvbnN1bWUoKS50ZXh0XTp0aGlzLnBlZWsoKS5pZGVudGlmaWVyP2E9dGhpcy5pZGVudGlmaWVyKCk6dGhpcy5wZWVrKCkuY29uc3RhbnQ/YT10aGlzLmNvbnN0YW50KCk6dGhpcy50aHJvd0Vycm9yKFwibm90IGEgcHJpbWFyeSBleHByZXNzaW9uXCIsdGhpcy5wZWVrKCkpO2Zvcih2YXIgYyxkO2M9dGhpcy5leHBlY3QoXCIoXCIsXCJbXCIsXCIuXCIpOylcIihcIj09PWMudGV4dD8oYT10aGlzLmZ1bmN0aW9uQ2FsbChhLFxuZCksZD1udWxsKTpcIltcIj09PWMudGV4dD8oZD1hLGE9dGhpcy5vYmplY3RJbmRleChhKSk6XCIuXCI9PT1jLnRleHQ/KGQ9YSxhPXRoaXMuZmllbGRBY2Nlc3MoYSkpOnRoaXMudGhyb3dFcnJvcihcIklNUE9TU0lCTEVcIik7cmV0dXJuIGF9LHRocm93RXJyb3I6ZnVuY3Rpb24oYSxjKXt0aHJvdyBsYShcInN5bnRheFwiLGMudGV4dCxhLGMuaW5kZXgrMSx0aGlzLnRleHQsdGhpcy50ZXh0LnN1YnN0cmluZyhjLmluZGV4KSk7fSxwZWVrVG9rZW46ZnVuY3Rpb24oKXtpZigwPT09dGhpcy50b2tlbnMubGVuZ3RoKXRocm93IGxhKFwidWVvZVwiLHRoaXMudGV4dCk7cmV0dXJuIHRoaXMudG9rZW5zWzBdfSxwZWVrOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiB0aGlzLnBlZWtBaGVhZCgwLGEsYyxkLGUpfSxwZWVrQWhlYWQ6ZnVuY3Rpb24oYSxjLGQsZSxmKXtpZih0aGlzLnRva2Vucy5sZW5ndGg+YSl7YT10aGlzLnRva2Vuc1thXTt2YXIgZz1hLnRleHQ7aWYoZz09PWN8fGc9PT1kfHxnPT09ZXx8Zz09PVxuZnx8IShjfHxkfHxlfHxmKSlyZXR1cm4gYX1yZXR1cm4hMX0sZXhwZWN0OmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybihhPXRoaXMucGVlayhhLGMsZCxlKSk/KHRoaXMudG9rZW5zLnNoaWZ0KCksYSk6ITF9LGNvbnN1bWU6ZnVuY3Rpb24oYSl7aWYoMD09PXRoaXMudG9rZW5zLmxlbmd0aCl0aHJvdyBsYShcInVlb2VcIix0aGlzLnRleHQpO3ZhciBjPXRoaXMuZXhwZWN0KGEpO2N8fHRoaXMudGhyb3dFcnJvcihcImlzIHVuZXhwZWN0ZWQsIGV4cGVjdGluZyBbXCIrYStcIl1cIix0aGlzLnBlZWsoKSk7cmV0dXJuIGN9LHVuYXJ5Rm46ZnVuY3Rpb24oYSxjKXt2YXIgZD1uYlthXTtyZXR1cm4geChmdW5jdGlvbihhLGYpe3JldHVybiBkKGEsZixjKX0se2NvbnN0YW50OmMuY29uc3RhbnQsaW5wdXRzOltjXX0pfSxiaW5hcnlGbjpmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1uYltjXTtyZXR1cm4geChmdW5jdGlvbihjLGUpe3JldHVybiBmKGMsZSxhLGQpfSx7Y29uc3RhbnQ6YS5jb25zdGFudCYmXG5kLmNvbnN0YW50LGlucHV0czohZSYmW2EsZF19KX0saWRlbnRpZmllcjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmNvbnN1bWUoKS50ZXh0O3RoaXMucGVlayhcIi5cIikmJnRoaXMucGVla0FoZWFkKDEpLmlkZW50aWZpZXImJiF0aGlzLnBlZWtBaGVhZCgyLFwiKFwiKTspYSs9dGhpcy5jb25zdW1lKCkudGV4dCt0aGlzLmNvbnN1bWUoKS50ZXh0O3JldHVybiB5ZihhLHRoaXMub3B0aW9ucyx0aGlzLnRleHQpfSxjb25zdGFudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY29uc3VtZSgpLnZhbHVlO3JldHVybiB4KGZ1bmN0aW9uKCl7cmV0dXJuIGF9LHtjb25zdGFudDohMCxsaXRlcmFsOiEwfSl9LHN0YXRlbWVudHM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9W107OylpZigwPHRoaXMudG9rZW5zLmxlbmd0aCYmIXRoaXMucGVlayhcIn1cIixcIilcIixcIjtcIixcIl1cIikmJmEucHVzaCh0aGlzLmZpbHRlckNoYWluKCkpLCF0aGlzLmV4cGVjdChcIjtcIikpcmV0dXJuIDE9PT1hLmxlbmd0aD9hWzBdOmZ1bmN0aW9uKGMsXG5kKXtmb3IodmFyIGUsZj0wLGc9YS5sZW5ndGg7ZjxnO2YrKyllPWFbZl0oYyxkKTtyZXR1cm4gZX19LGZpbHRlckNoYWluOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZXhwcmVzc2lvbigpO3RoaXMuZXhwZWN0KFwifFwiKTspYT10aGlzLmZpbHRlcihhKTtyZXR1cm4gYX0sZmlsdGVyOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuJGZpbHRlcih0aGlzLmNvbnN1bWUoKS50ZXh0KSxkLGU7aWYodGhpcy5wZWVrKFwiOlwiKSlmb3IoZD1bXSxlPVtdO3RoaXMuZXhwZWN0KFwiOlwiKTspZC5wdXNoKHRoaXMuZXhwcmVzc2lvbigpKTt2YXIgZj1bYV0uY29uY2F0KGR8fFtdKTtyZXR1cm4geChmdW5jdGlvbihmLGgpe3ZhciBsPWEoZixoKTtpZihlKXtlWzBdPWw7Zm9yKGw9ZC5sZW5ndGg7bC0tOyllW2wrMV09ZFtsXShmLGgpO3JldHVybiBjLmFwcGx5KHQsZSl9cmV0dXJuIGMobCl9LHtjb25zdGFudDohYy4kc3RhdGVmdWwmJmYuZXZlcnkoZmMpLGlucHV0czohYy4kc3RhdGVmdWwmJmZ9KX0sZXhwcmVzc2lvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFzc2lnbm1lbnQoKX0sXG5hc3NpZ25tZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50ZXJuYXJ5KCksYyxkO3JldHVybihkPXRoaXMuZXhwZWN0KFwiPVwiKSk/KGEuYXNzaWdufHx0aGlzLnRocm93RXJyb3IoXCJpbXBsaWVzIGFzc2lnbm1lbnQgYnV0IFtcIit0aGlzLnRleHQuc3Vic3RyaW5nKDAsZC5pbmRleCkrXCJdIGNhbiBub3QgYmUgYXNzaWduZWQgdG9cIixkKSxjPXRoaXMudGVybmFyeSgpLHgoZnVuY3Rpb24oZCxmKXtyZXR1cm4gYS5hc3NpZ24oZCxjKGQsZiksZil9LHtpbnB1dHM6W2EsY119KSk6YX0sdGVybmFyeTpmdW5jdGlvbigpe3ZhciBhPXRoaXMubG9naWNhbE9SKCksYztpZih0aGlzLmV4cGVjdChcIj9cIikmJihjPXRoaXMuYXNzaWdubWVudCgpLHRoaXMuY29uc3VtZShcIjpcIikpKXt2YXIgZD10aGlzLmFzc2lnbm1lbnQoKTtyZXR1cm4geChmdW5jdGlvbihlLGYpe3JldHVybiBhKGUsZik/YyhlLGYpOmQoZSxmKX0se2NvbnN0YW50OmEuY29uc3RhbnQmJmMuY29uc3RhbnQmJmQuY29uc3RhbnR9KX1yZXR1cm4gYX0sXG5sb2dpY2FsT1I6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5sb2dpY2FsQU5EKCksYztjPXRoaXMuZXhwZWN0KFwifHxcIik7KWE9dGhpcy5iaW5hcnlGbihhLGMudGV4dCx0aGlzLmxvZ2ljYWxBTkQoKSwhMCk7cmV0dXJuIGF9LGxvZ2ljYWxBTkQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5lcXVhbGl0eSgpLGM7Yz10aGlzLmV4cGVjdChcIiYmXCIpOylhPXRoaXMuYmluYXJ5Rm4oYSxjLnRleHQsdGhpcy5lcXVhbGl0eSgpLCEwKTtyZXR1cm4gYX0sZXF1YWxpdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5yZWxhdGlvbmFsKCksYztjPXRoaXMuZXhwZWN0KFwiPT1cIixcIiE9XCIsXCI9PT1cIixcIiE9PVwiKTspYT10aGlzLmJpbmFyeUZuKGEsYy50ZXh0LHRoaXMucmVsYXRpb25hbCgpKTtyZXR1cm4gYX0scmVsYXRpb25hbDpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmFkZGl0aXZlKCksYztjPXRoaXMuZXhwZWN0KFwiPFwiLFwiPlwiLFwiPD1cIixcIj49XCIpOylhPXRoaXMuYmluYXJ5Rm4oYSxjLnRleHQsXG50aGlzLmFkZGl0aXZlKCkpO3JldHVybiBhfSxhZGRpdGl2ZTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLm11bHRpcGxpY2F0aXZlKCksYztjPXRoaXMuZXhwZWN0KFwiK1wiLFwiLVwiKTspYT10aGlzLmJpbmFyeUZuKGEsYy50ZXh0LHRoaXMubXVsdGlwbGljYXRpdmUoKSk7cmV0dXJuIGF9LG11bHRpcGxpY2F0aXZlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMudW5hcnkoKSxjO2M9dGhpcy5leHBlY3QoXCIqXCIsXCIvXCIsXCIlXCIpOylhPXRoaXMuYmluYXJ5Rm4oYSxjLnRleHQsdGhpcy51bmFyeSgpKTtyZXR1cm4gYX0sdW5hcnk6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gdGhpcy5leHBlY3QoXCIrXCIpP3RoaXMucHJpbWFyeSgpOihhPXRoaXMuZXhwZWN0KFwiLVwiKSk/dGhpcy5iaW5hcnlGbihpYi5aRVJPLGEudGV4dCx0aGlzLnVuYXJ5KCkpOihhPXRoaXMuZXhwZWN0KFwiIVwiKSk/dGhpcy51bmFyeUZuKGEudGV4dCx0aGlzLnVuYXJ5KCkpOnRoaXMucHJpbWFyeSgpfSxmaWVsZEFjY2VzczpmdW5jdGlvbihhKXt2YXIgYz1cbnRoaXMuaWRlbnRpZmllcigpO3JldHVybiB4KGZ1bmN0aW9uKGQsZSxmKXtkPWZ8fGEoZCxlKTtyZXR1cm4gbnVsbD09ZD90OmMoZCl9LHthc3NpZ246ZnVuY3Rpb24oZCxlLGYpe3ZhciBnPWEoZCxmKTtnfHxhLmFzc2lnbihkLGc9e30sZik7cmV0dXJuIGMuYXNzaWduKGcsZSl9fSl9LG9iamVjdEluZGV4OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMudGV4dCxkPXRoaXMuZXhwcmVzc2lvbigpO3RoaXMuY29uc3VtZShcIl1cIik7cmV0dXJuIHgoZnVuY3Rpb24oZSxmKXt2YXIgZz1hKGUsZiksaD1kKGUsZik7dGEoaCxjKTtyZXR1cm4gZz9tYShnW2hdLGMpOnR9LHthc3NpZ246ZnVuY3Rpb24oZSxmLGcpe3ZhciBoPXRhKGQoZSxnKSxjKSxsPW1hKGEoZSxnKSxjKTtsfHxhLmFzc2lnbihlLGw9e30sZyk7cmV0dXJuIGxbaF09Zn19KX0sZnVuY3Rpb25DYWxsOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9W107aWYoXCIpXCIhPT10aGlzLnBlZWtUb2tlbigpLnRleHQpe2RvIGQucHVzaCh0aGlzLmV4cHJlc3Npb24oKSk7XG53aGlsZSh0aGlzLmV4cGVjdChcIixcIikpfXRoaXMuY29uc3VtZShcIilcIik7dmFyIGU9dGhpcy50ZXh0LGY9ZC5sZW5ndGg/W106bnVsbDtyZXR1cm4gZnVuY3Rpb24oZyxoKXt2YXIgbD1jP2MoZyxoKTp5KGMpP3Q6ZyxrPWEoZyxoLGwpfHx6O2lmKGYpZm9yKHZhciBtPWQubGVuZ3RoO20tLTspZlttXT1tYShkW21dKGcsaCksZSk7bWEobCxlKTtpZihrKXtpZihrLmNvbnN0cnVjdG9yPT09ayl0aHJvdyBsYShcImlzZWNmblwiLGUpO2lmKGs9PT1WZnx8az09PVdmfHxrPT09WGYpdGhyb3cgbGEoXCJpc2VjZmZcIixlKTt9bD1rLmFwcGx5P2suYXBwbHkobCxmKTprKGZbMF0sZlsxXSxmWzJdLGZbM10sZls0XSk7ZiYmKGYubGVuZ3RoPTApO3JldHVybiBtYShsLGUpfX0sYXJyYXlEZWNsYXJhdGlvbjpmdW5jdGlvbigpe3ZhciBhPVtdO2lmKFwiXVwiIT09dGhpcy5wZWVrVG9rZW4oKS50ZXh0KXtkb3tpZih0aGlzLnBlZWsoXCJdXCIpKWJyZWFrO2EucHVzaCh0aGlzLmV4cHJlc3Npb24oKSl9d2hpbGUodGhpcy5leHBlY3QoXCIsXCIpKVxufXRoaXMuY29uc3VtZShcIl1cIik7cmV0dXJuIHgoZnVuY3Rpb24oYyxkKXtmb3IodmFyIGU9W10sZj0wLGc9YS5sZW5ndGg7ZjxnO2YrKyllLnB1c2goYVtmXShjLGQpKTtyZXR1cm4gZX0se2xpdGVyYWw6ITAsY29uc3RhbnQ6YS5ldmVyeShmYyksaW5wdXRzOmF9KX0sb2JqZWN0OmZ1bmN0aW9uKCl7dmFyIGE9W10sYz1bXTtpZihcIn1cIiE9PXRoaXMucGVla1Rva2VuKCkudGV4dCl7ZG97aWYodGhpcy5wZWVrKFwifVwiKSlicmVhazt2YXIgZD10aGlzLmNvbnN1bWUoKTtkLmNvbnN0YW50P2EucHVzaChkLnZhbHVlKTpkLmlkZW50aWZpZXI/YS5wdXNoKGQudGV4dCk6dGhpcy50aHJvd0Vycm9yKFwiaW52YWxpZCBrZXlcIixkKTt0aGlzLmNvbnN1bWUoXCI6XCIpO2MucHVzaCh0aGlzLmV4cHJlc3Npb24oKSl9d2hpbGUodGhpcy5leHBlY3QoXCIsXCIpKX10aGlzLmNvbnN1bWUoXCJ9XCIpO3JldHVybiB4KGZ1bmN0aW9uKGQsZil7Zm9yKHZhciBnPXt9LGg9MCxsPWMubGVuZ3RoO2g8bDtoKyspZ1thW2hdXT1cbmNbaF0oZCxmKTtyZXR1cm4gZ30se2xpdGVyYWw6ITAsY29uc3RhbnQ6Yy5ldmVyeShmYyksaW5wdXRzOmN9KX19O3ZhciBBZj1oYSgpLHpmPWhhKCksQmY9T2JqZWN0LnByb3RvdHlwZS52YWx1ZU9mLENhPVMoXCIkc2NlXCIpLG5hPXtIVE1MOlwiaHRtbFwiLENTUzpcImNzc1wiLFVSTDpcInVybFwiLFJFU09VUkNFX1VSTDpcInJlc291cmNlVXJsXCIsSlM6XCJqc1wifSxqYT1TKFwiJGNvbXBpbGVcIiksWj1ZLmNyZWF0ZUVsZW1lbnQoXCJhXCIpLGlkPUJhKE0ubG9jYXRpb24uaHJlZik7RWMuJGluamVjdD1bXCIkcHJvdmlkZVwiXTtqZC4kaW5qZWN0PVtcIiRsb2NhbGVcIl07bGQuJGluamVjdD1bXCIkbG9jYWxlXCJdO3ZhciBvZD1cIi5cIixMZj17eXl5eTokKFwiRnVsbFllYXJcIiw0KSx5eTokKFwiRnVsbFllYXJcIiwyLDAsITApLHk6JChcIkZ1bGxZZWFyXCIsMSksTU1NTTpLYihcIk1vbnRoXCIpLE1NTTpLYihcIk1vbnRoXCIsITApLE1NOiQoXCJNb250aFwiLDIsMSksTTokKFwiTW9udGhcIiwxLDEpLGRkOiQoXCJEYXRlXCIsMiksZDokKFwiRGF0ZVwiLFxuMSksSEg6JChcIkhvdXJzXCIsMiksSDokKFwiSG91cnNcIiwxKSxoaDokKFwiSG91cnNcIiwyLC0xMiksaDokKFwiSG91cnNcIiwxLC0xMiksbW06JChcIk1pbnV0ZXNcIiwyKSxtOiQoXCJNaW51dGVzXCIsMSksc3M6JChcIlNlY29uZHNcIiwyKSxzOiQoXCJTZWNvbmRzXCIsMSksc3NzOiQoXCJNaWxsaXNlY29uZHNcIiwzKSxFRUVFOktiKFwiRGF5XCIpLEVFRTpLYihcIkRheVwiLCEwKSxhOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIDEyPmEuZ2V0SG91cnMoKT9jLkFNUE1TWzBdOmMuQU1QTVNbMV19LFo6ZnVuY3Rpb24oYSl7YT0tMSphLmdldFRpbWV6b25lT2Zmc2V0KCk7cmV0dXJuIGE9KDA8PWE/XCIrXCI6XCJcIikrKEpiKE1hdGhbMDxhP1wiZmxvb3JcIjpcImNlaWxcIl0oYS82MCksMikrSmIoTWF0aC5hYnMoYSU2MCksMikpfSx3dzpxZCgyKSx3OnFkKDEpfSxLZj0vKCg/OlteeU1kSGhtc2FaRXcnXSspfCg/OicoPzpbXiddfCcnKSonKXwoPzpFK3x5K3xNK3xkK3xIK3xoK3xtK3xzK3xhfFp8dyspKSguKikvLEpmPS9eXFwtP1xcZCskLztcbmtkLiRpbmplY3Q9W1wiJGxvY2FsZVwiXTt2YXIgR2Y9ZWEoUSksSGY9ZWEodmIpO21kLiRpbmplY3Q9W1wiJHBhcnNlXCJdO3ZhciBUZD1lYSh7cmVzdHJpY3Q6XCJFXCIsY29tcGlsZTpmdW5jdGlvbihhLGMpe2lmKCFjLmhyZWYmJiFjLnhsaW5rSHJlZiYmIWMubmFtZSlyZXR1cm4gZnVuY3Rpb24oYSxjKXtpZihcImFcIj09PWNbMF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7dmFyIGY9XCJbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXVwiPT09RGEuY2FsbChjLnByb3AoXCJocmVmXCIpKT9cInhsaW5rOmhyZWZcIjpcImhyZWZcIjtjLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXtjLmF0dHIoZil8fGEucHJldmVudERlZmF1bHQoKX0pfX19fSksd2I9e307cyhGYixmdW5jdGlvbihhLGMpe2lmKFwibXVsdGlwbGVcIiE9YSl7dmFyIGQ9eWEoXCJuZy1cIitjKTt3YltkXT1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixwcmlvcml0eToxMDAsbGluazpmdW5jdGlvbihhLGYsZyl7YS4kd2F0Y2goZ1tkXSxmdW5jdGlvbihhKXtnLiRzZXQoYyxcbiEhYSl9KX19fX19KTtzKE9jLGZ1bmN0aW9uKGEsYyl7d2JbY109ZnVuY3Rpb24oKXtyZXR1cm57cHJpb3JpdHk6MTAwLGxpbms6ZnVuY3Rpb24oYSxlLGYpe2lmKFwibmdQYXR0ZXJuXCI9PT1jJiZcIi9cIj09Zi5uZ1BhdHRlcm4uY2hhckF0KDApJiYoZT1mLm5nUGF0dGVybi5tYXRjaChOZikpKXtmLiRzZXQoXCJuZ1BhdHRlcm5cIixuZXcgUmVnRXhwKGVbMV0sZVsyXSkpO3JldHVybn1hLiR3YXRjaChmW2NdLGZ1bmN0aW9uKGEpe2YuJHNldChjLGEpfSl9fX19KTtzKFtcInNyY1wiLFwic3Jjc2V0XCIsXCJocmVmXCJdLGZ1bmN0aW9uKGEpe3ZhciBjPXlhKFwibmctXCIrYSk7d2JbY109ZnVuY3Rpb24oKXtyZXR1cm57cHJpb3JpdHk6OTksbGluazpmdW5jdGlvbihkLGUsZil7dmFyIGc9YSxoPWE7XCJocmVmXCI9PT1hJiZcIltvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddXCI9PT1EYS5jYWxsKGUucHJvcChcImhyZWZcIikpJiYoaD1cInhsaW5rSHJlZlwiLGYuJGF0dHJbaF09XCJ4bGluazpocmVmXCIsZz1udWxsKTtmLiRvYnNlcnZlKGMsXG5mdW5jdGlvbihjKXtjPyhmLiRzZXQoaCxjKSxSYSYmZyYmZS5wcm9wKGcsZltoXSkpOlwiaHJlZlwiPT09YSYmZi4kc2V0KGgsbnVsbCl9KX19fX0pO3ZhciBMYj17JGFkZENvbnRyb2w6eiwkJHJlbmFtZUNvbnRyb2w6ZnVuY3Rpb24oYSxjKXthLiRuYW1lPWN9LCRyZW1vdmVDb250cm9sOnosJHNldFZhbGlkaXR5OnosJHNldERpcnR5OnosJHNldFByaXN0aW5lOnosJHNldFN1Ym1pdHRlZDp6fTtyZC4kaW5qZWN0PVtcIiRlbGVtZW50XCIsXCIkYXR0cnNcIixcIiRzY29wZVwiLFwiJGFuaW1hdGVcIixcIiRpbnRlcnBvbGF0ZVwiXTt2YXIgeWQ9ZnVuY3Rpb24oYSl7cmV0dXJuW1wiJHRpbWVvdXRcIixmdW5jdGlvbihjKXtyZXR1cm57bmFtZTpcImZvcm1cIixyZXN0cmljdDphP1wiRUFDXCI6XCJFXCIsY29udHJvbGxlcjpyZCxjb21waWxlOmZ1bmN0aW9uKGEpe2EuYWRkQ2xhc3MoU2EpLmFkZENsYXNzKGxiKTtyZXR1cm57cHJlOmZ1bmN0aW9uKGEsZCxnLGgpe2lmKCEoXCJhY3Rpb25cImluIGcpKXt2YXIgbD1mdW5jdGlvbihjKXthLiRhcHBseShmdW5jdGlvbigpe2guJGNvbW1pdFZpZXdWYWx1ZSgpO1xuaC4kc2V0U3VibWl0dGVkKCl9KTtjLnByZXZlbnREZWZhdWx0KCl9O2RbMF0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLGwsITEpO2Qub24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7YyhmdW5jdGlvbigpe2RbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLGwsITEpfSwwLCExKX0pfXZhciBrPWguJCRwYXJlbnRGb3JtLG09aC4kbmFtZTttJiYoaGIoYSxudWxsLG0saCxtKSxnLiRvYnNlcnZlKGcubmFtZT9cIm5hbWVcIjpcIm5nRm9ybVwiLGZ1bmN0aW9uKGMpe20hPT1jJiYoaGIoYSxudWxsLG0sdCxtKSxtPWMsaGIoYSxudWxsLG0saCxtKSxrLiQkcmVuYW1lQ29udHJvbChoLG0pKX0pKTtkLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2suJHJlbW92ZUNvbnRyb2woaCk7bSYmaGIoYSxudWxsLG0sdCxtKTt4KGgsTGIpfSl9fX19fV19LFVkPXlkKCksZ2U9eWQoITApLE1mPS9cXGR7NH0tWzAxXVxcZC1bMC0zXVxcZFRbMC0yXVxcZDpbMC01XVxcZDpbMC01XVxcZFxcLlxcZCsoWystXVswLTJdXFxkOlswLTVdXFxkfFopLyxcblpmPS9eKGZ0cHxodHRwfGh0dHBzKTpcXC9cXC8oXFx3Kzp7MCwxfVxcdypAKT8oXFxTKykoOlswLTldKyk/KFxcL3xcXC8oW1xcdyMhOi4/Kz0mJUAhXFwtXFwvXSkpPyQvLCRmPS9eW2EtejAtOSEjJCUmJyorXFwvPT9eX2B7fH1+Li1dK0BbYS16MC05XShbYS16MC05LV0qW2EtejAtOV0pPyhcXC5bYS16MC05XShbYS16MC05LV0qW2EtejAtOV0pPykqJC9pLGFnPS9eXFxzKihcXC18XFwrKT8oXFxkK3woXFxkKihcXC5cXGQqKSkpXFxzKiQvLHpkPS9eKFxcZHs0fSktKFxcZHsyfSktKFxcZHsyfSkkLyxBZD0vXihcXGR7NH0pLShcXGRcXGQpLShcXGRcXGQpVChcXGRcXGQpOihcXGRcXGQpKD86OihcXGRcXGQpKFxcLlxcZHsxLDN9KT8pPyQvLGtjPS9eKFxcZHs0fSktVyhcXGRcXGQpJC8sQmQ9L14oXFxkezR9KS0oXFxkXFxkKSQvLENkPS9eKFxcZFxcZCk6KFxcZFxcZCkoPzo6KFxcZFxcZCkoXFwuXFxkezEsM30pPyk/JC8sRGQ9e3RleHQ6ZnVuY3Rpb24oYSxjLGQsZSxmLGcpe2piKGEsYyxkLGUsZixnKTtpYyhlKX0sZGF0ZTprYihcImRhdGVcIix6ZCxOYih6ZCxbXCJ5eXl5XCIsXG5cIk1NXCIsXCJkZFwiXSksXCJ5eXl5LU1NLWRkXCIpLFwiZGF0ZXRpbWUtbG9jYWxcIjprYihcImRhdGV0aW1lbG9jYWxcIixBZCxOYihBZCxcInl5eXkgTU0gZGQgSEggbW0gc3Mgc3NzXCIuc3BsaXQoXCIgXCIpKSxcInl5eXktTU0tZGRUSEg6bW06c3Muc3NzXCIpLHRpbWU6a2IoXCJ0aW1lXCIsQ2QsTmIoQ2QsW1wiSEhcIixcIm1tXCIsXCJzc1wiLFwic3NzXCJdKSxcIkhIOm1tOnNzLnNzc1wiKSx3ZWVrOmtiKFwid2Vla1wiLGtjLGZ1bmN0aW9uKGEsYyl7aWYocWEoYSkpcmV0dXJuIGE7aWYoRihhKSl7a2MubGFzdEluZGV4PTA7dmFyIGQ9a2MuZXhlYyhhKTtpZihkKXt2YXIgZT0rZFsxXSxmPStkWzJdLGc9ZD0wLGg9MCxsPTAsaz1wZChlKSxmPTcqKGYtMSk7YyYmKGQ9Yy5nZXRIb3VycygpLGc9Yy5nZXRNaW51dGVzKCksaD1jLmdldFNlY29uZHMoKSxsPWMuZ2V0TWlsbGlzZWNvbmRzKCkpO3JldHVybiBuZXcgRGF0ZShlLDAsay5nZXREYXRlKCkrZixkLGcsaCxsKX19cmV0dXJuIE5hTn0sXCJ5eXl5LVd3d1wiKSxtb250aDprYihcIm1vbnRoXCIsXG5CZCxOYihCZCxbXCJ5eXl5XCIsXCJNTVwiXSksXCJ5eXl5LU1NXCIpLG51bWJlcjpmdW5jdGlvbihhLGMsZCxlLGYsZyl7dGQoYSxjLGQsZSk7amIoYSxjLGQsZSxmLGcpO2UuJCRwYXJzZXJOYW1lPVwibnVtYmVyXCI7ZS4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBlLiRpc0VtcHR5KGEpP251bGw6YWcudGVzdChhKT9wYXJzZUZsb2F0KGEpOnR9KTtlLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7aWYoIWUuJGlzRW1wdHkoYSkpe2lmKCFWKGEpKXRocm93IE9iKFwibnVtZm10XCIsYSk7YT1hLnRvU3RyaW5nKCl9cmV0dXJuIGF9KTtpZihkLm1pbnx8ZC5uZ01pbil7dmFyIGg7ZS4kdmFsaWRhdG9ycy5taW49ZnVuY3Rpb24oYSl7cmV0dXJuIGUuJGlzRW1wdHkoYSl8fEIoaCl8fGE+PWh9O2QuJG9ic2VydmUoXCJtaW5cIixmdW5jdGlvbihhKXt5KGEpJiYhVihhKSYmKGE9cGFyc2VGbG9hdChhLDEwKSk7aD1WKGEpJiYhaXNOYU4oYSk/YTp0O2UuJHZhbGlkYXRlKCl9KX1pZihkLm1heHx8XG5kLm5nTWF4KXt2YXIgbDtlLiR2YWxpZGF0b3JzLm1heD1mdW5jdGlvbihhKXtyZXR1cm4gZS4kaXNFbXB0eShhKXx8QihsKXx8YTw9bH07ZC4kb2JzZXJ2ZShcIm1heFwiLGZ1bmN0aW9uKGEpe3koYSkmJiFWKGEpJiYoYT1wYXJzZUZsb2F0KGEsMTApKTtsPVYoYSkmJiFpc05hTihhKT9hOnQ7ZS4kdmFsaWRhdGUoKX0pfX0sdXJsOmZ1bmN0aW9uKGEsYyxkLGUsZixnKXtqYihhLGMsZCxlLGYsZyk7aWMoZSk7ZS4kJHBhcnNlck5hbWU9XCJ1cmxcIjtlLiR2YWxpZGF0b3JzLnVybD1mdW5jdGlvbihhLGMpe3ZhciBkPWF8fGM7cmV0dXJuIGUuJGlzRW1wdHkoZCl8fFpmLnRlc3QoZCl9fSxlbWFpbDpmdW5jdGlvbihhLGMsZCxlLGYsZyl7amIoYSxjLGQsZSxmLGcpO2ljKGUpO2UuJCRwYXJzZXJOYW1lPVwiZW1haWxcIjtlLiR2YWxpZGF0b3JzLmVtYWlsPWZ1bmN0aW9uKGEsYyl7dmFyIGQ9YXx8YztyZXR1cm4gZS4kaXNFbXB0eShkKXx8JGYudGVzdChkKX19LHJhZGlvOmZ1bmN0aW9uKGEsYyxcbmQsZSl7QihkLm5hbWUpJiZjLmF0dHIoXCJuYW1lXCIsKytvYik7Yy5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7Y1swXS5jaGVja2VkJiZlLiRzZXRWaWV3VmFsdWUoZC52YWx1ZSxhJiZhLnR5cGUpfSk7ZS4kcmVuZGVyPWZ1bmN0aW9uKCl7Y1swXS5jaGVja2VkPWQudmFsdWU9PWUuJHZpZXdWYWx1ZX07ZC4kb2JzZXJ2ZShcInZhbHVlXCIsZS4kcmVuZGVyKX0sY2hlY2tib3g6ZnVuY3Rpb24oYSxjLGQsZSxmLGcsaCxsKXt2YXIgaz11ZChsLGEsXCJuZ1RydWVWYWx1ZVwiLGQubmdUcnVlVmFsdWUsITApLG09dWQobCxhLFwibmdGYWxzZVZhbHVlXCIsZC5uZ0ZhbHNlVmFsdWUsITEpO2Mub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2UuJHNldFZpZXdWYWx1ZShjWzBdLmNoZWNrZWQsYSYmYS50eXBlKX0pO2UuJHJlbmRlcj1mdW5jdGlvbigpe2NbMF0uY2hlY2tlZD1lLiR2aWV3VmFsdWV9O2UuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuITE9PT1hfTtlLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIGdhKGEsXG5rKX0pO2UuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gYT9rOm19KX0saGlkZGVuOnosYnV0dG9uOnosc3VibWl0OnoscmVzZXQ6eixmaWxlOnp9LHljPVtcIiRicm93c2VyXCIsXCIkc25pZmZlclwiLFwiJGZpbHRlclwiLFwiJHBhcnNlXCIsZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHJlcXVpcmU6W1wiP25nTW9kZWxcIl0sbGluazp7cHJlOmZ1bmN0aW9uKGYsZyxoLGwpe2xbMF0mJihEZFtRKGgudHlwZSldfHxEZC50ZXh0KShmLGcsaCxsWzBdLGMsYSxkLGUpfX19fV0sYmc9L14odHJ1ZXxmYWxzZXxcXGQrKSQvLHllPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHByaW9yaXR5OjEwMCxjb21waWxlOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGJnLnRlc3QoYy5uZ1ZhbHVlKT9mdW5jdGlvbihhLGMsZil7Zi4kc2V0KFwidmFsdWVcIixhLiRldmFsKGYubmdWYWx1ZSkpfTpmdW5jdGlvbihhLGMsZil7YS4kd2F0Y2goZi5uZ1ZhbHVlLGZ1bmN0aW9uKGEpe2YuJHNldChcInZhbHVlXCIsXG5hKX0pfX19fSxaZD1bXCIkY29tcGlsZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkFDXCIsY29tcGlsZTpmdW5jdGlvbihjKXthLiQkYWRkQmluZGluZ0NsYXNzKGMpO3JldHVybiBmdW5jdGlvbihjLGUsZil7YS4kJGFkZEJpbmRpbmdJbmZvKGUsZi5uZ0JpbmQpO2U9ZVswXTtjLiR3YXRjaChmLm5nQmluZCxmdW5jdGlvbihhKXtlLnRleHRDb250ZW50PWE9PT10P1wiXCI6YX0pfX19fV0sYWU9W1wiJGludGVycG9sYXRlXCIsXCIkY29tcGlsZVwiLGZ1bmN0aW9uKGEsYyl7cmV0dXJue2NvbXBpbGU6ZnVuY3Rpb24oZCl7Yy4kJGFkZEJpbmRpbmdDbGFzcyhkKTtyZXR1cm4gZnVuY3Rpb24oZCxmLGcpe2Q9YShmLmF0dHIoZy4kYXR0ci5uZ0JpbmRUZW1wbGF0ZSkpO2MuJCRhZGRCaW5kaW5nSW5mbyhmLGQuZXhwcmVzc2lvbnMpO2Y9ZlswXTtnLiRvYnNlcnZlKFwibmdCaW5kVGVtcGxhdGVcIixmdW5jdGlvbihhKXtmLnRleHRDb250ZW50PWE9PT10P1wiXCI6YX0pfX19fV0sJGQ9W1wiJHNjZVwiLFxuXCIkcGFyc2VcIixcIiRjb21waWxlXCIsZnVuY3Rpb24oYSxjLGQpe3JldHVybntyZXN0cmljdDpcIkFcIixjb21waWxlOmZ1bmN0aW9uKGUsZil7dmFyIGc9YyhmLm5nQmluZEh0bWwpLGg9YyhmLm5nQmluZEh0bWwsZnVuY3Rpb24oYSl7cmV0dXJuKGF8fFwiXCIpLnRvU3RyaW5nKCl9KTtkLiQkYWRkQmluZGluZ0NsYXNzKGUpO3JldHVybiBmdW5jdGlvbihjLGUsZil7ZC4kJGFkZEJpbmRpbmdJbmZvKGUsZi5uZ0JpbmRIdG1sKTtjLiR3YXRjaChoLGZ1bmN0aW9uKCl7ZS5odG1sKGEuZ2V0VHJ1c3RlZEh0bWwoZyhjKSl8fFwiXCIpfSl9fX19XSx4ZT1lYSh7cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpcIm5nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYyxkLGUpe2UuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMucHVzaChmdW5jdGlvbigpe2EuJGV2YWwoZC5uZ0NoYW5nZSl9KX19KSxiZT1qYyhcIlwiLCEwKSxkZT1qYyhcIk9kZFwiLDApLGNlPWpjKFwiRXZlblwiLDEpLGVlPUphKHtjb21waWxlOmZ1bmN0aW9uKGEsYyl7Yy4kc2V0KFwibmdDbG9ha1wiLFxudCk7YS5yZW1vdmVDbGFzcyhcIm5nLWNsb2FrXCIpfX0pLGZlPVtmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixzY29wZTohMCxjb250cm9sbGVyOlwiQFwiLHByaW9yaXR5OjUwMH19XSxEYz17fSxjZz17Ymx1cjohMCxmb2N1czohMH07cyhcImNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZW1vdmUgbW91c2VlbnRlciBtb3VzZWxlYXZlIGtleWRvd24ga2V5dXAga2V5cHJlc3Mgc3VibWl0IGZvY3VzIGJsdXIgY29weSBjdXQgcGFzdGVcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7dmFyIGM9eWEoXCJuZy1cIithKTtEY1tjXT1bXCIkcGFyc2VcIixcIiRyb290U2NvcGVcIixmdW5jdGlvbihkLGUpe3JldHVybntyZXN0cmljdDpcIkFcIixjb21waWxlOmZ1bmN0aW9uKGYsZyl7dmFyIGg9ZChnW2NdLG51bGwsITApO3JldHVybiBmdW5jdGlvbihjLGQpe2Qub24oYSxmdW5jdGlvbihkKXt2YXIgZj1mdW5jdGlvbigpe2goYyx7JGV2ZW50OmR9KX07XG5jZ1thXSYmZS4kJHBoYXNlP2MuJGV2YWxBc3luYyhmKTpjLiRhcHBseShmKX0pfX19fV19KTt2YXIgaWU9W1wiJGFuaW1hdGVcIixmdW5jdGlvbihhKXtyZXR1cm57bXVsdGlFbGVtZW50OiEwLHRyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6NjAwLHRlcm1pbmFsOiEwLHJlc3RyaWN0OlwiQVwiLCQkdGxiOiEwLGxpbms6ZnVuY3Rpb24oYyxkLGUsZixnKXt2YXIgaCxsLGs7Yy4kd2F0Y2goZS5uZ0lmLGZ1bmN0aW9uKGMpe2M/bHx8ZyhmdW5jdGlvbihjLGYpe2w9ZjtjW2MubGVuZ3RoKytdPVkuY3JlYXRlQ29tbWVudChcIiBlbmQgbmdJZjogXCIrZS5uZ0lmK1wiIFwiKTtoPXtjbG9uZTpjfTthLmVudGVyKGMsZC5wYXJlbnQoKSxkKX0pOihrJiYoay5yZW1vdmUoKSxrPW51bGwpLGwmJihsLiRkZXN0cm95KCksbD1udWxsKSxoJiYoaz11YihoLmNsb25lKSxhLmxlYXZlKGspLnRoZW4oZnVuY3Rpb24oKXtrPW51bGx9KSxoPW51bGwpKX0pfX19XSxqZT1bXCIkdGVtcGxhdGVSZXF1ZXN0XCIsXCIkYW5jaG9yU2Nyb2xsXCIsXG5cIiRhbmltYXRlXCIsXCIkc2NlXCIsZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJue3Jlc3RyaWN0OlwiRUNBXCIscHJpb3JpdHk6NDAwLHRlcm1pbmFsOiEwLHRyYW5zY2x1ZGU6XCJlbGVtZW50XCIsY29udHJvbGxlcjpjYS5ub29wLGNvbXBpbGU6ZnVuY3Rpb24oZixnKXt2YXIgaD1nLm5nSW5jbHVkZXx8Zy5zcmMsbD1nLm9ubG9hZHx8XCJcIixrPWcuYXV0b3Njcm9sbDtyZXR1cm4gZnVuY3Rpb24oZixnLHEscyxyKXt2YXIgdD0wLHAsdix3LEw9ZnVuY3Rpb24oKXt2JiYodi5yZW1vdmUoKSx2PW51bGwpO3AmJihwLiRkZXN0cm95KCkscD1udWxsKTt3JiYoZC5sZWF2ZSh3KS50aGVuKGZ1bmN0aW9uKCl7dj1udWxsfSksdj13LHc9bnVsbCl9O2YuJHdhdGNoKGUucGFyc2VBc1Jlc291cmNlVXJsKGgpLGZ1bmN0aW9uKGUpe3ZhciBoPWZ1bmN0aW9uKCl7IXkoayl8fGsmJiFmLiRldmFsKGspfHxjKCl9LHE9Kyt0O2U/KGEoZSwhMCkudGhlbihmdW5jdGlvbihhKXtpZihxPT09dCl7dmFyIGM9Zi4kbmV3KCk7XG5zLnRlbXBsYXRlPWE7YT1yKGMsZnVuY3Rpb24oYSl7TCgpO2QuZW50ZXIoYSxudWxsLGcpLnRoZW4oaCl9KTtwPWM7dz1hO3AuJGVtaXQoXCIkaW5jbHVkZUNvbnRlbnRMb2FkZWRcIixlKTtmLiRldmFsKGwpfX0sZnVuY3Rpb24oKXtxPT09dCYmKEwoKSxmLiRlbWl0KFwiJGluY2x1ZGVDb250ZW50RXJyb3JcIixlKSl9KSxmLiRlbWl0KFwiJGluY2x1ZGVDb250ZW50UmVxdWVzdGVkXCIsZSkpOihMKCkscy50ZW1wbGF0ZT1udWxsKX0pfX19fV0sQWU9W1wiJGNvbXBpbGVcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFQ0FcIixwcmlvcml0eTotNDAwLHJlcXVpcmU6XCJuZ0luY2x1ZGVcIixsaW5rOmZ1bmN0aW9uKGMsZCxlLGYpey9TVkcvLnRlc3QoZFswXS50b1N0cmluZygpKT8oZC5lbXB0eSgpLGEoR2MoZi50ZW1wbGF0ZSxZKS5jaGlsZE5vZGVzKShjLGZ1bmN0aW9uKGEpe2QuYXBwZW5kKGEpfSx7ZnV0dXJlUGFyZW50RWxlbWVudDpkfSkpOihkLmh0bWwoZi50ZW1wbGF0ZSksYShkLmNvbnRlbnRzKCkpKGMpKX19fV0sXG5rZT1KYSh7cHJpb3JpdHk6NDUwLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGEsYyxkKXthLiRldmFsKGQubmdJbml0KX19fX0pLHdlPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHByaW9yaXR5OjEwMCxyZXF1aXJlOlwibmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGY9Yy5hdHRyKGQuJGF0dHIubmdMaXN0KXx8XCIsIFwiLGc9XCJmYWxzZVwiIT09ZC5uZ1RyaW0saD1nP1UoZik6ZjtlLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24oYSl7aWYoIUIoYSkpe3ZhciBjPVtdO2EmJnMoYS5zcGxpdChoKSxmdW5jdGlvbihhKXthJiZjLnB1c2goZz9VKGEpOmEpfSk7cmV0dXJuIGN9fSk7ZS4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBIKGEpP2Euam9pbihmKTp0fSk7ZS4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4hYXx8IWEubGVuZ3RofX19fSxsYj1cIm5nLXZhbGlkXCIsdmQ9XCJuZy1pbnZhbGlkXCIsU2E9XCJuZy1wcmlzdGluZVwiLFxuTWI9XCJuZy1kaXJ0eVwiLHhkPVwibmctcGVuZGluZ1wiLE9iPW5ldyBTKFwibmdNb2RlbFwiKSxkZz1bXCIkc2NvcGVcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkYXR0cnNcIixcIiRlbGVtZW50XCIsXCIkcGFyc2VcIixcIiRhbmltYXRlXCIsXCIkdGltZW91dFwiLFwiJHJvb3RTY29wZVwiLFwiJHFcIixcIiRpbnRlcnBvbGF0ZVwiLGZ1bmN0aW9uKGEsYyxkLGUsZixnLGgsbCxrLG0pe3RoaXMuJG1vZGVsVmFsdWU9dGhpcy4kdmlld1ZhbHVlPU51bWJlci5OYU47dGhpcy4kJHJhd01vZGVsVmFsdWU9dDt0aGlzLiR2YWxpZGF0b3JzPXt9O3RoaXMuJGFzeW5jVmFsaWRhdG9ycz17fTt0aGlzLiRwYXJzZXJzPVtdO3RoaXMuJGZvcm1hdHRlcnM9W107dGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycz1bXTt0aGlzLiR1bnRvdWNoZWQ9ITA7dGhpcy4kdG91Y2hlZD0hMTt0aGlzLiRwcmlzdGluZT0hMDt0aGlzLiRkaXJ0eT0hMTt0aGlzLiR2YWxpZD0hMDt0aGlzLiRpbnZhbGlkPSExO3RoaXMuJGVycm9yPXt9O3RoaXMuJCRzdWNjZXNzPVxue307dGhpcy4kcGVuZGluZz10O3RoaXMuJG5hbWU9bShkLm5hbWV8fFwiXCIsITEpKGEpO3ZhciBuPWYoZC5uZ01vZGVsKSxxPW4uYXNzaWduLHU9bixyPXEsUD1udWxsLHA9dGhpczt0aGlzLiQkc2V0T3B0aW9ucz1mdW5jdGlvbihhKXtpZigocC4kb3B0aW9ucz1hKSYmYS5nZXR0ZXJTZXR0ZXIpe3ZhciBjPWYoZC5uZ01vZGVsK1wiKClcIiksZz1mKGQubmdNb2RlbCtcIigkJCRwKVwiKTt1PWZ1bmN0aW9uKGEpe3ZhciBkPW4oYSk7RyhkKSYmKGQ9YyhhKSk7cmV0dXJuIGR9O3I9ZnVuY3Rpb24oYSxjKXtHKG4oYSkpP2coYSx7JCQkcDpwLiRtb2RlbFZhbHVlfSk6cShhLHAuJG1vZGVsVmFsdWUpfX1lbHNlIGlmKCFuLmFzc2lnbil0aHJvdyBPYihcIm5vbmFzc2lnblwiLGQubmdNb2RlbCx2YShlKSk7fTt0aGlzLiRyZW5kZXI9ejt0aGlzLiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiBCKGEpfHxcIlwiPT09YXx8bnVsbD09PWF8fGEhPT1hfTt2YXIgdj1lLmluaGVyaXRlZERhdGEoXCIkZm9ybUNvbnRyb2xsZXJcIil8fFxuTGIsdz0wO3NkKHtjdHJsOnRoaXMsJGVsZW1lbnQ6ZSxzZXQ6ZnVuY3Rpb24oYSxjKXthW2NdPSEwfSx1bnNldDpmdW5jdGlvbihhLGMpe2RlbGV0ZSBhW2NdfSxwYXJlbnRGb3JtOnYsJGFuaW1hdGU6Z30pO3RoaXMuJHNldFByaXN0aW5lPWZ1bmN0aW9uKCl7cC4kZGlydHk9ITE7cC4kcHJpc3RpbmU9ITA7Zy5yZW1vdmVDbGFzcyhlLE1iKTtnLmFkZENsYXNzKGUsU2EpfTt0aGlzLiRzZXREaXJ0eT1mdW5jdGlvbigpe3AuJGRpcnR5PSEwO3AuJHByaXN0aW5lPSExO2cucmVtb3ZlQ2xhc3MoZSxTYSk7Zy5hZGRDbGFzcyhlLE1iKTt2LiRzZXREaXJ0eSgpfTt0aGlzLiRzZXRVbnRvdWNoZWQ9ZnVuY3Rpb24oKXtwLiR0b3VjaGVkPSExO3AuJHVudG91Y2hlZD0hMDtnLnNldENsYXNzKGUsXCJuZy11bnRvdWNoZWRcIixcIm5nLXRvdWNoZWRcIil9O3RoaXMuJHNldFRvdWNoZWQ9ZnVuY3Rpb24oKXtwLiR0b3VjaGVkPSEwO3AuJHVudG91Y2hlZD0hMTtnLnNldENsYXNzKGUsXCJuZy10b3VjaGVkXCIsXG5cIm5nLXVudG91Y2hlZFwiKX07dGhpcy4kcm9sbGJhY2tWaWV3VmFsdWU9ZnVuY3Rpb24oKXtoLmNhbmNlbChQKTtwLiR2aWV3VmFsdWU9cC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU7cC4kcmVuZGVyKCl9O3RoaXMuJHZhbGlkYXRlPWZ1bmN0aW9uKCl7aWYoIVYocC4kbW9kZWxWYWx1ZSl8fCFpc05hTihwLiRtb2RlbFZhbHVlKSl7dmFyIGE9cC4kJHJhd01vZGVsVmFsdWUsYz1wLiR2YWxpZCxkPXAuJG1vZGVsVmFsdWUsZT1wLiRvcHRpb25zJiZwLiRvcHRpb25zLmFsbG93SW52YWxpZDtwLiQkcnVuVmFsaWRhdG9ycyhwLiRlcnJvcltwLiQkcGFyc2VyTmFtZXx8XCJwYXJzZVwiXT8hMTp0LGEscC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUsZnVuY3Rpb24oZil7ZXx8Yz09PWZ8fChwLiRtb2RlbFZhbHVlPWY/YTp0LHAuJG1vZGVsVmFsdWUhPT1kJiZwLiQkd3JpdGVNb2RlbFRvU2NvcGUoKSl9KX19O3RoaXMuJCRydW5WYWxpZGF0b3JzPWZ1bmN0aW9uKGEsYyxkLGUpe2Z1bmN0aW9uIGYoKXt2YXIgYT1cbiEwO3MocC4kdmFsaWRhdG9ycyxmdW5jdGlvbihlLGYpe3ZhciBnPWUoYyxkKTthPWEmJmc7aChmLGcpfSk7cmV0dXJuIGE/ITA6KHMocC4kYXN5bmNWYWxpZGF0b3JzLGZ1bmN0aW9uKGEsYyl7aChjLG51bGwpfSksITEpfWZ1bmN0aW9uIGcoKXt2YXIgYT1bXSxlPSEwO3MocC4kYXN5bmNWYWxpZGF0b3JzLGZ1bmN0aW9uKGYsZyl7dmFyIGw9ZihjLGQpO2lmKCFsfHwhRyhsLnRoZW4pKXRocm93IE9iKFwiJGFzeW5jVmFsaWRhdG9yc1wiLGwpO2goZyx0KTthLnB1c2gobC50aGVuKGZ1bmN0aW9uKCl7aChnLCEwKX0sZnVuY3Rpb24oYSl7ZT0hMTtoKGcsITEpfSkpfSk7YS5sZW5ndGg/ay5hbGwoYSkudGhlbihmdW5jdGlvbigpe2woZSl9LHopOmwoITApfWZ1bmN0aW9uIGgoYSxjKXttPT09dyYmcC4kc2V0VmFsaWRpdHkoYSxjKX1mdW5jdGlvbiBsKGEpe209PT13JiZlKGEpfXcrKzt2YXIgbT13OyhmdW5jdGlvbihhKXt2YXIgYz1wLiQkcGFyc2VyTmFtZXx8XCJwYXJzZVwiO2lmKGE9PT1cbnQpaChjLG51bGwpO2Vsc2UgaWYoaChjLGEpLCFhKXJldHVybiBzKHAuJHZhbGlkYXRvcnMsZnVuY3Rpb24oYSxjKXtoKGMsbnVsbCl9KSxzKHAuJGFzeW5jVmFsaWRhdG9ycyxmdW5jdGlvbihhLGMpe2goYyxudWxsKX0pLCExO3JldHVybiEwfSkoYSk/ZigpP2coKTpsKCExKTpsKCExKX07dGhpcy4kY29tbWl0Vmlld1ZhbHVlPWZ1bmN0aW9uKCl7dmFyIGE9cC4kdmlld1ZhbHVlO2guY2FuY2VsKFApO2lmKHAuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlIT09YXx8XCJcIj09PWEmJnAuJCRoYXNOYXRpdmVWYWxpZGF0b3JzKXAuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlPWEscC4kcHJpc3RpbmUmJnRoaXMuJHNldERpcnR5KCksdGhpcy4kJHBhcnNlQW5kVmFsaWRhdGUoKX07dGhpcy4kJHBhcnNlQW5kVmFsaWRhdGU9ZnVuY3Rpb24oKXt2YXIgYz1wLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSxkPUIoYyk/dDohMDtpZihkKWZvcih2YXIgZT0wO2U8cC4kcGFyc2Vycy5sZW5ndGg7ZSsrKWlmKGM9XG5wLiRwYXJzZXJzW2VdKGMpLEIoYykpe2Q9ITE7YnJlYWt9VihwLiRtb2RlbFZhbHVlKSYmaXNOYU4ocC4kbW9kZWxWYWx1ZSkmJihwLiRtb2RlbFZhbHVlPXUoYSkpO3ZhciBmPXAuJG1vZGVsVmFsdWUsZz1wLiRvcHRpb25zJiZwLiRvcHRpb25zLmFsbG93SW52YWxpZDtwLiQkcmF3TW9kZWxWYWx1ZT1jO2cmJihwLiRtb2RlbFZhbHVlPWMscC4kbW9kZWxWYWx1ZSE9PWYmJnAuJCR3cml0ZU1vZGVsVG9TY29wZSgpKTtwLiQkcnVuVmFsaWRhdG9ycyhkLGMscC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUsZnVuY3Rpb24oYSl7Z3x8KHAuJG1vZGVsVmFsdWU9YT9jOnQscC4kbW9kZWxWYWx1ZSE9PWYmJnAuJCR3cml0ZU1vZGVsVG9TY29wZSgpKX0pfTt0aGlzLiQkd3JpdGVNb2RlbFRvU2NvcGU9ZnVuY3Rpb24oKXtyKGEscC4kbW9kZWxWYWx1ZSk7cyhwLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLGZ1bmN0aW9uKGEpe3RyeXthKCl9Y2F0Y2goZCl7YyhkKX19KX07dGhpcy4kc2V0Vmlld1ZhbHVlPVxuZnVuY3Rpb24oYSxjKXtwLiR2aWV3VmFsdWU9YTtwLiRvcHRpb25zJiYhcC4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHR8fHAuJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdChjKX07dGhpcy4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0PWZ1bmN0aW9uKGMpe3ZhciBkPTAsZT1wLiRvcHRpb25zO2UmJnkoZS5kZWJvdW5jZSkmJihlPWUuZGVib3VuY2UsVihlKT9kPWU6VihlW2NdKT9kPWVbY106VihlW1wiZGVmYXVsdFwiXSkmJihkPWVbXCJkZWZhdWx0XCJdKSk7aC5jYW5jZWwoUCk7ZD9QPWgoZnVuY3Rpb24oKXtwLiRjb21taXRWaWV3VmFsdWUoKX0sZCk6bC4kJHBoYXNlP3AuJGNvbW1pdFZpZXdWYWx1ZSgpOmEuJGFwcGx5KGZ1bmN0aW9uKCl7cC4kY29tbWl0Vmlld1ZhbHVlKCl9KX07YS4kd2F0Y2goZnVuY3Rpb24oKXt2YXIgYz11KGEpO2lmKGMhPT1wLiRtb2RlbFZhbHVlKXtwLiRtb2RlbFZhbHVlPXAuJCRyYXdNb2RlbFZhbHVlPWM7Zm9yKHZhciBkPXAuJGZvcm1hdHRlcnMsZT1kLmxlbmd0aCxcbmY9YztlLS07KWY9ZFtlXShmKTtwLiR2aWV3VmFsdWUhPT1mJiYocC4kdmlld1ZhbHVlPXAuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlPWYscC4kcmVuZGVyKCkscC4kJHJ1blZhbGlkYXRvcnModCxjLGYseikpfXJldHVybiBjfSl9XSx2ZT1bXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6W1wibmdNb2RlbFwiLFwiXj9mb3JtXCIsXCJeP25nTW9kZWxPcHRpb25zXCJdLGNvbnRyb2xsZXI6ZGcscHJpb3JpdHk6MSxjb21waWxlOmZ1bmN0aW9uKGMpe2MuYWRkQ2xhc3MoU2EpLmFkZENsYXNzKFwibmctdW50b3VjaGVkXCIpLmFkZENsYXNzKGxiKTtyZXR1cm57cHJlOmZ1bmN0aW9uKGEsYyxmLGcpe3ZhciBoPWdbMF0sbD1nWzFdfHxMYjtoLiQkc2V0T3B0aW9ucyhnWzJdJiZnWzJdLiRvcHRpb25zKTtsLiRhZGRDb250cm9sKGgpO2YuJG9ic2VydmUoXCJuYW1lXCIsZnVuY3Rpb24oYSl7aC4kbmFtZSE9PWEmJmwuJCRyZW5hbWVDb250cm9sKGgsYSl9KTthLiRvbihcIiRkZXN0cm95XCIsXG5mdW5jdGlvbigpe2wuJHJlbW92ZUNvbnRyb2woaCl9KX0scG9zdDpmdW5jdGlvbihjLGUsZixnKXt2YXIgaD1nWzBdO2lmKGguJG9wdGlvbnMmJmguJG9wdGlvbnMudXBkYXRlT24pZS5vbihoLiRvcHRpb25zLnVwZGF0ZU9uLGZ1bmN0aW9uKGEpe2guJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdChhJiZhLnR5cGUpfSk7ZS5vbihcImJsdXJcIixmdW5jdGlvbihlKXtoLiR0b3VjaGVkfHwoYS4kJHBoYXNlP2MuJGV2YWxBc3luYyhoLiRzZXRUb3VjaGVkKTpjLiRhcHBseShoLiRzZXRUb3VjaGVkKSl9KX19fX19XSxlZz0vKFxccyt8XilkZWZhdWx0KFxccyt8JCkvLHplPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLGNvbnRyb2xsZXI6W1wiJHNjb3BlXCIsXCIkYXR0cnNcIixmdW5jdGlvbihhLGMpe3ZhciBkPXRoaXM7dGhpcy4kb3B0aW9ucz1hLiRldmFsKGMubmdNb2RlbE9wdGlvbnMpO3RoaXMuJG9wdGlvbnMudXBkYXRlT24hPT10Pyh0aGlzLiRvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdD1cbiExLHRoaXMuJG9wdGlvbnMudXBkYXRlT249VSh0aGlzLiRvcHRpb25zLnVwZGF0ZU9uLnJlcGxhY2UoZWcsZnVuY3Rpb24oKXtkLiRvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdD0hMDtyZXR1cm5cIiBcIn0pKSk6dGhpcy4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQ9ITB9XX19LGxlPUphKHt0ZXJtaW5hbDohMCxwcmlvcml0eToxRTN9KSxtZT1bXCIkbG9jYWxlXCIsXCIkaW50ZXJwb2xhdGVcIixmdW5jdGlvbihhLGMpe3ZhciBkPS97fS9nLGU9L153aGVuKE1pbnVzKT8oLispJC87cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixsaW5rOmZ1bmN0aW9uKGYsZyxoKXtmdW5jdGlvbiBsKGEpe2cudGV4dChhfHxcIlwiKX12YXIgaz1oLmNvdW50LG09aC4kYXR0ci53aGVuJiZnLmF0dHIoaC4kYXR0ci53aGVuKSxuPWgub2Zmc2V0fHwwLHE9Zi4kZXZhbChtKXx8e30sdT17fSxtPWMuc3RhcnRTeW1ib2woKSxyPWMuZW5kU3ltYm9sKCksdD1tK2srXCItXCIrbityLHA9Y2Eubm9vcCx2O3MoaCxmdW5jdGlvbihhLGMpe3ZhciBkPVxuZS5leGVjKGMpO2QmJihkPShkWzFdP1wiLVwiOlwiXCIpK1EoZFsyXSkscVtkXT1nLmF0dHIoaC4kYXR0cltjXSkpfSk7cyhxLGZ1bmN0aW9uKGEsZSl7dVtlXT1jKGEucmVwbGFjZShkLHQpKX0pO2YuJHdhdGNoKGssZnVuY3Rpb24oYyl7Yz1wYXJzZUZsb2F0KGMpO3ZhciBkPWlzTmFOKGMpO2R8fGMgaW4gcXx8KGM9YS5wbHVyYWxDYXQoYy1uKSk7Yz09PXZ8fGQmJmlzTmFOKHYpfHwocCgpLHA9Zi4kd2F0Y2godVtjXSxsKSx2PWMpfSl9fX1dLG5lPVtcIiRwYXJzZVwiLFwiJGFuaW1hdGVcIixmdW5jdGlvbihhLGMpe3ZhciBkPVMoXCJuZ1JlcGVhdFwiKSxlPWZ1bmN0aW9uKGEsYyxkLGUsayxtLG4pe2FbZF09ZTtrJiYoYVtrXT1tKTthLiRpbmRleD1jO2EuJGZpcnN0PTA9PT1jO2EuJGxhc3Q9Yz09PW4tMTthLiRtaWRkbGU9IShhLiRmaXJzdHx8YS4kbGFzdCk7YS4kb2RkPSEoYS4kZXZlbj0wPT09KGMmMSkpfTtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsbXVsdGlFbGVtZW50OiEwLHRyYW5zY2x1ZGU6XCJlbGVtZW50XCIsXG5wcmlvcml0eToxRTMsdGVybWluYWw6ITAsJCR0bGI6ITAsY29tcGlsZTpmdW5jdGlvbihmLGcpe3ZhciBoPWcubmdSZXBlYXQsbD1ZLmNyZWF0ZUNvbW1lbnQoXCIgZW5kIG5nUmVwZWF0OiBcIitoK1wiIFwiKSxrPWgubWF0Y2goL15cXHMqKFtcXHNcXFNdKz8pXFxzK2luXFxzKyhbXFxzXFxTXSs/KSg/Olxccythc1xccysoW1xcc1xcU10rPykpPyg/Olxccyt0cmFja1xccytieVxccysoW1xcc1xcU10rPykpP1xccyokLyk7aWYoIWspdGhyb3cgZChcImlleHBcIixoKTt2YXIgbT1rWzFdLG49a1syXSxxPWtbM10sdT1rWzRdLGs9bS5tYXRjaCgvXig/OihcXHMqW1xcJFxcd10rKXxcXChcXHMqKFtcXCRcXHddKylcXHMqLFxccyooW1xcJFxcd10rKVxccypcXCkpJC8pO2lmKCFrKXRocm93IGQoXCJpaWRleHBcIixtKTt2YXIgcj1rWzNdfHxrWzFdLHk9a1syXTtpZihxJiYoIS9eWyRhLXpBLVpfXVskYS16QS1aMC05X10qJC8udGVzdChxKXx8L14obnVsbHx1bmRlZmluZWR8dGhpc3xcXCRpbmRleHxcXCRmaXJzdHxcXCRtaWRkbGV8XFwkbGFzdHxcXCRldmVufFxcJG9kZHxcXCRwYXJlbnR8XFwkcm9vdHxcXCRpZCkkLy50ZXN0KHEpKSl0aHJvdyBkKFwiYmFkaWRlbnRcIixcbnEpO3ZhciBwLHYsdyxCLHo9eyRpZDpOYX07dT9wPWEodSk6KHc9ZnVuY3Rpb24oYSxjKXtyZXR1cm4gTmEoYyl9LEI9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9KTtyZXR1cm4gZnVuY3Rpb24oYSxmLGcsayxtKXtwJiYodj1mdW5jdGlvbihjLGQsZSl7eSYmKHpbeV09Yyk7eltyXT1kO3ouJGluZGV4PWU7cmV0dXJuIHAoYSx6KX0pO3ZhciB1PWhhKCk7YS4kd2F0Y2hDb2xsZWN0aW9uKG4sZnVuY3Rpb24oZyl7dmFyIGsscCxuPWZbMF0sRSx6PWhhKCkseCxULE4sRyxILEMsSTtxJiYoYVtxXT1nKTtpZihUYShnKSlIPWcscD12fHx3O2Vsc2V7cD12fHxCO0g9W107Zm9yKEkgaW4gZylnLmhhc093blByb3BlcnR5KEkpJiZcIiRcIiE9SS5jaGFyQXQoMCkmJkgucHVzaChJKTtILnNvcnQoKX14PUgubGVuZ3RoO0k9QXJyYXkoeCk7Zm9yKGs9MDtrPHg7aysrKWlmKFQ9Zz09PUg/azpIW2tdLE49Z1tUXSxHPXAoVCxOLGspLHVbR10pQz11W0ddLGRlbGV0ZSB1W0ddLHpbR109QyxJW2tdPUM7ZWxzZXtpZih6W0ddKXRocm93IHMoSSxcbmZ1bmN0aW9uKGEpe2EmJmEuc2NvcGUmJih1W2EuaWRdPWEpfSksZChcImR1cGVzXCIsaCxHLE4pO0lba109e2lkOkcsc2NvcGU6dCxjbG9uZTp0fTt6W0ddPSEwfWZvcihFIGluIHUpe0M9dVtFXTtHPXViKEMuY2xvbmUpO2MubGVhdmUoRyk7aWYoR1swXS5wYXJlbnROb2RlKWZvcihrPTAscD1HLmxlbmd0aDtrPHA7aysrKUdba10uJCROR19SRU1PVkVEPSEwO0Muc2NvcGUuJGRlc3Ryb3koKX1mb3Ioaz0wO2s8eDtrKyspaWYoVD1nPT09SD9rOkhba10sTj1nW1RdLEM9SVtrXSxDLnNjb3BlKXtFPW47ZG8gRT1FLm5leHRTaWJsaW5nO3doaWxlKEUmJkUuJCROR19SRU1PVkVEKTtDLmNsb25lWzBdIT1FJiZjLm1vdmUodWIoQy5jbG9uZSksbnVsbCxEKG4pKTtuPUMuY2xvbmVbQy5jbG9uZS5sZW5ndGgtMV07ZShDLnNjb3BlLGsscixOLHksVCx4KX1lbHNlIG0oZnVuY3Rpb24oYSxkKXtDLnNjb3BlPWQ7dmFyIGY9bC5jbG9uZU5vZGUoITEpO2FbYS5sZW5ndGgrK109ZjtjLmVudGVyKGEsXG5udWxsLEQobikpO249ZjtDLmNsb25lPWE7eltDLmlkXT1DO2UoQy5zY29wZSxrLHIsTix5LFQseCl9KTt1PXp9KX19fX1dLG9lPVtcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLG11bHRpRWxlbWVudDohMCxsaW5rOmZ1bmN0aW9uKGMsZCxlKXtjLiR3YXRjaChlLm5nU2hvdyxmdW5jdGlvbihjKXthW2M/XCJyZW1vdmVDbGFzc1wiOlwiYWRkQ2xhc3NcIl0oZCxcIm5nLWhpZGVcIix7dGVtcENsYXNzZXM6XCJuZy1oaWRlLWFuaW1hdGVcIn0pfSl9fX1dLGhlPVtcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLG11bHRpRWxlbWVudDohMCxsaW5rOmZ1bmN0aW9uKGMsZCxlKXtjLiR3YXRjaChlLm5nSGlkZSxmdW5jdGlvbihjKXthW2M/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oZCxcIm5nLWhpZGVcIix7dGVtcENsYXNzZXM6XCJuZy1oaWRlLWFuaW1hdGVcIn0pfSl9fX1dLHBlPUphKGZ1bmN0aW9uKGEsYyxkKXthLiR3YXRjaENvbGxlY3Rpb24oZC5uZ1N0eWxlLFxuZnVuY3Rpb24oYSxkKXtkJiZhIT09ZCYmcyhkLGZ1bmN0aW9uKGEsZCl7Yy5jc3MoZCxcIlwiKX0pO2EmJmMuY3NzKGEpfSl9KSxxZT1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVxdWlyZTpcIm5nU3dpdGNoXCIsY29udHJvbGxlcjpbXCIkc2NvcGVcIixmdW5jdGlvbigpe3RoaXMuY2FzZXM9e319XSxsaW5rOmZ1bmN0aW9uKGMsZCxlLGYpe3ZhciBnPVtdLGg9W10sbD1bXSxrPVtdLG09ZnVuY3Rpb24oYSxjKXtyZXR1cm4gZnVuY3Rpb24oKXthLnNwbGljZShjLDEpfX07Yy4kd2F0Y2goZS5uZ1N3aXRjaHx8ZS5vbixmdW5jdGlvbihjKXt2YXIgZCxlO2Q9MDtmb3IoZT1sLmxlbmd0aDtkPGU7KytkKWEuY2FuY2VsKGxbZF0pO2Q9bC5sZW5ndGg9MDtmb3IoZT1rLmxlbmd0aDtkPGU7KytkKXt2YXIgcj11YihoW2RdLmNsb25lKTtrW2RdLiRkZXN0cm95KCk7KGxbZF09YS5sZWF2ZShyKSkudGhlbihtKGwsZCkpfWgubGVuZ3RoPTA7ay5sZW5ndGg9MDsoZz1cbmYuY2FzZXNbXCIhXCIrY118fGYuY2FzZXNbXCI/XCJdKSYmcyhnLGZ1bmN0aW9uKGMpe2MudHJhbnNjbHVkZShmdW5jdGlvbihkLGUpe2sucHVzaChlKTt2YXIgZj1jLmVsZW1lbnQ7ZFtkLmxlbmd0aCsrXT1ZLmNyZWF0ZUNvbW1lbnQoXCIgZW5kIG5nU3dpdGNoV2hlbjogXCIpO2gucHVzaCh7Y2xvbmU6ZH0pO2EuZW50ZXIoZCxmLnBhcmVudCgpLGYpfSl9KX0pfX19XSxyZT1KYSh7dHJhbnNjbHVkZTpcImVsZW1lbnRcIixwcmlvcml0eToxMjAwLHJlcXVpcmU6XCJebmdTd2l0Y2hcIixtdWx0aUVsZW1lbnQ6ITAsbGluazpmdW5jdGlvbihhLGMsZCxlLGYpe2UuY2FzZXNbXCIhXCIrZC5uZ1N3aXRjaFdoZW5dPWUuY2FzZXNbXCIhXCIrZC5uZ1N3aXRjaFdoZW5dfHxbXTtlLmNhc2VzW1wiIVwiK2QubmdTd2l0Y2hXaGVuXS5wdXNoKHt0cmFuc2NsdWRlOmYsZWxlbWVudDpjfSl9fSksc2U9SmEoe3RyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6MTIwMCxyZXF1aXJlOlwiXm5nU3dpdGNoXCIsbXVsdGlFbGVtZW50OiEwLFxubGluazpmdW5jdGlvbihhLGMsZCxlLGYpe2UuY2FzZXNbXCI/XCJdPWUuY2FzZXNbXCI/XCJdfHxbXTtlLmNhc2VzW1wiP1wiXS5wdXNoKHt0cmFuc2NsdWRlOmYsZWxlbWVudDpjfSl9fSksdWU9SmEoe3Jlc3RyaWN0OlwiRUFDXCIsbGluazpmdW5jdGlvbihhLGMsZCxlLGYpe2lmKCFmKXRocm93IFMoXCJuZ1RyYW5zY2x1ZGVcIikoXCJvcnBoYW5cIix2YShjKSk7ZihmdW5jdGlvbihhKXtjLmVtcHR5KCk7Yy5hcHBlbmQoYSl9KX19KSxWZD1bXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVcIix0ZXJtaW5hbDohMCxjb21waWxlOmZ1bmN0aW9uKGMsZCl7XCJ0ZXh0L25nLXRlbXBsYXRlXCI9PWQudHlwZSYmYS5wdXQoZC5pZCxjWzBdLnRleHQpfX19XSxmZz1TKFwibmdPcHRpb25zXCIpLHRlPWVhKHtyZXN0cmljdDpcIkFcIix0ZXJtaW5hbDohMH0pLFdkPVtcIiRjb21waWxlXCIsXCIkcGFyc2VcIixmdW5jdGlvbihhLGMpe3ZhciBkPS9eXFxzKihbXFxzXFxTXSs/KSg/Olxccythc1xccysoW1xcc1xcU10rPykpPyg/Olxccytncm91cFxccytieVxccysoW1xcc1xcU10rPykpP1xccytmb3JcXHMrKD86KFtcXCRcXHddW1xcJFxcd10qKXwoPzpcXChcXHMqKFtcXCRcXHddW1xcJFxcd10qKVxccyosXFxzKihbXFwkXFx3XVtcXCRcXHddKilcXHMqXFwpKSlcXHMraW5cXHMrKFtcXHNcXFNdKz8pKD86XFxzK3RyYWNrXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/JC8sXG5lPXskc2V0Vmlld1ZhbHVlOnp9O3JldHVybntyZXN0cmljdDpcIkVcIixyZXF1aXJlOltcInNlbGVjdFwiLFwiP25nTW9kZWxcIl0sY29udHJvbGxlcjpbXCIkZWxlbWVudFwiLFwiJHNjb3BlXCIsXCIkYXR0cnNcIixmdW5jdGlvbihhLGMsZCl7dmFyIGw9dGhpcyxrPXt9LG09ZSxuO2wuZGF0YWJvdW5kPWQubmdNb2RlbDtsLmluaXQ9ZnVuY3Rpb24oYSxjLGQpe209YTtuPWR9O2wuYWRkT3B0aW9uPWZ1bmN0aW9uKGMsZCl7TWEoYywnXCJvcHRpb24gdmFsdWVcIicpO2tbY109ITA7bS4kdmlld1ZhbHVlPT1jJiYoYS52YWwoYyksbi5wYXJlbnQoKSYmbi5yZW1vdmUoKSk7ZCYmZFswXS5oYXNBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiKSYmKGRbMF0uc2VsZWN0ZWQ9ITApfTtsLnJlbW92ZU9wdGlvbj1mdW5jdGlvbihhKXt0aGlzLmhhc09wdGlvbihhKSYmKGRlbGV0ZSBrW2FdLG0uJHZpZXdWYWx1ZT09PWEmJnRoaXMucmVuZGVyVW5rbm93bk9wdGlvbihhKSl9O2wucmVuZGVyVW5rbm93bk9wdGlvbj1mdW5jdGlvbihjKXtjPVxuXCI/IFwiK05hKGMpK1wiID9cIjtuLnZhbChjKTthLnByZXBlbmQobik7YS52YWwoYyk7bi5wcm9wKFwic2VsZWN0ZWRcIiwhMCl9O2wuaGFzT3B0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiBrLmhhc093blByb3BlcnR5KGEpfTtjLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtsLnJlbmRlclVua25vd25PcHRpb249en0pfV0sbGluazpmdW5jdGlvbihlLGcsaCxsKXtmdW5jdGlvbiBrKGEsYyxkLGUpe2QuJHJlbmRlcj1mdW5jdGlvbigpe3ZhciBhPWQuJHZpZXdWYWx1ZTtlLmhhc09wdGlvbihhKT8oQy5wYXJlbnQoKSYmQy5yZW1vdmUoKSxjLnZhbChhKSxcIlwiPT09YSYmcC5wcm9wKFwic2VsZWN0ZWRcIiwhMCkpOkIoYSkmJnA/Yy52YWwoXCJcIik6ZS5yZW5kZXJVbmtub3duT3B0aW9uKGEpfTtjLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXthLiRhcHBseShmdW5jdGlvbigpe0MucGFyZW50KCkmJkMucmVtb3ZlKCk7ZC4kc2V0Vmlld1ZhbHVlKGMudmFsKCkpfSl9KX1mdW5jdGlvbiBtKGEsYyxkKXt2YXIgZTtcbmQuJHJlbmRlcj1mdW5jdGlvbigpe3ZhciBhPW5ldyBlYihkLiR2aWV3VmFsdWUpO3MoYy5maW5kKFwib3B0aW9uXCIpLGZ1bmN0aW9uKGMpe2Muc2VsZWN0ZWQ9eShhLmdldChjLnZhbHVlKSl9KX07YS4kd2F0Y2goZnVuY3Rpb24oKXtnYShlLGQuJHZpZXdWYWx1ZSl8fChlPXJhKGQuJHZpZXdWYWx1ZSksZC4kcmVuZGVyKCkpfSk7Yy5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7YS4kYXBwbHkoZnVuY3Rpb24oKXt2YXIgYT1bXTtzKGMuZmluZChcIm9wdGlvblwiKSxmdW5jdGlvbihjKXtjLnNlbGVjdGVkJiZhLnB1c2goYy52YWx1ZSl9KTtkLiRzZXRWaWV3VmFsdWUoYSl9KX0pfWZ1bmN0aW9uIG4oZSxmLGcpe2Z1bmN0aW9uIGgoYSxjLGQpe1NbeF09ZDtEJiYoU1tEXT1jKTtyZXR1cm4gYShlLFMpfWZ1bmN0aW9uIGsoYSl7dmFyIGM7aWYodSlpZihNJiZIKGEpKXtjPW5ldyBlYihbXSk7Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aDtkKyspYy5wdXQoaChNLG51bGwsYVtkXSksITApfWVsc2UgYz1cbm5ldyBlYihhKTtlbHNlIE0mJihhPWgoTSxudWxsLGEpKTtyZXR1cm4gZnVuY3Rpb24oZCxlKXt2YXIgZjtmPU0/TTpCP0I6RjtyZXR1cm4gdT95KGMucmVtb3ZlKGgoZixkLGUpKSk6YT09PWgoZixkLGUpfX1mdW5jdGlvbiBsKCl7dnx8KGUuJCRwb3N0RGlnZXN0KHApLHY9ITApfWZ1bmN0aW9uIG0oYSxjLGQpe2FbY109YVtjXXx8MDthW2NdKz1kPzE6LTF9ZnVuY3Rpb24gcCgpe3Y9ITE7dmFyIGE9e1wiXCI6W119LGM9W1wiXCJdLGQsbCxuLHIsdDtuPWcuJHZpZXdWYWx1ZTtyPU8oZSl8fFtdO3ZhciBCPUQ/T2JqZWN0LmtleXMocikuc29ydCgpOnIseCxBLEgsRixOPXt9O3Q9ayhuKTt2YXIgSj0hMSxVLFY7UT17fTtmb3IoRj0wO0g9Qi5sZW5ndGgsRjxIO0YrKyl7eD1GO2lmKEQmJih4PUJbRl0sXCIkXCI9PT14LmNoYXJBdCgwKSkpY29udGludWU7QT1yW3hdO2Q9aChJLHgsQSl8fFwiXCI7KGw9YVtkXSl8fChsPWFbZF09W10sYy5wdXNoKGQpKTtkPXQoeCxBKTtKPUp8fGQ7QT1oKEMseCxBKTtcbkE9eShBKT9BOlwiXCI7Vj1NP00oZSxTKTpEP0JbRl06RjtNJiYoUVtWXT14KTtsLnB1c2goe2lkOlYsbGFiZWw6QSxzZWxlY3RlZDpkfSl9dXx8KHp8fG51bGw9PT1uP2FbXCJcIl0udW5zaGlmdCh7aWQ6XCJcIixsYWJlbDpcIlwiLHNlbGVjdGVkOiFKfSk6Snx8YVtcIlwiXS51bnNoaWZ0KHtpZDpcIj9cIixsYWJlbDpcIlwiLHNlbGVjdGVkOiEwfSkpO3g9MDtmb3IoQj1jLmxlbmd0aDt4PEI7eCsrKXtkPWNbeF07bD1hW2RdO1IubGVuZ3RoPD14PyhuPXtlbGVtZW50OkcuY2xvbmUoKS5hdHRyKFwibGFiZWxcIixkKSxsYWJlbDpsLmxhYmVsfSxyPVtuXSxSLnB1c2gociksZi5hcHBlbmQobi5lbGVtZW50KSk6KHI9Ult4XSxuPXJbMF0sbi5sYWJlbCE9ZCYmbi5lbGVtZW50LmF0dHIoXCJsYWJlbFwiLG4ubGFiZWw9ZCkpO0o9bnVsbDtGPTA7Zm9yKEg9bC5sZW5ndGg7RjxIO0YrKylkPWxbRl0sKHQ9cltGKzFdKT8oSj10LmVsZW1lbnQsdC5sYWJlbCE9PWQubGFiZWwmJihtKE4sdC5sYWJlbCwhMSksbShOLGQubGFiZWwsXG4hMCksSi50ZXh0KHQubGFiZWw9ZC5sYWJlbCksSi5wcm9wKFwibGFiZWxcIix0LmxhYmVsKSksdC5pZCE9PWQuaWQmJkoudmFsKHQuaWQ9ZC5pZCksSlswXS5zZWxlY3RlZCE9PWQuc2VsZWN0ZWQmJihKLnByb3AoXCJzZWxlY3RlZFwiLHQuc2VsZWN0ZWQ9ZC5zZWxlY3RlZCksUmEmJkoucHJvcChcInNlbGVjdGVkXCIsdC5zZWxlY3RlZCkpKTooXCJcIj09PWQuaWQmJno/VT16OihVPXcuY2xvbmUoKSkudmFsKGQuaWQpLnByb3AoXCJzZWxlY3RlZFwiLGQuc2VsZWN0ZWQpLmF0dHIoXCJzZWxlY3RlZFwiLGQuc2VsZWN0ZWQpLnByb3AoXCJsYWJlbFwiLGQubGFiZWwpLnRleHQoZC5sYWJlbCksci5wdXNoKHQ9e2VsZW1lbnQ6VSxsYWJlbDpkLmxhYmVsLGlkOmQuaWQsc2VsZWN0ZWQ6ZC5zZWxlY3RlZH0pLG0oTixkLmxhYmVsLCEwKSxKP0ouYWZ0ZXIoVSk6bi5lbGVtZW50LmFwcGVuZChVKSxKPVUpO2ZvcihGKys7ci5sZW5ndGg+RjspZD1yLnBvcCgpLG0oTixkLmxhYmVsLCExKSxkLmVsZW1lbnQucmVtb3ZlKCl9Zm9yKDtSLmxlbmd0aD5cbng7KXtsPVIucG9wKCk7Zm9yKEY9MTtGPGwubGVuZ3RoOysrRiltKE4sbFtGXS5sYWJlbCwhMSk7bFswXS5lbGVtZW50LnJlbW92ZSgpfXMoTixmdW5jdGlvbihhLGMpezA8YT9xLmFkZE9wdGlvbihjKTowPmEmJnEucmVtb3ZlT3B0aW9uKGMpfSl9dmFyIG47aWYoIShuPXIubWF0Y2goZCkpKXRocm93IGZnKFwiaWV4cFwiLHIsdmEoZikpO3ZhciBDPWMoblsyXXx8blsxXSkseD1uWzRdfHxuWzZdLEE9LyBhcyAvLnRlc3QoblswXSkmJm5bMV0sQj1BP2MoQSk6bnVsbCxEPW5bNV0sST1jKG5bM118fFwiXCIpLEY9YyhuWzJdP25bMV06eCksTz1jKG5bN10pLE09bls4XT9jKG5bOF0pOm51bGwsUT17fSxSPVtbe2VsZW1lbnQ6ZixsYWJlbDpcIlwifV1dLFM9e307eiYmKGEoeikoZSksei5yZW1vdmVDbGFzcyhcIm5nLXNjb3BlXCIpLHoucmVtb3ZlKCkpO2YuZW1wdHkoKTtmLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXtlLiRhcHBseShmdW5jdGlvbigpe3ZhciBhPU8oZSl8fFtdLGM7aWYodSljPVtdLHMoZi52YWwoKSxcbmZ1bmN0aW9uKGQpe2Q9TT9RW2RdOmQ7Yy5wdXNoKFwiP1wiPT09ZD90OlwiXCI9PT1kP251bGw6aChCP0I6RixkLGFbZF0pKX0pO2Vsc2V7dmFyIGQ9TT9RW2YudmFsKCldOmYudmFsKCk7Yz1cIj9cIj09PWQ/dDpcIlwiPT09ZD9udWxsOmgoQj9COkYsZCxhW2RdKX1nLiRzZXRWaWV3VmFsdWUoYyk7cCgpfSl9KTtnLiRyZW5kZXI9cDtlLiR3YXRjaENvbGxlY3Rpb24oTyxsKTtlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKXt2YXIgYT1PKGUpLGM7aWYoYSYmSChhKSl7Yz1BcnJheShhLmxlbmd0aCk7Zm9yKHZhciBkPTAsZj1hLmxlbmd0aDtkPGY7ZCsrKWNbZF09aChDLGQsYVtkXSl9ZWxzZSBpZihhKWZvcihkIGluIGM9e30sYSlhLmhhc093blByb3BlcnR5KGQpJiYoY1tkXT1oKEMsZCxhW2RdKSk7cmV0dXJuIGN9LGwpO3UmJmUuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbigpe3JldHVybiBnLiRtb2RlbFZhbHVlfSxsKX1pZihsWzFdKXt2YXIgcT1sWzBdO2w9bFsxXTt2YXIgdT1oLm11bHRpcGxlLFxucj1oLm5nT3B0aW9ucyx6PSExLHAsdj0hMSx3PUQoWS5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpKSxHPUQoWS5jcmVhdGVFbGVtZW50KFwib3B0Z3JvdXBcIikpLEM9dy5jbG9uZSgpO2g9MDtmb3IodmFyIEE9Zy5jaGlsZHJlbigpLHg9QS5sZW5ndGg7aDx4O2grKylpZihcIlwiPT09QVtoXS52YWx1ZSl7cD16PUEuZXEoaCk7YnJlYWt9cS5pbml0KGwseixDKTt1JiYobC4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4hYXx8MD09PWEubGVuZ3RofSk7cj9uKGUsZyxsKTp1P20oZSxnLGwpOmsoZSxnLGwscSl9fX19XSxZZD1bXCIkaW50ZXJwb2xhdGVcIixmdW5jdGlvbihhKXt2YXIgYz17YWRkT3B0aW9uOnoscmVtb3ZlT3B0aW9uOnp9O3JldHVybntyZXN0cmljdDpcIkVcIixwcmlvcml0eToxMDAsY29tcGlsZTpmdW5jdGlvbihkLGUpe2lmKEIoZS52YWx1ZSkpe3ZhciBmPWEoZC50ZXh0KCksITApO2Z8fGUuJHNldChcInZhbHVlXCIsZC50ZXh0KCkpfXJldHVybiBmdW5jdGlvbihhLGQsZSl7dmFyIGs9XG5kLnBhcmVudCgpLG09ay5kYXRhKFwiJHNlbGVjdENvbnRyb2xsZXJcIil8fGsucGFyZW50KCkuZGF0YShcIiRzZWxlY3RDb250cm9sbGVyXCIpO20mJm0uZGF0YWJvdW5kfHwobT1jKTtmP2EuJHdhdGNoKGYsZnVuY3Rpb24oYSxjKXtlLiRzZXQoXCJ2YWx1ZVwiLGEpO2MhPT1hJiZtLnJlbW92ZU9wdGlvbihjKTttLmFkZE9wdGlvbihhLGQpfSk6bS5hZGRPcHRpb24oZS52YWx1ZSxkKTtkLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe20ucmVtb3ZlT3B0aW9uKGUudmFsdWUpfSl9fX19XSxYZD1lYSh7cmVzdHJpY3Q6XCJFXCIsdGVybWluYWw6ITF9KSxBYz1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwiP25nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYyxkLGUpe2UmJihkLnJlcXVpcmVkPSEwLGUuJHZhbGlkYXRvcnMucmVxdWlyZWQ9ZnVuY3Rpb24oYSxjKXtyZXR1cm4hZC5yZXF1aXJlZHx8IWUuJGlzRW1wdHkoYyl9LGQuJG9ic2VydmUoXCJyZXF1aXJlZFwiLGZ1bmN0aW9uKCl7ZS4kdmFsaWRhdGUoKX0pKX19fSxcbnpjPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCI/bmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7aWYoZSl7dmFyIGYsZz1kLm5nUGF0dGVybnx8ZC5wYXR0ZXJuO2QuJG9ic2VydmUoXCJwYXR0ZXJuXCIsZnVuY3Rpb24oYSl7RihhKSYmMDxhLmxlbmd0aCYmKGE9bmV3IFJlZ0V4cChcIl5cIithK1wiJFwiKSk7aWYoYSYmIWEudGVzdCl0aHJvdyBTKFwibmdQYXR0ZXJuXCIpKFwibm9yZWdleHBcIixnLGEsdmEoYykpO2Y9YXx8dDtlLiR2YWxpZGF0ZSgpfSk7ZS4kdmFsaWRhdG9ycy5wYXR0ZXJuPWZ1bmN0aW9uKGEpe3JldHVybiBlLiRpc0VtcHR5KGEpfHxCKGYpfHxmLnRlc3QoYSl9fX19fSxDYz1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwiP25nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYyxkLGUpe2lmKGUpe3ZhciBmPS0xO2QuJG9ic2VydmUoXCJtYXhsZW5ndGhcIixmdW5jdGlvbihhKXthPWJhKGEpO2Y9aXNOYU4oYSk/LTE6YTtlLiR2YWxpZGF0ZSgpfSk7XG5lLiR2YWxpZGF0b3JzLm1heGxlbmd0aD1mdW5jdGlvbihhLGMpe3JldHVybiAwPmZ8fGUuJGlzRW1wdHkoYyl8fGMubGVuZ3RoPD1mfX19fX0sQmM9ZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpcIj9uZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGMsZCxlKXtpZihlKXt2YXIgZj0wO2QuJG9ic2VydmUoXCJtaW5sZW5ndGhcIixmdW5jdGlvbihhKXtmPWJhKGEpfHwwO2UuJHZhbGlkYXRlKCl9KTtlLiR2YWxpZGF0b3JzLm1pbmxlbmd0aD1mdW5jdGlvbihhLGMpe3JldHVybiBlLiRpc0VtcHR5KGMpfHxjLmxlbmd0aD49Zn19fX19O00uYW5ndWxhci5ib290c3RyYXA/Y29uc29sZS5sb2coXCJXQVJOSU5HOiBUcmllZCB0byBsb2FkIGFuZ3VsYXIgbW9yZSB0aGFuIG9uY2UuXCIpOihOZCgpLFBkKGNhKSxEKFkpLnJlYWR5KGZ1bmN0aW9uKCl7SmQoWSx0Yyl9KSl9KSh3aW5kb3csZG9jdW1lbnQpOyF3aW5kb3cuYW5ndWxhci4kJGNzcCgpJiZ3aW5kb3cuYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5maW5kKFwiaGVhZFwiKS5wcmVwZW5kKCc8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+QGNoYXJzZXQgXCJVVEYtOFwiO1tuZ1xcXFw6Y2xvYWtdLFtuZy1jbG9ha10sW2RhdGEtbmctY2xvYWtdLFt4LW5nLWNsb2FrXSwubmctY2xvYWssLngtbmctY2xvYWssLm5nLWhpZGU6bm90KC5uZy1oaWRlLWFuaW1hdGUpe2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O31uZ1xcXFw6Zm9ybXtkaXNwbGF5OmJsb2NrO308L3N0eWxlPicpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5ndWxhci5taW4uanMubWFwXG4iLCIvKlxuIEFuZ3VsYXJKUyB2MS4zLjBcbiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuIExpY2Vuc2U6IE1JVFxuKi9cbihmdW5jdGlvbihNLGYsUyl7J3VzZSBzdHJpY3QnO2YubW9kdWxlKFwibmdBbmltYXRlXCIsW1wibmdcIl0pLmRpcmVjdGl2ZShcIm5nQW5pbWF0ZUNoaWxkcmVuXCIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oVCxCLGspe2s9ay5uZ0FuaW1hdGVDaGlsZHJlbjtmLmlzU3RyaW5nKGspJiYwPT09ay5sZW5ndGg/Qi5kYXRhKFwiJCRuZ0FuaW1hdGVDaGlsZHJlblwiLCEwKTpULiR3YXRjaChrLGZ1bmN0aW9uKGYpe0IuZGF0YShcIiQkbmdBbmltYXRlQ2hpbGRyZW5cIiwhIWYpfSl9fSkuZmFjdG9yeShcIiQkYW5pbWF0ZVJlZmxvd1wiLFtcIiQkckFGXCIsXCIkZG9jdW1lbnRcIixmdW5jdGlvbihmLEIpe3JldHVybiBmdW5jdGlvbihrKXtyZXR1cm4gZihmdW5jdGlvbigpe2soKX0pfX1dKS5jb25maWcoW1wiJHByb3ZpZGVcIixcIiRhbmltYXRlUHJvdmlkZXJcIixmdW5jdGlvbihULEIpe2Z1bmN0aW9uIGsoZil7Zm9yKHZhciBnPTA7ZzxmLmxlbmd0aDtnKyspe3ZhciBrPWZbZ107aWYoMT09ay5ub2RlVHlwZSlyZXR1cm4ga319XG5mdW5jdGlvbiBOKGYsZyl7cmV0dXJuIGsoZik9PWsoZyl9dmFyIHM9Zi5ub29wLGc9Zi5mb3JFYWNoLGJhPUIuJCRzZWxlY3RvcnMsJD1mLmlzQXJyYXksY2E9Zi5pc1N0cmluZyxkYT1mLmlzT2JqZWN0LHQ9e3J1bm5pbmc6ITB9O1QuZGVjb3JhdG9yKFwiJGFuaW1hdGVcIixbXCIkZGVsZWdhdGVcIixcIiQkcVwiLFwiJGluamVjdG9yXCIsXCIkc25pZmZlclwiLFwiJHJvb3RFbGVtZW50XCIsXCIkJGFzeW5jQ2FsbGJhY2tcIixcIiRyb290U2NvcGVcIixcIiRkb2N1bWVudFwiLFwiJHRlbXBsYXRlUmVxdWVzdFwiLGZ1bmN0aW9uKE8sTSxJLFUseCxDLFAsUyxWKXtmdW5jdGlvbiBBKGEsYyl7dmFyIGI9YS5kYXRhKFwiJCRuZ0FuaW1hdGVTdGF0ZVwiKXx8e307YyYmKGIucnVubmluZz0hMCxiLnN0cnVjdHVyYWw9ITAsYS5kYXRhKFwiJCRuZ0FuaW1hdGVTdGF0ZVwiLGIpKTtyZXR1cm4gYi5kaXNhYmxlZHx8Yi5ydW5uaW5nJiZiLnN0cnVjdHVyYWx9ZnVuY3Rpb24geihhKXt2YXIgYyxiPU0uZGVmZXIoKTtiLnByb21pc2UuJCRjYW5jZWxGbj1cbmZ1bmN0aW9uKCl7YyYmYygpfTtQLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe2M9YShmdW5jdGlvbigpe2IucmVzb2x2ZSgpfSl9KTtyZXR1cm4gYi5wcm9taXNlfWZ1bmN0aW9uIEooYSl7aWYoZGEoYSkpcmV0dXJuIGEudGVtcENsYXNzZXMmJmNhKGEudGVtcENsYXNzZXMpJiYoYS50ZW1wQ2xhc3Nlcz1hLnRlbXBDbGFzc2VzLnNwbGl0KC9cXHMrLykpLGF9ZnVuY3Rpb24gVyhhLGMsYil7Yj1ifHx7fTt2YXIgZT17fTtnKGIsZnVuY3Rpb24oYSxkKXtnKGQuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGQpe2VbZF09YX0pfSk7dmFyIG09T2JqZWN0LmNyZWF0ZShudWxsKTtnKChhLmF0dHIoXCJjbGFzc1wiKXx8XCJcIikuc3BsaXQoL1xccysvKSxmdW5jdGlvbihhKXttW2FdPSEwfSk7dmFyIGY9W10saz1bXTtnKGMuY2xhc3NlcyxmdW5jdGlvbihhLGQpe3ZhciBiPW1bZF0sYz1lW2RdfHx7fTshMT09PWE/KGJ8fFwiYWRkQ2xhc3NcIj09Yy5ldmVudCkmJmsucHVzaChkKTohMD09PWEmJihiJiZcInJlbW92ZUNsYXNzXCIhPVxuYy5ldmVudHx8Zi5wdXNoKGQpKX0pO3JldHVybiAwPGYubGVuZ3RoK2subGVuZ3RoJiZbZi5qb2luKFwiIFwiKSxrLmpvaW4oXCIgXCIpXX1mdW5jdGlvbiBRKGEpe2lmKGEpe3ZhciBjPVtdLGI9e307YT1hLnN1YnN0cigxKS5zcGxpdChcIi5cIik7KFUudHJhbnNpdGlvbnN8fFUuYW5pbWF0aW9ucykmJmMucHVzaChJLmdldChiYVtcIlwiXSkpO2Zvcih2YXIgZT0wO2U8YS5sZW5ndGg7ZSsrKXt2YXIgZj1hW2VdLGs9YmFbZl07ayYmIWJbZl0mJihjLnB1c2goSS5nZXQoaykpLGJbZl09ITApfXJldHVybiBjfX1mdW5jdGlvbiBSKGEsYyxiLGUpe2Z1bmN0aW9uIG0oYSxkKXt2YXIgYj1hW2RdLGM9YVtcImJlZm9yZVwiK2QuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZC5zdWJzdHIoMSldO2lmKGJ8fGMpcmV0dXJuXCJsZWF2ZVwiPT1kJiYoYz1iLGI9bnVsbCksbC5wdXNoKHtldmVudDpkLGZuOmJ9KSxILnB1c2goe2V2ZW50OmQsZm46Y30pLCEwfWZ1bmN0aW9uIGsoYyxoLEcpe3ZhciB3PVtdO2coYyxmdW5jdGlvbihhKXthLmZuJiZcbncucHVzaChhKX0pO3ZhciBmPTA7Zyh3LGZ1bmN0aW9uKGMsbil7dmFyIHU9ZnVuY3Rpb24oKXthOntpZihoKXsoaFtuXXx8cykoKTtpZigrK2Y8dy5sZW5ndGgpYnJlYWsgYTtoPW51bGx9RygpfX07c3dpdGNoKGMuZXZlbnQpe2Nhc2UgXCJzZXRDbGFzc1wiOmgucHVzaChjLmZuKGEsRixkLHUsZSkpO2JyZWFrO2Nhc2UgXCJhbmltYXRlXCI6aC5wdXNoKGMuZm4oYSxiLGUuZnJvbSxlLnRvLHUpKTticmVhaztjYXNlIFwiYWRkQ2xhc3NcIjpoLnB1c2goYy5mbihhLEZ8fGIsdSxlKSk7YnJlYWs7Y2FzZSBcInJlbW92ZUNsYXNzXCI6aC5wdXNoKGMuZm4oYSxkfHxiLHUsZSkpO2JyZWFrO2RlZmF1bHQ6aC5wdXNoKGMuZm4oYSx1LGUpKX19KTtoJiYwPT09aC5sZW5ndGgmJkcoKX12YXIgcD1hWzBdO2lmKHApe2UmJihlLnRvPWUudG98fHt9LGUuZnJvbT1lLmZyb218fHt9KTt2YXIgRixkOyQoYikmJihGPWJbMF0sZD1iWzFdLEY/ZD9iPUYrXCIgXCIrZDooYj1GLGM9XCJhZGRDbGFzc1wiKTooYj1kLGM9XCJyZW1vdmVDbGFzc1wiKSk7XG52YXIgaD1cInNldENsYXNzXCI9PWMsRz1ofHxcImFkZENsYXNzXCI9PWN8fFwicmVtb3ZlQ2xhc3NcIj09Y3x8XCJhbmltYXRlXCI9PWMsdz1hLmF0dHIoXCJjbGFzc1wiKStcIiBcIitiO2lmKFgodykpe3ZhciB1PXMsbj1bXSxIPVtdLHE9cyxyPVtdLGw9W10sdz0oXCIgXCIrdykucmVwbGFjZSgvXFxzKy9nLFwiLlwiKTtnKFEodyksZnVuY3Rpb24oYSl7IW0oYSxjKSYmaCYmKG0oYSxcImFkZENsYXNzXCIpLG0oYSxcInJlbW92ZUNsYXNzXCIpKX0pO3JldHVybntub2RlOnAsZXZlbnQ6YyxjbGFzc05hbWU6Yixpc0NsYXNzQmFzZWQ6Ryxpc1NldENsYXNzT3BlcmF0aW9uOmgsYXBwbHlTdHlsZXM6ZnVuY3Rpb24oKXtlJiZhLmNzcyhmLmV4dGVuZChlLmZyb218fHt9LGUudG98fHt9KSl9LGJlZm9yZTpmdW5jdGlvbihhKXt1PWE7ayhILG4sZnVuY3Rpb24oKXt1PXM7YSgpfSl9LGFmdGVyOmZ1bmN0aW9uKGEpe3E9YTtrKGwscixmdW5jdGlvbigpe3E9czthKCl9KX0sY2FuY2VsOmZ1bmN0aW9uKCl7biYmKGcobixmdW5jdGlvbihhKXsoYXx8XG5zKSghMCl9KSx1KCEwKSk7ciYmKGcocixmdW5jdGlvbihhKXsoYXx8cykoITApfSkscSghMCkpfX19fX1mdW5jdGlvbiB5KGEsYyxiLGUsbSxrLHAsRil7ZnVuY3Rpb24gZChkKXt2YXIgaD1cIiRhbmltYXRlOlwiK2Q7SCYmSFtoXSYmMDxIW2hdLmxlbmd0aCYmQyhmdW5jdGlvbigpe2IudHJpZ2dlckhhbmRsZXIoaCx7ZXZlbnQ6YSxjbGFzc05hbWU6Y30pfSl9ZnVuY3Rpb24gaCgpe2QoXCJiZWZvcmVcIil9ZnVuY3Rpb24gRygpe2QoXCJhZnRlclwiKX1mdW5jdGlvbiB3KCl7dy5oYXNCZWVuUnVufHwody5oYXNCZWVuUnVuPSEwLGsoKSl9ZnVuY3Rpb24gdSgpe2lmKCF1Lmhhc0JlZW5SdW4pe24mJm4uYXBwbHlTdHlsZXMoKTt1Lmhhc0JlZW5SdW49ITA7cCYmcC50ZW1wQ2xhc3NlcyYmZyhwLnRlbXBDbGFzc2VzLGZ1bmN0aW9uKGEpe2IucmVtb3ZlQ2xhc3MoYSl9KTt2YXIgaD1iLmRhdGEoXCIkJG5nQW5pbWF0ZVN0YXRlXCIpO2gmJihuJiZuLmlzQ2xhc3NCYXNlZD9sKGIsYyk6KEMoZnVuY3Rpb24oKXt2YXIgZD1cbmIuZGF0YShcIiQkbmdBbmltYXRlU3RhdGVcIil8fHt9O3Y9PWQuaW5kZXgmJmwoYixjLGEpfSksYi5kYXRhKFwiJCRuZ0FuaW1hdGVTdGF0ZVwiLGgpKSk7ZChcImNsb3NlXCIpO0YoKX19dmFyIG49UihiLGEsYyxwKTtpZighbilyZXR1cm4gdygpLGgoKSxHKCksdSgpLHM7YT1uLmV2ZW50O2M9bi5jbGFzc05hbWU7dmFyIEg9Zi5lbGVtZW50Ll9kYXRhKG4ubm9kZSksSD1IJiZILmV2ZW50cztlfHwoZT1tP20ucGFyZW50KCk6Yi5wYXJlbnQoKSk7aWYoWShiLGUpKXJldHVybiB3KCksaCgpLEcoKSx1KCkscztlPWIuZGF0YShcIiQkbmdBbmltYXRlU3RhdGVcIil8fHt9O3ZhciBxPWUuYWN0aXZlfHx7fSxyPWUudG90YWxBY3RpdmV8fDAsdD1lLmxhc3Q7bT0hMTtpZigwPHIpe3I9W107aWYobi5pc0NsYXNzQmFzZWQpXCJzZXRDbGFzc1wiPT10LmV2ZW50PyhyLnB1c2godCksbChiLGMpKTpxW2NdJiYoYWE9cVtjXSxhYS5ldmVudD09YT9tPSEwOihyLnB1c2goYWEpLGwoYixjKSkpO2Vsc2UgaWYoXCJsZWF2ZVwiPT1cbmEmJnFbXCJuZy1sZWF2ZVwiXSltPSEwO2Vsc2V7Zm9yKHZhciBhYSBpbiBxKXIucHVzaChxW2FhXSk7ZT17fTtsKGIsITApfTA8ci5sZW5ndGgmJmcocixmdW5jdGlvbihhKXthLmNhbmNlbCgpfSl9IW4uaXNDbGFzc0Jhc2VkfHxuLmlzU2V0Q2xhc3NPcGVyYXRpb258fFwiYW5pbWF0ZVwiPT1hfHxtfHwobT1cImFkZENsYXNzXCI9PWE9PWIuaGFzQ2xhc3MoYykpO2lmKG0pcmV0dXJuIHcoKSxoKCksRygpLGQoXCJjbG9zZVwiKSxGKCkscztxPWUuYWN0aXZlfHx7fTtyPWUudG90YWxBY3RpdmV8fDA7aWYoXCJsZWF2ZVwiPT1hKWIub25lKFwiJGRlc3Ryb3lcIixmdW5jdGlvbihhKXthPWYuZWxlbWVudCh0aGlzKTt2YXIgZD1hLmRhdGEoXCIkJG5nQW5pbWF0ZVN0YXRlXCIpO2QmJihkPWQuYWN0aXZlW1wibmctbGVhdmVcIl0pJiYoZC5jYW5jZWwoKSxsKGEsXCJuZy1sZWF2ZVwiKSl9KTtiLmFkZENsYXNzKFwibmctYW5pbWF0ZVwiKTtwJiZwLnRlbXBDbGFzc2VzJiZnKHAudGVtcENsYXNzZXMsZnVuY3Rpb24oYSl7Yi5hZGRDbGFzcyhhKX0pO1xudmFyIHY9WisrO3IrKztxW2NdPW47Yi5kYXRhKFwiJCRuZ0FuaW1hdGVTdGF0ZVwiLHtsYXN0Om4sYWN0aXZlOnEsaW5kZXg6dix0b3RhbEFjdGl2ZTpyfSk7aCgpO24uYmVmb3JlKGZ1bmN0aW9uKGQpe3ZhciBoPWIuZGF0YShcIiQkbmdBbmltYXRlU3RhdGVcIik7ZD1kfHwhaHx8IWguYWN0aXZlW2NdfHxuLmlzQ2xhc3NCYXNlZCYmaC5hY3RpdmVbY10uZXZlbnQhPWE7dygpOyEwPT09ZD91KCk6KEcoKSxuLmFmdGVyKHUpKX0pO3JldHVybiBuLmNhbmNlbH1mdW5jdGlvbiBLKGEpe2lmKGE9ayhhKSlhPWYuaXNGdW5jdGlvbihhLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpP2EuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm5nLWFuaW1hdGVcIik6YS5xdWVyeVNlbGVjdG9yQWxsKFwiLm5nLWFuaW1hdGVcIiksZyhhLGZ1bmN0aW9uKGEpe2E9Zi5lbGVtZW50KGEpOyhhPWEuZGF0YShcIiQkbmdBbmltYXRlU3RhdGVcIikpJiZhLmFjdGl2ZSYmZyhhLmFjdGl2ZSxmdW5jdGlvbihhKXthLmNhbmNlbCgpfSl9KX1cbmZ1bmN0aW9uIGwoYSxjKXtpZihOKGEseCkpdC5kaXNhYmxlZHx8KHQucnVubmluZz0hMSx0LnN0cnVjdHVyYWw9ITEpO2Vsc2UgaWYoYyl7dmFyIGI9YS5kYXRhKFwiJCRuZ0FuaW1hdGVTdGF0ZVwiKXx8e30sZT0hMD09PWM7IWUmJmIuYWN0aXZlJiZiLmFjdGl2ZVtjXSYmKGIudG90YWxBY3RpdmUtLSxkZWxldGUgYi5hY3RpdmVbY10pO2lmKGV8fCFiLnRvdGFsQWN0aXZlKWEucmVtb3ZlQ2xhc3MoXCJuZy1hbmltYXRlXCIpLGEucmVtb3ZlRGF0YShcIiQkbmdBbmltYXRlU3RhdGVcIil9fWZ1bmN0aW9uIFkoYSxjKXtpZih0LmRpc2FibGVkKXJldHVybiEwO2lmKE4oYSx4KSlyZXR1cm4gdC5ydW5uaW5nO3ZhciBiLGUsaztkb3tpZigwPT09Yy5sZW5ndGgpYnJlYWs7dmFyIGc9TihjLHgpLHA9Zz90OmMuZGF0YShcIiQkbmdBbmltYXRlU3RhdGVcIil8fHt9O2lmKHAuZGlzYWJsZWQpcmV0dXJuITA7ZyYmKGs9ITApOyExIT09YiYmKGc9Yy5kYXRhKFwiJCRuZ0FuaW1hdGVDaGlsZHJlblwiKSxmLmlzRGVmaW5lZChnKSYmXG4oYj1nKSk7ZT1lfHxwLnJ1bm5pbmd8fHAubGFzdCYmIXAubGFzdC5pc0NsYXNzQmFzZWR9d2hpbGUoYz1jLnBhcmVudCgpKTtyZXR1cm4ha3x8IWImJmV9eC5kYXRhKFwiJCRuZ0FuaW1hdGVTdGF0ZVwiLHQpO3ZhciBMPVAuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIFYudG90YWxQZW5kaW5nUmVxdWVzdHN9LGZ1bmN0aW9uKGEsYyl7MD09PWEmJihMKCksUC4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtQLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe3QucnVubmluZz0hMX0pfSkpfSksWj0wLEU9Qi5jbGFzc05hbWVGaWx0ZXIoKSxYPUU/ZnVuY3Rpb24oYSl7cmV0dXJuIEUudGVzdChhKX06ZnVuY3Rpb24oKXtyZXR1cm4hMH07cmV0dXJue2FuaW1hdGU6ZnVuY3Rpb24oYSxjLGIsZSxnKXtlPWV8fFwibmctaW5saW5lLWFuaW1hdGVcIjtnPUooZyl8fHt9O2cuZnJvbT1iP2M6bnVsbDtnLnRvPWI/YjpjO3JldHVybiB6KGZ1bmN0aW9uKGIpe3JldHVybiB5KFwiYW5pbWF0ZVwiLGUsZi5lbGVtZW50KGsoYSkpLFxubnVsbCxudWxsLHMsZyxiKX0pfSxlbnRlcjpmdW5jdGlvbihhLGMsYixlKXtlPUooZSk7YT1mLmVsZW1lbnQoYSk7Yz1jJiZmLmVsZW1lbnQoYyk7Yj1iJiZmLmVsZW1lbnQoYik7QShhLCEwKTtPLmVudGVyKGEsYyxiKTtyZXR1cm4geihmdW5jdGlvbihnKXtyZXR1cm4geShcImVudGVyXCIsXCJuZy1lbnRlclwiLGYuZWxlbWVudChrKGEpKSxjLGIscyxlLGcpfSl9LGxlYXZlOmZ1bmN0aW9uKGEsYyl7Yz1KKGMpO2E9Zi5lbGVtZW50KGEpO0soYSk7QShhLCEwKTtyZXR1cm4geihmdW5jdGlvbihiKXtyZXR1cm4geShcImxlYXZlXCIsXCJuZy1sZWF2ZVwiLGYuZWxlbWVudChrKGEpKSxudWxsLG51bGwsZnVuY3Rpb24oKXtPLmxlYXZlKGEpfSxjLGIpfSl9LG1vdmU6ZnVuY3Rpb24oYSxjLGIsZSl7ZT1KKGUpO2E9Zi5lbGVtZW50KGEpO2M9YyYmZi5lbGVtZW50KGMpO2I9YiYmZi5lbGVtZW50KGIpO0soYSk7QShhLCEwKTtPLm1vdmUoYSxjLGIpO3JldHVybiB6KGZ1bmN0aW9uKGcpe3JldHVybiB5KFwibW92ZVwiLFxuXCJuZy1tb3ZlXCIsZi5lbGVtZW50KGsoYSkpLGMsYixzLGUsZyl9KX0sYWRkQ2xhc3M6ZnVuY3Rpb24oYSxjLGIpe3JldHVybiB0aGlzLnNldENsYXNzKGEsYyxbXSxiKX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSxjLGIpe3JldHVybiB0aGlzLnNldENsYXNzKGEsW10sYyxiKX0sc2V0Q2xhc3M6ZnVuY3Rpb24oYSxjLGIsZSl7ZT1KKGUpO2E9Zi5lbGVtZW50KGEpO2E9Zi5lbGVtZW50KGsoYSkpO2lmKEEoYSkpcmV0dXJuIE8uJCRzZXRDbGFzc0ltbWVkaWF0ZWx5KGEsYyxiLGUpO3ZhciBtLGw9YS5kYXRhKFwiJCRhbmltYXRlQ2xhc3Nlc1wiKSxwPSEhbDtsfHwobD17Y2xhc3Nlczp7fX0pO209bC5jbGFzc2VzO2M9JChjKT9jOmMuc3BsaXQoXCIgXCIpO2coYyxmdW5jdGlvbihhKXthJiZhLmxlbmd0aCYmKG1bYV09ITApfSk7Yj0kKGIpP2I6Yi5zcGxpdChcIiBcIik7ZyhiLGZ1bmN0aW9uKGEpe2EmJmEubGVuZ3RoJiYobVthXT0hMSl9KTtpZihwKXJldHVybiBlJiZsLm9wdGlvbnMmJihsLm9wdGlvbnM9XG5mLmV4dGVuZChsLm9wdGlvbnN8fHt9LGUpKSxsLnByb21pc2U7YS5kYXRhKFwiJCRhbmltYXRlQ2xhc3Nlc1wiLGw9e2NsYXNzZXM6bSxvcHRpb25zOmV9KTtyZXR1cm4gbC5wcm9taXNlPXooZnVuY3Rpb24oYil7dmFyIGQ9YS5wYXJlbnQoKSxoPWsoYSksYz1oLnBhcmVudE5vZGU7aWYoIWN8fGMuJCROR19SRU1PVkVEfHxoLiQkTkdfUkVNT1ZFRCliKCk7ZWxzZXtoPWEuZGF0YShcIiQkYW5pbWF0ZUNsYXNzZXNcIik7YS5yZW1vdmVEYXRhKFwiJCRhbmltYXRlQ2xhc3Nlc1wiKTt2YXIgYz1hLmRhdGEoXCIkJG5nQW5pbWF0ZVN0YXRlXCIpfHx7fSxlPVcoYSxoLGMuYWN0aXZlKTtyZXR1cm4gZT95KFwic2V0Q2xhc3NcIixlLGEsZCxudWxsLGZ1bmN0aW9uKCl7ZVswXSYmTy4kJGFkZENsYXNzSW1tZWRpYXRlbHkoYSxlWzBdKTtlWzFdJiZPLiQkcmVtb3ZlQ2xhc3NJbW1lZGlhdGVseShhLGVbMV0pfSxoLm9wdGlvbnMsYik6YigpfX0pfSxjYW5jZWw6ZnVuY3Rpb24oYSl7YS4kJGNhbmNlbEZuKCl9LFxuZW5hYmxlZDpmdW5jdGlvbihhLGMpe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDI6aWYoYSlsKGMpO2Vsc2V7dmFyIGI9Yy5kYXRhKFwiJCRuZ0FuaW1hdGVTdGF0ZVwiKXx8e307Yi5kaXNhYmxlZD0hMDtjLmRhdGEoXCIkJG5nQW5pbWF0ZVN0YXRlXCIsYil9YnJlYWs7Y2FzZSAxOnQuZGlzYWJsZWQ9IWE7YnJlYWs7ZGVmYXVsdDphPSF0LmRpc2FibGVkfXJldHVybiEhYX19fV0pO0IucmVnaXN0ZXIoXCJcIixbXCIkd2luZG93XCIsXCIkc25pZmZlclwiLFwiJHRpbWVvdXRcIixcIiQkYW5pbWF0ZVJlZmxvd1wiLGZ1bmN0aW9uKHQsQixJLFUpe2Z1bmN0aW9uIHgoKXtlfHwoZT1VKGZ1bmN0aW9uKCl7Yj1bXTtlPW51bGw7YT17fX0pKX1mdW5jdGlvbiBDKGMsZCl7ZSYmZSgpO2IucHVzaChkKTtlPVUoZnVuY3Rpb24oKXtnKGIsZnVuY3Rpb24oYSl7YSgpfSk7Yj1bXTtlPW51bGw7YT17fX0pfWZ1bmN0aW9uIFAoYSxkKXt2YXIgaD1rKGEpO2E9Zi5lbGVtZW50KGgpO3AucHVzaChhKTtoPURhdGUubm93KCkrXG5kO2g8PU58fChJLmNhbmNlbChtKSxOPWgsbT1JKGZ1bmN0aW9uKCl7VChwKTtwPVtdfSxkLCExKSl9ZnVuY3Rpb24gVChhKXtnKGEsZnVuY3Rpb24oYSl7KGE9YS5kYXRhKFwiJCRuZ0FuaW1hdGVDU1MzRGF0YVwiKSkmJmcoYS5jbG9zZUFuaW1hdGlvbkZucyxmdW5jdGlvbihhKXthKCl9KX0pfWZ1bmN0aW9uIFYoYixkKXt2YXIgaD1kP2FbZF06bnVsbDtpZighaCl7dmFyIGM9MCxlPTAsZj0wLGs9MDtnKGIsZnVuY3Rpb24oYSl7aWYoMT09YS5ub2RlVHlwZSl7YT10LmdldENvbXB1dGVkU3R5bGUoYSl8fHt9O2M9TWF0aC5tYXgoQShhW0wrXCJEdXJhdGlvblwiXSksYyk7ZT1NYXRoLm1heChBKGFbTCtcIkRlbGF5XCJdKSxlKTtrPU1hdGgubWF4KEEoYVtFK1wiRGVsYXlcIl0pLGspO3ZhciBkPUEoYVtFK1wiRHVyYXRpb25cIl0pOzA8ZCYmKGQqPXBhcnNlSW50KGFbRStcIkl0ZXJhdGlvbkNvdW50XCJdLDEwKXx8MSk7Zj1NYXRoLm1heChkLGYpfX0pO2g9e3RvdGFsOjAsdHJhbnNpdGlvbkRlbGF5OmUsXG50cmFuc2l0aW9uRHVyYXRpb246YyxhbmltYXRpb25EZWxheTprLGFuaW1hdGlvbkR1cmF0aW9uOmZ9O2QmJihhW2RdPWgpfXJldHVybiBofWZ1bmN0aW9uIEEoYSl7dmFyIGQ9MDthPWNhKGEpP2Euc3BsaXQoL1xccyosXFxzKi8pOltdO2coYSxmdW5jdGlvbihhKXtkPU1hdGgubWF4KHBhcnNlRmxvYXQoYSl8fDAsZCl9KTtyZXR1cm4gZH1mdW5jdGlvbiB6KGIsZCxoLGUpe2I9MDw9W1wibmctZW50ZXJcIixcIm5nLWxlYXZlXCIsXCJuZy1tb3ZlXCJdLmluZGV4T2YoaCk7dmFyIGYsZz1kLnBhcmVudCgpLG49Zy5kYXRhKFwiJCRuZ0FuaW1hdGVLZXlcIik7bnx8KGcuZGF0YShcIiQkbmdBbmltYXRlS2V5XCIsKytjKSxuPWMpO2Y9bitcIi1cIitrKGQpLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpO3ZhciBnPWYrXCIgXCIraCxuPWFbZ10/KythW2ddLnRvdGFsOjAsbD17fTtpZigwPG4pe3ZhciBxPWgrXCItc3RhZ2dlclwiLGw9ZitcIiBcIitxOyhmPSFhW2xdKSYmZC5hZGRDbGFzcyhxKTtsPVYoZCxsKTtmJiZkLnJlbW92ZUNsYXNzKHEpfWQuYWRkQ2xhc3MoaCk7XG52YXIgcT1kLmRhdGEoXCIkJG5nQW5pbWF0ZUNTUzNEYXRhXCIpfHx7fSxyPVYoZCxnKTtmPXIudHJhbnNpdGlvbkR1cmF0aW9uO3I9ci5hbmltYXRpb25EdXJhdGlvbjtpZihiJiYwPT09ZiYmMD09PXIpcmV0dXJuIGQucmVtb3ZlQ2xhc3MoaCksITE7aD1lfHxiJiYwPGY7Yj0wPHImJjA8bC5hbmltYXRpb25EZWxheSYmMD09PWwuYW5pbWF0aW9uRHVyYXRpb247ZC5kYXRhKFwiJCRuZ0FuaW1hdGVDU1MzRGF0YVwiLHtzdGFnZ2VyOmwsY2FjaGVLZXk6ZyxydW5uaW5nOnEucnVubmluZ3x8MCxpdGVtSW5kZXg6bixibG9ja1RyYW5zaXRpb246aCxjbG9zZUFuaW1hdGlvbkZuczpxLmNsb3NlQW5pbWF0aW9uRm5zfHxbXX0pO2c9ayhkKTtoJiYoVyhnLCEwKSxlJiZkLmNzcyhlKSk7YiYmKGcuc3R5bGVbRStcIlBsYXlTdGF0ZVwiXT1cInBhdXNlZFwiKTtyZXR1cm4hMH1mdW5jdGlvbiBKKGEsZCxiLGMsZSl7ZnVuY3Rpb24gZigpe2Qub2ZmKEMsbCk7ZC5yZW1vdmVDbGFzcyhxKTtkLnJlbW92ZUNsYXNzKHIpO1xueiYmSS5jYW5jZWwoeik7SyhkLGIpO3ZhciBhPWsoZCksYztmb3IoYyBpbiBwKWEuc3R5bGUucmVtb3ZlUHJvcGVydHkocFtjXSl9ZnVuY3Rpb24gbChhKXthLnN0b3BQcm9wYWdhdGlvbigpO3ZhciBkPWEub3JpZ2luYWxFdmVudHx8YTthPWQuJG1hbnVhbFRpbWVTdGFtcHx8ZC50aW1lU3RhbXB8fERhdGUubm93KCk7ZD1wYXJzZUZsb2F0KGQuZWxhcHNlZFRpbWUudG9GaXhlZCgzKSk7TWF0aC5tYXgoYS1CLDApPj1BJiZkPj14JiZjKCl9dmFyIG09ayhkKTthPWQuZGF0YShcIiQkbmdBbmltYXRlQ1NTM0RhdGFcIik7aWYoLTEhPW0uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikuaW5kZXhPZihiKSYmYSl7dmFyIHE9XCJcIixyPVwiXCI7ZyhiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGQpe3ZhciBiPSgwPGQ/XCIgXCI6XCJcIikrYTtxKz1iK1wiLWFjdGl2ZVwiO3IrPWIrXCItcGVuZGluZ1wifSk7dmFyIHA9W10sdD1hLml0ZW1JbmRleCx2PWEuc3RhZ2dlcixzPTA7aWYoMDx0KXtzPTA7MDx2LnRyYW5zaXRpb25EZWxheSYmXG4wPT09di50cmFuc2l0aW9uRHVyYXRpb24mJihzPXYudHJhbnNpdGlvbkRlbGF5KnQpO3ZhciB5PTA7MDx2LmFuaW1hdGlvbkRlbGF5JiYwPT09di5hbmltYXRpb25EdXJhdGlvbiYmKHk9di5hbmltYXRpb25EZWxheSp0LHAucHVzaChZK1wiYW5pbWF0aW9uLXBsYXktc3RhdGVcIikpO3M9TWF0aC5yb3VuZCgxMDAqTWF0aC5tYXgocyx5KSkvMTAwfXN8fChkLmFkZENsYXNzKHEpLGEuYmxvY2tUcmFuc2l0aW9uJiZXKG0sITEpKTt2YXIgRD1WKGQsYS5jYWNoZUtleStcIiBcIitxKSx4PU1hdGgubWF4KEQudHJhbnNpdGlvbkR1cmF0aW9uLEQuYW5pbWF0aW9uRHVyYXRpb24pO2lmKDA9PT14KWQucmVtb3ZlQ2xhc3MocSksSyhkLGIpLGMoKTtlbHNleyFzJiZlJiYoRC50cmFuc2l0aW9uRHVyYXRpb258fChkLmNzcyhcInRyYW5zaXRpb25cIixELmFuaW1hdGlvbkR1cmF0aW9uK1wicyBsaW5lYXIgYWxsXCIpLHAucHVzaChcInRyYW5zaXRpb25cIikpLGQuY3NzKGUpKTt2YXIgdD1NYXRoLm1heChELnRyYW5zaXRpb25EZWxheSxcbkQuYW5pbWF0aW9uRGVsYXkpLEE9MUUzKnQ7MDxwLmxlbmd0aCYmKHY9bS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKXx8XCJcIixcIjtcIiE9PXYuY2hhckF0KHYubGVuZ3RoLTEpJiYodis9XCI7XCIpLG0uc2V0QXR0cmlidXRlKFwic3R5bGVcIix2K1wiIFwiKSk7dmFyIEI9RGF0ZS5ub3coKSxDPVgrXCIgXCIrWix0PTFFMyoocysxLjUqKHQreCkpLHo7MDxzJiYoZC5hZGRDbGFzcyhyKSx6PUkoZnVuY3Rpb24oKXt6PW51bGw7MDxELnRyYW5zaXRpb25EdXJhdGlvbiYmVyhtLCExKTswPEQuYW5pbWF0aW9uRHVyYXRpb24mJihtLnN0eWxlW0UrXCJQbGF5U3RhdGVcIl09XCJcIik7ZC5hZGRDbGFzcyhxKTtkLnJlbW92ZUNsYXNzKHIpO2UmJigwPT09RC50cmFuc2l0aW9uRHVyYXRpb24mJmQuY3NzKFwidHJhbnNpdGlvblwiLEQuYW5pbWF0aW9uRHVyYXRpb24rXCJzIGxpbmVhciBhbGxcIiksZC5jc3MoZSkscC5wdXNoKFwidHJhbnNpdGlvblwiKSl9LDFFMypzLCExKSk7ZC5vbihDLGwpO2EuY2xvc2VBbmltYXRpb25GbnMucHVzaChmdW5jdGlvbigpe2YoKTtcbmMoKX0pO2EucnVubmluZysrO1AoZCx0KTtyZXR1cm4gZn19ZWxzZSBjKCl9ZnVuY3Rpb24gVyhhLGQpe2Euc3R5bGVbTCtcIlByb3BlcnR5XCJdPWQ/XCJub25lXCI6XCJcIn1mdW5jdGlvbiBRKGEsZCxiLGMpe2lmKHooYSxkLGIsYykpcmV0dXJuIGZ1bmN0aW9uKGEpe2EmJksoZCxiKX19ZnVuY3Rpb24gUihhLGQsYixjLGUpe2lmKGQuZGF0YShcIiQkbmdBbmltYXRlQ1NTM0RhdGFcIikpcmV0dXJuIEooYSxkLGIsYyxlKTtLKGQsYik7YygpfWZ1bmN0aW9uIHkoYSxkLGIsYyxlKXt2YXIgZj1RKGEsZCxiLGUuZnJvbSk7aWYoZil7dmFyIGc9ZjtDKGQsZnVuY3Rpb24oKXtnPVIoYSxkLGIsYyxlLnRvKX0pO3JldHVybiBmdW5jdGlvbihhKXsoZ3x8cykoYSl9fXgoKTtjKCl9ZnVuY3Rpb24gSyhhLGQpe2EucmVtb3ZlQ2xhc3MoZCk7dmFyIGI9YS5kYXRhKFwiJCRuZ0FuaW1hdGVDU1MzRGF0YVwiKTtiJiYoYi5ydW5uaW5nJiZiLnJ1bm5pbmctLSxiLnJ1bm5pbmcmJjAhPT1iLnJ1bm5pbmd8fGEucmVtb3ZlRGF0YShcIiQkbmdBbmltYXRlQ1NTM0RhdGFcIikpfVxuZnVuY3Rpb24gbChhLGQpe3ZhciBiPVwiXCI7YT0kKGEpP2E6YS5zcGxpdCgvXFxzKy8pO2coYSxmdW5jdGlvbihhLGMpe2EmJjA8YS5sZW5ndGgmJihiKz0oMDxjP1wiIFwiOlwiXCIpK2ErZCl9KTtyZXR1cm4gYn12YXIgWT1cIlwiLEwsWixFLFg7TS5vbnRyYW5zaXRpb25lbmQ9PT1TJiZNLm9ud2Via2l0dHJhbnNpdGlvbmVuZCE9PVM/KFk9XCItd2Via2l0LVwiLEw9XCJXZWJraXRUcmFuc2l0aW9uXCIsWj1cIndlYmtpdFRyYW5zaXRpb25FbmQgdHJhbnNpdGlvbmVuZFwiKTooTD1cInRyYW5zaXRpb25cIixaPVwidHJhbnNpdGlvbmVuZFwiKTtNLm9uYW5pbWF0aW9uZW5kPT09UyYmTS5vbndlYmtpdGFuaW1hdGlvbmVuZCE9PVM/KFk9XCItd2Via2l0LVwiLEU9XCJXZWJraXRBbmltYXRpb25cIixYPVwid2Via2l0QW5pbWF0aW9uRW5kIGFuaW1hdGlvbmVuZFwiKTooRT1cImFuaW1hdGlvblwiLFg9XCJhbmltYXRpb25lbmRcIik7dmFyIGE9e30sYz0wLGI9W10sZSxtPW51bGwsTj0wLHA9W107cmV0dXJue2FuaW1hdGU6ZnVuY3Rpb24oYSxcbmQsYixjLGUsZil7Zj1mfHx7fTtmLmZyb209YjtmLnRvPWM7cmV0dXJuIHkoXCJhbmltYXRlXCIsYSxkLGUsZil9LGVudGVyOmZ1bmN0aW9uKGEsYixjKXtjPWN8fHt9O3JldHVybiB5KFwiZW50ZXJcIixhLFwibmctZW50ZXJcIixiLGMpfSxsZWF2ZTpmdW5jdGlvbihhLGIsYyl7Yz1jfHx7fTtyZXR1cm4geShcImxlYXZlXCIsYSxcIm5nLWxlYXZlXCIsYixjKX0sbW92ZTpmdW5jdGlvbihhLGIsYyl7Yz1jfHx7fTtyZXR1cm4geShcIm1vdmVcIixhLFwibmctbW92ZVwiLGIsYyl9LGJlZm9yZVNldENsYXNzOmZ1bmN0aW9uKGEsYixjLGUsZil7Zj1mfHx7fTtiPWwoYyxcIi1yZW1vdmVcIikrXCIgXCIrbChiLFwiLWFkZFwiKTtpZihmPVEoXCJzZXRDbGFzc1wiLGEsYixmLmZyb20pKXJldHVybiBDKGEsZSksZjt4KCk7ZSgpfSxiZWZvcmVBZGRDbGFzczpmdW5jdGlvbihhLGIsYyxlKXtlPWV8fHt9O2lmKGI9UShcImFkZENsYXNzXCIsYSxsKGIsXCItYWRkXCIpLGUuZnJvbSkpcmV0dXJuIEMoYSxjKSxiO3goKTtjKCl9LGJlZm9yZVJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEsXG5iLGMsZSl7ZT1lfHx7fTtpZihiPVEoXCJyZW1vdmVDbGFzc1wiLGEsbChiLFwiLXJlbW92ZVwiKSxlLmZyb20pKXJldHVybiBDKGEsYyksYjt4KCk7YygpfSxzZXRDbGFzczpmdW5jdGlvbihhLGIsYyxlLGYpe2Y9Znx8e307Yz1sKGMsXCItcmVtb3ZlXCIpO2I9bChiLFwiLWFkZFwiKTtyZXR1cm4gUihcInNldENsYXNzXCIsYSxjK1wiIFwiK2IsZSxmLnRvKX0sYWRkQ2xhc3M6ZnVuY3Rpb24oYSxiLGMsZSl7ZT1lfHx7fTtyZXR1cm4gUihcImFkZENsYXNzXCIsYSxsKGIsXCItYWRkXCIpLGMsZS50byl9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEsYixjLGUpe2U9ZXx8e307cmV0dXJuIFIoXCJyZW1vdmVDbGFzc1wiLGEsbChiLFwiLXJlbW92ZVwiKSxjLGUudG8pfX19XSl9XSl9KSh3aW5kb3csd2luZG93LmFuZ3VsYXIpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5ndWxhci1hbmltYXRlLm1pbi5qcy5tYXBcbiIsIi8qISAzLjEuMiAqL1xuIWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIpe3dpbmRvdy5YTUxIdHRwUmVxdWVzdC5wcm90b3R5cGVbYV09Yih3aW5kb3cuWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlW2FdKX1mdW5jdGlvbiBiKGEsYixjKXt0cnl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7Z2V0OmN9KX1jYXRjaChkKXt9fXZhciBjPWZ1bmN0aW9uKCl7dHJ5e3ZhciBhPW5ldyBBY3RpdmVYT2JqZWN0KFwiU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2hcIik7aWYoYSlyZXR1cm4hMH1jYXRjaChiKXtpZih2b2lkIDAhPW5hdmlnYXRvci5taW1lVHlwZXNbXCJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaFwiXSlyZXR1cm4hMH1yZXR1cm4hMX07aWYod2luZG93LlhNTEh0dHBSZXF1ZXN0JiYhd2luZG93LkZvcm1EYXRhfHx3aW5kb3cuRmlsZUFQSSYmRmlsZUFQSS5mb3JjZUxvYWQpe3ZhciBkPWZ1bmN0aW9uKGEpe2lmKCFhLl9fbGlzdGVuZXJzKXthLnVwbG9hZHx8KGEudXBsb2FkPXt9KSxhLl9fbGlzdGVuZXJzPVtdO3ZhciBiPWEudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXI7YS51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihjLGQpe2EuX19saXN0ZW5lcnNbY109ZCxiJiZiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fTthKFwib3BlblwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiLGMsZSl7ZCh0aGlzKSx0aGlzLl9fdXJsPWM7dHJ5e2EuYXBwbHkodGhpcyxbYixjLGVdKX1jYXRjaChmKXtmLm1lc3NhZ2UuaW5kZXhPZihcIkFjY2VzcyBpcyBkZW5pZWRcIik+LTEmJih0aGlzLl9fb3JpZ0Vycm9yPWYsYS5hcHBseSh0aGlzLFtiLFwiX2ZpeF9mb3JfaWVfY3Jvc3Nkb21haW5fX1wiLGVdKSl9fX0pLGEoXCJnZXRSZXNwb25zZUhlYWRlclwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5fX2ZpbGVBcGlYSFImJnRoaXMuX19maWxlQXBpWEhSLmdldFJlc3BvbnNlSGVhZGVyP3RoaXMuX19maWxlQXBpWEhSLmdldFJlc3BvbnNlSGVhZGVyKGIpOm51bGw9PWE/bnVsbDphLmFwcGx5KHRoaXMsW2JdKX19KSxhKFwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX19maWxlQXBpWEhSJiZ0aGlzLl9fZmlsZUFwaVhIUi5nZXRBbGxSZXNwb25zZUhlYWRlcnM/dGhpcy5fX2ZpbGVBcGlYSFIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCk6bnVsbD09YT9udWxsOmEuYXBwbHkodGhpcyl9fSksYShcImFib3J0XCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX19maWxlQXBpWEhSJiZ0aGlzLl9fZmlsZUFwaVhIUi5hYm9ydD90aGlzLl9fZmlsZUFwaVhIUi5hYm9ydCgpOm51bGw9PWE/bnVsbDphLmFwcGx5KHRoaXMpfX0pLGEoXCJzZXRSZXF1ZXN0SGVhZGVyXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7aWYoXCJfX3NldFhIUl9cIj09PWIpe2QodGhpcyk7dmFyIGU9Yyh0aGlzKTtlIGluc3RhbmNlb2YgRnVuY3Rpb24mJmUodGhpcyl9ZWxzZSB0aGlzLl9fcmVxdWVzdEhlYWRlcnM9dGhpcy5fX3JlcXVlc3RIZWFkZXJzfHx7fSx0aGlzLl9fcmVxdWVzdEhlYWRlcnNbYl09YyxhLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSxhKFwic2VuZFwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBkPXRoaXM7aWYoYXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF0uX19pc0ZpbGVBUElTaGltKXt2YXIgZT1hcmd1bWVudHNbMF0sZj17dXJsOmQuX191cmwsanNvbnA6ITEsY2FjaGU6ITAsY29tcGxldGU6ZnVuY3Rpb24oYSxjKXtkLl9fY29tcGxldGVkPSEwLCFhJiZkLl9fbGlzdGVuZXJzLmxvYWQmJmQuX19saXN0ZW5lcnMubG9hZCh7dHlwZTpcImxvYWRcIixsb2FkZWQ6ZC5fX2xvYWRlZCx0b3RhbDpkLl9fdG90YWwsdGFyZ2V0OmQsbGVuZ3RoQ29tcHV0YWJsZTohMH0pLCFhJiZkLl9fbGlzdGVuZXJzLmxvYWRlbmQmJmQuX19saXN0ZW5lcnMubG9hZGVuZCh7dHlwZTpcImxvYWRlbmRcIixsb2FkZWQ6ZC5fX2xvYWRlZCx0b3RhbDpkLl9fdG90YWwsdGFyZ2V0OmQsbGVuZ3RoQ29tcHV0YWJsZTohMH0pLFwiYWJvcnRcIj09PWEmJmQuX19saXN0ZW5lcnMuYWJvcnQmJmQuX19saXN0ZW5lcnMuYWJvcnQoe3R5cGU6XCJhYm9ydFwiLGxvYWRlZDpkLl9fbG9hZGVkLHRvdGFsOmQuX190b3RhbCx0YXJnZXQ6ZCxsZW5ndGhDb21wdXRhYmxlOiEwfSksdm9pZCAwIT09Yy5zdGF0dXMmJmIoZCxcInN0YXR1c1wiLGZ1bmN0aW9uKCl7cmV0dXJuIDA9PWMuc3RhdHVzJiZhJiZcImFib3J0XCIhPT1hPzUwMDpjLnN0YXR1c30pLHZvaWQgMCE9PWMuc3RhdHVzVGV4dCYmYihkLFwic3RhdHVzVGV4dFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGMuc3RhdHVzVGV4dH0pLGIoZCxcInJlYWR5U3RhdGVcIixmdW5jdGlvbigpe3JldHVybiA0fSksdm9pZCAwIT09Yy5yZXNwb25zZSYmYihkLFwicmVzcG9uc2VcIixmdW5jdGlvbigpe3JldHVybiBjLnJlc3BvbnNlfSk7dmFyIGU9Yy5yZXNwb25zZVRleHR8fChhJiYwPT1jLnN0YXR1cyYmXCJhYm9ydFwiIT09YT9hOnZvaWQgMCk7YihkLFwicmVzcG9uc2VUZXh0XCIsZnVuY3Rpb24oKXtyZXR1cm4gZX0pLGIoZCxcInJlc3BvbnNlXCIsZnVuY3Rpb24oKXtyZXR1cm4gZX0pLGEmJmIoZCxcImVyclwiLGZ1bmN0aW9uKCl7cmV0dXJuIGF9KSxkLl9fZmlsZUFwaVhIUj1jLGQub25yZWFkeXN0YXRlY2hhbmdlJiZkLm9ucmVhZHlzdGF0ZWNoYW5nZSgpLGQub25sb2FkJiZkLm9ubG9hZCgpfSxmaWxlcHJvZ3Jlc3M6ZnVuY3Rpb24oYSl7aWYoYS50YXJnZXQ9ZCxkLl9fbGlzdGVuZXJzLnByb2dyZXNzJiZkLl9fbGlzdGVuZXJzLnByb2dyZXNzKGEpLGQuX190b3RhbD1hLnRvdGFsLGQuX19sb2FkZWQ9YS5sb2FkZWQsYS50b3RhbD09PWEubG9hZGVkKXt2YXIgYj10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtkLl9fY29tcGxldGVkfHwoZC5nZXRBbGxSZXNwb25zZUhlYWRlcnM9ZnVuY3Rpb24oKXt9LGIuY29tcGxldGUobnVsbCx7c3RhdHVzOjIwNCxzdGF0dXNUZXh0OlwiTm8gQ29udGVudFwifSkpfSxGaWxlQVBJLm5vQ29udGVudFRpbWVvdXR8fDFlNCl9fSxoZWFkZXJzOmQuX19yZXF1ZXN0SGVhZGVyc307Zi5kYXRhPXt9LGYuZmlsZXM9e307Zm9yKHZhciBnPTA7ZzxlLmRhdGEubGVuZ3RoO2crKyl7dmFyIGg9ZS5kYXRhW2ddO251bGwhPWgudmFsJiZudWxsIT1oLnZhbC5uYW1lJiZudWxsIT1oLnZhbC5zaXplJiZudWxsIT1oLnZhbC50eXBlP2YuZmlsZXNbaC5rZXldPWgudmFsOmYuZGF0YVtoLmtleV09aC52YWx9c2V0VGltZW91dChmdW5jdGlvbigpe2lmKCFjKCkpdGhyb3cnQWRvZGUgRmxhc2ggUGxheWVyIG5lZWQgdG8gYmUgaW5zdGFsbGVkLiBUbyBjaGVjayBhaGVhZCB1c2UgXCJGaWxlQVBJLmhhc0ZsYXNoXCInO2QuX19maWxlQXBpWEhSPUZpbGVBUEkudXBsb2FkKGYpfSwxKX1lbHNle2lmKHRoaXMuX19vcmlnRXJyb3IpdGhyb3cgdGhpcy5fX29yaWdFcnJvcjthLmFwcGx5KGQsYXJndW1lbnRzKX19fSksd2luZG93LlhNTEh0dHBSZXF1ZXN0Ll9faXNGaWxlQVBJU2hpbT0hMDt2YXIgZT1mdW5jdGlvbihhKXtpZighYygpKXRocm93J0Fkb2RlIEZsYXNoIFBsYXllciBuZWVkIHRvIGJlIGluc3RhbGxlZC4gVG8gY2hlY2sgYWhlYWQgdXNlIFwiRmlsZUFQSS5oYXNGbGFzaFwiJzt2YXIgYj1hbmd1bGFyLmVsZW1lbnQoYSk7aWYoIWIuYXR0cihcImRpc2FibGVkXCIpKXtmb3IodmFyIGQ9ITEsZT0wO2U8YlswXS5hdHRyaWJ1dGVzLmxlbmd0aDtlKyspe3ZhciBmPWJbMF0uYXR0cmlidXRlc1tlXTtpZigtMSE9PWYubmFtZS5pbmRleE9mKFwiZmlsZS1zZWxlY3RcIikpe2Q9ITA7YnJlYWt9fWlmKCFiLmhhc0NsYXNzKFwianMtZmlsZWFwaS13cmFwcGVyXCIpJiYoZHx8bnVsbCE9Yi5hdHRyKFwiX19hZnVfZ2VuX19cIikpJiYoYi5hZGRDbGFzcyhcImpzLWZpbGVhcGktd3JhcHBlclwiKSxudWxsIT1iLmF0dHIoXCJfX2FmdV9nZW5fX1wiKSkpe2Zvcih2YXIgZz1iWzBdLl9fcmVmRWxlbV9fJiZhbmd1bGFyLmVsZW1lbnQoYlswXS5fX3JlZkVsZW1fXyl8fGI7ZyYmIWcuYXR0cihcIl9fcmVmRWxlbV9fXCIpOylnPWFuZ3VsYXIuZWxlbWVudChnWzBdLm5leHRTaWJsaW5nKTtnLmJpbmQoXCJtb3VzZW92ZXJcIixmdW5jdGlvbigpeyhcIlwiPT09Yi5wYXJlbnQoKS5jc3MoXCJwb3NpdGlvblwiKXx8XCJzdGF0aWNcIj09PWIucGFyZW50KCkuY3NzKFwicG9zaXRpb25cIikpJiZiLnBhcmVudCgpLmNzcyhcInBvc2l0aW9uXCIsXCJyZWxhdGl2ZVwiKSxiLmNzcyhcInBvc2l0aW9uXCIsXCJhYnNvbHV0ZVwiKS5jc3MoXCJ0b3BcIixnWzBdLm9mZnNldFRvcCtcInB4XCIpLmNzcyhcImxlZnRcIixnWzBdLm9mZnNldExlZnQrXCJweFwiKS5jc3MoXCJ3aWR0aFwiLGdbMF0ub2Zmc2V0V2lkdGgrXCJweFwiKS5jc3MoXCJoZWlnaHRcIixnWzBdLm9mZnNldEhlaWdodCtcInB4XCIpLmNzcyhcInBhZGRpbmdcIixnLmNzcyhcInBhZGRpbmdcIikpLmNzcyhcIm1hcmdpblwiLGcuY3NzKFwibWFyZ2luXCIpKS5jc3MoXCJmaWx0ZXJcIixcImFscGhhKG9wYWNpdHk9MClcIiksZy5hdHRyKFwib25jbGlja1wiLFwiXCIpLGIuY3NzKFwiei1pbmRleFwiLFwiMTAwMFwiKX0pfX19LGY9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz1GaWxlQVBJLmdldEZpbGVzKGIpLGQ9MDtkPGMubGVuZ3RoO2QrKyl2b2lkIDA9PT1jW2RdLnNpemUmJihjW2RdLnNpemU9MCksdm9pZCAwPT09Y1tkXS5uYW1lJiYoY1tkXS5uYW1lPVwiZmlsZVwiKSx2b2lkIDA9PT1jW2RdLnR5cGUmJihjW2RdLnR5cGU9XCJ1bmRlZmluZWRcIik7Yi50YXJnZXR8fChiLnRhcmdldD17fSksYi50YXJnZXQuZmlsZXM9YyxiLnRhcmdldC5maWxlcyE9YyYmKGIuX19maWxlc189YyksKGIuX19maWxlc198fGIudGFyZ2V0LmZpbGVzKS5pdGVtPWZ1bmN0aW9uKGEpe3JldHVybihiLl9fZmlsZXNffHxiLnRhcmdldC5maWxlcylbYV18fG51bGx9LGEmJmEuYXBwbHkodGhpcyxbYl0pfX0sZz1mdW5jdGlvbihhLGIpe3JldHVybihcImNoYW5nZVwiPT09Yi50b0xvd2VyQ2FzZSgpfHxcIm9uY2hhbmdlXCI9PT1iLnRvTG93ZXJDYXNlKCkpJiZcImZpbGVcIj09YS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpfTtIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyJiYoSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixjLGQsaCl7Zyh0aGlzLGIpPyhlKHRoaXMpLGEuYXBwbHkodGhpcyxbYixmKGMpLGQsaF0pKTphLmFwcGx5KHRoaXMsW2IsYyxkLGhdKX19KEhUTUxJbnB1dEVsZW1lbnQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIpKSxIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5hdHRhY2hFdmVudCYmKEhUTUxJbnB1dEVsZW1lbnQucHJvdG90eXBlLmF0dGFjaEV2ZW50PWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe2codGhpcyxiKT8oZSh0aGlzKSx3aW5kb3cualF1ZXJ5P2FuZ3VsYXIuZWxlbWVudCh0aGlzKS5iaW5kKFwiY2hhbmdlXCIsZihudWxsKSk6YS5hcHBseSh0aGlzLFtiLGYoYyldKSk6YS5hcHBseSh0aGlzLFtiLGNdKX19KEhUTUxJbnB1dEVsZW1lbnQucHJvdG90eXBlLmF0dGFjaEV2ZW50KSksd2luZG93LkZvcm1EYXRhPUZvcm1EYXRhPWZ1bmN0aW9uKCl7cmV0dXJue2FwcGVuZDpmdW5jdGlvbihhLGIsYyl7Yi5fX2lzRmlsZUFQSUJsb2JTaGltJiYoYj1iLmRhdGFbMF0pLHRoaXMuZGF0YS5wdXNoKHtrZXk6YSx2YWw6YixuYW1lOmN9KX0sZGF0YTpbXSxfX2lzRmlsZUFQSVNoaW06ITB9fSx3aW5kb3cuQmxvYj1CbG9iPWZ1bmN0aW9uKGEpe3JldHVybntkYXRhOmEsX19pc0ZpbGVBUElCbG9iU2hpbTohMH19LGZ1bmN0aW9uKCl7aWYod2luZG93LkZpbGVBUEl8fCh3aW5kb3cuRmlsZUFQST17fSksRmlsZUFQSS5mb3JjZUxvYWQmJihGaWxlQVBJLmh0bWw1PSExKSwhRmlsZUFQSS51cGxvYWQpe3ZhciBhLGIsZCxlLGYsZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLGg9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7aWYod2luZG93LkZpbGVBUEkuanNVcmwpYT13aW5kb3cuRmlsZUFQSS5qc1VybDtlbHNlIGlmKHdpbmRvdy5GaWxlQVBJLmpzUGF0aCliPXdpbmRvdy5GaWxlQVBJLmpzUGF0aDtlbHNlIGZvcihkPTA7ZDxoLmxlbmd0aDtkKyspaWYoZj1oW2RdLnNyYyxlPWYuc2VhcmNoKC9cXC9hbmd1bGFyXFwtZmlsZVxcLXVwbG9hZFtcXC1hLXpBLXowLTlcXC5dKlxcLmpzLyksZT4tMSl7Yj1mLnN1YnN0cmluZygwLGUrMSk7YnJlYWt9bnVsbD09RmlsZUFQSS5zdGF0aWNQYXRoJiYoRmlsZUFQSS5zdGF0aWNQYXRoPWIpLGcuc2V0QXR0cmlidXRlKFwic3JjXCIsYXx8YitcIkZpbGVBUEkubWluLmpzXCIpLGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChnKSxGaWxlQVBJLmhhc0ZsYXNoPWMoKX19KCksRmlsZUFQSS5kaXNhYmxlRmlsZUlucHV0PWZ1bmN0aW9uKGEsYil7Yj9hLnJlbW92ZUNsYXNzKFwianMtZmlsZWFwaS13cmFwcGVyXCIpOmEuYWRkQ2xhc3MoXCJqcy1maWxlYXBpLXdyYXBwZXJcIil9fXdpbmRvdy5GaWxlUmVhZGVyfHwod2luZG93LkZpbGVSZWFkZXI9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9ITE7dGhpcy5saXN0ZW5lcnM9e30sdGhpcy5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGIsYyl7YS5saXN0ZW5lcnNbYl09YS5saXN0ZW5lcnNbYl18fFtdLGEubGlzdGVuZXJzW2JdLnB1c2goYyl9LHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihiLGMpe2EubGlzdGVuZXJzW2JdJiZhLmxpc3RlbmVyc1tiXS5zcGxpY2UoYS5saXN0ZW5lcnNbYl0uaW5kZXhPZihjKSwxKX0sdGhpcy5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKGIpe3ZhciBjPWEubGlzdGVuZXJzW2IudHlwZV07aWYoYylmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyljW2RdLmNhbGwoYSxiKX0sdGhpcy5vbmFib3J0PXRoaXMub25lcnJvcj10aGlzLm9ubG9hZD10aGlzLm9ubG9hZHN0YXJ0PXRoaXMub25sb2FkZW5kPXRoaXMub25wcm9ncmVzcz1udWxsO3ZhciBjPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9e3R5cGU6Yix0YXJnZXQ6YSxsb2FkZWQ6Yy5sb2FkZWQsdG90YWw6Yy50b3RhbCxlcnJvcjpjLmVycm9yfTtyZXR1cm4gbnVsbCE9Yy5yZXN1bHQmJihkLnRhcmdldC5yZXN1bHQ9Yy5yZXN1bHQpLGR9LGQ9ZnVuY3Rpb24oZCl7aWYoYnx8KGI9ITAsYS5vbmxvYWRzdGFydCYmYS5vbmxvYWRzdGFydChjKFwibG9hZHN0YXJ0XCIsZCkpKSxcImxvYWRcIj09PWQudHlwZSl7YS5vbmxvYWRlbmQmJmEub25sb2FkZW5kKGMoXCJsb2FkZW5kXCIsZCkpO3ZhciBlPWMoXCJsb2FkXCIsZCk7YS5vbmxvYWQmJmEub25sb2FkKGUpLGEuZGlzcGF0Y2hFdmVudChlKX1lbHNlIGlmKFwicHJvZ3Jlc3NcIj09PWQudHlwZSl7dmFyIGU9YyhcInByb2dyZXNzXCIsZCk7YS5vbnByb2dyZXNzJiZhLm9ucHJvZ3Jlc3MoZSksYS5kaXNwYXRjaEV2ZW50KGUpfWVsc2V7dmFyIGU9YyhcImVycm9yXCIsZCk7YS5vbmVycm9yJiZhLm9uZXJyb3IoZSksYS5kaXNwYXRjaEV2ZW50KGUpfX07dGhpcy5yZWFkQXNBcnJheUJ1ZmZlcj1mdW5jdGlvbihhKXtGaWxlQVBJLnJlYWRBc0JpbmFyeVN0cmluZyhhLGQpfSx0aGlzLnJlYWRBc0JpbmFyeVN0cmluZz1mdW5jdGlvbihhKXtGaWxlQVBJLnJlYWRBc0JpbmFyeVN0cmluZyhhLGQpfSx0aGlzLnJlYWRBc0RhdGFVUkw9ZnVuY3Rpb24oYSl7RmlsZUFQSS5yZWFkQXNEYXRhVVJMKGEsZCl9LHRoaXMucmVhZEFzVGV4dD1mdW5jdGlvbihhKXtGaWxlQVBJLnJlYWRBc1RleHQoYSxkKX19KX0oKTsiLCIvKiEgMy4xLjIgKi9cbiFmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiKXt3aW5kb3cuWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlW2FdPWIod2luZG93LlhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZVthXSl9ZnVuY3Rpb24gYihhLGIsYyxkLGYsZyxoKXtmdW5jdGlvbiBpKCl7cmV0dXJuXCJpbnB1dFwiPT09YlswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJmIuYXR0cihcInR5cGVcIikmJlwiZmlsZVwiPT09Yi5hdHRyKFwidHlwZVwiKS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIGooYyl7ZyhmdW5jdGlvbigpe2IucGFyZW50KCkubGVuZ3RoJiZwLnB1c2goYS4kd2F0Y2goYyxmdW5jdGlvbihhLGIpe2EhPWImJmsoKX0pKX0pfWZ1bmN0aW9uIGsoKXt2YXIgYz1iLmNsb25lKCk7aWYoYi5hdHRyKFwiX19hZnVfZ2VuX19cIikmJmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChiLmF0dHIoXCJpZFwiKS5zdWJzdHJpbmcoMSkpKS5yZW1vdmUoKSxiLnBhcmVudCgpLmxlbmd0aCl7Zm9yKHZhciBkPTA7ZDxwLmxlbmd0aDtkKyspcFtkXSgpO2IucmVwbGFjZVdpdGgoYyksaChjKShhKX1yZXR1cm4gY31mdW5jdGlvbiBsKGQsZSl7aWYoZCl7aihkKTt2YXIgZz1mKGQpKGEpO2c/KGIuYXR0cihlLGcpLGNbZV09Zyk6KGIuYXR0cihlLG51bGwpLGRlbGV0ZSBjW2VdKX19ZnVuY3Rpb24gbShiKXt2YXIgZTtlPWIuX19maWxlc198fGIudGFyZ2V0JiZiLnRhcmdldC5maWxlcyxvKGUsYyxkLGEsYil9ZnVuY3Rpb24gbihhKXtpZihudWxsIT1xWzBdLnZhbHVlJiZcIlwiIT1xWzBdLnZhbHVlJiYocVswXS52YWx1ZT1udWxsLC0xPT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiVHJpZGVudC83XCIpJiZtKHt0YXJnZXQ6e2ZpbGVzOltdfX0pKSxiLmF0dHIoXCJfX2FmdV9jbG9uZV9fXCIpKWIuYXR0cihcIl9fYWZ1X2Nsb25lX19cIixudWxsKTtlbHNlIGlmKC0xIT09bmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZihcIk1TSUUgMTBcIil8fC0xIT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiVHJpZGVudC83XCIpKXt2YXIgYz1rKCk7cmV0dXJuIGMuYXR0cihcIl9fYWZ1X2Nsb25lX19cIiwhMCksY1swXS5jbGljaygpLGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpLCEwfX1mdW5jdGlvbiBvKGEsYixjLGQsaCl7Zm9yKHZhciBpPVtdLGo9W10saz1mKGIubmdBY2NlcHQpKGQpLGw9YW5ndWxhci5pc1N0cmluZyhrKSYmaz9uZXcgUmVnRXhwKGUoayksXCJnaVwiKTpudWxsLG09bD9udWxsOmIubmdBY2NlcHQsbj0wO248YS5sZW5ndGg7bisrKXt2YXIgbz1hLml0ZW0obik7ISghbHx8by50eXBlLm1hdGNoKGwpfHxudWxsIT1vLm5hbWUmJm8ubmFtZS5tYXRjaChsKSl8fG0mJiFmKG0pKGQseyRmaWxlOm8sJGV2ZW50Omh9KT9qLnB1c2gobyk6aS5wdXNoKG8pfWcoZnVuY3Rpb24oKXtjJiYoZihiLm5nTW9kZWwpLmFzc2lnbihkLGkpLGMmJmMuJHNldFZpZXdWYWx1ZShudWxsIT1pJiYwPT1pLmxlbmd0aD9cIlwiOmkpLGIubmdNb2RlbFJlamVjdGVkJiZmKGIubmdNb2RlbFJlamVjdGVkKS5hc3NpZ24oZCxqKSksYi5uZ0ZpbGVDaGFuZ2UmJlwiXCIhPWIubmdGaWxlQ2hhbmdlJiZmKGIubmdGaWxlQ2hhbmdlKShkLHskZmlsZXM6aSwkcmVqZWN0ZWRGaWxlczpqLCRldmVudDpofSl9KX12YXIgcD1bXTtsKGMubmdNdWx0aXBsZSxcIm11bHRpcGxlXCIpLGwoYy5uZ0FjY2VwdCxcIm5nLWFjY2VwdFwiKSxsKGMubmdDYXB0dXJlLFwiY2FwdHVyZVwiKSxcIlwiIT1jLm5nRmlsZVNlbGVjdCYmKGMubmdGaWxlQ2hhbmdlPWMubmdGaWxlU2VsZWN0KTt2YXIgcT1iO2lmKGkoKSliLmJpbmQoXCJjbGlja1wiLG4pO2Vsc2V7cT1hbmd1bGFyLmVsZW1lbnQoJzxpbnB1dCB0eXBlPVwiZmlsZVwiPicpLGIuYXR0cihcIm11bHRpcGxlXCIpJiZxLmF0dHIoXCJtdWx0aXBsZVwiLGIuYXR0cihcIm11bHRpcGxlXCIpKSxiLmF0dHIoXCJhY2NlcHRcIikmJnEuYXR0cihcImFjY2VwdFwiLGIuYXR0cihcImFjY2VwdFwiKSksYi5hdHRyKFwiY2FwdHVyZVwiKSYmcS5hdHRyKFwiY2FwdHVyZVwiLGIuYXR0cihcImNhcHR1cmVcIikpO2Zvcih2YXIgciBpbiBjKWlmKDA9PXIuaW5kZXhPZihcImlucHV0RmlsZVwiKSl7dmFyIHM9ci5zdWJzdHJpbmcoXCJpbnB1dEZpbGVcIi5sZW5ndGgpO3M9c1swXS50b0xvd2VyQ2FzZSgpK3Muc3Vic3RyaW5nKDEpLHEuYXR0cihzLGNbcl0pfXEuY3NzKFwid2lkdGhcIixcIjBweFwiKS5jc3MoXCJoZWlnaHRcIixcIjBweFwiKS5jc3MoXCJwb3NpdGlvblwiLFwiYWJzb2x1dGVcIikuY3NzKFwicGFkZGluZ1wiLDApLmNzcyhcIm1hcmdpblwiLDApLmNzcyhcIm92ZXJmbG93XCIsXCJoaWRkZW5cIikuYXR0cihcInRhYmluZGV4XCIsXCItMVwiKS5jc3MoXCJvcGFjaXR5XCIsMCkuYXR0cihcIl9fYWZ1X2dlbl9fXCIsITApLGIuYXR0cihcIl9fcmVmRWxlbV9fXCIsITApLHFbMF0uX19yZWZFbGVtX189YlswXSxiLnBhcmVudCgpWzBdLmluc2VydEJlZm9yZShxWzBdLGJbMF0pLGIuY3NzKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKSxiLmJpbmQoXCJjbGlja1wiLGZ1bmN0aW9uKGEpe24oYSl8fHFbMF0uY2xpY2soKX0pfXEuYmluZChcImNoYW5nZVwiLG0pLGIub24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxwLmxlbmd0aDthKyspcFthXSgpO2JbMF0hPXFbMF0mJnEucmVtb3ZlKCl9KSxwLnB1c2goYS4kd2F0Y2goYy5uZ01vZGVsLGZ1bmN0aW9uKGEsYil7YT09Ynx8bnVsbCE9YSYmYS5sZW5ndGh8fCgtMSE9PW5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoXCJNU0lFIDEwXCIpP2soKTpxWzBdLnZhbHVlPW51bGwpfSkpfWZ1bmN0aW9uIGMoYSxiLGMsZixnLGgsaSl7ZnVuY3Rpb24gaihhLGIsYyl7dmFyIGQ9ITA7aWYocnx8cyl7dmFyIGU9Yy5kYXRhVHJhbnNmZXIuaXRlbXM7aWYobnVsbCE9ZSlmb3IodmFyIGY9MDtmPGUubGVuZ3RoJiZkO2YrKylkPWQmJihcImZpbGVcIj09ZVtmXS5raW5kfHxcIlwiPT1lW2ZdLmtpbmQpJiYocyYmZyhzKShhLHskZmlsZTplW2ZdLCRldmVudDpjfSl8fHImJm51bGwhPWVbZl0udHlwZSYmZVtmXS50eXBlLm1hdGNoKHIpfHxudWxsIT1lW2ZdLm5hbWUmJmVbZl0ubmFtZS5tYXRjaChyKSl9dmFyIGg9ZyhiLmRyYWdPdmVyQ2xhc3MpKGEseyRldmVudDpjfSk7cmV0dXJuIGgmJihoLmRlbGF5JiYocD1oLmRlbGF5KSxoLmFjY2VwdCYmKGg9ZD9oLmFjY2VwdDpoLnJlamVjdCkpLGh8fGIuZHJhZ092ZXJDbGFzc3x8XCJkcmFnb3ZlclwifWZ1bmN0aW9uIGsoYixjLGQsZSl7ZnVuY3Rpb24gZihjKXshKCFyfHxjLnR5cGUubWF0Y2gocil8fG51bGwhPWMubmFtZSYmYy5uYW1lLm1hdGNoKHIpKXx8cyYmIWcocykoYSx7JGZpbGU6YywkZXZlbnQ6Yn0pP2wucHVzaChjKTprLnB1c2goYyl9ZnVuY3Rpb24gaihhLGIsYyl7aWYobnVsbCE9YilpZihiLmlzRGlyZWN0b3J5KXt2YXIgZD0oY3x8XCJcIikrYi5uYW1lO2Yoe25hbWU6Yi5uYW1lLHR5cGU6XCJkaXJlY3RvcnlcIixwYXRoOmR9KTt2YXIgZT1iLmNyZWF0ZVJlYWRlcigpLGc9W107bisrO3ZhciBoPWZ1bmN0aW9uKCl7ZS5yZWFkRW50cmllcyhmdW5jdGlvbihkKXt0cnl7aWYoZC5sZW5ndGgpZz1nLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkfHxbXSwwKSksaCgpO2Vsc2V7Zm9yKHZhciBlPTA7ZTxnLmxlbmd0aDtlKyspaihhLGdbZV0sKGM/YzpcIlwiKStiLm5hbWUrXCIvXCIpO24tLX19Y2F0Y2goZil7bi0tLGNvbnNvbGUuZXJyb3IoZil9fSxmdW5jdGlvbigpe24tLX0pfTtoKCl9ZWxzZSBuKyssYi5maWxlKGZ1bmN0aW9uKGEpe3RyeXtuLS0sYS5wYXRoPShjP2M6XCJcIikrYS5uYW1lLGYoYSl9Y2F0Y2goYil7bi0tLGNvbnNvbGUuZXJyb3IoYil9fSxmdW5jdGlvbigpe24tLX0pfXZhciBrPVtdLGw9W10sbT1iLmRhdGFUcmFuc2Zlci5pdGVtcyxuPTA7aWYobSYmbS5sZW5ndGg+MCYmXCJmaWxlXCIhPWkucHJvdG9jb2woKSlmb3IodmFyIG89MDtvPG0ubGVuZ3RoO28rKyl7aWYobVtvXS53ZWJraXRHZXRBc0VudHJ5JiZtW29dLndlYmtpdEdldEFzRW50cnkoKSYmbVtvXS53ZWJraXRHZXRBc0VudHJ5KCkuaXNEaXJlY3Rvcnkpe3ZhciBwPW1bb10ud2Via2l0R2V0QXNFbnRyeSgpO2lmKHAuaXNEaXJlY3RvcnkmJiFkKWNvbnRpbnVlO251bGwhPXAmJmooayxwKX1lbHNle3ZhciBxPW1bb10uZ2V0QXNGaWxlKCk7bnVsbCE9cSYmZihxKX1pZighZSYmay5sZW5ndGg+MClicmVha31lbHNle3ZhciB0PWIuZGF0YVRyYW5zZmVyLmZpbGVzO2lmKG51bGwhPXQpZm9yKHZhciBvPTA7bzx0Lmxlbmd0aCYmKGYodC5pdGVtKG8pKSxlfHwhKGsubGVuZ3RoPjApKTtvKyspO312YXIgdT0wOyFmdW5jdGlvbiB2KGEpe2goZnVuY3Rpb24oKXtpZihuKTEwKnUrKzwyZTQmJnYoMTApO2Vsc2V7aWYoIWUmJmsubGVuZ3RoPjEpe2Zvcih2YXIgYT0wO1wiZGlyZWN0b3J5XCI9PWtbYV0udHlwZTspYSsrO2s9W2tbYV1dfWMoayxsKX19LGF8fDApfSgpfXZhciBsPWQoKTtpZihjLmRyb3BBdmFpbGFibGUmJmgoZnVuY3Rpb24oKXthLmRyb3BBdmFpbGFibGU/YS5kcm9wQXZhaWxhYmxlLnZhbHVlPWw6YS5kcm9wQXZhaWxhYmxlPWx9KSwhbClyZXR1cm4gMCE9ZyhjLmhpZGVPbkRyb3BOb3RBdmFpbGFibGUpKGEpJiZiLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIiksdm9pZCAwO3ZhciBtLG49bnVsbCxvPWcoYy5zdG9wUHJvcGFnYXRpb24pKGEpLHA9MSxxPWcoYy5uZ0FjY2VwdCkoYSl8fGMuYWNjZXB0LHI9YW5ndWxhci5pc1N0cmluZyhxKSYmcT9uZXcgUmVnRXhwKGUocSksXCJnaVwiKTpudWxsLHM9cj9udWxsOmMubmdBY2NlcHQ7YlswXS5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIixmdW5jdGlvbihkKXtpZihkLnByZXZlbnREZWZhdWx0KCksbyYmZC5zdG9wUHJvcGFnYXRpb24oKSxuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJDaHJvbWVcIik+LTEpe3ZhciBlPWQuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQ7ZC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdD1cIm1vdmVcIj09PWV8fFwibGlua01vdmVcIj09PWU/XCJtb3ZlXCI6XCJjb3B5XCJ9aC5jYW5jZWwobiksYS5hY3R1YWxEcmFnT3ZlckNsYXNzfHwobT1qKGEsYyxkKSksYi5hZGRDbGFzcyhtKX0sITEpLGJbMF0uYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdlbnRlclwiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxvJiZhLnN0b3BQcm9wYWdhdGlvbigpfSwhMSksYlswXS5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2xlYXZlXCIsZnVuY3Rpb24oKXtuPWgoZnVuY3Rpb24oKXtiLnJlbW92ZUNsYXNzKG0pLG09bnVsbH0scHx8MSl9LCExKSxcIlwiIT1jLm5nRmlsZURyb3AmJihjLm5nRmlsZUNoYW5nZT1hLm5nRmlsZURyb3ApLGJbMF0uYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIixmdW5jdGlvbihkKXtkLnByZXZlbnREZWZhdWx0KCksbyYmZC5zdG9wUHJvcGFnYXRpb24oKSxiLnJlbW92ZUNsYXNzKG0pLG09bnVsbCxrKGQsZnVuY3Rpb24oYixlKXtoKGZ1bmN0aW9uKCl7ZiYmKGcoYy5uZ01vZGVsKS5hc3NpZ24oYSxiKSxmJiZmLiRzZXRWaWV3VmFsdWUobnVsbCE9YiYmMD09Yi5sZW5ndGg/XCJcIjpiKSksYy5uZ01vZGVsUmVqZWN0ZWQmJmFbYy5uZ01vZGVsUmVqZWN0ZWRdJiZnKGMubmdNb2RlbFJlamVjdGVkKS5hc3NpZ24oYSxlKX0pLGgoZnVuY3Rpb24oKXtnKGMubmdGaWxlQ2hhbmdlKShhLHskZmlsZXM6YiwkcmVqZWN0ZWRGaWxlczplLCRldmVudDpkfSl9KX0sMCE9ZyhjLmFsbG93RGlyKShhKSxjLm11bHRpcGxlfHxnKGMubmdNdWx0aXBsZSkoYSkpfSwhMSl9ZnVuY3Rpb24gZCgpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuXCJkcmFnZ2FibGVcImluIGEmJlwib25kcm9wXCJpbiBhfWZ1bmN0aW9uIGUoYSl7aWYoYS5sZW5ndGg+MiYmXCIvXCI9PT1hWzBdJiZcIi9cIj09PWFbYS5sZW5ndGgtMV0pcmV0dXJuIGEuc3Vic3RyaW5nKDEsYS5sZW5ndGgtMSk7dmFyIGI9YS5zcGxpdChcIixcIiksYz1cIlwiO2lmKGIubGVuZ3RoPjEpZm9yKHZhciBkPTA7ZDxiLmxlbmd0aDtkKyspYys9XCIoXCIrZShiW2RdKStcIilcIixkPGIubGVuZ3RoLTEmJihjKz1cInxcIik7ZWxzZSAwPT1hLmluZGV4T2YoXCIuXCIpJiYoYT1cIipcIithKSxjPVwiXlwiK2EucmVwbGFjZShuZXcgUmVnRXhwKFwiWy5cXFxcXFxcXCsqP1xcXFxbXFxcXF5cXFxcXSQoKXt9PSE8Pnw6XFxcXC1dXCIsXCJnXCIpLFwiXFxcXCQmXCIpK1wiJFwiLGM9Yy5yZXBsYWNlKC9cXFxcXFwqL2csXCIuKlwiKS5yZXBsYWNlKC9cXFxcXFw/L2csXCIuXCIpO3JldHVybiBjfXdpbmRvdy5YTUxIdHRwUmVxdWVzdCYmIXdpbmRvdy5YTUxIdHRwUmVxdWVzdC5fX2lzRmlsZUFQSVNoaW0mJmEoXCJzZXRSZXF1ZXN0SGVhZGVyXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7aWYoXCJfX3NldFhIUl9cIj09PWIpe3ZhciBkPWModGhpcyk7ZCBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZkKHRoaXMpfWVsc2UgYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSk7dmFyIGY9YW5ndWxhci5tb2R1bGUoXCJhbmd1bGFyRmlsZVVwbG9hZFwiLFtdKTtmLnZlcnNpb249XCIzLjEuMlwiLGYuc2VydmljZShcIiR1cGxvYWRcIixbXCIkaHR0cFwiLFwiJHFcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoZCl7ZC5tZXRob2Q9ZC5tZXRob2R8fFwiUE9TVFwiLGQuaGVhZGVycz1kLmhlYWRlcnN8fHt9LGQudHJhbnNmb3JtUmVxdWVzdD1kLnRyYW5zZm9ybVJlcXVlc3R8fGZ1bmN0aW9uKGIsYyl7cmV0dXJuIHdpbmRvdy5BcnJheUJ1ZmZlciYmYiBpbnN0YW5jZW9mIHdpbmRvdy5BcnJheUJ1ZmZlcj9iOmEuZGVmYXVsdHMudHJhbnNmb3JtUmVxdWVzdFswXShiLGMpfTt2YXIgZT1iLmRlZmVyKCksZj1lLnByb21pc2U7cmV0dXJuIGQuaGVhZGVycy5fX3NldFhIUl89ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSl7YSYmKGQuX19YSFI9YSxkLnhockZuJiZkLnhockZuKGEpLGEudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLGZ1bmN0aW9uKGEpe2EuY29uZmlnPWQsZS5ub3RpZnk/ZS5ub3RpZnkoYSk6Zi5wcm9ncmVzc19mbiYmYyhmdW5jdGlvbigpe2YucHJvZ3Jlc3NfZm4oYSl9KX0sITEpLGEudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oYSl7YS5sZW5ndGhDb21wdXRhYmxlJiYoYS5jb25maWc9ZCxlLm5vdGlmeT9lLm5vdGlmeShhKTpmLnByb2dyZXNzX2ZuJiZjKGZ1bmN0aW9uKCl7Zi5wcm9ncmVzc19mbihhKX0pKX0sITEpKX19LGEoZCkudGhlbihmdW5jdGlvbihhKXtlLnJlc29sdmUoYSl9LGZ1bmN0aW9uKGEpe2UucmVqZWN0KGEpfSxmdW5jdGlvbihhKXtlLm5vdGlmeShhKX0pLGYuc3VjY2Vzcz1mdW5jdGlvbihhKXtyZXR1cm4gZi50aGVuKGZ1bmN0aW9uKGIpe2EoYi5kYXRhLGIuc3RhdHVzLGIuaGVhZGVycyxkKX0pLGZ9LGYuZXJyb3I9ZnVuY3Rpb24oYSl7cmV0dXJuIGYudGhlbihudWxsLGZ1bmN0aW9uKGIpe2EoYi5kYXRhLGIuc3RhdHVzLGIuaGVhZGVycyxkKX0pLGZ9LGYucHJvZ3Jlc3M9ZnVuY3Rpb24oYSl7cmV0dXJuIGYucHJvZ3Jlc3NfZm49YSxmLnRoZW4obnVsbCxudWxsLGZ1bmN0aW9uKGIpe2EoYil9KSxmfSxmLmFib3J0PWZ1bmN0aW9uKCl7cmV0dXJuIGQuX19YSFImJmMoZnVuY3Rpb24oKXtkLl9fWEhSLmFib3J0KCl9KSxmfSxmLnhocj1mdW5jdGlvbihhKXtyZXR1cm4gZC54aHJGbj1mdW5jdGlvbihiKXtyZXR1cm4gZnVuY3Rpb24oKXtiJiZiLmFwcGx5KGYsYXJndW1lbnRzKSxhLmFwcGx5KGYsYXJndW1lbnRzKX19KGQueGhyRm4pLGZ9LGZ9dGhpcy51cGxvYWQ9ZnVuY3Rpb24oYSl7YS5oZWFkZXJzPWEuaGVhZGVyc3x8e30sYS5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdPXZvaWQgMDthLnRyYW5zZm9ybVJlcXVlc3Q7cmV0dXJuIGEudHJhbnNmb3JtUmVxdWVzdD1hLnRyYW5zZm9ybVJlcXVlc3Q/XCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEudHJhbnNmb3JtUmVxdWVzdCk/YS50cmFuc2Zvcm1SZXF1ZXN0OlthLnRyYW5zZm9ybVJlcXVlc3RdOltdLGEudHJhbnNmb3JtUmVxdWVzdC5wdXNoKGZ1bmN0aW9uKGIpe3ZhciBjPW5ldyBGb3JtRGF0YSxkPXt9O2Zvcih2YXIgZSBpbiBhLmZpZWxkcylkW2VdPWEuZmllbGRzW2VdO2lmKGImJihkLmRhdGE9YiksYS5mb3JtRGF0YUFwcGVuZGVyKWZvcih2YXIgZSBpbiBkKWEuZm9ybURhdGFBcHBlbmRlcihjLGUsZFtlXSk7ZWxzZSBmb3IodmFyIGUgaW4gZCl7dmFyIGY9ZFtlXTt2b2lkIDAhPT1mJiYoXCJbb2JqZWN0IFN0cmluZ11cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChmKT9jLmFwcGVuZChlLGYpOmEuc2VuZE9iamVjdHNBc0pzb25CbG9iJiZcIm9iamVjdFwiPT10eXBlb2YgZj9jLmFwcGVuZChlLG5ldyBCbG9iKFtmXSx7dHlwZTpcImFwcGxpY2F0aW9uL2pzb25cIn0pKTpjLmFwcGVuZChlLEpTT04uc3RyaW5naWZ5KGYpKSl9aWYobnVsbCE9YS5maWxlKXt2YXIgZz1hLmZpbGVGb3JtRGF0YU5hbWV8fFwiZmlsZVwiO2lmKFwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhLmZpbGUpKWZvcih2YXIgaD1cIltvYmplY3QgU3RyaW5nXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGcpLGk9MDtpPGEuZmlsZS5sZW5ndGg7aSsrKWMuYXBwZW5kKGg/ZzpnW2ldLGEuZmlsZVtpXSxhLmZpbGVOYW1lJiZhLmZpbGVOYW1lW2ldfHxhLmZpbGVbaV0ubmFtZSk7ZWxzZSBjLmFwcGVuZChnLGEuZmlsZSxhLmZpbGVOYW1lfHxhLmZpbGUubmFtZSl9cmV0dXJuIGN9KSxkKGEpfSx0aGlzLmh0dHA9ZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSl9fV0pLGYuZGlyZWN0aXZlKFwibmdGaWxlU2VsZWN0XCIsW1wiJHBhcnNlXCIsXCIkdGltZW91dFwiLFwiJGNvbXBpbGVcIixmdW5jdGlvbihhLGMsZCl7cmV0dXJue3Jlc3RyaWN0OlwiQUVDXCIscmVxdWlyZTpcIj9uZ01vZGVsXCIsbGluazpmdW5jdGlvbihlLGYsZyxoKXtiKGUsZixnLGgsYSxjLGQpfX19XSksZi5kaXJlY3RpdmUoXCJuZ0ZpbGVEcm9wXCIsW1wiJHBhcnNlXCIsXCIkdGltZW91dFwiLFwiJGxvY2F0aW9uXCIsZnVuY3Rpb24oYSxiLGQpe3JldHVybntyZXN0cmljdDpcIkFFQ1wiLHJlcXVpcmU6XCI/bmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oZSxmLGcsaCl7YyhlLGYsZyxoLGEsYixkKX19fV0pLGYuZGlyZWN0aXZlKFwibmdOb0ZpbGVEcm9wXCIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSxiKXtkKCkmJmIuY3NzKFwiZGlzcGxheVwiLFwibm9uZVwiKX19KSxmLmRpcmVjdGl2ZShcIm5nRmlsZURyb3BBdmFpbGFibGVcIixbXCIkcGFyc2VcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYpe2lmKGQoKSl7dmFyIGc9YShmLm5nRmlsZURyb3BBdmFpbGFibGUpO2IoZnVuY3Rpb24oKXtnKGMpfSl9fX1dKTt2YXIgZz1hbmd1bGFyLm1vZHVsZShcIm5nRmlsZVVwbG9hZFwiLFtdKTtmb3IodmFyIGggaW4gZilnW2hdPWZbaF19KCk7IiwiYW5ndWxhci5tb2R1bGUoXCJuZ0ZhYkZvcm1cIixbXCJuZ01lc3NhZ2VzXCJdKSxhbmd1bGFyLm1vZHVsZShcIm5nRmFiRm9ybVwiKS5kaXJlY3RpdmUoXCJmb3JtXCIsW1wibmdGYWJGb3JtRGlyZWN0aXZlXCIsZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7cmV0dXJuIGF9XSksYW5ndWxhci5tb2R1bGUoXCJuZ0ZhYkZvcm1cIikuZGlyZWN0aXZlKFwiaW5wdXRcIixbXCJuZ0ZhYkZvcm1WYWxpZGF0aW9uc0RpcmVjdGl2ZVwiLGZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO3JldHVybiBhfV0pLGFuZ3VsYXIubW9kdWxlKFwibmdGYWJGb3JtXCIpLmRpcmVjdGl2ZShcInRleHRhcmVhXCIsW1wibmdGYWJGb3JtVmFsaWRhdGlvbnNEaXJlY3RpdmVcIixmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gYX1dKSxhbmd1bGFyLm1vZHVsZShcIm5nRmFiRm9ybVwiKS5kaXJlY3RpdmUoXCJzZWxlY3RcIixbXCJuZ0ZhYkZvcm1WYWxpZGF0aW9uc0RpcmVjdGl2ZVwiLGZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO3JldHVybiBhfV0pLGFuZ3VsYXIubW9kdWxlKFwibmdGYWJGb3JtXCIpLnByb3ZpZGVyKFwibmdGYWJGb3JtXCIsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBhKGEsYil7dmFyIGQ9YW5ndWxhci5lbGVtZW50KGFuZ3VsYXIuZWxlbWVudChcIjxkaXYvPlwiKS5odG1sKGEpKTtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKGIsZnVuY3Rpb24oYSxiKXt2YXIgZT1uZXcgUmVnRXhwKGMudmFsaWRhdGlvbk1zZ1ByZWZpeCk7aWYoYi5tYXRjaChlKSl7dmFyIGY9Yi5yZXBsYWNlKGMudmFsaWRhdGlvbk1zZ1ByZWZpeCxcIlwiKTtmPWYuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkrZi5zbGljZSgxKTt2YXIgZz1kWzBdLnF1ZXJ5U2VsZWN0b3IoJ1tuZy1tZXNzYWdlPVwiJytmKydcIl0nKTthbmd1bGFyLmVsZW1lbnQoZykuaHRtbChhKX19KSxkfXZhciBiLGM9e3ZhbGlkYXRpb25zVGVtcGxhdGU6XCJkZWZhdWx0LXZhbGlkYXRpb24tbXNncy5odG1sXCIscHJldmVudEludmFsaWRTdWJtaXQ6ITAscHJldmVudERvdWJsZVN1Ym1pdDohMCxwcmV2ZW50RG91YmxlU3VibWl0VGltZW91dExlbmd0aDoxZTMsc2V0Rm9ybURpcnR5T25TdWJtaXQ6ITAsc2Nyb2xsVG9BbmRGb2N1c0ZpcnN0RXJyb3JPblN1Ym1pdDohMCxzY3JvbGxBbmltYXRpb25UaW1lOjUwMCxzY3JvbGxPZmZzZXQ6LTEwMCxkaXNhYmxlZEZvcm1zOiEwLGdsb2JhbEZhYkZvcm1EaXNhYmxlOiExLHNldE5vdmFsaWRhdGU6ITAsc2V0TmFtZXNCeU5nTW9kZWw6ITAsc2V0QXN0ZXJpc2tGb3JSZXF1aXJlZExhYmVsOiExLGFzdGVyaXNrU3RyOlwiKlwiLHZhbGlkYXRpb25Nc2dQcmVmaXg6XCJ2YWxpZGF0aW9uTXNnXCIsZW1haWxSZWdleDovW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/Lyx3YXRjaEZvckZvcm1DdHJsOiExLGZvcm1DaGFuZ2VFdmVudDpcIk5HX0ZBQl9GT1JNX09QVElPTlNfQ0hBTkdFRFwifSxkPWZ1bmN0aW9uKGEsYixjKXtcImNoZWNrYm94XCI9PT1jLnR5cGV8fFwicmFkaW9cIj09PWMudHlwZT9iLnBhcmVudCgpLmFmdGVyKGEpOmIuYWZ0ZXIoYSl9LGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYixjLGQpe3JldHVybihhLz1kLzIpPDE/Yy8yKmEqYStiOi1jLzIqKC0tYSooYS0yKS0xKStifWZ1bmN0aW9uIGIoYSxiKXt2YXIgYz01MDAsZD1NYXRoLmFicyhhKSxlPWIvMTA7cmV0dXJuIGIqZC9jK2V9cmV0dXJuIGZ1bmN0aW9uKGMsZCxlKXtmdW5jdGlvbiBmKCl7bCs9bTt2YXIgYj1hKGwsaixrLGkpO3dpbmRvdy5zY3JvbGxUbyhoLGIpLGk+bD9zZXRUaW1lb3V0KGYsbSk6Yy5mb2N1cygpfXZhciBnPWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wK3BhcnNlSW50KGUpLGg9Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LGk9YihnLGQpLGo9d2luZG93LnBhZ2VZT2Zmc2V0LGs9ZyxsPTAsbT0yMDtyZXR1cm4gMD09PWs/dm9pZCBjLmZvY3VzKCk6dm9pZCBmKCl9fSgpO3JldHVybntleHRlbmRDb25maWc6ZnVuY3Rpb24oYSl7Yz1hbmd1bGFyLmV4dGVuZChjLGEpfSxzZXRJbnNlcnRFcnJvclRwbEZuOmZ1bmN0aW9uKGEpe2Q9YX0sc2V0U2Nyb2xsVG9GbjpmdW5jdGlvbihhKXtlPWF9LHNldEN1c3RvbVZhbGlkYXRvcnNGbjpmdW5jdGlvbihhKXtiPWF9LCRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57aW5zZXJ0RXJyb3JUcGw6ZCxhZGRDdXN0b21WYWxpZGF0aW9uczphLGN1c3RvbVZhbGlkYXRvcnM6YixzY3JvbGxUbzplLGNvbmZpZzpjfX19fSksYW5ndWxhci5tb2R1bGUoXCJuZ0ZhYkZvcm1cIikucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7YS5wdXQoXCJkZWZhdWx0LXZhbGlkYXRpb24tbXNncy5odG1sXCIsJzxkaXYgbmctbWVzc2FnZXM9XCJmaWVsZC4kZXJyb3JcIiBjbGFzcz1cInZhbGlkYXRpb25cIiBuZy1zaG93PVwiYXR0cnMucmVxdWlyZWQ9PVxcJ1xcJ3x8IGF0dHJzLnJlcXVpcmVkXCI+PHVsIGNsYXNzPVwibGlzdC11bnN0eWxlZCB2YWxpZGF0aW9uLWVycm9yc1wiIG5nLXNob3c9XCJmaWVsZC4kaW52YWxpZCAmJiAoZmllbGQuJHRvdWNoZWQgfHwgZmllbGQuJGRpcnR5IHx8IGZvcm0uJHRyaWVkU3VibWl0KVwiPjxsaSBuZy1tZXNzYWdlPVwicmVxdWlyZWRcIj5UaGlzIGZpZWxkIGlzIHJlcXVpcmVkPC9saT48bGkgbmctbWVzc2FnZT1cIm5nRmFiRW5zdXJlRXhwcmVzc2lvblwiPk5vdCB2YWxpZCBjb25kaXRpb248L2xpPjxsaSBuZy1tZXNzYWdlPVwicGFzc3dvcmRcIj5QbGVhc2UgZW50ZXIgYSB2YWxpZCBwYXNzd29yZDwvbGk+PGxpIG5nLW1lc3NhZ2U9XCJlbWFpbFwiPlBsZWFzZSBlbnRlciBhIHZhbGlkIGUtbWFpbDwvbGk+PGxpIG5nLW1lc3NhZ2U9XCJwYXR0ZXJuXCI+SW52YWxpZCBpbnB1dCBmb3JtYXQ8L2xpPjxsaSBuZy1tZXNzYWdlPVwiZGF0ZVwiPlBsZWFzZSBlbnRlciBhIHZhbGlkIGRhdGU8L2xpPjxsaSBuZy1tZXNzYWdlPVwidGltZVwiPlBsZWFzZSBlbnRlciBhIHZhbGlkIHRpbWU8L2xpPjxsaSBuZy1tZXNzYWdlPVwiZGF0ZXRpbWVcIj5QbGVhc2UgZW50ZXIgYSB2YWxpZCBkYXRlIGFuZCB0aW1lPC9saT48bGkgbmctbWVzc2FnZT1cImRhdGV0aW1lLWxvY2FsXCI+UGxlYXNlIGVudGVyIGEgdmFsaWQgZGF0ZSBhbmQgdGltZTwvbGk+PGxpIG5nLW1lc3NhZ2U9XCJudW1iZXJcIj5UaGlzIGZpZWxkIG11c3QgYmUgbnVtZXJpYzwvbGk+PGxpIG5nLW1lc3NhZ2U9XCJjb2xvclwiPlBsZWFzZSBlbnRlciBhIHZhbGlkIGNvbG9yPC9saT48bGkgbmctbWVzc2FnZT1cInJhbmdlXCI+UGxlYXNlIGVudGVyIGEgdmFsaWQgcmFuZ2U8L2xpPjxsaSBuZy1tZXNzYWdlPVwibW9udGhcIj5QbGVhc2UgZW50ZXIgYSB2YWxpZCBtb250aDwvbGk+PGxpIG5nLW1lc3NhZ2U9XCJ1cmxcIj5QbGVhc2UgZW50ZXIgYSB2YWxpZCBVUkw8L2xpPjxsaSBuZy1tZXNzYWdlPVwiZmlsZVwiPkludmFsaWQgZmlsZTwvbGk+PGxpIG5nLW1lc3NhZ2U9XCJtaW5sZW5ndGhcIj5QbGVhc2UgdXNlIGF0IGxlYXN0IHt7IGF0dHJzLm1pbmxlbmd0aCB9fSBjaGFyYWN0ZXJzPC9saT48bGkgbmctbWVzc2FnZT1cIm1heGxlbmd0aFwiPlBsZWFzZSBkbyBub3QgZXhjZWVkIHt7IGF0dHJzLm1heGxlbmd0aCB9fSBjaGFyYWN0ZXJzPC9saT48bGkgbmctbWVzc2FnZT1cIm5nRmFiTWF0Y2hcIj5UaGUge3sgYXR0cnMudHlwZSA9PT1cXCdwYXNzd29yZFxcJz8gXFwncGFzc3dvcmRzXFwnIDogXFwndmFsdWVzXFwnIH19IHNob3VsZCBtYXRjaDwvbGk+PGxpIG5nLWlmPVwiYXR0cnMudHlwZSA9PSBcXCd0aW1lXFwnIFwiIG5nLW1lc3NhZ2U9XCJtaW5cIj5UaGUgdGltZSBwcm92aWRlZCBzaG91bGQgYWZ0ZXIge3sgYXR0cnMubWluIHxkYXRlOiBcXCdISDpNTVxcJyB9fTwvbGk+PGxpIG5nLW1lc3NhZ2U9XCJtYXhcIiBuZy1pZj1cImF0dHJzLnR5cGUgPT0gXFwndGltZVxcJyBcIj5UaGUgdGltZSBwcm92aWRlZCBzaG91bGQgYmUgYmVmb3JlIHt7YXR0cnMubWF4IHxkYXRlOiBcXCdISDpNTVxcJ319PC9saT48bGkgbmctbWVzc2FnZT1cIm1pblwiIG5nLWlmPVwiYXR0cnMudHlwZSA9PSBcXCdkYXRlXFwnIFwiPlRoZSBkYXRlIHByb3ZpZGVkIHNob3VsZCBiZSBhZnRlciB7e2F0dHJzLm1pbiB8ZGF0ZTpcXCdkZC5NTS55eVxcJ319PC9saT48bGkgbmctbWVzc2FnZT1cIm1heFwiIG5nLWlmPVwiYXR0cnMudHlwZSA9PSBcXCdkYXRlXFwnIFwiPlRoZSBkYXRlIHByb3ZpZGVkIHNob3VsZCBiZSBiZWZvcmUge3thdHRycy5tYXggfGRhdGU6IFxcJ2RkLk1NLnl5XFwnfX08L2xpPjwvdWw+PGRpdiBjbGFzcz1cInZhbGlkYXRpb24tc3VjY2Vzc1wiIG5nLXNob3c9XCJmaWVsZC4kdmFsaWQgJiYgIWZpZWxkLiRpbnZhbGlkXCI+PC9kaXY+PC9kaXY+Jyl9XSksYW5ndWxhci5tb2R1bGUoXCJuZ0ZhYkZvcm1cIikuZmFjdG9yeShcIm5nRmFiRm9ybVZhbGlkYXRpb25zRGlyZWN0aXZlXCIsW1wibmdGYWJGb3JtXCIsXCIkY29tcGlsZVwiLFwiJHRlbXBsYXRlUmVxdWVzdFwiLFwiJHJvb3RTY29wZVwiLFwiJHRpbWVvdXRcIixmdW5jdGlvbihhLGIsYyxkLGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGYoZSl7dmFyIGY9ZS5lbCxnPWUuY2ZnLGg9ZS5mb3JtQ3RybCxpPWUubmdNb2RlbEN0cmwsaj1lLmF0dHJzO2UuY3VycmVudFZhbGlkYXRpb25WYXJzLnRwbCYmMCE9PU9iamVjdC5rZXlzKGUuY3VycmVudFZhbGlkYXRpb25WYXJzLnRwbCkubGVuZ3RoJiZhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VmFsaWRhdGlvblZhcnMudHBsKS5yZW1vdmUoKSxjKGcudmFsaWRhdGlvbnNUZW1wbGF0ZSkudGhlbihmdW5jdGlvbihjKXt2YXIgZz1kLiRuZXcoITApO2UuY3VycmVudFZhbGlkYXRpb25WYXJzLnByaXZhdGVTY29wZT1nLGM9YS5hZGRDdXN0b21WYWxpZGF0aW9ucyhjLGopLGcuYXR0cnM9aixnLmZvcm09aCxnLmZpZWxkPWk7dmFyIGs9YihjLmNoaWxkcmVuKCkpKGcpO2UuY3VycmVudFZhbGlkYXRpb25WYXJzLnRwbD1rWzBdLGEuaW5zZXJ0RXJyb3JUcGwoa1swXSxmLGopfSl9ZnVuY3Rpb24gZyhhLGIsYyl7dmFyIGQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbGFiZWxbZm9yPVwiJytiLm5hbWUrJ1wiXScpO2lmKCFkfHxkLmxlbmd0aDwxKXt2YXIgZT1hWzBdLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7ZSYmXCJMQUJFTFwiPT09ZS50YWdOYW1lJiYoZD1bZV0pfWlmKGQmJmQubGVuZ3RoPjAmJlwicmFkaW9cIiE9PWIudHlwZSYmXCJjaGVja2JveFwiIT09Yi50eXBlKWZvcih2YXIgZj0wO2Y8ZC5sZW5ndGg7ZisrKXt2YXIgZz1kW2ZdO2cudGV4dENvbnRlbnQuc2xpY2UoLWMuYXN0ZXJpc2tTdHIubGVuZ3RoKSE9PWMuYXN0ZXJpc2tTdHImJihnLnRleHRDb250ZW50PWcudGV4dENvbnRlbnQrYy5hc3Rlcmlza1N0cil9fXJldHVybntyZXN0cmljdDpcIkVcIixyZXF1aXJlOlwiP25nTW9kZWxcIixjb21waWxlOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIWMudHlwZXx8XCJzdWJtaXRcIiE9PWMudHlwZS50b0xvd2VyQ2FzZSgpJiZcImJ1dHRvblwiIT09Yy50eXBlLnRvTG93ZXJDYXNlKCk/KGEuY29uZmlnLnNldE5hbWVzQnlOZ01vZGVsJiZjLm5nTW9kZWwmJiFjLm5hbWUmJiFhLmNvbmZpZy5nbG9iYWxGYWJGb3JtRGlzYWJsZSYmKGIuYXR0cihcIm5hbWVcIixjLm5nTW9kZWwpLGMubmFtZT1jLm5nTW9kZWwpLGZ1bmN0aW9uKGIsYyxkLGgpe2Z1bmN0aW9uIGkoYSl7IWh8fCFrLnZhbGlkYXRpb25zVGVtcGxhdGV8fDA9PT1PYmplY3Qua2V5cyhoLiR2YWxpZGF0b3JzKS5sZW5ndGgmJjA9PT1PYmplY3Qua2V5cyhoLiRhc3luY1ZhbGlkYXRvcnMpLmxlbmd0aHx8YSYmay52YWxpZGF0aW9uc1RlbXBsYXRlPT09YS52YWxpZGF0aW9uc1RlbXBsYXRlPyFrLnZhbGlkYXRpb25zVGVtcGxhdGUmJm8udHBsJiYwIT09T2JqZWN0LmtleXMoby50cGwpLmxlbmd0aCYmKG8ucHJpdmF0ZVNjb3BlLiRkZXN0cm95KCksYW5ndWxhci5lbGVtZW50KG8udHBsKS5yZW1vdmUoKSk6Zih7ZWw6YyxjZmc6ayxmb3JtQ3RybDpsLG5nTW9kZWxDdHJsOmgsYXR0cnM6ZCxjdXJyZW50VmFsaWRhdGlvblZhcnM6b30pLCFrLnNldEFzdGVyaXNrRm9yUmVxdWlyZWRMYWJlbHx8ZC5yZXF1aXJlZCE9PSEwfHxhJiZrLnNldEFzdGVyaXNrRm9yUmVxdWlyZWRMYWJlbD09PWEuc2V0QXN0ZXJpc2tGb3JSZXF1aXJlZExhYmVsJiZrLmFzdGVyaXNrU3RyPT09YS5hc3Rlcmlza1N0cnx8ZyhjLGQsayl9ZnVuY3Rpb24gaigpe2UoZnVuY3Rpb24oKXtpZihsPWMuY29udHJvbGxlcihcImZvcm1cIiksbCYmaCl7aWYoa3x8KGs9bC5uZ0ZhYkZvcm1Db25maWcpLCFrKXJldHVybjtrLmVtYWlsUmVnZXgmJlwiZW1haWxcIj09PWQudHlwZSYmKGguJHZhbGlkYXRvcnMuZW1haWw9ZnVuY3Rpb24oYSl7cmV0dXJuIGguJGlzRW1wdHkoYSl8fGsuZW1haWxSZWdleC50ZXN0KGEpfSksYS5jdXN0b21WYWxpZGF0b3JzJiZhLmN1c3RvbVZhbGlkYXRvcnMoaCxkKSxpKCksbT1iLiRvbihhLmZvcm1DaGFuZ2VFdmVudCxmdW5jdGlvbihhLGIsYyl7az1iLGkoYyl9KX19LDApfXZhciBrLGwsbSxuLG89e3RwbDp2b2lkIDAscHJpdmF0ZVNjb3BlOnZvaWQgMH07YS5jb25maWcud2F0Y2hGb3JGb3JtQ3RybD9uPWIuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGMuY29udHJvbGxlcihcImZvcm1cIil9LGZ1bmN0aW9uKGEpe2EmJihuKCksaigpKX0pOmooKSxiLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtvJiZvLnByaXZhdGVTY29wZSYmby5wcml2YXRlU2NvcGUuJGRlc3Ryb3koKX0pfSk6dm9pZCAwfX19XSksYW5ndWxhci5tb2R1bGUoXCJuZ0ZhYkZvcm1cIikuZGlyZWN0aXZlKFwibmdGYWJFbnN1cmVFeHByZXNzaW9uXCIsW1wiJGh0dHBcIixcIiRwYXJzZVwiLGZ1bmN0aW9uKGEsYil7XCJ1c2Ugc3RyaWN0XCI7cmV0dXJue3JlcXVpcmU6XCJuZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGMsZCxlKXthLiR3YXRjaChkLm5nTW9kZWwsZnVuY3Rpb24oKXt2YXIgYz1iKGQubmdGYWJFbnN1cmVFeHByZXNzaW9uKShhKTtlLiRzZXRWYWxpZGl0eShcIm5nRmFiRW5zdXJlRXhwcmVzc2lvblwiLGMpLGUuJHZhbGlkYXRlKCl9KX19fV0pLGFuZ3VsYXIubW9kdWxlKFwibmdGYWJGb3JtXCIpLmRpcmVjdGl2ZShcIm5nRmFiTWF0Y2hcIixmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3JldHVybntyZXF1aXJlOlwibmdNb2RlbFwiLHJlc3RyaWN0OlwiQVwiLHNjb3BlOntuZ0ZhYk1hdGNoOlwiPVwifSxsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2QuJHZhbGlkYXRvcnMubmdGYWJNYXRjaD1mdW5jdGlvbihiKXtyZXR1cm4gQm9vbGVhbihiKSYmYj09YS5uZ0ZhYk1hdGNofSxhLiR3YXRjaChcIm5nRmFiTWF0Y2hcIixmdW5jdGlvbigpe2QuJHZhbGlkYXRlKCl9KX19fSksYW5ndWxhci5tb2R1bGUoXCJuZ0ZhYkZvcm1cIikuZGlyZWN0aXZlKFwibmdGYWJSZXNldEZvcm1PblwiLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7cmV0dXJue3JlcXVpcmU6XCJeZm9ybVwiLHJlc3RyaWN0OlwiQVwiLHNjb3BlOntuZ0ZhYlJlc2V0Rm9ybU9uOlwiQFwiLGRvTm90Q2xlYXJJbnB1dHM6XCJAXCJ9LGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7Yy5uZ0ZhYlJlc2V0Rm9ybU9ufHwoYy5uZ0ZhYlJlc2V0Rm9ybU9uPVwiY2xpY2tcIiksYi5vbihjLm5nRmFiUmVzZXRGb3JtT24sZnVuY3Rpb24oKXtjLmRvTm90Q2xlYXJJbnB1dHM/ZC4kcmVzZXRGb3JtKCk6ZC4kcmVzZXRGb3JtKCEwKSxhLiRhcHBseSgpfSl9fX0pLGFuZ3VsYXIubW9kdWxlKFwibmdGYWJGb3JtXCIpLmZhY3RvcnkoXCJuZ0ZhYkZvcm1EaXJlY3RpdmVcIixbXCIkY29tcGlsZVwiLFwiJHRpbWVvdXRcIixcIm5nRmFiRm9ybVwiLGZ1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEpe2EucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpLGEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9ZnVuY3Rpb24gZShhLGIpe2lmKGIuZGlzYWJsZUZvcm0pe2EuY29udGVudHMoKS53cmFwKFwiPGZpZWxkc2V0PlwiKTt2YXIgYz1hLmNoaWxkcmVuKCk7Yi4kb2JzZXJ2ZShcImRpc2FibGVGb3JtXCIsZnVuY3Rpb24oKXtcInRydWVcIj09PWIuZGlzYWJsZUZvcm18fGIuZGlzYWJsZUZvcm09PT0hMD9jLmF0dHIoXCJkaXNhYmxlZFwiLCEwKTpjLmF0dHIoXCJkaXNhYmxlZFwiLCExKX0pfX1mdW5jdGlvbiBmKGEsYixkLGUpe3ZhciBmPWFbMF0ucXVlcnlTZWxlY3RvcihcIi5uZy1pbnZhbGlkXCIpO2YmJmIuJGludmFsaWQmJmMuc2Nyb2xsVG8oZixwYXJzZUludChkKSxlKX1yZXR1cm57cmVzdHJpY3Q6XCJFQUNcIixzY29wZTohMSxyZXF1aXJlOlwiZm9ybVwiLGNvbXBpbGU6ZnVuY3Rpb24oYSxnKXt2YXIgaCxpPWFuZ3VsYXIuY29weShjLmNvbmZpZyk7aWYoaS5nbG9iYWxGYWJGb3JtRGlzYWJsZSE9PSEwfHwhYW5ndWxhci5pc1VuZGVmaW5lZChnLm5nRmFiRm9ybSkpcmV0dXJuIWcubm92YWxpZGF0ZSYmaS5zZXROb3ZhbGlkYXRlJiYoYS5hdHRyKFwibm92YWxpZGF0ZVwiLCEwKSxnLm5vdmFsaWRhdGU9ITApLHtwcmU6ZnVuY3Rpb24oYSxjLGUsZyl7Yy5iaW5kKFwic3VibWl0XCIsZnVuY3Rpb24oZSl7aS5zZXRGb3JtRGlydHlPblN1Ym1pdCYmYS4kYXBwbHkoZnVuY3Rpb24oKXtnLiR0cmllZFN1Ym1pdD0hMH0pLGkucHJldmVudEludmFsaWRTdWJtaXQmJiFnLiR2YWxpZD9kKGUpOmkucHJldmVudERvdWJsZVN1Ym1pdCYmKGcuJHByZXZlbnREb3VibGVTdWJtaXQmJmQoZSksaCYmYi5jYW5jZWwoaCksZy4kcHJldmVudERvdWJsZVN1Ym1pdD0hMCxoPWIoZnVuY3Rpb24oKXtnLiRwcmV2ZW50RG91YmxlU3VibWl0PSExfSxpLnByZXZlbnREb3VibGVTdWJtaXRUaW1lb3V0TGVuZ3RoKSksaS5zY3JvbGxUb0FuZEZvY3VzRmlyc3RFcnJvck9uU3VibWl0JiZmKGMsZyxpLnNjcm9sbEFuaW1hdGlvblRpbWUsaS5zY3JvbGxPZmZzZXQpfSl9LHBvc3Q6ZnVuY3Rpb24oYSxkLGYsZyl7Zy4kdHJpZWRTdWJtaXQ9ITEsZy4kcHJldmVudERvdWJsZVN1Ym1pdD0hMSxnLm5nRmFiRm9ybUNvbmZpZz1pLGcuJHJlc2V0Rm9ybT1mdW5jdGlvbihhKXtpZihhPT09ITApZm9yKHZhciBiPWQuZmluZChcImlucHV0XCIpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGU9YW5ndWxhci5lbGVtZW50KGJbY10pLGY9ZS5jb250cm9sbGVyKFwibmdNb2RlbFwiKTtmJiYoZi4kc2V0Vmlld1ZhbHVlKFwiXCIpLGYuJHJlbmRlcigpKX1nLiR0cmllZFN1Ym1pdD0hMSxnLiRzZXRQcmlzdGluZSgpLGcuJHNldFVudG91Y2hlZCgpfSxpLmRpc2FibGVkRm9ybXMmJmUoZCxmKSxmLm5nRmFiRm9ybU9wdGlvbnMmJmEuJHdhdGNoKGYubmdGYWJGb3JtT3B0aW9ucyxmdW5jdGlvbihiKXtpZihiKXt2YXIgZD1hbmd1bGFyLmNvcHkoaSk7aT1nLm5nRmFiRm9ybUNvbmZpZz1hbmd1bGFyLmV4dGVuZChpLGIpLGEuJGJyb2FkY2FzdChjLmZvcm1DaGFuZ2VFdmVudCxpLGQpfX0sITApLGEuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2gmJmIuY2FuY2VsKGgpfSl9fX19fV0pLGFuZ3VsYXIubW9kdWxlKFwibmdGYWJGb3JtXCIpLmRpcmVjdGl2ZShcIm5nRm9ybVwiLFtcIm5nRmFiRm9ybURpcmVjdGl2ZVwiLGZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO3JldHVybiBhfV0pOyIsIiFmdW5jdGlvbihhLGIpe2JbXCJ0cnVlXCJdPWEsLyoqXG4gKiBAbGljZW5zZSBSYW5neSwgYSBjcm9zcy1icm93c2VyIEphdmFTY3JpcHQgcmFuZ2UgYW5kIHNlbGVjdGlvbiBsaWJyYXJ5XG4gKiBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvcmFuZ3kvXG4gKlxuICogQ29weXJpZ2h0IDIwMTIsIFRpbSBEb3duXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBWZXJzaW9uOiAxLjIuM1xuICogQnVpbGQgZGF0ZTogMjYgRmVicnVhcnkgMjAxMlxuICovXG53aW5kb3cucmFuZ3k9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYil7dmFyIGM9dHlwZW9mIGFbYl07cmV0dXJuIGM9PWx8fCEoYyE9a3x8IWFbYl0pfHxcInVua25vd25cIj09Y31mdW5jdGlvbiBiKGEsYil7cmV0dXJuISh0eXBlb2YgYVtiXSE9a3x8IWFbYl0pfWZ1bmN0aW9uIGMoYSxiKXtyZXR1cm4gdHlwZW9mIGFbYl0hPW19ZnVuY3Rpb24gZChhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtmb3IodmFyIGQ9Yy5sZW5ndGg7ZC0tOylpZighYShiLGNbZF0pKXJldHVybiExO3JldHVybiEwfX1mdW5jdGlvbiBlKGEpe3JldHVybiBhJiZyKGEscSkmJnQoYSxwKX1mdW5jdGlvbiBmKGEpe3dpbmRvdy5hbGVydChcIlJhbmd5IG5vdCBzdXBwb3J0ZWQgaW4geW91ciBicm93c2VyLiBSZWFzb246IFwiK2EpLHUuaW5pdGlhbGl6ZWQ9ITAsdS5zdXBwb3J0ZWQ9ITF9ZnVuY3Rpb24gZyhhKXt2YXIgYj1cIlJhbmd5IHdhcm5pbmc6IFwiK2E7dS5jb25maWcuYWxlcnRPbldhcm4/d2luZG93LmFsZXJ0KGIpOnR5cGVvZiB3aW5kb3cuY29uc29sZSE9bSYmdHlwZW9mIHdpbmRvdy5jb25zb2xlLmxvZyE9bSYmd2luZG93LmNvbnNvbGUubG9nKGIpfWZ1bmN0aW9uIGgoKXtpZighdS5pbml0aWFsaXplZCl7dmFyIGMsZD0hMSxnPSExO2EoZG9jdW1lbnQsXCJjcmVhdGVSYW5nZVwiKSYmKGM9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSxyKGMsbykmJnQoYyxuKSYmKGQ9ITApLGMuZGV0YWNoKCkpO3ZhciBoPWIoZG9jdW1lbnQsXCJib2R5XCIpP2RvY3VtZW50LmJvZHk6ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdO2gmJmEoaCxcImNyZWF0ZVRleHRSYW5nZVwiKSYmKGM9aC5jcmVhdGVUZXh0UmFuZ2UoKSxlKGMpJiYoZz0hMCkpLGR8fGd8fGYoXCJOZWl0aGVyIFJhbmdlIG5vciBUZXh0UmFuZ2UgYXJlIGltcGxlbWVudGVkXCIpLHUuaW5pdGlhbGl6ZWQ9ITAsdS5mZWF0dXJlcz17aW1wbGVtZW50c0RvbVJhbmdlOmQsaW1wbGVtZW50c1RleHRSYW5nZTpnfTtmb3IodmFyIGk9dy5jb25jYXQodiksaj0wLGs9aS5sZW5ndGg7az5qOysrail0cnl7aVtqXSh1KX1jYXRjaChsKXtiKHdpbmRvdyxcImNvbnNvbGVcIikmJmEod2luZG93LmNvbnNvbGUsXCJsb2dcIikmJndpbmRvdy5jb25zb2xlLmxvZyhcIkluaXQgbGlzdGVuZXIgdGhyZXcgYW4gZXhjZXB0aW9uLiBDb250aW51aW5nLlwiLGwpfX19ZnVuY3Rpb24gaShhKXthPWF8fHdpbmRvdyxoKCk7Zm9yKHZhciBiPTAsYz14Lmxlbmd0aDtjPmI7KytiKXhbYl0oYSl9ZnVuY3Rpb24gaihhKXt0aGlzLm5hbWU9YSx0aGlzLmluaXRpYWxpemVkPSExLHRoaXMuc3VwcG9ydGVkPSExfXZhciBrPVwib2JqZWN0XCIsbD1cImZ1bmN0aW9uXCIsbT1cInVuZGVmaW5lZFwiLG49W1wic3RhcnRDb250YWluZXJcIixcInN0YXJ0T2Zmc2V0XCIsXCJlbmRDb250YWluZXJcIixcImVuZE9mZnNldFwiLFwiY29sbGFwc2VkXCIsXCJjb21tb25BbmNlc3RvckNvbnRhaW5lclwiLFwiU1RBUlRfVE9fU1RBUlRcIixcIlNUQVJUX1RPX0VORFwiLFwiRU5EX1RPX1NUQVJUXCIsXCJFTkRfVE9fRU5EXCJdLG89W1wic2V0U3RhcnRcIixcInNldFN0YXJ0QmVmb3JlXCIsXCJzZXRTdGFydEFmdGVyXCIsXCJzZXRFbmRcIixcInNldEVuZEJlZm9yZVwiLFwic2V0RW5kQWZ0ZXJcIixcImNvbGxhcHNlXCIsXCJzZWxlY3ROb2RlXCIsXCJzZWxlY3ROb2RlQ29udGVudHNcIixcImNvbXBhcmVCb3VuZGFyeVBvaW50c1wiLFwiZGVsZXRlQ29udGVudHNcIixcImV4dHJhY3RDb250ZW50c1wiLFwiY2xvbmVDb250ZW50c1wiLFwiaW5zZXJ0Tm9kZVwiLFwic3Vycm91bmRDb250ZW50c1wiLFwiY2xvbmVSYW5nZVwiLFwidG9TdHJpbmdcIixcImRldGFjaFwiXSxwPVtcImJvdW5kaW5nSGVpZ2h0XCIsXCJib3VuZGluZ0xlZnRcIixcImJvdW5kaW5nVG9wXCIsXCJib3VuZGluZ1dpZHRoXCIsXCJodG1sVGV4dFwiLFwidGV4dFwiXSxxPVtcImNvbGxhcHNlXCIsXCJjb21wYXJlRW5kUG9pbnRzXCIsXCJkdXBsaWNhdGVcIixcImdldEJvb2ttYXJrXCIsXCJtb3ZlVG9Cb29rbWFya1wiLFwibW92ZVRvRWxlbWVudFRleHRcIixcInBhcmVudEVsZW1lbnRcIixcInBhc3RlSFRNTFwiLFwic2VsZWN0XCIsXCJzZXRFbmRQb2ludFwiLFwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0XCJdLHI9ZChhKSxzPWQoYiksdD1kKGMpLHU9e3ZlcnNpb246XCIxLjIuM1wiLGluaXRpYWxpemVkOiExLHN1cHBvcnRlZDohMCx1dGlsOntpc0hvc3RNZXRob2Q6YSxpc0hvc3RPYmplY3Q6Yixpc0hvc3RQcm9wZXJ0eTpjLGFyZUhvc3RNZXRob2RzOnIsYXJlSG9zdE9iamVjdHM6cyxhcmVIb3N0UHJvcGVydGllczp0LGlzVGV4dFJhbmdlOmV9LGZlYXR1cmVzOnt9LG1vZHVsZXM6e30sY29uZmlnOnthbGVydE9uV2FybjohMSxwcmVmZXJUZXh0UmFuZ2U6ITF9fTt1LmZhaWw9Zix1Lndhcm49Zyx7fS5oYXNPd25Qcm9wZXJ0eT91LnV0aWwuZXh0ZW5kPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShjKSYmKGFbY109YltjXSl9OmYoXCJoYXNPd25Qcm9wZXJ0eSBub3Qgc3VwcG9ydGVkXCIpO3ZhciB2PVtdLHc9W107dS5pbml0PWgsdS5hZGRJbml0TGlzdGVuZXI9ZnVuY3Rpb24oYSl7dS5pbml0aWFsaXplZD9hKHUpOnYucHVzaChhKX07dmFyIHg9W107dS5hZGRDcmVhdGVNaXNzaW5nTmF0aXZlQXBpTGlzdGVuZXI9ZnVuY3Rpb24oYSl7eC5wdXNoKGEpfSx1LmNyZWF0ZU1pc3NpbmdOYXRpdmVBcGk9aSxqLnByb3RvdHlwZS5mYWlsPWZ1bmN0aW9uKGEpe3Rocm93IHRoaXMuaW5pdGlhbGl6ZWQ9ITAsdGhpcy5zdXBwb3J0ZWQ9ITEsbmV3IEVycm9yKFwiTW9kdWxlICdcIit0aGlzLm5hbWUrXCInIGZhaWxlZCB0byBsb2FkOiBcIithKX0sai5wcm90b3R5cGUud2Fybj1mdW5jdGlvbihhKXt1Lndhcm4oXCJNb2R1bGUgXCIrdGhpcy5uYW1lK1wiOiBcIithKX0sai5wcm90b3R5cGUuY3JlYXRlRXJyb3I9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBFcnJvcihcIkVycm9yIGluIFJhbmd5IFwiK3RoaXMubmFtZStcIiBtb2R1bGU6IFwiK2EpfSx1LmNyZWF0ZU1vZHVsZT1mdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBqKGEpO3UubW9kdWxlc1thXT1jLHcucHVzaChmdW5jdGlvbihhKXtiKGEsYyksYy5pbml0aWFsaXplZD0hMCxjLnN1cHBvcnRlZD0hMH0pfSx1LnJlcXVpcmVNb2R1bGVzPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQ9MCxlPWEubGVuZ3RoO2U+ZDsrK2Qpe2lmKGM9YVtkXSxiPXUubW9kdWxlc1tjXSwhKGImJmIgaW5zdGFuY2VvZiBqKSl0aHJvdyBuZXcgRXJyb3IoXCJNb2R1bGUgJ1wiK2MrXCInIG5vdCBmb3VuZFwiKTtpZighYi5zdXBwb3J0ZWQpdGhyb3cgbmV3IEVycm9yKFwiTW9kdWxlICdcIitjK1wiJyBub3Qgc3VwcG9ydGVkXCIpfX07dmFyIHk9ITEsej1mdW5jdGlvbigpe3l8fCh5PSEwLHUuaW5pdGlhbGl6ZWR8fGgoKSl9O3JldHVybiB0eXBlb2Ygd2luZG93PT1tP3ZvaWQgZihcIk5vIHdpbmRvdyBmb3VuZFwiKTp0eXBlb2YgZG9jdW1lbnQ9PW0/dm9pZCBmKFwiTm8gZG9jdW1lbnQgZm91bmRcIik6KGEoZG9jdW1lbnQsXCJhZGRFdmVudExpc3RlbmVyXCIpJiZkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLHosITEpLGEod2luZG93LFwiYWRkRXZlbnRMaXN0ZW5lclwiKT93aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIix6LCExKTphKHdpbmRvdyxcImF0dGFjaEV2ZW50XCIpP3dpbmRvdy5hdHRhY2hFdmVudChcIm9ubG9hZFwiLHopOmYoXCJXaW5kb3cgZG9lcyBub3QgaGF2ZSByZXF1aXJlZCBhZGRFdmVudExpc3RlbmVyIG9yIGF0dGFjaEV2ZW50IG1ldGhvZFwiKSx1KX0oKSxyYW5neS5jcmVhdGVNb2R1bGUoXCJEb21VdGlsXCIsZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe3ZhciBiO3JldHVybiB0eXBlb2YgYS5uYW1lc3BhY2VVUkk9PXp8fG51bGw9PT0oYj1hLm5hbWVzcGFjZVVSSSl8fFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiPT1ifWZ1bmN0aW9uIGQoYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiAxPT1iLm5vZGVUeXBlP2I6bnVsbH1mdW5jdGlvbiBlKGEpe2Zvcih2YXIgYj0wO2E9YS5wcmV2aW91c1NpYmxpbmc7KWIrKztyZXR1cm4gYn1mdW5jdGlvbiBmKGEpe3ZhciBiO3JldHVybiBqKGEpP2EubGVuZ3RoOihiPWEuY2hpbGROb2Rlcyk/Yi5sZW5ndGg6MH1mdW5jdGlvbiBnKGEsYil7dmFyIGMsZD1bXTtmb3IoYz1hO2M7Yz1jLnBhcmVudE5vZGUpZC5wdXNoKGMpO2ZvcihjPWI7YztjPWMucGFyZW50Tm9kZSlpZihEKGQsYykpcmV0dXJuIGM7cmV0dXJuIG51bGx9ZnVuY3Rpb24gaChhLGIsYyl7Zm9yKHZhciBkPWM/YjpiLnBhcmVudE5vZGU7ZDspe2lmKGQ9PT1hKXJldHVybiEwO2Q9ZC5wYXJlbnROb2RlfXJldHVybiExfWZ1bmN0aW9uIGkoYSxiLGMpe2Zvcih2YXIgZCxlPWM/YTphLnBhcmVudE5vZGU7ZTspe2lmKGQ9ZS5wYXJlbnROb2RlLGQ9PT1iKXJldHVybiBlO2U9ZH1yZXR1cm4gbnVsbH1mdW5jdGlvbiBqKGEpe3ZhciBiPWEubm9kZVR5cGU7cmV0dXJuIDM9PWJ8fDQ9PWJ8fDg9PWJ9ZnVuY3Rpb24gayhhLGIpe3ZhciBjPWIubmV4dFNpYmxpbmcsZD1iLnBhcmVudE5vZGU7cmV0dXJuIGM/ZC5pbnNlcnRCZWZvcmUoYSxjKTpkLmFwcGVuZENoaWxkKGEpLGF9ZnVuY3Rpb24gbChhLGIpe3ZhciBjPWEuY2xvbmVOb2RlKCExKTtyZXR1cm4gYy5kZWxldGVEYXRhKDAsYiksYS5kZWxldGVEYXRhKGIsYS5sZW5ndGgtYiksayhjLGEpLGN9ZnVuY3Rpb24gbShhKXtpZig5PT1hLm5vZGVUeXBlKXJldHVybiBhO2lmKHR5cGVvZiBhLm93bmVyRG9jdW1lbnQhPXopcmV0dXJuIGEub3duZXJEb2N1bWVudDtpZih0eXBlb2YgYS5kb2N1bWVudCE9eilyZXR1cm4gYS5kb2N1bWVudDtpZihhLnBhcmVudE5vZGUpcmV0dXJuIG0oYS5wYXJlbnROb2RlKTt0aHJvdyBuZXcgRXJyb3IoXCJnZXREb2N1bWVudDogbm8gZG9jdW1lbnQgZm91bmQgZm9yIG5vZGVcIil9ZnVuY3Rpb24gbihhKXt2YXIgYj1tKGEpO2lmKHR5cGVvZiBiLmRlZmF1bHRWaWV3IT16KXJldHVybiBiLmRlZmF1bHRWaWV3O2lmKHR5cGVvZiBiLnBhcmVudFdpbmRvdyE9eilyZXR1cm4gYi5wYXJlbnRXaW5kb3c7dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGdldCBhIHdpbmRvdyBvYmplY3QgZm9yIG5vZGVcIil9ZnVuY3Rpb24gbyhhKXtpZih0eXBlb2YgYS5jb250ZW50RG9jdW1lbnQhPXopcmV0dXJuIGEuY29udGVudERvY3VtZW50O2lmKHR5cGVvZiBhLmNvbnRlbnRXaW5kb3chPXopcmV0dXJuIGEuY29udGVudFdpbmRvdy5kb2N1bWVudDt0aHJvdyBuZXcgRXJyb3IoXCJnZXRJZnJhbWVXaW5kb3c6IE5vIERvY3VtZW50IG9iamVjdCBmb3VuZCBmb3IgaWZyYW1lIGVsZW1lbnRcIil9ZnVuY3Rpb24gcChhKXtpZih0eXBlb2YgYS5jb250ZW50V2luZG93IT16KXJldHVybiBhLmNvbnRlbnRXaW5kb3c7aWYodHlwZW9mIGEuY29udGVudERvY3VtZW50IT16KXJldHVybiBhLmNvbnRlbnREb2N1bWVudC5kZWZhdWx0Vmlldzt0aHJvdyBuZXcgRXJyb3IoXCJnZXRJZnJhbWVXaW5kb3c6IE5vIFdpbmRvdyBvYmplY3QgZm91bmQgZm9yIGlmcmFtZSBlbGVtZW50XCIpfWZ1bmN0aW9uIHEoYSl7cmV0dXJuIEEuaXNIb3N0T2JqZWN0KGEsXCJib2R5XCIpP2EuYm9keTphLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXX1mdW5jdGlvbiByKGEpe2Zvcih2YXIgYjtiPWEucGFyZW50Tm9kZTspYT1iO3JldHVybiBhfWZ1bmN0aW9uIHMoYSxiLGMsZCl7dmFyIGYsaCxqLGssbDtpZihhPT1jKXJldHVybiBiPT09ZD8wOmQ+Yj8tMToxO2lmKGY9aShjLGEsITApKXJldHVybiBiPD1lKGYpPy0xOjE7aWYoZj1pKGEsYywhMCkpcmV0dXJuIGUoZik8ZD8tMToxO2lmKGg9ZyhhLGMpLGo9YT09PWg/aDppKGEsaCwhMCksaz1jPT09aD9oOmkoYyxoLCEwKSxqPT09ayl0aHJvdyBuZXcgRXJyb3IoXCJjb21wYXJlUG9pbnRzIGdvdCB0byBjYXNlIDQgYW5kIGNoaWxkQSBhbmQgY2hpbGRCIGFyZSB0aGUgc2FtZSFcIik7Zm9yKGw9aC5maXJzdENoaWxkO2w7KXtpZihsPT09ailyZXR1cm4tMTtpZihsPT09aylyZXR1cm4gMTtsPWwubmV4dFNpYmxpbmd9dGhyb3cgbmV3IEVycm9yKFwiU2hvdWxkIG5vdCBiZSBoZXJlIVwiKX1mdW5jdGlvbiB0KGEpe2Zvcih2YXIgYixjPW0oYSkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2I9YS5maXJzdENoaWxkOyljLmFwcGVuZENoaWxkKGIpO3JldHVybiBjfWZ1bmN0aW9uIHUoYSl7aWYoIWEpcmV0dXJuXCJbTm8gbm9kZV1cIjtpZihqKGEpKXJldHVybidcIicrYS5kYXRhKydcIic7aWYoMT09YS5ub2RlVHlwZSl7dmFyIGI9YS5pZD8nIGlkPVwiJythLmlkKydcIic6XCJcIjtyZXR1cm5cIjxcIithLm5vZGVOYW1lK2IrXCI+W1wiK2EuY2hpbGROb2Rlcy5sZW5ndGgrXCJdXCJ9cmV0dXJuIGEubm9kZU5hbWV9ZnVuY3Rpb24gdihhKXt0aGlzLnJvb3Q9YSx0aGlzLl9uZXh0PWF9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gbmV3IHYoYSl9ZnVuY3Rpb24geChhLGIpe3RoaXMubm9kZT1hLHRoaXMub2Zmc2V0PWJ9ZnVuY3Rpb24geShhKXt0aGlzLmNvZGU9dGhpc1thXSx0aGlzLmNvZGVOYW1lPWEsdGhpcy5tZXNzYWdlPVwiRE9NRXhjZXB0aW9uOiBcIit0aGlzLmNvZGVOYW1lfXZhciB6PVwidW5kZWZpbmVkXCIsQT1hLnV0aWw7QS5hcmVIb3N0TWV0aG9kcyhkb2N1bWVudCxbXCJjcmVhdGVEb2N1bWVudEZyYWdtZW50XCIsXCJjcmVhdGVFbGVtZW50XCIsXCJjcmVhdGVUZXh0Tm9kZVwiXSl8fGIuZmFpbChcImRvY3VtZW50IG1pc3NpbmcgYSBOb2RlIGNyZWF0aW9uIG1ldGhvZFwiKSxBLmlzSG9zdE1ldGhvZChkb2N1bWVudCxcImdldEVsZW1lbnRzQnlUYWdOYW1lXCIpfHxiLmZhaWwoXCJkb2N1bWVudCBtaXNzaW5nIGdldEVsZW1lbnRzQnlUYWdOYW1lIG1ldGhvZFwiKTt2YXIgQj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO0EuYXJlSG9zdE1ldGhvZHMoQixbXCJpbnNlcnRCZWZvcmVcIixcImFwcGVuZENoaWxkXCIsXCJjbG9uZU5vZGVcIl18fCFBLmFyZUhvc3RPYmplY3RzKEIsW1wicHJldmlvdXNTaWJsaW5nXCIsXCJuZXh0U2libGluZ1wiLFwiY2hpbGROb2Rlc1wiLFwicGFyZW50Tm9kZVwiXSkpfHxiLmZhaWwoXCJJbmNvbXBsZXRlIEVsZW1lbnQgaW1wbGVtZW50YXRpb25cIiksQS5pc0hvc3RQcm9wZXJ0eShCLFwiaW5uZXJIVE1MXCIpfHxiLmZhaWwoXCJFbGVtZW50IGlzIG1pc3NpbmcgaW5uZXJIVE1MIHByb3BlcnR5XCIpO3ZhciBDPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwidGVzdFwiKTtBLmFyZUhvc3RNZXRob2RzKEMsW1wic3BsaXRUZXh0XCIsXCJkZWxldGVEYXRhXCIsXCJpbnNlcnREYXRhXCIsXCJhcHBlbmREYXRhXCIsXCJjbG9uZU5vZGVcIl18fCFBLmFyZUhvc3RPYmplY3RzKEIsW1wicHJldmlvdXNTaWJsaW5nXCIsXCJuZXh0U2libGluZ1wiLFwiY2hpbGROb2Rlc1wiLFwicGFyZW50Tm9kZVwiXSl8fCFBLmFyZUhvc3RQcm9wZXJ0aWVzKEMsW1wiZGF0YVwiXSkpfHxiLmZhaWwoXCJJbmNvbXBsZXRlIFRleHQgTm9kZSBpbXBsZW1lbnRhdGlvblwiKTt2YXIgRD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hLmxlbmd0aDtjLS07KWlmKGFbY109PT1iKXJldHVybiEwO3JldHVybiExfTt2LnByb3RvdHlwZT17X2N1cnJlbnQ6bnVsbCxoYXNOZXh0OmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9uZXh0fSxuZXh0OmZ1bmN0aW9uKCl7dmFyIGEsYixjPXRoaXMuX2N1cnJlbnQ9dGhpcy5fbmV4dDtpZih0aGlzLl9jdXJyZW50KWlmKGE9Yy5maXJzdENoaWxkKXRoaXMuX25leHQ9YTtlbHNle2ZvcihiPW51bGw7YyE9PXRoaXMucm9vdCYmIShiPWMubmV4dFNpYmxpbmcpOyljPWMucGFyZW50Tm9kZTt0aGlzLl9uZXh0PWJ9cmV0dXJuIHRoaXMuX2N1cnJlbnR9LGRldGFjaDpmdW5jdGlvbigpe3RoaXMuX2N1cnJlbnQ9dGhpcy5fbmV4dD10aGlzLnJvb3Q9bnVsbH19LHgucHJvdG90eXBlPXtlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubm9kZT09PWEubm9kZSZ0aGlzLm9mZnNldD09YS5vZmZzZXR9LGluc3BlY3Q6ZnVuY3Rpb24oKXtyZXR1cm5cIltEb21Qb3NpdGlvbihcIit1KHRoaXMubm9kZSkrXCI6XCIrdGhpcy5vZmZzZXQrXCIpXVwifX0seS5wcm90b3R5cGU9e0lOREVYX1NJWkVfRVJSOjEsSElFUkFSQ0hZX1JFUVVFU1RfRVJSOjMsV1JPTkdfRE9DVU1FTlRfRVJSOjQsTk9fTU9ESUZJQ0FUSU9OX0FMTE9XRURfRVJSOjcsTk9UX0ZPVU5EX0VSUjo4LE5PVF9TVVBQT1JURURfRVJSOjksSU5WQUxJRF9TVEFURV9FUlI6MTF9LHkucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWVzc2FnZX0sYS5kb209e2FycmF5Q29udGFpbnM6RCxpc0h0bWxOYW1lc3BhY2U6YyxwYXJlbnRFbGVtZW50OmQsZ2V0Tm9kZUluZGV4OmUsZ2V0Tm9kZUxlbmd0aDpmLGdldENvbW1vbkFuY2VzdG9yOmcsaXNBbmNlc3Rvck9mOmgsZ2V0Q2xvc2VzdEFuY2VzdG9ySW46aSxpc0NoYXJhY3RlckRhdGFOb2RlOmosaW5zZXJ0QWZ0ZXI6ayxzcGxpdERhdGFOb2RlOmwsZ2V0RG9jdW1lbnQ6bSxnZXRXaW5kb3c6bixnZXRJZnJhbWVXaW5kb3c6cCxnZXRJZnJhbWVEb2N1bWVudDpvLGdldEJvZHk6cSxnZXRSb290Q29udGFpbmVyOnIsY29tcGFyZVBvaW50czpzLGluc3BlY3ROb2RlOnUsZnJhZ21lbnRGcm9tTm9kZUNoaWxkcmVuOnQsY3JlYXRlSXRlcmF0b3I6dyxEb21Qb3NpdGlvbjp4fSxhLkRPTUV4Y2VwdGlvbj15fSkscmFuZ3kuY3JlYXRlTW9kdWxlKFwiRG9tUmFuZ2VcIixmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7cmV0dXJuIDMhPWEubm9kZVR5cGUmJihMLmlzQW5jZXN0b3JPZihhLGIuc3RhcnRDb250YWluZXIsITApfHxMLmlzQW5jZXN0b3JPZihhLGIuZW5kQ29udGFpbmVyLCEwKSl9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gTC5nZXREb2N1bWVudChhLnN0YXJ0Q29udGFpbmVyKX1mdW5jdGlvbiBkKGEsYixjKXt2YXIgZD1hLl9saXN0ZW5lcnNbYl07aWYoZClmb3IodmFyIGU9MCxmPWQubGVuZ3RoO2Y+ZTsrK2UpZFtlXS5jYWxsKGEse3RhcmdldDphLGFyZ3M6Y30pfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIG5ldyBNKGEucGFyZW50Tm9kZSxMLmdldE5vZGVJbmRleChhKSl9ZnVuY3Rpb24gZihhKXtyZXR1cm4gbmV3IE0oYS5wYXJlbnROb2RlLEwuZ2V0Tm9kZUluZGV4KGEpKzEpfWZ1bmN0aW9uIGcoYSxiLGMpe3ZhciBkPTExPT1hLm5vZGVUeXBlP2EuZmlyc3RDaGlsZDphO3JldHVybiBMLmlzQ2hhcmFjdGVyRGF0YU5vZGUoYik/Yz09Yi5sZW5ndGg/TC5pbnNlcnRBZnRlcihhLGIpOmIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSwwPT1jP2I6TC5zcGxpdERhdGFOb2RlKGIsYykpOmM+PWIuY2hpbGROb2Rlcy5sZW5ndGg/Yi5hcHBlbmRDaGlsZChhKTpiLmluc2VydEJlZm9yZShhLGIuY2hpbGROb2Rlc1tjXSksZH1mdW5jdGlvbiBoKGEpe2Zvcih2YXIgYixkLGUsZj1jKGEucmFuZ2UpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtkPWEubmV4dCgpOyl7aWYoYj1hLmlzUGFydGlhbGx5U2VsZWN0ZWRTdWJ0cmVlKCksZD1kLmNsb25lTm9kZSghYiksYiYmKGU9YS5nZXRTdWJ0cmVlSXRlcmF0b3IoKSxkLmFwcGVuZENoaWxkKGgoZSkpLGUuZGV0YWNoKCEwKSksMTA9PWQubm9kZVR5cGUpdGhyb3cgbmV3IE4oXCJISUVSQVJDSFlfUkVRVUVTVF9FUlJcIik7Zi5hcHBlbmRDaGlsZChkKX1yZXR1cm4gZn1mdW5jdGlvbiBpKGEsYixjKXt2YXIgZCxlO2M9Y3x8e3N0b3A6ITF9O2Zvcih2YXIgZixnO2Y9YS5uZXh0KCk7KWlmKGEuaXNQYXJ0aWFsbHlTZWxlY3RlZFN1YnRyZWUoKSl7aWYoYihmKT09PSExKXJldHVybiB2b2lkKGMuc3RvcD0hMCk7aWYoZz1hLmdldFN1YnRyZWVJdGVyYXRvcigpLGkoZyxiLGMpLGcuZGV0YWNoKCEwKSxjLnN0b3ApcmV0dXJufWVsc2UgZm9yKGQ9TC5jcmVhdGVJdGVyYXRvcihmKTtlPWQubmV4dCgpOylpZihiKGUpPT09ITEpcmV0dXJuIHZvaWQoYy5zdG9wPSEwKX1mdW5jdGlvbiBqKGEpe2Zvcih2YXIgYjthLm5leHQoKTspYS5pc1BhcnRpYWxseVNlbGVjdGVkU3VidHJlZSgpPyhiPWEuZ2V0U3VidHJlZUl0ZXJhdG9yKCksaihiKSxiLmRldGFjaCghMCkpOmEucmVtb3ZlKCl9ZnVuY3Rpb24gayhhKXtmb3IodmFyIGIsZCxlPWMoYS5yYW5nZSkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2I9YS5uZXh0KCk7KXtpZihhLmlzUGFydGlhbGx5U2VsZWN0ZWRTdWJ0cmVlKCk/KGI9Yi5jbG9uZU5vZGUoITEpLGQ9YS5nZXRTdWJ0cmVlSXRlcmF0b3IoKSxiLmFwcGVuZENoaWxkKGsoZCkpLGQuZGV0YWNoKCEwKSk6YS5yZW1vdmUoKSwxMD09Yi5ub2RlVHlwZSl0aHJvdyBuZXcgTihcIkhJRVJBUkNIWV9SRVFVRVNUX0VSUlwiKTtlLmFwcGVuZENoaWxkKGIpfXJldHVybiBlfWZ1bmN0aW9uIGwoYSxiLGMpe3ZhciBkLGU9ISghYnx8IWIubGVuZ3RoKSxmPSEhYztlJiYoZD1uZXcgUmVnRXhwKFwiXihcIitiLmpvaW4oXCJ8XCIpK1wiKSRcIikpO3ZhciBnPVtdO3JldHVybiBpKG5ldyBuKGEsITEpLGZ1bmN0aW9uKGEpe2UmJiFkLnRlc3QoYS5ub2RlVHlwZSl8fGYmJiFjKGEpfHxnLnB1c2goYSl9KSxnfWZ1bmN0aW9uIG0oYSl7dmFyIGI9XCJ1bmRlZmluZWRcIj09dHlwZW9mIGEuZ2V0TmFtZT9cIlJhbmdlXCI6YS5nZXROYW1lKCk7cmV0dXJuXCJbXCIrYitcIihcIitMLmluc3BlY3ROb2RlKGEuc3RhcnRDb250YWluZXIpK1wiOlwiK2Euc3RhcnRPZmZzZXQrXCIsIFwiK0wuaW5zcGVjdE5vZGUoYS5lbmRDb250YWluZXIpK1wiOlwiK2EuZW5kT2Zmc2V0K1wiKV1cIn1mdW5jdGlvbiBuKGEsYil7aWYodGhpcy5yYW5nZT1hLHRoaXMuY2xvbmVQYXJ0aWFsbHlTZWxlY3RlZFRleHROb2Rlcz1iLCFhLmNvbGxhcHNlZCl7dGhpcy5zYz1hLnN0YXJ0Q29udGFpbmVyLHRoaXMuc289YS5zdGFydE9mZnNldCx0aGlzLmVjPWEuZW5kQ29udGFpbmVyLHRoaXMuZW89YS5lbmRPZmZzZXQ7dmFyIGM9YS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjt0aGlzLnNjPT09dGhpcy5lYyYmTC5pc0NoYXJhY3RlckRhdGFOb2RlKHRoaXMuc2MpPyh0aGlzLmlzU2luZ2xlQ2hhcmFjdGVyRGF0YU5vZGU9ITAsdGhpcy5fZmlyc3Q9dGhpcy5fbGFzdD10aGlzLl9uZXh0PXRoaXMuc2MpOih0aGlzLl9maXJzdD10aGlzLl9uZXh0PXRoaXMuc2MhPT1jfHxMLmlzQ2hhcmFjdGVyRGF0YU5vZGUodGhpcy5zYyk/TC5nZXRDbG9zZXN0QW5jZXN0b3JJbih0aGlzLnNjLGMsITApOnRoaXMuc2MuY2hpbGROb2Rlc1t0aGlzLnNvXSx0aGlzLl9sYXN0PXRoaXMuZWMhPT1jfHxMLmlzQ2hhcmFjdGVyRGF0YU5vZGUodGhpcy5lYyk/TC5nZXRDbG9zZXN0QW5jZXN0b3JJbih0aGlzLmVjLGMsITApOnRoaXMuZWMuY2hpbGROb2Rlc1t0aGlzLmVvLTFdKX19ZnVuY3Rpb24gbyhhKXt0aGlzLmNvZGU9dGhpc1thXSx0aGlzLmNvZGVOYW1lPWEsdGhpcy5tZXNzYWdlPVwiUmFuZ2VFeGNlcHRpb246IFwiK3RoaXMuY29kZU5hbWV9ZnVuY3Rpb24gcChhLGIsYyl7dGhpcy5ub2Rlcz1sKGEsYixjKSx0aGlzLl9uZXh0PXRoaXMubm9kZXNbMF0sdGhpcy5fcG9zaXRpb249MH1mdW5jdGlvbiBxKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe2Zvcih2YXIgZCxlPWM/YjpiLnBhcmVudE5vZGU7ZTspe2lmKGQ9ZS5ub2RlVHlwZSxMLmFycmF5Q29udGFpbnMoYSxkKSlyZXR1cm4gZTtlPWUucGFyZW50Tm9kZX1yZXR1cm4gbnVsbH19ZnVuY3Rpb24gcihhLGIpe2lmKFcoYSxiKSl0aHJvdyBuZXcgbyhcIklOVkFMSURfTk9ERV9UWVBFX0VSUlwiKX1mdW5jdGlvbiBzKGEpe2lmKCFhLnN0YXJ0Q29udGFpbmVyKXRocm93IG5ldyBOKFwiSU5WQUxJRF9TVEFURV9FUlJcIil9ZnVuY3Rpb24gdChhLGIpe2lmKCFMLmFycmF5Q29udGFpbnMoYixhLm5vZGVUeXBlKSl0aHJvdyBuZXcgbyhcIklOVkFMSURfTk9ERV9UWVBFX0VSUlwiKX1mdW5jdGlvbiB1KGEsYil7aWYoMD5ifHxiPihMLmlzQ2hhcmFjdGVyRGF0YU5vZGUoYSk/YS5sZW5ndGg6YS5jaGlsZE5vZGVzLmxlbmd0aCkpdGhyb3cgbmV3IE4oXCJJTkRFWF9TSVpFX0VSUlwiKX1mdW5jdGlvbiB2KGEsYil7aWYoVShhLCEwKSE9PVUoYiwhMCkpdGhyb3cgbmV3IE4oXCJXUk9OR19ET0NVTUVOVF9FUlJcIil9ZnVuY3Rpb24gdyhhKXtpZihWKGEsITApKXRocm93IG5ldyBOKFwiTk9fTU9ESUZJQ0FUSU9OX0FMTE9XRURfRVJSXCIpfWZ1bmN0aW9uIHgoYSxiKXtpZighYSl0aHJvdyBuZXcgTihiKX1mdW5jdGlvbiB5KGEpe3JldHVybiFMLmFycmF5Q29udGFpbnMoUCxhLm5vZGVUeXBlKSYmIVUoYSwhMCl9ZnVuY3Rpb24geihhLGIpe3JldHVybiBiPD0oTC5pc0NoYXJhY3RlckRhdGFOb2RlKGEpP2EubGVuZ3RoOmEuY2hpbGROb2Rlcy5sZW5ndGgpfWZ1bmN0aW9uIEEoYSl7cmV0dXJuISFhLnN0YXJ0Q29udGFpbmVyJiYhIWEuZW5kQ29udGFpbmVyJiYheShhLnN0YXJ0Q29udGFpbmVyKSYmIXkoYS5lbmRDb250YWluZXIpJiZ6KGEuc3RhcnRDb250YWluZXIsYS5zdGFydE9mZnNldCkmJnooYS5lbmRDb250YWluZXIsYS5lbmRPZmZzZXQpfWZ1bmN0aW9uIEIoYSl7aWYocyhhKSwhQShhKSl0aHJvdyBuZXcgRXJyb3IoXCJSYW5nZSBlcnJvcjogUmFuZ2UgaXMgbm8gbG9uZ2VyIHZhbGlkIGFmdGVyIERPTSBtdXRhdGlvbiAoXCIrYS5pbnNwZWN0KCkrXCIpXCIpfWZ1bmN0aW9uIEMoKXt9ZnVuY3Rpb24gRChhKXthLlNUQVJUX1RPX1NUQVJUPWFiLGEuU1RBUlRfVE9fRU5EPWJiLGEuRU5EX1RPX0VORD1jYixhLkVORF9UT19TVEFSVD1kYixhLk5PREVfQkVGT1JFPWViLGEuTk9ERV9BRlRFUj1mYixhLk5PREVfQkVGT1JFX0FORF9BRlRFUj1nYixhLk5PREVfSU5TSURFPWhifWZ1bmN0aW9uIEUoYSl7RChhKSxEKGEucHJvdG90eXBlKX1mdW5jdGlvbiBGKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7Qih0aGlzKTt2YXIgYyxkLGU9dGhpcy5zdGFydENvbnRhaW5lcixnPXRoaXMuc3RhcnRPZmZzZXQsaD10aGlzLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyLGo9bmV3IG4odGhpcywhMCk7ZSE9PWgmJihjPUwuZ2V0Q2xvc2VzdEFuY2VzdG9ySW4oZSxoLCEwKSxkPWYoYyksZT1kLm5vZGUsZz1kLm9mZnNldCksaShqLHcpLGoucmVzZXQoKTt2YXIgaz1hKGopO3JldHVybiBqLmRldGFjaCgpLGIodGhpcyxlLGcsZSxnKSxrfX1mdW5jdGlvbiBHKGMsZCxnKXtmdW5jdGlvbiBoKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe3ModGhpcyksdChjLE8pLHQoVChjKSxQKTt2YXIgZD0oYT9lOmYpKGMpOyhiP2k6bCkodGhpcyxkLm5vZGUsZC5vZmZzZXQpfX1mdW5jdGlvbiBpKGEsYixjKXt2YXIgZT1hLmVuZENvbnRhaW5lcixmPWEuZW5kT2Zmc2V0OyhiIT09YS5zdGFydENvbnRhaW5lcnx8YyE9PWEuc3RhcnRPZmZzZXQpJiYoKFQoYikhPVQoZSl8fDE9PUwuY29tcGFyZVBvaW50cyhiLGMsZSxmKSkmJihlPWIsZj1jKSxkKGEsYixjLGUsZikpfWZ1bmN0aW9uIGwoYSxiLGMpe3ZhciBlPWEuc3RhcnRDb250YWluZXIsZj1hLnN0YXJ0T2Zmc2V0OyhiIT09YS5lbmRDb250YWluZXJ8fGMhPT1hLmVuZE9mZnNldCkmJigoVChiKSE9VChlKXx8LTE9PUwuY29tcGFyZVBvaW50cyhiLGMsZSxmKSkmJihlPWIsZj1jKSxkKGEsZSxmLGIsYykpfWZ1bmN0aW9uIG0oYSxiLGMpeyhiIT09YS5zdGFydENvbnRhaW5lcnx8YyE9PWEuc3RhcnRPZmZzZXR8fGIhPT1hLmVuZENvbnRhaW5lcnx8YyE9PWEuZW5kT2Zmc2V0KSYmZChhLGIsYyxiLGMpfWMucHJvdG90eXBlPW5ldyBDLGEudXRpbC5leHRlbmQoYy5wcm90b3R5cGUse3NldFN0YXJ0OmZ1bmN0aW9uKGEsYil7cyh0aGlzKSxyKGEsITApLHUoYSxiKSxpKHRoaXMsYSxiKX0sc2V0RW5kOmZ1bmN0aW9uKGEsYil7cyh0aGlzKSxyKGEsITApLHUoYSxiKSxsKHRoaXMsYSxiKX0sc2V0U3RhcnRCZWZvcmU6aCghMCwhMCksc2V0U3RhcnRBZnRlcjpoKCExLCEwKSxzZXRFbmRCZWZvcmU6aCghMCwhMSksc2V0RW5kQWZ0ZXI6aCghMSwhMSksY29sbGFwc2U6ZnVuY3Rpb24oYSl7Qih0aGlzKSxhP2QodGhpcyx0aGlzLnN0YXJ0Q29udGFpbmVyLHRoaXMuc3RhcnRPZmZzZXQsdGhpcy5zdGFydENvbnRhaW5lcix0aGlzLnN0YXJ0T2Zmc2V0KTpkKHRoaXMsdGhpcy5lbmRDb250YWluZXIsdGhpcy5lbmRPZmZzZXQsdGhpcy5lbmRDb250YWluZXIsdGhpcy5lbmRPZmZzZXQpfSxzZWxlY3ROb2RlQ29udGVudHM6ZnVuY3Rpb24oYSl7cyh0aGlzKSxyKGEsITApLGQodGhpcyxhLDAsYSxMLmdldE5vZGVMZW5ndGgoYSkpfSxzZWxlY3ROb2RlOmZ1bmN0aW9uKGEpe3ModGhpcykscihhLCExKSx0KGEsTyk7dmFyIGI9ZShhKSxjPWYoYSk7ZCh0aGlzLGIubm9kZSxiLm9mZnNldCxjLm5vZGUsYy5vZmZzZXQpfSxleHRyYWN0Q29udGVudHM6RihrLGQpLGRlbGV0ZUNvbnRlbnRzOkYoaixkKSxjYW5TdXJyb3VuZENvbnRlbnRzOmZ1bmN0aW9uKCl7Qih0aGlzKSx3KHRoaXMuc3RhcnRDb250YWluZXIpLHcodGhpcy5lbmRDb250YWluZXIpO3ZhciBhPW5ldyBuKHRoaXMsITApLGM9YS5fZmlyc3QmJmIoYS5fZmlyc3QsdGhpcyl8fGEuX2xhc3QmJmIoYS5fbGFzdCx0aGlzKTtyZXR1cm4gYS5kZXRhY2goKSwhY30sZGV0YWNoOmZ1bmN0aW9uKCl7Zyh0aGlzKX0sc3BsaXRCb3VuZGFyaWVzOmZ1bmN0aW9uKCl7Qih0aGlzKTt2YXIgYT10aGlzLnN0YXJ0Q29udGFpbmVyLGI9dGhpcy5zdGFydE9mZnNldCxjPXRoaXMuZW5kQ29udGFpbmVyLGU9dGhpcy5lbmRPZmZzZXQsZj1hPT09YztMLmlzQ2hhcmFjdGVyRGF0YU5vZGUoYykmJmU+MCYmZTxjLmxlbmd0aCYmTC5zcGxpdERhdGFOb2RlKGMsZSksTC5pc0NoYXJhY3RlckRhdGFOb2RlKGEpJiZiPjAmJmI8YS5sZW5ndGgmJihhPUwuc3BsaXREYXRhTm9kZShhLGIpLGY/KGUtPWIsYz1hKTpjPT1hLnBhcmVudE5vZGUmJmU+PUwuZ2V0Tm9kZUluZGV4KGEpJiZlKyssYj0wKSxkKHRoaXMsYSxiLGMsZSl9LG5vcm1hbGl6ZUJvdW5kYXJpZXM6ZnVuY3Rpb24oKXtCKHRoaXMpO3ZhciBhPXRoaXMuc3RhcnRDb250YWluZXIsYj10aGlzLnN0YXJ0T2Zmc2V0LGM9dGhpcy5lbmRDb250YWluZXIsZT10aGlzLmVuZE9mZnNldCxmPWZ1bmN0aW9uKGEpe3ZhciBiPWEubmV4dFNpYmxpbmc7YiYmYi5ub2RlVHlwZT09YS5ub2RlVHlwZSYmKGM9YSxlPWEubGVuZ3RoLGEuYXBwZW5kRGF0YShiLmRhdGEpLGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSl9LGc9ZnVuY3Rpb24oZCl7dmFyIGY9ZC5wcmV2aW91c1NpYmxpbmc7aWYoZiYmZi5ub2RlVHlwZT09ZC5ub2RlVHlwZSl7YT1kO3ZhciBnPWQubGVuZ3RoO2lmKGI9Zi5sZW5ndGgsZC5pbnNlcnREYXRhKDAsZi5kYXRhKSxmLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZiksYT09YyllKz1iLGM9YTtlbHNlIGlmKGM9PWQucGFyZW50Tm9kZSl7dmFyIGg9TC5nZXROb2RlSW5kZXgoZCk7ZT09aD8oYz1kLGU9Zyk6ZT5oJiZlLS19fX0saD0hMDtpZihMLmlzQ2hhcmFjdGVyRGF0YU5vZGUoYykpYy5sZW5ndGg9PWUmJmYoYyk7ZWxzZXtpZihlPjApe3ZhciBpPWMuY2hpbGROb2Rlc1tlLTFdO2kmJkwuaXNDaGFyYWN0ZXJEYXRhTm9kZShpKSYmZihpKX1oPSF0aGlzLmNvbGxhcHNlZH1pZihoKXtpZihMLmlzQ2hhcmFjdGVyRGF0YU5vZGUoYSkpMD09YiYmZyhhKTtlbHNlIGlmKGI8YS5jaGlsZE5vZGVzLmxlbmd0aCl7dmFyIGo9YS5jaGlsZE5vZGVzW2JdO2omJkwuaXNDaGFyYWN0ZXJEYXRhTm9kZShqKSYmZyhqKX19ZWxzZSBhPWMsYj1lO2QodGhpcyxhLGIsYyxlKX0sY29sbGFwc2VUb1BvaW50OmZ1bmN0aW9uKGEsYil7cyh0aGlzKSxyKGEsITApLHUoYSxiKSxtKHRoaXMsYSxiKX19KSxFKGMpfWZ1bmN0aW9uIEgoYSl7YS5jb2xsYXBzZWQ9YS5zdGFydENvbnRhaW5lcj09PWEuZW5kQ29udGFpbmVyJiZhLnN0YXJ0T2Zmc2V0PT09YS5lbmRPZmZzZXQsYS5jb21tb25BbmNlc3RvckNvbnRhaW5lcj1hLmNvbGxhcHNlZD9hLnN0YXJ0Q29udGFpbmVyOkwuZ2V0Q29tbW9uQW5jZXN0b3IoYS5zdGFydENvbnRhaW5lcixhLmVuZENvbnRhaW5lcil9ZnVuY3Rpb24gSShhLGIsYyxlLGYpe3ZhciBnPWEuc3RhcnRDb250YWluZXIhPT1ifHxhLnN0YXJ0T2Zmc2V0IT09YyxoPWEuZW5kQ29udGFpbmVyIT09ZXx8YS5lbmRPZmZzZXQhPT1mO2Euc3RhcnRDb250YWluZXI9YixhLnN0YXJ0T2Zmc2V0PWMsYS5lbmRDb250YWluZXI9ZSxhLmVuZE9mZnNldD1mLEgoYSksZChhLFwiYm91bmRhcnljaGFuZ2VcIix7c3RhcnRNb3ZlZDpnLGVuZE1vdmVkOmh9KX1mdW5jdGlvbiBKKGEpe3MoYSksYS5zdGFydENvbnRhaW5lcj1hLnN0YXJ0T2Zmc2V0PWEuZW5kQ29udGFpbmVyPWEuZW5kT2Zmc2V0PW51bGwsYS5jb2xsYXBzZWQ9YS5jb21tb25BbmNlc3RvckNvbnRhaW5lcj1udWxsLGQoYSxcImRldGFjaFwiLG51bGwpLGEuX2xpc3RlbmVycz1udWxsfWZ1bmN0aW9uIEsoYSl7dGhpcy5zdGFydENvbnRhaW5lcj1hLHRoaXMuc3RhcnRPZmZzZXQ9MCx0aGlzLmVuZENvbnRhaW5lcj1hLHRoaXMuZW5kT2Zmc2V0PTAsdGhpcy5fbGlzdGVuZXJzPXtib3VuZGFyeWNoYW5nZTpbXSxkZXRhY2g6W119LEgodGhpcyl9YS5yZXF1aXJlTW9kdWxlcyhbXCJEb21VdGlsXCJdKTt2YXIgTD1hLmRvbSxNPUwuRG9tUG9zaXRpb24sTj1hLkRPTUV4Y2VwdGlvbjtuLnByb3RvdHlwZT17X2N1cnJlbnQ6bnVsbCxfbmV4dDpudWxsLF9maXJzdDpudWxsLF9sYXN0Om51bGwsaXNTaW5nbGVDaGFyYWN0ZXJEYXRhTm9kZTohMSxyZXNldDpmdW5jdGlvbigpe3RoaXMuX2N1cnJlbnQ9bnVsbCx0aGlzLl9uZXh0PXRoaXMuX2ZpcnN0fSxoYXNOZXh0OmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9uZXh0fSxuZXh0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fY3VycmVudD10aGlzLl9uZXh0O3JldHVybiBhJiYodGhpcy5fbmV4dD1hIT09dGhpcy5fbGFzdD9hLm5leHRTaWJsaW5nOm51bGwsTC5pc0NoYXJhY3RlckRhdGFOb2RlKGEpJiZ0aGlzLmNsb25lUGFydGlhbGx5U2VsZWN0ZWRUZXh0Tm9kZXMmJihhPT09dGhpcy5lYyYmKGE9YS5jbG9uZU5vZGUoITApKS5kZWxldGVEYXRhKHRoaXMuZW8sYS5sZW5ndGgtdGhpcy5lbyksdGhpcy5fY3VycmVudD09PXRoaXMuc2MmJihhPWEuY2xvbmVOb2RlKCEwKSkuZGVsZXRlRGF0YSgwLHRoaXMuc28pKSksYX0scmVtb3ZlOmZ1bmN0aW9uKCl7dmFyIGEsYixjPXRoaXMuX2N1cnJlbnQ7IUwuaXNDaGFyYWN0ZXJEYXRhTm9kZShjKXx8YyE9PXRoaXMuc2MmJmMhPT10aGlzLmVjP2MucGFyZW50Tm9kZSYmYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpOihhPWM9PT10aGlzLnNjP3RoaXMuc286MCxiPWM9PT10aGlzLmVjP3RoaXMuZW86Yy5sZW5ndGgsYSE9YiYmYy5kZWxldGVEYXRhKGEsYi1hKSl9LGlzUGFydGlhbGx5U2VsZWN0ZWRTdWJ0cmVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fY3VycmVudDtyZXR1cm4gYihhLHRoaXMucmFuZ2UpfSxnZXRTdWJ0cmVlSXRlcmF0b3I6ZnVuY3Rpb24oKXt2YXIgYTtpZih0aGlzLmlzU2luZ2xlQ2hhcmFjdGVyRGF0YU5vZGUpYT10aGlzLnJhbmdlLmNsb25lUmFuZ2UoKSxhLmNvbGxhcHNlKCk7ZWxzZXthPW5ldyBLKGModGhpcy5yYW5nZSkpO3ZhciBiPXRoaXMuX2N1cnJlbnQsZD1iLGU9MCxmPWIsZz1MLmdldE5vZGVMZW5ndGgoYik7TC5pc0FuY2VzdG9yT2YoYix0aGlzLnNjLCEwKSYmKGQ9dGhpcy5zYyxlPXRoaXMuc28pLEwuaXNBbmNlc3Rvck9mKGIsdGhpcy5lYywhMCkmJihmPXRoaXMuZWMsZz10aGlzLmVvKSxJKGEsZCxlLGYsZyl9cmV0dXJuIG5ldyBuKGEsdGhpcy5jbG9uZVBhcnRpYWxseVNlbGVjdGVkVGV4dE5vZGVzKX0sZGV0YWNoOmZ1bmN0aW9uKGEpe2EmJnRoaXMucmFuZ2UuZGV0YWNoKCksdGhpcy5yYW5nZT10aGlzLl9jdXJyZW50PXRoaXMuX25leHQ9dGhpcy5fZmlyc3Q9dGhpcy5fbGFzdD10aGlzLnNjPXRoaXMuc289dGhpcy5lYz10aGlzLmVvPW51bGx9fSxvLnByb3RvdHlwZT17QkFEX0JPVU5EQVJZUE9JTlRTX0VSUjoxLElOVkFMSURfTk9ERV9UWVBFX0VSUjoyfSxvLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1lc3NhZ2V9LHAucHJvdG90eXBlPXtfY3VycmVudDpudWxsLGhhc05leHQ6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX25leHR9LG5leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudD10aGlzLl9uZXh0LHRoaXMuX25leHQ9dGhpcy5ub2Rlc1srK3RoaXMuX3Bvc2l0aW9uXSx0aGlzLl9jdXJyZW50fSxkZXRhY2g6ZnVuY3Rpb24oKXt0aGlzLl9jdXJyZW50PXRoaXMuX25leHQ9dGhpcy5ub2Rlcz1udWxsfX07dmFyIE89WzEsMyw0LDUsNyw4LDEwXSxQPVsyLDksMTFdLFE9WzUsNiwxMCwxMl0sUj1bMSwzLDQsNSw3LDgsMTAsMTFdLFM9WzEsMyw0LDUsNyw4XSxUPUwuZ2V0Um9vdENvbnRhaW5lcixVPXEoWzksMTFdKSxWPXEoUSksVz1xKFs2LDEwLDEyXSksWD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIiksWT0hMTt0cnl7WC5pbm5lckhUTUw9XCI8Yj54PC9iPlwiLFk9Mz09WC5maXJzdENoaWxkLm5vZGVUeXBlfWNhdGNoKFope31hLmZlYXR1cmVzLmh0bWxQYXJzaW5nQ29uZm9ybXM9WTt2YXIgJD1ZP2Z1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc3RhcnRDb250YWluZXIsYz1MLmdldERvY3VtZW50KGIpO2lmKCFiKXRocm93IG5ldyBOKFwiSU5WQUxJRF9TVEFURV9FUlJcIik7dmFyIGQ9bnVsbDtyZXR1cm4gMT09Yi5ub2RlVHlwZT9kPWI6TC5pc0NoYXJhY3RlckRhdGFOb2RlKGIpJiYoZD1MLnBhcmVudEVsZW1lbnQoYikpLGQ9bnVsbD09PWR8fFwiSFRNTFwiPT1kLm5vZGVOYW1lJiZMLmlzSHRtbE5hbWVzcGFjZShMLmdldERvY3VtZW50KGQpLmRvY3VtZW50RWxlbWVudCkmJkwuaXNIdG1sTmFtZXNwYWNlKGQpP2MuY3JlYXRlRWxlbWVudChcImJvZHlcIik6ZC5jbG9uZU5vZGUoITEpLGQuaW5uZXJIVE1MPWEsTC5mcmFnbWVudEZyb21Ob2RlQ2hpbGRyZW4oZCl9OmZ1bmN0aW9uKGEpe3ModGhpcyk7dmFyIGI9Yyh0aGlzKSxkPWIuY3JlYXRlRWxlbWVudChcImJvZHlcIik7cmV0dXJuIGQuaW5uZXJIVE1MPWEsTC5mcmFnbWVudEZyb21Ob2RlQ2hpbGRyZW4oZCl9LF89W1wic3RhcnRDb250YWluZXJcIixcInN0YXJ0T2Zmc2V0XCIsXCJlbmRDb250YWluZXJcIixcImVuZE9mZnNldFwiLFwiY29sbGFwc2VkXCIsXCJjb21tb25BbmNlc3RvckNvbnRhaW5lclwiXSxhYj0wLGJiPTEsY2I9MixkYj0zLGViPTAsZmI9MSxnYj0yLGhiPTM7Qy5wcm90b3R5cGU9e2F0dGFjaExpc3RlbmVyOmZ1bmN0aW9uKGEsYil7dGhpcy5fbGlzdGVuZXJzW2FdLnB1c2goYil9LGNvbXBhcmVCb3VuZGFyeVBvaW50czpmdW5jdGlvbihhLGIpe0IodGhpcyksdih0aGlzLnN0YXJ0Q29udGFpbmVyLGIuc3RhcnRDb250YWluZXIpO3ZhciBjLGQsZSxmLGc9YT09ZGJ8fGE9PWFiP1wic3RhcnRcIjpcImVuZFwiLGg9YT09YmJ8fGE9PWFiP1wic3RhcnRcIjpcImVuZFwiO3JldHVybiBjPXRoaXNbZytcIkNvbnRhaW5lclwiXSxkPXRoaXNbZytcIk9mZnNldFwiXSxlPWJbaCtcIkNvbnRhaW5lclwiXSxmPWJbaCtcIk9mZnNldFwiXSxMLmNvbXBhcmVQb2ludHMoYyxkLGUsZil9LGluc2VydE5vZGU6ZnVuY3Rpb24oYSl7aWYoQih0aGlzKSx0KGEsUiksdyh0aGlzLnN0YXJ0Q29udGFpbmVyKSxMLmlzQW5jZXN0b3JPZihhLHRoaXMuc3RhcnRDb250YWluZXIsITApKXRocm93IG5ldyBOKFwiSElFUkFSQ0hZX1JFUVVFU1RfRVJSXCIpO3ZhciBiPWcoYSx0aGlzLnN0YXJ0Q29udGFpbmVyLHRoaXMuc3RhcnRPZmZzZXQpO3RoaXMuc2V0U3RhcnRCZWZvcmUoYil9LGNsb25lQ29udGVudHM6ZnVuY3Rpb24oKXtCKHRoaXMpO3ZhciBhLGI7aWYodGhpcy5jb2xsYXBzZWQpcmV0dXJuIGModGhpcykuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2lmKHRoaXMuc3RhcnRDb250YWluZXI9PT10aGlzLmVuZENvbnRhaW5lciYmTC5pc0NoYXJhY3RlckRhdGFOb2RlKHRoaXMuc3RhcnRDb250YWluZXIpKXJldHVybiBhPXRoaXMuc3RhcnRDb250YWluZXIuY2xvbmVOb2RlKCEwKSxhLmRhdGE9YS5kYXRhLnNsaWNlKHRoaXMuc3RhcnRPZmZzZXQsdGhpcy5lbmRPZmZzZXQpLGI9Yyh0aGlzKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYi5hcHBlbmRDaGlsZChhKSxiO3ZhciBkPW5ldyBuKHRoaXMsITApO3JldHVybiBhPWgoZCksZC5kZXRhY2goKSxhfSxjYW5TdXJyb3VuZENvbnRlbnRzOmZ1bmN0aW9uKCl7Qih0aGlzKSx3KHRoaXMuc3RhcnRDb250YWluZXIpLHcodGhpcy5lbmRDb250YWluZXIpO3ZhciBhPW5ldyBuKHRoaXMsITApLGM9YS5fZmlyc3QmJmIoYS5fZmlyc3QsdGhpcyl8fGEuX2xhc3QmJmIoYS5fbGFzdCx0aGlzKTtyZXR1cm4gYS5kZXRhY2goKSwhY30sc3Vycm91bmRDb250ZW50czpmdW5jdGlvbihhKXtpZih0KGEsUyksIXRoaXMuY2FuU3Vycm91bmRDb250ZW50cygpKXRocm93IG5ldyBvKFwiQkFEX0JPVU5EQVJZUE9JTlRTX0VSUlwiKTt2YXIgYj10aGlzLmV4dHJhY3RDb250ZW50cygpO2lmKGEuaGFzQ2hpbGROb2RlcygpKWZvcig7YS5sYXN0Q2hpbGQ7KWEucmVtb3ZlQ2hpbGQoYS5sYXN0Q2hpbGQpO2coYSx0aGlzLnN0YXJ0Q29udGFpbmVyLHRoaXMuc3RhcnRPZmZzZXQpLGEuYXBwZW5kQ2hpbGQoYiksdGhpcy5zZWxlY3ROb2RlKGEpfSxjbG9uZVJhbmdlOmZ1bmN0aW9uKCl7Qih0aGlzKTtmb3IodmFyIGEsYj1uZXcgSyhjKHRoaXMpKSxkPV8ubGVuZ3RoO2QtLTspYT1fW2RdLGJbYV09dGhpc1thXTtyZXR1cm4gYn0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtCKHRoaXMpO3ZhciBhPXRoaXMuc3RhcnRDb250YWluZXI7aWYoYT09PXRoaXMuZW5kQ29udGFpbmVyJiZMLmlzQ2hhcmFjdGVyRGF0YU5vZGUoYSkpcmV0dXJuIDM9PWEubm9kZVR5cGV8fDQ9PWEubm9kZVR5cGU/YS5kYXRhLnNsaWNlKHRoaXMuc3RhcnRPZmZzZXQsdGhpcy5lbmRPZmZzZXQpOlwiXCI7dmFyIGI9W10sYz1uZXcgbih0aGlzLCEwKTtyZXR1cm4gaShjLGZ1bmN0aW9uKGEpeygzPT1hLm5vZGVUeXBlfHw0PT1hLm5vZGVUeXBlKSYmYi5wdXNoKGEuZGF0YSl9KSxjLmRldGFjaCgpLGIuam9pbihcIlwiKX0sY29tcGFyZU5vZGU6ZnVuY3Rpb24oYSl7Qih0aGlzKTt2YXIgYj1hLnBhcmVudE5vZGUsYz1MLmdldE5vZGVJbmRleChhKTtpZighYil0aHJvdyBuZXcgTihcIk5PVF9GT1VORF9FUlJcIik7dmFyIGQ9dGhpcy5jb21wYXJlUG9pbnQoYixjKSxlPXRoaXMuY29tcGFyZVBvaW50KGIsYysxKTtyZXR1cm4gMD5kP2U+MD9nYjplYjplPjA/ZmI6aGJ9LGNvbXBhcmVQb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBCKHRoaXMpLHgoYSxcIkhJRVJBUkNIWV9SRVFVRVNUX0VSUlwiKSx2KGEsdGhpcy5zdGFydENvbnRhaW5lciksTC5jb21wYXJlUG9pbnRzKGEsYix0aGlzLnN0YXJ0Q29udGFpbmVyLHRoaXMuc3RhcnRPZmZzZXQpPDA/LTE6TC5jb21wYXJlUG9pbnRzKGEsYix0aGlzLmVuZENvbnRhaW5lcix0aGlzLmVuZE9mZnNldCk+MD8xOjB9LGNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudDokLHRvSHRtbDpmdW5jdGlvbigpe0IodGhpcyk7dmFyIGE9Yyh0aGlzKS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiBhLmFwcGVuZENoaWxkKHRoaXMuY2xvbmVDb250ZW50cygpKSxhLmlubmVySFRNTH0saW50ZXJzZWN0c05vZGU6ZnVuY3Rpb24oYSxiKXtpZihCKHRoaXMpLHgoYSxcIk5PVF9GT1VORF9FUlJcIiksTC5nZXREb2N1bWVudChhKSE9PWModGhpcykpcmV0dXJuITE7dmFyIGQ9YS5wYXJlbnROb2RlLGU9TC5nZXROb2RlSW5kZXgoYSk7eChkLFwiTk9UX0ZPVU5EX0VSUlwiKTt2YXIgZj1MLmNvbXBhcmVQb2ludHMoZCxlLHRoaXMuZW5kQ29udGFpbmVyLHRoaXMuZW5kT2Zmc2V0KSxnPUwuY29tcGFyZVBvaW50cyhkLGUrMSx0aGlzLnN0YXJ0Q29udGFpbmVyLHRoaXMuc3RhcnRPZmZzZXQpO3JldHVybiBiPzA+PWYmJmc+PTA6MD5mJiZnPjB9LGlzUG9pbnRJblJhbmdlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEIodGhpcykseChhLFwiSElFUkFSQ0hZX1JFUVVFU1RfRVJSXCIpLHYoYSx0aGlzLnN0YXJ0Q29udGFpbmVyKSxMLmNvbXBhcmVQb2ludHMoYSxiLHRoaXMuc3RhcnRDb250YWluZXIsdGhpcy5zdGFydE9mZnNldCk+PTAmJkwuY29tcGFyZVBvaW50cyhhLGIsdGhpcy5lbmRDb250YWluZXIsdGhpcy5lbmRPZmZzZXQpPD0wfSxpbnRlcnNlY3RzUmFuZ2U6ZnVuY3Rpb24oYSxiKXtpZihCKHRoaXMpLGMoYSkhPWModGhpcykpdGhyb3cgbmV3IE4oXCJXUk9OR19ET0NVTUVOVF9FUlJcIik7dmFyIGQ9TC5jb21wYXJlUG9pbnRzKHRoaXMuc3RhcnRDb250YWluZXIsdGhpcy5zdGFydE9mZnNldCxhLmVuZENvbnRhaW5lcixhLmVuZE9mZnNldCksZT1MLmNvbXBhcmVQb2ludHModGhpcy5lbmRDb250YWluZXIsdGhpcy5lbmRPZmZzZXQsYS5zdGFydENvbnRhaW5lcixhLnN0YXJ0T2Zmc2V0KTtyZXR1cm4gYj8wPj1kJiZlPj0wOjA+ZCYmZT4wfSxpbnRlcnNlY3Rpb246ZnVuY3Rpb24oYSl7aWYodGhpcy5pbnRlcnNlY3RzUmFuZ2UoYSkpe3ZhciBiPUwuY29tcGFyZVBvaW50cyh0aGlzLnN0YXJ0Q29udGFpbmVyLHRoaXMuc3RhcnRPZmZzZXQsYS5zdGFydENvbnRhaW5lcixhLnN0YXJ0T2Zmc2V0KSxjPUwuY29tcGFyZVBvaW50cyh0aGlzLmVuZENvbnRhaW5lcix0aGlzLmVuZE9mZnNldCxhLmVuZENvbnRhaW5lcixhLmVuZE9mZnNldCksZD10aGlzLmNsb25lUmFuZ2UoKTtyZXR1cm4tMT09YiYmZC5zZXRTdGFydChhLnN0YXJ0Q29udGFpbmVyLGEuc3RhcnRPZmZzZXQpLDE9PWMmJmQuc2V0RW5kKGEuZW5kQ29udGFpbmVyLGEuZW5kT2Zmc2V0KSxkfXJldHVybiBudWxsfSx1bmlvbjpmdW5jdGlvbihhKXtpZih0aGlzLmludGVyc2VjdHNSYW5nZShhLCEwKSl7dmFyIGI9dGhpcy5jbG9uZVJhbmdlKCk7cmV0dXJuLTE9PUwuY29tcGFyZVBvaW50cyhhLnN0YXJ0Q29udGFpbmVyLGEuc3RhcnRPZmZzZXQsdGhpcy5zdGFydENvbnRhaW5lcix0aGlzLnN0YXJ0T2Zmc2V0KSYmYi5zZXRTdGFydChhLnN0YXJ0Q29udGFpbmVyLGEuc3RhcnRPZmZzZXQpLDE9PUwuY29tcGFyZVBvaW50cyhhLmVuZENvbnRhaW5lcixhLmVuZE9mZnNldCx0aGlzLmVuZENvbnRhaW5lcix0aGlzLmVuZE9mZnNldCkmJmIuc2V0RW5kKGEuZW5kQ29udGFpbmVyLGEuZW5kT2Zmc2V0KSxifXRocm93IG5ldyBvKFwiUmFuZ2VzIGRvIG5vdCBpbnRlcnNlY3RcIil9LGNvbnRhaW5zTm9kZTpmdW5jdGlvbihhLGIpe3JldHVybiBiP3RoaXMuaW50ZXJzZWN0c05vZGUoYSwhMSk6dGhpcy5jb21wYXJlTm9kZShhKT09aGJ9LGNvbnRhaW5zTm9kZUNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbXBhcmVQb2ludChhLDApPj0wJiZ0aGlzLmNvbXBhcmVQb2ludChhLEwuZ2V0Tm9kZUxlbmd0aChhKSk8PTB9LGNvbnRhaW5zUmFuZ2U6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW50ZXJzZWN0aW9uKGEpLmVxdWFscyhhKX0sY29udGFpbnNOb2RlVGV4dDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNsb25lUmFuZ2UoKTtiLnNlbGVjdE5vZGUoYSk7dmFyIGM9Yi5nZXROb2RlcyhbM10pO2lmKGMubGVuZ3RoPjApe2Iuc2V0U3RhcnQoY1swXSwwKTt2YXIgZD1jLnBvcCgpO2Iuc2V0RW5kKGQsZC5sZW5ndGgpO3ZhciBlPXRoaXMuY29udGFpbnNSYW5nZShiKTtyZXR1cm4gYi5kZXRhY2goKSxlfXJldHVybiB0aGlzLmNvbnRhaW5zTm9kZUNvbnRlbnRzKGEpfSxjcmVhdGVOb2RlSXRlcmF0b3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQih0aGlzKSxuZXcgcCh0aGlzLGEsYil9LGdldE5vZGVzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEIodGhpcyksbCh0aGlzLGEsYil9LGdldERvY3VtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIGModGhpcyl9LGNvbGxhcHNlQmVmb3JlOmZ1bmN0aW9uKGEpe3ModGhpcyksdGhpcy5zZXRFbmRCZWZvcmUoYSksdGhpcy5jb2xsYXBzZSghMSl9LGNvbGxhcHNlQWZ0ZXI6ZnVuY3Rpb24oYSl7cyh0aGlzKSx0aGlzLnNldFN0YXJ0QWZ0ZXIoYSksdGhpcy5jb2xsYXBzZSghMCl9LGdldE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm5cIkRvbVJhbmdlXCJ9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gSy5yYW5nZXNFcXVhbCh0aGlzLGEpfSxpc1ZhbGlkOmZ1bmN0aW9uKCl7cmV0dXJuIEEodGhpcyl9LGluc3BlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gbSh0aGlzKX19LEcoSyxJLEopLGEucmFuZ2VQcm90b3R5cGU9Qy5wcm90b3R5cGUsSy5yYW5nZVByb3BlcnRpZXM9XyxLLlJhbmdlSXRlcmF0b3I9bixLLmNvcHlDb21wYXJpc29uQ29uc3RhbnRzPUUsSy5jcmVhdGVQcm90b3R5cGVSYW5nZT1HLEsuaW5zcGVjdD1tLEsuZ2V0UmFuZ2VEb2N1bWVudD1jLEsucmFuZ2VzRXF1YWw9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5zdGFydENvbnRhaW5lcj09PWIuc3RhcnRDb250YWluZXImJmEuc3RhcnRPZmZzZXQ9PT1iLnN0YXJ0T2Zmc2V0JiZhLmVuZENvbnRhaW5lcj09PWIuZW5kQ29udGFpbmVyJiZhLmVuZE9mZnNldD09PWIuZW5kT2Zmc2V0fSxhLkRvbVJhbmdlPUssYS5SYW5nZUV4Y2VwdGlvbj1vfSkscmFuZ3kuY3JlYXRlTW9kdWxlKFwiV3JhcHBlZFJhbmdlXCIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXt2YXIgYj1hLnBhcmVudEVsZW1lbnQoKSxjPWEuZHVwbGljYXRlKCk7Yy5jb2xsYXBzZSghMCk7dmFyIGQ9Yy5wYXJlbnRFbGVtZW50KCk7Yz1hLmR1cGxpY2F0ZSgpLGMuY29sbGFwc2UoITEpO3ZhciBlPWMucGFyZW50RWxlbWVudCgpLGY9ZD09ZT9kOmcuZ2V0Q29tbW9uQW5jZXN0b3IoZCxlKTtyZXR1cm4gZj09Yj9mOmcuZ2V0Q29tbW9uQW5jZXN0b3IoYixmKX1mdW5jdGlvbiBjKGEpe3JldHVybiAwPT1hLmNvbXBhcmVFbmRQb2ludHMoXCJTdGFydFRvRW5kXCIsYSl9ZnVuY3Rpb24gZChhLGIsYyxkKXt2YXIgZT1hLmR1cGxpY2F0ZSgpO2UuY29sbGFwc2UoYyk7dmFyIGY9ZS5wYXJlbnRFbGVtZW50KCk7aWYoZy5pc0FuY2VzdG9yT2YoYixmLCEwKXx8KGY9YiksIWYuY2FuSGF2ZUhUTUwpcmV0dXJuIG5ldyBoKGYucGFyZW50Tm9kZSxnLmdldE5vZGVJbmRleChmKSk7dmFyIGksaixrLGwsbSxuPWcuZ2V0RG9jdW1lbnQoZikuY3JlYXRlRWxlbWVudChcInNwYW5cIiksbz1jP1wiU3RhcnRUb1N0YXJ0XCI6XCJTdGFydFRvRW5kXCI7ZG8gZi5pbnNlcnRCZWZvcmUobixuLnByZXZpb3VzU2libGluZyksZS5tb3ZlVG9FbGVtZW50VGV4dChuKTt3aGlsZSgoaT1lLmNvbXBhcmVFbmRQb2ludHMobyxhKSk+MCYmbi5wcmV2aW91c1NpYmxpbmcpO2lmKG09bi5uZXh0U2libGluZywtMT09aSYmbSYmZy5pc0NoYXJhY3RlckRhdGFOb2RlKG0pKXtlLnNldEVuZFBvaW50KGM/XCJFbmRUb1N0YXJ0XCI6XCJFbmRUb0VuZFwiLGEpO3ZhciBwO2lmKC9bXFxyXFxuXS8udGVzdChtLmRhdGEpKXt2YXIgcT1lLmR1cGxpY2F0ZSgpLHI9cS50ZXh0LnJlcGxhY2UoL1xcclxcbi9nLFwiXFxyXCIpLmxlbmd0aDtmb3IocD1xLm1vdmVTdGFydChcImNoYXJhY3RlclwiLHIpOy0xPT0oaT1xLmNvbXBhcmVFbmRQb2ludHMoXCJTdGFydFRvRW5kXCIscSkpOylwKysscS5tb3ZlU3RhcnQoXCJjaGFyYWN0ZXJcIiwxKX1lbHNlIHA9ZS50ZXh0Lmxlbmd0aDtsPW5ldyBoKG0scCl9ZWxzZSBqPShkfHwhYykmJm4ucHJldmlvdXNTaWJsaW5nLGs9KGR8fGMpJiZuLm5leHRTaWJsaW5nLGw9ayYmZy5pc0NoYXJhY3RlckRhdGFOb2RlKGspP25ldyBoKGssMCk6aiYmZy5pc0NoYXJhY3RlckRhdGFOb2RlKGopP25ldyBoKGosai5sZW5ndGgpOm5ldyBoKGYsZy5nZXROb2RlSW5kZXgobikpO3JldHVybiBuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobiksbH1mdW5jdGlvbiBlKGEsYil7dmFyIGMsZCxlLGYsaD1hLm9mZnNldCxpPWcuZ2V0RG9jdW1lbnQoYS5ub2RlKSxqPWkuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKSxrPWcuaXNDaGFyYWN0ZXJEYXRhTm9kZShhLm5vZGUpO3JldHVybiBrPyhjPWEubm9kZSxkPWMucGFyZW50Tm9kZSk6KGY9YS5ub2RlLmNoaWxkTm9kZXMsYz1oPGYubGVuZ3RoP2ZbaF06bnVsbCxkPWEubm9kZSksZT1pLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLGUuaW5uZXJIVE1MPVwiJiNmZWZmO1wiLGM/ZC5pbnNlcnRCZWZvcmUoZSxjKTpkLmFwcGVuZENoaWxkKGUpLGoubW92ZVRvRWxlbWVudFRleHQoZSksai5jb2xsYXBzZSghYiksZC5yZW1vdmVDaGlsZChlKSxrJiZqW2I/XCJtb3ZlU3RhcnRcIjpcIm1vdmVFbmRcIl0oXCJjaGFyYWN0ZXJcIixoKSxqfWEucmVxdWlyZU1vZHVsZXMoW1wiRG9tVXRpbFwiLFwiRG9tUmFuZ2VcIl0pO3ZhciBmLGc9YS5kb20saD1nLkRvbVBvc2l0aW9uLGk9YS5Eb21SYW5nZTtpZighYS5mZWF0dXJlcy5pbXBsZW1lbnRzRG9tUmFuZ2V8fGEuZmVhdHVyZXMuaW1wbGVtZW50c1RleHRSYW5nZSYmYS5jb25maWcucHJlZmVyVGV4dFJhbmdlKXtpZihhLmZlYXR1cmVzLmltcGxlbWVudHNUZXh0UmFuZ2Upe2Y9ZnVuY3Rpb24oYSl7dGhpcy50ZXh0UmFuZ2U9YSx0aGlzLnJlZnJlc2goKX0sZi5wcm90b3R5cGU9bmV3IGkoZG9jdW1lbnQpLGYucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oKXt2YXIgYSxlLGY9Yih0aGlzLnRleHRSYW5nZSk7Yyh0aGlzLnRleHRSYW5nZSk/ZT1hPWQodGhpcy50ZXh0UmFuZ2UsZiwhMCwhMCk6KGE9ZCh0aGlzLnRleHRSYW5nZSxmLCEwLCExKSxlPWQodGhpcy50ZXh0UmFuZ2UsZiwhMSwhMSkpLHRoaXMuc2V0U3RhcnQoYS5ub2RlLGEub2Zmc2V0KSx0aGlzLnNldEVuZChlLm5vZGUsZS5vZmZzZXQpfSxpLmNvcHlDb21wYXJpc29uQ29uc3RhbnRzKGYpO3ZhciBqPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCk7XCJ1bmRlZmluZWRcIj09dHlwZW9mIGouUmFuZ2UmJihqLlJhbmdlPWYpLGEuY3JlYXRlTmF0aXZlUmFuZ2U9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YXx8ZG9jdW1lbnQsYS5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpfX19ZWxzZSFmdW5jdGlvbigpe2Z1bmN0aW9uIGIoYSl7Zm9yKHZhciBiLGM9ay5sZW5ndGg7Yy0tOyliPWtbY10sYVtiXT1hLm5hdGl2ZVJhbmdlW2JdfWZ1bmN0aW9uIGMoYSxiLGMsZCxlKXt2YXIgZj1hLnN0YXJ0Q29udGFpbmVyIT09Ynx8YS5zdGFydE9mZnNldCE9YyxnPWEuZW5kQ29udGFpbmVyIT09ZHx8YS5lbmRPZmZzZXQhPWU7KGZ8fGcpJiYoYS5zZXRFbmQoZCxlKSxhLnNldFN0YXJ0KGIsYykpfWZ1bmN0aW9uIGQoYSl7YS5uYXRpdmVSYW5nZS5kZXRhY2goKSxhLmRldGFjaGVkPSEwO2Zvcih2YXIgYixjPWsubGVuZ3RoO2MtLTspYj1rW2NdLGFbYl09bnVsbH12YXIgZSxoLGosaz1pLnJhbmdlUHJvcGVydGllcztmPWZ1bmN0aW9uKGEpe2lmKCFhKXRocm93IG5ldyBFcnJvcihcIlJhbmdlIG11c3QgYmUgc3BlY2lmaWVkXCIpO3RoaXMubmF0aXZlUmFuZ2U9YSxiKHRoaXMpfSxpLmNyZWF0ZVByb3RvdHlwZVJhbmdlKGYsYyxkKSxlPWYucHJvdG90eXBlLGUuc2VsZWN0Tm9kZT1mdW5jdGlvbihhKXt0aGlzLm5hdGl2ZVJhbmdlLnNlbGVjdE5vZGUoYSksYih0aGlzKX0sZS5kZWxldGVDb250ZW50cz1mdW5jdGlvbigpe3RoaXMubmF0aXZlUmFuZ2UuZGVsZXRlQ29udGVudHMoKSxiKHRoaXMpfSxlLmV4dHJhY3RDb250ZW50cz1mdW5jdGlvbigpe3ZhciBhPXRoaXMubmF0aXZlUmFuZ2UuZXh0cmFjdENvbnRlbnRzKCk7cmV0dXJuIGIodGhpcyksYX0sZS5jbG9uZUNvbnRlbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmF0aXZlUmFuZ2UuY2xvbmVDb250ZW50cygpfSxlLnN1cnJvdW5kQ29udGVudHM9ZnVuY3Rpb24oYSl7dGhpcy5uYXRpdmVSYW5nZS5zdXJyb3VuZENvbnRlbnRzKGEpLGIodGhpcyl9LGUuY29sbGFwc2U9ZnVuY3Rpb24oYSl7dGhpcy5uYXRpdmVSYW5nZS5jb2xsYXBzZShhKSxiKHRoaXMpfSxlLmNsb25lUmFuZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGYodGhpcy5uYXRpdmVSYW5nZS5jbG9uZVJhbmdlKCkpfSxlLnJlZnJlc2g9ZnVuY3Rpb24oKXtiKHRoaXMpfSxlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmF0aXZlUmFuZ2UudG9TdHJpbmcoKX07dmFyIGw9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJ0ZXN0XCIpO2cuZ2V0Qm9keShkb2N1bWVudCkuYXBwZW5kQ2hpbGQobCk7dmFyIG09ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTttLnNldFN0YXJ0KGwsMCksbS5zZXRFbmQobCwwKTt0cnl7bS5zZXRTdGFydChsLDEpLGg9ITAsZS5zZXRTdGFydD1mdW5jdGlvbihhLGMpe3RoaXMubmF0aXZlUmFuZ2Uuc2V0U3RhcnQoYSxjKSxiKHRoaXMpfSxlLnNldEVuZD1mdW5jdGlvbihhLGMpe3RoaXMubmF0aXZlUmFuZ2Uuc2V0RW5kKGEsYyksYih0aGlzKX0saj1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYyl7dGhpcy5uYXRpdmVSYW5nZVthXShjKSxiKHRoaXMpfX19Y2F0Y2gobil7aD0hMSxlLnNldFN0YXJ0PWZ1bmN0aW9uKGEsYyl7dHJ5e3RoaXMubmF0aXZlUmFuZ2Uuc2V0U3RhcnQoYSxjKX1jYXRjaChkKXt0aGlzLm5hdGl2ZVJhbmdlLnNldEVuZChhLGMpLHRoaXMubmF0aXZlUmFuZ2Uuc2V0U3RhcnQoYSxjKX1iKHRoaXMpfSxlLnNldEVuZD1mdW5jdGlvbihhLGMpe3RyeXt0aGlzLm5hdGl2ZVJhbmdlLnNldEVuZChhLGMpfWNhdGNoKGQpe3RoaXMubmF0aXZlUmFuZ2Uuc2V0U3RhcnQoYSxjKSx0aGlzLm5hdGl2ZVJhbmdlLnNldEVuZChhLGMpfWIodGhpcyl9LGo9ZnVuY3Rpb24oYSxjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dHJ5e3RoaXMubmF0aXZlUmFuZ2VbYV0oZCl9Y2F0Y2goZSl7dGhpcy5uYXRpdmVSYW5nZVtjXShkKSx0aGlzLm5hdGl2ZVJhbmdlW2FdKGQpfWIodGhpcyl9fX1lLnNldFN0YXJ0QmVmb3JlPWooXCJzZXRTdGFydEJlZm9yZVwiLFwic2V0RW5kQmVmb3JlXCIpLGUuc2V0U3RhcnRBZnRlcj1qKFwic2V0U3RhcnRBZnRlclwiLFwic2V0RW5kQWZ0ZXJcIiksZS5zZXRFbmRCZWZvcmU9aihcInNldEVuZEJlZm9yZVwiLFwic2V0U3RhcnRCZWZvcmVcIiksZS5zZXRFbmRBZnRlcj1qKFwic2V0RW5kQWZ0ZXJcIixcInNldFN0YXJ0QWZ0ZXJcIiksbS5zZWxlY3ROb2RlQ29udGVudHMobCksZS5zZWxlY3ROb2RlQ29udGVudHM9bS5zdGFydENvbnRhaW5lcj09bCYmbS5lbmRDb250YWluZXI9PWwmJjA9PW0uc3RhcnRPZmZzZXQmJm0uZW5kT2Zmc2V0PT1sLmxlbmd0aD9mdW5jdGlvbihhKXt0aGlzLm5hdGl2ZVJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhhKSxiKHRoaXMpfTpmdW5jdGlvbihhKXt0aGlzLnNldFN0YXJ0KGEsMCksdGhpcy5zZXRFbmQoYSxpLmdldEVuZE9mZnNldChhKSl9LG0uc2VsZWN0Tm9kZUNvbnRlbnRzKGwpLG0uc2V0RW5kKGwsMyk7dmFyIG89ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtvLnNlbGVjdE5vZGVDb250ZW50cyhsKSxvLnNldEVuZChsLDQpLG8uc2V0U3RhcnQobCwyKSxlLmNvbXBhcmVCb3VuZGFyeVBvaW50cz0tMT09bS5jb21wYXJlQm91bmRhcnlQb2ludHMobS5TVEFSVF9UT19FTkQsbykmMT09bS5jb21wYXJlQm91bmRhcnlQb2ludHMobS5FTkRfVE9fU1RBUlQsbyk/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj1iLm5hdGl2ZVJhbmdlfHxiLGE9PWIuU1RBUlRfVE9fRU5EP2E9Yi5FTkRfVE9fU1RBUlQ6YT09Yi5FTkRfVE9fU1RBUlQmJihhPWIuU1RBUlRfVE9fRU5EKSx0aGlzLm5hdGl2ZVJhbmdlLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhhLGIpfTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm5hdGl2ZVJhbmdlLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhhLGIubmF0aXZlUmFuZ2V8fGIpfSxhLnV0aWwuaXNIb3N0TWV0aG9kKG0sXCJjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnRcIikmJihlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5uYXRpdmVSYW5nZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoYSl9KSxnLmdldEJvZHkoZG9jdW1lbnQpLnJlbW92ZUNoaWxkKGwpLG0uZGV0YWNoKCksby5kZXRhY2goKX0oKSxhLmNyZWF0ZU5hdGl2ZVJhbmdlPWZ1bmN0aW9uKGEpe3JldHVybiBhPWF8fGRvY3VtZW50LGEuY3JlYXRlUmFuZ2UoKX07YS5mZWF0dXJlcy5pbXBsZW1lbnRzVGV4dFJhbmdlJiYoZi5yYW5nZVRvVGV4dFJhbmdlPWZ1bmN0aW9uKGEpe2lmKGEuY29sbGFwc2VkKXt2YXIgYj1lKG5ldyBoKGEuc3RhcnRDb250YWluZXIsYS5zdGFydE9mZnNldCksITApO3JldHVybiBifXZhciBjPWUobmV3IGgoYS5zdGFydENvbnRhaW5lcixhLnN0YXJ0T2Zmc2V0KSwhMCksZD1lKG5ldyBoKGEuZW5kQ29udGFpbmVyLGEuZW5kT2Zmc2V0KSwhMSksZj1nLmdldERvY3VtZW50KGEuc3RhcnRDb250YWluZXIpLmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7cmV0dXJuIGYuc2V0RW5kUG9pbnQoXCJTdGFydFRvU3RhcnRcIixjKSxmLnNldEVuZFBvaW50KFwiRW5kVG9FbmRcIixkKSxmfSksZi5wcm90b3R5cGUuZ2V0TmFtZT1mdW5jdGlvbigpe3JldHVyblwiV3JhcHBlZFJhbmdlXCJ9LGEuV3JhcHBlZFJhbmdlPWYsYS5jcmVhdGVSYW5nZT1mdW5jdGlvbihiKXtyZXR1cm4gYj1ifHxkb2N1bWVudCxuZXcgZihhLmNyZWF0ZU5hdGl2ZVJhbmdlKGIpKX0sYS5jcmVhdGVSYW5neVJhbmdlPWZ1bmN0aW9uKGEpe3JldHVybiBhPWF8fGRvY3VtZW50LG5ldyBpKGEpfSxhLmNyZWF0ZUlmcmFtZVJhbmdlPWZ1bmN0aW9uKGIpe3JldHVybiBhLmNyZWF0ZVJhbmdlKGcuZ2V0SWZyYW1lRG9jdW1lbnQoYikpfSxhLmNyZWF0ZUlmcmFtZVJhbmd5UmFuZ2U9ZnVuY3Rpb24oYil7cmV0dXJuIGEuY3JlYXRlUmFuZ3lSYW5nZShnLmdldElmcmFtZURvY3VtZW50KGIpKX0sYS5hZGRDcmVhdGVNaXNzaW5nTmF0aXZlQXBpTGlzdGVuZXIoZnVuY3Rpb24oYil7dmFyIGM9Yi5kb2N1bWVudDtcInVuZGVmaW5lZFwiPT10eXBlb2YgYy5jcmVhdGVSYW5nZSYmKGMuY3JlYXRlUmFuZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gYS5jcmVhdGVSYW5nZSh0aGlzKX0pLGM9Yj1udWxsfSl9KSxyYW5neS5jcmVhdGVNb2R1bGUoXCJXcmFwcGVkU2VsZWN0aW9uXCIsZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe3JldHVybihhfHx3aW5kb3cpLmdldFNlbGVjdGlvbigpfWZ1bmN0aW9uIGQoYSl7cmV0dXJuKGF8fHdpbmRvdykuZG9jdW1lbnQuc2VsZWN0aW9ufWZ1bmN0aW9uIGUoYSxiLGMpe3ZhciBkPWM/XCJlbmRcIjpcInN0YXJ0XCIsZT1jP1wic3RhcnRcIjpcImVuZFwiO2EuYW5jaG9yTm9kZT1iW2QrXCJDb250YWluZXJcIl0sYS5hbmNob3JPZmZzZXQ9YltkK1wiT2Zmc2V0XCJdLGEuZm9jdXNOb2RlPWJbZStcIkNvbnRhaW5lclwiXSxhLmZvY3VzT2Zmc2V0PWJbZStcIk9mZnNldFwiXX1mdW5jdGlvbiBmKGEpe3ZhciBiPWEubmF0aXZlU2VsZWN0aW9uO2EuYW5jaG9yTm9kZT1iLmFuY2hvck5vZGUsYS5hbmNob3JPZmZzZXQ9Yi5hbmNob3JPZmZzZXQsYS5mb2N1c05vZGU9Yi5mb2N1c05vZGUsYS5mb2N1c09mZnNldD1iLmZvY3VzT2Zmc2V0fWZ1bmN0aW9uIGcoYSl7YS5hbmNob3JOb2RlPWEuZm9jdXNOb2RlPW51bGwsYS5hbmNob3JPZmZzZXQ9YS5mb2N1c09mZnNldD0wLGEucmFuZ2VDb3VudD0wLGEuaXNDb2xsYXBzZWQ9ITAsYS5fcmFuZ2VzLmxlbmd0aD0wfWZ1bmN0aW9uIGgoYil7dmFyIGM7cmV0dXJuIGIgaW5zdGFuY2VvZiB5PyhjPWIuX3NlbGVjdGlvbk5hdGl2ZVJhbmdlLGN8fChjPWEuY3JlYXRlTmF0aXZlUmFuZ2Uody5nZXREb2N1bWVudChiLnN0YXJ0Q29udGFpbmVyKSksYy5zZXRFbmQoYi5lbmRDb250YWluZXIsYi5lbmRPZmZzZXQpLGMuc2V0U3RhcnQoYi5zdGFydENvbnRhaW5lcixiLnN0YXJ0T2Zmc2V0KSxiLl9zZWxlY3Rpb25OYXRpdmVSYW5nZT1jLGIuYXR0YWNoTGlzdGVuZXIoXCJkZXRhY2hcIixmdW5jdGlvbigpe3RoaXMuX3NlbGVjdGlvbk5hdGl2ZVJhbmdlPW51bGx9KSkpOmIgaW5zdGFuY2VvZiB6P2M9Yi5uYXRpdmVSYW5nZTphLmZlYXR1cmVzLmltcGxlbWVudHNEb21SYW5nZSYmYiBpbnN0YW5jZW9mIHcuZ2V0V2luZG93KGIuc3RhcnRDb250YWluZXIpLlJhbmdlJiYoYz1iKSxjfWZ1bmN0aW9uIGkoYSl7aWYoIWEubGVuZ3RofHwxIT1hWzBdLm5vZGVUeXBlKXJldHVybiExO2Zvcih2YXIgYj0xLGM9YS5sZW5ndGg7Yz5iOysrYilpZighdy5pc0FuY2VzdG9yT2YoYVswXSxhW2JdKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBqKGEpe3ZhciBiPWEuZ2V0Tm9kZXMoKTtpZighaShiKSl0aHJvdyBuZXcgRXJyb3IoXCJnZXRTaW5nbGVFbGVtZW50RnJvbVJhbmdlOiByYW5nZSBcIithLmluc3BlY3QoKStcIiBkaWQgbm90IGNvbnNpc3Qgb2YgYSBzaW5nbGUgZWxlbWVudFwiKTtyZXR1cm4gYlswXX1mdW5jdGlvbiBrKGEpe3JldHVybiEhYSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEudGV4dH1mdW5jdGlvbiBsKGEsYil7dmFyIGM9bmV3IHooYik7YS5fcmFuZ2VzPVtjXSxlKGEsYywhMSksYS5yYW5nZUNvdW50PTEsYS5pc0NvbGxhcHNlZD1jLmNvbGxhcHNlZH1mdW5jdGlvbiBtKGIpe2lmKGIuX3Jhbmdlcy5sZW5ndGg9MCxcIk5vbmVcIj09Yi5kb2NTZWxlY3Rpb24udHlwZSlnKGIpO2Vsc2V7dmFyIGM9Yi5kb2NTZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtpZihrKGMpKWwoYixjKTtlbHNle2IucmFuZ2VDb3VudD1jLmxlbmd0aDtmb3IodmFyIGQsZj13LmdldERvY3VtZW50KGMuaXRlbSgwKSksaD0wO2g8Yi5yYW5nZUNvdW50OysraClkPWEuY3JlYXRlUmFuZ2UoZiksZC5zZWxlY3ROb2RlKGMuaXRlbShoKSksYi5fcmFuZ2VzLnB1c2goZCk7XG5iLmlzQ29sbGFwc2VkPTE9PWIucmFuZ2VDb3VudCYmYi5fcmFuZ2VzWzBdLmNvbGxhcHNlZCxlKGIsYi5fcmFuZ2VzW2IucmFuZ2VDb3VudC0xXSwhMSl9fX1mdW5jdGlvbiBuKGEsYil7Zm9yKHZhciBjPWEuZG9jU2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCksZD1qKGIpLGU9dy5nZXREb2N1bWVudChjLml0ZW0oMCkpLGY9dy5nZXRCb2R5KGUpLmNyZWF0ZUNvbnRyb2xSYW5nZSgpLGc9MCxoPWMubGVuZ3RoO2g+ZzsrK2cpZi5hZGQoYy5pdGVtKGcpKTt0cnl7Zi5hZGQoZCl9Y2F0Y2goaSl7dGhyb3cgbmV3IEVycm9yKFwiYWRkUmFuZ2UoKTogRWxlbWVudCB3aXRoaW4gdGhlIHNwZWNpZmllZCBSYW5nZSBjb3VsZCBub3QgYmUgYWRkZWQgdG8gY29udHJvbCBzZWxlY3Rpb24gKGRvZXMgaXQgaGF2ZSBsYXlvdXQ/KVwiKX1mLnNlbGVjdCgpLG0oYSl9ZnVuY3Rpb24gbyhhLGIsYyl7dGhpcy5uYXRpdmVTZWxlY3Rpb249YSx0aGlzLmRvY1NlbGVjdGlvbj1iLHRoaXMuX3Jhbmdlcz1bXSx0aGlzLndpbj1jLHRoaXMucmVmcmVzaCgpfWZ1bmN0aW9uIHAoYSxiKXtmb3IodmFyIGMsZD13LmdldERvY3VtZW50KGJbMF0uc3RhcnRDb250YWluZXIpLGU9dy5nZXRCb2R5KGQpLmNyZWF0ZUNvbnRyb2xSYW5nZSgpLGY9MDtmPHJhbmdlQ291bnQ7KytmKXtjPWooYltmXSk7dHJ5e2UuYWRkKGMpfWNhdGNoKGcpe3Rocm93IG5ldyBFcnJvcihcInNldFJhbmdlcygpOiBFbGVtZW50IHdpdGhpbiB0aGUgb25lIG9mIHRoZSBzcGVjaWZpZWQgUmFuZ2VzIGNvdWxkIG5vdCBiZSBhZGRlZCB0byBjb250cm9sIHNlbGVjdGlvbiAoZG9lcyBpdCBoYXZlIGxheW91dD8pXCIpfX1lLnNlbGVjdCgpLG0oYSl9ZnVuY3Rpb24gcShhLGIpe2lmKGEuYW5jaG9yTm9kZSYmdy5nZXREb2N1bWVudChhLmFuY2hvck5vZGUpIT09dy5nZXREb2N1bWVudChiKSl0aHJvdyBuZXcgQShcIldST05HX0RPQ1VNRU5UX0VSUlwiKX1mdW5jdGlvbiByKGEpe3ZhciBiPVtdLGM9bmV3IEIoYS5hbmNob3JOb2RlLGEuYW5jaG9yT2Zmc2V0KSxkPW5ldyBCKGEuZm9jdXNOb2RlLGEuZm9jdXNPZmZzZXQpLGU9XCJmdW5jdGlvblwiPT10eXBlb2YgYS5nZXROYW1lP2EuZ2V0TmFtZSgpOlwiU2VsZWN0aW9uXCI7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEucmFuZ2VDb3VudClmb3IodmFyIGY9MCxnPWEucmFuZ2VDb3VudDtnPmY7KytmKWJbZl09eS5pbnNwZWN0KGEuZ2V0UmFuZ2VBdChmKSk7cmV0dXJuXCJbXCIrZStcIihSYW5nZXM6IFwiK2Iuam9pbihcIiwgXCIpK1wiKShhbmNob3I6IFwiK2MuaW5zcGVjdCgpK1wiLCBmb2N1czogXCIrZC5pbnNwZWN0KCkrXCJdXCJ9YS5yZXF1aXJlTW9kdWxlcyhbXCJEb21VdGlsXCIsXCJEb21SYW5nZVwiLFwiV3JhcHBlZFJhbmdlXCJdKSxhLmNvbmZpZy5jaGVja1NlbGVjdGlvblJhbmdlcz0hMDt2YXIgcyx0LHU9XCJib29sZWFuXCIsdj1cIl9yYW5neVNlbGVjdGlvblwiLHc9YS5kb20seD1hLnV0aWwseT1hLkRvbVJhbmdlLHo9YS5XcmFwcGVkUmFuZ2UsQT1hLkRPTUV4Y2VwdGlvbixCPXcuRG9tUG9zaXRpb24sQz1cIkNvbnRyb2xcIixEPWEudXRpbC5pc0hvc3RNZXRob2Qod2luZG93LFwiZ2V0U2VsZWN0aW9uXCIpLEU9YS51dGlsLmlzSG9zdE9iamVjdChkb2N1bWVudCxcInNlbGVjdGlvblwiKSxGPUUmJighRHx8YS5jb25maWcucHJlZmVyVGV4dFJhbmdlKTtGPyhzPWQsYS5pc1NlbGVjdGlvblZhbGlkPWZ1bmN0aW9uKGEpe3ZhciBiPShhfHx3aW5kb3cpLmRvY3VtZW50LGM9Yi5zZWxlY3Rpb247cmV0dXJuXCJOb25lXCIhPWMudHlwZXx8dy5nZXREb2N1bWVudChjLmNyZWF0ZVJhbmdlKCkucGFyZW50RWxlbWVudCgpKT09Yn0pOkQ/KHM9YyxhLmlzU2VsZWN0aW9uVmFsaWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMH0pOmIuZmFpbChcIk5laXRoZXIgZG9jdW1lbnQuc2VsZWN0aW9uIG9yIHdpbmRvdy5nZXRTZWxlY3Rpb24oKSBkZXRlY3RlZC5cIiksYS5nZXROYXRpdmVTZWxlY3Rpb249czt2YXIgRz1zKCksSD1hLmNyZWF0ZU5hdGl2ZVJhbmdlKGRvY3VtZW50KSxJPXcuZ2V0Qm9keShkb2N1bWVudCksSj14LmFyZUhvc3RPYmplY3RzKEcsW1wiYW5jaG9yTm9kZVwiLFwiZm9jdXNOb2RlXCJdJiZ4LmFyZUhvc3RQcm9wZXJ0aWVzKEcsW1wiYW5jaG9yT2Zmc2V0XCIsXCJmb2N1c09mZnNldFwiXSkpO2EuZmVhdHVyZXMuc2VsZWN0aW9uSGFzQW5jaG9yQW5kRm9jdXM9Sjt2YXIgSz14LmlzSG9zdE1ldGhvZChHLFwiZXh0ZW5kXCIpO2EuZmVhdHVyZXMuc2VsZWN0aW9uSGFzRXh0ZW5kPUs7dmFyIEw9XCJudW1iZXJcIj09dHlwZW9mIEcucmFuZ2VDb3VudDthLmZlYXR1cmVzLnNlbGVjdGlvbkhhc1JhbmdlQ291bnQ9TDt2YXIgTT0hMSxOPSEwO3guYXJlSG9zdE1ldGhvZHMoRyxbXCJhZGRSYW5nZVwiLFwiZ2V0UmFuZ2VBdFwiLFwicmVtb3ZlQWxsUmFuZ2VzXCJdKSYmXCJudW1iZXJcIj09dHlwZW9mIEcucmFuZ2VDb3VudCYmYS5mZWF0dXJlcy5pbXBsZW1lbnRzRG9tUmFuZ2UmJiFmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7YS5mcmFtZUJvcmRlcj0wLGEuc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiLGEuc3R5bGUubGVmdD1cIi0xMDAwMHB4XCIsSS5hcHBlbmRDaGlsZChhKTt2YXIgYj13LmdldElmcmFtZURvY3VtZW50KGEpO2Iub3BlbigpLGIud3JpdGUoXCI8aHRtbD48aGVhZD48L2hlYWQ+PGJvZHk+MTI8L2JvZHk+PC9odG1sPlwiKSxiLmNsb3NlKCk7dmFyIGM9dy5nZXRJZnJhbWVXaW5kb3coYSkuZ2V0U2VsZWN0aW9uKCksZD1iLmRvY3VtZW50RWxlbWVudCxlPWQubGFzdENoaWxkLGY9ZS5maXJzdENoaWxkLGc9Yi5jcmVhdGVSYW5nZSgpO2cuc2V0U3RhcnQoZiwxKSxnLmNvbGxhcHNlKCEwKSxjLmFkZFJhbmdlKGcpLE49MT09Yy5yYW5nZUNvdW50LGMucmVtb3ZlQWxsUmFuZ2VzKCk7dmFyIGg9Zy5jbG9uZVJhbmdlKCk7Zy5zZXRTdGFydChmLDApLGguc2V0RW5kKGYsMiksYy5hZGRSYW5nZShnKSxjLmFkZFJhbmdlKGgpLE09Mj09Yy5yYW5nZUNvdW50LGcuZGV0YWNoKCksaC5kZXRhY2goKSxJLnJlbW92ZUNoaWxkKGEpfSgpLGEuZmVhdHVyZXMuc2VsZWN0aW9uU3VwcG9ydHNNdWx0aXBsZVJhbmdlcz1NLGEuZmVhdHVyZXMuY29sbGFwc2VkTm9uRWRpdGFibGVTZWxlY3Rpb25zU3VwcG9ydGVkPU47dmFyIE8sUD0hMTtJJiZ4LmlzSG9zdE1ldGhvZChJLFwiY3JlYXRlQ29udHJvbFJhbmdlXCIpJiYoTz1JLmNyZWF0ZUNvbnRyb2xSYW5nZSgpLHguYXJlSG9zdFByb3BlcnRpZXMoTyxbXCJpdGVtXCIsXCJhZGRcIl0pJiYoUD0hMCkpLGEuZmVhdHVyZXMuaW1wbGVtZW50c0NvbnRyb2xSYW5nZT1QLHQ9Sj9mdW5jdGlvbihhKXtyZXR1cm4gYS5hbmNob3JOb2RlPT09YS5mb2N1c05vZGUmJmEuYW5jaG9yT2Zmc2V0PT09YS5mb2N1c09mZnNldH06ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmFuZ2VDb3VudD9hLmdldFJhbmdlQXQoYS5yYW5nZUNvdW50LTEpLmNvbGxhcHNlZDohMX07dmFyIFE7eC5pc0hvc3RNZXRob2QoRyxcImdldFJhbmdlQXRcIik/UT1mdW5jdGlvbihhLGIpe3RyeXtyZXR1cm4gYS5nZXRSYW5nZUF0KGIpfWNhdGNoKGMpe3JldHVybiBudWxsfX06SiYmKFE9ZnVuY3Rpb24oYil7dmFyIGM9dy5nZXREb2N1bWVudChiLmFuY2hvck5vZGUpLGQ9YS5jcmVhdGVSYW5nZShjKTtyZXR1cm4gZC5zZXRTdGFydChiLmFuY2hvck5vZGUsYi5hbmNob3JPZmZzZXQpLGQuc2V0RW5kKGIuZm9jdXNOb2RlLGIuZm9jdXNPZmZzZXQpLGQuY29sbGFwc2VkIT09dGhpcy5pc0NvbGxhcHNlZCYmKGQuc2V0U3RhcnQoYi5mb2N1c05vZGUsYi5mb2N1c09mZnNldCksZC5zZXRFbmQoYi5hbmNob3JOb2RlLGIuYW5jaG9yT2Zmc2V0KSksZH0pLGEuZ2V0U2VsZWN0aW9uPWZ1bmN0aW9uKGEpe2E9YXx8d2luZG93O3ZhciBiPWFbdl0sYz1zKGEpLGU9RT9kKGEpOm51bGw7cmV0dXJuIGI/KGIubmF0aXZlU2VsZWN0aW9uPWMsYi5kb2NTZWxlY3Rpb249ZSxiLnJlZnJlc2goYSkpOihiPW5ldyBvKGMsZSxhKSxhW3ZdPWIpLGJ9LGEuZ2V0SWZyYW1lU2VsZWN0aW9uPWZ1bmN0aW9uKGIpe3JldHVybiBhLmdldFNlbGVjdGlvbih3LmdldElmcmFtZVdpbmRvdyhiKSl9O3ZhciBSPW8ucHJvdG90eXBlO2lmKCFGJiZKJiZ4LmFyZUhvc3RNZXRob2RzKEcsW1wicmVtb3ZlQWxsUmFuZ2VzXCIsXCJhZGRSYW5nZVwiXSkpe1IucmVtb3ZlQWxsUmFuZ2VzPWZ1bmN0aW9uKCl7dGhpcy5uYXRpdmVTZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCksZyh0aGlzKX07dmFyIFM9ZnVuY3Rpb24oYixjKXt2YXIgZD15LmdldFJhbmdlRG9jdW1lbnQoYyksZT1hLmNyZWF0ZVJhbmdlKGQpO2UuY29sbGFwc2VUb1BvaW50KGMuZW5kQ29udGFpbmVyLGMuZW5kT2Zmc2V0KSxiLm5hdGl2ZVNlbGVjdGlvbi5hZGRSYW5nZShoKGUpKSxiLm5hdGl2ZVNlbGVjdGlvbi5leHRlbmQoYy5zdGFydENvbnRhaW5lcixjLnN0YXJ0T2Zmc2V0KSxiLnJlZnJlc2goKX07Ui5hZGRSYW5nZT1MP2Z1bmN0aW9uKGIsYyl7aWYoUCYmRSYmdGhpcy5kb2NTZWxlY3Rpb24udHlwZT09QyluKHRoaXMsYik7ZWxzZSBpZihjJiZLKVModGhpcyxiKTtlbHNle3ZhciBkO2lmKE0/ZD10aGlzLnJhbmdlQ291bnQ6KHRoaXMucmVtb3ZlQWxsUmFuZ2VzKCksZD0wKSx0aGlzLm5hdGl2ZVNlbGVjdGlvbi5hZGRSYW5nZShoKGIpKSx0aGlzLnJhbmdlQ291bnQ9dGhpcy5uYXRpdmVTZWxlY3Rpb24ucmFuZ2VDb3VudCx0aGlzLnJhbmdlQ291bnQ9PWQrMSl7aWYoYS5jb25maWcuY2hlY2tTZWxlY3Rpb25SYW5nZXMpe3ZhciBmPVEodGhpcy5uYXRpdmVTZWxlY3Rpb24sdGhpcy5yYW5nZUNvdW50LTEpO2YmJiF5LnJhbmdlc0VxdWFsKGYsYikmJihiPW5ldyB6KGYpKX10aGlzLl9yYW5nZXNbdGhpcy5yYW5nZUNvdW50LTFdPWIsZSh0aGlzLGIsVih0aGlzLm5hdGl2ZVNlbGVjdGlvbikpLHRoaXMuaXNDb2xsYXBzZWQ9dCh0aGlzKX1lbHNlIHRoaXMucmVmcmVzaCgpfX06ZnVuY3Rpb24oYSxiKXtiJiZLP1ModGhpcyxhKToodGhpcy5uYXRpdmVTZWxlY3Rpb24uYWRkUmFuZ2UoaChhKSksdGhpcy5yZWZyZXNoKCkpfSxSLnNldFJhbmdlcz1mdW5jdGlvbihhKXtpZihQJiZhLmxlbmd0aD4xKXAodGhpcyxhKTtlbHNle3RoaXMucmVtb3ZlQWxsUmFuZ2VzKCk7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtjPmI7KytiKXRoaXMuYWRkUmFuZ2UoYVtiXSl9fX1lbHNle2lmKCEoeC5pc0hvc3RNZXRob2QoRyxcImVtcHR5XCIpJiZ4LmlzSG9zdE1ldGhvZChILFwic2VsZWN0XCIpJiZQJiZGKSlyZXR1cm4gYi5mYWlsKFwiTm8gbWVhbnMgb2Ygc2VsZWN0aW5nIGEgUmFuZ2Ugb3IgVGV4dFJhbmdlIHdhcyBmb3VuZFwiKSwhMTtSLnJlbW92ZUFsbFJhbmdlcz1mdW5jdGlvbigpe3RyeXtpZih0aGlzLmRvY1NlbGVjdGlvbi5lbXB0eSgpLFwiTm9uZVwiIT10aGlzLmRvY1NlbGVjdGlvbi50eXBlKXt2YXIgYTtpZih0aGlzLmFuY2hvck5vZGUpYT13LmdldERvY3VtZW50KHRoaXMuYW5jaG9yTm9kZSk7ZWxzZSBpZih0aGlzLmRvY1NlbGVjdGlvbi50eXBlPT1DKXt2YXIgYj10aGlzLmRvY1NlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO2IubGVuZ3RoJiYoYT13LmdldERvY3VtZW50KGIuaXRlbSgwKSkuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKSl9aWYoYSl7dmFyIGM9YS5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpO2Muc2VsZWN0KCksdGhpcy5kb2NTZWxlY3Rpb24uZW1wdHkoKX19fWNhdGNoKGQpe31nKHRoaXMpfSxSLmFkZFJhbmdlPWZ1bmN0aW9uKGEpe3RoaXMuZG9jU2VsZWN0aW9uLnR5cGU9PUM/bih0aGlzLGEpOih6LnJhbmdlVG9UZXh0UmFuZ2UoYSkuc2VsZWN0KCksdGhpcy5fcmFuZ2VzWzBdPWEsdGhpcy5yYW5nZUNvdW50PTEsdGhpcy5pc0NvbGxhcHNlZD10aGlzLl9yYW5nZXNbMF0uY29sbGFwc2VkLGUodGhpcyxhLCExKSl9LFIuc2V0UmFuZ2VzPWZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlQWxsUmFuZ2VzKCk7dmFyIGI9YS5sZW5ndGg7Yj4xP3AodGhpcyxhKTpiJiZ0aGlzLmFkZFJhbmdlKGFbMF0pfX1SLmdldFJhbmdlQXQ9ZnVuY3Rpb24oYSl7aWYoMD5hfHxhPj10aGlzLnJhbmdlQ291bnQpdGhyb3cgbmV3IEEoXCJJTkRFWF9TSVpFX0VSUlwiKTtyZXR1cm4gdGhpcy5fcmFuZ2VzW2FdfTt2YXIgVDtpZihGKVQ9ZnVuY3Rpb24oYil7dmFyIGM7YS5pc1NlbGVjdGlvblZhbGlkKGIud2luKT9jPWIuZG9jU2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk6KGM9dy5nZXRCb2R5KGIud2luLmRvY3VtZW50KS5jcmVhdGVUZXh0UmFuZ2UoKSxjLmNvbGxhcHNlKCEwKSksYi5kb2NTZWxlY3Rpb24udHlwZT09Qz9tKGIpOmsoYyk/bChiLGMpOmcoYil9O2Vsc2UgaWYoeC5pc0hvc3RNZXRob2QoRyxcImdldFJhbmdlQXRcIikmJlwibnVtYmVyXCI9PXR5cGVvZiBHLnJhbmdlQ291bnQpVD1mdW5jdGlvbihiKXtpZihQJiZFJiZiLmRvY1NlbGVjdGlvbi50eXBlPT1DKW0oYik7ZWxzZSBpZihiLl9yYW5nZXMubGVuZ3RoPWIucmFuZ2VDb3VudD1iLm5hdGl2ZVNlbGVjdGlvbi5yYW5nZUNvdW50LGIucmFuZ2VDb3VudCl7Zm9yKHZhciBjPTAsZD1iLnJhbmdlQ291bnQ7ZD5jOysrYyliLl9yYW5nZXNbY109bmV3IGEuV3JhcHBlZFJhbmdlKGIubmF0aXZlU2VsZWN0aW9uLmdldFJhbmdlQXQoYykpO2UoYixiLl9yYW5nZXNbYi5yYW5nZUNvdW50LTFdLFYoYi5uYXRpdmVTZWxlY3Rpb24pKSxiLmlzQ29sbGFwc2VkPXQoYil9ZWxzZSBnKGIpfTtlbHNle2lmKCFKfHx0eXBlb2YgRy5pc0NvbGxhcHNlZCE9dXx8dHlwZW9mIEguY29sbGFwc2VkIT11fHwhYS5mZWF0dXJlcy5pbXBsZW1lbnRzRG9tUmFuZ2UpcmV0dXJuIGIuZmFpbChcIk5vIG1lYW5zIG9mIG9idGFpbmluZyBhIFJhbmdlIG9yIFRleHRSYW5nZSBmcm9tIHRoZSB1c2VyJ3Mgc2VsZWN0aW9uIHdhcyBmb3VuZFwiKSwhMTtUPWZ1bmN0aW9uKGEpe3ZhciBiLGM9YS5uYXRpdmVTZWxlY3Rpb247Yy5hbmNob3JOb2RlPyhiPVEoYywwKSxhLl9yYW5nZXM9W2JdLGEucmFuZ2VDb3VudD0xLGYoYSksYS5pc0NvbGxhcHNlZD10KGEpKTpnKGEpfX1SLnJlZnJlc2g9ZnVuY3Rpb24oYSl7dmFyIGI9YT90aGlzLl9yYW5nZXMuc2xpY2UoMCk6bnVsbDtpZihUKHRoaXMpLGEpe3ZhciBjPWIubGVuZ3RoO2lmKGMhPXRoaXMuX3Jhbmdlcy5sZW5ndGgpcmV0dXJuITE7Zm9yKDtjLS07KWlmKCF5LnJhbmdlc0VxdWFsKGJbY10sdGhpcy5fcmFuZ2VzW2NdKSlyZXR1cm4hMTtyZXR1cm4hMH19O3ZhciBVPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBbGxSYW5nZXMoKSxkPSExO2EucmVtb3ZlQWxsUmFuZ2VzKCk7Zm9yKHZhciBlPTAsZj1jLmxlbmd0aDtmPmU7KytlKWR8fGIhPT1jW2VdP2EuYWRkUmFuZ2UoY1tlXSk6ZD0hMDthLnJhbmdlQ291bnR8fGcoYSl9O1IucmVtb3ZlUmFuZ2U9UD9mdW5jdGlvbihhKXtpZih0aGlzLmRvY1NlbGVjdGlvbi50eXBlPT1DKXtmb3IodmFyIGIsYz10aGlzLmRvY1NlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLGQ9aihhKSxlPXcuZ2V0RG9jdW1lbnQoYy5pdGVtKDApKSxmPXcuZ2V0Qm9keShlKS5jcmVhdGVDb250cm9sUmFuZ2UoKSxnPSExLGg9MCxpPWMubGVuZ3RoO2k+aDsrK2gpYj1jLml0ZW0oaCksYiE9PWR8fGc/Zi5hZGQoYy5pdGVtKGgpKTpnPSEwO2Yuc2VsZWN0KCksbSh0aGlzKX1lbHNlIFUodGhpcyxhKX06ZnVuY3Rpb24oYSl7VSh0aGlzLGEpfTt2YXIgVjshRiYmSiYmYS5mZWF0dXJlcy5pbXBsZW1lbnRzRG9tUmFuZ2U/KFY9ZnVuY3Rpb24oYSl7dmFyIGI9ITE7cmV0dXJuIGEuYW5jaG9yTm9kZSYmKGI9MT09dy5jb21wYXJlUG9pbnRzKGEuYW5jaG9yTm9kZSxhLmFuY2hvck9mZnNldCxhLmZvY3VzTm9kZSxhLmZvY3VzT2Zmc2V0KSksYn0sUi5pc0JhY2t3YXJkcz1mdW5jdGlvbigpe3JldHVybiBWKHRoaXMpfSk6Vj1SLmlzQmFja3dhcmRzPWZ1bmN0aW9uKCl7cmV0dXJuITF9LFIudG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYj0wLGM9dGhpcy5yYW5nZUNvdW50O2M+YjsrK2IpYVtiXT1cIlwiK3RoaXMuX3Jhbmdlc1tiXTtyZXR1cm4gYS5qb2luKFwiXCIpfSxSLmNvbGxhcHNlPWZ1bmN0aW9uKGIsYyl7cSh0aGlzLGIpO3ZhciBkPWEuY3JlYXRlUmFuZ2Uody5nZXREb2N1bWVudChiKSk7ZC5jb2xsYXBzZVRvUG9pbnQoYixjKSx0aGlzLnJlbW92ZUFsbFJhbmdlcygpLHRoaXMuYWRkUmFuZ2UoZCksdGhpcy5pc0NvbGxhcHNlZD0hMH0sUi5jb2xsYXBzZVRvU3RhcnQ9ZnVuY3Rpb24oKXtpZighdGhpcy5yYW5nZUNvdW50KXRocm93IG5ldyBBKFwiSU5WQUxJRF9TVEFURV9FUlJcIik7dmFyIGE9dGhpcy5fcmFuZ2VzWzBdO3RoaXMuY29sbGFwc2UoYS5zdGFydENvbnRhaW5lcixhLnN0YXJ0T2Zmc2V0KX0sUi5jb2xsYXBzZVRvRW5kPWZ1bmN0aW9uKCl7aWYoIXRoaXMucmFuZ2VDb3VudCl0aHJvdyBuZXcgQShcIklOVkFMSURfU1RBVEVfRVJSXCIpO3ZhciBhPXRoaXMuX3Jhbmdlc1t0aGlzLnJhbmdlQ291bnQtMV07dGhpcy5jb2xsYXBzZShhLmVuZENvbnRhaW5lcixhLmVuZE9mZnNldCl9LFIuc2VsZWN0QWxsQ2hpbGRyZW49ZnVuY3Rpb24oYil7cSh0aGlzLGIpO3ZhciBjPWEuY3JlYXRlUmFuZ2Uody5nZXREb2N1bWVudChiKSk7Yy5zZWxlY3ROb2RlQ29udGVudHMoYiksdGhpcy5yZW1vdmVBbGxSYW5nZXMoKSx0aGlzLmFkZFJhbmdlKGMpfSxSLmRlbGV0ZUZyb21Eb2N1bWVudD1mdW5jdGlvbigpe2lmKFAmJkUmJnRoaXMuZG9jU2VsZWN0aW9uLnR5cGU9PUMpe2Zvcih2YXIgYSxiPXRoaXMuZG9jU2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7Yi5sZW5ndGg7KWE9Yi5pdGVtKDApLGIucmVtb3ZlKGEpLGEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKTt0aGlzLnJlZnJlc2goKX1lbHNlIGlmKHRoaXMucmFuZ2VDb3VudCl7dmFyIGM9dGhpcy5nZXRBbGxSYW5nZXMoKTt0aGlzLnJlbW92ZUFsbFJhbmdlcygpO2Zvcih2YXIgZD0wLGU9Yy5sZW5ndGg7ZT5kOysrZCljW2RdLmRlbGV0ZUNvbnRlbnRzKCk7dGhpcy5hZGRSYW5nZShjW2UtMV0pfX0sUi5nZXRBbGxSYW5nZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmFuZ2VzLnNsaWNlKDApfSxSLnNldFNpbmdsZVJhbmdlPWZ1bmN0aW9uKGEpe3RoaXMuc2V0UmFuZ2VzKFthXSl9LFIuY29udGFpbnNOb2RlPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD10aGlzLl9yYW5nZXMubGVuZ3RoO2Q+YzsrK2MpaWYodGhpcy5fcmFuZ2VzW2NdLmNvbnRhaW5zTm9kZShhLGIpKXJldHVybiEwO3JldHVybiExfSxSLnRvSHRtbD1mdW5jdGlvbigpe3ZhciBhPVwiXCI7aWYodGhpcy5yYW5nZUNvdW50KXtmb3IodmFyIGI9eS5nZXRSYW5nZURvY3VtZW50KHRoaXMuX3Jhbmdlc1swXSkuY3JlYXRlRWxlbWVudChcImRpdlwiKSxjPTAsZD10aGlzLl9yYW5nZXMubGVuZ3RoO2Q+YzsrK2MpYi5hcHBlbmRDaGlsZCh0aGlzLl9yYW5nZXNbY10uY2xvbmVDb250ZW50cygpKTthPWIuaW5uZXJIVE1MfXJldHVybiBhfSxSLmdldE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIldyYXBwZWRTZWxlY3Rpb25cIn0sUi5pbnNwZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHIodGhpcyl9LFIuZGV0YWNoPWZ1bmN0aW9uKCl7dGhpcy53aW5bdl09bnVsbCx0aGlzLndpbj10aGlzLmFuY2hvck5vZGU9dGhpcy5mb2N1c05vZGU9bnVsbH0sby5pbnNwZWN0PXIsYS5TZWxlY3Rpb249byxhLnNlbGVjdGlvblByb3RvdHlwZT1SLGEuYWRkQ3JlYXRlTWlzc2luZ05hdGl2ZUFwaUxpc3RlbmVyKGZ1bmN0aW9uKGIpe1widW5kZWZpbmVkXCI9PXR5cGVvZiBiLmdldFNlbGVjdGlvbiYmKGIuZ2V0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGEuZ2V0U2VsZWN0aW9uKHRoaXMpfSksYj1udWxsfSl9KSwvKipcbiAqIEBsaWNlbnNlIFNlbGVjdGlvbiBzYXZlIGFuZCByZXN0b3JlIG1vZHVsZSBmb3IgUmFuZ3kuXG4gKiBTYXZlcyBhbmQgcmVzdG9yZXMgdXNlciBzZWxlY3Rpb25zIHVzaW5nIG1hcmtlciBpbnZpc2libGUgZWxlbWVudHMgaW4gdGhlIERPTS5cbiAqXG4gKiBQYXJ0IG9mIFJhbmd5LCBhIGNyb3NzLWJyb3dzZXIgSmF2YVNjcmlwdCByYW5nZSBhbmQgc2VsZWN0aW9uIGxpYnJhcnlcbiAqIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9yYW5neS9cbiAqXG4gKiBEZXBlbmRzIG9uIFJhbmd5IGNvcmUuXG4gKlxuICogQ29weXJpZ2h0IDIwMTIsIFRpbSBEb3duXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBWZXJzaW9uOiAxLjIuM1xuICogQnVpbGQgZGF0ZTogMjYgRmVicnVhcnkgMjAxMlxuICovXG5yYW5neS5jcmVhdGVNb2R1bGUoXCJTYXZlUmVzdG9yZVwiLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIpe3JldHVybihifHxkb2N1bWVudCkuZ2V0RWxlbWVudEJ5SWQoYSl9ZnVuY3Rpb24gZChhLGIpe3ZhciBjLGQ9XCJzZWxlY3Rpb25Cb3VuZGFyeV9cIisgK25ldyBEYXRlK1wiX1wiKyhcIlwiK01hdGgucmFuZG9tKCkpLnNsaWNlKDIpLGU9ay5nZXREb2N1bWVudChhLnN0YXJ0Q29udGFpbmVyKSxmPWEuY2xvbmVSYW5nZSgpO3JldHVybiBmLmNvbGxhcHNlKGIpLGM9ZS5jcmVhdGVFbGVtZW50KFwic3BhblwiKSxjLmlkPWQsYy5zdHlsZS5saW5lSGVpZ2h0PVwiMFwiLGMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixjLmNsYXNzTmFtZT1cInJhbmd5U2VsZWN0aW9uQm91bmRhcnlcIixjLmFwcGVuZENoaWxkKGUuY3JlYXRlVGV4dE5vZGUobCkpLGYuaW5zZXJ0Tm9kZShjKSxmLmRldGFjaCgpLGN9ZnVuY3Rpb24gZShhLGQsZSxmKXt2YXIgZz1jKGUsYSk7Zz8oZFtmP1wic2V0U3RhcnRCZWZvcmVcIjpcInNldEVuZEJlZm9yZVwiXShnKSxnLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZykpOmIud2FybihcIk1hcmtlciBlbGVtZW50IGhhcyBiZWVuIHJlbW92ZWQuIENhbm5vdCByZXN0b3JlIHNlbGVjdGlvbi5cIil9ZnVuY3Rpb24gZihhLGIpe3JldHVybiBiLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhhLlNUQVJUX1RPX1NUQVJULGEpfWZ1bmN0aW9uIGcoZSl7ZT1lfHx3aW5kb3c7dmFyIGc9ZS5kb2N1bWVudDtpZighYS5pc1NlbGVjdGlvblZhbGlkKGUpKXJldHVybiB2b2lkIGIud2FybihcIkNhbm5vdCBzYXZlIHNlbGVjdGlvbi4gVGhpcyB1c3VhbGx5IGhhcHBlbnMgd2hlbiB0aGUgc2VsZWN0aW9uIGlzIGNvbGxhcHNlZCBhbmQgdGhlIHNlbGVjdGlvbiBkb2N1bWVudCBoYXMgbG9zdCBmb2N1cy5cIik7dmFyIGgsaSxqLGs9YS5nZXRTZWxlY3Rpb24oZSksbD1rLmdldEFsbFJhbmdlcygpLG09W107bC5zb3J0KGYpO2Zvcih2YXIgbj0wLG89bC5sZW5ndGg7bz5uOysrbilqPWxbbl0sai5jb2xsYXBzZWQ/KGk9ZChqLCExKSxtLnB1c2goe21hcmtlcklkOmkuaWQsY29sbGFwc2VkOiEwfSkpOihpPWQoaiwhMSksaD1kKGosITApLG1bbl09e3N0YXJ0TWFya2VySWQ6aC5pZCxlbmRNYXJrZXJJZDppLmlkLGNvbGxhcHNlZDohMSxiYWNrd2FyZHM6MT09bC5sZW5ndGgmJmsuaXNCYWNrd2FyZHMoKX0pO2ZvcihuPW8tMTtuPj0wOy0tbilqPWxbbl0sai5jb2xsYXBzZWQ/ai5jb2xsYXBzZUJlZm9yZShjKG1bbl0ubWFya2VySWQsZykpOihqLnNldEVuZEJlZm9yZShjKG1bbl0uZW5kTWFya2VySWQsZykpLGouc2V0U3RhcnRBZnRlcihjKG1bbl0uc3RhcnRNYXJrZXJJZCxnKSkpO3JldHVybiBrLnNldFJhbmdlcyhsKSx7d2luOmUsZG9jOmcscmFuZ2VJbmZvczptLHJlc3RvcmVkOiExfX1mdW5jdGlvbiBoKGQsZil7aWYoIWQucmVzdG9yZWQpe2Zvcih2YXIgZyxoLGk9ZC5yYW5nZUluZm9zLGo9YS5nZXRTZWxlY3Rpb24oZC53aW4pLGs9W10sbD1pLmxlbmd0aCxtPWwtMTttPj0wOy0tbSl7aWYoZz1pW21dLGg9YS5jcmVhdGVSYW5nZShkLmRvYyksZy5jb2xsYXBzZWQpe3ZhciBuPWMoZy5tYXJrZXJJZCxkLmRvYyk7aWYobil7bi5zdHlsZS5kaXNwbGF5PVwiaW5saW5lXCI7dmFyIG89bi5wcmV2aW91c1NpYmxpbmc7byYmMz09by5ub2RlVHlwZT8obi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pLGguY29sbGFwc2VUb1BvaW50KG8sby5sZW5ndGgpKTooaC5jb2xsYXBzZUJlZm9yZShuKSxuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobikpfWVsc2UgYi53YXJuKFwiTWFya2VyIGVsZW1lbnQgaGFzIGJlZW4gcmVtb3ZlZC4gQ2Fubm90IHJlc3RvcmUgc2VsZWN0aW9uLlwiKX1lbHNlIGUoZC5kb2MsaCxnLnN0YXJ0TWFya2VySWQsITApLGUoZC5kb2MsaCxnLmVuZE1hcmtlcklkLCExKTsxPT1sJiZoLm5vcm1hbGl6ZUJvdW5kYXJpZXMoKSxrW21dPWh9MT09bCYmZiYmYS5mZWF0dXJlcy5zZWxlY3Rpb25IYXNFeHRlbmQmJmlbMF0uYmFja3dhcmRzPyhqLnJlbW92ZUFsbFJhbmdlcygpLGouYWRkUmFuZ2Uoa1swXSwhMCkpOmouc2V0UmFuZ2VzKGspLGQucmVzdG9yZWQ9ITB9fWZ1bmN0aW9uIGkoYSxiKXt2YXIgZD1jKGIsYSk7ZCYmZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGQpfWZ1bmN0aW9uIGooYSl7Zm9yKHZhciBiLGM9YS5yYW5nZUluZm9zLGQ9MCxlPWMubGVuZ3RoO2U+ZDsrK2QpYj1jW2RdLGIuY29sbGFwc2VkP2koYS5kb2MsYi5tYXJrZXJJZCk6KGkoYS5kb2MsYi5zdGFydE1hcmtlcklkKSxpKGEuZG9jLGIuZW5kTWFya2VySWQpKX1hLnJlcXVpcmVNb2R1bGVzKFtcIkRvbVV0aWxcIixcIkRvbVJhbmdlXCIsXCJXcmFwcGVkUmFuZ2VcIl0pO3ZhciBrPWEuZG9tLGw9XCLvu79cIjthLnNhdmVTZWxlY3Rpb249ZyxhLnJlc3RvcmVTZWxlY3Rpb249aCxhLnJlbW92ZU1hcmtlckVsZW1lbnQ9aSxhLnJlbW92ZU1hcmtlcnM9an0pfSh7fSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKTsiLCIhZnVuY3Rpb24oYSxiKXtiW1widHJ1ZVwiXT1hLC8qKlxuICogQGxpY2Vuc2UgQW5ndWxhckpTIHYxLjMuMTBcbiAqIChjKSAyMDEwLTIwMTQgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXG4gKiBMaWNlbnNlOiBNSVRcbiAqL1xuZnVuY3Rpb24oYSxiKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBjKCl7dGhpcy4kZ2V0PVtcIiQkc2FuaXRpemVVcmlcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9W107cmV0dXJuIGYoYixrKGMsZnVuY3Rpb24oYixjKXtyZXR1cm4hL151bnNhZmUvLnRlc3QoYShiLGMpKX0pKSxjLmpvaW4oXCJcIil9fV19ZnVuY3Rpb24gZChhKXt2YXIgYz1bXSxkPWsoYyxiLm5vb3ApO3JldHVybiBkLmNoYXJzKGEpLGMuam9pbihcIlwiKX1mdW5jdGlvbiBlKGEpe3ZhciBiLGM9e30sZD1hLnNwbGl0KFwiLFwiKTtmb3IoYj0wO2I8ZC5sZW5ndGg7YisrKWNbZFtiXV09ITA7cmV0dXJuIGN9ZnVuY3Rpb24gZihhLGMpe2Z1bmN0aW9uIGQoYSxkLGYsaCl7aWYoZD1iLmxvd2VyY2FzZShkKSxBW2RdKWZvcig7ay5sYXN0KCkmJkJbay5sYXN0KCldOyllKFwiXCIsay5sYXN0KCkpO3pbZF0mJmsubGFzdCgpPT1kJiZlKFwiXCIsZCksaD13W2RdfHwhIWgsaHx8ay5wdXNoKGQpO3ZhciBpPXt9O2YucmVwbGFjZShvLGZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Y3x8ZHx8ZXx8XCJcIjtpW2JdPWcoZil9KSxjLnN0YXJ0JiZjLnN0YXJ0KGQsaSxoKX1mdW5jdGlvbiBlKGEsZCl7dmFyIGUsZj0wO2lmKGQ9Yi5sb3dlcmNhc2UoZCkpZm9yKGY9ay5sZW5ndGgtMTtmPj0wJiZrW2ZdIT1kO2YtLSk7aWYoZj49MCl7Zm9yKGU9ay5sZW5ndGgtMTtlPj1mO2UtLSljLmVuZCYmYy5lbmQoa1tlXSk7ay5sZW5ndGg9Zn19XCJzdHJpbmdcIiE9dHlwZW9mIGEmJihhPW51bGw9PT1hfHxcInVuZGVmaW5lZFwiPT10eXBlb2YgYT9cIlwiOlwiXCIrYSk7dmFyIGYsaCxpLGosaz1bXSx1PWE7Zm9yKGsubGFzdD1mdW5jdGlvbigpe3JldHVybiBrW2subGVuZ3RoLTFdfTthOyl7aWYoaj1cIlwiLGg9ITAsay5sYXN0KCkmJkRbay5sYXN0KCldPyhhPWEucmVwbGFjZShuZXcgUmVnRXhwKFwiKFteXSopPFxcXFxzKlxcXFwvXFxcXHMqXCIray5sYXN0KCkrXCJbXj5dKj5cIixcImlcIiksZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj1iLnJlcGxhY2UocixcIiQxXCIpLnJlcGxhY2UodCxcIiQxXCIpLGMuY2hhcnMmJmMuY2hhcnMoZyhiKSksXCJcIn0pLGUoXCJcIixrLmxhc3QoKSkpOigwPT09YS5pbmRleE9mKFwiPCEtLVwiKT8oZj1hLmluZGV4T2YoXCItLVwiLDQpLGY+PTAmJmEubGFzdEluZGV4T2YoXCItLT5cIixmKT09PWYmJihjLmNvbW1lbnQmJmMuY29tbWVudChhLnN1YnN0cmluZyg0LGYpKSxhPWEuc3Vic3RyaW5nKGYrMyksaD0hMSkpOnMudGVzdChhKT8oaT1hLm1hdGNoKHMpLGkmJihhPWEucmVwbGFjZShpWzBdLFwiXCIpLGg9ITEpKTpxLnRlc3QoYSk/KGk9YS5tYXRjaChuKSxpJiYoYT1hLnN1YnN0cmluZyhpWzBdLmxlbmd0aCksaVswXS5yZXBsYWNlKG4sZSksaD0hMSkpOnAudGVzdChhKSYmKGk9YS5tYXRjaChtKSxpPyhpWzRdJiYoYT1hLnN1YnN0cmluZyhpWzBdLmxlbmd0aCksaVswXS5yZXBsYWNlKG0sZCkpLGg9ITEpOihqKz1cIjxcIixhPWEuc3Vic3RyaW5nKDEpKSksaCYmKGY9YS5pbmRleE9mKFwiPFwiKSxqKz0wPmY/YTphLnN1YnN0cmluZygwLGYpLGE9MD5mP1wiXCI6YS5zdWJzdHJpbmcoZiksYy5jaGFycyYmYy5jaGFycyhnKGopKSkpLGE9PXUpdGhyb3cgbChcImJhZHBhcnNlXCIsXCJUaGUgc2FuaXRpemVyIHdhcyB1bmFibGUgdG8gcGFyc2UgdGhlIGZvbGxvd2luZyBibG9jayBvZiBodG1sOiB7MH1cIixhKTt1PWF9ZSgpfWZ1bmN0aW9uIGcoYSl7aWYoIWEpcmV0dXJuXCJcIjt2YXIgYj1LLmV4ZWMoYSksYz1iWzFdLGQ9YlszXSxlPWJbMl07cmV0dXJuIGUmJihKLmlubmVySFRNTD1lLnJlcGxhY2UoLzwvZyxcIiZsdDtcIiksZT1cInRleHRDb250ZW50XCJpbiBKP0oudGV4dENvbnRlbnQ6Si5pbm5lclRleHQpLGMrZStkfWZ1bmN0aW9uIGgoYSl7cmV0dXJuIGEucmVwbGFjZSgvJi9nLFwiJmFtcDtcIikucmVwbGFjZSh1LGZ1bmN0aW9uKGEpe3ZhciBiPWEuY2hhckNvZGVBdCgwKSxjPWEuY2hhckNvZGVBdCgxKTtyZXR1cm5cIiYjXCIrKDEwMjQqKGItNTUyOTYpKyhjLTU2MzIwKSs2NTUzNikrXCI7XCJ9KS5yZXBsYWNlKHYsZnVuY3Rpb24oYSl7dmFyIGI9YS5jaGFyQ29kZUF0KDApO3JldHVybiAxNTk+PWJ8fDE3Mz09Ynx8Yj49MTUzNiYmMTU0MD49Ynx8MTgwNz09Ynx8NjA2OD09Ynx8NjA2OT09Ynx8Yj49ODIwNCYmODIwNz49Ynx8Yj49ODIzMiYmODIzOT49Ynx8Yj49ODI4OCYmODMwMz49Ynx8NjUyNzk9PWJ8fGI+PTY1NTIwJiY2NTUzNT49Yj9cIiYjXCIrYitcIjtcIjphfSkucmVwbGFjZSgvPC9nLFwiJmx0O1wiKS5yZXBsYWNlKC8+L2csXCImZ3Q7XCIpfWZ1bmN0aW9uIGkoYSl7dmFyIGM9XCJcIixkPWEuc3BsaXQoXCI7XCIpO3JldHVybiBiLmZvckVhY2goZCxmdW5jdGlvbihhKXt2YXIgZD1hLnNwbGl0KFwiOlwiKTtpZigyPT1kLmxlbmd0aCl7dmFyIGU9TChiLmxvd2VyY2FzZShkWzBdKSksYT1MKGIubG93ZXJjYXNlKGRbMV0pKTsoKFwiY29sb3JcIj09PWV8fFwiYmFja2dyb3VuZC1jb2xvclwiPT09ZSkmJihhLm1hdGNoKC9ecmdiXFwoWzAtOSUsXFwuIF0qXFwpJC9pKXx8YS5tYXRjaCgvXnJnYmFcXChbMC05JSxcXC4gXSpcXCkkL2kpfHxhLm1hdGNoKC9eaHNsXFwoWzAtOSUsXFwuIF0qXFwpJC9pKXx8YS5tYXRjaCgvXmhzbGFcXChbMC05JSxcXC4gXSpcXCkkL2kpfHxhLm1hdGNoKC9eI1swLTlhLWZdezMsNn0kL2kpfHxhLm1hdGNoKC9eW2Etel0qJC9pKSl8fFwidGV4dC1hbGlnblwiPT09ZSYmKFwibGVmdFwiPT09YXx8XCJyaWdodFwiPT09YXx8XCJjZW50ZXJcIj09PWF8fFwianVzdGlmeVwiPT09YSl8fFwiZmxvYXRcIj09PWUmJihcImxlZnRcIj09PWF8fFwicmlnaHRcIj09PWF8fFwibm9uZVwiPT09YSl8fChcIndpZHRoXCI9PT1lfHxcImhlaWdodFwiPT09ZSkmJmEubWF0Y2goL1swLTlcXC5dKihweHxlbXxyZW18JSkvKXx8XCJkaXJlY3Rpb25cIj09PWUmJmEubWF0Y2goL15sdHJ8cnRsfGluaXRpYWx8aW5oZXJpdCQvKSkmJihjKz1lK1wiOiBcIithK1wiO1wiKX19KSxjfWZ1bmN0aW9uIGooYSxiLGMsZCl7cmV0dXJuXCJpbWdcIj09PWEmJmJbXCJ0YS1pbnNlcnQtdmlkZW9cIl0mJihcInRhLWluc2VydC12aWRlb1wiPT09Y3x8XCJhbGxvd2Z1bGxzY3JlZW5cIj09PWN8fFwiZnJhbWVib3JkZXJcIj09PWN8fFwiY29udGVudGVkaXRhYmxlXCI9PT1jJiZcImZhbHNlXCI9PT1kKT8hMDohMX1mdW5jdGlvbiBrKGEsYyl7dmFyIGQ9ITEsZT1iLmJpbmQoYSxhLnB1c2gpO3JldHVybntzdGFydDpmdW5jdGlvbihhLGYsZyl7YT1iLmxvd2VyY2FzZShhKSwhZCYmRFthXSYmKGQ9YSksZHx8RVthXSE9PSEwfHwoZShcIjxcIiksZShhKSxiLmZvckVhY2goZixmdW5jdGlvbihkLGcpe3ZhciBrPWIubG93ZXJjYXNlKGcpLGw9XCJpbWdcIj09PWEmJlwic3JjXCI9PT1rfHxcImJhY2tncm91bmRcIj09PWs7KFwic3R5bGVcIj09PWsmJlwiXCIhPT0oZD1pKGQpKXx8aihhLGYsayxkKXx8SVtrXT09PSEwJiYoRltrXSE9PSEwfHxjKGQsbCkpKSYmKGUoXCIgXCIpLGUoZyksZSgnPVwiJyksZShoKGQpKSxlKCdcIicpKX0pLGUoZz9cIi8+XCI6XCI+XCIpKX0sZW5kOmZ1bmN0aW9uKGEpe2E9Yi5sb3dlcmNhc2UoYSksZHx8RVthXSE9PSEwfHwoZShcIjwvXCIpLGUoYSksZShcIj5cIikpLGE9PWQmJihkPSExKX0sY2hhcnM6ZnVuY3Rpb24oYSl7ZHx8ZShoKGEpKX19fXZhciBsPWIuJCRtaW5FcnIoXCIkc2FuaXRpemVcIiksbT0vXjwoKD86W2EtekEtWl0pW1xcdzotXSopKCg/OlxccytbXFx3Oi1dKyg/Olxccyo9XFxzKig/Oig/OlwiW15cIl0qXCIpfCg/OidbXiddKicpfFtePlxcc10rKSk/KSopXFxzKihcXC8/KVxccyooPj8pLyxuPS9ePFxcL1xccyooW1xcdzotXSspW14+XSo+LyxvPS8oW1xcdzotXSspKD86XFxzKj1cXHMqKD86KD86XCIoKD86W15cIl0pKilcIil8KD86JygoPzpbXiddKSopJyl8KFtePlxcc10rKSkpPy9nLHA9L148LyxxPS9ePFxcLy8scj0vPCEtLSguKj8pLS0+L2cscz0vPCFET0NUWVBFKFtePl0qPyk+L2ksdD0vPCFcXFtDREFUQVxcWyguKj8pXV0+L2csdT0vW1xcdUQ4MDAtXFx1REJGRl1bXFx1REMwMC1cXHVERkZGXS9nLHY9LyhbXlxcIy1+fCB8IV0pL2csdz1lKFwiYXJlYSxicixjb2wsaHIsaW1nLHdiclwiKSx4PWUoXCJjb2xncm91cCxkZCxkdCxsaSxwLHRib2R5LHRkLHRmb290LHRoLHRoZWFkLHRyXCIpLHk9ZShcInJwLHJ0XCIpLHo9Yi5leHRlbmQoe30seSx4KSxBPWIuZXh0ZW5kKHt9LHgsZShcImFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxibG9ja3F1b3RlLGNhcHRpb24sY2VudGVyLGRlbCxkaXIsZGl2LGRsLGZpZ3VyZSxmaWdjYXB0aW9uLGZvb3RlcixoMSxoMixoMyxoNCxoNSxoNixoZWFkZXIsaGdyb3VwLGhyLGlucyxtYXAsbWVudSxuYXYsb2wscHJlLHNjcmlwdCxzZWN0aW9uLHRhYmxlLHVsXCIpKSxCPWIuZXh0ZW5kKHt9LHksZShcImEsYWJicixhY3JvbnltLGIsYmRpLGJkbyxiaWcsYnIsY2l0ZSxjb2RlLGRlbCxkZm4sZW0sZm9udCxpLGltZyxpbnMsa2JkLGxhYmVsLG1hcCxtYXJrLHEscnVieSxycCxydCxzLHNhbXAsc21hbGwsc3BhbixzdHJpa2Usc3Ryb25nLHN1YixzdXAsdGltZSx0dCx1LHZhclwiKSksQz1lKFwiYW5pbWF0ZSxhbmltYXRlQ29sb3IsYW5pbWF0ZU1vdGlvbixhbmltYXRlVHJhbnNmb3JtLGNpcmNsZSxkZWZzLGRlc2MsZWxsaXBzZSxmb250LWZhY2UsZm9udC1mYWNlLW5hbWUsZm9udC1mYWNlLXNyYyxnLGdseXBoLGhrZXJuLGltYWdlLGxpbmVhckdyYWRpZW50LGxpbmUsbWFya2VyLG1ldGFkYXRhLG1pc3NpbmctZ2x5cGgsbXBhdGgscGF0aCxwb2x5Z29uLHBvbHlsaW5lLHJhZGlhbEdyYWRpZW50LHJlY3Qsc2V0LHN0b3Asc3ZnLHN3aXRjaCx0ZXh0LHRpdGxlLHRzcGFuLHVzZVwiKSxEPWUoXCJzY3JpcHQsc3R5bGVcIiksRT1iLmV4dGVuZCh7fSx3LEEsQix6LEMpLEY9ZShcImJhY2tncm91bmQsY2l0ZSxocmVmLGxvbmdkZXNjLHNyYyx1c2VtYXAseGxpbms6aHJlZlwiKSxHPWUoXCJhYmJyLGFsaWduLGFsdCxheGlzLGJnY29sb3IsYm9yZGVyLGNlbGxwYWRkaW5nLGNlbGxzcGFjaW5nLGNsYXNzLGNsZWFyLGNvbG9yLGNvbHMsY29sc3Bhbixjb21wYWN0LGNvb3JkcyxkaXIsZmFjZSxoZWFkZXJzLGhlaWdodCxocmVmbGFuZyxoc3BhY2UsaWQsaXNtYXAsbGFuZyxsYW5ndWFnZSxub2hyZWYsbm93cmFwLHJlbCxyZXYscm93cyxyb3dzcGFuLHJ1bGVzLHNjb3BlLHNjcm9sbGluZyxzaGFwZSxzaXplLHNwYW4sc3RhcnQsc3VtbWFyeSx0YXJnZXQsdGl0bGUsdHlwZSx2YWxpZ24sdmFsdWUsdnNwYWNlLHdpZHRoXCIpLEg9ZShcImFjY2VudC1oZWlnaHQsYWNjdW11bGF0ZSxhZGRpdGl2ZSxhbHBoYWJldGljLGFyYWJpYy1mb3JtLGFzY2VudCxhdHRyaWJ1dGVOYW1lLGF0dHJpYnV0ZVR5cGUsYmFzZVByb2ZpbGUsYmJveCxiZWdpbixieSxjYWxjTW9kZSxjYXAtaGVpZ2h0LGNsYXNzLGNvbG9yLGNvbG9yLXJlbmRlcmluZyxjb250ZW50LGN4LGN5LGQsZHgsZHksZGVzY2VudCxkaXNwbGF5LGR1cixlbmQsZmlsbCxmaWxsLXJ1bGUsZm9udC1mYW1pbHksZm9udC1zaXplLGZvbnQtc3RyZXRjaCxmb250LXN0eWxlLGZvbnQtdmFyaWFudCxmb250LXdlaWdodCxmcm9tLGZ4LGZ5LGcxLGcyLGdseXBoLW5hbWUsZ3JhZGllbnRVbml0cyxoYW5naW5nLGhlaWdodCxob3Jpei1hZHYteCxob3Jpei1vcmlnaW4teCxpZGVvZ3JhcGhpYyxrLGtleVBvaW50cyxrZXlTcGxpbmVzLGtleVRpbWVzLGxhbmcsbWFya2VyLWVuZCxtYXJrZXItbWlkLG1hcmtlci1zdGFydCxtYXJrZXJIZWlnaHQsbWFya2VyVW5pdHMsbWFya2VyV2lkdGgsbWF0aGVtYXRpY2FsLG1heCxtaW4sb2Zmc2V0LG9wYWNpdHksb3JpZW50LG9yaWdpbixvdmVybGluZS1wb3NpdGlvbixvdmVybGluZS10aGlja25lc3MscGFub3NlLTEscGF0aCxwYXRoTGVuZ3RoLHBvaW50cyxwcmVzZXJ2ZUFzcGVjdFJhdGlvLHIscmVmWCxyZWZZLHJlcGVhdENvdW50LHJlcGVhdER1cixyZXF1aXJlZEV4dGVuc2lvbnMscmVxdWlyZWRGZWF0dXJlcyxyZXN0YXJ0LHJvdGF0ZSxyeCxyeSxzbG9wZSxzdGVtaCxzdGVtdixzdG9wLWNvbG9yLHN0b3Atb3BhY2l0eSxzdHJpa2V0aHJvdWdoLXBvc2l0aW9uLHN0cmlrZXRocm91Z2gtdGhpY2tuZXNzLHN0cm9rZSxzdHJva2UtZGFzaGFycmF5LHN0cm9rZS1kYXNob2Zmc2V0LHN0cm9rZS1saW5lY2FwLHN0cm9rZS1saW5lam9pbixzdHJva2UtbWl0ZXJsaW1pdCxzdHJva2Utb3BhY2l0eSxzdHJva2Utd2lkdGgsc3lzdGVtTGFuZ3VhZ2UsdGFyZ2V0LHRleHQtYW5jaG9yLHRvLHRyYW5zZm9ybSx0eXBlLHUxLHUyLHVuZGVybGluZS1wb3NpdGlvbix1bmRlcmxpbmUtdGhpY2tuZXNzLHVuaWNvZGUsdW5pY29kZS1yYW5nZSx1bml0cy1wZXItZW0sdmFsdWVzLHZlcnNpb24sdmlld0JveCx2aXNpYmlsaXR5LHdpZHRoLHdpZHRocyx4LHgtaGVpZ2h0LHgxLHgyLHhsaW5rOmFjdHVhdGUseGxpbms6YXJjcm9sZSx4bGluazpyb2xlLHhsaW5rOnNob3cseGxpbms6dGl0bGUseGxpbms6dHlwZSx4bWw6YmFzZSx4bWw6bGFuZyx4bWw6c3BhY2UseG1sbnMseG1sbnM6eGxpbmsseSx5MSx5Mix6b29tQW5kUGFuXCIpLEk9Yi5leHRlbmQoe30sRixILEcpLEo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKSxLPS9eKFxccyopKFtcXHNcXFNdKj8pKFxccyopJC8sTD1mdW5jdGlvbigpe3JldHVybiBTdHJpbmcucHJvdG90eXBlLnRyaW0/ZnVuY3Rpb24oYSl7cmV0dXJuIGIuaXNTdHJpbmcoYSk/YS50cmltKCk6YX06ZnVuY3Rpb24oYSl7cmV0dXJuIGIuaXNTdHJpbmcoYSk/YS5yZXBsYWNlKC9eXFxzXFxzKi8sXCJcIikucmVwbGFjZSgvXFxzXFxzKiQvLFwiXCIpOmF9fSgpO2IubW9kdWxlKFwibmdTYW5pdGl6ZVwiLFtdKS5wcm92aWRlcihcIiRzYW5pdGl6ZVwiLGMpLGIubW9kdWxlKFwibmdTYW5pdGl6ZVwiKS5maWx0ZXIoXCJsaW5reVwiLFtcIiRzYW5pdGl6ZVwiLGZ1bmN0aW9uKGEpe3ZhciBjPS8oKGZ0cHxodHRwcz8pOlxcL1xcL3wod3d3XFwuKXwobWFpbHRvOik/W0EtWmEtejAtOS5fJSstXStAKVxcUypbXlxccy47LCgpe308Plwi4oCd4oCZXS8sZT0vXm1haWx0bzovO3JldHVybiBmdW5jdGlvbihmLGcpe2Z1bmN0aW9uIGgoYSl7YSYmbi5wdXNoKGQoYSkpfWZ1bmN0aW9uIGkoYSxjKXtuLnB1c2goXCI8YSBcIiksYi5pc0RlZmluZWQoZykmJm4ucHVzaCgndGFyZ2V0PVwiJyxnLCdcIiAnKSxuLnB1c2goJ2hyZWY9XCInLGEucmVwbGFjZSgvXCIvZyxcIiZxdW90O1wiKSwnXCI+JyksaChjKSxuLnB1c2goXCI8L2E+XCIpfWlmKCFmKXJldHVybiBmO2Zvcih2YXIgaixrLGwsbT1mLG49W107aj1tLm1hdGNoKGMpOylrPWpbMF0salsyXXx8als0XXx8KGs9KGpbM10/XCJodHRwOi8vXCI6XCJtYWlsdG86XCIpK2spLGw9ai5pbmRleCxoKG0uc3Vic3RyKDAsbCkpLGkoayxqWzBdLnJlcGxhY2UoZSxcIlwiKSksbT1tLnN1YnN0cmluZyhsK2pbMF0ubGVuZ3RoKTtyZXR1cm4gaChtKSxhKG4uam9pbihcIlwiKSl9fV0pfSh3aW5kb3csd2luZG93LmFuZ3VsYXIpfSh7fSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKTsiLCIhZnVuY3Rpb24oYSxiKXtiW1widHJ1ZVwiXT1hLC8qXG5AbGljZW5zZSB0ZXh0QW5ndWxhclxuQXV0aG9yIDogQXVzdGluIEFuZGVyc29uXG5MaWNlbnNlIDogMjAxMyBNSVRcblZlcnNpb24gMS4zLjdcblxuU2VlIFJFQURNRS5tZCBvciBodHRwczovL2dpdGh1Yi5jb20vZnJheXdpbmcvdGV4dEFuZ3VsYXIvd2lraSBmb3IgcmVxdWlyZW1lbnRzIGFuZCB1c2UuXG4qL1xuYW5ndWxhci5tb2R1bGUoXCJ0ZXh0QW5ndWxhclNldHVwXCIsW10pLnZhbHVlKFwidGFPcHRpb25zXCIse3Rvb2xiYXI6W1tcImgxXCIsXCJoMlwiLFwiaDNcIixcImg0XCIsXCJoNVwiLFwiaDZcIixcInBcIixcInByZVwiLFwicXVvdGVcIl0sW1wiYm9sZFwiLFwiaXRhbGljc1wiLFwidW5kZXJsaW5lXCIsXCJzdHJpa2VUaHJvdWdoXCIsXCJ1bFwiLFwib2xcIixcInJlZG9cIixcInVuZG9cIixcImNsZWFyXCJdLFtcImp1c3RpZnlMZWZ0XCIsXCJqdXN0aWZ5Q2VudGVyXCIsXCJqdXN0aWZ5UmlnaHRcIixcImluZGVudFwiLFwib3V0ZGVudFwiXSxbXCJodG1sXCIsXCJpbnNlcnRJbWFnZVwiLFwiaW5zZXJ0TGlua1wiLFwiaW5zZXJ0VmlkZW9cIixcIndvcmRjb3VudFwiLFwiY2hhcmNvdW50XCJdXSxjbGFzc2VzOntmb2N1c3NlZDpcImZvY3Vzc2VkXCIsdG9vbGJhcjpcImJ0bi10b29sYmFyXCIsdG9vbGJhckdyb3VwOlwiYnRuLWdyb3VwXCIsdG9vbGJhckJ1dHRvbjpcImJ0biBidG4tZGVmYXVsdFwiLHRvb2xiYXJCdXR0b25BY3RpdmU6XCJhY3RpdmVcIixkaXNhYmxlZDpcImRpc2FibGVkXCIsdGV4dEVkaXRvcjpcImZvcm0tY29udHJvbFwiLGh0bWxFZGl0b3I6XCJmb3JtLWNvbnRyb2xcIn0sc2V0dXA6e3RleHRFZGl0b3JTZXR1cDpmdW5jdGlvbigpe30saHRtbEVkaXRvclNldHVwOmZ1bmN0aW9uKCl7fX0sZGVmYXVsdEZpbGVEcm9wSGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBGaWxlUmVhZGVyO3JldHVyblwiaW1hZ2VcIj09PWEudHlwZS5zdWJzdHJpbmcoMCw1KT8oYy5vbmxvYWQ9ZnVuY3Rpb24oKXtcIlwiIT09Yy5yZXN1bHQmJmIoXCJpbnNlcnRJbWFnZVwiLGMucmVzdWx0LCEwKX0sYy5yZWFkQXNEYXRhVVJMKGEpLCEwKTohMX19KS52YWx1ZShcInRhU2VsZWN0YWJsZUVsZW1lbnRzXCIsW1wiYVwiLFwiaW1nXCJdKS52YWx1ZShcInRhQ3VzdG9tUmVuZGVyZXJzXCIsW3tzZWxlY3RvcjpcImltZ1wiLGN1c3RvbUF0dHJpYnV0ZTpcInRhLWluc2VydC12aWRlb1wiLHJlbmRlckxvZ2ljOmZ1bmN0aW9uKGEpe3ZhciBiPWFuZ3VsYXIuZWxlbWVudChcIjxpZnJhbWU+PC9pZnJhbWU+XCIpLGM9YS5wcm9wKFwiYXR0cmlidXRlc1wiKTthbmd1bGFyLmZvckVhY2goYyxmdW5jdGlvbihhKXtiLmF0dHIoYS5uYW1lLGEudmFsdWUpfSksYi5hdHRyKFwic3JjXCIsYi5hdHRyKFwidGEtaW5zZXJ0LXZpZGVvXCIpKSxhLnJlcGxhY2VXaXRoKGIpfX1dKS52YWx1ZShcInRhVHJhbnNsYXRpb25zXCIse2h0bWw6e3Rvb2x0aXA6XCJUb2dnbGUgaHRtbCAvIFJpY2ggVGV4dFwifSxoZWFkaW5nOnt0b29sdGlwOlwiSGVhZGluZyBcIn0scDp7dG9vbHRpcDpcIlBhcmFncmFwaFwifSxwcmU6e3Rvb2x0aXA6XCJQcmVmb3JtYXR0ZWQgdGV4dFwifSx1bDp7dG9vbHRpcDpcIlVub3JkZXJlZCBMaXN0XCJ9LG9sOnt0b29sdGlwOlwiT3JkZXJlZCBMaXN0XCJ9LHF1b3RlOnt0b29sdGlwOlwiUXVvdGUvdW5xb3V0ZSBzZWxlY3Rpb24gb3IgcGFyYWdyYXBoXCJ9LHVuZG86e3Rvb2x0aXA6XCJVbmRvXCJ9LHJlZG86e3Rvb2x0aXA6XCJSZWRvXCJ9LGJvbGQ6e3Rvb2x0aXA6XCJCb2xkXCJ9LGl0YWxpYzp7dG9vbHRpcDpcIkl0YWxpY1wifSx1bmRlcmxpbmU6e3Rvb2x0aXA6XCJVbmRlcmxpbmVcIn0sc3RyaWtlVGhyb3VnaDp7dG9vbHRpcDpcIlN0cmlrZXRocm91Z2hcIn0sanVzdGlmeUxlZnQ6e3Rvb2x0aXA6XCJBbGlnbiB0ZXh0IGxlZnRcIn0sanVzdGlmeVJpZ2h0Ont0b29sdGlwOlwiQWxpZ24gdGV4dCByaWdodFwifSxqdXN0aWZ5Q2VudGVyOnt0b29sdGlwOlwiQ2VudGVyXCJ9LGluZGVudDp7dG9vbHRpcDpcIkluY3JlYXNlIGluZGVudFwifSxvdXRkZW50Ont0b29sdGlwOlwiRGVjcmVhc2UgaW5kZW50XCJ9LGNsZWFyOnt0b29sdGlwOlwiQ2xlYXIgZm9ybWF0dGluZ1wifSxpbnNlcnRJbWFnZTp7ZGlhbG9nUHJvbXB0OlwiUGxlYXNlIGVudGVyIGFuIGltYWdlIFVSTCB0byBpbnNlcnRcIix0b29sdGlwOlwiSW5zZXJ0IGltYWdlXCIsaG90a2V5OlwidGhlIC0gcG9zc2libHkgbGFuZ3VhZ2UgZGVwZW5kZW50IGhvdGtleSAuLi4gZm9yIHNvbWUgZnV0dXJlIGltcGxlbWVudGF0aW9uXCJ9LGluc2VydFZpZGVvOnt0b29sdGlwOlwiSW5zZXJ0IHZpZGVvXCIsZGlhbG9nUHJvbXB0OlwiUGxlYXNlIGVudGVyIGEgeW91dHViZSBVUkwgdG8gZW1iZWRcIn0saW5zZXJ0TGluazp7dG9vbHRpcDpcIkluc2VydCAvIGVkaXQgbGlua1wiLGRpYWxvZ1Byb21wdDpcIlBsZWFzZSBlbnRlciBhIFVSTCB0byBpbnNlcnRcIn0sZWRpdExpbms6e3JlTGlua0J1dHRvbjp7dG9vbHRpcDpcIlJlbGlua1wifSx1bkxpbmtCdXR0b246e3Rvb2x0aXA6XCJVbmxpbmtcIn0sdGFyZ2V0VG9nZ2xlOntidXR0b250ZXh0OlwiT3BlbiBpbiBOZXcgV2luZG93XCJ9fSx3b3JkY291bnQ6e3Rvb2x0aXA6XCJEaXNwbGF5IHdvcmRzIENvdW50XCJ9LGNoYXJjb3VudDp7dG9vbHRpcDpcIkRpc3BsYXkgY2hhcmFjdGVycyBDb3VudFwifX0pLnJ1bihbXCJ0YVJlZ2lzdGVyVG9vbFwiLFwiJHdpbmRvd1wiLFwidGFUcmFuc2xhdGlvbnNcIixcInRhU2VsZWN0aW9uXCIsZnVuY3Rpb24oYSxiLGMsZCl7YShcImh0bWxcIix7aWNvbmNsYXNzOlwiZmEgZmEtY29kZVwiLHRvb2x0aXB0ZXh0OmMuaHRtbC50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3RoaXMuJGVkaXRvcigpLnN3aXRjaFZpZXcoKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkuc2hvd0h0bWx9fSk7dmFyIGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLnF1ZXJ5Rm9ybWF0QmxvY2tTdGF0ZShhKX19LGY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImZvcm1hdEJsb2NrXCIsXCI8XCIrdGhpcy5uYW1lLnRvVXBwZXJDYXNlKCkrXCI+XCIpfTthbmd1bGFyLmZvckVhY2goW1wiaDFcIixcImgyXCIsXCJoM1wiLFwiaDRcIixcImg1XCIsXCJoNlwiXSxmdW5jdGlvbihiKXthKGIudG9Mb3dlckNhc2UoKSx7YnV0dG9udGV4dDpiLnRvVXBwZXJDYXNlKCksdG9vbHRpcHRleHQ6Yy5oZWFkaW5nLnRvb2x0aXArYi5jaGFyQXQoMSksYWN0aW9uOmYsYWN0aXZlU3RhdGU6ZShiLnRvTG93ZXJDYXNlKCkpfSl9KSxhKFwicFwiLHtidXR0b250ZXh0OlwiUFwiLHRvb2x0aXB0ZXh0OmMucC50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiZm9ybWF0QmxvY2tcIixcIjxQPlwiKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkucXVlcnlGb3JtYXRCbG9ja1N0YXRlKFwicFwiKX19KSxhKFwicHJlXCIse2J1dHRvbnRleHQ6XCJwcmVcIix0b29sdGlwdGV4dDpjLnByZS50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiZm9ybWF0QmxvY2tcIixcIjxQUkU+XCIpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS5xdWVyeUZvcm1hdEJsb2NrU3RhdGUoXCJwcmVcIil9fSksYShcInVsXCIse2ljb25jbGFzczpcImZhIGZhLWxpc3QtdWxcIix0b29sdGlwdGV4dDpjLnVsLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJpbnNlcnRVbm9yZGVyZWRMaXN0XCIsbnVsbCl9LGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLnF1ZXJ5Q29tbWFuZFN0YXRlKFwiaW5zZXJ0VW5vcmRlcmVkTGlzdFwiKX19KSxhKFwib2xcIix7aWNvbmNsYXNzOlwiZmEgZmEtbGlzdC1vbFwiLHRvb2x0aXB0ZXh0OmMub2wudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImluc2VydE9yZGVyZWRMaXN0XCIsbnVsbCl9LGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLnF1ZXJ5Q29tbWFuZFN0YXRlKFwiaW5zZXJ0T3JkZXJlZExpc3RcIil9fSksYShcInF1b3RlXCIse2ljb25jbGFzczpcImZhIGZhLXF1b3RlLXJpZ2h0XCIsdG9vbHRpcHRleHQ6Yy5xdW90ZS50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiZm9ybWF0QmxvY2tcIixcIjxCTE9DS1FVT1RFPlwiKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkucXVlcnlGb3JtYXRCbG9ja1N0YXRlKFwiYmxvY2txdW90ZVwiKX19KSxhKFwidW5kb1wiLHtpY29uY2xhc3M6XCJmYSBmYS11bmRvXCIsdG9vbHRpcHRleHQ6Yy51bmRvLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJ1bmRvXCIsbnVsbCl9fSksYShcInJlZG9cIix7aWNvbmNsYXNzOlwiZmEgZmEtcmVwZWF0XCIsdG9vbHRpcHRleHQ6Yy5yZWRvLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJyZWRvXCIsbnVsbCl9fSksYShcImJvbGRcIix7aWNvbmNsYXNzOlwiZmEgZmEtYm9sZFwiLHRvb2x0aXB0ZXh0OmMuYm9sZC50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiYm9sZFwiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS5xdWVyeUNvbW1hbmRTdGF0ZShcImJvbGRcIil9LGNvbW1hbmRLZXlDb2RlOjk4fSksYShcImp1c3RpZnlMZWZ0XCIse2ljb25jbGFzczpcImZhIGZhLWFsaWduLWxlZnRcIix0b29sdGlwdGV4dDpjLmp1c3RpZnlMZWZ0LnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJqdXN0aWZ5TGVmdFwiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbihhKXt2YXIgYj0hMTtyZXR1cm4gYSYmKGI9XCJsZWZ0XCI9PT1hLmNzcyhcInRleHQtYWxpZ25cIil8fFwibGVmdFwiPT09YS5hdHRyKFwiYWxpZ25cIil8fFwicmlnaHRcIiE9PWEuY3NzKFwidGV4dC1hbGlnblwiKSYmXCJjZW50ZXJcIiE9PWEuY3NzKFwidGV4dC1hbGlnblwiKSYmXCJqdXN0aWZ5XCIhPT1hLmNzcyhcInRleHQtYWxpZ25cIikmJiF0aGlzLiRlZGl0b3IoKS5xdWVyeUNvbW1hbmRTdGF0ZShcImp1c3RpZnlSaWdodFwiKSYmIXRoaXMuJGVkaXRvcigpLnF1ZXJ5Q29tbWFuZFN0YXRlKFwianVzdGlmeUNlbnRlclwiKSYmIXRoaXMuJGVkaXRvcigpLnF1ZXJ5Q29tbWFuZFN0YXRlKFwianVzdGlmeUZ1bGxcIikpLGI9Ynx8dGhpcy4kZWRpdG9yKCkucXVlcnlDb21tYW5kU3RhdGUoXCJqdXN0aWZ5TGVmdFwiKX19KSxhKFwianVzdGlmeVJpZ2h0XCIse2ljb25jbGFzczpcImZhIGZhLWFsaWduLXJpZ2h0XCIsdG9vbHRpcHRleHQ6Yy5qdXN0aWZ5UmlnaHQudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImp1c3RpZnlSaWdodFwiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbihhKXt2YXIgYj0hMTtyZXR1cm4gYSYmKGI9XCJyaWdodFwiPT09YS5jc3MoXCJ0ZXh0LWFsaWduXCIpKSxiPWJ8fHRoaXMuJGVkaXRvcigpLnF1ZXJ5Q29tbWFuZFN0YXRlKFwianVzdGlmeVJpZ2h0XCIpfX0pLGEoXCJqdXN0aWZ5Q2VudGVyXCIse2ljb25jbGFzczpcImZhIGZhLWFsaWduLWNlbnRlclwiLHRvb2x0aXB0ZXh0OmMuanVzdGlmeUNlbnRlci50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwianVzdGlmeUNlbnRlclwiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbihhKXt2YXIgYj0hMTtyZXR1cm4gYSYmKGI9XCJjZW50ZXJcIj09PWEuY3NzKFwidGV4dC1hbGlnblwiKSksYj1ifHx0aGlzLiRlZGl0b3IoKS5xdWVyeUNvbW1hbmRTdGF0ZShcImp1c3RpZnlDZW50ZXJcIil9fSksYShcImluZGVudFwiLHtpY29uY2xhc3M6XCJmYSBmYS1pbmRlbnRcIix0b29sdGlwdGV4dDpjLmluZGVudC50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiaW5kZW50XCIsbnVsbCl9LGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLnF1ZXJ5Rm9ybWF0QmxvY2tTdGF0ZShcImJsb2NrcXVvdGVcIil9fSksYShcIm91dGRlbnRcIix7aWNvbmNsYXNzOlwiZmEgZmEtb3V0ZGVudFwiLHRvb2x0aXB0ZXh0OmMub3V0ZGVudC50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwib3V0ZGVudFwiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiExfX0pLGEoXCJpdGFsaWNzXCIse2ljb25jbGFzczpcImZhIGZhLWl0YWxpY1wiLHRvb2x0aXB0ZXh0OmMuaXRhbGljLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJpdGFsaWNcIixudWxsKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkucXVlcnlDb21tYW5kU3RhdGUoXCJpdGFsaWNcIil9LGNvbW1hbmRLZXlDb2RlOjEwNX0pLGEoXCJ1bmRlcmxpbmVcIix7aWNvbmNsYXNzOlwiZmEgZmEtdW5kZXJsaW5lXCIsdG9vbHRpcHRleHQ6Yy51bmRlcmxpbmUudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcInVuZGVybGluZVwiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS5xdWVyeUNvbW1hbmRTdGF0ZShcInVuZGVybGluZVwiKX0sY29tbWFuZEtleUNvZGU6MTE3fSksYShcInN0cmlrZVRocm91Z2hcIix7aWNvbmNsYXNzOlwiZmEgZmEtc3RyaWtldGhyb3VnaFwiLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwic3RyaWtlVGhyb3VnaFwiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZShcInN0cmlrZVRocm91Z2hcIil9fSksYShcImNsZWFyXCIse2ljb25jbGFzczpcImZhIGZhLWJhblwiLHRvb2x0aXB0ZXh0OmMuY2xlYXIudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oYSxiKXt2YXIgYzt0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwicmVtb3ZlRm9ybWF0XCIsbnVsbCk7dmFyIGU9YW5ndWxhci5lbGVtZW50KGQuZ2V0U2VsZWN0aW9uRWxlbWVudCgpKSxmPWZ1bmN0aW9uKGEpe2E9YW5ndWxhci5lbGVtZW50KGEpO3ZhciBiPWE7YW5ndWxhci5mb3JFYWNoKGEuY2hpbGRyZW4oKSxmdW5jdGlvbihhKXt2YXIgYz1hbmd1bGFyLmVsZW1lbnQoXCI8cD48L3A+XCIpO2MuaHRtbChhbmd1bGFyLmVsZW1lbnQoYSkuaHRtbCgpKSxiLmFmdGVyKGMpLGI9Y30pLGEucmVtb3ZlKCl9O2lmKGFuZ3VsYXIuZm9yRWFjaChlLmZpbmQoXCJ1bFwiKSxmKSxhbmd1bGFyLmZvckVhY2goZS5maW5kKFwib2xcIiksZiksXCJsaVwiPT09ZVswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpe3ZhciBnPWVbMF0ucGFyZW50Tm9kZS5jaGlsZE5vZGVzLGg9W10saT1bXSxqPSExO2ZvcihjPTA7YzxnLmxlbmd0aDtjKyspZ1tjXT09PWVbMF0/aj0hMDpqP2kucHVzaChnW2NdKTpoLnB1c2goZ1tjXSk7dmFyIGs9YW5ndWxhci5lbGVtZW50KGVbMF0ucGFyZW50Tm9kZSksbD1hbmd1bGFyLmVsZW1lbnQoXCI8cD48L3A+XCIpO2lmKGwuaHRtbChhbmd1bGFyLmVsZW1lbnQoZVswXSkuaHRtbCgpKSwwPT09aC5sZW5ndGh8fDA9PT1pLmxlbmd0aCkwPT09aS5sZW5ndGg/ay5hZnRlcihsKTprWzBdLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGxbMF0sa1swXSksMD09PWgubGVuZ3RoJiYwPT09aS5sZW5ndGg/ay5yZW1vdmUoKTphbmd1bGFyLmVsZW1lbnQoZVswXSkucmVtb3ZlKCk7ZWxzZXt2YXIgbT1hbmd1bGFyLmVsZW1lbnQoXCI8XCIra1swXS50YWdOYW1lK1wiPjwvXCIra1swXS50YWdOYW1lK1wiPlwiKSxuPWFuZ3VsYXIuZWxlbWVudChcIjxcIitrWzBdLnRhZ05hbWUrXCI+PC9cIitrWzBdLnRhZ05hbWUrXCI+XCIpO2ZvcihjPTA7YzxoLmxlbmd0aDtjKyspbS5hcHBlbmQoYW5ndWxhci5lbGVtZW50KGhbY10pKTtmb3IoYz0wO2M8aS5sZW5ndGg7YysrKW4uYXBwZW5kKGFuZ3VsYXIuZWxlbWVudChpW2NdKSk7ay5hZnRlcihuKSxrLmFmdGVyKGwpLGsuYWZ0ZXIobSksay5yZW1vdmUoKX1kLnNldFNlbGVjdGlvblRvRWxlbWVudEVuZChsWzBdKX12YXIgbz10aGlzLiRlZGl0b3IoKSxwPWZ1bmN0aW9uKGEpe2E9YW5ndWxhci5lbGVtZW50KGEpLGFbMF0hPT1vLmRpc3BsYXlFbGVtZW50cy50ZXh0WzBdJiZhLnJlbW92ZUF0dHIoXCJjbGFzc1wiKSxhbmd1bGFyLmZvckVhY2goYS5jaGlsZHJlbigpLHApfTthbmd1bGFyLmZvckVhY2goZSxwKSxcImxpXCIhPT1lWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmXCJvbFwiIT09ZVswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJlwidWxcIiE9PWVbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpJiZ0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiZm9ybWF0QmxvY2tcIixcImRlZmF1bHRcIiksYigpfX0pO3ZhciBnPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbigpe2MudXBkYXRlVGFCaW5kdGFUZXh0RWxlbWVudCgpLGMuaGlkZVBvcG92ZXIoKX07YS5wcmV2ZW50RGVmYXVsdCgpLGMuZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIuY3NzKFwid2lkdGhcIixcIjM3NXB4XCIpO3ZhciBlPWMuZGlzcGxheUVsZW1lbnRzLnBvcG92ZXJDb250YWluZXI7ZS5lbXB0eSgpO3ZhciBmPWFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cImJ0bi1ncm91cFwiIHN0eWxlPVwicGFkZGluZy1yaWdodDogNnB4O1wiPicpLGc9YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0YWJpbmRleD1cIi0xXCI+MTAwJSA8L2J1dHRvbj4nKTtnLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksYi5jc3Moe3dpZHRoOlwiMTAwJVwiLGhlaWdodDpcIlwifSksZCgpfSk7dmFyIGg9YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0YWJpbmRleD1cIi0xXCI+NTAlIDwvYnV0dG9uPicpO2gub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxiLmNzcyh7d2lkdGg6XCI1MCVcIixoZWlnaHQ6XCJcIn0pLGQoKX0pO3ZhciBpPWFuZ3VsYXIuZWxlbWVudCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIGJ0bi1zbWFsbFwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgdGFiaW5kZXg9XCItMVwiPjI1JSA8L2J1dHRvbj4nKTtpLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksYi5jc3Moe3dpZHRoOlwiMjUlXCIsaGVpZ2h0OlwiXCJ9KSxkKCl9KTt2YXIgaj1hbmd1bGFyLmVsZW1lbnQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBidG4tc21hbGxcIiB1bnNlbGVjdGFibGU9XCJvblwiIHRhYmluZGV4PVwiLTFcIj5SZXNldDwvYnV0dG9uPicpO2oub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxiLmNzcyh7d2lkdGg6XCJcIixoZWlnaHQ6XCJcIn0pLGQoKX0pLGYuYXBwZW5kKGcpLGYuYXBwZW5kKGgpLGYuYXBwZW5kKGkpLGYuYXBwZW5kKGopLGUuYXBwZW5kKGYpLGY9YW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwXCIgc3R5bGU9XCJwYWRkaW5nLXJpZ2h0OiA2cHg7XCI+Jyk7dmFyIGs9YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJmYSBmYS1hbGlnbi1sZWZ0XCI+PC9pPjwvYnV0dG9uPicpO2sub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxiLmNzcyhcImZsb2F0XCIsXCJsZWZ0XCIpLGIuY3NzKFwiY3NzRmxvYXRcIixcImxlZnRcIiksYi5jc3MoXCJzdHlsZUZsb2F0XCIsXCJsZWZ0XCIpLGQoKX0pO3ZhciBsPWFuZ3VsYXIuZWxlbWVudCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIGJ0bi1zbWFsbFwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZmEgZmEtYWxpZ24tcmlnaHRcIj48L2k+PC9idXR0b24+Jyk7bC5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpLGIuY3NzKFwiZmxvYXRcIixcInJpZ2h0XCIpLGIuY3NzKFwiY3NzRmxvYXRcIixcInJpZ2h0XCIpLGIuY3NzKFwic3R5bGVGbG9hdFwiLFwicmlnaHRcIiksZCgpfSk7dmFyIG09YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJmYSBmYS1hbGlnbi1qdXN0aWZ5XCI+PC9pPjwvYnV0dG9uPicpO20ub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxiLmNzcyhcImZsb2F0XCIsXCJcIiksYi5jc3MoXCJjc3NGbG9hdFwiLFwiXCIpLGIuY3NzKFwic3R5bGVGbG9hdFwiLFwiXCIpLGQoKX0pLGYuYXBwZW5kKGspLGYuYXBwZW5kKG0pLGYuYXBwZW5kKGwpLGUuYXBwZW5kKGYpLGY9YW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwXCI+Jyk7dmFyIG49YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJmYSBmYS10cmFzaC1vXCI+PC9pPjwvYnV0dG9uPicpO24ub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxiLnJlbW92ZSgpLGQoKX0pLGYuYXBwZW5kKG4pLGUuYXBwZW5kKGYpLGMuc2hvd1BvcG92ZXIoYiksYy5zaG93UmVzaXplT3ZlcmxheShiKX07YShcImluc2VydEltYWdlXCIse2ljb25jbGFzczpcImZhIGZhLXBpY3R1cmUtb1wiLHRvb2x0aXB0ZXh0OmMuaW5zZXJ0SW1hZ2UudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gYT1iLnByb21wdChjLmluc2VydEltYWdlLmRpYWxvZ1Byb21wdCxcImh0dHA6Ly9cIiksYSYmXCJcIiE9PWEmJlwiaHR0cDovL1wiIT09YT90aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiaW5zZXJ0SW1hZ2VcIixhLCEwKTp2b2lkIDB9LG9uRWxlbWVudFNlbGVjdDp7ZWxlbWVudDpcImltZ1wiLGFjdGlvbjpnfX0pLGEoXCJpbnNlcnRWaWRlb1wiLHtpY29uY2xhc3M6XCJmYSBmYS15b3V0dWJlLXBsYXlcIix0b29sdGlwdGV4dDpjLmluc2VydFZpZGVvLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGE7aWYoYT1iLnByb21wdChjLmluc2VydFZpZGVvLmRpYWxvZ1Byb21wdCxcImh0dHBzOi8vXCIpLGEmJlwiXCIhPT1hJiZcImh0dHBzOi8vXCIhPT1hKXt2YXIgZD1hLm1hdGNoKC8oXFw/fCYpdj1bXiZdKi8pO2lmKGQmJmQubGVuZ3RoPjApe3ZhciBlPVwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvXCIrZFswXS5zdWJzdHJpbmcoMyksZj0nPGltZyBjbGFzcz1cInRhLWluc2VydC12aWRlb1wiIHNyYz1cImh0dHBzOi8vaW1nLnlvdXR1YmUuY29tL3ZpLycrZFswXS5zdWJzdHJpbmcoMykrJy9ocWRlZmF1bHQuanBnXCIgdGEtaW5zZXJ0LXZpZGVvPVwiJytlKydcIiBjb250ZW50ZWRpdGFibGU9XCJmYWxzZVwiIHNyYz1cIlwiIGFsbG93ZnVsbHNjcmVlbj1cInRydWVcIiBmcmFtZWJvcmRlcj1cIjBcIiAvPic7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJpbnNlcnRIVE1MXCIsZiwhMCl9fX0sb25FbGVtZW50U2VsZWN0OntlbGVtZW50OlwiaW1nXCIsb25seVdpdGhBdHRyczpbXCJ0YS1pbnNlcnQtdmlkZW9cIl0sYWN0aW9uOmd9fSksYShcImluc2VydExpbmtcIix7dG9vbHRpcHRleHQ6Yy5pbnNlcnRMaW5rLnRvb2x0aXAsaWNvbmNsYXNzOlwiZmEgZmEtbGlua1wiLGFjdGlvbjpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBhPWIucHJvbXB0KGMuaW5zZXJ0TGluay5kaWFsb2dQcm9tcHQsXCJodHRwOi8vXCIpLGEmJlwiXCIhPT1hJiZcImh0dHA6Ly9cIiE9PWE/dGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImNyZWF0ZUxpbmtcIixhLCEwKTp2b2lkIDB9LGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKGEpe3JldHVybiBhP1wiQVwiPT09YVswXS50YWdOYW1lOiExfSxvbkVsZW1lbnRTZWxlY3Q6e2VsZW1lbnQ6XCJhXCIsYWN0aW9uOmZ1bmN0aW9uKGEsZCxlKXthLnByZXZlbnREZWZhdWx0KCksZS5kaXNwbGF5RWxlbWVudHMucG9wb3Zlci5jc3MoXCJ3aWR0aFwiLFwiNDM1cHhcIik7dmFyIGY9ZS5kaXNwbGF5RWxlbWVudHMucG9wb3ZlckNvbnRhaW5lcjtmLmVtcHR5KCksZi5jc3MoXCJsaW5lLWhlaWdodFwiLFwiMjhweFwiKTt2YXIgZz1hbmd1bGFyLmVsZW1lbnQoJzxhIGhyZWY9XCInK2QuYXR0cihcImhyZWZcIikrJ1wiIHRhcmdldD1cIl9ibGFua1wiPicrZC5hdHRyKFwiaHJlZlwiKStcIjwvYT5cIik7Zy5jc3Moe2Rpc3BsYXk6XCJpbmxpbmUtYmxvY2tcIixcIm1heC13aWR0aFwiOlwiMjAwcHhcIixvdmVyZmxvdzpcImhpZGRlblwiLFwidGV4dC1vdmVyZmxvd1wiOlwiZWxsaXBzaXNcIixcIndoaXRlLXNwYWNlXCI6XCJub3dyYXBcIixcInZlcnRpY2FsLWFsaWduXCI6XCJtaWRkbGVcIn0pLGYuYXBwZW5kKGcpO3ZhciBoPWFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cImJ0bi1ncm91cCBwdWxsLXJpZ2h0XCI+JyksaT1hbmd1bGFyLmVsZW1lbnQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBidG4tc21hbGxcIiB0YWJpbmRleD1cIi0xXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0aXRsZT1cIicrYy5lZGl0TGluay5yZUxpbmtCdXR0b24udG9vbHRpcCsnXCI+PGkgY2xhc3M9XCJmYSBmYS1lZGl0IGljb24tZWRpdFwiPjwvaT48L2J1dHRvbj4nKTtpLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCk7dmFyIGY9Yi5wcm9tcHQoYy5pbnNlcnRMaW5rLmRpYWxvZ1Byb21wdCxkLmF0dHIoXCJocmVmXCIpKTtmJiZcIlwiIT09ZiYmXCJodHRwOi8vXCIhPT1mJiYoZC5hdHRyKFwiaHJlZlwiLGYpLGUudXBkYXRlVGFCaW5kdGFUZXh0RWxlbWVudCgpKSxlLmhpZGVQb3BvdmVyKCl9KSxoLmFwcGVuZChpKTt2YXIgaj1hbmd1bGFyLmVsZW1lbnQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBidG4tc21hbGxcIiB0YWJpbmRleD1cIi0xXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0aXRsZT1cIicrYy5lZGl0TGluay51bkxpbmtCdXR0b24udG9vbHRpcCsnXCI+PGkgY2xhc3M9XCJmYSBmYS11bmxpbmsgaWNvbi11bmxpbmtcIj48L2k+PC9idXR0b24+Jyk7ai5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpLGQucmVwbGFjZVdpdGgoZC5jb250ZW50cygpKSxlLnVwZGF0ZVRhQmluZHRhVGV4dEVsZW1lbnQoKSxlLmhpZGVQb3BvdmVyKCl9KSxoLmFwcGVuZChqKTt2YXIgaz1hbmd1bGFyLmVsZW1lbnQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBidG4tc21hbGxcIiB0YWJpbmRleD1cIi0xXCIgdW5zZWxlY3RhYmxlPVwib25cIj4nK2MuZWRpdExpbmsudGFyZ2V0VG9nZ2xlLmJ1dHRvbnRleHQrXCI8L2J1dHRvbj5cIik7XCJfYmxhbmtcIj09PWQuYXR0cihcInRhcmdldFwiKSYmay5hZGRDbGFzcyhcImFjdGl2ZVwiKSxrLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksZC5hdHRyKFwidGFyZ2V0XCIsXCJfYmxhbmtcIj09PWQuYXR0cihcInRhcmdldFwiKT9cIlwiOlwiX2JsYW5rXCIpLGsudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIiksZS51cGRhdGVUYUJpbmR0YVRleHRFbGVtZW50KCl9KSxoLmFwcGVuZChrKSxmLmFwcGVuZChoKSxlLnNob3dQb3BvdmVyKGQpfX19KSxhKFwid29yZGNvdW50XCIse2Rpc3BsYXk6JzxkaXYgaWQ9XCJ0b29sYmFyV0NcIiBzdHlsZT1cImRpc3BsYXk6YmxvY2s7IG1pbi13aWR0aDoxMDBweDtcIj5Xb3Jkczp7e3dvcmRjb3VudH19PC9kaXY+JyxkaXNhYmxlZDohMCx3b3JkY291bnQ6MCxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuJGVkaXRvcigpLmRpc3BsYXlFbGVtZW50cy50ZXh0LGI9YVswXS5pbm5lckhUTUwsYz1iLnJlcGxhY2UoLyg8W14+XSo/PikvZ2ksXCIgXCIpLGQ9Yy5tYXRjaCgvXFxTKy9nKSxlPWQmJmQubGVuZ3RofHwwO3JldHVybiB0aGlzLndvcmRjb3VudD1lLHRoaXMuJGVkaXRvcigpLndvcmRjb3VudD1lLCExfX0pLGEoXCJjaGFyY291bnRcIix7ZGlzcGxheTonPGRpdiBpZD1cInRvb2xiYXJDQ1wiIHN0eWxlPVwiZGlzcGxheTpibG9jazsgbWluLXdpZHRoOjEyMHB4O1wiPkNoYXJhY3RlcnM6e3tjaGFyY291bnR9fTwvZGl2PicsZGlzYWJsZWQ6ITAsY2hhcmNvdW50OjAsYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRlZGl0b3IoKS5kaXNwbGF5RWxlbWVudHMudGV4dCxiPWFbMF0uaW5uZXJUZXh0fHxhWzBdLnRleHRDb250ZW50LGM9Yi5yZXBsYWNlKC8oXFxyXFxufFxcbnxcXHIpL2dtLFwiXCIpLnJlcGxhY2UoL15cXHMrL2csXCIgXCIpLnJlcGxhY2UoL1xccyskL2csXCIgXCIpLmxlbmd0aDtyZXR1cm4gdGhpcy5jaGFyY291bnQ9Yyx0aGlzLiRlZGl0b3IoKS5jaGFyY291bnQ9YywhMX19KX1dKSwvKlxuQGxpY2Vuc2UgdGV4dEFuZ3VsYXJcbkF1dGhvciA6IEF1c3RpbiBBbmRlcnNvblxuTGljZW5zZSA6IDIwMTMgTUlUXG5WZXJzaW9uIDEuMy43XG5cblNlZSBSRUFETUUubWQgb3IgaHR0cHM6Ly9naXRodWIuY29tL2ZyYXl3aW5nL3RleHRBbmd1bGFyL3dpa2kgZm9yIHJlcXVpcmVtZW50cyBhbmQgdXNlLlxuKi9cbmZ1bmN0aW9uKCl7XCJVc2UgU3RyaWN0XCI7ZnVuY3Rpb24gYShhKXt0cnl7cmV0dXJuIDAhPT1hbmd1bGFyLmVsZW1lbnQoYSkubGVuZ3RofWNhdGNoKGIpe3JldHVybiExfX1mdW5jdGlvbiBiKGIsYyl7aWYoIWJ8fFwiXCI9PT1ifHxyLmhhc093blByb3BlcnR5KGIpKXRocm93XCJ0ZXh0QW5ndWxhciBFcnJvcjogQSB1bmlxdWUgbmFtZSBpcyByZXF1aXJlZCBmb3IgYSBUb29sIERlZmluaXRpb25cIjtpZihjLmRpc3BsYXkmJihcIlwiPT09Yy5kaXNwbGF5fHwhYShjLmRpc3BsYXkpKXx8IWMuZGlzcGxheSYmIWMuYnV0dG9udGV4dCYmIWMuaWNvbmNsYXNzKXRocm93J3RleHRBbmd1bGFyIEVycm9yOiBUb29sIERlZmluaXRpb24gZm9yIFwiJytiKydcIiBkb2VzIG5vdCBoYXZlIGEgdmFsaWQgZGlzcGxheS9pY29uY2xhc3MvYnV0dG9udGV4dCB2YWx1ZSc7cltiXT1jfXZhciBjPXtpZTpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTMsYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGQ9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlcIik7Yy5pbm5lckhUTUw9XCI8IS0tW2lmIGd0IElFIFwiKyArK2IrXCJdPjxpPjwvaT48IVtlbmRpZl0tLT5cIixkWzBdOyk7cmV0dXJuIGI+ND9iOmF9KCksd2Via2l0Oi9BcHBsZVdlYktpdFxcLyhbXFxkLl0rKS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl9LGQ9ITE7Yy53ZWJraXQmJihkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYSl7dmFyIGI9YXx8d2luZG93LmV2ZW50LGM9Yi50YXJnZXQ7aWYoZCYmbnVsbCE9PWMpe2Zvcih2YXIgZT0hMSxmPWM7bnVsbCE9PWYmJlwiaHRtbFwiIT09Zi50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJiFlOyllPVwidHJ1ZVwiPT09Zi5jb250ZW50RWRpdGFibGUsZj1mLnBhcmVudE5vZGU7ZXx8KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGV4dEFuZ3VsYXItZWRpdGFibGVGaXgtMDEwMjAzMDQwNTA2MDcwODA5XCIpLnNldFNlbGVjdGlvblJhbmdlKDAsMCksYy5mb2N1cygpLGMuc2VsZWN0JiZjLnNlbGVjdCgpKX1kPSExfSwhMSksYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2FuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KS5hcHBlbmQoYW5ndWxhci5lbGVtZW50KCc8aW5wdXQgaWQ9XCJ0ZXh0QW5ndWxhci1lZGl0YWJsZUZpeC0wMTAyMDMwNDA1MDYwNzA4MDlcIiBjbGFzcz1cInRhLWhpZGRlbi1pbnB1dFwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgdGFiSW5kZXg9XCItMVwiPicpKX0pKTt2YXIgZT0vXihhZGRyZXNzfGFydGljbGV8YXNpZGV8YXVkaW98YmxvY2txdW90ZXxjYW52YXN8ZGR8ZGl2fGRsfGZpZWxkc2V0fGZpZ2NhcHRpb258ZmlndXJlfGZvb3Rlcnxmb3JtfGgxfGgyfGgzfGg0fGg1fGg2fGhlYWRlcnxoZ3JvdXB8aHJ8bm9zY3JpcHR8b2x8b3V0cHV0fHB8cHJlfHNlY3Rpb258dGFibGV8dGZvb3R8dWx8dmlkZW8pJC9pLGY9L14odWx8bGl8b2wpJC9pLGc9L14oYWRkcmVzc3xhcnRpY2xlfGFzaWRlfGF1ZGlvfGJsb2NrcXVvdGV8Y2FudmFzfGRkfGRpdnxkbHxmaWVsZHNldHxmaWdjYXB0aW9ufGZpZ3VyZXxmb290ZXJ8Zm9ybXxoMXxoMnxoM3xoNHxoNXxoNnxoZWFkZXJ8aGdyb3VwfGhyfG5vc2NyaXB0fG9sfG91dHB1dHxwfHByZXxzZWN0aW9ufHRhYmxlfHRmb290fHVsfHZpZGVvfGxpKSQvaTtTdHJpbmcucHJvdG90eXBlLnRyaW18fChTdHJpbmcucHJvdG90eXBlLnRyaW09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLFwiXCIpfSk7dmFyIGgsaSxrLGwsbTtpZihjLmllPjh8fHZvaWQgMD09PWMuaWUpe2Zvcih2YXIgbj1kb2N1bWVudC5zdHlsZVNoZWV0cyxvPTA7bzxuLmxlbmd0aDtvKyspaWYoKDA9PT1uW29dLm1lZGlhLmxlbmd0aHx8bltvXS5tZWRpYS5tZWRpYVRleHQubWF0Y2goLyhhbGx8c2NyZWVuKS9naSkpJiZuW29dLmhyZWYmJm5bb10uaHJlZi5tYXRjaCgvdGV4dGFuZ3VsYXJcXC4obWluXFwufCljc3MvZ2kpKXtoPW5bb107YnJlYWt9aHx8KGg9ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7cmV0dXJuIGMud2Via2l0JiZhLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpKSxkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQoYSksYS5zaGVldH0oKSksaT1mdW5jdGlvbihhLGIpe3JldHVybiBsKGgsYSxiKX0sbD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGEuY3NzUnVsZXM/ZD1NYXRoLm1heChhLmNzc1J1bGVzLmxlbmd0aC0xLDApOmEucnVsZXMmJihkPU1hdGgubWF4KGEucnVsZXMubGVuZ3RoLTEsMCkpLGEuaW5zZXJ0UnVsZT9hLmluc2VydFJ1bGUoYitcIntcIitjK1wifVwiLGQpOmEuYWRkUnVsZShiLGMsZCksZH0saz1mdW5jdGlvbihhKXttKGgsYSl9LG09ZnVuY3Rpb24oYSxiKXthLnJlbW92ZVJ1bGU/YS5yZW1vdmVSdWxlKGIpOmEuZGVsZXRlUnVsZShiKX19YW5ndWxhci5tb2R1bGUoXCJ0ZXh0QW5ndWxhci5mYWN0b3JpZXNcIixbXSkuZmFjdG9yeShcInRhQnJvd3NlclRhZ1wiLFtmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYT9cIlwiPT09YT92b2lkIDA9PT1jLmllP1wiZGl2XCI6Yy5pZTw9OD9cIlBcIjpcInBcIjpjLmllPD04P2EudG9VcHBlckNhc2UoKTphOmMuaWU8PTg/XCJQXCI6XCJwXCJ9fV0pLmZhY3RvcnkoXCJ0YUFwcGx5Q3VzdG9tUmVuZGVyZXJzXCIsW1widGFDdXN0b21SZW5kZXJlcnNcIixcInRhRE9NXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9YW5ndWxhci5lbGVtZW50KFwiPGRpdj48L2Rpdj5cIik7cmV0dXJuIGRbMF0uaW5uZXJIVE1MPWMsYW5ndWxhci5mb3JFYWNoKGEsZnVuY3Rpb24oYSl7dmFyIGM9W107YS5zZWxlY3RvciYmXCJcIiE9PWEuc2VsZWN0b3I/Yz1kLmZpbmQoYS5zZWxlY3Rvcik6YS5jdXN0b21BdHRyaWJ1dGUmJlwiXCIhPT1hLmN1c3RvbUF0dHJpYnV0ZSYmKGM9Yi5nZXRCeUF0dHJpYnV0ZShkLGEuY3VzdG9tQXR0cmlidXRlKSksYW5ndWxhci5mb3JFYWNoKGMsZnVuY3Rpb24oYil7Yj1hbmd1bGFyLmVsZW1lbnQoYiksYS5zZWxlY3RvciYmXCJcIiE9PWEuc2VsZWN0b3ImJmEuY3VzdG9tQXR0cmlidXRlJiZcIlwiIT09YS5jdXN0b21BdHRyaWJ1dGU/dm9pZCAwIT09Yi5hdHRyKGEuY3VzdG9tQXR0cmlidXRlKSYmYS5yZW5kZXJMb2dpYyhiKTphLnJlbmRlckxvZ2ljKGIpfSl9KSxkWzBdLmlubmVySFRNTH19XSkuZmFjdG9yeShcInRhRml4Q2hyb21lXCIsZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihhKXtpZighYXx8IWFuZ3VsYXIuaXNTdHJpbmcoYSl8fGEubGVuZ3RoPD0wKXJldHVybiBhO2Zvcih2YXIgYixjLGQsZT0vPChbXj5cXC9dKz8pc3R5bGU9KFwiKFteXCJdKylcInwnKFteJ10rKScpKFtePl0qKT4vZ2ksZj1cIlwiLGc9MDtiPWUuZXhlYyhhKTspYz1iWzNdfHxiWzRdLGMmJmMubWF0Y2goL2xpbmUtaGVpZ2h0OiAxLjQyODU3MTQyOTt8Y29sb3I6IGluaGVyaXQ7IGxpbmUtaGVpZ2h0OiAxLjE7L2kpJiYoYz1jLnJlcGxhY2UoLyggfClmb250LWZhbWlseTogaW5oZXJpdDt8KCB8KWxpbmUtaGVpZ2h0OiAxLjQyODU3MTQyOTt8KCB8KWxpbmUtaGVpZ2h0OjEuMTt8KCB8KWNvbG9yOiBpbmhlcml0Oy9naSxcIlwiKSxkPVwiPFwiK2JbMV0udHJpbSgpLGMubGVuZ3RoPjAmJihkKz1cIiBzdHlsZT1cIitiWzJdLnN1YnN0cmluZygwLDEpK2MrYlsyXS5zdWJzdHJpbmcoMCwxKSksZCs9Yls1XS50cmltKCkrXCI+XCIsZis9YS5zdWJzdHJpbmcoZyxiLmluZGV4KStkLGc9Yi5pbmRleCtiWzBdLmxlbmd0aCk7cmV0dXJuIGYrPWEuc3Vic3RyaW5nKGcpLGc+MD9mLnJlcGxhY2UoLzxzcGFuXFxzKj4oLio/KTxcXC9zcGFuPig8YnIoXFwvfCk+fCkvZ2ksXCIkMVwiKTphfTtyZXR1cm4gYX0pLmZhY3RvcnkoXCJ0YVNhbml0aXplXCIsW1wiJHNhbml0aXplXCIsXCJ0YURPTVwiLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtmb3IodmFyIGMsZD0wLGU9MCxmPS88W14+XSo+L2dpO2M9Zi5leGVjKGEpOylpZihlPWMuaW5kZXgsXCIvXCI9PT1jWzBdLnN1YnN0cigxLDEpKXtpZigwPT09ZClicmVhaztkLS19ZWxzZSBkKys7cmV0dXJuIGIrYS5zdWJzdHJpbmcoMCxlKSthbmd1bGFyLmVsZW1lbnQoYilbMF0ub3V0ZXJIVE1MLnN1YnN0cmluZyhiLmxlbmd0aCkrYS5zdWJzdHJpbmcoZSl9ZnVuY3Rpb24gYyhhKXtpZighYXx8IWFuZ3VsYXIuaXNTdHJpbmcoYSl8fGEubGVuZ3RoPD0wKXJldHVybiBhO2Zvcih2YXIgZCxmLGcsaCxqLGs9LzwoW14+XFwvXSs/KXN0eWxlPShcIihbXlwiXSspXCJ8JyhbXiddKyknKShbXj5dKik+L2dpLGw9XCJcIixtPVwiXCIsbj0wO2Y9ay5leGVjKGEpOyl7Zz1mWzNdfHxmWzRdO3ZhciBvPW5ldyBSZWdFeHAoaSxcImlcIik7aWYoYW5ndWxhci5pc1N0cmluZyhnKSYmby50ZXN0KGcpKXtoPVwiXCI7Zm9yKHZhciBwPW5ldyBSZWdFeHAoaSxcImlnXCIpO3N1Yk1hdGNoPXAuZXhlYyhnKTspZm9yKGQ9MDtkPGUubGVuZ3RoO2QrKylzdWJNYXRjaFsyKmQrMl0mJihoKz1cIjxcIitlW2RdLnRhZytcIj5cIik7aj1jKGEuc3Vic3RyaW5nKG4sZi5pbmRleCkpLG0rPWwubGVuZ3RoPjA/YihqLGwpOmosZz1nLnJlcGxhY2UobmV3IFJlZ0V4cChpLFwiaWdcIiksXCJcIiksbSs9XCI8XCIrZlsxXS50cmltKCksZy5sZW5ndGg+MCYmKG0rPScgc3R5bGU9XCInK2crJ1wiJyksbSs9Zls1XStcIj5cIixuPWYuaW5kZXgrZlswXS5sZW5ndGgsbD1ofX1yZXR1cm4gbSs9bC5sZW5ndGg+MD9iKGEuc3Vic3RyaW5nKG4pLGwpOmEuc3Vic3RyaW5nKG4pfWZ1bmN0aW9uIGQoYSl7aWYoIWF8fCFhbmd1bGFyLmlzU3RyaW5nKGEpfHxhLmxlbmd0aDw9MClyZXR1cm4gYTtmb3IodmFyIGIsYz0vPChbXj5cXC9dKz8pYWxpZ249KFwiKFteXCJdKylcInwnKFteJ10rKScpKFtePl0qKT4vZ2ksZD1cIlwiLGU9MDtiPWMuZXhlYyhhKTspZCs9YS5zdWJzdHJpbmcoZSxiLmluZGV4KSxlPWIuaW5kZXgrYlswXS5sZW5ndGgsbmV3VGFnPVwiPFwiK2JbMV0rYls1XSwvc3R5bGU9KFwiKFteXCJdKylcInwnKFteJ10rKScpL2dpLnRlc3QobmV3VGFnKT9uZXdUYWc9bmV3VGFnLnJlcGxhY2UoL3N0eWxlPShcIihbXlwiXSspXCJ8JyhbXiddKyknKS9pLCdzdHlsZT1cIiQyJDMgdGV4dC1hbGlnbjonKyhiWzNdfHxiWzRdKSsnO1wiJyk6bmV3VGFnKz0nIHN0eWxlPVwidGV4dC1hbGlnbjonKyhiWzNdfHxiWzRdKSsnO1wiJyxuZXdUYWcrPVwiPlwiLGQrPW5ld1RhZztyZXR1cm4gZCthLnN1YnN0cmluZyhlKX1mb3IodmFyIGU9W3twcm9wZXJ0eTpcImZvbnQtd2VpZ2h0XCIsdmFsdWVzOltcImJvbGRcIl0sdGFnOlwiYlwifSx7cHJvcGVydHk6XCJmb250LXN0eWxlXCIsdmFsdWVzOltcIml0YWxpY1wiXSx0YWc6XCJpXCJ9XSxmPVtdLGc9MDtnPGUubGVuZ3RoO2crKyl7dmFyIGg9XCIoXCIrZVtnXS5wcm9wZXJ0eStcIjpcXFxccyooXCI7Zm9yKGo9MDtqPGVbZ10udmFsdWVzLmxlbmd0aDtqKyspaj4wJiYoaCs9XCJ8XCIpLGgrPWVbZ10udmFsdWVzW2pdO2grPVwiKTspXCIsZi5wdXNoKGgpfXZhciBpPVwiKFwiK2Yuam9pbihcInxcIikrXCIpXCI7cmV0dXJuIGZ1bmN0aW9uKGIsZSxmKXtpZighZil0cnl7Yj1jKGIpfWNhdGNoKGcpe31iPWQoYik7dmFyIGg7dHJ5e2g9YShiKSxmJiYoaD1iKX1jYXRjaChnKXtoPWV8fFwiXCJ9dmFyIGk9aC5tYXRjaCgvKDxwcmVbXj5dKj4uKj88XFwvcHJlW14+XSo+KS9naSk7cHJvY2Vzc2VkU2FmZT1oLnJlcGxhY2UoLygmIyg5fDEwKTspKi9naSxcIlwiKTt2YXIgaixrPS88cHJlW14+XSo+Lio/PFxcL3ByZVtePl0qPi9naSxsPTAsbT0wO2ZvcihoPVwiXCI7bnVsbCE9PShqPWsuZXhlYyhwcm9jZXNzZWRTYWZlKSkmJmw8aS5sZW5ndGg7KWgrPXByb2Nlc3NlZFNhZmUuc3Vic3RyaW5nKG0sai5pbmRleCkraVtsXSxtPWouaW5kZXgralswXS5sZW5ndGgsbCsrO3JldHVybiBoK3Byb2Nlc3NlZFNhZmUuc3Vic3RyaW5nKG0pfX1dKS5mYWN0b3J5KFwidGFUb29sRXhlY3V0ZUFjdGlvblwiLFtcIiRxXCIsXCIkbG9nXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyl7dm9pZCAwIT09YyYmKHRoaXMuJGVkaXRvcj1mdW5jdGlvbigpe3JldHVybiBjfSk7dmFyIGQ9YS5kZWZlcigpLGU9ZC5wcm9taXNlLGY9dGhpcy4kZWRpdG9yKCk7ZVtcImZpbmFsbHlcIl0oZnVuY3Rpb24oKXtmLmVuZEFjdGlvbi5jYWxsKGYpfSk7dmFyIGc7dHJ5e2c9dGhpcy5hY3Rpb24oZCxmLnN0YXJ0QWN0aW9uKCkpfWNhdGNoKGgpe2IuZXJyb3IoaCl9KGd8fHZvaWQgMD09PWcpJiZkLnJlc29sdmUoKX19XSksYW5ndWxhci5tb2R1bGUoXCJ0ZXh0QW5ndWxhci5ET01cIixbXCJ0ZXh0QW5ndWxhci5mYWN0b3JpZXNcIl0pLmZhY3RvcnkoXCJ0YUV4ZWNDb21tYW5kXCIsW1widGFTZWxlY3Rpb25cIixcInRhQnJvd3NlclRhZ1wiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGIsYyl7dmFyIGQsZSxmPWIuZmluZChcImxpXCIpO2ZvcihlPWYubGVuZ3RoLTE7ZT49MDtlLS0pZD1hbmd1bGFyLmVsZW1lbnQoXCI8XCIrYytcIj5cIitmW2VdLmlubmVySFRNTCtcIjwvXCIrYytcIj5cIiksYi5hZnRlcihkKTtiLnJlbW92ZSgpLGEuc2V0U2VsZWN0aW9uVG9FbGVtZW50RW5kKGRbMF0pfSxnPWZ1bmN0aW9uKGIpey8oPGJyKHxcXC8pPikkL2kudGVzdChiLmlubmVySFRNTC50cmltKCkpP2Euc2V0U2VsZWN0aW9uQmVmb3JlRWxlbWVudChhbmd1bGFyLmVsZW1lbnQoYikuZmluZChcImJyXCIpWzBdKTphLnNldFNlbGVjdGlvblRvRWxlbWVudEVuZChiKX0saD1mdW5jdGlvbihhLGIpe3ZhciBjPWFuZ3VsYXIuZWxlbWVudChcIjxcIitiK1wiPlwiK2FbMF0uaW5uZXJIVE1MK1wiPC9cIitiK1wiPlwiKTthLmFmdGVyKGMpLGEucmVtb3ZlKCksZyhjLmZpbmQoXCJsaVwiKVswXSl9LGk9ZnVuY3Rpb24oYSxjLGQpe2Zvcih2YXIgZT1cIlwiLGY9MDtmPGEubGVuZ3RoO2YrKyllKz1cIjxcIitiKFwibGlcIikrXCI+XCIrYVtmXS5pbm5lckhUTUwrXCI8L1wiK2IoXCJsaVwiKStcIj5cIjt2YXIgaD1hbmd1bGFyLmVsZW1lbnQoXCI8XCIrZCtcIj5cIitlK1wiPC9cIitkK1wiPlwiKTtjLmFmdGVyKGgpLGMucmVtb3ZlKCksZyhoLmZpbmQoXCJsaVwiKVswXSl9O3JldHVybiBmdW5jdGlvbihnLGope3JldHVybiBnPWIoZyksZnVuY3Rpb24oayxsLG0pe3ZhciBuLG8scCxxLHIscyx0LHU9YW5ndWxhci5lbGVtZW50KFwiPFwiK2crXCI+XCIpO3RyeXt0PWEuZ2V0U2VsZWN0aW9uRWxlbWVudCgpfWNhdGNoKHYpe312YXIgdz1hbmd1bGFyLmVsZW1lbnQodCk7aWYodm9pZCAwIT09dCl7dmFyIHg9dC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7aWYoXCJpbnNlcnRvcmRlcmVkbGlzdFwiPT09ay50b0xvd2VyQ2FzZSgpfHxcImluc2VydHVub3JkZXJlZGxpc3RcIj09PWsudG9Mb3dlckNhc2UoKSl7dmFyIHk9YihcImluc2VydG9yZGVyZWRsaXN0XCI9PT1rLnRvTG93ZXJDYXNlKCk/XCJvbFwiOlwidWxcIik7aWYoeD09PXkpcmV0dXJuIGQodyxnKTtpZihcImxpXCI9PT14JiZ3LnBhcmVudCgpWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09PXkmJjE9PT13LnBhcmVudCgpLmNoaWxkcmVuKCkubGVuZ3RoKXJldHVybiBkKHcucGFyZW50KCksZyk7aWYoXCJsaVwiPT09eCYmdy5wYXJlbnQoKVswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkhPT15JiYxPT09dy5wYXJlbnQoKS5jaGlsZHJlbigpLmxlbmd0aClyZXR1cm4gaCh3LnBhcmVudCgpLHkpO2lmKHgubWF0Y2goZSkmJiF3Lmhhc0NsYXNzKFwidGEtYmluZFwiKSl7aWYoXCJvbFwiPT09eHx8XCJ1bFwiPT09eClyZXR1cm4gaCh3LHkpO3ZhciB6PSExO3JldHVybiBhbmd1bGFyLmZvckVhY2gody5jaGlsZHJlbigpLGZ1bmN0aW9uKGEpe2EudGFnTmFtZS5tYXRjaChlKSYmKHo9ITApfSksej9pKHcuY2hpbGRyZW4oKSx3LHkpOmkoW2FuZ3VsYXIuZWxlbWVudChcIjxkaXY+XCIrdC5pbm5lckhUTUwrXCI8L2Rpdj5cIilbMF1dLHcseSl9aWYoeC5tYXRjaChlKSl7aWYocT1hLmdldE9ubHlTZWxlY3RlZEVsZW1lbnRzKCksMD09PXEubGVuZ3RoKW89YW5ndWxhci5lbGVtZW50KFwiPFwiK3krXCI+PGxpPlwiK3QuaW5uZXJIVE1MK1wiPC9saT48L1wiK3krXCI+XCIpLHcuaHRtbChcIlwiKSx3LmFwcGVuZChvKTtlbHNle2lmKDE9PT1xLmxlbmd0aCYmKFwib2xcIj09PXFbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxcInVsXCI9PT1xWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkpcmV0dXJuIHFbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpPT09eT9kKGFuZ3VsYXIuZWxlbWVudChxWzBdKSxnKTpoKGFuZ3VsYXIuZWxlbWVudChxWzBdKSx5KTtwPVwiXCI7dmFyIEE9W107Zm9yKG49MDtuPHEubGVuZ3RoO24rKylpZigzIT09cVtuXS5ub2RlVHlwZSl7dmFyIEI9YW5ndWxhci5lbGVtZW50KHFbbl0pO2lmKFwibGlcIj09PXFbbl0udGFnTmFtZS50b0xvd2VyQ2FzZSgpKWNvbnRpbnVlO3ArPVwib2xcIj09PXFbbl0udGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxcInVsXCI9PT1xW25dLnRhZ05hbWUudG9Mb3dlckNhc2UoKT9CWzBdLmlubmVySFRNTDpcInNwYW5cIiE9PXFbbl0udGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxcIm9sXCIhPT1xW25dLmNoaWxkTm9kZXNbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpJiZcInVsXCIhPT1xW25dLmNoaWxkTm9kZXNbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpP1wiPFwiK2IoXCJsaVwiKStcIj5cIitCWzBdLmlubmVySFRNTCtcIjwvXCIrYihcImxpXCIpK1wiPlwiOkJbMF0uY2hpbGROb2Rlc1swXS5pbm5lckhUTUwsQS51bnNoaWZ0KEIpfW89YW5ndWxhci5lbGVtZW50KFwiPFwiK3krXCI+XCIrcCtcIjwvXCIreStcIj5cIiksQS5wb3AoKS5yZXBsYWNlV2l0aChvKSxhbmd1bGFyLmZvckVhY2goQSxmdW5jdGlvbihhKXthLnJlbW92ZSgpfSl9cmV0dXJuIHZvaWQgYS5zZXRTZWxlY3Rpb25Ub0VsZW1lbnRFbmQob1swXSl9fWVsc2V7aWYoXCJmb3JtYXRibG9ja1wiPT09ay50b0xvd2VyQ2FzZSgpKXtmb3Iocz1tLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvWzw+XS9naSxcIlwiKSxcImRlZmF1bHRcIj09PXMudHJpbSgpJiYocz1nLG09XCI8XCIrZytcIj5cIiksbz1cImxpXCI9PT14P3cucGFyZW50KCk6dzshb1swXS50YWdOYW1lfHwhb1swXS50YWdOYW1lLm1hdGNoKGUpJiYhby5wYXJlbnQoKS5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIpOylvPW8ucGFyZW50KCkseD0ob1swXS50YWdOYW1lfHxcIlwiKS50b0xvd2VyQ2FzZSgpO2lmKHg9PT1zKXtxPW8uY2hpbGRyZW4oKTt2YXIgQz0hMTtmb3Iobj0wO248cS5sZW5ndGg7bisrKUM9Q3x8cVtuXS50YWdOYW1lLm1hdGNoKGUpO0M/KG8uYWZ0ZXIocSkscj1vLm5leHQoKSxvLnJlbW92ZSgpLG89cik6KHUuYXBwZW5kKG9bMF0uY2hpbGROb2Rlcyksby5hZnRlcih1KSxvLnJlbW92ZSgpLG89dSl9ZWxzZSBpZihvLnBhcmVudCgpWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9PXN8fG8ucGFyZW50KCkuaGFzQ2xhc3MoXCJ0YS1iaW5kXCIpKWlmKHgubWF0Y2goZikpby53cmFwKG0pO2Vsc2V7Zm9yKHE9YS5nZXRPbmx5U2VsZWN0ZWRFbGVtZW50cygpLDA9PT1xLmxlbmd0aCYmKHE9W29bMF1dKSxuPTA7bjxxLmxlbmd0aDtuKyspaWYoMz09PXFbbl0ubm9kZVR5cGV8fCFxW25dLnRhZ05hbWUubWF0Y2goZSkpZm9yKDszPT09cVtuXS5ub2RlVHlwZXx8IXFbbl0udGFnTmFtZXx8IXFbbl0udGFnTmFtZS5tYXRjaChlKTspcVtuXT1xW25dLnBhcmVudE5vZGU7aWYoYW5ndWxhci5lbGVtZW50KHFbMF0pLmhhc0NsYXNzKFwidGEtYmluZFwiKSlvPWFuZ3VsYXIuZWxlbWVudChtKSxvWzBdLmlubmVySFRNTD1xWzBdLmlubmVySFRNTCxxWzBdLmlubmVySFRNTD1vWzBdLm91dGVySFRNTDtlbHNlIGlmKFwiYmxvY2txdW90ZVwiPT09cyl7Zm9yKHA9XCJcIixuPTA7bjxxLmxlbmd0aDtuKyspcCs9cVtuXS5vdXRlckhUTUw7Zm9yKG89YW5ndWxhci5lbGVtZW50KG0pLG9bMF0uaW5uZXJIVE1MPXAscVswXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShvWzBdLHFbMF0pLG49cS5sZW5ndGgtMTtuPj0wO24tLSlxW25dLnBhcmVudE5vZGUmJnFbbl0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChxW25dKX1lbHNlIGZvcihuPTA7bjxxLmxlbmd0aDtuKyspbz1hbmd1bGFyLmVsZW1lbnQobSksb1swXS5pbm5lckhUTUw9cVtuXS5pbm5lckhUTUwscVtuXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShvWzBdLHFbbl0pLHFbbl0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChxW25dKX1lbHNle3ZhciBEPW8ucGFyZW50KCksRT1ELmNvbnRlbnRzKCk7Zm9yKG49MDtuPEUubGVuZ3RoO24rKylELnBhcmVudCgpLmhhc0NsYXNzKFwidGEtYmluZFwiKSYmMz09PUVbbl0ubm9kZVR5cGUmJih1PWFuZ3VsYXIuZWxlbWVudChcIjxcIitnK1wiPlwiKSx1WzBdLmlubmVySFRNTD1FW25dLm91dGVySFRNTCxFW25dPXVbMF0pLEQucGFyZW50KClbMF0uaW5zZXJ0QmVmb3JlKEVbbl0sRFswXSk7RC5yZW1vdmUoKX1yZXR1cm4gdm9pZCBhLnNldFNlbGVjdGlvblRvRWxlbWVudEVuZChvWzBdKX1pZihcImNyZWF0ZWxpbmtcIj09PWsudG9Mb3dlckNhc2UoKSl7dmFyIEY9YS5nZXRTZWxlY3Rpb24oKTtpZihGLmNvbGxhcHNlZClyZXR1cm4gdm9pZCBhLmluc2VydEh0bWwoJzxhIGhyZWY9XCInK20rJ1wiPicrbStcIjwvYT5cIixqKX1lbHNlIGlmKFwiaW5zZXJ0aHRtbFwiPT09ay50b0xvd2VyQ2FzZSgpKXJldHVybiB2b2lkIGEuaW5zZXJ0SHRtbChtLGopfX10cnl7Y1swXS5leGVjQ29tbWFuZChrLGwsbSl9Y2F0Y2godil7fX19fV0pLnNlcnZpY2UoXCJ0YVNlbGVjdGlvblwiLFtcIiR3aW5kb3dcIixcIiRkb2N1bWVudFwiLFwidGFET01cIixmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXSxmPWEucmFuZ3ksaD1mdW5jdGlvbihhLGIpe3JldHVybiBhLnRhZ05hbWUmJmEudGFnTmFtZS5tYXRjaCgvXmJyJC9pKSYmMD09PWImJiFhLnByZXZpb3VzU2libGluZz97ZWxlbWVudDphLnBhcmVudE5vZGUsb2Zmc2V0OjB9OntlbGVtZW50OmEsb2Zmc2V0OmJ9fSxpPXtnZXRTZWxlY3Rpb246ZnVuY3Rpb24oKXt2YXIgYT1mLmdldFNlbGVjdGlvbigpLmdldFJhbmdlQXQoMCksYj1hLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyLGM9e3N0YXJ0OmgoYS5zdGFydENvbnRhaW5lcixhLnN0YXJ0T2Zmc2V0KSxlbmQ6aChhLmVuZENvbnRhaW5lcixhLmVuZE9mZnNldCksY29sbGFwc2VkOmEuY29sbGFwc2VkfTtyZXR1cm4gYj0zPT09Yi5ub2RlVHlwZT9iLnBhcmVudE5vZGU6YixjLmNvbnRhaW5lcj1iLnBhcmVudE5vZGU9PT1jLnN0YXJ0LmVsZW1lbnR8fGIucGFyZW50Tm9kZT09PWMuZW5kLmVsZW1lbnQ/Yi5wYXJlbnROb2RlOmIsY30sZ2V0T25seVNlbGVjdGVkRWxlbWVudHM6ZnVuY3Rpb24oKXt2YXIgYT1mLmdldFNlbGVjdGlvbigpLmdldFJhbmdlQXQoMCksYj1hLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyO3JldHVybiBiPTM9PT1iLm5vZGVUeXBlP2IucGFyZW50Tm9kZTpiLGEuZ2V0Tm9kZXMoWzFdLGZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGU9PT1ifSl9LGdldFNlbGVjdGlvbkVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gaS5nZXRTZWxlY3Rpb24oKS5jb250YWluZXJ9LHNldFNlbGVjdGlvbjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Zi5jcmVhdGVSYW5nZSgpO2Quc2V0U3RhcnQoYSxiKSxkLnNldEVuZChhLGMpLGYuZ2V0U2VsZWN0aW9uKCkuc2V0U2luZ2xlUmFuZ2UoZCl9LHNldFNlbGVjdGlvbkJlZm9yZUVsZW1lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9Zi5jcmVhdGVSYW5nZSgpO2Iuc2VsZWN0Tm9kZShhKSxiLmNvbGxhcHNlKCEwKSxmLmdldFNlbGVjdGlvbigpLnNldFNpbmdsZVJhbmdlKGIpfSxzZXRTZWxlY3Rpb25BZnRlckVsZW1lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9Zi5jcmVhdGVSYW5nZSgpO2Iuc2VsZWN0Tm9kZShhKSxiLmNvbGxhcHNlKCExKSxmLmdldFNlbGVjdGlvbigpLnNldFNpbmdsZVJhbmdlKGIpfSxzZXRTZWxlY3Rpb25Ub0VsZW1lbnRTdGFydDpmdW5jdGlvbihhKXt2YXIgYj1mLmNyZWF0ZVJhbmdlKCk7Yi5zZWxlY3ROb2RlQ29udGVudHMoYSksYi5jb2xsYXBzZSghMCksZi5nZXRTZWxlY3Rpb24oKS5zZXRTaW5nbGVSYW5nZShiKX0sc2V0U2VsZWN0aW9uVG9FbGVtZW50RW5kOmZ1bmN0aW9uKGEpe3ZhciBiPWYuY3JlYXRlUmFuZ2UoKTtiLnNlbGVjdE5vZGVDb250ZW50cyhhKSxiLmNvbGxhcHNlKCExKSxhLmNoaWxkTm9kZXMmJmEuY2hpbGROb2Rlc1thLmNoaWxkTm9kZXMubGVuZ3RoLTFdJiZcImJyXCI9PT1hLmNoaWxkTm9kZXNbYS5jaGlsZE5vZGVzLmxlbmd0aC0xXS5ub2RlTmFtZSYmKGIuc3RhcnRPZmZzZXQ9Yi5lbmRPZmZzZXQ9Yi5zdGFydE9mZnNldC0xKSxmLmdldFNlbGVjdGlvbigpLnNldFNpbmdsZVJhbmdlKGIpfSxpbnNlcnRIdG1sOmZ1bmN0aW9uKGEsYil7dmFyIGgsaixrLGwsbSxuLG8scD1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2PlwiK2ErXCI8L2Rpdj5cIikscT1mLmdldFNlbGVjdGlvbigpLmdldFJhbmdlQXQoMCkscj1kLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxzPXBbMF0uY2hpbGROb2Rlcyx0PSEwO2lmKHMubGVuZ3RoPjApe2ZvcihsPVtdLGs9MDtrPHMubGVuZ3RoO2srKylcInBcIj09PXNba10ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmXCJcIj09PXNba10uaW5uZXJIVE1MLnRyaW0oKXx8Mz09PXNba10ubm9kZVR5cGUmJlwiXCI9PT1zW2tdLm5vZGVWYWx1ZS50cmltKCl8fCh0PXQmJiFlLnRlc3Qoc1trXS5ub2RlTmFtZSksbC5wdXNoKHNba10pKTtmb3IodmFyIHU9MDt1PGwubGVuZ3RoO3UrKyluPXIuYXBwZW5kQ2hpbGQobFt1XSk7IXQmJnEuY29sbGFwc2VkJiYvXih8PGJyKHxcXC8pPikkL2kudGVzdChxLnN0YXJ0Q29udGFpbmVyLmlubmVySFRNTCkmJnEuc2VsZWN0Tm9kZShxLnN0YXJ0Q29udGFpbmVyKX1lbHNlIHQ9ITAsbj1yPWQuY3JlYXRlVGV4dE5vZGUoYSk7aWYodClxLmRlbGV0ZUNvbnRlbnRzKCk7ZWxzZSBpZihxLmNvbGxhcHNlZCYmcS5zdGFydENvbnRhaW5lciE9PWIpaWYocS5zdGFydENvbnRhaW5lci5pbm5lckhUTUwmJnEuc3RhcnRDb250YWluZXIuaW5uZXJIVE1MLm1hdGNoKC9ePFtePl0qPiQvaSkpaD1xLnN0YXJ0Q29udGFpbmVyLDE9PT1xLnN0YXJ0T2Zmc2V0PyhxLnNldFN0YXJ0QWZ0ZXIoaCkscS5zZXRFbmRBZnRlcihoKSk6KHEuc2V0U3RhcnRCZWZvcmUoaCkscS5zZXRFbmRCZWZvcmUoaCkpO2Vsc2V7aWYoMz09PXEuc3RhcnRDb250YWluZXIubm9kZVR5cGUmJnEuc3RhcnRDb250YWluZXIucGFyZW50Tm9kZSE9PWIpZm9yKGg9cS5zdGFydENvbnRhaW5lci5wYXJlbnROb2RlLGo9aC5jbG9uZU5vZGUoKSxjLnNwbGl0Tm9kZXMoaC5jaGlsZE5vZGVzLGgsaixxLnN0YXJ0Q29udGFpbmVyLHEuc3RhcnRPZmZzZXQpOyFnLnRlc3QoaC5ub2RlTmFtZSk7KXthbmd1bGFyLmVsZW1lbnQoaCkuYWZ0ZXIoaiksaD1oLnBhcmVudE5vZGU7dmFyIHY9ajtqPWguY2xvbmVOb2RlKCksYy5zcGxpdE5vZGVzKGguY2hpbGROb2RlcyxoLGosdil9ZWxzZSBoPXEuc3RhcnRDb250YWluZXIsaj1oLmNsb25lTm9kZSgpLGMuc3BsaXROb2RlcyhoLmNoaWxkTm9kZXMsaCxqLHZvaWQgMCx2b2lkIDAscS5zdGFydE9mZnNldCk7aWYoYW5ndWxhci5lbGVtZW50KGgpLmFmdGVyKGopLHEuc2V0U3RhcnRBZnRlcihoKSxxLnNldEVuZEFmdGVyKGgpLC9eKHw8YnIofFxcLyk+KSQvaS50ZXN0KGguaW5uZXJIVE1MLnRyaW0oKSkmJihxLnNldFN0YXJ0QmVmb3JlKGgpLHEuc2V0RW5kQmVmb3JlKGgpLGFuZ3VsYXIuZWxlbWVudChoKS5yZW1vdmUoKSksL14ofDxicih8XFwvKT4pJC9pLnRlc3Qoai5pbm5lckhUTUwudHJpbSgpKSYmYW5ndWxhci5lbGVtZW50KGopLnJlbW92ZSgpLFwibGlcIj09PWgubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7Zm9yKG89ZC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbT0wO208ci5jaGlsZE5vZGVzLmxlbmd0aDttKyspcD1hbmd1bGFyLmVsZW1lbnQoXCI8bGk+XCIpLGMudHJhbnNmZXJDaGlsZE5vZGVzKHIuY2hpbGROb2Rlc1ttXSxwWzBdKSxjLnRyYW5zZmVyTm9kZUF0dHJpYnV0ZXMoci5jaGlsZE5vZGVzW21dLHBbMF0pLG8uYXBwZW5kQ2hpbGQocFswXSk7cj1vLG4mJihuPXIuY2hpbGROb2Rlc1tyLmNoaWxkTm9kZXMubGVuZ3RoLTFdLG49bi5jaGlsZE5vZGVzW24uY2hpbGROb2Rlcy5sZW5ndGgtMV0pfX1lbHNlIHEuZGVsZXRlQ29udGVudHMoKTtxLmluc2VydE5vZGUociksbiYmaS5zZXRTZWxlY3Rpb25Ub0VsZW1lbnRFbmQobil9fTtyZXR1cm4gaX1dKS5zZXJ2aWNlKFwidGFET01cIixmdW5jdGlvbigpe3ZhciBhPXtnZXRCeUF0dHJpYnV0ZTpmdW5jdGlvbihiLGMpe3ZhciBkPVtdLGU9Yi5jaGlsZHJlbigpO3JldHVybiBlLmxlbmd0aCYmYW5ndWxhci5mb3JFYWNoKGUsZnVuY3Rpb24oYil7ZD1kLmNvbmNhdChhLmdldEJ5QXR0cmlidXRlKGFuZ3VsYXIuZWxlbWVudChiKSxjKSl9KSx2b2lkIDAhPT1iLmF0dHIoYykmJmQucHVzaChiKSxkfSx0cmFuc2ZlckNoaWxkTm9kZXM6ZnVuY3Rpb24oYSxiKXtmb3IoYi5pbm5lckhUTUw9XCJcIjthLmNoaWxkTm9kZXMubGVuZ3RoPjA7KWIuYXBwZW5kQ2hpbGQoYS5jaGlsZE5vZGVzWzBdKTtyZXR1cm4gYn0sc3BsaXROb2RlczpmdW5jdGlvbihiLGMsZCxlLGYsZyl7aWYoIWUmJmlzTmFOKGcpKXRocm93IG5ldyBFcnJvcihcInRhRE9NLnNwbGl0Tm9kZXMgcmVxdWlyZXMgYSBzcGxpdE5vZGUgb3Igc3BsaXRJbmRleFwiKTtmb3IodmFyIGg9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGk9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGo9MDtiLmxlbmd0aD4wJiYoaXNOYU4oZyl8fGchPT1qKSYmYlswXSE9PWU7KWguYXBwZW5kQ2hpbGQoYlswXSksaisrO2ZvcighaXNOYU4oZikmJmY+PTAmJmJbMF0mJihoLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGJbMF0ubm9kZVZhbHVlLnN1YnN0cmluZygwLGYpKSksYlswXS5ub2RlVmFsdWU9YlswXS5ub2RlVmFsdWUuc3Vic3RyaW5nKGYpKTtiLmxlbmd0aD4wOylpLmFwcGVuZENoaWxkKGJbMF0pO2EudHJhbnNmZXJDaGlsZE5vZGVzKGgsYyksYS50cmFuc2ZlckNoaWxkTm9kZXMoaSxkKX0sdHJhbnNmZXJOb2RlQXR0cmlidXRlczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8YS5hdHRyaWJ1dGVzLmxlbmd0aDtjKyspYi5zZXRBdHRyaWJ1dGUoYS5hdHRyaWJ1dGVzW2NdLm5hbWUsYS5hdHRyaWJ1dGVzW2NdLnZhbHVlKTtyZXR1cm4gYn19O3JldHVybiBhfSksYW5ndWxhci5tb2R1bGUoXCJ0ZXh0QW5ndWxhci52YWxpZGF0b3JzXCIsW10pLmRpcmVjdGl2ZShcInRhTWF4VGV4dFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCJuZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBlKGEpe3ZhciBiPWFuZ3VsYXIuZWxlbWVudChcIjxkaXYvPlwiKTtiLmh0bWwoYSk7dmFyIGM9Yi50ZXh0KCkubGVuZ3RoO3JldHVybiBmPj1jPyhkLiRzZXRWYWxpZGl0eShcInRhTWF4VGV4dFwiLCEwKSxhKTp2b2lkIGQuJHNldFZhbGlkaXR5KFwidGFNYXhUZXh0XCIsITEpfXZhciBmPXBhcnNlSW50KGEuJGV2YWwoYy50YU1heFRleHQpKTtpZihpc05hTihmKSl0aHJvd1wiTWF4IHRleHQgbXVzdCBiZSBhbiBpbnRlZ2VyXCI7Yy4kb2JzZXJ2ZShcInRhTWF4VGV4dFwiLGZ1bmN0aW9uKGEpe2lmKGY9cGFyc2VJbnQoYSksaXNOYU4oZikpdGhyb3dcIk1heCB0ZXh0IG11c3QgYmUgYW4gaW50ZWdlclwiO2QuJGRpcnR5JiZkLiRzZXRWaWV3VmFsdWUoZC4kdmlld1ZhbHVlKX0pLGQuJHBhcnNlcnMudW5zaGlmdChlKX19fSkuZGlyZWN0aXZlKFwidGFNaW5UZXh0XCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpcIm5nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoYSl7dmFyIGI9YW5ndWxhci5lbGVtZW50KFwiPGRpdi8+XCIpO2IuaHRtbChhKTt2YXIgYz1iLnRleHQoKS5sZW5ndGg7cmV0dXJuIWN8fGM+PWY/KGQuJHNldFZhbGlkaXR5KFwidGFNaW5UZXh0XCIsITApLGEpOnZvaWQgZC4kc2V0VmFsaWRpdHkoXCJ0YU1pblRleHRcIiwhMSl9dmFyIGY9cGFyc2VJbnQoYS4kZXZhbChjLnRhTWluVGV4dCkpO2lmKGlzTmFOKGYpKXRocm93XCJNaW4gdGV4dCBtdXN0IGJlIGFuIGludGVnZXJcIjtjLiRvYnNlcnZlKFwidGFNaW5UZXh0XCIsZnVuY3Rpb24oYSl7aWYoZj1wYXJzZUludChhKSxpc05hTihmKSl0aHJvd1wiTWluIHRleHQgbXVzdCBiZSBhbiBpbnRlZ2VyXCI7ZC4kZGlydHkmJmQuJHNldFZpZXdWYWx1ZShkLiR2aWV3VmFsdWUpfSksZC4kcGFyc2Vycy51bnNoaWZ0KGUpfX19KSxhbmd1bGFyLm1vZHVsZShcInRleHRBbmd1bGFyLnRhQmluZFwiLFtcInRleHRBbmd1bGFyLmZhY3Rvcmllc1wiLFwidGV4dEFuZ3VsYXIuRE9NXCJdKS5zZXJ2aWNlKFwiX3RhQmxhbmtUZXN0XCIsW2Z1bmN0aW9uKCl7dmFyIGE9LzwoYXxhYmJyfGFjcm9ueW18YmRpfGJkb3xiaWd8Y2l0ZXxjb2RlfGRlbHxkZm58aW1nfGluc3xrYmR8bGFiZWx8bWFwfG1hcmt8cXxydWJ5fHJwfHJ0fHN8c2FtcHx0aW1lfHR0fHZhcilbXj5dKig+fCQpL2k7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbihjKXtpZighYylyZXR1cm4hMDt2YXIgZCxlPS8oXltePF18PilbXjxdL2kuZXhlYyhjKTtyZXR1cm4gZT9kPWUuaW5kZXg6KGM9Yy50b1N0cmluZygpLnJlcGxhY2UoLz1cIlteXCJdKlwiL2ksXCJcIikucmVwbGFjZSgvPVwiW15cIl0qXCIvaSxcIlwiKS5yZXBsYWNlKC89XCJbXlwiXSpcIi9pLFwiXCIpLnJlcGxhY2UoLz1cIlteXCJdKlwiL2ksXCJcIiksZD1jLmluZGV4T2YoXCI+XCIpKSxjPWMudHJpbSgpLnN1YnN0cmluZyhkLGQrMTAwKSwvXltePD5dKyQvaS50ZXN0KGMpPyExOjA9PT1jLmxlbmd0aHx8Yz09PWJ8fC9ePihcXHN8Jm5ic3A7KSo8XFwvW14+XSs+JC9naS50ZXN0KGMpPyEwOi8+XFxzKlteXFxzPF0vaS50ZXN0KGMpfHxhLnRlc3QoYyk/ITE6ITB9fX1dKS5kaXJlY3RpdmUoXCJ0YUJpbmRcIixbXCJ0YVNhbml0aXplXCIsXCIkdGltZW91dFwiLFwiJHdpbmRvd1wiLFwiJGRvY3VtZW50XCIsXCJ0YUZpeENocm9tZVwiLFwidGFCcm93c2VyVGFnXCIsXCJ0YVNlbGVjdGlvblwiLFwidGFTZWxlY3RhYmxlRWxlbWVudHNcIixcInRhQXBwbHlDdXN0b21SZW5kZXJlcnNcIixcInRhT3B0aW9uc1wiLFwiX3RhQmxhbmtUZXN0XCIsXCIkcGFyc2VcIixcInRhRE9NXCIsZnVuY3Rpb24oYSxiLGUsZixoLGosbCxtLG4sbyxxLHIscyl7cmV0dXJue3JlcXVpcmU6XCJuZ01vZGVsXCIsbGluazpmdW5jdGlvbihqLHQsdSx2KXt2YXIgdyx4LHkseixBPXZvaWQgMCE9PXQuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiKSYmdC5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIpLEI9QXx8XCJ0ZXh0YXJlYVwiPT09dFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCl8fFwiaW5wdXRcIj09PXRbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpLEM9ITEsRD0hMSxFPSExLEY9dS50YVVuc2FmZVNhbml0aXplcnx8by5kaXNhYmxlU2FuaXRpemVyLEc9L14oOXwxOXwyMHwyN3wzM3wzNHwzNXwzNnwzN3wzOHwzOXw0MHw0NXwxMTJ8MTEzfDExNHwxMTV8MTE2fDExN3wxMTh8MTE5fDEyMHwxMjF8MTIyfDEyM3wxNDR8MTQ1KSQvaSxIPS9eKDh8MTN8MzJ8NDZ8NTl8NjF8MTA3fDEwOXwxODZ8MTg3fDE4OHwxODl8MTkwfDE5MXwxOTJ8MjE5fDIyMHwyMjF8MjIyKSQvaTt2b2lkIDA9PT11LnRhRGVmYXVsdFdyYXAmJih1LnRhRGVmYXVsdFdyYXA9XCJwXCIpLFwiXCI9PT11LnRhRGVmYXVsdFdyYXA/KHk9XCJcIix6PXZvaWQgMD09PWMuaWU/XCI8ZGl2Pjxicj48L2Rpdj5cIjpjLmllPj0xMT9cIjxwPjxicj48L3A+XCI6Yy5pZTw9OD9cIjxQPiZuYnNwOzwvUD5cIjpcIjxwPiZuYnNwOzwvcD5cIik6KHk9dm9pZCAwPT09Yy5pZXx8Yy5pZT49MTE/XCI8XCIrdS50YURlZmF1bHRXcmFwK1wiPjxicj48L1wiK3UudGFEZWZhdWx0V3JhcCtcIj5cIjpjLmllPD04P1wiPFwiK3UudGFEZWZhdWx0V3JhcC50b1VwcGVyQ2FzZSgpK1wiPjwvXCIrdS50YURlZmF1bHRXcmFwLnRvVXBwZXJDYXNlKCkrXCI+XCI6XCI8XCIrdS50YURlZmF1bHRXcmFwK1wiPjwvXCIrdS50YURlZmF1bHRXcmFwK1wiPlwiLHo9dm9pZCAwPT09Yy5pZXx8Yy5pZT49MTE/XCI8XCIrdS50YURlZmF1bHRXcmFwK1wiPjxicj48L1wiK3UudGFEZWZhdWx0V3JhcCtcIj5cIjpjLmllPD04P1wiPFwiK3UudGFEZWZhdWx0V3JhcC50b1VwcGVyQ2FzZSgpK1wiPiZuYnNwOzwvXCIrdS50YURlZmF1bHRXcmFwLnRvVXBwZXJDYXNlKCkrXCI+XCI6XCI8XCIrdS50YURlZmF1bHRXcmFwK1wiPiZuYnNwOzwvXCIrdS50YURlZmF1bHRXcmFwK1wiPlwiKTt2YXIgST1xKHopO3UudGFQYXN0ZSYmKHg9cih1LnRhUGFzdGUpKSx0LmFkZENsYXNzKFwidGEtYmluZFwiKTt2YXIgSjtqW1wiJHVuZG9NYW5hZ2VyXCIrKHUuaWR8fFwiXCIpXT12LiR1bmRvTWFuYWdlcj17X3N0YWNrOltdLF9pbmRleDowLF9tYXg6MWUzLHB1c2g6ZnVuY3Rpb24oYSl7cmV0dXJuXCJ1bmRlZmluZWRcIj09dHlwZW9mIGF8fG51bGw9PT1hfHxcInVuZGVmaW5lZFwiIT10eXBlb2YgdGhpcy5jdXJyZW50KCkmJm51bGwhPT10aGlzLmN1cnJlbnQoKSYmYT09PXRoaXMuY3VycmVudCgpP2E6KHRoaXMuX2luZGV4PHRoaXMuX3N0YWNrLmxlbmd0aC0xJiYodGhpcy5fc3RhY2s9dGhpcy5fc3RhY2suc2xpY2UoMCx0aGlzLl9pbmRleCsxKSksdGhpcy5fc3RhY2sucHVzaChhKSxKJiZiLmNhbmNlbChKKSx0aGlzLl9zdGFjay5sZW5ndGg+dGhpcy5fbWF4JiZ0aGlzLl9zdGFjay5zaGlmdCgpLHRoaXMuX2luZGV4PXRoaXMuX3N0YWNrLmxlbmd0aC0xLGEpfSx1bmRvOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0VG9JbmRleCh0aGlzLl9pbmRleC0xKX0scmVkbzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNldFRvSW5kZXgodGhpcy5faW5kZXgrMSl9LHNldFRvSW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIDA+YXx8YT50aGlzLl9zdGFjay5sZW5ndGgtMT92b2lkIDA6KHRoaXMuX2luZGV4PWEsdGhpcy5jdXJyZW50KCkpfSxjdXJyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YWNrW3RoaXMuX2luZGV4XX19O3ZhciBLPWpbXCIkdW5kb1RhQmluZFwiKyh1LmlkfHxcIlwiKV09ZnVuY3Rpb24oKXtpZighQyYmQSl7dmFyIGE9di4kdW5kb01hbmFnZXIudW5kbygpO1widW5kZWZpbmVkXCIhPXR5cGVvZiBhJiZudWxsIT09YSYmKFkoYSksTihhLCExKSxsLnNldFNlbGVjdGlvblRvRWxlbWVudEVuZCh0WzBdLmNoaWxkTm9kZXMubGVuZ3RoP3RbMF0uY2hpbGROb2Rlc1t0WzBdLmNoaWxkTm9kZXMubGVuZ3RoLTFdOnRbMF0pKX19LEw9altcIiRyZWRvVGFCaW5kXCIrKHUuaWR8fFwiXCIpXT1mdW5jdGlvbigpe2lmKCFDJiZBKXt2YXIgYT12LiR1bmRvTWFuYWdlci5yZWRvKCk7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEmJm51bGwhPT1hJiYoWShhKSxOKGEsITEpLGwuc2V0U2VsZWN0aW9uVG9FbGVtZW50RW5kKHRbMF0uY2hpbGROb2Rlcy5sZW5ndGg/dFswXS5jaGlsZE5vZGVzW3RbMF0uY2hpbGROb2Rlcy5sZW5ndGgtMV06dFswXSkpfX0sTT1mdW5jdGlvbigpe2lmKEEpcmV0dXJuIHRbMF0uaW5uZXJIVE1MO2lmKEIpcmV0dXJuIHQudmFsKCk7dGhyb3dcInRleHRBbmd1bGFyIEVycm9yOiBhdHRlbXB0aW5nIHRvIHVwZGF0ZSBub24tZWRpdGFibGUgdGFCaW5kXCJ9LE49ZnVuY3Rpb24oYSxiKXtFPSEwLChcInVuZGVmaW5lZFwiPT10eXBlb2YgYnx8bnVsbD09PWIpJiYoYj0hMCYmQSksKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBhfHxudWxsPT09YSkmJihhPU0oKSksSShhKT8oXCJcIiE9PXYuJHZpZXdWYWx1ZSYmdi4kc2V0Vmlld1ZhbHVlKFwiXCIpLGImJlwiXCIhPT12LiR1bmRvTWFuYWdlci5jdXJyZW50KCkmJnYuJHVuZG9NYW5hZ2VyLnB1c2goXCJcIikpOihYKCksdi4kdmlld1ZhbHVlIT09YSYmKHYuJHNldFZpZXdWYWx1ZShhKSxiJiZ2LiR1bmRvTWFuYWdlci5wdXNoKGEpKSl9O2lmKGpbXCJ1cGRhdGVUYUJpbmRcIisodS5pZHx8XCJcIildPWZ1bmN0aW9uKCl7Q3x8TigpfSxCKWlmKGouZXZlbnRzPXt9LEEpe3ZhciBPPSExLFA9ZnVuY3Rpb24oYyl7aWYoYyYmYy50cmltKCkubGVuZ3RoKXtpZihjLm1hdGNoKC9jbGFzcz1bXCInXSpNc28oTm9ybWFsfExpc3QpL2kpKXt2YXIgZD1jLm1hdGNoKC88IS0tU3RhcnRGcmFnbWVudC0tPihbXFxzXFxTXSo/KTwhLS1FbmRGcmFnbWVudC0tPi9pKTtkPWQ/ZFsxXTpjLGQ9ZC5yZXBsYWNlKC88bzpwPltcXHNcXFNdKj88XFwvbzpwPi9naSxcIlwiKS5yZXBsYWNlKC9jbGFzcz0oW1wiJ118KU1zb05vcm1hbChbXCInXXwpL2dpLFwiXCIpO3ZhciBlPWFuZ3VsYXIuZWxlbWVudChcIjxkaXY+XCIrZCtcIjwvZGl2PlwiKSxmPWFuZ3VsYXIuZWxlbWVudChcIjxkaXY+PC9kaXY+XCIpLGc9e2VsZW1lbnQ6bnVsbCxsYXN0SW5kZW50OltdLGxhc3RMaTpudWxsLGlzVWw6ITF9O2cubGFzdEluZGVudC5wZWVrPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sZW5ndGg7cmV0dXJuIGE+MD90aGlzW2EtMV06dm9pZCAwfTtmb3IodmFyIGg9ZnVuY3Rpb24oYSl7Zy5pc1VsPWEsZy5lbGVtZW50PWFuZ3VsYXIuZWxlbWVudChhP1wiPHVsPlwiOlwiPG9sPlwiKSxnLmxhc3RJbmRlbnQ9W10sZy5sYXN0SW5kZW50LnBlZWs9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxlbmd0aDtyZXR1cm4gYT4wP3RoaXNbYS0xXTp2b2lkIDB9LGcubGFzdExldmVsTWF0Y2g9bnVsbH0saT0wO2k8PWVbMF0uY2hpbGROb2Rlcy5sZW5ndGg7aSsrKWlmKGVbMF0uY2hpbGROb2Rlc1tpXSYmXCIjdGV4dFwiIT09ZVswXS5jaGlsZE5vZGVzW2ldLm5vZGVOYW1lJiZcInBcIj09PWVbMF0uY2hpbGROb2Rlc1tpXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpe3ZhciBrPWFuZ3VsYXIuZWxlbWVudChlWzBdLmNoaWxkTm9kZXNbaV0pLG09KGsuYXR0cihcImNsYXNzXCIpfHxcIlwiKS5tYXRjaCgvTXNvTGlzdChCdWxsZXR8TnVtYmVyfFBhcmFncmFwaCkoQ3hTcChGaXJzdHxNaWRkbGV8TGFzdCl8KS9pKTtpZihtKXtpZihrWzBdLmNoaWxkTm9kZXMubGVuZ3RoPDJ8fGtbMF0uY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzLmxlbmd0aDwxKWNvbnRpbnVlO3ZhciBuPVwiYnVsbGV0XCI9PT1tWzFdLnRvTG93ZXJDYXNlKCl8fFwibnVtYmVyXCIhPT1tWzFdLnRvTG93ZXJDYXNlKCkmJiEoL15bXjAtOWEtejxdKlswLTlhLXpdK1teMC05YS16PD5dPC9pLnRlc3Qoa1swXS5jaGlsZE5vZGVzWzFdLmlubmVySFRNTCl8fC9eW14wLTlhLXo8XSpbMC05YS16XStbXjAtOWEtejw+XTwvaS50ZXN0KGtbMF0uY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLmlubmVySFRNTCkpLG89KGsuYXR0cihcInN0eWxlXCIpfHxcIlwiKS5tYXRjaCgvbWFyZ2luLWxlZnQ6KFtcXC1cXC4wLTldKikvaSkscD1wYXJzZUZsb2F0KG8/b1sxXTowKSxxPShrLmF0dHIoXCJzdHlsZVwiKXx8XCJcIikubWF0Y2goL21zby1saXN0OmwoWzAtOV0rKSBsZXZlbChbMC05XSspIGxmb1swLTkrXSgkfDspL2kpO2lmKHEmJnFbMl0mJihwPXBhcnNlSW50KHFbMl0pKSxxJiYoIWcubGFzdExldmVsTWF0Y2h8fHFbMV0hPT1nLmxhc3RMZXZlbE1hdGNoWzFdKXx8IW1bM118fFwiZmlyc3RcIj09PW1bM10udG9Mb3dlckNhc2UoKXx8bnVsbD09PWcubGFzdEluZGVudC5wZWVrKCl8fGcuaXNVbCE9PW4mJmcubGFzdEluZGVudC5wZWVrKCk9PT1wKWgobiksZi5hcHBlbmQoZy5lbGVtZW50KTtlbHNlIGlmKG51bGwhPWcubGFzdEluZGVudC5wZWVrKCkmJmcubGFzdEluZGVudC5wZWVrKCk8cClnLmVsZW1lbnQ9YW5ndWxhci5lbGVtZW50KG4/XCI8dWw+XCI6XCI8b2w+XCIpLGcubGFzdExpLmFwcGVuZChnLmVsZW1lbnQpO2Vsc2UgaWYobnVsbCE9Zy5sYXN0SW5kZW50LnBlZWsoKSYmZy5sYXN0SW5kZW50LnBlZWsoKT5wKXtmb3IoO251bGwhPWcubGFzdEluZGVudC5wZWVrKCkmJmcubGFzdEluZGVudC5wZWVrKCk+cDspaWYoXCJsaVwiIT09Zy5lbGVtZW50LnBhcmVudCgpWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSl7aWYoIS9bdW9dbC9pLnRlc3QoZy5lbGVtZW50LnBhcmVudCgpWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkpYnJlYWs7Zy5lbGVtZW50PWcuZWxlbWVudC5wYXJlbnQoKSxnLmxhc3RJbmRlbnQucG9wKCl9ZWxzZSBnLmVsZW1lbnQ9Zy5lbGVtZW50LnBhcmVudCgpO2cuaXNVbD1cInVsXCI9PT1nLmVsZW1lbnRbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpLG4hPT1nLmlzVWwmJihoKG4pLGYuYXBwZW5kKGcuZWxlbWVudCkpfWcubGFzdExldmVsTWF0Y2g9cSxwIT09Zy5sYXN0SW5kZW50LnBlZWsoKSYmZy5sYXN0SW5kZW50LnB1c2gocCksZy5sYXN0TGk9YW5ndWxhci5lbGVtZW50KFwiPGxpPlwiKSxnLmVsZW1lbnQuYXBwZW5kKGcubGFzdExpKSxnLmxhc3RMaS5odG1sKGsuaHRtbCgpLnJlcGxhY2UoLzwhKC0tfClcXFtpZiAhc3VwcG9ydExpc3RzXFxdKC0tfCk+W1xcc1xcU10qPzwhKC0tfClcXFtlbmRpZlxcXSgtLXwpPi9naSxcIlwiKSksay5yZW1vdmUoKX1lbHNlIGgoITEpLGYuYXBwZW5kKGspfXZhciByPWZ1bmN0aW9uKGEpe2E9YW5ndWxhci5lbGVtZW50KGEpO2Zvcih2YXIgYj1hWzBdLmNoaWxkTm9kZXMubGVuZ3RoLTE7Yj49MDtiLS0pYS5hZnRlcihhWzBdLmNoaWxkTm9kZXNbYl0pO2EucmVtb3ZlKCl9O2FuZ3VsYXIuZm9yRWFjaChmLmZpbmQoXCJzcGFuXCIpLGZ1bmN0aW9uKGEpe2EucmVtb3ZlQXR0cmlidXRlKFwibGFuZ1wiKSxhLmF0dHJpYnV0ZXMubGVuZ3RoPD0wJiZyKGEpfSksYW5ndWxhci5mb3JFYWNoKGYuZmluZChcImZvbnRcIiksciksYz1mLmh0bWwoKX1lbHNle2lmKGM9Yy5yZXBsYWNlKC88KHxcXC8pbWV0YVtePl0qPz4vZ2ksXCJcIiksYy5tYXRjaCgvPFtePl0qPyh0YS1iaW5kKVtePl0qPz4vKSl7aWYoYy5tYXRjaCgvPFtePl0qPyh0ZXh0LWFuZ3VsYXIpW14+XSo/Pi8pKXt2YXIgdT1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2PlwiK2MrXCI8L2Rpdj5cIik7dS5maW5kKFwidGV4dGFyZWFcIikucmVtb3ZlKCk7Zm9yKHZhciB3PXMuZ2V0QnlBdHRyaWJ1dGUodSxcInRhLWJpbmRcIikseT0wO3k8dy5sZW5ndGg7eSsrKXtmb3IodmFyIHo9d1t5XVswXS5wYXJlbnROb2RlLnBhcmVudE5vZGUsQT0wO0E8d1t5XVswXS5jaGlsZE5vZGVzLmxlbmd0aDtBKyspei5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh3W3ldWzBdLmNoaWxkTm9kZXNbQV0seik7ei5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHopfWM9dS5odG1sKCkucmVwbGFjZSgnPGJyIGNsYXNzPVwiQXBwbGUtaW50ZXJjaGFuZ2UtbmV3bGluZVwiPicsXCJcIil9fWVsc2UgYy5tYXRjaCgvXjxzcGFuLykmJihjPWMucmVwbGFjZSgvPCh8XFwvKXNwYW5bXj5dKj8+L2dpLFwiXCIpKTtjPWMucmVwbGFjZSgvPGJyIGNsYXNzPVwiQXBwbGUtaW50ZXJjaGFuZ2UtbmV3bGluZVwiW14+XSo/Pi9naSxcIlwiKS5yZXBsYWNlKC88c3BhbiBjbGFzcz1cIkFwcGxlLWNvbnZlcnRlZC1zcGFjZVwiPiggfCZuYnNwOyk8XFwvc3Bhbj4vZ2ksXCImbmJzcDtcIil9Yz1hKGMsXCJcIixGKSx4JiYoYz14KGoseyRodG1sOmN9KXx8YyksbC5pbnNlcnRIdG1sKGMsdFswXSksYihmdW5jdGlvbigpe3YuJHNldFZpZXdWYWx1ZShNKCkpLE89ITEsdC5yZW1vdmVDbGFzcyhcInByb2Nlc3NpbmctcGFzdGVcIil9LDApfWVsc2UgTz0hMSx0LnJlbW92ZUNsYXNzKFwicHJvY2Vzc2luZy1wYXN0ZVwiKX07aWYodC5vbihcInBhc3RlXCIsai5ldmVudHMucGFzdGU9ZnVuY3Rpb24oYSxjKXtpZihjJiZhbmd1bGFyLmV4dGVuZChhLGMpLEN8fE8pcmV0dXJuIGEuc3RvcFByb3BhZ2F0aW9uKCksYS5wcmV2ZW50RGVmYXVsdCgpLCExO089ITAsdC5hZGRDbGFzcyhcInByb2Nlc3NpbmctcGFzdGVcIik7dmFyIGQsZz0oYS5vcmlnaW5hbEV2ZW50fHxhKS5jbGlwYm9hcmREYXRhO2lmKGcmJmcuZ2V0RGF0YSl7Zm9yKHZhciBoPVwiXCIsaT0wO2k8Zy50eXBlcy5sZW5ndGg7aSsrKWgrPVwiIFwiK2cudHlwZXNbaV07cmV0dXJuL3RleHRcXC9odG1sL2kudGVzdChoKT9kPWcuZ2V0RGF0YShcInRleHQvaHRtbFwiKTovdGV4dFxcL3BsYWluL2kudGVzdChoKSYmKGQ9Zy5nZXREYXRhKFwidGV4dC9wbGFpblwiKSksUChkKSxhLnN0b3BQcm9wYWdhdGlvbigpLGEucHJldmVudERlZmF1bHQoKSwhMX12YXIgaj1lLnJhbmd5LnNhdmVTZWxlY3Rpb24oKSxrPWFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cInRhLWhpZGRlbi1pbnB1dFwiIGNvbnRlbnRlZGl0YWJsZT1cInRydWVcIj48L2Rpdj4nKTtmLmZpbmQoXCJib2R5XCIpLmFwcGVuZChrKSxrWzBdLmZvY3VzKCksYihmdW5jdGlvbigpe2UucmFuZ3kucmVzdG9yZVNlbGVjdGlvbihqKSxQKGtbMF0uaW5uZXJIVE1MKSxrLnJlbW92ZSgpLHRbMF0uZm9jdXMoKX0sMCl9KSx0Lm9uKFwiY3V0XCIsai5ldmVudHMuY3V0PWZ1bmN0aW9uKGEpe0M/YS5wcmV2ZW50RGVmYXVsdCgpOmIoZnVuY3Rpb24oKXt2LiRzZXRWaWV3VmFsdWUoTSgpKX0sMCl9KSx0Lm9uKFwia2V5ZG93blwiLGouZXZlbnRzLmtleWRvd249ZnVuY3Rpb24oYSxiKXtpZihiJiZhbmd1bGFyLmV4dGVuZChhLGIpLCFDKWlmKCFhLmFsdEtleSYmYS5tZXRhS2V5fHxhLmN0cmxLZXkpOTAhPT1hLmtleUNvZGV8fGEuc2hpZnRLZXk/KDkwPT09YS5rZXlDb2RlJiZhLnNoaWZ0S2V5fHw4OT09PWEua2V5Q29kZSYmIWEuc2hpZnRLZXkpJiYoTCgpLGEucHJldmVudERlZmF1bHQoKSk6KEsoKSxhLnByZXZlbnREZWZhdWx0KCkpO2Vsc2UgaWYoMTM9PT1hLmtleUNvZGUmJiFhLnNoaWZ0S2V5KXt2YXIgYz1sLmdldFNlbGVjdGlvbkVsZW1lbnQoKTtpZighYy50YWdOYW1lLm1hdGNoKGcpKXJldHVybjt2YXIgZD1hbmd1bGFyLmVsZW1lbnQoeSk7aWYoL148YnIofFxcLyk+JC9pLnRlc3QoYy5pbm5lckhUTUwudHJpbSgpKSYmXCJibG9ja3F1b3RlXCI9PT1jLnBhcmVudE5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYhYy5uZXh0U2libGluZyl7JHNlbGVjdGlvbj1hbmd1bGFyLmVsZW1lbnQoYyk7dmFyIGU9JHNlbGVjdGlvbi5wYXJlbnQoKTtlLmFmdGVyKGQpLCRzZWxlY3Rpb24ucmVtb3ZlKCksMD09PWUuY2hpbGRyZW4oKS5sZW5ndGgmJmUucmVtb3ZlKCksbC5zZXRTZWxlY3Rpb25Ub0VsZW1lbnRTdGFydChkWzBdKSxhLnByZXZlbnREZWZhdWx0KCl9ZWxzZS9ePFtePl0rPjxicih8XFwvKT48XFwvW14+XSs+JC9pLnRlc3QoYy5pbm5lckhUTUwudHJpbSgpKSYmXCJibG9ja3F1b3RlXCI9PT1jLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmKCRzZWxlY3Rpb249YW5ndWxhci5lbGVtZW50KGMpLCRzZWxlY3Rpb24uYWZ0ZXIoZCksJHNlbGVjdGlvbi5yZW1vdmUoKSxsLnNldFNlbGVjdGlvblRvRWxlbWVudFN0YXJ0KGRbMF0pLGEucHJldmVudERlZmF1bHQoKSl9fSksdC5vbihcImtleXVwXCIsai5ldmVudHMua2V5dXA9ZnVuY3Rpb24oYSxjKXtpZihjJiZhbmd1bGFyLmV4dGVuZChhLGMpLEomJmIuY2FuY2VsKEopLCFDJiYhRy50ZXN0KGEua2V5Q29kZSkpe2lmKFwiXCIhPT15JiYxMz09PWEua2V5Q29kZSYmIWEuc2hpZnRLZXkpe2Zvcih2YXIgZD1sLmdldFNlbGVjdGlvbkVsZW1lbnQoKTshZC50YWdOYW1lLm1hdGNoKGcpJiZkIT09dFswXTspZD1kLnBhcmVudE5vZGU7aWYoZC50YWdOYW1lLnRvTG93ZXJDYXNlKCkhPT11LnRhRGVmYXVsdFdyYXAmJlwibGlcIiE9PWQudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYoXCJcIj09PWQuaW5uZXJIVE1MLnRyaW0oKXx8XCI8YnI+XCI9PT1kLmlubmVySFRNTC50cmltKCkpKXt2YXIgZj1hbmd1bGFyLmVsZW1lbnQoeSk7YW5ndWxhci5lbGVtZW50KGQpLnJlcGxhY2VXaXRoKGYpLGwuc2V0U2VsZWN0aW9uVG9FbGVtZW50U3RhcnQoZlswXSl9fXZhciBoPU0oKTtpZihcIlwiIT09eSYmXCJcIj09PWgudHJpbSgpKVkoeSksbC5zZXRTZWxlY3Rpb25Ub0VsZW1lbnRTdGFydCh0LmNoaWxkcmVuKClbMF0pO2Vsc2UgaWYoXCI8XCIhPT1oLnN1YnN0cmluZygwLDEpJiZcIlwiIT09dS50YURlZmF1bHRXcmFwKXt2YXIgaT1lLnJhbmd5LnNhdmVTZWxlY3Rpb24oKTtoPU0oKSxoPVwiPFwiK3UudGFEZWZhdWx0V3JhcCtcIj5cIitoK1wiPC9cIit1LnRhRGVmYXVsdFdyYXArXCI+XCIsWShoKSxlLnJhbmd5LnJlc3RvcmVTZWxlY3Rpb24oaSl9dmFyIGo9dyE9PWEua2V5Q29kZSYmSC50ZXN0KGEua2V5Q29kZSk7TihoLGopLGp8fChKPWIoZnVuY3Rpb24oKXt2LiR1bmRvTWFuYWdlci5wdXNoKGgpfSwyNTApKSx3PWEua2V5Q29kZX19KSx0Lm9uKFwiYmx1clwiLGouZXZlbnRzLmJsdXI9ZnVuY3Rpb24oKXtEPSExLEN8fE4oKSxFPSEwLHYuJHJlbmRlcigpfSksdS5wbGFjZWhvbGRlciYmKGMuaWU+OHx8dm9pZCAwPT09Yy5pZSkpe3ZhciBRO2lmKCF1LmlkKXRocm93XCJ0ZXh0QW5ndWxhciBFcnJvcjogQW4gdW5pcXVlIElEIGlzIHJlcXVpcmVkIGZvciBwbGFjZWhvbGRlcnMgdG8gd29ya1wiO1E9aShcIiNcIit1LmlkK1wiLnBsYWNlaG9sZGVyLXRleHQ6YmVmb3JlXCIsJ2NvbnRlbnQ6IFwiJyt1LnBsYWNlaG9sZGVyKydcIicpLGouJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2soUSl9KX10Lm9uKFwiZm9jdXNcIixqLmV2ZW50cy5mb2N1cz1mdW5jdGlvbigpe0Q9ITAsdC5yZW1vdmVDbGFzcyhcInBsYWNlaG9sZGVyLXRleHRcIil9KSx0Lm9uKFwibW91c2V1cFwiLGouZXZlbnRzLm1vdXNldXA9ZnVuY3Rpb24oKXt2YXIgYT1sLmdldFNlbGVjdGlvbigpO2Euc3RhcnQuZWxlbWVudD09PXRbMF0mJnQuY2hpbGRyZW4oKS5sZW5ndGgmJmwuc2V0U2VsZWN0aW9uVG9FbGVtZW50U3RhcnQodC5jaGlsZHJlbigpWzBdKX0pLHQub24oXCJtb3VzZWRvd25cIixqLmV2ZW50cy5tb3VzZWRvd249ZnVuY3Rpb24oYSxiKXtiJiZhbmd1bGFyLmV4dGVuZChhLGIpLGEuc3RvcFByb3BhZ2F0aW9uKCl9KX1lbHNle3Qub24oXCJjaGFuZ2UgYmx1clwiLGouZXZlbnRzLmNoYW5nZT1qLmV2ZW50cy5ibHVyPWZ1bmN0aW9uKCl7Q3x8di4kc2V0Vmlld1ZhbHVlKE0oKSl9KSx0Lm9uKFwia2V5ZG93blwiLGouZXZlbnRzLmtleWRvd249ZnVuY3Rpb24oYSxiKXtpZihiJiZhbmd1bGFyLmV4dGVuZChhLGIpLDk9PT1hLmtleUNvZGUpe3ZhciBjPXRoaXMuc2VsZWN0aW9uU3RhcnQsZD10aGlzLnNlbGVjdGlvbkVuZCxlPXQudmFsKCk7aWYoYS5zaGlmdEtleSl7dmFyIGY9ZS5sYXN0SW5kZXhPZihcIlxcblwiLGMpLGc9ZS5sYXN0SW5kZXhPZihcIlx0XCIsYyk7LTEhPT1nJiZnPj1mJiYodC52YWwoZS5zdWJzdHJpbmcoMCxnKStlLnN1YnN0cmluZyhnKzEpKSx0aGlzLnNlbGVjdGlvblN0YXJ0PXRoaXMuc2VsZWN0aW9uRW5kPWMtMSl9ZWxzZSB0LnZhbChlLnN1YnN0cmluZygwLGMpK1wiXHRcIitlLnN1YnN0cmluZyhkKSksdGhpcy5zZWxlY3Rpb25TdGFydD10aGlzLnNlbGVjdGlvbkVuZD1jKzE7YS5wcmV2ZW50RGVmYXVsdCgpfX0pO3ZhciBSPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVwiXCIsZD0wO2I+ZDtkKyspYys9YTtyZXR1cm4gY30sUz1mdW5jdGlvbihhLGIpe3ZhciBjPVwiXCIsZD1hLmNoaWxkTm9kZXM7YisrLGMrPVIoXCJcdFwiLGItMSkrYS5vdXRlckhUTUwuc3Vic3RyaW5nKDAsYS5vdXRlckhUTUwuaW5kZXhPZihcIjxsaVwiKSk7Zm9yKHZhciBlPTA7ZTxkLmxlbmd0aDtlKyspZFtlXS5vdXRlckhUTUwmJihjKz1cInVsXCI9PT1kW2VdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCl8fFwib2xcIj09PWRbZV0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT9cIlxcblwiK1MoZFtlXSxiKTpcIlxcblwiK1IoXCJcdFwiLGIpK2RbZV0ub3V0ZXJIVE1MKTtyZXR1cm4gYys9XCJcXG5cIitSKFwiXHRcIixiLTEpK2Eub3V0ZXJIVE1MLnN1YnN0cmluZyhhLm91dGVySFRNTC5sYXN0SW5kZXhPZihcIjxcIikpfTt2LiRmb3JtYXR0ZXJzLnVuc2hpZnQoZnVuY3Rpb24oYSl7dmFyIGI9YW5ndWxhci5lbGVtZW50KFwiPGRpdj5cIithK1wiPC9kaXY+XCIpWzBdLmNoaWxkTm9kZXM7aWYoYi5sZW5ndGg+MCl7YT1cIlwiO2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKWJbY10ub3V0ZXJIVE1MJiYoYS5sZW5ndGg+MCYmKGErPVwiXFxuXCIpLGErPVwidWxcIj09PWJbY10ubm9kZU5hbWUudG9Mb3dlckNhc2UoKXx8XCJvbFwiPT09YltjXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpP1wiXCIrUyhiW2NdLDApOlwiXCIrYltjXS5vdXRlckhUTUwpfXJldHVybiBhfSl9dmFyIFQ9ZnVuY3Rpb24oYil7cmV0dXJuIHYuJG9sZFZpZXdWYWx1ZT1hKGgoYiksdi4kb2xkVmlld1ZhbHVlLEYpfSxVPWZ1bmN0aW9uKGEpe3JldHVybiB1LnJlcXVpcmVkJiZ2LiRzZXRWYWxpZGl0eShcInJlcXVpcmVkXCIsIUkoYSkpLGF9O3YuJHBhcnNlcnMucHVzaChUKSx2LiRwYXJzZXJzLnVuc2hpZnQoVSksdi4kZm9ybWF0dGVycy5wdXNoKFQpLHYuJGZvcm1hdHRlcnMudW5zaGlmdChmdW5jdGlvbihhKXtpZihJKGEpKXJldHVybiBhO3ZhciBiPWFuZ3VsYXIuZWxlbWVudChcIjxkaXY+XCIrYStcIjwvZGl2PlwiKTtyZXR1cm4gMD09PWIuY2hpbGRyZW4oKS5sZW5ndGgmJihhPVwiPFwiK3UudGFEZWZhdWx0V3JhcCtcIj5cIithK1wiPC9cIit1LnRhRGVmYXVsdFdyYXArXCI+XCIpLGF9KSx2LiRmb3JtYXR0ZXJzLnVuc2hpZnQoVSksdi4kZm9ybWF0dGVycy51bnNoaWZ0KGZ1bmN0aW9uKGEpe3JldHVybiB2LiR1bmRvTWFuYWdlci5wdXNoKGF8fFwiXCIpfSk7dmFyIFY9ZnVuY3Rpb24oYSl7cmV0dXJuIGouJGVtaXQoXCJ0YS1lbGVtZW50LXNlbGVjdFwiLHRoaXMpLGEucHJldmVudERlZmF1bHQoKSwhMX0sVz1mdW5jdGlvbihhLGMpe2lmKGMmJmFuZ3VsYXIuZXh0ZW5kKGEsYyksIXAmJiFDKXtwPSEwO3ZhciBkO2Q9YS5vcmlnaW5hbEV2ZW50P2Eub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXI6YS5kYXRhVHJhbnNmZXIsai4kZW1pdChcInRhLWRyb3AtZXZlbnRcIix0aGlzLGEsZCksYihmdW5jdGlvbigpe3A9ITEsTigpfSwxMDApfX0sWD1qW1wicmVBcHBseU9uU2VsZWN0b3JIYW5kbGVyc1wiKyh1LmlkfHxcIlwiKV09ZnVuY3Rpb24oKXtDfHxhbmd1bGFyLmZvckVhY2gobSxmdW5jdGlvbihhKXt0LmZpbmQoYSkub2ZmKFwiY2xpY2tcIixWKS5vbihcImNsaWNrXCIsVil9KX0sWT1mdW5jdGlvbihhKXt0WzBdLmlubmVySFRNTD1hfTt2LiRyZW5kZXI9ZnVuY3Rpb24oKXt2YXIgYT12LiR2aWV3VmFsdWV8fFwiXCI7RXx8KEEmJkQmJih0LnJlbW92ZUNsYXNzKFwicGxhY2Vob2xkZXItdGV4dFwiKSx0WzBdLmJsdXIoKSxiKGZ1bmN0aW9uKCl7dFswXS5mb2N1cygpLGwuc2V0U2VsZWN0aW9uVG9FbGVtZW50RW5kKHQuY2hpbGRyZW4oKVt0LmNoaWxkcmVuKCkubGVuZ3RoLTFdKX0sMSkpLEE/KFkodS5wbGFjZWhvbGRlcj9cIlwiPT09YT95OmE6XCJcIj09PWE/eTphKSxDP3Qub2ZmKFwiZHJvcFwiLFcpOihYKCksdC5vbihcImRyb3BcIixXKSkpOlwidGV4dGFyZWFcIiE9PXRbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpJiZcImlucHV0XCIhPT10WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKT9ZKG4oYSkpOnQudmFsKGEpKSxBJiZ1LnBsYWNlaG9sZGVyJiYoXCJcIj09PWE/RD90LnJlbW92ZUNsYXNzKFwicGxhY2Vob2xkZXItdGV4dFwiKTp0LmFkZENsYXNzKFwicGxhY2Vob2xkZXItdGV4dFwiKTp0LnJlbW92ZUNsYXNzKFwicGxhY2Vob2xkZXItdGV4dFwiKSksRT0hMX0sdS50YVJlYWRvbmx5JiYoQz1qLiRldmFsKHUudGFSZWFkb25seSksQz8odC5hZGRDbGFzcyhcInRhLXJlYWRvbmx5XCIpLChcInRleHRhcmVhXCI9PT10WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKXx8XCJpbnB1dFwiPT09dFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpJiZ0LmF0dHIoXCJkaXNhYmxlZFwiLFwiZGlzYWJsZWRcIiksdm9pZCAwIT09dC5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIpJiZ0LmF0dHIoXCJjb250ZW50ZWRpdGFibGVcIikmJnQucmVtb3ZlQXR0cihcImNvbnRlbnRlZGl0YWJsZVwiKSk6KHQucmVtb3ZlQ2xhc3MoXCJ0YS1yZWFkb25seVwiKSxcInRleHRhcmVhXCI9PT10WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKXx8XCJpbnB1dFwiPT09dFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCk/dC5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIik6QSYmdC5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIsXCJ0cnVlXCIpKSxqLiR3YXRjaCh1LnRhUmVhZG9ubHksZnVuY3Rpb24oYSxiKXtiIT09YSYmKGE/KHQuYWRkQ2xhc3MoXCJ0YS1yZWFkb25seVwiKSwoXCJ0ZXh0YXJlYVwiPT09dFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCl8fFwiaW5wdXRcIj09PXRbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpKSYmdC5hdHRyKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpLHZvaWQgMCE9PXQuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiKSYmdC5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIpJiZ0LnJlbW92ZUF0dHIoXCJjb250ZW50ZWRpdGFibGVcIiksYW5ndWxhci5mb3JFYWNoKG0sZnVuY3Rpb24oYSl7dC5maW5kKGEpLm9uKFwiY2xpY2tcIixWKX0pLHQub2ZmKFwiZHJvcFwiLFcpKToodC5yZW1vdmVDbGFzcyhcInRhLXJlYWRvbmx5XCIpLFwidGV4dGFyZWFcIj09PXRbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxcImlucHV0XCI9PT10WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKT90LnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTpBJiZ0LmF0dHIoXCJjb250ZW50ZWRpdGFibGVcIixcInRydWVcIiksYW5ndWxhci5mb3JFYWNoKG0sZnVuY3Rpb24oYSl7dC5maW5kKGEpLm9mZihcImNsaWNrXCIsVil9KSx0Lm9uKFwiZHJvcFwiLFcpKSxDPWEpfSkpLEEmJiFDJiYoYW5ndWxhci5mb3JFYWNoKG0sZnVuY3Rpb24oYSl7dC5maW5kKGEpLm9uKFwiY2xpY2tcIixWKX0pLHQub24oXCJkcm9wXCIsVyksdC5vbihcImJsdXJcIixmdW5jdGlvbigpe2Mud2Via2l0JiYoZD0hMCl9KSl9fX1dKTt2YXIgcD0hMSxxPWFuZ3VsYXIubW9kdWxlKFwidGV4dEFuZ3VsYXJcIixbXCJuZ1Nhbml0aXplXCIsXCJ0ZXh0QW5ndWxhclNldHVwXCIsXCJ0ZXh0QW5ndWxhci5mYWN0b3JpZXNcIixcInRleHRBbmd1bGFyLkRPTVwiLFwidGV4dEFuZ3VsYXIudmFsaWRhdG9yc1wiLFwidGV4dEFuZ3VsYXIudGFCaW5kXCJdKSxyPXt9O3EuY29uc3RhbnQoXCJ0YVJlZ2lzdGVyVG9vbFwiLGIpLHEudmFsdWUoXCJ0YVRvb2xzXCIscikscS5jb25maWcoW2Z1bmN0aW9uKCl7YW5ndWxhci5mb3JFYWNoKHIsZnVuY3Rpb24oYSxiKXtkZWxldGUgcltiXX0pfV0pLHEucnVuKFtmdW5jdGlvbigpe2lmKCF3aW5kb3cucmFuZ3kpdGhyb3dcInJhbmd5LWNvcmUuanMgYW5kIHJhbmd5LXNlbGVjdGlvbnNhdmVyZXN0b3JlLmpzIGFyZSByZXF1aXJlZCBmb3IgdGV4dEFuZ3VsYXIgdG8gd29yayBjb3JyZWN0bHksIHJhbmd5LWNvcmUgaXMgbm90IHlldCBsb2FkZWQuXCI7aWYod2luZG93LnJhbmd5LmluaXQoKSwhd2luZG93LnJhbmd5LnNhdmVTZWxlY3Rpb24pdGhyb3dcInJhbmd5LXNlbGVjdGlvbnNhdmVyZXN0b3JlLmpzIGlzIHJlcXVpcmVkIGZvciB0ZXh0QW5ndWxhciB0byB3b3JrIGNvcnJlY3RseS5cIn1dKSxxLmRpcmVjdGl2ZShcInRleHRBbmd1bGFyXCIsW1wiJGNvbXBpbGVcIixcIiR0aW1lb3V0XCIsXCJ0YU9wdGlvbnNcIixcInRhU2VsZWN0aW9uXCIsXCJ0YUV4ZWNDb21tYW5kXCIsXCJ0ZXh0QW5ndWxhck1hbmFnZXJcIixcIiR3aW5kb3dcIixcIiRkb2N1bWVudFwiLFwiJGFuaW1hdGVcIixcIiRsb2dcIixcIiRxXCIsXCIkcGFyc2VcIixmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSxqLGssbCl7cmV0dXJue3JlcXVpcmU6XCI/bmdNb2RlbFwiLHNjb3BlOnt9LHJlc3RyaWN0OlwiRUFcIixsaW5rOmZ1bmN0aW9uKG0sbixvLHApe3ZhciBxLHIscyx0LHUsdix3LHgseSx6LEE9by5zZXJpYWw/by5zZXJpYWw6TWF0aC5mbG9vcigxZTE2Kk1hdGgucmFuZG9tKCkpO20uX25hbWU9by5uYW1lP28ubmFtZTpcInRleHRBbmd1bGFyRWRpdG9yXCIrQTt2YXIgQj1mdW5jdGlvbihhLGMsZCl7YihmdW5jdGlvbigpe3ZhciBiPWZ1bmN0aW9uKCl7YS5vZmYoYyxiKSxkLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07YS5vbihjLGIpfSwxMDApfTt5PWUoby50YURlZmF1bHRXcmFwKSxhbmd1bGFyLmV4dGVuZChtLGFuZ3VsYXIuY29weShjKSx7d3JhcFNlbGVjdGlvbjpmdW5jdGlvbihhLGIsYyl7XCJ1bmRvXCI9PT1hLnRvTG93ZXJDYXNlKCk/bVtcIiR1bmRvVGFCaW5kdGFUZXh0RWxlbWVudFwiK0FdKCk6XCJyZWRvXCI9PT1hLnRvTG93ZXJDYXNlKCk/bVtcIiRyZWRvVGFCaW5kdGFUZXh0RWxlbWVudFwiK0FdKCk6KHkoYSwhMSxiKSxjJiZtW1wicmVBcHBseU9uU2VsZWN0b3JIYW5kbGVyc3RhVGV4dEVsZW1lbnRcIitBXSgpLG0uZGlzcGxheUVsZW1lbnRzLnRleHRbMF0uZm9jdXMoKSl9LHNob3dIdG1sOm0uJGV2YWwoby50YVNob3dIdG1sKXx8ITF9KSxvLnRhRm9jdXNzZWRDbGFzcyYmKG0uY2xhc3Nlcy5mb2N1c3NlZD1vLnRhRm9jdXNzZWRDbGFzcyksby50YVRleHRFZGl0b3JDbGFzcyYmKG0uY2xhc3Nlcy50ZXh0RWRpdG9yPW8udGFUZXh0RWRpdG9yQ2xhc3MpLG8udGFIdG1sRWRpdG9yQ2xhc3MmJihtLmNsYXNzZXMuaHRtbEVkaXRvcj1vLnRhSHRtbEVkaXRvckNsYXNzKSxvLnRhVGV4dEVkaXRvclNldHVwJiYobS5zZXR1cC50ZXh0RWRpdG9yU2V0dXA9bS4kcGFyZW50LiRldmFsKG8udGFUZXh0RWRpdG9yU2V0dXApKSxvLnRhSHRtbEVkaXRvclNldHVwJiYobS5zZXR1cC5odG1sRWRpdG9yU2V0dXA9bS4kcGFyZW50LiRldmFsKG8udGFIdG1sRWRpdG9yU2V0dXApKSxtLmZpbGVEcm9wSGFuZGxlcj1vLnRhRmlsZURyb3A/bS4kcGFyZW50LiRldmFsKG8udGFGaWxlRHJvcCk6bS5kZWZhdWx0RmlsZURyb3BIYW5kbGVyLHc9blswXS5pbm5lckhUTUwsblswXS5pbm5lckhUTUw9XCJcIixtLmRpc3BsYXlFbGVtZW50cz17Zm9ybWlucHV0OmFuZ3VsYXIuZWxlbWVudChcIjxpbnB1dCB0eXBlPSdoaWRkZW4nIHRhYmluZGV4PSctMScgc3R5bGU9J2Rpc3BsYXk6IG5vbmU7Jz5cIiksaHRtbDphbmd1bGFyLmVsZW1lbnQoXCI8dGV4dGFyZWE+PC90ZXh0YXJlYT5cIiksdGV4dDphbmd1bGFyLmVsZW1lbnQoXCI8ZGl2PjwvZGl2PlwiKSxzY3JvbGxXaW5kb3c6YW5ndWxhci5lbGVtZW50KFwiPGRpdiBjbGFzcz0ndGEtc2Nyb2xsLXdpbmRvdyc+PC9kaXY+XCIpLHBvcG92ZXI6YW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwicG9wb3ZlciBmYWRlIGJvdHRvbVwiIHN0eWxlPVwibWF4LXdpZHRoOiBub25lOyB3aWR0aDogMzA1cHg7XCI+PC9kaXY+JykscG9wb3ZlckFycm93OmFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cImFycm93XCI+PC9kaXY+JykscG9wb3ZlckNvbnRhaW5lcjphbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJwb3BvdmVyLWNvbnRlbnRcIj48L2Rpdj4nKSxyZXNpemU6e292ZXJsYXk6YW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwidGEtcmVzaXplci1oYW5kbGUtb3ZlcmxheVwiPjwvZGl2PicpLGJhY2tncm91bmQ6YW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwidGEtcmVzaXplci1oYW5kbGUtYmFja2dyb3VuZFwiPjwvZGl2PicpLGFuY2hvcnM6W2FuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cInRhLXJlc2l6ZXItaGFuZGxlLWNvcm5lciB0YS1yZXNpemVyLWhhbmRsZS1jb3JuZXItdGxcIj48L2Rpdj4nKSxhbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJ0YS1yZXNpemVyLWhhbmRsZS1jb3JuZXIgdGEtcmVzaXplci1oYW5kbGUtY29ybmVyLXRyXCI+PC9kaXY+JyksYW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwidGEtcmVzaXplci1oYW5kbGUtY29ybmVyIHRhLXJlc2l6ZXItaGFuZGxlLWNvcm5lci1ibFwiPjwvZGl2PicpLGFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cInRhLXJlc2l6ZXItaGFuZGxlLWNvcm5lciB0YS1yZXNpemVyLWhhbmRsZS1jb3JuZXItYnJcIj48L2Rpdj4nKV0saW5mbzphbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJ0YS1yZXNpemVyLWhhbmRsZS1pbmZvXCI+PC9kaXY+Jyl9fSxtLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLmFwcGVuZChtLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyQXJyb3cpLG0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIuYXBwZW5kKG0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXJDb250YWluZXIpLG0uZGlzcGxheUVsZW1lbnRzLnNjcm9sbFdpbmRvdy5hcHBlbmQobS5kaXNwbGF5RWxlbWVudHMucG9wb3ZlciksbS5kaXNwbGF5RWxlbWVudHMucG9wb3Zlci5vbihcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGImJmFuZ3VsYXIuZXh0ZW5kKGEsYiksYS5wcmV2ZW50RGVmYXVsdCgpLCExXG59KSxtLnNob3dQb3BvdmVyPWZ1bmN0aW9uKGEpe20uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIuY3NzKFwiZGlzcGxheVwiLFwiYmxvY2tcIiksbS5yZWZsb3dQb3BvdmVyKGEpLGkuYWRkQ2xhc3MobS5kaXNwbGF5RWxlbWVudHMucG9wb3ZlcixcImluXCIpLEIoaC5maW5kKFwiYm9keVwiKSxcImNsaWNrIGtleXVwXCIsZnVuY3Rpb24oKXttLmhpZGVQb3BvdmVyKCl9KX0sbS5yZWZsb3dQb3BvdmVyPWZ1bmN0aW9uKGEpe20uZGlzcGxheUVsZW1lbnRzLnRleHRbMF0ub2Zmc2V0SGVpZ2h0LTUxPmFbMF0ub2Zmc2V0VG9wPyhtLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLmNzcyhcInRvcFwiLGFbMF0ub2Zmc2V0VG9wK2FbMF0ub2Zmc2V0SGVpZ2h0K1wicHhcIiksbS5kaXNwbGF5RWxlbWVudHMucG9wb3Zlci5yZW1vdmVDbGFzcyhcInRvcFwiKS5hZGRDbGFzcyhcImJvdHRvbVwiKSk6KG0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIuY3NzKFwidG9wXCIsYVswXS5vZmZzZXRUb3AtNTQrXCJweFwiKSxtLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLnJlbW92ZUNsYXNzKFwiYm90dG9tXCIpLmFkZENsYXNzKFwidG9wXCIpKTt2YXIgYj1tLmRpc3BsYXlFbGVtZW50cy50ZXh0WzBdLm9mZnNldFdpZHRoLW0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXJbMF0ub2Zmc2V0V2lkdGgsYz1hWzBdLm9mZnNldExlZnQrYVswXS5vZmZzZXRXaWR0aC8yLW0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXJbMF0ub2Zmc2V0V2lkdGgvMjttLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLmNzcyhcImxlZnRcIixNYXRoLm1heCgwLE1hdGgubWluKGIsYykpK1wicHhcIiksbS5kaXNwbGF5RWxlbWVudHMucG9wb3ZlckFycm93LmNzcyhcIm1hcmdpbi1sZWZ0XCIsTWF0aC5taW4oYyxNYXRoLm1heCgwLGMtYikpLTExK1wicHhcIil9LG0uaGlkZVBvcG92ZXI9ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbigpe20uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIuY3NzKFwiZGlzcGxheVwiLFwiXCIpLG0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXJDb250YWluZXIuYXR0cihcInN0eWxlXCIsXCJcIiksbS5kaXNwbGF5RWxlbWVudHMucG9wb3ZlckNvbnRhaW5lci5hdHRyKFwiY2xhc3NcIixcInBvcG92ZXItY29udGVudFwiKX07ay53aGVuKGkucmVtb3ZlQ2xhc3MobS5kaXNwbGF5RWxlbWVudHMucG9wb3ZlcixcImluXCIsYSkpLnRoZW4oYSl9LG0uZGlzcGxheUVsZW1lbnRzLnJlc2l6ZS5vdmVybGF5LmFwcGVuZChtLmRpc3BsYXlFbGVtZW50cy5yZXNpemUuYmFja2dyb3VuZCksYW5ndWxhci5mb3JFYWNoKG0uZGlzcGxheUVsZW1lbnRzLnJlc2l6ZS5hbmNob3JzLGZ1bmN0aW9uKGEpe20uZGlzcGxheUVsZW1lbnRzLnJlc2l6ZS5vdmVybGF5LmFwcGVuZChhKX0pLG0uZGlzcGxheUVsZW1lbnRzLnJlc2l6ZS5vdmVybGF5LmFwcGVuZChtLmRpc3BsYXlFbGVtZW50cy5yZXNpemUuaW5mbyksbS5kaXNwbGF5RWxlbWVudHMuc2Nyb2xsV2luZG93LmFwcGVuZChtLmRpc3BsYXlFbGVtZW50cy5yZXNpemUub3ZlcmxheSksbS5yZWZsb3dSZXNpemVPdmVybGF5PWZ1bmN0aW9uKGEpe2E9YW5ndWxhci5lbGVtZW50KGEpWzBdLG0uZGlzcGxheUVsZW1lbnRzLnJlc2l6ZS5vdmVybGF5LmNzcyh7ZGlzcGxheTpcImJsb2NrXCIsbGVmdDphLm9mZnNldExlZnQtNStcInB4XCIsdG9wOmEub2Zmc2V0VG9wLTUrXCJweFwiLHdpZHRoOmEub2Zmc2V0V2lkdGgrMTArXCJweFwiLGhlaWdodDphLm9mZnNldEhlaWdodCsxMCtcInB4XCJ9KSxtLmRpc3BsYXlFbGVtZW50cy5yZXNpemUuaW5mby50ZXh0KGEub2Zmc2V0V2lkdGgrXCIgeCBcIithLm9mZnNldEhlaWdodCl9LG0uc2hvd1Jlc2l6ZU92ZXJsYXk9ZnVuY3Rpb24oYSl7dmFyIGI9aC5maW5kKFwiYm9keVwiKTt6PWZ1bmN0aW9uKGMpe3ZhciBkPXt3aWR0aDpwYXJzZUludChhLmF0dHIoXCJ3aWR0aFwiKSksaGVpZ2h0OnBhcnNlSW50KGEuYXR0cihcImhlaWdodFwiKSkseDpjLmNsaWVudFgseTpjLmNsaWVudFl9Oyh2b2lkIDA9PT1kLndpZHRofHxpc05hTihkLndpZHRoKSkmJihkLndpZHRoPWFbMF0ub2Zmc2V0V2lkdGgpLCh2b2lkIDA9PT1kLmhlaWdodHx8aXNOYU4oZC5oZWlnaHQpKSYmKGQuaGVpZ2h0PWFbMF0ub2Zmc2V0SGVpZ2h0KSxtLmhpZGVQb3BvdmVyKCk7dmFyIGU9ZC5oZWlnaHQvZC53aWR0aCxmPWZ1bmN0aW9uKGIpe3ZhciBjPXt4Ok1hdGgubWF4KDAsZC53aWR0aCsoYi5jbGllbnRYLWQueCkpLHk6TWF0aC5tYXgoMCxkLmhlaWdodCsoYi5jbGllbnRZLWQueSkpfTtpZihiLnNoaWZ0S2V5KXt2YXIgZj1jLnkvYy54O2MueD1lPmY/Yy54OmMueS9lLGMueT1lPmY/Yy54KmU6Yy55fWVsPWFuZ3VsYXIuZWxlbWVudChhKSxlbC5hdHRyKFwiaGVpZ2h0XCIsTWF0aC5tYXgoMCxjLnkpKSxlbC5hdHRyKFwid2lkdGhcIixNYXRoLm1heCgwLGMueCkpLG0ucmVmbG93UmVzaXplT3ZlcmxheShhKX07Yi5vbihcIm1vdXNlbW92ZVwiLGYpLEIoYixcIm1vdXNldXBcIixmdW5jdGlvbihjKXtjLnByZXZlbnREZWZhdWx0KCksYy5zdG9wUHJvcGFnYXRpb24oKSxiLm9mZihcIm1vdXNlbW92ZVwiLGYpLG0uc2hvd1BvcG92ZXIoYSl9KSxjLnN0b3BQcm9wYWdhdGlvbigpLGMucHJldmVudERlZmF1bHQoKX0sbS5kaXNwbGF5RWxlbWVudHMucmVzaXplLmFuY2hvcnNbM10ub24oXCJtb3VzZWRvd25cIix6KSxtLnJlZmxvd1Jlc2l6ZU92ZXJsYXkoYSksQihiLFwiY2xpY2tcIixmdW5jdGlvbigpe20uaGlkZVJlc2l6ZU92ZXJsYXkoKX0pfSxtLmhpZGVSZXNpemVPdmVybGF5PWZ1bmN0aW9uKCl7bS5kaXNwbGF5RWxlbWVudHMucmVzaXplLmFuY2hvcnNbM10ub2ZmKFwibW91c2Vkb3duXCIseiksbS5kaXNwbGF5RWxlbWVudHMucmVzaXplLm92ZXJsYXkuY3NzKFwiZGlzcGxheVwiLFwiXCIpfSxtLnNldHVwLmh0bWxFZGl0b3JTZXR1cChtLmRpc3BsYXlFbGVtZW50cy5odG1sKSxtLnNldHVwLnRleHRFZGl0b3JTZXR1cChtLmRpc3BsYXlFbGVtZW50cy50ZXh0KSxtLmRpc3BsYXlFbGVtZW50cy5odG1sLmF0dHIoe2lkOlwidGFIdG1sRWxlbWVudFwiK0EsXCJuZy1zaG93XCI6XCJzaG93SHRtbFwiLFwidGEtYmluZFwiOlwidGEtYmluZFwiLFwibmctbW9kZWxcIjpcImh0bWxcIn0pLG0uZGlzcGxheUVsZW1lbnRzLnRleHQuYXR0cih7aWQ6XCJ0YVRleHRFbGVtZW50XCIrQSxjb250ZW50RWRpdGFibGU6XCJ0cnVlXCIsXCJ0YS1iaW5kXCI6XCJ0YS1iaW5kXCIsXCJuZy1tb2RlbFwiOlwiaHRtbFwifSksbS5kaXNwbGF5RWxlbWVudHMuc2Nyb2xsV2luZG93LmF0dHIoe1wibmctaGlkZVwiOlwic2hvd0h0bWxcIn0pLG8udGFEZWZhdWx0V3JhcCYmbS5kaXNwbGF5RWxlbWVudHMudGV4dC5hdHRyKFwidGEtZGVmYXVsdC13cmFwXCIsby50YURlZmF1bHRXcmFwKSxvLnRhVW5zYWZlU2FuaXRpemVyJiYobS5kaXNwbGF5RWxlbWVudHMudGV4dC5hdHRyKFwidGEtdW5zYWZlLXNhbml0aXplclwiLG8udGFVbnNhZmVTYW5pdGl6ZXIpLG0uZGlzcGxheUVsZW1lbnRzLmh0bWwuYXR0cihcInRhLXVuc2FmZS1zYW5pdGl6ZXJcIixvLnRhVW5zYWZlU2FuaXRpemVyKSksbS5kaXNwbGF5RWxlbWVudHMuc2Nyb2xsV2luZG93LmFwcGVuZChtLmRpc3BsYXlFbGVtZW50cy50ZXh0KSxuLmFwcGVuZChtLmRpc3BsYXlFbGVtZW50cy5zY3JvbGxXaW5kb3cpLG4uYXBwZW5kKG0uZGlzcGxheUVsZW1lbnRzLmh0bWwpLG0uZGlzcGxheUVsZW1lbnRzLmZvcm1pbnB1dC5hdHRyKFwibmFtZVwiLG0uX25hbWUpLG4uYXBwZW5kKG0uZGlzcGxheUVsZW1lbnRzLmZvcm1pbnB1dCksby50YWJpbmRleCYmKG4ucmVtb3ZlQXR0cihcInRhYmluZGV4XCIpLG0uZGlzcGxheUVsZW1lbnRzLnRleHQuYXR0cihcInRhYmluZGV4XCIsby50YWJpbmRleCksbS5kaXNwbGF5RWxlbWVudHMuaHRtbC5hdHRyKFwidGFiaW5kZXhcIixvLnRhYmluZGV4KSksby5wbGFjZWhvbGRlciYmKG0uZGlzcGxheUVsZW1lbnRzLnRleHQuYXR0cihcInBsYWNlaG9sZGVyXCIsby5wbGFjZWhvbGRlciksbS5kaXNwbGF5RWxlbWVudHMuaHRtbC5hdHRyKFwicGxhY2Vob2xkZXJcIixvLnBsYWNlaG9sZGVyKSksby50YURpc2FibGVkJiYobS5kaXNwbGF5RWxlbWVudHMudGV4dC5hdHRyKFwidGEtcmVhZG9ubHlcIixcImRpc2FibGVkXCIpLG0uZGlzcGxheUVsZW1lbnRzLmh0bWwuYXR0cihcInRhLXJlYWRvbmx5XCIsXCJkaXNhYmxlZFwiKSxtLmRpc2FibGVkPW0uJHBhcmVudC4kZXZhbChvLnRhRGlzYWJsZWQpLG0uJHBhcmVudC4kd2F0Y2goby50YURpc2FibGVkLGZ1bmN0aW9uKGEpe20uZGlzYWJsZWQ9YSxtLmRpc2FibGVkP24uYWRkQ2xhc3MobS5jbGFzc2VzLmRpc2FibGVkKTpuLnJlbW92ZUNsYXNzKG0uY2xhc3Nlcy5kaXNhYmxlZCl9KSksby50YVBhc3RlJiYobS5fcGFzdGVIYW5kbGVyPWZ1bmN0aW9uKGEpe3JldHVybiBsKG8udGFQYXN0ZSkobS4kcGFyZW50LHskaHRtbDphfSl9LG0uZGlzcGxheUVsZW1lbnRzLnRleHQuYXR0cihcInRhLXBhc3RlXCIsXCJfcGFzdGVIYW5kbGVyKCRodG1sKVwiKSksYShtLmRpc3BsYXlFbGVtZW50cy5zY3JvbGxXaW5kb3cpKG0pLGEobS5kaXNwbGF5RWxlbWVudHMuaHRtbCkobSksbS51cGRhdGVUYUJpbmR0YVRleHRFbGVtZW50PW1bXCJ1cGRhdGVUYUJpbmR0YVRleHRFbGVtZW50XCIrQV0sbS51cGRhdGVUYUJpbmR0YUh0bWxFbGVtZW50PW1bXCJ1cGRhdGVUYUJpbmR0YUh0bWxFbGVtZW50XCIrQV0sbi5hZGRDbGFzcyhcInRhLXJvb3RcIiksbS5kaXNwbGF5RWxlbWVudHMuc2Nyb2xsV2luZG93LmFkZENsYXNzKFwidGEtdGV4dCB0YS1lZGl0b3IgXCIrbS5jbGFzc2VzLnRleHRFZGl0b3IpLG0uZGlzcGxheUVsZW1lbnRzLmh0bWwuYWRkQ2xhc3MoXCJ0YS1odG1sIHRhLWVkaXRvciBcIittLmNsYXNzZXMuaHRtbEVkaXRvciksbS5fYWN0aW9uUnVubmluZz0hMTt2YXIgQz0hMTtpZihtLnN0YXJ0QWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIG0uX2FjdGlvblJ1bm5pbmc9ITAsQz1nLnJhbmd5LnNhdmVTZWxlY3Rpb24oKSxmdW5jdGlvbigpe0MmJmcucmFuZ3kucmVzdG9yZVNlbGVjdGlvbihDKX19LG0uZW5kQWN0aW9uPWZ1bmN0aW9uKCl7bS5fYWN0aW9uUnVubmluZz0hMSxDJiZnLnJhbmd5LnJlbW92ZU1hcmtlcnMoQyksQz0hMSxtLnVwZGF0ZVNlbGVjdGVkU3R5bGVzKCksbS5zaG93SHRtbHx8bVtcInVwZGF0ZVRhQmluZHRhVGV4dEVsZW1lbnRcIitBXSgpfSx1PWZ1bmN0aW9uKCl7bS5mb2N1c3NlZD0hMCxuLmFkZENsYXNzKG0uY2xhc3Nlcy5mb2N1c3NlZCkseC5mb2N1cygpLG4udHJpZ2dlckhhbmRsZXIoXCJmb2N1c1wiKX0sbS5kaXNwbGF5RWxlbWVudHMuaHRtbC5vbihcImZvY3VzXCIsdSksbS5kaXNwbGF5RWxlbWVudHMudGV4dC5vbihcImZvY3VzXCIsdSksdj1mdW5jdGlvbihhKXtyZXR1cm4gbS5fYWN0aW9uUnVubmluZ3x8aFswXS5hY3RpdmVFbGVtZW50PT09bS5kaXNwbGF5RWxlbWVudHMuaHRtbFswXXx8aFswXS5hY3RpdmVFbGVtZW50PT09bS5kaXNwbGF5RWxlbWVudHMudGV4dFswXXx8KG4ucmVtb3ZlQ2xhc3MobS5jbGFzc2VzLmZvY3Vzc2VkKSx4LnVuZm9jdXMoKSxiKGZ1bmN0aW9uKCl7bS5fYlVwZGF0ZVNlbGVjdGVkU3R5bGVzPSExLG4udHJpZ2dlckhhbmRsZXIoXCJibHVyXCIpLG0uZm9jdXNzZWQ9ITF9LDApKSxhLnByZXZlbnREZWZhdWx0KCksITF9LG0uZGlzcGxheUVsZW1lbnRzLmh0bWwub24oXCJibHVyXCIsdiksbS5kaXNwbGF5RWxlbWVudHMudGV4dC5vbihcImJsdXJcIix2KSxtLmRpc3BsYXlFbGVtZW50cy50ZXh0Lm9uKFwicGFzdGVcIixmdW5jdGlvbihhKXtuLnRyaWdnZXJIYW5kbGVyKFwicGFzdGVcIixhKX0pLG0ucXVlcnlGb3JtYXRCbG9ja1N0YXRlPWZ1bmN0aW9uKGEpe3JldHVybiFtLnNob3dIdG1sJiZhLnRvTG93ZXJDYXNlKCk9PT1oWzBdLnF1ZXJ5Q29tbWFuZFZhbHVlKFwiZm9ybWF0QmxvY2tcIikudG9Mb3dlckNhc2UoKX0sbS5xdWVyeUNvbW1hbmRTdGF0ZT1mdW5jdGlvbihhKXtyZXR1cm4gbS5zaG93SHRtbD9cIlwiOmhbMF0ucXVlcnlDb21tYW5kU3RhdGUoYSl9LG0uc3dpdGNoVmlldz1mdW5jdGlvbigpe20uc2hvd0h0bWw9IW0uc2hvd0h0bWwsaS5lbmFibGVkKCExLG0uZGlzcGxheUVsZW1lbnRzLmh0bWwpLGkuZW5hYmxlZCghMSxtLmRpc3BsYXlFbGVtZW50cy50ZXh0KSxtLnNob3dIdG1sP2IoZnVuY3Rpb24oKXtyZXR1cm4gaS5lbmFibGVkKCEwLG0uZGlzcGxheUVsZW1lbnRzLmh0bWwpLGkuZW5hYmxlZCghMCxtLmRpc3BsYXlFbGVtZW50cy50ZXh0KSxtLmRpc3BsYXlFbGVtZW50cy5odG1sWzBdLmZvY3VzKCl9LDEwMCk6YihmdW5jdGlvbigpe3JldHVybiBpLmVuYWJsZWQoITAsbS5kaXNwbGF5RWxlbWVudHMuaHRtbCksaS5lbmFibGVkKCEwLG0uZGlzcGxheUVsZW1lbnRzLnRleHQpLG0uZGlzcGxheUVsZW1lbnRzLnRleHRbMF0uZm9jdXMoKX0sMTAwKX0sby5uZ01vZGVsKXt2YXIgRD0hMDtwLiRyZW5kZXI9ZnVuY3Rpb24oKXtpZihEKXtEPSExO3ZhciBhPW0uJHBhcmVudC4kZXZhbChvLm5nTW9kZWwpO3ZvaWQgMCE9PWEmJm51bGwhPT1hfHwhd3x8XCJcIj09PXd8fHAuJHNldFZpZXdWYWx1ZSh3KX1tLmRpc3BsYXlFbGVtZW50cy5mb3JtaW5wdXQudmFsKHAuJHZpZXdWYWx1ZSksbS5fZWxlbWVudFNlbGVjdFRyaWdnZXJlZHx8KG0uaHRtbD1wLiR2aWV3VmFsdWV8fFwiXCIpfTt2YXIgRT1mdW5jdGlvbihhKXtyZXR1cm4gby5yZXF1aXJlZCYmcC4kc2V0VmFsaWRpdHkoXCJyZXF1aXJlZFwiLCEoIWF8fFwiXCI9PT1hLnRyaW0oKSkpLGF9O3AuJHBhcnNlcnMucHVzaChFKSxwLiRmb3JtYXR0ZXJzLnB1c2goRSl9ZWxzZSBtLmRpc3BsYXlFbGVtZW50cy5mb3JtaW5wdXQudmFsKHcpLG0uaHRtbD13O2lmKG0uJHdhdGNoKFwiaHRtbFwiLGZ1bmN0aW9uKGEsYil7YSE9PWImJihvLm5nTW9kZWwmJnAuJHZpZXdWYWx1ZSE9PWEmJnAuJHNldFZpZXdWYWx1ZShhKSxtLmRpc3BsYXlFbGVtZW50cy5mb3JtaW5wdXQudmFsKGEpKX0pLG8udGFUYXJnZXRUb29sYmFycyl4PWYucmVnaXN0ZXJFZGl0b3IobS5fbmFtZSxtLG8udGFUYXJnZXRUb29sYmFycy5zcGxpdChcIixcIikpO2Vsc2V7dmFyIEY9YW5ndWxhci5lbGVtZW50KCc8ZGl2IHRleHQtYW5ndWxhci10b29sYmFyIG5hbWU9XCJ0ZXh0QW5ndWxhclRvb2xiYXInK0ErJ1wiPicpO28udGFUb29sYmFyJiZGLmF0dHIoXCJ0YS10b29sYmFyXCIsby50YVRvb2xiYXIpLG8udGFUb29sYmFyQ2xhc3MmJkYuYXR0cihcInRhLXRvb2xiYXItY2xhc3NcIixvLnRhVG9vbGJhckNsYXNzKSxvLnRhVG9vbGJhckdyb3VwQ2xhc3MmJkYuYXR0cihcInRhLXRvb2xiYXItZ3JvdXAtY2xhc3NcIixvLnRhVG9vbGJhckdyb3VwQ2xhc3MpLG8udGFUb29sYmFyQnV0dG9uQ2xhc3MmJkYuYXR0cihcInRhLXRvb2xiYXItYnV0dG9uLWNsYXNzXCIsby50YVRvb2xiYXJCdXR0b25DbGFzcyksby50YVRvb2xiYXJBY3RpdmVCdXR0b25DbGFzcyYmRi5hdHRyKFwidGEtdG9vbGJhci1hY3RpdmUtYnV0dG9uLWNsYXNzXCIsby50YVRvb2xiYXJBY3RpdmVCdXR0b25DbGFzcyksby50YUZvY3Vzc2VkQ2xhc3MmJkYuYXR0cihcInRhLWZvY3Vzc2VkLWNsYXNzXCIsby50YUZvY3Vzc2VkQ2xhc3MpLG4ucHJlcGVuZChGKSxhKEYpKG0uJHBhcmVudCkseD1mLnJlZ2lzdGVyRWRpdG9yKG0uX25hbWUsbSxbXCJ0ZXh0QW5ndWxhclRvb2xiYXJcIitBXSl9bS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7Zi51bnJlZ2lzdGVyRWRpdG9yKG0uX25hbWUpfSksbS4kb24oXCJ0YS1lbGVtZW50LXNlbGVjdFwiLGZ1bmN0aW9uKGEsYil7eC50cmlnZ2VyRWxlbWVudFNlbGVjdChhLGIpJiZtW1wicmVBcHBseU9uU2VsZWN0b3JIYW5kbGVyc3RhVGV4dEVsZW1lbnRcIitBXSgpfSksbS4kb24oXCJ0YS1kcm9wLWV2ZW50XCIsZnVuY3Rpb24oYSxjLGQsZSl7bS5kaXNwbGF5RWxlbWVudHMudGV4dFswXS5mb2N1cygpLGUmJmUuZmlsZXMmJmUuZmlsZXMubGVuZ3RoPjA/KGFuZ3VsYXIuZm9yRWFjaChlLmZpbGVzLGZ1bmN0aW9uKGEpe3RyeXtrLndoZW4obS5maWxlRHJvcEhhbmRsZXIoYSxtLndyYXBTZWxlY3Rpb24pfHxtLmZpbGVEcm9wSGFuZGxlciE9PW0uZGVmYXVsdEZpbGVEcm9wSGFuZGxlciYmay53aGVuKG0uZGVmYXVsdEZpbGVEcm9wSGFuZGxlcihhLG0ud3JhcFNlbGVjdGlvbikpKS50aGVuKGZ1bmN0aW9uKCl7bVtcInVwZGF0ZVRhQmluZHRhVGV4dEVsZW1lbnRcIitBXSgpfSl9Y2F0Y2goYil7ai5lcnJvcihiKX19KSxkLnByZXZlbnREZWZhdWx0KCksZC5zdG9wUHJvcGFnYXRpb24oKSk6YihmdW5jdGlvbigpe21bXCJ1cGRhdGVUYUJpbmR0YVRleHRFbGVtZW50XCIrQV0oKX0sMCl9KSxtLl9iVXBkYXRlU2VsZWN0ZWRTdHlsZXM9ITEsYW5ndWxhci5lbGVtZW50KHdpbmRvdykub24oXCJibHVyXCIsZnVuY3Rpb24oKXttLl9iVXBkYXRlU2VsZWN0ZWRTdHlsZXM9ITEsbS5mb2N1c3NlZD0hMX0pLG0udXBkYXRlU2VsZWN0ZWRTdHlsZXM9ZnVuY3Rpb24oKXt2YXIgYTt2b2lkIDAhPT0oYT1kLmdldFNlbGVjdGlvbkVsZW1lbnQoKSkmJmEucGFyZW50Tm9kZSE9PW0uZGlzcGxheUVsZW1lbnRzLnRleHRbMF0/eC51cGRhdGVTZWxlY3RlZFN0eWxlcyhhbmd1bGFyLmVsZW1lbnQoYSkpOngudXBkYXRlU2VsZWN0ZWRTdHlsZXMoKSxtLl9iVXBkYXRlU2VsZWN0ZWRTdHlsZXMmJmIobS51cGRhdGVTZWxlY3RlZFN0eWxlcywyMDApfSxxPWZ1bmN0aW9uKCl7cmV0dXJuIG0uZm9jdXNzZWQ/dm9pZChtLl9iVXBkYXRlU2VsZWN0ZWRTdHlsZXN8fChtLl9iVXBkYXRlU2VsZWN0ZWRTdHlsZXM9ITAsbS4kYXBwbHkoZnVuY3Rpb24oKXttLnVwZGF0ZVNlbGVjdGVkU3R5bGVzKCl9KSkpOnZvaWQobS5fYlVwZGF0ZVNlbGVjdGVkU3R5bGVzPSExKX0sbS5kaXNwbGF5RWxlbWVudHMuaHRtbC5vbihcImtleWRvd25cIixxKSxtLmRpc3BsYXlFbGVtZW50cy50ZXh0Lm9uKFwia2V5ZG93blwiLHEpLHI9ZnVuY3Rpb24oKXttLl9iVXBkYXRlU2VsZWN0ZWRTdHlsZXM9ITF9LG0uZGlzcGxheUVsZW1lbnRzLmh0bWwub24oXCJrZXl1cFwiLHIpLG0uZGlzcGxheUVsZW1lbnRzLnRleHQub24oXCJrZXl1cFwiLHIpLHM9ZnVuY3Rpb24oYSxiKXtiJiZhbmd1bGFyLmV4dGVuZChhLGIpLG0uJGFwcGx5KGZ1bmN0aW9uKCl7cmV0dXJuIHguc2VuZEtleUNvbW1hbmQoYSk/KG0uX2JVcGRhdGVTZWxlY3RlZFN0eWxlc3x8bS51cGRhdGVTZWxlY3RlZFN0eWxlcygpLGEucHJldmVudERlZmF1bHQoKSwhMSk6dm9pZCAwfSl9LG0uZGlzcGxheUVsZW1lbnRzLmh0bWwub24oXCJrZXlwcmVzc1wiLHMpLG0uZGlzcGxheUVsZW1lbnRzLnRleHQub24oXCJrZXlwcmVzc1wiLHMpLHQ9ZnVuY3Rpb24oKXttLl9iVXBkYXRlU2VsZWN0ZWRTdHlsZXM9ITEsbS4kYXBwbHkoZnVuY3Rpb24oKXttLnVwZGF0ZVNlbGVjdGVkU3R5bGVzKCl9KX0sbS5kaXNwbGF5RWxlbWVudHMuaHRtbC5vbihcIm1vdXNldXBcIix0KSxtLmRpc3BsYXlFbGVtZW50cy50ZXh0Lm9uKFwibW91c2V1cFwiLHQpfX19XSkscS5zZXJ2aWNlKFwidGV4dEFuZ3VsYXJNYW5hZ2VyXCIsW1widGFUb29sRXhlY3V0ZUFjdGlvblwiLFwidGFUb29sc1wiLFwidGFSZWdpc3RlclRvb2xcIixmdW5jdGlvbihhLGIsYyl7dmFyIGQ9e30sZT17fTtyZXR1cm57cmVnaXN0ZXJFZGl0b3I6ZnVuY3Rpb24oYyxmLGcpe2lmKCFjfHxcIlwiPT09Yyl0aHJvd1widGV4dEFuZ3VsYXIgRXJyb3I6IEFuIGVkaXRvciByZXF1aXJlcyBhIG5hbWVcIjtpZighZil0aHJvd1widGV4dEFuZ3VsYXIgRXJyb3I6IEFuIGVkaXRvciByZXF1aXJlcyBhIHNjb3BlXCI7aWYoZVtjXSl0aHJvdyd0ZXh0QW5ndWxhciBFcnJvcjogQW4gRWRpdG9yIHdpdGggbmFtZSBcIicrYysnXCIgYWxyZWFkeSBleGlzdHMnO3ZhciBoPVtdO3JldHVybiBhbmd1bGFyLmZvckVhY2goZyxmdW5jdGlvbihhKXtkW2FdJiZoLnB1c2goZFthXSl9KSxlW2NdPXtzY29wZTpmLHRvb2xiYXJzOmcsX3JlZ2lzdGVyVG9vbGJhcjpmdW5jdGlvbihhKXt0aGlzLnRvb2xiYXJzLmluZGV4T2YoYS5uYW1lKT49MCYmaC5wdXNoKGEpfSxlZGl0b3JGdW5jdGlvbnM6e2Rpc2FibGU6ZnVuY3Rpb24oKXthbmd1bGFyLmZvckVhY2goaCxmdW5jdGlvbihhKXthLmRpc2FibGVkPSEwfSl9LGVuYWJsZTpmdW5jdGlvbigpe2FuZ3VsYXIuZm9yRWFjaChoLGZ1bmN0aW9uKGEpe2EuZGlzYWJsZWQ9ITF9KX0sZm9jdXM6ZnVuY3Rpb24oKXthbmd1bGFyLmZvckVhY2goaCxmdW5jdGlvbihhKXthLl9wYXJlbnQ9ZixhLmRpc2FibGVkPSExLGEuZm9jdXNzZWQ9ITAsZi5mb2N1c3NlZD0hMH0pfSx1bmZvY3VzOmZ1bmN0aW9uKCl7YW5ndWxhci5mb3JFYWNoKGgsZnVuY3Rpb24oYSl7YS5kaXNhYmxlZD0hMCxhLmZvY3Vzc2VkPSExfSksZi5mb2N1c3NlZD0hMX0sdXBkYXRlU2VsZWN0ZWRTdHlsZXM6ZnVuY3Rpb24oYSl7YW5ndWxhci5mb3JFYWNoKGgsZnVuY3Rpb24oYil7YW5ndWxhci5mb3JFYWNoKGIudG9vbHMsZnVuY3Rpb24oYyl7Yy5hY3RpdmVTdGF0ZSYmKGIuX3BhcmVudD1mLGMuYWN0aXZlPWMuYWN0aXZlU3RhdGUoYSkpfSl9KX0sc2VuZEtleUNvbW1hbmQ6ZnVuY3Rpb24oYyl7dmFyIGQ9ITE7cmV0dXJuKGMuY3RybEtleXx8Yy5tZXRhS2V5KSYmYW5ndWxhci5mb3JFYWNoKGIsZnVuY3Rpb24oYixlKXtpZihiLmNvbW1hbmRLZXlDb2RlJiZiLmNvbW1hbmRLZXlDb2RlPT09Yy53aGljaClmb3IodmFyIGc9MDtnPGgubGVuZ3RoO2crKylpZih2b2lkIDAhPT1oW2ddLnRvb2xzW2VdKXthLmNhbGwoaFtnXS50b29sc1tlXSxmKSxkPSEwO2JyZWFrfX0pLGR9LHRyaWdnZXJFbGVtZW50U2VsZWN0OmZ1bmN0aW9uKGEsYyl7dmFyIGQ9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9ITAsZD0wO2Q8Yi5sZW5ndGg7ZCsrKWM9YyYmYS5hdHRyKGJbZF0pO3JldHVybiBjfSxlPVtdLGc9e30saT0hMTtjPWFuZ3VsYXIuZWxlbWVudChjKTt2YXIgaj0hMTtpZihhbmd1bGFyLmZvckVhY2goYixmdW5jdGlvbihhLGIpe2Eub25FbGVtZW50U2VsZWN0JiZhLm9uRWxlbWVudFNlbGVjdC5lbGVtZW50JiZhLm9uRWxlbWVudFNlbGVjdC5lbGVtZW50LnRvTG93ZXJDYXNlKCk9PT1jWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmKCFhLm9uRWxlbWVudFNlbGVjdC5maWx0ZXJ8fGEub25FbGVtZW50U2VsZWN0LmZpbHRlcihjKSkmJihqPWp8fGFuZ3VsYXIuaXNBcnJheShhLm9uRWxlbWVudFNlbGVjdC5vbmx5V2l0aEF0dHJzKSYmZChjLGEub25FbGVtZW50U2VsZWN0Lm9ubHlXaXRoQXR0cnMpLCghYS5vbkVsZW1lbnRTZWxlY3Qub25seVdpdGhBdHRyc3x8ZChjLGEub25FbGVtZW50U2VsZWN0Lm9ubHlXaXRoQXR0cnMpKSYmKGdbYl09YSkpfSksaj8oYW5ndWxhci5mb3JFYWNoKGcsZnVuY3Rpb24oYSxiKXthLm9uRWxlbWVudFNlbGVjdC5vbmx5V2l0aEF0dHJzJiZkKGMsYS5vbkVsZW1lbnRTZWxlY3Qub25seVdpdGhBdHRycykmJmUucHVzaCh7bmFtZTpiLHRvb2w6YX0pfSksZS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9vbC5vbkVsZW1lbnRTZWxlY3Qub25seVdpdGhBdHRycy5sZW5ndGgtYS50b29sLm9uRWxlbWVudFNlbGVjdC5vbmx5V2l0aEF0dHJzLmxlbmd0aH0pKTphbmd1bGFyLmZvckVhY2goZyxmdW5jdGlvbihhLGIpe2UucHVzaCh7bmFtZTpiLHRvb2w6YX0pfSksZS5sZW5ndGg+MClmb3IodmFyIGs9MDtrPGUubGVuZ3RoO2srKyl7Zm9yKHZhciBsPWVba10udG9vbCxtPWVba10ubmFtZSxuPTA7bjxoLmxlbmd0aDtuKyspaWYodm9pZCAwIT09aFtuXS50b29sc1ttXSl7bC5vbkVsZW1lbnRTZWxlY3QuYWN0aW9uLmNhbGwoaFtuXS50b29sc1ttXSxhLGMsZiksaT0hMDticmVha31pZihpKWJyZWFrfXJldHVybiBpfX19LGVbY10uZWRpdG9yRnVuY3Rpb25zfSxyZXRyaWV2ZUVkaXRvcjpmdW5jdGlvbihhKXtyZXR1cm4gZVthXX0sdW5yZWdpc3RlckVkaXRvcjpmdW5jdGlvbihhKXtkZWxldGUgZVthXX0scmVnaXN0ZXJUb29sYmFyOmZ1bmN0aW9uKGEpe2lmKCFhKXRocm93XCJ0ZXh0QW5ndWxhciBFcnJvcjogQSB0b29sYmFyIHJlcXVpcmVzIGEgc2NvcGVcIjtpZighYS5uYW1lfHxcIlwiPT09YS5uYW1lKXRocm93XCJ0ZXh0QW5ndWxhciBFcnJvcjogQSB0b29sYmFyIHJlcXVpcmVzIGEgbmFtZVwiO2lmKGRbYS5uYW1lXSl0aHJvdyd0ZXh0QW5ndWxhciBFcnJvcjogQSB0b29sYmFyIHdpdGggbmFtZSBcIicrYS5uYW1lKydcIiBhbHJlYWR5IGV4aXN0cyc7ZFthLm5hbWVdPWEsYW5ndWxhci5mb3JFYWNoKGUsZnVuY3Rpb24oYil7Yi5fcmVnaXN0ZXJUb29sYmFyKGEpfSl9LHJldHJpZXZlVG9vbGJhcjpmdW5jdGlvbihhKXtyZXR1cm4gZFthXX0scmV0cmlldmVUb29sYmFyc1ZpYUVkaXRvcjpmdW5jdGlvbihhKXt2YXIgYj1bXSxjPXRoaXM7cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaCh0aGlzLnJldHJpZXZlRWRpdG9yKGEpLnRvb2xiYXJzLGZ1bmN0aW9uKGEpe2IucHVzaChjLnJldHJpZXZlVG9vbGJhcihhKSl9KSxifSx1bnJlZ2lzdGVyVG9vbGJhcjpmdW5jdGlvbihhKXtkZWxldGUgZFthXX0sdXBkYXRlVG9vbHNEaXNwbGF5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7YW5ndWxhci5mb3JFYWNoKGEsZnVuY3Rpb24oYSxjKXtiLnVwZGF0ZVRvb2xEaXNwbGF5KGMsYSl9KX0scmVzZXRUb29sc0Rpc3BsYXk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2FuZ3VsYXIuZm9yRWFjaChiLGZ1bmN0aW9uKGIsYyl7YS5yZXNldFRvb2xEaXNwbGF5KGMpfSl9LHVwZGF0ZVRvb2xEaXNwbGF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpczthbmd1bGFyLmZvckVhY2goZCxmdW5jdGlvbihkLGUpe2MudXBkYXRlVG9vbGJhclRvb2xEaXNwbGF5KGUsYSxiKX0pfSxyZXNldFRvb2xEaXNwbGF5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7YW5ndWxhci5mb3JFYWNoKGQsZnVuY3Rpb24oYyxkKXtiLnJlc2V0VG9vbGJhclRvb2xEaXNwbGF5KGQsYSl9KX0sdXBkYXRlVG9vbGJhclRvb2xEaXNwbGF5OmZ1bmN0aW9uKGEsYixjKXtpZighZFthXSl0aHJvdyd0ZXh0QW5ndWxhciBFcnJvcjogTm8gVG9vbGJhciB3aXRoIG5hbWUgXCInK2ErJ1wiIGV4aXN0cyc7ZFthXS51cGRhdGVUb29sRGlzcGxheShiLGMpfSxyZXNldFRvb2xiYXJUb29sRGlzcGxheTpmdW5jdGlvbihhLGMpe2lmKCFkW2FdKXRocm93J3RleHRBbmd1bGFyIEVycm9yOiBObyBUb29sYmFyIHdpdGggbmFtZSBcIicrYSsnXCIgZXhpc3RzJztkW2FdLnVwZGF0ZVRvb2xEaXNwbGF5KGMsYltjXSwhMCl9LHJlbW92ZVRvb2w6ZnVuY3Rpb24oYSl7ZGVsZXRlIGJbYV0sYW5ndWxhci5mb3JFYWNoKGQsZnVuY3Rpb24oYil7ZGVsZXRlIGIudG9vbHNbYV07Zm9yKHZhciBjPTA7YzxiLnRvb2xiYXIubGVuZ3RoO2MrKyl7Zm9yKHZhciBkLGU9MDtlPGIudG9vbGJhcltjXS5sZW5ndGg7ZSsrKXtpZihiLnRvb2xiYXJbY11bZV09PT1hKXtkPXtncm91cDpjLGluZGV4OmV9O2JyZWFrfWlmKHZvaWQgMCE9PWQpYnJlYWt9dm9pZCAwIT09ZCYmKGIudG9vbGJhcltkLmdyb3VwXS5zbGljZShkLmluZGV4LDEpLGIuXyRlbGVtZW50LmNoaWxkcmVuKCkuZXEoZC5ncm91cCkuY2hpbGRyZW4oKS5lcShkLmluZGV4KS5yZW1vdmUoKSl9fSl9LGFkZFRvb2w6ZnVuY3Rpb24oYSxiLGUsZil7YyhhLGIpLGFuZ3VsYXIuZm9yRWFjaChkLGZ1bmN0aW9uKGMpe2MuYWRkVG9vbChhLGIsZSxmKX0pfSxhZGRUb29sVG9Ub29sYmFyOmZ1bmN0aW9uKGEsYixlLGYsZyl7YyhhLGIpLGRbZV0uYWRkVG9vbChhLGIsZixnKX0scmVmcmVzaEVkaXRvcjpmdW5jdGlvbihhKXtpZighZVthXSl0aHJvdyd0ZXh0QW5ndWxhciBFcnJvcjogTm8gRWRpdG9yIHdpdGggbmFtZSBcIicrYSsnXCIgZXhpc3RzJztlW2FdLnNjb3BlLnVwZGF0ZVRhQmluZHRhVGV4dEVsZW1lbnQoKSxlW2FdLnNjb3BlLiQkcGhhc2V8fGVbYV0uc2NvcGUuJGRpZ2VzdCgpfX19XSkscS5kaXJlY3RpdmUoXCJ0ZXh0QW5ndWxhclRvb2xiYXJcIixbXCIkY29tcGlsZVwiLFwidGV4dEFuZ3VsYXJNYW5hZ2VyXCIsXCJ0YU9wdGlvbnNcIixcInRhVG9vbHNcIixcInRhVG9vbEV4ZWN1dGVBY3Rpb25cIixcIiR3aW5kb3dcIixmdW5jdGlvbihhLGIsYyxkLGUsZil7cmV0dXJue3Njb3BlOntuYW1lOlwiQFwifSxyZXN0cmljdDpcIkVBXCIsbGluazpmdW5jdGlvbihnLGgsaSl7aWYoIWcubmFtZXx8XCJcIj09PWcubmFtZSl0aHJvd1widGV4dEFuZ3VsYXIgRXJyb3I6IEEgdG9vbGJhciByZXF1aXJlcyBhIG5hbWVcIjthbmd1bGFyLmV4dGVuZChnLGFuZ3VsYXIuY29weShjKSksaS50YVRvb2xiYXImJihnLnRvb2xiYXI9Zy4kcGFyZW50LiRldmFsKGkudGFUb29sYmFyKSksaS50YVRvb2xiYXJDbGFzcyYmKGcuY2xhc3Nlcy50b29sYmFyPWkudGFUb29sYmFyQ2xhc3MpLGkudGFUb29sYmFyR3JvdXBDbGFzcyYmKGcuY2xhc3Nlcy50b29sYmFyR3JvdXA9aS50YVRvb2xiYXJHcm91cENsYXNzKSxpLnRhVG9vbGJhckJ1dHRvbkNsYXNzJiYoZy5jbGFzc2VzLnRvb2xiYXJCdXR0b249aS50YVRvb2xiYXJCdXR0b25DbGFzcyksaS50YVRvb2xiYXJBY3RpdmVCdXR0b25DbGFzcyYmKGcuY2xhc3Nlcy50b29sYmFyQnV0dG9uQWN0aXZlPWkudGFUb29sYmFyQWN0aXZlQnV0dG9uQ2xhc3MpLGkudGFGb2N1c3NlZENsYXNzJiYoZy5jbGFzc2VzLmZvY3Vzc2VkPWkudGFGb2N1c3NlZENsYXNzKSxnLmRpc2FibGVkPSEwLGcuZm9jdXNzZWQ9ITEsZy5fJGVsZW1lbnQ9aCxoWzBdLmlubmVySFRNTD1cIlwiLGguYWRkQ2xhc3MoXCJ0YS10b29sYmFyIFwiK2cuY2xhc3Nlcy50b29sYmFyKSxnLiR3YXRjaChcImZvY3Vzc2VkXCIsZnVuY3Rpb24oKXtnLmZvY3Vzc2VkP2guYWRkQ2xhc3MoZy5jbGFzc2VzLmZvY3Vzc2VkKTpoLnJlbW92ZUNsYXNzKGcuY2xhc3Nlcy5mb2N1c3NlZCl9KTt2YXIgaj1mdW5jdGlvbihiLGMpe3ZhciBkO2lmKGQ9YW5ndWxhci5lbGVtZW50KGImJmIuZGlzcGxheT9iLmRpc3BsYXk6XCI8YnV0dG9uIHR5cGU9J2J1dHRvbic+XCIpLGQuYWRkQ2xhc3MoYiYmYltcImNsYXNzXCJdP2JbXCJjbGFzc1wiXTpnLmNsYXNzZXMudG9vbGJhckJ1dHRvbiksZC5hdHRyKFwibmFtZVwiLGMubmFtZSksZC5hdHRyKFwidW5zZWxlY3RhYmxlXCIsXCJvblwiKSxkLmF0dHIoXCJuZy1kaXNhYmxlZFwiLFwiaXNEaXNhYmxlZCgpXCIpLGQuYXR0cihcInRhYmluZGV4XCIsXCItMVwiKSxkLmF0dHIoXCJuZy1jbGlja1wiLFwiZXhlY3V0ZUFjdGlvbigpXCIpLGQuYXR0cihcIm5nLWNsYXNzXCIsXCJkaXNwbGF5QWN0aXZlVG9vbENsYXNzKGFjdGl2ZSlcIiksYiYmYi50b29sdGlwdGV4dCYmZC5hdHRyKFwidGl0bGVcIixiLnRvb2x0aXB0ZXh0KSxkLm9uKFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYiYmYW5ndWxhci5leHRlbmQoYSxiKSxhLnByZXZlbnREZWZhdWx0KCksITF9KSxiJiYhYi5kaXNwbGF5JiYhYy5fZGlzcGxheSYmKGRbMF0uaW5uZXJIVE1MPVwiXCIsYi5idXR0b250ZXh0JiYoZFswXS5pbm5lckhUTUw9Yi5idXR0b250ZXh0KSxiLmljb25jbGFzcykpe3ZhciBlPWFuZ3VsYXIuZWxlbWVudChcIjxpPlwiKSxmPWRbMF0uaW5uZXJIVE1MO2UuYWRkQ2xhc3MoYi5pY29uY2xhc3MpLGRbMF0uaW5uZXJIVE1MPVwiXCIsZC5hcHBlbmQoZSksZiYmXCJcIiE9PWYmJmQuYXBwZW5kKFwiJm5ic3A7XCIrZil9cmV0dXJuIGMuX2xhc3RUb29sRGVmaW5pdGlvbj1hbmd1bGFyLmNvcHkoYiksYShkKShjKX07Zy50b29scz17fSxnLl9wYXJlbnQ9e2Rpc2FibGVkOiEwLHNob3dIdG1sOiExLHF1ZXJ5Rm9ybWF0QmxvY2tTdGF0ZTpmdW5jdGlvbigpe3JldHVybiExfSxxdWVyeUNvbW1hbmRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiExfX07dmFyIGs9eyR3aW5kb3c6ZiwkZWRpdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIGcuX3BhcmVudH0saXNEaXNhYmxlZDpmdW5jdGlvbigpe3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXMuJGV2YWwoXCJkaXNhYmxlZFwiKSYmdGhpcy4kZXZhbChcImRpc2FibGVkXCIpfHx0aGlzLiRldmFsKFwiZGlzYWJsZWQoKVwiKXx8XCJodG1sXCIhPT10aGlzLm5hbWUmJnRoaXMuJGVkaXRvcigpLnNob3dIdG1sfHx0aGlzLiRwYXJlbnQuZGlzYWJsZWR8fHRoaXMuJGVkaXRvcigpLmRpc2FibGVkfSxkaXNwbGF5QWN0aXZlVG9vbENsYXNzOmZ1bmN0aW9uKGEpe3JldHVybiBhP2cuY2xhc3Nlcy50b29sYmFyQnV0dG9uQWN0aXZlOlwiXCJ9LGV4ZWN1dGVBY3Rpb246ZX07YW5ndWxhci5mb3JFYWNoKGcudG9vbGJhcixmdW5jdGlvbihhKXt2YXIgYj1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2PlwiKTtiLmFkZENsYXNzKGcuY2xhc3Nlcy50b29sYmFyR3JvdXApLGFuZ3VsYXIuZm9yRWFjaChhLGZ1bmN0aW9uKGEpe2cudG9vbHNbYV09YW5ndWxhci5leHRlbmQoZy4kbmV3KCEwKSxkW2FdLGsse25hbWU6YX0pLGcudG9vbHNbYV0uJGVsZW1lbnQ9aihkW2FdLGcudG9vbHNbYV0pLGIuYXBwZW5kKGcudG9vbHNbYV0uJGVsZW1lbnQpfSksaC5hcHBlbmQoYil9KSxnLnVwZGF0ZVRvb2xEaXNwbGF5PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1nLnRvb2xzW2FdO2lmKGQpe2lmKGQuX2xhc3RUb29sRGVmaW5pdGlvbiYmIWMmJihiPWFuZ3VsYXIuZXh0ZW5kKHt9LGQuX2xhc3RUb29sRGVmaW5pdGlvbixiKSksbnVsbD09PWIuYnV0dG9udGV4dCYmbnVsbD09PWIuaWNvbmNsYXNzJiZudWxsPT09Yi5kaXNwbGF5KXRocm93J3RleHRBbmd1bGFyIEVycm9yOiBUb29sIERlZmluaXRpb24gZm9yIHVwZGF0aW5nIFwiJythKydcIiBkb2VzIG5vdCBoYXZlIGEgdmFsaWQgZGlzcGxheS9pY29uY2xhc3MvYnV0dG9udGV4dCB2YWx1ZSc7bnVsbD09PWIuYnV0dG9udGV4dCYmZGVsZXRlIGIuYnV0dG9udGV4dCxudWxsPT09Yi5pY29uY2xhc3MmJmRlbGV0ZSBiLmljb25jbGFzcyxudWxsPT09Yi5kaXNwbGF5JiZkZWxldGUgYi5kaXNwbGF5O3ZhciBlPWooYixkKTtkLiRlbGVtZW50LnJlcGxhY2VXaXRoKGUpLGQuJGVsZW1lbnQ9ZX19LGcuYWRkVG9vbD1mdW5jdGlvbihhLGIsYyxlKXtnLnRvb2xzW2FdPWFuZ3VsYXIuZXh0ZW5kKGcuJG5ldyghMCksZFthXSxrLHtuYW1lOmF9KSxnLnRvb2xzW2FdLiRlbGVtZW50PWooZFthXSxnLnRvb2xzW2FdKTt2YXIgZjt2b2lkIDA9PT1jJiYoYz1nLnRvb2xiYXIubGVuZ3RoLTEpLGY9YW5ndWxhci5lbGVtZW50KGguY2hpbGRyZW4oKVtjXSksdm9pZCAwPT09ZT8oZi5hcHBlbmQoZy50b29sc1thXS4kZWxlbWVudCksZy50b29sYmFyW2NdW2cudG9vbGJhcltjXS5sZW5ndGgtMV09YSk6KGYuY2hpbGRyZW4oKS5lcShlKS5hZnRlcihnLnRvb2xzW2FdLiRlbGVtZW50KSxnLnRvb2xiYXJbY11bZV09YSl9LGIucmVnaXN0ZXJUb29sYmFyKGcpLGcuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2IudW5yZWdpc3RlclRvb2xiYXIoZy5uYW1lKX0pfX19XSl9KCl9KHt9LGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpOyJdfQ==
