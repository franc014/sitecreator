(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
'use strict'
var JQuery = require('jquery');
var angular = require('./../vendor/angular/angular-index.js');
var angular_restmod = require('./../vendor/angular-restmod/dist/angular-restmod-bundle.js');
var res_style = require('./../vendor/angular-restmod/dist/styles/ams.min.js');
var stc_messages = require('./config/messages.js');


var ngFabForm = require('./../vendor/ng-fab-form/dist/ng-fab-form.min.js');
var ngMessages = require('./../vendor/angular-messages/angular-messages.min.js');

var textAngular = require('./../vendor/textAngular/dist/textAngular-rangy.min.js');
var sanitize = require('./../vendor/textAngular/dist/textAngular-sanitize.min.js');
var rangy = require('./../vendor/textAngular/dist/textAngular.min.js');

var uploadLibp1 = require('../vendor/angularjs-file-upload/angular-file-upload-shim.min.js');
var uploadLibp2 = require('../vendor/angularjs-file-upload/angular-file-upload.min.js');

var nganimate = require('./../vendor/angular_animate/angular-animate.min.js');


var prfXyzApp = angular.module('prfXyzApp',['restmod','ngFabForm','ngMessages','textAngular','angularFileUpload','ngAnimate']);

prfXyzApp.config(['restmodProvider','$httpProvider','ngFabFormProvider',function(restmodProvider, $httpProvider,ngFabFormProvider) {
    restmodProvider.rebase('AMSApi');
    $httpProvider.defaults.headers.common["X-Requested-With"] = "XMLHttpRequest";
    restmodProvider.rebase('DefaultPacker');

    ngFabFormProvider.extendConfig({
        validationsTemplate : '../../js/admin/angular/templates/customValidationTemplate.html'
        /*,setFormDirtyOnSubmit: true*/
    });

    $httpProvider.interceptors.push(function($q,$rootScope,$timeout) {
        return {
            'request': function(config) {
                $rootScope.showSystemAlert = false;
                $rootScope.showSpinner = true;
                return config;
            },

            'response': function(response) {
                $rootScope.showSpinner = false;
                return response;
            },
            'requestError':function(rejection){
                console.log(rejection);
                return $q.reject(rejection);
            },
            'responseError':function(rejection){

                var status = rejection.status;
                switch (status){
                    case 401:
                        $rootScope.showSpinner = false;
                        $rootScope.showSystemAlert = true;
                        $rootScope.systemAlert = "Ha caducado tu sesión. Debes ingresar nuevamente!";
                        $timeout(function(){
                            location.href = "/auth/logout";
                        },4000);
                        break;
                    case 500:
                        $rootScope.showSpinner = false;
                        $timeout(function(){
                            $rootScope.showSystemAlert = false;
                        },3000);
                        $rootScope.showSystemAlert = true;
                        $rootScope.systemAlert = "Vaya! :( Hubo un problema en la respuesta del servidor. <br>" +
                        "Por favor intenta la acción nuevamente o contacta al Administrador";
                        break;
                    case 404:
                        $rootScope.showSpinner = false;
                        $timeout(function(){
                            $rootScope.showSystemAlert = false;
                        },3000);
                        $rootScope.showSystemAlert = true;
                        $rootScope.systemAlert = "Vaya! :( No se encontró el servicio que requieres. <br>" +
                        "Por favor intenta la acción nuevamente o contacta al Administrador";
                        break;
                    /*case 413:
                        //$rootScope.messageType = 'danger';
                        //$rootScope.fileTooLarge = true;
                        //$rootScope.fileTooLargeMessage = "Está intentando subir un archivo demasiado pesado. El archivo no debe superar los 5MB";
                        alert("Está intentando subir un archivo demasiado pesado. El archivo no debe superar los 5MB");
                        location.reload();
                        break;*/
                    default :
                        $rootScope.showSpinner = false;
                        $timeout(function(){
                            $rootScope.showSystemAlert = false;
                        },3000);
                        $rootScope.showSystemAlert = true;
                        $rootScope.systemAlert = "Se detectó un problema de conexión. <br>" +
                        "Por favor comprueba que estás conectada/o a una red. Si persisten los problemas, <br> por favor contacta al Administrador.";


                }
                return $q.reject(rejection);

            }
        };
    });

}]);

var homeController = require('./admin/angular/homecontroller');
var bioController = require('./admin/angular/biocontroller');
var userController = require('./admin/angular/usercontroller');
var configController = require('./admin/angular/configcontroller');
var saleableController = require('./admin/angular/saleablecontroller');
var saleableDetailController = require('./admin/angular/saleabledetailcontroller');
var saleableBasicController = require('./admin/angular/basicdetailcontroller');
var saleableAllDetailsController = require('./admin/angular/saleablealldetailscontroller');
var saleablePriceController = require('./admin/angular/saleablepricescontroller');
var resumeController = require('./admin/angular/resumecontroller');

var messageService = require('./admin/angular/services/messageservice');
var userService = require('./admin/angular/services/userservice');
var userContentTypeService = require('./admin/angular/services/usercontenttypeservice');
var profileService = require('./admin/angular/services/profileservice');
var saleableService = require('./admin/angular/services/saleableservice');
var bioService = require('./admin/angular/services/biographyservice');
var thePacker = require('./admin/angular/services/thepacker');
var saleableDetailService = require('./admin/angular/services/saleabledetails');
var saleablePriceService = require('./admin/angular/services/saleableprice');
var newPassword = require('./admin/angular/services/newpasswordservice');
var numberFormat = require('./admin/angular/services/formatfilterservice');
var fileProcessor = require('./admin/angular/services/fileprocessor');
var resumeService = require('./admin/angular/services/resumeservice');
var resumeHelper = require('./admin/angular/services/resumehelper');
var experienceService = require('./admin/angular/services/experience');
var helpersService = require('./admin/angular/services/helpers');
var educationService = require('./admin/angular/services/education');
var skillService = require('./admin/angular/services/skill');
var languageService = require('./admin/angular/services/language');
var interestService = require('./admin/angular/services/interest');

var alertDirective = require('./admin/angular/directives/alertdirective');
var closeContentDirective = require('./admin/angular/directives/closecontentdirective');
var contentSelectorDirective = require('./admin/angular/directives/contentselector');
var prodileMenuDirective = require('./admin/angular/directives/profilemenu');
var configMenuDirective = require('./admin/angular/directives/configmenu');

var resumeSelectorDirective = require('./admin/angular/directives/resume/resumeselector');
var resumeDirective = require('./admin/angular/directives/resume/resumedirective');
var resumeEditForm = require('./admin/angular/directives/resume/resumeeditform');
var resumeForm = require('./admin/angular/directives/resume/resumeform');
var resumeExperience = require('./admin/angular/directives/resume/experience');
var resumeSections = require('./admin/angular/directives/resume/sections');
var resumeEducation = require('./admin/angular/directives/resume/education');
var resumeSkill = require('./admin/angular/directives/resume/skill');
var resumeLanguage = require('./admin/angular/directives/resume/language');
var resumeInterest = require('./admin/angular/directives/resume/interest');

var saleableDetails = require('./admin/angular/directives/saleabledetails');
var saleableBasic = require('./admin/angular/directives/saleablebasic');
var saleableDetailsList = require('./admin/angular/directives/saleabledetailslist');
var saleablePricesList = require('./admin/angular/directives/saleablepriceslist');
var halloEditor = require('./admin/angular/directives/hallodirective');


prfXyzApp.factory('Messages',[stc_messages]);
prfXyzApp.factory('MessageService',['Messages','$timeout',messageService]);
prfXyzApp.factory('UserService',['restmod',userService]);
prfXyzApp.factory('ProfileService',['restmod',profileService]);
prfXyzApp.factory('SaleableService',['restmod',saleableService]);
prfXyzApp.factory('SaleableDetailsService',['restmod',saleableDetailService]);
prfXyzApp.factory('SaleablePriceService',['restmod',saleablePriceService]);
prfXyzApp.factory('UserContentType',['restmod',userContentTypeService]);
prfXyzApp.factory('BiographyService',['restmod',bioService]);
prfXyzApp.factory('ThePacker',[thePacker]);
prfXyzApp.factory('NewPassword',['$http',newPassword]);
prfXyzApp.factory('NumberFormatFilter',[numberFormat]);
prfXyzApp.factory('FileProcessor',['$upload','$http','MessageService',fileProcessor]);
prfXyzApp.factory('Resume',['restmod',resumeService]);
prfXyzApp.factory('Experience',['restmod',experienceService]);
prfXyzApp.factory('ResumeHelper',['$http','MessageService',resumeHelper]);
prfXyzApp.factory('Helper',[helpersService]);
prfXyzApp.factory('Education',['restmod',educationService]);
prfXyzApp.factory('Skill',['restmod',skillService]);
prfXyzApp.factory('Language',['restmod',languageService]);
prfXyzApp.factory('Interest',['restmod',interestService]);

prfXyzApp.directive('alert',[alertDirective]);
prfXyzApp.directive('closeContent',[closeContentDirective]);
prfXyzApp.directive('contentSelector',['MessageService','UserContentType',contentSelectorDirective]);
prfXyzApp.directive('profileMenu',[prodileMenuDirective]);
prfXyzApp.directive('configMenu',[configMenuDirective]);
prfXyzApp.directive('saleableDetails',['$templateCache','$compile','$rootScope',saleableDetails]);
prfXyzApp.directive('saleableBasic',['SaleableService',saleableBasic]);
prfXyzApp.directive('saleableDetailsList',[saleableDetailsList]);
prfXyzApp.directive('saleablePricesList',[saleablePricesList]);
prfXyzApp.directive('hallo',[halloEditor]);
prfXyzApp.directive('resumeSelector',['MessageService',resumeSelectorDirective]);
prfXyzApp.directive('resume',['MessageService','Resume','$timeout','ResumeHelper',resumeDirective]);
prfXyzApp.directive('resumeEditForm',['MessageService','Resume','$timeout',resumeEditForm]);
prfXyzApp.directive('resumeForm',['MessageService','Resume','$timeout',resumeForm]);
prfXyzApp.directive('resumeExperience',['MessageService','Experience','$timeout','Helper',resumeExperience]);
prfXyzApp.directive('resumeSections',['Resume',resumeSections]);
prfXyzApp.directive('resumeEducation',['MessageService','Education','$timeout','Helper',resumeEducation]);
prfXyzApp.directive('resumeSkill',['MessageService','Skill','$timeout','Helper',resumeSkill]);
prfXyzApp.directive('resumeLanguage',['MessageService','Language','$timeout','Helper',resumeLanguage]);
prfXyzApp.directive('resumeInterest',['MessageService','Interest','$timeout','Helper',resumeInterest]);

prfXyzApp.controller('HomeCtrl',['$scope','UserService','UserContentType',homeController]);
prfXyzApp.controller('BioCtrl',['$scope','BiographyService','MessageService',bioController]);
prfXyzApp.controller('UserCtrl',['$scope','$timeout','UserService','ProfileService','MessageService','NewPassword',userController]);
prfXyzApp.controller('ConfigCtrl',['$scope','$timeout','MessageService','UserContentType',configController]);

prfXyzApp.controller('SaleableCtrl',['$scope','$rootScope','$timeout','SaleableService','MessageService','SaleableDetailsService',saleableController]);
prfXyzApp.controller('SaleableDetailCtrl',['$scope','$rootScope','SaleableService','MessageService','$element','$compile',saleableDetailController]);
prfXyzApp.controller('saleableBasicCtrl',['$scope','$rootScope','SaleableService','MessageService',saleableBasicController]);
prfXyzApp.controller('saleableAllDetailsCtrl',['$scope','$rootScope','SaleableDetailsService','MessageService','FileProcessor',saleableAllDetailsController]);
prfXyzApp.controller('saleablePriceCtrl',['$scope','$rootScope','SaleablePriceService','MessageService',saleablePriceController]);
prfXyzApp.controller('resumeCtrl',['$scope','$rootScope','ResumeHelper','MessageService',resumeController]);
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/adminapp.js","/resources/assets/js")

},{"../vendor/angularjs-file-upload/angular-file-upload-shim.min.js":65,"../vendor/angularjs-file-upload/angular-file-upload.min.js":66,"./../vendor/angular-messages/angular-messages.min.js":59,"./../vendor/angular-restmod/dist/angular-restmod-bundle.js":60,"./../vendor/angular-restmod/dist/styles/ams.min.js":61,"./../vendor/angular/angular-index.js":62,"./../vendor/angular_animate/angular-animate.min.js":64,"./../vendor/ng-fab-form/dist/ng-fab-form.min.js":67,"./../vendor/textAngular/dist/textAngular-rangy.min.js":68,"./../vendor/textAngular/dist/textAngular-sanitize.min.js":69,"./../vendor/textAngular/dist/textAngular.min.js":70,"./admin/angular/basicdetailcontroller":8,"./admin/angular/biocontroller":9,"./admin/angular/configcontroller":10,"./admin/angular/directives/alertdirective":11,"./admin/angular/directives/closecontentdirective":12,"./admin/angular/directives/configmenu":13,"./admin/angular/directives/contentselector":14,"./admin/angular/directives/hallodirective":15,"./admin/angular/directives/profilemenu":16,"./admin/angular/directives/resume/education":17,"./admin/angular/directives/resume/experience":18,"./admin/angular/directives/resume/interest":19,"./admin/angular/directives/resume/language":20,"./admin/angular/directives/resume/resumedirective":21,"./admin/angular/directives/resume/resumeeditform":22,"./admin/angular/directives/resume/resumeform":23,"./admin/angular/directives/resume/resumeselector":24,"./admin/angular/directives/resume/sections":25,"./admin/angular/directives/resume/skill":26,"./admin/angular/directives/saleablebasic":27,"./admin/angular/directives/saleabledetails":28,"./admin/angular/directives/saleabledetailslist":29,"./admin/angular/directives/saleablepriceslist":30,"./admin/angular/homecontroller":31,"./admin/angular/resumecontroller":32,"./admin/angular/saleablealldetailscontroller":33,"./admin/angular/saleablecontroller":34,"./admin/angular/saleabledetailcontroller":35,"./admin/angular/saleablepricescontroller":36,"./admin/angular/services/biographyservice":37,"./admin/angular/services/education":38,"./admin/angular/services/experience":39,"./admin/angular/services/fileprocessor":40,"./admin/angular/services/formatfilterservice":41,"./admin/angular/services/helpers":42,"./admin/angular/services/interest":43,"./admin/angular/services/language":44,"./admin/angular/services/messageservice":45,"./admin/angular/services/newpasswordservice":46,"./admin/angular/services/profileservice":47,"./admin/angular/services/resumehelper":48,"./admin/angular/services/resumeservice":49,"./admin/angular/services/saleabledetails":50,"./admin/angular/services/saleableprice":51,"./admin/angular/services/saleableservice":52,"./admin/angular/services/skill":53,"./admin/angular/services/thepacker":54,"./admin/angular/services/usercontenttypeservice":55,"./admin/angular/services/userservice":56,"./admin/angular/usercontroller":57,"./config/messages.js":58,"_process":7,"buffer":3,"jquery":2}],2:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/*!
 * jQuery JavaScript Library v2.1.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-18T15:11Z
 */

(function( global, factory ) {

	if ( typeof module === "object" && typeof module.exports === "object" ) {
		// For CommonJS and CommonJS-like environments where a proper `window`
		// is present, execute the factory and get jQuery.
		// For environments that do not have a `window` with a `document`
		// (such as Node.js), expose a factory as module.exports.
		// This accentuates the need for the creation of a real `window`.
		// e.g. var jQuery = require("jquery")(window);
		// See ticket #14549 for more info.
		module.exports = global.document ?
			factory( global, true ) :
			function( w ) {
				if ( !w.document ) {
					throw new Error( "jQuery requires a window with a document" );
				}
				return factory( w );
			};
	} else {
		factory( global );
	}

// Pass this if window is not defined yet
}(typeof window !== "undefined" ? window : this, function( window, noGlobal ) {

// Support: Firefox 18+
// Can't be in strict mode, several libs including ASP.NET trace
// the stack via arguments.caller.callee and Firefox dies if
// you try to trace through "use strict" call chains. (#13335)
//

var arr = [];

var slice = arr.slice;

var concat = arr.concat;

var push = arr.push;

var indexOf = arr.indexOf;

var class2type = {};

var toString = class2type.toString;

var hasOwn = class2type.hasOwnProperty;

var support = {};



var
	// Use the correct document accordingly with window argument (sandbox)
	document = window.document,

	version = "2.1.3",

	// Define a local copy of jQuery
	jQuery = function( selector, context ) {
		// The jQuery object is actually just the init constructor 'enhanced'
		// Need init if jQuery is called (just allow error to be thrown if not included)
		return new jQuery.fn.init( selector, context );
	},

	// Support: Android<4.1
	// Make sure we trim BOM and NBSP
	rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,

	// Matches dashed string for camelizing
	rmsPrefix = /^-ms-/,
	rdashAlpha = /-([\da-z])/gi,

	// Used by jQuery.camelCase as callback to replace()
	fcamelCase = function( all, letter ) {
		return letter.toUpperCase();
	};

jQuery.fn = jQuery.prototype = {
	// The current version of jQuery being used
	jquery: version,

	constructor: jQuery,

	// Start with an empty selector
	selector: "",

	// The default length of a jQuery object is 0
	length: 0,

	toArray: function() {
		return slice.call( this );
	},

	// Get the Nth element in the matched element set OR
	// Get the whole matched element set as a clean array
	get: function( num ) {
		return num != null ?

			// Return just the one element from the set
			( num < 0 ? this[ num + this.length ] : this[ num ] ) :

			// Return all the elements in a clean array
			slice.call( this );
	},

	// Take an array of elements and push it onto the stack
	// (returning the new matched element set)
	pushStack: function( elems ) {

		// Build a new jQuery matched element set
		var ret = jQuery.merge( this.constructor(), elems );

		// Add the old object onto the stack (as a reference)
		ret.prevObject = this;
		ret.context = this.context;

		// Return the newly-formed element set
		return ret;
	},

	// Execute a callback for every element in the matched set.
	// (You can seed the arguments with an array of args, but this is
	// only used internally.)
	each: function( callback, args ) {
		return jQuery.each( this, callback, args );
	},

	map: function( callback ) {
		return this.pushStack( jQuery.map(this, function( elem, i ) {
			return callback.call( elem, i, elem );
		}));
	},

	slice: function() {
		return this.pushStack( slice.apply( this, arguments ) );
	},

	first: function() {
		return this.eq( 0 );
	},

	last: function() {
		return this.eq( -1 );
	},

	eq: function( i ) {
		var len = this.length,
			j = +i + ( i < 0 ? len : 0 );
		return this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );
	},

	end: function() {
		return this.prevObject || this.constructor(null);
	},

	// For internal use only.
	// Behaves like an Array's method, not like a jQuery method.
	push: push,
	sort: arr.sort,
	splice: arr.splice
};

jQuery.extend = jQuery.fn.extend = function() {
	var options, name, src, copy, copyIsArray, clone,
		target = arguments[0] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;

		// Skip the boolean and the target
		target = arguments[ i ] || {};
		i++;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !jQuery.isFunction(target) ) {
		target = {};
	}

	// Extend jQuery itself if only one argument is passed
	if ( i === length ) {
		target = this;
		i--;
	}

	for ( ; i < length; i++ ) {
		// Only deal with non-null/undefined values
		if ( (options = arguments[ i ]) != null ) {
			// Extend the base object
			for ( name in options ) {
				src = target[ name ];
				copy = options[ name ];

				// Prevent never-ending loop
				if ( target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {
					if ( copyIsArray ) {
						copyIsArray = false;
						clone = src && jQuery.isArray(src) ? src : [];

					} else {
						clone = src && jQuery.isPlainObject(src) ? src : {};
					}

					// Never move original objects, clone them
					target[ name ] = jQuery.extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

jQuery.extend({
	// Unique for each copy of jQuery on the page
	expando: "jQuery" + ( version + Math.random() ).replace( /\D/g, "" ),

	// Assume jQuery is ready without the ready module
	isReady: true,

	error: function( msg ) {
		throw new Error( msg );
	},

	noop: function() {},

	isFunction: function( obj ) {
		return jQuery.type(obj) === "function";
	},

	isArray: Array.isArray,

	isWindow: function( obj ) {
		return obj != null && obj === obj.window;
	},

	isNumeric: function( obj ) {
		// parseFloat NaNs numeric-cast false positives (null|true|false|"")
		// ...but misinterprets leading-number strings, particularly hex literals ("0x...")
		// subtraction forces infinities to NaN
		// adding 1 corrects loss of precision from parseFloat (#15100)
		return !jQuery.isArray( obj ) && (obj - parseFloat( obj ) + 1) >= 0;
	},

	isPlainObject: function( obj ) {
		// Not plain objects:
		// - Any object or value whose internal [[Class]] property is not "[object Object]"
		// - DOM nodes
		// - window
		if ( jQuery.type( obj ) !== "object" || obj.nodeType || jQuery.isWindow( obj ) ) {
			return false;
		}

		if ( obj.constructor &&
				!hasOwn.call( obj.constructor.prototype, "isPrototypeOf" ) ) {
			return false;
		}

		// If the function hasn't returned already, we're confident that
		// |obj| is a plain object, created by {} or constructed with new Object
		return true;
	},

	isEmptyObject: function( obj ) {
		var name;
		for ( name in obj ) {
			return false;
		}
		return true;
	},

	type: function( obj ) {
		if ( obj == null ) {
			return obj + "";
		}
		// Support: Android<4.0, iOS<6 (functionish RegExp)
		return typeof obj === "object" || typeof obj === "function" ?
			class2type[ toString.call(obj) ] || "object" :
			typeof obj;
	},

	// Evaluates a script in a global context
	globalEval: function( code ) {
		var script,
			indirect = eval;

		code = jQuery.trim( code );

		if ( code ) {
			// If the code includes a valid, prologue position
			// strict mode pragma, execute code by injecting a
			// script tag into the document.
			if ( code.indexOf("use strict") === 1 ) {
				script = document.createElement("script");
				script.text = code;
				document.head.appendChild( script ).parentNode.removeChild( script );
			} else {
			// Otherwise, avoid the DOM node creation, insertion
			// and removal by using an indirect global eval
				indirect( code );
			}
		}
	},

	// Convert dashed to camelCase; used by the css and data modules
	// Support: IE9-11+
	// Microsoft forgot to hump their vendor prefix (#9572)
	camelCase: function( string ) {
		return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
	},

	nodeName: function( elem, name ) {
		return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
	},

	// args is for internal usage only
	each: function( obj, callback, args ) {
		var value,
			i = 0,
			length = obj.length,
			isArray = isArraylike( obj );

		if ( args ) {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			}

		// A special, fast, case for the most common use of each
		} else {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			}
		}

		return obj;
	},

	// Support: Android<4.1
	trim: function( text ) {
		return text == null ?
			"" :
			( text + "" ).replace( rtrim, "" );
	},

	// results is for internal usage only
	makeArray: function( arr, results ) {
		var ret = results || [];

		if ( arr != null ) {
			if ( isArraylike( Object(arr) ) ) {
				jQuery.merge( ret,
					typeof arr === "string" ?
					[ arr ] : arr
				);
			} else {
				push.call( ret, arr );
			}
		}

		return ret;
	},

	inArray: function( elem, arr, i ) {
		return arr == null ? -1 : indexOf.call( arr, elem, i );
	},

	merge: function( first, second ) {
		var len = +second.length,
			j = 0,
			i = first.length;

		for ( ; j < len; j++ ) {
			first[ i++ ] = second[ j ];
		}

		first.length = i;

		return first;
	},

	grep: function( elems, callback, invert ) {
		var callbackInverse,
			matches = [],
			i = 0,
			length = elems.length,
			callbackExpect = !invert;

		// Go through the array, only saving the items
		// that pass the validator function
		for ( ; i < length; i++ ) {
			callbackInverse = !callback( elems[ i ], i );
			if ( callbackInverse !== callbackExpect ) {
				matches.push( elems[ i ] );
			}
		}

		return matches;
	},

	// arg is for internal usage only
	map: function( elems, callback, arg ) {
		var value,
			i = 0,
			length = elems.length,
			isArray = isArraylike( elems ),
			ret = [];

		// Go through the array, translating each of the items to their new values
		if ( isArray ) {
			for ( ; i < length; i++ ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}

		// Go through every key on the object,
		} else {
			for ( i in elems ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}
		}

		// Flatten any nested arrays
		return concat.apply( [], ret );
	},

	// A global GUID counter for objects
	guid: 1,

	// Bind a function to a context, optionally partially applying any
	// arguments.
	proxy: function( fn, context ) {
		var tmp, args, proxy;

		if ( typeof context === "string" ) {
			tmp = fn[ context ];
			context = fn;
			fn = tmp;
		}

		// Quick check to determine if target is callable, in the spec
		// this throws a TypeError, but we will just return undefined.
		if ( !jQuery.isFunction( fn ) ) {
			return undefined;
		}

		// Simulated bind
		args = slice.call( arguments, 2 );
		proxy = function() {
			return fn.apply( context || this, args.concat( slice.call( arguments ) ) );
		};

		// Set the guid of unique handler to the same of original handler, so it can be removed
		proxy.guid = fn.guid = fn.guid || jQuery.guid++;

		return proxy;
	},

	now: Date.now,

	// jQuery.support is not used in Core but other projects attach their
	// properties to it so it needs to exist.
	support: support
});

// Populate the class2type map
jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
	class2type[ "[object " + name + "]" ] = name.toLowerCase();
});

function isArraylike( obj ) {
	var length = obj.length,
		type = jQuery.type( obj );

	if ( type === "function" || jQuery.isWindow( obj ) ) {
		return false;
	}

	if ( obj.nodeType === 1 && length ) {
		return true;
	}

	return type === "array" || length === 0 ||
		typeof length === "number" && length > 0 && ( length - 1 ) in obj;
}
var Sizzle =
/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
(function( window ) {

var i,
	support,
	Expr,
	getText,
	isXML,
	tokenize,
	compile,
	select,
	outermostContext,
	sortInput,
	hasDuplicate,

	// Local document vars
	setDocument,
	document,
	docElem,
	documentIsHTML,
	rbuggyQSA,
	rbuggyMatches,
	matches,
	contains,

	// Instance-specific data
	expando = "sizzle" + 1 * new Date(),
	preferredDoc = window.document,
	dirruns = 0,
	done = 0,
	classCache = createCache(),
	tokenCache = createCache(),
	compilerCache = createCache(),
	sortOrder = function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
		}
		return 0;
	},

	// General-purpose constants
	MAX_NEGATIVE = 1 << 31,

	// Instance methods
	hasOwn = ({}).hasOwnProperty,
	arr = [],
	pop = arr.pop,
	push_native = arr.push,
	push = arr.push,
	slice = arr.slice,
	// Use a stripped-down indexOf as it's faster than native
	// http://jsperf.com/thor-indexof-vs-for/5
	indexOf = function( list, elem ) {
		var i = 0,
			len = list.length;
		for ( ; i < len; i++ ) {
			if ( list[i] === elem ) {
				return i;
			}
		}
		return -1;
	},

	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",

	// Regular expressions

	// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace
	whitespace = "[\\x20\\t\\r\\n\\f]",
	// http://www.w3.org/TR/css3-syntax/#characters
	characterEncoding = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",

	// Loosely modeled on CSS identifier characters
	// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors
	// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
	identifier = characterEncoding.replace( "w", "w#" ),

	// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors
	attributes = "\\[" + whitespace + "*(" + characterEncoding + ")(?:" + whitespace +
		// Operator (capture 2)
		"*([*^$|!~]?=)" + whitespace +
		// "Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]"
		"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace +
		"*\\]",

	pseudos = ":(" + characterEncoding + ")(?:\\((" +
		// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
		// 1. quoted (capture 3; capture 4 or capture 5)
		"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" +
		// 2. simple (capture 6)
		"((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" +
		// 3. anything else (capture 2)
		".*" +
		")\\)|)",

	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
	rwhitespace = new RegExp( whitespace + "+", "g" ),
	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),

	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),

	rattributeQuotes = new RegExp( "=" + whitespace + "*([^\\]'\"]*?)" + whitespace + "*\\]", "g" ),

	rpseudo = new RegExp( pseudos ),
	ridentifier = new RegExp( "^" + identifier + "$" ),

	matchExpr = {
		"ID": new RegExp( "^#(" + characterEncoding + ")" ),
		"CLASS": new RegExp( "^\\.(" + characterEncoding + ")" ),
		"TAG": new RegExp( "^(" + characterEncoding.replace( "w", "w*" ) + ")" ),
		"ATTR": new RegExp( "^" + attributes ),
		"PSEUDO": new RegExp( "^" + pseudos ),
		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
			"*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
			"*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
		// For use in libraries implementing .is()
		// We use this for POS matching in `select`
		"needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
			whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	},

	rinputs = /^(?:input|select|textarea|button)$/i,
	rheader = /^h\d$/i,

	rnative = /^[^{]+\{\s*\[native \w/,

	// Easily-parseable/retrievable ID or TAG or CLASS selectors
	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

	rsibling = /[+~]/,
	rescape = /'|\\/g,

	// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
	runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
	funescape = function( _, escaped, escapedWhitespace ) {
		var high = "0x" + escaped - 0x10000;
		// NaN means non-codepoint
		// Support: Firefox<24
		// Workaround erroneous numeric interpretation of +"0x"
		return high !== high || escapedWhitespace ?
			escaped :
			high < 0 ?
				// BMP codepoint
				String.fromCharCode( high + 0x10000 ) :
				// Supplemental Plane codepoint (surrogate pair)
				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	},

	// Used for iframes
	// See setDocument()
	// Removing the function wrapper causes a "Permission Denied"
	// error in IE
	unloadHandler = function() {
		setDocument();
	};

// Optimize for push.apply( _, NodeList )
try {
	push.apply(
		(arr = slice.call( preferredDoc.childNodes )),
		preferredDoc.childNodes
	);
	// Support: Android<4.0
	// Detect silently failing push.apply
	arr[ preferredDoc.childNodes.length ].nodeType;
} catch ( e ) {
	push = { apply: arr.length ?

		// Leverage slice if possible
		function( target, els ) {
			push_native.apply( target, slice.call(els) );
		} :

		// Support: IE<9
		// Otherwise append directly
		function( target, els ) {
			var j = target.length,
				i = 0;
			// Can't trust NodeList.length
			while ( (target[j++] = els[i++]) ) {}
			target.length = j - 1;
		}
	};
}

function Sizzle( selector, context, results, seed ) {
	var match, elem, m, nodeType,
		// QSA vars
		i, groups, old, nid, newContext, newSelector;

	if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
		setDocument( context );
	}

	context = context || document;
	results = results || [];
	nodeType = context.nodeType;

	if ( typeof selector !== "string" || !selector ||
		nodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {

		return results;
	}

	if ( !seed && documentIsHTML ) {

		// Try to shortcut find operations when possible (e.g., not under DocumentFragment)
		if ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {
			// Speed-up: Sizzle("#ID")
			if ( (m = match[1]) ) {
				if ( nodeType === 9 ) {
					elem = context.getElementById( m );
					// Check parentNode to catch when Blackberry 4.6 returns
					// nodes that are no longer in the document (jQuery #6963)
					if ( elem && elem.parentNode ) {
						// Handle the case where IE, Opera, and Webkit return items
						// by name instead of ID
						if ( elem.id === m ) {
							results.push( elem );
							return results;
						}
					} else {
						return results;
					}
				} else {
					// Context is not a document
					if ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&
						contains( context, elem ) && elem.id === m ) {
						results.push( elem );
						return results;
					}
				}

			// Speed-up: Sizzle("TAG")
			} else if ( match[2] ) {
				push.apply( results, context.getElementsByTagName( selector ) );
				return results;

			// Speed-up: Sizzle(".CLASS")
			} else if ( (m = match[3]) && support.getElementsByClassName ) {
				push.apply( results, context.getElementsByClassName( m ) );
				return results;
			}
		}

		// QSA path
		if ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {
			nid = old = expando;
			newContext = context;
			newSelector = nodeType !== 1 && selector;

			// qSA works strangely on Element-rooted queries
			// We can work around this by specifying an extra ID on the root
			// and working up from there (Thanks to Andrew Dupont for the technique)
			// IE 8 doesn't work on object elements
			if ( nodeType === 1 && context.nodeName.toLowerCase() !== "object" ) {
				groups = tokenize( selector );

				if ( (old = context.getAttribute("id")) ) {
					nid = old.replace( rescape, "\\$&" );
				} else {
					context.setAttribute( "id", nid );
				}
				nid = "[id='" + nid + "'] ";

				i = groups.length;
				while ( i-- ) {
					groups[i] = nid + toSelector( groups[i] );
				}
				newContext = rsibling.test( selector ) && testContext( context.parentNode ) || context;
				newSelector = groups.join(",");
			}

			if ( newSelector ) {
				try {
					push.apply( results,
						newContext.querySelectorAll( newSelector )
					);
					return results;
				} catch(qsaError) {
				} finally {
					if ( !old ) {
						context.removeAttribute("id");
					}
				}
			}
		}
	}

	// All others
	return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * Create key-value caches of limited size
 * @returns {Function(string, Object)} Returns the Object data after storing it on itself with
 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *	deleting the oldest entry
 */
function createCache() {
	var keys = [];

	function cache( key, value ) {
		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
		if ( keys.push( key + " " ) > Expr.cacheLength ) {
			// Only keep the most recent entries
			delete cache[ keys.shift() ];
		}
		return (cache[ key + " " ] = value);
	}
	return cache;
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
	fn[ expando ] = true;
	return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created div and expects a boolean result
 */
function assert( fn ) {
	var div = document.createElement("div");

	try {
		return !!fn( div );
	} catch (e) {
		return false;
	} finally {
		// Remove from its parent by default
		if ( div.parentNode ) {
			div.parentNode.removeChild( div );
		}
		// release memory in IE
		div = null;
	}
}

/**
 * Adds the same handler for all of the specified attrs
 * @param {String} attrs Pipe-separated list of attributes
 * @param {Function} handler The method that will be applied
 */
function addHandle( attrs, handler ) {
	var arr = attrs.split("|"),
		i = attrs.length;

	while ( i-- ) {
		Expr.attrHandle[ arr[i] ] = handler;
	}
}

/**
 * Checks document order of two siblings
 * @param {Element} a
 * @param {Element} b
 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
 */
function siblingCheck( a, b ) {
	var cur = b && a,
		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
			( ~b.sourceIndex || MAX_NEGATIVE ) -
			( ~a.sourceIndex || MAX_NEGATIVE );

	// Use IE sourceIndex if available on both nodes
	if ( diff ) {
		return diff;
	}

	// Check if b follows a
	if ( cur ) {
		while ( (cur = cur.nextSibling) ) {
			if ( cur === b ) {
				return -1;
			}
		}
	}

	return a ? 1 : -1;
}

/**
 * Returns a function to use in pseudos for input types
 * @param {String} type
 */
function createInputPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return name === "input" && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for buttons
 * @param {String} type
 */
function createButtonPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return (name === "input" || name === "button") && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for positionals
 * @param {Function} fn
 */
function createPositionalPseudo( fn ) {
	return markFunction(function( argument ) {
		argument = +argument;
		return markFunction(function( seed, matches ) {
			var j,
				matchIndexes = fn( [], seed.length, argument ),
				i = matchIndexes.length;

			// Match elements found at the specified indexes
			while ( i-- ) {
				if ( seed[ (j = matchIndexes[i]) ] ) {
					seed[j] = !(matches[j] = seed[j]);
				}
			}
		});
	});
}

/**
 * Checks a node for validity as a Sizzle context
 * @param {Element|Object=} context
 * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
 */
function testContext( context ) {
	return context && typeof context.getElementsByTagName !== "undefined" && context;
}

// Expose support vars for convenience
support = Sizzle.support = {};

/**
 * Detects XML nodes
 * @param {Element|Object} elem An element or a document
 * @returns {Boolean} True iff elem is a non-HTML XML node
 */
isXML = Sizzle.isXML = function( elem ) {
	// documentElement is verified for cases where it doesn't yet exist
	// (such as loading iframes in IE - #4833)
	var documentElement = elem && (elem.ownerDocument || elem).documentElement;
	return documentElement ? documentElement.nodeName !== "HTML" : false;
};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
	var hasCompare, parent,
		doc = node ? node.ownerDocument || node : preferredDoc;

	// If no document and documentElement is available, return
	if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
		return document;
	}

	// Set our document
	document = doc;
	docElem = doc.documentElement;
	parent = doc.defaultView;

	// Support: IE>8
	// If iframe document is assigned to "document" variable and if iframe has been reloaded,
	// IE will throw "permission denied" error when accessing "document" variable, see jQuery #13936
	// IE6-8 do not support the defaultView property so parent will be undefined
	if ( parent && parent !== parent.top ) {
		// IE11 does not have attachEvent, so all must suffer
		if ( parent.addEventListener ) {
			parent.addEventListener( "unload", unloadHandler, false );
		} else if ( parent.attachEvent ) {
			parent.attachEvent( "onunload", unloadHandler );
		}
	}

	/* Support tests
	---------------------------------------------------------------------- */
	documentIsHTML = !isXML( doc );

	/* Attributes
	---------------------------------------------------------------------- */

	// Support: IE<8
	// Verify that getAttribute really returns attributes and not properties
	// (excepting IE8 booleans)
	support.attributes = assert(function( div ) {
		div.className = "i";
		return !div.getAttribute("className");
	});

	/* getElement(s)By*
	---------------------------------------------------------------------- */

	// Check if getElementsByTagName("*") returns only elements
	support.getElementsByTagName = assert(function( div ) {
		div.appendChild( doc.createComment("") );
		return !div.getElementsByTagName("*").length;
	});

	// Support: IE<9
	support.getElementsByClassName = rnative.test( doc.getElementsByClassName );

	// Support: IE<10
	// Check if getElementById returns elements by name
	// The broken getElementById methods don't pick up programatically-set names,
	// so use a roundabout getElementsByName test
	support.getById = assert(function( div ) {
		docElem.appendChild( div ).id = expando;
		return !doc.getElementsByName || !doc.getElementsByName( expando ).length;
	});

	// ID find and filter
	if ( support.getById ) {
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var m = context.getElementById( id );
				// Check parentNode to catch when Blackberry 4.6 returns
				// nodes that are no longer in the document #6963
				return m && m.parentNode ? [ m ] : [];
			}
		};
		Expr.filter["ID"] = function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				return elem.getAttribute("id") === attrId;
			};
		};
	} else {
		// Support: IE6/7
		// getElementById is not reliable as a find shortcut
		delete Expr.find["ID"];

		Expr.filter["ID"] =  function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				var node = typeof elem.getAttributeNode !== "undefined" && elem.getAttributeNode("id");
				return node && node.value === attrId;
			};
		};
	}

	// Tag
	Expr.find["TAG"] = support.getElementsByTagName ?
		function( tag, context ) {
			if ( typeof context.getElementsByTagName !== "undefined" ) {
				return context.getElementsByTagName( tag );

			// DocumentFragment nodes don't have gEBTN
			} else if ( support.qsa ) {
				return context.querySelectorAll( tag );
			}
		} :

		function( tag, context ) {
			var elem,
				tmp = [],
				i = 0,
				// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too
				results = context.getElementsByTagName( tag );

			// Filter out possible comments
			if ( tag === "*" ) {
				while ( (elem = results[i++]) ) {
					if ( elem.nodeType === 1 ) {
						tmp.push( elem );
					}
				}

				return tmp;
			}
			return results;
		};

	// Class
	Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
		if ( documentIsHTML ) {
			return context.getElementsByClassName( className );
		}
	};

	/* QSA/matchesSelector
	---------------------------------------------------------------------- */

	// QSA and matchesSelector support

	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
	rbuggyMatches = [];

	// qSa(:focus) reports false when true (Chrome 21)
	// We allow this because of a bug in IE8/9 that throws an error
	// whenever `document.activeElement` is accessed on an iframe
	// So, we allow :focus to pass through QSA all the time to avoid the IE error
	// See http://bugs.jquery.com/ticket/13378
	rbuggyQSA = [];

	if ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {
		// Build QSA regex
		// Regex strategy adopted from Diego Perini
		assert(function( div ) {
			// Select is set to empty string on purpose
			// This is to test IE's treatment of not explicitly
			// setting a boolean content attribute,
			// since its presence should be enough
			// http://bugs.jquery.com/ticket/12359
			docElem.appendChild( div ).innerHTML = "<a id='" + expando + "'></a>" +
				"<select id='" + expando + "-\f]' msallowcapture=''>" +
				"<option selected=''></option></select>";

			// Support: IE8, Opera 11-12.16
			// Nothing should be selected when empty strings follow ^= or $= or *=
			// The test attribute must be unknown in Opera but "safe" for WinRT
			// http://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section
			if ( div.querySelectorAll("[msallowcapture^='']").length ) {
				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
			}

			// Support: IE8
			// Boolean attributes and "value" are not treated correctly
			if ( !div.querySelectorAll("[selected]").length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
			}

			// Support: Chrome<29, Android<4.2+, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.7+
			if ( !div.querySelectorAll( "[id~=" + expando + "-]" ).length ) {
				rbuggyQSA.push("~=");
			}

			// Webkit/Opera - :checked should return selected option elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":checked").length ) {
				rbuggyQSA.push(":checked");
			}

			// Support: Safari 8+, iOS 8+
			// https://bugs.webkit.org/show_bug.cgi?id=136851
			// In-page `selector#id sibing-combinator selector` fails
			if ( !div.querySelectorAll( "a#" + expando + "+*" ).length ) {
				rbuggyQSA.push(".#.+[+~]");
			}
		});

		assert(function( div ) {
			// Support: Windows 8 Native Apps
			// The type and name attributes are restricted during .innerHTML assignment
			var input = doc.createElement("input");
			input.setAttribute( "type", "hidden" );
			div.appendChild( input ).setAttribute( "name", "D" );

			// Support: IE8
			// Enforce case-sensitivity of name attribute
			if ( div.querySelectorAll("[name=d]").length ) {
				rbuggyQSA.push( "name" + whitespace + "*[*^$|!~]?=" );
			}

			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":enabled").length ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Opera 10-11 does not throw on post-comma invalid pseudos
			div.querySelectorAll("*,:x");
			rbuggyQSA.push(",.*:");
		});
	}

	if ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||
		docElem.webkitMatchesSelector ||
		docElem.mozMatchesSelector ||
		docElem.oMatchesSelector ||
		docElem.msMatchesSelector) )) ) {

		assert(function( div ) {
			// Check to see if it's possible to do matchesSelector
			// on a disconnected node (IE 9)
			support.disconnectedMatch = matches.call( div, "div" );

			// This should fail with an exception
			// Gecko does not error, returns false instead
			matches.call( div, "[s!='']:x" );
			rbuggyMatches.push( "!=", pseudos );
		});
	}

	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );

	/* Contains
	---------------------------------------------------------------------- */
	hasCompare = rnative.test( docElem.compareDocumentPosition );

	// Element contains another
	// Purposefully does not implement inclusive descendent
	// As in, an element does not contain itself
	contains = hasCompare || rnative.test( docElem.contains ) ?
		function( a, b ) {
			var adown = a.nodeType === 9 ? a.documentElement : a,
				bup = b && b.parentNode;
			return a === bup || !!( bup && bup.nodeType === 1 && (
				adown.contains ?
					adown.contains( bup ) :
					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
			));
		} :
		function( a, b ) {
			if ( b ) {
				while ( (b = b.parentNode) ) {
					if ( b === a ) {
						return true;
					}
				}
			}
			return false;
		};

	/* Sorting
	---------------------------------------------------------------------- */

	// Document order sorting
	sortOrder = hasCompare ?
	function( a, b ) {

		// Flag for duplicate removal
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		// Sort on method existence if only one input has compareDocumentPosition
		var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
		if ( compare ) {
			return compare;
		}

		// Calculate position if both inputs belong to the same document
		compare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?
			a.compareDocumentPosition( b ) :

			// Otherwise we know they are disconnected
			1;

		// Disconnected nodes
		if ( compare & 1 ||
			(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {

			// Choose the first element that is related to our preferred document
			if ( a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {
				return -1;
			}
			if ( b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {
				return 1;
			}

			// Maintain original order
			return sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;
		}

		return compare & 4 ? -1 : 1;
	} :
	function( a, b ) {
		// Exit early if the nodes are identical
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		var cur,
			i = 0,
			aup = a.parentNode,
			bup = b.parentNode,
			ap = [ a ],
			bp = [ b ];

		// Parentless nodes are either documents or disconnected
		if ( !aup || !bup ) {
			return a === doc ? -1 :
				b === doc ? 1 :
				aup ? -1 :
				bup ? 1 :
				sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;

		// If the nodes are siblings, we can do a quick check
		} else if ( aup === bup ) {
			return siblingCheck( a, b );
		}

		// Otherwise we need full lists of their ancestors for comparison
		cur = a;
		while ( (cur = cur.parentNode) ) {
			ap.unshift( cur );
		}
		cur = b;
		while ( (cur = cur.parentNode) ) {
			bp.unshift( cur );
		}

		// Walk down the tree looking for a discrepancy
		while ( ap[i] === bp[i] ) {
			i++;
		}

		return i ?
			// Do a sibling check if the nodes have a common ancestor
			siblingCheck( ap[i], bp[i] ) :

			// Otherwise nodes in our document sort first
			ap[i] === preferredDoc ? -1 :
			bp[i] === preferredDoc ? 1 :
			0;
	};

	return doc;
};

Sizzle.matches = function( expr, elements ) {
	return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	// Make sure that attribute selectors are quoted
	expr = expr.replace( rattributeQuotes, "='$1']" );

	if ( support.matchesSelector && documentIsHTML &&
		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {

		try {
			var ret = matches.call( elem, expr );

			// IE 9's matchesSelector returns false on disconnected nodes
			if ( ret || support.disconnectedMatch ||
					// As well, disconnected nodes are said to be in a document
					// fragment in IE 9
					elem.document && elem.document.nodeType !== 11 ) {
				return ret;
			}
		} catch (e) {}
	}

	return Sizzle( expr, document, null, [ elem ] ).length > 0;
};

Sizzle.contains = function( context, elem ) {
	// Set document vars if needed
	if ( ( context.ownerDocument || context ) !== document ) {
		setDocument( context );
	}
	return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	var fn = Expr.attrHandle[ name.toLowerCase() ],
		// Don't get fooled by Object.prototype properties (jQuery #13807)
		val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
			fn( elem, name, !documentIsHTML ) :
			undefined;

	return val !== undefined ?
		val :
		support.attributes || !documentIsHTML ?
			elem.getAttribute( name ) :
			(val = elem.getAttributeNode(name)) && val.specified ?
				val.value :
				null;
};

Sizzle.error = function( msg ) {
	throw new Error( "Syntax error, unrecognized expression: " + msg );
};

/**
 * Document sorting and removing duplicates
 * @param {ArrayLike} results
 */
Sizzle.uniqueSort = function( results ) {
	var elem,
		duplicates = [],
		j = 0,
		i = 0;

	// Unless we *know* we can detect duplicates, assume their presence
	hasDuplicate = !support.detectDuplicates;
	sortInput = !support.sortStable && results.slice( 0 );
	results.sort( sortOrder );

	if ( hasDuplicate ) {
		while ( (elem = results[i++]) ) {
			if ( elem === results[ i ] ) {
				j = duplicates.push( i );
			}
		}
		while ( j-- ) {
			results.splice( duplicates[ j ], 1 );
		}
	}

	// Clear input after sorting to release objects
	// See https://github.com/jquery/sizzle/pull/225
	sortInput = null;

	return results;
};

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
	var node,
		ret = "",
		i = 0,
		nodeType = elem.nodeType;

	if ( !nodeType ) {
		// If no nodeType, this is expected to be an array
		while ( (node = elem[i++]) ) {
			// Do not traverse comment nodes
			ret += getText( node );
		}
	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
		// Use textContent for elements
		// innerText usage removed for consistency of new lines (jQuery #11153)
		if ( typeof elem.textContent === "string" ) {
			return elem.textContent;
		} else {
			// Traverse its children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				ret += getText( elem );
			}
		}
	} else if ( nodeType === 3 || nodeType === 4 ) {
		return elem.nodeValue;
	}
	// Do not include comment or processing instruction nodes

	return ret;
};

Expr = Sizzle.selectors = {

	// Can be adjusted by the user
	cacheLength: 50,

	createPseudo: markFunction,

	match: matchExpr,

	attrHandle: {},

	find: {},

	relative: {
		">": { dir: "parentNode", first: true },
		" ": { dir: "parentNode" },
		"+": { dir: "previousSibling", first: true },
		"~": { dir: "previousSibling" }
	},

	preFilter: {
		"ATTR": function( match ) {
			match[1] = match[1].replace( runescape, funescape );

			// Move the given value to match[3] whether quoted or unquoted
			match[3] = ( match[3] || match[4] || match[5] || "" ).replace( runescape, funescape );

			if ( match[2] === "~=" ) {
				match[3] = " " + match[3] + " ";
			}

			return match.slice( 0, 4 );
		},

		"CHILD": function( match ) {
			/* matches from matchExpr["CHILD"]
				1 type (only|nth|...)
				2 what (child|of-type)
				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
				4 xn-component of xn+y argument ([+-]?\d*n|)
				5 sign of xn-component
				6 x of xn-component
				7 sign of y-component
				8 y of y-component
			*/
			match[1] = match[1].toLowerCase();

			if ( match[1].slice( 0, 3 ) === "nth" ) {
				// nth-* requires argument
				if ( !match[3] ) {
					Sizzle.error( match[0] );
				}

				// numeric x and y parameters for Expr.filter.CHILD
				// remember that false/true cast respectively to 0/1
				match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
				match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );

			// other types prohibit arguments
			} else if ( match[3] ) {
				Sizzle.error( match[0] );
			}

			return match;
		},

		"PSEUDO": function( match ) {
			var excess,
				unquoted = !match[6] && match[2];

			if ( matchExpr["CHILD"].test( match[0] ) ) {
				return null;
			}

			// Accept quoted arguments as-is
			if ( match[3] ) {
				match[2] = match[4] || match[5] || "";

			// Strip excess characters from unquoted arguments
			} else if ( unquoted && rpseudo.test( unquoted ) &&
				// Get excess from tokenize (recursively)
				(excess = tokenize( unquoted, true )) &&
				// advance to the next closing parenthesis
				(excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {

				// excess is a negative index
				match[0] = match[0].slice( 0, excess );
				match[2] = unquoted.slice( 0, excess );
			}

			// Return only captures needed by the pseudo filter method (type and argument)
			return match.slice( 0, 3 );
		}
	},

	filter: {

		"TAG": function( nodeNameSelector ) {
			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
			return nodeNameSelector === "*" ?
				function() { return true; } :
				function( elem ) {
					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
				};
		},

		"CLASS": function( className ) {
			var pattern = classCache[ className + " " ];

			return pattern ||
				(pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
				classCache( className, function( elem ) {
					return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== "undefined" && elem.getAttribute("class") || "" );
				});
		},

		"ATTR": function( name, operator, check ) {
			return function( elem ) {
				var result = Sizzle.attr( elem, name );

				if ( result == null ) {
					return operator === "!=";
				}
				if ( !operator ) {
					return true;
				}

				result += "";

				return operator === "=" ? result === check :
					operator === "!=" ? result !== check :
					operator === "^=" ? check && result.indexOf( check ) === 0 :
					operator === "*=" ? check && result.indexOf( check ) > -1 :
					operator === "$=" ? check && result.slice( -check.length ) === check :
					operator === "~=" ? ( " " + result.replace( rwhitespace, " " ) + " " ).indexOf( check ) > -1 :
					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
					false;
			};
		},

		"CHILD": function( type, what, argument, first, last ) {
			var simple = type.slice( 0, 3 ) !== "nth",
				forward = type.slice( -4 ) !== "last",
				ofType = what === "of-type";

			return first === 1 && last === 0 ?

				// Shortcut for :nth-*(n)
				function( elem ) {
					return !!elem.parentNode;
				} :

				function( elem, context, xml ) {
					var cache, outerCache, node, diff, nodeIndex, start,
						dir = simple !== forward ? "nextSibling" : "previousSibling",
						parent = elem.parentNode,
						name = ofType && elem.nodeName.toLowerCase(),
						useCache = !xml && !ofType;

					if ( parent ) {

						// :(first|last|only)-(child|of-type)
						if ( simple ) {
							while ( dir ) {
								node = elem;
								while ( (node = node[ dir ]) ) {
									if ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {
										return false;
									}
								}
								// Reverse direction for :only-* (if we haven't yet done so)
								start = dir = type === "only" && !start && "nextSibling";
							}
							return true;
						}

						start = [ forward ? parent.firstChild : parent.lastChild ];

						// non-xml :nth-child(...) stores cache data on `parent`
						if ( forward && useCache ) {
							// Seek `elem` from a previously-cached index
							outerCache = parent[ expando ] || (parent[ expando ] = {});
							cache = outerCache[ type ] || [];
							nodeIndex = cache[0] === dirruns && cache[1];
							diff = cache[0] === dirruns && cache[2];
							node = nodeIndex && parent.childNodes[ nodeIndex ];

							while ( (node = ++nodeIndex && node && node[ dir ] ||

								// Fallback to seeking `elem` from the start
								(diff = nodeIndex = 0) || start.pop()) ) {

								// When found, cache indexes on `parent` and break
								if ( node.nodeType === 1 && ++diff && node === elem ) {
									outerCache[ type ] = [ dirruns, nodeIndex, diff ];
									break;
								}
							}

						// Use previously-cached element index if available
						} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {
							diff = cache[1];

						// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)
						} else {
							// Use the same loop as above to seek `elem` from the start
							while ( (node = ++nodeIndex && node && node[ dir ] ||
								(diff = nodeIndex = 0) || start.pop()) ) {

								if ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {
									// Cache the index of each encountered element
									if ( useCache ) {
										(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];
									}

									if ( node === elem ) {
										break;
									}
								}
							}
						}

						// Incorporate the offset, then check against cycle size
						diff -= last;
						return diff === first || ( diff % first === 0 && diff / first >= 0 );
					}
				};
		},

		"PSEUDO": function( pseudo, argument ) {
			// pseudo-class names are case-insensitive
			// http://www.w3.org/TR/selectors/#pseudo-classes
			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
			// Remember that setFilters inherits from pseudos
			var args,
				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
					Sizzle.error( "unsupported pseudo: " + pseudo );

			// The user may use createPseudo to indicate that
			// arguments are needed to create the filter function
			// just as Sizzle does
			if ( fn[ expando ] ) {
				return fn( argument );
			}

			// But maintain support for old signatures
			if ( fn.length > 1 ) {
				args = [ pseudo, pseudo, "", argument ];
				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
					markFunction(function( seed, matches ) {
						var idx,
							matched = fn( seed, argument ),
							i = matched.length;
						while ( i-- ) {
							idx = indexOf( seed, matched[i] );
							seed[ idx ] = !( matches[ idx ] = matched[i] );
						}
					}) :
					function( elem ) {
						return fn( elem, 0, args );
					};
			}

			return fn;
		}
	},

	pseudos: {
		// Potentially complex pseudos
		"not": markFunction(function( selector ) {
			// Trim the selector passed to compile
			// to avoid treating leading and trailing
			// spaces as combinators
			var input = [],
				results = [],
				matcher = compile( selector.replace( rtrim, "$1" ) );

			return matcher[ expando ] ?
				markFunction(function( seed, matches, context, xml ) {
					var elem,
						unmatched = matcher( seed, null, xml, [] ),
						i = seed.length;

					// Match elements unmatched by `matcher`
					while ( i-- ) {
						if ( (elem = unmatched[i]) ) {
							seed[i] = !(matches[i] = elem);
						}
					}
				}) :
				function( elem, context, xml ) {
					input[0] = elem;
					matcher( input, null, xml, results );
					// Don't keep the element (issue #299)
					input[0] = null;
					return !results.pop();
				};
		}),

		"has": markFunction(function( selector ) {
			return function( elem ) {
				return Sizzle( selector, elem ).length > 0;
			};
		}),

		"contains": markFunction(function( text ) {
			text = text.replace( runescape, funescape );
			return function( elem ) {
				return ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;
			};
		}),

		// "Whether an element is represented by a :lang() selector
		// is based solely on the element's language value
		// being equal to the identifier C,
		// or beginning with the identifier C immediately followed by "-".
		// The matching of C against the element's language value is performed case-insensitively.
		// The identifier C does not have to be a valid language name."
		// http://www.w3.org/TR/selectors/#lang-pseudo
		"lang": markFunction( function( lang ) {
			// lang value must be a valid identifier
			if ( !ridentifier.test(lang || "") ) {
				Sizzle.error( "unsupported lang: " + lang );
			}
			lang = lang.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				var elemLang;
				do {
					if ( (elemLang = documentIsHTML ?
						elem.lang :
						elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {

						elemLang = elemLang.toLowerCase();
						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
					}
				} while ( (elem = elem.parentNode) && elem.nodeType === 1 );
				return false;
			};
		}),

		// Miscellaneous
		"target": function( elem ) {
			var hash = window.location && window.location.hash;
			return hash && hash.slice( 1 ) === elem.id;
		},

		"root": function( elem ) {
			return elem === docElem;
		},

		"focus": function( elem ) {
			return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
		},

		// Boolean properties
		"enabled": function( elem ) {
			return elem.disabled === false;
		},

		"disabled": function( elem ) {
			return elem.disabled === true;
		},

		"checked": function( elem ) {
			// In CSS3, :checked should return both checked and selected elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			var nodeName = elem.nodeName.toLowerCase();
			return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
		},

		"selected": function( elem ) {
			// Accessing this property makes selected-by-default
			// options in Safari work properly
			if ( elem.parentNode ) {
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		// Contents
		"empty": function( elem ) {
			// http://www.w3.org/TR/selectors/#empty-pseudo
			// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
			//   but not by others (comment: 8; processing instruction: 7; etc.)
			// nodeType < 6 works because attributes (2) do not appear as children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				if ( elem.nodeType < 6 ) {
					return false;
				}
			}
			return true;
		},

		"parent": function( elem ) {
			return !Expr.pseudos["empty"]( elem );
		},

		// Element/input types
		"header": function( elem ) {
			return rheader.test( elem.nodeName );
		},

		"input": function( elem ) {
			return rinputs.test( elem.nodeName );
		},

		"button": function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && elem.type === "button" || name === "button";
		},

		"text": function( elem ) {
			var attr;
			return elem.nodeName.toLowerCase() === "input" &&
				elem.type === "text" &&

				// Support: IE<8
				// New HTML5 attribute values (e.g., "search") appear with elem.type === "text"
				( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text" );
		},

		// Position-in-collection
		"first": createPositionalPseudo(function() {
			return [ 0 ];
		}),

		"last": createPositionalPseudo(function( matchIndexes, length ) {
			return [ length - 1 ];
		}),

		"eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
			return [ argument < 0 ? argument + length : argument ];
		}),

		"even": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 0;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"odd": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 1;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; --i >= 0; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; ++i < length; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		})
	}
};

Expr.pseudos["nth"] = Expr.pseudos["eq"];

// Add button/input type pseudos
for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
	Expr.pseudos[ i ] = createButtonPseudo( i );
}

// Easy API for creating new setFilters
function setFilters() {}
setFilters.prototype = Expr.filters = Expr.pseudos;
Expr.setFilters = new setFilters();

tokenize = Sizzle.tokenize = function( selector, parseOnly ) {
	var matched, match, tokens, type,
		soFar, groups, preFilters,
		cached = tokenCache[ selector + " " ];

	if ( cached ) {
		return parseOnly ? 0 : cached.slice( 0 );
	}

	soFar = selector;
	groups = [];
	preFilters = Expr.preFilter;

	while ( soFar ) {

		// Comma and first run
		if ( !matched || (match = rcomma.exec( soFar )) ) {
			if ( match ) {
				// Don't consume trailing commas as valid
				soFar = soFar.slice( match[0].length ) || soFar;
			}
			groups.push( (tokens = []) );
		}

		matched = false;

		// Combinators
		if ( (match = rcombinators.exec( soFar )) ) {
			matched = match.shift();
			tokens.push({
				value: matched,
				// Cast descendant combinators to space
				type: match[0].replace( rtrim, " " )
			});
			soFar = soFar.slice( matched.length );
		}

		// Filters
		for ( type in Expr.filter ) {
			if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
				(match = preFilters[ type ]( match ))) ) {
				matched = match.shift();
				tokens.push({
					value: matched,
					type: type,
					matches: match
				});
				soFar = soFar.slice( matched.length );
			}
		}

		if ( !matched ) {
			break;
		}
	}

	// Return the length of the invalid excess
	// if we're just parsing
	// Otherwise, throw an error or return tokens
	return parseOnly ?
		soFar.length :
		soFar ?
			Sizzle.error( selector ) :
			// Cache the tokens
			tokenCache( selector, groups ).slice( 0 );
};

function toSelector( tokens ) {
	var i = 0,
		len = tokens.length,
		selector = "";
	for ( ; i < len; i++ ) {
		selector += tokens[i].value;
	}
	return selector;
}

function addCombinator( matcher, combinator, base ) {
	var dir = combinator.dir,
		checkNonElements = base && dir === "parentNode",
		doneName = done++;

	return combinator.first ?
		// Check against closest ancestor/preceding element
		function( elem, context, xml ) {
			while ( (elem = elem[ dir ]) ) {
				if ( elem.nodeType === 1 || checkNonElements ) {
					return matcher( elem, context, xml );
				}
			}
		} :

		// Check against all ancestor/preceding elements
		function( elem, context, xml ) {
			var oldCache, outerCache,
				newCache = [ dirruns, doneName ];

			// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching
			if ( xml ) {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						if ( matcher( elem, context, xml ) ) {
							return true;
						}
					}
				}
			} else {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						outerCache = elem[ expando ] || (elem[ expando ] = {});
						if ( (oldCache = outerCache[ dir ]) &&
							oldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {

							// Assign to newCache so results back-propagate to previous elements
							return (newCache[ 2 ] = oldCache[ 2 ]);
						} else {
							// Reuse newcache so results back-propagate to previous elements
							outerCache[ dir ] = newCache;

							// A match means we're done; a fail means we have to keep checking
							if ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {
								return true;
							}
						}
					}
				}
			}
		};
}

function elementMatcher( matchers ) {
	return matchers.length > 1 ?
		function( elem, context, xml ) {
			var i = matchers.length;
			while ( i-- ) {
				if ( !matchers[i]( elem, context, xml ) ) {
					return false;
				}
			}
			return true;
		} :
		matchers[0];
}

function multipleContexts( selector, contexts, results ) {
	var i = 0,
		len = contexts.length;
	for ( ; i < len; i++ ) {
		Sizzle( selector, contexts[i], results );
	}
	return results;
}

function condense( unmatched, map, filter, context, xml ) {
	var elem,
		newUnmatched = [],
		i = 0,
		len = unmatched.length,
		mapped = map != null;

	for ( ; i < len; i++ ) {
		if ( (elem = unmatched[i]) ) {
			if ( !filter || filter( elem, context, xml ) ) {
				newUnmatched.push( elem );
				if ( mapped ) {
					map.push( i );
				}
			}
		}
	}

	return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	if ( postFilter && !postFilter[ expando ] ) {
		postFilter = setMatcher( postFilter );
	}
	if ( postFinder && !postFinder[ expando ] ) {
		postFinder = setMatcher( postFinder, postSelector );
	}
	return markFunction(function( seed, results, context, xml ) {
		var temp, i, elem,
			preMap = [],
			postMap = [],
			preexisting = results.length,

			// Get initial elements from seed or context
			elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),

			// Prefilter to get matcher input, preserving a map for seed-results synchronization
			matcherIn = preFilter && ( seed || !selector ) ?
				condense( elems, preMap, preFilter, context, xml ) :
				elems,

			matcherOut = matcher ?
				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

					// ...intermediate processing is necessary
					[] :

					// ...otherwise use results directly
					results :
				matcherIn;

		// Find primary matches
		if ( matcher ) {
			matcher( matcherIn, matcherOut, context, xml );
		}

		// Apply postFilter
		if ( postFilter ) {
			temp = condense( matcherOut, postMap );
			postFilter( temp, [], context, xml );

			// Un-match failing elements by moving them back to matcherIn
			i = temp.length;
			while ( i-- ) {
				if ( (elem = temp[i]) ) {
					matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
				}
			}
		}

		if ( seed ) {
			if ( postFinder || preFilter ) {
				if ( postFinder ) {
					// Get the final matcherOut by condensing this intermediate into postFinder contexts
					temp = [];
					i = matcherOut.length;
					while ( i-- ) {
						if ( (elem = matcherOut[i]) ) {
							// Restore matcherIn since elem is not yet a final match
							temp.push( (matcherIn[i] = elem) );
						}
					}
					postFinder( null, (matcherOut = []), temp, xml );
				}

				// Move matched elements from seed to results to keep them synchronized
				i = matcherOut.length;
				while ( i-- ) {
					if ( (elem = matcherOut[i]) &&
						(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {

						seed[temp] = !(results[temp] = elem);
					}
				}
			}

		// Add elements to results, through postFinder if defined
		} else {
			matcherOut = condense(
				matcherOut === results ?
					matcherOut.splice( preexisting, matcherOut.length ) :
					matcherOut
			);
			if ( postFinder ) {
				postFinder( null, results, matcherOut, xml );
			} else {
				push.apply( results, matcherOut );
			}
		}
	});
}

function matcherFromTokens( tokens ) {
	var checkContext, matcher, j,
		len = tokens.length,
		leadingRelative = Expr.relative[ tokens[0].type ],
		implicitRelative = leadingRelative || Expr.relative[" "],
		i = leadingRelative ? 1 : 0,

		// The foundational matcher ensures that elements are reachable from top-level context(s)
		matchContext = addCombinator( function( elem ) {
			return elem === checkContext;
		}, implicitRelative, true ),
		matchAnyContext = addCombinator( function( elem ) {
			return indexOf( checkContext, elem ) > -1;
		}, implicitRelative, true ),
		matchers = [ function( elem, context, xml ) {
			var ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
				(checkContext = context).nodeType ?
					matchContext( elem, context, xml ) :
					matchAnyContext( elem, context, xml ) );
			// Avoid hanging onto element (issue #299)
			checkContext = null;
			return ret;
		} ];

	for ( ; i < len; i++ ) {
		if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
			matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
		} else {
			matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );

			// Return special upon seeing a positional matcher
			if ( matcher[ expando ] ) {
				// Find the next relative operator (if any) for proper handling
				j = ++i;
				for ( ; j < len; j++ ) {
					if ( Expr.relative[ tokens[j].type ] ) {
						break;
					}
				}
				return setMatcher(
					i > 1 && elementMatcher( matchers ),
					i > 1 && toSelector(
						// If the preceding token was a descendant combinator, insert an implicit any-element `*`
						tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
					).replace( rtrim, "$1" ),
					matcher,
					i < j && matcherFromTokens( tokens.slice( i, j ) ),
					j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
					j < len && toSelector( tokens )
				);
			}
			matchers.push( matcher );
		}
	}

	return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	var bySet = setMatchers.length > 0,
		byElement = elementMatchers.length > 0,
		superMatcher = function( seed, context, xml, results, outermost ) {
			var elem, j, matcher,
				matchedCount = 0,
				i = "0",
				unmatched = seed && [],
				setMatched = [],
				contextBackup = outermostContext,
				// We must always have either seed elements or outermost context
				elems = seed || byElement && Expr.find["TAG"]( "*", outermost ),
				// Use integer dirruns iff this is the outermost matcher
				dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),
				len = elems.length;

			if ( outermost ) {
				outermostContext = context !== document && context;
			}

			// Add elements passing elementMatchers directly to results
			// Keep `i` a string if there are no elements so `matchedCount` will be "00" below
			// Support: IE<9, Safari
			// Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id
			for ( ; i !== len && (elem = elems[i]) != null; i++ ) {
				if ( byElement && elem ) {
					j = 0;
					while ( (matcher = elementMatchers[j++]) ) {
						if ( matcher( elem, context, xml ) ) {
							results.push( elem );
							break;
						}
					}
					if ( outermost ) {
						dirruns = dirrunsUnique;
					}
				}

				// Track unmatched elements for set filters
				if ( bySet ) {
					// They will have gone through all possible matchers
					if ( (elem = !matcher && elem) ) {
						matchedCount--;
					}

					// Lengthen the array for every element, matched or not
					if ( seed ) {
						unmatched.push( elem );
					}
				}
			}

			// Apply set filters to unmatched elements
			matchedCount += i;
			if ( bySet && i !== matchedCount ) {
				j = 0;
				while ( (matcher = setMatchers[j++]) ) {
					matcher( unmatched, setMatched, context, xml );
				}

				if ( seed ) {
					// Reintegrate element matches to eliminate the need for sorting
					if ( matchedCount > 0 ) {
						while ( i-- ) {
							if ( !(unmatched[i] || setMatched[i]) ) {
								setMatched[i] = pop.call( results );
							}
						}
					}

					// Discard index placeholder values to get only actual matches
					setMatched = condense( setMatched );
				}

				// Add matches to results
				push.apply( results, setMatched );

				// Seedless set matches succeeding multiple successful matchers stipulate sorting
				if ( outermost && !seed && setMatched.length > 0 &&
					( matchedCount + setMatchers.length ) > 1 ) {

					Sizzle.uniqueSort( results );
				}
			}

			// Override manipulation of globals by nested matchers
			if ( outermost ) {
				dirruns = dirrunsUnique;
				outermostContext = contextBackup;
			}

			return unmatched;
		};

	return bySet ?
		markFunction( superMatcher ) :
		superMatcher;
}

compile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {
	var i,
		setMatchers = [],
		elementMatchers = [],
		cached = compilerCache[ selector + " " ];

	if ( !cached ) {
		// Generate a function of recursive functions that can be used to check each element
		if ( !match ) {
			match = tokenize( selector );
		}
		i = match.length;
		while ( i-- ) {
			cached = matcherFromTokens( match[i] );
			if ( cached[ expando ] ) {
				setMatchers.push( cached );
			} else {
				elementMatchers.push( cached );
			}
		}

		// Cache the compiled function
		cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );

		// Save selector and tokenization
		cached.selector = selector;
	}
	return cached;
};

/**
 * A low-level selection function that works with Sizzle's compiled
 *  selector functions
 * @param {String|Function} selector A selector or a pre-compiled
 *  selector function built with Sizzle.compile
 * @param {Element} context
 * @param {Array} [results]
 * @param {Array} [seed] A set of elements to match against
 */
select = Sizzle.select = function( selector, context, results, seed ) {
	var i, tokens, token, type, find,
		compiled = typeof selector === "function" && selector,
		match = !seed && tokenize( (selector = compiled.selector || selector) );

	results = results || [];

	// Try to minimize operations if there is no seed and only one group
	if ( match.length === 1 ) {

		// Take a shortcut and set the context if the root selector is an ID
		tokens = match[0] = match[0].slice( 0 );
		if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
				support.getById && context.nodeType === 9 && documentIsHTML &&
				Expr.relative[ tokens[1].type ] ) {

			context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
			if ( !context ) {
				return results;

			// Precompiled matchers will still verify ancestry, so step up a level
			} else if ( compiled ) {
				context = context.parentNode;
			}

			selector = selector.slice( tokens.shift().value.length );
		}

		// Fetch a seed set for right-to-left matching
		i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
		while ( i-- ) {
			token = tokens[i];

			// Abort if we hit a combinator
			if ( Expr.relative[ (type = token.type) ] ) {
				break;
			}
			if ( (find = Expr.find[ type ]) ) {
				// Search, expanding context for leading sibling combinators
				if ( (seed = find(
					token.matches[0].replace( runescape, funescape ),
					rsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context
				)) ) {

					// If seed is empty or no tokens remain, we can return early
					tokens.splice( i, 1 );
					selector = seed.length && toSelector( tokens );
					if ( !selector ) {
						push.apply( results, seed );
						return results;
					}

					break;
				}
			}
		}
	}

	// Compile and execute a filtering function if one is not provided
	// Provide `match` to avoid retokenization if we modified the selector above
	( compiled || compile( selector, match ) )(
		seed,
		context,
		!documentIsHTML,
		results,
		rsibling.test( selector ) && testContext( context.parentNode ) || context
	);
	return results;
};

// One-time assignments

// Sort stability
support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;

// Support: Chrome 14-35+
// Always assume duplicates if they aren't passed to the comparison function
support.detectDuplicates = !!hasDuplicate;

// Initialize against the default document
setDocument();

// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
// Detached nodes confoundingly follow *each other*
support.sortDetached = assert(function( div1 ) {
	// Should return 1, but returns 4 (following)
	return div1.compareDocumentPosition( document.createElement("div") ) & 1;
});

// Support: IE<8
// Prevent attribute/property "interpolation"
// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !assert(function( div ) {
	div.innerHTML = "<a href='#'></a>";
	return div.firstChild.getAttribute("href") === "#" ;
}) ) {
	addHandle( "type|href|height|width", function( elem, name, isXML ) {
		if ( !isXML ) {
			return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
		}
	});
}

// Support: IE<9
// Use defaultValue in place of getAttribute("value")
if ( !support.attributes || !assert(function( div ) {
	div.innerHTML = "<input/>";
	div.firstChild.setAttribute( "value", "" );
	return div.firstChild.getAttribute( "value" ) === "";
}) ) {
	addHandle( "value", function( elem, name, isXML ) {
		if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
			return elem.defaultValue;
		}
	});
}

// Support: IE<9
// Use getAttributeNode to fetch booleans when getAttribute lies
if ( !assert(function( div ) {
	return div.getAttribute("disabled") == null;
}) ) {
	addHandle( booleans, function( elem, name, isXML ) {
		var val;
		if ( !isXML ) {
			return elem[ name ] === true ? name.toLowerCase() :
					(val = elem.getAttributeNode( name )) && val.specified ?
					val.value :
				null;
		}
	});
}

return Sizzle;

})( window );



jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;
jQuery.expr[":"] = jQuery.expr.pseudos;
jQuery.unique = Sizzle.uniqueSort;
jQuery.text = Sizzle.getText;
jQuery.isXMLDoc = Sizzle.isXML;
jQuery.contains = Sizzle.contains;



var rneedsContext = jQuery.expr.match.needsContext;

var rsingleTag = (/^<(\w+)\s*\/?>(?:<\/\1>|)$/);



var risSimple = /^.[^:#\[\.,]*$/;

// Implement the identical functionality for filter and not
function winnow( elements, qualifier, not ) {
	if ( jQuery.isFunction( qualifier ) ) {
		return jQuery.grep( elements, function( elem, i ) {
			/* jshint -W018 */
			return !!qualifier.call( elem, i, elem ) !== not;
		});

	}

	if ( qualifier.nodeType ) {
		return jQuery.grep( elements, function( elem ) {
			return ( elem === qualifier ) !== not;
		});

	}

	if ( typeof qualifier === "string" ) {
		if ( risSimple.test( qualifier ) ) {
			return jQuery.filter( qualifier, elements, not );
		}

		qualifier = jQuery.filter( qualifier, elements );
	}

	return jQuery.grep( elements, function( elem ) {
		return ( indexOf.call( qualifier, elem ) >= 0 ) !== not;
	});
}

jQuery.filter = function( expr, elems, not ) {
	var elem = elems[ 0 ];

	if ( not ) {
		expr = ":not(" + expr + ")";
	}

	return elems.length === 1 && elem.nodeType === 1 ?
		jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :
		jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
			return elem.nodeType === 1;
		}));
};

jQuery.fn.extend({
	find: function( selector ) {
		var i,
			len = this.length,
			ret = [],
			self = this;

		if ( typeof selector !== "string" ) {
			return this.pushStack( jQuery( selector ).filter(function() {
				for ( i = 0; i < len; i++ ) {
					if ( jQuery.contains( self[ i ], this ) ) {
						return true;
					}
				}
			}) );
		}

		for ( i = 0; i < len; i++ ) {
			jQuery.find( selector, self[ i ], ret );
		}

		// Needed because $( selector, context ) becomes $( context ).find( selector )
		ret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );
		ret.selector = this.selector ? this.selector + " " + selector : selector;
		return ret;
	},
	filter: function( selector ) {
		return this.pushStack( winnow(this, selector || [], false) );
	},
	not: function( selector ) {
		return this.pushStack( winnow(this, selector || [], true) );
	},
	is: function( selector ) {
		return !!winnow(
			this,

			// If this is a positional/relative selector, check membership in the returned set
			// so $("p:first").is("p:last") won't return true for a doc with two "p".
			typeof selector === "string" && rneedsContext.test( selector ) ?
				jQuery( selector ) :
				selector || [],
			false
		).length;
	}
});


// Initialize a jQuery object


// A central reference to the root jQuery(document)
var rootjQuery,

	// A simple way to check for HTML strings
	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
	// Strict HTML recognition (#11290: must start with <)
	rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,

	init = jQuery.fn.init = function( selector, context ) {
		var match, elem;

		// HANDLE: $(""), $(null), $(undefined), $(false)
		if ( !selector ) {
			return this;
		}

		// Handle HTML strings
		if ( typeof selector === "string" ) {
			if ( selector[0] === "<" && selector[ selector.length - 1 ] === ">" && selector.length >= 3 ) {
				// Assume that strings that start and end with <> are HTML and skip the regex check
				match = [ null, selector, null ];

			} else {
				match = rquickExpr.exec( selector );
			}

			// Match html or make sure no context is specified for #id
			if ( match && (match[1] || !context) ) {

				// HANDLE: $(html) -> $(array)
				if ( match[1] ) {
					context = context instanceof jQuery ? context[0] : context;

					// Option to run scripts is true for back-compat
					// Intentionally let the error be thrown if parseHTML is not present
					jQuery.merge( this, jQuery.parseHTML(
						match[1],
						context && context.nodeType ? context.ownerDocument || context : document,
						true
					) );

					// HANDLE: $(html, props)
					if ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {
						for ( match in context ) {
							// Properties of context are called as methods if possible
							if ( jQuery.isFunction( this[ match ] ) ) {
								this[ match ]( context[ match ] );

							// ...and otherwise set as attributes
							} else {
								this.attr( match, context[ match ] );
							}
						}
					}

					return this;

				// HANDLE: $(#id)
				} else {
					elem = document.getElementById( match[2] );

					// Support: Blackberry 4.6
					// gEBID returns nodes no longer in the document (#6963)
					if ( elem && elem.parentNode ) {
						// Inject the element directly into the jQuery object
						this.length = 1;
						this[0] = elem;
					}

					this.context = document;
					this.selector = selector;
					return this;
				}

			// HANDLE: $(expr, $(...))
			} else if ( !context || context.jquery ) {
				return ( context || rootjQuery ).find( selector );

			// HANDLE: $(expr, context)
			// (which is just equivalent to: $(context).find(expr)
			} else {
				return this.constructor( context ).find( selector );
			}

		// HANDLE: $(DOMElement)
		} else if ( selector.nodeType ) {
			this.context = this[0] = selector;
			this.length = 1;
			return this;

		// HANDLE: $(function)
		// Shortcut for document ready
		} else if ( jQuery.isFunction( selector ) ) {
			return typeof rootjQuery.ready !== "undefined" ?
				rootjQuery.ready( selector ) :
				// Execute immediately if ready is not present
				selector( jQuery );
		}

		if ( selector.selector !== undefined ) {
			this.selector = selector.selector;
			this.context = selector.context;
		}

		return jQuery.makeArray( selector, this );
	};

// Give the init function the jQuery prototype for later instantiation
init.prototype = jQuery.fn;

// Initialize central reference
rootjQuery = jQuery( document );


var rparentsprev = /^(?:parents|prev(?:Until|All))/,
	// Methods guaranteed to produce a unique set when starting from a unique set
	guaranteedUnique = {
		children: true,
		contents: true,
		next: true,
		prev: true
	};

jQuery.extend({
	dir: function( elem, dir, until ) {
		var matched = [],
			truncate = until !== undefined;

		while ( (elem = elem[ dir ]) && elem.nodeType !== 9 ) {
			if ( elem.nodeType === 1 ) {
				if ( truncate && jQuery( elem ).is( until ) ) {
					break;
				}
				matched.push( elem );
			}
		}
		return matched;
	},

	sibling: function( n, elem ) {
		var matched = [];

		for ( ; n; n = n.nextSibling ) {
			if ( n.nodeType === 1 && n !== elem ) {
				matched.push( n );
			}
		}

		return matched;
	}
});

jQuery.fn.extend({
	has: function( target ) {
		var targets = jQuery( target, this ),
			l = targets.length;

		return this.filter(function() {
			var i = 0;
			for ( ; i < l; i++ ) {
				if ( jQuery.contains( this, targets[i] ) ) {
					return true;
				}
			}
		});
	},

	closest: function( selectors, context ) {
		var cur,
			i = 0,
			l = this.length,
			matched = [],
			pos = rneedsContext.test( selectors ) || typeof selectors !== "string" ?
				jQuery( selectors, context || this.context ) :
				0;

		for ( ; i < l; i++ ) {
			for ( cur = this[i]; cur && cur !== context; cur = cur.parentNode ) {
				// Always skip document fragments
				if ( cur.nodeType < 11 && (pos ?
					pos.index(cur) > -1 :

					// Don't pass non-elements to Sizzle
					cur.nodeType === 1 &&
						jQuery.find.matchesSelector(cur, selectors)) ) {

					matched.push( cur );
					break;
				}
			}
		}

		return this.pushStack( matched.length > 1 ? jQuery.unique( matched ) : matched );
	},

	// Determine the position of an element within the set
	index: function( elem ) {

		// No argument, return index in parent
		if ( !elem ) {
			return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;
		}

		// Index in selector
		if ( typeof elem === "string" ) {
			return indexOf.call( jQuery( elem ), this[ 0 ] );
		}

		// Locate the position of the desired element
		return indexOf.call( this,

			// If it receives a jQuery object, the first element is used
			elem.jquery ? elem[ 0 ] : elem
		);
	},

	add: function( selector, context ) {
		return this.pushStack(
			jQuery.unique(
				jQuery.merge( this.get(), jQuery( selector, context ) )
			)
		);
	},

	addBack: function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter(selector)
		);
	}
});

function sibling( cur, dir ) {
	while ( (cur = cur[dir]) && cur.nodeType !== 1 ) {}
	return cur;
}

jQuery.each({
	parent: function( elem ) {
		var parent = elem.parentNode;
		return parent && parent.nodeType !== 11 ? parent : null;
	},
	parents: function( elem ) {
		return jQuery.dir( elem, "parentNode" );
	},
	parentsUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "parentNode", until );
	},
	next: function( elem ) {
		return sibling( elem, "nextSibling" );
	},
	prev: function( elem ) {
		return sibling( elem, "previousSibling" );
	},
	nextAll: function( elem ) {
		return jQuery.dir( elem, "nextSibling" );
	},
	prevAll: function( elem ) {
		return jQuery.dir( elem, "previousSibling" );
	},
	nextUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "nextSibling", until );
	},
	prevUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "previousSibling", until );
	},
	siblings: function( elem ) {
		return jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );
	},
	children: function( elem ) {
		return jQuery.sibling( elem.firstChild );
	},
	contents: function( elem ) {
		return elem.contentDocument || jQuery.merge( [], elem.childNodes );
	}
}, function( name, fn ) {
	jQuery.fn[ name ] = function( until, selector ) {
		var matched = jQuery.map( this, fn, until );

		if ( name.slice( -5 ) !== "Until" ) {
			selector = until;
		}

		if ( selector && typeof selector === "string" ) {
			matched = jQuery.filter( selector, matched );
		}

		if ( this.length > 1 ) {
			// Remove duplicates
			if ( !guaranteedUnique[ name ] ) {
				jQuery.unique( matched );
			}

			// Reverse order for parents* and prev-derivatives
			if ( rparentsprev.test( name ) ) {
				matched.reverse();
			}
		}

		return this.pushStack( matched );
	};
});
var rnotwhite = (/\S+/g);



// String to Object options format cache
var optionsCache = {};

// Convert String-formatted options into Object-formatted ones and store in cache
function createOptions( options ) {
	var object = optionsCache[ options ] = {};
	jQuery.each( options.match( rnotwhite ) || [], function( _, flag ) {
		object[ flag ] = true;
	});
	return object;
}

/*
 * Create a callback list using the following parameters:
 *
 *	options: an optional list of space-separated options that will change how
 *			the callback list behaves or a more traditional option object
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible options:
 *
 *	once:			will ensure the callback list can only be fired once (like a Deferred)
 *
 *	memory:			will keep track of previous values and will call any callback added
 *					after the list has been fired right away with the latest "memorized"
 *					values (like a Deferred)
 *
 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
 *
 *	stopOnFalse:	interrupt callings when a callback returns false
 *
 */
jQuery.Callbacks = function( options ) {

	// Convert options from String-formatted to Object-formatted if needed
	// (we check in cache first)
	options = typeof options === "string" ?
		( optionsCache[ options ] || createOptions( options ) ) :
		jQuery.extend( {}, options );

	var // Last fire value (for non-forgettable lists)
		memory,
		// Flag to know if list was already fired
		fired,
		// Flag to know if list is currently firing
		firing,
		// First callback to fire (used internally by add and fireWith)
		firingStart,
		// End of the loop when firing
		firingLength,
		// Index of currently firing callback (modified by remove if needed)
		firingIndex,
		// Actual callback list
		list = [],
		// Stack of fire calls for repeatable lists
		stack = !options.once && [],
		// Fire callbacks
		fire = function( data ) {
			memory = options.memory && data;
			fired = true;
			firingIndex = firingStart || 0;
			firingStart = 0;
			firingLength = list.length;
			firing = true;
			for ( ; list && firingIndex < firingLength; firingIndex++ ) {
				if ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {
					memory = false; // To prevent further calls using add
					break;
				}
			}
			firing = false;
			if ( list ) {
				if ( stack ) {
					if ( stack.length ) {
						fire( stack.shift() );
					}
				} else if ( memory ) {
					list = [];
				} else {
					self.disable();
				}
			}
		},
		// Actual Callbacks object
		self = {
			// Add a callback or a collection of callbacks to the list
			add: function() {
				if ( list ) {
					// First, we save the current length
					var start = list.length;
					(function add( args ) {
						jQuery.each( args, function( _, arg ) {
							var type = jQuery.type( arg );
							if ( type === "function" ) {
								if ( !options.unique || !self.has( arg ) ) {
									list.push( arg );
								}
							} else if ( arg && arg.length && type !== "string" ) {
								// Inspect recursively
								add( arg );
							}
						});
					})( arguments );
					// Do we need to add the callbacks to the
					// current firing batch?
					if ( firing ) {
						firingLength = list.length;
					// With memory, if we're not firing then
					// we should call right away
					} else if ( memory ) {
						firingStart = start;
						fire( memory );
					}
				}
				return this;
			},
			// Remove a callback from the list
			remove: function() {
				if ( list ) {
					jQuery.each( arguments, function( _, arg ) {
						var index;
						while ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
							list.splice( index, 1 );
							// Handle firing indexes
							if ( firing ) {
								if ( index <= firingLength ) {
									firingLength--;
								}
								if ( index <= firingIndex ) {
									firingIndex--;
								}
							}
						}
					});
				}
				return this;
			},
			// Check if a given callback is in the list.
			// If no argument is given, return whether or not list has callbacks attached.
			has: function( fn ) {
				return fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );
			},
			// Remove all callbacks from the list
			empty: function() {
				list = [];
				firingLength = 0;
				return this;
			},
			// Have the list do nothing anymore
			disable: function() {
				list = stack = memory = undefined;
				return this;
			},
			// Is it disabled?
			disabled: function() {
				return !list;
			},
			// Lock the list in its current state
			lock: function() {
				stack = undefined;
				if ( !memory ) {
					self.disable();
				}
				return this;
			},
			// Is it locked?
			locked: function() {
				return !stack;
			},
			// Call all callbacks with the given context and arguments
			fireWith: function( context, args ) {
				if ( list && ( !fired || stack ) ) {
					args = args || [];
					args = [ context, args.slice ? args.slice() : args ];
					if ( firing ) {
						stack.push( args );
					} else {
						fire( args );
					}
				}
				return this;
			},
			// Call all the callbacks with the given arguments
			fire: function() {
				self.fireWith( this, arguments );
				return this;
			},
			// To know if the callbacks have already been called at least once
			fired: function() {
				return !!fired;
			}
		};

	return self;
};


jQuery.extend({

	Deferred: function( func ) {
		var tuples = [
				// action, add listener, listener list, final state
				[ "resolve", "done", jQuery.Callbacks("once memory"), "resolved" ],
				[ "reject", "fail", jQuery.Callbacks("once memory"), "rejected" ],
				[ "notify", "progress", jQuery.Callbacks("memory") ]
			],
			state = "pending",
			promise = {
				state: function() {
					return state;
				},
				always: function() {
					deferred.done( arguments ).fail( arguments );
					return this;
				},
				then: function( /* fnDone, fnFail, fnProgress */ ) {
					var fns = arguments;
					return jQuery.Deferred(function( newDefer ) {
						jQuery.each( tuples, function( i, tuple ) {
							var fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];
							// deferred[ done | fail | progress ] for forwarding actions to newDefer
							deferred[ tuple[1] ](function() {
								var returned = fn && fn.apply( this, arguments );
								if ( returned && jQuery.isFunction( returned.promise ) ) {
									returned.promise()
										.done( newDefer.resolve )
										.fail( newDefer.reject )
										.progress( newDefer.notify );
								} else {
									newDefer[ tuple[ 0 ] + "With" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );
								}
							});
						});
						fns = null;
					}).promise();
				},
				// Get a promise for this deferred
				// If obj is provided, the promise aspect is added to the object
				promise: function( obj ) {
					return obj != null ? jQuery.extend( obj, promise ) : promise;
				}
			},
			deferred = {};

		// Keep pipe for back-compat
		promise.pipe = promise.then;

		// Add list-specific methods
		jQuery.each( tuples, function( i, tuple ) {
			var list = tuple[ 2 ],
				stateString = tuple[ 3 ];

			// promise[ done | fail | progress ] = list.add
			promise[ tuple[1] ] = list.add;

			// Handle state
			if ( stateString ) {
				list.add(function() {
					// state = [ resolved | rejected ]
					state = stateString;

				// [ reject_list | resolve_list ].disable; progress_list.lock
				}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );
			}

			// deferred[ resolve | reject | notify ]
			deferred[ tuple[0] ] = function() {
				deferred[ tuple[0] + "With" ]( this === deferred ? promise : this, arguments );
				return this;
			};
			deferred[ tuple[0] + "With" ] = list.fireWith;
		});

		// Make the deferred a promise
		promise.promise( deferred );

		// Call given func if any
		if ( func ) {
			func.call( deferred, deferred );
		}

		// All done!
		return deferred;
	},

	// Deferred helper
	when: function( subordinate /* , ..., subordinateN */ ) {
		var i = 0,
			resolveValues = slice.call( arguments ),
			length = resolveValues.length,

			// the count of uncompleted subordinates
			remaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,

			// the master Deferred. If resolveValues consist of only a single Deferred, just use that.
			deferred = remaining === 1 ? subordinate : jQuery.Deferred(),

			// Update function for both resolve and progress values
			updateFunc = function( i, contexts, values ) {
				return function( value ) {
					contexts[ i ] = this;
					values[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;
					if ( values === progressValues ) {
						deferred.notifyWith( contexts, values );
					} else if ( !( --remaining ) ) {
						deferred.resolveWith( contexts, values );
					}
				};
			},

			progressValues, progressContexts, resolveContexts;

		// Add listeners to Deferred subordinates; treat others as resolved
		if ( length > 1 ) {
			progressValues = new Array( length );
			progressContexts = new Array( length );
			resolveContexts = new Array( length );
			for ( ; i < length; i++ ) {
				if ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {
					resolveValues[ i ].promise()
						.done( updateFunc( i, resolveContexts, resolveValues ) )
						.fail( deferred.reject )
						.progress( updateFunc( i, progressContexts, progressValues ) );
				} else {
					--remaining;
				}
			}
		}

		// If we're not waiting on anything, resolve the master
		if ( !remaining ) {
			deferred.resolveWith( resolveContexts, resolveValues );
		}

		return deferred.promise();
	}
});


// The deferred used on DOM ready
var readyList;

jQuery.fn.ready = function( fn ) {
	// Add the callback
	jQuery.ready.promise().done( fn );

	return this;
};

jQuery.extend({
	// Is the DOM ready to be used? Set to true once it occurs.
	isReady: false,

	// A counter to track how many items to wait for before
	// the ready event fires. See #6781
	readyWait: 1,

	// Hold (or release) the ready event
	holdReady: function( hold ) {
		if ( hold ) {
			jQuery.readyWait++;
		} else {
			jQuery.ready( true );
		}
	},

	// Handle when the DOM is ready
	ready: function( wait ) {

		// Abort if there are pending holds or we're already ready
		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
			return;
		}

		// Remember that the DOM is ready
		jQuery.isReady = true;

		// If a normal DOM Ready event fired, decrement, and wait if need be
		if ( wait !== true && --jQuery.readyWait > 0 ) {
			return;
		}

		// If there are functions bound, to execute
		readyList.resolveWith( document, [ jQuery ] );

		// Trigger any bound ready events
		if ( jQuery.fn.triggerHandler ) {
			jQuery( document ).triggerHandler( "ready" );
			jQuery( document ).off( "ready" );
		}
	}
});

/**
 * The ready event handler and self cleanup method
 */
function completed() {
	document.removeEventListener( "DOMContentLoaded", completed, false );
	window.removeEventListener( "load", completed, false );
	jQuery.ready();
}

jQuery.ready.promise = function( obj ) {
	if ( !readyList ) {

		readyList = jQuery.Deferred();

		// Catch cases where $(document).ready() is called after the browser event has already occurred.
		// We once tried to use readyState "interactive" here, but it caused issues like the one
		// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15
		if ( document.readyState === "complete" ) {
			// Handle it asynchronously to allow scripts the opportunity to delay ready
			setTimeout( jQuery.ready );

		} else {

			// Use the handy event callback
			document.addEventListener( "DOMContentLoaded", completed, false );

			// A fallback to window.onload, that will always work
			window.addEventListener( "load", completed, false );
		}
	}
	return readyList.promise( obj );
};

// Kick off the DOM ready check even if the user does not
jQuery.ready.promise();




// Multifunctional method to get and set values of a collection
// The value/s can optionally be executed if it's a function
var access = jQuery.access = function( elems, fn, key, value, chainable, emptyGet, raw ) {
	var i = 0,
		len = elems.length,
		bulk = key == null;

	// Sets many values
	if ( jQuery.type( key ) === "object" ) {
		chainable = true;
		for ( i in key ) {
			jQuery.access( elems, fn, i, key[i], true, emptyGet, raw );
		}

	// Sets one value
	} else if ( value !== undefined ) {
		chainable = true;

		if ( !jQuery.isFunction( value ) ) {
			raw = true;
		}

		if ( bulk ) {
			// Bulk operations run against the entire set
			if ( raw ) {
				fn.call( elems, value );
				fn = null;

			// ...except when executing function values
			} else {
				bulk = fn;
				fn = function( elem, key, value ) {
					return bulk.call( jQuery( elem ), value );
				};
			}
		}

		if ( fn ) {
			for ( ; i < len; i++ ) {
				fn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );
			}
		}
	}

	return chainable ?
		elems :

		// Gets
		bulk ?
			fn.call( elems ) :
			len ? fn( elems[0], key ) : emptyGet;
};


/**
 * Determines whether an object can have data
 */
jQuery.acceptData = function( owner ) {
	// Accepts only:
	//  - Node
	//    - Node.ELEMENT_NODE
	//    - Node.DOCUMENT_NODE
	//  - Object
	//    - Any
	/* jshint -W018 */
	return owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );
};


function Data() {
	// Support: Android<4,
	// Old WebKit does not have Object.preventExtensions/freeze method,
	// return new empty object instead with no [[set]] accessor
	Object.defineProperty( this.cache = {}, 0, {
		get: function() {
			return {};
		}
	});

	this.expando = jQuery.expando + Data.uid++;
}

Data.uid = 1;
Data.accepts = jQuery.acceptData;

Data.prototype = {
	key: function( owner ) {
		// We can accept data for non-element nodes in modern browsers,
		// but we should not, see #8335.
		// Always return the key for a frozen object.
		if ( !Data.accepts( owner ) ) {
			return 0;
		}

		var descriptor = {},
			// Check if the owner object already has a cache key
			unlock = owner[ this.expando ];

		// If not, create one
		if ( !unlock ) {
			unlock = Data.uid++;

			// Secure it in a non-enumerable, non-writable property
			try {
				descriptor[ this.expando ] = { value: unlock };
				Object.defineProperties( owner, descriptor );

			// Support: Android<4
			// Fallback to a less secure definition
			} catch ( e ) {
				descriptor[ this.expando ] = unlock;
				jQuery.extend( owner, descriptor );
			}
		}

		// Ensure the cache object
		if ( !this.cache[ unlock ] ) {
			this.cache[ unlock ] = {};
		}

		return unlock;
	},
	set: function( owner, data, value ) {
		var prop,
			// There may be an unlock assigned to this node,
			// if there is no entry for this "owner", create one inline
			// and set the unlock as though an owner entry had always existed
			unlock = this.key( owner ),
			cache = this.cache[ unlock ];

		// Handle: [ owner, key, value ] args
		if ( typeof data === "string" ) {
			cache[ data ] = value;

		// Handle: [ owner, { properties } ] args
		} else {
			// Fresh assignments by object are shallow copied
			if ( jQuery.isEmptyObject( cache ) ) {
				jQuery.extend( this.cache[ unlock ], data );
			// Otherwise, copy the properties one-by-one to the cache object
			} else {
				for ( prop in data ) {
					cache[ prop ] = data[ prop ];
				}
			}
		}
		return cache;
	},
	get: function( owner, key ) {
		// Either a valid cache is found, or will be created.
		// New caches will be created and the unlock returned,
		// allowing direct access to the newly created
		// empty data object. A valid owner object must be provided.
		var cache = this.cache[ this.key( owner ) ];

		return key === undefined ?
			cache : cache[ key ];
	},
	access: function( owner, key, value ) {
		var stored;
		// In cases where either:
		//
		//   1. No key was specified
		//   2. A string key was specified, but no value provided
		//
		// Take the "read" path and allow the get method to determine
		// which value to return, respectively either:
		//
		//   1. The entire cache object
		//   2. The data stored at the key
		//
		if ( key === undefined ||
				((key && typeof key === "string") && value === undefined) ) {

			stored = this.get( owner, key );

			return stored !== undefined ?
				stored : this.get( owner, jQuery.camelCase(key) );
		}

		// [*]When the key is not a string, or both a key and value
		// are specified, set or extend (existing objects) with either:
		//
		//   1. An object of properties
		//   2. A key and value
		//
		this.set( owner, key, value );

		// Since the "set" path can have two possible entry points
		// return the expected data based on which path was taken[*]
		return value !== undefined ? value : key;
	},
	remove: function( owner, key ) {
		var i, name, camel,
			unlock = this.key( owner ),
			cache = this.cache[ unlock ];

		if ( key === undefined ) {
			this.cache[ unlock ] = {};

		} else {
			// Support array or space separated string of keys
			if ( jQuery.isArray( key ) ) {
				// If "name" is an array of keys...
				// When data is initially created, via ("key", "val") signature,
				// keys will be converted to camelCase.
				// Since there is no way to tell _how_ a key was added, remove
				// both plain key and camelCase key. #12786
				// This will only penalize the array argument path.
				name = key.concat( key.map( jQuery.camelCase ) );
			} else {
				camel = jQuery.camelCase( key );
				// Try the string as a key before any manipulation
				if ( key in cache ) {
					name = [ key, camel ];
				} else {
					// If a key with the spaces exists, use it.
					// Otherwise, create an array by matching non-whitespace
					name = camel;
					name = name in cache ?
						[ name ] : ( name.match( rnotwhite ) || [] );
				}
			}

			i = name.length;
			while ( i-- ) {
				delete cache[ name[ i ] ];
			}
		}
	},
	hasData: function( owner ) {
		return !jQuery.isEmptyObject(
			this.cache[ owner[ this.expando ] ] || {}
		);
	},
	discard: function( owner ) {
		if ( owner[ this.expando ] ) {
			delete this.cache[ owner[ this.expando ] ];
		}
	}
};
var data_priv = new Data();

var data_user = new Data();



//	Implementation Summary
//
//	1. Enforce API surface and semantic compatibility with 1.9.x branch
//	2. Improve the module's maintainability by reducing the storage
//		paths to a single mechanism.
//	3. Use the same single mechanism to support "private" and "user" data.
//	4. _Never_ expose "private" data to user code (TODO: Drop _data, _removeData)
//	5. Avoid exposing implementation details on user objects (eg. expando properties)
//	6. Provide a clear path for implementation upgrade to WeakMap in 2014

var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
	rmultiDash = /([A-Z])/g;

function dataAttr( elem, key, data ) {
	var name;

	// If nothing was found internally, try to fetch any
	// data from the HTML5 data-* attribute
	if ( data === undefined && elem.nodeType === 1 ) {
		name = "data-" + key.replace( rmultiDash, "-$1" ).toLowerCase();
		data = elem.getAttribute( name );

		if ( typeof data === "string" ) {
			try {
				data = data === "true" ? true :
					data === "false" ? false :
					data === "null" ? null :
					// Only convert to a number if it doesn't change the string
					+data + "" === data ? +data :
					rbrace.test( data ) ? jQuery.parseJSON( data ) :
					data;
			} catch( e ) {}

			// Make sure we set the data so it isn't changed later
			data_user.set( elem, key, data );
		} else {
			data = undefined;
		}
	}
	return data;
}

jQuery.extend({
	hasData: function( elem ) {
		return data_user.hasData( elem ) || data_priv.hasData( elem );
	},

	data: function( elem, name, data ) {
		return data_user.access( elem, name, data );
	},

	removeData: function( elem, name ) {
		data_user.remove( elem, name );
	},

	// TODO: Now that all calls to _data and _removeData have been replaced
	// with direct calls to data_priv methods, these can be deprecated.
	_data: function( elem, name, data ) {
		return data_priv.access( elem, name, data );
	},

	_removeData: function( elem, name ) {
		data_priv.remove( elem, name );
	}
});

jQuery.fn.extend({
	data: function( key, value ) {
		var i, name, data,
			elem = this[ 0 ],
			attrs = elem && elem.attributes;

		// Gets all values
		if ( key === undefined ) {
			if ( this.length ) {
				data = data_user.get( elem );

				if ( elem.nodeType === 1 && !data_priv.get( elem, "hasDataAttrs" ) ) {
					i = attrs.length;
					while ( i-- ) {

						// Support: IE11+
						// The attrs elements can be null (#14894)
						if ( attrs[ i ] ) {
							name = attrs[ i ].name;
							if ( name.indexOf( "data-" ) === 0 ) {
								name = jQuery.camelCase( name.slice(5) );
								dataAttr( elem, name, data[ name ] );
							}
						}
					}
					data_priv.set( elem, "hasDataAttrs", true );
				}
			}

			return data;
		}

		// Sets multiple values
		if ( typeof key === "object" ) {
			return this.each(function() {
				data_user.set( this, key );
			});
		}

		return access( this, function( value ) {
			var data,
				camelKey = jQuery.camelCase( key );

			// The calling jQuery object (element matches) is not empty
			// (and therefore has an element appears at this[ 0 ]) and the
			// `value` parameter was not undefined. An empty jQuery object
			// will result in `undefined` for elem = this[ 0 ] which will
			// throw an exception if an attempt to read a data cache is made.
			if ( elem && value === undefined ) {
				// Attempt to get data from the cache
				// with the key as-is
				data = data_user.get( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to get data from the cache
				// with the key camelized
				data = data_user.get( elem, camelKey );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to "discover" the data in
				// HTML5 custom data-* attrs
				data = dataAttr( elem, camelKey, undefined );
				if ( data !== undefined ) {
					return data;
				}

				// We tried really hard, but the data doesn't exist.
				return;
			}

			// Set the data...
			this.each(function() {
				// First, attempt to store a copy or reference of any
				// data that might've been store with a camelCased key.
				var data = data_user.get( this, camelKey );

				// For HTML5 data-* attribute interop, we have to
				// store property names with dashes in a camelCase form.
				// This might not apply to all properties...*
				data_user.set( this, camelKey, value );

				// *... In the case of properties that might _actually_
				// have dashes, we need to also store a copy of that
				// unchanged property.
				if ( key.indexOf("-") !== -1 && data !== undefined ) {
					data_user.set( this, key, value );
				}
			});
		}, null, value, arguments.length > 1, null, true );
	},

	removeData: function( key ) {
		return this.each(function() {
			data_user.remove( this, key );
		});
	}
});


jQuery.extend({
	queue: function( elem, type, data ) {
		var queue;

		if ( elem ) {
			type = ( type || "fx" ) + "queue";
			queue = data_priv.get( elem, type );

			// Speed up dequeue by getting out quickly if this is just a lookup
			if ( data ) {
				if ( !queue || jQuery.isArray( data ) ) {
					queue = data_priv.access( elem, type, jQuery.makeArray(data) );
				} else {
					queue.push( data );
				}
			}
			return queue || [];
		}
	},

	dequeue: function( elem, type ) {
		type = type || "fx";

		var queue = jQuery.queue( elem, type ),
			startLength = queue.length,
			fn = queue.shift(),
			hooks = jQuery._queueHooks( elem, type ),
			next = function() {
				jQuery.dequeue( elem, type );
			};

		// If the fx queue is dequeued, always remove the progress sentinel
		if ( fn === "inprogress" ) {
			fn = queue.shift();
			startLength--;
		}

		if ( fn ) {

			// Add a progress sentinel to prevent the fx queue from being
			// automatically dequeued
			if ( type === "fx" ) {
				queue.unshift( "inprogress" );
			}

			// Clear up the last queue stop function
			delete hooks.stop;
			fn.call( elem, next, hooks );
		}

		if ( !startLength && hooks ) {
			hooks.empty.fire();
		}
	},

	// Not public - generate a queueHooks object, or return the current one
	_queueHooks: function( elem, type ) {
		var key = type + "queueHooks";
		return data_priv.get( elem, key ) || data_priv.access( elem, key, {
			empty: jQuery.Callbacks("once memory").add(function() {
				data_priv.remove( elem, [ type + "queue", key ] );
			})
		});
	}
});

jQuery.fn.extend({
	queue: function( type, data ) {
		var setter = 2;

		if ( typeof type !== "string" ) {
			data = type;
			type = "fx";
			setter--;
		}

		if ( arguments.length < setter ) {
			return jQuery.queue( this[0], type );
		}

		return data === undefined ?
			this :
			this.each(function() {
				var queue = jQuery.queue( this, type, data );

				// Ensure a hooks for this queue
				jQuery._queueHooks( this, type );

				if ( type === "fx" && queue[0] !== "inprogress" ) {
					jQuery.dequeue( this, type );
				}
			});
	},
	dequeue: function( type ) {
		return this.each(function() {
			jQuery.dequeue( this, type );
		});
	},
	clearQueue: function( type ) {
		return this.queue( type || "fx", [] );
	},
	// Get a promise resolved when queues of a certain type
	// are emptied (fx is the type by default)
	promise: function( type, obj ) {
		var tmp,
			count = 1,
			defer = jQuery.Deferred(),
			elements = this,
			i = this.length,
			resolve = function() {
				if ( !( --count ) ) {
					defer.resolveWith( elements, [ elements ] );
				}
			};

		if ( typeof type !== "string" ) {
			obj = type;
			type = undefined;
		}
		type = type || "fx";

		while ( i-- ) {
			tmp = data_priv.get( elements[ i ], type + "queueHooks" );
			if ( tmp && tmp.empty ) {
				count++;
				tmp.empty.add( resolve );
			}
		}
		resolve();
		return defer.promise( obj );
	}
});
var pnum = (/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;

var cssExpand = [ "Top", "Right", "Bottom", "Left" ];

var isHidden = function( elem, el ) {
		// isHidden might be called from jQuery#filter function;
		// in that case, element will be second argument
		elem = el || elem;
		return jQuery.css( elem, "display" ) === "none" || !jQuery.contains( elem.ownerDocument, elem );
	};

var rcheckableType = (/^(?:checkbox|radio)$/i);



(function() {
	var fragment = document.createDocumentFragment(),
		div = fragment.appendChild( document.createElement( "div" ) ),
		input = document.createElement( "input" );

	// Support: Safari<=5.1
	// Check state lost if the name is set (#11217)
	// Support: Windows Web Apps (WWA)
	// `name` and `type` must use .setAttribute for WWA (#14901)
	input.setAttribute( "type", "radio" );
	input.setAttribute( "checked", "checked" );
	input.setAttribute( "name", "t" );

	div.appendChild( input );

	// Support: Safari<=5.1, Android<4.2
	// Older WebKit doesn't clone checked state correctly in fragments
	support.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;

	// Support: IE<=11+
	// Make sure textarea (and checkbox) defaultValue is properly cloned
	div.innerHTML = "<textarea>x</textarea>";
	support.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;
})();
var strundefined = typeof undefined;



support.focusinBubbles = "onfocusin" in window;


var
	rkeyEvent = /^key/,
	rmouseEvent = /^(?:mouse|pointer|contextmenu)|click/,
	rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
	rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;

function returnTrue() {
	return true;
}

function returnFalse() {
	return false;
}

function safeActiveElement() {
	try {
		return document.activeElement;
	} catch ( err ) { }
}

/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
jQuery.event = {

	global: {},

	add: function( elem, types, handler, data, selector ) {

		var handleObjIn, eventHandle, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = data_priv.get( elem );

		// Don't attach events to noData or text/comment nodes (but allow plain objects)
		if ( !elemData ) {
			return;
		}

		// Caller can pass in an object of custom data in lieu of the handler
		if ( handler.handler ) {
			handleObjIn = handler;
			handler = handleObjIn.handler;
			selector = handleObjIn.selector;
		}

		// Make sure that the handler has a unique ID, used to find/remove it later
		if ( !handler.guid ) {
			handler.guid = jQuery.guid++;
		}

		// Init the element's event structure and main handler, if this is the first
		if ( !(events = elemData.events) ) {
			events = elemData.events = {};
		}
		if ( !(eventHandle = elemData.handle) ) {
			eventHandle = elemData.handle = function( e ) {
				// Discard the second event of a jQuery.event.trigger() and
				// when an event is called after a page has unloaded
				return typeof jQuery !== strundefined && jQuery.event.triggered !== e.type ?
					jQuery.event.dispatch.apply( elem, arguments ) : undefined;
			};
		}

		// Handle multiple events separated by a space
		types = ( types || "" ).match( rnotwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// There *must* be a type, no attaching namespace-only handlers
			if ( !type ) {
				continue;
			}

			// If event changes its type, use the special event handlers for the changed type
			special = jQuery.event.special[ type ] || {};

			// If selector defined, determine special event api type, otherwise given type
			type = ( selector ? special.delegateType : special.bindType ) || type;

			// Update special based on newly reset type
			special = jQuery.event.special[ type ] || {};

			// handleObj is passed to all event handlers
			handleObj = jQuery.extend({
				type: type,
				origType: origType,
				data: data,
				handler: handler,
				guid: handler.guid,
				selector: selector,
				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
				namespace: namespaces.join(".")
			}, handleObjIn );

			// Init the event handler queue if we're the first
			if ( !(handlers = events[ type ]) ) {
				handlers = events[ type ] = [];
				handlers.delegateCount = 0;

				// Only use addEventListener if the special events handler returns false
				if ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {
					if ( elem.addEventListener ) {
						elem.addEventListener( type, eventHandle, false );
					}
				}
			}

			if ( special.add ) {
				special.add.call( elem, handleObj );

				if ( !handleObj.handler.guid ) {
					handleObj.handler.guid = handler.guid;
				}
			}

			// Add to the element's handler list, delegates in front
			if ( selector ) {
				handlers.splice( handlers.delegateCount++, 0, handleObj );
			} else {
				handlers.push( handleObj );
			}

			// Keep track of which events have ever been used, for event optimization
			jQuery.event.global[ type ] = true;
		}

	},

	// Detach an event or set of events from an element
	remove: function( elem, types, handler, selector, mappedTypes ) {

		var j, origCount, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = data_priv.hasData( elem ) && data_priv.get( elem );

		if ( !elemData || !(events = elemData.events) ) {
			return;
		}

		// Once for each type.namespace in types; type may be omitted
		types = ( types || "" ).match( rnotwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// Unbind all events (on this namespace, if provided) for the element
			if ( !type ) {
				for ( type in events ) {
					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
				}
				continue;
			}

			special = jQuery.event.special[ type ] || {};
			type = ( selector ? special.delegateType : special.bindType ) || type;
			handlers = events[ type ] || [];
			tmp = tmp[2] && new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" );

			// Remove matching events
			origCount = j = handlers.length;
			while ( j-- ) {
				handleObj = handlers[ j ];

				if ( ( mappedTypes || origType === handleObj.origType ) &&
					( !handler || handler.guid === handleObj.guid ) &&
					( !tmp || tmp.test( handleObj.namespace ) ) &&
					( !selector || selector === handleObj.selector || selector === "**" && handleObj.selector ) ) {
					handlers.splice( j, 1 );

					if ( handleObj.selector ) {
						handlers.delegateCount--;
					}
					if ( special.remove ) {
						special.remove.call( elem, handleObj );
					}
				}
			}

			// Remove generic event handler if we removed something and no more handlers exist
			// (avoids potential for endless recursion during removal of special event handlers)
			if ( origCount && !handlers.length ) {
				if ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {
					jQuery.removeEvent( elem, type, elemData.handle );
				}

				delete events[ type ];
			}
		}

		// Remove the expando if it's no longer used
		if ( jQuery.isEmptyObject( events ) ) {
			delete elemData.handle;
			data_priv.remove( elem, "events" );
		}
	},

	trigger: function( event, data, elem, onlyHandlers ) {

		var i, cur, tmp, bubbleType, ontype, handle, special,
			eventPath = [ elem || document ],
			type = hasOwn.call( event, "type" ) ? event.type : event,
			namespaces = hasOwn.call( event, "namespace" ) ? event.namespace.split(".") : [];

		cur = tmp = elem = elem || document;

		// Don't do events on text and comment nodes
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		// focus/blur morphs to focusin/out; ensure we're not firing them right now
		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
			return;
		}

		if ( type.indexOf(".") >= 0 ) {
			// Namespaced trigger; create a regexp to match event type in handle()
			namespaces = type.split(".");
			type = namespaces.shift();
			namespaces.sort();
		}
		ontype = type.indexOf(":") < 0 && "on" + type;

		// Caller can pass in a jQuery.Event object, Object, or just an event type string
		event = event[ jQuery.expando ] ?
			event :
			new jQuery.Event( type, typeof event === "object" && event );

		// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
		event.isTrigger = onlyHandlers ? 2 : 3;
		event.namespace = namespaces.join(".");
		event.namespace_re = event.namespace ?
			new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" ) :
			null;

		// Clean up the event in case it is being reused
		event.result = undefined;
		if ( !event.target ) {
			event.target = elem;
		}

		// Clone any incoming data and prepend the event, creating the handler arg list
		data = data == null ?
			[ event ] :
			jQuery.makeArray( data, [ event ] );

		// Allow special events to draw outside the lines
		special = jQuery.event.special[ type ] || {};
		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
			return;
		}

		// Determine event propagation path in advance, per W3C events spec (#9951)
		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
		if ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {

			bubbleType = special.delegateType || type;
			if ( !rfocusMorph.test( bubbleType + type ) ) {
				cur = cur.parentNode;
			}
			for ( ; cur; cur = cur.parentNode ) {
				eventPath.push( cur );
				tmp = cur;
			}

			// Only add window if we got to document (e.g., not plain obj or detached DOM)
			if ( tmp === (elem.ownerDocument || document) ) {
				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
			}
		}

		// Fire handlers on the event path
		i = 0;
		while ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {

			event.type = i > 1 ?
				bubbleType :
				special.bindType || type;

			// jQuery handler
			handle = ( data_priv.get( cur, "events" ) || {} )[ event.type ] && data_priv.get( cur, "handle" );
			if ( handle ) {
				handle.apply( cur, data );
			}

			// Native handler
			handle = ontype && cur[ ontype ];
			if ( handle && handle.apply && jQuery.acceptData( cur ) ) {
				event.result = handle.apply( cur, data );
				if ( event.result === false ) {
					event.preventDefault();
				}
			}
		}
		event.type = type;

		// If nobody prevented the default action, do it now
		if ( !onlyHandlers && !event.isDefaultPrevented() ) {

			if ( (!special._default || special._default.apply( eventPath.pop(), data ) === false) &&
				jQuery.acceptData( elem ) ) {

				// Call a native DOM method on the target with the same name name as the event.
				// Don't do default actions on window, that's where global variables be (#6170)
				if ( ontype && jQuery.isFunction( elem[ type ] ) && !jQuery.isWindow( elem ) ) {

					// Don't re-trigger an onFOO event when we call its FOO() method
					tmp = elem[ ontype ];

					if ( tmp ) {
						elem[ ontype ] = null;
					}

					// Prevent re-triggering of the same event, since we already bubbled it above
					jQuery.event.triggered = type;
					elem[ type ]();
					jQuery.event.triggered = undefined;

					if ( tmp ) {
						elem[ ontype ] = tmp;
					}
				}
			}
		}

		return event.result;
	},

	dispatch: function( event ) {

		// Make a writable jQuery.Event from the native event object
		event = jQuery.event.fix( event );

		var i, j, ret, matched, handleObj,
			handlerQueue = [],
			args = slice.call( arguments ),
			handlers = ( data_priv.get( this, "events" ) || {} )[ event.type ] || [],
			special = jQuery.event.special[ event.type ] || {};

		// Use the fix-ed jQuery.Event rather than the (read-only) native event
		args[0] = event;
		event.delegateTarget = this;

		// Call the preDispatch hook for the mapped type, and let it bail if desired
		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
			return;
		}

		// Determine handlers
		handlerQueue = jQuery.event.handlers.call( this, event, handlers );

		// Run delegates first; they may want to stop propagation beneath us
		i = 0;
		while ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {
			event.currentTarget = matched.elem;

			j = 0;
			while ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {

				// Triggered event must either 1) have no namespace, or 2) have namespace(s)
				// a subset or equal to those in the bound event (both can have no namespace).
				if ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {

					event.handleObj = handleObj;
					event.data = handleObj.data;

					ret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )
							.apply( matched.elem, args );

					if ( ret !== undefined ) {
						if ( (event.result = ret) === false ) {
							event.preventDefault();
							event.stopPropagation();
						}
					}
				}
			}
		}

		// Call the postDispatch hook for the mapped type
		if ( special.postDispatch ) {
			special.postDispatch.call( this, event );
		}

		return event.result;
	},

	handlers: function( event, handlers ) {
		var i, matches, sel, handleObj,
			handlerQueue = [],
			delegateCount = handlers.delegateCount,
			cur = event.target;

		// Find delegate handlers
		// Black-hole SVG <use> instance trees (#13180)
		// Avoid non-left-click bubbling in Firefox (#3861)
		if ( delegateCount && cur.nodeType && (!event.button || event.type !== "click") ) {

			for ( ; cur !== this; cur = cur.parentNode || this ) {

				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
				if ( cur.disabled !== true || event.type !== "click" ) {
					matches = [];
					for ( i = 0; i < delegateCount; i++ ) {
						handleObj = handlers[ i ];

						// Don't conflict with Object.prototype properties (#13203)
						sel = handleObj.selector + " ";

						if ( matches[ sel ] === undefined ) {
							matches[ sel ] = handleObj.needsContext ?
								jQuery( sel, this ).index( cur ) >= 0 :
								jQuery.find( sel, this, null, [ cur ] ).length;
						}
						if ( matches[ sel ] ) {
							matches.push( handleObj );
						}
					}
					if ( matches.length ) {
						handlerQueue.push({ elem: cur, handlers: matches });
					}
				}
			}
		}

		// Add the remaining (directly-bound) handlers
		if ( delegateCount < handlers.length ) {
			handlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });
		}

		return handlerQueue;
	},

	// Includes some event props shared by KeyEvent and MouseEvent
	props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),

	fixHooks: {},

	keyHooks: {
		props: "char charCode key keyCode".split(" "),
		filter: function( event, original ) {

			// Add which for key events
			if ( event.which == null ) {
				event.which = original.charCode != null ? original.charCode : original.keyCode;
			}

			return event;
		}
	},

	mouseHooks: {
		props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
		filter: function( event, original ) {
			var eventDoc, doc, body,
				button = original.button;

			// Calculate pageX/Y if missing and clientX/Y available
			if ( event.pageX == null && original.clientX != null ) {
				eventDoc = event.target.ownerDocument || document;
				doc = eventDoc.documentElement;
				body = eventDoc.body;

				event.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );
				event.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );
			}

			// Add which for click: 1 === left; 2 === middle; 3 === right
			// Note: button is not normalized, so don't use it
			if ( !event.which && button !== undefined ) {
				event.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );
			}

			return event;
		}
	},

	fix: function( event ) {
		if ( event[ jQuery.expando ] ) {
			return event;
		}

		// Create a writable copy of the event object and normalize some properties
		var i, prop, copy,
			type = event.type,
			originalEvent = event,
			fixHook = this.fixHooks[ type ];

		if ( !fixHook ) {
			this.fixHooks[ type ] = fixHook =
				rmouseEvent.test( type ) ? this.mouseHooks :
				rkeyEvent.test( type ) ? this.keyHooks :
				{};
		}
		copy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;

		event = new jQuery.Event( originalEvent );

		i = copy.length;
		while ( i-- ) {
			prop = copy[ i ];
			event[ prop ] = originalEvent[ prop ];
		}

		// Support: Cordova 2.5 (WebKit) (#13255)
		// All events should have a target; Cordova deviceready doesn't
		if ( !event.target ) {
			event.target = document;
		}

		// Support: Safari 6.0+, Chrome<28
		// Target should not be a text node (#504, #13143)
		if ( event.target.nodeType === 3 ) {
			event.target = event.target.parentNode;
		}

		return fixHook.filter ? fixHook.filter( event, originalEvent ) : event;
	},

	special: {
		load: {
			// Prevent triggered image.load events from bubbling to window.load
			noBubble: true
		},
		focus: {
			// Fire native event if possible so blur/focus sequence is correct
			trigger: function() {
				if ( this !== safeActiveElement() && this.focus ) {
					this.focus();
					return false;
				}
			},
			delegateType: "focusin"
		},
		blur: {
			trigger: function() {
				if ( this === safeActiveElement() && this.blur ) {
					this.blur();
					return false;
				}
			},
			delegateType: "focusout"
		},
		click: {
			// For checkbox, fire native event so checked state will be right
			trigger: function() {
				if ( this.type === "checkbox" && this.click && jQuery.nodeName( this, "input" ) ) {
					this.click();
					return false;
				}
			},

			// For cross-browser consistency, don't fire native .click() on links
			_default: function( event ) {
				return jQuery.nodeName( event.target, "a" );
			}
		},

		beforeunload: {
			postDispatch: function( event ) {

				// Support: Firefox 20+
				// Firefox doesn't alert if the returnValue field is not set.
				if ( event.result !== undefined && event.originalEvent ) {
					event.originalEvent.returnValue = event.result;
				}
			}
		}
	},

	simulate: function( type, elem, event, bubble ) {
		// Piggyback on a donor event to simulate a different one.
		// Fake originalEvent to avoid donor's stopPropagation, but if the
		// simulated event prevents default then we do the same on the donor.
		var e = jQuery.extend(
			new jQuery.Event(),
			event,
			{
				type: type,
				isSimulated: true,
				originalEvent: {}
			}
		);
		if ( bubble ) {
			jQuery.event.trigger( e, null, elem );
		} else {
			jQuery.event.dispatch.call( elem, e );
		}
		if ( e.isDefaultPrevented() ) {
			event.preventDefault();
		}
	}
};

jQuery.removeEvent = function( elem, type, handle ) {
	if ( elem.removeEventListener ) {
		elem.removeEventListener( type, handle, false );
	}
};

jQuery.Event = function( src, props ) {
	// Allow instantiation without the 'new' keyword
	if ( !(this instanceof jQuery.Event) ) {
		return new jQuery.Event( src, props );
	}

	// Event object
	if ( src && src.type ) {
		this.originalEvent = src;
		this.type = src.type;

		// Events bubbling up the document may have been marked as prevented
		// by a handler lower down the tree; reflect the correct value.
		this.isDefaultPrevented = src.defaultPrevented ||
				src.defaultPrevented === undefined &&
				// Support: Android<4.0
				src.returnValue === false ?
			returnTrue :
			returnFalse;

	// Event type
	} else {
		this.type = src;
	}

	// Put explicitly provided properties onto the event object
	if ( props ) {
		jQuery.extend( this, props );
	}

	// Create a timestamp if incoming event doesn't have one
	this.timeStamp = src && src.timeStamp || jQuery.now();

	// Mark it as fixed
	this[ jQuery.expando ] = true;
};

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
jQuery.Event.prototype = {
	isDefaultPrevented: returnFalse,
	isPropagationStopped: returnFalse,
	isImmediatePropagationStopped: returnFalse,

	preventDefault: function() {
		var e = this.originalEvent;

		this.isDefaultPrevented = returnTrue;

		if ( e && e.preventDefault ) {
			e.preventDefault();
		}
	},
	stopPropagation: function() {
		var e = this.originalEvent;

		this.isPropagationStopped = returnTrue;

		if ( e && e.stopPropagation ) {
			e.stopPropagation();
		}
	},
	stopImmediatePropagation: function() {
		var e = this.originalEvent;

		this.isImmediatePropagationStopped = returnTrue;

		if ( e && e.stopImmediatePropagation ) {
			e.stopImmediatePropagation();
		}

		this.stopPropagation();
	}
};

// Create mouseenter/leave events using mouseover/out and event-time checks
// Support: Chrome 15+
jQuery.each({
	mouseenter: "mouseover",
	mouseleave: "mouseout",
	pointerenter: "pointerover",
	pointerleave: "pointerout"
}, function( orig, fix ) {
	jQuery.event.special[ orig ] = {
		delegateType: fix,
		bindType: fix,

		handle: function( event ) {
			var ret,
				target = this,
				related = event.relatedTarget,
				handleObj = event.handleObj;

			// For mousenter/leave call the handler if related is outside the target.
			// NB: No relatedTarget if the mouse left/entered the browser window
			if ( !related || (related !== target && !jQuery.contains( target, related )) ) {
				event.type = handleObj.origType;
				ret = handleObj.handler.apply( this, arguments );
				event.type = fix;
			}
			return ret;
		}
	};
});

// Support: Firefox, Chrome, Safari
// Create "bubbling" focus and blur events
if ( !support.focusinBubbles ) {
	jQuery.each({ focus: "focusin", blur: "focusout" }, function( orig, fix ) {

		// Attach a single capturing handler on the document while someone wants focusin/focusout
		var handler = function( event ) {
				jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );
			};

		jQuery.event.special[ fix ] = {
			setup: function() {
				var doc = this.ownerDocument || this,
					attaches = data_priv.access( doc, fix );

				if ( !attaches ) {
					doc.addEventListener( orig, handler, true );
				}
				data_priv.access( doc, fix, ( attaches || 0 ) + 1 );
			},
			teardown: function() {
				var doc = this.ownerDocument || this,
					attaches = data_priv.access( doc, fix ) - 1;

				if ( !attaches ) {
					doc.removeEventListener( orig, handler, true );
					data_priv.remove( doc, fix );

				} else {
					data_priv.access( doc, fix, attaches );
				}
			}
		};
	});
}

jQuery.fn.extend({

	on: function( types, selector, data, fn, /*INTERNAL*/ one ) {
		var origFn, type;

		// Types can be a map of types/handlers
		if ( typeof types === "object" ) {
			// ( types-Object, selector, data )
			if ( typeof selector !== "string" ) {
				// ( types-Object, data )
				data = data || selector;
				selector = undefined;
			}
			for ( type in types ) {
				this.on( type, selector, data, types[ type ], one );
			}
			return this;
		}

		if ( data == null && fn == null ) {
			// ( types, fn )
			fn = selector;
			data = selector = undefined;
		} else if ( fn == null ) {
			if ( typeof selector === "string" ) {
				// ( types, selector, fn )
				fn = data;
				data = undefined;
			} else {
				// ( types, data, fn )
				fn = data;
				data = selector;
				selector = undefined;
			}
		}
		if ( fn === false ) {
			fn = returnFalse;
		} else if ( !fn ) {
			return this;
		}

		if ( one === 1 ) {
			origFn = fn;
			fn = function( event ) {
				// Can use an empty set, since event contains the info
				jQuery().off( event );
				return origFn.apply( this, arguments );
			};
			// Use same guid so caller can remove using origFn
			fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
		}
		return this.each( function() {
			jQuery.event.add( this, types, fn, data, selector );
		});
	},
	one: function( types, selector, data, fn ) {
		return this.on( types, selector, data, fn, 1 );
	},
	off: function( types, selector, fn ) {
		var handleObj, type;
		if ( types && types.preventDefault && types.handleObj ) {
			// ( event )  dispatched jQuery.Event
			handleObj = types.handleObj;
			jQuery( types.delegateTarget ).off(
				handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType,
				handleObj.selector,
				handleObj.handler
			);
			return this;
		}
		if ( typeof types === "object" ) {
			// ( types-object [, selector] )
			for ( type in types ) {
				this.off( type, selector, types[ type ] );
			}
			return this;
		}
		if ( selector === false || typeof selector === "function" ) {
			// ( types [, fn] )
			fn = selector;
			selector = undefined;
		}
		if ( fn === false ) {
			fn = returnFalse;
		}
		return this.each(function() {
			jQuery.event.remove( this, types, fn, selector );
		});
	},

	trigger: function( type, data ) {
		return this.each(function() {
			jQuery.event.trigger( type, data, this );
		});
	},
	triggerHandler: function( type, data ) {
		var elem = this[0];
		if ( elem ) {
			return jQuery.event.trigger( type, data, elem, true );
		}
	}
});


var
	rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
	rtagName = /<([\w:]+)/,
	rhtml = /<|&#?\w+;/,
	rnoInnerhtml = /<(?:script|style|link)/i,
	// checked="checked" or checked
	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
	rscriptType = /^$|\/(?:java|ecma)script/i,
	rscriptTypeMasked = /^true\/(.*)/,
	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,

	// We have to close these tags to support XHTML (#13200)
	wrapMap = {

		// Support: IE9
		option: [ 1, "<select multiple='multiple'>", "</select>" ],

		thead: [ 1, "<table>", "</table>" ],
		col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
		tr: [ 2, "<table><tbody>", "</tbody></table>" ],
		td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],

		_default: [ 0, "", "" ]
	};

// Support: IE9
wrapMap.optgroup = wrapMap.option;

wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
wrapMap.th = wrapMap.td;

// Support: 1.x compatibility
// Manipulating tables requires a tbody
function manipulationTarget( elem, content ) {
	return jQuery.nodeName( elem, "table" ) &&
		jQuery.nodeName( content.nodeType !== 11 ? content : content.firstChild, "tr" ) ?

		elem.getElementsByTagName("tbody")[0] ||
			elem.appendChild( elem.ownerDocument.createElement("tbody") ) :
		elem;
}

// Replace/restore the type attribute of script elements for safe DOM manipulation
function disableScript( elem ) {
	elem.type = (elem.getAttribute("type") !== null) + "/" + elem.type;
	return elem;
}
function restoreScript( elem ) {
	var match = rscriptTypeMasked.exec( elem.type );

	if ( match ) {
		elem.type = match[ 1 ];
	} else {
		elem.removeAttribute("type");
	}

	return elem;
}

// Mark scripts as having already been evaluated
function setGlobalEval( elems, refElements ) {
	var i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		data_priv.set(
			elems[ i ], "globalEval", !refElements || data_priv.get( refElements[ i ], "globalEval" )
		);
	}
}

function cloneCopyEvent( src, dest ) {
	var i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;

	if ( dest.nodeType !== 1 ) {
		return;
	}

	// 1. Copy private data: events, handlers, etc.
	if ( data_priv.hasData( src ) ) {
		pdataOld = data_priv.access( src );
		pdataCur = data_priv.set( dest, pdataOld );
		events = pdataOld.events;

		if ( events ) {
			delete pdataCur.handle;
			pdataCur.events = {};

			for ( type in events ) {
				for ( i = 0, l = events[ type ].length; i < l; i++ ) {
					jQuery.event.add( dest, type, events[ type ][ i ] );
				}
			}
		}
	}

	// 2. Copy user data
	if ( data_user.hasData( src ) ) {
		udataOld = data_user.access( src );
		udataCur = jQuery.extend( {}, udataOld );

		data_user.set( dest, udataCur );
	}
}

function getAll( context, tag ) {
	var ret = context.getElementsByTagName ? context.getElementsByTagName( tag || "*" ) :
			context.querySelectorAll ? context.querySelectorAll( tag || "*" ) :
			[];

	return tag === undefined || tag && jQuery.nodeName( context, tag ) ?
		jQuery.merge( [ context ], ret ) :
		ret;
}

// Fix IE bugs, see support tests
function fixInput( src, dest ) {
	var nodeName = dest.nodeName.toLowerCase();

	// Fails to persist the checked state of a cloned checkbox or radio button.
	if ( nodeName === "input" && rcheckableType.test( src.type ) ) {
		dest.checked = src.checked;

	// Fails to return the selected option to the default selected state when cloning options
	} else if ( nodeName === "input" || nodeName === "textarea" ) {
		dest.defaultValue = src.defaultValue;
	}
}

jQuery.extend({
	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
		var i, l, srcElements, destElements,
			clone = elem.cloneNode( true ),
			inPage = jQuery.contains( elem.ownerDocument, elem );

		// Fix IE cloning issues
		if ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&
				!jQuery.isXMLDoc( elem ) ) {

			// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2
			destElements = getAll( clone );
			srcElements = getAll( elem );

			for ( i = 0, l = srcElements.length; i < l; i++ ) {
				fixInput( srcElements[ i ], destElements[ i ] );
			}
		}

		// Copy the events from the original to the clone
		if ( dataAndEvents ) {
			if ( deepDataAndEvents ) {
				srcElements = srcElements || getAll( elem );
				destElements = destElements || getAll( clone );

				for ( i = 0, l = srcElements.length; i < l; i++ ) {
					cloneCopyEvent( srcElements[ i ], destElements[ i ] );
				}
			} else {
				cloneCopyEvent( elem, clone );
			}
		}

		// Preserve script evaluation history
		destElements = getAll( clone, "script" );
		if ( destElements.length > 0 ) {
			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
		}

		// Return the cloned set
		return clone;
	},

	buildFragment: function( elems, context, scripts, selection ) {
		var elem, tmp, tag, wrap, contains, j,
			fragment = context.createDocumentFragment(),
			nodes = [],
			i = 0,
			l = elems.length;

		for ( ; i < l; i++ ) {
			elem = elems[ i ];

			if ( elem || elem === 0 ) {

				// Add nodes directly
				if ( jQuery.type( elem ) === "object" ) {
					// Support: QtWebKit, PhantomJS
					// push.apply(_, arraylike) throws on ancient WebKit
					jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );

				// Convert non-html into a text node
				} else if ( !rhtml.test( elem ) ) {
					nodes.push( context.createTextNode( elem ) );

				// Convert html into DOM nodes
				} else {
					tmp = tmp || fragment.appendChild( context.createElement("div") );

					// Deserialize a standard representation
					tag = ( rtagName.exec( elem ) || [ "", "" ] )[ 1 ].toLowerCase();
					wrap = wrapMap[ tag ] || wrapMap._default;
					tmp.innerHTML = wrap[ 1 ] + elem.replace( rxhtmlTag, "<$1></$2>" ) + wrap[ 2 ];

					// Descend through wrappers to the right content
					j = wrap[ 0 ];
					while ( j-- ) {
						tmp = tmp.lastChild;
					}

					// Support: QtWebKit, PhantomJS
					// push.apply(_, arraylike) throws on ancient WebKit
					jQuery.merge( nodes, tmp.childNodes );

					// Remember the top-level container
					tmp = fragment.firstChild;

					// Ensure the created nodes are orphaned (#12392)
					tmp.textContent = "";
				}
			}
		}

		// Remove wrapper from fragment
		fragment.textContent = "";

		i = 0;
		while ( (elem = nodes[ i++ ]) ) {

			// #4087 - If origin and destination elements are the same, and this is
			// that element, do not do anything
			if ( selection && jQuery.inArray( elem, selection ) !== -1 ) {
				continue;
			}

			contains = jQuery.contains( elem.ownerDocument, elem );

			// Append to fragment
			tmp = getAll( fragment.appendChild( elem ), "script" );

			// Preserve script evaluation history
			if ( contains ) {
				setGlobalEval( tmp );
			}

			// Capture executables
			if ( scripts ) {
				j = 0;
				while ( (elem = tmp[ j++ ]) ) {
					if ( rscriptType.test( elem.type || "" ) ) {
						scripts.push( elem );
					}
				}
			}
		}

		return fragment;
	},

	cleanData: function( elems ) {
		var data, elem, type, key,
			special = jQuery.event.special,
			i = 0;

		for ( ; (elem = elems[ i ]) !== undefined; i++ ) {
			if ( jQuery.acceptData( elem ) ) {
				key = elem[ data_priv.expando ];

				if ( key && (data = data_priv.cache[ key ]) ) {
					if ( data.events ) {
						for ( type in data.events ) {
							if ( special[ type ] ) {
								jQuery.event.remove( elem, type );

							// This is a shortcut to avoid jQuery.event.remove's overhead
							} else {
								jQuery.removeEvent( elem, type, data.handle );
							}
						}
					}
					if ( data_priv.cache[ key ] ) {
						// Discard any remaining `private` data
						delete data_priv.cache[ key ];
					}
				}
			}
			// Discard any remaining `user` data
			delete data_user.cache[ elem[ data_user.expando ] ];
		}
	}
});

jQuery.fn.extend({
	text: function( value ) {
		return access( this, function( value ) {
			return value === undefined ?
				jQuery.text( this ) :
				this.empty().each(function() {
					if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
						this.textContent = value;
					}
				});
		}, null, value, arguments.length );
	},

	append: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.appendChild( elem );
			}
		});
	},

	prepend: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.insertBefore( elem, target.firstChild );
			}
		});
	},

	before: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this );
			}
		});
	},

	after: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this.nextSibling );
			}
		});
	},

	remove: function( selector, keepData /* Internal Use Only */ ) {
		var elem,
			elems = selector ? jQuery.filter( selector, this ) : this,
			i = 0;

		for ( ; (elem = elems[i]) != null; i++ ) {
			if ( !keepData && elem.nodeType === 1 ) {
				jQuery.cleanData( getAll( elem ) );
			}

			if ( elem.parentNode ) {
				if ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {
					setGlobalEval( getAll( elem, "script" ) );
				}
				elem.parentNode.removeChild( elem );
			}
		}

		return this;
	},

	empty: function() {
		var elem,
			i = 0;

		for ( ; (elem = this[i]) != null; i++ ) {
			if ( elem.nodeType === 1 ) {

				// Prevent memory leaks
				jQuery.cleanData( getAll( elem, false ) );

				// Remove any remaining nodes
				elem.textContent = "";
			}
		}

		return this;
	},

	clone: function( dataAndEvents, deepDataAndEvents ) {
		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

		return this.map(function() {
			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
		});
	},

	html: function( value ) {
		return access( this, function( value ) {
			var elem = this[ 0 ] || {},
				i = 0,
				l = this.length;

			if ( value === undefined && elem.nodeType === 1 ) {
				return elem.innerHTML;
			}

			// See if we can take a shortcut and just use innerHTML
			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
				!wrapMap[ ( rtagName.exec( value ) || [ "", "" ] )[ 1 ].toLowerCase() ] ) {

				value = value.replace( rxhtmlTag, "<$1></$2>" );

				try {
					for ( ; i < l; i++ ) {
						elem = this[ i ] || {};

						// Remove element nodes and prevent memory leaks
						if ( elem.nodeType === 1 ) {
							jQuery.cleanData( getAll( elem, false ) );
							elem.innerHTML = value;
						}
					}

					elem = 0;

				// If using innerHTML throws an exception, use the fallback method
				} catch( e ) {}
			}

			if ( elem ) {
				this.empty().append( value );
			}
		}, null, value, arguments.length );
	},

	replaceWith: function() {
		var arg = arguments[ 0 ];

		// Make the changes, replacing each context element with the new content
		this.domManip( arguments, function( elem ) {
			arg = this.parentNode;

			jQuery.cleanData( getAll( this ) );

			if ( arg ) {
				arg.replaceChild( elem, this );
			}
		});

		// Force removal if there was no new content (e.g., from empty arguments)
		return arg && (arg.length || arg.nodeType) ? this : this.remove();
	},

	detach: function( selector ) {
		return this.remove( selector, true );
	},

	domManip: function( args, callback ) {

		// Flatten any nested arrays
		args = concat.apply( [], args );

		var fragment, first, scripts, hasScripts, node, doc,
			i = 0,
			l = this.length,
			set = this,
			iNoClone = l - 1,
			value = args[ 0 ],
			isFunction = jQuery.isFunction( value );

		// We can't cloneNode fragments that contain checked, in WebKit
		if ( isFunction ||
				( l > 1 && typeof value === "string" &&
					!support.checkClone && rchecked.test( value ) ) ) {
			return this.each(function( index ) {
				var self = set.eq( index );
				if ( isFunction ) {
					args[ 0 ] = value.call( this, index, self.html() );
				}
				self.domManip( args, callback );
			});
		}

		if ( l ) {
			fragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, this );
			first = fragment.firstChild;

			if ( fragment.childNodes.length === 1 ) {
				fragment = first;
			}

			if ( first ) {
				scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
				hasScripts = scripts.length;

				// Use the original fragment for the last item instead of the first because it can end up
				// being emptied incorrectly in certain situations (#8070).
				for ( ; i < l; i++ ) {
					node = fragment;

					if ( i !== iNoClone ) {
						node = jQuery.clone( node, true, true );

						// Keep references to cloned scripts for later restoration
						if ( hasScripts ) {
							// Support: QtWebKit
							// jQuery.merge because push.apply(_, arraylike) throws
							jQuery.merge( scripts, getAll( node, "script" ) );
						}
					}

					callback.call( this[ i ], node, i );
				}

				if ( hasScripts ) {
					doc = scripts[ scripts.length - 1 ].ownerDocument;

					// Reenable scripts
					jQuery.map( scripts, restoreScript );

					// Evaluate executable scripts on first document insertion
					for ( i = 0; i < hasScripts; i++ ) {
						node = scripts[ i ];
						if ( rscriptType.test( node.type || "" ) &&
							!data_priv.access( node, "globalEval" ) && jQuery.contains( doc, node ) ) {

							if ( node.src ) {
								// Optional AJAX dependency, but won't run scripts if not present
								if ( jQuery._evalUrl ) {
									jQuery._evalUrl( node.src );
								}
							} else {
								jQuery.globalEval( node.textContent.replace( rcleanScript, "" ) );
							}
						}
					}
				}
			}
		}

		return this;
	}
});

jQuery.each({
	appendTo: "append",
	prependTo: "prepend",
	insertBefore: "before",
	insertAfter: "after",
	replaceAll: "replaceWith"
}, function( name, original ) {
	jQuery.fn[ name ] = function( selector ) {
		var elems,
			ret = [],
			insert = jQuery( selector ),
			last = insert.length - 1,
			i = 0;

		for ( ; i <= last; i++ ) {
			elems = i === last ? this : this.clone( true );
			jQuery( insert[ i ] )[ original ]( elems );

			// Support: QtWebKit
			// .get() because push.apply(_, arraylike) throws
			push.apply( ret, elems.get() );
		}

		return this.pushStack( ret );
	};
});


var iframe,
	elemdisplay = {};

/**
 * Retrieve the actual display of a element
 * @param {String} name nodeName of the element
 * @param {Object} doc Document object
 */
// Called only from within defaultDisplay
function actualDisplay( name, doc ) {
	var style,
		elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),

		// getDefaultComputedStyle might be reliably used only on attached element
		display = window.getDefaultComputedStyle && ( style = window.getDefaultComputedStyle( elem[ 0 ] ) ) ?

			// Use of this method is a temporary fix (more like optimization) until something better comes along,
			// since it was removed from specification and supported only in FF
			style.display : jQuery.css( elem[ 0 ], "display" );

	// We don't have any data stored on the element,
	// so use "detach" method as fast way to get rid of the element
	elem.detach();

	return display;
}

/**
 * Try to determine the default display value of an element
 * @param {String} nodeName
 */
function defaultDisplay( nodeName ) {
	var doc = document,
		display = elemdisplay[ nodeName ];

	if ( !display ) {
		display = actualDisplay( nodeName, doc );

		// If the simple way fails, read from inside an iframe
		if ( display === "none" || !display ) {

			// Use the already-created iframe if possible
			iframe = (iframe || jQuery( "<iframe frameborder='0' width='0' height='0'/>" )).appendTo( doc.documentElement );

			// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse
			doc = iframe[ 0 ].contentDocument;

			// Support: IE
			doc.write();
			doc.close();

			display = actualDisplay( nodeName, doc );
			iframe.detach();
		}

		// Store the correct default display
		elemdisplay[ nodeName ] = display;
	}

	return display;
}
var rmargin = (/^margin/);

var rnumnonpx = new RegExp( "^(" + pnum + ")(?!px)[a-z%]+$", "i" );

var getStyles = function( elem ) {
		// Support: IE<=11+, Firefox<=30+ (#15098, #14150)
		// IE throws on elements created in popups
		// FF meanwhile throws on frame elements through "defaultView.getComputedStyle"
		if ( elem.ownerDocument.defaultView.opener ) {
			return elem.ownerDocument.defaultView.getComputedStyle( elem, null );
		}

		return window.getComputedStyle( elem, null );
	};



function curCSS( elem, name, computed ) {
	var width, minWidth, maxWidth, ret,
		style = elem.style;

	computed = computed || getStyles( elem );

	// Support: IE9
	// getPropertyValue is only needed for .css('filter') (#12537)
	if ( computed ) {
		ret = computed.getPropertyValue( name ) || computed[ name ];
	}

	if ( computed ) {

		if ( ret === "" && !jQuery.contains( elem.ownerDocument, elem ) ) {
			ret = jQuery.style( elem, name );
		}

		// Support: iOS < 6
		// A tribute to the "awesome hack by Dean Edwards"
		// iOS < 6 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels
		// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values
		if ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {

			// Remember the original values
			width = style.width;
			minWidth = style.minWidth;
			maxWidth = style.maxWidth;

			// Put in the new values to get a computed value out
			style.minWidth = style.maxWidth = style.width = ret;
			ret = computed.width;

			// Revert the changed values
			style.width = width;
			style.minWidth = minWidth;
			style.maxWidth = maxWidth;
		}
	}

	return ret !== undefined ?
		// Support: IE
		// IE returns zIndex value as an integer.
		ret + "" :
		ret;
}


function addGetHookIf( conditionFn, hookFn ) {
	// Define the hook, we'll check on the first run if it's really needed.
	return {
		get: function() {
			if ( conditionFn() ) {
				// Hook not needed (or it's not possible to use it due
				// to missing dependency), remove it.
				delete this.get;
				return;
			}

			// Hook needed; redefine it so that the support test is not executed again.
			return (this.get = hookFn).apply( this, arguments );
		}
	};
}


(function() {
	var pixelPositionVal, boxSizingReliableVal,
		docElem = document.documentElement,
		container = document.createElement( "div" ),
		div = document.createElement( "div" );

	if ( !div.style ) {
		return;
	}

	// Support: IE9-11+
	// Style of cloned element affects source element cloned (#8908)
	div.style.backgroundClip = "content-box";
	div.cloneNode( true ).style.backgroundClip = "";
	support.clearCloneStyle = div.style.backgroundClip === "content-box";

	container.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;" +
		"position:absolute";
	container.appendChild( div );

	// Executing both pixelPosition & boxSizingReliable tests require only one layout
	// so they're executed at the same time to save the second computation.
	function computePixelPositionAndBoxSizingReliable() {
		div.style.cssText =
			// Support: Firefox<29, Android 2.3
			// Vendor-prefix box-sizing
			"-webkit-box-sizing:border-box;-moz-box-sizing:border-box;" +
			"box-sizing:border-box;display:block;margin-top:1%;top:1%;" +
			"border:1px;padding:1px;width:4px;position:absolute";
		div.innerHTML = "";
		docElem.appendChild( container );

		var divStyle = window.getComputedStyle( div, null );
		pixelPositionVal = divStyle.top !== "1%";
		boxSizingReliableVal = divStyle.width === "4px";

		docElem.removeChild( container );
	}

	// Support: node.js jsdom
	// Don't assume that getComputedStyle is a property of the global object
	if ( window.getComputedStyle ) {
		jQuery.extend( support, {
			pixelPosition: function() {

				// This test is executed only once but we still do memoizing
				// since we can use the boxSizingReliable pre-computing.
				// No need to check if the test was already performed, though.
				computePixelPositionAndBoxSizingReliable();
				return pixelPositionVal;
			},
			boxSizingReliable: function() {
				if ( boxSizingReliableVal == null ) {
					computePixelPositionAndBoxSizingReliable();
				}
				return boxSizingReliableVal;
			},
			reliableMarginRight: function() {

				// Support: Android 2.3
				// Check if div with explicit width and no margin-right incorrectly
				// gets computed margin-right based on width of container. (#3333)
				// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
				// This support function is only executed once so no memoizing is needed.
				var ret,
					marginDiv = div.appendChild( document.createElement( "div" ) );

				// Reset CSS: box-sizing; display; margin; border; padding
				marginDiv.style.cssText = div.style.cssText =
					// Support: Firefox<29, Android 2.3
					// Vendor-prefix box-sizing
					"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;" +
					"box-sizing:content-box;display:block;margin:0;border:0;padding:0";
				marginDiv.style.marginRight = marginDiv.style.width = "0";
				div.style.width = "1px";
				docElem.appendChild( container );

				ret = !parseFloat( window.getComputedStyle( marginDiv, null ).marginRight );

				docElem.removeChild( container );
				div.removeChild( marginDiv );

				return ret;
			}
		});
	}
})();


// A method for quickly swapping in/out CSS properties to get correct calculations.
jQuery.swap = function( elem, options, callback, args ) {
	var ret, name,
		old = {};

	// Remember the old values, and insert the new ones
	for ( name in options ) {
		old[ name ] = elem.style[ name ];
		elem.style[ name ] = options[ name ];
	}

	ret = callback.apply( elem, args || [] );

	// Revert the old values
	for ( name in options ) {
		elem.style[ name ] = old[ name ];
	}

	return ret;
};


var
	// Swappable if display is none or starts with table except "table", "table-cell", or "table-caption"
	// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
	rnumsplit = new RegExp( "^(" + pnum + ")(.*)$", "i" ),
	rrelNum = new RegExp( "^([+-])=(" + pnum + ")", "i" ),

	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
	cssNormalTransform = {
		letterSpacing: "0",
		fontWeight: "400"
	},

	cssPrefixes = [ "Webkit", "O", "Moz", "ms" ];

// Return a css property mapped to a potentially vendor prefixed property
function vendorPropName( style, name ) {

	// Shortcut for names that are not vendor prefixed
	if ( name in style ) {
		return name;
	}

	// Check for vendor prefixed names
	var capName = name[0].toUpperCase() + name.slice(1),
		origName = name,
		i = cssPrefixes.length;

	while ( i-- ) {
		name = cssPrefixes[ i ] + capName;
		if ( name in style ) {
			return name;
		}
	}

	return origName;
}

function setPositiveNumber( elem, value, subtract ) {
	var matches = rnumsplit.exec( value );
	return matches ?
		// Guard against undefined "subtract", e.g., when used as in cssHooks
		Math.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || "px" ) :
		value;
}

function augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {
	var i = extra === ( isBorderBox ? "border" : "content" ) ?
		// If we already have the right measurement, avoid augmentation
		4 :
		// Otherwise initialize for horizontal or vertical properties
		name === "width" ? 1 : 0,

		val = 0;

	for ( ; i < 4; i += 2 ) {
		// Both box models exclude margin, so add it if we want it
		if ( extra === "margin" ) {
			val += jQuery.css( elem, extra + cssExpand[ i ], true, styles );
		}

		if ( isBorderBox ) {
			// border-box includes padding, so remove it if we want content
			if ( extra === "content" ) {
				val -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
			}

			// At this point, extra isn't border nor margin, so remove border
			if ( extra !== "margin" ) {
				val -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		} else {
			// At this point, extra isn't content, so add padding
			val += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );

			// At this point, extra isn't content nor padding, so add border
			if ( extra !== "padding" ) {
				val += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		}
	}

	return val;
}

function getWidthOrHeight( elem, name, extra ) {

	// Start with offset property, which is equivalent to the border-box value
	var valueIsBorderBox = true,
		val = name === "width" ? elem.offsetWidth : elem.offsetHeight,
		styles = getStyles( elem ),
		isBorderBox = jQuery.css( elem, "boxSizing", false, styles ) === "border-box";

	// Some non-html elements return undefined for offsetWidth, so check for null/undefined
	// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285
	// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668
	if ( val <= 0 || val == null ) {
		// Fall back to computed then uncomputed css if necessary
		val = curCSS( elem, name, styles );
		if ( val < 0 || val == null ) {
			val = elem.style[ name ];
		}

		// Computed unit is not pixels. Stop here and return.
		if ( rnumnonpx.test(val) ) {
			return val;
		}

		// Check for style in case a browser which returns unreliable values
		// for getComputedStyle silently falls back to the reliable elem.style
		valueIsBorderBox = isBorderBox &&
			( support.boxSizingReliable() || val === elem.style[ name ] );

		// Normalize "", auto, and prepare for extra
		val = parseFloat( val ) || 0;
	}

	// Use the active box-sizing model to add/subtract irrelevant styles
	return ( val +
		augmentWidthOrHeight(
			elem,
			name,
			extra || ( isBorderBox ? "border" : "content" ),
			valueIsBorderBox,
			styles
		)
	) + "px";
}

function showHide( elements, show ) {
	var display, elem, hidden,
		values = [],
		index = 0,
		length = elements.length;

	for ( ; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}

		values[ index ] = data_priv.get( elem, "olddisplay" );
		display = elem.style.display;
		if ( show ) {
			// Reset the inline display of this element to learn if it is
			// being hidden by cascaded rules or not
			if ( !values[ index ] && display === "none" ) {
				elem.style.display = "";
			}

			// Set elements which have been overridden with display: none
			// in a stylesheet to whatever the default browser style is
			// for such an element
			if ( elem.style.display === "" && isHidden( elem ) ) {
				values[ index ] = data_priv.access( elem, "olddisplay", defaultDisplay(elem.nodeName) );
			}
		} else {
			hidden = isHidden( elem );

			if ( display !== "none" || !hidden ) {
				data_priv.set( elem, "olddisplay", hidden ? display : jQuery.css( elem, "display" ) );
			}
		}
	}

	// Set the display of most of the elements in a second loop
	// to avoid the constant reflow
	for ( index = 0; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}
		if ( !show || elem.style.display === "none" || elem.style.display === "" ) {
			elem.style.display = show ? values[ index ] || "" : "none";
		}
	}

	return elements;
}

jQuery.extend({

	// Add in style property hooks for overriding the default
	// behavior of getting and setting a style property
	cssHooks: {
		opacity: {
			get: function( elem, computed ) {
				if ( computed ) {

					// We should always get a number back from opacity
					var ret = curCSS( elem, "opacity" );
					return ret === "" ? "1" : ret;
				}
			}
		}
	},

	// Don't automatically add "px" to these possibly-unitless properties
	cssNumber: {
		"columnCount": true,
		"fillOpacity": true,
		"flexGrow": true,
		"flexShrink": true,
		"fontWeight": true,
		"lineHeight": true,
		"opacity": true,
		"order": true,
		"orphans": true,
		"widows": true,
		"zIndex": true,
		"zoom": true
	},

	// Add in properties whose names you wish to fix before
	// setting or getting the value
	cssProps: {
		"float": "cssFloat"
	},

	// Get and set the style property on a DOM Node
	style: function( elem, name, value, extra ) {

		// Don't set styles on text and comment nodes
		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
			return;
		}

		// Make sure that we're working with the right name
		var ret, type, hooks,
			origName = jQuery.camelCase( name ),
			style = elem.style;

		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );

		// Gets hook for the prefixed version, then unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// Check if we're setting a value
		if ( value !== undefined ) {
			type = typeof value;

			// Convert "+=" or "-=" to relative numbers (#7345)
			if ( type === "string" && (ret = rrelNum.exec( value )) ) {
				value = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );
				// Fixes bug #9237
				type = "number";
			}

			// Make sure that null and NaN values aren't set (#7116)
			if ( value == null || value !== value ) {
				return;
			}

			// If a number, add 'px' to the (except for certain CSS properties)
			if ( type === "number" && !jQuery.cssNumber[ origName ] ) {
				value += "px";
			}

			// Support: IE9-11+
			// background-* props affect original clone's values
			if ( !support.clearCloneStyle && value === "" && name.indexOf( "background" ) === 0 ) {
				style[ name ] = "inherit";
			}

			// If a hook was provided, use that value, otherwise just set the specified value
			if ( !hooks || !("set" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {
				style[ name ] = value;
			}

		} else {
			// If a hook was provided get the non-computed value from there
			if ( hooks && "get" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {
				return ret;
			}

			// Otherwise just get the value from the style object
			return style[ name ];
		}
	},

	css: function( elem, name, extra, styles ) {
		var val, num, hooks,
			origName = jQuery.camelCase( name );

		// Make sure that we're working with the right name
		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );

		// Try prefixed name followed by the unprefixed name
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// If a hook was provided get the computed value from there
		if ( hooks && "get" in hooks ) {
			val = hooks.get( elem, true, extra );
		}

		// Otherwise, if a way to get the computed value exists, use that
		if ( val === undefined ) {
			val = curCSS( elem, name, styles );
		}

		// Convert "normal" to computed value
		if ( val === "normal" && name in cssNormalTransform ) {
			val = cssNormalTransform[ name ];
		}

		// Make numeric if forced or a qualifier was provided and val looks numeric
		if ( extra === "" || extra ) {
			num = parseFloat( val );
			return extra === true || jQuery.isNumeric( num ) ? num || 0 : val;
		}
		return val;
	}
});

jQuery.each([ "height", "width" ], function( i, name ) {
	jQuery.cssHooks[ name ] = {
		get: function( elem, computed, extra ) {
			if ( computed ) {

				// Certain elements can have dimension info if we invisibly show them
				// but it must have a current display style that would benefit
				return rdisplayswap.test( jQuery.css( elem, "display" ) ) && elem.offsetWidth === 0 ?
					jQuery.swap( elem, cssShow, function() {
						return getWidthOrHeight( elem, name, extra );
					}) :
					getWidthOrHeight( elem, name, extra );
			}
		},

		set: function( elem, value, extra ) {
			var styles = extra && getStyles( elem );
			return setPositiveNumber( elem, value, extra ?
				augmentWidthOrHeight(
					elem,
					name,
					extra,
					jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
					styles
				) : 0
			);
		}
	};
});

// Support: Android 2.3
jQuery.cssHooks.marginRight = addGetHookIf( support.reliableMarginRight,
	function( elem, computed ) {
		if ( computed ) {
			return jQuery.swap( elem, { "display": "inline-block" },
				curCSS, [ elem, "marginRight" ] );
		}
	}
);

// These hooks are used by animate to expand properties
jQuery.each({
	margin: "",
	padding: "",
	border: "Width"
}, function( prefix, suffix ) {
	jQuery.cssHooks[ prefix + suffix ] = {
		expand: function( value ) {
			var i = 0,
				expanded = {},

				// Assumes a single number if not a string
				parts = typeof value === "string" ? value.split(" ") : [ value ];

			for ( ; i < 4; i++ ) {
				expanded[ prefix + cssExpand[ i ] + suffix ] =
					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
			}

			return expanded;
		}
	};

	if ( !rmargin.test( prefix ) ) {
		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
	}
});

jQuery.fn.extend({
	css: function( name, value ) {
		return access( this, function( elem, name, value ) {
			var styles, len,
				map = {},
				i = 0;

			if ( jQuery.isArray( name ) ) {
				styles = getStyles( elem );
				len = name.length;

				for ( ; i < len; i++ ) {
					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
				}

				return map;
			}

			return value !== undefined ?
				jQuery.style( elem, name, value ) :
				jQuery.css( elem, name );
		}, name, value, arguments.length > 1 );
	},
	show: function() {
		return showHide( this, true );
	},
	hide: function() {
		return showHide( this );
	},
	toggle: function( state ) {
		if ( typeof state === "boolean" ) {
			return state ? this.show() : this.hide();
		}

		return this.each(function() {
			if ( isHidden( this ) ) {
				jQuery( this ).show();
			} else {
				jQuery( this ).hide();
			}
		});
	}
});


function Tween( elem, options, prop, end, easing ) {
	return new Tween.prototype.init( elem, options, prop, end, easing );
}
jQuery.Tween = Tween;

Tween.prototype = {
	constructor: Tween,
	init: function( elem, options, prop, end, easing, unit ) {
		this.elem = elem;
		this.prop = prop;
		this.easing = easing || "swing";
		this.options = options;
		this.start = this.now = this.cur();
		this.end = end;
		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
	},
	cur: function() {
		var hooks = Tween.propHooks[ this.prop ];

		return hooks && hooks.get ?
			hooks.get( this ) :
			Tween.propHooks._default.get( this );
	},
	run: function( percent ) {
		var eased,
			hooks = Tween.propHooks[ this.prop ];

		if ( this.options.duration ) {
			this.pos = eased = jQuery.easing[ this.easing ](
				percent, this.options.duration * percent, 0, 1, this.options.duration
			);
		} else {
			this.pos = eased = percent;
		}
		this.now = ( this.end - this.start ) * eased + this.start;

		if ( this.options.step ) {
			this.options.step.call( this.elem, this.now, this );
		}

		if ( hooks && hooks.set ) {
			hooks.set( this );
		} else {
			Tween.propHooks._default.set( this );
		}
		return this;
	}
};

Tween.prototype.init.prototype = Tween.prototype;

Tween.propHooks = {
	_default: {
		get: function( tween ) {
			var result;

			if ( tween.elem[ tween.prop ] != null &&
				(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {
				return tween.elem[ tween.prop ];
			}

			// Passing an empty string as a 3rd parameter to .css will automatically
			// attempt a parseFloat and fallback to a string if the parse fails.
			// Simple values such as "10px" are parsed to Float;
			// complex values such as "rotate(1rad)" are returned as-is.
			result = jQuery.css( tween.elem, tween.prop, "" );
			// Empty strings, null, undefined and "auto" are converted to 0.
			return !result || result === "auto" ? 0 : result;
		},
		set: function( tween ) {
			// Use step hook for back compat.
			// Use cssHook if its there.
			// Use .style if available and use plain properties where available.
			if ( jQuery.fx.step[ tween.prop ] ) {
				jQuery.fx.step[ tween.prop ]( tween );
			} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {
				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
			} else {
				tween.elem[ tween.prop ] = tween.now;
			}
		}
	}
};

// Support: IE9
// Panic based approach to setting things on disconnected nodes
Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
	set: function( tween ) {
		if ( tween.elem.nodeType && tween.elem.parentNode ) {
			tween.elem[ tween.prop ] = tween.now;
		}
	}
};

jQuery.easing = {
	linear: function( p ) {
		return p;
	},
	swing: function( p ) {
		return 0.5 - Math.cos( p * Math.PI ) / 2;
	}
};

jQuery.fx = Tween.prototype.init;

// Back Compat <1.8 extension point
jQuery.fx.step = {};




var
	fxNow, timerId,
	rfxtypes = /^(?:toggle|show|hide)$/,
	rfxnum = new RegExp( "^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i" ),
	rrun = /queueHooks$/,
	animationPrefilters = [ defaultPrefilter ],
	tweeners = {
		"*": [ function( prop, value ) {
			var tween = this.createTween( prop, value ),
				target = tween.cur(),
				parts = rfxnum.exec( value ),
				unit = parts && parts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),

				// Starting value computation is required for potential unit mismatches
				start = ( jQuery.cssNumber[ prop ] || unit !== "px" && +target ) &&
					rfxnum.exec( jQuery.css( tween.elem, prop ) ),
				scale = 1,
				maxIterations = 20;

			if ( start && start[ 3 ] !== unit ) {
				// Trust units reported by jQuery.css
				unit = unit || start[ 3 ];

				// Make sure we update the tween properties later on
				parts = parts || [];

				// Iteratively approximate from a nonzero starting point
				start = +target || 1;

				do {
					// If previous iteration zeroed out, double until we get *something*.
					// Use string for doubling so we don't accidentally see scale as unchanged below
					scale = scale || ".5";

					// Adjust and apply
					start = start / scale;
					jQuery.style( tween.elem, prop, start + unit );

				// Update scale, tolerating zero or NaN from tween.cur(),
				// break the loop if scale is unchanged or perfect, or if we've just had enough
				} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );
			}

			// Update tween properties
			if ( parts ) {
				start = tween.start = +start || +target || 0;
				tween.unit = unit;
				// If a +=/-= token was provided, we're doing a relative animation
				tween.end = parts[ 1 ] ?
					start + ( parts[ 1 ] + 1 ) * parts[ 2 ] :
					+parts[ 2 ];
			}

			return tween;
		} ]
	};

// Animations created synchronously will run synchronously
function createFxNow() {
	setTimeout(function() {
		fxNow = undefined;
	});
	return ( fxNow = jQuery.now() );
}

// Generate parameters to create a standard animation
function genFx( type, includeWidth ) {
	var which,
		i = 0,
		attrs = { height: type };

	// If we include width, step value is 1 to do all cssExpand values,
	// otherwise step value is 2 to skip over Left and Right
	includeWidth = includeWidth ? 1 : 0;
	for ( ; i < 4 ; i += 2 - includeWidth ) {
		which = cssExpand[ i ];
		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
	}

	if ( includeWidth ) {
		attrs.opacity = attrs.width = type;
	}

	return attrs;
}

function createTween( value, prop, animation ) {
	var tween,
		collection = ( tweeners[ prop ] || [] ).concat( tweeners[ "*" ] ),
		index = 0,
		length = collection.length;
	for ( ; index < length; index++ ) {
		if ( (tween = collection[ index ].call( animation, prop, value )) ) {

			// We're done with this property
			return tween;
		}
	}
}

function defaultPrefilter( elem, props, opts ) {
	/* jshint validthis: true */
	var prop, value, toggle, tween, hooks, oldfire, display, checkDisplay,
		anim = this,
		orig = {},
		style = elem.style,
		hidden = elem.nodeType && isHidden( elem ),
		dataShow = data_priv.get( elem, "fxshow" );

	// Handle queue: false promises
	if ( !opts.queue ) {
		hooks = jQuery._queueHooks( elem, "fx" );
		if ( hooks.unqueued == null ) {
			hooks.unqueued = 0;
			oldfire = hooks.empty.fire;
			hooks.empty.fire = function() {
				if ( !hooks.unqueued ) {
					oldfire();
				}
			};
		}
		hooks.unqueued++;

		anim.always(function() {
			// Ensure the complete handler is called before this completes
			anim.always(function() {
				hooks.unqueued--;
				if ( !jQuery.queue( elem, "fx" ).length ) {
					hooks.empty.fire();
				}
			});
		});
	}

	// Height/width overflow pass
	if ( elem.nodeType === 1 && ( "height" in props || "width" in props ) ) {
		// Make sure that nothing sneaks out
		// Record all 3 overflow attributes because IE9-10 do not
		// change the overflow attribute when overflowX and
		// overflowY are set to the same value
		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];

		// Set display property to inline-block for height/width
		// animations on inline elements that are having width/height animated
		display = jQuery.css( elem, "display" );

		// Test default display if display is currently "none"
		checkDisplay = display === "none" ?
			data_priv.get( elem, "olddisplay" ) || defaultDisplay( elem.nodeName ) : display;

		if ( checkDisplay === "inline" && jQuery.css( elem, "float" ) === "none" ) {
			style.display = "inline-block";
		}
	}

	if ( opts.overflow ) {
		style.overflow = "hidden";
		anim.always(function() {
			style.overflow = opts.overflow[ 0 ];
			style.overflowX = opts.overflow[ 1 ];
			style.overflowY = opts.overflow[ 2 ];
		});
	}

	// show/hide pass
	for ( prop in props ) {
		value = props[ prop ];
		if ( rfxtypes.exec( value ) ) {
			delete props[ prop ];
			toggle = toggle || value === "toggle";
			if ( value === ( hidden ? "hide" : "show" ) ) {

				// If there is dataShow left over from a stopped hide or show and we are going to proceed with show, we should pretend to be hidden
				if ( value === "show" && dataShow && dataShow[ prop ] !== undefined ) {
					hidden = true;
				} else {
					continue;
				}
			}
			orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );

		// Any non-fx value stops us from restoring the original display value
		} else {
			display = undefined;
		}
	}

	if ( !jQuery.isEmptyObject( orig ) ) {
		if ( dataShow ) {
			if ( "hidden" in dataShow ) {
				hidden = dataShow.hidden;
			}
		} else {
			dataShow = data_priv.access( elem, "fxshow", {} );
		}

		// Store state if its toggle - enables .stop().toggle() to "reverse"
		if ( toggle ) {
			dataShow.hidden = !hidden;
		}
		if ( hidden ) {
			jQuery( elem ).show();
		} else {
			anim.done(function() {
				jQuery( elem ).hide();
			});
		}
		anim.done(function() {
			var prop;

			data_priv.remove( elem, "fxshow" );
			for ( prop in orig ) {
				jQuery.style( elem, prop, orig[ prop ] );
			}
		});
		for ( prop in orig ) {
			tween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );

			if ( !( prop in dataShow ) ) {
				dataShow[ prop ] = tween.start;
				if ( hidden ) {
					tween.end = tween.start;
					tween.start = prop === "width" || prop === "height" ? 1 : 0;
				}
			}
		}

	// If this is a noop like .hide().hide(), restore an overwritten display value
	} else if ( (display === "none" ? defaultDisplay( elem.nodeName ) : display) === "inline" ) {
		style.display = display;
	}
}

function propFilter( props, specialEasing ) {
	var index, name, easing, value, hooks;

	// camelCase, specialEasing and expand cssHook pass
	for ( index in props ) {
		name = jQuery.camelCase( index );
		easing = specialEasing[ name ];
		value = props[ index ];
		if ( jQuery.isArray( value ) ) {
			easing = value[ 1 ];
			value = props[ index ] = value[ 0 ];
		}

		if ( index !== name ) {
			props[ name ] = value;
			delete props[ index ];
		}

		hooks = jQuery.cssHooks[ name ];
		if ( hooks && "expand" in hooks ) {
			value = hooks.expand( value );
			delete props[ name ];

			// Not quite $.extend, this won't overwrite existing keys.
			// Reusing 'index' because we have the correct "name"
			for ( index in value ) {
				if ( !( index in props ) ) {
					props[ index ] = value[ index ];
					specialEasing[ index ] = easing;
				}
			}
		} else {
			specialEasing[ name ] = easing;
		}
	}
}

function Animation( elem, properties, options ) {
	var result,
		stopped,
		index = 0,
		length = animationPrefilters.length,
		deferred = jQuery.Deferred().always( function() {
			// Don't match elem in the :animated selector
			delete tick.elem;
		}),
		tick = function() {
			if ( stopped ) {
				return false;
			}
			var currentTime = fxNow || createFxNow(),
				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),
				// Support: Android 2.3
				// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)
				temp = remaining / animation.duration || 0,
				percent = 1 - temp,
				index = 0,
				length = animation.tweens.length;

			for ( ; index < length ; index++ ) {
				animation.tweens[ index ].run( percent );
			}

			deferred.notifyWith( elem, [ animation, percent, remaining ]);

			if ( percent < 1 && length ) {
				return remaining;
			} else {
				deferred.resolveWith( elem, [ animation ] );
				return false;
			}
		},
		animation = deferred.promise({
			elem: elem,
			props: jQuery.extend( {}, properties ),
			opts: jQuery.extend( true, { specialEasing: {} }, options ),
			originalProperties: properties,
			originalOptions: options,
			startTime: fxNow || createFxNow(),
			duration: options.duration,
			tweens: [],
			createTween: function( prop, end ) {
				var tween = jQuery.Tween( elem, animation.opts, prop, end,
						animation.opts.specialEasing[ prop ] || animation.opts.easing );
				animation.tweens.push( tween );
				return tween;
			},
			stop: function( gotoEnd ) {
				var index = 0,
					// If we are going to the end, we want to run all the tweens
					// otherwise we skip this part
					length = gotoEnd ? animation.tweens.length : 0;
				if ( stopped ) {
					return this;
				}
				stopped = true;
				for ( ; index < length ; index++ ) {
					animation.tweens[ index ].run( 1 );
				}

				// Resolve when we played the last frame; otherwise, reject
				if ( gotoEnd ) {
					deferred.resolveWith( elem, [ animation, gotoEnd ] );
				} else {
					deferred.rejectWith( elem, [ animation, gotoEnd ] );
				}
				return this;
			}
		}),
		props = animation.props;

	propFilter( props, animation.opts.specialEasing );

	for ( ; index < length ; index++ ) {
		result = animationPrefilters[ index ].call( animation, elem, props, animation.opts );
		if ( result ) {
			return result;
		}
	}

	jQuery.map( props, createTween, animation );

	if ( jQuery.isFunction( animation.opts.start ) ) {
		animation.opts.start.call( elem, animation );
	}

	jQuery.fx.timer(
		jQuery.extend( tick, {
			elem: elem,
			anim: animation,
			queue: animation.opts.queue
		})
	);

	// attach callbacks from options
	return animation.progress( animation.opts.progress )
		.done( animation.opts.done, animation.opts.complete )
		.fail( animation.opts.fail )
		.always( animation.opts.always );
}

jQuery.Animation = jQuery.extend( Animation, {

	tweener: function( props, callback ) {
		if ( jQuery.isFunction( props ) ) {
			callback = props;
			props = [ "*" ];
		} else {
			props = props.split(" ");
		}

		var prop,
			index = 0,
			length = props.length;

		for ( ; index < length ; index++ ) {
			prop = props[ index ];
			tweeners[ prop ] = tweeners[ prop ] || [];
			tweeners[ prop ].unshift( callback );
		}
	},

	prefilter: function( callback, prepend ) {
		if ( prepend ) {
			animationPrefilters.unshift( callback );
		} else {
			animationPrefilters.push( callback );
		}
	}
});

jQuery.speed = function( speed, easing, fn ) {
	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
		complete: fn || !fn && easing ||
			jQuery.isFunction( speed ) && speed,
		duration: speed,
		easing: fn && easing || easing && !jQuery.isFunction( easing ) && easing
	};

	opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration :
		opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;

	// Normalize opt.queue - true/undefined/null -> "fx"
	if ( opt.queue == null || opt.queue === true ) {
		opt.queue = "fx";
	}

	// Queueing
	opt.old = opt.complete;

	opt.complete = function() {
		if ( jQuery.isFunction( opt.old ) ) {
			opt.old.call( this );
		}

		if ( opt.queue ) {
			jQuery.dequeue( this, opt.queue );
		}
	};

	return opt;
};

jQuery.fn.extend({
	fadeTo: function( speed, to, easing, callback ) {

		// Show any hidden elements after setting opacity to 0
		return this.filter( isHidden ).css( "opacity", 0 ).show()

			// Animate to the value specified
			.end().animate({ opacity: to }, speed, easing, callback );
	},
	animate: function( prop, speed, easing, callback ) {
		var empty = jQuery.isEmptyObject( prop ),
			optall = jQuery.speed( speed, easing, callback ),
			doAnimation = function() {
				// Operate on a copy of prop so per-property easing won't be lost
				var anim = Animation( this, jQuery.extend( {}, prop ), optall );

				// Empty animations, or finishing resolves immediately
				if ( empty || data_priv.get( this, "finish" ) ) {
					anim.stop( true );
				}
			};
			doAnimation.finish = doAnimation;

		return empty || optall.queue === false ?
			this.each( doAnimation ) :
			this.queue( optall.queue, doAnimation );
	},
	stop: function( type, clearQueue, gotoEnd ) {
		var stopQueue = function( hooks ) {
			var stop = hooks.stop;
			delete hooks.stop;
			stop( gotoEnd );
		};

		if ( typeof type !== "string" ) {
			gotoEnd = clearQueue;
			clearQueue = type;
			type = undefined;
		}
		if ( clearQueue && type !== false ) {
			this.queue( type || "fx", [] );
		}

		return this.each(function() {
			var dequeue = true,
				index = type != null && type + "queueHooks",
				timers = jQuery.timers,
				data = data_priv.get( this );

			if ( index ) {
				if ( data[ index ] && data[ index ].stop ) {
					stopQueue( data[ index ] );
				}
			} else {
				for ( index in data ) {
					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
						stopQueue( data[ index ] );
					}
				}
			}

			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {
					timers[ index ].anim.stop( gotoEnd );
					dequeue = false;
					timers.splice( index, 1 );
				}
			}

			// Start the next in the queue if the last step wasn't forced.
			// Timers currently will call their complete callbacks, which
			// will dequeue but only if they were gotoEnd.
			if ( dequeue || !gotoEnd ) {
				jQuery.dequeue( this, type );
			}
		});
	},
	finish: function( type ) {
		if ( type !== false ) {
			type = type || "fx";
		}
		return this.each(function() {
			var index,
				data = data_priv.get( this ),
				queue = data[ type + "queue" ],
				hooks = data[ type + "queueHooks" ],
				timers = jQuery.timers,
				length = queue ? queue.length : 0;

			// Enable finishing flag on private data
			data.finish = true;

			// Empty the queue first
			jQuery.queue( this, type, [] );

			if ( hooks && hooks.stop ) {
				hooks.stop.call( this, true );
			}

			// Look for any active animations, and finish them
			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
					timers[ index ].anim.stop( true );
					timers.splice( index, 1 );
				}
			}

			// Look for any animations in the old queue and finish them
			for ( index = 0; index < length; index++ ) {
				if ( queue[ index ] && queue[ index ].finish ) {
					queue[ index ].finish.call( this );
				}
			}

			// Turn off finishing flag
			delete data.finish;
		});
	}
});

jQuery.each([ "toggle", "show", "hide" ], function( i, name ) {
	var cssFn = jQuery.fn[ name ];
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return speed == null || typeof speed === "boolean" ?
			cssFn.apply( this, arguments ) :
			this.animate( genFx( name, true ), speed, easing, callback );
	};
});

// Generate shortcuts for custom animations
jQuery.each({
	slideDown: genFx("show"),
	slideUp: genFx("hide"),
	slideToggle: genFx("toggle"),
	fadeIn: { opacity: "show" },
	fadeOut: { opacity: "hide" },
	fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return this.animate( props, speed, easing, callback );
	};
});

jQuery.timers = [];
jQuery.fx.tick = function() {
	var timer,
		i = 0,
		timers = jQuery.timers;

	fxNow = jQuery.now();

	for ( ; i < timers.length; i++ ) {
		timer = timers[ i ];
		// Checks the timer has not already been removed
		if ( !timer() && timers[ i ] === timer ) {
			timers.splice( i--, 1 );
		}
	}

	if ( !timers.length ) {
		jQuery.fx.stop();
	}
	fxNow = undefined;
};

jQuery.fx.timer = function( timer ) {
	jQuery.timers.push( timer );
	if ( timer() ) {
		jQuery.fx.start();
	} else {
		jQuery.timers.pop();
	}
};

jQuery.fx.interval = 13;

jQuery.fx.start = function() {
	if ( !timerId ) {
		timerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );
	}
};

jQuery.fx.stop = function() {
	clearInterval( timerId );
	timerId = null;
};

jQuery.fx.speeds = {
	slow: 600,
	fast: 200,
	// Default speed
	_default: 400
};


// Based off of the plugin by Clint Helfers, with permission.
// http://blindsignals.com/index.php/2009/07/jquery-delay/
jQuery.fn.delay = function( time, type ) {
	time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
	type = type || "fx";

	return this.queue( type, function( next, hooks ) {
		var timeout = setTimeout( next, time );
		hooks.stop = function() {
			clearTimeout( timeout );
		};
	});
};


(function() {
	var input = document.createElement( "input" ),
		select = document.createElement( "select" ),
		opt = select.appendChild( document.createElement( "option" ) );

	input.type = "checkbox";

	// Support: iOS<=5.1, Android<=4.2+
	// Default value for a checkbox should be "on"
	support.checkOn = input.value !== "";

	// Support: IE<=11+
	// Must access selectedIndex to make default options select
	support.optSelected = opt.selected;

	// Support: Android<=2.3
	// Options inside disabled selects are incorrectly marked as disabled
	select.disabled = true;
	support.optDisabled = !opt.disabled;

	// Support: IE<=11+
	// An input loses its value after becoming a radio
	input = document.createElement( "input" );
	input.value = "t";
	input.type = "radio";
	support.radioValue = input.value === "t";
})();


var nodeHook, boolHook,
	attrHandle = jQuery.expr.attrHandle;

jQuery.fn.extend({
	attr: function( name, value ) {
		return access( this, jQuery.attr, name, value, arguments.length > 1 );
	},

	removeAttr: function( name ) {
		return this.each(function() {
			jQuery.removeAttr( this, name );
		});
	}
});

jQuery.extend({
	attr: function( elem, name, value ) {
		var hooks, ret,
			nType = elem.nodeType;

		// don't get/set attributes on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		// Fallback to prop when attributes are not supported
		if ( typeof elem.getAttribute === strundefined ) {
			return jQuery.prop( elem, name, value );
		}

		// All attributes are lowercase
		// Grab necessary hook if one is defined
		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
			name = name.toLowerCase();
			hooks = jQuery.attrHooks[ name ] ||
				( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );
		}

		if ( value !== undefined ) {

			if ( value === null ) {
				jQuery.removeAttr( elem, name );

			} else if ( hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {
				return ret;

			} else {
				elem.setAttribute( name, value + "" );
				return value;
			}

		} else if ( hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ) {
			return ret;

		} else {
			ret = jQuery.find.attr( elem, name );

			// Non-existent attributes return null, we normalize to undefined
			return ret == null ?
				undefined :
				ret;
		}
	},

	removeAttr: function( elem, value ) {
		var name, propName,
			i = 0,
			attrNames = value && value.match( rnotwhite );

		if ( attrNames && elem.nodeType === 1 ) {
			while ( (name = attrNames[i++]) ) {
				propName = jQuery.propFix[ name ] || name;

				// Boolean attributes get special treatment (#10870)
				if ( jQuery.expr.match.bool.test( name ) ) {
					// Set corresponding property to false
					elem[ propName ] = false;
				}

				elem.removeAttribute( name );
			}
		}
	},

	attrHooks: {
		type: {
			set: function( elem, value ) {
				if ( !support.radioValue && value === "radio" &&
					jQuery.nodeName( elem, "input" ) ) {
					var val = elem.value;
					elem.setAttribute( "type", value );
					if ( val ) {
						elem.value = val;
					}
					return value;
				}
			}
		}
	}
});

// Hooks for boolean attributes
boolHook = {
	set: function( elem, value, name ) {
		if ( value === false ) {
			// Remove boolean attributes when set to false
			jQuery.removeAttr( elem, name );
		} else {
			elem.setAttribute( name, name );
		}
		return name;
	}
};
jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( i, name ) {
	var getter = attrHandle[ name ] || jQuery.find.attr;

	attrHandle[ name ] = function( elem, name, isXML ) {
		var ret, handle;
		if ( !isXML ) {
			// Avoid an infinite loop by temporarily removing this function from the getter
			handle = attrHandle[ name ];
			attrHandle[ name ] = ret;
			ret = getter( elem, name, isXML ) != null ?
				name.toLowerCase() :
				null;
			attrHandle[ name ] = handle;
		}
		return ret;
	};
});




var rfocusable = /^(?:input|select|textarea|button)$/i;

jQuery.fn.extend({
	prop: function( name, value ) {
		return access( this, jQuery.prop, name, value, arguments.length > 1 );
	},

	removeProp: function( name ) {
		return this.each(function() {
			delete this[ jQuery.propFix[ name ] || name ];
		});
	}
});

jQuery.extend({
	propFix: {
		"for": "htmlFor",
		"class": "className"
	},

	prop: function( elem, name, value ) {
		var ret, hooks, notxml,
			nType = elem.nodeType;

		// Don't get/set properties on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		notxml = nType !== 1 || !jQuery.isXMLDoc( elem );

		if ( notxml ) {
			// Fix name and attach hooks
			name = jQuery.propFix[ name ] || name;
			hooks = jQuery.propHooks[ name ];
		}

		if ( value !== undefined ) {
			return hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ?
				ret :
				( elem[ name ] = value );

		} else {
			return hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ?
				ret :
				elem[ name ];
		}
	},

	propHooks: {
		tabIndex: {
			get: function( elem ) {
				return elem.hasAttribute( "tabindex" ) || rfocusable.test( elem.nodeName ) || elem.href ?
					elem.tabIndex :
					-1;
			}
		}
	}
});

if ( !support.optSelected ) {
	jQuery.propHooks.selected = {
		get: function( elem ) {
			var parent = elem.parentNode;
			if ( parent && parent.parentNode ) {
				parent.parentNode.selectedIndex;
			}
			return null;
		}
	};
}

jQuery.each([
	"tabIndex",
	"readOnly",
	"maxLength",
	"cellSpacing",
	"cellPadding",
	"rowSpan",
	"colSpan",
	"useMap",
	"frameBorder",
	"contentEditable"
], function() {
	jQuery.propFix[ this.toLowerCase() ] = this;
});




var rclass = /[\t\r\n\f]/g;

jQuery.fn.extend({
	addClass: function( value ) {
		var classes, elem, cur, clazz, j, finalValue,
			proceed = typeof value === "string" && value,
			i = 0,
			len = this.length;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).addClass( value.call( this, j, this.className ) );
			});
		}

		if ( proceed ) {
			// The disjunction here is for better compressibility (see removeClass)
			classes = ( value || "" ).match( rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					" "
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
							cur += clazz + " ";
						}
					}

					// only assign if different to avoid unneeded rendering.
					finalValue = jQuery.trim( cur );
					if ( elem.className !== finalValue ) {
						elem.className = finalValue;
					}
				}
			}
		}

		return this;
	},

	removeClass: function( value ) {
		var classes, elem, cur, clazz, j, finalValue,
			proceed = arguments.length === 0 || typeof value === "string" && value,
			i = 0,
			len = this.length;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).removeClass( value.call( this, j, this.className ) );
			});
		}
		if ( proceed ) {
			classes = ( value || "" ).match( rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				// This expression is here for better compressibility (see addClass)
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					""
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						// Remove *all* instances
						while ( cur.indexOf( " " + clazz + " " ) >= 0 ) {
							cur = cur.replace( " " + clazz + " ", " " );
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = value ? jQuery.trim( cur ) : "";
					if ( elem.className !== finalValue ) {
						elem.className = finalValue;
					}
				}
			}
		}

		return this;
	},

	toggleClass: function( value, stateVal ) {
		var type = typeof value;

		if ( typeof stateVal === "boolean" && type === "string" ) {
			return stateVal ? this.addClass( value ) : this.removeClass( value );
		}

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( i ) {
				jQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );
			});
		}

		return this.each(function() {
			if ( type === "string" ) {
				// Toggle individual class names
				var className,
					i = 0,
					self = jQuery( this ),
					classNames = value.match( rnotwhite ) || [];

				while ( (className = classNames[ i++ ]) ) {
					// Check each className given, space separated list
					if ( self.hasClass( className ) ) {
						self.removeClass( className );
					} else {
						self.addClass( className );
					}
				}

			// Toggle whole class name
			} else if ( type === strundefined || type === "boolean" ) {
				if ( this.className ) {
					// store className if set
					data_priv.set( this, "__className__", this.className );
				}

				// If the element has a class name or if we're passed `false`,
				// then remove the whole classname (if there was one, the above saved it).
				// Otherwise bring back whatever was previously saved (if anything),
				// falling back to the empty string if nothing was stored.
				this.className = this.className || value === false ? "" : data_priv.get( this, "__className__" ) || "";
			}
		});
	},

	hasClass: function( selector ) {
		var className = " " + selector + " ",
			i = 0,
			l = this.length;
		for ( ; i < l; i++ ) {
			if ( this[i].nodeType === 1 && (" " + this[i].className + " ").replace(rclass, " ").indexOf( className ) >= 0 ) {
				return true;
			}
		}

		return false;
	}
});




var rreturn = /\r/g;

jQuery.fn.extend({
	val: function( value ) {
		var hooks, ret, isFunction,
			elem = this[0];

		if ( !arguments.length ) {
			if ( elem ) {
				hooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];

				if ( hooks && "get" in hooks && (ret = hooks.get( elem, "value" )) !== undefined ) {
					return ret;
				}

				ret = elem.value;

				return typeof ret === "string" ?
					// Handle most common string cases
					ret.replace(rreturn, "") :
					// Handle cases where value is null/undef or number
					ret == null ? "" : ret;
			}

			return;
		}

		isFunction = jQuery.isFunction( value );

		return this.each(function( i ) {
			var val;

			if ( this.nodeType !== 1 ) {
				return;
			}

			if ( isFunction ) {
				val = value.call( this, i, jQuery( this ).val() );
			} else {
				val = value;
			}

			// Treat null/undefined as ""; convert numbers to string
			if ( val == null ) {
				val = "";

			} else if ( typeof val === "number" ) {
				val += "";

			} else if ( jQuery.isArray( val ) ) {
				val = jQuery.map( val, function( value ) {
					return value == null ? "" : value + "";
				});
			}

			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

			// If set returns undefined, fall back to normal setting
			if ( !hooks || !("set" in hooks) || hooks.set( this, val, "value" ) === undefined ) {
				this.value = val;
			}
		});
	}
});

jQuery.extend({
	valHooks: {
		option: {
			get: function( elem ) {
				var val = jQuery.find.attr( elem, "value" );
				return val != null ?
					val :
					// Support: IE10-11+
					// option.text throws exceptions (#14686, #14858)
					jQuery.trim( jQuery.text( elem ) );
			}
		},
		select: {
			get: function( elem ) {
				var value, option,
					options = elem.options,
					index = elem.selectedIndex,
					one = elem.type === "select-one" || index < 0,
					values = one ? null : [],
					max = one ? index + 1 : options.length,
					i = index < 0 ?
						max :
						one ? index : 0;

				// Loop through all the selected options
				for ( ; i < max; i++ ) {
					option = options[ i ];

					// IE6-9 doesn't update selected after form reset (#2551)
					if ( ( option.selected || i === index ) &&
							// Don't return options that are disabled or in a disabled optgroup
							( support.optDisabled ? !option.disabled : option.getAttribute( "disabled" ) === null ) &&
							( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, "optgroup" ) ) ) {

						// Get the specific value for the option
						value = jQuery( option ).val();

						// We don't need an array for one selects
						if ( one ) {
							return value;
						}

						// Multi-Selects return an array
						values.push( value );
					}
				}

				return values;
			},

			set: function( elem, value ) {
				var optionSet, option,
					options = elem.options,
					values = jQuery.makeArray( value ),
					i = options.length;

				while ( i-- ) {
					option = options[ i ];
					if ( (option.selected = jQuery.inArray( option.value, values ) >= 0) ) {
						optionSet = true;
					}
				}

				// Force browsers to behave consistently when non-matching value is set
				if ( !optionSet ) {
					elem.selectedIndex = -1;
				}
				return values;
			}
		}
	}
});

// Radios and checkboxes getter/setter
jQuery.each([ "radio", "checkbox" ], function() {
	jQuery.valHooks[ this ] = {
		set: function( elem, value ) {
			if ( jQuery.isArray( value ) ) {
				return ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );
			}
		}
	};
	if ( !support.checkOn ) {
		jQuery.valHooks[ this ].get = function( elem ) {
			return elem.getAttribute("value") === null ? "on" : elem.value;
		};
	}
});




// Return jQuery for attributes-only inclusion


jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	"change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {

	// Handle event binding
	jQuery.fn[ name ] = function( data, fn ) {
		return arguments.length > 0 ?
			this.on( name, null, data, fn ) :
			this.trigger( name );
	};
});

jQuery.fn.extend({
	hover: function( fnOver, fnOut ) {
		return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
	},

	bind: function( types, data, fn ) {
		return this.on( types, null, data, fn );
	},
	unbind: function( types, fn ) {
		return this.off( types, null, fn );
	},

	delegate: function( selector, types, data, fn ) {
		return this.on( types, selector, data, fn );
	},
	undelegate: function( selector, types, fn ) {
		// ( namespace ) or ( selector, types [, fn] )
		return arguments.length === 1 ? this.off( selector, "**" ) : this.off( types, selector || "**", fn );
	}
});


var nonce = jQuery.now();

var rquery = (/\?/);



// Support: Android 2.3
// Workaround failure to string-cast null input
jQuery.parseJSON = function( data ) {
	return JSON.parse( data + "" );
};


// Cross-browser xml parsing
jQuery.parseXML = function( data ) {
	var xml, tmp;
	if ( !data || typeof data !== "string" ) {
		return null;
	}

	// Support: IE9
	try {
		tmp = new DOMParser();
		xml = tmp.parseFromString( data, "text/xml" );
	} catch ( e ) {
		xml = undefined;
	}

	if ( !xml || xml.getElementsByTagName( "parsererror" ).length ) {
		jQuery.error( "Invalid XML: " + data );
	}
	return xml;
};


var
	rhash = /#.*$/,
	rts = /([?&])_=[^&]*/,
	rheaders = /^(.*?):[ \t]*([^\r\n]*)$/mg,
	// #7653, #8125, #8152: local protocol detection
	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	rnoContent = /^(?:GET|HEAD)$/,
	rprotocol = /^\/\//,
	rurl = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,

	/* Prefilters
	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	 * 2) These are called:
	 *    - BEFORE asking for a transport
	 *    - AFTER param serialization (s.data is a string if s.processData is true)
	 * 3) key is the dataType
	 * 4) the catchall symbol "*" can be used
	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	 */
	prefilters = {},

	/* Transports bindings
	 * 1) key is the dataType
	 * 2) the catchall symbol "*" can be used
	 * 3) selection will start with transport dataType and THEN go to "*" if needed
	 */
	transports = {},

	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
	allTypes = "*/".concat( "*" ),

	// Document location
	ajaxLocation = window.location.href,

	// Segment location into parts
	ajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
function addToPrefiltersOrTransports( structure ) {

	// dataTypeExpression is optional and defaults to "*"
	return function( dataTypeExpression, func ) {

		if ( typeof dataTypeExpression !== "string" ) {
			func = dataTypeExpression;
			dataTypeExpression = "*";
		}

		var dataType,
			i = 0,
			dataTypes = dataTypeExpression.toLowerCase().match( rnotwhite ) || [];

		if ( jQuery.isFunction( func ) ) {
			// For each dataType in the dataTypeExpression
			while ( (dataType = dataTypes[i++]) ) {
				// Prepend if requested
				if ( dataType[0] === "+" ) {
					dataType = dataType.slice( 1 ) || "*";
					(structure[ dataType ] = structure[ dataType ] || []).unshift( func );

				// Otherwise append
				} else {
					(structure[ dataType ] = structure[ dataType ] || []).push( func );
				}
			}
		}
	};
}

// Base inspection function for prefilters and transports
function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {

	var inspected = {},
		seekingTransport = ( structure === transports );

	function inspect( dataType ) {
		var selected;
		inspected[ dataType ] = true;
		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
			if ( typeof dataTypeOrTransport === "string" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {
				options.dataTypes.unshift( dataTypeOrTransport );
				inspect( dataTypeOrTransport );
				return false;
			} else if ( seekingTransport ) {
				return !( selected = dataTypeOrTransport );
			}
		});
		return selected;
	}

	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
function ajaxExtend( target, src ) {
	var key, deep,
		flatOptions = jQuery.ajaxSettings.flatOptions || {};

	for ( key in src ) {
		if ( src[ key ] !== undefined ) {
			( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];
		}
	}
	if ( deep ) {
		jQuery.extend( true, target, deep );
	}

	return target;
}

/* Handles responses to an ajax request:
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
function ajaxHandleResponses( s, jqXHR, responses ) {

	var ct, type, finalDataType, firstDataType,
		contents = s.contents,
		dataTypes = s.dataTypes;

	// Remove auto dataType and get content-type in the process
	while ( dataTypes[ 0 ] === "*" ) {
		dataTypes.shift();
		if ( ct === undefined ) {
			ct = s.mimeType || jqXHR.getResponseHeader("Content-Type");
		}
	}

	// Check if we're dealing with a known content-type
	if ( ct ) {
		for ( type in contents ) {
			if ( contents[ type ] && contents[ type ].test( ct ) ) {
				dataTypes.unshift( type );
				break;
			}
		}
	}

	// Check to see if we have a response for the expected dataType
	if ( dataTypes[ 0 ] in responses ) {
		finalDataType = dataTypes[ 0 ];
	} else {
		// Try convertible dataTypes
		for ( type in responses ) {
			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[0] ] ) {
				finalDataType = type;
				break;
			}
			if ( !firstDataType ) {
				firstDataType = type;
			}
		}
		// Or just use first one
		finalDataType = finalDataType || firstDataType;
	}

	// If we found a dataType
	// We add the dataType to the list if needed
	// and return the corresponding response
	if ( finalDataType ) {
		if ( finalDataType !== dataTypes[ 0 ] ) {
			dataTypes.unshift( finalDataType );
		}
		return responses[ finalDataType ];
	}
}

/* Chain conversions given the request and the original response
 * Also sets the responseXXX fields on the jqXHR instance
 */
function ajaxConvert( s, response, jqXHR, isSuccess ) {
	var conv2, current, conv, tmp, prev,
		converters = {},
		// Work with a copy of dataTypes in case we need to modify it for conversion
		dataTypes = s.dataTypes.slice();

	// Create converters map with lowercased keys
	if ( dataTypes[ 1 ] ) {
		for ( conv in s.converters ) {
			converters[ conv.toLowerCase() ] = s.converters[ conv ];
		}
	}

	current = dataTypes.shift();

	// Convert to each sequential dataType
	while ( current ) {

		if ( s.responseFields[ current ] ) {
			jqXHR[ s.responseFields[ current ] ] = response;
		}

		// Apply the dataFilter if provided
		if ( !prev && isSuccess && s.dataFilter ) {
			response = s.dataFilter( response, s.dataType );
		}

		prev = current;
		current = dataTypes.shift();

		if ( current ) {

		// There's only work to do if current dataType is non-auto
			if ( current === "*" ) {

				current = prev;

			// Convert response if prev dataType is non-auto and differs from current
			} else if ( prev !== "*" && prev !== current ) {

				// Seek a direct converter
				conv = converters[ prev + " " + current ] || converters[ "* " + current ];

				// If none found, seek a pair
				if ( !conv ) {
					for ( conv2 in converters ) {

						// If conv2 outputs current
						tmp = conv2.split( " " );
						if ( tmp[ 1 ] === current ) {

							// If prev can be converted to accepted input
							conv = converters[ prev + " " + tmp[ 0 ] ] ||
								converters[ "* " + tmp[ 0 ] ];
							if ( conv ) {
								// Condense equivalence converters
								if ( conv === true ) {
									conv = converters[ conv2 ];

								// Otherwise, insert the intermediate dataType
								} else if ( converters[ conv2 ] !== true ) {
									current = tmp[ 0 ];
									dataTypes.unshift( tmp[ 1 ] );
								}
								break;
							}
						}
					}
				}

				// Apply converter (if not an equivalence)
				if ( conv !== true ) {

					// Unless errors are allowed to bubble, catch and return them
					if ( conv && s[ "throws" ] ) {
						response = conv( response );
					} else {
						try {
							response = conv( response );
						} catch ( e ) {
							return { state: "parsererror", error: conv ? e : "No conversion from " + prev + " to " + current };
						}
					}
				}
			}
		}
	}

	return { state: "success", data: response };
}

jQuery.extend({

	// Counter for holding the number of active queries
	active: 0,

	// Last-Modified header cache for next request
	lastModified: {},
	etag: {},

	ajaxSettings: {
		url: ajaxLocation,
		type: "GET",
		isLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),
		global: true,
		processData: true,
		async: true,
		contentType: "application/x-www-form-urlencoded; charset=UTF-8",
		/*
		timeout: 0,
		data: null,
		dataType: null,
		username: null,
		password: null,
		cache: null,
		throws: false,
		traditional: false,
		headers: {},
		*/

		accepts: {
			"*": allTypes,
			text: "text/plain",
			html: "text/html",
			xml: "application/xml, text/xml",
			json: "application/json, text/javascript"
		},

		contents: {
			xml: /xml/,
			html: /html/,
			json: /json/
		},

		responseFields: {
			xml: "responseXML",
			text: "responseText",
			json: "responseJSON"
		},

		// Data converters
		// Keys separate source (or catchall "*") and destination types with a single space
		converters: {

			// Convert anything to text
			"* text": String,

			// Text to html (true = no transformation)
			"text html": true,

			// Evaluate text as a json expression
			"text json": jQuery.parseJSON,

			// Parse text as xml
			"text xml": jQuery.parseXML
		},

		// For options that shouldn't be deep extended:
		// you can add your own custom options here if
		// and when you create one that shouldn't be
		// deep extended (see ajaxExtend)
		flatOptions: {
			url: true,
			context: true
		}
	},

	// Creates a full fledged settings object into target
	// with both ajaxSettings and settings fields.
	// If target is omitted, writes into ajaxSettings.
	ajaxSetup: function( target, settings ) {
		return settings ?

			// Building a settings object
			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :

			// Extending ajaxSettings
			ajaxExtend( jQuery.ajaxSettings, target );
	},

	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
	ajaxTransport: addToPrefiltersOrTransports( transports ),

	// Main method
	ajax: function( url, options ) {

		// If url is an object, simulate pre-1.5 signature
		if ( typeof url === "object" ) {
			options = url;
			url = undefined;
		}

		// Force options to be an object
		options = options || {};

		var transport,
			// URL without anti-cache param
			cacheURL,
			// Response headers
			responseHeadersString,
			responseHeaders,
			// timeout handle
			timeoutTimer,
			// Cross-domain detection vars
			parts,
			// To know if global events are to be dispatched
			fireGlobals,
			// Loop variable
			i,
			// Create the final options object
			s = jQuery.ajaxSetup( {}, options ),
			// Callbacks context
			callbackContext = s.context || s,
			// Context for global events is callbackContext if it is a DOM node or jQuery collection
			globalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?
				jQuery( callbackContext ) :
				jQuery.event,
			// Deferreds
			deferred = jQuery.Deferred(),
			completeDeferred = jQuery.Callbacks("once memory"),
			// Status-dependent callbacks
			statusCode = s.statusCode || {},
			// Headers (they are sent all at once)
			requestHeaders = {},
			requestHeadersNames = {},
			// The jqXHR state
			state = 0,
			// Default abort message
			strAbort = "canceled",
			// Fake xhr
			jqXHR = {
				readyState: 0,

				// Builds headers hashtable if needed
				getResponseHeader: function( key ) {
					var match;
					if ( state === 2 ) {
						if ( !responseHeaders ) {
							responseHeaders = {};
							while ( (match = rheaders.exec( responseHeadersString )) ) {
								responseHeaders[ match[1].toLowerCase() ] = match[ 2 ];
							}
						}
						match = responseHeaders[ key.toLowerCase() ];
					}
					return match == null ? null : match;
				},

				// Raw string
				getAllResponseHeaders: function() {
					return state === 2 ? responseHeadersString : null;
				},

				// Caches the header
				setRequestHeader: function( name, value ) {
					var lname = name.toLowerCase();
					if ( !state ) {
						name = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;
						requestHeaders[ name ] = value;
					}
					return this;
				},

				// Overrides response content-type header
				overrideMimeType: function( type ) {
					if ( !state ) {
						s.mimeType = type;
					}
					return this;
				},

				// Status-dependent callbacks
				statusCode: function( map ) {
					var code;
					if ( map ) {
						if ( state < 2 ) {
							for ( code in map ) {
								// Lazy-add the new callback in a way that preserves old ones
								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
							}
						} else {
							// Execute the appropriate callbacks
							jqXHR.always( map[ jqXHR.status ] );
						}
					}
					return this;
				},

				// Cancel the request
				abort: function( statusText ) {
					var finalText = statusText || strAbort;
					if ( transport ) {
						transport.abort( finalText );
					}
					done( 0, finalText );
					return this;
				}
			};

		// Attach deferreds
		deferred.promise( jqXHR ).complete = completeDeferred.add;
		jqXHR.success = jqXHR.done;
		jqXHR.error = jqXHR.fail;

		// Remove hash character (#7531: and string promotion)
		// Add protocol if not provided (prefilters might expect it)
		// Handle falsy url in the settings object (#10093: consistency with old signature)
		// We also use the url parameter if available
		s.url = ( ( url || s.url || ajaxLocation ) + "" ).replace( rhash, "" )
			.replace( rprotocol, ajaxLocParts[ 1 ] + "//" );

		// Alias method option to type as per ticket #12004
		s.type = options.method || options.type || s.method || s.type;

		// Extract dataTypes list
		s.dataTypes = jQuery.trim( s.dataType || "*" ).toLowerCase().match( rnotwhite ) || [ "" ];

		// A cross-domain request is in order when we have a protocol:host:port mismatch
		if ( s.crossDomain == null ) {
			parts = rurl.exec( s.url.toLowerCase() );
			s.crossDomain = !!( parts &&
				( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||
					( parts[ 3 ] || ( parts[ 1 ] === "http:" ? "80" : "443" ) ) !==
						( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === "http:" ? "80" : "443" ) ) )
			);
		}

		// Convert data if not already a string
		if ( s.data && s.processData && typeof s.data !== "string" ) {
			s.data = jQuery.param( s.data, s.traditional );
		}

		// Apply prefilters
		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );

		// If request was aborted inside a prefilter, stop there
		if ( state === 2 ) {
			return jqXHR;
		}

		// We can fire global events as of now if asked to
		// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)
		fireGlobals = jQuery.event && s.global;

		// Watch for a new set of requests
		if ( fireGlobals && jQuery.active++ === 0 ) {
			jQuery.event.trigger("ajaxStart");
		}

		// Uppercase the type
		s.type = s.type.toUpperCase();

		// Determine if request has content
		s.hasContent = !rnoContent.test( s.type );

		// Save the URL in case we're toying with the If-Modified-Since
		// and/or If-None-Match header later on
		cacheURL = s.url;

		// More options handling for requests with no content
		if ( !s.hasContent ) {

			// If data is available, append data to url
			if ( s.data ) {
				cacheURL = ( s.url += ( rquery.test( cacheURL ) ? "&" : "?" ) + s.data );
				// #9682: remove data so that it's not used in an eventual retry
				delete s.data;
			}

			// Add anti-cache in url if needed
			if ( s.cache === false ) {
				s.url = rts.test( cacheURL ) ?

					// If there is already a '_' parameter, set its value
					cacheURL.replace( rts, "$1_=" + nonce++ ) :

					// Otherwise add one to the end
					cacheURL + ( rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + nonce++;
			}
		}

		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
		if ( s.ifModified ) {
			if ( jQuery.lastModified[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
			}
			if ( jQuery.etag[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
			}
		}

		// Set the correct header, if data is being sent
		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
			jqXHR.setRequestHeader( "Content-Type", s.contentType );
		}

		// Set the Accepts header for the server, depending on the dataType
		jqXHR.setRequestHeader(
			"Accept",
			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?
				s.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
				s.accepts[ "*" ]
		);

		// Check for headers option
		for ( i in s.headers ) {
			jqXHR.setRequestHeader( i, s.headers[ i ] );
		}

		// Allow custom headers/mimetypes and early abort
		if ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {
			// Abort if not done already and return
			return jqXHR.abort();
		}

		// Aborting is no longer a cancellation
		strAbort = "abort";

		// Install callbacks on deferreds
		for ( i in { success: 1, error: 1, complete: 1 } ) {
			jqXHR[ i ]( s[ i ] );
		}

		// Get transport
		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );

		// If no transport, we auto-abort
		if ( !transport ) {
			done( -1, "No Transport" );
		} else {
			jqXHR.readyState = 1;

			// Send global event
			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
			}
			// Timeout
			if ( s.async && s.timeout > 0 ) {
				timeoutTimer = setTimeout(function() {
					jqXHR.abort("timeout");
				}, s.timeout );
			}

			try {
				state = 1;
				transport.send( requestHeaders, done );
			} catch ( e ) {
				// Propagate exception as error if not done
				if ( state < 2 ) {
					done( -1, e );
				// Simply rethrow otherwise
				} else {
					throw e;
				}
			}
		}

		// Callback for when everything is done
		function done( status, nativeStatusText, responses, headers ) {
			var isSuccess, success, error, response, modified,
				statusText = nativeStatusText;

			// Called once
			if ( state === 2 ) {
				return;
			}

			// State is "done" now
			state = 2;

			// Clear timeout if it exists
			if ( timeoutTimer ) {
				clearTimeout( timeoutTimer );
			}

			// Dereference transport for early garbage collection
			// (no matter how long the jqXHR object will be used)
			transport = undefined;

			// Cache response headers
			responseHeadersString = headers || "";

			// Set readyState
			jqXHR.readyState = status > 0 ? 4 : 0;

			// Determine if successful
			isSuccess = status >= 200 && status < 300 || status === 304;

			// Get response data
			if ( responses ) {
				response = ajaxHandleResponses( s, jqXHR, responses );
			}

			// Convert no matter what (that way responseXXX fields are always set)
			response = ajaxConvert( s, response, jqXHR, isSuccess );

			// If successful, handle type chaining
			if ( isSuccess ) {

				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
				if ( s.ifModified ) {
					modified = jqXHR.getResponseHeader("Last-Modified");
					if ( modified ) {
						jQuery.lastModified[ cacheURL ] = modified;
					}
					modified = jqXHR.getResponseHeader("etag");
					if ( modified ) {
						jQuery.etag[ cacheURL ] = modified;
					}
				}

				// if no content
				if ( status === 204 || s.type === "HEAD" ) {
					statusText = "nocontent";

				// if not modified
				} else if ( status === 304 ) {
					statusText = "notmodified";

				// If we have data, let's convert it
				} else {
					statusText = response.state;
					success = response.data;
					error = response.error;
					isSuccess = !error;
				}
			} else {
				// Extract error from statusText and normalize for non-aborts
				error = statusText;
				if ( status || !statusText ) {
					statusText = "error";
					if ( status < 0 ) {
						status = 0;
					}
				}
			}

			// Set data for the fake xhr object
			jqXHR.status = status;
			jqXHR.statusText = ( nativeStatusText || statusText ) + "";

			// Success/Error
			if ( isSuccess ) {
				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
			} else {
				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
			}

			// Status-dependent callbacks
			jqXHR.statusCode( statusCode );
			statusCode = undefined;

			if ( fireGlobals ) {
				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
					[ jqXHR, s, isSuccess ? success : error ] );
			}

			// Complete
			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );

			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );
				// Handle the global AJAX counter
				if ( !( --jQuery.active ) ) {
					jQuery.event.trigger("ajaxStop");
				}
			}
		}

		return jqXHR;
	},

	getJSON: function( url, data, callback ) {
		return jQuery.get( url, data, callback, "json" );
	},

	getScript: function( url, callback ) {
		return jQuery.get( url, undefined, callback, "script" );
	}
});

jQuery.each( [ "get", "post" ], function( i, method ) {
	jQuery[ method ] = function( url, data, callback, type ) {
		// Shift arguments if data argument was omitted
		if ( jQuery.isFunction( data ) ) {
			type = type || callback;
			callback = data;
			data = undefined;
		}

		return jQuery.ajax({
			url: url,
			type: method,
			dataType: type,
			data: data,
			success: callback
		});
	};
});


jQuery._evalUrl = function( url ) {
	return jQuery.ajax({
		url: url,
		type: "GET",
		dataType: "script",
		async: false,
		global: false,
		"throws": true
	});
};


jQuery.fn.extend({
	wrapAll: function( html ) {
		var wrap;

		if ( jQuery.isFunction( html ) ) {
			return this.each(function( i ) {
				jQuery( this ).wrapAll( html.call(this, i) );
			});
		}

		if ( this[ 0 ] ) {

			// The elements to wrap the target around
			wrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );

			if ( this[ 0 ].parentNode ) {
				wrap.insertBefore( this[ 0 ] );
			}

			wrap.map(function() {
				var elem = this;

				while ( elem.firstElementChild ) {
					elem = elem.firstElementChild;
				}

				return elem;
			}).append( this );
		}

		return this;
	},

	wrapInner: function( html ) {
		if ( jQuery.isFunction( html ) ) {
			return this.each(function( i ) {
				jQuery( this ).wrapInner( html.call(this, i) );
			});
		}

		return this.each(function() {
			var self = jQuery( this ),
				contents = self.contents();

			if ( contents.length ) {
				contents.wrapAll( html );

			} else {
				self.append( html );
			}
		});
	},

	wrap: function( html ) {
		var isFunction = jQuery.isFunction( html );

		return this.each(function( i ) {
			jQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );
		});
	},

	unwrap: function() {
		return this.parent().each(function() {
			if ( !jQuery.nodeName( this, "body" ) ) {
				jQuery( this ).replaceWith( this.childNodes );
			}
		}).end();
	}
});


jQuery.expr.filters.hidden = function( elem ) {
	// Support: Opera <= 12.12
	// Opera reports offsetWidths and offsetHeights less than zero on some elements
	return elem.offsetWidth <= 0 && elem.offsetHeight <= 0;
};
jQuery.expr.filters.visible = function( elem ) {
	return !jQuery.expr.filters.hidden( elem );
};




var r20 = /%20/g,
	rbracket = /\[\]$/,
	rCRLF = /\r?\n/g,
	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
	rsubmittable = /^(?:input|select|textarea|keygen)/i;

function buildParams( prefix, obj, traditional, add ) {
	var name;

	if ( jQuery.isArray( obj ) ) {
		// Serialize array item.
		jQuery.each( obj, function( i, v ) {
			if ( traditional || rbracket.test( prefix ) ) {
				// Treat each array item as a scalar.
				add( prefix, v );

			} else {
				// Item is non-scalar (array or object), encode its numeric index.
				buildParams( prefix + "[" + ( typeof v === "object" ? i : "" ) + "]", v, traditional, add );
			}
		});

	} else if ( !traditional && jQuery.type( obj ) === "object" ) {
		// Serialize object item.
		for ( name in obj ) {
			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
		}

	} else {
		// Serialize scalar item.
		add( prefix, obj );
	}
}

// Serialize an array of form elements or a set of
// key/values into a query string
jQuery.param = function( a, traditional ) {
	var prefix,
		s = [],
		add = function( key, value ) {
			// If value is a function, invoke it and return its value
			value = jQuery.isFunction( value ) ? value() : ( value == null ? "" : value );
			s[ s.length ] = encodeURIComponent( key ) + "=" + encodeURIComponent( value );
		};

	// Set traditional to true for jQuery <= 1.3.2 behavior.
	if ( traditional === undefined ) {
		traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;
	}

	// If an array was passed in, assume that it is an array of form elements.
	if ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {
		// Serialize the form elements
		jQuery.each( a, function() {
			add( this.name, this.value );
		});

	} else {
		// If traditional, encode the "old" way (the way 1.3.2 or older
		// did it), otherwise encode params recursively.
		for ( prefix in a ) {
			buildParams( prefix, a[ prefix ], traditional, add );
		}
	}

	// Return the resulting serialization
	return s.join( "&" ).replace( r20, "+" );
};

jQuery.fn.extend({
	serialize: function() {
		return jQuery.param( this.serializeArray() );
	},
	serializeArray: function() {
		return this.map(function() {
			// Can add propHook for "elements" to filter or add form elements
			var elements = jQuery.prop( this, "elements" );
			return elements ? jQuery.makeArray( elements ) : this;
		})
		.filter(function() {
			var type = this.type;

			// Use .is( ":disabled" ) so that fieldset[disabled] works
			return this.name && !jQuery( this ).is( ":disabled" ) &&
				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
				( this.checked || !rcheckableType.test( type ) );
		})
		.map(function( i, elem ) {
			var val = jQuery( this ).val();

			return val == null ?
				null :
				jQuery.isArray( val ) ?
					jQuery.map( val, function( val ) {
						return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
					}) :
					{ name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
		}).get();
	}
});


jQuery.ajaxSettings.xhr = function() {
	try {
		return new XMLHttpRequest();
	} catch( e ) {}
};

var xhrId = 0,
	xhrCallbacks = {},
	xhrSuccessStatus = {
		// file protocol always yields status code 0, assume 200
		0: 200,
		// Support: IE9
		// #1450: sometimes IE returns 1223 when it should be 204
		1223: 204
	},
	xhrSupported = jQuery.ajaxSettings.xhr();

// Support: IE9
// Open requests must be manually aborted on unload (#5280)
// See https://support.microsoft.com/kb/2856746 for more info
if ( window.attachEvent ) {
	window.attachEvent( "onunload", function() {
		for ( var key in xhrCallbacks ) {
			xhrCallbacks[ key ]();
		}
	});
}

support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
support.ajax = xhrSupported = !!xhrSupported;

jQuery.ajaxTransport(function( options ) {
	var callback;

	// Cross domain only allowed if supported through XMLHttpRequest
	if ( support.cors || xhrSupported && !options.crossDomain ) {
		return {
			send: function( headers, complete ) {
				var i,
					xhr = options.xhr(),
					id = ++xhrId;

				xhr.open( options.type, options.url, options.async, options.username, options.password );

				// Apply custom fields if provided
				if ( options.xhrFields ) {
					for ( i in options.xhrFields ) {
						xhr[ i ] = options.xhrFields[ i ];
					}
				}

				// Override mime type if needed
				if ( options.mimeType && xhr.overrideMimeType ) {
					xhr.overrideMimeType( options.mimeType );
				}

				// X-Requested-With header
				// For cross-domain requests, seeing as conditions for a preflight are
				// akin to a jigsaw puzzle, we simply never set it to be sure.
				// (it can always be set on a per-request basis or even using ajaxSetup)
				// For same-domain requests, won't change header if already provided.
				if ( !options.crossDomain && !headers["X-Requested-With"] ) {
					headers["X-Requested-With"] = "XMLHttpRequest";
				}

				// Set headers
				for ( i in headers ) {
					xhr.setRequestHeader( i, headers[ i ] );
				}

				// Callback
				callback = function( type ) {
					return function() {
						if ( callback ) {
							delete xhrCallbacks[ id ];
							callback = xhr.onload = xhr.onerror = null;

							if ( type === "abort" ) {
								xhr.abort();
							} else if ( type === "error" ) {
								complete(
									// file: protocol always yields status 0; see #8605, #14207
									xhr.status,
									xhr.statusText
								);
							} else {
								complete(
									xhrSuccessStatus[ xhr.status ] || xhr.status,
									xhr.statusText,
									// Support: IE9
									// Accessing binary-data responseText throws an exception
									// (#11426)
									typeof xhr.responseText === "string" ? {
										text: xhr.responseText
									} : undefined,
									xhr.getAllResponseHeaders()
								);
							}
						}
					};
				};

				// Listen to events
				xhr.onload = callback();
				xhr.onerror = callback("error");

				// Create the abort callback
				callback = xhrCallbacks[ id ] = callback("abort");

				try {
					// Do send the request (this may raise an exception)
					xhr.send( options.hasContent && options.data || null );
				} catch ( e ) {
					// #14683: Only rethrow if this hasn't been notified as an error yet
					if ( callback ) {
						throw e;
					}
				}
			},

			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
});




// Install script dataType
jQuery.ajaxSetup({
	accepts: {
		script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
	},
	contents: {
		script: /(?:java|ecma)script/
	},
	converters: {
		"text script": function( text ) {
			jQuery.globalEval( text );
			return text;
		}
	}
});

// Handle cache's special case and crossDomain
jQuery.ajaxPrefilter( "script", function( s ) {
	if ( s.cache === undefined ) {
		s.cache = false;
	}
	if ( s.crossDomain ) {
		s.type = "GET";
	}
});

// Bind script tag hack transport
jQuery.ajaxTransport( "script", function( s ) {
	// This transport only deals with cross domain requests
	if ( s.crossDomain ) {
		var script, callback;
		return {
			send: function( _, complete ) {
				script = jQuery("<script>").prop({
					async: true,
					charset: s.scriptCharset,
					src: s.url
				}).on(
					"load error",
					callback = function( evt ) {
						script.remove();
						callback = null;
						if ( evt ) {
							complete( evt.type === "error" ? 404 : 200, evt.type );
						}
					}
				);
				document.head.appendChild( script[ 0 ] );
			},
			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
});




var oldCallbacks = [],
	rjsonp = /(=)\?(?=&|$)|\?\?/;

// Default jsonp settings
jQuery.ajaxSetup({
	jsonp: "callback",
	jsonpCallback: function() {
		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( nonce++ ) );
		this[ callback ] = true;
		return callback;
	}
});

// Detect, normalize options and install callbacks for jsonp requests
jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {

	var callbackName, overwritten, responseContainer,
		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
			"url" :
			typeof s.data === "string" && !( s.contentType || "" ).indexOf("application/x-www-form-urlencoded") && rjsonp.test( s.data ) && "data"
		);

	// Handle iff the expected data type is "jsonp" or we have a parameter to set
	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {

		// Get callback name, remembering preexisting value associated with it
		callbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?
			s.jsonpCallback() :
			s.jsonpCallback;

		// Insert callback into url or form data
		if ( jsonProp ) {
			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
		} else if ( s.jsonp !== false ) {
			s.url += ( rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
		}

		// Use data converter to retrieve json after script execution
		s.converters["script json"] = function() {
			if ( !responseContainer ) {
				jQuery.error( callbackName + " was not called" );
			}
			return responseContainer[ 0 ];
		};

		// force json dataType
		s.dataTypes[ 0 ] = "json";

		// Install callback
		overwritten = window[ callbackName ];
		window[ callbackName ] = function() {
			responseContainer = arguments;
		};

		// Clean-up function (fires after converters)
		jqXHR.always(function() {
			// Restore preexisting value
			window[ callbackName ] = overwritten;

			// Save back as free
			if ( s[ callbackName ] ) {
				// make sure that re-using the options doesn't screw things around
				s.jsonpCallback = originalSettings.jsonpCallback;

				// save the callback name for future use
				oldCallbacks.push( callbackName );
			}

			// Call if it was a function and we have a response
			if ( responseContainer && jQuery.isFunction( overwritten ) ) {
				overwritten( responseContainer[ 0 ] );
			}

			responseContainer = overwritten = undefined;
		});

		// Delegate to script
		return "script";
	}
});




// data: string of html
// context (optional): If specified, the fragment will be created in this context, defaults to document
// keepScripts (optional): If true, will include scripts passed in the html string
jQuery.parseHTML = function( data, context, keepScripts ) {
	if ( !data || typeof data !== "string" ) {
		return null;
	}
	if ( typeof context === "boolean" ) {
		keepScripts = context;
		context = false;
	}
	context = context || document;

	var parsed = rsingleTag.exec( data ),
		scripts = !keepScripts && [];

	// Single tag
	if ( parsed ) {
		return [ context.createElement( parsed[1] ) ];
	}

	parsed = jQuery.buildFragment( [ data ], context, scripts );

	if ( scripts && scripts.length ) {
		jQuery( scripts ).remove();
	}

	return jQuery.merge( [], parsed.childNodes );
};


// Keep a copy of the old load method
var _load = jQuery.fn.load;

/**
 * Load a url into a page
 */
jQuery.fn.load = function( url, params, callback ) {
	if ( typeof url !== "string" && _load ) {
		return _load.apply( this, arguments );
	}

	var selector, type, response,
		self = this,
		off = url.indexOf(" ");

	if ( off >= 0 ) {
		selector = jQuery.trim( url.slice( off ) );
		url = url.slice( 0, off );
	}

	// If it's a function
	if ( jQuery.isFunction( params ) ) {

		// We assume that it's the callback
		callback = params;
		params = undefined;

	// Otherwise, build a param string
	} else if ( params && typeof params === "object" ) {
		type = "POST";
	}

	// If we have elements to modify, make the request
	if ( self.length > 0 ) {
		jQuery.ajax({
			url: url,

			// if "type" variable is undefined, then "GET" method will be used
			type: type,
			dataType: "html",
			data: params
		}).done(function( responseText ) {

			// Save response for use in complete callback
			response = arguments;

			self.html( selector ?

				// If a selector was specified, locate the right elements in a dummy div
				// Exclude scripts to avoid IE 'Permission Denied' errors
				jQuery("<div>").append( jQuery.parseHTML( responseText ) ).find( selector ) :

				// Otherwise use the full result
				responseText );

		}).complete( callback && function( jqXHR, status ) {
			self.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );
		});
	}

	return this;
};




// Attach a bunch of functions for handling common AJAX events
jQuery.each( [ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function( i, type ) {
	jQuery.fn[ type ] = function( fn ) {
		return this.on( type, fn );
	};
});




jQuery.expr.filters.animated = function( elem ) {
	return jQuery.grep(jQuery.timers, function( fn ) {
		return elem === fn.elem;
	}).length;
};




var docElem = window.document.documentElement;

/**
 * Gets a window from an element
 */
function getWindow( elem ) {
	return jQuery.isWindow( elem ) ? elem : elem.nodeType === 9 && elem.defaultView;
}

jQuery.offset = {
	setOffset: function( elem, options, i ) {
		var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,
			position = jQuery.css( elem, "position" ),
			curElem = jQuery( elem ),
			props = {};

		// Set position first, in-case top/left are set even on static elem
		if ( position === "static" ) {
			elem.style.position = "relative";
		}

		curOffset = curElem.offset();
		curCSSTop = jQuery.css( elem, "top" );
		curCSSLeft = jQuery.css( elem, "left" );
		calculatePosition = ( position === "absolute" || position === "fixed" ) &&
			( curCSSTop + curCSSLeft ).indexOf("auto") > -1;

		// Need to be able to calculate position if either
		// top or left is auto and position is either absolute or fixed
		if ( calculatePosition ) {
			curPosition = curElem.position();
			curTop = curPosition.top;
			curLeft = curPosition.left;

		} else {
			curTop = parseFloat( curCSSTop ) || 0;
			curLeft = parseFloat( curCSSLeft ) || 0;
		}

		if ( jQuery.isFunction( options ) ) {
			options = options.call( elem, i, curOffset );
		}

		if ( options.top != null ) {
			props.top = ( options.top - curOffset.top ) + curTop;
		}
		if ( options.left != null ) {
			props.left = ( options.left - curOffset.left ) + curLeft;
		}

		if ( "using" in options ) {
			options.using.call( elem, props );

		} else {
			curElem.css( props );
		}
	}
};

jQuery.fn.extend({
	offset: function( options ) {
		if ( arguments.length ) {
			return options === undefined ?
				this :
				this.each(function( i ) {
					jQuery.offset.setOffset( this, options, i );
				});
		}

		var docElem, win,
			elem = this[ 0 ],
			box = { top: 0, left: 0 },
			doc = elem && elem.ownerDocument;

		if ( !doc ) {
			return;
		}

		docElem = doc.documentElement;

		// Make sure it's not a disconnected DOM node
		if ( !jQuery.contains( docElem, elem ) ) {
			return box;
		}

		// Support: BlackBerry 5, iOS 3 (original iPhone)
		// If we don't have gBCR, just use 0,0 rather than error
		if ( typeof elem.getBoundingClientRect !== strundefined ) {
			box = elem.getBoundingClientRect();
		}
		win = getWindow( doc );
		return {
			top: box.top + win.pageYOffset - docElem.clientTop,
			left: box.left + win.pageXOffset - docElem.clientLeft
		};
	},

	position: function() {
		if ( !this[ 0 ] ) {
			return;
		}

		var offsetParent, offset,
			elem = this[ 0 ],
			parentOffset = { top: 0, left: 0 };

		// Fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is its only offset parent
		if ( jQuery.css( elem, "position" ) === "fixed" ) {
			// Assume getBoundingClientRect is there when computed position is fixed
			offset = elem.getBoundingClientRect();

		} else {
			// Get *real* offsetParent
			offsetParent = this.offsetParent();

			// Get correct offsets
			offset = this.offset();
			if ( !jQuery.nodeName( offsetParent[ 0 ], "html" ) ) {
				parentOffset = offsetParent.offset();
			}

			// Add offsetParent borders
			parentOffset.top += jQuery.css( offsetParent[ 0 ], "borderTopWidth", true );
			parentOffset.left += jQuery.css( offsetParent[ 0 ], "borderLeftWidth", true );
		}

		// Subtract parent offsets and element margins
		return {
			top: offset.top - parentOffset.top - jQuery.css( elem, "marginTop", true ),
			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true )
		};
	},

	offsetParent: function() {
		return this.map(function() {
			var offsetParent = this.offsetParent || docElem;

			while ( offsetParent && ( !jQuery.nodeName( offsetParent, "html" ) && jQuery.css( offsetParent, "position" ) === "static" ) ) {
				offsetParent = offsetParent.offsetParent;
			}

			return offsetParent || docElem;
		});
	}
});

// Create scrollLeft and scrollTop methods
jQuery.each( { scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function( method, prop ) {
	var top = "pageYOffset" === prop;

	jQuery.fn[ method ] = function( val ) {
		return access( this, function( elem, method, val ) {
			var win = getWindow( elem );

			if ( val === undefined ) {
				return win ? win[ prop ] : elem[ method ];
			}

			if ( win ) {
				win.scrollTo(
					!top ? val : window.pageXOffset,
					top ? val : window.pageYOffset
				);

			} else {
				elem[ method ] = val;
			}
		}, method, val, arguments.length, null );
	};
});

// Support: Safari<7+, Chrome<37+
// Add the top/left cssHooks using jQuery.fn.position
// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
// Blink bug: https://code.google.com/p/chromium/issues/detail?id=229280
// getComputedStyle returns percent when specified for top/left/bottom/right;
// rather than make the css module depend on the offset module, just check for it here
jQuery.each( [ "top", "left" ], function( i, prop ) {
	jQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,
		function( elem, computed ) {
			if ( computed ) {
				computed = curCSS( elem, prop );
				// If curCSS returns percentage, fallback to offset
				return rnumnonpx.test( computed ) ?
					jQuery( elem ).position()[ prop ] + "px" :
					computed;
			}
		}
	);
});


// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
	jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name }, function( defaultExtra, funcName ) {
		// Margin is only for outerHeight, outerWidth
		jQuery.fn[ funcName ] = function( margin, value ) {
			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );

			return access( this, function( elem, type, value ) {
				var doc;

				if ( jQuery.isWindow( elem ) ) {
					// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there
					// isn't a whole lot we can do. See pull request at this URL for discussion:
					// https://github.com/jquery/jquery/pull/764
					return elem.document.documentElement[ "client" + name ];
				}

				// Get document width or height
				if ( elem.nodeType === 9 ) {
					doc = elem.documentElement;

					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],
					// whichever is greatest
					return Math.max(
						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
						elem.body[ "offset" + name ], doc[ "offset" + name ],
						doc[ "client" + name ]
					);
				}

				return value === undefined ?
					// Get width or height on the element, requesting but not forcing parseFloat
					jQuery.css( elem, type, extra ) :

					// Set width or height on the element
					jQuery.style( elem, type, value, extra );
			}, type, chainable ? margin : undefined, chainable, null );
		};
	});
});


// The number of elements contained in the matched element set
jQuery.fn.size = function() {
	return this.length;
};

jQuery.fn.andSelf = jQuery.fn.addBack;




// Register as a named AMD module, since jQuery can be concatenated with other
// files that may use define, but not via a proper concatenation script that
// understands anonymous AMD modules. A named AMD is safest and most robust
// way to register. Lowercase jquery is used because AMD module names are
// derived from file names, and jQuery is normally delivered in a lowercase
// file name. Do this after creating the global so that if an AMD module wants
// to call noConflict to hide this version of jQuery, it will work.

// Note that for maximum portability, libraries that are not jQuery should
// declare themselves as anonymous modules, and avoid setting a global if an
// AMD loader is present. jQuery is a special case. For more information, see
// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon

if ( typeof define === "function" && define.amd ) {
	define( "jquery", [], function() {
		return jQuery;
	});
}




var
	// Map over jQuery in case of overwrite
	_jQuery = window.jQuery,

	// Map over the $ in case of overwrite
	_$ = window.$;

jQuery.noConflict = function( deep ) {
	if ( window.$ === jQuery ) {
		window.$ = _$;
	}

	if ( deep && window.jQuery === jQuery ) {
		window.jQuery = _jQuery;
	}

	return jQuery;
};

// Expose jQuery and $ identifiers, even in AMD
// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)
// and CommonJS for browser emulators (#13566)
if ( typeof noGlobal === strundefined ) {
	window.jQuery = window.$ = jQuery;
}




return jQuery;

}));

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/jquery/dist/jquery.js","/node_modules/jquery/dist")

},{"_process":7,"buffer":3}],3:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */

var base64 = require('base64-js')
var ieee754 = require('ieee754')
var isArray = require('is-array')

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50
Buffer.poolSize = 8192 // not used by this implementation

var kMaxLength = 0x3fffffff
var rootParent = {}

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Note:
 *
 * - Implementation must support adding new properties to `Uint8Array` instances.
 *   Firefox 4-29 lacked support, fixed in Firefox 30+.
 *   See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *  - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *  - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *    incorrect length in some situations.
 *
 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they will
 * get the Object implementation, which is slower but will work correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = (function () {
  try {
    var buf = new ArrayBuffer(0)
    var arr = new Uint8Array(buf)
    arr.foo = function () { return 42 }
    return 42 === arr.foo() && // typed array instances can be augmented
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        new Uint8Array(1).subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
})()

/**
 * Class: Buffer
 * =============
 *
 * The Buffer constructor returns instances of `Uint8Array` that are augmented
 * with function properties for all the node `Buffer` API functions. We use
 * `Uint8Array` so that square bracket notation works as expected -- it returns
 * a single octet.
 *
 * By augmenting the instances, we can avoid modifying the `Uint8Array`
 * prototype.
 */
function Buffer (subject, encoding, noZero) {
  if (!(this instanceof Buffer))
    return new Buffer(subject, encoding, noZero)

  var type = typeof subject

  // Find the length
  var length
  if (type === 'number')
    length = subject > 0 ? subject >>> 0 : 0
  else if (type === 'string') {
    length = Buffer.byteLength(subject, encoding)
  } else if (type === 'object' && subject !== null) { // assume object is array-like
    if (subject.type === 'Buffer' && isArray(subject.data))
      subject = subject.data
    length = +subject.length > 0 ? Math.floor(+subject.length) : 0
  } else
    throw new TypeError('must start with number, buffer, array or string')

  if (length > kMaxLength)
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
      'size: 0x' + kMaxLength.toString(16) + ' bytes')

  var buf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Preferred: Return an augmented `Uint8Array` instance for best performance
    buf = Buffer._augment(new Uint8Array(length))
  } else {
    // Fallback: Return THIS instance of Buffer (created by `new`)
    buf = this
    buf.length = length
    buf._isBuffer = true
  }

  var i
  if (Buffer.TYPED_ARRAY_SUPPORT && typeof subject.byteLength === 'number') {
    // Speed optimization -- use set if we're copying from a typed array
    buf._set(subject)
  } else if (isArrayish(subject)) {
    // Treat array-ish objects as a byte array
    if (Buffer.isBuffer(subject)) {
      for (i = 0; i < length; i++)
        buf[i] = subject.readUInt8(i)
    } else {
      for (i = 0; i < length; i++)
        buf[i] = ((subject[i] % 256) + 256) % 256
    }
  } else if (type === 'string') {
    buf.write(subject, 0, encoding)
  } else if (type === 'number' && !Buffer.TYPED_ARRAY_SUPPORT && !noZero) {
    for (i = 0; i < length; i++) {
      buf[i] = 0
    }
  }

  if (length > 0 && length <= Buffer.poolSize)
    buf.parent = rootParent

  return buf
}

function SlowBuffer(subject, encoding, noZero) {
  if (!(this instanceof SlowBuffer))
    return new SlowBuffer(subject, encoding, noZero)

  var buf = new Buffer(subject, encoding, noZero)
  delete buf.parent
  return buf
}

Buffer.isBuffer = function (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b))
    throw new TypeError('Arguments must be Buffers')

  var x = a.length
  var y = b.length
  for (var i = 0, len = Math.min(x, y); i < len && a[i] === b[i]; i++) {}
  if (i !== len) {
    x = a[i]
    y = b[i]
  }
  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'binary':
    case 'base64':
    case 'raw':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function (list, totalLength) {
  if (!isArray(list)) throw new TypeError('Usage: Buffer.concat(list[, length])')

  if (list.length === 0) {
    return new Buffer(0)
  } else if (list.length === 1) {
    return list[0]
  }

  var i
  if (totalLength === undefined) {
    totalLength = 0
    for (i = 0; i < list.length; i++) {
      totalLength += list[i].length
    }
  }

  var buf = new Buffer(totalLength)
  var pos = 0
  for (i = 0; i < list.length; i++) {
    var item = list[i]
    item.copy(buf, pos)
    pos += item.length
  }
  return buf
}

Buffer.byteLength = function (str, encoding) {
  var ret
  str = str + ''
  switch (encoding || 'utf8') {
    case 'ascii':
    case 'binary':
    case 'raw':
      ret = str.length
      break
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      ret = str.length * 2
      break
    case 'hex':
      ret = str.length >>> 1
      break
    case 'utf8':
    case 'utf-8':
      ret = utf8ToBytes(str).length
      break
    case 'base64':
      ret = base64ToBytes(str).length
      break
    default:
      ret = str.length
  }
  return ret
}

// pre-set for values that may exist in the future
Buffer.prototype.length = undefined
Buffer.prototype.parent = undefined

// toString(encoding, start=0, end=buffer.length)
Buffer.prototype.toString = function (encoding, start, end) {
  var loweredCase = false

  start = start >>> 0
  end = end === undefined || end === Infinity ? this.length : end >>> 0

  if (!encoding) encoding = 'utf8'
  if (start < 0) start = 0
  if (end > this.length) end = this.length
  if (end <= start) return ''

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'binary':
        return binarySlice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase)
          throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.equals = function (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max)
      str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  return Buffer.compare(this, b)
}

// `get` will be removed in Node 0.13+
Buffer.prototype.get = function (offset) {
  console.log('.get() is deprecated. Access using array indexes instead.')
  return this.readUInt8(offset)
}

// `set` will be removed in Node 0.13+
Buffer.prototype.set = function (v, offset) {
  console.log('.set() is deprecated. Access using array indexes instead.')
  return this.writeUInt8(v, offset)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new Error('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; i++) {
    var byte = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(byte)) throw new Error('Invalid hex string')
    buf[offset + i] = byte
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  var charsWritten = blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
  return charsWritten
}

function asciiWrite (buf, string, offset, length) {
  var charsWritten = blitBuffer(asciiToBytes(string), buf, offset, length)
  return charsWritten
}

function binaryWrite (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  var charsWritten = blitBuffer(base64ToBytes(string), buf, offset, length)
  return charsWritten
}

function utf16leWrite (buf, string, offset, length) {
  var charsWritten = blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length, 2)
  return charsWritten
}

Buffer.prototype.write = function (string, offset, length, encoding) {
  // Support both (string, offset, length, encoding)
  // and the legacy (string, encoding, offset, length)
  if (isFinite(offset)) {
    if (!isFinite(length)) {
      encoding = length
      length = undefined
    }
  } else {  // legacy
    var swap = encoding
    encoding = offset
    offset = length
    length = swap
  }

  offset = Number(offset) || 0

  if (length < 0 || offset < 0 || offset > this.length)
    throw new RangeError('attempt to write outside buffer bounds');

  var remaining = this.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }
  encoding = String(encoding || 'utf8').toLowerCase()

  var ret
  switch (encoding) {
    case 'hex':
      ret = hexWrite(this, string, offset, length)
      break
    case 'utf8':
    case 'utf-8':
      ret = utf8Write(this, string, offset, length)
      break
    case 'ascii':
      ret = asciiWrite(this, string, offset, length)
      break
    case 'binary':
      ret = binaryWrite(this, string, offset, length)
      break
    case 'base64':
      ret = base64Write(this, string, offset, length)
      break
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      ret = utf16leWrite(this, string, offset, length)
      break
    default:
      throw new TypeError('Unknown encoding: ' + encoding)
  }
  return ret
}

Buffer.prototype.toJSON = function () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  var res = ''
  var tmp = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; i++) {
    if (buf[i] <= 0x7F) {
      res += decodeUtf8Char(tmp) + String.fromCharCode(buf[i])
      tmp = ''
    } else {
      tmp += '%' + buf[i].toString(16)
    }
  }

  return res + decodeUtf8Char(tmp)
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; i++) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function binarySlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; i++) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; i++) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len;
    if (start < 0)
      start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0)
      end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start)
    end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = Buffer._augment(this.subarray(start, end))
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined, true)
    for (var i = 0; i < sliceLen; i++) {
      newBuf[i] = this[i + start]
    }
  }

  if (newBuf.length)
    newBuf.parent = this.parent || this

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0)
    throw new RangeError('offset is not uint')
  if (offset + ext > length)
    throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function (offset, byteLength, noAssert) {
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100))
    val += this[offset + i] * mul

  return val
}

Buffer.prototype.readUIntBE = function (offset, byteLength, noAssert) {
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkOffset(offset, byteLength, this.length)

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100))
    val += this[offset + --byteLength] * mul;

  return val
}

Buffer.prototype.readUInt8 = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
      ((this[offset + 1] << 16) |
      (this[offset + 2] << 8) |
      this[offset + 3])
}

Buffer.prototype.readIntLE = function (offset, byteLength, noAssert) {
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100))
    val += this[offset + i] * mul
  mul *= 0x80

  if (val >= mul)
    val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function (offset, byteLength, noAssert) {
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100))
    val += this[offset + --i] * mul
  mul *= 0x80

  if (val >= mul)
    val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80))
    return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)

  return (this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16) |
      (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
      (this[offset + 1] << 16) |
      (this[offset + 2] << 8) |
      (this[offset + 3])
}

Buffer.prototype.readFloatLE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function (offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('value is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('index out of range')
}

Buffer.prototype.writeUIntLE = function (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100))
    this[offset + i] = (value / mul) >>> 0 & 0xFF

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert)
    checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100))
    this[offset + i] = (value / mul) >>> 0 & 0xFF

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = value
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = value
    this[offset + 1] = (value >>> 8)
  } else objectWriteUInt16(this, value, offset, true)
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = value
  } else objectWriteUInt16(this, value, offset, false)
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = value
  } else objectWriteUInt32(this, value, offset, true)
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = value
  } else objectWriteUInt32(this, value, offset, false)
  return offset + 4
}

Buffer.prototype.writeIntLE = function (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) {
    checkInt(this,
             value,
             offset,
             byteLength,
             Math.pow(2, 8 * byteLength - 1) - 1,
             -Math.pow(2, 8 * byteLength - 1))
  }

  var i = 0
  var mul = 1
  var sub = value < 0 ? 1 : 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100))
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) {
    checkInt(this,
             value,
             offset,
             byteLength,
             Math.pow(2, 8 * byteLength - 1) - 1,
             -Math.pow(2, 8 * byteLength - 1))
  }

  var i = byteLength - 1
  var mul = 1
  var sub = value < 0 ? 1 : 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100))
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = value
  return offset + 1
}

Buffer.prototype.writeInt16LE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = value
    this[offset + 1] = (value >>> 8)
  } else objectWriteUInt16(this, value, offset, true)
  return offset + 2
}

Buffer.prototype.writeInt16BE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = value
  } else objectWriteUInt16(this, value, offset, false)
  return offset + 2
}

Buffer.prototype.writeInt32LE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = value
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else objectWriteUInt32(this, value, offset, true)
  return offset + 4
}

Buffer.prototype.writeInt32BE = function (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert)
    checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = value
  } else objectWriteUInt32(this, value, offset, false)
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (value > max || value < min) throw new RangeError('value is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('index out of range')
  if (offset < 0) throw new RangeError('index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert)
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert)
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function (target, target_start, start, end) {
  var source = this

  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (target_start >= target.length) target_start = target.length
  if (!target_start) target_start = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || source.length === 0) return 0

  // Fatal error conditions
  if (target_start < 0)
    throw new RangeError('targetStart out of bounds')
  if (start < 0 || start >= source.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length)
    end = this.length
  if (target.length - target_start < end - start)
    end = target.length - target_start + start

  var len = end - start

  if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < len; i++) {
      target[i + target_start] = this[i + start]
    }
  } else {
    target._set(this.subarray(start, start + len), target_start)
  }

  return len
}

// fill(value, start=0, end=buffer.length)
Buffer.prototype.fill = function (value, start, end) {
  if (!value) value = 0
  if (!start) start = 0
  if (!end) end = this.length

  if (end < start) throw new RangeError('end < start')

  // Fill 0 bytes; we're done
  if (end === start) return
  if (this.length === 0) return

  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')
  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')

  var i
  if (typeof value === 'number') {
    for (i = start; i < end; i++) {
      this[i] = value
    }
  } else {
    var bytes = utf8ToBytes(value.toString())
    var len = bytes.length
    for (i = start; i < end; i++) {
      this[i] = bytes[i % len]
    }
  }

  return this
}

/**
 * Creates a new `ArrayBuffer` with the *copied* memory of the buffer instance.
 * Added in Node 0.12. Only available in browsers that support ArrayBuffer.
 */
Buffer.prototype.toArrayBuffer = function () {
  if (typeof Uint8Array !== 'undefined') {
    if (Buffer.TYPED_ARRAY_SUPPORT) {
      return (new Buffer(this)).buffer
    } else {
      var buf = new Uint8Array(this.length)
      for (var i = 0, len = buf.length; i < len; i += 1) {
        buf[i] = this[i]
      }
      return buf.buffer
    }
  } else {
    throw new TypeError('Buffer.toArrayBuffer not supported in this browser')
  }
}

// HELPER FUNCTIONS
// ================

var BP = Buffer.prototype

/**
 * Augment a Uint8Array *instance* (not the Uint8Array class!) with Buffer methods
 */
Buffer._augment = function (arr) {
  arr.constructor = Buffer
  arr._isBuffer = true

  // save reference to original Uint8Array get/set methods before overwriting
  arr._get = arr.get
  arr._set = arr.set

  // deprecated, will be removed in node 0.13+
  arr.get = BP.get
  arr.set = BP.set

  arr.write = BP.write
  arr.toString = BP.toString
  arr.toLocaleString = BP.toString
  arr.toJSON = BP.toJSON
  arr.equals = BP.equals
  arr.compare = BP.compare
  arr.copy = BP.copy
  arr.slice = BP.slice
  arr.readUIntLE = BP.readUIntLE
  arr.readUIntBE = BP.readUIntBE
  arr.readUInt8 = BP.readUInt8
  arr.readUInt16LE = BP.readUInt16LE
  arr.readUInt16BE = BP.readUInt16BE
  arr.readUInt32LE = BP.readUInt32LE
  arr.readUInt32BE = BP.readUInt32BE
  arr.readIntLE = BP.readIntLE
  arr.readIntBE = BP.readIntBE
  arr.readInt8 = BP.readInt8
  arr.readInt16LE = BP.readInt16LE
  arr.readInt16BE = BP.readInt16BE
  arr.readInt32LE = BP.readInt32LE
  arr.readInt32BE = BP.readInt32BE
  arr.readFloatLE = BP.readFloatLE
  arr.readFloatBE = BP.readFloatBE
  arr.readDoubleLE = BP.readDoubleLE
  arr.readDoubleBE = BP.readDoubleBE
  arr.writeUInt8 = BP.writeUInt8
  arr.writeUIntLE = BP.writeUIntLE
  arr.writeUIntBE = BP.writeUIntBE
  arr.writeUInt16LE = BP.writeUInt16LE
  arr.writeUInt16BE = BP.writeUInt16BE
  arr.writeUInt32LE = BP.writeUInt32LE
  arr.writeUInt32BE = BP.writeUInt32BE
  arr.writeIntLE = BP.writeIntLE
  arr.writeIntBE = BP.writeIntBE
  arr.writeInt8 = BP.writeInt8
  arr.writeInt16LE = BP.writeInt16LE
  arr.writeInt16BE = BP.writeInt16BE
  arr.writeInt32LE = BP.writeInt32LE
  arr.writeInt32BE = BP.writeInt32BE
  arr.writeFloatLE = BP.writeFloatLE
  arr.writeFloatBE = BP.writeFloatBE
  arr.writeDoubleLE = BP.writeDoubleLE
  arr.writeDoubleBE = BP.writeDoubleBE
  arr.fill = BP.fill
  arr.inspect = BP.inspect
  arr.toArrayBuffer = BP.toArrayBuffer

  return arr
}

var INVALID_BASE64_RE = /[^+\/0-9A-z\-]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function isArrayish (subject) {
  return isArray(subject) || Buffer.isBuffer(subject) ||
      subject && typeof subject === 'object' &&
      typeof subject.length === 'number'
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes(string, units) {
  var codePoint, length = string.length
  var leadSurrogate = null
  units = units || Infinity
  var bytes = []
  var i = 0

  for (; i<length; i++) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {

      // last char was a lead
      if (leadSurrogate) {

        // 2 leads in a row
        if (codePoint < 0xDC00) {
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          leadSurrogate = codePoint
          continue
        }

        // valid surrogate pair
        else {
          codePoint = leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00 | 0x10000
          leadSurrogate = null
        }
      }

      // no lead yet
      else {

        // unexpected trail
        if (codePoint > 0xDBFF) {
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // unpaired lead
        else if (i + 1 === length) {
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        else {
          leadSurrogate = codePoint
          continue
        }
      }
    }

    // valid bmp char, but last char was a lead
    else if (leadSurrogate) {
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
      leadSurrogate = null
    }

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    }
    else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      );
    }
    else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      );
    }
    else if (codePoint < 0x200000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      );
    }
    else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; i++) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; i++) {

    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length, unitSize) {
  if (unitSize) length -= length % unitSize;
  for (var i = 0; i < length; i++) {
    if ((i + offset >= dst.length) || (i >= src.length))
      break
    dst[i + offset] = src[i]
  }
  return i
}

function decodeUtf8Char (str) {
  try {
    return decodeURIComponent(str)
  } catch (err) {
    return String.fromCharCode(0xFFFD) // UTF 8 invalid char
  }
}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/buffer/index.js","/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/buffer")

},{"_process":7,"base64-js":4,"buffer":3,"ieee754":5,"is-array":6}],4:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

;(function (exports) {
	'use strict';

  var Arr = (typeof Uint8Array !== 'undefined')
    ? Uint8Array
    : Array

	var PLUS   = '+'.charCodeAt(0)
	var SLASH  = '/'.charCodeAt(0)
	var NUMBER = '0'.charCodeAt(0)
	var LOWER  = 'a'.charCodeAt(0)
	var UPPER  = 'A'.charCodeAt(0)
	var PLUS_URL_SAFE = '-'.charCodeAt(0)
	var SLASH_URL_SAFE = '_'.charCodeAt(0)

	function decode (elt) {
		var code = elt.charCodeAt(0)
		if (code === PLUS ||
		    code === PLUS_URL_SAFE)
			return 62 // '+'
		if (code === SLASH ||
		    code === SLASH_URL_SAFE)
			return 63 // '/'
		if (code < NUMBER)
			return -1 //no match
		if (code < NUMBER + 10)
			return code - NUMBER + 26 + 26
		if (code < UPPER + 26)
			return code - UPPER
		if (code < LOWER + 26)
			return code - LOWER + 26
	}

	function b64ToByteArray (b64) {
		var i, j, l, tmp, placeHolders, arr

		if (b64.length % 4 > 0) {
			throw new Error('Invalid string. Length must be a multiple of 4')
		}

		// the number of equal signs (place holders)
		// if there are two placeholders, than the two characters before it
		// represent one byte
		// if there is only one, then the three characters before it represent 2 bytes
		// this is just a cheap hack to not do indexOf twice
		var len = b64.length
		placeHolders = '=' === b64.charAt(len - 2) ? 2 : '=' === b64.charAt(len - 1) ? 1 : 0

		// base64 is 4/3 + up to two characters of the original data
		arr = new Arr(b64.length * 3 / 4 - placeHolders)

		// if there are placeholders, only get up to the last complete 4 chars
		l = placeHolders > 0 ? b64.length - 4 : b64.length

		var L = 0

		function push (v) {
			arr[L++] = v
		}

		for (i = 0, j = 0; i < l; i += 4, j += 3) {
			tmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))
			push((tmp & 0xFF0000) >> 16)
			push((tmp & 0xFF00) >> 8)
			push(tmp & 0xFF)
		}

		if (placeHolders === 2) {
			tmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)
			push(tmp & 0xFF)
		} else if (placeHolders === 1) {
			tmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)
			push((tmp >> 8) & 0xFF)
			push(tmp & 0xFF)
		}

		return arr
	}

	function uint8ToBase64 (uint8) {
		var i,
			extraBytes = uint8.length % 3, // if we have 1 byte left, pad 2 bytes
			output = "",
			temp, length

		function encode (num) {
			return lookup.charAt(num)
		}

		function tripletToBase64 (num) {
			return encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)
		}

		// go through the array every three bytes, we'll deal with trailing stuff later
		for (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {
			temp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])
			output += tripletToBase64(temp)
		}

		// pad the end with zeros, but make sure to not forget the extra bytes
		switch (extraBytes) {
			case 1:
				temp = uint8[uint8.length - 1]
				output += encode(temp >> 2)
				output += encode((temp << 4) & 0x3F)
				output += '=='
				break
			case 2:
				temp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])
				output += encode(temp >> 10)
				output += encode((temp >> 4) & 0x3F)
				output += encode((temp << 2) & 0x3F)
				output += '='
				break
		}

		return output
	}

	exports.toByteArray = b64ToByteArray
	exports.fromByteArray = uint8ToBase64
}(typeof exports === 'undefined' ? (this.base64js = {}) : exports))

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js","/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib")

},{"_process":7,"buffer":3}],5:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
exports.read = function(buffer, offset, isLE, mLen, nBytes) {
  var e, m,
      eLen = nBytes * 8 - mLen - 1,
      eMax = (1 << eLen) - 1,
      eBias = eMax >> 1,
      nBits = -7,
      i = isLE ? (nBytes - 1) : 0,
      d = isLE ? -1 : 1,
      s = buffer[offset + i];

  i += d;

  e = s & ((1 << (-nBits)) - 1);
  s >>= (-nBits);
  nBits += eLen;
  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8);

  m = e & ((1 << (-nBits)) - 1);
  e >>= (-nBits);
  nBits += mLen;
  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8);

  if (e === 0) {
    e = 1 - eBias;
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity);
  } else {
    m = m + Math.pow(2, mLen);
    e = e - eBias;
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);
};

exports.write = function(buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c,
      eLen = nBytes * 8 - mLen - 1,
      eMax = (1 << eLen) - 1,
      eBias = eMax >> 1,
      rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0),
      i = isLE ? 0 : (nBytes - 1),
      d = isLE ? 1 : -1,
      s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0;

  value = Math.abs(value);

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0;
    e = eMax;
  } else {
    e = Math.floor(Math.log(value) / Math.LN2);
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--;
      c *= 2;
    }
    if (e + eBias >= 1) {
      value += rt / c;
    } else {
      value += rt * Math.pow(2, 1 - eBias);
    }
    if (value * c >= 2) {
      e++;
      c /= 2;
    }

    if (e + eBias >= eMax) {
      m = 0;
      e = eMax;
    } else if (e + eBias >= 1) {
      m = (value * c - 1) * Math.pow(2, mLen);
      e = e + eBias;
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);
      e = 0;
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8);

  e = (e << mLen) | m;
  eLen += mLen;
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8);

  buffer[offset + i - d] |= s * 128;
};

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js","/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/buffer/node_modules/ieee754")

},{"_process":7,"buffer":3}],6:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){

/**
 * isArray
 */

var isArray = Array.isArray;

/**
 * toString
 */

var str = Object.prototype.toString;

/**
 * Whether or not the given `val`
 * is an array.
 *
 * example:
 *
 *        isArray([]);
 *        // > true
 *        isArray(arguments);
 *        // > false
 *        isArray('');
 *        // > false
 *
 * @param {mixed} val
 * @return {bool}
 */

module.exports = isArray || function (val) {
  return !! val && '[object Array]' == str.call(val);
};

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/buffer/node_modules/is-array/index.js","/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/buffer/node_modules/is-array")

},{"_process":7,"buffer":3}],7:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
// shim for using process in browser

var process = module.exports = {};
var queue = [];
var draining = false;

function drainQueue() {
    if (draining) {
        return;
    }
    draining = true;
    var currentQueue;
    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        var i = -1;
        while (++i < len) {
            currentQueue[i]();
        }
        len = queue.length;
    }
    draining = false;
}
process.nextTick = function (fun) {
    queue.push(fun);
    if (!draining) {
        setTimeout(drainQueue, 0);
    }
};

process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

// TODO(shtylman)
process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/process/browser.js","/node_modules/laravel-elixir-browserify/node_modules/browserify/node_modules/process")

},{"_process":7,"buffer":3}],8:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleableBasicCtrl = function($scope,$rootScope,SaleableService,MessageService){

    $rootScope.$on("newBasicDetail",function(event){
        //var numberOfSaleables = $scope.$parent.saleables.length;
        var saleable = SaleableService.$build();
        saleable.type =0;
        saleable.featured = 0;

        /*if(numberOfSaleables==0){

        }*/
        //$scope.saleable = angular.copy($scope.master);
        $scope.saleable = saleable;



        $scope.updateSaleable = function(){

            if($scope.saleable.isfeatured){
                $scope.saleable.featured = 1;
            }else{
                $scope.saleable.featured = 0;
            }
            saleable.$save().$then(function(data){
                var meta = data.$metadata.meta;
                MessageService.setAlertMessage($scope,meta);
                $rootScope.$emit("saleableCreated",saleable);

            });
        }

    });

    $rootScope.$on("editBasicDetail",function(event,saleable){
        $scope.saleable = saleable;
        $scope.updateSaleable = function(){

            if($scope.saleable.isfeatured){
                $scope.saleable.featured = 1;
            }else{
                $scope.saleable.featured = 0;
            }
            saleable.$save().$then(function(data){

                var meta = data.$metadata.meta;
                MessageService.setAlertMessage($scope,meta);
                $rootScope.$emit("saleableUpdated",saleable);

            });
        }

    });



}

module.exports = saleableBasicCtrl;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/basicdetailcontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],9:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){

var bioController = function($scope,BiographyService,MessageService){


    var data = BiographyService.$find(0);

    $scope.profile = data.$fetch();

    $scope.updateBio = function(){
        data.$save().$then(function(data){

            var meta = data.$metadata.meta;

            MessageService.setAlertMessage($scope,meta);

        });
    }
}

module.exports = bioController;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/biocontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],10:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var configController = function($scope,$timeout,MessageService,UserContentType){

    var contenttypes = UserContentType.$search().$then(function(data){
        $scope.usercontenttypes = data;
    });

    $scope.editUserContent = function(content){
        $scope.content = content;
        $scope.showEditContentItem = true;
    }
    $scope.updateUserContent = function(){
        var isHome = $scope.content.ishome;
        var asHome = false;
        $scope.content.ashome = 0;
        if(isHome){
            $scope.content.ashome = 1;
        }
        $scope.content.$save().$then(function(data){
            $scope.usercontenttypes.$refresh();
            $scope.showEditContentItem = false;
            var meta = data.$metadata.meta;
            MessageService.setAlertMessage($scope,meta);
        });
    }

    $scope.changeStateContent = function($event,usercontent){
        var checkbox = $event.target;
        var action = (checkbox.checked ? true: false);

        usercontent.active = action;
        usercontent.$save().$then(function(data){
            $scope.usercontenttypes.$refresh();
            var meta = data.$metadata.meta;
            MessageService.setAlertMessage($scope,meta);
        });
    }
    $scope.setAsHome = function($event,usercontent){
        var checkbox = $event.target;
        var action = (checkbox.checked ? true: false);

        usercontent.ashome = action;
        usercontent.$save().$then(function(data){
            $scope.usercontenttypes.$refresh();
            var meta = data.$metadata.meta;
            MessageService.setAlertMessage($scope,meta);
        });
    }

}
module.exports = configController;


}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/configcontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],11:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/**
 * Created by macintosh on 2/3/15.
 */
var alertDirective = function(){
    return {
        templateUrl:"../../js/admin/angular/templates/alert.html",
        restrict:"EA",
        scope : {
            message:"=msge"
        },

        controller:function($scope){

            $scope.showAlert = true;
            $scope.destroyAlert = function(){
                $scope.$parent.showAlert = false;
            }
        }
    }
}
module.exports = alertDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/alertdirective.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],12:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var closeContentDirective = function(){
    return {
        restrict:'EA',
        template:'<a href="" ng-click="destroySection()" class="pull-right remove-button" data-icon="&#xe70d" ></a>',

        scope:{remove:'&'},
        controller:function($scope){
            $scope.destroySection = function(){
                $scope.remove();
            }
        }
    }
}

module.exports = closeContentDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/closecontentdirective.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],13:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var configMenu = function(){
    return {
        restrict:"EA",
        templateUrl:"../../js/admin/angular/templates/config_menu.html"
    }
}
module.exports = configMenu;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/configmenu.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],14:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var contentSelector = function(MessageService,UserContentType){
    return {
        templateUrl:"../../js/admin/angular/templates/content_selector.html",
        restrict:"EA",
        scope:{},
        transclude:true,
        controller:function($scope,$timeout){
            $scope.infoContentSelector = MessageService.get('contentselector_info').message;
            var contenttypes = UserContentType.$search().$then(function(data){
                $scope.usercontenttypes = data;
            });

            $scope.updateContent = function($event,usercontent){

                var checkbox = $event.target;
                var action = (checkbox.checked ? true: false);

                usercontent.active = action;
                usercontent.$save().$then(function(data){
                    var meta = data.$metadata.meta;
                    MessageService.setAlertMessage($scope,meta);
                });

            }

        }
    }
}

module.exports = contentSelector;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/contentselector.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],15:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var hallo = function(){
    return {
        require: 'ngModel',
        link: function ($scope, $element, $attrs, ngModelCtrl) {
            console.log($element);
            $(this).hallo({
                plugins: {
                    'halloformat': {},
                    'halloblock': {},
                    'hallojustify': {},
                    'hallolists': {},
                    'halloreundo': {}
                }
            });

            ngModelCtrl.$render = function () {
                var contents = ngModelCtrl.$viewValue;
                $(this).hallo('setContents', contents);
            }


        }
    }
}
module.exports = hallo
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/hallodirective.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],16:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var profileMenu = function(){
    return {
        restrict:"EA",
        templateUrl:"../../js/admin/angular/templates/profile_menu.html"
    }
}
module.exports = profileMenu;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/profilemenu.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],17:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var educationDirective = function(MessageService,Education,$timeout,Helper){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/education.html",
        restrict:"EA",
        scope:{},
        controller:function($scope,$rootScope) {
            $scope.closeForm = function(){
                Helper.enableForm($scope,false);
            }
            Helper.enableForm($scope,false);
            $rootScope.$on('resumeChange',function(event,args){
                if(typeof args.resume !== "undefined") {
                    var resumeId = args.resume.id;
                    var educations = Education.$search({resume_id: resumeId}).$then(function (data) {
                        $scope.educations = data;
                        if ($scope.educations.length == 0) {
                            MessageService.setNoItemsInfoMessage($scope, " estudios",
                                ". Pulsa el botón Nueva para crear una");
                        }
                    });

                    $scope.newEducation = function () {
                        Helper.enableForm($scope, true);
                        var education = Education.$build({resume_id: resumeId, initdate: '', enddate: ''});
                        $scope.education = education;
                        $scope.monthoptions = Helper.months();
                        $scope.education.initmonth = Helper.months()[0];
                        $scope.education.endmonth = Helper.months()[0];

                        $scope.updateEducation = function () {
                            var isCurrent = $scope.education.currentplace;
                            $scope.education.current = 0;
                            if (isCurrent) {
                                $scope.education.current = 1;
                            }
                            $scope.education.initdate = $scope.education.initmonth + "-" + $scope.education.inityear;
                            $scope.education.enddate = $scope.education.endmonth + "-" + $scope.education.endyear;

                            education.$save().$then(function (data) {
                                $scope.educations.$refresh();
                                $scope.educationForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }

                    };

                    $scope.editEducation = function (education) {
                        Helper.enableForm($scope, true);
                        $scope.monthoptions = Helper.months();
                        var imonthIndex = Helper.months().indexOf(education.imonth);
                        var emonthIndex = Helper.months().indexOf(education.emonth);
                        $scope.education = education;
                        $scope.education.initmonth = $scope.monthoptions[imonthIndex];
                        $scope.education.endmonth = $scope.monthoptions[emonthIndex];
                        $scope.education.inityear = education.iyear;
                        $scope.education.endyear = education.eyear;

                        $scope.updateEducation = function () {
                            var isCurrent = $scope.education.currentplace;
                            $scope.education.current = 0;
                            if (isCurrent) {
                                $scope.education.current = 1;
                            }
                            $scope.education.initdate = $scope.education.initmonth + "-" + $scope.education.inityear;
                            $scope.education.enddate = $scope.education.endmonth + "-" + $scope.education.endyear;

                            education.$save().$then(function (data) {
                                $scope.educations.$refresh();
                                $scope.educationForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //delete
                    $scope.removeEducation = function (education) {
                        $scope.education = education;
                        var confirmation = MessageService.setConfirmDeleteMessage(" estudio", " ");
                        if (confirmation) {
                            education.$destroy().$then(function (data) {
                                var meta = data.$response.data;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //change status
                    $scope.changeStatus = function ($event, education) {
                        var checkbox = $event.target;
                        var action = (checkbox.checked ? true : false);

                        education.status = action;
                        education.$save().$then(function (data) {
                            $scope.educations.$refresh();
                            var meta = data.$metadata.meta;
                            MessageService.setAlertMessage($scope, meta);
                        });
                    };

                }
            });




        }
    }

}
module.exports = educationDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/education.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],18:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var experienceDirective = function(MessageService,Experience,$timeout,Helper){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/experience.html",
        restrict:"EA",
        scope:{},
        controller:function($scope,$rootScope){
            $scope.closeForm = function(){
                Helper.enableForm($scope,false);
            }
            Helper.enableForm($scope,false);
            $rootScope.$on('resumeChange',function(event,args){
                if(typeof args.resume !== "undefined") {
                    var resumeId = args.resume.id;
                    var experiences = Experience.$search({resume_id: resumeId}).$then(function (data) {
                        $scope.experiences = data;
                        if ($scope.experiences.length == 0) {
                            MessageService.setNoItemsInfoMessage($scope, " experiencias",
                                ". Pulsa el botón Nueva para crear una");
                        }

                    });
                    //new
                    $scope.newExperience = function () {
                        Helper.enableForm($scope, true);
                        var experience = Experience.$build({resume_id: resumeId, initdate: '', enddate: ''});
                        $scope.experience = experience;
                        $scope.monthoptions = Helper.months();
                        $scope.experience.initmonth = Helper.months()[0];
                        $scope.experience.endmonth = Helper.months()[0];

                        $scope.updateExperience = function () {
                            var isCurrent = $scope.experience.currentplace;
                            $scope.experience.current = 0;
                            if (isCurrent) {
                                $scope.experience.current = 1;
                            }
                            $scope.experience.initdate = $scope.experience.initmonth + "-" + $scope.experience.inityear;
                            $scope.experience.enddate = $scope.experience.endmonth + "-" + $scope.experience.endyear;

                            experience.$save().$then(function (data) {
                                $scope.experiences.$refresh();
                                $scope.experienceForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }

                    };
                    //edit
                    $scope.editExperience = function (experience) {
                        Helper.enableForm($scope, true);
                        $scope.monthoptions = Helper.months();
                        var imonthIndex = Helper.months().indexOf(experience.imonth);
                        var emonthIndex = Helper.months().indexOf(experience.emonth);
                        $scope.experience = experience;
                        $scope.experience.initmonth = $scope.monthoptions[imonthIndex];
                        $scope.experience.endmonth = $scope.monthoptions[emonthIndex];
                        $scope.experience.inityear = experience.iyear;
                        $scope.experience.endyear = experience.eyear;


                        $scope.updateExperience = function () {
                            var isCurrent = $scope.experience.currentplace;
                            $scope.experience.current = 0;
                            if (isCurrent) {
                                $scope.experience.current = 1;
                            }
                            $scope.experience.initdate = $scope.experience.initmonth + "-" + $scope.experience.inityear;
                            $scope.experience.enddate = $scope.experience.endmonth + "-" + $scope.experience.endyear;

                            experience.$save().$then(function (data) {
                                $scope.experiences.$refresh();
                                $scope.experienceForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //delete
                    $scope.removeExperience = function (experience) {
                        $scope.experience = experience;
                        var confirmation = MessageService.setConfirmDeleteMessage(" experiencia", " ");
                        if (confirmation) {
                            experience.$destroy().$then(function (data) {
                                var meta = data.$response.data;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //change status
                    $scope.changeStatus = function ($event, experience) {
                        var checkbox = $event.target;
                        var action = (checkbox.checked ? true : false);

                        experience.status = action;
                        experience.$save().$then(function (data) {
                            $scope.experiences.$refresh();
                            var meta = data.$metadata.meta;
                            MessageService.setAlertMessage($scope, meta);
                        });
                    };

                }
            });

        },
        link:function(scope,element){
            //$(element).effect("highlight", {}, 3000);
        }
    }

}
module.exports = experienceDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/experience.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],19:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var interestDirective = function(MessageService,Interest,$timeout,Helper){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/interests.html",
        restrict:"EA",
        scope:{},
        controller:function($scope,$rootScope) {
            $scope.closeForm = function(){
                Helper.enableForm($scope,false);
            }
            Helper.enableForm($scope,false);
            $rootScope.$on('resumeChange',function(event,args){
                if(typeof args.resume !== "undefined") {
                    var resumeId = args.resume.id;
                    var interests = Interest.$search({resume_id: resumeId}).$then(function (data) {
                        $scope.interests = data;
                        if ($scope.interests.length == 0) {
                            MessageService.setNoItemsInfoMessage($scope, " intereses profesionales",
                                ". Pulsa el botón Nuevo para crear uno");
                        }
                    });

                    $scope.newInterest = function () {
                        Helper.enableForm($scope, true);
                        var interest = Interest.$build({resume_id: resumeId});
                        $scope.interest = interest;

                        $scope.updateInterest = function () {
                            interest.$save().$then(function (data) {
                                $scope.interests.$refresh();
                                $scope.interestForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }

                    };

                    $scope.editInterest = function (interest) {
                        Helper.enableForm($scope, true);
                        $scope.interest = interest;

                        $scope.updateInterest = function () {

                            interest.$save().$then(function (data) {
                                $scope.interests.$refresh();
                                $scope.interestForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //delete
                    $scope.removeInterest = function (interest) {
                        $scope.interest = interest;
                        var confirmation = MessageService.setConfirmDeleteMessage(" idioma", " ");
                        if (confirmation) {
                            interest.$destroy().$then(function (data) {
                                var meta = data.$response.data;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //change status
                    $scope.changeStatus = function ($event, interest) {
                        var checkbox = $event.target;
                        var action = (checkbox.checked ? true : false);

                        interest.status = action;
                        interest.$save().$then(function (data) {
                            $scope.interests.$refresh();
                            var meta = data.$metadata.meta;
                            MessageService.setAlertMessage($scope, meta);
                        });
                    };

                }
            });




        }
    }

}
module.exports = interestDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/interest.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],20:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var languageDirective = function(MessageService,Language,$timeout,Helper){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/languages.html",
        restrict:"EA",
        scope:{},
        controller:function($scope,$rootScope) {
            $scope.closeForm = function(){
                Helper.enableForm($scope,false);
            }
            Helper.enableForm($scope,false);
            $rootScope.$on('resumeChange',function(event,args){
                if(typeof args.resume !== "undefined") {
                    var resumeId = args.resume.id;
                    var languages = Language.$search({resume_id: resumeId}).$then(function (data) {
                        $scope.languages = data;
                        if ($scope.languages.length == 0) {
                            MessageService.setNoItemsInfoMessage($scope, " idiomas",
                                ". Pulsa el botón Nuevo para crear uno");
                        }
                    });

                    $scope.newLanguage = function () {
                        Helper.enableForm($scope, true);
                        var language = Language.$build({resume_id: resumeId});
                        $scope.language = language;

                        $scope.updateLanguage = function () {
                            language.$save().$then(function (data) {
                                $scope.languages.$refresh();
                                $scope.languageForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }

                    };

                    $scope.editLanguage = function (language) {
                        Helper.enableForm($scope, true);
                        $scope.language = language;

                        $scope.updateLanguage = function () {

                            language.$save().$then(function (data) {
                                $scope.languages.$refresh();
                                $scope.languageForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //delete
                    $scope.removeLanguage = function (language) {
                        $scope.language = language;
                        var confirmation = MessageService.setConfirmDeleteMessage(" idioma", " ");
                        if (confirmation) {
                            language.$destroy().$then(function (data) {
                                var meta = data.$response.data;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //change status
                    $scope.changeStatus = function ($event, language) {
                        var checkbox = $event.target;
                        var action = (checkbox.checked ? true : false);

                        language.status = action;
                        language.$save().$then(function (data) {
                            $scope.languages.$refresh();
                            var meta = data.$metadata.meta;
                            MessageService.setAlertMessage($scope, meta);
                        });
                    };

                }
            });




        }
    }

}
module.exports = languageDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/language.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],21:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var resumeDirective = function(MessageService,Resume,$timeout,ResumeHelper){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/resume.html",
        restrict:"EA",
        scope:{

        },
        controller:function($scope,$rootScope){
            $rootScope.$on('noResumeFound',function(){
                MessageService.setNoItemsInfoMessage($scope, " résumés",
                    ". Pulsa el botón Nuevo para crear");
            })
            $rootScope.$on('resumeChange',function(event,args){
                if(typeof args.resume !== "undefined")
                {
                    //console.log(args);
                    var resumes = Resume.$search().$then(function (data) {
                        $scope.resumes = data;

                        if ($scope.resumes.length == 0) {
                            MessageService.setNoItemsInfoMessage($scope, " résumés",
                                ". Pulsa el botón Nuevo para crear uno");
                        }
                    });


                    var resume = Resume.$find(args.resume.id);
                    $scope.resume = resume;
                    $scope.updateResume = function () {
                        $scope.resume.$save().$then(function (data) {
                            var meta = data.$metadata.meta;
                            MessageService.setAlertMessage($scope, meta);
                            $scope.showResumeForm = false;
                        });
                    }
                }
            });

            $scope.newResume = function(){
                $scope.showedResumeForm = true;
                $rootScope.$emit("newResume");
            };

            $scope.deleteResume = function(resume){
                var confirmation = MessageService.setConfirmDeleteMessage(" résumé",". Todos las secciones del résumé serán eliminadas también...");
                if(confirmation) {
                    resume.$destroy().$then(function (data) {

                        var meta = data.$response.data;
                        MessageService.setAlertMessage($scope, meta);
                        $timeout(function () {
                            location.href = "/admin/resume"
                        }, 2000);

                    });
                }
            }

            $scope.publication = function(resume, toBePublished){
                if(toBePublished) {
                    resume.active = 1;
                    //publish resume
                    ResumeHelper.publishResume($scope,$rootScope,"/publish_resume/"+resume.id)
                }  else{
                    resume.active = 0;
                    resume.$save().$then(function(data){
                        var meta = data.$metadata.meta;
                        MessageService.setAlertMessage($scope,meta);
                    });
                }

            }

            $scope.cloneResume = function(resume){
                ResumeHelper.cloneResume($scope,$rootScope,"/clone_resume/"+resume.id);
            }

            $scope.showResumeEditForm = function(resume){
                $scope.showedEditResumeForm = true;
            }



            $scope.closeAfterUpdate = function(){
                $scope.showedEditResumeForm = false;
            }

            $scope.closeAfterCreate = function(){
                $scope.showedResumeForm = false;
            }

            /*$scope.$watch('$viewContentLoaded', function()
            {
                console.log("loading");
            });*/

        }
    }
}

module.exports = resumeDirective;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/resumedirective.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],22:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var resumeEditDirective = function(MessageService,Resume,$timeout){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/resumeeditform.html",
        restrict:"EA",
        scope:{
            resume:"=res",
            close:"&close"
        },
        controller:function($scope,$rootScope){
            $scope.closeForm = function(){
                $scope.close();
            }

            $scope.saveResume = function(){

                 this.resume.$save().$then(function(data){
                     var meta = data.$metadata.meta;
                     MessageService.setAlertMessage($scope,meta);
                     $rootScope.$emit("updateResumeList");
                     $rootScope.$emit("resumeChange",data.$response.data);
                     $timeout(function(){
                         $scope.close(data);
                     },4000);

                     //$scope.$parent.showedEditResumeForm = false;
                 });
            }

        }
    }
}

module.exports = resumeEditDirective;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/resumeeditform.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],23:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var resumeCreationDirective = function(MessageService,Resume,$timeout){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/resumeform.html",
        restrict:"EA",
        scope:{
            close:"&close"
        },
        controller:function($scope,$rootScope){
            $scope.closeForm = function(){
                $scope.close();
            }

            $rootScope.$on("newResume",function(){
                var resume = Resume.$build();
                $scope.resume = resume;

                $scope.createResume = function(){
                    resume.$save().$then(function(data){
                        var meta = data.$metadata.meta;
                        MessageService.setAlertMessage($scope,meta);
                        $rootScope.$emit("updateResumeList");
                        $rootScope.$emit("resumeChange",data.$response.data);
                        $timeout(function(){
                            $scope.close(data);
                            //$scope.$destroy();
                        },4000);
                    });

                }

            });


        }
    }
}

module.exports = resumeCreationDirective;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/resumeform.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],24:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var contentSelector = function(MessageService){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/resume_selector.html",
        restrict:"EA",
        scope:{},
        transclude:true,
        controller:function($scope,$timeout){
            $scope.infoResumeSelector = MessageService.get('resumeselector_info').message;
            //TODO get sections according to user resume

            var sections = [
                {alias:"Experiencia",link:"experience"},
                {alias:"Estudios",link:"study"},
                {alias:"Habilidades / Conocimientos",link:"skills"},
                {alias:"Idiomas",link:"languages"},
                {alias:"Intereses Profesionales",link:"personal"}
            ];
            $scope.sections = sections;


        }
    }
}

module.exports = contentSelector;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/resumeselector.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],25:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var sectionsDirective = function(Resume){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/sections.html",
        restrict:"EA",
        scope:{},
        controller:function($scope,$rootScope){
            $rootScope.$on('resumeChange',function(event,args) {
                if (typeof args.resume !== "undefined"){
                    var resume = Resume.$find(args.resume.id);
                    $scope.resume = resume.$resolve();
                 }
            });
        },
        link:function(scope,element){
            //$(element).effect("highlight", {}, 3000);
        }
    }

}
module.exports = sectionsDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/sections.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],26:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var skillDirective = function(MessageService,Skill,$timeout,Helper){
    return {
        templateUrl:"../../js/admin/angular/templates/resume/skills.html",
        restrict:"EA",
        scope:{},
        controller:function($scope,$rootScope) {
            $scope.closeForm = function(){
                Helper.enableForm($scope,false);
            }
            Helper.enableForm($scope,false);
            $rootScope.$on('resumeChange',function(event,args){
                if(typeof args.resume !== "undefined") {
                    var resumeId = args.resume.id;
                    var skills = Skill.$search({resume_id: resumeId}).$then(function (data) {
                        $scope.skills = data;
                        if ($scope.skills.length == 0) {
                            MessageService.setNoItemsInfoMessage($scope, " habilidades",
                                ". Pulsa el botón Nueva para crear una");
                        }
                    });

                    $scope.newSkill = function () {
                        Helper.enableForm($scope, true);
                        var skill = Skill.$build({resume_id: resumeId});
                        $scope.skill = skill;

                        $scope.updateSkill = function () {
                            skill.$save().$then(function (data) {
                                $scope.skills.$refresh();
                                $scope.skillForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }

                    };

                    $scope.editSkill = function (skill) {
                        Helper.enableForm($scope, true);
                        $scope.skill = skill;

                        $scope.updateSkill = function () {

                            skill.$save().$then(function (data) {
                                $scope.skills.$refresh();
                                $scope.skillForm.$resetForm();
                                Helper.enableForm($scope, false);
                                var meta = data.$metadata.meta;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //delete
                    $scope.removeSkill = function (skill) {
                        $scope.skill = skill;
                        var confirmation = MessageService.setConfirmDeleteMessage(" habilidad", " ");
                        if (confirmation) {
                            skill.$destroy().$then(function (data) {
                                var meta = data.$response.data;
                                MessageService.setAlertMessage($scope, meta);
                            });
                        }
                    };

                    //change status
                    $scope.changeStatus = function ($event, skill) {
                        var checkbox = $event.target;
                        var action = (checkbox.checked ? true : false);

                        skill.status = action;
                        skill.$save().$then(function (data) {
                            $scope.skills.$refresh();
                            var meta = data.$metadata.meta;
                            MessageService.setAlertMessage($scope, meta);
                        });
                    };

                }
            });




        }
    }

}
module.exports = skillDirective;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/resume/skill.js","/resources/assets/js/admin/angular/directives/resume")

},{"_process":7,"buffer":3}],27:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleableBasic = function(SaleableService){
    return {
        restrict:"EA",
        templateUrl:"../../js/admin/angular/templates/saleable_basic.html",
        replace:true,
        controller:"saleableBasicCtrl",
        scope:{}

    }
}
module.exports = saleableBasic;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/saleablebasic.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],28:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleableDetails = function($templateCache,$compile,$rootScope){
    return {
        transclude: 'element'    ,
        restrict:"EA",
        templateUrl:"../../js/admin/angular/templates/saleable_details.html",
        replace:true,

        controller:"SaleableDetailCtrl",
        link:function(scope,$element,$attrs,$ctrl,transclude){
            $rootScope.$on("newBasicDetail",function(event) {
                $('#tabsf a[href="#pilltab1"]').tab('show');
            })

        }
    }
}
module.exports = saleableDetails;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/saleabledetails.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],29:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleableBasic = function(){
    return {
        restrict:"EA",
        templateUrl:"../../js/admin/angular/templates/saleable_details_list.html",
        replace:true,
        scope:{saleable:"="},
        controller:"saleableAllDetailsCtrl"

    }
}
module.exports = saleableBasic;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/saleabledetailslist.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],30:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleablePrices = function(){
    return {
        restrict:"EA",
        templateUrl:"../../js/admin/angular/templates/saleable_prices_list.html",
        replace:true,
        scope:{saleable:"="},
        controller:"saleablePriceCtrl"

    }
}
module.exports = saleablePrices
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/directives/saleablepriceslist.js","/resources/assets/js/admin/angular/directives")

},{"_process":7,"buffer":3}],31:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){

var homeController = function($scope,UserService,UserContentType){
    //console.log($scope);
    $scope.showAlert = true;
    $scope.noProfileMsge = 'Este es tu primera sesión en este panel de control. '+
    'Por favor, a continuación completa tus datos personales.'+
        'Si no deseas actualizar tus datos, puedes hacerlo en otro momento desde [Perfil] y'+
    'continuar con las otras opciones de este panel de control.';



}

module.exports = homeController;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/homecontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],32:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var resumeController = function($scope,$rootScope,ResumeHelper,MessageService){
    ResumeHelper.dropDownList('/resume_drop_list',$scope);
    ResumeHelper.getResume($scope,$rootScope,'/publishedresume');



    $rootScope.$on("updateResumeList",function(){
        ResumeHelper.dropDownList('/resume_drop_list',$scope);
    });

    $scope.getResume = function(id){
        var data = {
          resume:{
              id:id
          }
        };
        //console.log(data);
        $rootScope.$emit("resumeChange",data);
    }

}

module.exports = resumeController;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/resumecontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],33:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleableAllDetails = function($scope,$rootScope,SaleableDetailsService,MessageService,FileProcessor){
    $scope.onFileSelect = function($files) {
        $scope.files = $files;
        console.log($scope.files);
    };


    /*var reset = function(){
        $scope.saleableDetailForm.$setPristine();
        $scope.detail = angular.copy({});
    }*/

    var saleable_id = $scope.saleable.id;
    var details = SaleableDetailsService.$search({saleable_id:saleable_id}).$then(function(data){
        var items_number = data.length;
        console.log(items_number);
        if(items_number==0){
            //var linkToNew = ". Crea ya uno nuevo!";
            MessageService.setNoItemsInfoMessage($scope,"detalles"," .Crea uno nuevo!");
        }
    }).$resolve();
    $scope.saleable.details = details;

    var detail = SaleableDetailsService.$build();
    detail.saleable_id = saleable_id;
    detail.type = 0;
    $scope.detail = detail;


    $scope.updateDetail = function(){
        detail.$save().$then(function(data){
            var meta = data.$metadata.meta;
            MessageService.setAlertMessage($scope,meta);
            details.$refresh();
        });
    }

    $scope.editDetail=function(detail){
        //download detail icon to load
        FileProcessor.download($scope,'/saleabledetail/'+detail.id+'/icon');
        //$scope.descriptiveIcon = "";
        $scope.showDetailForm = true;
        $scope.detail = detail;
        $scope.updateDetail = function(){
            detail.$save().$then(function(data){
                var meta = data.$metadata.meta;
                MessageService.setAlertMessage($scope,meta);
                //upload file
                FileProcessor.upload($scope,'/uploadSaleableDetailIcon',data.id);

            });
        }
    }

    $scope.newDetail = function(){
        $scope.showDetailForm = true;

        //$scope.saleableDetailForm.$setPristine();
        var detail = SaleableDetailsService.$build();
        detail.saleable_id = saleable_id;
        detail.type = 0;
        $scope.detail = detail;

        $scope.updateDetail = function(){
            detail.$save().$then(function(data){
                var meta = data.$metadata.meta;
                MessageService.setAlertMessage($scope,meta);
                details.$refresh();
                FileProcessor.upload($scope,'/uploadSaleableDetailIcon',data.id);
                //$scope.showDetailForm = false;

            });
        }
    }

    $scope.removeDetail = function(detail){
        var confirmation = MessageService.setConfirmDeleteMessage("detalle"," ");
        if(confirmation){
            detail.$destroy().$then(function(data){
                var meta = data.$response.data;
                MessageService.setAlertMessage($scope,meta);
                //$scope.saleableDetailForm.$setPristine();

                var detail = SaleableDetailsService.$build();
                detail.saleable_id = saleable_id;
                detail.type = 0;
                $scope.detail = detail;
                $scope.updateDetail = function(){
                    detail.$save().$then(function(data){
                        var meta = data.$metadata.meta;
                        MessageService.setAlertMessage($scope,meta);
                        details.$refresh();
                        //$rootScope.$emit('saleableUpdated');
                    });
                }

            });
        }
    }






}

module.exports = saleableAllDetails;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/saleablealldetailscontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],34:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleableController = function($scope,$rootScope,$timeout,
                                  SaleableService,MessageService){
    $scope.master = {};

    var saleables = SaleableService.$search().$then(function(data){
        //console.log(data.length);
        var items_number = data.length;
        if(items_number==0){
            var linkToNew = ". Crea ya uno nuevo!";
            MessageService.setNoItemsInfoMessage($scope,"servicios o productos",linkToNew);

        }/*else{
            $scope.saleables = data;

        }*/
    });

    $scope.saleables = saleables;

    $scope.removeSaleable = function(saleable){
        var confirmation = MessageService.setConfirmDeleteMessage(" servicio o producto"," Se destruirán también todos sus detalles.");
        if(confirmation){
            saleable.$destroy().$then(function(data){
                var meta = data.$response.data;
                MessageService.setAlertMessage($scope,meta);
            });
        }
    }

    //Details
    //new: create a new details "wizard" instance
    $scope.newDetails = function(){
        $scope.showDetails = true;
        $rootScope.$broadcast('newDetails');
    }
    //edit: wizard, edit fashion
    $scope.editDetails = function(saleable){
        $scope.showDetails = true;
        $rootScope.$broadcast('editDetails',saleable);
    }

    //close wizard
    $scope.closeWizard = function(){
        $scope.showDetails = false;
        console.log("x");
    }


}
module.exports = saleableController;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/saleablecontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],35:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleableDetailCtrl = function($scope,$rootScope,SaleableService,MessageService,$element,$compile){

    $rootScope.$on('newDetails',function(){

        $scope.saleable = {};
        $rootScope.$broadcast('newBasicDetail');
    });

    $rootScope.$on('saleableCreated',function(event,data){
        $scope.saleables.$refresh();
        $scope.saleable = data;
    });
    $rootScope.$on('editDetails',function(event,saleable){
        $scope.saleable = saleable;
        $scope.saleables.$refresh();
        $rootScope.$broadcast('editBasicDetail',saleable);
    })


}

module.exports = saleableDetailCtrl;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/saleabledetailcontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],36:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var saleablePrices = function($scope,$rootScope,SaleablePriceService,MessageService){

    /*var reset = function(){
        $scope.saleablePriceForm.$setPristine();
        $scope.price = angular.copy({});
    }*/

    var saleable_id = $scope.saleable.id;
    var prices = SaleablePriceService.$search({saleable_id:saleable_id}).$then(function(data){
        var items_number = data.length;
        if(items_number==0){
            //var linkToNew = ". Crea ya uno nuevo!";
            MessageService.setNoItemsInfoMessage($scope,"precios"," .Crea uno nuevo!");
        }
    }).$resolve();

    $scope.saleable.prices = prices;

    var price = SaleablePriceService.$build();
    price.saleable_id = saleable_id;
    $scope.price = price;

    $scope.updatePrice = function(){
        price.$save().$then(function(data){
            var meta = data.$metadata.meta;
            MessageService.setAlertMessage($scope,meta);
            prices.$refresh();
        });
    }

    $scope.editPrice=function(price){
        $scope.showPriceForm = true;
        $scope.price = price;
        $scope.updatePrice = function(){
            price.$save().$then(function(data){
                var meta = data.$metadata.meta;
                MessageService.setAlertMessage($scope,meta);
            });
        }
    }

    $scope.newPrice = function(){
        $scope.showPriceForm = true;
        //$scope.saleablePriceForm.$setPristine();
        var price = SaleablePriceService.$build();
        price.saleable_id = saleable_id;
        $scope.price = price;

        $scope.updatePrice = function(){
            price.$save().$then(function(data){
                var meta = data.$metadata.meta;
                MessageService.setAlertMessage($scope,meta);
                prices.$refresh();
                $scope.showPriceForm = false;
            });
        }
    }

    $scope.removePrice = function(price){
        var confirmation = MessageService.setConfirmDeleteMessage(" precio"," ");
        if(confirmation){
            price.$destroy().$then(function(data){
                var meta = data.$response.data;

                MessageService.setAlertMessage($scope,meta);
                //s$scope.saleablePriceForm.$setPristine();

                var price = SaleablePriceService.$build();
                price.saleable_id = saleable_id;
                $scope.price = price;
                $scope.updatePrice = function(){
                    price.$save().$then(function(data){
                        var meta = data.$metadata.meta;
                        MessageService.setAlertMessage($scope,meta);
                        prices.$refresh();
                        $scope.showPriceForm = false;
                    });
                }

            });
        }
    }






}

module.exports = saleablePrices;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/saleablepricescontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],37:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){

var bioService = function(restmod){
    return restmod.model('/bio').mix('DefaultPacker',{
     $config:{jsonMeta: '.'}

     });
}
module.exports = bioService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/biographyservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],38:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var educationService = function(restmod){
    return restmod.model('/education').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = educationService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/education.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],39:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var experienceService = function(restmod){
    return restmod.model('/experience').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = experienceService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/experience.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],40:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var fileProcessor = function($upload,$http,MessageService){
    return {
        upload:function(scope,path,data){

                var files = scope.files[0];
                var numberOfFiles = scope.files.length;
                if(numberOfFiles > 1 && numberOfFiles < 8) {
                    files = scope.files;
                }else if(numberOfFiles > 7){
                    console.log("no cargue asiiiii");
                }
                //for (var i = 0; i < scope.files.length; i++) {
                //var file = scope.files[i];
                var file = scope.files;
                scope.upload = $upload.upload({
                    url: path, //upload.php script, node.js route, or servlet url
                    method: 'POST', //or 'PUT',
                    file: files,
                    data: data
                }).progress(function(evt) {
                    scope.getPercentage = function () {
                        return parseInt(100.0 * evt.loaded / evt.total);
                    }
                }).success(function(data) {
                    scope.descriptiveIcon = data.img;
                }).error(function(data){
                    MessageService.setServerValidationMessage(scope);
                    scope.errors = data;
                });


        },
        download:function(scope,path){
                $http.get(path).success(function(data){
                    scope.descriptiveIcon = data.img;
                })
                .error(function(data){
                    console.log(data);
                });

        }


    }
}
module.exports = fileProcessor;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/fileprocessor.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],41:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var numberFormat = function(){
    return function(_value) {
        var numberFormatted = parseFloat(_value);
        return numberFormatted;
    }
}
module.exports = numberFormat;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/formatfilterservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],42:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var helperService = function(){
    return {
        months:function(){
            var months = ["enero","febrero","marzo","abril",
                "mayo","junio","julio","agosto",
                "septiembre","octubre","noviembre","diciembre"];
            return months;
        },
        enableForm:function(scope,status){
            if(status){
                scope.gridShown = false;
                scope.formShown = true;
            }else{
                scope.gridShown = true;
                scope.formShown = false;
            }
        },
        getCheckButtonStatus:function(event){
            var checkbox = event.target;
            var action = (checkbox.checked ? true: false);
            return action;
        }
    }
}
module.exports = helperService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/helpers.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],43:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var interestService = function(restmod){
    return restmod.model('/interest').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = interestService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/interest.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],44:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var languageService = function(restmod){
    return restmod.model('/language').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = languageService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/language.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],45:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var messageService = function(Messages,$timeout){
    return {
        get:function (name) {
            return Messages.filter(function( obj ) {
            // coerce both obj.id and id to numbers
            // for val & type comparison
                //return +obj.name === +name;
                return obj.name === name;
            })[ 0 ];
        },
        setAlertMessage:function(scope,data){
            scope.ShowResultAlert = true;
            scope.result = data;
            $timeout(function(){
                scope.ShowResultAlert = false;
            },4000);
        },
        setServerValidationMessage:function(scope){
            scope.ShowServerErrors = true;
            scope.result = "Los datos no se pudieron guardar"+
                           " debido a los siguientes errores. Por favor corrígelos.";
            $timeout(function(){
                scope.ShowServerErrors = false;
            },5000);
        },
        setNoItemsInfoMessage:function(scope,datatype,additional){
            scope.showNoItemsAlert = true;
            scope.result = "No se han encontrado "+datatype+additional;
            $timeout(function(){
                scope.showNoItemsAlert = false;
            },8000);
        },
        setConfirmDeleteMessage:function(item, additional){
            return confirm("Realmente deseas eliminar este/a"+item+"?. "+additional+"");
        }

    }
};
module.exports = messageService;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/messageservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],46:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var newPassword = function($http){
    //$http.post();
    return {
        updatePassword:function(userId,data){
            return $http.post('/admin/newpassword/'+userId, data);
        }
    }

};

module.exports = newPassword;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/newpasswordservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],47:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){

var profileService = function(restmod){
    return restmod.model('/profile').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = profileService;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/profileservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],48:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var resumeHelper = function($http,MessageService){

    return {
        dropDownList:function(path,scope){
            $http.get(path).success(function(data){
                scope.resumes = data.resumes;
                scope.resume = scope.resumes[5];
            }).error();
        },
        getResume:function(scope,rootScope,path){
            $http.get(path).then(function(data){
                var resume = data.data.resume;

                if(resume === null) {
                    rootScope.$emit("noResumeFound");
                }else{
                    rootScope.$emit("resumeChange", data.data);
                }
            });

        },
        publishResume:function(scope,rootScope,path){
            $http.post(path).success(function(data){
                var meta = data.meta;
                MessageService.setAlertMessage(scope,meta);
            }).error();

        },
        cloneResume:function(scope,rootScope,path){
            $http.post(path).success(function(data){
                rootScope.$emit("resumeChange",data);
                var meta = data.meta;
                MessageService.setAlertMessage(scope,meta);

            }).error();
        }
        /*unpublishResume:function(scope,rootScope,path){
            $http.post(path).success(function(data){
                console.log("unpu");
            }).error();
        }*/
    }
}

module.exports = resumeHelper;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/resumehelper.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],49:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var resumeService = function(restmod){
    return restmod.model('/resume').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = resumeService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/resumeservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],50:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var seleableDetails = function(restmod){
    return restmod.model('/saleabledetail').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = seleableDetails;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/saleabledetails.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],51:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var seleablePrice = function(restmod){
    return restmod.model('/saleableprice').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    }).mix({
        ammount: {decode:'NumberFormat'},
        discount:{decode:'NumberFormat'}
    });
}
module.exports = seleablePrice;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/saleableprice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],52:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var seleableService = function(restmod){
    return restmod.model('/saleable').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = seleableService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/saleableservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],53:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var skillService = function(restmod){
    return restmod.model('/skill').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = skillService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/skill.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],54:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var thePacker =  function() {

    function MyPacker(_model) {
        //this.meta = _model.$getProperty('jsonMeta', 'meta');
        console.log(_model);
        // you can set some model specific behaviour here, like the property being extracted.
    }

    MyPacker.prototype = {
        unPack: function(_rawData, _record) {
            console.log(_rawData);
            _record.$metadata = _rawData; // store metadata associated with request
            return _rawData.myProp; // extract property from request data.
        },
        unPackMany: function(_rawData, _collection) {

            _collection.$metadata = _rawData; // store metadata associated with request
            return _collection.myProp; // extract property from request data.
        }
    };

    return MyPacker;
};
module.exports = thePacker;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/thepacker.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],55:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var userContentType = function(restmod){
    return restmod.model('/usercontenttype').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}

module.exports = userContentType;



}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/usercontenttypeservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],56:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){

var userService = function(restmod){
    return restmod.model('/user').mix('DefaultPacker',{
        $config:{jsonMeta: '.'}
    });
}
module.exports = userService;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/services/userservice.js","/resources/assets/js/admin/angular/services")

},{"_process":7,"buffer":3}],57:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var userController = function($scope,$timeout,UserService, ProfileService,MessageService,NewPassword){

    var user = UserService.$find(0);
    var profile = ProfileService.$find(0);
    $scope.profile = profile.$fetch();
    $scope.user = user.$fetch();

    $scope.updateUser = function(){

        user.$save().$then(function(data){
            var meta = data.$metadata.meta;
            MessageService.setAlertMessage($scope,meta);
        },function(data){
            $scope.errors = data.$response.data;
            MessageService.setServerValidationMessage($scope);
        });
    }

    $scope.updatePassword = function(){
        var changedPassword = {
          password:$scope.password
        };
        var newPassword = NewPassword.updatePassword(user.id,changedPassword);
        newPassword.success(function(data){
            var meta = data.meta;
            MessageService.setAlertMessage($scope,meta);
            $timeout(function(){
                $scope.password = "";
                $scope.showPasswordChange = false;
            },4000);
        });
    }
    $scope.updatePersonalInfo = function(){
        profile.$save().$then(function(data){
            var meta = data.$metadata.meta;
            MessageService.setAlertMessage($scope,meta);
        },function(data){
            $scope.errors = data.$response.data;
            MessageService.setServerValidationMessage($scope);
        });
    }
    $scope.updateSocialInfo = function(){
        profile.$save().$then(function(data){
            var meta = data.$metadata.meta;
            MessageService.setAlertMessage($scope,meta);
        },function(data){
            $scope.errors = data.$response.data;
            MessageService.setServerValidationMessage($scope);
        });
    }

}

module.exports = userController;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/admin/angular/usercontroller.js","/resources/assets/js/admin/angular")

},{"_process":7,"buffer":3}],58:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
var stc_messages = function () {
    return [

        {
            "code": 701,
            "name":"contentselector_info",
            "message": 'Activa las opciones que quieres que aparezcan en tu sitio Web.'+
            'Por ejemplo, si no es tu objetivo mostrar Servicios a tus visitantes, puedes desactivar la casilla "Servicios" y ese contenido no se mostrará.',
            "type": "info"
        },
        {
            "code": 702,
            "name":"resumeselector_info",
            "message": 'Pulsa la opción para ir a la sección del Résumé indicada',
            "type": "info"
        },

    ]

};
module.exports = stc_messages;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/js/config/messages.js","/resources/assets/js/config")

},{"_process":7,"buffer":3}],59:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/*
 AngularJS v1.3.13
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(r,f,s){'use strict';f.module("ngMessages",[]).directive("ngMessages",["$compile","$animate","$templateRequest",function(q,k,l){return{restrict:"AE",controller:function(){this.$renderNgMessageClasses=f.noop;var b=[];this.registerMessage=function(d,a){for(var c=0;c<b.length;c++)if(b[c].type==a.type){if(d!=c){var g=b[d];b[d]=b[c];d<b.length?b[c]=g:b.splice(0,c)}return}b.splice(d,0,a)};this.renderMessages=function(d,a){d=d||{};var c;f.forEach(b,function(b){var e;if(e=!c||a)e=d[b.type],e=null!==
e&&!1!==e&&e;e?(b.attach(),c=!0):b.detach()});this.renderElementClasses(c)}},require:"ngMessages",link:function(b,d,a,c){c.renderElementClasses=function(b){b?k.setClass(d,"ng-active","ng-inactive"):k.setClass(d,"ng-inactive","ng-active")};var g=f.isString(a.ngMessagesMultiple)||f.isString(a.multiple),e;b.$watchCollection(a.ngMessages||a["for"],function(b){e=b;c.renderMessages(b,g)});(a=a.ngMessagesInclude||a.include)&&l(a).then(function(a){var h;a=f.element("<div/>").html(a);f.forEach(a.children(),
function(a){a=f.element(a);h?h.after(a):d.prepend(a);h=a;q(a)(b)});c.renderMessages(e,g)})}}}]).directive("ngMessage",["$animate",function(f){return{require:"^ngMessages",transclude:"element",terminal:!0,restrict:"AE",link:function(k,l,b,d,a){for(var c,g,e=l[0],n=e.parentNode,h=0,p=0;h<n.childNodes.length;h++){var m=n.childNodes[h];if(8==m.nodeType&&0<=m.nodeValue.indexOf("ngMessage")){if(m===e){c=p;break}p++}}d.registerMessage(c,{type:b.ngMessage||b.when,attach:function(){g||a(k,function(a){f.enter(a,
null,l);g=a})},detach:function(a){g&&(f.leave(g),g=null)}})}}}])})(window,window.angular);
//# sourceMappingURL=angular-messages.min.js.map

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/angular-messages/angular-messages.min.js","/resources/assets/vendor/angular-messages")

},{"_process":7,"buffer":3}],60:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/**
 * API Bound Models for AngularJS
 * @version v1.1.7 - 2015-01-06
 * @link https://github.com/angular-platanus/restmod
 * @author Ignacio Baixas <ignacio@platan.us>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

(function(angular, undefined) {
'use strict';
/**
 * Angular inflection library
 * @version v0.2.0 - 2014-08-22
 * @link https://github.com/platanus/angular-inflector
 * @author Ignacio Baixas <ignacio@platan.us>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

(function(angular, undefined) {
angular.module('platanus.inflector', [])
  /**
   * @class inflectorProvider
   *
   * @description
   *
   * The inflectorProvider exposes inflector configuration options, mainly related to locales.
   */
  .provider('inflector', [function () {

    var activeLocale = 'en', localeMap = {
      /**
       * English transformation rules.
       *
       * Taken from https://code.google.com/p/inflection-js/source/browse/trunk/inflection.js
       */
      en: {
        uncountable: [
          'music', 'art', 'love', 'happiness', 'advice', 'furniture', 'luggage',
          'sugar', 'butter', 'water', 'electricity', 'gas', 'power', 'currency',
          'equipment', 'information', 'rice', 'money', 'species', 'series',
          'fish', 'sheep', 'moose', 'deer', 'news'
        ],

        plural: [
          [new RegExp('(m)an$', 'gi'),                 '$1en'],
          [new RegExp('(pe)rson$', 'gi'),              '$1ople'],
          [new RegExp('(child)$', 'gi'),               '$1ren'],
          [new RegExp('^(ox)$', 'gi'),                 '$1en'],
          [new RegExp('(ax|test)is$', 'gi'),           '$1es'],
          [new RegExp('(octop|vir)us$', 'gi'),         '$1i'],
          [new RegExp('(alias|status)$', 'gi'),        '$1es'],
          [new RegExp('(bu)s$', 'gi'),                 '$1ses'],
          [new RegExp('(buffal|tomat|potat)o$', 'gi'), '$1oes'],
          [new RegExp('([ti])um$', 'gi'),              '$1a'],
          [new RegExp('sis$', 'gi'),                   'ses'],
          [new RegExp('(?:([^f])fe|([lr])f)$', 'gi'),  '$1$2ves'],
          [new RegExp('(hive)$', 'gi'),                '$1s'],
          [new RegExp('([^aeiouy]|qu)y$', 'gi'),       '$1ies'],
          [new RegExp('(x|ch|ss|sh)$', 'gi'),          '$1es'],
          [new RegExp('(matr|vert|ind)ix|ex$', 'gi'),  '$1ices'],
          [new RegExp('([m|l])ouse$', 'gi'),           '$1ice'],
          [new RegExp('(quiz)$', 'gi'),                '$1zes'],
          [new RegExp('s$', 'gi'),                     's'],
          [new RegExp('$', 'gi'),                      's']
        ],

        singular: [
          [new RegExp('(m)en$', 'gi'),                                                       '$1an'],
          [new RegExp('(pe)ople$', 'gi'),                                                    '$1rson'],
          [new RegExp('(child)ren$', 'gi'),                                                  '$1'],
          [new RegExp('([ti])a$', 'gi'),                                                     '$1um'],
          [new RegExp('((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$','gi'), '$1$2sis'],
          [new RegExp('(hive)s$', 'gi'),                                                     '$1'],
          [new RegExp('(tive)s$', 'gi'),                                                     '$1'],
          [new RegExp('(curve)s$', 'gi'),                                                    '$1'],
          [new RegExp('([lr])ves$', 'gi'),                                                   '$1f'],
          [new RegExp('([^fo])ves$', 'gi'),                                                  '$1fe'],
          [new RegExp('([^aeiouy]|qu)ies$', 'gi'),                                           '$1y'],
          [new RegExp('(s)eries$', 'gi'),                                                    '$1eries'],
          [new RegExp('(m)ovies$', 'gi'),                                                    '$1ovie'],
          [new RegExp('(x|ch|ss|sh)es$', 'gi'),                                              '$1'],
          [new RegExp('([m|l])ice$', 'gi'),                                                  '$1ouse'],
          [new RegExp('(bus)es$', 'gi'),                                                     '$1'],
          [new RegExp('(o)es$', 'gi'),                                                       '$1'],
          [new RegExp('(shoe)s$', 'gi'),                                                     '$1'],
          [new RegExp('(cris|ax|test)es$', 'gi'),                                            '$1is'],
          [new RegExp('(octop|vir)i$', 'gi'),                                                '$1us'],
          [new RegExp('(alias|status)es$', 'gi'),                                            '$1'],
          [new RegExp('^(ox)en', 'gi'),                                                      '$1'],
          [new RegExp('(vert|ind)ices$', 'gi'),                                              '$1ex'],
          [new RegExp('(matr)ices$', 'gi'),                                                  '$1ix'],
          [new RegExp('(quiz)zes$', 'gi'),                                                   '$1'],
          [new RegExp('s$', 'gi'),                                                           '']
        ]
      }
    };

    // helper function used by singularize and pluralize
    function applyRules(_string, _ruleSet, _skip) {

      if(_skip.indexOf(_string.toLowerCase()) === -1) {
        var i = 0, rule;
        while(rule = _ruleSet[i++]) {
          if(_string.match(rule[0])) {
            return _string.replace(rule[0], rule[1]);
          }
        }
      }

      return _string;
    }

    return {

      /**
       * @memberof inflectorProvider#
       *
       * @description
       *
       * Registers a new locale, see the default english locale implementation for information about the required structure.
       *
       * @param {string} _locale Locale name
       * @param {object} _def Locale definition
       */
      registerLocale: function(_locale, _def) {
        localeMap[_locale] = _def;
      },

      /**
       * @memberof inflectorProvider#
       *
       * @description
       *
       * Sets the default locale, defaults to 'en'
       *
       * @param {string} _locale Locale name
       */
      setLocale: function(_locale) {
        activeLocale = _locale;
      },

      /**
       * @class inflector
       *
       * @description
       *
       * The inflector service provides a set of string transformation methods.
       */
      $get: ['$log', function($log) {

        function loadRulesFor(_locale) {
          _locale = _locale || activeLocale;
          var rules = localeMap[_locale];
          if(!rules) $log.warn('Invalid inflector locale ' + _locale);
          return rules;
        }

        return {

          /**
           * @memberof inflector#
           *
           * @description
           *
           * Transform a string to camelcase, removing every space, dash and underscore
           *
           * @param {string} _string String to transform
           * @param {boolean} _constant If set to false, first letter is not uppercased, defaults to false.
           * @return {string} The transformed string
           */
          camelize: function(_string, _constant) {
            if (typeof _string !== 'string') return _string;
            return _string.replace(/(?:^[-_\s]*|[-_\s]+)([A-Z\d])/gi, function (match, _first, _index) {
              return (!_constant && _index === 0) ? _first : _first.toUpperCase();
            });
          },

          /**
           * @memberof inflector#
           *
           * @description
           *
           * Transforms a camelcase string to a snakecase string
           *
           * @param {string} _string String to transform
           * @param {string} _sep Separator, defaults to '-'
           * @return {string} The transformed string
           */
          parameterize: function(_string, _sep) {
            if (typeof _string !== 'string') return _string;
            return _string.replace(/(?:[A-Z]+|[0-9]+)/g, function (_match, _index) {
              return _index === 0 ? _match : (_sep || '-') + _match;
            }).toLowerCase();
          },

          /**
           * @memberof inflector#
           *
           * @description
           *
           * Transforms a string to snakecase, replaces every space, dash and undercore by the provided separator.
           *
           * @param {string} _string String to transform
           * @param {string} _sep Separator, defaults to '-'
           * @return {string} The transformed string
           */
          dasherize: function(_string, _sep) {
            return _string.replace(/[-_\s]+/g, _sep || '-');
          },

          /**
           * @memberof inflector#
           *
           * @description
           *
           * Transforms a string to its singular form.
           *
           * @param {string} _string String to transform
           * @param {string} _locale) Locale to use, defaults to the default locale
           * @return {string} The transformed string
           */
          singularize: function(_string, _locale) {
            var rules = loadRulesFor(_locale);
            return rules ? applyRules(_string, rules.singular, rules.uncountable) : _string;
          },

          /**
           * @memberof inflector#
           *
           * @description
           *
           * Transforms a string to its plural form.
           *
           * @param {string} _string String to transform
           * @param {string} _locale) Locale to use, defaults to the default locale
           * @return {string} The transformed string
           */
          pluralize: function(_string, _locale) {
            var rules = loadRulesFor(_locale);
            return rules ? applyRules(_string, rules.plural, rules.uncountable) : _string;
          }
        };

      }]
    };
  }]);

})(angular);
// Preload some angular stuff
var RMModule = angular.module('restmod', ['ng', 'platanus.inflector']);

/**
 * @class restmodProvider
 *
 * @description
 *
 * The restmodProvider exposes restmod configuration methods
 */
RMModule.provider('restmod', [function() {

  var BASE_CHAIN = ['RMBuilderExt', 'RMBuilderRelations', 'RMBuilderComputed'];

  function wrapInInvoke(_mixin) {
    return function(_injector) {
      _injector.invoke(_mixin, this, { $builder: this });
    };
  }

  return {
    /**
     * @memberof restmodProvider#
     *
     * @description
     *
     * Adds base mixins for every generated model.
     *
     * **ATTENTION** Model names should NOT be added to this chain.
     *
     * All mixins added to the chain are prepended to every generated model.
     *
     * Usage:
     *
     * ```javascript
     * $provider.rebase('ChangeModel', 'LazyRelations', 'ThrottledModel')
     * ```
     */
    rebase: function(/* _mix_names */) {
      var mixin, i, l = arguments.length;
      for(i = 0; i < l; i++) {
        mixin = arguments[i];
        if(angular.isArray(mixin) || angular.isFunction(mixin)) {
          mixin = wrapInInvoke(mixin);
        }
        BASE_CHAIN.push(mixin);
      }
      return this;
    },

    /**
     * @class restmod
     *
     * @description
     *
     * The restmod service provides factory methods for the different restmod consumables.
     */
    $get: ['RMModelFactory', '$log', function(buildModel, $log) {

      var arraySlice = Array.prototype.slice;

      var restmod = {
        /**
         * @memberOf restmod#
         *
         * @description
         *
         * The model factory is used to generate new restmod model types. It's recommended to put models inside factories,
         * this is usefull later when defining relations and inheritance, since the angular $injector is used by
         * these features. It's also the angular way of doing things.
         *
         * A simple model can be built like this:
         *
         * ```javascript
         * angular.module('bike-app').factory('Bike', function(restmod) {
         *   return restmod.model('/bikes');
         * });
         *```
         *
         * The `_url` parameter is the resource url the generated model will be bound to, if `null` is given then
         * the model is *nested* and can only be used in another model context.
         *
         * The model also accepts one or more definition providers as one or more arguments after the _url parameter,
         * posible definition providers are:
         *
         * * A definition object (more on this at the {@link BuilderApi}):
         *
         * ```javascript
         * restmod.model('/bikes', {
         *   viewed: { init: false },
         *   parts: { hasMany: 'Part' },
         *   '~afterCreate': function() {
         *     alert('Bike created!!');
         *   }
         * });
         *```
         *
         * * A definition function (more on this at the {@link BuilderApi}):
         *
         * ```javascript
         * restmod.model('/bikes', function() {
         *   this.attrDefault('viewed', false);
         *   this.attrMask('id', 'CU');
         * });
         *```
         *
         * * A mixin (generated using the mixin method) or model factory name:
         *
         * ```javascript
         * restmod.model('/bikes', 'BaseModel', 'PagedModel');
         *```
         *
         * * A mixin (generated using the mixin method) or model object:
         *
         * ```javascript
         * restmod.model('/bikes', BaseModel, PagedModel);
         * ```
         *
         * @param {string} _url Resource url.
         * @param {mixed} _mix One or more mixins, description objects or description blocks.
         * @return {StaticApi} The new model.
         */
        model: function(_baseUrl/* , _mix */) {
          var model = buildModel(_baseUrl, BASE_CHAIN);

          if(arguments.length > 1) {
            model.mix(arraySlice.call(arguments, 1));
            $log.warn('Passing mixins and difinitions in the model method will be deprecated in restmod 1.2, use restmod.model().mix() instead.');
          }

          return model;
        },

        /**
         * @memberOf restmod#
         *
         * @description
         *
         * The mixin factory is used to pack model behaviors without the overload of generating a new
         * model. The mixin can then be passed as argument to a call to {@link restmod#model#model}
         * to extend the model capabilities.
         *
         * A mixin can also be passed to the {@link restmodProvider#rebase} method to provide
         * a base behavior for all generated models.
         *
         * @param {mixed} _mix One or more mixins, description objects or description blocks.
         * @return {object} The mixin
         */
        mixin: function(/* _mix */) {
          return { $isAbstract: true, $$chain: arraySlice.call(arguments, 0) };
        },

        /**
         * @memberOf restmod#
         *
         * @description
         *
         * Shorcut method used to create singleton resources.
         *
         * Same as calling `restmod.model(null).$single(_url)`
         *
         * Check the {@link StaticApi#$single} documentation for more information.
         *
         * @param {string} _url Resource url,
         * @param {mixed} _mix Mixin chain.
         * @return {RecordApi} New resource instance.
         */
        singleton: function(_url/*, _mix */) {
          return restmod.model.apply(this, arguments).single(_url);
        }
      };

      return restmod;
    }]
  };
}])
.factory('model', ['restmod', function(restmod) {
  return restmod.model;
}])
.factory('mixin', ['restmod', function(restmod) {
  return restmod.mixin;
}]);

RMModule.factory('RMCollectionApi', ['RMUtils', function(Utils) {

  var extend = angular.extend;

  /**
   * @class CollectionApi
   *
   * @extends ScopeApi
   * @extends CommonApi
   *
   * @description
   *
   * A restmod collection is an extended array type bound REST resource route.
   *
   * Every time a new restmod model is created, an associated collection type is created too.
   *
   * TODO: talk about fetch/refresh behaviour, lifecycles, collection scopes, adding/removing
   *
   * For `$fetch` on a collection:
   *
   * * before-fetch-many
   * * before-request
   * * after-request[-error]
   * * after-feed (called for every record if no errors)
   * * after-feed-many (only called if no errors)
   * * after-fetch-many[-error]
   *
   * @property {boolean} $isCollection Helper flag to separate collections from the main type
   * @property {object} $scope The collection scope (hierarchical scope, not angular scope)
   * @property {object} $params The collection query parameters
   *
   */
  return {

    $isCollection: true,

    /**
     * @memberof CollectionApi#
     *
     * @description Called by collection constructor on initialization.
     *
     * Note: Is better to add a hook on after-init than overriding this method.
     */
    $initialize: function() {
      // after initialization hook
      this.$dispatch('after-collection-init');
    },

    /**
     * @memberof CollectionApi#
     *
     * @description Feeds raw collection data into the collection.
     *
     * This method is for use in collections only.
     *
     * @param {array} _raw Data to add
     * @param  {string} _mask 'CRU' mask
     * @return {CollectionApi} self
     */
    $decode: function(_raw, _mask) {

      Utils.assert(_raw && angular.isArray(_raw), 'Collection $decode expected array');

      for(var i = 0, l = _raw.length; i < l; i++) {
        this.$buildRaw(_raw[i], _mask).$reveal(); // build and disclose every item.
      }

      this.$dispatch('after-feed-many', [_raw]);
      return this;
    },

    /**
     * @memberof CollectionApi#
     *
     * @description Encodes array data into a its serialized version.
     *
     * @param  {string} _mask 'CRU' mask
     * @return {CollectionApi} self
     */
    $encode: function(_mask) {
      var raw = [];
      for(var i = 0, l = this.length; i < l; i++) {
        raw.push(this[i].$encode(_mask));
      }

      this.$dispatch('before-render-many', [raw]);
      return raw;
    },

    /**
     * @memberof CollectionApi#
     *
     * @description Resets the collection's contents
     *
     * @return {CollectionApi} self
     */
    $clear: function() {
      return this.$always(function() {
        this.length = 0; // reset the collection contents
      });
    },

    /**
     * @memberof CollectionApi#
     *
     * @description Begin a server request to populate collection. This method does not
     * clear the collection contents by default, use `$refresh` to reset and fetch.
     *
     * This method is for use in collections only.
     *
     * @param {object|function} _params Additional request parameters, not stored in collection,
     * if a function is given, then it will be called with the request object to allow requet customization.
     * @return {CollectionApi} self
     */
    $fetch: function(_params) {
      return this.$action(function() {
        var request = { method: 'GET', url: this.$url('fetchMany'), params: this.$params };

        if(_params) {
          request.params = request.params ? extend(request.params, _params) : _params;
        }

        // TODO: check that collection is bound.

        this
          .$dispatch('before-fetch-many', [request])
          .$send(request, function(_response) {
            this
              .$unwrap(_response.data)
              .$dispatch('after-fetch-many', [_response]);
          }, function(_response) {
            this.$dispatch('after-fetch-many-error', [_response]);
          });
      });
    },

    /**
     * @memberof CollectionApi#
     *
     * @description Adds an item to the back of the collection. This method does not attempt to send changes
     * to the server. To create a new item and add it use $create or $build.
     *
     * Triggers after-add callbacks.
     *
     * @param {RecordApi} _obj Item to be added
     * @return {CollectionApi} self
     */
    $add: function(_obj, _idx) {
      Utils.assert(_obj.$type && _obj.$type === this.$type, 'Collection $add expects record of the same $type');

      return this.$action(function() {
        if(_obj.$position === undefined) {
          if(_idx !== undefined) {
            this.splice(_idx, 0, _obj);
          } else {
            this.push(_obj);
          }
          _obj.$position = true; // use true for now, keeping position updated can be expensive
          this.$dispatch('after-add', [_obj]);
        }
      });
    },

    /**
     * @memberof CollectionApi#
     *
     * @description  Removes an item from the collection.
     *
     * This method does not send a DELETE request to the server, it just removes the
     * item locally. To remove an item AND send a DELETE use the item's $destroy method.
     *
     * Triggers after-remove callbacks.
     *
     * @param {RecordApi} _obj Item to be removed
     * @return {CollectionApi} self
     */
    $remove: function(_obj) {
      return this.$action(function() {
        var idx = this.$indexOf(_obj);
        if(idx !== -1) {
          this.splice(idx, 1);
          _obj.$position = undefined;
          this.$dispatch('after-remove', [_obj]);
        }
      });
    },

    /**
     * @memberof CollectionApi#
     *
     * @description Finds the location of an object in the array.
     *
     * If a function is provided then the index of the first item for which the function returns true is returned.
     *
     * @param {RecordApi|function} _obj Object to find
     * @return {number} Object index or -1 if not found
     */
    $indexOf: function(_obj) {
      var accept = typeof _obj === 'function' ? _obj : false;
      for(var i = 0, l = this.length; i < l; i++) {
        if(accept ? accept(this[i]) : this[i] === _obj) return i;
      }
      return -1;
    }
  };

}]);
RMModule.factory('RMCommonApi', ['$http', 'RMFastQ', '$log', function($http, $q, $log) {

  var EMPTY_ARRAY = [];

  function wrapPromise(_ctx, _fun) {
    var dsp = _ctx.$dispatcher();
    return function(_last) {
      // save and reset promise
      var oldPromise = _ctx.$promise;
      _ctx.$promise = undefined;
      try {
        _ctx.$last = _last;
        var result = dsp ? _ctx.$decorate(dsp, _fun, [_ctx]) : _fun.call(_ctx, _ctx);
        return result === undefined ? _ctx.$promise : result;
      } finally {
        _ctx.$promise = oldPromise; // restore old promise
      }
    };
  }

  /**
   * @class CommonApi
   *
   * @description
   *
   * Provides a common framework for restmod resources.
   *
   * This API is included in {@link RecordApi} and {@link CollectionApi}.
   * making its methods available in every structure generated by restmod.
   *
   * TODO: Describe hook mechanism, promise mechanism and send lifecycle.
   *
   * @property {promise} $promise The last operation promise (undefined if no promise has been created yet)
   * @property {array} $pending Pending requests associated to this resource (undefined if no request has been initiated)
   * @property {object} $$cb Scope call backs (undefined if no callbacks have been defined, private api)
   * @property {function} $$dsp The current event dispatcher (private api)
   */
  var CommonApi = {

    /**
     * @memberof CommonApi#
     *
     * @description Gets this resource url.
     *
     * @param {string} _for Intended usage for the url (optional)
     * @return {string} The resource url.
     */
    $url: function(_for) {
      if(_for) {
        _for = '$' + _for + 'UrlFor';
        if(this.$scope[_for]) return this.$scope[_for](this);
      } else if(this.$scope.$canonicalUrlFor) {
        return this.$scope.$canonicalUrlFor(this);
      }

      return this.$scope.$urlFor(this);
    },

    // Hooks API

    /**
     * @memberof CommonApi#
     *
     * @description Executes a given hook callbacks using the current dispatcher context.
     *
     * This method can be used to provide custom object lifecycle hooks.
     *
     * Usage:
     *
     * ```javascript
     * var mixin = restmod.mixin({
     *   triggerDummy: function(_param) {
     *     this.$dispatch('dummy-hook', _param);
     *   }
     * });
     *
     * // Then hook can be used at model definition to provide type-level customization:
     * var Bike $resmod.model('/api/bikes', mixin, {
     *   '~dummy-hook': function() {
     *     alert('This is called for every bike');
     *   }
     * };
     *
     * // or at instance level:
     * var myBike = Bike.$build();
     * myBike.$on('dummy-hook', function() {
     *   alert('This is called for myBike only');
     * });
     *
     * // or event at decorated context level
     * myBike.$decorate({
     *   'dummy-hook': function() {
     *     alert('This is called for myBike only inside the decorated context');
     *   }
     * }, fuction() {
     *  // decorated context
     * });
     * ```
     *
     * @param  {string} _hook Hook name
     * @param  {array} _args Hook arguments
     * @param  {object} _ctx Hook execution context override
     *
     * @return {CommonApi} self
     */
    $dispatch: function(_hook, _args, _ctx) {
      var cbs, i, cb, dsp = this.$$dsp;

      if(!_ctx) _ctx = this;

      // context callbacks
      if(dsp) {
        this.$$dsp = undefined; // disable dsp for hooks
        dsp(_hook, _args, _ctx);
      }

      // instance callbacks
      if(this.$$cb && (cbs = this.$$cb[_hook])) {
        for(i = 0; !!(cb = cbs[i]); i++) {
          cb.apply(_ctx, _args || EMPTY_ARRAY);
        }
      }

      // bubble up the object scope, bubble to type only if there isnt a viable parent scope.
      if(this.$scope && this.$scope.$dispatch) {
        this.$scope.$dispatch(_hook, _args, _ctx);
      } else if(this.$type) {
        this.$type.$dispatch(_hook, _args, _ctx);
      }

      this.$$dsp = dsp; // reenable dsp.

      return this;
    },

    /**
     * @memberof CommonApi#
     *
     * @description Registers an instance hook.
     *
     * An instance hook is called only for events generated by the calling object.
     *
     * ```javascript
     * var bike = Model.$build(), bike2 = Model.$build();
     * bike.$on('before-save', function() { alert('saved!'); });
     *
     * bike.$save(); // 'saved!' alert is shown after bike is saved
     * bike2.$save(); // no alert is shown after bike2 is saved
     * ```
     *
     * @param {string} _hook Hook name
     * @param {function} _fun Callback
     * @return {CommonApi} self
     */
    $on: function(_hook, _fun) {
      var hooks = (this.$$cb || (this.$$cb = {}))[_hook] || (this.$$cb[_hook] = []);
      hooks.push(_fun);
      return this;
    },

    /**
     * @memberof CommonApi#
     *
     * @description Registers hooks to be used only inside the given function (decorated context).
     *
     * ```javascript
     * // special fetch method that sends a special token header.
     * restmod.mixin({
     *   $fetchWithToken: function(_token) {
     *     return this.$decorate({
     *       'before-fetch': function(_req) {
     *         _req.headers = _req.headers || {};
     *         _req.headers['Token'] = _token;
     *       }
     *     ), function() {
     *       return this.$fetch();
     *     })
     *   }
     * });
     * ```
     *
     * @param {object|function} _hooks Hook mapping object or hook execution method.
     * @param {function} _fun Function to be executed in with decorated context, this function is executed in the callee object context.
     * @return {CommonApi} self
     */
    $decorate: function(_hooks, _fun, _args) {

      var oldDispatcher = this.$$dsp;

      // set new dispatcher
      this.$$dsp = (typeof _hooks === 'function' || !_hooks) ? _hooks : function(_hook, _args, _ctx) {
        if(oldDispatcher) oldDispatcher.apply(null, arguments);
        var extraCb = _hooks[_hook];
        if(extraCb) extraCb.apply(_ctx, _args || EMPTY_ARRAY);
      };

      try {
        return _fun.apply(this, _args);
      } finally {
        // reset dispatcher with old value
        this.$$dsp = oldDispatcher;
      }
    },

    /**
     * @memberof CommonApi#
     *
     * @description Retrieves the current object's event dispatcher function.
     *
     * This method can be used in conjuction with `$decorate` to provide a consistent hook context
     * during async operations. This is important when building extensions that want to support the
     * contextual hook system in asynchronic operations.
     *
     * For more information aboout contextual hooks, see the {@link CommonApi#decorate} documentation.
     *
     * Usage:
     *
     * ```javascript
     * restmod.mixin({
     *   $saveAndTrack: function() {
     *     var dsp = this.$dispatcher(), // capture the current dispatcher function.
     *         self = this;
     *     this.$save().$then(function() {
     *       this.$send({ path: '/traces', data: 'ble' }, function() {
     *         this.$decorate(dsp, function() {
     *           // the event is dispatched using the dispatcher function available when $saveAndTrack was called.
     *           this.$dispatch('trace-stored');
     *         });
     *       });
     *     });
     *   }
     * })
     * ```
     *
     * @return {function} Dispatcher evaluator
     */
    $dispatcher: function() {
      return this.$$dsp;
    },

    // Promise API

    /**
     * @memberof CommonApi#
     *
     * @description Returns this object last promise.
     *
     * If promise does not exist, then a new one is generated that resolves to the object itsef. The
     * new promise is not set as the current object promise, for that use `$then`.
     *
     * Usage:
     *
     * ```javascript
     * col.$fetch().$asPromise();
     * ```
     *
     * @return {promise} $q promise
     */
    $asPromise: function() {
      var _this = this;
      return this.$promise ? this.$promise.then(
        function() { return _this; },
        function() { return $q.reject(_this); }
      ) : $q.when(this);
    },

    /**
     * @memberof CommonApi#
     *
     * @description Promise chaining method, keeps the model instance as the chain context.
     *
     * Calls `$q.then` on the model's last promise.
     *
     * Usage:
     *
     * ```javascript
     * col.$fetch().$then(function() { });
     * ```
     *
     * @param {function} _success success callback
     * @param {function} _error error callback
     * @return {CommonApi} self
     */
    $then: function(_success, _error) {

      if(!this.$promise) {
        this.$promise = $q.when(wrapPromise(this, _success)(this));
      } else {
        this.$promise = this.$promise.then(
          _success ? wrapPromise(this, _success) : _success,
          _error ? wrapPromise(this, _error) : _error
        );
      }

      return this;
    },

    /**
     * @memberof CommonApi#
     *
     * @description Promise chaining method, similar to then but executes same callback in success or error.
     *
     * Usage:
     *
     * ```javascript
     * col.$fetch().$always(function() { });
     * ```
     *
     * @param {function} _fun success/error callback
     * @return {CommonApi} self
     */
    $always: function(_fun) {
      return this.$then(_fun, _fun);
    },

    /**
     * @memberof CommonApi#
     *
     * @description Promise chaining, keeps the model instance as the chain context.
     *
     * Calls ´$q.finally´ on the collection's last promise, updates last promise with finally result.
     *
     * Usage:
     *
     * ```javascript
     * col.$fetch().$finally(function() { });
     * ```
     *
     * @param {function} _cb callback
     * @return {CommonApi} self
     */
    $finally: function(_cb) {
      this.$promise = this.$promise['finally'](wrapPromise(this, _cb));
      return this;
    },

    // Communication API

    /**
     * @memberof CommonApi#
     *
     * @description Low level communication method, wraps the $http api.
     *
     * * You can access last request promise using the `$asPromise` method.
     * * Pending requests will be available at the $pending property (array).
     * * Current request execution status can be queried using the $status property (current request, not last).
     * * The $status property refers to the current request inside $send `_success` and `_error` callbacks.
     *
     * @param {object} _options $http options
     * @param {function} _success sucess callback (sync)
     * @param {function} _error error callback (sync)
     * @return {CommonApi} self
     */
    $send: function(_options, _success, _error) {

      // make sure a style base was selected for the model
      if(!this.$type.getProperty('style')) {
        $log.warn('No API style base was selected, see the Api Integration FAQ for more information on this warning');
      }

      var action = this.$$action;

      return this.$always(function() {

        this.$response = null;
        this.$status = 'pending';
        this.$dispatch('before-request', [_options]);

        return $http(_options).then(wrapPromise(this, function() {
          if(action && action.canceled) {
            // if request was canceled during request, ignore post request actions.
            this.$status =  'canceled';
          } else {
            this.$status = 'ok';
            this.$response = this.$last;
            this.$dispatch('after-request', [this.$last]);
            if(_success) _success.call(this, this.$last);
          }
        }), wrapPromise(this, function() {
          if(action && action.canceled) {
            // if request was canceled during request, ignore error handling
            this.$status = 'canceled';
          } else {
            this.$status = 'error';
            this.$response = this.$last;

            // IDEA: Consider flushing pending request in case of an error. Also continue ignoring requests
            // until the error flag is reset by user.

            this.$dispatch('after-request-error', [this.$last]);
            if(_error) _error.call(this, this.$last);
            return $q.reject(this); // TODO: this will step over any promise generated in _error!!
          }
        }));
      });
    },

    // Actions API

    /**
     * @memberof CommonApi#
     *
     * @description Registers a new action to be executed in the promise queue.
     *
     * Registered pending actions can be canceled using `$cancel`
     *
     * `$cancel` will also cancel any ongoing call to `$send` (will not abort it yet though...)
     *
     * @return {CommonApi} self
     */
    $action: function(_fun) {
      var status = {
        canceled: false
      }, pending = this.$pending || (this.$pending = []);

      pending.push(status);

      return this.$always(function() {
        var oldAction = this.$$action;
        try {
          if(!status.canceled) {
            this.$$action = status;
            return _fun.call(this);
          } else {
            return $q.reject(this);
          }
        } finally {
          // restore object state and pending actions
          this.$$action = oldAction;
        }
      }).$finally(function() {
        // after action and related async code finishes, remove status from pending list
        pending.splice(pending.indexOf(status), 1);
      });
    },

    /**
     * @memberof CommonApi#
     *
     * @description Cancels all pending actions registered with $action.
     *
     * @return {CommonApi} self
     */
    $cancel: function() {
      // cancel every pending request.
      if(this.$pending) {
        angular.forEach(this.$pending, function(_status) {
          _status.canceled = true;
        });
      }

      return this;
    },

    /**
     * @memberof CommonApi#
     *
     * @description Returns true if object has queued actions
     *
     * @return {Boolean} Object request pending status.
     */
    $hasPendingActions: function() {
      var pendingCount = 0;

      if(this.$pending) {
        angular.forEach(this.$pending, function(_status) {
          if(!_status.canceled) pendingCount++;
        });
      }

      return pendingCount > 0;
    }
  };

  return CommonApi;

}]);
RMModule.factory('RMExtendedApi', ['$q', 'RMPackerCache', function($q, packerCache) {

  /**
   * @class ExtendedApi
   *
   * @description
   *
   * Provides a common framework **on top** of the {@link RecordApi} and {@link CollectionApi}.
   *
   * @property {boolean} $resolved The collection resolve status, is undefined on intialization
   */
  return {

    // override decode to detect resolution of resource
    $decode: function(_raw, _mask) {
      if(this.$resolved === false && this.$clear) this.$clear(); // clear if not resolved.
      this.$super(_raw, _mask);
      this.$resolved = true;
      return this;
    },

    /// Misc common methods

    /**
     * @memberof ExtendedApi#
     *
     * @description
     *
     * Unpacks and decode raw data from a server generated structure.
     *
     * ATTENTION: do not override this method to change the object wrapping strategy,
     * instead, override the static {@link Model.$unpack} method.
     *
     * @param  {mixed} _raw Raw server data
     * @param  {string} _mask 'CRU' mask
     * @return {ExtendedApi} this
     */
    $unwrap: function(_raw, _mask) {
      try {
        packerCache.prepare();
        _raw = this.$type.unpack(this, _raw);
        return this.$decode(_raw, _mask);
      } finally {
        packerCache.clear();
      }
    },

    /**
     * @memberof ExtendedApi#
     *
     * @description
     *
     * Encode and packs object into a server compatible structure that can be used for PUT/POST operations.
     *
     * ATTENTION: do not override this method to change the object wrapping strategy,
     * instead, override the static {@link Model.$pack} method.
     *
     * @param  {string} _mask 'CRU' mask
     * @return {string} raw data
     */
    $wrap: function(_mask) {
      var raw = this.$encode(_mask);
      raw = this.$type.pack(this, raw);
      return raw;
    },

    /**
     * @memberof ExtendedApi#
     *
     * @description Resets the resource's $resolved status.
     *
     * After being reset, calls to `$resolve` will execute a new $fetch.
     *
     * Also, if reset, resource will be cleared on new data.
     *
     * @return {ExtendedApi} self
     */
    $reset: function() {
      // cancel outside promise chain
      // TODO: find a way of only ignoring requests that will lead to resolution, maybe using action metadata
      return this.$cancel().$action(function() {
        this.$resolved = false;
      });
    },

    /**
     * @memberof ExtendedApi#
     *
     * @description Resolves the resource's contents.
     *
     * If already resolved then this method will return a resolved promise, if not then
     * it will initiate a `$fetch` operation and return the operation promise.
     *
     * This method will trigger a `before-resolve` event before checking the resolve status.
     *
     * @param  {object} _params `$fetch` params
     * @return {promise} Promise that resolves to the resource.
     */
    $resolve: function(_params) {
      return this.$action(function() { // chain resolution in request promise chain
        this.$dispatch('before-resolve', []);
        if(!this.$resolved) this.$fetch(_params);
      });
    },

    /**
     * @memberof ExtendedApi#
     *
     * @description Resets and fetches the resource contents.
     *
     * @param  {object} _params `$fetch` params
     * @return {ExtendedApi} self
     */
    $refresh: function(_params) {
      return this.$reset().$fetch(_params);
    }
  };

}]);
RMModule.factory('RMListApi', [function() {

  /**
   * @class ListApi
   *
   * @description Common methods for Lists and Collections.
   */
  return {

    /**
     * @memberof ListApi#
     *
     * @description Generates a new list from this one.
     *
     * If called without arguments, the list is popupated with the same contents as this list.
     *
     * If there is a pending async operation on the host collection/list, then this method will
     * return an empty list and fill it when the async operation finishes. If you don't need the async behavior
     * then use `$type.list` directly to generate a new list.
     *
     * @param {function} _filter A filter function that should return the list contents as an array.
     * @return {ListApi} list
     */
    $asList: function(_filter) {
      var list = this.$type.list(),
          promise = this.$asPromise();

      // set the list initial promise to the resolution of the parent promise.
      list.$promise = promise.then(function(_this) {
        list.push.apply(list, _filter ? _filter(_this) : _this);
      });

      return list;
    }
  };

}]);
RMModule.factory('RMRecordApi', ['RMUtils', function(Utils) {

  /**
   * @class RelationScope
   *
   * @description
   *
   * Special scope a record provides to resources related via hasMany or hasOne relation.
   */
  var RelationScope = function(_scope, _target, _partial) {
    this.$scope = _scope;
    this.$target = _target;
    this.$partial = Utils.cleanUrl(_partial);
  };

  RelationScope.prototype = {

    $nestedUrl: function() {
      return Utils.joinUrl(this.$scope.$url(), this.$partial);
    },

    // url is nested for collections and nested records
    $urlFor: function(_resource) {
      if(_resource.$isCollection || this.$target.isNested()) {
        return this.$nestedUrl();
      } else {
        return this.$target.$urlFor(_resource);
      }
    },

    // a record's fetch url is always nested
    $fetchUrlFor: function(/* _resource */) {
      return this.$nestedUrl();
    },

    // create is not posible in nested members
    $createUrlFor: function() {
      return null;
    }
  };

  /**
   * @class RecordApi
   * @extends CommonApi
   *
   * @property {object} $scope The record's scope (see {@link ScopeApi})
   * @property {mixed} $pk The record's primary key
   *
   * @description
   *
   * Provides record synchronization and manipulation methods. This is the base API for every restmod record.
   *
   * TODO: Talk about the object lifecycle.
   *
   * ### Object lifecycle hooks
   *
   * For `$fetch`:
   *
   * * before-fetch
   * * before-request
   * * after-request[-error]
   * * after-feed (only called if no errors)
   * * after-fetch[-error]
   *
   * For `$save` when creating:
   *
   * * before-render
   * * before-save
   * * before-create
   * * before-request
   * * after-request[-error]
   * * after-feed (only called if no errors)
   * * after-create[-error]
   * * after-save[-error]
   *
   * For `$save` when updating:
   *
   * * before-render
   * * before-save
   * * before-update
   * * before-request
   * * after-request[-error]
   * * after-feed (only called if no errors)
   * * after-update[-error]
   * * after-save[-error]
   *
   * For `$destroy`:
   *
   * * before-destroy
   * * before-request
   * * after-request[-error]
   * * after-destroy[-error]
   *
   * @property {mixed} $pk The record primary key
   * @property {object} $scope The collection scope (hierarchical scope, not angular scope)
   */
	return {

    /**
     * @memberof RecordApi#
     *
     * @description Called by record constructor on initialization.
     *
     * Note: Is better to add a hook to after-init than overriding this method.
     */
    $initialize: function() {
      // apply defaults
      this.$super();

      // after initialization hook
      // TODO: put this on $new so it can use stacked DSP?
      this.$dispatch('after-init');
    },

    /**
     * @memberof RecordApi#
     *
     * @description Called the resource's scope $urlFor method to build the url for the record using the proper scope.
     *
     * By default the resource partial url is just its `$pk` property. This can be overriden to provide other routing approaches.
     *
     * @return {string} The resource partial url
     */
    $buildUrl: function(_scope) {
      return (this.$pk === undefined || this.$pk === null) ? null : Utils.joinUrl(_scope.$url(), this.$pk + '');
    },

    /**
     * @memberof RecordApi#
     *
     * @description Default item child scope factory.
     *
     * By default, no create url is provided and the update/destroy url providers
     * attempt to first use the unscoped resource url.
     *
     * // TODO: create special api to hold scope (so it is not necessary to recreate the whole object every time.)
     *
     * @param {mixed} _for Scope target type, accepts any model class.
     * @param {string} _partial Partial route.
     * @return {RelationScope} New scope.
     */
    $buildScope: function(_for, _partial) {
      if(_for.$buildOwnScope) {
        // TODO
      } else {
        return new RelationScope(this, _for, _partial);
      }
    },

    /**
     * @memberof RecordApi#
     *
     * @description Iterates over the object non-private properties
     *
     * @param {function} _fun Function to call for each
     * @return {RecordApi} self
     */
    $each: function(_fun, _ctx) {
      for(var key in this) {
        if(this.hasOwnProperty(key) && key[0] !== '$') {
          _fun.call(_ctx || this[key], this[key], key);
        }
      }

      return this;
    },

    /**
     * @memberof RecordApi#
     *
     * @description Feed raw data to this instance.
     *
     * @param {object} _raw Raw data to be fed
     * @param {string} _mask 'CRU' mask
     * @return {RecordApi} this
     */
    $decode: function(_raw, _mask) {
      // IDEA: let user override serializer
      this.$type.decode(this, _raw, _mask || Utils.READ_MASK);
      if(this.$pk === undefined || this.$pk === null) this.$pk = this.$type.inferKey(_raw); // TODO: warn if key changes
      this.$dispatch('after-feed', [_raw]);
      return this;
    },

    /**
     * @memberof RecordApi#
     *
     * @description Generate data to be sent to the server when creating/updating the resource.
     *
     * @param {string} _mask 'CRU' mask
     * @return {string} raw data
     */
    $encode: function(_mask) {
      var raw = this.$type.encode(this, _mask || Utils.CREATE_MASK);
      this.$dispatch('before-render', [raw]);
      return raw;
    },

    /**
     * @memberof RecordApi#
     *
     * @description Begin a server request for updated resource data.
     *
     * The request's promise can be accessed using the `$asPromise` method.
     *
     * @param {object} _params Optional list of params to be passed to object request.
     * @return {RecordApi} this
     */
    $fetch: function(_params) {
      return this.$action(function() {
        var url = this.$url('fetch');
        Utils.assert(!!url, 'Cant $fetch if resource is not bound');

        var request = { method: 'GET', url: url, params: _params };

        this.$dispatch('before-fetch', [request]);
        this.$send(request, function(_response) {
          this.$unwrap(_response.data);
          this.$dispatch('after-fetch', [_response]);
        }, function(_response) {
          this.$dispatch('after-fetch-error', [_response]);
        });
      });
    },

    /**
     * @memberof RecordApi#
     *
     * @description Copyies another object's non-private properties.
     *
     * This method runs inside the promise chain, so calling
     *
     * ```javascript
     * Bike.$find(1).$extend({ size: "L" }).$save();
     * ```
     * Will first fetch the bike data and after it is loaded the new size will be applied and then the
     * updated model saved.
     *
     * @param {object} _other Object to merge.
     * @return {RecordApi} self
     */
    $extend: function(_other) {
      return this.$action(function() {
        for(var tmp in _other) {
          if (_other.hasOwnProperty(tmp) && tmp[0] !== '$') {
            this[tmp] = _other[tmp];
          }
        }
      });
    },

    /**
     * @memberof RecordApi#
     *
     * @description Shortcut method used to extend and save a model.
     *
     * This method will not force a PUT, if object is new `$update` will attempt to POST.
     *
     * @param {object} _other Data to change
     * @return {RecordApi} self
     */
    $update: function(_other) {
      return this.$extend(_other).$save();
    },

    /**
     * @memberof RecordApi#
     *
     * @description Begin a server request to create/update/patch resource.
     *
     * A patch is only executed if model is identified and a patch property list is given. It is posible to
     * change the method used for PATCH operations by setting the `patchMethod` configuration.
     *
     * If resource is new and it belongs to a collection and it hasnt been revealed, then it will be revealed.
     *
     * The request's promise can be accessed using the `$asPromise` method.
     *
     * @param {array} _patch Optional list of properties to send in update operation.
     * @return {RecordApi} this
     */
    $save: function(_patch) {
      return this.$action(function() {
        var url = this.$url('update'), request;

        if(url) {

          // If bound, update
          if(_patch) {
            request = {
              method: this.$type.getProperty('patchMethod', 'PATCH'), // allow user to override patch method
              url: url,
              // Use special mask for patches, mask everything that is not in the patch list.
              data: this.$wrap(function(_name) {
                _name = _name.replace('[]', '');
                for(var i = 0, l = _patch.length; i < l; i++) {
                  if(_name === _patch[i] ||
                    _name.indexOf(_patch[i] + '.') === 0 ||
                    _patch[i].indexOf(_name + '.') === 0
                  ) { return false; }
                }

                return true;
              })
            };
          } else {
            request = { method: 'PUT', url: url, data: this.$wrap(Utils.UPDATE_MASK) };
          }

          this
            .$dispatch('before-update', [request, !!_patch])
            .$dispatch('before-save', [request])
            .$send(request, function(_response) {
              this
                .$unwrap(_response.data)
                .$dispatch('after-update', [_response, !!_patch])
                .$dispatch('after-save', [_response]);
            }, function(_response) {
              this
                .$dispatch('after-update-error', [_response, !!_patch])
                .$dispatch('after-save-error', [_response]);
            });
        } else {
          // If not bound create.
          url = this.$url('create') || this.$scope.$url();
          Utils.assert(!!url, 'Cant $create if parent scope is not bound');

          request = { method: 'POST', url: url, data: this.$wrap(Utils.CREATE_MASK) };
          this
            .$dispatch('before-save', [request])
            .$dispatch('before-create', [request])
            .$send(request, function(_response) {
              this.$unwrap(_response.data);

              // reveal item (if not yet positioned)
              if(this.$scope.$isCollection && this.$position === undefined && !this.$preventReveal) {
                this.$scope.$add(this, this.$revealAt);
              }

              this
                .$dispatch('after-create', [_response])
                .$dispatch('after-save', [_response]);
            }, function(_response) {
              this
                .$dispatch('after-create-error', [_response])
                .$dispatch('after-save-error', [_response]);
            });
        }
      });
    },

    /**
     * @memberof RecordApi#
     *
     * @description Begin a server request to destroy the resource.
     *
     * The request's promise can be accessed using the `$asPromise` method.
     *
     * @return {RecordApi} this
     */
    $destroy: function() {
      return this.$action(function() {
        var url = this.$url('destroy');
        if(url)
        {
          var request = { method: 'DELETE', url: url };

          this
            .$dispatch('before-destroy', [request])
            .$send(request, function(_response) {

              // remove from scope
              if(this.$scope.$remove) {
                this.$scope.$remove(this);
              }

              this.$dispatch('after-destroy', [_response]);
            }, function(_response) {
              this.$dispatch('after-destroy-error', [_response]);
            });
        }
        else
        {
          // If not yet bound, just remove from parent
          if(this.$scope.$remove) this.$scope.$remove(this);
        }
      });
    },

    // Collection related methods.

    /**
     * @memberof RecordApi#
     *
     * @description Changes the location of the object in the bound collection.
     *
     * If object hasn't been revealed, then this method will change the index where object will be revealed at.
     *
     * @param  {integer} _to New object position (index)
     * @return {RecordApi} this
     */
    $moveTo: function(_to) {
      if(this.$position !== undefined) {
        // TODO: move item to given index.
        // TODO: callback
      } else {
        this.$revealAt = _to;
      }
      return this;
    },

    /**
     * @memberof RecordApi#
     *
     * @description Reveal in collection
     *
     * If instance is bound to a collection and it hasnt been revealed (because it's new and hasn't been saved),
     * then calling this method without parameters will force the object to be added to the collection.
     *
     * If this method is called with **_show** set to `false`, then the object wont be revealed by a save operation.
     *
     * @param  {boolean} _show Whether to reveal inmediatelly or prevent automatic reveal.
     * @return {RecordApi} this
     */
    $reveal: function(_show) {
      if(_show === undefined || _show) {
        this.$scope.$add(this, this.$revealAt);
      } else {
        this.$preventReveal = true;
      }
      return this;
    }
  };

}]);
RMModule.factory('RMScopeApi', ['RMUtils', function(Utils) {

  /**
   * @class ScopeApi
   *
   * @description Common behaviour for record scopes.
   *
   * Record scopes are starting points for record operations (like base type or a collection)
   *
   * TODO: Talk about record building here
   */
  return {

    /**
     * @memberof ScopeApi#
     *
     * @description provides urls for scope's resources.
     *
     * @param {mixed} _resource The target resource.
     * @return {string|null} The url or nill if resource does not meet the url requirements.
     */
    $urlFor: function(_resource) {
      // force item unscoping if model is not nested (maybe make this optional)
      var scope = this.$type.isNested() ? this : this.$type;
      return typeof _resource.$buildUrl === 'function' ? _resource.$buildUrl(scope) : scope.$url();
    },

    /**
     * @memberof ScopeApi#
     *
     * @description Builds a new instance of this model, bound to this instance scope, sets its primary key.
     *
     * @param {mixed} _pk object private key
     * @param {object} _scope scope override (optional)
     * @return {RecordApi} New model instance
     */
    $new: function(_pk, _scope) {
      return this.$super(_pk, _scope);
    },

    /**
     * @memberof ScopeApi#
     *
     * @description Builds a new instance of this model, does not assign a pk to the created object.
     *
     * ATTENTION: item will not show in collection until `$save` is called. To reveal item before than call `$reveal`.
     *
     * @param  {object} _init Initial values
     * @return {RecordApi} single record
     */
    $build: function(_init) {
      return this.$new().$extend(_init);
    },

    /**
     * @memberof ScopeApi#
     *
     * @description Builds a new instance of this model using undecoded data.
     *
     * ATTENTION: does not automatically reveal item in collection, chain a call to $reveal to do so.
     *
     * @param  {object} _raw Undecoded data
     * @return {RecordApi} single record
     */
    $buildRaw: function(_raw, _mask) {
      var obj = this.$new(this.$type.inferKey(_raw));
      obj.$decode(_raw, _mask);
      return obj;
    },

    /**
     * @memberof ScopeApi#
     *
     * @description Attempts to resolve a resource using provided private key.
     *
     * @param {mixed} _pk Private key
     * @param {object} _params Additional query parameters
     * @return {RecordApi} single record
     */
    $find: function(_pk, _params) {
      return this.$new(_pk).$resolve(_params);
    },

    /**
     * @memberof ScopeApi#
     *
     * @description Builds and saves a new instance of this model
     *
     * @param  {object} _attr Data to be saved
     * @return {RecordApi} single record
     */
    $create: function(_attr) {
      return this.$build(_attr).$save();
    },

    /**
     * @memberof ScopeApi#
     *
     * @description Builds a new collection bound to this scope.
     *
     * If scope is another collection then it will inherit its parameters
     *
     * Collections are bound to an api resource.
     *
     * @param  {object} _params  Additional query string parameters
     * @param  {object} _scope  Scope override (optional)
     * @return {CollectionApi} Model Collection
     */
    $collection: function(_params, _scope) {
      return this.$super(_params, _scope);
    },

    /**
     * @memberof ScopeApi#
     *
     * @description Generates a new collection bound to this context and url and calls $fetch on it.
     *
     * @param {object} _params Collection parameters
     * @return {CollectionApi} record collection
     */
    $search: function(_params) {
      return this.$collection(_params).$fetch();
    }
  };

}]);
RMModule.factory('RMBuilder', ['$injector', 'inflector', '$log', 'RMUtils', function($injector, inflector, $log, Utils) {

  // TODO: add urlPrefix option

  var forEach = angular.forEach,
      isObject = angular.isObject,
      isArray = angular.isArray,
      isFunction = angular.isFunction,
      extend = angular.extend,
      VAR_RGX = /^[A-Z]+[A-Z_0-9]*$/;

  /**
   * @class BuilderApi
   *
   * @description
   *
   * Provides the DSL for model generation, it supports to modes of model definitions:
   *
   * ## Definition object
   *
   * This is the preferred way of describing a model behavior.
   *
   * A model description object looks like this:
   *
   * ```javascript
   * restmod.model({
   *
   *   // MODEL CONFIGURATION
   *
   *   $config: {
   *     name: 'resource',
   *     primaryKey: '_id'
   *   },
   *
   *   // ATTRIBUTE MODIFIERS AND RELATIONS
   *
   *   propWithDefault: { init: 20 },
   *   propWithDecoder: { decode: 'date', chain: true },
   *   hasManyRelation: { hasMany: 'Other' },
   *   hasOneRelation: { hasOne: 'Other' },
   *
   *   // HOOKS
   *
   *   $hooks: {
   *     'after-create': function() {
   *     }
   *   },
   *
   *   // METHODS
   *
   *   $extend: {
   *     Record: {
   *       instanceMethod: function() {
   *       }
   *     },
   *     Model: {
   *       scopeMethod: function() {
   *       }
   *     }
   *   }
   * });
   * ```
   *
   * Special model configuration variables can be set by using a `$config` block:
   *
   * ```javascript
   * restmod.model({
   *
   *   $config: {
   *     name: 'resource',
   *     primaryKey: '_id'
   *   }
   *
   *  });
   * ```
   *
   * With the exception of model configuration variables and properties starting with a special character (**@** or **~**),
   * each property in the definition object asigns a behavior to the same named property in a model's record.
   *
   * To modify a property behavior assign an object with the desired modifiers to a
   * definition property with the same name. Builtin modifiers are:
   *
   * The following built in property modifiers are provided (see each mapped-method docs for usage information):
   *
   * * `init` sets an attribute default value, see {@link BuilderApi#attrDefault}
   * * `mask` and `ignore` sets an attribute mask, see {@link BuilderApi#attrMask}
   * * `map` sets an explicit server attribute mapping, see {@link BuilderApi#attrMap}
   * * `decode` sets how an attribute is decoded after being fetch, maps to {@link BuilderApi#attrDecoder}
   * * `encode` sets how an attribute is encoded before being sent, maps to {@link BuilderApi#attrEncoder}
   * * `volatile` sets the attribute volatility, maps to {@link BuilderApi#attrVolatile}
   *
   * **For relations modifiers take a look at {@link RelationBuilderApi}**
   *
   * **For other extended bundled methods check out the {@link ExtendedBuilderApi}**
   *
   * If other kind of value (different from object or function) is passed to a definition property,
   * then it is considered to be a default value. (same as calling {@link BuilderApi#define} at a definition function)
   *
   * ```javascript
   * var Model = restmod.model('/', {
   *   im20: 20 // same as { init: 20 }
   * })
   *
   * // then say hello is available for use at model records
   * Model.$new().im20; // 20
   * ```
   *
   * To add/override methods from the record api, use the `$extend` block:
   *
   * ```javascript
   * var Model = restmod.model('/', {
   *   $extend: {
   *     sayHello: function() { alert('hello!'); }
   *   }
   * })
   *
   * // then say hello is available for use at model records
   * Model.$new().sayHello();
   * ```
   *
   * To add a static method or a collection method, you must specify the method scope: , prefix the definition key with **^**, to add it to the model collection prototype,
   * prefix it with ***** static/collection methods to the Model, prefix the definition property name with **@**
   * (same as calling {@link BuilderApi#scopeDefine} at a definition function).
   *
   * ```javascript
   * var Model = restmod.model('/', {
   *   $extend: {
   *     'Collection.count': function() { return this.length; },  // scope is set using a prefix
   *
   *     Model: {
   *       sayHello: function() { alert('hello!'); } // scope is set using a block
   *     }
   * })
   *
   * // then the following call will be valid.
   * Model.sayHello();
   * Model.$collection().count();
   * ```
   *
   * More information about method scopes can be found in {@link BuilderApi#define}
   *
   * To add hooks to the Model lifecycle events use the `$hooks` block:
   *
   * ```javascript
   * var Model = restmod.model('/', {
   *   $hooks: {
   *     'after-init': function() { alert('hello!'); }
   *   }
   * })
   *
   * // the after-init hook is called after every record initialization.
   * Model.$new(); // alerts 'hello!';
   * ```
   *
   * ## Definition function
   *
   * The definition function gives complete access to the model builder api, every model builder function described
   * in this page can be called from the definition function by referencing *this*.
   *
   * ```javascript
   * restmod.model('', function() {
   *   this.attrDefault('propWithDefault', 20)
   *       .attrAsCollection('hasManyRelation', 'ModelName')
   *       .on('after-create', function() {
   *         // do something after create.
   *       });
   * });
   * ```
   *
   */
  function Builder(_baseDsl) {

    var mappings = {
      init: ['attrDefault'],
      mask: ['attrMask'],
      ignore: ['attrMask'],
      map: ['attrMap', 'force'],
      decode: ['attrDecoder', 'param', 'chain'],
      encode: ['attrEncoder', 'param', 'chain'],
      'volatile': ['attrVolatile']
    };

    // DSL core functions.

    this.dsl = extend(_baseDsl, {

      /**
       * @memberof BuilderApi#
       *
       * @description Parses a description object, calls the proper builder method depending
       * on each property description type.
       *
       * @param {object} _description The description object
       * @return {BuilderApi} self
       */
      describe: function(_description) {
        forEach(_description, function(_desc, _attr) {
          switch(_attr.charAt(0)) {
          case '@':
            $log.warn('Usage of @ in description objects will be removed in 1.2, use a $extend block instead');
            this.define('Scope.' + _attr.substring(1), _desc); // set static method
            break;
          case '~':
            _attr = inflector.parameterize(_attr.substring(1));
            $log.warn('Usage of ~ in description objects will be removed in 1.2, use a $hooks block instead');
            this.on(_attr, _desc);
            break;
          default:
            if(_attr === '$config') { // configuration block
              for(var key in _desc) {
                if(_desc.hasOwnProperty(key)) this.setProperty(key, _desc[key]);
              }
            } else if(_attr === '$extend') { // extension block
              for(var key in _desc) {
                if(_desc.hasOwnProperty(key)) this.define(key, _desc[key]);
              }
            } else if(_attr === '$hooks') { // hooks block
              for(var key in _desc) {
                if(_desc.hasOwnProperty(key)) this.on(key, _desc[key]);
              }
            } else if(VAR_RGX.test(_attr)) {
              $log.warn('Usage of ~ in description objects will be removed in 1.2, use a $config block instead');
              _attr = inflector.camelize(_attr.toLowerCase());
              this.setProperty(_attr, _desc);
            }
            else if(isObject(_desc)) this.attribute(_attr, _desc);
            else if(isFunction(_desc)) this.define(_attr, _desc);
            else this.attrDefault(_attr, _desc);
          }
        }, this);
        return this;
      },

      /**
       * @memberof BuilderApi#
       *
       * @description Extends the builder DSL
       *
       * Adds a function to de builder and alternatively maps the function to an
       * attribute definition keyword that can be later used when calling
       * `define` or `attribute`.
       *
       * Mapping works as following:
       *
       *    // Given the following call
       *    builder.extend('testAttr', function(_attr, _test, _param1, param2) {
       *      // wharever..
       *    }, ['test', 'testP1', 'testP2']);
       *
       *    // A call to
       *    builder.attribute('chapter', { test: 'hello', testP1: 'world' });
       *
       *    // Its equivalent to
       *    builder.testAttr('chapter', 'hello', 'world');
       *
       * The method can also be passed an object with various methods to be added.
       *
       * @param {string|object} _name function name or object to merge
       * @param {function} _fun function
       * @param {array} _mapping function mapping definition
       * @return {BuilderApi} self
       */
      extend: function(_name, _fun, _mapping) {
        if(typeof _name === 'string') {
          this[_name] = Utils.override(this[name], _fun);
          if(_mapping) {
            mappings[_mapping[0]] = _mapping;
            _mapping[0] = _name;
          }
        } else Utils.extendOverriden(this, _name);
        return this;
      },

      /**
       * @memberof BuilderApi#
       *
       * @description Sets an attribute properties.
       *
       * This method uses the attribute modifiers mapping to call proper
       * modifiers on the argument.
       *
       * For example, using the following description on the createdAt attribute
       *
       *    { decode: 'date', param; 'YY-mm-dd' }
       *
       * Is the same as calling
       *
       *    builder.attrDecoder('createdAt', 'date', 'YY-mm-dd')
       *
       * @param {string} _name Attribute name
       * @param {object} _description Description object
       * @return {BuilderApi} self
       */
      attribute: function(_name, _description) {
        var key, map, args, i;
        for(key in _description) {
          if(_description.hasOwnProperty(key)) {
            map = mappings[key];
            if(map) {
              args = [_name, _description[key]];
              for(i = 1; i < map.length; i++) {
                args.push(_description[map[i]]);
              }
              args.push(_description);
              this[map[0]].apply(this, args);
            }
          }
        }
        return this;
      }
    });
  }

  Builder.prototype = {

    // use the builder to process a mixin chain
    chain: function(_chain) {
      for(var i = 0, l = _chain.length; i < l; i++) {
        this.mixin(_chain[i]);
      }
    },

    // use the builder to process a single mixin
    mixin: function(_mix) {
      if(_mix.$$chain) {
        this.chain(_mix.$$chain);
      } else if(typeof _mix === 'string') {
        this.mixin($injector.get(_mix));
      } else if(isArray(_mix)) {
        this.chain(_mix);
      } else if(isFunction(_mix)) {
        _mix.call(this.dsl, $injector);
      } else {
        this.dsl.describe(_mix);
      }
    }
  };

  return Builder;

}]);
RMModule.factory('RMBuilderComputed', ['restmod',
  function(restmod) {
    /**
     * @class RMBuilderComputedApi
     *
     * @description
     *
     * Builder DSL extension to build computed properties.
     *
     * A computed property is a "virtual" property which is created using
     * other model properties. For example, a user has a firstName and lastName,
     * A computed property, fullName, is generated from the two.
     *
     * Adds the following property modifiers:
     * * `computed` function will be assigned as getter to Model, maps to {@link RMBuilderComputedApi#attrAsComputed}
     *
     */
    var EXT = {

      /**
       * @memberof RMBuilderComputedApi#
       *
       * @description Registers a model computed property
       *
       * @param {string}  _attr Attribute name
       * @param {function} _fn Function that returns the desired attribute value when run.
       * @return {BuilderApi} self
       */
      attrAsComputed: function(_attr, _fn) {
        this.attrComputed(_attr, _fn);
        return this;
      }
    };

    return restmod.mixin(function() {
      this.extend('attrAsComputed', EXT.attrAsComputed, ['computed']);
    });
  }
]);
RMModule.factory('RMBuilderExt', ['$injector', '$parse', 'inflector', '$log', 'restmod', function($injector, $parse, inflector, $log, restmod) {

  var bind = angular.bind,
      isFunction = angular.isFunction;

  /**
   * @class ExtendedBuilderApi
   *
   * @description
   *
   * Non-core builder extensions
   *
   * Adds the following property modifiers:
   * * `serialize` sets the encoder and decoder beaviour for an attribute, maps to {@link BuilderApi#attrSerializer}
   *
   */
  var EXT = {
    /**
     * @memberof ExtendedBuilderApi#
     *
     * @description Sets an url prefix to be added to every url generated by the model.
     *
     * This applies even to objects generated by the `$single` method.
     *
     * This method is intended to be used in a base model mixin so everymodel that extends from it
     * gets the same url prefix.
     *
     * Usage:
     *
     * ```javascript
     * var BaseModel = restmod.mixin(function() {
     *   this.setUrlPrefix('/api');
     * })
     *
     * var bike = restmod.model('/bikes', BaseModel).$build({ id: 1 });
     * console.log(bike.$url()) // outputs '/api/bikes/1'
     * ```
     *
     * @param {string} _prefix url portion
     * @return {BuilderApi} self
     */
    setUrlPrefix: function(_prefix) {
      return this.setProperty('urlPrefix', _prefix);
    },

    /**
     * @memberof ExtendedBuilderApi#
     *
     * @description Changes the model's primary key.
     *
     * Primary keys are passed to scope's url methods to generate urls. The default primary key is 'id'.
     *
     * **ATTENTION** Primary keys are extracted from raw data, so _key must use raw api naming.
     *
     * @param {string|function} _key New primary key.
     * @return {BuilderApi} self
     */
    setPrimaryKey: function(_key) {
      return this.setProperty('primaryKey', _key);
    },

    /**
     * @memberof ExtendedBuilderApi#
     *
     * @description Assigns a serializer to a given attribute.
     *
     * A _serializer is:
     * * an object that defines both a `decode` and a `encode` method
     * * a function that when called returns an object that matches the above description.
     * * a string that represents an injectable that matches any of the above descriptions.
     *
     * @param {string} _name Attribute name
     * @param {string|object|function} _serializer The serializer
     * @return {BuilderApi} self
     */
    attrSerializer: function(_name, _serializer, _opt) {
      if(typeof _serializer === 'string') {
        _serializer = $injector.get(inflector.camelize(_serializer, true) + 'Serializer');
      }

      if(isFunction(_serializer)) _serializer = _serializer(_opt);
      if(_serializer.decode) this.attrDecoder(_name, bind(_serializer, _serializer.decode));
      if(_serializer.encode) this.attrEncoder(_name, bind(_serializer, _serializer.encode));
      return this;
    },

    /// Experimental modifiers

    /**
     * @memberof ExtendedBuilderApi#
     *
     * @description Expression attributes are evaluated every time new data is fed to the model.
     *
     * @param {string}  _name Attribute name
     * @param {string} _expr Angular expression to evaluate
     * @return {BuilderApi} self
     */
    attrExpression: function(_name, _expr) {
      var filter = $parse(_expr);
      return this.on('after-feed', function() {
        this[_name] = filter(this);
      });
    }
  };

  return restmod.mixin(function() {
    this.extend('setUrlPrefix', EXT.setUrlPrefix)
        .extend('setPrimaryKey', EXT.setPrimaryKey)
        .extend('attrSerializer', EXT.attrSerializer, ['serialize']);
  });
}]);
RMModule.factory('RMBuilderRelations', ['$injector', 'inflector', '$log', 'RMUtils', 'restmod', 'RMPackerCache', function($injector, inflector, $log, Utils, restmod, packerCache) {

  // wraps a hook callback to give access to the $owner object
  function wrapHook(_fun, _owner) {
    return function() {
      var oldOwner = this.$owner;
      this.$owner = _owner;
      try {
        return _fun.apply(this, arguments);
      } finally {
        this.$owner = oldOwner;
      }
    };
  }

  // wraps a bunch of hooks
  function applyHooks(_target, _hooks, _owner) {
    for(var key in _hooks) {
      if(_hooks.hasOwnProperty(key)) {
        _target.$on(key, wrapHook(_hooks[key], _owner));
      }
    }
  }

  /**
   * @class RelationBuilderApi
   *
   * @description
   *
   * Builder DSL extension to build model relations
   *
   * Adds the following property modifiers:
   * * `hasMany` sets a one to many hierarchical relation under the attribute name, maps to {@link RelationBuilderApi#attrAsCollection}
   * * `hasOne` sets a one to one hierarchical relation under the attribute name, maps to {@link RelationBuilderApi#attrAsResource}
   * * `belongsTo` sets a one to one reference relation under the attribute name, maps to {@link RelationBuilderApi#attrAsReference}
   * * `belongsToMany` sets a one to many reference relation under the attribute name, maps to {@link RelationBuilderApi#attrAsReferenceToMany}
   *
   */
  var EXT = {
    /**
     * @memberof RelationBuilderApi#
     *
     * @description Registers a model **resources** relation
     *
     * @param {string}  _name Attribute name
     * @param {string|object} _model Other model, supports a model name or a direct reference.
     * @param {string} _url Partial url
     * @param {string} _source Inline resource alias (optional)
     * @param {string} _inverseOf Inverse property name (optional)
     * @param {object} _params Generated collection default parameters
     * @param {object} _hooks Hooks to be applied just to the generated collection
     * @return {BuilderApi} self
     */
    attrAsCollection: function(_attr, _model, _url, _source, _inverseOf, _params, _hooks) {

      var options, globalHooks; // global relation configuration

      this.attrDefault(_attr, function() {

        if(typeof _model === 'string') {
          _model = $injector.get(_model);

          // retrieve global options
          options = _model.getProperty('hasMany', {});
          globalHooks = options.hooks;

          if(_inverseOf) {
            var desc = _model.$$getDescription(_inverseOf);
            if(!desc || desc.relation !== 'belongs_to') {
              $log.warn('Must define an inverse belongsTo relation for inverseOf to work');
              _inverseOf = false; // disable the inverse if no inverse relation is found.
            }
          }
        }

        var scope = this.$buildScope(_model, _url || _model.encodeUrlName(_attr)), col;

        // setup collection
        col = _model.$collection(_params || null, scope);
        if(globalHooks) applyHooks(col, globalHooks, this);
        if(_hooks) applyHooks(col, _hooks, this);
        col.$dispatch('after-has-many-init');

        // set inverse property if required.
        if(_inverseOf) {
          var self = this;
          col.$on('after-add', function(_obj) {
            _obj[_inverseOf] = self;
          });
        }

        return col;
      });

      if(_source || _url) this.attrMap(_attr, _source || _url);

      this.attrDecoder(_attr, function(_raw) {
            this[_attr].$reset().$decode(_raw);
          })
          .attrMask(_attr, Utils.WRITE_MASK)
          .attrMeta(_attr, { relation: 'has_many' });

      return this;
    },

    /**
     * @memberof RelationBuilderApi#
     *
     * @description Registers a model **resource** relation
     *
     * @param {string}  _name Attribute name
     * @param {string|object} _model Other model, supports a model name or a direct reference.
     * @param {string} _url Partial url (optional)
     * @param {string} _source Inline resource alias (optional)
     * @param {string} _inverseOf Inverse property name (optional)
     * @param {object} _hooks Hooks to be applied just to the instantiated record
     * @return {BuilderApi} self
     */
    attrAsResource: function(_attr, _model, _url, _source, _inverseOf, _hooks) {

      var options, globalHooks; // global relation configuration

      this.attrDefault(_attr, function() {

        if(typeof _model === 'string') {
          _model = $injector.get(_model);

          // retrieve global options
          options = _model.getProperty('hasOne', {});
          globalHooks = options.hooks;

          if(_inverseOf) {
            var desc = _model.$$getDescription(_inverseOf);
            if(!desc || desc.relation !== 'belongs_to') {
              $log.warn('Must define an inverse belongsTo relation for inverseOf to work');
              _inverseOf = false; // disable the inverse if no inverse relation is found.
            }
          }
        }

        var scope = this.$buildScope(_model, _url || _model.encodeUrlName(_attr)), inst;

        // setup record
        inst = _model.$new(null, scope);
        if(globalHooks) applyHooks(inst, globalHooks, this);
        if(_hooks) applyHooks(inst, _hooks, this);
        inst.$dispatch('after-has-one-init');

        if(_inverseOf) {
          inst[_inverseOf] = this;
        }

        return inst;
      });

      if(_source || _url) this.attrMap(_attr, _source || _url);

      this.attrDecoder(_attr, function(_raw) {
            this[_attr].$decode(_raw);
          })
          .attrMask(_attr, Utils.WRITE_MASK)
          .attrMeta(_attr, { relation: 'has_one' });

      return this;
    },

    /**
     * @memberof RelationBuilderApi#
     *
     * @description Registers a model **reference** relation.
     *
     * A reference relation expects the host object to provide the primary key of the referenced object or the referenced object itself (including its key).
     *
     * For example, given the following resource structure with a foreign key:
     *
     * ```json
     * {
     *   user_id: 20
     * }
     * ```
     *
     * Or this other structure with inlined data:
     *
     * ```json
     * {
     *   user: {
     *     id: 30,
     *     name: 'Steve'
     *   }
     * }
     * ```
     *
     * You should define the following model:
     *
     * ```javascript
     * restmod.model('/bikes', {
     *   user: { belongsTo: 'User' } // works for both cases detailed above
     * })
     * ```
     *
     * The object generated by the relation is not scoped to the host object, but to it's base class instead (not like hasOne),
     * so the type should not be nested.
     *
     * Its also posible to override the **foreign key name**.
     *
     * When a object containing a belongsTo reference is encoded for a server request, only the primary key value is sent using the
     * same **foreign key name** that was using on decoding. (`user_id` in the above example).
     *
     * @param {string}  _name Attribute name
     * @param {string|object} _model Other model, supports a model name or a direct reference.
     * @param {string} _key foreign key property name (optional, defaults to _attr + '_id').
     * @param {bool} _prefetch if set to true, $fetch will be automatically called on relation object load.
     * @return {BuilderApi} self
     */
    attrAsReference: function(_attr, _model, _key, _prefetch) {

      this.attrDefault(_attr, null)
          .attrMask(_attr, Utils.WRITE_MASK)
          .attrMeta(_attr, { relation: 'belongs_to' });

      function loadModel() {
        if(typeof _model === 'string') {
          _model = $injector.get(_model);
        }
      }

      // TODO: the following code assumes that attribute is at root level! (when uses this[_attr] or this[_attr + 'Id'])

      // inline data handling
      this.attrDecoder(_attr, function(_raw) {
        if(_raw === null) return null;
        loadModel();
        if(!this[_attr] || this[_attr].$pk !== _model.inferKey(_raw)) {
          this[_attr] = _model.$buildRaw(_raw);
        } else {
          this[_attr].$decode(_raw);
        }
      });

      // foreign key handling
      if(_key !== false) {
        this.attrMap(_attr + 'Id', _key || '*', true) // set a forced mapping to always generate key
            .attrDecoder(_attr + 'Id', function(_value) {
              if(_value === undefined) return;
              if(!this[_attr] || this[_attr].$pk !== _value) {
                if(_value !== null && _value !== false) {
                  loadModel();
                  this[_attr] = packerCache.resolve(_model.$new(_value)); // resolve inmediatelly if cached
                  if(_prefetch) this[_attr].$fetch();
                } else {
                  this[_attr] = null;
                }
              }
            })
            .attrEncoder(_attr + 'Id', function() {
              return this[_attr] ? this[_attr].$pk : null;
            });
      }

      return this;
    },

    /**
     * @memberof RelationBuilderApi#
     *
     * @description Registers a model **reference** relation.
     *
     * A reference relation expects the host object to provide the primary key of the referenced objects or the referenced objects themselves (including its key).
     *
     * For example, given the following resource structure with a foreign key array:
     *
     * ```json
     * {
     *   users_ids: [20, 30]
     * }
     * ```
     *
     * Or this other structure with inlined data:
     *
     * ```json
     * {
     *   users: [{
     *     id: 20,
     *     name: 'Steve'
     *   },{
     *     id: 30,
     *     name: 'Pili'
     *   }]
     * }
     * ```
     *
     * You should define the following model:
     *
     * ```javascript
     * restmod.model('/bikes', {
     *   users: { belongsToMany: 'User' } // works for both cases detailed above
     * })
     * ```
     *
     * The object generated by the relation is not scoped to the host object, but to it's base class instead (unlike hasMany),
     * so the referenced type should not be nested.
     *
     * When a object containing a belongsToMany reference is encoded for a server request, only the primary key value is sent for each object.
     *
     * @param {string}  _name Attribute name
     * @param {string|object} _model Other model, supports a model name or a direct reference.
     * @param {string} _keys Server name for the property that holds the referenced keys in response and request.
     * @return {BuilderApi} self
     */
    attrAsReferenceToMany: function(_attr, _model, _keys) {

      this.attrDefault(_attr, function() { return []; })
          .attrMask(_attr, Utils.WRITE_MASK)
          .attrMeta(_attr, { relation: 'belongs_to_many' });

      // TODO: the following code assumes that attribute is at root level! (when uses this[_attr])

      function loadModel() {
        if(typeof _model === 'string') {
          _model = $injector.get(_model);
        }
      }

      function processInbound(_raw, _ref) {
        loadModel();
        _ref.length = 0;
        // TODO: reuse objects that do not change (compare $pks)
        for(var i = 0, l = _raw.length; i < l; i++) {
          if(typeof _raw[i] === 'object') {
            _ref.push(_model.$buildRaw(_raw[i]));
          } else {
            _ref.push(packerCache.resolve(_model.$new(_raw[i])));
          }
        }
      }

      // inline data handling
      this.attrDecoder(_attr, function(_raw) {
        // TODO: if _keys == _attr then inbound data will be processed twice!
        if(_raw) processInbound(_raw, this[_attr]);
      });

      // foreign key handling
      if(_keys !== false) {
        var attrIds = inflector.singularize(_attr) + 'Ids';
        this.attrMap(attrIds, _keys || '*', true)
            .attrDecoder(attrIds, function(_raw) {
              if(_raw) processInbound(_raw, this[_attr]);
            })
            .attrEncoder(attrIds, function() {
              var result = [], others = this[_attr];
              for(var i = 0, l = others.length; i < l; i++) {
                result.push(others[i].$pk);
              }
              return result;
            });
      }

      return this;
    }
  };

  return restmod.mixin(function() {
    this.extend('attrAsCollection', EXT.attrAsCollection, ['hasMany', 'path', 'source', 'inverseOf', 'params', 'hooks']) // TODO: rename source to map, but disable attrMap if map is used here...
        .extend('attrAsResource', EXT.attrAsResource, ['hasOne', 'path', 'source', 'inverseOf', 'hooks'])
        .extend('attrAsReference', EXT.attrAsReference, ['belongsTo', 'key', 'prefetch'])
        .extend('attrAsReferenceToMany', EXT.attrAsReferenceToMany, ['belongsToMany', 'keys']);
  });

}]);
RMModule.factory('RMModelFactory', ['$injector', '$log', 'inflector', 'RMUtils', 'RMScopeApi', 'RMCommonApi', 'RMRecordApi', 'RMListApi', 'RMCollectionApi', 'RMExtendedApi', 'RMSerializer', 'RMBuilder',
  function($injector, $log, inflector, Utils, ScopeApi, CommonApi, RecordApi, ListApi, CollectionApi, ExtendedApi, Serializer, Builder) {

  var NAME_RGX = /(.*?)([^\/]+)\/?$/,
      extend = Utils.extendOverriden;

  return function(_baseUrl, _baseChain) {

    // IDEA: make constructor inaccessible, use separate type for records?
    // * Will ensure proper usage.
    // * Will lose type checking
    function Model(_scope, _pk) {
      this.$scope = _scope || Model;
      this.$pk = _pk;
      this.$initialize();
    }

    _baseUrl = Utils.cleanUrl(_baseUrl);

    var config = {
        primaryKey: 'id',
        urlPrefix: null
      },
      serializer = new Serializer(Model),
      defaults = [],                    // attribute defaults as an array of [key, value]
      computes = [],                    // computed attributes
      meta = {},                        // atribute metadata
      hooks = {},
      builder;                          // the model builder

    // make sure the resource name and plural name are available if posible:

    if(!config.name && _baseUrl) {
      config.name = inflector.singularize(_baseUrl.replace(NAME_RGX, '$2'));
    }

    if(!config.plural && config.name) {
      config.plural = inflector.pluralize(config.name);
    }

    var Collection = Utils.buildArrayType(),
        List = Utils.buildArrayType(),
        Dummy = function(_asCollection) {
          this.$isCollection = _asCollection;
          this.$initialize(); // TODO: deprecate this
        };

    // Collection factory
    function newCollection(_params, _scope) {
      var col = new Collection();
      col.$scope = _scope || Model;
      col.$params = _params;
      col.$initialize();
      return col;
    }

    ///// Setup static api

    /**
     * @class StaticApi
     * @extends ScopeApi
     * @extends CommonApi
     *
     * @description
     *
     * The restmod type API, every generated restmod model type exposes this API.
     *
     * @property {object} $type Reference to the type itself, for compatibility with the {@link ScopeApi}
     *
     * #### About object creation
     *
     * Direct construction of object instances using `new` is not recommended. A collection of
     * static methods are available to generate new instances of a model, for more information
     * read the {@link ModelCollection} documentation.
     */
    extend(Model, {

      // gets an attribute description (metadata)
      $$getDescription: function(_attribute) {
        return meta[_attribute];
      },

      // definition chain
      $$chain: [],

      // keep a reference to type itself for scope api compatibility
      $type: Model,

      // creates a new model bound by default to the static scope
      $new: function(_pk, _scope) {
        return new Model(_scope || Model, _pk);
      },

      // creates a new collection bound by default to the static scope
      $collection: newCollection,

      // gets scope url
      $url: function() {
        return config.urlPrefix ? Utils.joinUrl(config.urlPrefix, _baseUrl) : _baseUrl;
      },

      // bubbles events comming from related resources
      $dispatch: function(_hook, _args, _ctx) {
        var cbs = hooks[_hook], i, cb;
        if(cbs) {
          for(i = 0; !!(cb = cbs[i]); i++) {
            cb.apply(_ctx || this, _args || []);
          }
        }
        return this;
      },

      /**
       * @memberof StaticApi#
       *
       * @description
       *
       * Extracts the primary key from raw record data.
       *
       * Uses the key configured in the PRIMARY_KEY variable or 'id' by default.
       *
       * Some considerations:
       * * This method can be overriden to handle other scenarios.
       * * This method should not change the raw data passed to it.
       * * The primary key value extracted by this method should be comparable using the == operator.
       *
       * @param  {string} _rawData Raw object data (before it goes into decode)
       * @return {mixed} The primary key value.
       */
      inferKey: function(_rawData) {
        if(!_rawData || typeof _rawData[config.primaryKey] === 'undefined') return null;
        return _rawData[config.primaryKey];
      },

      /**
       * @memberof StaticApi#
       *
       * @description
       *
       * Gets a model's internal property value.
       *
       * Some builtin properties:
       * * url
       * * urlPrefix
       * * primaryKey
       *
       * @param  {string} _key Property name
       * @param  {mixed} _default Value to return if property is not defined
       * @return {mixed} value
       */
      getProperty: function(_key, _default) {
        var val = config[_key];
        return val !== undefined ? val : _default;
      },

      /**
       * @memberof StaticApi#
       *
       * @description Returns true if model is nested.
       *
       * An nested model can only be used as a nested resource (using hasMany or hasOne relations)
       *
       * @return {boolean} true if model is nested.
       */
      isNested: function() {
        return !_baseUrl;
      },

      /**
       * @memberof StaticApi#
       *
       * @description Returns a resource bound to a given url, with no parent scope.
       *
       * This can be used to create singleton resources:
       *
       * ```javascript
       * module('BikeShop', []).factory('Status', function(restmod) {
       *   return restmod.model(null).$single('/api/status');
       * };)
       * ```
       *
       * @param {string} _url Url to bound resource to.
       * @return {Model} new resource instance.
       */
      single: function(_url) {
        return new Model({
          $urlFor: function() {
            return config.urlPrefix ? Utils.joinUrl(config.urlPrefix, _url) : _url;
          }
        }, '');
      },

      /**
       * Builds a new dummy resource, the dummy resource can be used to execute random queries
       * using the same infrastructure as records and collections.
       *
       * @return {Dummy} the dummy object
       */
      dummy: function(_asCollection) {
        return new Dummy(_asCollection);
      },

      /**
       * Creates a new record list.
       *
       * A list is a ordered set of records not bound to a particular scope.
       *
       * Contained records can belong to any scope.
       *
       * @return {List} the new list
       */
      list: function(_items) {
        var list = new List();
        if(_items) list.push.apply(list, _items);
        return list;
      },

      /**
       * @memberof StaticApi#
       *
       * @description Returns the model API name.
       *
       * This name should match the one used throughout the API. It's only used by some extended
       * functionality, like the default packer.
       *
       * By default model name is infered from the url, but for nested models and special cases
       * it should be manually set by writing the name and plural properties:
       *
       * ```javascript
       * restmod.model(null, {
       *   __name__: 'resource',
       *   __plural__: 'resourciness' // set only if inflector cant properly gess the name.
       * });
       * ```
       *
       * @return {boolean} If true, return plural name
       * @return {string} The base url.
       */
      identity: function(_plural) {
        return _plural ? config.plural : config.name;
      },

      /**
       * @memberof StaticApi#
       *
       * @description Modifies model behavior.
       *
       * @params {mixed} _mixins One or more mixins or model definitions.
       * @return {Model} The model
       */
      mix: function(/* mixins */) {
        builder.chain(arguments);
        this.$$chain.push.apply(this.$$chain, arguments);
        return this;
      },

      // Strategies

      /**
       * @memberof StaticApi#
       *
       * @description The model unpacking strategy
       *
       * This method is called to extract record data from a request response, its also
       * responsible of handling the response metadata.
       *
       * Override this method to change the metadata processing strategy, by default its a noop
       *
       * @params {mixed} _resource Related resource instance
       * @params {mixed} _raw Response raw data
       * @return {mixed} Resource raw data
       */
      unpack: function(_resource, _raw) { return _raw; },

      /**
       * @memberof StaticApi#
       *
       * @description The model packing strategy
       *
       * This method is called to wrap raw record data to be sent in a request.
       *
       * Override this method to change the request packing strategy, by default its a noop
       *
       * @params {mixed} _resource Related resource instance
       * @params {mixed} _raw Record data to be sent (can be an array if resource is collection)
       * @return {mixed} Wrapped data
       */
      pack: function(_record, _raw) { return _raw; },

      /**
       * @memberof StaticApi#
       *
       * @description The model decoding strategy
       *
       * This method is called to populate a record from raw data (unppacked)
       */
      decode: serializer.decode,

      /**
       * @memberof StaticApi#
       *
       * @description The model encoding strategy
       *
       * This method is called to extract raw data from a record to be sent to server (before packing)
       */
      encode: serializer.encode,

      /**
       * @memberof StaticApi#
       *
       * @description The model name decoding strategy
       *
       * This method is called on every raw record data property to rename it, by default is not defined.
       *
       * Override this method to change the property renaming strategy.
       *
       * @params {string} _name Response (raw) name
       * @return {string} Record name
       */
      decodeName: null,

      /**
       * @memberof StaticApi#
       *
       * @description The model name encoding strategy
       *
       * This method is called when encoding a record to rename the record properties into the raw data properties,
       * by default is not defined.
       *
       * Override this method to change the property renaming strategy
       *
       * @params {string} _name Record name
       * @return {string} Response (raw) name
       */
      encodeName: null,

      /**
       * @memberof StaticApi#
       *
       * @description The model name to url encoding strategy
       *
       * This method is called when translating a name into an url fragment (mainly by relations).
       *
       * By default it uses the `inflector.parameterize` method, in 1.2 this will change and the default
       * behaviour will be to do nothing.
       *
       * @params {string} _name local name
       * @return {string} url fragment
       */
      encodeUrlName: function(_name) {
        $log.warn('Default paremeterization of urls will be disabled in 1.2, override Model.encodeUrlName with inflector.parameterize in your base model to keep the same behaviour.');
        return inflector.parameterize(_name);
      }

    }, ScopeApi);

    ///// Setup record api

    extend(Model.prototype, {

      $type: Model,

      // default initializer: loads the default parameter values
      $initialize: function() {
        var tmp, i, self = this;
        for(i = 0; (tmp = defaults[i]); i++) {
          this[tmp[0]] = (typeof tmp[1] === 'function') ? tmp[1].apply(this) : tmp[1];
        }

        for(i = 0; (tmp = computes[i]); i++) {
          Object.defineProperty(self, tmp[0], {
            enumerable: true,
            get: tmp[1]
          });
        }
      }

    }, CommonApi, RecordApi, ExtendedApi);

    ///// Setup collection api

    extend(Collection.prototype, {

      $type: Model,

      // provide record contructor
      $new: function(_pk, _scope) {
        return Model.$new(_pk, _scope || this);
      },

      // provide collection constructor
      $collection: function(_params, _scope) {
        _params = this.$params ? angular.extend({}, this.$params, _params) : _params;
        return newCollection(_params, _scope || this.$scope);
      }

    }, ListApi, ScopeApi, CommonApi, CollectionApi, ExtendedApi);

    ///// Setup list api

    extend(List.prototype, {

      $type: Model

    }, ListApi, CommonApi);

    ///// Setup dummy api

    extend(Dummy.prototype, {

      $type: Model,

      $initialize: function() {
        // Nothing by default
      }

    }, CommonApi);

    ///// Setup builder

    var APIS = {
      Model: Model,
      Record: Model.prototype,
      Collection: Collection.prototype,
      List: List.prototype,
      Dummy: Dummy.prototype
    };

    // helper used to extend api's
    function helpDefine(_api, _name, _fun) {
      var api = APIS[_api];

      Utils.assert(!!api, 'Invalid api name $1', _api);

      if(_name) {
        api[_name] = Utils.override(api[_name], _fun);
      } else {
        Utils.extendOverriden(api, _fun);
      }
    }

    // load the builder
    builder = new Builder(angular.extend(serializer.dsl(), {

      /**
       * @memberof BuilderApi#
       *
       * Sets one of the model's configuration properties.
       *
       * The following configuration parameters are available by default:
       * * primaryKey: The model's primary key, defaults to **id**. Keys must use server naming convention!
       * * urlPrefix: Url prefix to prepend to resource url, usefull to use in a base mixin when multiples models have the same prefix.
       * * url: The resource base url, null by default. If not given resource is considered nested.
       *
       * @param {string} _key The configuration key to set.
       * @param {mixed} _value The configuration value.
       * @return {BuilderApi} self
       */
      setProperty: function (_key, _value) {
        config[_key] = _value;
        return this;
      },

      /**
       * @memberof BuilderApi#
       *
       * @description Sets the default value for an attribute.
       *
       * Defaults values are set only on object construction phase.
       *
       * if `_init` is a function, then its evaluated every time the
       * default value is required.
       *
       * @param {string} _attr Attribute name
       * @param {mixed} _init Defaulf value / iniline function
       * @return {BuilderApi} self
       */
      attrDefault: function(_attr, _init) {
        defaults.push([_attr, _init]);
        return this;
      },

      /**
       * @memberof BuilderApi#
       *
       * @description Sets a computed value for an attribute.
       *
       * Computed values are set only on object construction phase.
       * Computed values are always masked
       *
       * @param {string} _attr Attribute name
       * @param {function} _fn Function that returns value
       * @return {BuilderApi} self
       */
      attrComputed: function(_attr, _fn) {
        computes.push([_attr, _fn]);
        this.attrMask(_attr, true);
        return this;
      },

      /**
       * @memberof BuilderApi#
       *
       * @description Registers attribute metadata.
       *
       * @param {string} _name Attribute name
       * @param {object} _metadata Attribute metadata
       * @return {BuilderApi} self
       */
      attrMeta: function(_name, _metadata) {
        meta[_name] = extend(meta[_name] || {}, _metadata);
        return this;
      },

      /**
       * @memberof BuilderApi#
       *
       * @description Adds methods to the model
       *
       * This method allows to extend the different model API's.
       *
       * The following API's can be extended using this method:
       * * Model: The static API, affects the Model object itself.
       * * Record: Affects each record generated by the model.
       * * Collection: Affects each collection generated by the model.
       * * Scope: Affects both the static API and collections.
       * * Resource: Affects records and collections.
       *
       * If no api is given
       *
       *
       * If no scope is given,
       * By default this method extends the **Record** prototype.
       * If called with an object
       * instead of a function it can be used to extend the collection and the type with
       * specific implementations.
       *
       * Usage:
       *
       * ```javascript
       * restmod.mixin(function() {
       *   this.define('myRecordMethod', function() {})
       *       .define('Model.myStaticMethod', function() {})
       *       .define('Collection', { }); // object to extend collection api with
       * });
       * ```
       *
       * It is posible to override an existing method using define, if overriden,
       * the old method can be called using `this.$super` inside de new method.
       *
       * @param {string} _where
       * @param {function} _fun Function to define or object with particular implementations
       * @param {string} _api One of the api names listed above, if not given defaults to 'Record'
       * @return {BuilderApi} self
       */
      define: function(_where, _fun) {

        var name = false, api = 'Record';
        if(typeof _fun === 'object' && _fun) {
          api = _where;
        } else {
          name = _where.split('.');
          if(name.length === 1) {
            name = name[0];
          } else {
            api = name[0];
            name = name[1];
          }
        }

        switch(api) {
        // Virtual API's
        case 'List':
          helpDefine('Collection', name, _fun);
          helpDefine('List', name, _fun);
          break;
        case 'Scope':
          helpDefine('Model', name, _fun);
          helpDefine('Collection', name, _fun);
          break;
        case 'Resource':
          helpDefine('Record', name, _fun);
          helpDefine('Collection', name, _fun);
          helpDefine('List', name, _fun);
          helpDefine('Dummy', name, _fun);
          break;
        default:
          helpDefine(api, name, _fun);
        }

        return this;
      },

      /**
       * @memberof BuilderApi#
       *
       * @description Adds an event hook
       *
       * Hooks are used to extend or modify the model behavior, and are not
       * designed to be used as an event listening system.
       *
       * The given function is executed in the hook's context, different hooks
       * make different parameters available to callbacks.
       *
       * @param {string} _hook The hook name, refer to restmod docs for builtin hooks.
       * @param {function} _do function to be executed
       * @return {BuilderApi} self
       */
      on: function(_hook, _do) {
        (hooks[_hook] || (hooks[_hook] = [])).push(_do);
        return this;
      }
    }));

    builder.chain(_baseChain); // load base chain.

    return Model;
  };

}]);

/**
 * @class FastQ
 *
 * @description
 *
 * Synchronous promise implementation (partial)
 *
 */
RMModule.factory('RMFastQ', [function() {

  var isFunction = angular.isFunction,
      catchError = function(_error) {
        return this.then(null, _error);
      };

  function simpleQ(_val, _withError) {

    if(_val && isFunction(_val.then)) return wrappedQ(_val);

    return {
      simple: true,

      then: function(_success, _error) {
        return simpleQ(_withError ? _error(_val) : _success(_val));
      },
      'catch': catchError,
      'finally': function(_cb) {
        var result = _cb();
        if(result && isFunction(_val.then)) {
          // if finally returns a promise, then
          return wrappedQ(_val.then(
            function() { return _withError ? simpleQ(_val, true) : _val; },
            function() { return _withError ? simpleQ(_val, true) : _val; })
          );
        } else {
          return this;
        }
      }
    };
  }

  function wrappedQ(_promise) {
    if(_promise.simple) return _promise;

    var simple;

    // when resolved, make $q a simpleQ
    _promise.then(function(_val) {
      simple = simpleQ(_val);
    }, function(_val) {
      simple = simpleQ(_val, true);
    });

    return {
      then: function(_success, _error) {
        return simple ?
          simple.then(_success, _error) :
          wrappedQ(_promise.then(_success, _error));
      },
      'catch': catchError,
      'finally': function(_cb) {
        return simple ?
          simple['finally'](_cb) :
          wrappedQ(_promise['finally'](_cb));
      }
    };
  }

  return {
    reject: function(_reason) {
      return simpleQ(_reason, true);
    },

    // non waiting promise, if resolved executes immediately
    when: function(_val) {
      return simpleQ(_val, false);
    },

    wrap: wrappedQ
  };
}]);

RMModule.factory('RMPackerCache', [function() {

  var packerCache;

  /**
   * @class PackerCache
   *
   * @description
   *
   * The packer cache service enables packing strategies to register raw object data that can be then used by
   * supporting relations during the decoding process to preload other related resources.
   *
   * This is specially useful for apis that include linked objects data in external metadata.
   *
   * The packer cache is reset on every response unwrapping so it's not supposed to be used as an
   * application wide cache.
   *
   * ### For extension developers:
   *
   * Use the `feed` method to add new raw data to cache.
   *
   * ### For relation developers:
   *
   * Use the `resolve` method to inject cache data into a given identified record.
   *
   */
  return {
    /**
     * @memberof PackerCache#
     *
     * @description Feed data to the cache.
     *
     * @param {string} _name Resource name (singular)
     * @param {array} _rawRecords Raw record data as an array
     */
    feed: function(_name, _rawRecords) {
      packerCache[_name] = _rawRecords; // TODO: maybe append new record to support extended scenarios.
    },

    // IDEA: feedSingle: would require two step resolve many -> single

    /**
     * @memberof PackerCache#
     *
     * @description Searches for data matching the record's pk, if found data is then fed to the record using $decode.
     *
     * @param {RecordApi} _record restmod record to resolve, must be identified.
     * @return {RecordApi} The record, so call can be nested.
     */
    resolve: function(_record) {

      if(packerCache) { // make sure this is a packer cache enabled context.

        var modelType = _record.$type,
            cache = packerCache[modelType.identity(true)];

        if(cache && _record.$pk) {
          for(var i = 0, l = cache.length; i < l; i++) {
            if(_record.$pk === modelType.inferKey(cache[i])) { // this could be sort of slow? nah
              _record.$decode(cache[i]);
              break;
            }
          }
        }
      }

      return _record;
    },

    // private api method used by the unwrapper function.
    prepare: function() {
      packerCache = {};
    },

    // private api internal method used by the unwrapper function.
    clear: function() {
      packerCache = null;
    }
  };

}]);
RMModule.factory('RMSerializer', ['$injector', 'inflector', '$filter', 'RMUtils', function($injector, inflector, $filter, Utils) {

  function extract(_from, _path) {
    var node;
    for(var i = 0; _from && (node = _path[i]); i++) {
      _from = _from[node];
    }
    return _from;
  }

  function insert(_into, _path, _value) {
    for(var i = 0, l = _path.length-1; i < l; i++) {
      var node = _path[i];
      _into = _into[node] || (_into[node] = {});
    }
    _into[_path[_path.length-1]] = _value;
  }

  return function(_strategies) {

    var isArray = angular.isArray;

    // Private serializer attributes
    var masks = {},
        decoders = {},
        encoders = {},
        mapped = {},
        mappings = {},
        vol = {};

    function isMasked(_name, _mask) {
      if(typeof _mask === 'function') return _mask(_name);
      var mask = masks[_name];
      return (mask && (mask === true || mask.indexOf(_mask) !== -1));
    }

    function decode(_from, _to, _prefix, _mask, _ctx) {
      var key, decodedName, fullName, value, maps, isMapped, i, l,
          prefix = _prefix ? _prefix + '.' : '';

      // explicit mappings
      maps = mappings[_prefix];
      if(maps) {
        for(i = 0, l = maps.length; i < l; i++) {
          fullName = prefix + maps[i].path;
          if(isMasked(fullName, _mask)) continue;

          if(maps[i].map) {
            value = extract(_from, maps[i].map);
          } else {
            value = _from[_strategies.encodeName ? _strategies.encodeName(maps[i].path) : maps[i].path];
          }

          if(!maps[i].forced && value === undefined) continue;

          value = decodeProp(value, fullName, _mask, _ctx);
          if(value !== undefined) _to[maps[i].path] = value;
        }
      }

      // implicit mappings
      for(key in _from) {
        if(_from.hasOwnProperty(key)) {

          decodedName = _strategies.decodeName ? _strategies.decodeName(key) : key;
          if(decodedName[0] === '$') continue;

          if(maps) {
            // ignore already mapped keys
            // TODO: ignore nested mappings too.
            for(
              // is this so much faster than using .some? http://jsperf.com/some-vs-for-loop
              isMapped = false, i = 0, l = maps.length;
              i < l && !(isMapped = (maps[i].mapPath === key));
              i++
            );
            if(isMapped) continue;
          }

          fullName = prefix + decodedName;
          // prevent masked or already mapped properties to be set
          if(mapped[fullName] || isMasked(fullName, _mask)) continue;

          value = decodeProp(_from[key], fullName, _mask, _ctx);
          if(value !== undefined) _to[decodedName] = value; // ignore value if filter returns undefined
        }
      }
    }

    function decodeProp(_value, _name, _mask, _ctx) {
      var filter = decoders[_name], result = _value;

      if(filter) {
        result = filter.call(_ctx, _value);
      } else if(typeof _value === 'object') {
        // IDEA: make extended decoding/encoding optional, could be a little taxing for some apps
        if(isArray(_value)) {
          result = [];
          for(var i = 0, l = _value.length; i < l; i++) {
            result.push(decodeProp(_value[i], _name + '[]', _mask, _ctx));
          }
        } else if(_value) {
          result = {};
          decode(_value, result, _name, _mask, _ctx);
        }
      }

      return result;
    }

    function encode(_from, _to, _prefix, _mask, _ctx) {
      var key, fullName, encodedName, value, maps,
          prefix = _prefix ? _prefix + '.' : '';

      // implicit mappings
      for(key in _from) {
        if(_from.hasOwnProperty(key) && key[0] !== '$') {
          fullName = prefix + key;
          // prevent masked or already mapped properties to be copied
          if(mapped[fullName] || isMasked(fullName, _mask)) continue;

          value = encodeProp(_from[key], fullName, _mask, _ctx);
          if(value !== undefined) {
            encodedName = _strategies.encodeName ? _strategies.encodeName(key) : key;
            _to[encodedName] = value;
          }

          if(vol[fullName]) delete _from[key];
        }
      }

      // explicit mappings:
      maps = mappings[_prefix];
      if(maps) {
        for(var i = 0, l = maps.length; i < l; i++) {
          fullName = prefix + maps[i].path;
          if(isMasked(fullName, _mask)) continue;

          value = _from[maps[i].path];
          if(!maps[i].forced && value === undefined) continue;

          value = encodeProp(value, fullName, _mask, _ctx);
          if(value !== undefined) {
            if(maps[i].map) {
              insert(_to, maps[i].map, value);
            } else {
              _to[_strategies.encodeName ? _strategies.encodeName(maps[i].path) : maps[i].path] = value;
            }
          }
        }
      }
    }

    function encodeProp(_value, _name, _mask, _ctx) {
      var filter = encoders[_name], result = _value;

      if(filter) {
        result = filter.call(_ctx, _value);
      } else if(_value !== null && typeof _value === 'object' && typeof _value.toJSON !== 'function') {
        // IDEA: make deep decoding/encoding optional, could be a little taxing for some apps
        if(isArray(_value)) {
          result = [];
          for(var i = 0, l = _value.length; i < l; i++) {
            result.push(encodeProp(_value[i], _name + '[]', _mask, _ctx));
          }
        } else if(_value) {
          result = {};
          encode(_value, result, _name, _mask, _ctx);
        }
      }

      return result;
    }

    return {

      // decodes a raw record into a record
      decode: function(_record, _raw, _mask) {
        decode(_raw, _record, '', _mask, _record);
      },

      // encodes a record, returning a raw record
      encode: function(_record, _mask) {
        var raw = {};
        encode(_record, raw, '', _mask, _record);
        return raw;
      },

      // builds a serializerd DSL, is a standalone object that can be extended.
      dsl: function() {

        return {

          /**
           * @memberof BuilderApi#
           *
           * @description Sets an attribute mapping.
           *
           * Allows a explicit server to model property mapping to be defined.
           *
           * For example, to map the response property `stats.created_at` to model's `created` property.
           *
           * ```javascript
           * builder.attrMap('created', 'stats.created_at');
           * ```
           *
           * It's also posible to use a wildcard '*' as server name to use the default name decoder as
           * server name. This is used to force a property to be processed on decode/encode even if its
           * not present on request/record (respectively), by doing this its posible, for example, to define
           * a dynamic property that is generated automatically before the object is send to the server.
           *
           * @param {string} _attr Attribute name
           * @param {string} _serverName Server (request/response) property name
           * @return {BuilderApi} self
           */
          attrMap: function(_attr, _serverPath, _forced) {
            // extract parent node from client name:
            var index = _attr.lastIndexOf('.'),
                node = index !== -1 ? _attr.substr(0, index) : '',
                leaf = index !== -1 ? _attr.substr(index + 1) : _attr;

            mapped[_attr] = true;

            var nodes = (mappings[node] || (mappings[node] = []));
            nodes.push({ path: leaf, map: _serverPath === '*' ? null : _serverPath.split('.'), mapPath: _serverPath, forced: _forced });
            return this;
          },

          /**
           * @memberof BuilderApi#
           *
           * @description Sets an attribute mask.
           *
           * An attribute mask prevents the attribute to be loaded from or sent to the server on certain operations.
           *
           * The attribute mask is a string composed by:
           * * C: To prevent attribute from being sent on create
           * * R: To prevent attribute from being loaded from server
           * * U: To prevent attribute from being sent on update
           *
           * For example, the following will prevent an attribute to be send on create or update:
           *
           * ```javascript
           * builder.attrMask('readOnly', 'CU');
           * ```
           *
           * If a true boolean value is passed as mask, then 'CRU' will be used
           * If a false boolean valus is passed as mask, then mask will be removed
           *
           * @param {string} _attr Attribute name
           * @param {boolean|string} _mask Attribute mask
           * @return {BuilderApi} self
           */
          attrMask: function(_attr, _mask) {
            if(!_mask) {
              delete masks[_attr];
            } else {
              masks[_attr] = _mask;
            }
            return this;
          },

          /**
           * @memberof BuilderApi#
           *
           * @description Assigns a decoding function/filter to a given attribute.
           *
           * @param {string} _name Attribute name
           * @param {string|function} _filter filter or function to register
           * @param {mixed} _filterParam Misc filter parameter
           * @param {boolean} _chain If true, filter is chained to the current attribute filter.
           * @return {BuilderApi} self
           */
          attrDecoder: function(_attr, _filter, _filterParam, _chain) {

            if(typeof _filter === 'string') {
              var filter = $filter(_filter);
              _filter = function(_value) { return filter(_value, _filterParam); };
            }

            decoders[_attr] = _chain ? Utils.chain(decoders[_attr], _filter) : _filter;
            return this;
          },

          /**
           * @memberof BuilderApi#
           *
           * @description Assigns a encoding function/filter to a given attribute.
           *
           * @param {string} _name Attribute name
           * @param {string|function} _filter filter or function to register
           * @param {mixed} _filterParam Misc filter parameter
           * @param {boolean} _chain If true, filter is chained to the current attribute filter.
           * @return {BuilderApi} self
           */
          attrEncoder: function(_attr, _filter, _filterParam, _chain) {

            if(typeof _filter === 'string') {
              var filter = $filter(_filter);
              _filter = function(_value) { return filter(_value, _filterParam); };
            }

            encoders[_attr] = _chain ? Utils.chain(encoders[_attr], _filter) : _filter;
            return this;
          },

          /**
           * @memberof BuilderApi#
           *
           * @description Makes an attribute volatile, a volatile attribute is deleted from source after encoding.
           *
           * @param {string} _name Attribute name
           * @param {boolean} _isVolatile defaults to true, if set to false then the attribute is no longer volatile.
           * @return {BuilderApi} self
           */
          attrVolatile: function(_attr, _isVolatile) {
            vol[_attr] = _isVolatile === undefined ? true : _isVolatile;
            return this;
          }
        };
      }
    };
  };

}]);
RMModule.factory('DefaultPacker', ['restmod', 'inflector', 'RMPackerCache', function(restmod, inflector, packerCache) {

  function include(_source, _list, _do) {
    for(var i = 0, l = _list.length; i < l; i++) {
      _do(_list[i], _source[_list[i]]);
    }
  }

  function exclude(_source, _skip, _do) {
    for(var key in _source) {
      if(_source.hasOwnProperty(key) && _skip.indexOf(key) === -1) {
        _do(key, _source[key]);
      }
    }
  }

  // process links and stores them in the packer cache
  function processFeature(_raw, _name, _feature, _other, _do) {
    if(_feature === '.' || _feature === true) {
      var skip = [_name];
      if(_other) skip.push.apply(skip, angular.isArray(_other) ? _other : [_other]);
      exclude(_raw, skip, _do);
    } else if(typeof _feature === 'string') {
      exclude(_raw[_feature], [], _do);
    } else { // links is an array
      include(_raw, _feature, _do);
    }
  }

  /**
   * @class DefaultPacker
   *
   * @description
   *
   * Simple `$unpack` implementation that attempts to cover the standard proposed by
   * [active_model_serializers](https://github.com/rails-api/active_model_serializers.
   *
   * This is a simplified version of the wrapping structure recommented by the jsonapi.org standard,
   * it supports side loaded associated resources (via supporting relations) and metadata extraction.
   *
   * To activate add mixin to model chain
   *
   * ```javascript
   * restmodProvide.rebase('DefaultPacker');
   * ```
   *
   * ### Json root
   *
   * By default the mixin will use the singular model name as json root for single resource requests
   * and pluralized name for collection requests. Make sure the model name is correctly set.
   *
   * To override the name used by the mixin set the **jsonRootSingle** and **jsonRootMany** variables.
   * Or set **jsonRoot** to override both.
   *
   * ### Side loaded resources
   *
   * By default the mixin will look for links to other resources in the 'linked' root property, you
   * can change this by setting the jsonLinks variable. To use the root element as link source
   * use `jsonLinks: '.'`. You can also explicitly select which properties to consider links using an
   * array of property names. To skip links processing altogether, set it to false.
   *
   * Links are expected to use the pluralized version of the name for the referenced model. For example,
   * given the following response:
   *
   * ```json
   * {
   *   bikes: [...],
   *   links {
   *     parts: [...]
   *   }
   * }
   * ```
   *
   * Restmod will expect that the Part model plural name is correctly set parts. Only properties declared
   * as reference relations (belongsTo and belongsToMany) will be correctly resolved.
   *
   * ### Metadata
   *
   * By default metadata is only captured if it comes in the 'meta' root property. Metadata is then
   * stored in the $meta property of the resource being unwrapped.
   *
   * Just like links, to change the metadata source property set the jsonMeta property to the desired name, set
   * it to '.' to capture the entire raw response or set it to false to skip metadata and set it to an array of properties
   * to be extract selected properties.
   *
   * @property {mixed} single The expected single resource wrapper property name
   * @property {object} plural The expected collection wrapper property name
   * @property {mixed} links The links repository property name
   * @property {object} meta The metadata repository property name
   *
   */
  return restmod.mixin(function() {
    this.define('Model.unpack', function(_resource, _raw) {
      var name = null,
          links = this.getProperty('jsonLinks', 'linked'),
          meta = this.getProperty('jsonMeta', 'meta');

      if(_resource.$isCollection) {
        name = this.getProperty('jsonRootMany') || this.getProperty('jsonRoot') || this.getProperty('plural');
      } else {
        // TODO: use plural for single resource option.
        name = this.getProperty('jsonRootSingle') || this.getProperty('jsonRoot') || this.getProperty('name');
      }

      if(meta) {
        _resource.$metadata = {};
        processFeature(_raw, name, meta, links, function(_key, _value) {
          _resource.$metadata[_key] = _value;
        });
      }

      if(links) {
        processFeature(_raw, name, links, meta, function(_key, _value) {
          // TODO: check that cache is an array.
          packerCache.feed(_key, _value);
        });
      }

      return _raw[name];
    });
  });

}]);
/**
 * @class Utils
 *
 * @description
 *
 * Various utilities used across the library.
 *
 */
RMModule.factory('RMUtils', ['$log', function($log) {

  // determine browser support for object prototype changing
  var IFRAME_REF = [];
  var PROTO_SETTER = (function() {
    var Test = function() {};
    if(Object.setPrototypeOf) {
      return function(_target, _proto) {
        Object.setPrototypeOf(_target, _proto); // Not sure about supporting this...
      };
    } else if((new Test).__proto__ === Test.prototype) {
      return function(_target, _proto) {
        _target.__proto__ = _proto;
      };
    }
  })();

  var Utils = {

    // Ignore Masks
    CREATE_MASK: 'C',
    UPDATE_MASK: 'U',
    READ_MASK: 'R',
    WRITE_MASK: 'CU',
    FULL_MASK: 'CRU',

    /**
     * @memberof Utils
     *
     * @description
     *
     * Formats a string
     *
     * @param  {string} _str String to format
     * @param  {array} _args String arguments
     * @return {string} Formated string
     */
    format: function(_str, _args) {
      for(var i = 0; _args && i < _args.length; i++) {
        _str = _str.replace('$' + (i+1), _args[i]);
      }
      return _str;
    },

    /**
     * @memberof Utils
     *
     * @description
     *
     * Test for a condition to be met, if not an exception is thrown.
     *
     * @param  {boolean} _condition Condition to assert
     * @param  {string} _msg Error message
     */
    assert: function(_condition, _msg /*, params */) {
      if(!_condition) {
        var params = Array.prototype.slice.call(arguments, 2);
        _msg = Utils.format(_msg, params);
        $log.error(_msg); // log error message
        throw new Error(_msg);
      }
    },

    /**
     * @memberof Utils
     *
     * @description
     *
     * Simple url joining, returns null if _head or _tail is null.
     *
     * @param  {string} _head Url prefix
     * @param  {string} _tail Url suffix
     * @return {string} Resulting url
     */
    joinUrl: function(_head, _tail) {
      if(!_head || !_tail) return null;
      return (_head+'').replace(/\/$/, '') + '/' + (_tail+'').replace(/^\//, '');
    },

    /**
     * @memberof Utils
     *
     * @description
     *
     * Cleans trailing slashes from an url
     *
     * @param  {string} _url Url to clean
     * @return {string} Resulting url
     */
    cleanUrl: function(_url) {
      return _url ? _url.replace(/\/$/, '') : _url;
    },

    /**
     * @memberof Utils
     *
     * @description
     *
     * Chains to filtering functions together
     *
     * @param  {function} _first original function
     * @param  {function} _fun   function to call on the original function result
     * @return {mixed} value returned by the last function call
     */
    chain: function(_first, _fun) {
      if(!_first) return _fun;
      return function(_value) {
        return _fun.call(this, _first.call(this, _value));
      };
    },

    /**
     * @memberof Utils
     *
     * @description
     *
     * Override a property value, making overriden function available as this.$super
     *
     * @param  {function} _super Original value
     * @param  {mixed} _fun New property value
     * @return {mixed} Value returned by new function
     */
    override: function(_super, _fun) {
      if(!_super || typeof _fun !== 'function') return _fun;

      return function() {
        var oldSuper = this.$super;
        try {
          this.$super = _super;
          return _fun.apply(this, arguments);
        } finally {
          this.$super = oldSuper;
        }
      };
    },

    /**
     * @memberof Utils
     *
     * @description
     *
     * Extend an object using `Utils.override` instead of just replacing the functions.
     *
     * @param  {object} _target Object to be extended
     * @param  {object} _other  Source object
     */
    extendOverriden: function(_target) {
      for(var i = 1; i < arguments.length; i++) {
        var other = arguments[i];
        for(var key in other) {
          if(other.hasOwnProperty(key)) {
            _target[key] = _target[key] && typeof _target[key] === 'function' ? Utils.override(_target[key], other[key]) : other[key];
          }
        }
      }

      return _target;
    },

    /**
     * @memberof Utils
     *
     * @description
     *
     * Generates a new array type, handles platform specifics (bag-O-hacks)
     *
     * @return {object} Independent array type.
     */
    buildArrayType: function(_forceIframe) {

      var arrayType;

      if(PROTO_SETTER && !_forceIframe) {

        // Use object prototype override technique
        //
        // Very nice array subclassing analysis: http://perfectionkills.com/how-ecmascript-5-still-does-not-allow-to-subclass-an-array/#why_subclass_an_array
        //

        var SubArray = function() {
          var arr = [ ];
          arr.push.apply(arr, arguments);
          PROTO_SETTER(arr, SubArray.prototype);
          return arr;
        };

        SubArray.prototype = [];
        SubArray.prototype.last = function() {
          return this[this.length - 1];
        };

        arrayType = SubArray;

      } else  {

        // Use iframe hijack technique for IE11<
        //
        // Based on the awesome blog post of Dean Edwards: http://dean.edwards.name/weblog/2006/11/hooray/
        //

        // create a hidden <iframe>.
        var iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        iframe.height = 0;
        iframe.width = 0;
        iframe.border = 0;

        document.body.appendChild(iframe);

        // write a script into the <iframe> and steal its Array object.
        window.frames[window.frames.length - 1].document.write('<script>parent.RestmodArray = Array;<\/script>');

        // take the array object and move it to local context.
        arrayType = window.RestmodArray;
        delete window.RestmodArray;

        // copy this context Array's extensions to new array type (could be a little slow...)
        for(var key in Array.prototype) {
          if(typeof Array.prototype[key] === 'function' && !arrayType.prototype[key]) {
            arrayType.prototype[key] = Array.prototype[key];
          }
        }

        // remove iframe from DOM.
        //
        // Even though MS says that removing iframe from DOM will release it's related structures (http://msdn.microsoft.com/en-us/library/ie/gg622929(v=vs.85).aspx),
        // actually keeping it referenced has proven to be enough to keep the structures alive. (that includes our array type)
        //
        document.body.removeChild(iframe);
        IFRAME_REF.push(iframe); // keep iframe reference!
      }

      return arrayType;
    }
  };

  return Utils;
}]);
})(angular);
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/angular-restmod/dist/angular-restmod-bundle.js","/resources/assets/vendor/angular-restmod/dist")

},{"_process":7,"buffer":3}],61:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/**
 * API Bound Models for AngularJS
 * @version v1.1.7 - 2015-01-06
 * @link https://github.com/angular-platanus/restmod
 * @author Ignacio Baixas <ignacio@platan.us>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a){"use strict";a.module("restmod").factory("AMSApi",["restmod","inflector",function(a,b){return a.mixin("DefaultPacker",{$config:{style:"AMS",primaryKey:"id",jsonMeta:"meta",jsonLinks:"links"},$extend:{Model:{decodeName:b.camelize,encodeName:function(a){return b.parameterize(a,"_")},encodeUrlName:b.parameterize}}})}])}(angular);
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/angular-restmod/dist/styles/ams.min.js","/resources/assets/vendor/angular-restmod/dist/styles")

},{"_process":7,"buffer":3}],62:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/**
 * Created by macintosh on 1/28/15.
 */

require('./angular.min.js');
module.exports = angular;
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/angular/angular-index.js","/resources/assets/vendor/angular")

},{"./angular.min.js":63,"_process":7,"buffer":3}],63:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/*
 AngularJS v1.3.13
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(M,Y,t){'use strict';function S(b){return function(){var a=arguments[0],c;c="["+(b?b+":":"")+a+"] http://errors.angularjs.org/1.3.13/"+(b?b+"/":"")+a;for(a=1;a<arguments.length;a++){c=c+(1==a?"?":"&")+"p"+(a-1)+"=";var d=encodeURIComponent,e;e=arguments[a];e="function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?JSON.stringify(e):e;c+=d(e)}return Error(c)}}function Ta(b){if(null==b||Ua(b))return!1;var a=b.length;return b.nodeType===
oa&&a?!0:F(b)||H(b)||0===a||"number"===typeof a&&0<a&&a-1 in b}function s(b,a,c){var d,e;if(b)if(G(b))for(d in b)"prototype"==d||"length"==d||"name"==d||b.hasOwnProperty&&!b.hasOwnProperty(d)||a.call(c,b[d],d,b);else if(H(b)||Ta(b)){var f="object"!==typeof b;d=0;for(e=b.length;d<e;d++)(f||d in b)&&a.call(c,b[d],d,b)}else if(b.forEach&&b.forEach!==s)b.forEach(a,c,b);else for(d in b)b.hasOwnProperty(d)&&a.call(c,b[d],d,b);return b}function Ed(b,a,c){for(var d=Object.keys(b).sort(),e=0;e<d.length;e++)a.call(c,
b[d[e]],d[e]);return d}function lc(b){return function(a,c){b(c,a)}}function Fd(){return++ob}function mc(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function x(b){for(var a=b.$$hashKey,c=1,d=arguments.length;c<d;c++){var e=arguments[c];if(e)for(var f=Object.keys(e),g=0,h=f.length;g<h;g++){var l=f[g];b[l]=e[l]}}mc(b,a);return b}function ba(b){return parseInt(b,10)}function Pb(b,a){return x(Object.create(b),a)}function z(){}function pa(b){return b}function ea(b){return function(){return b}}function B(b){return"undefined"===
typeof b}function y(b){return"undefined"!==typeof b}function I(b){return null!==b&&"object"===typeof b}function F(b){return"string"===typeof b}function V(b){return"number"===typeof b}function qa(b){return"[object Date]"===Da.call(b)}function G(b){return"function"===typeof b}function pb(b){return"[object RegExp]"===Da.call(b)}function Ua(b){return b&&b.window===b}function Va(b){return b&&b.$evalAsync&&b.$watch}function Wa(b){return"boolean"===typeof b}function nc(b){return!(!b||!(b.nodeName||b.prop&&
b.attr&&b.find))}function Gd(b){var a={};b=b.split(",");var c;for(c=0;c<b.length;c++)a[b[c]]=!0;return a}function ua(b){return Q(b.nodeName||b[0]&&b[0].nodeName)}function Xa(b,a){var c=b.indexOf(a);0<=c&&b.splice(c,1);return a}function Ea(b,a,c,d){if(Ua(b)||Va(b))throw Ka("cpws");if(a){if(b===a)throw Ka("cpi");c=c||[];d=d||[];if(I(b)){var e=c.indexOf(b);if(-1!==e)return d[e];c.push(b);d.push(a)}if(H(b))for(var f=a.length=0;f<b.length;f++)e=Ea(b[f],null,c,d),I(b[f])&&(c.push(b[f]),d.push(e)),a.push(e);
else{var g=a.$$hashKey;H(a)?a.length=0:s(a,function(b,c){delete a[c]});for(f in b)b.hasOwnProperty(f)&&(e=Ea(b[f],null,c,d),I(b[f])&&(c.push(b[f]),d.push(e)),a[f]=e);mc(a,g)}}else if(a=b)H(b)?a=Ea(b,[],c,d):qa(b)?a=new Date(b.getTime()):pb(b)?(a=new RegExp(b.source,b.toString().match(/[^\/]*$/)[0]),a.lastIndex=b.lastIndex):I(b)&&(e=Object.create(Object.getPrototypeOf(b)),a=Ea(b,e,c,d));return a}function ra(b,a){if(H(b)){a=a||[];for(var c=0,d=b.length;c<d;c++)a[c]=b[c]}else if(I(b))for(c in a=a||{},
b)if("$"!==c.charAt(0)||"$"!==c.charAt(1))a[c]=b[c];return a||b}function ga(b,a){if(b===a)return!0;if(null===b||null===a)return!1;if(b!==b&&a!==a)return!0;var c=typeof b,d;if(c==typeof a&&"object"==c)if(H(b)){if(!H(a))return!1;if((c=b.length)==a.length){for(d=0;d<c;d++)if(!ga(b[d],a[d]))return!1;return!0}}else{if(qa(b))return qa(a)?ga(b.getTime(),a.getTime()):!1;if(pb(b)&&pb(a))return b.toString()==a.toString();if(Va(b)||Va(a)||Ua(b)||Ua(a)||H(a))return!1;c={};for(d in b)if("$"!==d.charAt(0)&&!G(b[d])){if(!ga(b[d],
a[d]))return!1;c[d]=!0}for(d in a)if(!c.hasOwnProperty(d)&&"$"!==d.charAt(0)&&a[d]!==t&&!G(a[d]))return!1;return!0}return!1}function Ya(b,a,c){return b.concat(Za.call(a,c))}function oc(b,a){var c=2<arguments.length?Za.call(arguments,2):[];return!G(a)||a instanceof RegExp?a:c.length?function(){return arguments.length?a.apply(b,Ya(c,arguments,0)):a.apply(b,c)}:function(){return arguments.length?a.apply(b,arguments):a.call(b)}}function Hd(b,a){var c=a;"string"===typeof b&&"$"===b.charAt(0)&&"$"===b.charAt(1)?
c=t:Ua(a)?c="$WINDOW":a&&Y===a?c="$DOCUMENT":Va(a)&&(c="$SCOPE");return c}function $a(b,a){if("undefined"===typeof b)return t;V(a)||(a=a?2:null);return JSON.stringify(b,Hd,a)}function pc(b){return F(b)?JSON.parse(b):b}function va(b){b=D(b).clone();try{b.empty()}catch(a){}var c=D("<div>").append(b).html();try{return b[0].nodeType===qb?Q(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Q(b)})}catch(d){return Q(c)}}function qc(b){try{return decodeURIComponent(b)}catch(a){}}function rc(b){var a=
{},c,d;s((b||"").split("&"),function(b){b&&(c=b.replace(/\+/g,"%20").split("="),d=qc(c[0]),y(d)&&(b=y(c[1])?qc(c[1]):!0,sc.call(a,d)?H(a[d])?a[d].push(b):a[d]=[a[d],b]:a[d]=b))});return a}function Qb(b){var a=[];s(b,function(b,d){H(b)?s(b,function(b){a.push(Fa(d,!0)+(!0===b?"":"="+Fa(b,!0)))}):a.push(Fa(d,!0)+(!0===b?"":"="+Fa(b,!0)))});return a.length?a.join("&"):""}function rb(b){return Fa(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Fa(b,a){return encodeURIComponent(b).replace(/%40/gi,
"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,a?"%20":"+")}function Id(b,a){var c,d,e=sb.length;b=D(b);for(d=0;d<e;++d)if(c=sb[d]+a,F(c=b.attr(c)))return c;return null}function Jd(b,a){var c,d,e={};s(sb,function(a){a+="app";!c&&b.hasAttribute&&b.hasAttribute(a)&&(c=b,d=b.getAttribute(a))});s(sb,function(a){a+="app";var e;!c&&(e=b.querySelector("["+a.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(a))});c&&(e.strictDi=null!==Id(c,"strict-di"),
a(c,d?[d]:[],e))}function tc(b,a,c){I(c)||(c={});c=x({strictDi:!1},c);var d=function(){b=D(b);if(b.injector()){var d=b[0]===Y?"document":va(b);throw Ka("btstrpd",d.replace(/</,"&lt;").replace(/>/,"&gt;"));}a=a||[];a.unshift(["$provide",function(a){a.value("$rootElement",b)}]);c.debugInfoEnabled&&a.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]);a.unshift("ng");d=ab(a,c.strictDi);d.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",
d);c(b)(a)})}]);return d},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;M&&e.test(M.name)&&(c.debugInfoEnabled=!0,M.name=M.name.replace(e,""));if(M&&!f.test(M.name))return d();M.name=M.name.replace(f,"");ca.resumeBootstrap=function(b){s(b,function(b){a.push(b)});return d()};G(ca.resumeDeferredBootstrap)&&ca.resumeDeferredBootstrap()}function Kd(){M.name="NG_ENABLE_DEBUG_INFO!"+M.name;M.location.reload()}function Ld(b){b=ca.element(b).injector();if(!b)throw Ka("test");return b.get("$$testability")}
function uc(b,a){a=a||"_";return b.replace(Md,function(b,d){return(d?a:"")+b.toLowerCase()})}function Nd(){var b;vc||((sa=M.jQuery)&&sa.fn.on?(D=sa,x(sa.fn,{scope:La.scope,isolateScope:La.isolateScope,controller:La.controller,injector:La.injector,inheritedData:La.inheritedData}),b=sa.cleanData,sa.cleanData=function(a){var c;if(Rb)Rb=!1;else for(var d=0,e;null!=(e=a[d]);d++)(c=sa._data(e,"events"))&&c.$destroy&&sa(e).triggerHandler("$destroy");b(a)}):D=R,ca.element=D,vc=!0)}function Sb(b,a,c){if(!b)throw Ka("areq",
a||"?",c||"required");return b}function tb(b,a,c){c&&H(b)&&(b=b[b.length-1]);Sb(G(b),a,"not a function, got "+(b&&"object"===typeof b?b.constructor.name||"Object":typeof b));return b}function Ma(b,a){if("hasOwnProperty"===b)throw Ka("badname",a);}function wc(b,a,c){if(!a)return b;a=a.split(".");for(var d,e=b,f=a.length,g=0;g<f;g++)d=a[g],b&&(b=(e=b)[d]);return!c&&G(b)?oc(e,b):b}function ub(b){var a=b[0];b=b[b.length-1];var c=[a];do{a=a.nextSibling;if(!a)break;c.push(a)}while(a!==b);return D(c)}function ha(){return Object.create(null)}
function Od(b){function a(a,b,c){return a[b]||(a[b]=c())}var c=S("$injector"),d=S("ng");b=a(b,"angular",Object);b.$$minErr=b.$$minErr||S;return a(b,"module",function(){var b={};return function(f,g,h){if("hasOwnProperty"===f)throw d("badname","module");g&&b.hasOwnProperty(f)&&(b[f]=null);return a(b,f,function(){function a(c,d,e,f){f||(f=b);return function(){f[e||"push"]([c,d,arguments]);return u}}if(!g)throw c("nomod",f);var b=[],d=[],e=[],q=a("$injector","invoke","push",d),u={_invokeQueue:b,_configBlocks:d,
_runBlocks:e,requires:g,name:f,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:q,run:function(a){e.push(a);return this}};h&&q(h);return u})}})}function Pd(b){x(b,{bootstrap:tc,copy:Ea,extend:x,equals:ga,
element:D,forEach:s,injector:ab,noop:z,bind:oc,toJson:$a,fromJson:pc,identity:pa,isUndefined:B,isDefined:y,isString:F,isFunction:G,isObject:I,isNumber:V,isElement:nc,isArray:H,version:Qd,isDate:qa,lowercase:Q,uppercase:vb,callbacks:{counter:0},getTestability:Ld,$$minErr:S,$$csp:bb,reloadWithDebugInfo:Kd});cb=Od(M);try{cb("ngLocale")}catch(a){cb("ngLocale",[]).provider("$locale",Rd)}cb("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Sd});a.provider("$compile",xc).directive({a:Td,
input:yc,textarea:yc,form:Ud,script:Vd,select:Wd,style:Xd,option:Yd,ngBind:Zd,ngBindHtml:$d,ngBindTemplate:ae,ngClass:be,ngClassEven:ce,ngClassOdd:de,ngCloak:ee,ngController:fe,ngForm:ge,ngHide:he,ngIf:ie,ngInclude:je,ngInit:ke,ngNonBindable:le,ngPluralize:me,ngRepeat:ne,ngShow:oe,ngStyle:pe,ngSwitch:qe,ngSwitchWhen:re,ngSwitchDefault:se,ngOptions:te,ngTransclude:ue,ngModel:ve,ngList:we,ngChange:xe,pattern:zc,ngPattern:zc,required:Ac,ngRequired:Ac,minlength:Bc,ngMinlength:Bc,maxlength:Cc,ngMaxlength:Cc,
ngValue:ye,ngModelOptions:ze}).directive({ngInclude:Ae}).directive(wb).directive(Dc);a.provider({$anchorScroll:Be,$animate:Ce,$browser:De,$cacheFactory:Ee,$controller:Fe,$document:Ge,$exceptionHandler:He,$filter:Ec,$interpolate:Ie,$interval:Je,$http:Ke,$httpBackend:Le,$location:Me,$log:Ne,$parse:Oe,$rootScope:Pe,$q:Qe,$$q:Re,$sce:Se,$sceDelegate:Te,$sniffer:Ue,$templateCache:Ve,$templateRequest:We,$$testability:Xe,$timeout:Ye,$window:Ze,$$rAF:$e,$$asyncCallback:af,$$jqLite:bf})}])}function db(b){return b.replace(cf,
function(a,b,d,e){return e?d.toUpperCase():d}).replace(df,"Moz$1")}function Fc(b){b=b.nodeType;return b===oa||!b||9===b}function Gc(b,a){var c,d,e=a.createDocumentFragment(),f=[];if(Tb.test(b)){c=c||e.appendChild(a.createElement("div"));d=(ef.exec(b)||["",""])[1].toLowerCase();d=ia[d]||ia._default;c.innerHTML=d[1]+b.replace(ff,"<$1></$2>")+d[2];for(d=d[0];d--;)c=c.lastChild;f=Ya(f,c.childNodes);c=e.firstChild;c.textContent=""}else f.push(a.createTextNode(b));e.textContent="";e.innerHTML="";s(f,function(a){e.appendChild(a)});
return e}function R(b){if(b instanceof R)return b;var a;F(b)&&(b=U(b),a=!0);if(!(this instanceof R)){if(a&&"<"!=b.charAt(0))throw Ub("nosel");return new R(b)}if(a){a=Y;var c;b=(c=gf.exec(b))?[a.createElement(c[1])]:(c=Gc(b,a))?c.childNodes:[]}Hc(this,b)}function Vb(b){return b.cloneNode(!0)}function xb(b,a){a||yb(b);if(b.querySelectorAll)for(var c=b.querySelectorAll("*"),d=0,e=c.length;d<e;d++)yb(c[d])}function Ic(b,a,c,d){if(y(d))throw Ub("offargs");var e=(d=zb(b))&&d.events,f=d&&d.handle;if(f)if(a)s(a.split(" "),
function(a){if(y(c)){var d=e[a];Xa(d||[],c);if(d&&0<d.length)return}b.removeEventListener(a,f,!1);delete e[a]});else for(a in e)"$destroy"!==a&&b.removeEventListener(a,f,!1),delete e[a]}function yb(b,a){var c=b.ng339,d=c&&Ab[c];d&&(a?delete d.data[a]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),Ic(b)),delete Ab[c],b.ng339=t))}function zb(b,a){var c=b.ng339,c=c&&Ab[c];a&&!c&&(b.ng339=c=++hf,c=Ab[c]={events:{},data:{},handle:t});return c}function Wb(b,a,c){if(Fc(b)){var d=y(c),e=!d&&a&&!I(a),
f=!a;b=(b=zb(b,!e))&&b.data;if(d)b[a]=c;else{if(f)return b;if(e)return b&&b[a];x(b,a)}}}function Bb(b,a){return b.getAttribute?-1<(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+a+" "):!1}function Cb(b,a){a&&b.setAttribute&&s(a.split(" "),function(a){b.setAttribute("class",U((" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+U(a)+" "," ")))})}function Db(b,a){if(a&&b.setAttribute){var c=(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");
s(a.split(" "),function(a){a=U(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});b.setAttribute("class",U(c))}}function Hc(b,a){if(a)if(a.nodeType)b[b.length++]=a;else{var c=a.length;if("number"===typeof c&&a.window!==a){if(c)for(var d=0;d<c;d++)b[b.length++]=a[d]}else b[b.length++]=a}}function Jc(b,a){return Eb(b,"$"+(a||"ngController")+"Controller")}function Eb(b,a,c){9==b.nodeType&&(b=b.documentElement);for(a=H(a)?a:[a];b;){for(var d=0,e=a.length;d<e;d++)if((c=D.data(b,a[d]))!==t)return c;b=b.parentNode||
11===b.nodeType&&b.host}}function Kc(b){for(xb(b,!0);b.firstChild;)b.removeChild(b.firstChild)}function Lc(b,a){a||xb(b);var c=b.parentNode;c&&c.removeChild(b)}function jf(b,a){a=a||M;if("complete"===a.document.readyState)a.setTimeout(b);else D(a).on("load",b)}function Mc(b,a){var c=Fb[a.toLowerCase()];return c&&Nc[ua(b)]&&c}function kf(b,a){var c=b.nodeName;return("INPUT"===c||"TEXTAREA"===c)&&Oc[a]}function lf(b,a){var c=function(c,e){c.isDefaultPrevented=function(){return c.defaultPrevented};var f=
a[e||c.type],g=f?f.length:0;if(g){if(B(c.immediatePropagationStopped)){var h=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();h&&h.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};1<g&&(f=ra(f));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||f[l].call(b,c)}};c.elem=b;return c}function bf(){this.$get=function(){return x(R,{hasClass:function(b,a){b.attr&&(b=b[0]);
return Bb(b,a)},addClass:function(b,a){b.attr&&(b=b[0]);return Db(b,a)},removeClass:function(b,a){b.attr&&(b=b[0]);return Cb(b,a)}})}}function Na(b,a){var c=b&&b.$$hashKey;if(c)return"function"===typeof c&&(c=b.$$hashKey()),c;c=typeof b;return c="function"==c||"object"==c&&null!==b?b.$$hashKey=c+":"+(a||Fd)():c+":"+b}function eb(b,a){if(a){var c=0;this.nextUid=function(){return++c}}s(b,this.put,this)}function mf(b){return(b=b.toString().replace(Pc,"").match(Qc))?"function("+(b[1]||"").replace(/[\s\r\n]+/,
" ")+")":"fn"}function ab(b,a){function c(a){return function(b,c){if(I(b))s(b,lc(a));else return a(b,c)}}function d(a,b){Ma(a,"service");if(G(b)||H(b))b=q.instantiate(b);if(!b.$get)throw Ga("pget",a);return n[a+"Provider"]=b}function e(a,b){return function(){var c=r.invoke(b,this);if(B(c))throw Ga("undef",a);return c}}function f(a,b,c){return d(a,{$get:!1!==c?e(a,b):b})}function g(a){var b=[],c;s(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=q.get(e[0]);f[e[1]].apply(f,
e[2])}}if(!m.get(a)){m.put(a,!0);try{F(a)?(c=cb(a),b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):G(a)?b.push(q.invoke(a)):H(a)?b.push(q.invoke(a)):tb(a,"module")}catch(e){throw H(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ga("modulerr",a,e.stack||e.message||e);}}});return b}function h(b,c){function d(a,e){if(b.hasOwnProperty(a)){if(b[a]===l)throw Ga("cdep",a+" <- "+k.join(" <- "));return b[a]}try{return k.unshift(a),
b[a]=l,b[a]=c(a,e)}catch(f){throw b[a]===l&&delete b[a],f;}finally{k.shift()}}function e(b,c,f,g){"string"===typeof f&&(g=f,f=null);var h=[],k=ab.$$annotate(b,a,g),l,q,n;q=0;for(l=k.length;q<l;q++){n=k[q];if("string"!==typeof n)throw Ga("itkn",n);h.push(f&&f.hasOwnProperty(n)?f[n]:d(n,g))}H(b)&&(b=b[l]);return b.apply(c,h)}return{invoke:e,instantiate:function(a,b,c){var d=Object.create((H(a)?a[a.length-1]:a).prototype||null);a=e(a,d,b,c);return I(a)||G(a)?a:d},get:d,annotate:ab.$$annotate,has:function(a){return n.hasOwnProperty(a+
"Provider")||b.hasOwnProperty(a)}}}a=!0===a;var l={},k=[],m=new eb([],!0),n={$provide:{provider:c(d),factory:c(f),service:c(function(a,b){return f(a,["$injector",function(a){return a.instantiate(b)}])}),value:c(function(a,b){return f(a,ea(b),!1)}),constant:c(function(a,b){Ma(a,"constant");n[a]=b;u[a]=b}),decorator:function(a,b){var c=q.get(a+"Provider"),d=c.$get;c.$get=function(){var a=r.invoke(d,c);return r.invoke(b,null,{$delegate:a})}}}},q=n.$injector=h(n,function(a,b){ca.isString(b)&&k.push(b);
throw Ga("unpr",k.join(" <- "));}),u={},r=u.$injector=h(u,function(a,b){var c=q.get(a+"Provider",b);return r.invoke(c.$get,c,t,a)});s(g(b),function(a){r.invoke(a||z)});return r}function Be(){var b=!0;this.disableAutoScrolling=function(){b=!1};this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===ua(a))return b=a,!0});return b}function f(b){if(b){b.scrollIntoView();var c;c=g.yOffset;G(c)?c=c():nc(c)?(c=c[0],c="fixed"!==
a.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):V(c)||(c=0);c&&(b=b.getBoundingClientRect().top,a.scrollBy(0,b-c))}else a.scrollTo(0,0)}function g(){var a=c.hash(),b;a?(b=h.getElementById(a))?f(b):(b=e(h.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null)}var h=a.document;b&&d.$watch(function(){return c.hash()},function(a,b){a===b&&""===a||jf(function(){d.$evalAsync(g)})});return g}]}function af(){this.$get=["$$rAF","$timeout",function(b,a){return b.supported?function(a){return b(a)}:
function(b){return a(b,0,!1)}}]}function nf(b,a,c,d){function e(a){try{a.apply(null,Za.call(arguments,1))}finally{if(v--,0===v)for(;w.length;)try{w.pop()()}catch(b){c.error(b)}}}function f(a,b){(function N(){s(L,function(a){a()});C=b(N,a)})()}function g(){h();l()}function h(){A=b.history.state;A=B(A)?null:A;ga(A,J)&&(A=J);J=A}function l(){if(E!==m.url()||O!==A)E=m.url(),O=A,s(W,function(a){a(m.url(),A)})}function k(a){try{return decodeURIComponent(a)}catch(b){return a}}var m=this,n=a[0],q=b.location,
u=b.history,r=b.setTimeout,P=b.clearTimeout,p={};m.isMock=!1;var v=0,w=[];m.$$completeOutstandingRequest=e;m.$$incOutstandingRequestCount=function(){v++};m.notifyWhenNoOutstandingRequests=function(a){s(L,function(a){a()});0===v?a():w.push(a)};var L=[],C;m.addPollFn=function(a){B(C)&&f(100,r);L.push(a);return a};var A,O,E=q.href,T=a.find("base"),X=null;h();O=A;m.url=function(a,c,e){B(e)&&(e=null);q!==b.location&&(q=b.location);u!==b.history&&(u=b.history);if(a){var f=O===e;if(E===a&&(!d.history||f))return m;
var g=E&&Ha(E)===Ha(a);E=a;O=e;!d.history||g&&f?(g||(X=a),c?q.replace(a):g?(c=q,e=a.indexOf("#"),a=-1===e?"":a.substr(e+1),c.hash=a):q.href=a):(u[c?"replaceState":"pushState"](e,"",a),h(),O=A);return m}return X||q.href.replace(/%27/g,"'")};m.state=function(){return A};var W=[],wa=!1,J=null;m.onUrlChange=function(a){if(!wa){if(d.history)D(b).on("popstate",g);D(b).on("hashchange",g);wa=!0}W.push(a);return a};m.$$checkUrlChange=l;m.baseHref=function(){var a=T.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,
""):""};var fa={},y="",da=m.baseHref();m.cookies=function(a,b){var d,e,f,g;if(a)b===t?n.cookie=encodeURIComponent(a)+"=;path="+da+";expires=Thu, 01 Jan 1970 00:00:00 GMT":F(b)&&(d=(n.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+";path="+da).length+1,4096<d&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!"));else{if(n.cookie!==y)for(y=n.cookie,d=y.split("; "),fa={},f=0;f<d.length;f++)e=d[f],g=e.indexOf("="),0<g&&(a=k(e.substring(0,g)),
fa[a]===t&&(fa[a]=k(e.substring(g+1))));return fa}};m.defer=function(a,b){var c;v++;c=r(function(){delete p[c];e(a)},b||0);p[c]=!0;return c};m.defer.cancel=function(a){return p[a]?(delete p[a],P(a),e(z),!0):!1}}function De(){this.$get=["$window","$log","$sniffer","$document",function(b,a,c,d){return new nf(b,d,a,c)}]}function Ee(){this.$get=function(){function b(b,d){function e(a){a!=n&&(q?q==a&&(q=a.n):q=a,f(a.n,a.p),f(a,n),n=a,n.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(b in a)throw S("$cacheFactory")("iid",
b);var g=0,h=x({},d,{id:b}),l={},k=d&&d.capacity||Number.MAX_VALUE,m={},n=null,q=null;return a[b]={put:function(a,b){if(k<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});e(c)}if(!B(b))return a in l||g++,l[a]=b,g>k&&this.remove(q.key),b},get:function(a){if(k<Number.MAX_VALUE){var b=m[a];if(!b)return;e(b)}return l[a]},remove:function(a){if(k<Number.MAX_VALUE){var b=m[a];if(!b)return;b==n&&(n=b.p);b==q&&(q=b.n);f(b.n,b.p);delete m[a]}delete l[a];g--},removeAll:function(){l={};g=0;m={};n=q=null},destroy:function(){m=
h=l=null;delete a[b]},info:function(){return x({},h,{size:g})}}}var a={};b.info=function(){var b={};s(a,function(a,e){b[e]=a.info()});return b};b.get=function(b){return a[b]};return b}}function Ve(){this.$get=["$cacheFactory",function(b){return b("templates")}]}function xc(b,a){function c(a,b){var c=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,d={};s(a,function(a,e){var f=a.match(c);if(!f)throw ja("iscp",b,e,a);d[e]={mode:f[1][0],collection:"*"===f[2],optional:"?"===f[3],attrName:f[4]||e}});return d}var d=
{},e=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,f=/(([\w\-]+)(?:\:([^;]+))?;?)/,g=Gd("ngSrc,ngSrcset,src,srcset"),h=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,l=/^(on[a-z]+|formaction)$/;this.directive=function n(a,e){Ma(a,"directive");F(a)?(Sb(e,"directiveFactory"),d.hasOwnProperty(a)||(d[a]=[],b.factory(a+"Directive",["$injector","$exceptionHandler",function(b,e){var f=[];s(d[a],function(d,g){try{var h=b.invoke(d);G(h)?h={compile:ea(h)}:!h.compile&&h.link&&(h.compile=ea(h.link));h.priority=h.priority||0;h.index=
g;h.name=h.name||a;h.require=h.require||h.controller&&h.name;h.restrict=h.restrict||"EA";I(h.scope)&&(h.$$isolateBindings=c(h.scope,h.name));f.push(h)}catch(l){e(l)}});return f}])),d[a].push(e)):s(a,lc(n));return this};this.aHrefSanitizationWhitelist=function(b){return y(b)?(a.aHrefSanitizationWhitelist(b),this):a.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a.imgSrcSanitizationWhitelist(b),this):a.imgSrcSanitizationWhitelist()};var k=!0;this.debugInfoEnabled=
function(a){return y(a)?(k=a,this):k};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,b,c,r,P,p,v,w,L,C,A){function O(a,b){try{a.addClass(b)}catch(c){}}function E(a,b,c,d,e){a instanceof D||(a=D(a));s(a,function(b,c){b.nodeType==qb&&b.nodeValue.match(/\S+/)&&(a[c]=D(b).wrap("<span></span>").parent()[0])});var f=T(a,b,a,c,d,e);E.$$addScopeClass(a);var g=null;return function(b,c,
d){Sb(b,"scope");d=d||{};var e=d.parentBoundTranscludeFn,h=d.transcludeControllers;d=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude);g||(g=(d=d&&d[0])?"foreignobject"!==ua(d)&&d.toString().match(/SVG/)?"svg":"html":"html");d="html"!==g?D(Xb(g,D("<div>").append(a).html())):c?La.clone.call(a):a;if(h)for(var l in h)d.data("$"+l+"Controller",h[l].instance);E.$$addScopeInfo(d,b);c&&c(d,b);f&&f(b,d,d,e);return d}}function T(a,b,c,d,e,f){function g(a,c,d,e){var f,l,k,q,n,p,w;if(r)for(w=
Array(c.length),q=0;q<h.length;q+=3)f=h[q],w[f]=c[f];else w=c;q=0;for(n=h.length;q<n;)l=w[h[q++]],c=h[q++],f=h[q++],c?(c.scope?(k=a.$new(),E.$$addScopeInfo(D(l),k)):k=a,p=c.transcludeOnThisElement?X(a,c.transclude,e,c.elementTranscludeOnThisElement):!c.templateOnThisElement&&e?e:!e&&b?X(a,b):null,c(f,k,l,d,p)):f&&f(a,l.childNodes,t,e)}for(var h=[],l,k,q,n,r,p=0;p<a.length;p++){l=new Yb;k=W(a[p],[],l,0===p?d:t,e);(f=k.length?fa(k,a[p],l,b,c,null,[],[],f):null)&&f.scope&&E.$$addScopeClass(l.$$element);
l=f&&f.terminal||!(q=a[p].childNodes)||!q.length?null:T(q,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||l)h.push(p,f,l),n=!0,r=r||f;f=null}return n?g:null}function X(a,b,c,d){return function(d,e,f,g,h){d||(d=a.$new(!1,h),d.$$transcluded=!0);return b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})}}function W(a,b,c,d,g){var h=c.$attr,l;switch(a.nodeType){case oa:da(b,ya(ua(a)),"E",d,g);for(var k,q,n,r=a.attributes,p=0,w=r&&r.length;p<
w;p++){var P=!1,L=!1;k=r[p];l=k.name;q=U(k.value);k=ya(l);if(n=gb.test(k))l=l.replace(Sc,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()});var u=k.replace(/(Start|End)$/,"");B(u)&&k===u+"Start"&&(P=l,L=l.substr(0,l.length-5)+"end",l=l.substr(0,l.length-6));k=ya(l.toLowerCase());h[k]=l;if(n||!c.hasOwnProperty(k))c[k]=q,Mc(a,k)&&(c[k]=!0);Pa(a,b,q,k,n);da(b,k,"A",d,g,P,L)}a=a.className;I(a)&&(a=a.animVal);if(F(a)&&""!==a)for(;l=f.exec(a);)k=ya(l[2]),da(b,k,"C",d,g)&&(c[k]=U(l[3])),
a=a.substr(l.index+l[0].length);break;case qb:M(b,a.nodeValue);break;case 8:try{if(l=e.exec(a.nodeValue))k=ya(l[1]),da(b,k,"M",d,g)&&(c[k]=U(l[2]))}catch(v){}}b.sort(N);return b}function wa(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ja("uterdir",b,c);a.nodeType==oa&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return D(d)}function J(a,b,c){return function(d,e,f,g,h){e=wa(e[0],b,c);return a(d,e,f,g,h)}}function fa(a,
d,e,f,g,l,k,n,r){function w(a,b,c,d){if(a){c&&(a=J(a,c,d));a.require=K.require;a.directiveName=x;if(T===K||K.$$isolateScope)a=Z(a,{isolateScope:!0});k.push(a)}if(b){c&&(b=J(b,c,d));b.require=K.require;b.directiveName=x;if(T===K||K.$$isolateScope)b=Z(b,{isolateScope:!0});n.push(b)}}function L(a,b,c,d){var e,f="data",g=!1,l=c,k;if(F(b)){k=b.match(h);b=b.substring(k[0].length);k[3]&&(k[1]?k[3]=null:k[1]=k[3]);"^"===k[1]?f="inheritedData":"^^"===k[1]&&(f="inheritedData",l=c.parent());"?"===k[2]&&(g=!0);
e=null;d&&"data"===f&&(e=d[b])&&(e=e.instance);e=e||l[f]("$"+b+"Controller");if(!e&&!g)throw ja("ctreq",b,a);return e||null}H(b)&&(e=[],s(b,function(b){e.push(L(a,b,c,d))}));return e}function v(a,c,f,g,h){function l(a,b,c){var d;Va(a)||(c=b,b=a,a=t);z&&(d=O);c||(c=z?W.parent():W);return h(a,b,d,c,wa)}var r,w,u,A,O,fb,W,J;d===f?(J=e,W=e.$$element):(W=D(f),J=new Yb(W,e));T&&(A=c.$new(!0));h&&(fb=l,fb.$$boundTransclude=h);C&&(X={},O={},s(C,function(a){var b={$scope:a===T||a.$$isolateScope?A:c,$element:W,
$attrs:J,$transclude:fb};u=a.controller;"@"==u&&(u=J[a.name]);b=p(u,b,!0,a.controllerAs);O[a.name]=b;z||W.data("$"+a.name+"Controller",b.instance);X[a.name]=b}));if(T){E.$$addScopeInfo(W,A,!0,!(ka&&(ka===T||ka===T.$$originalDirective)));E.$$addScopeClass(W,!0);g=X&&X[T.name];var xa=A;g&&g.identifier&&!0===T.bindToController&&(xa=g.instance);s(A.$$isolateBindings=T.$$isolateBindings,function(a,d){var e=a.attrName,f=a.optional,g,h,l,k;switch(a.mode){case "@":J.$observe(e,function(a){xa[d]=a});J.$$observers[e].$$scope=
c;J[e]&&(xa[d]=b(J[e])(c));break;case "=":if(f&&!J[e])break;h=P(J[e]);k=h.literal?ga:function(a,b){return a===b||a!==a&&b!==b};l=h.assign||function(){g=xa[d]=h(c);throw ja("nonassign",J[e],T.name);};g=xa[d]=h(c);f=function(a){k(a,xa[d])||(k(a,g)?l(c,a=xa[d]):xa[d]=a);return g=a};f.$stateful=!0;f=a.collection?c.$watchCollection(J[e],f):c.$watch(P(J[e],f),null,h.literal);A.$on("$destroy",f);break;case "&":h=P(J[e]),xa[d]=function(a){return h(c,a)}}})}X&&(s(X,function(a){a()}),X=null);g=0;for(r=k.length;g<
r;g++)w=k[g],$(w,w.isolateScope?A:c,W,J,w.require&&L(w.directiveName,w.require,W,O),fb);var wa=c;T&&(T.template||null===T.templateUrl)&&(wa=A);a&&a(wa,f.childNodes,t,h);for(g=n.length-1;0<=g;g--)w=n[g],$(w,w.isolateScope?A:c,W,J,w.require&&L(w.directiveName,w.require,W,O),fb)}r=r||{};for(var A=-Number.MAX_VALUE,O,C=r.controllerDirectives,X,T=r.newIsolateScopeDirective,ka=r.templateDirective,fa=r.nonTlbTranscludeDirective,da=!1,B=!1,z=r.hasElementTranscludeDirective,aa=e.$$element=D(d),K,x,N,Aa=f,
Q,M=0,R=a.length;M<R;M++){K=a[M];var Pa=K.$$start,gb=K.$$end;Pa&&(aa=wa(d,Pa,gb));N=t;if(A>K.priority)break;if(N=K.scope)K.templateUrl||(I(N)?(Oa("new/isolated scope",T||O,K,aa),T=K):Oa("new/isolated scope",T,K,aa)),O=O||K;x=K.name;!K.templateUrl&&K.controller&&(N=K.controller,C=C||{},Oa("'"+x+"' controller",C[x],K,aa),C[x]=K);if(N=K.transclude)da=!0,K.$$tlb||(Oa("transclusion",fa,K,aa),fa=K),"element"==N?(z=!0,A=K.priority,N=aa,aa=e.$$element=D(Y.createComment(" "+x+": "+e[x]+" ")),d=aa[0],V(g,Za.call(N,
0),d),Aa=E(N,f,A,l&&l.name,{nonTlbTranscludeDirective:fa})):(N=D(Vb(d)).contents(),aa.empty(),Aa=E(N,f));if(K.template)if(B=!0,Oa("template",ka,K,aa),ka=K,N=G(K.template)?K.template(aa,e):K.template,N=Tc(N),K.replace){l=K;N=Tb.test(N)?Uc(Xb(K.templateNamespace,U(N))):[];d=N[0];if(1!=N.length||d.nodeType!==oa)throw ja("tplrt",x,"");V(g,aa,d);R={$attr:{}};N=W(d,[],R);var ba=a.splice(M+1,a.length-(M+1));T&&y(N);a=a.concat(N).concat(ba);Rc(e,R);R=a.length}else aa.html(N);if(K.templateUrl)B=!0,Oa("template",
ka,K,aa),ka=K,K.replace&&(l=K),v=S(a.splice(M,a.length-M),aa,e,g,da&&Aa,k,n,{controllerDirectives:C,newIsolateScopeDirective:T,templateDirective:ka,nonTlbTranscludeDirective:fa}),R=a.length;else if(K.compile)try{Q=K.compile(aa,e,Aa),G(Q)?w(null,Q,Pa,gb):Q&&w(Q.pre,Q.post,Pa,gb)}catch(of){c(of,va(aa))}K.terminal&&(v.terminal=!0,A=Math.max(A,K.priority))}v.scope=O&&!0===O.scope;v.transcludeOnThisElement=da;v.elementTranscludeOnThisElement=z;v.templateOnThisElement=B;v.transclude=Aa;r.hasElementTranscludeDirective=
z;return v}function y(a){for(var b=0,c=a.length;b<c;b++)a[b]=Pb(a[b],{$$isolateScope:!0})}function da(b,e,f,g,h,l,k){if(e===h)return null;h=null;if(d.hasOwnProperty(e)){var q;e=a.get(e+"Directive");for(var r=0,p=e.length;r<p;r++)try{q=e[r],(g===t||g>q.priority)&&-1!=q.restrict.indexOf(f)&&(l&&(q=Pb(q,{$$start:l,$$end:k})),b.push(q),h=q)}catch(w){c(w)}}return h}function B(b){if(d.hasOwnProperty(b))for(var c=a.get(b+"Directive"),e=0,f=c.length;e<f;e++)if(b=c[e],b.multiElement)return!0;return!1}function Rc(a,
b){var c=b.$attr,d=a.$attr,e=a.$$element;s(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});s(b,function(b,f){"class"==f?(O(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function S(a,b,c,d,e,f,g,h){var l=[],k,q,n=b[0],p=a.shift(),w=Pb(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),
P=G(p.templateUrl)?p.templateUrl(b,c):p.templateUrl,u=p.templateNamespace;b.empty();r(L.getTrustedResourceUrl(P)).then(function(r){var L,v;r=Tc(r);if(p.replace){r=Tb.test(r)?Uc(Xb(u,U(r))):[];L=r[0];if(1!=r.length||L.nodeType!==oa)throw ja("tplrt",p.name,P);r={$attr:{}};V(d,b,L);var A=W(L,[],r);I(p.scope)&&y(A);a=A.concat(a);Rc(c,r)}else L=n,b.html(r);a.unshift(w);k=fa(a,L,c,e,b,p,f,g,h);s(d,function(a,c){a==L&&(d[c]=b[0])});for(q=T(b[0].childNodes,e);l.length;){r=l.shift();v=l.shift();var C=l.shift(),
E=l.shift(),A=b[0];if(!r.$$destroyed){if(v!==n){var J=v.className;h.hasElementTranscludeDirective&&p.replace||(A=Vb(L));V(C,D(v),A);O(D(A),J)}v=k.transcludeOnThisElement?X(r,k.transclude,E):E;k(q,r,A,d,v)}}l=null});return function(a,b,c,d,e){a=e;b.$$destroyed||(l?l.push(b,c,d,a):(k.transcludeOnThisElement&&(a=X(b,k.transclude,e)),k(q,b,c,d,a)))}}function N(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Oa(a,b,c,d){if(b)throw ja("multidir",
b.name,c.name,a,va(d));}function M(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&E.$$addBindingClass(a);return function(a,c){var e=c.parent();b||E.$$addBindingClass(e);E.$$addBindingInfo(e,d.expressions);a.$watch(d,function(a){c[0].nodeValue=a})}}})}function Xb(a,b){a=Q(a||"html");switch(a){case "svg":case "math":var c=Y.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function R(a,b){if("srcdoc"==
b)return L.HTML;var c=ua(a);if("xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b))return L.RESOURCE_URL}function Pa(a,c,d,e,f){var h=R(a,e);f=g[e]||f;var k=b(d,!0,h,f);if(k){if("multiple"===e&&"select"===ua(a))throw ja("selmulti",va(a));c.push({priority:100,compile:function(){return{pre:function(a,c,g){c=g.$$observers||(g.$$observers={});if(l.test(e))throw ja("nodomevents");var n=g[e];n!==d&&(k=n&&b(n,!0,h,f),d=n);k&&(g[e]=k(a),(c[e]||(c[e]=[])).$$inter=!0,(g.$$observers&&g.$$observers[e].$$scope||
a).$watch(k,function(a,b){"class"===e&&a!=b?g.$updateClass(a,b):g.$set(e,a)}))}}}})}}function V(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,h;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]==d){a[g++]=c;h=g+e-1;for(var l=a.length;g<l;g++,h++)h<l?a[g]=a[h]:delete a[g];a.length-=e-1;a.context===d&&(a.context=c);break}f&&f.replaceChild(c,d);a=Y.createDocumentFragment();a.appendChild(d);D(c).data(D(d).data());sa?(Rb=!0,sa.cleanData([d])):delete D.cache[d[D.expando]];d=1;for(e=b.length;d<e;d++)f=b[d],D(f).remove(),
a.appendChild(f),delete b[d];b[0]=c;b.length=1}function Z(a,b){return x(function(){return a.apply(null,arguments)},a,b)}function $(a,b,d,e,f,g){try{a(b,d,e,f,g)}catch(h){c(h,va(d))}}var Yb=function(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a};Yb.prototype={$normalize:ya,$addClass:function(a){a&&0<a.length&&C.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&C.removeClass(this.$$element,a)},$updateClass:function(a,
b){var c=Vc(a,b);c&&c.length&&C.addClass(this.$$element,c);(c=Vc(b,a))&&c.length&&C.removeClass(this.$$element,c)},$set:function(a,b,d,e){var f=this.$$element[0],g=Mc(f,a),h=kf(f,a),f=a;g?(this.$$element.prop(a,b),e=g):h&&(this[h]=b,f=h);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=uc(a,"-"));g=ua(this.$$element);if("a"===g&&"href"===a||"img"===g&&"src"===a)this[a]=b=A(b,"src"===a);else if("img"===g&&"srcset"===a){for(var g="",h=U(b),l=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,l=/\s/.test(h)?
l:/(,)/,h=h.split(l),l=Math.floor(h.length/2),k=0;k<l;k++)var q=2*k,g=g+A(U(h[q]),!0),g=g+(" "+U(h[q+1]));h=U(h[2*k]).split(/\s/);g+=A(U(h[0]),!0);2===h.length&&(g+=" "+U(h[1]));this[a]=b=g}!1!==d&&(null===b||b===t?this.$$element.removeAttr(e):this.$$element.attr(e,b));(a=this.$$observers)&&s(a[f],function(a){try{a(b)}catch(d){c(d)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=ha()),e=d[a]||(d[a]=[]);e.push(b);v.$evalAsync(function(){!e.$$inter&&c.hasOwnProperty(a)&&b(c[a])});
return function(){Xa(e,b)}}};var Aa=b.startSymbol(),ka=b.endSymbol(),Tc="{{"==Aa||"}}"==ka?pa:function(a){return a.replace(/\{\{/g,Aa).replace(/}}/g,ka)},gb=/^ngAttr[A-Z]/;E.$$addBindingInfo=k?function(a,b){var c=a.data("$binding")||[];H(b)?c=c.concat(b):c.push(b);a.data("$binding",c)}:z;E.$$addBindingClass=k?function(a){O(a,"ng-binding")}:z;E.$$addScopeInfo=k?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:z;E.$$addScopeClass=k?function(a,b){O(a,b?"ng-isolate-scope":
"ng-scope")}:z;return E}]}function ya(b){return db(b.replace(Sc,""))}function Vc(b,a){var c="",d=b.split(/\s+/),e=a.split(/\s+/),f=0;a:for(;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(0<c.length?" ":"")+g}return c}function Uc(b){b=D(b);var a=b.length;if(1>=a)return b;for(;a--;)8===b[a].nodeType&&pf.call(b,a,1);return b}function Fe(){var b={},a=!1,c=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(a,c){Ma(a,"controller");I(a)?x(b,a):b[a]=c};this.allowGlobals=function(){a=
!0};this.$get=["$injector","$window",function(d,e){function f(a,b,c,d){if(!a||!I(a.$scope))throw S("$controller")("noscp",d,b);a.$scope[b]=c}return function(g,h,l,k){var m,n,q;l=!0===l;k&&F(k)&&(q=k);if(F(g)){k=g.match(c);if(!k)throw qf("ctrlfmt",g);n=k[1];q=q||k[3];g=b.hasOwnProperty(n)?b[n]:wc(h.$scope,n,!0)||(a?wc(e,n,!0):t);tb(g,n,!0)}if(l)return l=(H(g)?g[g.length-1]:g).prototype,m=Object.create(l||null),q&&f(h,q,m,n||g.name),x(function(){d.invoke(g,m,h,n);return m},{instance:m,identifier:q});
m=d.instantiate(g,h,n);q&&f(h,q,m,n||g.name);return m}}]}function Ge(){this.$get=["$window",function(b){return D(b.document)}]}function He(){this.$get=["$log",function(b){return function(a,c){b.error.apply(b,arguments)}}]}function Zb(b,a){if(F(b)){var c=b.replace(rf,"").trim();if(c){var d=a("Content-Type");(d=d&&0===d.indexOf(Wc))||(d=(d=c.match(sf))&&tf[d[0]].test(c));d&&(b=pc(c))}}return b}function Xc(b){var a=ha(),c,d,e;if(!b)return a;s(b.split("\n"),function(b){e=b.indexOf(":");c=Q(U(b.substr(0,
e)));d=U(b.substr(e+1));c&&(a[c]=a[c]?a[c]+", "+d:d)});return a}function Yc(b){var a=I(b)?b:t;return function(c){a||(a=Xc(b));return c?(c=a[Q(c)],void 0===c&&(c=null),c):a}}function Zc(b,a,c,d){if(G(d))return d(b,a,c);s(d,function(d){b=d(b,a,c)});return b}function Ke(){var b=this.defaults={transformResponse:[Zb],transformRequest:[function(a){return I(a)&&"[object File]"!==Da.call(a)&&"[object Blob]"!==Da.call(a)&&"[object FormData]"!==Da.call(a)?$a(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},
post:ra($b),put:ra($b),patch:ra($b)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},a=!1;this.useApplyAsync=function(b){return y(b)?(a=!!b,this):a};var c=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(d,e,f,g,h,l){function k(a){function c(a){var b=x({},a);b.data=a.data?Zc(a.data,a.headers,a.status,e.transformResponse):a.data;a=a.status;return 200<=a&&300>a?b:h.reject(b)}function d(a){var b,c={};s(a,function(a,d){G(a)?(b=
a(),null!=b&&(c[d]=b)):c[d]=a});return c}if(!ca.isObject(a))throw S("$http")("badreq",a);var e=x({method:"get",transformRequest:b.transformRequest,transformResponse:b.transformResponse},a);e.headers=function(a){var c=b.headers,e=x({},a.headers),f,g,c=x({},c.common,c[Q(a.method)]);a:for(f in c){a=Q(f);for(g in e)if(Q(g)===a)continue a;e[f]=c[f]}return d(e)}(a);e.method=vb(e.method);var f=[function(a){var d=a.headers,e=Zc(a.data,Yc(d),t,a.transformRequest);B(e)&&s(d,function(a,b){"content-type"===Q(b)&&
delete d[b]});B(a.withCredentials)&&!B(b.withCredentials)&&(a.withCredentials=b.withCredentials);return m(a,e).then(c,c)},t],g=h.when(e);for(s(u,function(a){(a.request||a.requestError)&&f.unshift(a.request,a.requestError);(a.response||a.responseError)&&f.push(a.response,a.responseError)});f.length;){a=f.shift();var l=f.shift(),g=g.then(a,l)}g.success=function(a){g.then(function(b){a(b.data,b.status,b.headers,e)});return g};g.error=function(a){g.then(null,function(b){a(b.data,b.status,b.headers,e)});
return g};return g}function m(c,f){function l(b,c,d,e){function f(){m(c,b,d,e)}O&&(200<=b&&300>b?O.put(X,[b,c,Xc(d),e]):O.remove(X));a?g.$applyAsync(f):(f(),g.$$phase||g.$apply())}function m(a,b,d,e){b=Math.max(b,0);(200<=b&&300>b?C.resolve:C.reject)({data:a,status:b,headers:Yc(d),config:c,statusText:e})}function w(a){m(a.data,a.status,ra(a.headers()),a.statusText)}function u(){var a=k.pendingRequests.indexOf(c);-1!==a&&k.pendingRequests.splice(a,1)}var C=h.defer(),A=C.promise,O,E,s=c.headers,X=n(c.url,
c.params);k.pendingRequests.push(c);A.then(u,u);!c.cache&&!b.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(O=I(c.cache)?c.cache:I(b.cache)?b.cache:q);O&&(E=O.get(X),y(E)?E&&G(E.then)?E.then(w,w):H(E)?m(E[1],E[0],ra(E[2]),E[3]):m(E,200,{},"OK"):O.put(X,A));B(E)&&((E=$c(c.url)?e.cookies()[c.xsrfCookieName||b.xsrfCookieName]:t)&&(s[c.xsrfHeaderName||b.xsrfHeaderName]=E),d(c.method,X,f,l,s,c.timeout,c.withCredentials,c.responseType));return A}function n(a,b){if(!b)return a;var c=[];Ed(b,
function(a,b){null===a||B(a)||(H(a)||(a=[a]),s(a,function(a){I(a)&&(a=qa(a)?a.toISOString():$a(a));c.push(Fa(b)+"="+Fa(a))}))});0<c.length&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&"));return a}var q=f("$http"),u=[];s(c,function(a){u.unshift(F(a)?l.get(a):l.invoke(a))});k.pendingRequests=[];(function(a){s(arguments,function(a){k[a]=function(b,c){return k(x(c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){s(arguments,function(a){k[a]=function(b,c,d){return k(x(d||{},{method:a,
url:b,data:c}))}})})("post","put","patch");k.defaults=b;return k}]}function uf(){return new M.XMLHttpRequest}function Le(){this.$get=["$browser","$window","$document",function(b,a,c){return vf(b,uf,b.defer,a.angular.callbacks,c[0])}]}function vf(b,a,c,d,e){function f(a,b,c){var f=e.createElement("script"),m=null;f.type="text/javascript";f.src=a;f.async=!0;m=function(a){f.removeEventListener("load",m,!1);f.removeEventListener("error",m,!1);e.body.removeChild(f);f=null;var g=-1,u="unknown";a&&("load"!==
a.type||d[b].called||(a={type:"error"}),u=a.type,g="error"===a.type?404:200);c&&c(g,u)};f.addEventListener("load",m,!1);f.addEventListener("error",m,!1);e.body.appendChild(f);return m}return function(e,h,l,k,m,n,q,u){function r(){v&&v();w&&w.abort()}function P(a,d,e,f,g){C!==t&&c.cancel(C);v=w=null;a(d,e,f,g);b.$$completeOutstandingRequest(z)}b.$$incOutstandingRequestCount();h=h||b.url();if("jsonp"==Q(e)){var p="_"+(d.counter++).toString(36);d[p]=function(a){d[p].data=a;d[p].called=!0};var v=f(h.replace("JSON_CALLBACK",
"angular.callbacks."+p),p,function(a,b){P(k,a,d[p].data,"",b);d[p]=z})}else{var w=a();w.open(e,h,!0);s(m,function(a,b){y(a)&&w.setRequestHeader(b,a)});w.onload=function(){var a=w.statusText||"",b="response"in w?w.response:w.responseText,c=1223===w.status?204:w.status;0===c&&(c=b?200:"file"==Ba(h).protocol?404:0);P(k,c,b,w.getAllResponseHeaders(),a)};e=function(){P(k,-1,null,null,"")};w.onerror=e;w.onabort=e;q&&(w.withCredentials=!0);if(u)try{w.responseType=u}catch(L){if("json"!==u)throw L;}w.send(l||
null)}if(0<n)var C=c(r,n);else n&&G(n.then)&&n.then(r)}}function Ie(){var b="{{",a="}}";this.startSymbol=function(a){return a?(b=a,this):b};this.endSymbol=function(b){return b?(a=b,this):a};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(f,g,u,r){function P(c){return c.replace(k,b).replace(m,a)}function p(a){try{var b=a;a=u?e.getTrusted(u,b):e.valueOf(b);var c;if(r&&!y(a))c=a;else if(null==a)c="";else{switch(typeof a){case "string":break;case "number":a=
""+a;break;default:a=$a(a)}c=a}return c}catch(g){c=ac("interr",f,g.toString()),d(c)}}r=!!r;for(var v,w,L=0,C=[],A=[],O=f.length,E=[],s=[];L<O;)if(-1!=(v=f.indexOf(b,L))&&-1!=(w=f.indexOf(a,v+h)))L!==v&&E.push(P(f.substring(L,v))),L=f.substring(v+h,w),C.push(L),A.push(c(L,p)),L=w+l,s.push(E.length),E.push("");else{L!==O&&E.push(P(f.substring(L)));break}if(u&&1<E.length)throw ac("noconcat",f);if(!g||C.length){var X=function(a){for(var b=0,c=C.length;b<c;b++){if(r&&B(a[b]))return;E[s[b]]=a[b]}return E.join("")};
return x(function(a){var b=0,c=C.length,e=Array(c);try{for(;b<c;b++)e[b]=A[b](a);return X(e)}catch(g){a=ac("interr",f,g.toString()),d(a)}},{exp:f,expressions:C,$$watchDelegate:function(a,b,c){var d;return a.$watchGroup(A,function(c,e){var f=X(c);G(b)&&b.call(this,f,c!==e?d:f,a);d=f},c)}})}}var h=b.length,l=a.length,k=new RegExp(b.replace(/./g,f),"g"),m=new RegExp(a.replace(/./g,f),"g");g.startSymbol=function(){return b};g.endSymbol=function(){return a};return g}]}function Je(){this.$get=["$rootScope",
"$window","$q","$$q",function(b,a,c,d){function e(e,h,l,k){var m=a.setInterval,n=a.clearInterval,q=0,u=y(k)&&!k,r=(u?d:c).defer(),P=r.promise;l=y(l)?l:0;P.then(null,null,e);P.$$intervalId=m(function(){r.notify(q++);0<l&&q>=l&&(r.resolve(q),n(P.$$intervalId),delete f[P.$$intervalId]);u||b.$apply()},h);f[P.$$intervalId]=r;return P}var f={};e.cancel=function(b){return b&&b.$$intervalId in f?(f[b.$$intervalId].reject("canceled"),a.clearInterval(b.$$intervalId),delete f[b.$$intervalId],!0):!1};return e}]}
function Rd(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00a4",posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(b){return 1===b?"one":"other"}}}}function bc(b){b=b.split("/");for(var a=b.length;a--;)b[a]=rb(b[a]);return b.join("/")}function ad(b,a){var c=Ba(b);a.$$protocol=
c.protocol;a.$$host=c.hostname;a.$$port=ba(c.port)||wf[c.protocol]||null}function bd(b,a){var c="/"!==b.charAt(0);c&&(b="/"+b);var d=Ba(b);a.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname);a.$$search=rc(d.search);a.$$hash=decodeURIComponent(d.hash);a.$$path&&"/"!=a.$$path.charAt(0)&&(a.$$path="/"+a.$$path)}function za(b,a){if(0===a.indexOf(b))return a.substr(b.length)}function Ha(b){var a=b.indexOf("#");return-1==a?b:b.substr(0,a)}function Gb(b){return b.replace(/(#.+)|#$/,
"$1")}function cc(b){return b.substr(0,Ha(b).lastIndexOf("/")+1)}function dc(b,a){this.$$html5=!0;a=a||"";var c=cc(b);ad(b,this);this.$$parse=function(a){var b=za(c,a);if(!F(b))throw Hb("ipthprfx",a,c);bd(b,this);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Qb(this.$$search),b=this.$$hash?"#"+rb(this.$$hash):"";this.$$url=bc(this.$$path)+(a?"?"+a:"")+b;this.$$absUrl=c+this.$$url.substr(1)};this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),
!0;var f,g;(f=za(b,d))!==t?(g=f,g=(f=za(a,f))!==t?c+(za("/",f)||f):b+g):(f=za(c,d))!==t?g=c+f:c==d+"/"&&(g=c);g&&this.$$parse(g);return!!g}}function ec(b,a){var c=cc(b);ad(b,this);this.$$parse=function(d){d=za(b,d)||za(c,d);var e;"#"===d.charAt(0)?(e=za(a,d),B(e)&&(e=d)):e=this.$$html5?d:"";bd(e,this);d=this.$$path;var f=/^\/[A-Z]:(\/.*)/;0===e.indexOf(b)&&(e=e.replace(b,""));f.exec(e)||(d=(e=f.exec(d))?e[1]:d);this.$$path=d;this.$$compose()};this.$$compose=function(){var c=Qb(this.$$search),e=this.$$hash?
"#"+rb(this.$$hash):"";this.$$url=bc(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+(this.$$url?a+this.$$url:"")};this.$$parseLinkUrl=function(a,c){return Ha(b)==Ha(a)?(this.$$parse(a),!0):!1}}function cd(b,a){this.$$html5=!0;ec.apply(this,arguments);var c=cc(b);this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;b==Ha(d)?f=d:(g=za(c,d))?f=b+a+g:c===d+"/"&&(f=c);f&&this.$$parse(f);return!!f};this.$$compose=function(){var c=Qb(this.$$search),e=this.$$hash?"#"+rb(this.$$hash):
"";this.$$url=bc(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+a+this.$$url}}function Ib(b){return function(){return this[b]}}function dd(b,a){return function(c){if(B(c))return this[b];this[b]=a(c);this.$$compose();return this}}function Me(){var b="",a={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(a){return y(a)?(b=a,this):b};this.html5Mode=function(b){return Wa(b)?(a.enabled=b,this):I(b)?(Wa(b.enabled)&&(a.enabled=b.enabled),Wa(b.requireBase)&&(a.requireBase=b.requireBase),Wa(b.rewriteLinks)&&
(a.rewriteLinks=b.rewriteLinks),this):a};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=k.url(),f=k.$$state;try{d.url(a,b,c),k.$$state=d.state()}catch(g){throw k.url(e),k.$$state=f,g;}}function l(a,b){c.$broadcast("$locationChangeSuccess",k.absUrl(),a,k.$$state,b)}var k,m;m=d.baseHref();var n=d.url(),q;if(a.enabled){if(!m&&a.requireBase)throw Hb("nobase");q=n.substring(0,n.indexOf("/",n.indexOf("//")+2))+(m||"/");m=e.history?dc:cd}else q=
Ha(n),m=ec;k=new m(q,"#"+b);k.$$parseLinkUrl(n,n);k.$$state=d.state();var u=/^\s*(javascript|mailto):/i;f.on("click",function(b){if(a.rewriteLinks&&!b.ctrlKey&&!b.metaKey&&!b.shiftKey&&2!=b.which&&2!=b.button){for(var e=D(b.target);"a"!==ua(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),l=e.attr("href")||e.attr("xlink:href");I(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=Ba(h.animVal).href);u.test(h)||!h||e.attr("target")||b.isDefaultPrevented()||!k.$$parseLinkUrl(h,
l)||(b.preventDefault(),k.absUrl()!=d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}});Gb(k.absUrl())!=Gb(n)&&d.url(k.absUrl(),!0);var r=!0;d.onUrlChange(function(a,b){c.$evalAsync(function(){var d=k.absUrl(),e=k.$$state,f;k.$$parse(a);k.$$state=b;f=c.$broadcast("$locationChangeStart",a,d,b,e).defaultPrevented;k.absUrl()===a&&(f?(k.$$parse(d),k.$$state=e,h(d,!1,e)):(r=!1,l(d,e)))});c.$$phase||c.$digest()});c.$watch(function(){var a=Gb(d.url()),b=Gb(k.absUrl()),f=d.state(),g=k.$$replace,
q=a!==b||k.$$html5&&e.history&&f!==k.$$state;if(r||q)r=!1,c.$evalAsync(function(){var b=k.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,k.$$state,f).defaultPrevented;k.absUrl()===b&&(d?(k.$$parse(a),k.$$state=f):(q&&h(b,g,f===k.$$state?null:k.$$state),l(a,f)))});k.$$replace=!1});return k}]}function Ne(){var b=!0,a=this;this.debugEnabled=function(a){return y(a)?(b=a,this):b};this.$get=["$window",function(c){function d(a){a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?
"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=c.console||{},e=b[a]||b.log||z;a=!1;try{a=!!e.apply}catch(l){}return a?function(){var a=[];s(arguments,function(b){a.push(d(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments)}}()}}]}function ta(b,a){if("__defineGetter__"===
b||"__defineSetter__"===b||"__lookupGetter__"===b||"__lookupSetter__"===b||"__proto__"===b)throw la("isecfld",a);return b}function ma(b,a){if(b){if(b.constructor===b)throw la("isecfn",a);if(b.window===b)throw la("isecwindow",a);if(b.children&&(b.nodeName||b.prop&&b.attr&&b.find))throw la("isecdom",a);if(b===Object)throw la("isecobj",a);}return b}function fc(b){return b.constant}function hb(b,a,c,d,e){ma(b,e);ma(a,e);c=c.split(".");for(var f,g=0;1<c.length;g++){f=ta(c.shift(),e);var h=0===g&&a&&a[f]||
b[f];h||(h={},b[f]=h);b=ma(h,e)}f=ta(c.shift(),e);ma(b[f],e);return b[f]=d}function Qa(b){return"constructor"==b}function ed(b,a,c,d,e,f,g){ta(b,f);ta(a,f);ta(c,f);ta(d,f);ta(e,f);var h=function(a){return ma(a,f)},l=g||Qa(b)?h:pa,k=g||Qa(a)?h:pa,m=g||Qa(c)?h:pa,n=g||Qa(d)?h:pa,q=g||Qa(e)?h:pa;return function(f,g){var h=g&&g.hasOwnProperty(b)?g:f;if(null==h)return h;h=l(h[b]);if(!a)return h;if(null==h)return t;h=k(h[a]);if(!c)return h;if(null==h)return t;h=m(h[c]);if(!d)return h;if(null==h)return t;
h=n(h[d]);return e?null==h?t:h=q(h[e]):h}}function xf(b,a){return function(c,d){return b(c,d,ma,a)}}function yf(b,a,c){var d=a.expensiveChecks,e=d?zf:Af,f=e[b];if(f)return f;var g=b.split("."),h=g.length;if(a.csp)f=6>h?ed(g[0],g[1],g[2],g[3],g[4],c,d):function(a,b){var e=0,f;do f=ed(g[e++],g[e++],g[e++],g[e++],g[e++],c,d)(a,b),b=t,a=f;while(e<h);return f};else{var l="";d&&(l+="s = eso(s, fe);\nl = eso(l, fe);\n");var k=d;s(g,function(a,b){ta(a,c);var e=(b?"s":'((l&&l.hasOwnProperty("'+a+'"))?l:s)')+
"."+a;if(d||Qa(a))e="eso("+e+", fe)",k=!0;l+="if(s == null) return undefined;\ns="+e+";\n"});l+="return s;";a=new Function("s","l","eso","fe",l);a.toString=ea(l);k&&(a=xf(a,c));f=a}f.sharedGetter=!0;f.assign=function(a,c,d){return hb(a,d,b,c,b)};return e[b]=f}function gc(b){return G(b.valueOf)?b.valueOf():Bf.call(b)}function Oe(){var b=ha(),a=ha();this.$get=["$filter","$sniffer",function(c,d){function e(a){var b=a;a.sharedGetter&&(b=function(b,c){return a(b,c)},b.literal=a.literal,b.constant=a.constant,
b.assign=a.assign);return b}function f(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];e.constant||(e.inputs?f(e.inputs,b):-1===b.indexOf(e)&&b.push(e))}return b}function g(a,b){return null==a||null==b?a===b:"object"===typeof a&&(a=gc(a),"object"===typeof a)?!1:a===b||a!==a&&b!==b}function h(a,b,c,d){var e=d.$$inputs||(d.$$inputs=f(d.inputs,[])),h;if(1===e.length){var l=g,e=e[0];return a.$watch(function(a){var b=e(a);g(b,l)||(h=d(a),l=b&&gc(b));return h},b,c)}for(var k=[],q=0,n=e.length;q<n;q++)k[q]=
g;return a.$watch(function(a){for(var b=!1,c=0,f=e.length;c<f;c++){var l=e[c](a);if(b||(b=!g(l,k[c])))k[c]=l&&gc(l)}b&&(h=d(a));return h},b,c)}function l(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a;G(b)&&b.apply(this,arguments);y(a)&&d.$$postDigest(function(){y(f)&&e()})},c)}function k(a,b,c,d){function e(a){var b=!0;s(a,function(a){y(a)||(b=!1)});return b}var f,g;return f=a.$watch(function(a){return d(a)},function(a,c,d){g=a;G(b)&&b.call(this,a,c,d);e(a)&&d.$$postDigest(function(){e(g)&&
f()})},c)}function m(a,b,c,d){var e;return e=a.$watch(function(a){return d(a)},function(a,c,d){G(b)&&b.apply(this,arguments);e()},c)}function n(a,b){if(!b)return a;var c=a.$$watchDelegate,c=c!==k&&c!==l?function(c,d){var e=a(c,d);return b(e,c,d)}:function(c,d){var e=a(c,d),f=b(e,c,d);return y(e)?f:e};a.$$watchDelegate&&a.$$watchDelegate!==h?c.$$watchDelegate=a.$$watchDelegate:b.$stateful||(c.$$watchDelegate=h,c.inputs=[a]);return c}var q={csp:d.csp,expensiveChecks:!1},u={csp:d.csp,expensiveChecks:!0};
return function(d,f,g){var v,w,L;switch(typeof d){case "string":L=d=d.trim();var C=g?a:b;v=C[L];v||(":"===d.charAt(0)&&":"===d.charAt(1)&&(w=!0,d=d.substring(2)),g=g?u:q,v=new hc(g),v=(new ib(v,c,g)).parse(d),v.constant?v.$$watchDelegate=m:w?(v=e(v),v.$$watchDelegate=v.literal?k:l):v.inputs&&(v.$$watchDelegate=h),C[L]=v);return n(v,f);case "function":return n(d,f);default:return n(z,f)}}}]}function Qe(){this.$get=["$rootScope","$exceptionHandler",function(b,a){return fd(function(a){b.$evalAsync(a)},
a)}]}function Re(){this.$get=["$browser","$exceptionHandler",function(b,a){return fd(function(a){b.defer(a)},a)}]}function fd(b,a){function c(a,b,c){function d(b){return function(c){e||(e=!0,b.call(a,c))}}var e=!1;return[d(b),d(c)]}function d(){this.$$state={status:0}}function e(a,b){return function(c){b.call(a,c)}}function f(c){!c.processScheduled&&c.pending&&(c.processScheduled=!0,b(function(){var b,d,e;e=c.pending;c.processScheduled=!1;c.pending=t;for(var f=0,g=e.length;f<g;++f){d=e[f][0];b=e[f][c.status];
try{G(b)?d.resolve(b(c.value)):1===c.status?d.resolve(c.value):d.reject(c.value)}catch(h){d.reject(h),a(h)}}}))}function g(){this.promise=new d;this.resolve=e(this,this.resolve);this.reject=e(this,this.reject);this.notify=e(this,this.notify)}var h=S("$q",TypeError);d.prototype={then:function(a,b,c){var d=new g;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&f(this.$$state);return d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,
b){return this.then(function(b){return k(b,!0,a)},function(b){return k(b,!1,a)},b)}};g.prototype={resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(h("qcycle",a)):this.$$resolve(a))},$$resolve:function(b){var d,e;e=c(this,this.$$resolve,this.$$reject);try{if(I(b)||G(b))d=b&&b.then;G(d)?(this.promise.$$state.status=-1,d.call(b,e[0],e[1],this.notify)):(this.promise.$$state.value=b,this.promise.$$state.status=1,f(this.promise.$$state))}catch(g){e[1](g),a(g)}},reject:function(a){this.promise.$$state.status||
this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a;this.promise.$$state.status=2;f(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;0>=this.promise.$$state.status&&d&&d.length&&b(function(){for(var b,e,f=0,g=d.length;f<g;f++){e=d[f][0];b=d[f][3];try{e.notify(G(b)?b(c):c)}catch(h){a(h)}}})}};var l=function(a,b){var c=new g;b?c.resolve(a):c.reject(a);return c.promise},k=function(a,b,c){var d=null;try{G(c)&&(d=c())}catch(e){return l(e,!1)}return d&&G(d.then)?
d.then(function(){return l(a,b)},function(a){return l(a,!1)}):l(a,b)},m=function(a,b,c,d){var e=new g;e.resolve(a);return e.promise.then(b,c,d)},n=function u(a){if(!G(a))throw h("norslvr",a);if(!(this instanceof u))return new u(a);var b=new g;a(function(a){b.resolve(a)},function(a){b.reject(a)});return b.promise};n.defer=function(){return new g};n.reject=function(a){var b=new g;b.reject(a);return b.promise};n.when=m;n.all=function(a){var b=new g,c=0,d=H(a)?[]:{};s(a,function(a,e){c++;m(a).then(function(a){d.hasOwnProperty(e)||
(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});0===c&&b.resolve(d);return b.promise};return n}function $e(){this.$get=["$window","$timeout",function(b,a){var c=b.requestAnimationFrame||b.webkitRequestAnimationFrame,d=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(b){var c=a(b,16.66,!1);return function(){a.cancel(c)}};f.supported=e;return f}]}function Pe(){var b=
10,a=S("$rootScope"),c=null,d=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(e,f,g,h){function l(){this.$id=++ob;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$isolateBindings=null}function k(b){if(r.$$phase)throw a("inprog",r.$$phase);r.$$phase=b}function m(a,
b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function n(){}function q(){for(;v.length;)try{v.shift()()}catch(a){f(a)}d=null}function u(){null===d&&(d=h.defer(function(){r.$apply(q)}))}l.prototype={constructor:l,$new:function(a,b){function c(){d.$$destroyed=!0}var d;b=b||this;a?(d=new l,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners=
{};this.$$listenerCount={};this.$id=++ob;this.$$ChildScope=null},this.$$ChildScope.prototype=this),d=new this.$$ChildScope);d.$parent=b;d.$$prevSibling=b.$$childTail;b.$$childHead?(b.$$childTail.$$nextSibling=d,b.$$childTail=d):b.$$childHead=b.$$childTail=d;(a||b!=this)&&d.$on("$destroy",c);return d},$watch:function(a,b,d){var e=g(a);if(e.$$watchDelegate)return e.$$watchDelegate(this,b,d,e);var f=this.$$watchers,h={fn:b,last:n,get:e,exp:a,eq:!!d};c=null;G(b)||(h.fn=z);f||(f=this.$$watchers=[]);f.unshift(h);
return function(){Xa(f,h);c=null}},$watchGroup:function(a,b){function c(){h=!1;l?(l=!1,b(e,e,g)):b(e,d,g)}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,l=!0;if(!a.length){var k=!0;g.$evalAsync(function(){k&&b(e,e,g)});return function(){k=!1}}if(1===a.length)return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f)});s(a,function(a,b){var l=g.$watch(a,function(a,f){e[b]=a;d[b]=f;h||(h=!0,g.$evalAsync(c))});f.push(l)});return function(){for(;f.length;)f.shift()()}},$watchCollection:function(a,
b){function c(a){e=a;var b,d,g,h;if(!B(e)){if(I(e))if(Ta(e))for(f!==q&&(f=q,u=f.length=0,k++),a=e.length,u!==a&&(k++,f.length=u=a),b=0;b<a;b++)h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(k++,f[b]=g);else{f!==m&&(f=m={},u=0,k++);a=0;for(b in e)e.hasOwnProperty(b)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(k++,f[b]=g)):(u++,f[b]=g,k++));if(u>a)for(b in k++,f)e.hasOwnProperty(b)||(u--,delete f[b])}else f!==e&&(f=e,k++);return k}}c.$stateful=!0;var d=this,e,f,h,l=1<b.length,k=0,n=g(a,c),q=[],m=
{},p=!0,u=0;return this.$watch(n,function(){p?(p=!1,b(e,e,d)):b(e,h,d);if(l)if(I(e))if(Ta(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)sc.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var e,g,l,m,u,v,s=b,t,W=[],y,J;k("$digest");h.$$checkUrlChange();this===r&&null!==d&&(h.defer.cancel(d),q());c=null;do{v=!1;for(t=this;P.length;){try{J=P.shift(),J.scope.$eval(J.expression,J.locals)}catch(D){f(D)}c=null}a:do{if(m=t.$$watchers)for(u=m.length;u--;)try{if(e=m[u])if((g=
e.get(t))!==(l=e.last)&&!(e.eq?ga(g,l):"number"===typeof g&&"number"===typeof l&&isNaN(g)&&isNaN(l)))v=!0,c=e,e.last=e.eq?Ea(g,null):g,e.fn(g,l===n?g:l,t),5>s&&(y=4-s,W[y]||(W[y]=[]),W[y].push({msg:G(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:g,oldVal:l}));else if(e===c){v=!1;break a}}catch(B){f(B)}if(!(m=t.$$childHead||t!==this&&t.$$nextSibling))for(;t!==this&&!(m=t.$$nextSibling);)t=t.$parent}while(t=m);if((v||P.length)&&!s--)throw r.$$phase=null,a("infdig",b,W);}while(v||P.length);
for(r.$$phase=null;p.length;)try{p.shift()()}catch(da){f(da)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;if(this!==r){for(var b in this.$$listenerCount)m(this,this.$$listenerCount[b],b);a.$$childHead==this&&(a.$$childHead=this.$$nextSibling);a.$$childTail==this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);
this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=z;this.$on=this.$watch=this.$watchGroup=function(){return z};this.$$listeners={};this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(a,b){return g(a)(this,b)},$evalAsync:function(a,b){r.$$phase||P.length||h.defer(function(){P.length&&r.$digest()});P.push({scope:this,expression:a,locals:b})},$$postDigest:function(a){p.push(a)},$apply:function(a){try{return k("$apply"),
this.$eval(a)}catch(b){f(b)}finally{r.$$phase=null;try{r.$digest()}catch(c){throw f(c),c;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&v.push(b);u()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,m(e,1,a))}},$emit:function(a,b){var c=[],d,e=this,g=!1,h={name:a,targetScope:e,
stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},l=Ya([h],arguments,1),k,m;do{d=e.$$listeners[a]||c;h.currentScope=e;k=0;for(m=d.length;k<m;k++)if(d[k])try{d[k].apply(null,l)}catch(n){f(n)}else d.splice(k,1),k--,m--;if(g)return h.currentScope=null,h;e=e.$parent}while(e);h.currentScope=null;return h},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;
for(var g=Ya([e],arguments,1),h,l;c=d;){e.currentScope=c;d=c.$$listeners[a]||[];h=0;for(l=d.length;h<l;h++)if(d[h])try{d[h].apply(null,g)}catch(k){f(k)}else d.splice(h,1),h--,l--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}e.currentScope=null;return e}};var r=new l,P=r.$$asyncQueue=[],p=r.$$postDigestQueue=[],v=r.$$applyAsyncQueue=[];return r}]}function Sd(){var b=/^\s*(https?|ftp|mailto|tel|file):/,a=/^\s*((https?|ftp|file|blob):|data:image\/)/;
this.aHrefSanitizationWhitelist=function(a){return y(a)?(b=a,this):b};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a=b,this):a};this.$get=function(){return function(c,d){var e=d?a:b,f;f=Ba(c).href;return""===f||f.match(e)?c:"unsafe:"+f}}}function Cf(b){if("self"===b)return b;if(F(b)){if(-1<b.indexOf("***"))throw Ca("iwcard",b);b=gd(b).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return new RegExp("^"+b+"$")}if(pb(b))return new RegExp("^"+b.source+"$");throw Ca("imatcher");}function hd(b){var a=
[];y(b)&&s(b,function(b){a.push(Cf(b))});return a}function Te(){this.SCE_CONTEXTS=na;var b=["self"],a=[];this.resourceUrlWhitelist=function(a){arguments.length&&(b=hd(a));return b};this.resourceUrlBlacklist=function(b){arguments.length&&(a=hd(b));return a};this.$get=["$injector",function(c){function d(a,b){return"self"===a?$c(b):!!a.exec(b.href)}function e(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};
b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var f=function(a){throw Ca("unsafe");};c.has("$sanitize")&&(f=c.get("$sanitize"));var g=e(),h={};h[na.HTML]=e(g);h[na.CSS]=e(g);h[na.URL]=e(g);h[na.JS]=e(g);h[na.RESOURCE_URL]=e(h[na.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw Ca("icontext",a,b);if(null===b||b===t||""===b)return b;if("string"!==typeof b)throw Ca("itype",a);return new c(b)},getTrusted:function(c,e){if(null===
e||e===t||""===e)return e;var g=h.hasOwnProperty(c)?h[c]:null;if(g&&e instanceof g)return e.$$unwrapTrustedValue();if(c===na.RESOURCE_URL){var g=Ba(e.toString()),n,q,u=!1;n=0;for(q=b.length;n<q;n++)if(d(b[n],g)){u=!0;break}if(u)for(n=0,q=a.length;n<q;n++)if(d(a[n],g)){u=!1;break}if(u)return e;throw Ca("insecurl",e.toString());}if(c===na.HTML)return f(e);throw Ca("unsafe");},valueOf:function(a){return a instanceof g?a.$$unwrapTrustedValue():a}}}]}function Se(){var b=!0;this.enabled=function(a){arguments.length&&
(b=!!a);return b};this.$get=["$parse","$sceDelegate",function(a,c){if(b&&8>Ra)throw Ca("iequirks");var d=ra(na);d.isEnabled=function(){return b};d.trustAs=c.trustAs;d.getTrusted=c.getTrusted;d.valueOf=c.valueOf;b||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=pa);d.parseAs=function(b,c){var e=a(c);return e.literal&&e.constant?e:a(c,function(a){return d.getTrusted(b,a)})};var e=d.parseAs,f=d.getTrusted,g=d.trustAs;s(na,function(a,b){var c=Q(b);d[db("parse_as_"+c)]=function(b){return e(a,
b)};d[db("get_trusted_"+c)]=function(b){return f(a,b)};d[db("trust_as_"+c)]=function(b){return g(a,b)}});return d}]}function Ue(){this.$get=["$window","$document",function(b,a){var c={},d=ba((/android (\d+)/.exec(Q((b.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((b.navigator||{}).userAgent),f=a[0]||{},g,h=/^(Moz|webkit|ms)(?=[A-Z])/,l=f.body&&f.body.style,k=!1,m=!1;if(l){for(var n in l)if(k=h.exec(n)){g=k[0];g=g.substr(0,1).toUpperCase()+g.substr(1);break}g||(g="WebkitOpacity"in l&&"webkit");
k=!!("transition"in l||g+"Transition"in l);m=!!("animation"in l||g+"Animation"in l);!d||k&&m||(k=F(f.body.style.webkitTransition),m=F(f.body.style.webkitAnimation))}return{history:!(!b.history||!b.history.pushState||4>d||e),hasEvent:function(a){if("input"===a&&11>=Ra)return!1;if(B(c[a])){var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:bb(),vendorPrefix:g,transitions:k,animations:m,android:d}}]}function We(){this.$get=["$templateCache","$http","$q",function(b,a,c){function d(e,f){d.totalPendingRequests++;
var g=a.defaults&&a.defaults.transformResponse;H(g)?g=g.filter(function(a){return a!==Zb}):g===Zb&&(g=null);return a.get(e,{cache:b,transformResponse:g}).finally(function(){d.totalPendingRequests--}).then(function(a){return a.data},function(a){if(!f)throw ja("tpload",e);return c.reject(a)})}d.totalPendingRequests=0;return d}]}function Xe(){this.$get=["$rootScope","$browser","$location",function(b,a,c){return{findBindings:function(a,b,c){a=a.getElementsByClassName("ng-binding");var g=[];s(a,function(a){var d=
ca.element(a).data("$binding");d&&s(d,function(d){c?(new RegExp("(^|\\s)"+gd(b)+"(\\s|\\||$)")).test(d)&&g.push(a):-1!=d.indexOf(b)&&g.push(a)})});return g},findModels:function(a,b,c){for(var g=["ng-","data-ng-","ng\\:"],h=0;h<g.length;++h){var l=a.querySelectorAll("["+g[h]+"model"+(c?"=":"*=")+'"'+b+'"]');if(l.length)return l}},getLocation:function(){return c.url()},setLocation:function(a){a!==c.url()&&(c.url(a),b.$digest())},whenStable:function(b){a.notifyWhenNoOutstandingRequests(b)}}}]}function Ye(){this.$get=
["$rootScope","$browser","$q","$$q","$exceptionHandler",function(b,a,c,d,e){function f(f,l,k){var m=y(k)&&!k,n=(m?d:c).defer(),q=n.promise;l=a.defer(function(){try{n.resolve(f())}catch(a){n.reject(a),e(a)}finally{delete g[q.$$timeoutId]}m||b.$apply()},l);q.$$timeoutId=l;g[l]=n;return q}var g={};f.cancel=function(b){return b&&b.$$timeoutId in g?(g[b.$$timeoutId].reject("canceled"),delete g[b.$$timeoutId],a.defer.cancel(b.$$timeoutId)):!1};return f}]}function Ba(b){Ra&&(Z.setAttribute("href",b),b=Z.href);
Z.setAttribute("href",b);return{href:Z.href,protocol:Z.protocol?Z.protocol.replace(/:$/,""):"",host:Z.host,search:Z.search?Z.search.replace(/^\?/,""):"",hash:Z.hash?Z.hash.replace(/^#/,""):"",hostname:Z.hostname,port:Z.port,pathname:"/"===Z.pathname.charAt(0)?Z.pathname:"/"+Z.pathname}}function $c(b){b=F(b)?Ba(b):b;return b.protocol===id.protocol&&b.host===id.host}function Ze(){this.$get=ea(M)}function Ec(b){function a(c,d){if(I(c)){var e={};s(c,function(b,c){e[c]=a(c,b)});return e}return b.factory(c+
"Filter",d)}this.register=a;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];a("currency",jd);a("date",kd);a("filter",Df);a("json",Ef);a("limitTo",Ff);a("lowercase",Gf);a("number",ld);a("orderBy",md);a("uppercase",Hf)}function Df(){return function(b,a,c){if(!H(b))return b;var d;switch(typeof a){case "function":break;case "boolean":case "number":case "string":d=!0;case "object":a=If(a,c,d);break;default:return b}return b.filter(a)}}function If(b,a,c){var d=I(b)&&"$"in
b;!0===a?a=ga:G(a)||(a=function(a,b){if(I(a)||I(b))return!1;a=Q(""+a);b=Q(""+b);return-1!==a.indexOf(b)});return function(e){return d&&!I(e)?Ia(e,b.$,a,!1):Ia(e,b,a,c)}}function Ia(b,a,c,d,e){var f=typeof b,g=typeof a;if("string"===g&&"!"===a.charAt(0))return!Ia(b,a.substring(1),c,d);if(H(b))return b.some(function(b){return Ia(b,a,c,d)});switch(f){case "object":var h;if(d){for(h in b)if("$"!==h.charAt(0)&&Ia(b[h],a,c,!0))return!0;return e?!1:Ia(b,a,c,!1)}if("object"===g){for(h in a)if(e=a[h],!G(e)&&
(f="$"===h,!Ia(f?b:b[h],e,c,f,f)))return!1;return!0}return c(b,a);case "function":return!1;default:return c(b,a)}}function jd(b){var a=b.NUMBER_FORMATS;return function(b,d,e){B(d)&&(d=a.CURRENCY_SYM);B(e)&&(e=a.PATTERNS[1].maxFrac);return null==b?b:nd(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,e).replace(/\u00A4/g,d)}}function ld(b){var a=b.NUMBER_FORMATS;return function(b,d){return null==b?b:nd(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function nd(b,a,c,d,e){if(!isFinite(b)||I(b))return"";var f=
0>b;b=Math.abs(b);var g=b+"",h="",l=[],k=!1;if(-1!==g.indexOf("e")){var m=g.match(/([\d\.]+)e(-?)(\d+)/);m&&"-"==m[2]&&m[3]>e+1?b=0:(h=g,k=!0)}if(k)0<e&&1>b&&(h=b.toFixed(e),b=parseFloat(h));else{g=(g.split(od)[1]||"").length;B(e)&&(e=Math.min(Math.max(a.minFrac,g),a.maxFrac));b=+(Math.round(+(b.toString()+"e"+e)).toString()+"e"+-e);var g=(""+b).split(od),k=g[0],g=g[1]||"",n=0,q=a.lgSize,u=a.gSize;if(k.length>=q+u)for(n=k.length-q,m=0;m<n;m++)0===(n-m)%u&&0!==m&&(h+=c),h+=k.charAt(m);for(m=n;m<k.length;m++)0===
(k.length-m)%q&&0!==m&&(h+=c),h+=k.charAt(m);for(;g.length<e;)g+="0";e&&"0"!==e&&(h+=d+g.substr(0,e))}0===b&&(f=!1);l.push(f?a.negPre:a.posPre,h,f?a.negSuf:a.posSuf);return l.join("")}function Jb(b,a,c){var d="";0>b&&(d="-",b=-b);for(b=""+b;b.length<a;)b="0"+b;c&&(b=b.substr(b.length-a));return d+b}function $(b,a,c,d){c=c||0;return function(e){e=e["get"+b]();if(0<c||e>-c)e+=c;0===e&&-12==c&&(e=12);return Jb(e,a,d)}}function Kb(b,a){return function(c,d){var e=c["get"+b](),f=vb(a?"SHORT"+b:b);return d[f][e]}}
function pd(b){var a=(new Date(b,0,1)).getDay();return new Date(b,0,(4>=a?5:12)-a)}function qd(b){return function(a){var c=pd(a.getFullYear());a=+new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))-+c;a=1+Math.round(a/6048E5);return Jb(a,b)}}function kd(b){function a(a){var b;if(b=a.match(c)){a=new Date(0);var f=0,g=0,h=b[8]?a.setUTCFullYear:a.setFullYear,l=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=ba(b[9]+b[10]),g=ba(b[9]+b[11]));h.call(a,ba(b[1]),ba(b[2])-1,ba(b[3]));f=ba(b[4]||0)-f;
g=ba(b[5]||0)-g;h=ba(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));l.call(a,f,g,h,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e,f){var g="",h=[],l,k;e=e||"mediumDate";e=b.DATETIME_FORMATS[e]||e;F(c)&&(c=Jf.test(c)?ba(c):a(c));V(c)&&(c=new Date(c));if(!qa(c))return c;for(;e;)(k=Kf.exec(e))?(h=Ya(h,k,1),e=h.pop()):(h.push(e),e=null);f&&"UTC"===f&&(c=new Date(c.getTime()),c.setMinutes(c.getMinutes()+
c.getTimezoneOffset()));s(h,function(a){l=Lf[a];g+=l?l(c,b.DATETIME_FORMATS):a.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function Ef(){return function(b,a){B(a)&&(a=2);return $a(b,a)}}function Ff(){return function(b,a){V(b)&&(b=b.toString());return H(b)||F(b)?(a=Infinity===Math.abs(Number(a))?Number(a):ba(a))?0<a?b.slice(0,a):b.slice(a):F(b)?"":[]:b}}function md(b){return function(a,c,d){function e(a,b){return b?function(b,c){return a(c,b)}:a}function f(a){switch(typeof a){case "number":case "boolean":case "string":return!0;
default:return!1}}function g(a){return null===a?"null":"function"===typeof a.valueOf&&(a=a.valueOf(),f(a))||"function"===typeof a.toString&&(a=a.toString(),f(a))?a:""}function h(a,b){var c=typeof a,d=typeof b;c===d&&"object"===c&&(a=g(a),b=g(b));return c===d?("string"===c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1}if(!Ta(a))return a;c=H(c)?c:[c];0===c.length&&(c=["+"]);c=c.map(function(a){var c=!1,d=a||pa;if(F(a)){if("+"==a.charAt(0)||"-"==a.charAt(0))c="-"==a.charAt(0),a=a.substring(1);
if(""===a)return e(h,c);d=b(a);if(d.constant){var f=d();return e(function(a,b){return h(a[f],b[f])},c)}}return e(function(a,b){return h(d(a),d(b))},c)});return Za.call(a).sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0},d))}}function Ja(b){G(b)&&(b={link:b});b.restrict=b.restrict||"AC";return ea(b)}function rd(b,a,c,d,e){var f=this,g=[],h=f.$$parentForm=b.parent().controller("form")||Lb;f.$error={};f.$$success={};f.$pending=t;f.$name=e(a.name||a.ngForm||
"")(c);f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;f.$submitted=!1;h.$addControl(f);f.$rollbackViewValue=function(){s(g,function(a){a.$rollbackViewValue()})};f.$commitViewValue=function(){s(g,function(a){a.$commitViewValue()})};f.$addControl=function(a){Ma(a.$name,"input");g.push(a);a.$name&&(f[a.$name]=a)};f.$$renameControl=function(a,b){var c=a.$name;f[c]===a&&delete f[c];f[b]=a;a.$name=b};f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];s(f.$pending,function(b,c){f.$setValidity(c,
null,a)});s(f.$error,function(b,c){f.$setValidity(c,null,a)});s(f.$$success,function(b,c){f.$setValidity(c,null,a)});Xa(g,a)};sd({ctrl:this,$element:b,set:function(a,b,c){var d=a[b];d?-1===d.indexOf(c)&&d.push(c):a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(Xa(d,c),0===d.length&&delete a[b])},parentForm:h,$animate:d});f.$setDirty=function(){d.removeClass(b,Sa);d.addClass(b,Mb);f.$dirty=!0;f.$pristine=!1;h.$setDirty()};f.$setPristine=function(){d.setClass(b,Sa,Mb+" ng-submitted");f.$dirty=!1;f.$pristine=
!0;f.$submitted=!1;s(g,function(a){a.$setPristine()})};f.$setUntouched=function(){s(g,function(a){a.$setUntouched()})};f.$setSubmitted=function(){d.addClass(b,"ng-submitted");f.$submitted=!0;h.$setSubmitted()}}function ic(b){b.$formatters.push(function(a){return b.$isEmpty(a)?a:a.toString()})}function jb(b,a,c,d,e,f){var g=Q(a[0].type);if(!e.android){var h=!1;a.on("compositionstart",function(a){h=!0});a.on("compositionend",function(){h=!1;l()})}var l=function(b){k&&(f.defer.cancel(k),k=null);if(!h){var e=
a.val();b=b&&b.type;"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=U(e));(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,b)}};if(e.hasEvent("input"))a.on("input",l);else{var k,m=function(a,b,c){k||(k=f.defer(function(){k=null;b&&b.value===c||l(a)}))};a.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||m(a,this,this.value)});if(e.hasEvent("paste"))a.on("paste cut",m)}a.on("change",l);d.$render=function(){a.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)}}
function Nb(b,a){return function(c,d){var e,f;if(qa(c))return c;if(F(c)){'"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1));if(Mf.test(c))return new Date(c);b.lastIndex=0;if(e=b.exec(c))return e.shift(),f=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},s(e,function(b,c){c<a.length&&(f[a[c]]=+b)}),new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,
1E3*f.sss||0)}return NaN}}function kb(b,a,c,d){return function(e,f,g,h,l,k,m){function n(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function q(a){return y(a)?qa(a)?a:c(a):t}td(e,f,g,h);jb(e,f,g,h,l,k);var u=h&&h.$options&&h.$options.timezone,r;h.$$parserName=b;h.$parsers.push(function(b){return h.$isEmpty(b)?null:a.test(b)?(b=c(b,r),"UTC"===u&&b.setMinutes(b.getMinutes()-b.getTimezoneOffset()),b):t});h.$formatters.push(function(a){if(a&&!qa(a))throw Ob("datefmt",a);if(n(a)){if((r=a)&&"UTC"===
u){var b=6E4*r.getTimezoneOffset();r=new Date(r.getTime()+b)}return m("date")(a,d,u)}r=null;return""});if(y(g.min)||g.ngMin){var s;h.$validators.min=function(a){return!n(a)||B(s)||c(a)>=s};g.$observe("min",function(a){s=q(a);h.$validate()})}if(y(g.max)||g.ngMax){var p;h.$validators.max=function(a){return!n(a)||B(p)||c(a)<=p};g.$observe("max",function(a){p=q(a);h.$validate()})}}}function td(b,a,c,d){(d.$$hasNativeValidators=I(a[0].validity))&&d.$parsers.push(function(b){var c=a.prop("validity")||{};
return c.badInput&&!c.typeMismatch?t:b})}function ud(b,a,c,d,e){if(y(d)){b=b(d);if(!b.constant)throw S("ngModel")("constexpr",c,d);return b(a)}return e}function jc(b,a){b="ngClass"+b;return["$animate",function(c){function d(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],m=0;m<b.length;m++)if(e==b[m])continue a;c.push(e)}return c}function e(a){if(!H(a)){if(F(a))return a.split(" ");if(I(a)){var b=[];s(a,function(a,c){a&&(b=b.concat(c.split(" ")))});return b}}return a}return{restrict:"AC",link:function(f,
g,h){function l(a,b){var c=g.data("$classCounts")||{},d=[];s(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<b)&&d.push(a)});g.data("$classCounts",c);return d.join(" ")}function k(b){if(!0===a||f.$index%2===a){var k=e(b||[]);if(!m){var u=l(k,1);h.$addClass(u)}else if(!ga(b,m)){var r=e(m),u=d(k,r),k=d(r,k),u=l(u,1),k=l(k,-1);u&&u.length&&c.addClass(g,u);k&&k.length&&c.removeClass(g,k)}}m=ra(b)}var m;f.$watch(h[b],k,!0);h.$observe("class",function(a){k(f.$eval(h[b]))});"ngClass"!==b&&f.$watch("$index",
function(c,d){var g=c&1;if(g!==(d&1)){var k=e(f.$eval(h[b]));g===a?(g=l(k,1),h.$addClass(g)):(g=l(k,-1),h.$removeClass(g))}})}}}]}function sd(b){function a(a,b){b&&!f[a]?(k.addClass(e,a),f[a]=!0):!b&&f[a]&&(k.removeClass(e,a),f[a]=!1)}function c(b,c){b=b?"-"+uc(b,"-"):"";a(lb+b,!0===c);a(vd+b,!1===c)}var d=b.ctrl,e=b.$element,f={},g=b.set,h=b.unset,l=b.parentForm,k=b.$animate;f[vd]=!(f[lb]=e.hasClass(lb));d.$setValidity=function(b,e,f){e===t?(d.$pending||(d.$pending={}),g(d.$pending,b,f)):(d.$pending&&
h(d.$pending,b,f),wd(d.$pending)&&(d.$pending=t));Wa(e)?e?(h(d.$error,b,f),g(d.$$success,b,f)):(g(d.$error,b,f),h(d.$$success,b,f)):(h(d.$error,b,f),h(d.$$success,b,f));d.$pending?(a(xd,!0),d.$valid=d.$invalid=t,c("",null)):(a(xd,!1),d.$valid=wd(d.$error),d.$invalid=!d.$valid,c("",d.$valid));e=d.$pending&&d.$pending[b]?t:d.$error[b]?!1:d.$$success[b]?!0:null;c(b,e);l.$setValidity(b,e,d)}}function wd(b){if(b)for(var a in b)return!1;return!0}var Nf=/^\/(.+)\/([a-z]*)$/,Q=function(b){return F(b)?b.toLowerCase():
b},sc=Object.prototype.hasOwnProperty,vb=function(b){return F(b)?b.toUpperCase():b},Ra,D,sa,Za=[].slice,pf=[].splice,Of=[].push,Da=Object.prototype.toString,Ka=S("ng"),ca=M.angular||(M.angular={}),cb,ob=0;Ra=Y.documentMode;z.$inject=[];pa.$inject=[];var H=Array.isArray,U=function(b){return F(b)?b.trim():b},gd=function(b){return b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},bb=function(){if(y(bb.isActive_))return bb.isActive_;var b=!(!Y.querySelector("[ng-csp]")&&!Y.querySelector("[data-ng-csp]"));
if(!b)try{new Function("")}catch(a){b=!0}return bb.isActive_=b},sb=["ng-","data-ng-","ng:","x-ng-"],Md=/[A-Z]/g,vc=!1,Rb,oa=1,qb=3,Qd={full:"1.3.13",major:1,minor:3,dot:13,codeName:"meticulous-riffleshuffle"};R.expando="ng339";var Ab=R.cache={},hf=1;R._data=function(b){return this.cache[b[this.expando]]||{}};var cf=/([\:\-\_]+(.))/g,df=/^moz([A-Z])/,Pf={mouseleave:"mouseout",mouseenter:"mouseover"},Ub=S("jqLite"),gf=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Tb=/<|&#?\w+;/,ef=/<([\w:]+)/,ff=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
ia={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option;ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead;ia.th=ia.td;var La=R.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=!1;"complete"===Y.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),R(M).on("load",a))},
toString:function(){var b=[];s(this,function(a){b.push(""+a)});return"["+b.join(", ")+"]"},eq:function(b){return 0<=b?D(this[b]):D(this[this.length+b])},length:0,push:Of,sort:[].sort,splice:[].splice},Fb={};s("multiple selected checked disabled readOnly required open".split(" "),function(b){Fb[Q(b)]=b});var Nc={};s("input select option textarea button form details".split(" "),function(b){Nc[b]=!0});var Oc={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};
s({data:Wb,removeData:yb},function(b,a){R[a]=b});s({data:Wb,inheritedData:Eb,scope:function(b){return D.data(b,"$scope")||Eb(b.parentNode||b,["$isolateScope","$scope"])},isolateScope:function(b){return D.data(b,"$isolateScope")||D.data(b,"$isolateScopeNoTemplate")},controller:Jc,injector:function(b){return Eb(b,"$injector")},removeAttr:function(b,a){b.removeAttribute(a)},hasClass:Bb,css:function(b,a,c){a=db(a);if(y(c))b.style[a]=c;else return b.style[a]},attr:function(b,a,c){var d=Q(a);if(Fb[d])if(y(c))c?
(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d));else return b[a]||(b.attributes.getNamedItem(a)||z).specified?d:t;else if(y(c))b.setAttribute(a,c);else if(b.getAttribute)return b=b.getAttribute(a,2),null===b?t:b},prop:function(b,a,c){if(y(c))b[a]=c;else return b[a]},text:function(){function b(a,b){if(B(b)){var d=a.nodeType;return d===oa||d===qb?a.textContent:""}a.textContent=b}b.$dv="";return b}(),val:function(b,a){if(B(a)){if(b.multiple&&"select"===ua(b)){var c=[];s(b.options,function(a){a.selected&&
c.push(a.value||a.text)});return 0===c.length?null:c}return b.value}b.value=a},html:function(b,a){if(B(a))return b.innerHTML;xb(b,!0);b.innerHTML=a},empty:Kc},function(b,a){R.prototype[a]=function(a,d){var e,f,g=this.length;if(b!==Kc&&(2==b.length&&b!==Bb&&b!==Jc?a:d)===t){if(I(a)){for(e=0;e<g;e++)if(b===Wb)b(this[e],a);else for(f in a)b(this[e],f,a[f]);return this}e=b.$dv;g=e===t?Math.min(g,1):g;for(f=0;f<g;f++){var h=b(this[f],a,d);e=e?e+h:h}return e}for(e=0;e<g;e++)b(this[e],a,d);return this}});
s({removeData:yb,on:function a(c,d,e,f){if(y(f))throw Ub("onargs");if(Fc(c)){var g=zb(c,!0);f=g.events;var h=g.handle;h||(h=g.handle=lf(c,f));for(var g=0<=d.indexOf(" ")?d.split(" "):[d],l=g.length;l--;){d=g[l];var k=f[d];k||(f[d]=[],"mouseenter"===d||"mouseleave"===d?a(c,Pf[d],function(a){var c=a.relatedTarget;c&&(c===this||this.contains(c))||h(a,d)}):"$destroy"!==d&&c.addEventListener(d,h,!1),k=f[d]);k.push(e)}}},off:Ic,one:function(a,c,d){a=D(a);a.on(c,function f(){a.off(c,d);a.off(c,f)});a.on(c,
d)},replaceWith:function(a,c){var d,e=a.parentNode;xb(a);s(new R(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a);d=c})},children:function(a){var c=[];s(a.childNodes,function(a){a.nodeType===oa&&c.push(a)});return c},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,c){var d=a.nodeType;if(d===oa||11===d){c=new R(c);for(var d=0,e=c.length;d<e;d++)a.appendChild(c[d])}},prepend:function(a,c){if(a.nodeType===oa){var d=a.firstChild;s(new R(c),function(c){a.insertBefore(c,
d)})}},wrap:function(a,c){c=D(c).eq(0).clone()[0];var d=a.parentNode;d&&d.replaceChild(c,a);c.appendChild(a)},remove:Lc,detach:function(a){Lc(a,!0)},after:function(a,c){var d=a,e=a.parentNode;c=new R(c);for(var f=0,g=c.length;f<g;f++){var h=c[f];e.insertBefore(h,d.nextSibling);d=h}},addClass:Db,removeClass:Cb,toggleClass:function(a,c,d){c&&s(c.split(" "),function(c){var f=d;B(f)&&(f=!Bb(a,c));(f?Db:Cb)(a,c)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},
find:function(a,c){return a.getElementsByTagName?a.getElementsByTagName(c):[]},clone:Vb,triggerHandler:function(a,c,d){var e,f,g=c.type||c,h=zb(a);if(h=(h=h&&h.events)&&h[g])e={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:z,type:g,target:a},c.type&&(e=x(e,
c)),c=ra(h),f=d?[e].concat(d):[e],s(c,function(c){e.isImmediatePropagationStopped()||c.apply(a,f)})}},function(a,c){R.prototype[c]=function(c,e,f){for(var g,h=0,l=this.length;h<l;h++)B(g)?(g=a(this[h],c,e,f),y(g)&&(g=D(g))):Hc(g,a(this[h],c,e,f));return y(g)?g:this};R.prototype.bind=R.prototype.on;R.prototype.unbind=R.prototype.off});eb.prototype={put:function(a,c){this[Na(a,this.nextUid)]=c},get:function(a){return this[Na(a,this.nextUid)]},remove:function(a){var c=this[a=Na(a,this.nextUid)];delete this[a];
return c}};var Qc=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Qf=/,/,Rf=/^\s*(_?)(\S+?)\1\s*$/,Pc=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Ga=S("$injector");ab.$$annotate=function(a,c,d){var e;if("function"===typeof a){if(!(e=a.$inject)){e=[];if(a.length){if(c)throw F(d)&&d||(d=a.name||mf(a)),Ga("strictdi",d);c=a.toString().replace(Pc,"");c=c.match(Qc);s(c[1].split(Qf),function(a){a.replace(Rf,function(a,c,d){e.push(d)})})}a.$inject=e}}else H(a)?(c=a.length-1,tb(a[c],"fn"),e=a.slice(0,c)):tb(a,"fn",!0);return e};
var Sf=S("$animate"),Ce=["$provide",function(a){this.$$selectors={};this.register=function(c,d){var e=c+"-animation";if(c&&"."!=c.charAt(0))throw Sf("notcsel",c);this.$$selectors[c.substr(1)]=e;a.factory(e,d)};this.classNameFilter=function(a){1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null);return this.$$classNameFilter};this.$get=["$$q","$$asyncCallback","$rootScope",function(a,d,e){function f(d){var f,g=a.defer();g.promise.$$cancelFn=function(){f&&f()};e.$$postDigest(function(){f=
d(function(){g.resolve()})});return g.promise}function g(a,c){var d=[],e=[],f=ha();s((a.attr("class")||"").split(/\s+/),function(a){f[a]=!0});s(c,function(a,c){var g=f[c];!1===a&&g?e.push(c):!0!==a||g||d.push(c)});return 0<d.length+e.length&&[d.length?d:null,e.length?e:null]}function h(a,c,d){for(var e=0,f=c.length;e<f;++e)a[c[e]]=d}function l(){m||(m=a.defer(),d(function(){m.resolve();m=null}));return m.promise}function k(a,c){if(ca.isObject(c)){var d=x(c.from||{},c.to||{});a.css(d)}}var m;return{animate:function(a,
c,d){k(a,{from:c,to:d});return l()},enter:function(a,c,d,e){k(a,e);d?d.after(a):c.prepend(a);return l()},leave:function(a,c){a.remove();return l()},move:function(a,c,d,e){return this.enter(a,c,d,e)},addClass:function(a,c,d){return this.setClass(a,c,[],d)},$$addClassImmediately:function(a,c,d){a=D(a);c=F(c)?c:H(c)?c.join(" "):"";s(a,function(a){Db(a,c)});k(a,d);return l()},removeClass:function(a,c,d){return this.setClass(a,[],c,d)},$$removeClassImmediately:function(a,c,d){a=D(a);c=F(c)?c:H(c)?c.join(" "):
"";s(a,function(a){Cb(a,c)});k(a,d);return l()},setClass:function(a,c,d,e){var k=this,l=!1;a=D(a);var m=a.data("$$animateClasses");m?e&&m.options&&(m.options=ca.extend(m.options||{},e)):(m={classes:{},options:e},l=!0);e=m.classes;c=H(c)?c:c.split(" ");d=H(d)?d:d.split(" ");h(e,c,!0);h(e,d,!1);l&&(m.promise=f(function(c){var d=a.data("$$animateClasses");a.removeData("$$animateClasses");if(d){var e=g(a,d.classes);e&&k.$$setClassImmediately(a,e[0],e[1],d.options)}c()}),a.data("$$animateClasses",m));
return m.promise},$$setClassImmediately:function(a,c,d,e){c&&this.$$addClassImmediately(a,c);d&&this.$$removeClassImmediately(a,d);k(a,e);return l()},enabled:z,cancel:z}}]}],ja=S("$compile");xc.$inject=["$provide","$$sanitizeUriProvider"];var Sc=/^((?:x|data)[\:\-_])/i,qf=S("$controller"),Wc="application/json",$b={"Content-Type":Wc+";charset=utf-8"},sf=/^\[|^\{(?!\{)/,tf={"[":/]$/,"{":/}$/},rf=/^\)\]\}',?\n/,ac=S("$interpolate"),Tf=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,wf={http:80,https:443,ftp:21},Hb=
S("$location"),Uf={$$html5:!1,$$replace:!1,absUrl:Ib("$$absUrl"),url:function(a){if(B(a))return this.$$url;var c=Tf.exec(a);(c[1]||""===a)&&this.path(decodeURIComponent(c[1]));(c[2]||c[1]||""===a)&&this.search(c[3]||"");this.hash(c[5]||"");return this},protocol:Ib("$$protocol"),host:Ib("$$host"),port:Ib("$$port"),path:dd("$$path",function(a){a=null!==a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;case 1:if(F(a)||V(a))a=
a.toString(),this.$$search=rc(a);else if(I(a))a=Ea(a,{}),s(a,function(c,e){null==c&&delete a[e]}),this.$$search=a;else throw Hb("isrcharg");break;default:B(c)||null===c?delete this.$$search[a]:this.$$search[a]=c}this.$$compose();return this},hash:dd("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};s([cd,ec,dc],function(a){a.prototype=Object.create(Uf);a.prototype.state=function(c){if(!arguments.length)return this.$$state;if(a!==dc||!this.$$html5)throw Hb("nostate");
this.$$state=B(c)?null:c;return this}});var la=S("$parse"),Vf=Function.prototype.call,Wf=Function.prototype.apply,Xf=Function.prototype.bind,mb=ha();s({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(a,c){a.constant=a.literal=a.sharedGetter=!0;mb[c]=a});mb["this"]=function(a){return a};mb["this"].sharedGetter=!0;var nb=x(ha(),{"+":function(a,c,d,e){d=d(a,c);e=e(a,c);return y(d)?y(e)?d+e:d:y(e)?e:t},"-":function(a,c,d,e){d=d(a,
c);e=e(a,c);return(y(d)?d:0)-(y(e)?e:0)},"*":function(a,c,d,e){return d(a,c)*e(a,c)},"/":function(a,c,d,e){return d(a,c)/e(a,c)},"%":function(a,c,d,e){return d(a,c)%e(a,c)},"===":function(a,c,d,e){return d(a,c)===e(a,c)},"!==":function(a,c,d,e){return d(a,c)!==e(a,c)},"==":function(a,c,d,e){return d(a,c)==e(a,c)},"!=":function(a,c,d,e){return d(a,c)!=e(a,c)},"<":function(a,c,d,e){return d(a,c)<e(a,c)},">":function(a,c,d,e){return d(a,c)>e(a,c)},"<=":function(a,c,d,e){return d(a,c)<=e(a,c)},">=":function(a,
c,d,e){return d(a,c)>=e(a,c)},"&&":function(a,c,d,e){return d(a,c)&&e(a,c)},"||":function(a,c,d,e){return d(a,c)||e(a,c)},"!":function(a,c,d){return!d(a,c)},"=":!0,"|":!0}),Yf={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},hc=function(a){this.options=a};hc.prototype={constructor:hc,lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();
else if(this.isIdent(a))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var c=a+this.peek(),d=c+this.peek(2),e=nb[c],f=nb[d];nb[a]||e||f?(a=f?d:e?c:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,c){return-1!==c.indexOf(a)},peek:function(a){a=a||1;return this.index+
a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,c,d){d=d||this.index;c=y(c)?"s "+c+"-"+this.index+" ["+this.text.substring(c,d)+"]":" "+d;throw la("lexerr",a,c,this.text);
},readNumber:function(){for(var a="",c=this.index;this.index<this.text.length;){var d=Q(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var e=this.peek();if("e"==d&&this.isExpOperator(e))a+=d;else if(this.isExpOperator(d)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:c,text:a,constant:!0,value:Number(a)})},readIdent:function(){for(var a=
this.index;this.index<this.text.length;){var c=this.text.charAt(this.index);if(!this.isIdent(c)&&!this.isNumber(c))break;this.index++}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var c=this.index;this.index++;for(var d="",e=a,f=!1;this.index<this.text.length;){var g=this.text.charAt(this.index),e=e+g;if(f)"u"===g?(f=this.text.substring(this.index+1,this.index+5),f.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+f+"]"),this.index+=
4,d+=String.fromCharCode(parseInt(f,16))):d+=Yf[g]||g,f=!1;else if("\\"===g)f=!0;else{if(g===a){this.index++;this.tokens.push({index:c,text:e,constant:!0,value:d});return}d+=g}this.index++}this.throwError("Unterminated quote",c)}};var ib=function(a,c,d){this.lexer=a;this.$filter=c;this.options=d};ib.ZERO=x(function(){return 0},{sharedGetter:!0,constant:!0});ib.prototype={constructor:ib,parse:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.statements();0!==this.tokens.length&&this.throwError("is an unexpected token",
this.tokens[0]);a.literal=!!a.literal;a.constant=!!a.constant;return a},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.peek().identifier&&this.peek().text in mb?a=mb[this.consume().text]:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var c,d;c=this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,
d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,c){throw la("syntax",c.text,a,c.index+1,this.text,this.text.substring(c.index));},peekToken:function(){if(0===this.tokens.length)throw la("ueoe",this.text);return this.tokens[0]},peek:function(a,c,d,e){return this.peekAhead(0,a,c,d,e)},peekAhead:function(a,c,d,e,f){if(this.tokens.length>a){a=this.tokens[a];var g=a.text;if(g===c||g===d||g===e||g===
f||!(c||d||e||f))return a}return!1},expect:function(a,c,d,e){return(a=this.peek(a,c,d,e))?(this.tokens.shift(),a):!1},consume:function(a){if(0===this.tokens.length)throw la("ueoe",this.text);var c=this.expect(a);c||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return c},unaryFn:function(a,c){var d=nb[a];return x(function(a,f){return d(a,f,c)},{constant:c.constant,inputs:[c]})},binaryFn:function(a,c,d,e){var f=nb[c];return x(function(c,e){return f(c,e,a,d)},{constant:a.constant&&
d.constant,inputs:!e&&[a,d]})},identifier:function(){for(var a=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)a+=this.consume().text+this.consume().text;return yf(a,this.options,this.text)},constant:function(){var a=this.consume().value;return x(function(){return a},{constant:!0,literal:!0})},statements:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(c,
d){for(var e,f=0,g=a.length;f<g;f++)e=a[f](c,d);return e}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},filter:function(a){var c=this.$filter(this.consume().text),d,e;if(this.peek(":"))for(d=[],e=[];this.expect(":");)d.push(this.expression());var f=[a].concat(d||[]);return x(function(f,h){var l=a(f,h);if(e){e[0]=l;for(l=d.length;l--;)e[l+1]=d[l](f,h);return c.apply(t,e)}return c(l)},{constant:!c.$stateful&&f.every(fc),inputs:!c.$stateful&&f})},expression:function(){return this.assignment()},
assignment:function(){var a=this.ternary(),c,d;return(d=this.expect("="))?(a.assign||this.throwError("implies assignment but ["+this.text.substring(0,d.index)+"] can not be assigned to",d),c=this.ternary(),x(function(d,f){return a.assign(d,c(d,f),f)},{inputs:[a,c]})):a},ternary:function(){var a=this.logicalOR(),c;if(this.expect("?")&&(c=this.assignment(),this.consume(":"))){var d=this.assignment();return x(function(e,f){return a(e,f)?c(e,f):d(e,f)},{constant:a.constant&&c.constant&&d.constant})}return a},
logicalOR:function(){for(var a=this.logicalAND(),c;c=this.expect("||");)a=this.binaryFn(a,c.text,this.logicalAND(),!0);return a},logicalAND:function(){for(var a=this.equality(),c;c=this.expect("&&");)a=this.binaryFn(a,c.text,this.equality(),!0);return a},equality:function(){for(var a=this.relational(),c;c=this.expect("==","!=","===","!==");)a=this.binaryFn(a,c.text,this.relational());return a},relational:function(){for(var a=this.additive(),c;c=this.expect("<",">","<=",">=");)a=this.binaryFn(a,c.text,
this.additive());return a},additive:function(){for(var a=this.multiplicative(),c;c=this.expect("+","-");)a=this.binaryFn(a,c.text,this.multiplicative());return a},multiplicative:function(){for(var a=this.unary(),c;c=this.expect("*","/","%");)a=this.binaryFn(a,c.text,this.unary());return a},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(ib.ZERO,a.text,this.unary()):(a=this.expect("!"))?this.unaryFn(a.text,this.unary()):this.primary()},fieldAccess:function(a){var c=
this.identifier();return x(function(d,e,f){d=f||a(d,e);return null==d?t:c(d)},{assign:function(d,e,f){var g=a(d,f);g||a.assign(d,g={},f);return c.assign(g,e)}})},objectIndex:function(a){var c=this.text,d=this.expression();this.consume("]");return x(function(e,f){var g=a(e,f),h=d(e,f);ta(h,c);return g?ma(g[h],c):t},{assign:function(e,f,g){var h=ta(d(e,g),c),l=ma(a(e,g),c);l||a.assign(e,l={},g);return l[h]=f}})},functionCall:function(a,c){var d=[];if(")"!==this.peekToken().text){do d.push(this.expression());
while(this.expect(","))}this.consume(")");var e=this.text,f=d.length?[]:null;return function(g,h){var l=c?c(g,h):y(c)?t:g,k=a(g,h,l)||z;if(f)for(var m=d.length;m--;)f[m]=ma(d[m](g,h),e);ma(l,e);if(k){if(k.constructor===k)throw la("isecfn",e);if(k===Vf||k===Wf||k===Xf)throw la("isecff",e);}l=k.apply?k.apply(l,f):k(f[0],f[1],f[2],f[3],f[4]);f&&(f.length=0);return ma(l,e)}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))
}this.consume("]");return x(function(c,d){for(var e=[],f=0,g=a.length;f<g;f++)e.push(a[f](c,d));return e},{literal:!0,constant:a.every(fc),inputs:a})},object:function(){var a=[],c=[];if("}"!==this.peekToken().text){do{if(this.peek("}"))break;var d=this.consume();d.constant?a.push(d.value):d.identifier?a.push(d.text):this.throwError("invalid key",d);this.consume(":");c.push(this.expression())}while(this.expect(","))}this.consume("}");return x(function(d,f){for(var g={},h=0,l=c.length;h<l;h++)g[a[h]]=
c[h](d,f);return g},{literal:!0,constant:c.every(fc),inputs:c})}};var Af=ha(),zf=ha(),Bf=Object.prototype.valueOf,Ca=S("$sce"),na={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},ja=S("$compile"),Z=Y.createElement("a"),id=Ba(M.location.href);Ec.$inject=["$provide"];jd.$inject=["$locale"];ld.$inject=["$locale"];var od=".",Lf={yyyy:$("FullYear",4),yy:$("FullYear",2,0,!0),y:$("FullYear",1),MMMM:Kb("Month"),MMM:Kb("Month",!0),MM:$("Month",2,1),M:$("Month",1,1),dd:$("Date",2),d:$("Date",
1),HH:$("Hours",2),H:$("Hours",1),hh:$("Hours",2,-12),h:$("Hours",1,-12),mm:$("Minutes",2),m:$("Minutes",1),ss:$("Seconds",2),s:$("Seconds",1),sss:$("Milliseconds",3),EEEE:Kb("Day"),EEE:Kb("Day",!0),a:function(a,c){return 12>a.getHours()?c.AMPMS[0]:c.AMPMS[1]},Z:function(a){a=-1*a.getTimezoneOffset();return a=(0<=a?"+":"")+(Jb(Math[0<a?"floor":"ceil"](a/60),2)+Jb(Math.abs(a%60),2))},ww:qd(2),w:qd(1)},Kf=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,Jf=/^\-?\d+$/;
kd.$inject=["$locale"];var Gf=ea(Q),Hf=ea(vb);md.$inject=["$parse"];var Td=ea({restrict:"E",compile:function(a,c){if(!c.href&&!c.xlinkHref&&!c.name)return function(a,c){if("a"===c[0].nodeName.toLowerCase()){var f="[object SVGAnimatedString]"===Da.call(c.prop("href"))?"xlink:href":"href";c.on("click",function(a){c.attr(f)||a.preventDefault()})}}}}),wb={};s(Fb,function(a,c){if("multiple"!=a){var d=ya("ng-"+c);wb[d]=function(){return{restrict:"A",priority:100,link:function(a,f,g){a.$watch(g[d],function(a){g.$set(c,
!!a)})}}}}});s(Oc,function(a,c){wb[c]=function(){return{priority:100,link:function(a,e,f){if("ngPattern"===c&&"/"==f.ngPattern.charAt(0)&&(e=f.ngPattern.match(Nf))){f.$set("ngPattern",new RegExp(e[1],e[2]));return}a.$watch(f[c],function(a){f.$set(c,a)})}}}});s(["src","srcset","href"],function(a){var c=ya("ng-"+a);wb[c]=function(){return{priority:99,link:function(d,e,f){var g=a,h=a;"href"===a&&"[object SVGAnimatedString]"===Da.call(e.prop("href"))&&(h="xlinkHref",f.$attr[h]="xlink:href",g=null);f.$observe(c,
function(c){c?(f.$set(h,c),Ra&&g&&e.prop(g,f[h])):"href"===a&&f.$set(h,null)})}}}});var Lb={$addControl:z,$$renameControl:function(a,c){a.$name=c},$removeControl:z,$setValidity:z,$setDirty:z,$setPristine:z,$setSubmitted:z};rd.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var yd=function(a){return["$timeout",function(c){return{name:"form",restrict:a?"EAC":"E",controller:rd,compile:function(a){a.addClass(Sa).addClass(lb);return{pre:function(a,d,g,h){if(!("action"in g)){var l=function(c){a.$apply(function(){h.$commitViewValue();
h.$setSubmitted()});c.preventDefault()};d[0].addEventListener("submit",l,!1);d.on("$destroy",function(){c(function(){d[0].removeEventListener("submit",l,!1)},0,!1)})}var k=h.$$parentForm,m=h.$name;m&&(hb(a,null,m,h,m),g.$observe(g.name?"name":"ngForm",function(c){m!==c&&(hb(a,null,m,t,m),m=c,hb(a,null,m,h,m),k.$$renameControl(h,m))}));d.on("$destroy",function(){k.$removeControl(h);m&&hb(a,null,m,t,m);x(h,Lb)})}}}}}]},Ud=yd(),ge=yd(!0),Mf=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,
Zf=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,$f=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,ag=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,zd=/^(\d{4})-(\d{2})-(\d{2})$/,Ad=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,kc=/^(\d{4})-W(\d\d)$/,Bd=/^(\d{4})-(\d\d)$/,Cd=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Dd={text:function(a,c,d,e,f,g){jb(a,c,d,e,f,g);ic(e)},date:kb("date",zd,Nb(zd,["yyyy",
"MM","dd"]),"yyyy-MM-dd"),"datetime-local":kb("datetimelocal",Ad,Nb(Ad,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:kb("time",Cd,Nb(Cd,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:kb("week",kc,function(a,c){if(qa(a))return a;if(F(a)){kc.lastIndex=0;var d=kc.exec(a);if(d){var e=+d[1],f=+d[2],g=d=0,h=0,l=0,k=pd(e),f=7*(f-1);c&&(d=c.getHours(),g=c.getMinutes(),h=c.getSeconds(),l=c.getMilliseconds());return new Date(e,0,k.getDate()+f,d,g,h,l)}}return NaN},"yyyy-Www"),month:kb("month",
Bd,Nb(Bd,["yyyy","MM"]),"yyyy-MM"),number:function(a,c,d,e,f,g){td(a,c,d,e);jb(a,c,d,e,f,g);e.$$parserName="number";e.$parsers.push(function(a){return e.$isEmpty(a)?null:ag.test(a)?parseFloat(a):t});e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!V(a))throw Ob("numfmt",a);a=a.toString()}return a});if(d.min||d.ngMin){var h;e.$validators.min=function(a){return e.$isEmpty(a)||B(h)||a>=h};d.$observe("min",function(a){y(a)&&!V(a)&&(a=parseFloat(a,10));h=V(a)&&!isNaN(a)?a:t;e.$validate()})}if(d.max||
d.ngMax){var l;e.$validators.max=function(a){return e.$isEmpty(a)||B(l)||a<=l};d.$observe("max",function(a){y(a)&&!V(a)&&(a=parseFloat(a,10));l=V(a)&&!isNaN(a)?a:t;e.$validate()})}},url:function(a,c,d,e,f,g){jb(a,c,d,e,f,g);ic(e);e.$$parserName="url";e.$validators.url=function(a,c){var d=a||c;return e.$isEmpty(d)||Zf.test(d)}},email:function(a,c,d,e,f,g){jb(a,c,d,e,f,g);ic(e);e.$$parserName="email";e.$validators.email=function(a,c){var d=a||c;return e.$isEmpty(d)||$f.test(d)}},radio:function(a,c,
d,e){B(d.name)&&c.attr("name",++ob);c.on("click",function(a){c[0].checked&&e.$setViewValue(d.value,a&&a.type)});e.$render=function(){c[0].checked=d.value==e.$viewValue};d.$observe("value",e.$render)},checkbox:function(a,c,d,e,f,g,h,l){var k=ud(l,a,"ngTrueValue",d.ngTrueValue,!0),m=ud(l,a,"ngFalseValue",d.ngFalseValue,!1);c.on("click",function(a){e.$setViewValue(c[0].checked,a&&a.type)});e.$render=function(){c[0].checked=e.$viewValue};e.$isEmpty=function(a){return!1===a};e.$formatters.push(function(a){return ga(a,
k)});e.$parsers.push(function(a){return a?k:m})},hidden:z,button:z,submit:z,reset:z,file:z},yc=["$browser","$sniffer","$filter","$parse",function(a,c,d,e){return{restrict:"E",require:["?ngModel"],link:{pre:function(f,g,h,l){l[0]&&(Dd[Q(h.type)]||Dd.text)(f,g,h,l[0],c,a,d,e)}}}}],bg=/^(true|false|\d+)$/,ye=function(){return{restrict:"A",priority:100,compile:function(a,c){return bg.test(c.ngValue)?function(a,c,f){f.$set("value",a.$eval(f.ngValue))}:function(a,c,f){a.$watch(f.ngValue,function(a){f.$set("value",
a)})}}}},Zd=["$compile",function(a){return{restrict:"AC",compile:function(c){a.$$addBindingClass(c);return function(c,e,f){a.$$addBindingInfo(e,f.ngBind);e=e[0];c.$watch(f.ngBind,function(a){e.textContent=a===t?"":a})}}}}],ae=["$interpolate","$compile",function(a,c){return{compile:function(d){c.$$addBindingClass(d);return function(d,f,g){d=a(f.attr(g.$attr.ngBindTemplate));c.$$addBindingInfo(f,d.expressions);f=f[0];g.$observe("ngBindTemplate",function(a){f.textContent=a===t?"":a})}}}}],$d=["$sce",
"$parse","$compile",function(a,c,d){return{restrict:"A",compile:function(e,f){var g=c(f.ngBindHtml),h=c(f.ngBindHtml,function(a){return(a||"").toString()});d.$$addBindingClass(e);return function(c,e,f){d.$$addBindingInfo(e,f.ngBindHtml);c.$watch(h,function(){e.html(a.getTrustedHtml(g(c))||"")})}}}}],xe=ea({restrict:"A",require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),be=jc("",!0),de=jc("Odd",0),ce=jc("Even",1),ee=Ja({compile:function(a,c){c.$set("ngCloak",
t);a.removeClass("ng-cloak")}}),fe=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Dc={},cg={blur:!0,focus:!0};s("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var c=ya("ng-"+a);Dc[c]=["$parse","$rootScope",function(d,e){return{restrict:"A",compile:function(f,g){var h=d(g[c],null,!0);return function(c,d){d.on(a,function(d){var f=function(){h(c,{$event:d})};
cg[a]&&e.$$phase?c.$evalAsync(f):c.$apply(f)})}}}}]});var ie=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,l,k;c.$watch(e.ngIf,function(c){c?l||g(function(c,f){l=f;c[c.length++]=Y.createComment(" end ngIf: "+e.ngIf+" ");h={clone:c};a.enter(c,d.parent(),d)}):(k&&(k.remove(),k=null),l&&(l.$destroy(),l=null),h&&(k=ub(h.clone),a.leave(k).then(function(){k=null}),h=null))})}}}],je=["$templateRequest","$anchorScroll",
"$animate","$sce",function(a,c,d,e){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ca.noop,compile:function(f,g){var h=g.ngInclude||g.src,l=g.onload||"",k=g.autoscroll;return function(f,g,q,s,r){var t=0,p,v,w,L=function(){v&&(v.remove(),v=null);p&&(p.$destroy(),p=null);w&&(d.leave(w).then(function(){v=null}),v=w,w=null)};f.$watch(e.parseAsResourceUrl(h),function(e){var h=function(){!y(k)||k&&!f.$eval(k)||c()},q=++t;e?(a(e,!0).then(function(a){if(q===t){var c=f.$new();
s.template=a;a=r(c,function(a){L();d.enter(a,null,g).then(h)});p=c;w=a;p.$emit("$includeContentLoaded",e);f.$eval(l)}},function(){q===t&&(L(),f.$emit("$includeContentError",e))}),f.$emit("$includeContentRequested",e)):(L(),s.template=null)})}}}}],Ae=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){/SVG/.test(d[0].toString())?(d.empty(),a(Gc(f.template,Y).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),a(d.contents())(c))}}}],
ke=Ja({priority:450,compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),we=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,c,d,e){var f=c.attr(d.$attr.ngList)||", ",g="false"!==d.ngTrim,h=g?U(f):f;e.$parsers.push(function(a){if(!B(a)){var c=[];a&&s(a.split(h),function(a){a&&c.push(g?U(a):a)});return c}});e.$formatters.push(function(a){return H(a)?a.join(f):t});e.$isEmpty=function(a){return!a||!a.length}}}},lb="ng-valid",vd="ng-invalid",Sa="ng-pristine",
Mb="ng-dirty",xd="ng-pending",Ob=new S("ngModel"),dg=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,c,d,e,f,g,h,l,k,m){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=t;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success=
{};this.$pending=t;this.$name=m(d.name||"",!1)(a);var n=f(d.ngModel),q=n.assign,u=n,r=q,P=null,p=this;this.$$setOptions=function(a){if((p.$options=a)&&a.getterSetter){var c=f(d.ngModel+"()"),g=f(d.ngModel+"($$$p)");u=function(a){var d=n(a);G(d)&&(d=c(a));return d};r=function(a,c){G(n(a))?g(a,{$$$p:p.$modelValue}):q(a,p.$modelValue)}}else if(!n.assign)throw Ob("nonassign",d.ngModel,va(e));};this.$render=z;this.$isEmpty=function(a){return B(a)||""===a||null===a||a!==a};var v=e.inheritedData("$formController")||
Lb,w=0;sd({ctrl:this,$element:e,set:function(a,c){a[c]=!0},unset:function(a,c){delete a[c]},parentForm:v,$animate:g});this.$setPristine=function(){p.$dirty=!1;p.$pristine=!0;g.removeClass(e,Mb);g.addClass(e,Sa)};this.$setDirty=function(){p.$dirty=!0;p.$pristine=!1;g.removeClass(e,Sa);g.addClass(e,Mb);v.$setDirty()};this.$setUntouched=function(){p.$touched=!1;p.$untouched=!0;g.setClass(e,"ng-untouched","ng-touched")};this.$setTouched=function(){p.$touched=!0;p.$untouched=!1;g.setClass(e,"ng-touched",
"ng-untouched")};this.$rollbackViewValue=function(){h.cancel(P);p.$viewValue=p.$$lastCommittedViewValue;p.$render()};this.$validate=function(){if(!V(p.$modelValue)||!isNaN(p.$modelValue)){var a=p.$$rawModelValue,c=p.$valid,d=p.$modelValue,e=p.$options&&p.$options.allowInvalid;p.$$runValidators(p.$error[p.$$parserName||"parse"]?!1:t,a,p.$$lastCommittedViewValue,function(f){e||c===f||(p.$modelValue=f?a:t,p.$modelValue!==d&&p.$$writeModelToScope())})}};this.$$runValidators=function(a,c,d,e){function f(){var a=
!0;s(p.$validators,function(e,f){var g=e(c,d);a=a&&g;h(f,g)});return a?!0:(s(p.$asyncValidators,function(a,c){h(c,null)}),!1)}function g(){var a=[],e=!0;s(p.$asyncValidators,function(f,g){var l=f(c,d);if(!l||!G(l.then))throw Ob("$asyncValidators",l);h(g,t);a.push(l.then(function(){h(g,!0)},function(a){e=!1;h(g,!1)}))});a.length?k.all(a).then(function(){l(e)},z):l(!0)}function h(a,c){m===w&&p.$setValidity(a,c)}function l(a){m===w&&e(a)}w++;var m=w;(function(a){var c=p.$$parserName||"parse";if(a===
t)h(c,null);else if(h(c,a),!a)return s(p.$validators,function(a,c){h(c,null)}),s(p.$asyncValidators,function(a,c){h(c,null)}),!1;return!0})(a)?f()?g():l(!1):l(!1)};this.$commitViewValue=function(){var a=p.$viewValue;h.cancel(P);if(p.$$lastCommittedViewValue!==a||""===a&&p.$$hasNativeValidators)p.$$lastCommittedViewValue=a,p.$pristine&&this.$setDirty(),this.$$parseAndValidate()};this.$$parseAndValidate=function(){var c=p.$$lastCommittedViewValue,d=B(c)?t:!0;if(d)for(var e=0;e<p.$parsers.length;e++)if(c=
p.$parsers[e](c),B(c)){d=!1;break}V(p.$modelValue)&&isNaN(p.$modelValue)&&(p.$modelValue=u(a));var f=p.$modelValue,g=p.$options&&p.$options.allowInvalid;p.$$rawModelValue=c;g&&(p.$modelValue=c,p.$modelValue!==f&&p.$$writeModelToScope());p.$$runValidators(d,c,p.$$lastCommittedViewValue,function(a){g||(p.$modelValue=a?c:t,p.$modelValue!==f&&p.$$writeModelToScope())})};this.$$writeModelToScope=function(){r(a,p.$modelValue);s(p.$viewChangeListeners,function(a){try{a()}catch(d){c(d)}})};this.$setViewValue=
function(a,c){p.$viewValue=a;p.$options&&!p.$options.updateOnDefault||p.$$debounceViewValueCommit(c)};this.$$debounceViewValueCommit=function(c){var d=0,e=p.$options;e&&y(e.debounce)&&(e=e.debounce,V(e)?d=e:V(e[c])?d=e[c]:V(e["default"])&&(d=e["default"]));h.cancel(P);d?P=h(function(){p.$commitViewValue()},d):l.$$phase?p.$commitViewValue():a.$apply(function(){p.$commitViewValue()})};a.$watch(function(){var c=u(a);if(c!==p.$modelValue){p.$modelValue=p.$$rawModelValue=c;for(var d=p.$formatters,e=d.length,
f=c;e--;)f=d[e](f);p.$viewValue!==f&&(p.$viewValue=p.$$lastCommittedViewValue=f,p.$render(),p.$$runValidators(t,c,f,z))}return c})}],ve=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:dg,priority:1,compile:function(c){c.addClass(Sa).addClass("ng-untouched").addClass(lb);return{pre:function(a,c,f,g){var h=g[0],l=g[1]||Lb;h.$$setOptions(g[2]&&g[2].$options);l.$addControl(h);f.$observe("name",function(a){h.$name!==a&&l.$$renameControl(h,a)});a.$on("$destroy",
function(){l.$removeControl(h)})},post:function(c,e,f,g){var h=g[0];if(h.$options&&h.$options.updateOn)e.on(h.$options.updateOn,function(a){h.$$debounceViewValueCommit(a&&a.type)});e.on("blur",function(e){h.$touched||(a.$$phase?c.$evalAsync(h.$setTouched):c.$apply(h.$setTouched))})}}}}}],eg=/(\s+|^)default(\s+|$)/,ze=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,c){var d=this;this.$options=a.$eval(c.ngModelOptions);this.$options.updateOn!==t?(this.$options.updateOnDefault=
!1,this.$options.updateOn=U(this.$options.updateOn.replace(eg,function(){d.$options.updateOnDefault=!0;return" "}))):this.$options.updateOnDefault=!0}]}},le=Ja({terminal:!0,priority:1E3}),me=["$locale","$interpolate",function(a,c){var d=/{}/g,e=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(f,g,h){function l(a){g.text(a||"")}var k=h.count,m=h.$attr.when&&g.attr(h.$attr.when),n=h.offset||0,q=f.$eval(m)||{},u={},m=c.startSymbol(),r=c.endSymbol(),t=m+k+"-"+n+r,p=ca.noop,v;s(h,function(a,c){var d=
e.exec(c);d&&(d=(d[1]?"-":"")+Q(d[2]),q[d]=g.attr(h.$attr[c]))});s(q,function(a,e){u[e]=c(a.replace(d,t))});f.$watch(k,function(c){c=parseFloat(c);var d=isNaN(c);d||c in q||(c=a.pluralCat(c-n));c===v||d&&isNaN(v)||(p(),p=f.$watch(u[c],l),v=c)})}}}],ne=["$parse","$animate",function(a,c){var d=S("ngRepeat"),e=function(a,c,d,e,k,m,n){a[d]=e;k&&(a[k]=m);a.$index=c;a.$first=0===c;a.$last=c===n-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(c&1))};return{restrict:"A",multiElement:!0,transclude:"element",
priority:1E3,terminal:!0,$$tlb:!0,compile:function(f,g){var h=g.ngRepeat,l=Y.createComment(" end ngRepeat: "+h+" "),k=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!k)throw d("iexp",h);var m=k[1],n=k[2],q=k[3],u=k[4],k=m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!k)throw d("iidexp",m);var r=k[3]||k[1],y=k[2];if(q&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(q)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(q)))throw d("badident",
q);var p,v,w,B,z={$id:Na};u?p=a(u):(w=function(a,c){return Na(c)},B=function(a){return a});return function(a,f,g,k,m){p&&(v=function(c,d,e){y&&(z[y]=c);z[r]=d;z.$index=e;return p(a,z)});var u=ha();a.$watchCollection(n,function(g){var k,p,n=f[0],E,z=ha(),x,T,N,G,H,C,I;q&&(a[q]=g);if(Ta(g))H=g,p=v||w;else{p=v||B;H=[];for(I in g)g.hasOwnProperty(I)&&"$"!=I.charAt(0)&&H.push(I);H.sort()}x=H.length;I=Array(x);for(k=0;k<x;k++)if(T=g===H?k:H[k],N=g[T],G=p(T,N,k),u[G])C=u[G],delete u[G],z[G]=C,I[k]=C;else{if(z[G])throw s(I,
function(a){a&&a.scope&&(u[a.id]=a)}),d("dupes",h,G,N);I[k]={id:G,scope:t,clone:t};z[G]=!0}for(E in u){C=u[E];G=ub(C.clone);c.leave(G);if(G[0].parentNode)for(k=0,p=G.length;k<p;k++)G[k].$$NG_REMOVED=!0;C.scope.$destroy()}for(k=0;k<x;k++)if(T=g===H?k:H[k],N=g[T],C=I[k],C.scope){E=n;do E=E.nextSibling;while(E&&E.$$NG_REMOVED);C.clone[0]!=E&&c.move(ub(C.clone),null,D(n));n=C.clone[C.clone.length-1];e(C.scope,k,r,N,y,T,x)}else m(function(a,d){C.scope=d;var f=l.cloneNode(!1);a[a.length++]=f;c.enter(a,
null,D(n));n=f;C.clone=a;z[C.id]=C;e(C.scope,k,r,N,y,T,x)});u=z})}}}}],oe=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(c,d,e){c.$watch(e.ngShow,function(c){a[c?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],he=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(c,d,e){c.$watch(e.ngHide,function(c){a[c?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],pe=Ja(function(a,c,d){a.$watchCollection(d.ngStyle,
function(a,d){d&&a!==d&&s(d,function(a,d){c.css(d,"")});a&&c.css(a)})}),qe=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,f){var g=[],h=[],l=[],k=[],m=function(a,c){return function(){a.splice(c,1)}};c.$watch(e.ngSwitch||e.on,function(c){var d,e;d=0;for(e=l.length;d<e;++d)a.cancel(l[d]);d=l.length=0;for(e=k.length;d<e;++d){var r=ub(h[d].clone);k[d].$destroy();(l[d]=a.leave(r)).then(m(l,d))}h.length=0;k.length=0;(g=
f.cases["!"+c]||f.cases["?"])&&s(g,function(c){c.transclude(function(d,e){k.push(e);var f=c.element;d[d.length++]=Y.createComment(" end ngSwitchWhen: ");h.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],re=Ja({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,c,d,e,f){e.cases["!"+d.ngSwitchWhen]=e.cases["!"+d.ngSwitchWhen]||[];e.cases["!"+d.ngSwitchWhen].push({transclude:f,element:c})}}),se=Ja({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,
link:function(a,c,d,e,f){e.cases["?"]=e.cases["?"]||[];e.cases["?"].push({transclude:f,element:c})}}),ue=Ja({restrict:"EAC",link:function(a,c,d,e,f){if(!f)throw S("ngTransclude")("orphan",va(c));f(function(a){c.empty();c.append(a)})}}),Vd=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){"text/ng-template"==d.type&&a.put(d.id,c[0].text)}}}],fg=S("ngOptions"),te=ea({restrict:"A",terminal:!0}),Wd=["$compile","$parse",function(a,c){var d=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,
e={$setViewValue:z};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,c,d){var l=this,k={},m=e,n;l.databound=d.ngModel;l.init=function(a,c,d){m=a;n=d};l.addOption=function(c,d){Ma(c,'"option value"');k[c]=!0;m.$viewValue==c&&(a.val(c),n.parent()&&n.remove());d&&d[0].hasAttribute("selected")&&(d[0].selected=!0)};l.removeOption=function(a){this.hasOption(a)&&(delete k[a],m.$viewValue===a&&this.renderUnknownOption(a))};l.renderUnknownOption=function(c){c=
"? "+Na(c)+" ?";n.val(c);a.prepend(n);a.val(c);n.prop("selected",!0)};l.hasOption=function(a){return k.hasOwnProperty(a)};c.$on("$destroy",function(){l.renderUnknownOption=z})}],link:function(e,g,h,l){function k(a,c,d,e){d.$render=function(){var a=d.$viewValue;e.hasOption(a)?(C.parent()&&C.remove(),c.val(a),""===a&&p.prop("selected",!0)):B(a)&&p?c.val(""):e.renderUnknownOption(a)};c.on("change",function(){a.$apply(function(){C.parent()&&C.remove();d.$setViewValue(c.val())})})}function m(a,c,d){var e;
d.$render=function(){var a=new eb(d.$viewValue);s(c.find("option"),function(c){c.selected=y(a.get(c.value))})};a.$watch(function(){ga(e,d.$viewValue)||(e=ra(d.$viewValue),d.$render())});c.on("change",function(){a.$apply(function(){var a=[];s(c.find("option"),function(c){c.selected&&a.push(c.value)});d.$setViewValue(a)})})}function n(e,f,g){function h(a,c,d){S[x]=d;D&&(S[D]=c);return a(e,S)}function k(a){var c;if(u)if(M&&H(a)){c=new eb([]);for(var d=0;d<a.length;d++)c.put(h(M,null,a[d]),!0)}else c=
new eb(a);else M&&(a=h(M,null,a));return function(d,e){var f;f=M?M:B?B:F;return u?y(c.remove(h(f,d,e))):a===h(f,d,e)}}function l(){v||(e.$$postDigest(p),v=!0)}function m(a,c,d){a[c]=a[c]||0;a[c]+=d?1:-1}function p(){v=!1;var a={"":[]},c=[""],d,l,n,r,t;n=g.$viewValue;r=O(e)||[];var B=D?Object.keys(r).sort():r,x,A,H,F,N={};t=k(n);var J=!1,U,V;Q={};for(F=0;H=B.length,F<H;F++){x=F;if(D&&(x=B[F],"$"===x.charAt(0)))continue;A=r[x];d=h(I,x,A)||"";(l=a[d])||(l=a[d]=[],c.push(d));d=t(x,A);J=J||d;A=h(C,x,A);
A=y(A)?A:"";V=M?M(e,S):D?B[F]:F;M&&(Q[V]=x);l.push({id:V,label:A,selected:d})}u||(z||null===n?a[""].unshift({id:"",label:"",selected:!J}):J||a[""].unshift({id:"?",label:"",selected:!0}));x=0;for(B=c.length;x<B;x++){d=c[x];l=a[d];R.length<=x?(n={element:G.clone().attr("label",d),label:l.label},r=[n],R.push(r),f.append(n.element)):(r=R[x],n=r[0],n.label!=d&&n.element.attr("label",n.label=d));J=null;F=0;for(H=l.length;F<H;F++)d=l[F],(t=r[F+1])?(J=t.element,t.label!==d.label&&(m(N,t.label,!1),m(N,d.label,
!0),J.text(t.label=d.label),J.prop("label",t.label)),t.id!==d.id&&J.val(t.id=d.id),J[0].selected!==d.selected&&(J.prop("selected",t.selected=d.selected),Ra&&J.prop("selected",t.selected))):(""===d.id&&z?U=z:(U=w.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).prop("label",d.label).text(d.label),r.push(t={element:U,label:d.label,id:d.id,selected:d.selected}),m(N,d.label,!0),J?J.after(U):n.element.append(U),J=U);for(F++;r.length>F;)d=r.pop(),m(N,d.label,!1),d.element.remove()}for(;R.length>
x;){l=R.pop();for(F=1;F<l.length;++F)m(N,l[F].label,!1);l[0].element.remove()}s(N,function(a,c){0<a?q.addOption(c):0>a&&q.removeOption(c)})}var n;if(!(n=r.match(d)))throw fg("iexp",r,va(f));var C=c(n[2]||n[1]),x=n[4]||n[6],A=/ as /.test(n[0])&&n[1],B=A?c(A):null,D=n[5],I=c(n[3]||""),F=c(n[2]?n[1]:x),O=c(n[7]),M=n[8]?c(n[8]):null,Q={},R=[[{element:f,label:""}]],S={};z&&(a(z)(e),z.removeClass("ng-scope"),z.remove());f.empty();f.on("change",function(){e.$apply(function(){var a=O(e)||[],c;if(u)c=[],s(f.val(),
function(d){d=M?Q[d]:d;c.push("?"===d?t:""===d?null:h(B?B:F,d,a[d]))});else{var d=M?Q[f.val()]:f.val();c="?"===d?t:""===d?null:h(B?B:F,d,a[d])}g.$setViewValue(c);p()})});g.$render=p;e.$watchCollection(O,l);e.$watchCollection(function(){var a=O(e),c;if(a&&H(a)){c=Array(a.length);for(var d=0,f=a.length;d<f;d++)c[d]=h(C,d,a[d])}else if(a)for(d in c={},a)a.hasOwnProperty(d)&&(c[d]=h(C,d,a[d]));return c},l);u&&e.$watchCollection(function(){return g.$modelValue},l)}if(l[1]){var q=l[0];l=l[1];var u=h.multiple,
r=h.ngOptions,z=!1,p,v=!1,w=D(Y.createElement("option")),G=D(Y.createElement("optgroup")),C=w.clone();h=0;for(var A=g.children(),x=A.length;h<x;h++)if(""===A[h].value){p=z=A.eq(h);break}q.init(l,z,C);u&&(l.$isEmpty=function(a){return!a||0===a.length});r?n(e,g,l):u?m(e,g,l):k(e,g,l,q)}}}}],Yd=["$interpolate",function(a){var c={addOption:z,removeOption:z};return{restrict:"E",priority:100,compile:function(d,e){if(B(e.value)){var f=a(d.text(),!0);f||e.$set("value",d.text())}return function(a,d,e){var k=
d.parent(),m=k.data("$selectController")||k.parent().data("$selectController");m&&m.databound||(m=c);f?a.$watch(f,function(a,c){e.$set("value",a);c!==a&&m.removeOption(c);m.addOption(a,d)}):m.addOption(e.value,d);d.on("$destroy",function(){m.removeOption(e.value)})}}}}],Xd=ea({restrict:"E",terminal:!1}),Ac=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){e&&(d.required=!0,e.$validators.required=function(a,c){return!d.required||!e.$isEmpty(c)},d.$observe("required",function(){e.$validate()}))}}},
zc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f,g=d.ngPattern||d.pattern;d.$observe("pattern",function(a){F(a)&&0<a.length&&(a=new RegExp("^"+a+"$"));if(a&&!a.test)throw S("ngPattern")("noregexp",g,a,va(c));f=a||t;e.$validate()});e.$validators.pattern=function(a){return e.$isEmpty(a)||B(f)||f.test(a)}}}}},Cc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f=-1;d.$observe("maxlength",function(a){a=ba(a);f=isNaN(a)?-1:a;e.$validate()});
e.$validators.maxlength=function(a,c){return 0>f||e.$isEmpty(c)||c.length<=f}}}}},Bc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f=0;d.$observe("minlength",function(a){f=ba(a)||0;e.$validate()});e.$validators.minlength=function(a,c){return e.$isEmpty(c)||c.length>=f}}}}};M.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(Nd(),Pd(ca),D(Y).ready(function(){Jd(Y,tc)}))})(window,document);!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>');
//# sourceMappingURL=angular.min.js.map

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/angular/angular.min.js","/resources/assets/vendor/angular")

},{"_process":7,"buffer":3}],64:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/*
 AngularJS v1.3.0
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(M,f,S){'use strict';f.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){return function(T,B,k){k=k.ngAnimateChildren;f.isString(k)&&0===k.length?B.data("$$ngAnimateChildren",!0):T.$watch(k,function(f){B.data("$$ngAnimateChildren",!!f)})}}).factory("$$animateReflow",["$$rAF","$document",function(f,B){return function(k){return f(function(){k()})}}]).config(["$provide","$animateProvider",function(T,B){function k(f){for(var g=0;g<f.length;g++){var k=f[g];if(1==k.nodeType)return k}}
function N(f,g){return k(f)==k(g)}var s=f.noop,g=f.forEach,ba=B.$$selectors,$=f.isArray,ca=f.isString,da=f.isObject,t={running:!0};T.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest",function(O,M,I,U,x,C,P,S,V){function A(a,c){var b=a.data("$$ngAnimateState")||{};c&&(b.running=!0,b.structural=!0,a.data("$$ngAnimateState",b));return b.disabled||b.running&&b.structural}function z(a){var c,b=M.defer();b.promise.$$cancelFn=
function(){c&&c()};P.$$postDigest(function(){c=a(function(){b.resolve()})});return b.promise}function J(a){if(da(a))return a.tempClasses&&ca(a.tempClasses)&&(a.tempClasses=a.tempClasses.split(/\s+/)),a}function W(a,c,b){b=b||{};var e={};g(b,function(a,d){g(d.split(" "),function(d){e[d]=a})});var m=Object.create(null);g((a.attr("class")||"").split(/\s+/),function(a){m[a]=!0});var f=[],k=[];g(c.classes,function(a,d){var b=m[d],c=e[d]||{};!1===a?(b||"addClass"==c.event)&&k.push(d):!0===a&&(b&&"removeClass"!=
c.event||f.push(d))});return 0<f.length+k.length&&[f.join(" "),k.join(" ")]}function Q(a){if(a){var c=[],b={};a=a.substr(1).split(".");(U.transitions||U.animations)&&c.push(I.get(ba[""]));for(var e=0;e<a.length;e++){var f=a[e],k=ba[f];k&&!b[f]&&(c.push(I.get(k)),b[f]=!0)}return c}}function R(a,c,b,e){function m(a,d){var b=a[d],c=a["before"+d.charAt(0).toUpperCase()+d.substr(1)];if(b||c)return"leave"==d&&(c=b,b=null),l.push({event:d,fn:b}),H.push({event:d,fn:c}),!0}function k(c,h,G){var w=[];g(c,function(a){a.fn&&
w.push(a)});var f=0;g(w,function(c,n){var u=function(){a:{if(h){(h[n]||s)();if(++f<w.length)break a;h=null}G()}};switch(c.event){case "setClass":h.push(c.fn(a,F,d,u,e));break;case "animate":h.push(c.fn(a,b,e.from,e.to,u));break;case "addClass":h.push(c.fn(a,F||b,u,e));break;case "removeClass":h.push(c.fn(a,d||b,u,e));break;default:h.push(c.fn(a,u,e))}});h&&0===h.length&&G()}var p=a[0];if(p){e&&(e.to=e.to||{},e.from=e.from||{});var F,d;$(b)&&(F=b[0],d=b[1],F?d?b=F+" "+d:(b=F,c="addClass"):(b=d,c="removeClass"));
var h="setClass"==c,G=h||"addClass"==c||"removeClass"==c||"animate"==c,w=a.attr("class")+" "+b;if(X(w)){var u=s,n=[],H=[],q=s,r=[],l=[],w=(" "+w).replace(/\s+/g,".");g(Q(w),function(a){!m(a,c)&&h&&(m(a,"addClass"),m(a,"removeClass"))});return{node:p,event:c,className:b,isClassBased:G,isSetClassOperation:h,applyStyles:function(){e&&a.css(f.extend(e.from||{},e.to||{}))},before:function(a){u=a;k(H,n,function(){u=s;a()})},after:function(a){q=a;k(l,r,function(){q=s;a()})},cancel:function(){n&&(g(n,function(a){(a||
s)(!0)}),u(!0));r&&(g(r,function(a){(a||s)(!0)}),q(!0))}}}}}function y(a,c,b,e,m,k,p,F){function d(d){var h="$animate:"+d;H&&H[h]&&0<H[h].length&&C(function(){b.triggerHandler(h,{event:a,className:c})})}function h(){d("before")}function G(){d("after")}function w(){w.hasBeenRun||(w.hasBeenRun=!0,k())}function u(){if(!u.hasBeenRun){n&&n.applyStyles();u.hasBeenRun=!0;p&&p.tempClasses&&g(p.tempClasses,function(a){b.removeClass(a)});var h=b.data("$$ngAnimateState");h&&(n&&n.isClassBased?l(b,c):(C(function(){var d=
b.data("$$ngAnimateState")||{};v==d.index&&l(b,c,a)}),b.data("$$ngAnimateState",h)));d("close");F()}}var n=R(b,a,c,p);if(!n)return w(),h(),G(),u(),s;a=n.event;c=n.className;var H=f.element._data(n.node),H=H&&H.events;e||(e=m?m.parent():b.parent());if(Y(b,e))return w(),h(),G(),u(),s;e=b.data("$$ngAnimateState")||{};var q=e.active||{},r=e.totalActive||0,t=e.last;m=!1;if(0<r){r=[];if(n.isClassBased)"setClass"==t.event?(r.push(t),l(b,c)):q[c]&&(aa=q[c],aa.event==a?m=!0:(r.push(aa),l(b,c)));else if("leave"==
a&&q["ng-leave"])m=!0;else{for(var aa in q)r.push(q[aa]);e={};l(b,!0)}0<r.length&&g(r,function(a){a.cancel()})}!n.isClassBased||n.isSetClassOperation||"animate"==a||m||(m="addClass"==a==b.hasClass(c));if(m)return w(),h(),G(),d("close"),F(),s;q=e.active||{};r=e.totalActive||0;if("leave"==a)b.one("$destroy",function(a){a=f.element(this);var d=a.data("$$ngAnimateState");d&&(d=d.active["ng-leave"])&&(d.cancel(),l(a,"ng-leave"))});b.addClass("ng-animate");p&&p.tempClasses&&g(p.tempClasses,function(a){b.addClass(a)});
var v=Z++;r++;q[c]=n;b.data("$$ngAnimateState",{last:n,active:q,index:v,totalActive:r});h();n.before(function(d){var h=b.data("$$ngAnimateState");d=d||!h||!h.active[c]||n.isClassBased&&h.active[c].event!=a;w();!0===d?u():(G(),n.after(u))});return n.cancel}function K(a){if(a=k(a))a=f.isFunction(a.getElementsByClassName)?a.getElementsByClassName("ng-animate"):a.querySelectorAll(".ng-animate"),g(a,function(a){a=f.element(a);(a=a.data("$$ngAnimateState"))&&a.active&&g(a.active,function(a){a.cancel()})})}
function l(a,c){if(N(a,x))t.disabled||(t.running=!1,t.structural=!1);else if(c){var b=a.data("$$ngAnimateState")||{},e=!0===c;!e&&b.active&&b.active[c]&&(b.totalActive--,delete b.active[c]);if(e||!b.totalActive)a.removeClass("ng-animate"),a.removeData("$$ngAnimateState")}}function Y(a,c){if(t.disabled)return!0;if(N(a,x))return t.running;var b,e,k;do{if(0===c.length)break;var g=N(c,x),p=g?t:c.data("$$ngAnimateState")||{};if(p.disabled)return!0;g&&(k=!0);!1!==b&&(g=c.data("$$ngAnimateChildren"),f.isDefined(g)&&
(b=g));e=e||p.running||p.last&&!p.last.isClassBased}while(c=c.parent());return!k||!b&&e}x.data("$$ngAnimateState",t);var L=P.$watch(function(){return V.totalPendingRequests},function(a,c){0===a&&(L(),P.$$postDigest(function(){P.$$postDigest(function(){t.running=!1})}))}),Z=0,E=B.classNameFilter(),X=E?function(a){return E.test(a)}:function(){return!0};return{animate:function(a,c,b,e,g){e=e||"ng-inline-animate";g=J(g)||{};g.from=b?c:null;g.to=b?b:c;return z(function(b){return y("animate",e,f.element(k(a)),
null,null,s,g,b)})},enter:function(a,c,b,e){e=J(e);a=f.element(a);c=c&&f.element(c);b=b&&f.element(b);A(a,!0);O.enter(a,c,b);return z(function(g){return y("enter","ng-enter",f.element(k(a)),c,b,s,e,g)})},leave:function(a,c){c=J(c);a=f.element(a);K(a);A(a,!0);return z(function(b){return y("leave","ng-leave",f.element(k(a)),null,null,function(){O.leave(a)},c,b)})},move:function(a,c,b,e){e=J(e);a=f.element(a);c=c&&f.element(c);b=b&&f.element(b);K(a);A(a,!0);O.move(a,c,b);return z(function(g){return y("move",
"ng-move",f.element(k(a)),c,b,s,e,g)})},addClass:function(a,c,b){return this.setClass(a,c,[],b)},removeClass:function(a,c,b){return this.setClass(a,[],c,b)},setClass:function(a,c,b,e){e=J(e);a=f.element(a);a=f.element(k(a));if(A(a))return O.$$setClassImmediately(a,c,b,e);var m,l=a.data("$$animateClasses"),p=!!l;l||(l={classes:{}});m=l.classes;c=$(c)?c:c.split(" ");g(c,function(a){a&&a.length&&(m[a]=!0)});b=$(b)?b:b.split(" ");g(b,function(a){a&&a.length&&(m[a]=!1)});if(p)return e&&l.options&&(l.options=
f.extend(l.options||{},e)),l.promise;a.data("$$animateClasses",l={classes:m,options:e});return l.promise=z(function(b){var d=a.parent(),h=k(a),c=h.parentNode;if(!c||c.$$NG_REMOVED||h.$$NG_REMOVED)b();else{h=a.data("$$animateClasses");a.removeData("$$animateClasses");var c=a.data("$$ngAnimateState")||{},e=W(a,h,c.active);return e?y("setClass",e,a,d,null,function(){e[0]&&O.$$addClassImmediately(a,e[0]);e[1]&&O.$$removeClassImmediately(a,e[1])},h.options,b):b()}})},cancel:function(a){a.$$cancelFn()},
enabled:function(a,c){switch(arguments.length){case 2:if(a)l(c);else{var b=c.data("$$ngAnimateState")||{};b.disabled=!0;c.data("$$ngAnimateState",b)}break;case 1:t.disabled=!a;break;default:a=!t.disabled}return!!a}}}]);B.register("",["$window","$sniffer","$timeout","$$animateReflow",function(t,B,I,U){function x(){e||(e=U(function(){b=[];e=null;a={}}))}function C(c,d){e&&e();b.push(d);e=U(function(){g(b,function(a){a()});b=[];e=null;a={}})}function P(a,d){var h=k(a);a=f.element(h);p.push(a);h=Date.now()+
d;h<=N||(I.cancel(m),N=h,m=I(function(){T(p);p=[]},d,!1))}function T(a){g(a,function(a){(a=a.data("$$ngAnimateCSS3Data"))&&g(a.closeAnimationFns,function(a){a()})})}function V(b,d){var h=d?a[d]:null;if(!h){var c=0,e=0,f=0,k=0;g(b,function(a){if(1==a.nodeType){a=t.getComputedStyle(a)||{};c=Math.max(A(a[L+"Duration"]),c);e=Math.max(A(a[L+"Delay"]),e);k=Math.max(A(a[E+"Delay"]),k);var d=A(a[E+"Duration"]);0<d&&(d*=parseInt(a[E+"IterationCount"],10)||1);f=Math.max(d,f)}});h={total:0,transitionDelay:e,
transitionDuration:c,animationDelay:k,animationDuration:f};d&&(a[d]=h)}return h}function A(a){var d=0;a=ca(a)?a.split(/\s*,\s*/):[];g(a,function(a){d=Math.max(parseFloat(a)||0,d)});return d}function z(b,d,h,e){b=0<=["ng-enter","ng-leave","ng-move"].indexOf(h);var f,g=d.parent(),n=g.data("$$ngAnimateKey");n||(g.data("$$ngAnimateKey",++c),n=c);f=n+"-"+k(d).getAttribute("class");var g=f+" "+h,n=a[g]?++a[g].total:0,l={};if(0<n){var q=h+"-stagger",l=f+" "+q;(f=!a[l])&&d.addClass(q);l=V(d,l);f&&d.removeClass(q)}d.addClass(h);
var q=d.data("$$ngAnimateCSS3Data")||{},r=V(d,g);f=r.transitionDuration;r=r.animationDuration;if(b&&0===f&&0===r)return d.removeClass(h),!1;h=e||b&&0<f;b=0<r&&0<l.animationDelay&&0===l.animationDuration;d.data("$$ngAnimateCSS3Data",{stagger:l,cacheKey:g,running:q.running||0,itemIndex:n,blockTransition:h,closeAnimationFns:q.closeAnimationFns||[]});g=k(d);h&&(W(g,!0),e&&d.css(e));b&&(g.style[E+"PlayState"]="paused");return!0}function J(a,d,b,c,e){function f(){d.off(C,l);d.removeClass(q);d.removeClass(r);
z&&I.cancel(z);K(d,b);var a=k(d),c;for(c in p)a.style.removeProperty(p[c])}function l(a){a.stopPropagation();var d=a.originalEvent||a;a=d.$manualTimeStamp||d.timeStamp||Date.now();d=parseFloat(d.elapsedTime.toFixed(3));Math.max(a-B,0)>=A&&d>=x&&c()}var m=k(d);a=d.data("$$ngAnimateCSS3Data");if(-1!=m.getAttribute("class").indexOf(b)&&a){var q="",r="";g(b.split(" "),function(a,d){var b=(0<d?" ":"")+a;q+=b+"-active";r+=b+"-pending"});var p=[],t=a.itemIndex,v=a.stagger,s=0;if(0<t){s=0;0<v.transitionDelay&&
0===v.transitionDuration&&(s=v.transitionDelay*t);var y=0;0<v.animationDelay&&0===v.animationDuration&&(y=v.animationDelay*t,p.push(Y+"animation-play-state"));s=Math.round(100*Math.max(s,y))/100}s||(d.addClass(q),a.blockTransition&&W(m,!1));var D=V(d,a.cacheKey+" "+q),x=Math.max(D.transitionDuration,D.animationDuration);if(0===x)d.removeClass(q),K(d,b),c();else{!s&&e&&(D.transitionDuration||(d.css("transition",D.animationDuration+"s linear all"),p.push("transition")),d.css(e));var t=Math.max(D.transitionDelay,
D.animationDelay),A=1E3*t;0<p.length&&(v=m.getAttribute("style")||"",";"!==v.charAt(v.length-1)&&(v+=";"),m.setAttribute("style",v+" "));var B=Date.now(),C=X+" "+Z,t=1E3*(s+1.5*(t+x)),z;0<s&&(d.addClass(r),z=I(function(){z=null;0<D.transitionDuration&&W(m,!1);0<D.animationDuration&&(m.style[E+"PlayState"]="");d.addClass(q);d.removeClass(r);e&&(0===D.transitionDuration&&d.css("transition",D.animationDuration+"s linear all"),d.css(e),p.push("transition"))},1E3*s,!1));d.on(C,l);a.closeAnimationFns.push(function(){f();
c()});a.running++;P(d,t);return f}}else c()}function W(a,d){a.style[L+"Property"]=d?"none":""}function Q(a,d,b,c){if(z(a,d,b,c))return function(a){a&&K(d,b)}}function R(a,d,b,c,e){if(d.data("$$ngAnimateCSS3Data"))return J(a,d,b,c,e);K(d,b);c()}function y(a,d,b,c,e){var f=Q(a,d,b,e.from);if(f){var g=f;C(d,function(){g=R(a,d,b,c,e.to)});return function(a){(g||s)(a)}}x();c()}function K(a,d){a.removeClass(d);var b=a.data("$$ngAnimateCSS3Data");b&&(b.running&&b.running--,b.running&&0!==b.running||a.removeData("$$ngAnimateCSS3Data"))}
function l(a,d){var b="";a=$(a)?a:a.split(/\s+/);g(a,function(a,c){a&&0<a.length&&(b+=(0<c?" ":"")+a+d)});return b}var Y="",L,Z,E,X;M.ontransitionend===S&&M.onwebkittransitionend!==S?(Y="-webkit-",L="WebkitTransition",Z="webkitTransitionEnd transitionend"):(L="transition",Z="transitionend");M.onanimationend===S&&M.onwebkitanimationend!==S?(Y="-webkit-",E="WebkitAnimation",X="webkitAnimationEnd animationend"):(E="animation",X="animationend");var a={},c=0,b=[],e,m=null,N=0,p=[];return{animate:function(a,
d,b,c,e,f){f=f||{};f.from=b;f.to=c;return y("animate",a,d,e,f)},enter:function(a,b,c){c=c||{};return y("enter",a,"ng-enter",b,c)},leave:function(a,b,c){c=c||{};return y("leave",a,"ng-leave",b,c)},move:function(a,b,c){c=c||{};return y("move",a,"ng-move",b,c)},beforeSetClass:function(a,b,c,e,f){f=f||{};b=l(c,"-remove")+" "+l(b,"-add");if(f=Q("setClass",a,b,f.from))return C(a,e),f;x();e()},beforeAddClass:function(a,b,c,e){e=e||{};if(b=Q("addClass",a,l(b,"-add"),e.from))return C(a,c),b;x();c()},beforeRemoveClass:function(a,
b,c,e){e=e||{};if(b=Q("removeClass",a,l(b,"-remove"),e.from))return C(a,c),b;x();c()},setClass:function(a,b,c,e,f){f=f||{};c=l(c,"-remove");b=l(b,"-add");return R("setClass",a,c+" "+b,e,f.to)},addClass:function(a,b,c,e){e=e||{};return R("addClass",a,l(b,"-add"),c,e.to)},removeClass:function(a,b,c,e){e=e||{};return R("removeClass",a,l(b,"-remove"),c,e.to)}}}])}])})(window,window.angular);
//# sourceMappingURL=angular-animate.min.js.map

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/angular_animate/angular-animate.min.js","/resources/assets/vendor/angular_animate")

},{"_process":7,"buffer":3}],65:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/*! 3.1.2 */
!function(){function a(a,b){window.XMLHttpRequest.prototype[a]=b(window.XMLHttpRequest.prototype[a])}function b(a,b,c){try{Object.defineProperty(a,b,{get:c})}catch(d){}}var c=function(){try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(a)return!0}catch(b){if(void 0!=navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1};if(window.XMLHttpRequest&&!window.FormData||window.FileAPI&&FileAPI.forceLoad){var d=function(a){if(!a.__listeners){a.upload||(a.upload={}),a.__listeners=[];var b=a.upload.addEventListener;a.upload.addEventListener=function(c,d){a.__listeners[c]=d,b&&b.apply(this,arguments)}}};a("open",function(a){return function(b,c,e){d(this),this.__url=c;try{a.apply(this,[b,c,e])}catch(f){f.message.indexOf("Access is denied")>-1&&(this.__origError=f,a.apply(this,[b,"_fix_for_ie_crossdomain__",e]))}}}),a("getResponseHeader",function(a){return function(b){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(b):null==a?null:a.apply(this,[b])}}),a("getAllResponseHeaders",function(a){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==a?null:a.apply(this)}}),a("abort",function(a){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==a?null:a.apply(this)}}),a("setRequestHeader",function(a){return function(b,c){if("__setXHR_"===b){d(this);var e=c(this);e instanceof Function&&e(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[b]=c,a.apply(this,arguments)}}),a("send",function(a){return function(){var d=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var e=arguments[0],f={url:d.__url,jsonp:!1,cache:!0,complete:function(a,c){d.__completed=!0,!a&&d.__listeners.load&&d.__listeners.load({type:"load",loaded:d.__loaded,total:d.__total,target:d,lengthComputable:!0}),!a&&d.__listeners.loadend&&d.__listeners.loadend({type:"loadend",loaded:d.__loaded,total:d.__total,target:d,lengthComputable:!0}),"abort"===a&&d.__listeners.abort&&d.__listeners.abort({type:"abort",loaded:d.__loaded,total:d.__total,target:d,lengthComputable:!0}),void 0!==c.status&&b(d,"status",function(){return 0==c.status&&a&&"abort"!==a?500:c.status}),void 0!==c.statusText&&b(d,"statusText",function(){return c.statusText}),b(d,"readyState",function(){return 4}),void 0!==c.response&&b(d,"response",function(){return c.response});var e=c.responseText||(a&&0==c.status&&"abort"!==a?a:void 0);b(d,"responseText",function(){return e}),b(d,"response",function(){return e}),a&&b(d,"err",function(){return a}),d.__fileApiXHR=c,d.onreadystatechange&&d.onreadystatechange(),d.onload&&d.onload()},fileprogress:function(a){if(a.target=d,d.__listeners.progress&&d.__listeners.progress(a),d.__total=a.total,d.__loaded=a.loaded,a.total===a.loaded){var b=this;setTimeout(function(){d.__completed||(d.getAllResponseHeaders=function(){},b.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:d.__requestHeaders};f.data={},f.files={};for(var g=0;g<e.data.length;g++){var h=e.data[g];null!=h.val&&null!=h.val.name&&null!=h.val.size&&null!=h.val.type?f.files[h.key]=h.val:f.data[h.key]=h.val}setTimeout(function(){if(!c())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';d.__fileApiXHR=FileAPI.upload(f)},1)}else{if(this.__origError)throw this.__origError;a.apply(d,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0;var e=function(a){if(!c())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var b=angular.element(a);if(!b.attr("disabled")){for(var d=!1,e=0;e<b[0].attributes.length;e++){var f=b[0].attributes[e];if(-1!==f.name.indexOf("file-select")){d=!0;break}}if(!b.hasClass("js-fileapi-wrapper")&&(d||null!=b.attr("__afu_gen__"))&&(b.addClass("js-fileapi-wrapper"),null!=b.attr("__afu_gen__"))){for(var g=b[0].__refElem__&&angular.element(b[0].__refElem__)||b;g&&!g.attr("__refElem__");)g=angular.element(g[0].nextSibling);g.bind("mouseover",function(){(""===b.parent().css("position")||"static"===b.parent().css("position"))&&b.parent().css("position","relative"),b.css("position","absolute").css("top",g[0].offsetTop+"px").css("left",g[0].offsetLeft+"px").css("width",g[0].offsetWidth+"px").css("height",g[0].offsetHeight+"px").css("padding",g.css("padding")).css("margin",g.css("margin")).css("filter","alpha(opacity=0)"),g.attr("onclick",""),b.css("z-index","1000")})}}},f=function(a){return function(b){for(var c=FileAPI.getFiles(b),d=0;d<c.length;d++)void 0===c[d].size&&(c[d].size=0),void 0===c[d].name&&(c[d].name="file"),void 0===c[d].type&&(c[d].type="undefined");b.target||(b.target={}),b.target.files=c,b.target.files!=c&&(b.__files_=c),(b.__files_||b.target.files).item=function(a){return(b.__files_||b.target.files)[a]||null},a&&a.apply(this,[b])}},g=function(a,b){return("change"===b.toLowerCase()||"onchange"===b.toLowerCase())&&"file"==a.getAttribute("type")};HTMLInputElement.prototype.addEventListener&&(HTMLInputElement.prototype.addEventListener=function(a){return function(b,c,d,h){g(this,b)?(e(this),a.apply(this,[b,f(c),d,h])):a.apply(this,[b,c,d,h])}}(HTMLInputElement.prototype.addEventListener)),HTMLInputElement.prototype.attachEvent&&(HTMLInputElement.prototype.attachEvent=function(a){return function(b,c){g(this,b)?(e(this),window.jQuery?angular.element(this).bind("change",f(null)):a.apply(this,[b,f(c)])):a.apply(this,[b,c])}}(HTMLInputElement.prototype.attachEvent)),window.FormData=FormData=function(){return{append:function(a,b,c){b.__isFileAPIBlobShim&&(b=b.data[0]),this.data.push({key:a,val:b,name:c})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(a){return{data:a,__isFileAPIBlobShim:!0}},function(){if(window.FileAPI||(window.FileAPI={}),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var a,b,d,e,f,g=document.createElement("script"),h=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)a=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)b=window.FileAPI.jsPath;else for(d=0;d<h.length;d++)if(f=h[d].src,e=f.search(/\/angular\-file\-upload[\-a-zA-z0-9\.]*\.js/),e>-1){b=f.substring(0,e+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=b),g.setAttribute("src",a||b+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(g),FileAPI.hasFlash=c()}}(),FileAPI.disableFileInput=function(a,b){b?a.removeClass("js-fileapi-wrapper"):a.addClass("js-fileapi-wrapper")}}window.FileReader||(window.FileReader=function(){var a=this,b=!1;this.listeners={},this.addEventListener=function(b,c){a.listeners[b]=a.listeners[b]||[],a.listeners[b].push(c)},this.removeEventListener=function(b,c){a.listeners[b]&&a.listeners[b].splice(a.listeners[b].indexOf(c),1)},this.dispatchEvent=function(b){var c=a.listeners[b.type];if(c)for(var d=0;d<c.length;d++)c[d].call(a,b)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var c=function(b,c){var d={type:b,target:a,loaded:c.loaded,total:c.total,error:c.error};return null!=c.result&&(d.target.result=c.result),d},d=function(d){if(b||(b=!0,a.onloadstart&&a.onloadstart(c("loadstart",d))),"load"===d.type){a.onloadend&&a.onloadend(c("loadend",d));var e=c("load",d);a.onload&&a.onload(e),a.dispatchEvent(e)}else if("progress"===d.type){var e=c("progress",d);a.onprogress&&a.onprogress(e),a.dispatchEvent(e)}else{var e=c("error",d);a.onerror&&a.onerror(e),a.dispatchEvent(e)}};this.readAsArrayBuffer=function(a){FileAPI.readAsBinaryString(a,d)},this.readAsBinaryString=function(a){FileAPI.readAsBinaryString(a,d)},this.readAsDataURL=function(a){FileAPI.readAsDataURL(a,d)},this.readAsText=function(a){FileAPI.readAsText(a,d)}})}();
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/angularjs-file-upload/angular-file-upload-shim.min.js","/resources/assets/vendor/angularjs-file-upload")

},{"_process":7,"buffer":3}],66:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
/*! 3.1.2 */
!function(){function a(a,b){window.XMLHttpRequest.prototype[a]=b(window.XMLHttpRequest.prototype[a])}function b(a,b,c,d,f,g,h){function i(){return"input"===b[0].tagName.toLowerCase()&&b.attr("type")&&"file"===b.attr("type").toLowerCase()}function j(c){g(function(){b.parent().length&&p.push(a.$watch(c,function(a,b){a!=b&&k()}))})}function k(){var c=b.clone();if(b.attr("__afu_gen__")&&angular.element(document.getElementById(b.attr("id").substring(1))).remove(),b.parent().length){for(var d=0;d<p.length;d++)p[d]();b.replaceWith(c),h(c)(a)}return c}function l(d,e){if(d){j(d);var g=f(d)(a);g?(b.attr(e,g),c[e]=g):(b.attr(e,null),delete c[e])}}function m(b){var e;e=b.__files_||b.target&&b.target.files,o(e,c,d,a,b)}function n(a){if(null!=q[0].value&&""!=q[0].value&&(q[0].value=null,-1===navigator.userAgent.indexOf("Trident/7")&&m({target:{files:[]}})),b.attr("__afu_clone__"))b.attr("__afu_clone__",null);else if(-1!==navigator.appVersion.indexOf("MSIE 10")||-1!==navigator.userAgent.indexOf("Trident/7")){var c=k();return c.attr("__afu_clone__",!0),c[0].click(),a.preventDefault(),a.stopPropagation(),!0}}function o(a,b,c,d,h){for(var i=[],j=[],k=f(b.ngAccept)(d),l=angular.isString(k)&&k?new RegExp(e(k),"gi"):null,m=l?null:b.ngAccept,n=0;n<a.length;n++){var o=a.item(n);!(!l||o.type.match(l)||null!=o.name&&o.name.match(l))||m&&!f(m)(d,{$file:o,$event:h})?j.push(o):i.push(o)}g(function(){c&&(f(b.ngModel).assign(d,i),c&&c.$setViewValue(null!=i&&0==i.length?"":i),b.ngModelRejected&&f(b.ngModelRejected).assign(d,j)),b.ngFileChange&&""!=b.ngFileChange&&f(b.ngFileChange)(d,{$files:i,$rejectedFiles:j,$event:h})})}var p=[];l(c.ngMultiple,"multiple"),l(c.ngAccept,"ng-accept"),l(c.ngCapture,"capture"),""!=c.ngFileSelect&&(c.ngFileChange=c.ngFileSelect);var q=b;if(i())b.bind("click",n);else{q=angular.element('<input type="file">'),b.attr("multiple")&&q.attr("multiple",b.attr("multiple")),b.attr("accept")&&q.attr("accept",b.attr("accept")),b.attr("capture")&&q.attr("capture",b.attr("capture"));for(var r in c)if(0==r.indexOf("inputFile")){var s=r.substring("inputFile".length);s=s[0].toLowerCase()+s.substring(1),q.attr(s,c[r])}q.css("width","0px").css("height","0px").css("position","absolute").css("padding",0).css("margin",0).css("overflow","hidden").attr("tabindex","-1").css("opacity",0).attr("__afu_gen__",!0),b.attr("__refElem__",!0),q[0].__refElem__=b[0],b.parent()[0].insertBefore(q[0],b[0]),b.css("overflow","hidden"),b.bind("click",function(a){n(a)||q[0].click()})}q.bind("change",m),b.on("$destroy",function(){for(var a=0;a<p.length;a++)p[a]();b[0]!=q[0]&&q.remove()}),p.push(a.$watch(c.ngModel,function(a,b){a==b||null!=a&&a.length||(-1!==navigator.appVersion.indexOf("MSIE 10")?k():q[0].value=null)}))}function c(a,b,c,f,g,h,i){function j(a,b,c){var d=!0;if(r||s){var e=c.dataTransfer.items;if(null!=e)for(var f=0;f<e.length&&d;f++)d=d&&("file"==e[f].kind||""==e[f].kind)&&(s&&g(s)(a,{$file:e[f],$event:c})||r&&null!=e[f].type&&e[f].type.match(r)||null!=e[f].name&&e[f].name.match(r))}var h=g(b.dragOverClass)(a,{$event:c});return h&&(h.delay&&(p=h.delay),h.accept&&(h=d?h.accept:h.reject)),h||b.dragOverClass||"dragover"}function k(b,c,d,e){function f(c){!(!r||c.type.match(r)||null!=c.name&&c.name.match(r))||s&&!g(s)(a,{$file:c,$event:b})?l.push(c):k.push(c)}function j(a,b,c){if(null!=b)if(b.isDirectory){var d=(c||"")+b.name;f({name:b.name,type:"directory",path:d});var e=b.createReader(),g=[];n++;var h=function(){e.readEntries(function(d){try{if(d.length)g=g.concat(Array.prototype.slice.call(d||[],0)),h();else{for(var e=0;e<g.length;e++)j(a,g[e],(c?c:"")+b.name+"/");n--}}catch(f){n--,console.error(f)}},function(){n--})};h()}else n++,b.file(function(a){try{n--,a.path=(c?c:"")+a.name,f(a)}catch(b){n--,console.error(b)}},function(){n--})}var k=[],l=[],m=b.dataTransfer.items,n=0;if(m&&m.length>0&&"file"!=i.protocol())for(var o=0;o<m.length;o++){if(m[o].webkitGetAsEntry&&m[o].webkitGetAsEntry()&&m[o].webkitGetAsEntry().isDirectory){var p=m[o].webkitGetAsEntry();if(p.isDirectory&&!d)continue;null!=p&&j(k,p)}else{var q=m[o].getAsFile();null!=q&&f(q)}if(!e&&k.length>0)break}else{var t=b.dataTransfer.files;if(null!=t)for(var o=0;o<t.length&&(f(t.item(o)),e||!(k.length>0));o++);}var u=0;!function v(a){h(function(){if(n)10*u++<2e4&&v(10);else{if(!e&&k.length>1){for(var a=0;"directory"==k[a].type;)a++;k=[k[a]]}c(k,l)}},a||0)}()}var l=d();if(c.dropAvailable&&h(function(){a.dropAvailable?a.dropAvailable.value=l:a.dropAvailable=l}),!l)return 0!=g(c.hideOnDropNotAvailable)(a)&&b.css("display","none"),void 0;var m,n=null,o=g(c.stopPropagation)(a),p=1,q=g(c.ngAccept)(a)||c.accept,r=angular.isString(q)&&q?new RegExp(e(q),"gi"):null,s=r?null:c.ngAccept;b[0].addEventListener("dragover",function(d){if(d.preventDefault(),o&&d.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var e=d.dataTransfer.effectAllowed;d.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy"}h.cancel(n),a.actualDragOverClass||(m=j(a,c,d)),b.addClass(m)},!1),b[0].addEventListener("dragenter",function(a){a.preventDefault(),o&&a.stopPropagation()},!1),b[0].addEventListener("dragleave",function(){n=h(function(){b.removeClass(m),m=null},p||1)},!1),""!=c.ngFileDrop&&(c.ngFileChange=a.ngFileDrop),b[0].addEventListener("drop",function(d){d.preventDefault(),o&&d.stopPropagation(),b.removeClass(m),m=null,k(d,function(b,e){h(function(){f&&(g(c.ngModel).assign(a,b),f&&f.$setViewValue(null!=b&&0==b.length?"":b)),c.ngModelRejected&&a[c.ngModelRejected]&&g(c.ngModelRejected).assign(a,e)}),h(function(){g(c.ngFileChange)(a,{$files:b,$rejectedFiles:e,$event:d})})},0!=g(c.allowDir)(a),c.multiple||g(c.ngMultiple)(a))},!1)}function d(){var a=document.createElement("div");return"draggable"in a&&"ondrop"in a}function e(a){if(a.length>2&&"/"===a[0]&&"/"===a[a.length-1])return a.substring(1,a.length-1);var b=a.split(","),c="";if(b.length>1)for(var d=0;d<b.length;d++)c+="("+e(b[d])+")",d<b.length-1&&(c+="|");else 0==a.indexOf(".")&&(a="*"+a),c="^"+a.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",c=c.replace(/\\\*/g,".*").replace(/\\\?/g,".");return c}window.XMLHttpRequest&&!window.XMLHttpRequest.__isFileAPIShim&&a("setRequestHeader",function(a){return function(b,c){if("__setXHR_"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}});var f=angular.module("angularFileUpload",[]);f.version="3.1.2",f.service("$upload",["$http","$q","$timeout",function(a,b,c){function d(d){d.method=d.method||"POST",d.headers=d.headers||{},d.transformRequest=d.transformRequest||function(b,c){return window.ArrayBuffer&&b instanceof window.ArrayBuffer?b:a.defaults.transformRequest[0](b,c)};var e=b.defer(),f=e.promise;return d.headers.__setXHR_=function(){return function(a){a&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener("progress",function(a){a.config=d,e.notify?e.notify(a):f.progress_fn&&c(function(){f.progress_fn(a)})},!1),a.upload.addEventListener("load",function(a){a.lengthComputable&&(a.config=d,e.notify?e.notify(a):f.progress_fn&&c(function(){f.progress_fn(a)}))},!1))}},a(d).then(function(a){e.resolve(a)},function(a){e.reject(a)},function(a){e.notify(a)}),f.success=function(a){return f.then(function(b){a(b.data,b.status,b.headers,d)}),f},f.error=function(a){return f.then(null,function(b){a(b.data,b.status,b.headers,d)}),f},f.progress=function(a){return f.progress_fn=a,f.then(null,null,function(b){a(b)}),f},f.abort=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),f},f.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(f,arguments),a.apply(f,arguments)}}(d.xhrFn),f},f}this.upload=function(a){a.headers=a.headers||{},a.headers["Content-Type"]=void 0;a.transformRequest;return a.transformRequest=a.transformRequest?"[object Array]"===Object.prototype.toString.call(a.transformRequest)?a.transformRequest:[a.transformRequest]:[],a.transformRequest.push(function(b){var c=new FormData,d={};for(var e in a.fields)d[e]=a.fields[e];if(b&&(d.data=b),a.formDataAppender)for(var e in d)a.formDataAppender(c,e,d[e]);else for(var e in d){var f=d[e];void 0!==f&&("[object String]"===Object.prototype.toString.call(f)?c.append(e,f):a.sendObjectsAsJsonBlob&&"object"==typeof f?c.append(e,new Blob([f],{type:"application/json"})):c.append(e,JSON.stringify(f)))}if(null!=a.file){var g=a.fileFormDataName||"file";if("[object Array]"===Object.prototype.toString.call(a.file))for(var h="[object String]"===Object.prototype.toString.call(g),i=0;i<a.file.length;i++)c.append(h?g:g[i],a.file[i],a.fileName&&a.fileName[i]||a.file[i].name);else c.append(g,a.file,a.fileName||a.file.name)}return c}),d(a)},this.http=function(a){return d(a)}}]),f.directive("ngFileSelect",["$parse","$timeout","$compile",function(a,c,d){return{restrict:"AEC",require:"?ngModel",link:function(e,f,g,h){b(e,f,g,h,a,c,d)}}}]),f.directive("ngFileDrop",["$parse","$timeout","$location",function(a,b,d){return{restrict:"AEC",require:"?ngModel",link:function(e,f,g,h){c(e,f,g,h,a,b,d)}}}]),f.directive("ngNoFileDrop",function(){return function(a,b){d()&&b.css("display","none")}}),f.directive("ngFileDropAvailable",["$parse","$timeout",function(a,b){return function(c,e,f){if(d()){var g=a(f.ngFileDropAvailable);b(function(){g(c)})}}}]);var g=angular.module("ngFileUpload",[]);for(var h in f)g[h]=f[h]}();
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/angularjs-file-upload/angular-file-upload.min.js","/resources/assets/vendor/angularjs-file-upload")

},{"_process":7,"buffer":3}],67:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
angular.module("ngFabForm",["ngMessages"]),angular.module("ngFabForm").directive("form",["ngFabFormDirective",function(a){"use strict";return a}]),angular.module("ngFabForm").directive("input",["ngFabFormValidationsDirective",function(a){"use strict";return a}]),angular.module("ngFabForm").directive("textarea",["ngFabFormValidationsDirective",function(a){"use strict";return a}]),angular.module("ngFabForm").directive("select",["ngFabFormValidationsDirective",function(a){"use strict";return a}]),angular.module("ngFabForm").provider("ngFabForm",function(){"use strict";function a(a,b){var d=angular.element(angular.element("<div/>").html(a));return angular.forEach(b,function(a,b){var e=new RegExp(c.validationMsgPrefix);if(b.match(e)){var f=b.replace(c.validationMsgPrefix,"");f=f.charAt(0).toLowerCase()+f.slice(1);var g=d[0].querySelector('[ng-message="'+f+'"]');angular.element(g).html(a)}}),d}var b,c={validationsTemplate:"default-validation-msgs.html",preventInvalidSubmit:!0,preventDoubleSubmit:!0,preventDoubleSubmitTimeoutLength:1e3,setFormDirtyOnSubmit:!0,scrollToAndFocusFirstErrorOnSubmit:!0,scrollAnimationTime:500,scrollOffset:-100,disabledForms:!0,globalFabFormDisable:!1,setNovalidate:!0,setNamesByNgModel:!0,setAsteriskForRequiredLabel:!1,asteriskStr:"*",validationMsgPrefix:"validationMsg",emailRegex:/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,watchForFormCtrl:!1,formChangeEvent:"NG_FAB_FORM_OPTIONS_CHANGED"},d=function(a,b,c){"checkbox"===c.type||"radio"===c.type?b.parent().after(a):b.after(a)},e=function(){function a(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}function b(a,b){var c=500,d=Math.abs(a),e=b/10;return b*d/c+e}return function(c,d,e){function f(){l+=m;var b=a(l,j,k,i);window.scrollTo(h,b),i>l?setTimeout(f,m):c.focus()}var g=c.getBoundingClientRect().top+parseInt(e),h=c.getBoundingClientRect().left,i=b(g,d),j=window.pageYOffset,k=g,l=0,m=20;return 0===k?void c.focus():void f()}}();return{extendConfig:function(a){c=angular.extend(c,a)},setInsertErrorTplFn:function(a){d=a},setScrollToFn:function(a){e=a},setCustomValidatorsFn:function(a){b=a},$get:function(){return{insertErrorTpl:d,addCustomValidations:a,customValidators:b,scrollTo:e,config:c}}}}),angular.module("ngFabForm").run(["$templateCache",function(a){"use strict";a.put("default-validation-msgs.html",'<div ng-messages="field.$error" class="validation" ng-show="attrs.required==\'\'|| attrs.required"><ul class="list-unstyled validation-errors" ng-show="field.$invalid && (field.$touched || field.$dirty || form.$triedSubmit)"><li ng-message="required">This field is required</li><li ng-message="ngFabEnsureExpression">Not valid condition</li><li ng-message="password">Please enter a valid password</li><li ng-message="email">Please enter a valid e-mail</li><li ng-message="pattern">Invalid input format</li><li ng-message="date">Please enter a valid date</li><li ng-message="time">Please enter a valid time</li><li ng-message="datetime">Please enter a valid date and time</li><li ng-message="datetime-local">Please enter a valid date and time</li><li ng-message="number">This field must be numeric</li><li ng-message="color">Please enter a valid color</li><li ng-message="range">Please enter a valid range</li><li ng-message="month">Please enter a valid month</li><li ng-message="url">Please enter a valid URL</li><li ng-message="file">Invalid file</li><li ng-message="minlength">Please use at least {{ attrs.minlength }} characters</li><li ng-message="maxlength">Please do not exceed {{ attrs.maxlength }} characters</li><li ng-message="ngFabMatch">The {{ attrs.type ===\'password\'? \'passwords\' : \'values\' }} should match</li><li ng-if="attrs.type == \'time\' " ng-message="min">The time provided should after {{ attrs.min |date: \'HH:MM\' }}</li><li ng-message="max" ng-if="attrs.type == \'time\' ">The time provided should be before {{attrs.max |date: \'HH:MM\'}}</li><li ng-message="min" ng-if="attrs.type == \'date\' ">The date provided should be after {{attrs.min |date:\'dd.MM.yy\'}}</li><li ng-message="max" ng-if="attrs.type == \'date\' ">The date provided should be before {{attrs.max |date: \'dd.MM.yy\'}}</li></ul><div class="validation-success" ng-show="field.$valid && !field.$invalid"></div></div>')}]),angular.module("ngFabForm").factory("ngFabFormValidationsDirective",["ngFabForm","$compile","$templateRequest","$rootScope","$timeout",function(a,b,c,d,e){"use strict";function f(e){var f=e.el,g=e.cfg,h=e.formCtrl,i=e.ngModelCtrl,j=e.attrs;e.currentValidationVars.tpl&&0!==Object.keys(e.currentValidationVars.tpl).length&&angular.element(e.currentValidationVars.tpl).remove(),c(g.validationsTemplate).then(function(c){var g=d.$new(!0);e.currentValidationVars.privateScope=g,c=a.addCustomValidations(c,j),g.attrs=j,g.form=h,g.field=i;var k=b(c.children())(g);e.currentValidationVars.tpl=k[0],a.insertErrorTpl(k[0],f,j)})}function g(a,b,c){var d=document.querySelectorAll('label[for="'+b.name+'"]');if(!d||d.length<1){var e=a[0].previousElementSibling;e&&"LABEL"===e.tagName&&(d=[e])}if(d&&d.length>0&&"radio"!==b.type&&"checkbox"!==b.type)for(var f=0;f<d.length;f++){var g=d[f];g.textContent.slice(-c.asteriskStr.length)!==c.asteriskStr&&(g.textContent=g.textContent+c.asteriskStr)}}return{restrict:"E",require:"?ngModel",compile:function(b,c){return!c.type||"submit"!==c.type.toLowerCase()&&"button"!==c.type.toLowerCase()?(a.config.setNamesByNgModel&&c.ngModel&&!c.name&&!a.config.globalFabFormDisable&&(b.attr("name",c.ngModel),c.name=c.ngModel),function(b,c,d,h){function i(a){!h||!k.validationsTemplate||0===Object.keys(h.$validators).length&&0===Object.keys(h.$asyncValidators).length||a&&k.validationsTemplate===a.validationsTemplate?!k.validationsTemplate&&o.tpl&&0!==Object.keys(o.tpl).length&&(o.privateScope.$destroy(),angular.element(o.tpl).remove()):f({el:c,cfg:k,formCtrl:l,ngModelCtrl:h,attrs:d,currentValidationVars:o}),!k.setAsteriskForRequiredLabel||d.required!==!0||a&&k.setAsteriskForRequiredLabel===a.setAsteriskForRequiredLabel&&k.asteriskStr===a.asteriskStr||g(c,d,k)}function j(){e(function(){if(l=c.controller("form"),l&&h){if(k||(k=l.ngFabFormConfig),!k)return;k.emailRegex&&"email"===d.type&&(h.$validators.email=function(a){return h.$isEmpty(a)||k.emailRegex.test(a)}),a.customValidators&&a.customValidators(h,d),i(),m=b.$on(a.formChangeEvent,function(a,b,c){k=b,i(c)})}},0)}var k,l,m,n,o={tpl:void 0,privateScope:void 0};a.config.watchForFormCtrl?n=b.$watch(function(){return c.controller("form")},function(a){a&&(n(),j())}):j(),b.$on("$destroy",function(){o&&o.privateScope&&o.privateScope.$destroy()})}):void 0}}}]),angular.module("ngFabForm").directive("ngFabEnsureExpression",["$http","$parse",function(a,b){"use strict";return{require:"ngModel",link:function(a,c,d,e){a.$watch(d.ngModel,function(){var c=b(d.ngFabEnsureExpression)(a);e.$setValidity("ngFabEnsureExpression",c),e.$validate()})}}}]),angular.module("ngFabForm").directive("ngFabMatch",function(){"use strict";return{require:"ngModel",restrict:"A",scope:{ngFabMatch:"="},link:function(a,b,c,d){d.$validators.ngFabMatch=function(b){return Boolean(b)&&b==a.ngFabMatch},a.$watch("ngFabMatch",function(){d.$validate()})}}}),angular.module("ngFabForm").directive("ngFabResetFormOn",function(){"use strict";return{require:"^form",restrict:"A",scope:{ngFabResetFormOn:"@",doNotClearInputs:"@"},link:function(a,b,c,d){c.ngFabResetFormOn||(c.ngFabResetFormOn="click"),b.on(c.ngFabResetFormOn,function(){c.doNotClearInputs?d.$resetForm():d.$resetForm(!0),a.$apply()})}}}),angular.module("ngFabForm").factory("ngFabFormDirective",["$compile","$timeout","ngFabForm",function(a,b,c){"use strict";function d(a){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation()}function e(a,b){if(b.disableForm){a.contents().wrap("<fieldset>");var c=a.children();b.$observe("disableForm",function(){"true"===b.disableForm||b.disableForm===!0?c.attr("disabled",!0):c.attr("disabled",!1)})}}function f(a,b,d,e){var f=a[0].querySelector(".ng-invalid");f&&b.$invalid&&c.scrollTo(f,parseInt(d),e)}return{restrict:"EAC",scope:!1,require:"form",compile:function(a,g){var h,i=angular.copy(c.config);if(i.globalFabFormDisable!==!0||!angular.isUndefined(g.ngFabForm))return!g.novalidate&&i.setNovalidate&&(a.attr("novalidate",!0),g.novalidate=!0),{pre:function(a,c,e,g){c.bind("submit",function(e){i.setFormDirtyOnSubmit&&a.$apply(function(){g.$triedSubmit=!0}),i.preventInvalidSubmit&&!g.$valid?d(e):i.preventDoubleSubmit&&(g.$preventDoubleSubmit&&d(e),h&&b.cancel(h),g.$preventDoubleSubmit=!0,h=b(function(){g.$preventDoubleSubmit=!1},i.preventDoubleSubmitTimeoutLength)),i.scrollToAndFocusFirstErrorOnSubmit&&f(c,g,i.scrollAnimationTime,i.scrollOffset)})},post:function(a,d,f,g){g.$triedSubmit=!1,g.$preventDoubleSubmit=!1,g.ngFabFormConfig=i,g.$resetForm=function(a){if(a===!0)for(var b=d.find("input"),c=0;c<b.length;c++){var e=angular.element(b[c]),f=e.controller("ngModel");f&&(f.$setViewValue(""),f.$render())}g.$triedSubmit=!1,g.$setPristine(),g.$setUntouched()},i.disabledForms&&e(d,f),f.ngFabFormOptions&&a.$watch(f.ngFabFormOptions,function(b){if(b){var d=angular.copy(i);i=g.ngFabFormConfig=angular.extend(i,b),a.$broadcast(c.formChangeEvent,i,d)}},!0),a.$on("$destroy",function(){h&&b.cancel(h)})}}}}}]),angular.module("ngFabForm").directive("ngForm",["ngFabFormDirective",function(a){"use strict";return a}]);
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/ng-fab-form/dist/ng-fab-form.min.js","/resources/assets/vendor/ng-fab-form/dist")

},{"_process":7,"buffer":3}],68:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
!function(a,b){b["true"]=a,/**
 * @license Rangy, a cross-browser JavaScript range and selection library
 * http://code.google.com/p/rangy/
 *
 * Copyright 2012, Tim Down
 * Licensed under the MIT license.
 * Version: 1.2.3
 * Build date: 26 February 2012
 */
window.rangy=function(){function a(a,b){var c=typeof a[b];return c==l||!(c!=k||!a[b])||"unknown"==c}function b(a,b){return!(typeof a[b]!=k||!a[b])}function c(a,b){return typeof a[b]!=m}function d(a){return function(b,c){for(var d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}function e(a){return a&&r(a,q)&&t(a,p)}function f(a){window.alert("Rangy not supported in your browser. Reason: "+a),u.initialized=!0,u.supported=!1}function g(a){var b="Rangy warning: "+a;u.config.alertOnWarn?window.alert(b):typeof window.console!=m&&typeof window.console.log!=m&&window.console.log(b)}function h(){if(!u.initialized){var c,d=!1,g=!1;a(document,"createRange")&&(c=document.createRange(),r(c,o)&&t(c,n)&&(d=!0),c.detach());var h=b(document,"body")?document.body:document.getElementsByTagName("body")[0];h&&a(h,"createTextRange")&&(c=h.createTextRange(),e(c)&&(g=!0)),d||g||f("Neither Range nor TextRange are implemented"),u.initialized=!0,u.features={implementsDomRange:d,implementsTextRange:g};for(var i=w.concat(v),j=0,k=i.length;k>j;++j)try{i[j](u)}catch(l){b(window,"console")&&a(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",l)}}}function i(a){a=a||window,h();for(var b=0,c=x.length;c>b;++b)x[b](a)}function j(a){this.name=a,this.initialized=!1,this.supported=!1}var k="object",l="function",m="undefined",n=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],o=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],p=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],q=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],r=d(a),s=d(b),t=d(c),u={version:"1.2.3",initialized:!1,supported:!0,util:{isHostMethod:a,isHostObject:b,isHostProperty:c,areHostMethods:r,areHostObjects:s,areHostProperties:t,isTextRange:e},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};u.fail=f,u.warn=g,{}.hasOwnProperty?u.util.extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}:f("hasOwnProperty not supported");var v=[],w=[];u.init=h,u.addInitListener=function(a){u.initialized?a(u):v.push(a)};var x=[];u.addCreateMissingNativeApiListener=function(a){x.push(a)},u.createMissingNativeApi=i,j.prototype.fail=function(a){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+a)},j.prototype.warn=function(a){u.warn("Module "+this.name+": "+a)},j.prototype.createError=function(a){return new Error("Error in Rangy "+this.name+" module: "+a)},u.createModule=function(a,b){var c=new j(a);u.modules[a]=c,w.push(function(a){b(a,c),c.initialized=!0,c.supported=!0})},u.requireModules=function(a){for(var b,c,d=0,e=a.length;e>d;++d){if(c=a[d],b=u.modules[c],!(b&&b instanceof j))throw new Error("Module '"+c+"' not found");if(!b.supported)throw new Error("Module '"+c+"' not supported")}};var y=!1,z=function(){y||(y=!0,u.initialized||h())};return typeof window==m?void f("No window found"):typeof document==m?void f("No document found"):(a(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",z,!1),a(window,"addEventListener")?window.addEventListener("load",z,!1):a(window,"attachEvent")?window.attachEvent("onload",z):f("Window does not have required addEventListener or attachEvent method"),u)}(),rangy.createModule("DomUtil",function(a,b){function c(a){var b;return typeof a.namespaceURI==z||null===(b=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==b}function d(a){var b=a.parentNode;return 1==b.nodeType?b:null}function e(a){for(var b=0;a=a.previousSibling;)b++;return b}function f(a){var b;return j(a)?a.length:(b=a.childNodes)?b.length:0}function g(a,b){var c,d=[];for(c=a;c;c=c.parentNode)d.push(c);for(c=b;c;c=c.parentNode)if(D(d,c))return c;return null}function h(a,b,c){for(var d=c?b:b.parentNode;d;){if(d===a)return!0;d=d.parentNode}return!1}function i(a,b,c){for(var d,e=c?a:a.parentNode;e;){if(d=e.parentNode,d===b)return e;e=d}return null}function j(a){var b=a.nodeType;return 3==b||4==b||8==b}function k(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a}function l(a,b){var c=a.cloneNode(!1);return c.deleteData(0,b),a.deleteData(b,a.length-b),k(c,a),c}function m(a){if(9==a.nodeType)return a;if(typeof a.ownerDocument!=z)return a.ownerDocument;if(typeof a.document!=z)return a.document;if(a.parentNode)return m(a.parentNode);throw new Error("getDocument: no document found for node")}function n(a){var b=m(a);if(typeof b.defaultView!=z)return b.defaultView;if(typeof b.parentWindow!=z)return b.parentWindow;throw new Error("Cannot get a window object for node")}function o(a){if(typeof a.contentDocument!=z)return a.contentDocument;if(typeof a.contentWindow!=z)return a.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function p(a){if(typeof a.contentWindow!=z)return a.contentWindow;if(typeof a.contentDocument!=z)return a.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function q(a){return A.isHostObject(a,"body")?a.body:a.getElementsByTagName("body")[0]}function r(a){for(var b;b=a.parentNode;)a=b;return a}function s(a,b,c,d){var f,h,j,k,l;if(a==c)return b===d?0:d>b?-1:1;if(f=i(c,a,!0))return b<=e(f)?-1:1;if(f=i(a,c,!0))return e(f)<d?-1:1;if(h=g(a,c),j=a===h?h:i(a,h,!0),k=c===h?h:i(c,h,!0),j===k)throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(l=h.firstChild;l;){if(l===j)return-1;if(l===k)return 1;l=l.nextSibling}throw new Error("Should not be here!")}function t(a){for(var b,c=m(a).createDocumentFragment();b=a.firstChild;)c.appendChild(b);return c}function u(a){if(!a)return"[No node]";if(j(a))return'"'+a.data+'"';if(1==a.nodeType){var b=a.id?' id="'+a.id+'"':"";return"<"+a.nodeName+b+">["+a.childNodes.length+"]"}return a.nodeName}function v(a){this.root=a,this._next=a}function w(a){return new v(a)}function x(a,b){this.node=a,this.offset=b}function y(a){this.code=this[a],this.codeName=a,this.message="DOMException: "+this.codeName}var z="undefined",A=a.util;A.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||b.fail("document missing a Node creation method"),A.isHostMethod(document,"getElementsByTagName")||b.fail("document missing getElementsByTagName method");var B=document.createElement("div");A.areHostMethods(B,["insertBefore","appendChild","cloneNode"]||!A.areHostObjects(B,["previousSibling","nextSibling","childNodes","parentNode"]))||b.fail("Incomplete Element implementation"),A.isHostProperty(B,"innerHTML")||b.fail("Element is missing innerHTML property");var C=document.createTextNode("test");A.areHostMethods(C,["splitText","deleteData","insertData","appendData","cloneNode"]||!A.areHostObjects(B,["previousSibling","nextSibling","childNodes","parentNode"])||!A.areHostProperties(C,["data"]))||b.fail("Incomplete Text Node implementation");var D=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1};v.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a,b,c=this._current=this._next;if(this._current)if(a=c.firstChild)this._next=a;else{for(b=null;c!==this.root&&!(b=c.nextSibling);)c=c.parentNode;this._next=b}return this._current},detach:function(){this._current=this._next=this.root=null}},x.prototype={equals:function(a){return this.node===a.node&this.offset==a.offset},inspect:function(){return"[DomPosition("+u(this.node)+":"+this.offset+")]"}},y.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},y.prototype.toString=function(){return this.message},a.dom={arrayContains:D,isHtmlNamespace:c,parentElement:d,getNodeIndex:e,getNodeLength:f,getCommonAncestor:g,isAncestorOf:h,getClosestAncestorIn:i,isCharacterDataNode:j,insertAfter:k,splitDataNode:l,getDocument:m,getWindow:n,getIframeWindow:p,getIframeDocument:o,getBody:q,getRootContainer:r,comparePoints:s,inspectNode:u,fragmentFromNodeChildren:t,createIterator:w,DomPosition:x},a.DOMException=y}),rangy.createModule("DomRange",function(a){function b(a,b){return 3!=a.nodeType&&(L.isAncestorOf(a,b.startContainer,!0)||L.isAncestorOf(a,b.endContainer,!0))}function c(a){return L.getDocument(a.startContainer)}function d(a,b,c){var d=a._listeners[b];if(d)for(var e=0,f=d.length;f>e;++e)d[e].call(a,{target:a,args:c})}function e(a){return new M(a.parentNode,L.getNodeIndex(a))}function f(a){return new M(a.parentNode,L.getNodeIndex(a)+1)}function g(a,b,c){var d=11==a.nodeType?a.firstChild:a;return L.isCharacterDataNode(b)?c==b.length?L.insertAfter(a,b):b.parentNode.insertBefore(a,0==c?b:L.splitDataNode(b,c)):c>=b.childNodes.length?b.appendChild(a):b.insertBefore(a,b.childNodes[c]),d}function h(a){for(var b,d,e,f=c(a.range).createDocumentFragment();d=a.next();){if(b=a.isPartiallySelectedSubtree(),d=d.cloneNode(!b),b&&(e=a.getSubtreeIterator(),d.appendChild(h(e)),e.detach(!0)),10==d.nodeType)throw new N("HIERARCHY_REQUEST_ERR");f.appendChild(d)}return f}function i(a,b,c){var d,e;c=c||{stop:!1};for(var f,g;f=a.next();)if(a.isPartiallySelectedSubtree()){if(b(f)===!1)return void(c.stop=!0);if(g=a.getSubtreeIterator(),i(g,b,c),g.detach(!0),c.stop)return}else for(d=L.createIterator(f);e=d.next();)if(b(e)===!1)return void(c.stop=!0)}function j(a){for(var b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),j(b),b.detach(!0)):a.remove()}function k(a){for(var b,d,e=c(a.range).createDocumentFragment();b=a.next();){if(a.isPartiallySelectedSubtree()?(b=b.cloneNode(!1),d=a.getSubtreeIterator(),b.appendChild(k(d)),d.detach(!0)):a.remove(),10==b.nodeType)throw new N("HIERARCHY_REQUEST_ERR");e.appendChild(b)}return e}function l(a,b,c){var d,e=!(!b||!b.length),f=!!c;e&&(d=new RegExp("^("+b.join("|")+")$"));var g=[];return i(new n(a,!1),function(a){e&&!d.test(a.nodeType)||f&&!c(a)||g.push(a)}),g}function m(a){var b="undefined"==typeof a.getName?"Range":a.getName();return"["+b+"("+L.inspectNode(a.startContainer)+":"+a.startOffset+", "+L.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function n(a,b){if(this.range=a,this.clonePartiallySelectedTextNodes=b,!a.collapsed){this.sc=a.startContainer,this.so=a.startOffset,this.ec=a.endContainer,this.eo=a.endOffset;var c=a.commonAncestorContainer;this.sc===this.ec&&L.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==c||L.isCharacterDataNode(this.sc)?L.getClosestAncestorIn(this.sc,c,!0):this.sc.childNodes[this.so],this._last=this.ec!==c||L.isCharacterDataNode(this.ec)?L.getClosestAncestorIn(this.ec,c,!0):this.ec.childNodes[this.eo-1])}}function o(a){this.code=this[a],this.codeName=a,this.message="RangeException: "+this.codeName}function p(a,b,c){this.nodes=l(a,b,c),this._next=this.nodes[0],this._position=0}function q(a){return function(b,c){for(var d,e=c?b:b.parentNode;e;){if(d=e.nodeType,L.arrayContains(a,d))return e;e=e.parentNode}return null}}function r(a,b){if(W(a,b))throw new o("INVALID_NODE_TYPE_ERR")}function s(a){if(!a.startContainer)throw new N("INVALID_STATE_ERR")}function t(a,b){if(!L.arrayContains(b,a.nodeType))throw new o("INVALID_NODE_TYPE_ERR")}function u(a,b){if(0>b||b>(L.isCharacterDataNode(a)?a.length:a.childNodes.length))throw new N("INDEX_SIZE_ERR")}function v(a,b){if(U(a,!0)!==U(b,!0))throw new N("WRONG_DOCUMENT_ERR")}function w(a){if(V(a,!0))throw new N("NO_MODIFICATION_ALLOWED_ERR")}function x(a,b){if(!a)throw new N(b)}function y(a){return!L.arrayContains(P,a.nodeType)&&!U(a,!0)}function z(a,b){return b<=(L.isCharacterDataNode(a)?a.length:a.childNodes.length)}function A(a){return!!a.startContainer&&!!a.endContainer&&!y(a.startContainer)&&!y(a.endContainer)&&z(a.startContainer,a.startOffset)&&z(a.endContainer,a.endOffset)}function B(a){if(s(a),!A(a))throw new Error("Range error: Range is no longer valid after DOM mutation ("+a.inspect()+")")}function C(){}function D(a){a.START_TO_START=ab,a.START_TO_END=bb,a.END_TO_END=cb,a.END_TO_START=db,a.NODE_BEFORE=eb,a.NODE_AFTER=fb,a.NODE_BEFORE_AND_AFTER=gb,a.NODE_INSIDE=hb}function E(a){D(a),D(a.prototype)}function F(a,b){return function(){B(this);var c,d,e=this.startContainer,g=this.startOffset,h=this.commonAncestorContainer,j=new n(this,!0);e!==h&&(c=L.getClosestAncestorIn(e,h,!0),d=f(c),e=d.node,g=d.offset),i(j,w),j.reset();var k=a(j);return j.detach(),b(this,e,g,e,g),k}}function G(c,d,g){function h(a,b){return function(c){s(this),t(c,O),t(T(c),P);var d=(a?e:f)(c);(b?i:l)(this,d.node,d.offset)}}function i(a,b,c){var e=a.endContainer,f=a.endOffset;(b!==a.startContainer||c!==a.startOffset)&&((T(b)!=T(e)||1==L.comparePoints(b,c,e,f))&&(e=b,f=c),d(a,b,c,e,f))}function l(a,b,c){var e=a.startContainer,f=a.startOffset;(b!==a.endContainer||c!==a.endOffset)&&((T(b)!=T(e)||-1==L.comparePoints(b,c,e,f))&&(e=b,f=c),d(a,e,f,b,c))}function m(a,b,c){(b!==a.startContainer||c!==a.startOffset||b!==a.endContainer||c!==a.endOffset)&&d(a,b,c,b,c)}c.prototype=new C,a.util.extend(c.prototype,{setStart:function(a,b){s(this),r(a,!0),u(a,b),i(this,a,b)},setEnd:function(a,b){s(this),r(a,!0),u(a,b),l(this,a,b)},setStartBefore:h(!0,!0),setStartAfter:h(!1,!0),setEndBefore:h(!0,!1),setEndAfter:h(!1,!1),collapse:function(a){B(this),a?d(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):d(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){s(this),r(a,!0),d(this,a,0,a,L.getNodeLength(a))},selectNode:function(a){s(this),r(a,!1),t(a,O);var b=e(a),c=f(a);d(this,b.node,b.offset,c.node,c.offset)},extractContents:F(k,d),deleteContents:F(j,d),canSurroundContents:function(){B(this),w(this.startContainer),w(this.endContainer);var a=new n(this,!0),c=a._first&&b(a._first,this)||a._last&&b(a._last,this);return a.detach(),!c},detach:function(){g(this)},splitBoundaries:function(){B(this);var a=this.startContainer,b=this.startOffset,c=this.endContainer,e=this.endOffset,f=a===c;L.isCharacterDataNode(c)&&e>0&&e<c.length&&L.splitDataNode(c,e),L.isCharacterDataNode(a)&&b>0&&b<a.length&&(a=L.splitDataNode(a,b),f?(e-=b,c=a):c==a.parentNode&&e>=L.getNodeIndex(a)&&e++,b=0),d(this,a,b,c,e)},normalizeBoundaries:function(){B(this);var a=this.startContainer,b=this.startOffset,c=this.endContainer,e=this.endOffset,f=function(a){var b=a.nextSibling;b&&b.nodeType==a.nodeType&&(c=a,e=a.length,a.appendData(b.data),b.parentNode.removeChild(b))},g=function(d){var f=d.previousSibling;if(f&&f.nodeType==d.nodeType){a=d;var g=d.length;if(b=f.length,d.insertData(0,f.data),f.parentNode.removeChild(f),a==c)e+=b,c=a;else if(c==d.parentNode){var h=L.getNodeIndex(d);e==h?(c=d,e=g):e>h&&e--}}},h=!0;if(L.isCharacterDataNode(c))c.length==e&&f(c);else{if(e>0){var i=c.childNodes[e-1];i&&L.isCharacterDataNode(i)&&f(i)}h=!this.collapsed}if(h){if(L.isCharacterDataNode(a))0==b&&g(a);else if(b<a.childNodes.length){var j=a.childNodes[b];j&&L.isCharacterDataNode(j)&&g(j)}}else a=c,b=e;d(this,a,b,c,e)},collapseToPoint:function(a,b){s(this),r(a,!0),u(a,b),m(this,a,b)}}),E(c)}function H(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a.commonAncestorContainer=a.collapsed?a.startContainer:L.getCommonAncestor(a.startContainer,a.endContainer)}function I(a,b,c,e,f){var g=a.startContainer!==b||a.startOffset!==c,h=a.endContainer!==e||a.endOffset!==f;a.startContainer=b,a.startOffset=c,a.endContainer=e,a.endOffset=f,H(a),d(a,"boundarychange",{startMoved:g,endMoved:h})}function J(a){s(a),a.startContainer=a.startOffset=a.endContainer=a.endOffset=null,a.collapsed=a.commonAncestorContainer=null,d(a,"detach",null),a._listeners=null}function K(a){this.startContainer=a,this.startOffset=0,this.endContainer=a,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},H(this)}a.requireModules(["DomUtil"]);var L=a.dom,M=L.DomPosition,N=a.DOMException;n.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;return a&&(this._next=a!==this._last?a.nextSibling:null,L.isCharacterDataNode(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so))),a},remove:function(){var a,b,c=this._current;!L.isCharacterDataNode(c)||c!==this.sc&&c!==this.ec?c.parentNode&&c.parentNode.removeChild(c):(a=c===this.sc?this.so:0,b=c===this.ec?this.eo:c.length,a!=b&&c.deleteData(a,b-a))},isPartiallySelectedSubtree:function(){var a=this._current;return b(a,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse();else{a=new K(c(this.range));var b=this._current,d=b,e=0,f=b,g=L.getNodeLength(b);L.isAncestorOf(b,this.sc,!0)&&(d=this.sc,e=this.so),L.isAncestorOf(b,this.ec,!0)&&(f=this.ec,g=this.eo),I(a,d,e,f,g)}return new n(a,this.clonePartiallySelectedTextNodes)},detach:function(a){a&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},o.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},o.prototype.toString=function(){return this.message},p.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var O=[1,3,4,5,7,8,10],P=[2,9,11],Q=[5,6,10,12],R=[1,3,4,5,7,8,10,11],S=[1,3,4,5,7,8],T=L.getRootContainer,U=q([9,11]),V=q(Q),W=q([6,10,12]),X=document.createElement("style"),Y=!1;try{X.innerHTML="<b>x</b>",Y=3==X.firstChild.nodeType}catch(Z){}a.features.htmlParsingConforms=Y;var $=Y?function(a){var b=this.startContainer,c=L.getDocument(b);if(!b)throw new N("INVALID_STATE_ERR");var d=null;return 1==b.nodeType?d=b:L.isCharacterDataNode(b)&&(d=L.parentElement(b)),d=null===d||"HTML"==d.nodeName&&L.isHtmlNamespace(L.getDocument(d).documentElement)&&L.isHtmlNamespace(d)?c.createElement("body"):d.cloneNode(!1),d.innerHTML=a,L.fragmentFromNodeChildren(d)}:function(a){s(this);var b=c(this),d=b.createElement("body");return d.innerHTML=a,L.fragmentFromNodeChildren(d)},_=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ab=0,bb=1,cb=2,db=3,eb=0,fb=1,gb=2,hb=3;C.prototype={attachListener:function(a,b){this._listeners[a].push(b)},compareBoundaryPoints:function(a,b){B(this),v(this.startContainer,b.startContainer);var c,d,e,f,g=a==db||a==ab?"start":"end",h=a==bb||a==ab?"start":"end";return c=this[g+"Container"],d=this[g+"Offset"],e=b[h+"Container"],f=b[h+"Offset"],L.comparePoints(c,d,e,f)},insertNode:function(a){if(B(this),t(a,R),w(this.startContainer),L.isAncestorOf(a,this.startContainer,!0))throw new N("HIERARCHY_REQUEST_ERR");var b=g(a,this.startContainer,this.startOffset);this.setStartBefore(b)},cloneContents:function(){B(this);var a,b;if(this.collapsed)return c(this).createDocumentFragment();if(this.startContainer===this.endContainer&&L.isCharacterDataNode(this.startContainer))return a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),b=c(this).createDocumentFragment(),b.appendChild(a),b;var d=new n(this,!0);return a=h(d),d.detach(),a},canSurroundContents:function(){B(this),w(this.startContainer),w(this.endContainer);var a=new n(this,!0),c=a._first&&b(a._first,this)||a._last&&b(a._last,this);return a.detach(),!c},surroundContents:function(a){if(t(a,S),!this.canSurroundContents())throw new o("BAD_BOUNDARYPOINTS_ERR");var b=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);g(a,this.startContainer,this.startOffset),a.appendChild(b),this.selectNode(a)},cloneRange:function(){B(this);for(var a,b=new K(c(this)),d=_.length;d--;)a=_[d],b[a]=this[a];return b},toString:function(){B(this);var a=this.startContainer;if(a===this.endContainer&&L.isCharacterDataNode(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[],c=new n(this,!0);return i(c,function(a){(3==a.nodeType||4==a.nodeType)&&b.push(a.data)}),c.detach(),b.join("")},compareNode:function(a){B(this);var b=a.parentNode,c=L.getNodeIndex(a);if(!b)throw new N("NOT_FOUND_ERR");var d=this.comparePoint(b,c),e=this.comparePoint(b,c+1);return 0>d?e>0?gb:eb:e>0?fb:hb},comparePoint:function(a,b){return B(this),x(a,"HIERARCHY_REQUEST_ERR"),v(a,this.startContainer),L.comparePoints(a,b,this.startContainer,this.startOffset)<0?-1:L.comparePoints(a,b,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:$,toHtml:function(){B(this);var a=c(this).createElement("div");return a.appendChild(this.cloneContents()),a.innerHTML},intersectsNode:function(a,b){if(B(this),x(a,"NOT_FOUND_ERR"),L.getDocument(a)!==c(this))return!1;var d=a.parentNode,e=L.getNodeIndex(a);x(d,"NOT_FOUND_ERR");var f=L.comparePoints(d,e,this.endContainer,this.endOffset),g=L.comparePoints(d,e+1,this.startContainer,this.startOffset);return b?0>=f&&g>=0:0>f&&g>0},isPointInRange:function(a,b){return B(this),x(a,"HIERARCHY_REQUEST_ERR"),v(a,this.startContainer),L.comparePoints(a,b,this.startContainer,this.startOffset)>=0&&L.comparePoints(a,b,this.endContainer,this.endOffset)<=0},intersectsRange:function(a,b){if(B(this),c(a)!=c(this))throw new N("WRONG_DOCUMENT_ERR");var d=L.comparePoints(this.startContainer,this.startOffset,a.endContainer,a.endOffset),e=L.comparePoints(this.endContainer,this.endOffset,a.startContainer,a.startOffset);return b?0>=d&&e>=0:0>d&&e>0},intersection:function(a){if(this.intersectsRange(a)){var b=L.comparePoints(this.startContainer,this.startOffset,a.startContainer,a.startOffset),c=L.comparePoints(this.endContainer,this.endOffset,a.endContainer,a.endOffset),d=this.cloneRange();return-1==b&&d.setStart(a.startContainer,a.startOffset),1==c&&d.setEnd(a.endContainer,a.endOffset),d}return null},union:function(a){if(this.intersectsRange(a,!0)){var b=this.cloneRange();return-1==L.comparePoints(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&b.setStart(a.startContainer,a.startOffset),1==L.comparePoints(a.endContainer,a.endOffset,this.endContainer,this.endOffset)&&b.setEnd(a.endContainer,a.endOffset),b}throw new o("Ranges do not intersect")},containsNode:function(a,b){return b?this.intersectsNode(a,!1):this.compareNode(a)==hb},containsNodeContents:function(a){return this.comparePoint(a,0)>=0&&this.comparePoint(a,L.getNodeLength(a))<=0},containsRange:function(a){return this.intersection(a).equals(a)},containsNodeText:function(a){var b=this.cloneRange();b.selectNode(a);var c=b.getNodes([3]);if(c.length>0){b.setStart(c[0],0);var d=c.pop();b.setEnd(d,d.length);var e=this.containsRange(b);return b.detach(),e}return this.containsNodeContents(a)},createNodeIterator:function(a,b){return B(this),new p(this,a,b)},getNodes:function(a,b){return B(this),l(this,a,b)},getDocument:function(){return c(this)},collapseBefore:function(a){s(this),this.setEndBefore(a),this.collapse(!1)},collapseAfter:function(a){s(this),this.setStartAfter(a),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(a){return K.rangesEqual(this,a)},isValid:function(){return A(this)},inspect:function(){return m(this)}},G(K,I,J),a.rangePrototype=C.prototype,K.rangeProperties=_,K.RangeIterator=n,K.copyComparisonConstants=E,K.createPrototypeRange=G,K.inspect=m,K.getRangeDocument=c,K.rangesEqual=function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset},a.DomRange=K,a.RangeException=o}),rangy.createModule("WrappedRange",function(a){function b(a){var b=a.parentElement(),c=a.duplicate();c.collapse(!0);var d=c.parentElement();c=a.duplicate(),c.collapse(!1);var e=c.parentElement(),f=d==e?d:g.getCommonAncestor(d,e);return f==b?f:g.getCommonAncestor(b,f)}function c(a){return 0==a.compareEndPoints("StartToEnd",a)}function d(a,b,c,d){var e=a.duplicate();e.collapse(c);var f=e.parentElement();if(g.isAncestorOf(b,f,!0)||(f=b),!f.canHaveHTML)return new h(f.parentNode,g.getNodeIndex(f));var i,j,k,l,m,n=g.getDocument(f).createElement("span"),o=c?"StartToStart":"StartToEnd";do f.insertBefore(n,n.previousSibling),e.moveToElementText(n);while((i=e.compareEndPoints(o,a))>0&&n.previousSibling);if(m=n.nextSibling,-1==i&&m&&g.isCharacterDataNode(m)){e.setEndPoint(c?"EndToStart":"EndToEnd",a);var p;if(/[\r\n]/.test(m.data)){var q=e.duplicate(),r=q.text.replace(/\r\n/g,"\r").length;for(p=q.moveStart("character",r);-1==(i=q.compareEndPoints("StartToEnd",q));)p++,q.moveStart("character",1)}else p=e.text.length;l=new h(m,p)}else j=(d||!c)&&n.previousSibling,k=(d||c)&&n.nextSibling,l=k&&g.isCharacterDataNode(k)?new h(k,0):j&&g.isCharacterDataNode(j)?new h(j,j.length):new h(f,g.getNodeIndex(n));return n.parentNode.removeChild(n),l}function e(a,b){var c,d,e,f,h=a.offset,i=g.getDocument(a.node),j=i.body.createTextRange(),k=g.isCharacterDataNode(a.node);return k?(c=a.node,d=c.parentNode):(f=a.node.childNodes,c=h<f.length?f[h]:null,d=a.node),e=i.createElement("span"),e.innerHTML="&#feff;",c?d.insertBefore(e,c):d.appendChild(e),j.moveToElementText(e),j.collapse(!b),d.removeChild(e),k&&j[b?"moveStart":"moveEnd"]("character",h),j}a.requireModules(["DomUtil","DomRange"]);var f,g=a.dom,h=g.DomPosition,i=a.DomRange;if(!a.features.implementsDomRange||a.features.implementsTextRange&&a.config.preferTextRange){if(a.features.implementsTextRange){f=function(a){this.textRange=a,this.refresh()},f.prototype=new i(document),f.prototype.refresh=function(){var a,e,f=b(this.textRange);c(this.textRange)?e=a=d(this.textRange,f,!0,!0):(a=d(this.textRange,f,!0,!1),e=d(this.textRange,f,!1,!1)),this.setStart(a.node,a.offset),this.setEnd(e.node,e.offset)},i.copyComparisonConstants(f);var j=function(){return this}();"undefined"==typeof j.Range&&(j.Range=f),a.createNativeRange=function(a){return a=a||document,a.body.createTextRange()}}}else!function(){function b(a){for(var b,c=k.length;c--;)b=k[c],a[b]=a.nativeRange[b]}function c(a,b,c,d,e){var f=a.startContainer!==b||a.startOffset!=c,g=a.endContainer!==d||a.endOffset!=e;(f||g)&&(a.setEnd(d,e),a.setStart(b,c))}function d(a){a.nativeRange.detach(),a.detached=!0;for(var b,c=k.length;c--;)b=k[c],a[b]=null}var e,h,j,k=i.rangeProperties;f=function(a){if(!a)throw new Error("Range must be specified");this.nativeRange=a,b(this)},i.createPrototypeRange(f,c,d),e=f.prototype,e.selectNode=function(a){this.nativeRange.selectNode(a),b(this)},e.deleteContents=function(){this.nativeRange.deleteContents(),b(this)},e.extractContents=function(){var a=this.nativeRange.extractContents();return b(this),a},e.cloneContents=function(){return this.nativeRange.cloneContents()},e.surroundContents=function(a){this.nativeRange.surroundContents(a),b(this)},e.collapse=function(a){this.nativeRange.collapse(a),b(this)},e.cloneRange=function(){return new f(this.nativeRange.cloneRange())},e.refresh=function(){b(this)},e.toString=function(){return this.nativeRange.toString()};var l=document.createTextNode("test");g.getBody(document).appendChild(l);var m=document.createRange();m.setStart(l,0),m.setEnd(l,0);try{m.setStart(l,1),h=!0,e.setStart=function(a,c){this.nativeRange.setStart(a,c),b(this)},e.setEnd=function(a,c){this.nativeRange.setEnd(a,c),b(this)},j=function(a){return function(c){this.nativeRange[a](c),b(this)}}}catch(n){h=!1,e.setStart=function(a,c){try{this.nativeRange.setStart(a,c)}catch(d){this.nativeRange.setEnd(a,c),this.nativeRange.setStart(a,c)}b(this)},e.setEnd=function(a,c){try{this.nativeRange.setEnd(a,c)}catch(d){this.nativeRange.setStart(a,c),this.nativeRange.setEnd(a,c)}b(this)},j=function(a,c){return function(d){try{this.nativeRange[a](d)}catch(e){this.nativeRange[c](d),this.nativeRange[a](d)}b(this)}}}e.setStartBefore=j("setStartBefore","setEndBefore"),e.setStartAfter=j("setStartAfter","setEndAfter"),e.setEndBefore=j("setEndBefore","setStartBefore"),e.setEndAfter=j("setEndAfter","setStartAfter"),m.selectNodeContents(l),e.selectNodeContents=m.startContainer==l&&m.endContainer==l&&0==m.startOffset&&m.endOffset==l.length?function(a){this.nativeRange.selectNodeContents(a),b(this)}:function(a){this.setStart(a,0),this.setEnd(a,i.getEndOffset(a))},m.selectNodeContents(l),m.setEnd(l,3);var o=document.createRange();o.selectNodeContents(l),o.setEnd(l,4),o.setStart(l,2),e.compareBoundaryPoints=-1==m.compareBoundaryPoints(m.START_TO_END,o)&1==m.compareBoundaryPoints(m.END_TO_START,o)?function(a,b){return b=b.nativeRange||b,a==b.START_TO_END?a=b.END_TO_START:a==b.END_TO_START&&(a=b.START_TO_END),this.nativeRange.compareBoundaryPoints(a,b)}:function(a,b){return this.nativeRange.compareBoundaryPoints(a,b.nativeRange||b)},a.util.isHostMethod(m,"createContextualFragment")&&(e.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)}),g.getBody(document).removeChild(l),m.detach(),o.detach()}(),a.createNativeRange=function(a){return a=a||document,a.createRange()};a.features.implementsTextRange&&(f.rangeToTextRange=function(a){if(a.collapsed){var b=e(new h(a.startContainer,a.startOffset),!0);return b}var c=e(new h(a.startContainer,a.startOffset),!0),d=e(new h(a.endContainer,a.endOffset),!1),f=g.getDocument(a.startContainer).body.createTextRange();return f.setEndPoint("StartToStart",c),f.setEndPoint("EndToEnd",d),f}),f.prototype.getName=function(){return"WrappedRange"},a.WrappedRange=f,a.createRange=function(b){return b=b||document,new f(a.createNativeRange(b))},a.createRangyRange=function(a){return a=a||document,new i(a)},a.createIframeRange=function(b){return a.createRange(g.getIframeDocument(b))},a.createIframeRangyRange=function(b){return a.createRangyRange(g.getIframeDocument(b))},a.addCreateMissingNativeApiListener(function(b){var c=b.document;"undefined"==typeof c.createRange&&(c.createRange=function(){return a.createRange(this)}),c=b=null})}),rangy.createModule("WrappedSelection",function(a,b){function c(a){return(a||window).getSelection()}function d(a){return(a||window).document.selection}function e(a,b,c){var d=c?"end":"start",e=c?"start":"end";a.anchorNode=b[d+"Container"],a.anchorOffset=b[d+"Offset"],a.focusNode=b[e+"Container"],a.focusOffset=b[e+"Offset"]}function f(a){var b=a.nativeSelection;a.anchorNode=b.anchorNode,a.anchorOffset=b.anchorOffset,a.focusNode=b.focusNode,a.focusOffset=b.focusOffset}function g(a){a.anchorNode=a.focusNode=null,a.anchorOffset=a.focusOffset=0,a.rangeCount=0,a.isCollapsed=!0,a._ranges.length=0}function h(b){var c;return b instanceof y?(c=b._selectionNativeRange,c||(c=a.createNativeRange(w.getDocument(b.startContainer)),c.setEnd(b.endContainer,b.endOffset),c.setStart(b.startContainer,b.startOffset),b._selectionNativeRange=c,b.attachListener("detach",function(){this._selectionNativeRange=null}))):b instanceof z?c=b.nativeRange:a.features.implementsDomRange&&b instanceof w.getWindow(b.startContainer).Range&&(c=b),c}function i(a){if(!a.length||1!=a[0].nodeType)return!1;for(var b=1,c=a.length;c>b;++b)if(!w.isAncestorOf(a[0],a[b]))return!1;return!0}function j(a){var b=a.getNodes();if(!i(b))throw new Error("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return b[0]}function k(a){return!!a&&"undefined"!=typeof a.text}function l(a,b){var c=new z(b);a._ranges=[c],e(a,c,!1),a.rangeCount=1,a.isCollapsed=c.collapsed}function m(b){if(b._ranges.length=0,"None"==b.docSelection.type)g(b);else{var c=b.docSelection.createRange();if(k(c))l(b,c);else{b.rangeCount=c.length;for(var d,f=w.getDocument(c.item(0)),h=0;h<b.rangeCount;++h)d=a.createRange(f),d.selectNode(c.item(h)),b._ranges.push(d);
b.isCollapsed=1==b.rangeCount&&b._ranges[0].collapsed,e(b,b._ranges[b.rangeCount-1],!1)}}}function n(a,b){for(var c=a.docSelection.createRange(),d=j(b),e=w.getDocument(c.item(0)),f=w.getBody(e).createControlRange(),g=0,h=c.length;h>g;++g)f.add(c.item(g));try{f.add(d)}catch(i){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}f.select(),m(a)}function o(a,b,c){this.nativeSelection=a,this.docSelection=b,this._ranges=[],this.win=c,this.refresh()}function p(a,b){for(var c,d=w.getDocument(b[0].startContainer),e=w.getBody(d).createControlRange(),f=0;f<rangeCount;++f){c=j(b[f]);try{e.add(c)}catch(g){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}e.select(),m(a)}function q(a,b){if(a.anchorNode&&w.getDocument(a.anchorNode)!==w.getDocument(b))throw new A("WRONG_DOCUMENT_ERR")}function r(a){var b=[],c=new B(a.anchorNode,a.anchorOffset),d=new B(a.focusNode,a.focusOffset),e="function"==typeof a.getName?a.getName():"Selection";if("undefined"!=typeof a.rangeCount)for(var f=0,g=a.rangeCount;g>f;++f)b[f]=y.inspect(a.getRangeAt(f));return"["+e+"(Ranges: "+b.join(", ")+")(anchor: "+c.inspect()+", focus: "+d.inspect()+"]"}a.requireModules(["DomUtil","DomRange","WrappedRange"]),a.config.checkSelectionRanges=!0;var s,t,u="boolean",v="_rangySelection",w=a.dom,x=a.util,y=a.DomRange,z=a.WrappedRange,A=a.DOMException,B=w.DomPosition,C="Control",D=a.util.isHostMethod(window,"getSelection"),E=a.util.isHostObject(document,"selection"),F=E&&(!D||a.config.preferTextRange);F?(s=d,a.isSelectionValid=function(a){var b=(a||window).document,c=b.selection;return"None"!=c.type||w.getDocument(c.createRange().parentElement())==b}):D?(s=c,a.isSelectionValid=function(){return!0}):b.fail("Neither document.selection or window.getSelection() detected."),a.getNativeSelection=s;var G=s(),H=a.createNativeRange(document),I=w.getBody(document),J=x.areHostObjects(G,["anchorNode","focusNode"]&&x.areHostProperties(G,["anchorOffset","focusOffset"]));a.features.selectionHasAnchorAndFocus=J;var K=x.isHostMethod(G,"extend");a.features.selectionHasExtend=K;var L="number"==typeof G.rangeCount;a.features.selectionHasRangeCount=L;var M=!1,N=!0;x.areHostMethods(G,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof G.rangeCount&&a.features.implementsDomRange&&!function(){var a=document.createElement("iframe");a.frameBorder=0,a.style.position="absolute",a.style.left="-10000px",I.appendChild(a);var b=w.getIframeDocument(a);b.open(),b.write("<html><head></head><body>12</body></html>"),b.close();var c=w.getIframeWindow(a).getSelection(),d=b.documentElement,e=d.lastChild,f=e.firstChild,g=b.createRange();g.setStart(f,1),g.collapse(!0),c.addRange(g),N=1==c.rangeCount,c.removeAllRanges();var h=g.cloneRange();g.setStart(f,0),h.setEnd(f,2),c.addRange(g),c.addRange(h),M=2==c.rangeCount,g.detach(),h.detach(),I.removeChild(a)}(),a.features.selectionSupportsMultipleRanges=M,a.features.collapsedNonEditableSelectionsSupported=N;var O,P=!1;I&&x.isHostMethod(I,"createControlRange")&&(O=I.createControlRange(),x.areHostProperties(O,["item","add"])&&(P=!0)),a.features.implementsControlRange=P,t=J?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:!1};var Q;x.isHostMethod(G,"getRangeAt")?Q=function(a,b){try{return a.getRangeAt(b)}catch(c){return null}}:J&&(Q=function(b){var c=w.getDocument(b.anchorNode),d=a.createRange(c);return d.setStart(b.anchorNode,b.anchorOffset),d.setEnd(b.focusNode,b.focusOffset),d.collapsed!==this.isCollapsed&&(d.setStart(b.focusNode,b.focusOffset),d.setEnd(b.anchorNode,b.anchorOffset)),d}),a.getSelection=function(a){a=a||window;var b=a[v],c=s(a),e=E?d(a):null;return b?(b.nativeSelection=c,b.docSelection=e,b.refresh(a)):(b=new o(c,e,a),a[v]=b),b},a.getIframeSelection=function(b){return a.getSelection(w.getIframeWindow(b))};var R=o.prototype;if(!F&&J&&x.areHostMethods(G,["removeAllRanges","addRange"])){R.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),g(this)};var S=function(b,c){var d=y.getRangeDocument(c),e=a.createRange(d);e.collapseToPoint(c.endContainer,c.endOffset),b.nativeSelection.addRange(h(e)),b.nativeSelection.extend(c.startContainer,c.startOffset),b.refresh()};R.addRange=L?function(b,c){if(P&&E&&this.docSelection.type==C)n(this,b);else if(c&&K)S(this,b);else{var d;if(M?d=this.rangeCount:(this.removeAllRanges(),d=0),this.nativeSelection.addRange(h(b)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==d+1){if(a.config.checkSelectionRanges){var f=Q(this.nativeSelection,this.rangeCount-1);f&&!y.rangesEqual(f,b)&&(b=new z(f))}this._ranges[this.rangeCount-1]=b,e(this,b,V(this.nativeSelection)),this.isCollapsed=t(this)}else this.refresh()}}:function(a,b){b&&K?S(this,a):(this.nativeSelection.addRange(h(a)),this.refresh())},R.setRanges=function(a){if(P&&a.length>1)p(this,a);else{this.removeAllRanges();for(var b=0,c=a.length;c>b;++b)this.addRange(a[b])}}}else{if(!(x.isHostMethod(G,"empty")&&x.isHostMethod(H,"select")&&P&&F))return b.fail("No means of selecting a Range or TextRange was found"),!1;R.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var a;if(this.anchorNode)a=w.getDocument(this.anchorNode);else if(this.docSelection.type==C){var b=this.docSelection.createRange();b.length&&(a=w.getDocument(b.item(0)).body.createTextRange())}if(a){var c=a.body.createTextRange();c.select(),this.docSelection.empty()}}}catch(d){}g(this)},R.addRange=function(a){this.docSelection.type==C?n(this,a):(z.rangeToTextRange(a).select(),this._ranges[0]=a,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,e(this,a,!1))},R.setRanges=function(a){this.removeAllRanges();var b=a.length;b>1?p(this,a):b&&this.addRange(a[0])}}R.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new A("INDEX_SIZE_ERR");return this._ranges[a]};var T;if(F)T=function(b){var c;a.isSelectionValid(b.win)?c=b.docSelection.createRange():(c=w.getBody(b.win.document).createTextRange(),c.collapse(!0)),b.docSelection.type==C?m(b):k(c)?l(b,c):g(b)};else if(x.isHostMethod(G,"getRangeAt")&&"number"==typeof G.rangeCount)T=function(b){if(P&&E&&b.docSelection.type==C)m(b);else if(b._ranges.length=b.rangeCount=b.nativeSelection.rangeCount,b.rangeCount){for(var c=0,d=b.rangeCount;d>c;++c)b._ranges[c]=new a.WrappedRange(b.nativeSelection.getRangeAt(c));e(b,b._ranges[b.rangeCount-1],V(b.nativeSelection)),b.isCollapsed=t(b)}else g(b)};else{if(!J||typeof G.isCollapsed!=u||typeof H.collapsed!=u||!a.features.implementsDomRange)return b.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;T=function(a){var b,c=a.nativeSelection;c.anchorNode?(b=Q(c,0),a._ranges=[b],a.rangeCount=1,f(a),a.isCollapsed=t(a)):g(a)}}R.refresh=function(a){var b=a?this._ranges.slice(0):null;if(T(this),a){var c=b.length;if(c!=this._ranges.length)return!1;for(;c--;)if(!y.rangesEqual(b[c],this._ranges[c]))return!1;return!0}};var U=function(a,b){var c=a.getAllRanges(),d=!1;a.removeAllRanges();for(var e=0,f=c.length;f>e;++e)d||b!==c[e]?a.addRange(c[e]):d=!0;a.rangeCount||g(a)};R.removeRange=P?function(a){if(this.docSelection.type==C){for(var b,c=this.docSelection.createRange(),d=j(a),e=w.getDocument(c.item(0)),f=w.getBody(e).createControlRange(),g=!1,h=0,i=c.length;i>h;++h)b=c.item(h),b!==d||g?f.add(c.item(h)):g=!0;f.select(),m(this)}else U(this,a)}:function(a){U(this,a)};var V;!F&&J&&a.features.implementsDomRange?(V=function(a){var b=!1;return a.anchorNode&&(b=1==w.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)),b},R.isBackwards=function(){return V(this)}):V=R.isBackwards=function(){return!1},R.toString=function(){for(var a=[],b=0,c=this.rangeCount;c>b;++b)a[b]=""+this._ranges[b];return a.join("")},R.collapse=function(b,c){q(this,b);var d=a.createRange(w.getDocument(b));d.collapseToPoint(b,c),this.removeAllRanges(),this.addRange(d),this.isCollapsed=!0},R.collapseToStart=function(){if(!this.rangeCount)throw new A("INVALID_STATE_ERR");var a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)},R.collapseToEnd=function(){if(!this.rangeCount)throw new A("INVALID_STATE_ERR");var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)},R.selectAllChildren=function(b){q(this,b);var c=a.createRange(w.getDocument(b));c.selectNodeContents(b),this.removeAllRanges(),this.addRange(c)},R.deleteFromDocument=function(){if(P&&E&&this.docSelection.type==C){for(var a,b=this.docSelection.createRange();b.length;)a=b.item(0),b.remove(a),a.parentNode.removeChild(a);this.refresh()}else if(this.rangeCount){var c=this.getAllRanges();this.removeAllRanges();for(var d=0,e=c.length;e>d;++d)c[d].deleteContents();this.addRange(c[e-1])}},R.getAllRanges=function(){return this._ranges.slice(0)},R.setSingleRange=function(a){this.setRanges([a])},R.containsNode=function(a,b){for(var c=0,d=this._ranges.length;d>c;++c)if(this._ranges[c].containsNode(a,b))return!0;return!1},R.toHtml=function(){var a="";if(this.rangeCount){for(var b=y.getRangeDocument(this._ranges[0]).createElement("div"),c=0,d=this._ranges.length;d>c;++c)b.appendChild(this._ranges[c].cloneContents());a=b.innerHTML}return a},R.getName=function(){return"WrappedSelection"},R.inspect=function(){return r(this)},R.detach=function(){this.win[v]=null,this.win=this.anchorNode=this.focusNode=null},o.inspect=r,a.Selection=o,a.selectionPrototype=R,a.addCreateMissingNativeApiListener(function(b){"undefined"==typeof b.getSelection&&(b.getSelection=function(){return a.getSelection(this)}),b=null})}),/**
 * @license Selection save and restore module for Rangy.
 * Saves and restores user selections using marker invisible elements in the DOM.
 *
 * Part of Rangy, a cross-browser JavaScript range and selection library
 * http://code.google.com/p/rangy/
 *
 * Depends on Rangy core.
 *
 * Copyright 2012, Tim Down
 * Licensed under the MIT license.
 * Version: 1.2.3
 * Build date: 26 February 2012
 */
rangy.createModule("SaveRestore",function(a,b){function c(a,b){return(b||document).getElementById(a)}function d(a,b){var c,d="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),e=k.getDocument(a.startContainer),f=a.cloneRange();return f.collapse(b),c=e.createElement("span"),c.id=d,c.style.lineHeight="0",c.style.display="none",c.className="rangySelectionBoundary",c.appendChild(e.createTextNode(l)),f.insertNode(c),f.detach(),c}function e(a,d,e,f){var g=c(e,a);g?(d[f?"setStartBefore":"setEndBefore"](g),g.parentNode.removeChild(g)):b.warn("Marker element has been removed. Cannot restore selection.")}function f(a,b){return b.compareBoundaryPoints(a.START_TO_START,a)}function g(e){e=e||window;var g=e.document;if(!a.isSelectionValid(e))return void b.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus.");var h,i,j,k=a.getSelection(e),l=k.getAllRanges(),m=[];l.sort(f);for(var n=0,o=l.length;o>n;++n)j=l[n],j.collapsed?(i=d(j,!1),m.push({markerId:i.id,collapsed:!0})):(i=d(j,!1),h=d(j,!0),m[n]={startMarkerId:h.id,endMarkerId:i.id,collapsed:!1,backwards:1==l.length&&k.isBackwards()});for(n=o-1;n>=0;--n)j=l[n],j.collapsed?j.collapseBefore(c(m[n].markerId,g)):(j.setEndBefore(c(m[n].endMarkerId,g)),j.setStartAfter(c(m[n].startMarkerId,g)));return k.setRanges(l),{win:e,doc:g,rangeInfos:m,restored:!1}}function h(d,f){if(!d.restored){for(var g,h,i=d.rangeInfos,j=a.getSelection(d.win),k=[],l=i.length,m=l-1;m>=0;--m){if(g=i[m],h=a.createRange(d.doc),g.collapsed){var n=c(g.markerId,d.doc);if(n){n.style.display="inline";var o=n.previousSibling;o&&3==o.nodeType?(n.parentNode.removeChild(n),h.collapseToPoint(o,o.length)):(h.collapseBefore(n),n.parentNode.removeChild(n))}else b.warn("Marker element has been removed. Cannot restore selection.")}else e(d.doc,h,g.startMarkerId,!0),e(d.doc,h,g.endMarkerId,!1);1==l&&h.normalizeBoundaries(),k[m]=h}1==l&&f&&a.features.selectionHasExtend&&i[0].backwards?(j.removeAllRanges(),j.addRange(k[0],!0)):j.setRanges(k),d.restored=!0}}function i(a,b){var d=c(b,a);d&&d.parentNode.removeChild(d)}function j(a){for(var b,c=a.rangeInfos,d=0,e=c.length;e>d;++d)b=c[d],b.collapsed?i(a.doc,b.markerId):(i(a.doc,b.startMarkerId),i(a.doc,b.endMarkerId))}a.requireModules(["DomUtil","DomRange","WrappedRange"]);var k=a.dom,l="﻿";a.saveSelection=g,a.restoreSelection=h,a.removeMarkerElement=i,a.removeMarkers=j})}({},function(){return this}());
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/textAngular/dist/textAngular-rangy.min.js","/resources/assets/vendor/textAngular/dist")

},{"_process":7,"buffer":3}],69:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
!function(a,b){b["true"]=a,/**
 * @license AngularJS v1.3.10
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(a,b){"use strict";function c(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return f(b,k(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}function d(a){var c=[],d=k(c,b.noop);return d.chars(a),c.join("")}function e(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function f(a,c){function d(a,d,f,h){if(d=b.lowercase(d),A[d])for(;k.last()&&B[k.last()];)e("",k.last());z[d]&&k.last()==d&&e("",d),h=w[d]||!!h,h||k.push(d);var i={};f.replace(o,function(a,b,c,d,e){var f=c||d||e||"";i[b]=g(f)}),c.start&&c.start(d,i,h)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=k.length-1;f>=0&&k[f]!=d;f--);if(f>=0){for(e=k.length-1;e>=f;e--)c.end&&c.end(k[e]);k.length=f}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var f,h,i,j,k=[],u=a;for(k.last=function(){return k[k.length-1]};a;){if(j="",h=!0,k.last()&&D[k.last()]?(a=a.replace(new RegExp("([^]*)<\\s*\\/\\s*"+k.last()+"[^>]*>","i"),function(a,b){return b=b.replace(r,"$1").replace(t,"$1"),c.chars&&c.chars(g(b)),""}),e("",k.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),h=!1)):s.test(a)?(i=a.match(s),i&&(a=a.replace(i[0],""),h=!1)):q.test(a)?(i=a.match(n),i&&(a=a.substring(i[0].length),i[0].replace(n,e),h=!1)):p.test(a)&&(i=a.match(m),i?(i[4]&&(a=a.substring(i[0].length),i[0].replace(m,d)),h=!1):(j+="<",a=a.substring(1))),h&&(f=a.indexOf("<"),j+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(g(j)))),a==u)throw l("badparse","The sanitizer was unable to parse the following block of html: {0}",a);u=a}e()}function g(a){if(!a)return"";var b=K.exec(a),c=b[1],d=b[3],e=b[2];return e&&(J.innerHTML=e.replace(/</g,"&lt;"),e="textContent"in J?J.textContent:J.innerText),c+e+d}function h(a){return a.replace(/&/g,"&amp;").replace(u,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(v,function(a){var b=a.charCodeAt(0);return 159>=b||173==b||b>=1536&&1540>=b||1807==b||6068==b||6069==b||b>=8204&&8207>=b||b>=8232&&8239>=b||b>=8288&&8303>=b||65279==b||b>=65520&&65535>=b?"&#"+b+";":a}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(a){var c="",d=a.split(";");return b.forEach(d,function(a){var d=a.split(":");if(2==d.length){var e=L(b.lowercase(d[0])),a=L(b.lowercase(d[1]));(("color"===e||"background-color"===e)&&(a.match(/^rgb\([0-9%,\. ]*\)$/i)||a.match(/^rgba\([0-9%,\. ]*\)$/i)||a.match(/^hsl\([0-9%,\. ]*\)$/i)||a.match(/^hsla\([0-9%,\. ]*\)$/i)||a.match(/^#[0-9a-f]{3,6}$/i)||a.match(/^[a-z]*$/i))||"text-align"===e&&("left"===a||"right"===a||"center"===a||"justify"===a)||"float"===e&&("left"===a||"right"===a||"none"===a)||("width"===e||"height"===e)&&a.match(/[0-9\.]*(px|em|rem|%)/)||"direction"===e&&a.match(/^ltr|rtl|initial|inherit$/))&&(c+=e+": "+a+";")}}),c}function j(a,b,c,d){return"img"===a&&b["ta-insert-video"]&&("ta-insert-video"===c||"allowfullscreen"===c||"frameborder"===c||"contenteditable"===c&&"false"===d)?!0:!1}function k(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&D[a]&&(d=a),d||E[a]!==!0||(e("<"),e(a),b.forEach(f,function(d,g){var k=b.lowercase(g),l="img"===a&&"src"===k||"background"===k;("style"===k&&""!==(d=i(d))||j(a,f,k,d)||I[k]===!0&&(F[k]!==!0||c(d,l)))&&(e(" "),e(g),e('="'),e(h(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||E[a]!==!0||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(h(a))}}}var l=b.$$minErr("$sanitize"),m=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,n=/^<\/\s*([\w:-]+)[^>]*>/,o=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,p=/^</,q=/^<\//,r=/<!--(.*?)-->/g,s=/<!DOCTYPE([^>]*?)>/i,t=/<!\[CDATA\[(.*?)]]>/g,u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,v=/([^\#-~| |!])/g,w=e("area,br,col,hr,img,wbr"),x=e("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),y=e("rp,rt"),z=b.extend({},y,x),A=b.extend({},x,e("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),B=b.extend({},y,e("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),C=e("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),D=e("script,style"),E=b.extend({},w,A,B,z,C),F=e("background,cite,href,longdesc,src,usemap,xlink:href"),G=e("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),H=e("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),I=b.extend({},F,H,G),J=document.createElement("pre"),K=/^(\s*)([\s\S]*?)(\s*)$/,L=function(){return String.prototype.trim?function(a){return b.isString(a)?a.trim():a}:function(a){return b.isString(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}();b.module("ngSanitize",[]).provider("$sanitize",c),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/,e=/^mailto:/;return function(f,g){function h(a){a&&n.push(d(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&n.push('target="',g,'" '),n.push('href="',a.replace(/"/g,"&quot;"),'">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]||j[4]||(k=(j[3]?"http://":"mailto:")+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(e,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular)}({},function(){return this}());
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/textAngular/dist/textAngular-sanitize.min.js","/resources/assets/vendor/textAngular/dist")

},{"_process":7,"buffer":3}],70:[function(require,module,exports){
(function (process,global,Buffer,__argument0,__argument1,__argument2,__argument3,__filename,__dirname){
!function(a,b){b["true"]=a,/*
@license textAngular
Author : Austin Anderson
License : 2013 MIT
Version 1.3.7

See README.md or https://github.com/fraywing/textAngular/wiki for requirements and use.
*/
angular.module("textAngularSetup",[]).value("taOptions",{toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},setup:{textEditorSetup:function(){},htmlEditorSetup:function(){}},defaultFileDropHandler:function(a,b){var c=new FileReader;return"image"===a.type.substring(0,5)?(c.onload=function(){""!==c.result&&b("insertImage",c.result,!0)},c.readAsDataURL(a),!0):!1}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(a){var b=angular.element("<iframe></iframe>"),c=a.prop("attributes");angular.forEach(c,function(a){b.attr(a.name,a.value)}),b.attr("src",b.attr("ta-insert-video")),a.replaceWith(b)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unqoute selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).run(["taRegisterTool","$window","taTranslations","taSelection",function(a,b,c,d){a("html",{iconclass:"fa fa-code",tooltiptext:c.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var e=function(a){return function(){return this.$editor().queryFormatBlockState(a)}},f=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(b){a(b.toLowerCase(),{buttontext:b.toUpperCase(),tooltiptext:c.heading.tooltip+b.charAt(1),action:f,activeState:e(b.toLowerCase())})}),a("p",{buttontext:"P",tooltiptext:c.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),a("pre",{buttontext:"pre",tooltiptext:c.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),a("ul",{iconclass:"fa fa-list-ul",tooltiptext:c.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),a("ol",{iconclass:"fa fa-list-ol",tooltiptext:c.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),a("quote",{iconclass:"fa fa-quote-right",tooltiptext:c.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),a("undo",{iconclass:"fa fa-undo",tooltiptext:c.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),a("redo",{iconclass:"fa fa-repeat",tooltiptext:c.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),a("bold",{iconclass:"fa fa-bold",tooltiptext:c.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),a("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:c.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(a){var b=!1;return a&&(b="left"===a.css("text-align")||"left"===a.attr("align")||"right"!==a.css("text-align")&&"center"!==a.css("text-align")&&"justify"!==a.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")),b=b||this.$editor().queryCommandState("justifyLeft")}}),a("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:c.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(a){var b=!1;return a&&(b="right"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyRight")}}),a("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:c.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(a){var b=!1;return a&&(b="center"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyCenter")}}),a("indent",{iconclass:"fa fa-indent",tooltiptext:c.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),a("outdent",{iconclass:"fa fa-outdent",tooltiptext:c.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1}}),a("italics",{iconclass:"fa fa-italic",tooltiptext:c.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),a("underline",{iconclass:"fa fa-underline",tooltiptext:c.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),a("strikeThrough",{iconclass:"fa fa-strikethrough",action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),a("clear",{iconclass:"fa fa-ban",tooltiptext:c.clear.tooltip,action:function(a,b){var c;this.$editor().wrapSelection("removeFormat",null);var e=angular.element(d.getSelectionElement()),f=function(a){a=angular.element(a);var b=a;angular.forEach(a.children(),function(a){var c=angular.element("<p></p>");c.html(angular.element(a).html()),b.after(c),b=c}),a.remove()};if(angular.forEach(e.find("ul"),f),angular.forEach(e.find("ol"),f),"li"===e[0].tagName.toLowerCase()){var g=e[0].parentNode.childNodes,h=[],i=[],j=!1;for(c=0;c<g.length;c++)g[c]===e[0]?j=!0:j?i.push(g[c]):h.push(g[c]);var k=angular.element(e[0].parentNode),l=angular.element("<p></p>");if(l.html(angular.element(e[0]).html()),0===h.length||0===i.length)0===i.length?k.after(l):k[0].parentNode.insertBefore(l[0],k[0]),0===h.length&&0===i.length?k.remove():angular.element(e[0]).remove();else{var m=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">"),n=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">");for(c=0;c<h.length;c++)m.append(angular.element(h[c]));for(c=0;c<i.length;c++)n.append(angular.element(i[c]));k.after(n),k.after(l),k.after(m),k.remove()}d.setSelectionToElementEnd(l[0])}var o=this.$editor(),p=function(a){a=angular.element(a),a[0]!==o.displayElements.text[0]&&a.removeAttr("class"),angular.forEach(a.children(),p)};angular.forEach(e,p),"li"!==e[0].tagName.toLowerCase()&&"ol"!==e[0].tagName.toLowerCase()&&"ul"!==e[0].tagName.toLowerCase()&&this.$editor().wrapSelection("formatBlock","default"),b()}});var g=function(a,b,c){var d=function(){c.updateTaBindtaTextElement(),c.hidePopover()};a.preventDefault(),c.displayElements.popover.css("width","375px");var e=c.displayElements.popoverContainer;e.empty();var f=angular.element('<div class="btn-group" style="padding-right: 6px;">'),g=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');g.on("click",function(a){a.preventDefault(),b.css({width:"100%",height:""}),d()});var h=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');h.on("click",function(a){a.preventDefault(),b.css({width:"50%",height:""}),d()});var i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');i.on("click",function(a){a.preventDefault(),b.css({width:"25%",height:""}),d()});var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');j.on("click",function(a){a.preventDefault(),b.css({width:"",height:""}),d()}),f.append(g),f.append(h),f.append(i),f.append(j),e.append(f),f=angular.element('<div class="btn-group" style="padding-right: 6px;">');var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');k.on("click",function(a){a.preventDefault(),b.css("float","left"),b.css("cssFloat","left"),b.css("styleFloat","left"),d()});var l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');l.on("click",function(a){a.preventDefault(),b.css("float","right"),b.css("cssFloat","right"),b.css("styleFloat","right"),d()});var m=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');m.on("click",function(a){a.preventDefault(),b.css("float",""),b.css("cssFloat",""),b.css("styleFloat",""),d()}),f.append(k),f.append(m),f.append(l),e.append(f),f=angular.element('<div class="btn-group">');var n=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');n.on("click",function(a){a.preventDefault(),b.remove(),d()}),f.append(n),e.append(f),c.showPopover(b),c.showResizeOverlay(b)};a("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:c.insertImage.tooltip,action:function(){var a;return a=b.prompt(c.insertImage.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("insertImage",a,!0):void 0},onElementSelect:{element:"img",action:g}}),a("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:c.insertVideo.tooltip,action:function(){var a;if(a=b.prompt(c.insertVideo.dialogPrompt,"https://"),a&&""!==a&&"https://"!==a){var d=a.match(/(\?|&)v=[^&]*/);if(d&&d.length>0){var e="https://www.youtube.com/embed/"+d[0].substring(3),f='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+d[0].substring(3)+'/hqdefault.jpg" ta-insert-video="'+e+'" contenteditable="false" src="" allowfullscreen="true" frameborder="0" />';return this.$editor().wrapSelection("insertHTML",f,!0)}}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:g}}),a("insertLink",{tooltiptext:c.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var a;return a=b.prompt(c.insertLink.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("createLink",a,!0):void 0},activeState:function(a){return a?"A"===a[0].tagName:!1},onElementSelect:{element:"a",action:function(a,d,e){a.preventDefault(),e.displayElements.popover.css("width","435px");var f=e.displayElements.popoverContainer;f.empty(),f.css("line-height","28px");var g=angular.element('<a href="'+d.attr("href")+'" target="_blank">'+d.attr("href")+"</a>");g.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),f.append(g);var h=angular.element('<div class="btn-group pull-right">'),i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+c.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>');i.on("click",function(a){a.preventDefault();var f=b.prompt(c.insertLink.dialogPrompt,d.attr("href"));f&&""!==f&&"http://"!==f&&(d.attr("href",f),e.updateTaBindtaTextElement()),e.hidePopover()}),h.append(i);var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+c.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>');j.on("click",function(a){a.preventDefault(),d.replaceWith(d.contents()),e.updateTaBindtaTextElement(),e.hidePopover()}),h.append(j);var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+c.editLink.targetToggle.buttontext+"</button>");"_blank"===d.attr("target")&&k.addClass("active"),k.on("click",function(a){a.preventDefault(),d.attr("target","_blank"===d.attr("target")?"":"_blank"),k.toggleClass("active"),e.updateTaBindtaTextElement()}),h.append(k),f.append(h),e.showPopover(d)}}}),a("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words:{{wordcount}}</div>',disabled:!0,wordcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerHTML,c=b.replace(/(<[^>]*?>)/gi," "),d=c.match(/\S+/g),e=d&&d.length||0;return this.wordcount=e,this.$editor().wordcount=e,!1}}),a("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters:{{charcount}}</div>',disabled:!0,charcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerText||a[0].textContent,c=b.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=c,this.$editor().charcount=c,!1}})}]),/*
@license textAngular
Author : Austin Anderson
License : 2013 MIT
Version 1.3.7

See README.md or https://github.com/fraywing/textAngular/wiki for requirements and use.
*/
function(){"Use Strict";function a(a){try{return 0!==angular.element(a).length}catch(b){return!1}}function b(b,c){if(!b||""===b||r.hasOwnProperty(b))throw"textAngular Error: A unique name is required for a Tool Definition";if(c.display&&(""===c.display||!a(c.display))||!c.display&&!c.buttontext&&!c.iconclass)throw'textAngular Error: Tool Definition for "'+b+'" does not have a valid display/iconclass/buttontext value';r[b]=c}var c={ie:function(){for(var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return b>4?b:a}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent)},d=!1;c.webkit&&(document.addEventListener("mousedown",function(a){var b=a||window.event,c=b.target;if(d&&null!==c){for(var e=!1,f=c;null!==f&&"html"!==f.tagName.toLowerCase()&&!e;)e="true"===f.contentEditable,f=f.parentNode;e||(document.getElementById("textAngular-editableFix-010203040506070809").setSelectionRange(0,0),c.focus(),c.select&&c.select())}d=!1},!1),angular.element(document).ready(function(){angular.element(document.body).append(angular.element('<input id="textAngular-editableFix-010203040506070809" class="ta-hidden-input" unselectable="on" tabIndex="-1">'))}));var e=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,f=/^(ul|li|ol)$/i,g=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var h,i,k,l,m;if(c.ie>8||void 0===c.ie){for(var n=document.styleSheets,o=0;o<n.length;o++)if((0===n[o].media.length||n[o].media.mediaText.match(/(all|screen)/gi))&&n[o].href&&n[o].href.match(/textangular\.(min\.|)css/gi)){h=n[o];break}h||(h=function(){var a=document.createElement("style");return c.webkit&&a.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(a),a.sheet}()),i=function(a,b){return l(h,a,b)},l=function(a,b,c){var d;return a.cssRules?d=Math.max(a.cssRules.length-1,0):a.rules&&(d=Math.max(a.rules.length-1,0)),a.insertRule?a.insertRule(b+"{"+c+"}",d):a.addRule(b,c,d),d},k=function(a){m(h,a)},m=function(a,b){a.removeRule?a.removeRule(b):a.deleteRule(b)}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(a){return a?""===a?void 0===c.ie?"div":c.ie<=8?"P":"p":c.ie<=8?a.toUpperCase():a:c.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(a,b){return function(c){var d=angular.element("<div></div>");return d[0].innerHTML=c,angular.forEach(a,function(a){var c=[];a.selector&&""!==a.selector?c=d.find(a.selector):a.customAttribute&&""!==a.customAttribute&&(c=b.getByAttribute(d,a.customAttribute)),angular.forEach(c,function(b){b=angular.element(b),a.selector&&""!==a.selector&&a.customAttribute&&""!==a.customAttribute?void 0!==b.attr(a.customAttribute)&&a.renderLogic(b):a.renderLogic(b)})}),d[0].innerHTML}}]).factory("taFixChrome",function(){var a=function(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c,d,e=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,f="",g=0;b=e.exec(a);)c=b[3]||b[4],c&&c.match(/line-height: 1.428571429;|color: inherit; line-height: 1.1;/i)&&(c=c.replace(/( |)font-family: inherit;|( |)line-height: 1.428571429;|( |)line-height:1.1;|( |)color: inherit;/gi,""),d="<"+b[1].trim(),c.length>0&&(d+=" style="+b[2].substring(0,1)+c+b[2].substring(0,1)),d+=b[5].trim()+">",f+=a.substring(g,b.index)+d,g=b.index+b[0].length);return f+=a.substring(g),g>0?f.replace(/<span\s*>(.*?)<\/span>(<br(\/|)>|)/gi,"$1"):a};return a}).factory("taSanitize",["$sanitize","taDOM",function(a){function b(a,b){for(var c,d=0,e=0,f=/<[^>]*>/gi;c=f.exec(a);)if(e=c.index,"/"===c[0].substr(1,1)){if(0===d)break;d--}else d++;return b+a.substring(0,e)+angular.element(b)[0].outerHTML.substring(b.length)+a.substring(e)}function c(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var d,f,g,h,j,k=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,l="",m="",n=0;f=k.exec(a);){g=f[3]||f[4];var o=new RegExp(i,"i");if(angular.isString(g)&&o.test(g)){h="";for(var p=new RegExp(i,"ig");subMatch=p.exec(g);)for(d=0;d<e.length;d++)subMatch[2*d+2]&&(h+="<"+e[d].tag+">");j=c(a.substring(n,f.index)),m+=l.length>0?b(j,l):j,g=g.replace(new RegExp(i,"ig"),""),m+="<"+f[1].trim(),g.length>0&&(m+=' style="'+g+'"'),m+=f[5]+">",n=f.index+f[0].length,l=h}}return m+=l.length>0?b(a.substring(n),l):a.substring(n)}function d(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi,d="",e=0;b=c.exec(a);)d+=a.substring(e,b.index),e=b.index+b[0].length,newTag="<"+b[1]+b[5],/style=("([^"]+)"|'([^']+)')/gi.test(newTag)?newTag=newTag.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(b[3]||b[4])+';"'):newTag+=' style="text-align:'+(b[3]||b[4])+';"',newTag+=">",d+=newTag;return d+a.substring(e)}for(var e=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],f=[],g=0;g<e.length;g++){var h="("+e[g].property+":\\s*(";for(j=0;j<e[g].values.length;j++)j>0&&(h+="|"),h+=e[g].values[j];h+=");)",f.push(h)}var i="("+f.join("|")+")";return function(b,e,f){if(!f)try{b=c(b)}catch(g){}b=d(b);var h;try{h=a(b),f&&(h=b)}catch(g){h=e||""}var i=h.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi);processedSafe=h.replace(/(&#(9|10);)*/gi,"");var j,k=/<pre[^>]*>.*?<\/pre[^>]*>/gi,l=0,m=0;for(h="";null!==(j=k.exec(processedSafe))&&l<i.length;)h+=processedSafe.substring(m,j.index)+i[l],m=j.index+j[0].length,l++;return h+processedSafe.substring(m)}}]).factory("taToolExecuteAction",["$q","$log",function(a,b){return function(c){void 0!==c&&(this.$editor=function(){return c});var d=a.defer(),e=d.promise,f=this.$editor();e["finally"](function(){f.endAction.call(f)});var g;try{g=this.action(d,f.startAction())}catch(h){b.error(h)}(g||void 0===g)&&d.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(a,b,c){var d=function(b,c){var d,e,f=b.find("li");for(e=f.length-1;e>=0;e--)d=angular.element("<"+c+">"+f[e].innerHTML+"</"+c+">"),b.after(d);b.remove(),a.setSelectionToElementEnd(d[0])},g=function(b){/(<br(|\/)>)$/i.test(b.innerHTML.trim())?a.setSelectionBeforeElement(angular.element(b).find("br")[0]):a.setSelectionToElementEnd(b)},h=function(a,b){var c=angular.element("<"+b+">"+a[0].innerHTML+"</"+b+">");a.after(c),a.remove(),g(c.find("li")[0])},i=function(a,c,d){for(var e="",f=0;f<a.length;f++)e+="<"+b("li")+">"+a[f].innerHTML+"</"+b("li")+">";var h=angular.element("<"+d+">"+e+"</"+d+">");c.after(h),c.remove(),g(h.find("li")[0])};return function(g,j){return g=b(g),function(k,l,m){var n,o,p,q,r,s,t,u=angular.element("<"+g+">");try{t=a.getSelectionElement()}catch(v){}var w=angular.element(t);if(void 0!==t){var x=t.tagName.toLowerCase();if("insertorderedlist"===k.toLowerCase()||"insertunorderedlist"===k.toLowerCase()){var y=b("insertorderedlist"===k.toLowerCase()?"ol":"ul");if(x===y)return d(w,g);if("li"===x&&w.parent()[0].tagName.toLowerCase()===y&&1===w.parent().children().length)return d(w.parent(),g);if("li"===x&&w.parent()[0].tagName.toLowerCase()!==y&&1===w.parent().children().length)return h(w.parent(),y);if(x.match(e)&&!w.hasClass("ta-bind")){if("ol"===x||"ul"===x)return h(w,y);var z=!1;return angular.forEach(w.children(),function(a){a.tagName.match(e)&&(z=!0)}),z?i(w.children(),w,y):i([angular.element("<div>"+t.innerHTML+"</div>")[0]],w,y)}if(x.match(e)){if(q=a.getOnlySelectedElements(),0===q.length)o=angular.element("<"+y+"><li>"+t.innerHTML+"</li></"+y+">"),w.html(""),w.append(o);else{if(1===q.length&&("ol"===q[0].tagName.toLowerCase()||"ul"===q[0].tagName.toLowerCase()))return q[0].tagName.toLowerCase()===y?d(angular.element(q[0]),g):h(angular.element(q[0]),y);p="";var A=[];for(n=0;n<q.length;n++)if(3!==q[n].nodeType){var B=angular.element(q[n]);if("li"===q[n].tagName.toLowerCase())continue;p+="ol"===q[n].tagName.toLowerCase()||"ul"===q[n].tagName.toLowerCase()?B[0].innerHTML:"span"!==q[n].tagName.toLowerCase()||"ol"!==q[n].childNodes[0].tagName.toLowerCase()&&"ul"!==q[n].childNodes[0].tagName.toLowerCase()?"<"+b("li")+">"+B[0].innerHTML+"</"+b("li")+">":B[0].childNodes[0].innerHTML,A.unshift(B)}o=angular.element("<"+y+">"+p+"</"+y+">"),A.pop().replaceWith(o),angular.forEach(A,function(a){a.remove()})}return void a.setSelectionToElementEnd(o[0])}}else{if("formatblock"===k.toLowerCase()){for(s=m.toLowerCase().replace(/[<>]/gi,""),"default"===s.trim()&&(s=g,m="<"+g+">"),o="li"===x?w.parent():w;!o[0].tagName||!o[0].tagName.match(e)&&!o.parent().attr("contenteditable");)o=o.parent(),x=(o[0].tagName||"").toLowerCase();if(x===s){q=o.children();var C=!1;for(n=0;n<q.length;n++)C=C||q[n].tagName.match(e);C?(o.after(q),r=o.next(),o.remove(),o=r):(u.append(o[0].childNodes),o.after(u),o.remove(),o=u)}else if(o.parent()[0].tagName.toLowerCase()!==s||o.parent().hasClass("ta-bind"))if(x.match(f))o.wrap(m);else{for(q=a.getOnlySelectedElements(),0===q.length&&(q=[o[0]]),n=0;n<q.length;n++)if(3===q[n].nodeType||!q[n].tagName.match(e))for(;3===q[n].nodeType||!q[n].tagName||!q[n].tagName.match(e);)q[n]=q[n].parentNode;if(angular.element(q[0]).hasClass("ta-bind"))o=angular.element(m),o[0].innerHTML=q[0].innerHTML,q[0].innerHTML=o[0].outerHTML;else if("blockquote"===s){for(p="",n=0;n<q.length;n++)p+=q[n].outerHTML;for(o=angular.element(m),o[0].innerHTML=p,q[0].parentNode.insertBefore(o[0],q[0]),n=q.length-1;n>=0;n--)q[n].parentNode&&q[n].parentNode.removeChild(q[n])}else for(n=0;n<q.length;n++)o=angular.element(m),o[0].innerHTML=q[n].innerHTML,q[n].parentNode.insertBefore(o[0],q[n]),q[n].parentNode.removeChild(q[n])}else{var D=o.parent(),E=D.contents();for(n=0;n<E.length;n++)D.parent().hasClass("ta-bind")&&3===E[n].nodeType&&(u=angular.element("<"+g+">"),u[0].innerHTML=E[n].outerHTML,E[n]=u[0]),D.parent()[0].insertBefore(E[n],D[0]);D.remove()}return void a.setSelectionToElementEnd(o[0])}if("createlink"===k.toLowerCase()){var F=a.getSelection();if(F.collapsed)return void a.insertHtml('<a href="'+m+'">'+m+"</a>",j)}else if("inserthtml"===k.toLowerCase())return void a.insertHtml(m,j)}}try{c[0].execCommand(k,l,m)}catch(v){}}}}]).service("taSelection",["$window","$document","taDOM",function(a,b,c){var d=b[0],f=a.rangy,h=function(a,b){return a.tagName&&a.tagName.match(/^br$/i)&&0===b&&!a.previousSibling?{element:a.parentNode,offset:0}:{element:a,offset:b}},i={getSelection:function(){var a=f.getSelection().getRangeAt(0),b=a.commonAncestorContainer,c={start:h(a.startContainer,a.startOffset),end:h(a.endContainer,a.endOffset),collapsed:a.collapsed};return b=3===b.nodeType?b.parentNode:b,c.container=b.parentNode===c.start.element||b.parentNode===c.end.element?b.parentNode:b,c},getOnlySelectedElements:function(){var a=f.getSelection().getRangeAt(0),b=a.commonAncestorContainer;return b=3===b.nodeType?b.parentNode:b,a.getNodes([1],function(a){return a.parentNode===b})},getSelectionElement:function(){return i.getSelection().container},setSelection:function(a,b,c){var d=f.createRange();d.setStart(a,b),d.setEnd(a,c),f.getSelection().setSingleRange(d)},setSelectionBeforeElement:function(a){var b=f.createRange();b.selectNode(a),b.collapse(!0),f.getSelection().setSingleRange(b)},setSelectionAfterElement:function(a){var b=f.createRange();b.selectNode(a),b.collapse(!1),f.getSelection().setSingleRange(b)},setSelectionToElementStart:function(a){var b=f.createRange();b.selectNodeContents(a),b.collapse(!0),f.getSelection().setSingleRange(b)},setSelectionToElementEnd:function(a){var b=f.createRange();b.selectNodeContents(a),b.collapse(!1),a.childNodes&&a.childNodes[a.childNodes.length-1]&&"br"===a.childNodes[a.childNodes.length-1].nodeName&&(b.startOffset=b.endOffset=b.startOffset-1),f.getSelection().setSingleRange(b)},insertHtml:function(a,b){var h,j,k,l,m,n,o,p=angular.element("<div>"+a+"</div>"),q=f.getSelection().getRangeAt(0),r=d.createDocumentFragment(),s=p[0].childNodes,t=!0;if(s.length>0){for(l=[],k=0;k<s.length;k++)"p"===s[k].nodeName.toLowerCase()&&""===s[k].innerHTML.trim()||3===s[k].nodeType&&""===s[k].nodeValue.trim()||(t=t&&!e.test(s[k].nodeName),l.push(s[k]));for(var u=0;u<l.length;u++)n=r.appendChild(l[u]);!t&&q.collapsed&&/^(|<br(|\/)>)$/i.test(q.startContainer.innerHTML)&&q.selectNode(q.startContainer)}else t=!0,n=r=d.createTextNode(a);if(t)q.deleteContents();else if(q.collapsed&&q.startContainer!==b)if(q.startContainer.innerHTML&&q.startContainer.innerHTML.match(/^<[^>]*>$/i))h=q.startContainer,1===q.startOffset?(q.setStartAfter(h),q.setEndAfter(h)):(q.setStartBefore(h),q.setEndBefore(h));else{if(3===q.startContainer.nodeType&&q.startContainer.parentNode!==b)for(h=q.startContainer.parentNode,j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,q.startContainer,q.startOffset);!g.test(h.nodeName);){angular.element(h).after(j),h=h.parentNode;var v=j;j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,v)}else h=q.startContainer,j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,void 0,void 0,q.startOffset);if(angular.element(h).after(j),q.setStartAfter(h),q.setEndAfter(h),/^(|<br(|\/)>)$/i.test(h.innerHTML.trim())&&(q.setStartBefore(h),q.setEndBefore(h),angular.element(h).remove()),/^(|<br(|\/)>)$/i.test(j.innerHTML.trim())&&angular.element(j).remove(),"li"===h.nodeName.toLowerCase()){for(o=d.createDocumentFragment(),m=0;m<r.childNodes.length;m++)p=angular.element("<li>"),c.transferChildNodes(r.childNodes[m],p[0]),c.transferNodeAttributes(r.childNodes[m],p[0]),o.appendChild(p[0]);r=o,n&&(n=r.childNodes[r.childNodes.length-1],n=n.childNodes[n.childNodes.length-1])}}else q.deleteContents();q.insertNode(r),n&&i.setSelectionToElementEnd(n)}};return i}]).service("taDOM",function(){var a={getByAttribute:function(b,c){var d=[],e=b.children();return e.length&&angular.forEach(e,function(b){d=d.concat(a.getByAttribute(angular.element(b),c))}),void 0!==b.attr(c)&&d.push(b),d},transferChildNodes:function(a,b){for(b.innerHTML="";a.childNodes.length>0;)b.appendChild(a.childNodes[0]);return b},splitNodes:function(b,c,d,e,f,g){if(!e&&isNaN(g))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var h=document.createDocumentFragment(),i=document.createDocumentFragment(),j=0;b.length>0&&(isNaN(g)||g!==j)&&b[0]!==e;)h.appendChild(b[0]),j++;for(!isNaN(f)&&f>=0&&b[0]&&(h.appendChild(document.createTextNode(b[0].nodeValue.substring(0,f))),b[0].nodeValue=b[0].nodeValue.substring(f));b.length>0;)i.appendChild(b[0]);a.transferChildNodes(h,c),a.transferChildNodes(i,d)},transferNodeAttributes:function(a,b){for(var c=0;c<a.attributes.length;c++)b.setAttribute(a.attributes[c].name,a.attributes[c].value);return b}};return a}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(a){var b=angular.element("<div/>");b.html(a);var c=b.text().length;return f>=c?(d.$setValidity("taMaxText",!0),a):void d.$setValidity("taMaxText",!1)}var f=parseInt(a.$eval(c.taMaxText));if(isNaN(f))throw"Max text must be an integer";c.$observe("taMaxText",function(a){if(f=parseInt(a),isNaN(f))throw"Max text must be an integer";d.$dirty&&d.$setViewValue(d.$viewValue)}),d.$parsers.unshift(e)}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(a){var b=angular.element("<div/>");b.html(a);var c=b.text().length;return!c||c>=f?(d.$setValidity("taMinText",!0),a):void d.$setValidity("taMinText",!1)}var f=parseInt(a.$eval(c.taMinText));if(isNaN(f))throw"Min text must be an integer";c.$observe("taMinText",function(a){if(f=parseInt(a),isNaN(f))throw"Min text must be an integer";d.$dirty&&d.$setViewValue(d.$viewValue)}),d.$parsers.unshift(e)}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){var a=/<(a|abbr|acronym|bdi|bdo|big|cite|code|del|dfn|img|ins|kbd|label|map|mark|q|ruby|rp|rt|s|samp|time|tt|var)[^>]*(>|$)/i;return function(b){return function(c){if(!c)return!0;var d,e=/(^[^<]|>)[^<]/i.exec(c);return e?d=e.index:(c=c.toString().replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,""),d=c.indexOf(">")),c=c.trim().substring(d,d+100),/^[^<>]+$/i.test(c)?!1:0===c.length||c===b||/^>(\s|&nbsp;)*<\/[^>]+>$/gi.test(c)?!0:/>\s*[^\s<]/i.test(c)||a.test(c)?!1:!0}}}]).directive("taBind",["taSanitize","$timeout","$window","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM",function(a,b,e,f,h,j,l,m,n,o,q,r,s){return{require:"ngModel",link:function(j,t,u,v){var w,x,y,z,A=void 0!==t.attr("contenteditable")&&t.attr("contenteditable"),B=A||"textarea"===t[0].tagName.toLowerCase()||"input"===t[0].tagName.toLowerCase(),C=!1,D=!1,E=!1,F=u.taUnsafeSanitizer||o.disableSanitizer,G=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,H=/^(8|13|32|46|59|61|107|109|186|187|188|189|190|191|192|219|220|221|222)$/i;void 0===u.taDefaultWrap&&(u.taDefaultWrap="p"),""===u.taDefaultWrap?(y="",z=void 0===c.ie?"<div><br></div>":c.ie>=11?"<p><br></p>":c.ie<=8?"<P>&nbsp;</P>":"<p>&nbsp;</p>"):(y=void 0===c.ie||c.ie>=11?"<"+u.taDefaultWrap+"><br></"+u.taDefaultWrap+">":c.ie<=8?"<"+u.taDefaultWrap.toUpperCase()+"></"+u.taDefaultWrap.toUpperCase()+">":"<"+u.taDefaultWrap+"></"+u.taDefaultWrap+">",z=void 0===c.ie||c.ie>=11?"<"+u.taDefaultWrap+"><br></"+u.taDefaultWrap+">":c.ie<=8?"<"+u.taDefaultWrap.toUpperCase()+">&nbsp;</"+u.taDefaultWrap.toUpperCase()+">":"<"+u.taDefaultWrap+">&nbsp;</"+u.taDefaultWrap+">");var I=q(z);u.taPaste&&(x=r(u.taPaste)),t.addClass("ta-bind");var J;j["$undoManager"+(u.id||"")]=v.$undoManager={_stack:[],_index:0,_max:1e3,push:function(a){return"undefined"==typeof a||null===a||"undefined"!=typeof this.current()&&null!==this.current()&&a===this.current()?a:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(a),J&&b.cancel(J),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,a)},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(a){return 0>a||a>this._stack.length-1?void 0:(this._index=a,this.current())},current:function(){return this._stack[this._index]}};var K=j["$undoTaBind"+(u.id||"")]=function(){if(!C&&A){var a=v.$undoManager.undo();"undefined"!=typeof a&&null!==a&&(Y(a),N(a,!1),l.setSelectionToElementEnd(t[0].childNodes.length?t[0].childNodes[t[0].childNodes.length-1]:t[0]))}},L=j["$redoTaBind"+(u.id||"")]=function(){if(!C&&A){var a=v.$undoManager.redo();"undefined"!=typeof a&&null!==a&&(Y(a),N(a,!1),l.setSelectionToElementEnd(t[0].childNodes.length?t[0].childNodes[t[0].childNodes.length-1]:t[0]))}},M=function(){if(A)return t[0].innerHTML;if(B)return t.val();throw"textAngular Error: attempting to update non-editable taBind"},N=function(a,b){E=!0,("undefined"==typeof b||null===b)&&(b=!0&&A),("undefined"==typeof a||null===a)&&(a=M()),I(a)?(""!==v.$viewValue&&v.$setViewValue(""),b&&""!==v.$undoManager.current()&&v.$undoManager.push("")):(X(),v.$viewValue!==a&&(v.$setViewValue(a),b&&v.$undoManager.push(a)))};if(j["updateTaBind"+(u.id||"")]=function(){C||N()},B)if(j.events={},A){var O=!1,P=function(c){if(c&&c.trim().length){if(c.match(/class=["']*Mso(Normal|List)/i)){var d=c.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);d=d?d[1]:c,d=d.replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,"");var e=angular.element("<div>"+d+"</div>"),f=angular.element("<div></div>"),g={element:null,lastIndent:[],lastLi:null,isUl:!1};g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0};for(var h=function(a){g.isUl=a,g.element=angular.element(a?"<ul>":"<ol>"),g.lastIndent=[],g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0},g.lastLevelMatch=null},i=0;i<=e[0].childNodes.length;i++)if(e[0].childNodes[i]&&"#text"!==e[0].childNodes[i].nodeName&&"p"===e[0].childNodes[i].tagName.toLowerCase()){var k=angular.element(e[0].childNodes[i]),m=(k.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);if(m){if(k[0].childNodes.length<2||k[0].childNodes[1].childNodes.length<1)continue;var n="bullet"===m[1].toLowerCase()||"number"!==m[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(k[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(k[0].childNodes[1].childNodes[0].innerHTML)),o=(k.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),p=parseFloat(o?o[1]:0),q=(k.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(q&&q[2]&&(p=parseInt(q[2])),q&&(!g.lastLevelMatch||q[1]!==g.lastLevelMatch[1])||!m[3]||"first"===m[3].toLowerCase()||null===g.lastIndent.peek()||g.isUl!==n&&g.lastIndent.peek()===p)h(n),f.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()<p)g.element=angular.element(n?"<ul>":"<ol>"),g.lastLi.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()>p){for(;null!=g.lastIndent.peek()&&g.lastIndent.peek()>p;)if("li"!==g.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(g.element.parent()[0].tagName.toLowerCase()))break;g.element=g.element.parent(),g.lastIndent.pop()}else g.element=g.element.parent();g.isUl="ul"===g.element[0].tagName.toLowerCase(),n!==g.isUl&&(h(n),f.append(g.element))}g.lastLevelMatch=q,p!==g.lastIndent.peek()&&g.lastIndent.push(p),g.lastLi=angular.element("<li>"),g.element.append(g.lastLi),g.lastLi.html(k.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),k.remove()}else h(!1),f.append(k)}var r=function(a){a=angular.element(a);for(var b=a[0].childNodes.length-1;b>=0;b--)a.after(a[0].childNodes[b]);a.remove()};angular.forEach(f.find("span"),function(a){a.removeAttribute("lang"),a.attributes.length<=0&&r(a)}),angular.forEach(f.find("font"),r),c=f.html()}else{if(c=c.replace(/<(|\/)meta[^>]*?>/gi,""),c.match(/<[^>]*?(ta-bind)[^>]*?>/)){if(c.match(/<[^>]*?(text-angular)[^>]*?>/)){var u=angular.element("<div>"+c+"</div>");u.find("textarea").remove();for(var w=s.getByAttribute(u,"ta-bind"),y=0;y<w.length;y++){for(var z=w[y][0].parentNode.parentNode,A=0;A<w[y][0].childNodes.length;A++)z.parentNode.insertBefore(w[y][0].childNodes[A],z);z.parentNode.removeChild(z)}c=u.html().replace('<br class="Apple-interchange-newline">',"")}}else c.match(/^<span/)&&(c=c.replace(/<(|\/)span[^>]*?>/gi,""));c=c.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}c=a(c,"",F),x&&(c=x(j,{$html:c})||c),l.insertHtml(c,t[0]),b(function(){v.$setViewValue(M()),O=!1,t.removeClass("processing-paste")},0)}else O=!1,t.removeClass("processing-paste")};if(t.on("paste",j.events.paste=function(a,c){if(c&&angular.extend(a,c),C||O)return a.stopPropagation(),a.preventDefault(),!1;O=!0,t.addClass("processing-paste");var d,g=(a.originalEvent||a).clipboardData;if(g&&g.getData){for(var h="",i=0;i<g.types.length;i++)h+=" "+g.types[i];return/text\/html/i.test(h)?d=g.getData("text/html"):/text\/plain/i.test(h)&&(d=g.getData("text/plain")),P(d),a.stopPropagation(),a.preventDefault(),!1}var j=e.rangy.saveSelection(),k=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');f.find("body").append(k),k[0].focus(),b(function(){e.rangy.restoreSelection(j),P(k[0].innerHTML),k.remove(),t[0].focus()},0)}),t.on("cut",j.events.cut=function(a){C?a.preventDefault():b(function(){v.$setViewValue(M())},0)}),t.on("keydown",j.events.keydown=function(a,b){if(b&&angular.extend(a,b),!C)if(!a.altKey&&a.metaKey||a.ctrlKey)90!==a.keyCode||a.shiftKey?(90===a.keyCode&&a.shiftKey||89===a.keyCode&&!a.shiftKey)&&(L(),a.preventDefault()):(K(),a.preventDefault());else if(13===a.keyCode&&!a.shiftKey){var c=l.getSelectionElement();if(!c.tagName.match(g))return;var d=angular.element(y);if(/^<br(|\/)>$/i.test(c.innerHTML.trim())&&"blockquote"===c.parentNode.tagName.toLowerCase()&&!c.nextSibling){$selection=angular.element(c);var e=$selection.parent();e.after(d),$selection.remove(),0===e.children().length&&e.remove(),l.setSelectionToElementStart(d[0]),a.preventDefault()}else/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(c.innerHTML.trim())&&"blockquote"===c.tagName.toLowerCase()&&($selection=angular.element(c),$selection.after(d),$selection.remove(),l.setSelectionToElementStart(d[0]),a.preventDefault())}}),t.on("keyup",j.events.keyup=function(a,c){if(c&&angular.extend(a,c),J&&b.cancel(J),!C&&!G.test(a.keyCode)){if(""!==y&&13===a.keyCode&&!a.shiftKey){for(var d=l.getSelectionElement();!d.tagName.match(g)&&d!==t[0];)d=d.parentNode;if(d.tagName.toLowerCase()!==u.taDefaultWrap&&"li"!==d.tagName.toLowerCase()&&(""===d.innerHTML.trim()||"<br>"===d.innerHTML.trim())){var f=angular.element(y);angular.element(d).replaceWith(f),l.setSelectionToElementStart(f[0])}}var h=M();if(""!==y&&""===h.trim())Y(y),l.setSelectionToElementStart(t.children()[0]);else if("<"!==h.substring(0,1)&&""!==u.taDefaultWrap){var i=e.rangy.saveSelection();h=M(),h="<"+u.taDefaultWrap+">"+h+"</"+u.taDefaultWrap+">",Y(h),e.rangy.restoreSelection(i)}var j=w!==a.keyCode&&H.test(a.keyCode);N(h,j),j||(J=b(function(){v.$undoManager.push(h)},250)),w=a.keyCode}}),t.on("blur",j.events.blur=function(){D=!1,C||N(),E=!0,v.$render()}),u.placeholder&&(c.ie>8||void 0===c.ie)){var Q;if(!u.id)throw"textAngular Error: An unique ID is required for placeholders to work";Q=i("#"+u.id+".placeholder-text:before",'content: "'+u.placeholder+'"'),j.$on("$destroy",function(){k(Q)})}t.on("focus",j.events.focus=function(){D=!0,t.removeClass("placeholder-text")}),t.on("mouseup",j.events.mouseup=function(){var a=l.getSelection();a.start.element===t[0]&&t.children().length&&l.setSelectionToElementStart(t.children()[0])}),t.on("mousedown",j.events.mousedown=function(a,b){b&&angular.extend(a,b),a.stopPropagation()})}else{t.on("change blur",j.events.change=j.events.blur=function(){C||v.$setViewValue(M())}),t.on("keydown",j.events.keydown=function(a,b){if(b&&angular.extend(a,b),9===a.keyCode){var c=this.selectionStart,d=this.selectionEnd,e=t.val();if(a.shiftKey){var f=e.lastIndexOf("\n",c),g=e.lastIndexOf("	",c);-1!==g&&g>=f&&(t.val(e.substring(0,g)+e.substring(g+1)),this.selectionStart=this.selectionEnd=c-1)}else t.val(e.substring(0,c)+"	"+e.substring(d)),this.selectionStart=this.selectionEnd=c+1;a.preventDefault()}});var R=function(a,b){for(var c="",d=0;b>d;d++)c+=a;return c},S=function(a,b){var c="",d=a.childNodes;b++,c+=R("	",b-1)+a.outerHTML.substring(0,a.outerHTML.indexOf("<li"));for(var e=0;e<d.length;e++)d[e].outerHTML&&(c+="ul"===d[e].nodeName.toLowerCase()||"ol"===d[e].nodeName.toLowerCase()?"\n"+S(d[e],b):"\n"+R("	",b)+d[e].outerHTML);return c+="\n"+R("	",b-1)+a.outerHTML.substring(a.outerHTML.lastIndexOf("<"))};v.$formatters.unshift(function(a){var b=angular.element("<div>"+a+"</div>")[0].childNodes;if(b.length>0){a="";for(var c=0;c<b.length;c++)b[c].outerHTML&&(a.length>0&&(a+="\n"),a+="ul"===b[c].nodeName.toLowerCase()||"ol"===b[c].nodeName.toLowerCase()?""+S(b[c],0):""+b[c].outerHTML)}return a})}var T=function(b){return v.$oldViewValue=a(h(b),v.$oldViewValue,F)},U=function(a){return u.required&&v.$setValidity("required",!I(a)),a};v.$parsers.push(T),v.$parsers.unshift(U),v.$formatters.push(T),v.$formatters.unshift(function(a){if(I(a))return a;var b=angular.element("<div>"+a+"</div>");return 0===b.children().length&&(a="<"+u.taDefaultWrap+">"+a+"</"+u.taDefaultWrap+">"),a}),v.$formatters.unshift(U),v.$formatters.unshift(function(a){return v.$undoManager.push(a||"")});var V=function(a){return j.$emit("ta-element-select",this),a.preventDefault(),!1},W=function(a,c){if(c&&angular.extend(a,c),!p&&!C){p=!0;var d;d=a.originalEvent?a.originalEvent.dataTransfer:a.dataTransfer,j.$emit("ta-drop-event",this,a,d),b(function(){p=!1,N()},100)}},X=j["reApplyOnSelectorHandlers"+(u.id||"")]=function(){C||angular.forEach(m,function(a){t.find(a).off("click",V).on("click",V)})},Y=function(a){t[0].innerHTML=a};v.$render=function(){var a=v.$viewValue||"";E||(A&&D&&(t.removeClass("placeholder-text"),t[0].blur(),b(function(){t[0].focus(),l.setSelectionToElementEnd(t.children()[t.children().length-1])},1)),A?(Y(u.placeholder?""===a?y:a:""===a?y:a),C?t.off("drop",W):(X(),t.on("drop",W))):"textarea"!==t[0].tagName.toLowerCase()&&"input"!==t[0].tagName.toLowerCase()?Y(n(a)):t.val(a)),A&&u.placeholder&&(""===a?D?t.removeClass("placeholder-text"):t.addClass("placeholder-text"):t.removeClass("placeholder-text")),E=!1},u.taReadonly&&(C=j.$eval(u.taReadonly),C?(t.addClass("ta-readonly"),("textarea"===t[0].tagName.toLowerCase()||"input"===t[0].tagName.toLowerCase())&&t.attr("disabled","disabled"),void 0!==t.attr("contenteditable")&&t.attr("contenteditable")&&t.removeAttr("contenteditable")):(t.removeClass("ta-readonly"),"textarea"===t[0].tagName.toLowerCase()||"input"===t[0].tagName.toLowerCase()?t.removeAttr("disabled"):A&&t.attr("contenteditable","true")),j.$watch(u.taReadonly,function(a,b){b!==a&&(a?(t.addClass("ta-readonly"),("textarea"===t[0].tagName.toLowerCase()||"input"===t[0].tagName.toLowerCase())&&t.attr("disabled","disabled"),void 0!==t.attr("contenteditable")&&t.attr("contenteditable")&&t.removeAttr("contenteditable"),angular.forEach(m,function(a){t.find(a).on("click",V)}),t.off("drop",W)):(t.removeClass("ta-readonly"),"textarea"===t[0].tagName.toLowerCase()||"input"===t[0].tagName.toLowerCase()?t.removeAttr("disabled"):A&&t.attr("contenteditable","true"),angular.forEach(m,function(a){t.find(a).off("click",V)}),t.on("drop",W)),C=a)})),A&&!C&&(angular.forEach(m,function(a){t.find(a).on("click",V)}),t.on("drop",W),t.on("blur",function(){c.webkit&&(d=!0)}))}}}]);var p=!1,q=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]),r={};q.constant("taRegisterTool",b),q.value("taTools",r),q.config([function(){angular.forEach(r,function(a,b){delete r[b]})}]),q.run([function(){if(!window.rangy)throw"rangy-core.js and rangy-selectionsaverestore.js are required for textAngular to work correctly, rangy-core is not yet loaded.";if(window.rangy.init(),!window.rangy.saveSelection)throw"rangy-selectionsaverestore.js is required for textAngular to work correctly."}]),q.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$window","$document","$animate","$log","$q","$parse",function(a,b,c,d,e,f,g,h,i,j,k,l){return{require:"?ngModel",scope:{},restrict:"EA",link:function(m,n,o,p){var q,r,s,t,u,v,w,x,y,z,A=o.serial?o.serial:Math.floor(1e16*Math.random());m._name=o.name?o.name:"textAngularEditor"+A;var B=function(a,c,d){b(function(){var b=function(){a.off(c,b),d.apply(this,arguments)};a.on(c,b)},100)};y=e(o.taDefaultWrap),angular.extend(m,angular.copy(c),{wrapSelection:function(a,b,c){"undo"===a.toLowerCase()?m["$undoTaBindtaTextElement"+A]():"redo"===a.toLowerCase()?m["$redoTaBindtaTextElement"+A]():(y(a,!1,b),c&&m["reApplyOnSelectorHandlerstaTextElement"+A](),m.displayElements.text[0].focus())},showHtml:m.$eval(o.taShowHtml)||!1}),o.taFocussedClass&&(m.classes.focussed=o.taFocussedClass),o.taTextEditorClass&&(m.classes.textEditor=o.taTextEditorClass),o.taHtmlEditorClass&&(m.classes.htmlEditor=o.taHtmlEditorClass),o.taTextEditorSetup&&(m.setup.textEditorSetup=m.$parent.$eval(o.taTextEditorSetup)),o.taHtmlEditorSetup&&(m.setup.htmlEditorSetup=m.$parent.$eval(o.taHtmlEditorSetup)),m.fileDropHandler=o.taFileDrop?m.$parent.$eval(o.taFileDrop):m.defaultFileDropHandler,w=n[0].innerHTML,n[0].innerHTML="",m.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},m.displayElements.popover.append(m.displayElements.popoverArrow),m.displayElements.popover.append(m.displayElements.popoverContainer),m.displayElements.scrollWindow.append(m.displayElements.popover),m.displayElements.popover.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1
}),m.showPopover=function(a){m.displayElements.popover.css("display","block"),m.reflowPopover(a),i.addClass(m.displayElements.popover,"in"),B(h.find("body"),"click keyup",function(){m.hidePopover()})},m.reflowPopover=function(a){m.displayElements.text[0].offsetHeight-51>a[0].offsetTop?(m.displayElements.popover.css("top",a[0].offsetTop+a[0].offsetHeight+"px"),m.displayElements.popover.removeClass("top").addClass("bottom")):(m.displayElements.popover.css("top",a[0].offsetTop-54+"px"),m.displayElements.popover.removeClass("bottom").addClass("top"));var b=m.displayElements.text[0].offsetWidth-m.displayElements.popover[0].offsetWidth,c=a[0].offsetLeft+a[0].offsetWidth/2-m.displayElements.popover[0].offsetWidth/2;m.displayElements.popover.css("left",Math.max(0,Math.min(b,c))+"px"),m.displayElements.popoverArrow.css("margin-left",Math.min(c,Math.max(0,c-b))-11+"px")},m.hidePopover=function(){var a=function(){m.displayElements.popover.css("display",""),m.displayElements.popoverContainer.attr("style",""),m.displayElements.popoverContainer.attr("class","popover-content")};k.when(i.removeClass(m.displayElements.popover,"in",a)).then(a)},m.displayElements.resize.overlay.append(m.displayElements.resize.background),angular.forEach(m.displayElements.resize.anchors,function(a){m.displayElements.resize.overlay.append(a)}),m.displayElements.resize.overlay.append(m.displayElements.resize.info),m.displayElements.scrollWindow.append(m.displayElements.resize.overlay),m.reflowResizeOverlay=function(a){a=angular.element(a)[0],m.displayElements.resize.overlay.css({display:"block",left:a.offsetLeft-5+"px",top:a.offsetTop-5+"px",width:a.offsetWidth+10+"px",height:a.offsetHeight+10+"px"}),m.displayElements.resize.info.text(a.offsetWidth+" x "+a.offsetHeight)},m.showResizeOverlay=function(a){var b=h.find("body");z=function(c){var d={width:parseInt(a.attr("width")),height:parseInt(a.attr("height")),x:c.clientX,y:c.clientY};(void 0===d.width||isNaN(d.width))&&(d.width=a[0].offsetWidth),(void 0===d.height||isNaN(d.height))&&(d.height=a[0].offsetHeight),m.hidePopover();var e=d.height/d.width,f=function(b){var c={x:Math.max(0,d.width+(b.clientX-d.x)),y:Math.max(0,d.height+(b.clientY-d.y))};if(b.shiftKey){var f=c.y/c.x;c.x=e>f?c.x:c.y/e,c.y=e>f?c.x*e:c.y}el=angular.element(a),el.attr("height",Math.max(0,c.y)),el.attr("width",Math.max(0,c.x)),m.reflowResizeOverlay(a)};b.on("mousemove",f),B(b,"mouseup",function(c){c.preventDefault(),c.stopPropagation(),b.off("mousemove",f),m.showPopover(a)}),c.stopPropagation(),c.preventDefault()},m.displayElements.resize.anchors[3].on("mousedown",z),m.reflowResizeOverlay(a),B(b,"click",function(){m.hideResizeOverlay()})},m.hideResizeOverlay=function(){m.displayElements.resize.anchors[3].off("mousedown",z),m.displayElements.resize.overlay.css("display","")},m.setup.htmlEditorSetup(m.displayElements.html),m.setup.textEditorSetup(m.displayElements.text),m.displayElements.html.attr({id:"taHtmlElement"+A,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html"}),m.displayElements.text.attr({id:"taTextElement"+A,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html"}),m.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),o.taDefaultWrap&&m.displayElements.text.attr("ta-default-wrap",o.taDefaultWrap),o.taUnsafeSanitizer&&(m.displayElements.text.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer),m.displayElements.html.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer)),m.displayElements.scrollWindow.append(m.displayElements.text),n.append(m.displayElements.scrollWindow),n.append(m.displayElements.html),m.displayElements.forminput.attr("name",m._name),n.append(m.displayElements.forminput),o.tabindex&&(n.removeAttr("tabindex"),m.displayElements.text.attr("tabindex",o.tabindex),m.displayElements.html.attr("tabindex",o.tabindex)),o.placeholder&&(m.displayElements.text.attr("placeholder",o.placeholder),m.displayElements.html.attr("placeholder",o.placeholder)),o.taDisabled&&(m.displayElements.text.attr("ta-readonly","disabled"),m.displayElements.html.attr("ta-readonly","disabled"),m.disabled=m.$parent.$eval(o.taDisabled),m.$parent.$watch(o.taDisabled,function(a){m.disabled=a,m.disabled?n.addClass(m.classes.disabled):n.removeClass(m.classes.disabled)})),o.taPaste&&(m._pasteHandler=function(a){return l(o.taPaste)(m.$parent,{$html:a})},m.displayElements.text.attr("ta-paste","_pasteHandler($html)")),a(m.displayElements.scrollWindow)(m),a(m.displayElements.html)(m),m.updateTaBindtaTextElement=m["updateTaBindtaTextElement"+A],m.updateTaBindtaHtmlElement=m["updateTaBindtaHtmlElement"+A],n.addClass("ta-root"),m.displayElements.scrollWindow.addClass("ta-text ta-editor "+m.classes.textEditor),m.displayElements.html.addClass("ta-html ta-editor "+m.classes.htmlEditor),m._actionRunning=!1;var C=!1;if(m.startAction=function(){return m._actionRunning=!0,C=g.rangy.saveSelection(),function(){C&&g.rangy.restoreSelection(C)}},m.endAction=function(){m._actionRunning=!1,C&&g.rangy.removeMarkers(C),C=!1,m.updateSelectedStyles(),m.showHtml||m["updateTaBindtaTextElement"+A]()},u=function(){m.focussed=!0,n.addClass(m.classes.focussed),x.focus(),n.triggerHandler("focus")},m.displayElements.html.on("focus",u),m.displayElements.text.on("focus",u),v=function(a){return m._actionRunning||h[0].activeElement===m.displayElements.html[0]||h[0].activeElement===m.displayElements.text[0]||(n.removeClass(m.classes.focussed),x.unfocus(),b(function(){m._bUpdateSelectedStyles=!1,n.triggerHandler("blur"),m.focussed=!1},0)),a.preventDefault(),!1},m.displayElements.html.on("blur",v),m.displayElements.text.on("blur",v),m.displayElements.text.on("paste",function(a){n.triggerHandler("paste",a)}),m.queryFormatBlockState=function(a){return!m.showHtml&&a.toLowerCase()===h[0].queryCommandValue("formatBlock").toLowerCase()},m.queryCommandState=function(a){return m.showHtml?"":h[0].queryCommandState(a)},m.switchView=function(){m.showHtml=!m.showHtml,i.enabled(!1,m.displayElements.html),i.enabled(!1,m.displayElements.text),m.showHtml?b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.html[0].focus()},100):b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.text[0].focus()},100)},o.ngModel){var D=!0;p.$render=function(){if(D){D=!1;var a=m.$parent.$eval(o.ngModel);void 0!==a&&null!==a||!w||""===w||p.$setViewValue(w)}m.displayElements.forminput.val(p.$viewValue),m._elementSelectTriggered||(m.html=p.$viewValue||"")};var E=function(a){return o.required&&p.$setValidity("required",!(!a||""===a.trim())),a};p.$parsers.push(E),p.$formatters.push(E)}else m.displayElements.forminput.val(w),m.html=w;if(m.$watch("html",function(a,b){a!==b&&(o.ngModel&&p.$viewValue!==a&&p.$setViewValue(a),m.displayElements.forminput.val(a))}),o.taTargetToolbars)x=f.registerEditor(m._name,m,o.taTargetToolbars.split(","));else{var F=angular.element('<div text-angular-toolbar name="textAngularToolbar'+A+'">');o.taToolbar&&F.attr("ta-toolbar",o.taToolbar),o.taToolbarClass&&F.attr("ta-toolbar-class",o.taToolbarClass),o.taToolbarGroupClass&&F.attr("ta-toolbar-group-class",o.taToolbarGroupClass),o.taToolbarButtonClass&&F.attr("ta-toolbar-button-class",o.taToolbarButtonClass),o.taToolbarActiveButtonClass&&F.attr("ta-toolbar-active-button-class",o.taToolbarActiveButtonClass),o.taFocussedClass&&F.attr("ta-focussed-class",o.taFocussedClass),n.prepend(F),a(F)(m.$parent),x=f.registerEditor(m._name,m,["textAngularToolbar"+A])}m.$on("$destroy",function(){f.unregisterEditor(m._name)}),m.$on("ta-element-select",function(a,b){x.triggerElementSelect(a,b)&&m["reApplyOnSelectorHandlerstaTextElement"+A]()}),m.$on("ta-drop-event",function(a,c,d,e){m.displayElements.text[0].focus(),e&&e.files&&e.files.length>0?(angular.forEach(e.files,function(a){try{k.when(m.fileDropHandler(a,m.wrapSelection)||m.fileDropHandler!==m.defaultFileDropHandler&&k.when(m.defaultFileDropHandler(a,m.wrapSelection))).then(function(){m["updateTaBindtaTextElement"+A]()})}catch(b){j.error(b)}}),d.preventDefault(),d.stopPropagation()):b(function(){m["updateTaBindtaTextElement"+A]()},0)}),m._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){m._bUpdateSelectedStyles=!1,m.focussed=!1}),m.updateSelectedStyles=function(){var a;void 0!==(a=d.getSelectionElement())&&a.parentNode!==m.displayElements.text[0]?x.updateSelectedStyles(angular.element(a)):x.updateSelectedStyles(),m._bUpdateSelectedStyles&&b(m.updateSelectedStyles,200)},q=function(){return m.focussed?void(m._bUpdateSelectedStyles||(m._bUpdateSelectedStyles=!0,m.$apply(function(){m.updateSelectedStyles()}))):void(m._bUpdateSelectedStyles=!1)},m.displayElements.html.on("keydown",q),m.displayElements.text.on("keydown",q),r=function(){m._bUpdateSelectedStyles=!1},m.displayElements.html.on("keyup",r),m.displayElements.text.on("keyup",r),s=function(a,b){b&&angular.extend(a,b),m.$apply(function(){return x.sendKeyCommand(a)?(m._bUpdateSelectedStyles||m.updateSelectedStyles(),a.preventDefault(),!1):void 0})},m.displayElements.html.on("keypress",s),m.displayElements.text.on("keypress",s),t=function(){m._bUpdateSelectedStyles=!1,m.$apply(function(){m.updateSelectedStyles()})},m.displayElements.html.on("mouseup",t),m.displayElements.text.on("mouseup",t)}}}]),q.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool",function(a,b,c){var d={},e={};return{registerEditor:function(c,f,g){if(!c||""===c)throw"textAngular Error: An editor requires a name";if(!f)throw"textAngular Error: An editor requires a scope";if(e[c])throw'textAngular Error: An Editor with name "'+c+'" already exists';var h=[];return angular.forEach(g,function(a){d[a]&&h.push(d[a])}),e[c]={scope:f,toolbars:g,_registerToolbar:function(a){this.toolbars.indexOf(a.name)>=0&&h.push(a)},editorFunctions:{disable:function(){angular.forEach(h,function(a){a.disabled=!0})},enable:function(){angular.forEach(h,function(a){a.disabled=!1})},focus:function(){angular.forEach(h,function(a){a._parent=f,a.disabled=!1,a.focussed=!0,f.focussed=!0})},unfocus:function(){angular.forEach(h,function(a){a.disabled=!0,a.focussed=!1}),f.focussed=!1},updateSelectedStyles:function(a){angular.forEach(h,function(b){angular.forEach(b.tools,function(c){c.activeState&&(b._parent=f,c.active=c.activeState(a))})})},sendKeyCommand:function(c){var d=!1;return(c.ctrlKey||c.metaKey)&&angular.forEach(b,function(b,e){if(b.commandKeyCode&&b.commandKeyCode===c.which)for(var g=0;g<h.length;g++)if(void 0!==h[g].tools[e]){a.call(h[g].tools[e],f),d=!0;break}}),d},triggerElementSelect:function(a,c){var d=function(a,b){for(var c=!0,d=0;d<b.length;d++)c=c&&a.attr(b[d]);return c},e=[],g={},i=!1;c=angular.element(c);var j=!1;if(angular.forEach(b,function(a,b){a.onElementSelect&&a.onElementSelect.element&&a.onElementSelect.element.toLowerCase()===c[0].tagName.toLowerCase()&&(!a.onElementSelect.filter||a.onElementSelect.filter(c))&&(j=j||angular.isArray(a.onElementSelect.onlyWithAttrs)&&d(c,a.onElementSelect.onlyWithAttrs),(!a.onElementSelect.onlyWithAttrs||d(c,a.onElementSelect.onlyWithAttrs))&&(g[b]=a))}),j?(angular.forEach(g,function(a,b){a.onElementSelect.onlyWithAttrs&&d(c,a.onElementSelect.onlyWithAttrs)&&e.push({name:b,tool:a})}),e.sort(function(a,b){return b.tool.onElementSelect.onlyWithAttrs.length-a.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(g,function(a,b){e.push({name:b,tool:a})}),e.length>0)for(var k=0;k<e.length;k++){for(var l=e[k].tool,m=e[k].name,n=0;n<h.length;n++)if(void 0!==h[n].tools[m]){l.onElementSelect.action.call(h[n].tools[m],a,c,f),i=!0;break}if(i)break}return i}}},e[c].editorFunctions},retrieveEditor:function(a){return e[a]},unregisterEditor:function(a){delete e[a]},registerToolbar:function(a){if(!a)throw"textAngular Error: A toolbar requires a scope";if(!a.name||""===a.name)throw"textAngular Error: A toolbar requires a name";if(d[a.name])throw'textAngular Error: A toolbar with name "'+a.name+'" already exists';d[a.name]=a,angular.forEach(e,function(b){b._registerToolbar(a)})},retrieveToolbar:function(a){return d[a]},retrieveToolbarsViaEditor:function(a){var b=[],c=this;return angular.forEach(this.retrieveEditor(a).toolbars,function(a){b.push(c.retrieveToolbar(a))}),b},unregisterToolbar:function(a){delete d[a]},updateToolsDisplay:function(a){var b=this;angular.forEach(a,function(a,c){b.updateToolDisplay(c,a)})},resetToolsDisplay:function(){var a=this;angular.forEach(b,function(b,c){a.resetToolDisplay(c)})},updateToolDisplay:function(a,b){var c=this;angular.forEach(d,function(d,e){c.updateToolbarToolDisplay(e,a,b)})},resetToolDisplay:function(a){var b=this;angular.forEach(d,function(c,d){b.resetToolbarToolDisplay(d,a)})},updateToolbarToolDisplay:function(a,b,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(b,c)},resetToolbarToolDisplay:function(a,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(c,b[c],!0)},removeTool:function(a){delete b[a],angular.forEach(d,function(b){delete b.tools[a];for(var c=0;c<b.toolbar.length;c++){for(var d,e=0;e<b.toolbar[c].length;e++){if(b.toolbar[c][e]===a){d={group:c,index:e};break}if(void 0!==d)break}void 0!==d&&(b.toolbar[d.group].slice(d.index,1),b._$element.children().eq(d.group).children().eq(d.index).remove())}})},addTool:function(a,b,e,f){c(a,b),angular.forEach(d,function(c){c.addTool(a,b,e,f)})},addToolToToolbar:function(a,b,e,f,g){c(a,b),d[e].addTool(a,b,f,g)},refreshEditor:function(a){if(!e[a])throw'textAngular Error: No Editor with name "'+a+'" exists';e[a].scope.updateTaBindtaTextElement(),e[a].scope.$$phase||e[a].scope.$digest()}}}]),q.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(a,b,c,d,e,f){return{scope:{name:"@"},restrict:"EA",link:function(g,h,i){if(!g.name||""===g.name)throw"textAngular Error: A toolbar requires a name";angular.extend(g,angular.copy(c)),i.taToolbar&&(g.toolbar=g.$parent.$eval(i.taToolbar)),i.taToolbarClass&&(g.classes.toolbar=i.taToolbarClass),i.taToolbarGroupClass&&(g.classes.toolbarGroup=i.taToolbarGroupClass),i.taToolbarButtonClass&&(g.classes.toolbarButton=i.taToolbarButtonClass),i.taToolbarActiveButtonClass&&(g.classes.toolbarButtonActive=i.taToolbarActiveButtonClass),i.taFocussedClass&&(g.classes.focussed=i.taFocussedClass),g.disabled=!0,g.focussed=!1,g._$element=h,h[0].innerHTML="",h.addClass("ta-toolbar "+g.classes.toolbar),g.$watch("focussed",function(){g.focussed?h.addClass(g.classes.focussed):h.removeClass(g.classes.focussed)});var j=function(b,c){var d;if(d=angular.element(b&&b.display?b.display:"<button type='button'>"),d.addClass(b&&b["class"]?b["class"]:g.classes.toolbarButton),d.attr("name",c.name),d.attr("unselectable","on"),d.attr("ng-disabled","isDisabled()"),d.attr("tabindex","-1"),d.attr("ng-click","executeAction()"),d.attr("ng-class","displayActiveToolClass(active)"),b&&b.tooltiptext&&d.attr("title",b.tooltiptext),d.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1}),b&&!b.display&&!c._display&&(d[0].innerHTML="",b.buttontext&&(d[0].innerHTML=b.buttontext),b.iconclass)){var e=angular.element("<i>"),f=d[0].innerHTML;e.addClass(b.iconclass),d[0].innerHTML="",d.append(e),f&&""!==f&&d.append("&nbsp;"+f)}return c._lastToolDefinition=angular.copy(b),a(d)(c)};g.tools={},g._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var k={$window:f,$editor:function(){return g._parent},isDisabled:function(){return"function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled},displayActiveToolClass:function(a){return a?g.classes.toolbarButtonActive:""},executeAction:e};angular.forEach(g.toolbar,function(a){var b=angular.element("<div>");b.addClass(g.classes.toolbarGroup),angular.forEach(a,function(a){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]),b.append(g.tools[a].$element)}),h.append(b)}),g.updateToolDisplay=function(a,b,c){var d=g.tools[a];if(d){if(d._lastToolDefinition&&!c&&(b=angular.extend({},d._lastToolDefinition,b)),null===b.buttontext&&null===b.iconclass&&null===b.display)throw'textAngular Error: Tool Definition for updating "'+a+'" does not have a valid display/iconclass/buttontext value';null===b.buttontext&&delete b.buttontext,null===b.iconclass&&delete b.iconclass,null===b.display&&delete b.display;var e=j(b,d);d.$element.replaceWith(e),d.$element=e}},g.addTool=function(a,b,c,e){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]);var f;void 0===c&&(c=g.toolbar.length-1),f=angular.element(h.children()[c]),void 0===e?(f.append(g.tools[a].$element),g.toolbar[c][g.toolbar[c].length-1]=a):(f.children().eq(e).after(g.tools[a].$element),g.toolbar[c][e]=a)},b.registerToolbar(g),g.$on("$destroy",function(){b.unregisterToolbar(g.name)})}}}])}()}({},function(){return this}());
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/resources/assets/vendor/textAngular/dist/textAngular.min.js","/resources/assets/vendor/textAngular/dist")

},{"_process":7,"buffer":3}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9sYXJhdmVsLWVsaXhpci1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluYXBwLmpzIiwibm9kZV9tb2R1bGVzL2pxdWVyeS9kaXN0L2pxdWVyeS5qcyIsIm5vZGVfbW9kdWxlcy9sYXJhdmVsLWVsaXhpci1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9idWZmZXIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvbGFyYXZlbC1lbGl4aXItYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnVmZmVyL25vZGVfbW9kdWxlcy9iYXNlNjQtanMvbGliL2I2NC5qcyIsIm5vZGVfbW9kdWxlcy9sYXJhdmVsLWVsaXhpci1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9idWZmZXIvbm9kZV9tb2R1bGVzL2llZWU3NTQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvbGFyYXZlbC1lbGl4aXItYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnVmZmVyL25vZGVfbW9kdWxlcy9pcy1hcnJheS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9sYXJhdmVsLWVsaXhpci1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvYmFzaWNkZXRhaWxjb250cm9sbGVyLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2Jpb2NvbnRyb2xsZXIuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvY29uZmlnY29udHJvbGxlci5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL2FsZXJ0ZGlyZWN0aXZlLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvY2xvc2Vjb250ZW50ZGlyZWN0aXZlLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvY29uZmlnbWVudS5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL2NvbnRlbnRzZWxlY3Rvci5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL2hhbGxvZGlyZWN0aXZlLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvcHJvZmlsZW1lbnUuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9yZXN1bWUvZWR1Y2F0aW9uLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvcmVzdW1lL2V4cGVyaWVuY2UuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9yZXN1bWUvaW50ZXJlc3QuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9yZXN1bWUvbGFuZ3VhZ2UuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9yZXN1bWUvcmVzdW1lZGlyZWN0aXZlLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvcmVzdW1lL3Jlc3VtZWVkaXRmb3JtLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvcmVzdW1lL3Jlc3VtZWZvcm0uanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9yZXN1bWUvcmVzdW1lc2VsZWN0b3IuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9yZXN1bWUvc2VjdGlvbnMuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9yZXN1bWUvc2tpbGwuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9zYWxlYWJsZWJhc2ljLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvc2FsZWFibGVkZXRhaWxzLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvc2FsZWFibGVkZXRhaWxzbGlzdC5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL3NhbGVhYmxlcHJpY2VzbGlzdC5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9ob21lY29udHJvbGxlci5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9yZXN1bWVjb250cm9sbGVyLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3NhbGVhYmxlYWxsZGV0YWlsc2NvbnRyb2xsZXIuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvc2FsZWFibGVjb250cm9sbGVyLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3NhbGVhYmxlZGV0YWlsY29udHJvbGxlci5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9zYWxlYWJsZXByaWNlc2NvbnRyb2xsZXIuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvYmlvZ3JhcGh5c2VydmljZS5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9lZHVjYXRpb24uanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvZXhwZXJpZW5jZS5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9maWxlcHJvY2Vzc29yLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL2Zvcm1hdGZpbHRlcnNlcnZpY2UuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvaGVscGVycy5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9pbnRlcmVzdC5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9sYW5ndWFnZS5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9tZXNzYWdlc2VydmljZS5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9uZXdwYXNzd29yZHNlcnZpY2UuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvcHJvZmlsZXNlcnZpY2UuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvcmVzdW1laGVscGVyLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3Jlc3VtZXNlcnZpY2UuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvc2FsZWFibGVkZXRhaWxzLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3NhbGVhYmxlcHJpY2UuanMiLCJyZXNvdXJjZXMvYXNzZXRzL2pzL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvc2FsZWFibGVzZXJ2aWNlLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3NraWxsLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3RoZXBhY2tlci5qcyIsInJlc291cmNlcy9hc3NldHMvanMvYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy91c2VyY29udGVudHR5cGVzZXJ2aWNlLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3VzZXJzZXJ2aWNlLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9hZG1pbi9hbmd1bGFyL3VzZXJjb250cm9sbGVyLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy9qcy9jb25maWcvbWVzc2FnZXMuanMiLCJyZXNvdXJjZXMvYXNzZXRzL3ZlbmRvci9hbmd1bGFyLW1lc3NhZ2VzL2FuZ3VsYXItbWVzc2FnZXMubWluLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy92ZW5kb3IvYW5ndWxhci1yZXN0bW9kL2Rpc3QvYW5ndWxhci1yZXN0bW9kLWJ1bmRsZS5qcyIsInJlc291cmNlcy9hc3NldHMvdmVuZG9yL2FuZ3VsYXItcmVzdG1vZC9kaXN0L3N0eWxlcy9hbXMubWluLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy92ZW5kb3IvYW5ndWxhci9hbmd1bGFyLWluZGV4LmpzIiwicmVzb3VyY2VzL2Fzc2V0cy92ZW5kb3IvYW5ndWxhci9hbmd1bGFyLm1pbi5qcyIsInJlc291cmNlcy9hc3NldHMvdmVuZG9yL2FuZ3VsYXJfYW5pbWF0ZS9hbmd1bGFyLWFuaW1hdGUubWluLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy92ZW5kb3IvYW5ndWxhcmpzLWZpbGUtdXBsb2FkL2FuZ3VsYXItZmlsZS11cGxvYWQtc2hpbS5taW4uanMiLCJyZXNvdXJjZXMvYXNzZXRzL3ZlbmRvci9hbmd1bGFyanMtZmlsZS11cGxvYWQvYW5ndWxhci1maWxlLXVwbG9hZC5taW4uanMiLCJyZXNvdXJjZXMvYXNzZXRzL3ZlbmRvci9uZy1mYWItZm9ybS9kaXN0L25nLWZhYi1mb3JtLm1pbi5qcyIsInJlc291cmNlcy9hc3NldHMvdmVuZG9yL3RleHRBbmd1bGFyL2Rpc3QvdGV4dEFuZ3VsYXItcmFuZ3kubWluLmpzIiwicmVzb3VyY2VzL2Fzc2V0cy92ZW5kb3IvdGV4dEFuZ3VsYXIvZGlzdC90ZXh0QW5ndWxhci1zYW5pdGl6ZS5taW4uanMiLCJyZXNvdXJjZXMvYXNzZXRzL3ZlbmRvci90ZXh0QW5ndWxhci9kaXN0L3RleHRBbmd1bGFyLm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3ROQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3IvUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3B5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUM1SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDcEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ2pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN6REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUMxREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDbkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3JCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ25IQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNySEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDMUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQzFGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3BHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQzFGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDNUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDakRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDM0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUM1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3JCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQzFrSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUMxUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ2hDQTtBQUNBOzs7OztBQ0RBO0FBQ0E7Ozs7O0FDREE7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnXG52YXIgSlF1ZXJ5ID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJy4vLi4vdmVuZG9yL2FuZ3VsYXIvYW5ndWxhci1pbmRleC5qcycpO1xudmFyIGFuZ3VsYXJfcmVzdG1vZCA9IHJlcXVpcmUoJy4vLi4vdmVuZG9yL2FuZ3VsYXItcmVzdG1vZC9kaXN0L2FuZ3VsYXItcmVzdG1vZC1idW5kbGUuanMnKTtcbnZhciByZXNfc3R5bGUgPSByZXF1aXJlKCcuLy4uL3ZlbmRvci9hbmd1bGFyLXJlc3Rtb2QvZGlzdC9zdHlsZXMvYW1zLm1pbi5qcycpO1xudmFyIHN0Y19tZXNzYWdlcyA9IHJlcXVpcmUoJy4vY29uZmlnL21lc3NhZ2VzLmpzJyk7XG5cblxudmFyIG5nRmFiRm9ybSA9IHJlcXVpcmUoJy4vLi4vdmVuZG9yL25nLWZhYi1mb3JtL2Rpc3QvbmctZmFiLWZvcm0ubWluLmpzJyk7XG52YXIgbmdNZXNzYWdlcyA9IHJlcXVpcmUoJy4vLi4vdmVuZG9yL2FuZ3VsYXItbWVzc2FnZXMvYW5ndWxhci1tZXNzYWdlcy5taW4uanMnKTtcblxudmFyIHRleHRBbmd1bGFyID0gcmVxdWlyZSgnLi8uLi92ZW5kb3IvdGV4dEFuZ3VsYXIvZGlzdC90ZXh0QW5ndWxhci1yYW5neS5taW4uanMnKTtcbnZhciBzYW5pdGl6ZSA9IHJlcXVpcmUoJy4vLi4vdmVuZG9yL3RleHRBbmd1bGFyL2Rpc3QvdGV4dEFuZ3VsYXItc2FuaXRpemUubWluLmpzJyk7XG52YXIgcmFuZ3kgPSByZXF1aXJlKCcuLy4uL3ZlbmRvci90ZXh0QW5ndWxhci9kaXN0L3RleHRBbmd1bGFyLm1pbi5qcycpO1xuXG52YXIgdXBsb2FkTGlicDEgPSByZXF1aXJlKCcuLi92ZW5kb3IvYW5ndWxhcmpzLWZpbGUtdXBsb2FkL2FuZ3VsYXItZmlsZS11cGxvYWQtc2hpbS5taW4uanMnKTtcbnZhciB1cGxvYWRMaWJwMiA9IHJlcXVpcmUoJy4uL3ZlbmRvci9hbmd1bGFyanMtZmlsZS11cGxvYWQvYW5ndWxhci1maWxlLXVwbG9hZC5taW4uanMnKTtcblxudmFyIG5nYW5pbWF0ZSA9IHJlcXVpcmUoJy4vLi4vdmVuZG9yL2FuZ3VsYXJfYW5pbWF0ZS9hbmd1bGFyLWFuaW1hdGUubWluLmpzJyk7XG5cblxudmFyIHByZlh5ekFwcCA9IGFuZ3VsYXIubW9kdWxlKCdwcmZYeXpBcHAnLFsncmVzdG1vZCcsJ25nRmFiRm9ybScsJ25nTWVzc2FnZXMnLCd0ZXh0QW5ndWxhcicsJ2FuZ3VsYXJGaWxlVXBsb2FkJywnbmdBbmltYXRlJ10pO1xuXG5wcmZYeXpBcHAuY29uZmlnKFsncmVzdG1vZFByb3ZpZGVyJywnJGh0dHBQcm92aWRlcicsJ25nRmFiRm9ybVByb3ZpZGVyJyxmdW5jdGlvbihyZXN0bW9kUHJvdmlkZXIsICRodHRwUHJvdmlkZXIsbmdGYWJGb3JtUHJvdmlkZXIpIHtcbiAgICByZXN0bW9kUHJvdmlkZXIucmViYXNlKCdBTVNBcGknKTtcbiAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXSA9IFwiWE1MSHR0cFJlcXVlc3RcIjtcbiAgICByZXN0bW9kUHJvdmlkZXIucmViYXNlKCdEZWZhdWx0UGFja2VyJyk7XG5cbiAgICBuZ0ZhYkZvcm1Qcm92aWRlci5leHRlbmRDb25maWcoe1xuICAgICAgICB2YWxpZGF0aW9uc1RlbXBsYXRlIDogJy4uLy4uL2pzL2FkbWluL2FuZ3VsYXIvdGVtcGxhdGVzL2N1c3RvbVZhbGlkYXRpb25UZW1wbGF0ZS5odG1sJ1xuICAgICAgICAvKixzZXRGb3JtRGlydHlPblN1Ym1pdDogdHJ1ZSovXG4gICAgfSk7XG5cbiAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKGZ1bmN0aW9uKCRxLCRyb290U2NvcGUsJHRpbWVvdXQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICdyZXF1ZXN0JzogZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zaG93U3lzdGVtQWxlcnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnNob3dTcGlubmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgJ3Jlc3BvbnNlJzogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnNob3dTcGlubmVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdyZXF1ZXN0RXJyb3InOmZ1bmN0aW9uKHJlamVjdGlvbil7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVqZWN0aW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlamVjdGlvbik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3Jlc3BvbnNlRXJyb3InOmZ1bmN0aW9uKHJlamVjdGlvbil7XG5cbiAgICAgICAgICAgICAgICB2YXIgc3RhdHVzID0gcmVqZWN0aW9uLnN0YXR1cztcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHN0YXR1cyl7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zaG93U3Bpbm5lciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zaG93U3lzdGVtQWxlcnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zeXN0ZW1BbGVydCA9IFwiSGEgY2FkdWNhZG8gdHUgc2VzacOzbi4gRGViZXMgaW5ncmVzYXIgbnVldmFtZW50ZSFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IFwiL2F1dGgvbG9nb3V0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LDQwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zaG93U3Bpbm5lciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnNob3dTeXN0ZW1BbGVydCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuc2hvd1N5c3RlbUFsZXJ0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuc3lzdGVtQWxlcnQgPSBcIlZheWEhIDooIEh1Ym8gdW4gcHJvYmxlbWEgZW4gbGEgcmVzcHVlc3RhIGRlbCBzZXJ2aWRvci4gPGJyPlwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUG9yIGZhdm9yIGludGVudGEgbGEgYWNjacOzbiBudWV2YW1lbnRlIG8gY29udGFjdGEgYWwgQWRtaW5pc3RyYWRvclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zaG93U3Bpbm5lciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnNob3dTeXN0ZW1BbGVydCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuc2hvd1N5c3RlbUFsZXJ0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuc3lzdGVtQWxlcnQgPSBcIlZheWEhIDooIE5vIHNlIGVuY29udHLDsyBlbCBzZXJ2aWNpbyBxdWUgcmVxdWllcmVzLiA8YnI+XCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJQb3IgZmF2b3IgaW50ZW50YSBsYSBhY2Npw7NuIG51ZXZhbWVudGUgbyBjb250YWN0YSBhbCBBZG1pbmlzdHJhZG9yXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgLypjYXNlIDQxMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vJHJvb3RTY29wZS5tZXNzYWdlVHlwZSA9ICdkYW5nZXInO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8kcm9vdFNjb3BlLmZpbGVUb29MYXJnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyRyb290U2NvcGUuZmlsZVRvb0xhcmdlTWVzc2FnZSA9IFwiRXN0w6EgaW50ZW50YW5kbyBzdWJpciB1biBhcmNoaXZvIGRlbWFzaWFkbyBwZXNhZG8uIEVsIGFyY2hpdm8gbm8gZGViZSBzdXBlcmFyIGxvcyA1TUJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiRXN0w6EgaW50ZW50YW5kbyBzdWJpciB1biBhcmNoaXZvIGRlbWFzaWFkbyBwZXNhZG8uIEVsIGFyY2hpdm8gbm8gZGViZSBzdXBlcmFyIGxvcyA1TUJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyovXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQgOlxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zaG93U3Bpbm5lciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnNob3dTeXN0ZW1BbGVydCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuc2hvd1N5c3RlbUFsZXJ0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuc3lzdGVtQWxlcnQgPSBcIlNlIGRldGVjdMOzIHVuIHByb2JsZW1hIGRlIGNvbmV4acOzbi4gPGJyPlwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUG9yIGZhdm9yIGNvbXBydWViYSBxdWUgZXN0w6FzIGNvbmVjdGFkYS9vIGEgdW5hIHJlZC4gU2kgcGVyc2lzdGVuIGxvcyBwcm9ibGVtYXMsIDxicj4gcG9yIGZhdm9yIGNvbnRhY3RhIGFsIEFkbWluaXN0cmFkb3IuXCI7XG5cblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlamVjdGlvbik7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcblxufV0pO1xuXG52YXIgaG9tZUNvbnRyb2xsZXIgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvaG9tZWNvbnRyb2xsZXInKTtcbnZhciBiaW9Db250cm9sbGVyID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL2Jpb2NvbnRyb2xsZXInKTtcbnZhciB1c2VyQ29udHJvbGxlciA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci91c2VyY29udHJvbGxlcicpO1xudmFyIGNvbmZpZ0NvbnRyb2xsZXIgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvY29uZmlnY29udHJvbGxlcicpO1xudmFyIHNhbGVhYmxlQ29udHJvbGxlciA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zYWxlYWJsZWNvbnRyb2xsZXInKTtcbnZhciBzYWxlYWJsZURldGFpbENvbnRyb2xsZXIgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvc2FsZWFibGVkZXRhaWxjb250cm9sbGVyJyk7XG52YXIgc2FsZWFibGVCYXNpY0NvbnRyb2xsZXIgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvYmFzaWNkZXRhaWxjb250cm9sbGVyJyk7XG52YXIgc2FsZWFibGVBbGxEZXRhaWxzQ29udHJvbGxlciA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zYWxlYWJsZWFsbGRldGFpbHNjb250cm9sbGVyJyk7XG52YXIgc2FsZWFibGVQcmljZUNvbnRyb2xsZXIgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvc2FsZWFibGVwcmljZXNjb250cm9sbGVyJyk7XG52YXIgcmVzdW1lQ29udHJvbGxlciA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9yZXN1bWVjb250cm9sbGVyJyk7XG5cbnZhciBtZXNzYWdlU2VydmljZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9tZXNzYWdlc2VydmljZScpO1xudmFyIHVzZXJTZXJ2aWNlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3VzZXJzZXJ2aWNlJyk7XG52YXIgdXNlckNvbnRlbnRUeXBlU2VydmljZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy91c2VyY29udGVudHR5cGVzZXJ2aWNlJyk7XG52YXIgcHJvZmlsZVNlcnZpY2UgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvcHJvZmlsZXNlcnZpY2UnKTtcbnZhciBzYWxlYWJsZVNlcnZpY2UgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvc2FsZWFibGVzZXJ2aWNlJyk7XG52YXIgYmlvU2VydmljZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9iaW9ncmFwaHlzZXJ2aWNlJyk7XG52YXIgdGhlUGFja2VyID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3RoZXBhY2tlcicpO1xudmFyIHNhbGVhYmxlRGV0YWlsU2VydmljZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9zYWxlYWJsZWRldGFpbHMnKTtcbnZhciBzYWxlYWJsZVByaWNlU2VydmljZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9zYWxlYWJsZXByaWNlJyk7XG52YXIgbmV3UGFzc3dvcmQgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvbmV3cGFzc3dvcmRzZXJ2aWNlJyk7XG52YXIgbnVtYmVyRm9ybWF0ID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL2Zvcm1hdGZpbHRlcnNlcnZpY2UnKTtcbnZhciBmaWxlUHJvY2Vzc29yID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL2ZpbGVwcm9jZXNzb3InKTtcbnZhciByZXN1bWVTZXJ2aWNlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL3Jlc3VtZXNlcnZpY2UnKTtcbnZhciByZXN1bWVIZWxwZXIgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvcmVzdW1laGVscGVyJyk7XG52YXIgZXhwZXJpZW5jZVNlcnZpY2UgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvc2VydmljZXMvZXhwZXJpZW5jZScpO1xudmFyIGhlbHBlcnNTZXJ2aWNlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL2hlbHBlcnMnKTtcbnZhciBlZHVjYXRpb25TZXJ2aWNlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL3NlcnZpY2VzL2VkdWNhdGlvbicpO1xudmFyIHNraWxsU2VydmljZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9za2lsbCcpO1xudmFyIGxhbmd1YWdlU2VydmljZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9sYW5ndWFnZScpO1xudmFyIGludGVyZXN0U2VydmljZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9zZXJ2aWNlcy9pbnRlcmVzdCcpO1xuXG52YXIgYWxlcnREaXJlY3RpdmUgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9hbGVydGRpcmVjdGl2ZScpO1xudmFyIGNsb3NlQ29udGVudERpcmVjdGl2ZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL2Nsb3NlY29udGVudGRpcmVjdGl2ZScpO1xudmFyIGNvbnRlbnRTZWxlY3RvckRpcmVjdGl2ZSA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL2NvbnRlbnRzZWxlY3RvcicpO1xudmFyIHByb2RpbGVNZW51RGlyZWN0aXZlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvcHJvZmlsZW1lbnUnKTtcbnZhciBjb25maWdNZW51RGlyZWN0aXZlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvY29uZmlnbWVudScpO1xuXG52YXIgcmVzdW1lU2VsZWN0b3JEaXJlY3RpdmUgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9yZXN1bWUvcmVzdW1lc2VsZWN0b3InKTtcbnZhciByZXN1bWVEaXJlY3RpdmUgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9yZXN1bWUvcmVzdW1lZGlyZWN0aXZlJyk7XG52YXIgcmVzdW1lRWRpdEZvcm0gPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9yZXN1bWUvcmVzdW1lZWRpdGZvcm0nKTtcbnZhciByZXN1bWVGb3JtID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvcmVzdW1lL3Jlc3VtZWZvcm0nKTtcbnZhciByZXN1bWVFeHBlcmllbmNlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvcmVzdW1lL2V4cGVyaWVuY2UnKTtcbnZhciByZXN1bWVTZWN0aW9ucyA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL3Jlc3VtZS9zZWN0aW9ucycpO1xudmFyIHJlc3VtZUVkdWNhdGlvbiA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL3Jlc3VtZS9lZHVjYXRpb24nKTtcbnZhciByZXN1bWVTa2lsbCA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL3Jlc3VtZS9za2lsbCcpO1xudmFyIHJlc3VtZUxhbmd1YWdlID0gcmVxdWlyZSgnLi9hZG1pbi9hbmd1bGFyL2RpcmVjdGl2ZXMvcmVzdW1lL2xhbmd1YWdlJyk7XG52YXIgcmVzdW1lSW50ZXJlc3QgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9yZXN1bWUvaW50ZXJlc3QnKTtcblxudmFyIHNhbGVhYmxlRGV0YWlscyA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL3NhbGVhYmxlZGV0YWlscycpO1xudmFyIHNhbGVhYmxlQmFzaWMgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9zYWxlYWJsZWJhc2ljJyk7XG52YXIgc2FsZWFibGVEZXRhaWxzTGlzdCA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL3NhbGVhYmxlZGV0YWlsc2xpc3QnKTtcbnZhciBzYWxlYWJsZVByaWNlc0xpc3QgPSByZXF1aXJlKCcuL2FkbWluL2FuZ3VsYXIvZGlyZWN0aXZlcy9zYWxlYWJsZXByaWNlc2xpc3QnKTtcbnZhciBoYWxsb0VkaXRvciA9IHJlcXVpcmUoJy4vYWRtaW4vYW5ndWxhci9kaXJlY3RpdmVzL2hhbGxvZGlyZWN0aXZlJyk7XG5cblxucHJmWHl6QXBwLmZhY3RvcnkoJ01lc3NhZ2VzJyxbc3RjX21lc3NhZ2VzXSk7XG5wcmZYeXpBcHAuZmFjdG9yeSgnTWVzc2FnZVNlcnZpY2UnLFsnTWVzc2FnZXMnLCckdGltZW91dCcsbWVzc2FnZVNlcnZpY2VdKTtcbnByZlh5ekFwcC5mYWN0b3J5KCdVc2VyU2VydmljZScsWydyZXN0bW9kJyx1c2VyU2VydmljZV0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ1Byb2ZpbGVTZXJ2aWNlJyxbJ3Jlc3Rtb2QnLHByb2ZpbGVTZXJ2aWNlXSk7XG5wcmZYeXpBcHAuZmFjdG9yeSgnU2FsZWFibGVTZXJ2aWNlJyxbJ3Jlc3Rtb2QnLHNhbGVhYmxlU2VydmljZV0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ1NhbGVhYmxlRGV0YWlsc1NlcnZpY2UnLFsncmVzdG1vZCcsc2FsZWFibGVEZXRhaWxTZXJ2aWNlXSk7XG5wcmZYeXpBcHAuZmFjdG9yeSgnU2FsZWFibGVQcmljZVNlcnZpY2UnLFsncmVzdG1vZCcsc2FsZWFibGVQcmljZVNlcnZpY2VdKTtcbnByZlh5ekFwcC5mYWN0b3J5KCdVc2VyQ29udGVudFR5cGUnLFsncmVzdG1vZCcsdXNlckNvbnRlbnRUeXBlU2VydmljZV0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ0Jpb2dyYXBoeVNlcnZpY2UnLFsncmVzdG1vZCcsYmlvU2VydmljZV0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ1RoZVBhY2tlcicsW3RoZVBhY2tlcl0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ05ld1Bhc3N3b3JkJyxbJyRodHRwJyxuZXdQYXNzd29yZF0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ051bWJlckZvcm1hdEZpbHRlcicsW251bWJlckZvcm1hdF0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ0ZpbGVQcm9jZXNzb3InLFsnJHVwbG9hZCcsJyRodHRwJywnTWVzc2FnZVNlcnZpY2UnLGZpbGVQcm9jZXNzb3JdKTtcbnByZlh5ekFwcC5mYWN0b3J5KCdSZXN1bWUnLFsncmVzdG1vZCcscmVzdW1lU2VydmljZV0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ0V4cGVyaWVuY2UnLFsncmVzdG1vZCcsZXhwZXJpZW5jZVNlcnZpY2VdKTtcbnByZlh5ekFwcC5mYWN0b3J5KCdSZXN1bWVIZWxwZXInLFsnJGh0dHAnLCdNZXNzYWdlU2VydmljZScscmVzdW1lSGVscGVyXSk7XG5wcmZYeXpBcHAuZmFjdG9yeSgnSGVscGVyJyxbaGVscGVyc1NlcnZpY2VdKTtcbnByZlh5ekFwcC5mYWN0b3J5KCdFZHVjYXRpb24nLFsncmVzdG1vZCcsZWR1Y2F0aW9uU2VydmljZV0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ1NraWxsJyxbJ3Jlc3Rtb2QnLHNraWxsU2VydmljZV0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ0xhbmd1YWdlJyxbJ3Jlc3Rtb2QnLGxhbmd1YWdlU2VydmljZV0pO1xucHJmWHl6QXBwLmZhY3RvcnkoJ0ludGVyZXN0JyxbJ3Jlc3Rtb2QnLGludGVyZXN0U2VydmljZV0pO1xuXG5wcmZYeXpBcHAuZGlyZWN0aXZlKCdhbGVydCcsW2FsZXJ0RGlyZWN0aXZlXSk7XG5wcmZYeXpBcHAuZGlyZWN0aXZlKCdjbG9zZUNvbnRlbnQnLFtjbG9zZUNvbnRlbnREaXJlY3RpdmVdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ2NvbnRlbnRTZWxlY3RvcicsWydNZXNzYWdlU2VydmljZScsJ1VzZXJDb250ZW50VHlwZScsY29udGVudFNlbGVjdG9yRGlyZWN0aXZlXSk7XG5wcmZYeXpBcHAuZGlyZWN0aXZlKCdwcm9maWxlTWVudScsW3Byb2RpbGVNZW51RGlyZWN0aXZlXSk7XG5wcmZYeXpBcHAuZGlyZWN0aXZlKCdjb25maWdNZW51JyxbY29uZmlnTWVudURpcmVjdGl2ZV0pO1xucHJmWHl6QXBwLmRpcmVjdGl2ZSgnc2FsZWFibGVEZXRhaWxzJyxbJyR0ZW1wbGF0ZUNhY2hlJywnJGNvbXBpbGUnLCckcm9vdFNjb3BlJyxzYWxlYWJsZURldGFpbHNdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3NhbGVhYmxlQmFzaWMnLFsnU2FsZWFibGVTZXJ2aWNlJyxzYWxlYWJsZUJhc2ljXSk7XG5wcmZYeXpBcHAuZGlyZWN0aXZlKCdzYWxlYWJsZURldGFpbHNMaXN0Jyxbc2FsZWFibGVEZXRhaWxzTGlzdF0pO1xucHJmWHl6QXBwLmRpcmVjdGl2ZSgnc2FsZWFibGVQcmljZXNMaXN0Jyxbc2FsZWFibGVQcmljZXNMaXN0XSk7XG5wcmZYeXpBcHAuZGlyZWN0aXZlKCdoYWxsbycsW2hhbGxvRWRpdG9yXSk7XG5wcmZYeXpBcHAuZGlyZWN0aXZlKCdyZXN1bWVTZWxlY3RvcicsWydNZXNzYWdlU2VydmljZScscmVzdW1lU2VsZWN0b3JEaXJlY3RpdmVdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3Jlc3VtZScsWydNZXNzYWdlU2VydmljZScsJ1Jlc3VtZScsJyR0aW1lb3V0JywnUmVzdW1lSGVscGVyJyxyZXN1bWVEaXJlY3RpdmVdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3Jlc3VtZUVkaXRGb3JtJyxbJ01lc3NhZ2VTZXJ2aWNlJywnUmVzdW1lJywnJHRpbWVvdXQnLHJlc3VtZUVkaXRGb3JtXSk7XG5wcmZYeXpBcHAuZGlyZWN0aXZlKCdyZXN1bWVGb3JtJyxbJ01lc3NhZ2VTZXJ2aWNlJywnUmVzdW1lJywnJHRpbWVvdXQnLHJlc3VtZUZvcm1dKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3Jlc3VtZUV4cGVyaWVuY2UnLFsnTWVzc2FnZVNlcnZpY2UnLCdFeHBlcmllbmNlJywnJHRpbWVvdXQnLCdIZWxwZXInLHJlc3VtZUV4cGVyaWVuY2VdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3Jlc3VtZVNlY3Rpb25zJyxbJ1Jlc3VtZScscmVzdW1lU2VjdGlvbnNdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3Jlc3VtZUVkdWNhdGlvbicsWydNZXNzYWdlU2VydmljZScsJ0VkdWNhdGlvbicsJyR0aW1lb3V0JywnSGVscGVyJyxyZXN1bWVFZHVjYXRpb25dKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3Jlc3VtZVNraWxsJyxbJ01lc3NhZ2VTZXJ2aWNlJywnU2tpbGwnLCckdGltZW91dCcsJ0hlbHBlcicscmVzdW1lU2tpbGxdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3Jlc3VtZUxhbmd1YWdlJyxbJ01lc3NhZ2VTZXJ2aWNlJywnTGFuZ3VhZ2UnLCckdGltZW91dCcsJ0hlbHBlcicscmVzdW1lTGFuZ3VhZ2VdKTtcbnByZlh5ekFwcC5kaXJlY3RpdmUoJ3Jlc3VtZUludGVyZXN0JyxbJ01lc3NhZ2VTZXJ2aWNlJywnSW50ZXJlc3QnLCckdGltZW91dCcsJ0hlbHBlcicscmVzdW1lSW50ZXJlc3RdKTtcblxucHJmWHl6QXBwLmNvbnRyb2xsZXIoJ0hvbWVDdHJsJyxbJyRzY29wZScsJ1VzZXJTZXJ2aWNlJywnVXNlckNvbnRlbnRUeXBlJyxob21lQ29udHJvbGxlcl0pO1xucHJmWHl6QXBwLmNvbnRyb2xsZXIoJ0Jpb0N0cmwnLFsnJHNjb3BlJywnQmlvZ3JhcGh5U2VydmljZScsJ01lc3NhZ2VTZXJ2aWNlJyxiaW9Db250cm9sbGVyXSk7XG5wcmZYeXpBcHAuY29udHJvbGxlcignVXNlckN0cmwnLFsnJHNjb3BlJywnJHRpbWVvdXQnLCdVc2VyU2VydmljZScsJ1Byb2ZpbGVTZXJ2aWNlJywnTWVzc2FnZVNlcnZpY2UnLCdOZXdQYXNzd29yZCcsdXNlckNvbnRyb2xsZXJdKTtcbnByZlh5ekFwcC5jb250cm9sbGVyKCdDb25maWdDdHJsJyxbJyRzY29wZScsJyR0aW1lb3V0JywnTWVzc2FnZVNlcnZpY2UnLCdVc2VyQ29udGVudFR5cGUnLGNvbmZpZ0NvbnRyb2xsZXJdKTtcblxucHJmWHl6QXBwLmNvbnRyb2xsZXIoJ1NhbGVhYmxlQ3RybCcsWyckc2NvcGUnLCckcm9vdFNjb3BlJywnJHRpbWVvdXQnLCdTYWxlYWJsZVNlcnZpY2UnLCdNZXNzYWdlU2VydmljZScsJ1NhbGVhYmxlRGV0YWlsc1NlcnZpY2UnLHNhbGVhYmxlQ29udHJvbGxlcl0pO1xucHJmWHl6QXBwLmNvbnRyb2xsZXIoJ1NhbGVhYmxlRGV0YWlsQ3RybCcsWyckc2NvcGUnLCckcm9vdFNjb3BlJywnU2FsZWFibGVTZXJ2aWNlJywnTWVzc2FnZVNlcnZpY2UnLCckZWxlbWVudCcsJyRjb21waWxlJyxzYWxlYWJsZURldGFpbENvbnRyb2xsZXJdKTtcbnByZlh5ekFwcC5jb250cm9sbGVyKCdzYWxlYWJsZUJhc2ljQ3RybCcsWyckc2NvcGUnLCckcm9vdFNjb3BlJywnU2FsZWFibGVTZXJ2aWNlJywnTWVzc2FnZVNlcnZpY2UnLHNhbGVhYmxlQmFzaWNDb250cm9sbGVyXSk7XG5wcmZYeXpBcHAuY29udHJvbGxlcignc2FsZWFibGVBbGxEZXRhaWxzQ3RybCcsWyckc2NvcGUnLCckcm9vdFNjb3BlJywnU2FsZWFibGVEZXRhaWxzU2VydmljZScsJ01lc3NhZ2VTZXJ2aWNlJywnRmlsZVByb2Nlc3Nvcicsc2FsZWFibGVBbGxEZXRhaWxzQ29udHJvbGxlcl0pO1xucHJmWHl6QXBwLmNvbnRyb2xsZXIoJ3NhbGVhYmxlUHJpY2VDdHJsJyxbJyRzY29wZScsJyRyb290U2NvcGUnLCdTYWxlYWJsZVByaWNlU2VydmljZScsJ01lc3NhZ2VTZXJ2aWNlJyxzYWxlYWJsZVByaWNlQ29udHJvbGxlcl0pO1xucHJmWHl6QXBwLmNvbnRyb2xsZXIoJ3Jlc3VtZUN0cmwnLFsnJHNjb3BlJywnJHJvb3RTY29wZScsJ1Jlc3VtZUhlbHBlcicsJ01lc3NhZ2VTZXJ2aWNlJyxyZXN1bWVDb250cm9sbGVyXSk7IiwiLyohXG4gKiBqUXVlcnkgSmF2YVNjcmlwdCBMaWJyYXJ5IHYyLjEuM1xuICogaHR0cDovL2pxdWVyeS5jb20vXG4gKlxuICogSW5jbHVkZXMgU2l6emxlLmpzXG4gKiBodHRwOi8vc2l6emxlanMuY29tL1xuICpcbiAqIENvcHlyaWdodCAyMDA1LCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIERhdGU6IDIwMTQtMTItMThUMTU6MTFaXG4gKi9cblxuKGZ1bmN0aW9uKCBnbG9iYWwsIGZhY3RvcnkgKSB7XG5cblx0aWYgKCB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIiApIHtcblx0XHQvLyBGb3IgQ29tbW9uSlMgYW5kIENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHdoZXJlIGEgcHJvcGVyIGB3aW5kb3dgXG5cdFx0Ly8gaXMgcHJlc2VudCwgZXhlY3V0ZSB0aGUgZmFjdG9yeSBhbmQgZ2V0IGpRdWVyeS5cblx0XHQvLyBGb3IgZW52aXJvbm1lbnRzIHRoYXQgZG8gbm90IGhhdmUgYSBgd2luZG93YCB3aXRoIGEgYGRvY3VtZW50YFxuXHRcdC8vIChzdWNoIGFzIE5vZGUuanMpLCBleHBvc2UgYSBmYWN0b3J5IGFzIG1vZHVsZS5leHBvcnRzLlxuXHRcdC8vIFRoaXMgYWNjZW50dWF0ZXMgdGhlIG5lZWQgZm9yIHRoZSBjcmVhdGlvbiBvZiBhIHJlYWwgYHdpbmRvd2AuXG5cdFx0Ly8gZS5nLiB2YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKSh3aW5kb3cpO1xuXHRcdC8vIFNlZSB0aWNrZXQgIzE0NTQ5IGZvciBtb3JlIGluZm8uXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwuZG9jdW1lbnQgP1xuXHRcdFx0ZmFjdG9yeSggZ2xvYmFsLCB0cnVlICkgOlxuXHRcdFx0ZnVuY3Rpb24oIHcgKSB7XG5cdFx0XHRcdGlmICggIXcuZG9jdW1lbnQgKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCBcImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnRcIiApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBmYWN0b3J5KCB3ICk7XG5cdFx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdGZhY3RvcnkoIGdsb2JhbCApO1xuXHR9XG5cbi8vIFBhc3MgdGhpcyBpZiB3aW5kb3cgaXMgbm90IGRlZmluZWQgeWV0XG59KHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiggd2luZG93LCBub0dsb2JhbCApIHtcblxuLy8gU3VwcG9ydDogRmlyZWZveCAxOCtcbi8vIENhbid0IGJlIGluIHN0cmljdCBtb2RlLCBzZXZlcmFsIGxpYnMgaW5jbHVkaW5nIEFTUC5ORVQgdHJhY2Vcbi8vIHRoZSBzdGFjayB2aWEgYXJndW1lbnRzLmNhbGxlci5jYWxsZWUgYW5kIEZpcmVmb3ggZGllcyBpZlxuLy8geW91IHRyeSB0byB0cmFjZSB0aHJvdWdoIFwidXNlIHN0cmljdFwiIGNhbGwgY2hhaW5zLiAoIzEzMzM1KVxuLy9cblxudmFyIGFyciA9IFtdO1xuXG52YXIgc2xpY2UgPSBhcnIuc2xpY2U7XG5cbnZhciBjb25jYXQgPSBhcnIuY29uY2F0O1xuXG52YXIgcHVzaCA9IGFyci5wdXNoO1xuXG52YXIgaW5kZXhPZiA9IGFyci5pbmRleE9mO1xuXG52YXIgY2xhc3MydHlwZSA9IHt9O1xuXG52YXIgdG9TdHJpbmcgPSBjbGFzczJ0eXBlLnRvU3RyaW5nO1xuXG52YXIgaGFzT3duID0gY2xhc3MydHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxudmFyIHN1cHBvcnQgPSB7fTtcblxuXG5cbnZhclxuXHQvLyBVc2UgdGhlIGNvcnJlY3QgZG9jdW1lbnQgYWNjb3JkaW5nbHkgd2l0aCB3aW5kb3cgYXJndW1lbnQgKHNhbmRib3gpXG5cdGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50LFxuXG5cdHZlcnNpb24gPSBcIjIuMS4zXCIsXG5cblx0Ly8gRGVmaW5lIGEgbG9jYWwgY29weSBvZiBqUXVlcnlcblx0alF1ZXJ5ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXHRcdC8vIFRoZSBqUXVlcnkgb2JqZWN0IGlzIGFjdHVhbGx5IGp1c3QgdGhlIGluaXQgY29uc3RydWN0b3IgJ2VuaGFuY2VkJ1xuXHRcdC8vIE5lZWQgaW5pdCBpZiBqUXVlcnkgaXMgY2FsbGVkIChqdXN0IGFsbG93IGVycm9yIHRvIGJlIHRocm93biBpZiBub3QgaW5jbHVkZWQpXG5cdFx0cmV0dXJuIG5ldyBqUXVlcnkuZm4uaW5pdCggc2VsZWN0b3IsIGNvbnRleHQgKTtcblx0fSxcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMVxuXHQvLyBNYWtlIHN1cmUgd2UgdHJpbSBCT00gYW5kIE5CU1Bcblx0cnRyaW0gPSAvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csXG5cblx0Ly8gTWF0Y2hlcyBkYXNoZWQgc3RyaW5nIGZvciBjYW1lbGl6aW5nXG5cdHJtc1ByZWZpeCA9IC9eLW1zLS8sXG5cdHJkYXNoQWxwaGEgPSAvLShbXFxkYS16XSkvZ2ksXG5cblx0Ly8gVXNlZCBieSBqUXVlcnkuY2FtZWxDYXNlIGFzIGNhbGxiYWNrIHRvIHJlcGxhY2UoKVxuXHRmY2FtZWxDYXNlID0gZnVuY3Rpb24oIGFsbCwgbGV0dGVyICkge1xuXHRcdHJldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKTtcblx0fTtcblxualF1ZXJ5LmZuID0galF1ZXJ5LnByb3RvdHlwZSA9IHtcblx0Ly8gVGhlIGN1cnJlbnQgdmVyc2lvbiBvZiBqUXVlcnkgYmVpbmcgdXNlZFxuXHRqcXVlcnk6IHZlcnNpb24sXG5cblx0Y29uc3RydWN0b3I6IGpRdWVyeSxcblxuXHQvLyBTdGFydCB3aXRoIGFuIGVtcHR5IHNlbGVjdG9yXG5cdHNlbGVjdG9yOiBcIlwiLFxuXG5cdC8vIFRoZSBkZWZhdWx0IGxlbmd0aCBvZiBhIGpRdWVyeSBvYmplY3QgaXMgMFxuXHRsZW5ndGg6IDAsXG5cblx0dG9BcnJheTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNsaWNlLmNhbGwoIHRoaXMgKTtcblx0fSxcblxuXHQvLyBHZXQgdGhlIE50aCBlbGVtZW50IGluIHRoZSBtYXRjaGVkIGVsZW1lbnQgc2V0IE9SXG5cdC8vIEdldCB0aGUgd2hvbGUgbWF0Y2hlZCBlbGVtZW50IHNldCBhcyBhIGNsZWFuIGFycmF5XG5cdGdldDogZnVuY3Rpb24oIG51bSApIHtcblx0XHRyZXR1cm4gbnVtICE9IG51bGwgP1xuXG5cdFx0XHQvLyBSZXR1cm4ganVzdCB0aGUgb25lIGVsZW1lbnQgZnJvbSB0aGUgc2V0XG5cdFx0XHQoIG51bSA8IDAgPyB0aGlzWyBudW0gKyB0aGlzLmxlbmd0aCBdIDogdGhpc1sgbnVtIF0gKSA6XG5cblx0XHRcdC8vIFJldHVybiBhbGwgdGhlIGVsZW1lbnRzIGluIGEgY2xlYW4gYXJyYXlcblx0XHRcdHNsaWNlLmNhbGwoIHRoaXMgKTtcblx0fSxcblxuXHQvLyBUYWtlIGFuIGFycmF5IG9mIGVsZW1lbnRzIGFuZCBwdXNoIGl0IG9udG8gdGhlIHN0YWNrXG5cdC8vIChyZXR1cm5pbmcgdGhlIG5ldyBtYXRjaGVkIGVsZW1lbnQgc2V0KVxuXHRwdXNoU3RhY2s6IGZ1bmN0aW9uKCBlbGVtcyApIHtcblxuXHRcdC8vIEJ1aWxkIGEgbmV3IGpRdWVyeSBtYXRjaGVkIGVsZW1lbnQgc2V0XG5cdFx0dmFyIHJldCA9IGpRdWVyeS5tZXJnZSggdGhpcy5jb25zdHJ1Y3RvcigpLCBlbGVtcyApO1xuXG5cdFx0Ly8gQWRkIHRoZSBvbGQgb2JqZWN0IG9udG8gdGhlIHN0YWNrIChhcyBhIHJlZmVyZW5jZSlcblx0XHRyZXQucHJldk9iamVjdCA9IHRoaXM7XG5cdFx0cmV0LmNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG5cblx0XHQvLyBSZXR1cm4gdGhlIG5ld2x5LWZvcm1lZCBlbGVtZW50IHNldFxuXHRcdHJldHVybiByZXQ7XG5cdH0sXG5cblx0Ly8gRXhlY3V0ZSBhIGNhbGxiYWNrIGZvciBldmVyeSBlbGVtZW50IGluIHRoZSBtYXRjaGVkIHNldC5cblx0Ly8gKFlvdSBjYW4gc2VlZCB0aGUgYXJndW1lbnRzIHdpdGggYW4gYXJyYXkgb2YgYXJncywgYnV0IHRoaXMgaXNcblx0Ly8gb25seSB1c2VkIGludGVybmFsbHkuKVxuXHRlYWNoOiBmdW5jdGlvbiggY2FsbGJhY2ssIGFyZ3MgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5lYWNoKCB0aGlzLCBjYWxsYmFjaywgYXJncyApO1xuXHR9LFxuXG5cdG1hcDogZnVuY3Rpb24oIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5Lm1hcCh0aGlzLCBmdW5jdGlvbiggZWxlbSwgaSApIHtcblx0XHRcdHJldHVybiBjYWxsYmFjay5jYWxsKCBlbGVtLCBpLCBlbGVtICk7XG5cdFx0fSkpO1xuXHR9LFxuXG5cdHNsaWNlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHNsaWNlLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKSApO1xuXHR9LFxuXG5cdGZpcnN0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5lcSggMCApO1xuXHR9LFxuXG5cdGxhc3Q6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmVxKCAtMSApO1xuXHR9LFxuXG5cdGVxOiBmdW5jdGlvbiggaSApIHtcblx0XHR2YXIgbGVuID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRqID0gK2kgKyAoIGkgPCAwID8gbGVuIDogMCApO1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggaiA+PSAwICYmIGogPCBsZW4gPyBbIHRoaXNbal0gXSA6IFtdICk7XG5cdH0sXG5cblx0ZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5wcmV2T2JqZWN0IHx8IHRoaXMuY29uc3RydWN0b3IobnVsbCk7XG5cdH0sXG5cblx0Ly8gRm9yIGludGVybmFsIHVzZSBvbmx5LlxuXHQvLyBCZWhhdmVzIGxpa2UgYW4gQXJyYXkncyBtZXRob2QsIG5vdCBsaWtlIGEgalF1ZXJ5IG1ldGhvZC5cblx0cHVzaDogcHVzaCxcblx0c29ydDogYXJyLnNvcnQsXG5cdHNwbGljZTogYXJyLnNwbGljZVxufTtcblxualF1ZXJ5LmV4dGVuZCA9IGpRdWVyeS5mbi5leHRlbmQgPSBmdW5jdGlvbigpIHtcblx0dmFyIG9wdGlvbnMsIG5hbWUsIHNyYywgY29weSwgY29weUlzQXJyYXksIGNsb25lLFxuXHRcdHRhcmdldCA9IGFyZ3VtZW50c1swXSB8fCB7fSxcblx0XHRpID0gMSxcblx0XHRsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuXHRcdGRlZXAgPSBmYWxzZTtcblxuXHQvLyBIYW5kbGUgYSBkZWVwIGNvcHkgc2l0dWF0aW9uXG5cdGlmICggdHlwZW9mIHRhcmdldCA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0ZGVlcCA9IHRhcmdldDtcblxuXHRcdC8vIFNraXAgdGhlIGJvb2xlYW4gYW5kIHRoZSB0YXJnZXRcblx0XHR0YXJnZXQgPSBhcmd1bWVudHNbIGkgXSB8fCB7fTtcblx0XHRpKys7XG5cdH1cblxuXHQvLyBIYW5kbGUgY2FzZSB3aGVuIHRhcmdldCBpcyBhIHN0cmluZyBvciBzb21ldGhpbmcgKHBvc3NpYmxlIGluIGRlZXAgY29weSlcblx0aWYgKCB0eXBlb2YgdGFyZ2V0ICE9PSBcIm9iamVjdFwiICYmICFqUXVlcnkuaXNGdW5jdGlvbih0YXJnZXQpICkge1xuXHRcdHRhcmdldCA9IHt9O1xuXHR9XG5cblx0Ly8gRXh0ZW5kIGpRdWVyeSBpdHNlbGYgaWYgb25seSBvbmUgYXJndW1lbnQgaXMgcGFzc2VkXG5cdGlmICggaSA9PT0gbGVuZ3RoICkge1xuXHRcdHRhcmdldCA9IHRoaXM7XG5cdFx0aS0tO1xuXHR9XG5cblx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0Ly8gT25seSBkZWFsIHdpdGggbm9uLW51bGwvdW5kZWZpbmVkIHZhbHVlc1xuXHRcdGlmICggKG9wdGlvbnMgPSBhcmd1bWVudHNbIGkgXSkgIT0gbnVsbCApIHtcblx0XHRcdC8vIEV4dGVuZCB0aGUgYmFzZSBvYmplY3Rcblx0XHRcdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcblx0XHRcdFx0c3JjID0gdGFyZ2V0WyBuYW1lIF07XG5cdFx0XHRcdGNvcHkgPSBvcHRpb25zWyBuYW1lIF07XG5cblx0XHRcdFx0Ly8gUHJldmVudCBuZXZlci1lbmRpbmcgbG9vcFxuXHRcdFx0XHRpZiAoIHRhcmdldCA9PT0gY29weSApIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlY3Vyc2UgaWYgd2UncmUgbWVyZ2luZyBwbGFpbiBvYmplY3RzIG9yIGFycmF5c1xuXHRcdFx0XHRpZiAoIGRlZXAgJiYgY29weSAmJiAoIGpRdWVyeS5pc1BsYWluT2JqZWN0KGNvcHkpIHx8IChjb3B5SXNBcnJheSA9IGpRdWVyeS5pc0FycmF5KGNvcHkpKSApICkge1xuXHRcdFx0XHRcdGlmICggY29weUlzQXJyYXkgKSB7XG5cdFx0XHRcdFx0XHRjb3B5SXNBcnJheSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmMgJiYgalF1ZXJ5LmlzQXJyYXkoc3JjKSA/IHNyYyA6IFtdO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNsb25lID0gc3JjICYmIGpRdWVyeS5pc1BsYWluT2JqZWN0KHNyYykgPyBzcmMgOiB7fTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBOZXZlciBtb3ZlIG9yaWdpbmFsIG9iamVjdHMsIGNsb25lIHRoZW1cblx0XHRcdFx0XHR0YXJnZXRbIG5hbWUgXSA9IGpRdWVyeS5leHRlbmQoIGRlZXAsIGNsb25lLCBjb3B5ICk7XG5cblx0XHRcdFx0Ly8gRG9uJ3QgYnJpbmcgaW4gdW5kZWZpbmVkIHZhbHVlc1xuXHRcdFx0XHR9IGVsc2UgaWYgKCBjb3B5ICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0dGFyZ2V0WyBuYW1lIF0gPSBjb3B5O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSBtb2RpZmllZCBvYmplY3Rcblx0cmV0dXJuIHRhcmdldDtcbn07XG5cbmpRdWVyeS5leHRlbmQoe1xuXHQvLyBVbmlxdWUgZm9yIGVhY2ggY29weSBvZiBqUXVlcnkgb24gdGhlIHBhZ2Vcblx0ZXhwYW5kbzogXCJqUXVlcnlcIiArICggdmVyc2lvbiArIE1hdGgucmFuZG9tKCkgKS5yZXBsYWNlKCAvXFxEL2csIFwiXCIgKSxcblxuXHQvLyBBc3N1bWUgalF1ZXJ5IGlzIHJlYWR5IHdpdGhvdXQgdGhlIHJlYWR5IG1vZHVsZVxuXHRpc1JlYWR5OiB0cnVlLFxuXG5cdGVycm9yOiBmdW5jdGlvbiggbXNnICkge1xuXHRcdHRocm93IG5ldyBFcnJvciggbXNnICk7XG5cdH0sXG5cblx0bm9vcDogZnVuY3Rpb24oKSB7fSxcblxuXHRpc0Z1bmN0aW9uOiBmdW5jdGlvbiggb2JqICkge1xuXHRcdHJldHVybiBqUXVlcnkudHlwZShvYmopID09PSBcImZ1bmN0aW9uXCI7XG5cdH0sXG5cblx0aXNBcnJheTogQXJyYXkuaXNBcnJheSxcblxuXHRpc1dpbmRvdzogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRyZXR1cm4gb2JqICE9IG51bGwgJiYgb2JqID09PSBvYmoud2luZG93O1xuXHR9LFxuXG5cdGlzTnVtZXJpYzogZnVuY3Rpb24oIG9iaiApIHtcblx0XHQvLyBwYXJzZUZsb2F0IE5hTnMgbnVtZXJpYy1jYXN0IGZhbHNlIHBvc2l0aXZlcyAobnVsbHx0cnVlfGZhbHNlfFwiXCIpXG5cdFx0Ly8gLi4uYnV0IG1pc2ludGVycHJldHMgbGVhZGluZy1udW1iZXIgc3RyaW5ncywgcGFydGljdWxhcmx5IGhleCBsaXRlcmFscyAoXCIweC4uLlwiKVxuXHRcdC8vIHN1YnRyYWN0aW9uIGZvcmNlcyBpbmZpbml0aWVzIHRvIE5hTlxuXHRcdC8vIGFkZGluZyAxIGNvcnJlY3RzIGxvc3Mgb2YgcHJlY2lzaW9uIGZyb20gcGFyc2VGbG9hdCAoIzE1MTAwKVxuXHRcdHJldHVybiAhalF1ZXJ5LmlzQXJyYXkoIG9iaiApICYmIChvYmogLSBwYXJzZUZsb2F0KCBvYmogKSArIDEpID49IDA7XG5cdH0sXG5cblx0aXNQbGFpbk9iamVjdDogZnVuY3Rpb24oIG9iaiApIHtcblx0XHQvLyBOb3QgcGxhaW4gb2JqZWN0czpcblx0XHQvLyAtIEFueSBvYmplY3Qgb3IgdmFsdWUgd2hvc2UgaW50ZXJuYWwgW1tDbGFzc11dIHByb3BlcnR5IGlzIG5vdCBcIltvYmplY3QgT2JqZWN0XVwiXG5cdFx0Ly8gLSBET00gbm9kZXNcblx0XHQvLyAtIHdpbmRvd1xuXHRcdGlmICggalF1ZXJ5LnR5cGUoIG9iaiApICE9PSBcIm9iamVjdFwiIHx8IG9iai5ub2RlVHlwZSB8fCBqUXVlcnkuaXNXaW5kb3coIG9iaiApICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdGlmICggb2JqLmNvbnN0cnVjdG9yICYmXG5cdFx0XHRcdCFoYXNPd24uY2FsbCggb2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgXCJpc1Byb3RvdHlwZU9mXCIgKSApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBJZiB0aGUgZnVuY3Rpb24gaGFzbid0IHJldHVybmVkIGFscmVhZHksIHdlJ3JlIGNvbmZpZGVudCB0aGF0XG5cdFx0Ly8gfG9ianwgaXMgYSBwbGFpbiBvYmplY3QsIGNyZWF0ZWQgYnkge30gb3IgY29uc3RydWN0ZWQgd2l0aCBuZXcgT2JqZWN0XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sXG5cblx0aXNFbXB0eU9iamVjdDogZnVuY3Rpb24oIG9iaiApIHtcblx0XHR2YXIgbmFtZTtcblx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sXG5cblx0dHlwZTogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRpZiAoIG9iaiA9PSBudWxsICkge1xuXHRcdFx0cmV0dXJuIG9iaiArIFwiXCI7XG5cdFx0fVxuXHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4wLCBpT1M8NiAoZnVuY3Rpb25pc2ggUmVnRXhwKVxuXHRcdHJldHVybiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBvYmogPT09IFwiZnVuY3Rpb25cIiA/XG5cdFx0XHRjbGFzczJ0eXBlWyB0b1N0cmluZy5jYWxsKG9iaikgXSB8fCBcIm9iamVjdFwiIDpcblx0XHRcdHR5cGVvZiBvYmo7XG5cdH0sXG5cblx0Ly8gRXZhbHVhdGVzIGEgc2NyaXB0IGluIGEgZ2xvYmFsIGNvbnRleHRcblx0Z2xvYmFsRXZhbDogZnVuY3Rpb24oIGNvZGUgKSB7XG5cdFx0dmFyIHNjcmlwdCxcblx0XHRcdGluZGlyZWN0ID0gZXZhbDtcblxuXHRcdGNvZGUgPSBqUXVlcnkudHJpbSggY29kZSApO1xuXG5cdFx0aWYgKCBjb2RlICkge1xuXHRcdFx0Ly8gSWYgdGhlIGNvZGUgaW5jbHVkZXMgYSB2YWxpZCwgcHJvbG9ndWUgcG9zaXRpb25cblx0XHRcdC8vIHN0cmljdCBtb2RlIHByYWdtYSwgZXhlY3V0ZSBjb2RlIGJ5IGluamVjdGluZyBhXG5cdFx0XHQvLyBzY3JpcHQgdGFnIGludG8gdGhlIGRvY3VtZW50LlxuXHRcdFx0aWYgKCBjb2RlLmluZGV4T2YoXCJ1c2Ugc3RyaWN0XCIpID09PSAxICkge1xuXHRcdFx0XHRzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuXHRcdFx0XHRzY3JpcHQudGV4dCA9IGNvZGU7XG5cdFx0XHRcdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoIHNjcmlwdCApLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHNjcmlwdCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdC8vIE90aGVyd2lzZSwgYXZvaWQgdGhlIERPTSBub2RlIGNyZWF0aW9uLCBpbnNlcnRpb25cblx0XHRcdC8vIGFuZCByZW1vdmFsIGJ5IHVzaW5nIGFuIGluZGlyZWN0IGdsb2JhbCBldmFsXG5cdFx0XHRcdGluZGlyZWN0KCBjb2RlICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdC8vIENvbnZlcnQgZGFzaGVkIHRvIGNhbWVsQ2FzZTsgdXNlZCBieSB0aGUgY3NzIGFuZCBkYXRhIG1vZHVsZXNcblx0Ly8gU3VwcG9ydDogSUU5LTExK1xuXHQvLyBNaWNyb3NvZnQgZm9yZ290IHRvIGh1bXAgdGhlaXIgdmVuZG9yIHByZWZpeCAoIzk1NzIpXG5cdGNhbWVsQ2FzZTogZnVuY3Rpb24oIHN0cmluZyApIHtcblx0XHRyZXR1cm4gc3RyaW5nLnJlcGxhY2UoIHJtc1ByZWZpeCwgXCJtcy1cIiApLnJlcGxhY2UoIHJkYXNoQWxwaGEsIGZjYW1lbENhc2UgKTtcblx0fSxcblxuXHRub2RlTmFtZTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdFx0cmV0dXJuIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cdH0sXG5cblx0Ly8gYXJncyBpcyBmb3IgaW50ZXJuYWwgdXNhZ2Ugb25seVxuXHRlYWNoOiBmdW5jdGlvbiggb2JqLCBjYWxsYmFjaywgYXJncyApIHtcblx0XHR2YXIgdmFsdWUsXG5cdFx0XHRpID0gMCxcblx0XHRcdGxlbmd0aCA9IG9iai5sZW5ndGgsXG5cdFx0XHRpc0FycmF5ID0gaXNBcnJheWxpa2UoIG9iaiApO1xuXG5cdFx0aWYgKCBhcmdzICkge1xuXHRcdFx0aWYgKCBpc0FycmF5ICkge1xuXHRcdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrLmFwcGx5KCBvYmpbIGkgXSwgYXJncyApO1xuXG5cdFx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZvciAoIGkgaW4gb2JqICkge1xuXHRcdFx0XHRcdHZhbHVlID0gY2FsbGJhY2suYXBwbHkoIG9ialsgaSBdLCBhcmdzICk7XG5cblx0XHRcdFx0XHRpZiAoIHZhbHVlID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gQSBzcGVjaWFsLCBmYXN0LCBjYXNlIGZvciB0aGUgbW9zdCBjb21tb24gdXNlIG9mIGVhY2hcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCBpc0FycmF5ICkge1xuXHRcdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrLmNhbGwoIG9ialsgaSBdLCBpLCBvYmpbIGkgXSApO1xuXG5cdFx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZvciAoIGkgaW4gb2JqICkge1xuXHRcdFx0XHRcdHZhbHVlID0gY2FsbGJhY2suY2FsbCggb2JqWyBpIF0sIGksIG9ialsgaSBdICk7XG5cblx0XHRcdFx0XHRpZiAoIHZhbHVlID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBvYmo7XG5cdH0sXG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjFcblx0dHJpbTogZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0cmV0dXJuIHRleHQgPT0gbnVsbCA/XG5cdFx0XHRcIlwiIDpcblx0XHRcdCggdGV4dCArIFwiXCIgKS5yZXBsYWNlKCBydHJpbSwgXCJcIiApO1xuXHR9LFxuXG5cdC8vIHJlc3VsdHMgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHlcblx0bWFrZUFycmF5OiBmdW5jdGlvbiggYXJyLCByZXN1bHRzICkge1xuXHRcdHZhciByZXQgPSByZXN1bHRzIHx8IFtdO1xuXG5cdFx0aWYgKCBhcnIgIT0gbnVsbCApIHtcblx0XHRcdGlmICggaXNBcnJheWxpa2UoIE9iamVjdChhcnIpICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggcmV0LFxuXHRcdFx0XHRcdHR5cGVvZiBhcnIgPT09IFwic3RyaW5nXCIgP1xuXHRcdFx0XHRcdFsgYXJyIF0gOiBhcnJcblx0XHRcdFx0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHB1c2guY2FsbCggcmV0LCBhcnIgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gcmV0O1xuXHR9LFxuXG5cdGluQXJyYXk6IGZ1bmN0aW9uKCBlbGVtLCBhcnIsIGkgKSB7XG5cdFx0cmV0dXJuIGFyciA9PSBudWxsID8gLTEgOiBpbmRleE9mLmNhbGwoIGFyciwgZWxlbSwgaSApO1xuXHR9LFxuXG5cdG1lcmdlOiBmdW5jdGlvbiggZmlyc3QsIHNlY29uZCApIHtcblx0XHR2YXIgbGVuID0gK3NlY29uZC5sZW5ndGgsXG5cdFx0XHRqID0gMCxcblx0XHRcdGkgPSBmaXJzdC5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGogPCBsZW47IGorKyApIHtcblx0XHRcdGZpcnN0WyBpKysgXSA9IHNlY29uZFsgaiBdO1xuXHRcdH1cblxuXHRcdGZpcnN0Lmxlbmd0aCA9IGk7XG5cblx0XHRyZXR1cm4gZmlyc3Q7XG5cdH0sXG5cblx0Z3JlcDogZnVuY3Rpb24oIGVsZW1zLCBjYWxsYmFjaywgaW52ZXJ0ICkge1xuXHRcdHZhciBjYWxsYmFja0ludmVyc2UsXG5cdFx0XHRtYXRjaGVzID0gW10sXG5cdFx0XHRpID0gMCxcblx0XHRcdGxlbmd0aCA9IGVsZW1zLmxlbmd0aCxcblx0XHRcdGNhbGxiYWNrRXhwZWN0ID0gIWludmVydDtcblxuXHRcdC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCBvbmx5IHNhdmluZyB0aGUgaXRlbXNcblx0XHQvLyB0aGF0IHBhc3MgdGhlIHZhbGlkYXRvciBmdW5jdGlvblxuXHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0Y2FsbGJhY2tJbnZlcnNlID0gIWNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpICk7XG5cdFx0XHRpZiAoIGNhbGxiYWNrSW52ZXJzZSAhPT0gY2FsbGJhY2tFeHBlY3QgKSB7XG5cdFx0XHRcdG1hdGNoZXMucHVzaCggZWxlbXNbIGkgXSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBtYXRjaGVzO1xuXHR9LFxuXG5cdC8vIGFyZyBpcyBmb3IgaW50ZXJuYWwgdXNhZ2Ugb25seVxuXHRtYXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGFyZyApIHtcblx0XHR2YXIgdmFsdWUsXG5cdFx0XHRpID0gMCxcblx0XHRcdGxlbmd0aCA9IGVsZW1zLmxlbmd0aCxcblx0XHRcdGlzQXJyYXkgPSBpc0FycmF5bGlrZSggZWxlbXMgKSxcblx0XHRcdHJldCA9IFtdO1xuXG5cdFx0Ly8gR28gdGhyb3VnaCB0aGUgYXJyYXksIHRyYW5zbGF0aW5nIGVhY2ggb2YgdGhlIGl0ZW1zIHRvIHRoZWlyIG5ldyB2YWx1ZXNcblx0XHRpZiAoIGlzQXJyYXkgKSB7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjayggZWxlbXNbIGkgXSwgaSwgYXJnICk7XG5cblx0XHRcdFx0aWYgKCB2YWx1ZSAhPSBudWxsICkge1xuXHRcdFx0XHRcdHJldC5wdXNoKCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBHbyB0aHJvdWdoIGV2ZXJ5IGtleSBvbiB0aGUgb2JqZWN0LFxuXHRcdH0gZWxzZSB7XG5cdFx0XHRmb3IgKCBpIGluIGVsZW1zICkge1xuXHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTtcblxuXHRcdFx0XHRpZiAoIHZhbHVlICE9IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0LnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBGbGF0dGVuIGFueSBuZXN0ZWQgYXJyYXlzXG5cdFx0cmV0dXJuIGNvbmNhdC5hcHBseSggW10sIHJldCApO1xuXHR9LFxuXG5cdC8vIEEgZ2xvYmFsIEdVSUQgY291bnRlciBmb3Igb2JqZWN0c1xuXHRndWlkOiAxLFxuXG5cdC8vIEJpbmQgYSBmdW5jdGlvbiB0byBhIGNvbnRleHQsIG9wdGlvbmFsbHkgcGFydGlhbGx5IGFwcGx5aW5nIGFueVxuXHQvLyBhcmd1bWVudHMuXG5cdHByb3h5OiBmdW5jdGlvbiggZm4sIGNvbnRleHQgKSB7XG5cdFx0dmFyIHRtcCwgYXJncywgcHJveHk7XG5cblx0XHRpZiAoIHR5cGVvZiBjb250ZXh0ID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0dG1wID0gZm5bIGNvbnRleHQgXTtcblx0XHRcdGNvbnRleHQgPSBmbjtcblx0XHRcdGZuID0gdG1wO1xuXHRcdH1cblxuXHRcdC8vIFF1aWNrIGNoZWNrIHRvIGRldGVybWluZSBpZiB0YXJnZXQgaXMgY2FsbGFibGUsIGluIHRoZSBzcGVjXG5cdFx0Ly8gdGhpcyB0aHJvd3MgYSBUeXBlRXJyb3IsIGJ1dCB3ZSB3aWxsIGp1c3QgcmV0dXJuIHVuZGVmaW5lZC5cblx0XHRpZiAoICFqUXVlcnkuaXNGdW5jdGlvbiggZm4gKSApIHtcblx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0Ly8gU2ltdWxhdGVkIGJpbmRcblx0XHRhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzLCAyICk7XG5cdFx0cHJveHkgPSBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBmbi5hcHBseSggY29udGV4dCB8fCB0aGlzLCBhcmdzLmNvbmNhdCggc2xpY2UuY2FsbCggYXJndW1lbnRzICkgKSApO1xuXHRcdH07XG5cblx0XHQvLyBTZXQgdGhlIGd1aWQgb2YgdW5pcXVlIGhhbmRsZXIgdG8gdGhlIHNhbWUgb2Ygb3JpZ2luYWwgaGFuZGxlciwgc28gaXQgY2FuIGJlIHJlbW92ZWRcblx0XHRwcm94eS5ndWlkID0gZm4uZ3VpZCA9IGZuLmd1aWQgfHwgalF1ZXJ5Lmd1aWQrKztcblxuXHRcdHJldHVybiBwcm94eTtcblx0fSxcblxuXHRub3c6IERhdGUubm93LFxuXG5cdC8vIGpRdWVyeS5zdXBwb3J0IGlzIG5vdCB1c2VkIGluIENvcmUgYnV0IG90aGVyIHByb2plY3RzIGF0dGFjaCB0aGVpclxuXHQvLyBwcm9wZXJ0aWVzIHRvIGl0IHNvIGl0IG5lZWRzIHRvIGV4aXN0LlxuXHRzdXBwb3J0OiBzdXBwb3J0XG59KTtcblxuLy8gUG9wdWxhdGUgdGhlIGNsYXNzMnR5cGUgbWFwXG5qUXVlcnkuZWFjaChcIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3JcIi5zcGxpdChcIiBcIiksIGZ1bmN0aW9uKGksIG5hbWUpIHtcblx0Y2xhc3MydHlwZVsgXCJbb2JqZWN0IFwiICsgbmFtZSArIFwiXVwiIF0gPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG59KTtcblxuZnVuY3Rpb24gaXNBcnJheWxpa2UoIG9iaiApIHtcblx0dmFyIGxlbmd0aCA9IG9iai5sZW5ndGgsXG5cdFx0dHlwZSA9IGpRdWVyeS50eXBlKCBvYmogKTtcblxuXHRpZiAoIHR5cGUgPT09IFwiZnVuY3Rpb25cIiB8fCBqUXVlcnkuaXNXaW5kb3coIG9iaiApICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGlmICggb2JqLm5vZGVUeXBlID09PSAxICYmIGxlbmd0aCApIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdHJldHVybiB0eXBlID09PSBcImFycmF5XCIgfHwgbGVuZ3RoID09PSAwIHx8XG5cdFx0dHlwZW9mIGxlbmd0aCA9PT0gXCJudW1iZXJcIiAmJiBsZW5ndGggPiAwICYmICggbGVuZ3RoIC0gMSApIGluIG9iajtcbn1cbnZhciBTaXp6bGUgPVxuLyohXG4gKiBTaXp6bGUgQ1NTIFNlbGVjdG9yIEVuZ2luZSB2Mi4yLjAtcHJlXG4gKiBodHRwOi8vc2l6emxlanMuY29tL1xuICpcbiAqIENvcHlyaWdodCAyMDA4LCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIERhdGU6IDIwMTQtMTItMTZcbiAqL1xuKGZ1bmN0aW9uKCB3aW5kb3cgKSB7XG5cbnZhciBpLFxuXHRzdXBwb3J0LFxuXHRFeHByLFxuXHRnZXRUZXh0LFxuXHRpc1hNTCxcblx0dG9rZW5pemUsXG5cdGNvbXBpbGUsXG5cdHNlbGVjdCxcblx0b3V0ZXJtb3N0Q29udGV4dCxcblx0c29ydElucHV0LFxuXHRoYXNEdXBsaWNhdGUsXG5cblx0Ly8gTG9jYWwgZG9jdW1lbnQgdmFyc1xuXHRzZXREb2N1bWVudCxcblx0ZG9jdW1lbnQsXG5cdGRvY0VsZW0sXG5cdGRvY3VtZW50SXNIVE1MLFxuXHRyYnVnZ3lRU0EsXG5cdHJidWdneU1hdGNoZXMsXG5cdG1hdGNoZXMsXG5cdGNvbnRhaW5zLFxuXG5cdC8vIEluc3RhbmNlLXNwZWNpZmljIGRhdGFcblx0ZXhwYW5kbyA9IFwic2l6emxlXCIgKyAxICogbmV3IERhdGUoKSxcblx0cHJlZmVycmVkRG9jID0gd2luZG93LmRvY3VtZW50LFxuXHRkaXJydW5zID0gMCxcblx0ZG9uZSA9IDAsXG5cdGNsYXNzQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHR0b2tlbkNhY2hlID0gY3JlYXRlQ2FjaGUoKSxcblx0Y29tcGlsZXJDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdHNvcnRPcmRlciA9IGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiAwO1xuXHR9LFxuXG5cdC8vIEdlbmVyYWwtcHVycG9zZSBjb25zdGFudHNcblx0TUFYX05FR0FUSVZFID0gMSA8PCAzMSxcblxuXHQvLyBJbnN0YW5jZSBtZXRob2RzXG5cdGhhc093biA9ICh7fSkuaGFzT3duUHJvcGVydHksXG5cdGFyciA9IFtdLFxuXHRwb3AgPSBhcnIucG9wLFxuXHRwdXNoX25hdGl2ZSA9IGFyci5wdXNoLFxuXHRwdXNoID0gYXJyLnB1c2gsXG5cdHNsaWNlID0gYXJyLnNsaWNlLFxuXHQvLyBVc2UgYSBzdHJpcHBlZC1kb3duIGluZGV4T2YgYXMgaXQncyBmYXN0ZXIgdGhhbiBuYXRpdmVcblx0Ly8gaHR0cDovL2pzcGVyZi5jb20vdGhvci1pbmRleG9mLXZzLWZvci81XG5cdGluZGV4T2YgPSBmdW5jdGlvbiggbGlzdCwgZWxlbSApIHtcblx0XHR2YXIgaSA9IDAsXG5cdFx0XHRsZW4gPSBsaXN0Lmxlbmd0aDtcblx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdGlmICggbGlzdFtpXSA9PT0gZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiAtMTtcblx0fSxcblxuXHRib29sZWFucyA9IFwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixcblxuXHQvLyBSZWd1bGFyIGV4cHJlc3Npb25zXG5cblx0Ly8gV2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc2VsZWN0b3JzLyN3aGl0ZXNwYWNlXG5cdHdoaXRlc3BhY2UgPSBcIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsXG5cdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc3ludGF4LyNjaGFyYWN0ZXJzXG5cdGNoYXJhY3RlckVuY29kaW5nID0gXCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXFxceDAwLVxcXFx4YTBdKStcIixcblxuXHQvLyBMb29zZWx5IG1vZGVsZWQgb24gQ1NTIGlkZW50aWZpZXIgY2hhcmFjdGVyc1xuXHQvLyBBbiB1bnF1b3RlZCB2YWx1ZSBzaG91bGQgYmUgYSBDU1MgaWRlbnRpZmllciBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jYXR0cmlidXRlLXNlbGVjdG9yc1xuXHQvLyBQcm9wZXIgc3ludGF4OiBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjdmFsdWUtZGVmLWlkZW50aWZpZXJcblx0aWRlbnRpZmllciA9IGNoYXJhY3RlckVuY29kaW5nLnJlcGxhY2UoIFwid1wiLCBcIncjXCIgKSxcblxuXHQvLyBBdHRyaWJ1dGUgc2VsZWN0b3JzOiBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2F0dHJpYnV0ZS1zZWxlY3RvcnNcblx0YXR0cmlidXRlcyA9IFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooXCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArIFwiKSg/OlwiICsgd2hpdGVzcGFjZSArXG5cdFx0Ly8gT3BlcmF0b3IgKGNhcHR1cmUgMilcblx0XHRcIiooWypeJHwhfl0/PSlcIiArIHdoaXRlc3BhY2UgK1xuXHRcdC8vIFwiQXR0cmlidXRlIHZhbHVlcyBtdXN0IGJlIENTUyBpZGVudGlmaWVycyBbY2FwdHVyZSA1XSBvciBzdHJpbmdzIFtjYXB0dXJlIDMgb3IgY2FwdHVyZSA0XVwiXG5cdFx0XCIqKD86JygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwifChcIiArIGlkZW50aWZpZXIgKyBcIikpfClcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFwiKlxcXFxdXCIsXG5cblx0cHNldWRvcyA9IFwiOihcIiArIGNoYXJhY3RlckVuY29kaW5nICsgXCIpKD86XFxcXCgoXCIgK1xuXHRcdC8vIFRvIHJlZHVjZSB0aGUgbnVtYmVyIG9mIHNlbGVjdG9ycyBuZWVkaW5nIHRva2VuaXplIGluIHRoZSBwcmVGaWx0ZXIsIHByZWZlciBhcmd1bWVudHM6XG5cdFx0Ly8gMS4gcXVvdGVkIChjYXB0dXJlIDM7IGNhcHR1cmUgNCBvciBjYXB0dXJlIDUpXG5cdFx0XCIoJygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwiKXxcIiArXG5cdFx0Ly8gMi4gc2ltcGxlIChjYXB0dXJlIDYpXG5cdFx0XCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIgKyBhdHRyaWJ1dGVzICsgXCIpKil8XCIgK1xuXHRcdC8vIDMuIGFueXRoaW5nIGVsc2UgKGNhcHR1cmUgMilcblx0XHRcIi4qXCIgK1xuXHRcdFwiKVxcXFwpfClcIixcblxuXHQvLyBMZWFkaW5nIGFuZCBub24tZXNjYXBlZCB0cmFpbGluZyB3aGl0ZXNwYWNlLCBjYXB0dXJpbmcgc29tZSBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXJzIHByZWNlZGluZyB0aGUgbGF0dGVyXG5cdHJ3aGl0ZXNwYWNlID0gbmV3IFJlZ0V4cCggd2hpdGVzcGFjZSArIFwiK1wiLCBcImdcIiApLFxuXHRydHJpbSA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiK3woKD86XnxbXlxcXFxcXFxcXSkoPzpcXFxcXFxcXC4pKilcIiArIHdoaXRlc3BhY2UgKyBcIiskXCIsIFwiZ1wiICksXG5cblx0cmNvbW1hID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqLFwiICsgd2hpdGVzcGFjZSArIFwiKlwiICksXG5cdHJjb21iaW5hdG9ycyA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiKihbPit+XXxcIiArIHdoaXRlc3BhY2UgKyBcIilcIiArIHdoaXRlc3BhY2UgKyBcIipcIiApLFxuXG5cdHJhdHRyaWJ1dGVRdW90ZXMgPSBuZXcgUmVnRXhwKCBcIj1cIiArIHdoaXRlc3BhY2UgKyBcIiooW15cXFxcXSdcXFwiXSo/KVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFxdXCIsIFwiZ1wiICksXG5cblx0cnBzZXVkbyA9IG5ldyBSZWdFeHAoIHBzZXVkb3MgKSxcblx0cmlkZW50aWZpZXIgPSBuZXcgUmVnRXhwKCBcIl5cIiArIGlkZW50aWZpZXIgKyBcIiRcIiApLFxuXG5cdG1hdGNoRXhwciA9IHtcblx0XHRcIklEXCI6IG5ldyBSZWdFeHAoIFwiXiMoXCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArIFwiKVwiICksXG5cdFx0XCJDTEFTU1wiOiBuZXcgUmVnRXhwKCBcIl5cXFxcLihcIiArIGNoYXJhY3RlckVuY29kaW5nICsgXCIpXCIgKSxcblx0XHRcIlRBR1wiOiBuZXcgUmVnRXhwKCBcIl4oXCIgKyBjaGFyYWN0ZXJFbmNvZGluZy5yZXBsYWNlKCBcIndcIiwgXCJ3KlwiICkgKyBcIilcIiApLFxuXHRcdFwiQVRUUlwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIGF0dHJpYnV0ZXMgKSxcblx0XHRcIlBTRVVET1wiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHBzZXVkb3MgKSxcblx0XHRcIkNISUxEXCI6IG5ldyBSZWdFeHAoIFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFx0XCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIiArIHdoaXRlc3BhY2UgKyBcIiooPzooWystXXwpXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdFwiKihcXFxcZCspfCkpXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXCl8KVwiLCBcImlcIiApLFxuXHRcdFwiYm9vbFwiOiBuZXcgUmVnRXhwKCBcIl4oPzpcIiArIGJvb2xlYW5zICsgXCIpJFwiLCBcImlcIiApLFxuXHRcdC8vIEZvciB1c2UgaW4gbGlicmFyaWVzIGltcGxlbWVudGluZyAuaXMoKVxuXHRcdC8vIFdlIHVzZSB0aGlzIGZvciBQT1MgbWF0Y2hpbmcgaW4gYHNlbGVjdGBcblx0XHRcIm5lZWRzQ29udGV4dFwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIgK1xuXHRcdFx0d2hpdGVzcGFjZSArIFwiKigoPzotXFxcXGQpP1xcXFxkKilcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcKXwpKD89W14tXXwkKVwiLCBcImlcIiApXG5cdH0sXG5cblx0cmlucHV0cyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksXG5cdHJoZWFkZXIgPSAvXmhcXGQkL2ksXG5cblx0cm5hdGl2ZSA9IC9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sXG5cblx0Ly8gRWFzaWx5LXBhcnNlYWJsZS9yZXRyaWV2YWJsZSBJRCBvciBUQUcgb3IgQ0xBU1Mgc2VsZWN0b3JzXG5cdHJxdWlja0V4cHIgPSAvXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxcblxuXHRyc2libGluZyA9IC9bK35dLyxcblx0cmVzY2FwZSA9IC8nfFxcXFwvZyxcblxuXHQvLyBDU1MgZXNjYXBlcyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjZXNjYXBlZC1jaGFyYWN0ZXJzXG5cdHJ1bmVzY2FwZSA9IG5ldyBSZWdFeHAoIFwiXFxcXFxcXFwoW1xcXFxkYS1mXXsxLDZ9XCIgKyB3aGl0ZXNwYWNlICsgXCI/fChcIiArIHdoaXRlc3BhY2UgKyBcIil8LilcIiwgXCJpZ1wiICksXG5cdGZ1bmVzY2FwZSA9IGZ1bmN0aW9uKCBfLCBlc2NhcGVkLCBlc2NhcGVkV2hpdGVzcGFjZSApIHtcblx0XHR2YXIgaGlnaCA9IFwiMHhcIiArIGVzY2FwZWQgLSAweDEwMDAwO1xuXHRcdC8vIE5hTiBtZWFucyBub24tY29kZXBvaW50XG5cdFx0Ly8gU3VwcG9ydDogRmlyZWZveDwyNFxuXHRcdC8vIFdvcmthcm91bmQgZXJyb25lb3VzIG51bWVyaWMgaW50ZXJwcmV0YXRpb24gb2YgK1wiMHhcIlxuXHRcdHJldHVybiBoaWdoICE9PSBoaWdoIHx8IGVzY2FwZWRXaGl0ZXNwYWNlID9cblx0XHRcdGVzY2FwZWQgOlxuXHRcdFx0aGlnaCA8IDAgP1xuXHRcdFx0XHQvLyBCTVAgY29kZXBvaW50XG5cdFx0XHRcdFN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggKyAweDEwMDAwICkgOlxuXHRcdFx0XHQvLyBTdXBwbGVtZW50YWwgUGxhbmUgY29kZXBvaW50IChzdXJyb2dhdGUgcGFpcilcblx0XHRcdFx0U3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCA+PiAxMCB8IDB4RDgwMCwgaGlnaCAmIDB4M0ZGIHwgMHhEQzAwICk7XG5cdH0sXG5cblx0Ly8gVXNlZCBmb3IgaWZyYW1lc1xuXHQvLyBTZWUgc2V0RG9jdW1lbnQoKVxuXHQvLyBSZW1vdmluZyB0aGUgZnVuY3Rpb24gd3JhcHBlciBjYXVzZXMgYSBcIlBlcm1pc3Npb24gRGVuaWVkXCJcblx0Ly8gZXJyb3IgaW4gSUVcblx0dW5sb2FkSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuXHRcdHNldERvY3VtZW50KCk7XG5cdH07XG5cbi8vIE9wdGltaXplIGZvciBwdXNoLmFwcGx5KCBfLCBOb2RlTGlzdCApXG50cnkge1xuXHRwdXNoLmFwcGx5KFxuXHRcdChhcnIgPSBzbGljZS5jYWxsKCBwcmVmZXJyZWREb2MuY2hpbGROb2RlcyApKSxcblx0XHRwcmVmZXJyZWREb2MuY2hpbGROb2Rlc1xuXHQpO1xuXHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMFxuXHQvLyBEZXRlY3Qgc2lsZW50bHkgZmFpbGluZyBwdXNoLmFwcGx5XG5cdGFyclsgcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMubGVuZ3RoIF0ubm9kZVR5cGU7XG59IGNhdGNoICggZSApIHtcblx0cHVzaCA9IHsgYXBwbHk6IGFyci5sZW5ndGggP1xuXG5cdFx0Ly8gTGV2ZXJhZ2Ugc2xpY2UgaWYgcG9zc2libGVcblx0XHRmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7XG5cdFx0XHRwdXNoX25hdGl2ZS5hcHBseSggdGFyZ2V0LCBzbGljZS5jYWxsKGVscykgKTtcblx0XHR9IDpcblxuXHRcdC8vIFN1cHBvcnQ6IElFPDlcblx0XHQvLyBPdGhlcndpc2UgYXBwZW5kIGRpcmVjdGx5XG5cdFx0ZnVuY3Rpb24oIHRhcmdldCwgZWxzICkge1xuXHRcdFx0dmFyIGogPSB0YXJnZXQubGVuZ3RoLFxuXHRcdFx0XHRpID0gMDtcblx0XHRcdC8vIENhbid0IHRydXN0IE5vZGVMaXN0Lmxlbmd0aFxuXHRcdFx0d2hpbGUgKCAodGFyZ2V0W2orK10gPSBlbHNbaSsrXSkgKSB7fVxuXHRcdFx0dGFyZ2V0Lmxlbmd0aCA9IGogLSAxO1xuXHRcdH1cblx0fTtcbn1cblxuZnVuY3Rpb24gU2l6emxlKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIG1hdGNoLCBlbGVtLCBtLCBub2RlVHlwZSxcblx0XHQvLyBRU0EgdmFyc1xuXHRcdGksIGdyb3Vwcywgb2xkLCBuaWQsIG5ld0NvbnRleHQsIG5ld1NlbGVjdG9yO1xuXG5cdGlmICggKCBjb250ZXh0ID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBwcmVmZXJyZWREb2MgKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0fVxuXG5cdGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50O1xuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblx0bm9kZVR5cGUgPSBjb250ZXh0Lm5vZGVUeXBlO1xuXG5cdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiIHx8ICFzZWxlY3RvciB8fFxuXHRcdG5vZGVUeXBlICE9PSAxICYmIG5vZGVUeXBlICE9PSA5ICYmIG5vZGVUeXBlICE9PSAxMSApIHtcblxuXHRcdHJldHVybiByZXN1bHRzO1xuXHR9XG5cblx0aWYgKCAhc2VlZCAmJiBkb2N1bWVudElzSFRNTCApIHtcblxuXHRcdC8vIFRyeSB0byBzaG9ydGN1dCBmaW5kIG9wZXJhdGlvbnMgd2hlbiBwb3NzaWJsZSAoZS5nLiwgbm90IHVuZGVyIERvY3VtZW50RnJhZ21lbnQpXG5cdFx0aWYgKCBub2RlVHlwZSAhPT0gMTEgJiYgKG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApKSApIHtcblx0XHRcdC8vIFNwZWVkLXVwOiBTaXp6bGUoXCIjSURcIilcblx0XHRcdGlmICggKG0gPSBtYXRjaFsxXSkgKSB7XG5cdFx0XHRcdGlmICggbm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0ZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIG0gKTtcblx0XHRcdFx0XHQvLyBDaGVjayBwYXJlbnROb2RlIHRvIGNhdGNoIHdoZW4gQmxhY2tiZXJyeSA0LjYgcmV0dXJuc1xuXHRcdFx0XHRcdC8vIG5vZGVzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB0aGUgZG9jdW1lbnQgKGpRdWVyeSAjNjk2Mylcblx0XHRcdFx0XHRpZiAoIGVsZW0gJiYgZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRcdFx0Ly8gSGFuZGxlIHRoZSBjYXNlIHdoZXJlIElFLCBPcGVyYSwgYW5kIFdlYmtpdCByZXR1cm4gaXRlbXNcblx0XHRcdFx0XHRcdC8vIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRFxuXHRcdFx0XHRcdFx0aWYgKCBlbGVtLmlkID09PSBtICkge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBDb250ZXh0IGlzIG5vdCBhIGRvY3VtZW50XG5cdFx0XHRcdFx0aWYgKCBjb250ZXh0Lm93bmVyRG9jdW1lbnQgJiYgKGVsZW0gPSBjb250ZXh0Lm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG0gKSkgJiZcblx0XHRcdFx0XHRcdGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICkgJiYgZWxlbS5pZCA9PT0gbSApIHtcblx0XHRcdFx0XHRcdHJlc3VsdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdC8vIFNwZWVkLXVwOiBTaXp6bGUoXCJUQUdcIilcblx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWzJdICkge1xuXHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCBzZWxlY3RvciApICk7XG5cdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXG5cdFx0XHQvLyBTcGVlZC11cDogU2l6emxlKFwiLkNMQVNTXCIpXG5cdFx0XHR9IGVsc2UgaWYgKCAobSA9IG1hdGNoWzNdKSAmJiBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKSB7XG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggbSApICk7XG5cdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFFTQSBwYXRoXG5cdFx0aWYgKCBzdXBwb3J0LnFzYSAmJiAoIXJidWdneVFTQSB8fCAhcmJ1Z2d5UVNBLnRlc3QoIHNlbGVjdG9yICkpICkge1xuXHRcdFx0bmlkID0gb2xkID0gZXhwYW5kbztcblx0XHRcdG5ld0NvbnRleHQgPSBjb250ZXh0O1xuXHRcdFx0bmV3U2VsZWN0b3IgPSBub2RlVHlwZSAhPT0gMSAmJiBzZWxlY3RvcjtcblxuXHRcdFx0Ly8gcVNBIHdvcmtzIHN0cmFuZ2VseSBvbiBFbGVtZW50LXJvb3RlZCBxdWVyaWVzXG5cdFx0XHQvLyBXZSBjYW4gd29yayBhcm91bmQgdGhpcyBieSBzcGVjaWZ5aW5nIGFuIGV4dHJhIElEIG9uIHRoZSByb290XG5cdFx0XHQvLyBhbmQgd29ya2luZyB1cCBmcm9tIHRoZXJlIChUaGFua3MgdG8gQW5kcmV3IER1cG9udCBmb3IgdGhlIHRlY2huaXF1ZSlcblx0XHRcdC8vIElFIDggZG9lc24ndCB3b3JrIG9uIG9iamVjdCBlbGVtZW50c1xuXHRcdFx0aWYgKCBub2RlVHlwZSA9PT0gMSAmJiBjb250ZXh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRcdGdyb3VwcyA9IHRva2VuaXplKCBzZWxlY3RvciApO1xuXG5cdFx0XHRcdGlmICggKG9sZCA9IGNvbnRleHQuZ2V0QXR0cmlidXRlKFwiaWRcIikpICkge1xuXHRcdFx0XHRcdG5pZCA9IG9sZC5yZXBsYWNlKCByZXNjYXBlLCBcIlxcXFwkJlwiICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29udGV4dC5zZXRBdHRyaWJ1dGUoIFwiaWRcIiwgbmlkICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bmlkID0gXCJbaWQ9J1wiICsgbmlkICsgXCInXSBcIjtcblxuXHRcdFx0XHRpID0gZ3JvdXBzLmxlbmd0aDtcblx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0Z3JvdXBzW2ldID0gbmlkICsgdG9TZWxlY3RvciggZ3JvdXBzW2ldICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bmV3Q29udGV4dCA9IHJzaWJsaW5nLnRlc3QoIHNlbGVjdG9yICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHQ7XG5cdFx0XHRcdG5ld1NlbGVjdG9yID0gZ3JvdXBzLmpvaW4oXCIsXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIG5ld1NlbGVjdG9yICkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsXG5cdFx0XHRcdFx0XHRuZXdDb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIG5ld1NlbGVjdG9yIClcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHR9IGNhdGNoKHFzYUVycm9yKSB7XG5cdFx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdFx0aWYgKCAhb2xkICkge1xuXHRcdFx0XHRcdFx0Y29udGV4dC5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBBbGwgb3RoZXJzXG5cdHJldHVybiBzZWxlY3QoIHNlbGVjdG9yLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApO1xufVxuXG4vKipcbiAqIENyZWF0ZSBrZXktdmFsdWUgY2FjaGVzIG9mIGxpbWl0ZWQgc2l6ZVxuICogQHJldHVybnMge0Z1bmN0aW9uKHN0cmluZywgT2JqZWN0KX0gUmV0dXJucyB0aGUgT2JqZWN0IGRhdGEgYWZ0ZXIgc3RvcmluZyBpdCBvbiBpdHNlbGYgd2l0aFxuICpcdHByb3BlcnR5IG5hbWUgdGhlIChzcGFjZS1zdWZmaXhlZCkgc3RyaW5nIGFuZCAoaWYgdGhlIGNhY2hlIGlzIGxhcmdlciB0aGFuIEV4cHIuY2FjaGVMZW5ndGgpXG4gKlx0ZGVsZXRpbmcgdGhlIG9sZGVzdCBlbnRyeVxuICovXG5mdW5jdGlvbiBjcmVhdGVDYWNoZSgpIHtcblx0dmFyIGtleXMgPSBbXTtcblxuXHRmdW5jdGlvbiBjYWNoZSgga2V5LCB2YWx1ZSApIHtcblx0XHQvLyBVc2UgKGtleSArIFwiIFwiKSB0byBhdm9pZCBjb2xsaXNpb24gd2l0aCBuYXRpdmUgcHJvdG90eXBlIHByb3BlcnRpZXMgKHNlZSBJc3N1ZSAjMTU3KVxuXHRcdGlmICgga2V5cy5wdXNoKCBrZXkgKyBcIiBcIiApID4gRXhwci5jYWNoZUxlbmd0aCApIHtcblx0XHRcdC8vIE9ubHkga2VlcCB0aGUgbW9zdCByZWNlbnQgZW50cmllc1xuXHRcdFx0ZGVsZXRlIGNhY2hlWyBrZXlzLnNoaWZ0KCkgXTtcblx0XHR9XG5cdFx0cmV0dXJuIChjYWNoZVsga2V5ICsgXCIgXCIgXSA9IHZhbHVlKTtcblx0fVxuXHRyZXR1cm4gY2FjaGU7XG59XG5cbi8qKlxuICogTWFyayBhIGZ1bmN0aW9uIGZvciBzcGVjaWFsIHVzZSBieSBTaXp6bGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBtYXJrXG4gKi9cbmZ1bmN0aW9uIG1hcmtGdW5jdGlvbiggZm4gKSB7XG5cdGZuWyBleHBhbmRvIF0gPSB0cnVlO1xuXHRyZXR1cm4gZm47XG59XG5cbi8qKlxuICogU3VwcG9ydCB0ZXN0aW5nIHVzaW5nIGFuIGVsZW1lbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFBhc3NlZCB0aGUgY3JlYXRlZCBkaXYgYW5kIGV4cGVjdHMgYSBib29sZWFuIHJlc3VsdFxuICovXG5mdW5jdGlvbiBhc3NlcnQoIGZuICkge1xuXHR2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuXHR0cnkge1xuXHRcdHJldHVybiAhIWZuKCBkaXYgKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fSBmaW5hbGx5IHtcblx0XHQvLyBSZW1vdmUgZnJvbSBpdHMgcGFyZW50IGJ5IGRlZmF1bHRcblx0XHRpZiAoIGRpdi5wYXJlbnROb2RlICkge1xuXHRcdFx0ZGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIGRpdiApO1xuXHRcdH1cblx0XHQvLyByZWxlYXNlIG1lbW9yeSBpbiBJRVxuXHRcdGRpdiA9IG51bGw7XG5cdH1cbn1cblxuLyoqXG4gKiBBZGRzIHRoZSBzYW1lIGhhbmRsZXIgZm9yIGFsbCBvZiB0aGUgc3BlY2lmaWVkIGF0dHJzXG4gKiBAcGFyYW0ge1N0cmluZ30gYXR0cnMgUGlwZS1zZXBhcmF0ZWQgbGlzdCBvZiBhdHRyaWJ1dGVzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIFRoZSBtZXRob2QgdGhhdCB3aWxsIGJlIGFwcGxpZWRcbiAqL1xuZnVuY3Rpb24gYWRkSGFuZGxlKCBhdHRycywgaGFuZGxlciApIHtcblx0dmFyIGFyciA9IGF0dHJzLnNwbGl0KFwifFwiKSxcblx0XHRpID0gYXR0cnMubGVuZ3RoO1xuXG5cdHdoaWxlICggaS0tICkge1xuXHRcdEV4cHIuYXR0ckhhbmRsZVsgYXJyW2ldIF0gPSBoYW5kbGVyO1xuXHR9XG59XG5cbi8qKlxuICogQ2hlY2tzIGRvY3VtZW50IG9yZGVyIG9mIHR3byBzaWJsaW5nc1xuICogQHBhcmFtIHtFbGVtZW50fSBhXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGJcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFJldHVybnMgbGVzcyB0aGFuIDAgaWYgYSBwcmVjZWRlcyBiLCBncmVhdGVyIHRoYW4gMCBpZiBhIGZvbGxvd3MgYlxuICovXG5mdW5jdGlvbiBzaWJsaW5nQ2hlY2soIGEsIGIgKSB7XG5cdHZhciBjdXIgPSBiICYmIGEsXG5cdFx0ZGlmZiA9IGN1ciAmJiBhLm5vZGVUeXBlID09PSAxICYmIGIubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdCggfmIuc291cmNlSW5kZXggfHwgTUFYX05FR0FUSVZFICkgLVxuXHRcdFx0KCB+YS5zb3VyY2VJbmRleCB8fCBNQVhfTkVHQVRJVkUgKTtcblxuXHQvLyBVc2UgSUUgc291cmNlSW5kZXggaWYgYXZhaWxhYmxlIG9uIGJvdGggbm9kZXNcblx0aWYgKCBkaWZmICkge1xuXHRcdHJldHVybiBkaWZmO1xuXHR9XG5cblx0Ly8gQ2hlY2sgaWYgYiBmb2xsb3dzIGFcblx0aWYgKCBjdXIgKSB7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLm5leHRTaWJsaW5nKSApIHtcblx0XHRcdGlmICggY3VyID09PSBiICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGEgPyAxIDogLTE7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBpbnB1dCB0eXBlc1xuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5wdXRQc2V1ZG8oIHR5cGUgKSB7XG5cdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRyZXR1cm4gbmFtZSA9PT0gXCJpbnB1dFwiICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIGJ1dHRvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJ1dHRvblBzZXVkbyggdHlwZSApIHtcblx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdHJldHVybiAobmFtZSA9PT0gXCJpbnB1dFwiIHx8IG5hbWUgPT09IFwiYnV0dG9uXCIpICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIHBvc2l0aW9uYWxzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5mdW5jdGlvbiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKCBmbiApIHtcblx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggYXJndW1lbnQgKSB7XG5cdFx0YXJndW1lbnQgPSArYXJndW1lbnQ7XG5cdFx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdHZhciBqLFxuXHRcdFx0XHRtYXRjaEluZGV4ZXMgPSBmbiggW10sIHNlZWQubGVuZ3RoLCBhcmd1bWVudCApLFxuXHRcdFx0XHRpID0gbWF0Y2hJbmRleGVzLmxlbmd0aDtcblxuXHRcdFx0Ly8gTWF0Y2ggZWxlbWVudHMgZm91bmQgYXQgdGhlIHNwZWNpZmllZCBpbmRleGVzXG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCBzZWVkWyAoaiA9IG1hdGNoSW5kZXhlc1tpXSkgXSApIHtcblx0XHRcdFx0XHRzZWVkW2pdID0gIShtYXRjaGVzW2pdID0gc2VlZFtqXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGEgbm9kZSBmb3IgdmFsaWRpdHkgYXMgYSBTaXp6bGUgY29udGV4dFxuICogQHBhcmFtIHtFbGVtZW50fE9iamVjdD19IGNvbnRleHRcbiAqIEByZXR1cm5zIHtFbGVtZW50fE9iamVjdHxCb29sZWFufSBUaGUgaW5wdXQgbm9kZSBpZiBhY2NlcHRhYmxlLCBvdGhlcndpc2UgYSBmYWxzeSB2YWx1ZVxuICovXG5mdW5jdGlvbiB0ZXN0Q29udGV4dCggY29udGV4dCApIHtcblx0cmV0dXJuIGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29udGV4dDtcbn1cblxuLy8gRXhwb3NlIHN1cHBvcnQgdmFycyBmb3IgY29udmVuaWVuY2VcbnN1cHBvcnQgPSBTaXp6bGUuc3VwcG9ydCA9IHt9O1xuXG4vKipcbiAqIERldGVjdHMgWE1MIG5vZGVzXG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEFuIGVsZW1lbnQgb3IgYSBkb2N1bWVudFxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWZmIGVsZW0gaXMgYSBub24tSFRNTCBYTUwgbm9kZVxuICovXG5pc1hNTCA9IFNpenpsZS5pc1hNTCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHQvLyBkb2N1bWVudEVsZW1lbnQgaXMgdmVyaWZpZWQgZm9yIGNhc2VzIHdoZXJlIGl0IGRvZXNuJ3QgeWV0IGV4aXN0XG5cdC8vIChzdWNoIGFzIGxvYWRpbmcgaWZyYW1lcyBpbiBJRSAtICM0ODMzKVxuXHR2YXIgZG9jdW1lbnRFbGVtZW50ID0gZWxlbSAmJiAoZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0pLmRvY3VtZW50RWxlbWVudDtcblx0cmV0dXJuIGRvY3VtZW50RWxlbWVudCA/IGRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSAhPT0gXCJIVE1MXCIgOiBmYWxzZTtcbn07XG5cbi8qKlxuICogU2V0cyBkb2N1bWVudC1yZWxhdGVkIHZhcmlhYmxlcyBvbmNlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGRvY3VtZW50XG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBbZG9jXSBBbiBlbGVtZW50IG9yIGRvY3VtZW50IG9iamVjdCB0byB1c2UgdG8gc2V0IHRoZSBkb2N1bWVudFxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudFxuICovXG5zZXREb2N1bWVudCA9IFNpenpsZS5zZXREb2N1bWVudCA9IGZ1bmN0aW9uKCBub2RlICkge1xuXHR2YXIgaGFzQ29tcGFyZSwgcGFyZW50LFxuXHRcdGRvYyA9IG5vZGUgPyBub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZSA6IHByZWZlcnJlZERvYztcblxuXHQvLyBJZiBubyBkb2N1bWVudCBhbmQgZG9jdW1lbnRFbGVtZW50IGlzIGF2YWlsYWJsZSwgcmV0dXJuXG5cdGlmICggZG9jID09PSBkb2N1bWVudCB8fCBkb2Mubm9kZVR5cGUgIT09IDkgfHwgIWRvYy5kb2N1bWVudEVsZW1lbnQgKSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50O1xuXHR9XG5cblx0Ly8gU2V0IG91ciBkb2N1bWVudFxuXHRkb2N1bWVudCA9IGRvYztcblx0ZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cdHBhcmVudCA9IGRvYy5kZWZhdWx0VmlldztcblxuXHQvLyBTdXBwb3J0OiBJRT44XG5cdC8vIElmIGlmcmFtZSBkb2N1bWVudCBpcyBhc3NpZ25lZCB0byBcImRvY3VtZW50XCIgdmFyaWFibGUgYW5kIGlmIGlmcmFtZSBoYXMgYmVlbiByZWxvYWRlZCxcblx0Ly8gSUUgd2lsbCB0aHJvdyBcInBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3Igd2hlbiBhY2Nlc3NpbmcgXCJkb2N1bWVudFwiIHZhcmlhYmxlLCBzZWUgalF1ZXJ5ICMxMzkzNlxuXHQvLyBJRTYtOCBkbyBub3Qgc3VwcG9ydCB0aGUgZGVmYXVsdFZpZXcgcHJvcGVydHkgc28gcGFyZW50IHdpbGwgYmUgdW5kZWZpbmVkXG5cdGlmICggcGFyZW50ICYmIHBhcmVudCAhPT0gcGFyZW50LnRvcCApIHtcblx0XHQvLyBJRTExIGRvZXMgbm90IGhhdmUgYXR0YWNoRXZlbnQsIHNvIGFsbCBtdXN0IHN1ZmZlclxuXHRcdGlmICggcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRwYXJlbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJ1bmxvYWRcIiwgdW5sb2FkSGFuZGxlciwgZmFsc2UgKTtcblx0XHR9IGVsc2UgaWYgKCBwYXJlbnQuYXR0YWNoRXZlbnQgKSB7XG5cdFx0XHRwYXJlbnQuYXR0YWNoRXZlbnQoIFwib251bmxvYWRcIiwgdW5sb2FkSGFuZGxlciApO1xuXHRcdH1cblx0fVxuXG5cdC8qIFN1cHBvcnQgdGVzdHNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRkb2N1bWVudElzSFRNTCA9ICFpc1hNTCggZG9jICk7XG5cblx0LyogQXR0cmlidXRlc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gU3VwcG9ydDogSUU8OFxuXHQvLyBWZXJpZnkgdGhhdCBnZXRBdHRyaWJ1dGUgcmVhbGx5IHJldHVybnMgYXR0cmlidXRlcyBhbmQgbm90IHByb3BlcnRpZXNcblx0Ly8gKGV4Y2VwdGluZyBJRTggYm9vbGVhbnMpXG5cdHN1cHBvcnQuYXR0cmlidXRlcyA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdGRpdi5jbGFzc05hbWUgPSBcImlcIjtcblx0XHRyZXR1cm4gIWRpdi5nZXRBdHRyaWJ1dGUoXCJjbGFzc05hbWVcIik7XG5cdH0pO1xuXG5cdC8qIGdldEVsZW1lbnQocylCeSpcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIENoZWNrIGlmIGdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSByZXR1cm5zIG9ubHkgZWxlbWVudHNcblx0c3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZSA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdGRpdi5hcHBlbmRDaGlsZCggZG9jLmNyZWF0ZUNvbW1lbnQoXCJcIikgKTtcblx0XHRyZXR1cm4gIWRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RoO1xuXHR9KTtcblxuXHQvLyBTdXBwb3J0OiBJRTw5XG5cdHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IHJuYXRpdmUudGVzdCggZG9jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKTtcblxuXHQvLyBTdXBwb3J0OiBJRTwxMFxuXHQvLyBDaGVjayBpZiBnZXRFbGVtZW50QnlJZCByZXR1cm5zIGVsZW1lbnRzIGJ5IG5hbWVcblx0Ly8gVGhlIGJyb2tlbiBnZXRFbGVtZW50QnlJZCBtZXRob2RzIGRvbid0IHBpY2sgdXAgcHJvZ3JhbWF0aWNhbGx5LXNldCBuYW1lcyxcblx0Ly8gc28gdXNlIGEgcm91bmRhYm91dCBnZXRFbGVtZW50c0J5TmFtZSB0ZXN0XG5cdHN1cHBvcnQuZ2V0QnlJZCA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGRpdiApLmlkID0gZXhwYW5kbztcblx0XHRyZXR1cm4gIWRvYy5nZXRFbGVtZW50c0J5TmFtZSB8fCAhZG9jLmdldEVsZW1lbnRzQnlOYW1lKCBleHBhbmRvICkubGVuZ3RoO1xuXHR9KTtcblxuXHQvLyBJRCBmaW5kIGFuZCBmaWx0ZXJcblx0aWYgKCBzdXBwb3J0LmdldEJ5SWQgKSB7XG5cdFx0RXhwci5maW5kW1wiSURcIl0gPSBmdW5jdGlvbiggaWQsIGNvbnRleHQgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkICE9PSBcInVuZGVmaW5lZFwiICYmIGRvY3VtZW50SXNIVE1MICkge1xuXHRcdFx0XHR2YXIgbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIGlkICk7XG5cdFx0XHRcdC8vIENoZWNrIHBhcmVudE5vZGUgdG8gY2F0Y2ggd2hlbiBCbGFja2JlcnJ5IDQuNiByZXR1cm5zXG5cdFx0XHRcdC8vIG5vZGVzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB0aGUgZG9jdW1lbnQgIzY5NjNcblx0XHRcdFx0cmV0dXJuIG0gJiYgbS5wYXJlbnROb2RlID8gWyBtIF0gOiBbXTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdEV4cHIuZmlsdGVyW1wiSURcIl0gPSBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHR2YXIgYXR0cklkID0gaWQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKFwiaWRcIikgPT09IGF0dHJJZDtcblx0XHRcdH07XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHQvLyBTdXBwb3J0OiBJRTYvN1xuXHRcdC8vIGdldEVsZW1lbnRCeUlkIGlzIG5vdCByZWxpYWJsZSBhcyBhIGZpbmQgc2hvcnRjdXRcblx0XHRkZWxldGUgRXhwci5maW5kW1wiSURcIl07XG5cblx0XHRFeHByLmZpbHRlcltcIklEXCJdID0gIGZ1bmN0aW9uKCBpZCApIHtcblx0XHRcdHZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgbm9kZSA9IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUgIT09IFwidW5kZWZpbmVkXCIgJiYgZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7XG5cdFx0XHRcdHJldHVybiBub2RlICYmIG5vZGUudmFsdWUgPT09IGF0dHJJZDtcblx0XHRcdH07XG5cdFx0fTtcblx0fVxuXG5cdC8vIFRhZ1xuXHRFeHByLmZpbmRbXCJUQUdcIl0gPSBzdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lID9cblx0XHRmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkge1xuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApO1xuXG5cdFx0XHQvLyBEb2N1bWVudEZyYWdtZW50IG5vZGVzIGRvbid0IGhhdmUgZ0VCVE5cblx0XHRcdH0gZWxzZSBpZiAoIHN1cHBvcnQucXNhICkge1xuXHRcdFx0XHRyZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCB0YWcgKTtcblx0XHRcdH1cblx0XHR9IDpcblxuXHRcdGZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7XG5cdFx0XHR2YXIgZWxlbSxcblx0XHRcdFx0dG1wID0gW10sXG5cdFx0XHRcdGkgPSAwLFxuXHRcdFx0XHQvLyBCeSBoYXBweSBjb2luY2lkZW5jZSwgYSAoYnJva2VuKSBnRUJUTiBhcHBlYXJzIG9uIERvY3VtZW50RnJhZ21lbnQgbm9kZXMgdG9vXG5cdFx0XHRcdHJlc3VsdHMgPSBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgKTtcblxuXHRcdFx0Ly8gRmlsdGVyIG91dCBwb3NzaWJsZSBjb21tZW50c1xuXHRcdFx0aWYgKCB0YWcgPT09IFwiKlwiICkge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHtcblx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHR0bXAucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0bXA7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHR9O1xuXG5cdC8vIENsYXNzXG5cdEV4cHIuZmluZFtcIkNMQVNTXCJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmIGZ1bmN0aW9uKCBjbGFzc05hbWUsIGNvbnRleHQgKSB7XG5cdFx0aWYgKCBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdHJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIGNsYXNzTmFtZSApO1xuXHRcdH1cblx0fTtcblxuXHQvKiBRU0EvbWF0Y2hlc1NlbGVjdG9yXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBRU0EgYW5kIG1hdGNoZXNTZWxlY3RvciBzdXBwb3J0XG5cblx0Ly8gbWF0Y2hlc1NlbGVjdG9yKDphY3RpdmUpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChJRTkvT3BlcmEgMTEuNSlcblx0cmJ1Z2d5TWF0Y2hlcyA9IFtdO1xuXG5cdC8vIHFTYSg6Zm9jdXMpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChDaHJvbWUgMjEpXG5cdC8vIFdlIGFsbG93IHRoaXMgYmVjYXVzZSBvZiBhIGJ1ZyBpbiBJRTgvOSB0aGF0IHRocm93cyBhbiBlcnJvclxuXHQvLyB3aGVuZXZlciBgZG9jdW1lbnQuYWN0aXZlRWxlbWVudGAgaXMgYWNjZXNzZWQgb24gYW4gaWZyYW1lXG5cdC8vIFNvLCB3ZSBhbGxvdyA6Zm9jdXMgdG8gcGFzcyB0aHJvdWdoIFFTQSBhbGwgdGhlIHRpbWUgdG8gYXZvaWQgdGhlIElFIGVycm9yXG5cdC8vIFNlZSBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMzM3OFxuXHRyYnVnZ3lRU0EgPSBbXTtcblxuXHRpZiAoIChzdXBwb3J0LnFzYSA9IHJuYXRpdmUudGVzdCggZG9jLnF1ZXJ5U2VsZWN0b3JBbGwgKSkgKSB7XG5cdFx0Ly8gQnVpbGQgUVNBIHJlZ2V4XG5cdFx0Ly8gUmVnZXggc3RyYXRlZ3kgYWRvcHRlZCBmcm9tIERpZWdvIFBlcmluaVxuXHRcdGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0Ly8gU2VsZWN0IGlzIHNldCB0byBlbXB0eSBzdHJpbmcgb24gcHVycG9zZVxuXHRcdFx0Ly8gVGhpcyBpcyB0byB0ZXN0IElFJ3MgdHJlYXRtZW50IG9mIG5vdCBleHBsaWNpdGx5XG5cdFx0XHQvLyBzZXR0aW5nIGEgYm9vbGVhbiBjb250ZW50IGF0dHJpYnV0ZSxcblx0XHRcdC8vIHNpbmNlIGl0cyBwcmVzZW5jZSBzaG91bGQgYmUgZW5vdWdoXG5cdFx0XHQvLyBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjM1OVxuXHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZGl2ICkuaW5uZXJIVE1MID0gXCI8YSBpZD0nXCIgKyBleHBhbmRvICsgXCInPjwvYT5cIiArXG5cdFx0XHRcdFwiPHNlbGVjdCBpZD0nXCIgKyBleHBhbmRvICsgXCItXFxmXScgbXNhbGxvd2NhcHR1cmU9Jyc+XCIgK1xuXHRcdFx0XHRcIjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCI7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOCwgT3BlcmEgMTEtMTIuMTZcblx0XHRcdC8vIE5vdGhpbmcgc2hvdWxkIGJlIHNlbGVjdGVkIHdoZW4gZW1wdHkgc3RyaW5ncyBmb2xsb3cgXj0gb3IgJD0gb3IgKj1cblx0XHRcdC8vIFRoZSB0ZXN0IGF0dHJpYnV0ZSBtdXN0IGJlIHVua25vd24gaW4gT3BlcmEgYnV0IFwic2FmZVwiIGZvciBXaW5SVFxuXHRcdFx0Ly8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2hoNDY1Mzg4LmFzcHgjYXR0cmlidXRlX3NlY3Rpb25cblx0XHRcdGlmICggZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbXNhbGxvd2NhcHR1cmVePScnXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIlsqXiRdPVwiICsgd2hpdGVzcGFjZSArIFwiKig/OicnfFxcXCJcXFwiKVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOFxuXHRcdFx0Ly8gQm9vbGVhbiBhdHRyaWJ1dGVzIGFuZCBcInZhbHVlXCIgYXJlIG5vdCB0cmVhdGVkIGNvcnJlY3RseVxuXHRcdFx0aWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbc2VsZWN0ZWRdXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooPzp2YWx1ZXxcIiArIGJvb2xlYW5zICsgXCIpXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lPDI5LCBBbmRyb2lkPDQuMissIFNhZmFyaTw3LjArLCBpT1M8Ny4wKywgUGhhbnRvbUpTPDEuOS43K1xuXHRcdFx0aWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoIFwiW2lkfj1cIiArIGV4cGFuZG8gKyBcIi1dXCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKFwifj1cIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFdlYmtpdC9PcGVyYSAtIDpjaGVja2VkIHNob3VsZCByZXR1cm4gc2VsZWN0ZWQgb3B0aW9uIGVsZW1lbnRzXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDExL1JFQy1jc3MzLXNlbGVjdG9ycy0yMDExMDkyOS8jY2hlY2tlZFxuXHRcdFx0Ly8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHNcblx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaChcIjpjaGVja2VkXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgOCssIGlPUyA4K1xuXHRcdFx0Ly8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzNjg1MVxuXHRcdFx0Ly8gSW4tcGFnZSBgc2VsZWN0b3IjaWQgc2liaW5nLWNvbWJpbmF0b3Igc2VsZWN0b3JgIGZhaWxzXG5cdFx0XHRpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCggXCJhI1wiICsgZXhwYW5kbyArIFwiKypcIiApLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCIuIy4rWyt+XVwiKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0Ly8gU3VwcG9ydDogV2luZG93cyA4IE5hdGl2ZSBBcHBzXG5cdFx0XHQvLyBUaGUgdHlwZSBhbmQgbmFtZSBhdHRyaWJ1dGVzIGFyZSByZXN0cmljdGVkIGR1cmluZyAuaW5uZXJIVE1MIGFzc2lnbm1lbnRcblx0XHRcdHZhciBpbnB1dCA9IGRvYy5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5cdFx0XHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCBcImhpZGRlblwiICk7XG5cdFx0XHRkaXYuYXBwZW5kQ2hpbGQoIGlucHV0ICkuc2V0QXR0cmlidXRlKCBcIm5hbWVcIiwgXCJEXCIgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4XG5cdFx0XHQvLyBFbmZvcmNlIGNhc2Utc2Vuc2l0aXZpdHkgb2YgbmFtZSBhdHRyaWJ1dGVcblx0XHRcdGlmICggZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbmFtZT1kXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIm5hbWVcIiArIHdoaXRlc3BhY2UgKyBcIipbKl4kfCF+XT89XCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRkYgMy41IC0gOmVuYWJsZWQvOmRpc2FibGVkIGFuZCBoaWRkZW4gZWxlbWVudHMgKGhpZGRlbiBlbGVtZW50cyBhcmUgc3RpbGwgZW5hYmxlZClcblx0XHRcdC8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzXG5cdFx0XHRpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiOmVuYWJsZWRcIiwgXCI6ZGlzYWJsZWRcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPcGVyYSAxMC0xMSBkb2VzIG5vdCB0aHJvdyBvbiBwb3N0LWNvbW1hIGludmFsaWQgcHNldWRvc1xuXHRcdFx0ZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpO1xuXHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCIsLio6XCIpO1xuXHRcdH0pO1xuXHR9XG5cblx0aWYgKCAoc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3IgPSBybmF0aXZlLnRlc3QoIChtYXRjaGVzID0gZG9jRWxlbS5tYXRjaGVzIHx8XG5cdFx0ZG9jRWxlbS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRkb2NFbGVtLm1vek1hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ub01hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ubXNNYXRjaGVzU2VsZWN0b3IpICkpICkge1xuXG5cdFx0YXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdFx0XHQvLyBDaGVjayB0byBzZWUgaWYgaXQncyBwb3NzaWJsZSB0byBkbyBtYXRjaGVzU2VsZWN0b3Jcblx0XHRcdC8vIG9uIGEgZGlzY29ubmVjdGVkIG5vZGUgKElFIDkpXG5cdFx0XHRzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoID0gbWF0Y2hlcy5jYWxsKCBkaXYsIFwiZGl2XCIgKTtcblxuXHRcdFx0Ly8gVGhpcyBzaG91bGQgZmFpbCB3aXRoIGFuIGV4Y2VwdGlvblxuXHRcdFx0Ly8gR2Vja28gZG9lcyBub3QgZXJyb3IsIHJldHVybnMgZmFsc2UgaW5zdGVhZFxuXHRcdFx0bWF0Y2hlcy5jYWxsKCBkaXYsIFwiW3MhPScnXTp4XCIgKTtcblx0XHRcdHJidWdneU1hdGNoZXMucHVzaCggXCIhPVwiLCBwc2V1ZG9zICk7XG5cdFx0fSk7XG5cdH1cblxuXHRyYnVnZ3lRU0EgPSByYnVnZ3lRU0EubGVuZ3RoICYmIG5ldyBSZWdFeHAoIHJidWdneVFTQS5qb2luKFwifFwiKSApO1xuXHRyYnVnZ3lNYXRjaGVzID0gcmJ1Z2d5TWF0Y2hlcy5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5TWF0Y2hlcy5qb2luKFwifFwiKSApO1xuXG5cdC8qIENvbnRhaW5zXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0aGFzQ29tcGFyZSA9IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiApO1xuXG5cdC8vIEVsZW1lbnQgY29udGFpbnMgYW5vdGhlclxuXHQvLyBQdXJwb3NlZnVsbHkgZG9lcyBub3QgaW1wbGVtZW50IGluY2x1c2l2ZSBkZXNjZW5kZW50XG5cdC8vIEFzIGluLCBhbiBlbGVtZW50IGRvZXMgbm90IGNvbnRhaW4gaXRzZWxmXG5cdGNvbnRhaW5zID0gaGFzQ29tcGFyZSB8fCBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29udGFpbnMgKSA/XG5cdFx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0XHR2YXIgYWRvd24gPSBhLm5vZGVUeXBlID09PSA5ID8gYS5kb2N1bWVudEVsZW1lbnQgOiBhLFxuXHRcdFx0XHRidXAgPSBiICYmIGIucGFyZW50Tm9kZTtcblx0XHRcdHJldHVybiBhID09PSBidXAgfHwgISEoIGJ1cCAmJiBidXAubm9kZVR5cGUgPT09IDEgJiYgKFxuXHRcdFx0XHRhZG93bi5jb250YWlucyA/XG5cdFx0XHRcdFx0YWRvd24uY29udGFpbnMoIGJ1cCApIDpcblx0XHRcdFx0XHRhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGJ1cCApICYgMTZcblx0XHRcdCkpO1xuXHRcdH0gOlxuXHRcdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0aWYgKCBiICkge1xuXHRcdFx0XHR3aGlsZSAoIChiID0gYi5wYXJlbnROb2RlKSApIHtcblx0XHRcdFx0XHRpZiAoIGIgPT09IGEgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXG5cdC8qIFNvcnRpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIERvY3VtZW50IG9yZGVyIHNvcnRpbmdcblx0c29ydE9yZGVyID0gaGFzQ29tcGFyZSA/XG5cdGZ1bmN0aW9uKCBhLCBiICkge1xuXG5cdFx0Ly8gRmxhZyBmb3IgZHVwbGljYXRlIHJlbW92YWxcblx0XHRpZiAoIGEgPT09IGIgKSB7XG5cdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0Ly8gU29ydCBvbiBtZXRob2QgZXhpc3RlbmNlIGlmIG9ubHkgb25lIGlucHV0IGhhcyBjb21wYXJlRG9jdW1lbnRQb3NpdGlvblxuXHRcdHZhciBjb21wYXJlID0gIWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24gLSAhYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtcblx0XHRpZiAoIGNvbXBhcmUgKSB7XG5cdFx0XHRyZXR1cm4gY29tcGFyZTtcblx0XHR9XG5cblx0XHQvLyBDYWxjdWxhdGUgcG9zaXRpb24gaWYgYm90aCBpbnB1dHMgYmVsb25nIHRvIHRoZSBzYW1lIGRvY3VtZW50XG5cdFx0Y29tcGFyZSA9ICggYS5vd25lckRvY3VtZW50IHx8IGEgKSA9PT0gKCBiLm93bmVyRG9jdW1lbnQgfHwgYiApID9cblx0XHRcdGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGIgKSA6XG5cblx0XHRcdC8vIE90aGVyd2lzZSB3ZSBrbm93IHRoZXkgYXJlIGRpc2Nvbm5lY3RlZFxuXHRcdFx0MTtcblxuXHRcdC8vIERpc2Nvbm5lY3RlZCBub2Rlc1xuXHRcdGlmICggY29tcGFyZSAmIDEgfHxcblx0XHRcdCghc3VwcG9ydC5zb3J0RGV0YWNoZWQgJiYgYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYSApID09PSBjb21wYXJlKSApIHtcblxuXHRcdFx0Ly8gQ2hvb3NlIHRoZSBmaXJzdCBlbGVtZW50IHRoYXQgaXMgcmVsYXRlZCB0byBvdXIgcHJlZmVycmVkIGRvY3VtZW50XG5cdFx0XHRpZiAoIGEgPT09IGRvYyB8fCBhLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGEpICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIGIgPT09IGRvYyB8fCBiLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGIpICkge1xuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWFpbnRhaW4gb3JpZ2luYWwgb3JkZXJcblx0XHRcdHJldHVybiBzb3J0SW5wdXQgP1xuXHRcdFx0XHQoIGluZGV4T2YoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZiggc29ydElucHV0LCBiICkgKSA6XG5cdFx0XHRcdDA7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNvbXBhcmUgJiA0ID8gLTEgOiAxO1xuXHR9IDpcblx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0Ly8gRXhpdCBlYXJseSBpZiB0aGUgbm9kZXMgYXJlIGlkZW50aWNhbFxuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2YXIgY3VyLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRhdXAgPSBhLnBhcmVudE5vZGUsXG5cdFx0XHRidXAgPSBiLnBhcmVudE5vZGUsXG5cdFx0XHRhcCA9IFsgYSBdLFxuXHRcdFx0YnAgPSBbIGIgXTtcblxuXHRcdC8vIFBhcmVudGxlc3Mgbm9kZXMgYXJlIGVpdGhlciBkb2N1bWVudHMgb3IgZGlzY29ubmVjdGVkXG5cdFx0aWYgKCAhYXVwIHx8ICFidXAgKSB7XG5cdFx0XHRyZXR1cm4gYSA9PT0gZG9jID8gLTEgOlxuXHRcdFx0XHRiID09PSBkb2MgPyAxIDpcblx0XHRcdFx0YXVwID8gLTEgOlxuXHRcdFx0XHRidXAgPyAxIDpcblx0XHRcdFx0c29ydElucHV0ID9cblx0XHRcdFx0KCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOlxuXHRcdFx0XHQwO1xuXG5cdFx0Ly8gSWYgdGhlIG5vZGVzIGFyZSBzaWJsaW5ncywgd2UgY2FuIGRvIGEgcXVpY2sgY2hlY2tcblx0XHR9IGVsc2UgaWYgKCBhdXAgPT09IGJ1cCApIHtcblx0XHRcdHJldHVybiBzaWJsaW5nQ2hlY2soIGEsIGIgKTtcblx0XHR9XG5cblx0XHQvLyBPdGhlcndpc2Ugd2UgbmVlZCBmdWxsIGxpc3RzIG9mIHRoZWlyIGFuY2VzdG9ycyBmb3IgY29tcGFyaXNvblxuXHRcdGN1ciA9IGE7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YXAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXHRcdGN1ciA9IGI7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YnAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXG5cdFx0Ly8gV2FsayBkb3duIHRoZSB0cmVlIGxvb2tpbmcgZm9yIGEgZGlzY3JlcGFuY3lcblx0XHR3aGlsZSAoIGFwW2ldID09PSBicFtpXSApIHtcblx0XHRcdGkrKztcblx0XHR9XG5cblx0XHRyZXR1cm4gaSA/XG5cdFx0XHQvLyBEbyBhIHNpYmxpbmcgY2hlY2sgaWYgdGhlIG5vZGVzIGhhdmUgYSBjb21tb24gYW5jZXN0b3Jcblx0XHRcdHNpYmxpbmdDaGVjayggYXBbaV0sIGJwW2ldICkgOlxuXG5cdFx0XHQvLyBPdGhlcndpc2Ugbm9kZXMgaW4gb3VyIGRvY3VtZW50IHNvcnQgZmlyc3Rcblx0XHRcdGFwW2ldID09PSBwcmVmZXJyZWREb2MgPyAtMSA6XG5cdFx0XHRicFtpXSA9PT0gcHJlZmVycmVkRG9jID8gMSA6XG5cdFx0XHQwO1xuXHR9O1xuXG5cdHJldHVybiBkb2M7XG59O1xuXG5TaXp6bGUubWF0Y2hlcyA9IGZ1bmN0aW9uKCBleHByLCBlbGVtZW50cyApIHtcblx0cmV0dXJuIFNpenpsZSggZXhwciwgbnVsbCwgbnVsbCwgZWxlbWVudHMgKTtcbn07XG5cblNpenpsZS5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggZWxlbSwgZXhwciApIHtcblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdGlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHR9XG5cblx0Ly8gTWFrZSBzdXJlIHRoYXQgYXR0cmlidXRlIHNlbGVjdG9ycyBhcmUgcXVvdGVkXG5cdGV4cHIgPSBleHByLnJlcGxhY2UoIHJhdHRyaWJ1dGVRdW90ZXMsIFwiPSckMSddXCIgKTtcblxuXHRpZiAoIHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yICYmIGRvY3VtZW50SXNIVE1MICYmXG5cdFx0KCAhcmJ1Z2d5TWF0Y2hlcyB8fCAhcmJ1Z2d5TWF0Y2hlcy50ZXN0KCBleHByICkgKSAmJlxuXHRcdCggIXJidWdneVFTQSAgICAgfHwgIXJidWdneVFTQS50ZXN0KCBleHByICkgKSApIHtcblxuXHRcdHRyeSB7XG5cdFx0XHR2YXIgcmV0ID0gbWF0Y2hlcy5jYWxsKCBlbGVtLCBleHByICk7XG5cblx0XHRcdC8vIElFIDkncyBtYXRjaGVzU2VsZWN0b3IgcmV0dXJucyBmYWxzZSBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblx0XHRcdGlmICggcmV0IHx8IHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggfHxcblx0XHRcdFx0XHQvLyBBcyB3ZWxsLCBkaXNjb25uZWN0ZWQgbm9kZXMgYXJlIHNhaWQgdG8gYmUgaW4gYSBkb2N1bWVudFxuXHRcdFx0XHRcdC8vIGZyYWdtZW50IGluIElFIDlcblx0XHRcdFx0XHRlbGVtLmRvY3VtZW50ICYmIGVsZW0uZG9jdW1lbnQubm9kZVR5cGUgIT09IDExICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGUpIHt9XG5cdH1cblxuXHRyZXR1cm4gU2l6emxlKCBleHByLCBkb2N1bWVudCwgbnVsbCwgWyBlbGVtIF0gKS5sZW5ndGggPiAwO1xufTtcblxuU2l6emxlLmNvbnRhaW5zID0gZnVuY3Rpb24oIGNvbnRleHQsIGVsZW0gKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0fVxuXHRyZXR1cm4gY29udGFpbnMoIGNvbnRleHQsIGVsZW0gKTtcbn07XG5cblNpenpsZS5hdHRyID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblx0fVxuXG5cdHZhciBmbiA9IEV4cHIuYXR0ckhhbmRsZVsgbmFtZS50b0xvd2VyQ2FzZSgpIF0sXG5cdFx0Ly8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKGpRdWVyeSAjMTM4MDcpXG5cdFx0dmFsID0gZm4gJiYgaGFzT3duLmNhbGwoIEV4cHIuYXR0ckhhbmRsZSwgbmFtZS50b0xvd2VyQ2FzZSgpICkgP1xuXHRcdFx0Zm4oIGVsZW0sIG5hbWUsICFkb2N1bWVudElzSFRNTCApIDpcblx0XHRcdHVuZGVmaW5lZDtcblxuXHRyZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgP1xuXHRcdHZhbCA6XG5cdFx0c3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFkb2N1bWVudElzSFRNTCA/XG5cdFx0XHRlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApIDpcblx0XHRcdCh2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHR2YWwudmFsdWUgOlxuXHRcdFx0XHRudWxsO1xufTtcblxuU2l6emxlLmVycm9yID0gZnVuY3Rpb24oIG1zZyApIHtcblx0dGhyb3cgbmV3IEVycm9yKCBcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiICsgbXNnICk7XG59O1xuXG4vKipcbiAqIERvY3VtZW50IHNvcnRpbmcgYW5kIHJlbW92aW5nIGR1cGxpY2F0ZXNcbiAqIEBwYXJhbSB7QXJyYXlMaWtlfSByZXN1bHRzXG4gKi9cblNpenpsZS51bmlxdWVTb3J0ID0gZnVuY3Rpb24oIHJlc3VsdHMgKSB7XG5cdHZhciBlbGVtLFxuXHRcdGR1cGxpY2F0ZXMgPSBbXSxcblx0XHRqID0gMCxcblx0XHRpID0gMDtcblxuXHQvLyBVbmxlc3Mgd2UgKmtub3cqIHdlIGNhbiBkZXRlY3QgZHVwbGljYXRlcywgYXNzdW1lIHRoZWlyIHByZXNlbmNlXG5cdGhhc0R1cGxpY2F0ZSA9ICFzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXM7XG5cdHNvcnRJbnB1dCA9ICFzdXBwb3J0LnNvcnRTdGFibGUgJiYgcmVzdWx0cy5zbGljZSggMCApO1xuXHRyZXN1bHRzLnNvcnQoIHNvcnRPcmRlciApO1xuXG5cdGlmICggaGFzRHVwbGljYXRlICkge1xuXHRcdHdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkge1xuXHRcdFx0aWYgKCBlbGVtID09PSByZXN1bHRzWyBpIF0gKSB7XG5cdFx0XHRcdGogPSBkdXBsaWNhdGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRyZXN1bHRzLnNwbGljZSggZHVwbGljYXRlc1sgaiBdLCAxICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ2xlYXIgaW5wdXQgYWZ0ZXIgc29ydGluZyB0byByZWxlYXNlIG9iamVjdHNcblx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvc2l6emxlL3B1bGwvMjI1XG5cdHNvcnRJbnB1dCA9IG51bGw7XG5cblx0cmV0dXJuIHJlc3VsdHM7XG59O1xuXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb24gZm9yIHJldHJpZXZpbmcgdGhlIHRleHQgdmFsdWUgb2YgYW4gYXJyYXkgb2YgRE9NIG5vZGVzXG4gKiBAcGFyYW0ge0FycmF5fEVsZW1lbnR9IGVsZW1cbiAqL1xuZ2V0VGV4dCA9IFNpenpsZS5nZXRUZXh0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHZhciBub2RlLFxuXHRcdHJldCA9IFwiXCIsXG5cdFx0aSA9IDAsXG5cdFx0bm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdGlmICggIW5vZGVUeXBlICkge1xuXHRcdC8vIElmIG5vIG5vZGVUeXBlLCB0aGlzIGlzIGV4cGVjdGVkIHRvIGJlIGFuIGFycmF5XG5cdFx0d2hpbGUgKCAobm9kZSA9IGVsZW1baSsrXSkgKSB7XG5cdFx0XHQvLyBEbyBub3QgdHJhdmVyc2UgY29tbWVudCBub2Rlc1xuXHRcdFx0cmV0ICs9IGdldFRleHQoIG5vZGUgKTtcblx0XHR9XG5cdH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAxIHx8IG5vZGVUeXBlID09PSA5IHx8IG5vZGVUeXBlID09PSAxMSApIHtcblx0XHQvLyBVc2UgdGV4dENvbnRlbnQgZm9yIGVsZW1lbnRzXG5cdFx0Ly8gaW5uZXJUZXh0IHVzYWdlIHJlbW92ZWQgZm9yIGNvbnNpc3RlbmN5IG9mIG5ldyBsaW5lcyAoalF1ZXJ5ICMxMTE1Mylcblx0XHRpZiAoIHR5cGVvZiBlbGVtLnRleHRDb250ZW50ID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0udGV4dENvbnRlbnQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFRyYXZlcnNlIGl0cyBjaGlsZHJlblxuXHRcdFx0Zm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7XG5cdFx0XHRcdHJldCArPSBnZXRUZXh0KCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2UgaWYgKCBub2RlVHlwZSA9PT0gMyB8fCBub2RlVHlwZSA9PT0gNCApIHtcblx0XHRyZXR1cm4gZWxlbS5ub2RlVmFsdWU7XG5cdH1cblx0Ly8gRG8gbm90IGluY2x1ZGUgY29tbWVudCBvciBwcm9jZXNzaW5nIGluc3RydWN0aW9uIG5vZGVzXG5cblx0cmV0dXJuIHJldDtcbn07XG5cbkV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzID0ge1xuXG5cdC8vIENhbiBiZSBhZGp1c3RlZCBieSB0aGUgdXNlclxuXHRjYWNoZUxlbmd0aDogNTAsXG5cblx0Y3JlYXRlUHNldWRvOiBtYXJrRnVuY3Rpb24sXG5cblx0bWF0Y2g6IG1hdGNoRXhwcixcblxuXHRhdHRySGFuZGxlOiB7fSxcblxuXHRmaW5kOiB7fSxcblxuXHRyZWxhdGl2ZToge1xuXHRcdFwiPlwiOiB7IGRpcjogXCJwYXJlbnROb2RlXCIsIGZpcnN0OiB0cnVlIH0sXG5cdFx0XCIgXCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiB9LFxuXHRcdFwiK1wiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiwgZmlyc3Q6IHRydWUgfSxcblx0XHRcIn5cIjogeyBkaXI6IFwicHJldmlvdXNTaWJsaW5nXCIgfVxuXHR9LFxuXG5cdHByZUZpbHRlcjoge1xuXHRcdFwiQVRUUlwiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHRtYXRjaFsxXSA9IG1hdGNoWzFdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdC8vIE1vdmUgdGhlIGdpdmVuIHZhbHVlIHRvIG1hdGNoWzNdIHdoZXRoZXIgcXVvdGVkIG9yIHVucXVvdGVkXG5cdFx0XHRtYXRjaFszXSA9ICggbWF0Y2hbM10gfHwgbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgXCJcIiApLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdGlmICggbWF0Y2hbMl0gPT09IFwifj1cIiApIHtcblx0XHRcdFx0bWF0Y2hbM10gPSBcIiBcIiArIG1hdGNoWzNdICsgXCIgXCI7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgNCApO1xuXHRcdH0sXG5cblx0XHRcIkNISUxEXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdC8qIG1hdGNoZXMgZnJvbSBtYXRjaEV4cHJbXCJDSElMRFwiXVxuXHRcdFx0XHQxIHR5cGUgKG9ubHl8bnRofC4uLilcblx0XHRcdFx0MiB3aGF0IChjaGlsZHxvZi10eXBlKVxuXHRcdFx0XHQzIGFyZ3VtZW50IChldmVufG9kZHxcXGQqfFxcZCpuKFsrLV1cXGQrKT98Li4uKVxuXHRcdFx0XHQ0IHhuLWNvbXBvbmVudCBvZiB4bit5IGFyZ3VtZW50IChbKy1dP1xcZCpufClcblx0XHRcdFx0NSBzaWduIG9mIHhuLWNvbXBvbmVudFxuXHRcdFx0XHQ2IHggb2YgeG4tY29tcG9uZW50XG5cdFx0XHRcdDcgc2lnbiBvZiB5LWNvbXBvbmVudFxuXHRcdFx0XHQ4IHkgb2YgeS1jb21wb25lbnRcblx0XHRcdCovXG5cdFx0XHRtYXRjaFsxXSA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRcdGlmICggbWF0Y2hbMV0uc2xpY2UoIDAsIDMgKSA9PT0gXCJudGhcIiApIHtcblx0XHRcdFx0Ly8gbnRoLSogcmVxdWlyZXMgYXJndW1lbnRcblx0XHRcdFx0aWYgKCAhbWF0Y2hbM10gKSB7XG5cdFx0XHRcdFx0U2l6emxlLmVycm9yKCBtYXRjaFswXSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gbnVtZXJpYyB4IGFuZCB5IHBhcmFtZXRlcnMgZm9yIEV4cHIuZmlsdGVyLkNISUxEXG5cdFx0XHRcdC8vIHJlbWVtYmVyIHRoYXQgZmFsc2UvdHJ1ZSBjYXN0IHJlc3BlY3RpdmVseSB0byAwLzFcblx0XHRcdFx0bWF0Y2hbNF0gPSArKCBtYXRjaFs0XSA/IG1hdGNoWzVdICsgKG1hdGNoWzZdIHx8IDEpIDogMiAqICggbWF0Y2hbM10gPT09IFwiZXZlblwiIHx8IG1hdGNoWzNdID09PSBcIm9kZFwiICkgKTtcblx0XHRcdFx0bWF0Y2hbNV0gPSArKCAoIG1hdGNoWzddICsgbWF0Y2hbOF0gKSB8fCBtYXRjaFszXSA9PT0gXCJvZGRcIiApO1xuXG5cdFx0XHQvLyBvdGhlciB0eXBlcyBwcm9oaWJpdCBhcmd1bWVudHNcblx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaDtcblx0XHR9LFxuXG5cdFx0XCJQU0VVRE9cIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0dmFyIGV4Y2Vzcyxcblx0XHRcdFx0dW5xdW90ZWQgPSAhbWF0Y2hbNl0gJiYgbWF0Y2hbMl07XG5cblx0XHRcdGlmICggbWF0Y2hFeHByW1wiQ0hJTERcIl0udGVzdCggbWF0Y2hbMF0gKSApIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFjY2VwdCBxdW90ZWQgYXJndW1lbnRzIGFzLWlzXG5cdFx0XHRpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRtYXRjaFsyXSA9IG1hdGNoWzRdIHx8IG1hdGNoWzVdIHx8IFwiXCI7XG5cblx0XHRcdC8vIFN0cmlwIGV4Y2VzcyBjaGFyYWN0ZXJzIGZyb20gdW5xdW90ZWQgYXJndW1lbnRzXG5cdFx0XHR9IGVsc2UgaWYgKCB1bnF1b3RlZCAmJiBycHNldWRvLnRlc3QoIHVucXVvdGVkICkgJiZcblx0XHRcdFx0Ly8gR2V0IGV4Y2VzcyBmcm9tIHRva2VuaXplIChyZWN1cnNpdmVseSlcblx0XHRcdFx0KGV4Y2VzcyA9IHRva2VuaXplKCB1bnF1b3RlZCwgdHJ1ZSApKSAmJlxuXHRcdFx0XHQvLyBhZHZhbmNlIHRvIHRoZSBuZXh0IGNsb3NpbmcgcGFyZW50aGVzaXNcblx0XHRcdFx0KGV4Y2VzcyA9IHVucXVvdGVkLmluZGV4T2YoIFwiKVwiLCB1bnF1b3RlZC5sZW5ndGggLSBleGNlc3MgKSAtIHVucXVvdGVkLmxlbmd0aCkgKSB7XG5cblx0XHRcdFx0Ly8gZXhjZXNzIGlzIGEgbmVnYXRpdmUgaW5kZXhcblx0XHRcdFx0bWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCwgZXhjZXNzICk7XG5cdFx0XHRcdG1hdGNoWzJdID0gdW5xdW90ZWQuc2xpY2UoIDAsIGV4Y2VzcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXR1cm4gb25seSBjYXB0dXJlcyBuZWVkZWQgYnkgdGhlIHBzZXVkbyBmaWx0ZXIgbWV0aG9kICh0eXBlIGFuZCBhcmd1bWVudClcblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgMyApO1xuXHRcdH1cblx0fSxcblxuXHRmaWx0ZXI6IHtcblxuXHRcdFwiVEFHXCI6IGZ1bmN0aW9uKCBub2RlTmFtZVNlbGVjdG9yICkge1xuXHRcdFx0dmFyIG5vZGVOYW1lID0gbm9kZU5hbWVTZWxlY3Rvci5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gbm9kZU5hbWVTZWxlY3RvciA9PT0gXCIqXCIgP1xuXHRcdFx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0gOlxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5vZGVOYW1lO1xuXHRcdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIkNMQVNTXCI6IGZ1bmN0aW9uKCBjbGFzc05hbWUgKSB7XG5cdFx0XHR2YXIgcGF0dGVybiA9IGNsYXNzQ2FjaGVbIGNsYXNzTmFtZSArIFwiIFwiIF07XG5cblx0XHRcdHJldHVybiBwYXR0ZXJuIHx8XG5cdFx0XHRcdChwYXR0ZXJuID0gbmV3IFJlZ0V4cCggXCIoXnxcIiArIHdoaXRlc3BhY2UgKyBcIilcIiArIGNsYXNzTmFtZSArIFwiKFwiICsgd2hpdGVzcGFjZSArIFwifCQpXCIgKSkgJiZcblx0XHRcdFx0Y2xhc3NDYWNoZSggY2xhc3NOYW1lLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gcGF0dGVybi50ZXN0KCB0eXBlb2YgZWxlbS5jbGFzc05hbWUgPT09IFwic3RyaW5nXCIgJiYgZWxlbS5jbGFzc05hbWUgfHwgdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGVsZW0uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIiApO1xuXHRcdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0XCJBVFRSXCI6IGZ1bmN0aW9uKCBuYW1lLCBvcGVyYXRvciwgY2hlY2sgKSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciByZXN1bHQgPSBTaXp6bGUuYXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0XHRcdGlmICggcmVzdWx0ID09IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG9wZXJhdG9yID09PSBcIiE9XCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCAhb3BlcmF0b3IgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXN1bHQgKz0gXCJcIjtcblxuXHRcdFx0XHRyZXR1cm4gb3BlcmF0b3IgPT09IFwiPVwiID8gcmVzdWx0ID09PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiIT1cIiA/IHJlc3VsdCAhPT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIl49XCIgPyBjaGVjayAmJiByZXN1bHQuaW5kZXhPZiggY2hlY2sgKSA9PT0gMCA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiKj1cIiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIiQ9XCIgPyBjaGVjayAmJiByZXN1bHQuc2xpY2UoIC1jaGVjay5sZW5ndGggKSA9PT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIn49XCIgPyAoIFwiIFwiICsgcmVzdWx0LnJlcGxhY2UoIHJ3aGl0ZXNwYWNlLCBcIiBcIiApICsgXCIgXCIgKS5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcInw9XCIgPyByZXN1bHQgPT09IGNoZWNrIHx8IHJlc3VsdC5zbGljZSggMCwgY2hlY2subGVuZ3RoICsgMSApID09PSBjaGVjayArIFwiLVwiIDpcblx0XHRcdFx0XHRmYWxzZTtcblx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiQ0hJTERcIjogZnVuY3Rpb24oIHR5cGUsIHdoYXQsIGFyZ3VtZW50LCBmaXJzdCwgbGFzdCApIHtcblx0XHRcdHZhciBzaW1wbGUgPSB0eXBlLnNsaWNlKCAwLCAzICkgIT09IFwibnRoXCIsXG5cdFx0XHRcdGZvcndhcmQgPSB0eXBlLnNsaWNlKCAtNCApICE9PSBcImxhc3RcIixcblx0XHRcdFx0b2ZUeXBlID0gd2hhdCA9PT0gXCJvZi10eXBlXCI7XG5cblx0XHRcdHJldHVybiBmaXJzdCA9PT0gMSAmJiBsYXN0ID09PSAwID9cblxuXHRcdFx0XHQvLyBTaG9ydGN1dCBmb3IgOm50aC0qKG4pXG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiAhIWVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdFx0fSA6XG5cblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHR2YXIgY2FjaGUsIG91dGVyQ2FjaGUsIG5vZGUsIGRpZmYsIG5vZGVJbmRleCwgc3RhcnQsXG5cdFx0XHRcdFx0XHRkaXIgPSBzaW1wbGUgIT09IGZvcndhcmQgPyBcIm5leHRTaWJsaW5nXCIgOiBcInByZXZpb3VzU2libGluZ1wiLFxuXHRcdFx0XHRcdFx0cGFyZW50ID0gZWxlbS5wYXJlbnROb2RlLFxuXHRcdFx0XHRcdFx0bmFtZSA9IG9mVHlwZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdFx0XHR1c2VDYWNoZSA9ICF4bWwgJiYgIW9mVHlwZTtcblxuXHRcdFx0XHRcdGlmICggcGFyZW50ICkge1xuXG5cdFx0XHRcdFx0XHQvLyA6KGZpcnN0fGxhc3R8b25seSktKGNoaWxkfG9mLXR5cGUpXG5cdFx0XHRcdFx0XHRpZiAoIHNpbXBsZSApIHtcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCBkaXIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0bm9kZSA9IGVsZW07XG5cdFx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9IG5vZGVbIGRpciBdKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggb2ZUeXBlID8gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDogbm9kZS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHQvLyBSZXZlcnNlIGRpcmVjdGlvbiBmb3IgOm9ubHktKiAoaWYgd2UgaGF2ZW4ndCB5ZXQgZG9uZSBzbylcblx0XHRcdFx0XHRcdFx0XHRzdGFydCA9IGRpciA9IHR5cGUgPT09IFwib25seVwiICYmICFzdGFydCAmJiBcIm5leHRTaWJsaW5nXCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHN0YXJ0ID0gWyBmb3J3YXJkID8gcGFyZW50LmZpcnN0Q2hpbGQgOiBwYXJlbnQubGFzdENoaWxkIF07XG5cblx0XHRcdFx0XHRcdC8vIG5vbi14bWwgOm50aC1jaGlsZCguLi4pIHN0b3JlcyBjYWNoZSBkYXRhIG9uIGBwYXJlbnRgXG5cdFx0XHRcdFx0XHRpZiAoIGZvcndhcmQgJiYgdXNlQ2FjaGUgKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFNlZWsgYGVsZW1gIGZyb20gYSBwcmV2aW91c2x5LWNhY2hlZCBpbmRleFxuXHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gcGFyZW50WyBleHBhbmRvIF0gfHwgKHBhcmVudFsgZXhwYW5kbyBdID0ge30pO1xuXHRcdFx0XHRcdFx0XHRjYWNoZSA9IG91dGVyQ2FjaGVbIHR5cGUgXSB8fCBbXTtcblx0XHRcdFx0XHRcdFx0bm9kZUluZGV4ID0gY2FjaGVbMF0gPT09IGRpcnJ1bnMgJiYgY2FjaGVbMV07XG5cdFx0XHRcdFx0XHRcdGRpZmYgPSBjYWNoZVswXSA9PT0gZGlycnVucyAmJiBjYWNoZVsyXTtcblx0XHRcdFx0XHRcdFx0bm9kZSA9IG5vZGVJbmRleCAmJiBwYXJlbnQuY2hpbGROb2Rlc1sgbm9kZUluZGV4IF07XG5cblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHxcblxuXHRcdFx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrIHRvIHNlZWtpbmcgYGVsZW1gIGZyb20gdGhlIHN0YXJ0XG5cdFx0XHRcdFx0XHRcdFx0KGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBXaGVuIGZvdW5kLCBjYWNoZSBpbmRleGVzIG9uIGBwYXJlbnRgIGFuZCBicmVha1xuXHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiArK2RpZmYgJiYgbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGVbIHR5cGUgXSA9IFsgZGlycnVucywgbm9kZUluZGV4LCBkaWZmIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gVXNlIHByZXZpb3VzbHktY2FjaGVkIGVsZW1lbnQgaW5kZXggaWYgYXZhaWxhYmxlXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCB1c2VDYWNoZSAmJiAoY2FjaGUgPSAoZWxlbVsgZXhwYW5kbyBdIHx8IChlbGVtWyBleHBhbmRvIF0gPSB7fSkpWyB0eXBlIF0pICYmIGNhY2hlWzBdID09PSBkaXJydW5zICkge1xuXHRcdFx0XHRcdFx0XHRkaWZmID0gY2FjaGVbMV07XG5cblx0XHRcdFx0XHRcdC8vIHhtbCA6bnRoLWNoaWxkKC4uLikgb3IgOm50aC1sYXN0LWNoaWxkKC4uLikgb3IgOm50aCgtbGFzdCk/LW9mLXR5cGUoLi4uKVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gVXNlIHRoZSBzYW1lIGxvb3AgYXMgYWJvdmUgdG8gc2VlayBgZWxlbWAgZnJvbSB0aGUgc3RhcnRcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHxcblx0XHRcdFx0XHRcdFx0XHQoZGlmZiA9IG5vZGVJbmRleCA9IDApIHx8IHN0YXJ0LnBvcCgpKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdGlmICggKCBvZlR5cGUgPyBub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgOiBub2RlLm5vZGVUeXBlID09PSAxICkgJiYgKytkaWZmICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ2FjaGUgdGhlIGluZGV4IG9mIGVhY2ggZW5jb3VudGVyZWQgZWxlbWVudFxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCB1c2VDYWNoZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0KG5vZGVbIGV4cGFuZG8gXSB8fCAobm9kZVsgZXhwYW5kbyBdID0ge30pKVsgdHlwZSBdID0gWyBkaXJydW5zLCBkaWZmIF07XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIEluY29ycG9yYXRlIHRoZSBvZmZzZXQsIHRoZW4gY2hlY2sgYWdhaW5zdCBjeWNsZSBzaXplXG5cdFx0XHRcdFx0XHRkaWZmIC09IGxhc3Q7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZGlmZiA9PT0gZmlyc3QgfHwgKCBkaWZmICUgZmlyc3QgPT09IDAgJiYgZGlmZiAvIGZpcnN0ID49IDAgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiUFNFVURPXCI6IGZ1bmN0aW9uKCBwc2V1ZG8sIGFyZ3VtZW50ICkge1xuXHRcdFx0Ly8gcHNldWRvLWNsYXNzIG5hbWVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI3BzZXVkby1jbGFzc2VzXG5cdFx0XHQvLyBQcmlvcml0aXplIGJ5IGNhc2Ugc2Vuc2l0aXZpdHkgaW4gY2FzZSBjdXN0b20gcHNldWRvcyBhcmUgYWRkZWQgd2l0aCB1cHBlcmNhc2UgbGV0dGVyc1xuXHRcdFx0Ly8gUmVtZW1iZXIgdGhhdCBzZXRGaWx0ZXJzIGluaGVyaXRzIGZyb20gcHNldWRvc1xuXHRcdFx0dmFyIGFyZ3MsXG5cdFx0XHRcdGZuID0gRXhwci5wc2V1ZG9zWyBwc2V1ZG8gXSB8fCBFeHByLnNldEZpbHRlcnNbIHBzZXVkby50b0xvd2VyQ2FzZSgpIF0gfHxcblx0XHRcdFx0XHRTaXp6bGUuZXJyb3IoIFwidW5zdXBwb3J0ZWQgcHNldWRvOiBcIiArIHBzZXVkbyApO1xuXG5cdFx0XHQvLyBUaGUgdXNlciBtYXkgdXNlIGNyZWF0ZVBzZXVkbyB0byBpbmRpY2F0ZSB0aGF0XG5cdFx0XHQvLyBhcmd1bWVudHMgYXJlIG5lZWRlZCB0byBjcmVhdGUgdGhlIGZpbHRlciBmdW5jdGlvblxuXHRcdFx0Ly8ganVzdCBhcyBTaXp6bGUgZG9lc1xuXHRcdFx0aWYgKCBmblsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHRyZXR1cm4gZm4oIGFyZ3VtZW50ICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEJ1dCBtYWludGFpbiBzdXBwb3J0IGZvciBvbGQgc2lnbmF0dXJlc1xuXHRcdFx0aWYgKCBmbi5sZW5ndGggPiAxICkge1xuXHRcdFx0XHRhcmdzID0gWyBwc2V1ZG8sIHBzZXVkbywgXCJcIiwgYXJndW1lbnQgXTtcblx0XHRcdFx0cmV0dXJuIEV4cHIuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eSggcHNldWRvLnRvTG93ZXJDYXNlKCkgKSA/XG5cdFx0XHRcdFx0bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkge1xuXHRcdFx0XHRcdFx0dmFyIGlkeCxcblx0XHRcdFx0XHRcdFx0bWF0Y2hlZCA9IGZuKCBzZWVkLCBhcmd1bWVudCApLFxuXHRcdFx0XHRcdFx0XHRpID0gbWF0Y2hlZC5sZW5ndGg7XG5cdFx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdFx0aWR4ID0gaW5kZXhPZiggc2VlZCwgbWF0Y2hlZFtpXSApO1xuXHRcdFx0XHRcdFx0XHRzZWVkWyBpZHggXSA9ICEoIG1hdGNoZXNbIGlkeCBdID0gbWF0Y2hlZFtpXSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pIDpcblx0XHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRcdHJldHVybiBmbiggZWxlbSwgMCwgYXJncyApO1xuXHRcdFx0XHRcdH07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmbjtcblx0XHR9XG5cdH0sXG5cblx0cHNldWRvczoge1xuXHRcdC8vIFBvdGVudGlhbGx5IGNvbXBsZXggcHNldWRvc1xuXHRcdFwibm90XCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0XHQvLyBUcmltIHRoZSBzZWxlY3RvciBwYXNzZWQgdG8gY29tcGlsZVxuXHRcdFx0Ly8gdG8gYXZvaWQgdHJlYXRpbmcgbGVhZGluZyBhbmQgdHJhaWxpbmdcblx0XHRcdC8vIHNwYWNlcyBhcyBjb21iaW5hdG9yc1xuXHRcdFx0dmFyIGlucHV0ID0gW10sXG5cdFx0XHRcdHJlc3VsdHMgPSBbXSxcblx0XHRcdFx0bWF0Y2hlciA9IGNvbXBpbGUoIHNlbGVjdG9yLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSApO1xuXG5cdFx0XHRyZXR1cm4gbWF0Y2hlclsgZXhwYW5kbyBdID9cblx0XHRcdFx0bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdFx0dmFyIGVsZW0sXG5cdFx0XHRcdFx0XHR1bm1hdGNoZWQgPSBtYXRjaGVyKCBzZWVkLCBudWxsLCB4bWwsIFtdICksXG5cdFx0XHRcdFx0XHRpID0gc2VlZC5sZW5ndGg7XG5cblx0XHRcdFx0XHQvLyBNYXRjaCBlbGVtZW50cyB1bm1hdGNoZWQgYnkgYG1hdGNoZXJgXG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRpZiAoIChlbGVtID0gdW5tYXRjaGVkW2ldKSApIHtcblx0XHRcdFx0XHRcdFx0c2VlZFtpXSA9ICEobWF0Y2hlc1tpXSA9IGVsZW0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkgOlxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdGlucHV0WzBdID0gZWxlbTtcblx0XHRcdFx0XHRtYXRjaGVyKCBpbnB1dCwgbnVsbCwgeG1sLCByZXN1bHRzICk7XG5cdFx0XHRcdFx0Ly8gRG9uJ3Qga2VlcCB0aGUgZWxlbWVudCAoaXNzdWUgIzI5OSlcblx0XHRcdFx0XHRpbnB1dFswXSA9IG51bGw7XG5cdFx0XHRcdFx0cmV0dXJuICFyZXN1bHRzLnBvcCgpO1xuXHRcdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0XCJoYXNcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIFNpenpsZSggc2VsZWN0b3IsIGVsZW0gKS5sZW5ndGggPiAwO1xuXHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdFwiY29udGFpbnNcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdFx0dGV4dCA9IHRleHQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuICggZWxlbS50ZXh0Q29udGVudCB8fCBlbGVtLmlubmVyVGV4dCB8fCBnZXRUZXh0KCBlbGVtICkgKS5pbmRleE9mKCB0ZXh0ICkgPiAtMTtcblx0XHRcdH07XG5cdFx0fSksXG5cblx0XHQvLyBcIldoZXRoZXIgYW4gZWxlbWVudCBpcyByZXByZXNlbnRlZCBieSBhIDpsYW5nKCkgc2VsZWN0b3Jcblx0XHQvLyBpcyBiYXNlZCBzb2xlbHkgb24gdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZVxuXHRcdC8vIGJlaW5nIGVxdWFsIHRvIHRoZSBpZGVudGlmaWVyIEMsXG5cdFx0Ly8gb3IgYmVnaW5uaW5nIHdpdGggdGhlIGlkZW50aWZpZXIgQyBpbW1lZGlhdGVseSBmb2xsb3dlZCBieSBcIi1cIi5cblx0XHQvLyBUaGUgbWF0Y2hpbmcgb2YgQyBhZ2FpbnN0IHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UgdmFsdWUgaXMgcGVyZm9ybWVkIGNhc2UtaW5zZW5zaXRpdmVseS5cblx0XHQvLyBUaGUgaWRlbnRpZmllciBDIGRvZXMgbm90IGhhdmUgdG8gYmUgYSB2YWxpZCBsYW5ndWFnZSBuYW1lLlwiXG5cdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNsYW5nLXBzZXVkb1xuXHRcdFwibGFuZ1wiOiBtYXJrRnVuY3Rpb24oIGZ1bmN0aW9uKCBsYW5nICkge1xuXHRcdFx0Ly8gbGFuZyB2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgaWRlbnRpZmllclxuXHRcdFx0aWYgKCAhcmlkZW50aWZpZXIudGVzdChsYW5nIHx8IFwiXCIpICkge1xuXHRcdFx0XHRTaXp6bGUuZXJyb3IoIFwidW5zdXBwb3J0ZWQgbGFuZzogXCIgKyBsYW5nICk7XG5cdFx0XHR9XG5cdFx0XHRsYW5nID0gbGFuZy5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciBlbGVtTGFuZztcblx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdGlmICggKGVsZW1MYW5nID0gZG9jdW1lbnRJc0hUTUwgP1xuXHRcdFx0XHRcdFx0ZWxlbS5sYW5nIDpcblx0XHRcdFx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlKFwieG1sOmxhbmdcIikgfHwgZWxlbS5nZXRBdHRyaWJ1dGUoXCJsYW5nXCIpKSApIHtcblxuXHRcdFx0XHRcdFx0ZWxlbUxhbmcgPSBlbGVtTGFuZy50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGVsZW1MYW5nID09PSBsYW5nIHx8IGVsZW1MYW5nLmluZGV4T2YoIGxhbmcgKyBcIi1cIiApID09PSAwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSB3aGlsZSAoIChlbGVtID0gZWxlbS5wYXJlbnROb2RlKSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH07XG5cdFx0fSksXG5cblx0XHQvLyBNaXNjZWxsYW5lb3VzXG5cdFx0XCJ0YXJnZXRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbiAmJiB3aW5kb3cubG9jYXRpb24uaGFzaDtcblx0XHRcdHJldHVybiBoYXNoICYmIGhhc2guc2xpY2UoIDEgKSA9PT0gZWxlbS5pZDtcblx0XHR9LFxuXG5cdFx0XCJyb290XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0gPT09IGRvY0VsZW07XG5cdFx0fSxcblxuXHRcdFwiZm9jdXNcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiAoIWRvY3VtZW50Lmhhc0ZvY3VzIHx8IGRvY3VtZW50Lmhhc0ZvY3VzKCkpICYmICEhKGVsZW0udHlwZSB8fCBlbGVtLmhyZWYgfHwgfmVsZW0udGFiSW5kZXgpO1xuXHRcdH0sXG5cblx0XHQvLyBCb29sZWFuIHByb3BlcnRpZXNcblx0XHRcImVuYWJsZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gZmFsc2U7XG5cdFx0fSxcblxuXHRcdFwiZGlzYWJsZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0XCJjaGVja2VkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0Ly8gSW4gQ1NTMywgOmNoZWNrZWQgc2hvdWxkIHJldHVybiBib3RoIGNoZWNrZWQgYW5kIHNlbGVjdGVkIGVsZW1lbnRzXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDExL1JFQy1jc3MzLXNlbGVjdG9ycy0yMDExMDkyOS8jY2hlY2tlZFxuXHRcdFx0dmFyIG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIChub2RlTmFtZSA9PT0gXCJpbnB1dFwiICYmICEhZWxlbS5jaGVja2VkKSB8fCAobm9kZU5hbWUgPT09IFwib3B0aW9uXCIgJiYgISFlbGVtLnNlbGVjdGVkKTtcblx0XHR9LFxuXG5cdFx0XCJzZWxlY3RlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdC8vIEFjY2Vzc2luZyB0aGlzIHByb3BlcnR5IG1ha2VzIHNlbGVjdGVkLWJ5LWRlZmF1bHRcblx0XHRcdC8vIG9wdGlvbnMgaW4gU2FmYXJpIHdvcmsgcHJvcGVybHlcblx0XHRcdGlmICggZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRlbGVtLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGVsZW0uc2VsZWN0ZWQgPT09IHRydWU7XG5cdFx0fSxcblxuXHRcdC8vIENvbnRlbnRzXG5cdFx0XCJlbXB0eVwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jZW1wdHktcHNldWRvXG5cdFx0XHQvLyA6ZW1wdHkgaXMgbmVnYXRlZCBieSBlbGVtZW50ICgxKSBvciBjb250ZW50IG5vZGVzICh0ZXh0OiAzOyBjZGF0YTogNDsgZW50aXR5IHJlZjogNSksXG5cdFx0XHQvLyAgIGJ1dCBub3QgYnkgb3RoZXJzIChjb21tZW50OiA4OyBwcm9jZXNzaW5nIGluc3RydWN0aW9uOiA3OyBldGMuKVxuXHRcdFx0Ly8gbm9kZVR5cGUgPCA2IHdvcmtzIGJlY2F1c2UgYXR0cmlidXRlcyAoMikgZG8gbm90IGFwcGVhciBhcyBjaGlsZHJlblxuXHRcdFx0Zm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7XG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA8IDYgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0XCJwYXJlbnRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gIUV4cHIucHNldWRvc1tcImVtcHR5XCJdKCBlbGVtICk7XG5cdFx0fSxcblxuXHRcdC8vIEVsZW1lbnQvaW5wdXQgdHlwZXNcblx0XHRcImhlYWRlclwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiByaGVhZGVyLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTtcblx0XHR9LFxuXG5cdFx0XCJpbnB1dFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiByaW5wdXRzLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTtcblx0XHR9LFxuXG5cdFx0XCJidXR0b25cIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiBuYW1lID09PSBcImlucHV0XCIgJiYgZWxlbS50eXBlID09PSBcImJ1dHRvblwiIHx8IG5hbWUgPT09IFwiYnV0dG9uXCI7XG5cdFx0fSxcblxuXHRcdFwidGV4dFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBhdHRyO1xuXHRcdFx0cmV0dXJuIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICYmXG5cdFx0XHRcdGVsZW0udHlwZSA9PT0gXCJ0ZXh0XCIgJiZcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRTw4XG5cdFx0XHRcdC8vIE5ldyBIVE1MNSBhdHRyaWJ1dGUgdmFsdWVzIChlLmcuLCBcInNlYXJjaFwiKSBhcHBlYXIgd2l0aCBlbGVtLnR5cGUgPT09IFwidGV4dFwiXG5cdFx0XHRcdCggKGF0dHIgPSBlbGVtLmdldEF0dHJpYnV0ZShcInR5cGVcIikpID09IG51bGwgfHwgYXR0ci50b0xvd2VyQ2FzZSgpID09PSBcInRleHRcIiApO1xuXHRcdH0sXG5cblx0XHQvLyBQb3NpdGlvbi1pbi1jb2xsZWN0aW9uXG5cdFx0XCJmaXJzdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIFsgMCBdO1xuXHRcdH0pLFxuXG5cdFx0XCJsYXN0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuXHRcdFx0cmV0dXJuIFsgbGVuZ3RoIC0gMSBdO1xuXHRcdH0pLFxuXG5cdFx0XCJlcVwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHRyZXR1cm4gWyBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50IF07XG5cdFx0fSksXG5cblx0XHRcImV2ZW5cIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkgKz0gMiApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSksXG5cblx0XHRcIm9kZFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcblx0XHRcdHZhciBpID0gMTtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KSxcblxuXHRcdFwibHRcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0dmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50O1xuXHRcdFx0Zm9yICggOyAtLWkgPj0gMDsgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pLFxuXG5cdFx0XCJndFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHR2YXIgaSA9IGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQ7XG5cdFx0XHRmb3IgKCA7ICsraSA8IGxlbmd0aDsgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pXG5cdH1cbn07XG5cbkV4cHIucHNldWRvc1tcIm50aFwiXSA9IEV4cHIucHNldWRvc1tcImVxXCJdO1xuXG4vLyBBZGQgYnV0dG9uL2lucHV0IHR5cGUgcHNldWRvc1xuZm9yICggaSBpbiB7IHJhZGlvOiB0cnVlLCBjaGVja2JveDogdHJ1ZSwgZmlsZTogdHJ1ZSwgcGFzc3dvcmQ6IHRydWUsIGltYWdlOiB0cnVlIH0gKSB7XG5cdEV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlSW5wdXRQc2V1ZG8oIGkgKTtcbn1cbmZvciAoIGkgaW4geyBzdWJtaXQ6IHRydWUsIHJlc2V0OiB0cnVlIH0gKSB7XG5cdEV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlQnV0dG9uUHNldWRvKCBpICk7XG59XG5cbi8vIEVhc3kgQVBJIGZvciBjcmVhdGluZyBuZXcgc2V0RmlsdGVyc1xuZnVuY3Rpb24gc2V0RmlsdGVycygpIHt9XG5zZXRGaWx0ZXJzLnByb3RvdHlwZSA9IEV4cHIuZmlsdGVycyA9IEV4cHIucHNldWRvcztcbkV4cHIuc2V0RmlsdGVycyA9IG5ldyBzZXRGaWx0ZXJzKCk7XG5cbnRva2VuaXplID0gU2l6emxlLnRva2VuaXplID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBwYXJzZU9ubHkgKSB7XG5cdHZhciBtYXRjaGVkLCBtYXRjaCwgdG9rZW5zLCB0eXBlLFxuXHRcdHNvRmFyLCBncm91cHMsIHByZUZpbHRlcnMsXG5cdFx0Y2FjaGVkID0gdG9rZW5DYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdO1xuXG5cdGlmICggY2FjaGVkICkge1xuXHRcdHJldHVybiBwYXJzZU9ubHkgPyAwIDogY2FjaGVkLnNsaWNlKCAwICk7XG5cdH1cblxuXHRzb0ZhciA9IHNlbGVjdG9yO1xuXHRncm91cHMgPSBbXTtcblx0cHJlRmlsdGVycyA9IEV4cHIucHJlRmlsdGVyO1xuXG5cdHdoaWxlICggc29GYXIgKSB7XG5cblx0XHQvLyBDb21tYSBhbmQgZmlyc3QgcnVuXG5cdFx0aWYgKCAhbWF0Y2hlZCB8fCAobWF0Y2ggPSByY29tbWEuZXhlYyggc29GYXIgKSkgKSB7XG5cdFx0XHRpZiAoIG1hdGNoICkge1xuXHRcdFx0XHQvLyBEb24ndCBjb25zdW1lIHRyYWlsaW5nIGNvbW1hcyBhcyB2YWxpZFxuXHRcdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaFswXS5sZW5ndGggKSB8fCBzb0Zhcjtcblx0XHRcdH1cblx0XHRcdGdyb3Vwcy5wdXNoKCAodG9rZW5zID0gW10pICk7XG5cdFx0fVxuXG5cdFx0bWF0Y2hlZCA9IGZhbHNlO1xuXG5cdFx0Ly8gQ29tYmluYXRvcnNcblx0XHRpZiAoIChtYXRjaCA9IHJjb21iaW5hdG9ycy5leGVjKCBzb0ZhciApKSApIHtcblx0XHRcdG1hdGNoZWQgPSBtYXRjaC5zaGlmdCgpO1xuXHRcdFx0dG9rZW5zLnB1c2goe1xuXHRcdFx0XHR2YWx1ZTogbWF0Y2hlZCxcblx0XHRcdFx0Ly8gQ2FzdCBkZXNjZW5kYW50IGNvbWJpbmF0b3JzIHRvIHNwYWNlXG5cdFx0XHRcdHR5cGU6IG1hdGNoWzBdLnJlcGxhY2UoIHJ0cmltLCBcIiBcIiApXG5cdFx0XHR9KTtcblx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7XG5cdFx0fVxuXG5cdFx0Ly8gRmlsdGVyc1xuXHRcdGZvciAoIHR5cGUgaW4gRXhwci5maWx0ZXIgKSB7XG5cdFx0XHRpZiAoIChtYXRjaCA9IG1hdGNoRXhwclsgdHlwZSBdLmV4ZWMoIHNvRmFyICkpICYmICghcHJlRmlsdGVyc1sgdHlwZSBdIHx8XG5cdFx0XHRcdChtYXRjaCA9IHByZUZpbHRlcnNbIHR5cGUgXSggbWF0Y2ggKSkpICkge1xuXHRcdFx0XHRtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcblx0XHRcdFx0dG9rZW5zLnB1c2goe1xuXHRcdFx0XHRcdHZhbHVlOiBtYXRjaGVkLFxuXHRcdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdFx0bWF0Y2hlczogbWF0Y2hcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCAhbWF0Y2hlZCApIHtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBpbnZhbGlkIGV4Y2Vzc1xuXHQvLyBpZiB3ZSdyZSBqdXN0IHBhcnNpbmdcblx0Ly8gT3RoZXJ3aXNlLCB0aHJvdyBhbiBlcnJvciBvciByZXR1cm4gdG9rZW5zXG5cdHJldHVybiBwYXJzZU9ubHkgP1xuXHRcdHNvRmFyLmxlbmd0aCA6XG5cdFx0c29GYXIgP1xuXHRcdFx0U2l6emxlLmVycm9yKCBzZWxlY3RvciApIDpcblx0XHRcdC8vIENhY2hlIHRoZSB0b2tlbnNcblx0XHRcdHRva2VuQ2FjaGUoIHNlbGVjdG9yLCBncm91cHMgKS5zbGljZSggMCApO1xufTtcblxuZnVuY3Rpb24gdG9TZWxlY3RvciggdG9rZW5zICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gdG9rZW5zLmxlbmd0aCxcblx0XHRzZWxlY3RvciA9IFwiXCI7XG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdHNlbGVjdG9yICs9IHRva2Vuc1tpXS52YWx1ZTtcblx0fVxuXHRyZXR1cm4gc2VsZWN0b3I7XG59XG5cbmZ1bmN0aW9uIGFkZENvbWJpbmF0b3IoIG1hdGNoZXIsIGNvbWJpbmF0b3IsIGJhc2UgKSB7XG5cdHZhciBkaXIgPSBjb21iaW5hdG9yLmRpcixcblx0XHRjaGVja05vbkVsZW1lbnRzID0gYmFzZSAmJiBkaXIgPT09IFwicGFyZW50Tm9kZVwiLFxuXHRcdGRvbmVOYW1lID0gZG9uZSsrO1xuXG5cdHJldHVybiBjb21iaW5hdG9yLmZpcnN0ID9cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGNsb3Nlc3QgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0d2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHtcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSA6XG5cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGFsbCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudHNcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIG9sZENhY2hlLCBvdXRlckNhY2hlLFxuXHRcdFx0XHRuZXdDYWNoZSA9IFsgZGlycnVucywgZG9uZU5hbWUgXTtcblxuXHRcdFx0Ly8gV2UgY2FuJ3Qgc2V0IGFyYml0cmFyeSBkYXRhIG9uIFhNTCBub2Rlcywgc28gdGhleSBkb24ndCBiZW5lZml0IGZyb20gZGlyIGNhY2hpbmdcblx0XHRcdGlmICggeG1sICkge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IGVsZW1bIGV4cGFuZG8gXSB8fCAoZWxlbVsgZXhwYW5kbyBdID0ge30pO1xuXHRcdFx0XHRcdFx0aWYgKCAob2xkQ2FjaGUgPSBvdXRlckNhY2hlWyBkaXIgXSkgJiZcblx0XHRcdFx0XHRcdFx0b2xkQ2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBvbGRDYWNoZVsgMSBdID09PSBkb25lTmFtZSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBBc3NpZ24gdG8gbmV3Q2FjaGUgc28gcmVzdWx0cyBiYWNrLXByb3BhZ2F0ZSB0byBwcmV2aW91cyBlbGVtZW50c1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gKG5ld0NhY2hlWyAyIF0gPSBvbGRDYWNoZVsgMiBdKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIFJldXNlIG5ld2NhY2hlIHNvIHJlc3VsdHMgYmFjay1wcm9wYWdhdGUgdG8gcHJldmlvdXMgZWxlbWVudHNcblx0XHRcdFx0XHRcdFx0b3V0ZXJDYWNoZVsgZGlyIF0gPSBuZXdDYWNoZTtcblxuXHRcdFx0XHRcdFx0XHQvLyBBIG1hdGNoIG1lYW5zIHdlJ3JlIGRvbmU7IGEgZmFpbCBtZWFucyB3ZSBoYXZlIHRvIGtlZXAgY2hlY2tpbmdcblx0XHRcdFx0XHRcdFx0aWYgKCAobmV3Q2FjaGVbIDIgXSA9IG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApIHtcblx0cmV0dXJuIG1hdGNoZXJzLmxlbmd0aCA+IDEgP1xuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHR2YXIgaSA9IG1hdGNoZXJzLmxlbmd0aDtcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRpZiAoICFtYXRjaGVyc1tpXSggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9IDpcblx0XHRtYXRjaGVyc1swXTtcbn1cblxuZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IsIGNvbnRleHRzLCByZXN1bHRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gY29udGV4dHMubGVuZ3RoO1xuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0c1tpXSwgcmVzdWx0cyApO1xuXHR9XG5cdHJldHVybiByZXN1bHRzO1xufVxuXG5mdW5jdGlvbiBjb25kZW5zZSggdW5tYXRjaGVkLCBtYXAsIGZpbHRlciwgY29udGV4dCwgeG1sICkge1xuXHR2YXIgZWxlbSxcblx0XHRuZXdVbm1hdGNoZWQgPSBbXSxcblx0XHRpID0gMCxcblx0XHRsZW4gPSB1bm1hdGNoZWQubGVuZ3RoLFxuXHRcdG1hcHBlZCA9IG1hcCAhPSBudWxsO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKGVsZW0gPSB1bm1hdGNoZWRbaV0pICkge1xuXHRcdFx0aWYgKCAhZmlsdGVyIHx8IGZpbHRlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdG5ld1VubWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdGlmICggbWFwcGVkICkge1xuXHRcdFx0XHRcdG1hcC5wdXNoKCBpICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbmV3VW5tYXRjaGVkO1xufVxuXG5mdW5jdGlvbiBzZXRNYXRjaGVyKCBwcmVGaWx0ZXIsIHNlbGVjdG9yLCBtYXRjaGVyLCBwb3N0RmlsdGVyLCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKSB7XG5cdGlmICggcG9zdEZpbHRlciAmJiAhcG9zdEZpbHRlclsgZXhwYW5kbyBdICkge1xuXHRcdHBvc3RGaWx0ZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmlsdGVyICk7XG5cdH1cblx0aWYgKCBwb3N0RmluZGVyICYmICFwb3N0RmluZGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0cG9zdEZpbmRlciA9IHNldE1hdGNoZXIoIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApO1xuXHR9XG5cdHJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIHJlc3VsdHMsIGNvbnRleHQsIHhtbCApIHtcblx0XHR2YXIgdGVtcCwgaSwgZWxlbSxcblx0XHRcdHByZU1hcCA9IFtdLFxuXHRcdFx0cG9zdE1hcCA9IFtdLFxuXHRcdFx0cHJlZXhpc3RpbmcgPSByZXN1bHRzLmxlbmd0aCxcblxuXHRcdFx0Ly8gR2V0IGluaXRpYWwgZWxlbWVudHMgZnJvbSBzZWVkIG9yIGNvbnRleHRcblx0XHRcdGVsZW1zID0gc2VlZCB8fCBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciB8fCBcIipcIiwgY29udGV4dC5ub2RlVHlwZSA/IFsgY29udGV4dCBdIDogY29udGV4dCwgW10gKSxcblxuXHRcdFx0Ly8gUHJlZmlsdGVyIHRvIGdldCBtYXRjaGVyIGlucHV0LCBwcmVzZXJ2aW5nIGEgbWFwIGZvciBzZWVkLXJlc3VsdHMgc3luY2hyb25pemF0aW9uXG5cdFx0XHRtYXRjaGVySW4gPSBwcmVGaWx0ZXIgJiYgKCBzZWVkIHx8ICFzZWxlY3RvciApID9cblx0XHRcdFx0Y29uZGVuc2UoIGVsZW1zLCBwcmVNYXAsIHByZUZpbHRlciwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRlbGVtcyxcblxuXHRcdFx0bWF0Y2hlck91dCA9IG1hdGNoZXIgP1xuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGEgcG9zdEZpbmRlciwgb3IgZmlsdGVyZWQgc2VlZCwgb3Igbm9uLXNlZWQgcG9zdEZpbHRlciBvciBwcmVleGlzdGluZyByZXN1bHRzLFxuXHRcdFx0XHRwb3N0RmluZGVyIHx8ICggc2VlZCA/IHByZUZpbHRlciA6IHByZWV4aXN0aW5nIHx8IHBvc3RGaWx0ZXIgKSA/XG5cblx0XHRcdFx0XHQvLyAuLi5pbnRlcm1lZGlhdGUgcHJvY2Vzc2luZyBpcyBuZWNlc3Nhcnlcblx0XHRcdFx0XHRbXSA6XG5cblx0XHRcdFx0XHQvLyAuLi5vdGhlcndpc2UgdXNlIHJlc3VsdHMgZGlyZWN0bHlcblx0XHRcdFx0XHRyZXN1bHRzIDpcblx0XHRcdFx0bWF0Y2hlckluO1xuXG5cdFx0Ly8gRmluZCBwcmltYXJ5IG1hdGNoZXNcblx0XHRpZiAoIG1hdGNoZXIgKSB7XG5cdFx0XHRtYXRjaGVyKCBtYXRjaGVySW4sIG1hdGNoZXJPdXQsIGNvbnRleHQsIHhtbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHBvc3RGaWx0ZXJcblx0XHRpZiAoIHBvc3RGaWx0ZXIgKSB7XG5cdFx0XHR0ZW1wID0gY29uZGVuc2UoIG1hdGNoZXJPdXQsIHBvc3RNYXAgKTtcblx0XHRcdHBvc3RGaWx0ZXIoIHRlbXAsIFtdLCBjb250ZXh0LCB4bWwgKTtcblxuXHRcdFx0Ly8gVW4tbWF0Y2ggZmFpbGluZyBlbGVtZW50cyBieSBtb3ZpbmcgdGhlbSBiYWNrIHRvIG1hdGNoZXJJblxuXHRcdFx0aSA9IHRlbXAubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGlmICggKGVsZW0gPSB0ZW1wW2ldKSApIHtcblx0XHRcdFx0XHRtYXRjaGVyT3V0WyBwb3N0TWFwW2ldIF0gPSAhKG1hdGNoZXJJblsgcG9zdE1hcFtpXSBdID0gZWxlbSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRpZiAoIHBvc3RGaW5kZXIgfHwgcHJlRmlsdGVyICkge1xuXHRcdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cdFx0XHRcdFx0Ly8gR2V0IHRoZSBmaW5hbCBtYXRjaGVyT3V0IGJ5IGNvbmRlbnNpbmcgdGhpcyBpbnRlcm1lZGlhdGUgaW50byBwb3N0RmluZGVyIGNvbnRleHRzXG5cdFx0XHRcdFx0dGVtcCA9IFtdO1xuXHRcdFx0XHRcdGkgPSBtYXRjaGVyT3V0Lmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSApIHtcblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBtYXRjaGVySW4gc2luY2UgZWxlbSBpcyBub3QgeWV0IGEgZmluYWwgbWF0Y2hcblx0XHRcdFx0XHRcdFx0dGVtcC5wdXNoKCAobWF0Y2hlckluW2ldID0gZWxlbSkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cG9zdEZpbmRlciggbnVsbCwgKG1hdGNoZXJPdXQgPSBbXSksIHRlbXAsIHhtbCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gTW92ZSBtYXRjaGVkIGVsZW1lbnRzIGZyb20gc2VlZCB0byByZXN1bHRzIHRvIGtlZXAgdGhlbSBzeW5jaHJvbml6ZWRcblx0XHRcdFx0aSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gbWF0Y2hlck91dFtpXSkgJiZcblx0XHRcdFx0XHRcdCh0ZW1wID0gcG9zdEZpbmRlciA/IGluZGV4T2YoIHNlZWQsIGVsZW0gKSA6IHByZU1hcFtpXSkgPiAtMSApIHtcblxuXHRcdFx0XHRcdFx0c2VlZFt0ZW1wXSA9ICEocmVzdWx0c1t0ZW1wXSA9IGVsZW0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gQWRkIGVsZW1lbnRzIHRvIHJlc3VsdHMsIHRocm91Z2ggcG9zdEZpbmRlciBpZiBkZWZpbmVkXG5cdFx0fSBlbHNlIHtcblx0XHRcdG1hdGNoZXJPdXQgPSBjb25kZW5zZShcblx0XHRcdFx0bWF0Y2hlck91dCA9PT0gcmVzdWx0cyA/XG5cdFx0XHRcdFx0bWF0Y2hlck91dC5zcGxpY2UoIHByZWV4aXN0aW5nLCBtYXRjaGVyT3V0Lmxlbmd0aCApIDpcblx0XHRcdFx0XHRtYXRjaGVyT3V0XG5cdFx0XHQpO1xuXHRcdFx0aWYgKCBwb3N0RmluZGVyICkge1xuXHRcdFx0XHRwb3N0RmluZGVyKCBudWxsLCByZXN1bHRzLCBtYXRjaGVyT3V0LCB4bWwgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIG1hdGNoZXJPdXQgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zICkge1xuXHR2YXIgY2hlY2tDb250ZXh0LCBtYXRjaGVyLCBqLFxuXHRcdGxlbiA9IHRva2Vucy5sZW5ndGgsXG5cdFx0bGVhZGluZ1JlbGF0aXZlID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzBdLnR5cGUgXSxcblx0XHRpbXBsaWNpdFJlbGF0aXZlID0gbGVhZGluZ1JlbGF0aXZlIHx8IEV4cHIucmVsYXRpdmVbXCIgXCJdLFxuXHRcdGkgPSBsZWFkaW5nUmVsYXRpdmUgPyAxIDogMCxcblxuXHRcdC8vIFRoZSBmb3VuZGF0aW9uYWwgbWF0Y2hlciBlbnN1cmVzIHRoYXQgZWxlbWVudHMgYXJlIHJlYWNoYWJsZSBmcm9tIHRvcC1sZXZlbCBjb250ZXh0KHMpXG5cdFx0bWF0Y2hDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gY2hlY2tDb250ZXh0O1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaEFueUNvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBpbmRleE9mKCBjaGVja0NvbnRleHQsIGVsZW0gKSA+IC0xO1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaGVycyA9IFsgZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciByZXQgPSAoICFsZWFkaW5nUmVsYXRpdmUgJiYgKCB4bWwgfHwgY29udGV4dCAhPT0gb3V0ZXJtb3N0Q29udGV4dCApICkgfHwgKFxuXHRcdFx0XHQoY2hlY2tDb250ZXh0ID0gY29udGV4dCkubm9kZVR5cGUgP1xuXHRcdFx0XHRcdG1hdGNoQ29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRcdG1hdGNoQW55Q29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgKTtcblx0XHRcdC8vIEF2b2lkIGhhbmdpbmcgb250byBlbGVtZW50IChpc3N1ZSAjMjk5KVxuXHRcdFx0Y2hlY2tDb250ZXh0ID0gbnVsbDtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSBdO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKG1hdGNoZXIgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbaV0udHlwZSBdKSApIHtcblx0XHRcdG1hdGNoZXJzID0gWyBhZGRDb21iaW5hdG9yKGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLCBtYXRjaGVyKSBdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRtYXRjaGVyID0gRXhwci5maWx0ZXJbIHRva2Vuc1tpXS50eXBlIF0uYXBwbHkoIG51bGwsIHRva2Vuc1tpXS5tYXRjaGVzICk7XG5cblx0XHRcdC8vIFJldHVybiBzcGVjaWFsIHVwb24gc2VlaW5nIGEgcG9zaXRpb25hbCBtYXRjaGVyXG5cdFx0XHRpZiAoIG1hdGNoZXJbIGV4cGFuZG8gXSApIHtcblx0XHRcdFx0Ly8gRmluZCB0aGUgbmV4dCByZWxhdGl2ZSBvcGVyYXRvciAoaWYgYW55KSBmb3IgcHJvcGVyIGhhbmRsaW5nXG5cdFx0XHRcdGogPSArK2k7XG5cdFx0XHRcdGZvciAoIDsgaiA8IGxlbjsgaisrICkge1xuXHRcdFx0XHRcdGlmICggRXhwci5yZWxhdGl2ZVsgdG9rZW5zW2pdLnR5cGUgXSApIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gc2V0TWF0Y2hlcihcblx0XHRcdFx0XHRpID4gMSAmJiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSxcblx0XHRcdFx0XHRpID4gMSAmJiB0b1NlbGVjdG9yKFxuXHRcdFx0XHRcdFx0Ly8gSWYgdGhlIHByZWNlZGluZyB0b2tlbiB3YXMgYSBkZXNjZW5kYW50IGNvbWJpbmF0b3IsIGluc2VydCBhbiBpbXBsaWNpdCBhbnktZWxlbWVudCBgKmBcblx0XHRcdFx0XHRcdHRva2Vucy5zbGljZSggMCwgaSAtIDEgKS5jb25jYXQoeyB2YWx1ZTogdG9rZW5zWyBpIC0gMiBdLnR5cGUgPT09IFwiIFwiID8gXCIqXCIgOiBcIlwiIH0pXG5cdFx0XHRcdFx0KS5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksXG5cdFx0XHRcdFx0bWF0Y2hlcixcblx0XHRcdFx0XHRpIDwgaiAmJiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zLnNsaWNlKCBpLCBqICkgKSxcblx0XHRcdFx0XHRqIDwgbGVuICYmIG1hdGNoZXJGcm9tVG9rZW5zKCAodG9rZW5zID0gdG9rZW5zLnNsaWNlKCBqICkpICksXG5cdFx0XHRcdFx0aiA8IGxlbiAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdFx0bWF0Y2hlcnMucHVzaCggbWF0Y2hlciApO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkge1xuXHR2YXIgYnlTZXQgPSBzZXRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdGJ5RWxlbWVudCA9IGVsZW1lbnRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdHN1cGVyTWF0Y2hlciA9IGZ1bmN0aW9uKCBzZWVkLCBjb250ZXh0LCB4bWwsIHJlc3VsdHMsIG91dGVybW9zdCApIHtcblx0XHRcdHZhciBlbGVtLCBqLCBtYXRjaGVyLFxuXHRcdFx0XHRtYXRjaGVkQ291bnQgPSAwLFxuXHRcdFx0XHRpID0gXCIwXCIsXG5cdFx0XHRcdHVubWF0Y2hlZCA9IHNlZWQgJiYgW10sXG5cdFx0XHRcdHNldE1hdGNoZWQgPSBbXSxcblx0XHRcdFx0Y29udGV4dEJhY2t1cCA9IG91dGVybW9zdENvbnRleHQsXG5cdFx0XHRcdC8vIFdlIG11c3QgYWx3YXlzIGhhdmUgZWl0aGVyIHNlZWQgZWxlbWVudHMgb3Igb3V0ZXJtb3N0IGNvbnRleHRcblx0XHRcdFx0ZWxlbXMgPSBzZWVkIHx8IGJ5RWxlbWVudCAmJiBFeHByLmZpbmRbXCJUQUdcIl0oIFwiKlwiLCBvdXRlcm1vc3QgKSxcblx0XHRcdFx0Ly8gVXNlIGludGVnZXIgZGlycnVucyBpZmYgdGhpcyBpcyB0aGUgb3V0ZXJtb3N0IG1hdGNoZXJcblx0XHRcdFx0ZGlycnVuc1VuaXF1ZSA9IChkaXJydW5zICs9IGNvbnRleHRCYWNrdXAgPT0gbnVsbCA/IDEgOiBNYXRoLnJhbmRvbSgpIHx8IDAuMSksXG5cdFx0XHRcdGxlbiA9IGVsZW1zLmxlbmd0aDtcblxuXHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0ICE9PSBkb2N1bWVudCAmJiBjb250ZXh0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgZWxlbWVudHMgcGFzc2luZyBlbGVtZW50TWF0Y2hlcnMgZGlyZWN0bHkgdG8gcmVzdWx0c1xuXHRcdFx0Ly8gS2VlcCBgaWAgYSBzdHJpbmcgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzIHNvIGBtYXRjaGVkQ291bnRgIHdpbGwgYmUgXCIwMFwiIGJlbG93XG5cdFx0XHQvLyBTdXBwb3J0OiBJRTw5LCBTYWZhcmlcblx0XHRcdC8vIFRvbGVyYXRlIE5vZGVMaXN0IHByb3BlcnRpZXMgKElFOiBcImxlbmd0aFwiOyBTYWZhcmk6IDxudW1iZXI+KSBtYXRjaGluZyBlbGVtZW50cyBieSBpZFxuXHRcdFx0Zm9yICggOyBpICE9PSBsZW4gJiYgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIGJ5RWxlbWVudCAmJiBlbGVtICkge1xuXHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdHdoaWxlICggKG1hdGNoZXIgPSBlbGVtZW50TWF0Y2hlcnNbaisrXSkgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggb3V0ZXJtb3N0ICkge1xuXHRcdFx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVHJhY2sgdW5tYXRjaGVkIGVsZW1lbnRzIGZvciBzZXQgZmlsdGVyc1xuXHRcdFx0XHRpZiAoIGJ5U2V0ICkge1xuXHRcdFx0XHRcdC8vIFRoZXkgd2lsbCBoYXZlIGdvbmUgdGhyb3VnaCBhbGwgcG9zc2libGUgbWF0Y2hlcnNcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gIW1hdGNoZXIgJiYgZWxlbSkgKSB7XG5cdFx0XHRcdFx0XHRtYXRjaGVkQ291bnQtLTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBMZW5ndGhlbiB0aGUgYXJyYXkgZm9yIGV2ZXJ5IGVsZW1lbnQsIG1hdGNoZWQgb3Igbm90XG5cdFx0XHRcdFx0aWYgKCBzZWVkICkge1xuXHRcdFx0XHRcdFx0dW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gQXBwbHkgc2V0IGZpbHRlcnMgdG8gdW5tYXRjaGVkIGVsZW1lbnRzXG5cdFx0XHRtYXRjaGVkQ291bnQgKz0gaTtcblx0XHRcdGlmICggYnlTZXQgJiYgaSAhPT0gbWF0Y2hlZENvdW50ICkge1xuXHRcdFx0XHRqID0gMDtcblx0XHRcdFx0d2hpbGUgKCAobWF0Y2hlciA9IHNldE1hdGNoZXJzW2orK10pICkge1xuXHRcdFx0XHRcdG1hdGNoZXIoIHVubWF0Y2hlZCwgc2V0TWF0Y2hlZCwgY29udGV4dCwgeG1sICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRcdFx0Ly8gUmVpbnRlZ3JhdGUgZWxlbWVudCBtYXRjaGVzIHRvIGVsaW1pbmF0ZSB0aGUgbmVlZCBmb3Igc29ydGluZ1xuXHRcdFx0XHRcdGlmICggbWF0Y2hlZENvdW50ID4gMCApIHtcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoICEodW5tYXRjaGVkW2ldIHx8IHNldE1hdGNoZWRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHRcdHNldE1hdGNoZWRbaV0gPSBwb3AuY2FsbCggcmVzdWx0cyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRGlzY2FyZCBpbmRleCBwbGFjZWhvbGRlciB2YWx1ZXMgdG8gZ2V0IG9ubHkgYWN0dWFsIG1hdGNoZXNcblx0XHRcdFx0XHRzZXRNYXRjaGVkID0gY29uZGVuc2UoIHNldE1hdGNoZWQgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFkZCBtYXRjaGVzIHRvIHJlc3VsdHNcblx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgc2V0TWF0Y2hlZCApO1xuXG5cdFx0XHRcdC8vIFNlZWRsZXNzIHNldCBtYXRjaGVzIHN1Y2NlZWRpbmcgbXVsdGlwbGUgc3VjY2Vzc2Z1bCBtYXRjaGVycyBzdGlwdWxhdGUgc29ydGluZ1xuXHRcdFx0XHRpZiAoIG91dGVybW9zdCAmJiAhc2VlZCAmJiBzZXRNYXRjaGVkLmxlbmd0aCA+IDAgJiZcblx0XHRcdFx0XHQoIG1hdGNoZWRDb3VudCArIHNldE1hdGNoZXJzLmxlbmd0aCApID4gMSApIHtcblxuXHRcdFx0XHRcdFNpenpsZS51bmlxdWVTb3J0KCByZXN1bHRzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gT3ZlcnJpZGUgbWFuaXB1bGF0aW9uIG9mIGdsb2JhbHMgYnkgbmVzdGVkIG1hdGNoZXJzXG5cdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0QmFja3VwO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdW5tYXRjaGVkO1xuXHRcdH07XG5cblx0cmV0dXJuIGJ5U2V0ID9cblx0XHRtYXJrRnVuY3Rpb24oIHN1cGVyTWF0Y2hlciApIDpcblx0XHRzdXBlck1hdGNoZXI7XG59XG5cbmNvbXBpbGUgPSBTaXp6bGUuY29tcGlsZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgbWF0Y2ggLyogSW50ZXJuYWwgVXNlIE9ubHkgKi8gKSB7XG5cdHZhciBpLFxuXHRcdHNldE1hdGNoZXJzID0gW10sXG5cdFx0ZWxlbWVudE1hdGNoZXJzID0gW10sXG5cdFx0Y2FjaGVkID0gY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdO1xuXG5cdGlmICggIWNhY2hlZCApIHtcblx0XHQvLyBHZW5lcmF0ZSBhIGZ1bmN0aW9uIG9mIHJlY3Vyc2l2ZSBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgdXNlZCB0byBjaGVjayBlYWNoIGVsZW1lbnRcblx0XHRpZiAoICFtYXRjaCApIHtcblx0XHRcdG1hdGNoID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cdFx0fVxuXHRcdGkgPSBtYXRjaC5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRjYWNoZWQgPSBtYXRjaGVyRnJvbVRva2VucyggbWF0Y2hbaV0gKTtcblx0XHRcdGlmICggY2FjaGVkWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdHNldE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbWVudE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhY2hlIHRoZSBjb21waWxlZCBmdW5jdGlvblxuXHRcdGNhY2hlZCA9IGNvbXBpbGVyQ2FjaGUoIHNlbGVjdG9yLCBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSApO1xuXG5cdFx0Ly8gU2F2ZSBzZWxlY3RvciBhbmQgdG9rZW5pemF0aW9uXG5cdFx0Y2FjaGVkLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdH1cblx0cmV0dXJuIGNhY2hlZDtcbn07XG5cbi8qKlxuICogQSBsb3ctbGV2ZWwgc2VsZWN0aW9uIGZ1bmN0aW9uIHRoYXQgd29ya3Mgd2l0aCBTaXp6bGUncyBjb21waWxlZFxuICogIHNlbGVjdG9yIGZ1bmN0aW9uc1xuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHNlbGVjdG9yIEEgc2VsZWN0b3Igb3IgYSBwcmUtY29tcGlsZWRcbiAqICBzZWxlY3RvciBmdW5jdGlvbiBidWlsdCB3aXRoIFNpenpsZS5jb21waWxlXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRleHRcbiAqIEBwYXJhbSB7QXJyYXl9IFtyZXN1bHRzXVxuICogQHBhcmFtIHtBcnJheX0gW3NlZWRdIEEgc2V0IG9mIGVsZW1lbnRzIHRvIG1hdGNoIGFnYWluc3RcbiAqL1xuc2VsZWN0ID0gU2l6emxlLnNlbGVjdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIGksIHRva2VucywgdG9rZW4sIHR5cGUsIGZpbmQsXG5cdFx0Y29tcGlsZWQgPSB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiAmJiBzZWxlY3Rvcixcblx0XHRtYXRjaCA9ICFzZWVkICYmIHRva2VuaXplKCAoc2VsZWN0b3IgPSBjb21waWxlZC5zZWxlY3RvciB8fCBzZWxlY3RvcikgKTtcblxuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblxuXHQvLyBUcnkgdG8gbWluaW1pemUgb3BlcmF0aW9ucyBpZiB0aGVyZSBpcyBubyBzZWVkIGFuZCBvbmx5IG9uZSBncm91cFxuXHRpZiAoIG1hdGNoLmxlbmd0aCA9PT0gMSApIHtcblxuXHRcdC8vIFRha2UgYSBzaG9ydGN1dCBhbmQgc2V0IHRoZSBjb250ZXh0IGlmIHRoZSByb290IHNlbGVjdG9yIGlzIGFuIElEXG5cdFx0dG9rZW5zID0gbWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCApO1xuXHRcdGlmICggdG9rZW5zLmxlbmd0aCA+IDIgJiYgKHRva2VuID0gdG9rZW5zWzBdKS50eXBlID09PSBcIklEXCIgJiZcblx0XHRcdFx0c3VwcG9ydC5nZXRCeUlkICYmIGNvbnRleHQubm9kZVR5cGUgPT09IDkgJiYgZG9jdW1lbnRJc0hUTUwgJiZcblx0XHRcdFx0RXhwci5yZWxhdGl2ZVsgdG9rZW5zWzFdLnR5cGUgXSApIHtcblxuXHRcdFx0Y29udGV4dCA9ICggRXhwci5maW5kW1wiSURcIl0oIHRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZShydW5lc2NhcGUsIGZ1bmVzY2FwZSksIGNvbnRleHQgKSB8fCBbXSApWzBdO1xuXHRcdFx0aWYgKCAhY29udGV4dCApIHtcblx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cblx0XHRcdC8vIFByZWNvbXBpbGVkIG1hdGNoZXJzIHdpbGwgc3RpbGwgdmVyaWZ5IGFuY2VzdHJ5LCBzbyBzdGVwIHVwIGEgbGV2ZWxcblx0XHRcdH0gZWxzZSBpZiAoIGNvbXBpbGVkICkge1xuXHRcdFx0XHRjb250ZXh0ID0gY29udGV4dC5wYXJlbnROb2RlO1xuXHRcdFx0fVxuXG5cdFx0XHRzZWxlY3RvciA9IHNlbGVjdG9yLnNsaWNlKCB0b2tlbnMuc2hpZnQoKS52YWx1ZS5sZW5ndGggKTtcblx0XHR9XG5cblx0XHQvLyBGZXRjaCBhIHNlZWQgc2V0IGZvciByaWdodC10by1sZWZ0IG1hdGNoaW5nXG5cdFx0aSA9IG1hdGNoRXhwcltcIm5lZWRzQ29udGV4dFwiXS50ZXN0KCBzZWxlY3RvciApID8gMCA6IHRva2Vucy5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR0b2tlbiA9IHRva2Vuc1tpXTtcblxuXHRcdFx0Ly8gQWJvcnQgaWYgd2UgaGl0IGEgY29tYmluYXRvclxuXHRcdFx0aWYgKCBFeHByLnJlbGF0aXZlWyAodHlwZSA9IHRva2VuLnR5cGUpIF0gKSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAoZmluZCA9IEV4cHIuZmluZFsgdHlwZSBdKSApIHtcblx0XHRcdFx0Ly8gU2VhcmNoLCBleHBhbmRpbmcgY29udGV4dCBmb3IgbGVhZGluZyBzaWJsaW5nIGNvbWJpbmF0b3JzXG5cdFx0XHRcdGlmICggKHNlZWQgPSBmaW5kKFxuXHRcdFx0XHRcdHRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKSxcblx0XHRcdFx0XHRyc2libGluZy50ZXN0KCB0b2tlbnNbMF0udHlwZSApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0XG5cdFx0XHRcdCkpICkge1xuXG5cdFx0XHRcdFx0Ly8gSWYgc2VlZCBpcyBlbXB0eSBvciBubyB0b2tlbnMgcmVtYWluLCB3ZSBjYW4gcmV0dXJuIGVhcmx5XG5cdFx0XHRcdFx0dG9rZW5zLnNwbGljZSggaSwgMSApO1xuXHRcdFx0XHRcdHNlbGVjdG9yID0gc2VlZC5sZW5ndGggJiYgdG9TZWxlY3RvciggdG9rZW5zICk7XG5cdFx0XHRcdFx0aWYgKCAhc2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBzZWVkICk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIENvbXBpbGUgYW5kIGV4ZWN1dGUgYSBmaWx0ZXJpbmcgZnVuY3Rpb24gaWYgb25lIGlzIG5vdCBwcm92aWRlZFxuXHQvLyBQcm92aWRlIGBtYXRjaGAgdG8gYXZvaWQgcmV0b2tlbml6YXRpb24gaWYgd2UgbW9kaWZpZWQgdGhlIHNlbGVjdG9yIGFib3ZlXG5cdCggY29tcGlsZWQgfHwgY29tcGlsZSggc2VsZWN0b3IsIG1hdGNoICkgKShcblx0XHRzZWVkLFxuXHRcdGNvbnRleHQsXG5cdFx0IWRvY3VtZW50SXNIVE1MLFxuXHRcdHJlc3VsdHMsXG5cdFx0cnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dFxuXHQpO1xuXHRyZXR1cm4gcmVzdWx0cztcbn07XG5cbi8vIE9uZS10aW1lIGFzc2lnbm1lbnRzXG5cbi8vIFNvcnQgc3RhYmlsaXR5XG5zdXBwb3J0LnNvcnRTdGFibGUgPSBleHBhbmRvLnNwbGl0KFwiXCIpLnNvcnQoIHNvcnRPcmRlciApLmpvaW4oXCJcIikgPT09IGV4cGFuZG87XG5cbi8vIFN1cHBvcnQ6IENocm9tZSAxNC0zNStcbi8vIEFsd2F5cyBhc3N1bWUgZHVwbGljYXRlcyBpZiB0aGV5IGFyZW4ndCBwYXNzZWQgdG8gdGhlIGNvbXBhcmlzb24gZnVuY3Rpb25cbnN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcyA9ICEhaGFzRHVwbGljYXRlO1xuXG4vLyBJbml0aWFsaXplIGFnYWluc3QgdGhlIGRlZmF1bHQgZG9jdW1lbnRcbnNldERvY3VtZW50KCk7XG5cbi8vIFN1cHBvcnQ6IFdlYmtpdDw1MzcuMzIgLSBTYWZhcmkgNi4wLjMvQ2hyb21lIDI1IChmaXhlZCBpbiBDaHJvbWUgMjcpXG4vLyBEZXRhY2hlZCBub2RlcyBjb25mb3VuZGluZ2x5IGZvbGxvdyAqZWFjaCBvdGhlcipcbnN1cHBvcnQuc29ydERldGFjaGVkID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYxICkge1xuXHQvLyBTaG91bGQgcmV0dXJuIDEsIGJ1dCByZXR1cm5zIDQgKGZvbGxvd2luZylcblx0cmV0dXJuIGRpdjEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikgKSAmIDE7XG59KTtcblxuLy8gU3VwcG9ydDogSUU8OFxuLy8gUHJldmVudCBhdHRyaWJ1dGUvcHJvcGVydHkgXCJpbnRlcnBvbGF0aW9uXCJcbi8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzNjQyOSUyOFZTLjg1JTI5LmFzcHhcbmlmICggIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRkaXYuaW5uZXJIVE1MID0gXCI8YSBocmVmPScjJz48L2E+XCI7XG5cdHJldHVybiBkaXYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpID09PSBcIiNcIiA7XG59KSApIHtcblx0YWRkSGFuZGxlKCBcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwidHlwZVwiID8gMSA6IDIgKTtcblx0XHR9XG5cdH0pO1xufVxuXG4vLyBTdXBwb3J0OiBJRTw5XG4vLyBVc2UgZGVmYXVsdFZhbHVlIGluIHBsYWNlIG9mIGdldEF0dHJpYnV0ZShcInZhbHVlXCIpXG5pZiAoICFzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRkaXYuaW5uZXJIVE1MID0gXCI8aW5wdXQvPlwiO1xuXHRkaXYuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiwgXCJcIiApO1xuXHRyZXR1cm4gZGl2LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSA9PT0gXCJcIjtcbn0pICkge1xuXHRhZGRIYW5kbGUoIFwidmFsdWVcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGVmYXVsdFZhbHVlO1xuXHRcdH1cblx0fSk7XG59XG5cbi8vIFN1cHBvcnQ6IElFPDlcbi8vIFVzZSBnZXRBdHRyaWJ1dGVOb2RlIHRvIGZldGNoIGJvb2xlYW5zIHdoZW4gZ2V0QXR0cmlidXRlIGxpZXNcbmlmICggIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRyZXR1cm4gZGl2LmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpID09IG51bGw7XG59KSApIHtcblx0YWRkSGFuZGxlKCBib29sZWFucywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdHZhciB2YWw7XG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbVsgbmFtZSBdID09PSB0cnVlID8gbmFtZS50b0xvd2VyQ2FzZSgpIDpcblx0XHRcdFx0XHQodmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHRcdHZhbC52YWx1ZSA6XG5cdFx0XHRcdG51bGw7XG5cdFx0fVxuXHR9KTtcbn1cblxucmV0dXJuIFNpenpsZTtcblxufSkoIHdpbmRvdyApO1xuXG5cblxualF1ZXJ5LmZpbmQgPSBTaXp6bGU7XG5qUXVlcnkuZXhwciA9IFNpenpsZS5zZWxlY3RvcnM7XG5qUXVlcnkuZXhwcltcIjpcIl0gPSBqUXVlcnkuZXhwci5wc2V1ZG9zO1xualF1ZXJ5LnVuaXF1ZSA9IFNpenpsZS51bmlxdWVTb3J0O1xualF1ZXJ5LnRleHQgPSBTaXp6bGUuZ2V0VGV4dDtcbmpRdWVyeS5pc1hNTERvYyA9IFNpenpsZS5pc1hNTDtcbmpRdWVyeS5jb250YWlucyA9IFNpenpsZS5jb250YWlucztcblxuXG5cbnZhciBybmVlZHNDb250ZXh0ID0galF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O1xuXG52YXIgcnNpbmdsZVRhZyA9ICgvXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8pO1xuXG5cblxudmFyIHJpc1NpbXBsZSA9IC9eLlteOiNcXFtcXC4sXSokLztcblxuLy8gSW1wbGVtZW50IHRoZSBpZGVudGljYWwgZnVuY3Rpb25hbGl0eSBmb3IgZmlsdGVyIGFuZCBub3RcbmZ1bmN0aW9uIHdpbm5vdyggZWxlbWVudHMsIHF1YWxpZmllciwgbm90ICkge1xuXHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBxdWFsaWZpZXIgKSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSwgaSApIHtcblx0XHRcdC8qIGpzaGludCAtVzAxOCAqL1xuXHRcdFx0cmV0dXJuICEhcXVhbGlmaWVyLmNhbGwoIGVsZW0sIGksIGVsZW0gKSAhPT0gbm90O1xuXHRcdH0pO1xuXG5cdH1cblxuXHRpZiAoIHF1YWxpZmllci5ub2RlVHlwZSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAoIGVsZW0gPT09IHF1YWxpZmllciApICE9PSBub3Q7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGlmICggdHlwZW9mIHF1YWxpZmllciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRpZiAoIHJpc1NpbXBsZS50ZXN0KCBxdWFsaWZpZXIgKSApIHtcblx0XHRcdHJldHVybiBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzLCBub3QgKTtcblx0XHR9XG5cblx0XHRxdWFsaWZpZXIgPSBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzICk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gKCBpbmRleE9mLmNhbGwoIHF1YWxpZmllciwgZWxlbSApID49IDAgKSAhPT0gbm90O1xuXHR9KTtcbn1cblxualF1ZXJ5LmZpbHRlciA9IGZ1bmN0aW9uKCBleHByLCBlbGVtcywgbm90ICkge1xuXHR2YXIgZWxlbSA9IGVsZW1zWyAwIF07XG5cblx0aWYgKCBub3QgKSB7XG5cdFx0ZXhwciA9IFwiOm5vdChcIiArIGV4cHIgKyBcIilcIjtcblx0fVxuXG5cdHJldHVybiBlbGVtcy5sZW5ndGggPT09IDEgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSA/XG5cdFx0alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBlbGVtLCBleHByICkgPyBbIGVsZW0gXSA6IFtdIDpcblx0XHRqUXVlcnkuZmluZC5tYXRjaGVzKCBleHByLCBqUXVlcnkuZ3JlcCggZWxlbXMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0ubm9kZVR5cGUgPT09IDE7XG5cdFx0fSkpO1xufTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGZpbmQ6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgaSxcblx0XHRcdGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0cmV0ID0gW10sXG5cdFx0XHRzZWxmID0gdGhpcztcblxuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkoIHNlbGVjdG9yICkuZmlsdGVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdGlmICggalF1ZXJ5LmNvbnRhaW5zKCBzZWxmWyBpIF0sIHRoaXMgKSApIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSkgKTtcblx0XHR9XG5cblx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0alF1ZXJ5LmZpbmQoIHNlbGVjdG9yLCBzZWxmWyBpIF0sIHJldCApO1xuXHRcdH1cblxuXHRcdC8vIE5lZWRlZCBiZWNhdXNlICQoIHNlbGVjdG9yLCBjb250ZXh0ICkgYmVjb21lcyAkKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKVxuXHRcdHJldCA9IHRoaXMucHVzaFN0YWNrKCBsZW4gPiAxID8galF1ZXJ5LnVuaXF1ZSggcmV0ICkgOiByZXQgKTtcblx0XHRyZXQuc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yID8gdGhpcy5zZWxlY3RvciArIFwiIFwiICsgc2VsZWN0b3IgOiBzZWxlY3Rvcjtcblx0XHRyZXR1cm4gcmV0O1xuXHR9LFxuXHRmaWx0ZXI6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHdpbm5vdyh0aGlzLCBzZWxlY3RvciB8fCBbXSwgZmFsc2UpICk7XG5cdH0sXG5cdG5vdDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KHRoaXMsIHNlbGVjdG9yIHx8IFtdLCB0cnVlKSApO1xuXHR9LFxuXHRpczogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiAhIXdpbm5vdyhcblx0XHRcdHRoaXMsXG5cblx0XHRcdC8vIElmIHRoaXMgaXMgYSBwb3NpdGlvbmFsL3JlbGF0aXZlIHNlbGVjdG9yLCBjaGVjayBtZW1iZXJzaGlwIGluIHRoZSByZXR1cm5lZCBzZXRcblx0XHRcdC8vIHNvICQoXCJwOmZpcnN0XCIpLmlzKFwicDpsYXN0XCIpIHdvbid0IHJldHVybiB0cnVlIGZvciBhIGRvYyB3aXRoIHR3byBcInBcIi5cblx0XHRcdHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiAmJiBybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICkgP1xuXHRcdFx0XHRqUXVlcnkoIHNlbGVjdG9yICkgOlxuXHRcdFx0XHRzZWxlY3RvciB8fCBbXSxcblx0XHRcdGZhbHNlXG5cdFx0KS5sZW5ndGg7XG5cdH1cbn0pO1xuXG5cbi8vIEluaXRpYWxpemUgYSBqUXVlcnkgb2JqZWN0XG5cblxuLy8gQSBjZW50cmFsIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBqUXVlcnkoZG9jdW1lbnQpXG52YXIgcm9vdGpRdWVyeSxcblxuXHQvLyBBIHNpbXBsZSB3YXkgdG8gY2hlY2sgZm9yIEhUTUwgc3RyaW5nc1xuXHQvLyBQcmlvcml0aXplICNpZCBvdmVyIDx0YWc+IHRvIGF2b2lkIFhTUyB2aWEgbG9jYXRpb24uaGFzaCAoIzk1MjEpXG5cdC8vIFN0cmljdCBIVE1MIHJlY29nbml0aW9uICgjMTEyOTA6IG11c3Qgc3RhcnQgd2l0aCA8KVxuXHRycXVpY2tFeHByID0gL14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKikpJC8sXG5cblx0aW5pdCA9IGpRdWVyeS5mbi5pbml0ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXHRcdHZhciBtYXRjaCwgZWxlbTtcblxuXHRcdC8vIEhBTkRMRTogJChcIlwiKSwgJChudWxsKSwgJCh1bmRlZmluZWQpLCAkKGZhbHNlKVxuXHRcdGlmICggIXNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIEhUTUwgc3RyaW5nc1xuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0aWYgKCBzZWxlY3RvclswXSA9PT0gXCI8XCIgJiYgc2VsZWN0b3JbIHNlbGVjdG9yLmxlbmd0aCAtIDEgXSA9PT0gXCI+XCIgJiYgc2VsZWN0b3IubGVuZ3RoID49IDMgKSB7XG5cdFx0XHRcdC8vIEFzc3VtZSB0aGF0IHN0cmluZ3MgdGhhdCBzdGFydCBhbmQgZW5kIHdpdGggPD4gYXJlIEhUTUwgYW5kIHNraXAgdGhlIHJlZ2V4IGNoZWNrXG5cdFx0XHRcdG1hdGNoID0gWyBudWxsLCBzZWxlY3RvciwgbnVsbCBdO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWF0Y2ggaHRtbCBvciBtYWtlIHN1cmUgbm8gY29udGV4dCBpcyBzcGVjaWZpZWQgZm9yICNpZFxuXHRcdFx0aWYgKCBtYXRjaCAmJiAobWF0Y2hbMV0gfHwgIWNvbnRleHQpICkge1xuXG5cdFx0XHRcdC8vIEhBTkRMRTogJChodG1sKSAtPiAkKGFycmF5KVxuXHRcdFx0XHRpZiAoIG1hdGNoWzFdICkge1xuXHRcdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0IGluc3RhbmNlb2YgalF1ZXJ5ID8gY29udGV4dFswXSA6IGNvbnRleHQ7XG5cblx0XHRcdFx0XHQvLyBPcHRpb24gdG8gcnVuIHNjcmlwdHMgaXMgdHJ1ZSBmb3IgYmFjay1jb21wYXRcblx0XHRcdFx0XHQvLyBJbnRlbnRpb25hbGx5IGxldCB0aGUgZXJyb3IgYmUgdGhyb3duIGlmIHBhcnNlSFRNTCBpcyBub3QgcHJlc2VudFxuXHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggdGhpcywgalF1ZXJ5LnBhcnNlSFRNTChcblx0XHRcdFx0XHRcdG1hdGNoWzFdLFxuXHRcdFx0XHRcdFx0Y29udGV4dCAmJiBjb250ZXh0Lm5vZGVUeXBlID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBkb2N1bWVudCxcblx0XHRcdFx0XHRcdHRydWVcblx0XHRcdFx0XHQpICk7XG5cblx0XHRcdFx0XHQvLyBIQU5ETEU6ICQoaHRtbCwgcHJvcHMpXG5cdFx0XHRcdFx0aWYgKCByc2luZ2xlVGFnLnRlc3QoIG1hdGNoWzFdICkgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGNvbnRleHQgKSApIHtcblx0XHRcdFx0XHRcdGZvciAoIG1hdGNoIGluIGNvbnRleHQgKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFByb3BlcnRpZXMgb2YgY29udGV4dCBhcmUgY2FsbGVkIGFzIG1ldGhvZHMgaWYgcG9zc2libGVcblx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdGhpc1sgbWF0Y2ggXSApICkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXNbIG1hdGNoIF0oIGNvbnRleHRbIG1hdGNoIF0gKTtcblxuXHRcdFx0XHRcdFx0XHQvLyAuLi5hbmQgb3RoZXJ3aXNlIHNldCBhcyBhdHRyaWJ1dGVzXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5hdHRyKCBtYXRjaCwgY29udGV4dFsgbWF0Y2ggXSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cblx0XHRcdFx0Ly8gSEFORExFOiAkKCNpZClcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG1hdGNoWzJdICk7XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBCbGFja2JlcnJ5IDQuNlxuXHRcdFx0XHRcdC8vIGdFQklEIHJldHVybnMgbm9kZXMgbm8gbG9uZ2VyIGluIHRoZSBkb2N1bWVudCAoIzY5NjMpXG5cdFx0XHRcdFx0aWYgKCBlbGVtICYmIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0XHRcdC8vIEluamVjdCB0aGUgZWxlbWVudCBkaXJlY3RseSBpbnRvIHRoZSBqUXVlcnkgb2JqZWN0XG5cdFx0XHRcdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRcdFx0XHR0aGlzWzBdID0gZWxlbTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR0aGlzLmNvbnRleHQgPSBkb2N1bWVudDtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblxuXHRcdFx0Ly8gSEFORExFOiAkKGV4cHIsICQoLi4uKSlcblx0XHRcdH0gZWxzZSBpZiAoICFjb250ZXh0IHx8IGNvbnRleHQuanF1ZXJ5ICkge1xuXHRcdFx0XHRyZXR1cm4gKCBjb250ZXh0IHx8IHJvb3RqUXVlcnkgKS5maW5kKCBzZWxlY3RvciApO1xuXG5cdFx0XHQvLyBIQU5ETEU6ICQoZXhwciwgY29udGV4dClcblx0XHRcdC8vICh3aGljaCBpcyBqdXN0IGVxdWl2YWxlbnQgdG86ICQoY29udGV4dCkuZmluZChleHByKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuY29uc3RydWN0b3IoIGNvbnRleHQgKS5maW5kKCBzZWxlY3RvciApO1xuXHRcdFx0fVxuXG5cdFx0Ly8gSEFORExFOiAkKERPTUVsZW1lbnQpXG5cdFx0fSBlbHNlIGlmICggc2VsZWN0b3Iubm9kZVR5cGUgKSB7XG5cdFx0XHR0aGlzLmNvbnRleHQgPSB0aGlzWzBdID0gc2VsZWN0b3I7XG5cdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdC8vIEhBTkRMRTogJChmdW5jdGlvbilcblx0XHQvLyBTaG9ydGN1dCBmb3IgZG9jdW1lbnQgcmVhZHlcblx0XHR9IGVsc2UgaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggc2VsZWN0b3IgKSApIHtcblx0XHRcdHJldHVybiB0eXBlb2Ygcm9vdGpRdWVyeS5yZWFkeSAhPT0gXCJ1bmRlZmluZWRcIiA/XG5cdFx0XHRcdHJvb3RqUXVlcnkucmVhZHkoIHNlbGVjdG9yICkgOlxuXHRcdFx0XHQvLyBFeGVjdXRlIGltbWVkaWF0ZWx5IGlmIHJlYWR5IGlzIG5vdCBwcmVzZW50XG5cdFx0XHRcdHNlbGVjdG9yKCBqUXVlcnkgKTtcblx0XHR9XG5cblx0XHRpZiAoIHNlbGVjdG9yLnNlbGVjdG9yICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3Iuc2VsZWN0b3I7XG5cdFx0XHR0aGlzLmNvbnRleHQgPSBzZWxlY3Rvci5jb250ZXh0O1xuXHRcdH1cblxuXHRcdHJldHVybiBqUXVlcnkubWFrZUFycmF5KCBzZWxlY3RvciwgdGhpcyApO1xuXHR9O1xuXG4vLyBHaXZlIHRoZSBpbml0IGZ1bmN0aW9uIHRoZSBqUXVlcnkgcHJvdG90eXBlIGZvciBsYXRlciBpbnN0YW50aWF0aW9uXG5pbml0LnByb3RvdHlwZSA9IGpRdWVyeS5mbjtcblxuLy8gSW5pdGlhbGl6ZSBjZW50cmFsIHJlZmVyZW5jZVxucm9vdGpRdWVyeSA9IGpRdWVyeSggZG9jdW1lbnQgKTtcblxuXG52YXIgcnBhcmVudHNwcmV2ID0gL14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sXG5cdC8vIE1ldGhvZHMgZ3VhcmFudGVlZCB0byBwcm9kdWNlIGEgdW5pcXVlIHNldCB3aGVuIHN0YXJ0aW5nIGZyb20gYSB1bmlxdWUgc2V0XG5cdGd1YXJhbnRlZWRVbmlxdWUgPSB7XG5cdFx0Y2hpbGRyZW46IHRydWUsXG5cdFx0Y29udGVudHM6IHRydWUsXG5cdFx0bmV4dDogdHJ1ZSxcblx0XHRwcmV2OiB0cnVlXG5cdH07XG5cbmpRdWVyeS5leHRlbmQoe1xuXHRkaXI6IGZ1bmN0aW9uKCBlbGVtLCBkaXIsIHVudGlsICkge1xuXHRcdHZhciBtYXRjaGVkID0gW10sXG5cdFx0XHR0cnVuY2F0ZSA9IHVudGlsICE9PSB1bmRlZmluZWQ7XG5cblx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICYmIGVsZW0ubm9kZVR5cGUgIT09IDkgKSB7XG5cdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdGlmICggdHJ1bmNhdGUgJiYgalF1ZXJ5KCBlbGVtICkuaXMoIHVudGlsICkgKSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0bWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBtYXRjaGVkO1xuXHR9LFxuXG5cdHNpYmxpbmc6IGZ1bmN0aW9uKCBuLCBlbGVtICkge1xuXHRcdHZhciBtYXRjaGVkID0gW107XG5cblx0XHRmb3IgKCA7IG47IG4gPSBuLm5leHRTaWJsaW5nICkge1xuXHRcdFx0aWYgKCBuLm5vZGVUeXBlID09PSAxICYmIG4gIT09IGVsZW0gKSB7XG5cdFx0XHRcdG1hdGNoZWQucHVzaCggbiApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBtYXRjaGVkO1xuXHR9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGhhczogZnVuY3Rpb24oIHRhcmdldCApIHtcblx0XHR2YXIgdGFyZ2V0cyA9IGpRdWVyeSggdGFyZ2V0LCB0aGlzICksXG5cdFx0XHRsID0gdGFyZ2V0cy5sZW5ndGg7XG5cblx0XHRyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdGlmICggalF1ZXJ5LmNvbnRhaW5zKCB0aGlzLCB0YXJnZXRzW2ldICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRjbG9zZXN0OiBmdW5jdGlvbiggc2VsZWN0b3JzLCBjb250ZXh0ICkge1xuXHRcdHZhciBjdXIsXG5cdFx0XHRpID0gMCxcblx0XHRcdGwgPSB0aGlzLmxlbmd0aCxcblx0XHRcdG1hdGNoZWQgPSBbXSxcblx0XHRcdHBvcyA9IHJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3JzICkgfHwgdHlwZW9mIHNlbGVjdG9ycyAhPT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdGpRdWVyeSggc2VsZWN0b3JzLCBjb250ZXh0IHx8IHRoaXMuY29udGV4dCApIDpcblx0XHRcdFx0MDtcblxuXHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdGZvciAoIGN1ciA9IHRoaXNbaV07IGN1ciAmJiBjdXIgIT09IGNvbnRleHQ7IGN1ciA9IGN1ci5wYXJlbnROb2RlICkge1xuXHRcdFx0XHQvLyBBbHdheXMgc2tpcCBkb2N1bWVudCBmcmFnbWVudHNcblx0XHRcdFx0aWYgKCBjdXIubm9kZVR5cGUgPCAxMSAmJiAocG9zID9cblx0XHRcdFx0XHRwb3MuaW5kZXgoY3VyKSA+IC0xIDpcblxuXHRcdFx0XHRcdC8vIERvbid0IHBhc3Mgbm9uLWVsZW1lbnRzIHRvIFNpenpsZVxuXHRcdFx0XHRcdGN1ci5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0XHRcdFx0alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKGN1ciwgc2VsZWN0b3JzKSkgKSB7XG5cblx0XHRcdFx0XHRtYXRjaGVkLnB1c2goIGN1ciApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBtYXRjaGVkLmxlbmd0aCA+IDEgPyBqUXVlcnkudW5pcXVlKCBtYXRjaGVkICkgOiBtYXRjaGVkICk7XG5cdH0sXG5cblx0Ly8gRGV0ZXJtaW5lIHRoZSBwb3NpdGlvbiBvZiBhbiBlbGVtZW50IHdpdGhpbiB0aGUgc2V0XG5cdGluZGV4OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdC8vIE5vIGFyZ3VtZW50LCByZXR1cm4gaW5kZXggaW4gcGFyZW50XG5cdFx0aWYgKCAhZWxlbSApIHtcblx0XHRcdHJldHVybiAoIHRoaXNbIDAgXSAmJiB0aGlzWyAwIF0ucGFyZW50Tm9kZSApID8gdGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGggOiAtMTtcblx0XHR9XG5cblx0XHQvLyBJbmRleCBpbiBzZWxlY3RvclxuXHRcdGlmICggdHlwZW9mIGVsZW0gPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gaW5kZXhPZi5jYWxsKCBqUXVlcnkoIGVsZW0gKSwgdGhpc1sgMCBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gTG9jYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgZGVzaXJlZCBlbGVtZW50XG5cdFx0cmV0dXJuIGluZGV4T2YuY2FsbCggdGhpcyxcblxuXHRcdFx0Ly8gSWYgaXQgcmVjZWl2ZXMgYSBqUXVlcnkgb2JqZWN0LCB0aGUgZmlyc3QgZWxlbWVudCBpcyB1c2VkXG5cdFx0XHRlbGVtLmpxdWVyeSA/IGVsZW1bIDAgXSA6IGVsZW1cblx0XHQpO1xuXHR9LFxuXG5cdGFkZDogZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayhcblx0XHRcdGpRdWVyeS51bmlxdWUoXG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggdGhpcy5nZXQoKSwgalF1ZXJ5KCBzZWxlY3RvciwgY29udGV4dCApIClcblx0XHRcdClcblx0XHQpO1xuXHR9LFxuXG5cdGFkZEJhY2s6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgP1xuXHRcdFx0dGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlcihzZWxlY3Rvcilcblx0XHQpO1xuXHR9XG59KTtcblxuZnVuY3Rpb24gc2libGluZyggY3VyLCBkaXIgKSB7XG5cdHdoaWxlICggKGN1ciA9IGN1cltkaXJdKSAmJiBjdXIubm9kZVR5cGUgIT09IDEgKSB7fVxuXHRyZXR1cm4gY3VyO1xufVxuXG5qUXVlcnkuZWFjaCh7XG5cdHBhcmVudDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRyZXR1cm4gcGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSAhPT0gMTEgPyBwYXJlbnQgOiBudWxsO1xuXHR9LFxuXHRwYXJlbnRzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIgKTtcblx0fSxcblx0cGFyZW50c1VudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwicGFyZW50Tm9kZVwiLCB1bnRpbCApO1xuXHR9LFxuXHRuZXh0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gc2libGluZyggZWxlbSwgXCJuZXh0U2libGluZ1wiICk7XG5cdH0sXG5cdHByZXY6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5nKCBlbGVtLCBcInByZXZpb3VzU2libGluZ1wiICk7XG5cdH0sXG5cdG5leHRBbGw6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBqUXVlcnkuZGlyKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcblx0fSxcblx0cHJldkFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dFVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwibmV4dFNpYmxpbmdcIiwgdW50aWwgKTtcblx0fSxcblx0cHJldlVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIsIHVudGlsICk7XG5cdH0sXG5cdHNpYmxpbmdzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LnNpYmxpbmcoICggZWxlbS5wYXJlbnROb2RlIHx8IHt9ICkuZmlyc3RDaGlsZCwgZWxlbSApO1xuXHR9LFxuXHRjaGlsZHJlbjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5zaWJsaW5nKCBlbGVtLmZpcnN0Q2hpbGQgKTtcblx0fSxcblx0Y29udGVudHM6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBlbGVtLmNvbnRlbnREb2N1bWVudCB8fCBqUXVlcnkubWVyZ2UoIFtdLCBlbGVtLmNoaWxkTm9kZXMgKTtcblx0fVxufSwgZnVuY3Rpb24oIG5hbWUsIGZuICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCB1bnRpbCwgc2VsZWN0b3IgKSB7XG5cdFx0dmFyIG1hdGNoZWQgPSBqUXVlcnkubWFwKCB0aGlzLCBmbiwgdW50aWwgKTtcblxuXHRcdGlmICggbmFtZS5zbGljZSggLTUgKSAhPT0gXCJVbnRpbFwiICkge1xuXHRcdFx0c2VsZWN0b3IgPSB1bnRpbDtcblx0XHR9XG5cblx0XHRpZiAoIHNlbGVjdG9yICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdG1hdGNoZWQgPSBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgbWF0Y2hlZCApO1xuXHRcdH1cblxuXHRcdGlmICggdGhpcy5sZW5ndGggPiAxICkge1xuXHRcdFx0Ly8gUmVtb3ZlIGR1cGxpY2F0ZXNcblx0XHRcdGlmICggIWd1YXJhbnRlZWRVbmlxdWVbIG5hbWUgXSApIHtcblx0XHRcdFx0alF1ZXJ5LnVuaXF1ZSggbWF0Y2hlZCApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXZlcnNlIG9yZGVyIGZvciBwYXJlbnRzKiBhbmQgcHJldi1kZXJpdmF0aXZlc1xuXHRcdFx0aWYgKCBycGFyZW50c3ByZXYudGVzdCggbmFtZSApICkge1xuXHRcdFx0XHRtYXRjaGVkLnJldmVyc2UoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIG1hdGNoZWQgKTtcblx0fTtcbn0pO1xudmFyIHJub3R3aGl0ZSA9ICgvXFxTKy9nKTtcblxuXG5cbi8vIFN0cmluZyB0byBPYmplY3Qgb3B0aW9ucyBmb3JtYXQgY2FjaGVcbnZhciBvcHRpb25zQ2FjaGUgPSB7fTtcblxuLy8gQ29udmVydCBTdHJpbmctZm9ybWF0dGVkIG9wdGlvbnMgaW50byBPYmplY3QtZm9ybWF0dGVkIG9uZXMgYW5kIHN0b3JlIGluIGNhY2hlXG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zKCBvcHRpb25zICkge1xuXHR2YXIgb2JqZWN0ID0gb3B0aW9uc0NhY2hlWyBvcHRpb25zIF0gPSB7fTtcblx0alF1ZXJ5LmVhY2goIG9wdGlvbnMubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdLCBmdW5jdGlvbiggXywgZmxhZyApIHtcblx0XHRvYmplY3RbIGZsYWcgXSA9IHRydWU7XG5cdH0pO1xuXHRyZXR1cm4gb2JqZWN0O1xufVxuXG4vKlxuICogQ3JlYXRlIGEgY2FsbGJhY2sgbGlzdCB1c2luZyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gKlxuICpcdG9wdGlvbnM6IGFuIG9wdGlvbmFsIGxpc3Qgb2Ygc3BhY2Utc2VwYXJhdGVkIG9wdGlvbnMgdGhhdCB3aWxsIGNoYW5nZSBob3dcbiAqXHRcdFx0dGhlIGNhbGxiYWNrIGxpc3QgYmVoYXZlcyBvciBhIG1vcmUgdHJhZGl0aW9uYWwgb3B0aW9uIG9iamVjdFxuICpcbiAqIEJ5IGRlZmF1bHQgYSBjYWxsYmFjayBsaXN0IHdpbGwgYWN0IGxpa2UgYW4gZXZlbnQgY2FsbGJhY2sgbGlzdCBhbmQgY2FuIGJlXG4gKiBcImZpcmVkXCIgbXVsdGlwbGUgdGltZXMuXG4gKlxuICogUG9zc2libGUgb3B0aW9uczpcbiAqXG4gKlx0b25jZTpcdFx0XHR3aWxsIGVuc3VyZSB0aGUgY2FsbGJhY2sgbGlzdCBjYW4gb25seSBiZSBmaXJlZCBvbmNlIChsaWtlIGEgRGVmZXJyZWQpXG4gKlxuICpcdG1lbW9yeTpcdFx0XHR3aWxsIGtlZXAgdHJhY2sgb2YgcHJldmlvdXMgdmFsdWVzIGFuZCB3aWxsIGNhbGwgYW55IGNhbGxiYWNrIGFkZGVkXG4gKlx0XHRcdFx0XHRhZnRlciB0aGUgbGlzdCBoYXMgYmVlbiBmaXJlZCByaWdodCBhd2F5IHdpdGggdGhlIGxhdGVzdCBcIm1lbW9yaXplZFwiXG4gKlx0XHRcdFx0XHR2YWx1ZXMgKGxpa2UgYSBEZWZlcnJlZClcbiAqXG4gKlx0dW5pcXVlOlx0XHRcdHdpbGwgZW5zdXJlIGEgY2FsbGJhY2sgY2FuIG9ubHkgYmUgYWRkZWQgb25jZSAobm8gZHVwbGljYXRlIGluIHRoZSBsaXN0KVxuICpcbiAqXHRzdG9wT25GYWxzZTpcdGludGVycnVwdCBjYWxsaW5ncyB3aGVuIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZVxuICpcbiAqL1xualF1ZXJ5LkNhbGxiYWNrcyA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXG5cdC8vIENvbnZlcnQgb3B0aW9ucyBmcm9tIFN0cmluZy1mb3JtYXR0ZWQgdG8gT2JqZWN0LWZvcm1hdHRlZCBpZiBuZWVkZWRcblx0Ly8gKHdlIGNoZWNrIGluIGNhY2hlIGZpcnN0KVxuXHRvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgP1xuXHRcdCggb3B0aW9uc0NhY2hlWyBvcHRpb25zIF0gfHwgY3JlYXRlT3B0aW9ucyggb3B0aW9ucyApICkgOlxuXHRcdGpRdWVyeS5leHRlbmQoIHt9LCBvcHRpb25zICk7XG5cblx0dmFyIC8vIExhc3QgZmlyZSB2YWx1ZSAoZm9yIG5vbi1mb3JnZXR0YWJsZSBsaXN0cylcblx0XHRtZW1vcnksXG5cdFx0Ly8gRmxhZyB0byBrbm93IGlmIGxpc3Qgd2FzIGFscmVhZHkgZmlyZWRcblx0XHRmaXJlZCxcblx0XHQvLyBGbGFnIHRvIGtub3cgaWYgbGlzdCBpcyBjdXJyZW50bHkgZmlyaW5nXG5cdFx0ZmlyaW5nLFxuXHRcdC8vIEZpcnN0IGNhbGxiYWNrIHRvIGZpcmUgKHVzZWQgaW50ZXJuYWxseSBieSBhZGQgYW5kIGZpcmVXaXRoKVxuXHRcdGZpcmluZ1N0YXJ0LFxuXHRcdC8vIEVuZCBvZiB0aGUgbG9vcCB3aGVuIGZpcmluZ1xuXHRcdGZpcmluZ0xlbmd0aCxcblx0XHQvLyBJbmRleCBvZiBjdXJyZW50bHkgZmlyaW5nIGNhbGxiYWNrIChtb2RpZmllZCBieSByZW1vdmUgaWYgbmVlZGVkKVxuXHRcdGZpcmluZ0luZGV4LFxuXHRcdC8vIEFjdHVhbCBjYWxsYmFjayBsaXN0XG5cdFx0bGlzdCA9IFtdLFxuXHRcdC8vIFN0YWNrIG9mIGZpcmUgY2FsbHMgZm9yIHJlcGVhdGFibGUgbGlzdHNcblx0XHRzdGFjayA9ICFvcHRpb25zLm9uY2UgJiYgW10sXG5cdFx0Ly8gRmlyZSBjYWxsYmFja3Ncblx0XHRmaXJlID0gZnVuY3Rpb24oIGRhdGEgKSB7XG5cdFx0XHRtZW1vcnkgPSBvcHRpb25zLm1lbW9yeSAmJiBkYXRhO1xuXHRcdFx0ZmlyZWQgPSB0cnVlO1xuXHRcdFx0ZmlyaW5nSW5kZXggPSBmaXJpbmdTdGFydCB8fCAwO1xuXHRcdFx0ZmlyaW5nU3RhcnQgPSAwO1xuXHRcdFx0ZmlyaW5nTGVuZ3RoID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRmaXJpbmcgPSB0cnVlO1xuXHRcdFx0Zm9yICggOyBsaXN0ICYmIGZpcmluZ0luZGV4IDwgZmlyaW5nTGVuZ3RoOyBmaXJpbmdJbmRleCsrICkge1xuXHRcdFx0XHRpZiAoIGxpc3RbIGZpcmluZ0luZGV4IF0uYXBwbHkoIGRhdGFbIDAgXSwgZGF0YVsgMSBdICkgPT09IGZhbHNlICYmIG9wdGlvbnMuc3RvcE9uRmFsc2UgKSB7XG5cdFx0XHRcdFx0bWVtb3J5ID0gZmFsc2U7IC8vIFRvIHByZXZlbnQgZnVydGhlciBjYWxscyB1c2luZyBhZGRcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZmlyaW5nID0gZmFsc2U7XG5cdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFx0XHRcdGlmICggc3RhY2sgKSB7XG5cdFx0XHRcdFx0aWYgKCBzdGFjay5sZW5ndGggKSB7XG5cdFx0XHRcdFx0XHRmaXJlKCBzdGFjay5zaGlmdCgpICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKCBtZW1vcnkgKSB7XG5cdFx0XHRcdFx0bGlzdCA9IFtdO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNlbGYuZGlzYWJsZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XHQvLyBBY3R1YWwgQ2FsbGJhY2tzIG9iamVjdFxuXHRcdHNlbGYgPSB7XG5cdFx0XHQvLyBBZGQgYSBjYWxsYmFjayBvciBhIGNvbGxlY3Rpb24gb2YgY2FsbGJhY2tzIHRvIHRoZSBsaXN0XG5cdFx0XHRhZGQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFx0XHRcdFx0Ly8gRmlyc3QsIHdlIHNhdmUgdGhlIGN1cnJlbnQgbGVuZ3RoXG5cdFx0XHRcdFx0dmFyIHN0YXJ0ID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRcdFx0KGZ1bmN0aW9uIGFkZCggYXJncyApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5lYWNoKCBhcmdzLCBmdW5jdGlvbiggXywgYXJnICkge1xuXHRcdFx0XHRcdFx0XHR2YXIgdHlwZSA9IGpRdWVyeS50eXBlKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0aWYgKCB0eXBlID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCAhb3B0aW9ucy51bmlxdWUgfHwgIXNlbGYuaGFzKCBhcmcgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGxpc3QucHVzaCggYXJnICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBhcmcgJiYgYXJnLmxlbmd0aCAmJiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIEluc3BlY3QgcmVjdXJzaXZlbHlcblx0XHRcdFx0XHRcdFx0XHRhZGQoIGFyZyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KSggYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0Ly8gRG8gd2UgbmVlZCB0byBhZGQgdGhlIGNhbGxiYWNrcyB0byB0aGVcblx0XHRcdFx0XHQvLyBjdXJyZW50IGZpcmluZyBiYXRjaD9cblx0XHRcdFx0XHRpZiAoIGZpcmluZyApIHtcblx0XHRcdFx0XHRcdGZpcmluZ0xlbmd0aCA9IGxpc3QubGVuZ3RoO1xuXHRcdFx0XHRcdC8vIFdpdGggbWVtb3J5LCBpZiB3ZSdyZSBub3QgZmlyaW5nIHRoZW5cblx0XHRcdFx0XHQvLyB3ZSBzaG91bGQgY2FsbCByaWdodCBhd2F5XG5cdFx0XHRcdFx0fSBlbHNlIGlmICggbWVtb3J5ICkge1xuXHRcdFx0XHRcdFx0ZmlyaW5nU3RhcnQgPSBzdGFydDtcblx0XHRcdFx0XHRcdGZpcmUoIG1lbW9yeSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHQvLyBSZW1vdmUgYSBjYWxsYmFjayBmcm9tIHRoZSBsaXN0XG5cdFx0XHRyZW1vdmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmVhY2goIGFyZ3VtZW50cywgZnVuY3Rpb24oIF8sIGFyZyApIHtcblx0XHRcdFx0XHRcdHZhciBpbmRleDtcblx0XHRcdFx0XHRcdHdoaWxlICggKCBpbmRleCA9IGpRdWVyeS5pbkFycmF5KCBhcmcsIGxpc3QsIGluZGV4ICkgKSA+IC0xICkge1xuXHRcdFx0XHRcdFx0XHRsaXN0LnNwbGljZSggaW5kZXgsIDEgKTtcblx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGZpcmluZyBpbmRleGVzXG5cdFx0XHRcdFx0XHRcdGlmICggZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICggaW5kZXggPD0gZmlyaW5nTGVuZ3RoICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZmlyaW5nTGVuZ3RoLS07XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGlmICggaW5kZXggPD0gZmlyaW5nSW5kZXggKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRmaXJpbmdJbmRleC0tO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdC8vIENoZWNrIGlmIGEgZ2l2ZW4gY2FsbGJhY2sgaXMgaW4gdGhlIGxpc3QuXG5cdFx0XHQvLyBJZiBubyBhcmd1bWVudCBpcyBnaXZlbiwgcmV0dXJuIHdoZXRoZXIgb3Igbm90IGxpc3QgaGFzIGNhbGxiYWNrcyBhdHRhY2hlZC5cblx0XHRcdGhhczogZnVuY3Rpb24oIGZuICkge1xuXHRcdFx0XHRyZXR1cm4gZm4gPyBqUXVlcnkuaW5BcnJheSggZm4sIGxpc3QgKSA+IC0xIDogISEoIGxpc3QgJiYgbGlzdC5sZW5ndGggKTtcblx0XHRcdH0sXG5cdFx0XHQvLyBSZW1vdmUgYWxsIGNhbGxiYWNrcyBmcm9tIHRoZSBsaXN0XG5cdFx0XHRlbXB0eTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGxpc3QgPSBbXTtcblx0XHRcdFx0ZmlyaW5nTGVuZ3RoID0gMDtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gSGF2ZSB0aGUgbGlzdCBkbyBub3RoaW5nIGFueW1vcmVcblx0XHRcdGRpc2FibGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRsaXN0ID0gc3RhY2sgPSBtZW1vcnkgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdC8vIElzIGl0IGRpc2FibGVkP1xuXHRcdFx0ZGlzYWJsZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gIWxpc3Q7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gTG9jayB0aGUgbGlzdCBpbiBpdHMgY3VycmVudCBzdGF0ZVxuXHRcdFx0bG9jazogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHN0YWNrID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRpZiAoICFtZW1vcnkgKSB7XG5cdFx0XHRcdFx0c2VsZi5kaXNhYmxlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gSXMgaXQgbG9ja2VkP1xuXHRcdFx0bG9ja2VkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICFzdGFjaztcblx0XHRcdH0sXG5cdFx0XHQvLyBDYWxsIGFsbCBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gY29udGV4dCBhbmQgYXJndW1lbnRzXG5cdFx0XHRmaXJlV2l0aDogZnVuY3Rpb24oIGNvbnRleHQsIGFyZ3MgKSB7XG5cdFx0XHRcdGlmICggbGlzdCAmJiAoICFmaXJlZCB8fCBzdGFjayApICkge1xuXHRcdFx0XHRcdGFyZ3MgPSBhcmdzIHx8IFtdO1xuXHRcdFx0XHRcdGFyZ3MgPSBbIGNvbnRleHQsIGFyZ3Muc2xpY2UgPyBhcmdzLnNsaWNlKCkgOiBhcmdzIF07XG5cdFx0XHRcdFx0aWYgKCBmaXJpbmcgKSB7XG5cdFx0XHRcdFx0XHRzdGFjay5wdXNoKCBhcmdzICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGZpcmUoIGFyZ3MgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gQ2FsbCBhbGwgdGhlIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHNcblx0XHRcdGZpcmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzZWxmLmZpcmVXaXRoKCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gVG8ga25vdyBpZiB0aGUgY2FsbGJhY2tzIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCBhdCBsZWFzdCBvbmNlXG5cdFx0XHRmaXJlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhIWZpcmVkO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0cmV0dXJuIHNlbGY7XG59O1xuXG5cbmpRdWVyeS5leHRlbmQoe1xuXG5cdERlZmVycmVkOiBmdW5jdGlvbiggZnVuYyApIHtcblx0XHR2YXIgdHVwbGVzID0gW1xuXHRcdFx0XHQvLyBhY3Rpb24sIGFkZCBsaXN0ZW5lciwgbGlzdGVuZXIgbGlzdCwgZmluYWwgc3RhdGVcblx0XHRcdFx0WyBcInJlc29sdmVcIiwgXCJkb25lXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZXNvbHZlZFwiIF0sXG5cdFx0XHRcdFsgXCJyZWplY3RcIiwgXCJmYWlsXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZWplY3RlZFwiIF0sXG5cdFx0XHRcdFsgXCJub3RpZnlcIiwgXCJwcm9ncmVzc1wiLCBqUXVlcnkuQ2FsbGJhY2tzKFwibWVtb3J5XCIpIF1cblx0XHRcdF0sXG5cdFx0XHRzdGF0ZSA9IFwicGVuZGluZ1wiLFxuXHRcdFx0cHJvbWlzZSA9IHtcblx0XHRcdFx0c3RhdGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiBzdGF0ZTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YWx3YXlzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5kb25lKCBhcmd1bWVudHMgKS5mYWlsKCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblx0XHRcdFx0dGhlbjogZnVuY3Rpb24oIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovICkge1xuXHRcdFx0XHRcdHZhciBmbnMgPSBhcmd1bWVudHM7XG5cdFx0XHRcdFx0cmV0dXJuIGpRdWVyeS5EZWZlcnJlZChmdW5jdGlvbiggbmV3RGVmZXIgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBmbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBmbnNbIGkgXSApICYmIGZuc1sgaSBdO1xuXHRcdFx0XHRcdFx0XHQvLyBkZWZlcnJlZFsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdIGZvciBmb3J3YXJkaW5nIGFjdGlvbnMgdG8gbmV3RGVmZXJcblx0XHRcdFx0XHRcdFx0ZGVmZXJyZWRbIHR1cGxlWzFdIF0oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHJldHVybmVkID0gZm4gJiYgZm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdFx0XHRcdGlmICggcmV0dXJuZWQgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHJldHVybmVkLnByb21pc2UgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLnByb21pc2UoKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQuZG9uZSggbmV3RGVmZXIucmVzb2x2ZSApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5mYWlsKCBuZXdEZWZlci5yZWplY3QgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQucHJvZ3Jlc3MoIG5ld0RlZmVyLm5vdGlmeSApO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlclsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oIHRoaXMgPT09IHByb21pc2UgPyBuZXdEZWZlci5wcm9taXNlKCkgOiB0aGlzLCBmbiA/IFsgcmV0dXJuZWQgXSA6IGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGZucyA9IG51bGw7XG5cdFx0XHRcdFx0fSkucHJvbWlzZSgpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHQvLyBHZXQgYSBwcm9taXNlIGZvciB0aGlzIGRlZmVycmVkXG5cdFx0XHRcdC8vIElmIG9iaiBpcyBwcm92aWRlZCwgdGhlIHByb21pc2UgYXNwZWN0IGlzIGFkZGVkIHRvIHRoZSBvYmplY3Rcblx0XHRcdFx0cHJvbWlzZTogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRcdFx0XHRyZXR1cm4gb2JqICE9IG51bGwgPyBqUXVlcnkuZXh0ZW5kKCBvYmosIHByb21pc2UgKSA6IHByb21pc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWZlcnJlZCA9IHt9O1xuXG5cdFx0Ly8gS2VlcCBwaXBlIGZvciBiYWNrLWNvbXBhdFxuXHRcdHByb21pc2UucGlwZSA9IHByb21pc2UudGhlbjtcblxuXHRcdC8vIEFkZCBsaXN0LXNwZWNpZmljIG1ldGhvZHNcblx0XHRqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG5cdFx0XHR2YXIgbGlzdCA9IHR1cGxlWyAyIF0sXG5cdFx0XHRcdHN0YXRlU3RyaW5nID0gdHVwbGVbIDMgXTtcblxuXHRcdFx0Ly8gcHJvbWlzZVsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdID0gbGlzdC5hZGRcblx0XHRcdHByb21pc2VbIHR1cGxlWzFdIF0gPSBsaXN0LmFkZDtcblxuXHRcdFx0Ly8gSGFuZGxlIHN0YXRlXG5cdFx0XHRpZiAoIHN0YXRlU3RyaW5nICkge1xuXHRcdFx0XHRsaXN0LmFkZChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQvLyBzdGF0ZSA9IFsgcmVzb2x2ZWQgfCByZWplY3RlZCBdXG5cdFx0XHRcdFx0c3RhdGUgPSBzdGF0ZVN0cmluZztcblxuXHRcdFx0XHQvLyBbIHJlamVjdF9saXN0IHwgcmVzb2x2ZV9saXN0IF0uZGlzYWJsZTsgcHJvZ3Jlc3NfbGlzdC5sb2NrXG5cdFx0XHRcdH0sIHR1cGxlc1sgaSBeIDEgXVsgMiBdLmRpc2FibGUsIHR1cGxlc1sgMiBdWyAyIF0ubG9jayApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBkZWZlcnJlZFsgcmVzb2x2ZSB8IHJlamVjdCB8IG5vdGlmeSBdXG5cdFx0XHRkZWZlcnJlZFsgdHVwbGVbMF0gXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbMF0gKyBcIldpdGhcIiBdKCB0aGlzID09PSBkZWZlcnJlZCA/IHByb21pc2UgOiB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9O1xuXHRcdFx0ZGVmZXJyZWRbIHR1cGxlWzBdICsgXCJXaXRoXCIgXSA9IGxpc3QuZmlyZVdpdGg7XG5cdFx0fSk7XG5cblx0XHQvLyBNYWtlIHRoZSBkZWZlcnJlZCBhIHByb21pc2Vcblx0XHRwcm9taXNlLnByb21pc2UoIGRlZmVycmVkICk7XG5cblx0XHQvLyBDYWxsIGdpdmVuIGZ1bmMgaWYgYW55XG5cdFx0aWYgKCBmdW5jICkge1xuXHRcdFx0ZnVuYy5jYWxsKCBkZWZlcnJlZCwgZGVmZXJyZWQgKTtcblx0XHR9XG5cblx0XHQvLyBBbGwgZG9uZSFcblx0XHRyZXR1cm4gZGVmZXJyZWQ7XG5cdH0sXG5cblx0Ly8gRGVmZXJyZWQgaGVscGVyXG5cdHdoZW46IGZ1bmN0aW9uKCBzdWJvcmRpbmF0ZSAvKiAsIC4uLiwgc3Vib3JkaW5hdGVOICovICkge1xuXHRcdHZhciBpID0gMCxcblx0XHRcdHJlc29sdmVWYWx1ZXMgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSxcblx0XHRcdGxlbmd0aCA9IHJlc29sdmVWYWx1ZXMubGVuZ3RoLFxuXG5cdFx0XHQvLyB0aGUgY291bnQgb2YgdW5jb21wbGV0ZWQgc3Vib3JkaW5hdGVzXG5cdFx0XHRyZW1haW5pbmcgPSBsZW5ndGggIT09IDEgfHwgKCBzdWJvcmRpbmF0ZSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggc3Vib3JkaW5hdGUucHJvbWlzZSApICkgPyBsZW5ndGggOiAwLFxuXG5cdFx0XHQvLyB0aGUgbWFzdGVyIERlZmVycmVkLiBJZiByZXNvbHZlVmFsdWVzIGNvbnNpc3Qgb2Ygb25seSBhIHNpbmdsZSBEZWZlcnJlZCwganVzdCB1c2UgdGhhdC5cblx0XHRcdGRlZmVycmVkID0gcmVtYWluaW5nID09PSAxID8gc3Vib3JkaW5hdGUgOiBqUXVlcnkuRGVmZXJyZWQoKSxcblxuXHRcdFx0Ly8gVXBkYXRlIGZ1bmN0aW9uIGZvciBib3RoIHJlc29sdmUgYW5kIHByb2dyZXNzIHZhbHVlc1xuXHRcdFx0dXBkYXRlRnVuYyA9IGZ1bmN0aW9uKCBpLCBjb250ZXh0cywgdmFsdWVzICkge1xuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0XHRcdGNvbnRleHRzWyBpIF0gPSB0aGlzO1xuXHRcdFx0XHRcdHZhbHVlc1sgaSBdID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSA6IHZhbHVlO1xuXHRcdFx0XHRcdGlmICggdmFsdWVzID09PSBwcm9ncmVzc1ZhbHVlcyApIHtcblx0XHRcdFx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGNvbnRleHRzLCB2YWx1ZXMgKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCAhKCAtLXJlbWFpbmluZyApICkge1xuXHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGNvbnRleHRzLCB2YWx1ZXMgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHR9LFxuXG5cdFx0XHRwcm9ncmVzc1ZhbHVlcywgcHJvZ3Jlc3NDb250ZXh0cywgcmVzb2x2ZUNvbnRleHRzO1xuXG5cdFx0Ly8gQWRkIGxpc3RlbmVycyB0byBEZWZlcnJlZCBzdWJvcmRpbmF0ZXM7IHRyZWF0IG90aGVycyBhcyByZXNvbHZlZFxuXHRcdGlmICggbGVuZ3RoID4gMSApIHtcblx0XHRcdHByb2dyZXNzVmFsdWVzID0gbmV3IEFycmF5KCBsZW5ndGggKTtcblx0XHRcdHByb2dyZXNzQ29udGV4dHMgPSBuZXcgQXJyYXkoIGxlbmd0aCApO1xuXHRcdFx0cmVzb2x2ZUNvbnRleHRzID0gbmV3IEFycmF5KCBsZW5ndGggKTtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIHJlc29sdmVWYWx1ZXNbIGkgXSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggcmVzb2x2ZVZhbHVlc1sgaSBdLnByb21pc2UgKSApIHtcblx0XHRcdFx0XHRyZXNvbHZlVmFsdWVzWyBpIF0ucHJvbWlzZSgpXG5cdFx0XHRcdFx0XHQuZG9uZSggdXBkYXRlRnVuYyggaSwgcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICkgKVxuXHRcdFx0XHRcdFx0LmZhaWwoIGRlZmVycmVkLnJlamVjdCApXG5cdFx0XHRcdFx0XHQucHJvZ3Jlc3MoIHVwZGF0ZUZ1bmMoIGksIHByb2dyZXNzQ29udGV4dHMsIHByb2dyZXNzVmFsdWVzICkgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQtLXJlbWFpbmluZztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIElmIHdlJ3JlIG5vdCB3YWl0aW5nIG9uIGFueXRoaW5nLCByZXNvbHZlIHRoZSBtYXN0ZXJcblx0XHRpZiAoICFyZW1haW5pbmcgKSB7XG5cdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcblx0fVxufSk7XG5cblxuLy8gVGhlIGRlZmVycmVkIHVzZWQgb24gRE9NIHJlYWR5XG52YXIgcmVhZHlMaXN0O1xuXG5qUXVlcnkuZm4ucmVhZHkgPSBmdW5jdGlvbiggZm4gKSB7XG5cdC8vIEFkZCB0aGUgY2FsbGJhY2tcblx0alF1ZXJ5LnJlYWR5LnByb21pc2UoKS5kb25lKCBmbiApO1xuXG5cdHJldHVybiB0aGlzO1xufTtcblxualF1ZXJ5LmV4dGVuZCh7XG5cdC8vIElzIHRoZSBET00gcmVhZHkgdG8gYmUgdXNlZD8gU2V0IHRvIHRydWUgb25jZSBpdCBvY2N1cnMuXG5cdGlzUmVhZHk6IGZhbHNlLFxuXG5cdC8vIEEgY291bnRlciB0byB0cmFjayBob3cgbWFueSBpdGVtcyB0byB3YWl0IGZvciBiZWZvcmVcblx0Ly8gdGhlIHJlYWR5IGV2ZW50IGZpcmVzLiBTZWUgIzY3ODFcblx0cmVhZHlXYWl0OiAxLFxuXG5cdC8vIEhvbGQgKG9yIHJlbGVhc2UpIHRoZSByZWFkeSBldmVudFxuXHRob2xkUmVhZHk6IGZ1bmN0aW9uKCBob2xkICkge1xuXHRcdGlmICggaG9sZCApIHtcblx0XHRcdGpRdWVyeS5yZWFkeVdhaXQrKztcblx0XHR9IGVsc2Uge1xuXHRcdFx0alF1ZXJ5LnJlYWR5KCB0cnVlICk7XG5cdFx0fVxuXHR9LFxuXG5cdC8vIEhhbmRsZSB3aGVuIHRoZSBET00gaXMgcmVhZHlcblx0cmVhZHk6IGZ1bmN0aW9uKCB3YWl0ICkge1xuXG5cdFx0Ly8gQWJvcnQgaWYgdGhlcmUgYXJlIHBlbmRpbmcgaG9sZHMgb3Igd2UncmUgYWxyZWFkeSByZWFkeVxuXHRcdGlmICggd2FpdCA9PT0gdHJ1ZSA/IC0talF1ZXJ5LnJlYWR5V2FpdCA6IGpRdWVyeS5pc1JlYWR5ICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFJlbWVtYmVyIHRoYXQgdGhlIERPTSBpcyByZWFkeVxuXHRcdGpRdWVyeS5pc1JlYWR5ID0gdHJ1ZTtcblxuXHRcdC8vIElmIGEgbm9ybWFsIERPTSBSZWFkeSBldmVudCBmaXJlZCwgZGVjcmVtZW50LCBhbmQgd2FpdCBpZiBuZWVkIGJlXG5cdFx0aWYgKCB3YWl0ICE9PSB0cnVlICYmIC0talF1ZXJ5LnJlYWR5V2FpdCA+IDAgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gSWYgdGhlcmUgYXJlIGZ1bmN0aW9ucyBib3VuZCwgdG8gZXhlY3V0ZVxuXHRcdHJlYWR5TGlzdC5yZXNvbHZlV2l0aCggZG9jdW1lbnQsIFsgalF1ZXJ5IF0gKTtcblxuXHRcdC8vIFRyaWdnZXIgYW55IGJvdW5kIHJlYWR5IGV2ZW50c1xuXHRcdGlmICggalF1ZXJ5LmZuLnRyaWdnZXJIYW5kbGVyICkge1xuXHRcdFx0alF1ZXJ5KCBkb2N1bWVudCApLnRyaWdnZXJIYW5kbGVyKCBcInJlYWR5XCIgKTtcblx0XHRcdGpRdWVyeSggZG9jdW1lbnQgKS5vZmYoIFwicmVhZHlcIiApO1xuXHRcdH1cblx0fVxufSk7XG5cbi8qKlxuICogVGhlIHJlYWR5IGV2ZW50IGhhbmRsZXIgYW5kIHNlbGYgY2xlYW51cCBtZXRob2RcbiAqL1xuZnVuY3Rpb24gY29tcGxldGVkKCkge1xuXHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCBcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY29tcGxldGVkLCBmYWxzZSApO1xuXHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggXCJsb2FkXCIsIGNvbXBsZXRlZCwgZmFsc2UgKTtcblx0alF1ZXJ5LnJlYWR5KCk7XG59XG5cbmpRdWVyeS5yZWFkeS5wcm9taXNlID0gZnVuY3Rpb24oIG9iaiApIHtcblx0aWYgKCAhcmVhZHlMaXN0ICkge1xuXG5cdFx0cmVhZHlMaXN0ID0galF1ZXJ5LkRlZmVycmVkKCk7XG5cblx0XHQvLyBDYXRjaCBjYXNlcyB3aGVyZSAkKGRvY3VtZW50KS5yZWFkeSgpIGlzIGNhbGxlZCBhZnRlciB0aGUgYnJvd3NlciBldmVudCBoYXMgYWxyZWFkeSBvY2N1cnJlZC5cblx0XHQvLyBXZSBvbmNlIHRyaWVkIHRvIHVzZSByZWFkeVN0YXRlIFwiaW50ZXJhY3RpdmVcIiBoZXJlLCBidXQgaXQgY2F1c2VkIGlzc3VlcyBsaWtlIHRoZSBvbmVcblx0XHQvLyBkaXNjb3ZlcmVkIGJ5IENocmlzUyBoZXJlOiBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjI4MiNjb21tZW50OjE1XG5cdFx0aWYgKCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgKSB7XG5cdFx0XHQvLyBIYW5kbGUgaXQgYXN5bmNocm9ub3VzbHkgdG8gYWxsb3cgc2NyaXB0cyB0aGUgb3Bwb3J0dW5pdHkgdG8gZGVsYXkgcmVhZHlcblx0XHRcdHNldFRpbWVvdXQoIGpRdWVyeS5yZWFkeSApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gVXNlIHRoZSBoYW5keSBldmVudCBjYWxsYmFja1xuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJET01Db250ZW50TG9hZGVkXCIsIGNvbXBsZXRlZCwgZmFsc2UgKTtcblxuXHRcdFx0Ly8gQSBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkLCB0aGF0IHdpbGwgYWx3YXlzIHdvcmtcblx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCBcImxvYWRcIiwgY29tcGxldGVkLCBmYWxzZSApO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVhZHlMaXN0LnByb21pc2UoIG9iaiApO1xufTtcblxuLy8gS2ljayBvZmYgdGhlIERPTSByZWFkeSBjaGVjayBldmVuIGlmIHRoZSB1c2VyIGRvZXMgbm90XG5qUXVlcnkucmVhZHkucHJvbWlzZSgpO1xuXG5cblxuXG4vLyBNdWx0aWZ1bmN0aW9uYWwgbWV0aG9kIHRvIGdldCBhbmQgc2V0IHZhbHVlcyBvZiBhIGNvbGxlY3Rpb25cbi8vIFRoZSB2YWx1ZS9zIGNhbiBvcHRpb25hbGx5IGJlIGV4ZWN1dGVkIGlmIGl0J3MgYSBmdW5jdGlvblxudmFyIGFjY2VzcyA9IGpRdWVyeS5hY2Nlc3MgPSBmdW5jdGlvbiggZWxlbXMsIGZuLCBrZXksIHZhbHVlLCBjaGFpbmFibGUsIGVtcHR5R2V0LCByYXcgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSBlbGVtcy5sZW5ndGgsXG5cdFx0YnVsayA9IGtleSA9PSBudWxsO1xuXG5cdC8vIFNldHMgbWFueSB2YWx1ZXNcblx0aWYgKCBqUXVlcnkudHlwZSgga2V5ICkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0Y2hhaW5hYmxlID0gdHJ1ZTtcblx0XHRmb3IgKCBpIGluIGtleSApIHtcblx0XHRcdGpRdWVyeS5hY2Nlc3MoIGVsZW1zLCBmbiwgaSwga2V5W2ldLCB0cnVlLCBlbXB0eUdldCwgcmF3ICk7XG5cdFx0fVxuXG5cdC8vIFNldHMgb25lIHZhbHVlXG5cdH0gZWxzZSBpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0Y2hhaW5hYmxlID0gdHJ1ZTtcblxuXHRcdGlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmF3ID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAoIGJ1bGsgKSB7XG5cdFx0XHQvLyBCdWxrIG9wZXJhdGlvbnMgcnVuIGFnYWluc3QgdGhlIGVudGlyZSBzZXRcblx0XHRcdGlmICggcmF3ICkge1xuXHRcdFx0XHRmbi5jYWxsKCBlbGVtcywgdmFsdWUgKTtcblx0XHRcdFx0Zm4gPSBudWxsO1xuXG5cdFx0XHQvLyAuLi5leGNlcHQgd2hlbiBleGVjdXRpbmcgZnVuY3Rpb24gdmFsdWVzXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRidWxrID0gZm47XG5cdFx0XHRcdGZuID0gZnVuY3Rpb24oIGVsZW0sIGtleSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGJ1bGsuY2FsbCggalF1ZXJ5KCBlbGVtICksIHZhbHVlICk7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCBmbiApIHtcblx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRmbiggZWxlbXNbaV0sIGtleSwgcmF3ID8gdmFsdWUgOiB2YWx1ZS5jYWxsKCBlbGVtc1tpXSwgaSwgZm4oIGVsZW1zW2ldLCBrZXkgKSApICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGNoYWluYWJsZSA/XG5cdFx0ZWxlbXMgOlxuXG5cdFx0Ly8gR2V0c1xuXHRcdGJ1bGsgP1xuXHRcdFx0Zm4uY2FsbCggZWxlbXMgKSA6XG5cdFx0XHRsZW4gPyBmbiggZWxlbXNbMF0sIGtleSApIDogZW1wdHlHZXQ7XG59O1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIG9iamVjdCBjYW4gaGF2ZSBkYXRhXG4gKi9cbmpRdWVyeS5hY2NlcHREYXRhID0gZnVuY3Rpb24oIG93bmVyICkge1xuXHQvLyBBY2NlcHRzIG9ubHk6XG5cdC8vICAtIE5vZGVcblx0Ly8gICAgLSBOb2RlLkVMRU1FTlRfTk9ERVxuXHQvLyAgICAtIE5vZGUuRE9DVU1FTlRfTk9ERVxuXHQvLyAgLSBPYmplY3Rcblx0Ly8gICAgLSBBbnlcblx0LyoganNoaW50IC1XMDE4ICovXG5cdHJldHVybiBvd25lci5ub2RlVHlwZSA9PT0gMSB8fCBvd25lci5ub2RlVHlwZSA9PT0gOSB8fCAhKCArb3duZXIubm9kZVR5cGUgKTtcbn07XG5cblxuZnVuY3Rpb24gRGF0YSgpIHtcblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LFxuXHQvLyBPbGQgV2ViS2l0IGRvZXMgbm90IGhhdmUgT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zL2ZyZWV6ZSBtZXRob2QsXG5cdC8vIHJldHVybiBuZXcgZW1wdHkgb2JqZWN0IGluc3RlYWQgd2l0aCBubyBbW3NldF1dIGFjY2Vzc29yXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggdGhpcy5jYWNoZSA9IHt9LCAwLCB7XG5cdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB7fTtcblx0XHR9XG5cdH0pO1xuXG5cdHRoaXMuZXhwYW5kbyA9IGpRdWVyeS5leHBhbmRvICsgRGF0YS51aWQrKztcbn1cblxuRGF0YS51aWQgPSAxO1xuRGF0YS5hY2NlcHRzID0galF1ZXJ5LmFjY2VwdERhdGE7XG5cbkRhdGEucHJvdG90eXBlID0ge1xuXHRrZXk6IGZ1bmN0aW9uKCBvd25lciApIHtcblx0XHQvLyBXZSBjYW4gYWNjZXB0IGRhdGEgZm9yIG5vbi1lbGVtZW50IG5vZGVzIGluIG1vZGVybiBicm93c2Vycyxcblx0XHQvLyBidXQgd2Ugc2hvdWxkIG5vdCwgc2VlICM4MzM1LlxuXHRcdC8vIEFsd2F5cyByZXR1cm4gdGhlIGtleSBmb3IgYSBmcm96ZW4gb2JqZWN0LlxuXHRcdGlmICggIURhdGEuYWNjZXB0cyggb3duZXIgKSApIHtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZhciBkZXNjcmlwdG9yID0ge30sXG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgb3duZXIgb2JqZWN0IGFscmVhZHkgaGFzIGEgY2FjaGUga2V5XG5cdFx0XHR1bmxvY2sgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cblx0XHQvLyBJZiBub3QsIGNyZWF0ZSBvbmVcblx0XHRpZiAoICF1bmxvY2sgKSB7XG5cdFx0XHR1bmxvY2sgPSBEYXRhLnVpZCsrO1xuXG5cdFx0XHQvLyBTZWN1cmUgaXQgaW4gYSBub24tZW51bWVyYWJsZSwgbm9uLXdyaXRhYmxlIHByb3BlcnR5XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRkZXNjcmlwdG9yWyB0aGlzLmV4cGFuZG8gXSA9IHsgdmFsdWU6IHVubG9jayB9O1xuXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydGllcyggb3duZXIsIGRlc2NyaXB0b3IgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0XG5cdFx0XHQvLyBGYWxsYmFjayB0byBhIGxlc3Mgc2VjdXJlIGRlZmluaXRpb25cblx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXHRcdFx0XHRkZXNjcmlwdG9yWyB0aGlzLmV4cGFuZG8gXSA9IHVubG9jaztcblx0XHRcdFx0alF1ZXJ5LmV4dGVuZCggb3duZXIsIGRlc2NyaXB0b3IgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBFbnN1cmUgdGhlIGNhY2hlIG9iamVjdFxuXHRcdGlmICggIXRoaXMuY2FjaGVbIHVubG9jayBdICkge1xuXHRcdFx0dGhpcy5jYWNoZVsgdW5sb2NrIF0gPSB7fTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdW5sb2NrO1xuXHR9LFxuXHRzZXQ6IGZ1bmN0aW9uKCBvd25lciwgZGF0YSwgdmFsdWUgKSB7XG5cdFx0dmFyIHByb3AsXG5cdFx0XHQvLyBUaGVyZSBtYXkgYmUgYW4gdW5sb2NrIGFzc2lnbmVkIHRvIHRoaXMgbm9kZSxcblx0XHRcdC8vIGlmIHRoZXJlIGlzIG5vIGVudHJ5IGZvciB0aGlzIFwib3duZXJcIiwgY3JlYXRlIG9uZSBpbmxpbmVcblx0XHRcdC8vIGFuZCBzZXQgdGhlIHVubG9jayBhcyB0aG91Z2ggYW4gb3duZXIgZW50cnkgaGFkIGFsd2F5cyBleGlzdGVkXG5cdFx0XHR1bmxvY2sgPSB0aGlzLmtleSggb3duZXIgKSxcblx0XHRcdGNhY2hlID0gdGhpcy5jYWNoZVsgdW5sb2NrIF07XG5cblx0XHQvLyBIYW5kbGU6IFsgb3duZXIsIGtleSwgdmFsdWUgXSBhcmdzXG5cdFx0aWYgKCB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGNhY2hlWyBkYXRhIF0gPSB2YWx1ZTtcblxuXHRcdC8vIEhhbmRsZTogWyBvd25lciwgeyBwcm9wZXJ0aWVzIH0gXSBhcmdzXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIEZyZXNoIGFzc2lnbm1lbnRzIGJ5IG9iamVjdCBhcmUgc2hhbGxvdyBjb3BpZWRcblx0XHRcdGlmICggalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGNhY2hlICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5leHRlbmQoIHRoaXMuY2FjaGVbIHVubG9jayBdLCBkYXRhICk7XG5cdFx0XHQvLyBPdGhlcndpc2UsIGNvcHkgdGhlIHByb3BlcnRpZXMgb25lLWJ5LW9uZSB0byB0aGUgY2FjaGUgb2JqZWN0XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKCBwcm9wIGluIGRhdGEgKSB7XG5cdFx0XHRcdFx0Y2FjaGVbIHByb3AgXSA9IGRhdGFbIHByb3AgXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gY2FjaGU7XG5cdH0sXG5cdGdldDogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7XG5cdFx0Ly8gRWl0aGVyIGEgdmFsaWQgY2FjaGUgaXMgZm91bmQsIG9yIHdpbGwgYmUgY3JlYXRlZC5cblx0XHQvLyBOZXcgY2FjaGVzIHdpbGwgYmUgY3JlYXRlZCBhbmQgdGhlIHVubG9jayByZXR1cm5lZCxcblx0XHQvLyBhbGxvd2luZyBkaXJlY3QgYWNjZXNzIHRvIHRoZSBuZXdseSBjcmVhdGVkXG5cdFx0Ly8gZW1wdHkgZGF0YSBvYmplY3QuIEEgdmFsaWQgb3duZXIgb2JqZWN0IG11c3QgYmUgcHJvdmlkZWQuXG5cdFx0dmFyIGNhY2hlID0gdGhpcy5jYWNoZVsgdGhpcy5rZXkoIG93bmVyICkgXTtcblxuXHRcdHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRjYWNoZSA6IGNhY2hlWyBrZXkgXTtcblx0fSxcblx0YWNjZXNzOiBmdW5jdGlvbiggb3duZXIsIGtleSwgdmFsdWUgKSB7XG5cdFx0dmFyIHN0b3JlZDtcblx0XHQvLyBJbiBjYXNlcyB3aGVyZSBlaXRoZXI6XG5cdFx0Ly9cblx0XHQvLyAgIDEuIE5vIGtleSB3YXMgc3BlY2lmaWVkXG5cdFx0Ly8gICAyLiBBIHN0cmluZyBrZXkgd2FzIHNwZWNpZmllZCwgYnV0IG5vIHZhbHVlIHByb3ZpZGVkXG5cdFx0Ly9cblx0XHQvLyBUYWtlIHRoZSBcInJlYWRcIiBwYXRoIGFuZCBhbGxvdyB0aGUgZ2V0IG1ldGhvZCB0byBkZXRlcm1pbmVcblx0XHQvLyB3aGljaCB2YWx1ZSB0byByZXR1cm4sIHJlc3BlY3RpdmVseSBlaXRoZXI6XG5cdFx0Ly9cblx0XHQvLyAgIDEuIFRoZSBlbnRpcmUgY2FjaGUgb2JqZWN0XG5cdFx0Ly8gICAyLiBUaGUgZGF0YSBzdG9yZWQgYXQgdGhlIGtleVxuXHRcdC8vXG5cdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHQoKGtleSAmJiB0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiKSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSApIHtcblxuXHRcdFx0c3RvcmVkID0gdGhpcy5nZXQoIG93bmVyLCBrZXkgKTtcblxuXHRcdFx0cmV0dXJuIHN0b3JlZCAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0c3RvcmVkIDogdGhpcy5nZXQoIG93bmVyLCBqUXVlcnkuY2FtZWxDYXNlKGtleSkgKTtcblx0XHR9XG5cblx0XHQvLyBbKl1XaGVuIHRoZSBrZXkgaXMgbm90IGEgc3RyaW5nLCBvciBib3RoIGEga2V5IGFuZCB2YWx1ZVxuXHRcdC8vIGFyZSBzcGVjaWZpZWQsIHNldCBvciBleHRlbmQgKGV4aXN0aW5nIG9iamVjdHMpIHdpdGggZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBBbiBvYmplY3Qgb2YgcHJvcGVydGllc1xuXHRcdC8vICAgMi4gQSBrZXkgYW5kIHZhbHVlXG5cdFx0Ly9cblx0XHR0aGlzLnNldCggb3duZXIsIGtleSwgdmFsdWUgKTtcblxuXHRcdC8vIFNpbmNlIHRoZSBcInNldFwiIHBhdGggY2FuIGhhdmUgdHdvIHBvc3NpYmxlIGVudHJ5IHBvaW50c1xuXHRcdC8vIHJldHVybiB0aGUgZXhwZWN0ZWQgZGF0YSBiYXNlZCBvbiB3aGljaCBwYXRoIHdhcyB0YWtlblsqXVxuXHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiBrZXk7XG5cdH0sXG5cdHJlbW92ZTogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7XG5cdFx0dmFyIGksIG5hbWUsIGNhbWVsLFxuXHRcdFx0dW5sb2NrID0gdGhpcy5rZXkoIG93bmVyICksXG5cdFx0XHRjYWNoZSA9IHRoaXMuY2FjaGVbIHVubG9jayBdO1xuXG5cdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHRoaXMuY2FjaGVbIHVubG9jayBdID0ge307XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gU3VwcG9ydCBhcnJheSBvciBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIG9mIGtleXNcblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIGtleSApICkge1xuXHRcdFx0XHQvLyBJZiBcIm5hbWVcIiBpcyBhbiBhcnJheSBvZiBrZXlzLi4uXG5cdFx0XHRcdC8vIFdoZW4gZGF0YSBpcyBpbml0aWFsbHkgY3JlYXRlZCwgdmlhIChcImtleVwiLCBcInZhbFwiKSBzaWduYXR1cmUsXG5cdFx0XHRcdC8vIGtleXMgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gY2FtZWxDYXNlLlxuXHRcdFx0XHQvLyBTaW5jZSB0aGVyZSBpcyBubyB3YXkgdG8gdGVsbCBfaG93XyBhIGtleSB3YXMgYWRkZWQsIHJlbW92ZVxuXHRcdFx0XHQvLyBib3RoIHBsYWluIGtleSBhbmQgY2FtZWxDYXNlIGtleS4gIzEyNzg2XG5cdFx0XHRcdC8vIFRoaXMgd2lsbCBvbmx5IHBlbmFsaXplIHRoZSBhcnJheSBhcmd1bWVudCBwYXRoLlxuXHRcdFx0XHRuYW1lID0ga2V5LmNvbmNhdCgga2V5Lm1hcCggalF1ZXJ5LmNhbWVsQ2FzZSApICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYW1lbCA9IGpRdWVyeS5jYW1lbENhc2UoIGtleSApO1xuXHRcdFx0XHQvLyBUcnkgdGhlIHN0cmluZyBhcyBhIGtleSBiZWZvcmUgYW55IG1hbmlwdWxhdGlvblxuXHRcdFx0XHRpZiAoIGtleSBpbiBjYWNoZSApIHtcblx0XHRcdFx0XHRuYW1lID0gWyBrZXksIGNhbWVsIF07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gSWYgYSBrZXkgd2l0aCB0aGUgc3BhY2VzIGV4aXN0cywgdXNlIGl0LlxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgY3JlYXRlIGFuIGFycmF5IGJ5IG1hdGNoaW5nIG5vbi13aGl0ZXNwYWNlXG5cdFx0XHRcdFx0bmFtZSA9IGNhbWVsO1xuXHRcdFx0XHRcdG5hbWUgPSBuYW1lIGluIGNhY2hlID9cblx0XHRcdFx0XHRcdFsgbmFtZSBdIDogKCBuYW1lLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGkgPSBuYW1lLmxlbmd0aDtcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRkZWxldGUgY2FjaGVbIG5hbWVbIGkgXSBdO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0aGFzRGF0YTogZnVuY3Rpb24oIG93bmVyICkge1xuXHRcdHJldHVybiAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoXG5cdFx0XHR0aGlzLmNhY2hlWyBvd25lclsgdGhpcy5leHBhbmRvIF0gXSB8fCB7fVxuXHRcdCk7XG5cdH0sXG5cdGRpc2NhcmQ6IGZ1bmN0aW9uKCBvd25lciApIHtcblx0XHRpZiAoIG93bmVyWyB0aGlzLmV4cGFuZG8gXSApIHtcblx0XHRcdGRlbGV0ZSB0aGlzLmNhY2hlWyBvd25lclsgdGhpcy5leHBhbmRvIF0gXTtcblx0XHR9XG5cdH1cbn07XG52YXIgZGF0YV9wcml2ID0gbmV3IERhdGEoKTtcblxudmFyIGRhdGFfdXNlciA9IG5ldyBEYXRhKCk7XG5cblxuXG4vL1x0SW1wbGVtZW50YXRpb24gU3VtbWFyeVxuLy9cbi8vXHQxLiBFbmZvcmNlIEFQSSBzdXJmYWNlIGFuZCBzZW1hbnRpYyBjb21wYXRpYmlsaXR5IHdpdGggMS45LnggYnJhbmNoXG4vL1x0Mi4gSW1wcm92ZSB0aGUgbW9kdWxlJ3MgbWFpbnRhaW5hYmlsaXR5IGJ5IHJlZHVjaW5nIHRoZSBzdG9yYWdlXG4vL1x0XHRwYXRocyB0byBhIHNpbmdsZSBtZWNoYW5pc20uXG4vL1x0My4gVXNlIHRoZSBzYW1lIHNpbmdsZSBtZWNoYW5pc20gdG8gc3VwcG9ydCBcInByaXZhdGVcIiBhbmQgXCJ1c2VyXCIgZGF0YS5cbi8vXHQ0LiBfTmV2ZXJfIGV4cG9zZSBcInByaXZhdGVcIiBkYXRhIHRvIHVzZXIgY29kZSAoVE9ETzogRHJvcCBfZGF0YSwgX3JlbW92ZURhdGEpXG4vL1x0NS4gQXZvaWQgZXhwb3NpbmcgaW1wbGVtZW50YXRpb24gZGV0YWlscyBvbiB1c2VyIG9iamVjdHMgKGVnLiBleHBhbmRvIHByb3BlcnRpZXMpXG4vL1x0Ni4gUHJvdmlkZSBhIGNsZWFyIHBhdGggZm9yIGltcGxlbWVudGF0aW9uIHVwZ3JhZGUgdG8gV2Vha01hcCBpbiAyMDE0XG5cbnZhciByYnJhY2UgPSAvXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sXG5cdHJtdWx0aURhc2ggPSAvKFtBLVpdKS9nO1xuXG5mdW5jdGlvbiBkYXRhQXR0ciggZWxlbSwga2V5LCBkYXRhICkge1xuXHR2YXIgbmFtZTtcblxuXHQvLyBJZiBub3RoaW5nIHdhcyBmb3VuZCBpbnRlcm5hbGx5LCB0cnkgdG8gZmV0Y2ggYW55XG5cdC8vIGRhdGEgZnJvbSB0aGUgSFRNTDUgZGF0YS0qIGF0dHJpYnV0ZVxuXHRpZiAoIGRhdGEgPT09IHVuZGVmaW5lZCAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdG5hbWUgPSBcImRhdGEtXCIgKyBrZXkucmVwbGFjZSggcm11bHRpRGFzaCwgXCItJDFcIiApLnRvTG93ZXJDYXNlKCk7XG5cdFx0ZGF0YSA9IGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICk7XG5cblx0XHRpZiAoIHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZGF0YSA9IGRhdGEgPT09IFwidHJ1ZVwiID8gdHJ1ZSA6XG5cdFx0XHRcdFx0ZGF0YSA9PT0gXCJmYWxzZVwiID8gZmFsc2UgOlxuXHRcdFx0XHRcdGRhdGEgPT09IFwibnVsbFwiID8gbnVsbCA6XG5cdFx0XHRcdFx0Ly8gT25seSBjb252ZXJ0IHRvIGEgbnVtYmVyIGlmIGl0IGRvZXNuJ3QgY2hhbmdlIHRoZSBzdHJpbmdcblx0XHRcdFx0XHQrZGF0YSArIFwiXCIgPT09IGRhdGEgPyArZGF0YSA6XG5cdFx0XHRcdFx0cmJyYWNlLnRlc3QoIGRhdGEgKSA/IGpRdWVyeS5wYXJzZUpTT04oIGRhdGEgKSA6XG5cdFx0XHRcdFx0ZGF0YTtcblx0XHRcdH0gY2F0Y2goIGUgKSB7fVxuXG5cdFx0XHQvLyBNYWtlIHN1cmUgd2Ugc2V0IHRoZSBkYXRhIHNvIGl0IGlzbid0IGNoYW5nZWQgbGF0ZXJcblx0XHRcdGRhdGFfdXNlci5zZXQoIGVsZW0sIGtleSwgZGF0YSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gZGF0YTtcbn1cblxualF1ZXJ5LmV4dGVuZCh7XG5cdGhhc0RhdGE6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBkYXRhX3VzZXIuaGFzRGF0YSggZWxlbSApIHx8IGRhdGFfcHJpdi5oYXNEYXRhKCBlbGVtICk7XG5cdH0sXG5cblx0ZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIGRhdGFfdXNlci5hY2Nlc3MoIGVsZW0sIG5hbWUsIGRhdGEgKTtcblx0fSxcblxuXHRyZW1vdmVEYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0XHRkYXRhX3VzZXIucmVtb3ZlKCBlbGVtLCBuYW1lICk7XG5cdH0sXG5cblx0Ly8gVE9ETzogTm93IHRoYXQgYWxsIGNhbGxzIHRvIF9kYXRhIGFuZCBfcmVtb3ZlRGF0YSBoYXZlIGJlZW4gcmVwbGFjZWRcblx0Ly8gd2l0aCBkaXJlY3QgY2FsbHMgdG8gZGF0YV9wcml2IG1ldGhvZHMsIHRoZXNlIGNhbiBiZSBkZXByZWNhdGVkLlxuXHRfZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIG5hbWUsIGRhdGEgKTtcblx0fSxcblxuXHRfcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdFx0ZGF0YV9wcml2LnJlbW92ZSggZWxlbSwgbmFtZSApO1xuXHR9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGRhdGE6IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuXHRcdHZhciBpLCBuYW1lLCBkYXRhLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdGF0dHJzID0gZWxlbSAmJiBlbGVtLmF0dHJpYnV0ZXM7XG5cblx0XHQvLyBHZXRzIGFsbCB2YWx1ZXNcblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0aWYgKCB0aGlzLmxlbmd0aCApIHtcblx0XHRcdFx0ZGF0YSA9IGRhdGFfdXNlci5nZXQoIGVsZW0gKTtcblxuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgIWRhdGFfcHJpdi5nZXQoIGVsZW0sIFwiaGFzRGF0YUF0dHJzXCIgKSApIHtcblx0XHRcdFx0XHRpID0gYXR0cnMubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTExK1xuXHRcdFx0XHRcdFx0Ly8gVGhlIGF0dHJzIGVsZW1lbnRzIGNhbiBiZSBudWxsICgjMTQ4OTQpXG5cdFx0XHRcdFx0XHRpZiAoIGF0dHJzWyBpIF0gKSB7XG5cdFx0XHRcdFx0XHRcdG5hbWUgPSBhdHRyc1sgaSBdLm5hbWU7XG5cdFx0XHRcdFx0XHRcdGlmICggbmFtZS5pbmRleE9mKCBcImRhdGEtXCIgKSA9PT0gMCApIHtcblx0XHRcdFx0XHRcdFx0XHRuYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZS5zbGljZSg1KSApO1xuXHRcdFx0XHRcdFx0XHRcdGRhdGFBdHRyKCBlbGVtLCBuYW1lLCBkYXRhWyBuYW1lIF0gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkYXRhX3ByaXYuc2V0KCBlbGVtLCBcImhhc0RhdGFBdHRyc1wiLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0cyBtdWx0aXBsZSB2YWx1ZXNcblx0XHRpZiAoIHR5cGVvZiBrZXkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXRhX3VzZXIuc2V0KCB0aGlzLCBrZXkgKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBkYXRhLFxuXHRcdFx0XHRjYW1lbEtleSA9IGpRdWVyeS5jYW1lbENhc2UoIGtleSApO1xuXG5cdFx0XHQvLyBUaGUgY2FsbGluZyBqUXVlcnkgb2JqZWN0IChlbGVtZW50IG1hdGNoZXMpIGlzIG5vdCBlbXB0eVxuXHRcdFx0Ly8gKGFuZCB0aGVyZWZvcmUgaGFzIGFuIGVsZW1lbnQgYXBwZWFycyBhdCB0aGlzWyAwIF0pIGFuZCB0aGVcblx0XHRcdC8vIGB2YWx1ZWAgcGFyYW1ldGVyIHdhcyBub3QgdW5kZWZpbmVkLiBBbiBlbXB0eSBqUXVlcnkgb2JqZWN0XG5cdFx0XHQvLyB3aWxsIHJlc3VsdCBpbiBgdW5kZWZpbmVkYCBmb3IgZWxlbSA9IHRoaXNbIDAgXSB3aGljaCB3aWxsXG5cdFx0XHQvLyB0aHJvdyBhbiBleGNlcHRpb24gaWYgYW4gYXR0ZW1wdCB0byByZWFkIGEgZGF0YSBjYWNoZSBpcyBtYWRlLlxuXHRcdFx0aWYgKCBlbGVtICYmIHZhbHVlID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdC8vIEF0dGVtcHQgdG8gZ2V0IGRhdGEgZnJvbSB0aGUgY2FjaGVcblx0XHRcdFx0Ly8gd2l0aCB0aGUga2V5IGFzLWlzXG5cdFx0XHRcdGRhdGEgPSBkYXRhX3VzZXIuZ2V0KCBlbGVtLCBrZXkgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIGdldCBkYXRhIGZyb20gdGhlIGNhY2hlXG5cdFx0XHRcdC8vIHdpdGggdGhlIGtleSBjYW1lbGl6ZWRcblx0XHRcdFx0ZGF0YSA9IGRhdGFfdXNlci5nZXQoIGVsZW0sIGNhbWVsS2V5ICk7XG5cdFx0XHRcdGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBcImRpc2NvdmVyXCIgdGhlIGRhdGEgaW5cblx0XHRcdFx0Ly8gSFRNTDUgY3VzdG9tIGRhdGEtKiBhdHRyc1xuXHRcdFx0XHRkYXRhID0gZGF0YUF0dHIoIGVsZW0sIGNhbWVsS2V5LCB1bmRlZmluZWQgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBXZSB0cmllZCByZWFsbHkgaGFyZCwgYnV0IHRoZSBkYXRhIGRvZXNuJ3QgZXhpc3QuXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IHRoZSBkYXRhLi4uXG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vIEZpcnN0LCBhdHRlbXB0IHRvIHN0b3JlIGEgY29weSBvciByZWZlcmVuY2Ugb2YgYW55XG5cdFx0XHRcdC8vIGRhdGEgdGhhdCBtaWdodCd2ZSBiZWVuIHN0b3JlIHdpdGggYSBjYW1lbENhc2VkIGtleS5cblx0XHRcdFx0dmFyIGRhdGEgPSBkYXRhX3VzZXIuZ2V0KCB0aGlzLCBjYW1lbEtleSApO1xuXG5cdFx0XHRcdC8vIEZvciBIVE1MNSBkYXRhLSogYXR0cmlidXRlIGludGVyb3AsIHdlIGhhdmUgdG9cblx0XHRcdFx0Ly8gc3RvcmUgcHJvcGVydHkgbmFtZXMgd2l0aCBkYXNoZXMgaW4gYSBjYW1lbENhc2UgZm9ybS5cblx0XHRcdFx0Ly8gVGhpcyBtaWdodCBub3QgYXBwbHkgdG8gYWxsIHByb3BlcnRpZXMuLi4qXG5cdFx0XHRcdGRhdGFfdXNlci5zZXQoIHRoaXMsIGNhbWVsS2V5LCB2YWx1ZSApO1xuXG5cdFx0XHRcdC8vICouLi4gSW4gdGhlIGNhc2Ugb2YgcHJvcGVydGllcyB0aGF0IG1pZ2h0IF9hY3R1YWxseV9cblx0XHRcdFx0Ly8gaGF2ZSBkYXNoZXMsIHdlIG5lZWQgdG8gYWxzbyBzdG9yZSBhIGNvcHkgb2YgdGhhdFxuXHRcdFx0XHQvLyB1bmNoYW5nZWQgcHJvcGVydHkuXG5cdFx0XHRcdGlmICgga2V5LmluZGV4T2YoXCItXCIpICE9PSAtMSAmJiBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0ZGF0YV91c2VyLnNldCggdGhpcywga2V5LCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEsIG51bGwsIHRydWUgKTtcblx0fSxcblxuXHRyZW1vdmVEYXRhOiBmdW5jdGlvbigga2V5ICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRkYXRhX3VzZXIucmVtb3ZlKCB0aGlzLCBrZXkgKTtcblx0XHR9KTtcblx0fVxufSk7XG5cblxualF1ZXJ5LmV4dGVuZCh7XG5cdHF1ZXVlOiBmdW5jdGlvbiggZWxlbSwgdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgcXVldWU7XG5cblx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHR0eXBlID0gKCB0eXBlIHx8IFwiZnhcIiApICsgXCJxdWV1ZVwiO1xuXHRcdFx0cXVldWUgPSBkYXRhX3ByaXYuZ2V0KCBlbGVtLCB0eXBlICk7XG5cblx0XHRcdC8vIFNwZWVkIHVwIGRlcXVldWUgYnkgZ2V0dGluZyBvdXQgcXVpY2tseSBpZiB0aGlzIGlzIGp1c3QgYSBsb29rdXBcblx0XHRcdGlmICggZGF0YSApIHtcblx0XHRcdFx0aWYgKCAhcXVldWUgfHwgalF1ZXJ5LmlzQXJyYXkoIGRhdGEgKSApIHtcblx0XHRcdFx0XHRxdWV1ZSA9IGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIHR5cGUsIGpRdWVyeS5tYWtlQXJyYXkoZGF0YSkgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBkYXRhICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBxdWV1ZSB8fCBbXTtcblx0XHR9XG5cdH0sXG5cblx0ZGVxdWV1ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0dmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCBlbGVtLCB0eXBlICksXG5cdFx0XHRzdGFydExlbmd0aCA9IHF1ZXVlLmxlbmd0aCxcblx0XHRcdGZuID0gcXVldWUuc2hpZnQoKSxcblx0XHRcdGhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCB0eXBlICksXG5cdFx0XHRuZXh0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCBlbGVtLCB0eXBlICk7XG5cdFx0XHR9O1xuXG5cdFx0Ly8gSWYgdGhlIGZ4IHF1ZXVlIGlzIGRlcXVldWVkLCBhbHdheXMgcmVtb3ZlIHRoZSBwcm9ncmVzcyBzZW50aW5lbFxuXHRcdGlmICggZm4gPT09IFwiaW5wcm9ncmVzc1wiICkge1xuXHRcdFx0Zm4gPSBxdWV1ZS5zaGlmdCgpO1xuXHRcdFx0c3RhcnRMZW5ndGgtLTtcblx0XHR9XG5cblx0XHRpZiAoIGZuICkge1xuXG5cdFx0XHQvLyBBZGQgYSBwcm9ncmVzcyBzZW50aW5lbCB0byBwcmV2ZW50IHRoZSBmeCBxdWV1ZSBmcm9tIGJlaW5nXG5cdFx0XHQvLyBhdXRvbWF0aWNhbGx5IGRlcXVldWVkXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwiZnhcIiApIHtcblx0XHRcdFx0cXVldWUudW5zaGlmdCggXCJpbnByb2dyZXNzXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2xlYXIgdXAgdGhlIGxhc3QgcXVldWUgc3RvcCBmdW5jdGlvblxuXHRcdFx0ZGVsZXRlIGhvb2tzLnN0b3A7XG5cdFx0XHRmbi5jYWxsKCBlbGVtLCBuZXh0LCBob29rcyApO1xuXHRcdH1cblxuXHRcdGlmICggIXN0YXJ0TGVuZ3RoICYmIGhvb2tzICkge1xuXHRcdFx0aG9va3MuZW1wdHkuZmlyZSgpO1xuXHRcdH1cblx0fSxcblxuXHQvLyBOb3QgcHVibGljIC0gZ2VuZXJhdGUgYSBxdWV1ZUhvb2tzIG9iamVjdCwgb3IgcmV0dXJuIHRoZSBjdXJyZW50IG9uZVxuXHRfcXVldWVIb29rczogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7XG5cdFx0dmFyIGtleSA9IHR5cGUgKyBcInF1ZXVlSG9va3NcIjtcblx0XHRyZXR1cm4gZGF0YV9wcml2LmdldCggZWxlbSwga2V5ICkgfHwgZGF0YV9wcml2LmFjY2VzcyggZWxlbSwga2V5LCB7XG5cdFx0XHRlbXB0eTogalF1ZXJ5LkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLmFkZChmdW5jdGlvbigpIHtcblx0XHRcdFx0ZGF0YV9wcml2LnJlbW92ZSggZWxlbSwgWyB0eXBlICsgXCJxdWV1ZVwiLCBrZXkgXSApO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxufSk7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRxdWV1ZTogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0dmFyIHNldHRlciA9IDI7XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0ZGF0YSA9IHR5cGU7XG5cdFx0XHR0eXBlID0gXCJmeFwiO1xuXHRcdFx0c2V0dGVyLS07XG5cdFx0fVxuXG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoIDwgc2V0dGVyICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5xdWV1ZSggdGhpc1swXSwgdHlwZSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBkYXRhID09PSB1bmRlZmluZWQgP1xuXHRcdFx0dGhpcyA6XG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggdGhpcywgdHlwZSwgZGF0YSApO1xuXG5cdFx0XHRcdC8vIEVuc3VyZSBhIGhvb2tzIGZvciB0aGlzIHF1ZXVlXG5cdFx0XHRcdGpRdWVyeS5fcXVldWVIb29rcyggdGhpcywgdHlwZSApO1xuXG5cdFx0XHRcdGlmICggdHlwZSA9PT0gXCJmeFwiICYmIHF1ZXVlWzBdICE9PSBcImlucHJvZ3Jlc3NcIiApIHtcblx0XHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fSxcblx0ZGVxdWV1ZTogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0fSk7XG5cdH0sXG5cdGNsZWFyUXVldWU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdHJldHVybiB0aGlzLnF1ZXVlKCB0eXBlIHx8IFwiZnhcIiwgW10gKTtcblx0fSxcblx0Ly8gR2V0IGEgcHJvbWlzZSByZXNvbHZlZCB3aGVuIHF1ZXVlcyBvZiBhIGNlcnRhaW4gdHlwZVxuXHQvLyBhcmUgZW1wdGllZCAoZnggaXMgdGhlIHR5cGUgYnkgZGVmYXVsdClcblx0cHJvbWlzZTogZnVuY3Rpb24oIHR5cGUsIG9iaiApIHtcblx0XHR2YXIgdG1wLFxuXHRcdFx0Y291bnQgPSAxLFxuXHRcdFx0ZGVmZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdGVsZW1lbnRzID0gdGhpcyxcblx0XHRcdGkgPSB0aGlzLmxlbmd0aCxcblx0XHRcdHJlc29sdmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAhKCAtLWNvdW50ICkgKSB7XG5cdFx0XHRcdFx0ZGVmZXIucmVzb2x2ZVdpdGgoIGVsZW1lbnRzLCBbIGVsZW1lbnRzIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRvYmogPSB0eXBlO1xuXHRcdFx0dHlwZSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR0bXAgPSBkYXRhX3ByaXYuZ2V0KCBlbGVtZW50c1sgaSBdLCB0eXBlICsgXCJxdWV1ZUhvb2tzXCIgKTtcblx0XHRcdGlmICggdG1wICYmIHRtcC5lbXB0eSApIHtcblx0XHRcdFx0Y291bnQrKztcblx0XHRcdFx0dG1wLmVtcHR5LmFkZCggcmVzb2x2ZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXNvbHZlKCk7XG5cdFx0cmV0dXJuIGRlZmVyLnByb21pc2UoIG9iaiApO1xuXHR9XG59KTtcbnZhciBwbnVtID0gKC9bKy1dPyg/OlxcZCpcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvKS5zb3VyY2U7XG5cbnZhciBjc3NFeHBhbmQgPSBbIFwiVG9wXCIsIFwiUmlnaHRcIiwgXCJCb3R0b21cIiwgXCJMZWZ0XCIgXTtcblxudmFyIGlzSGlkZGVuID0gZnVuY3Rpb24oIGVsZW0sIGVsICkge1xuXHRcdC8vIGlzSGlkZGVuIG1pZ2h0IGJlIGNhbGxlZCBmcm9tIGpRdWVyeSNmaWx0ZXIgZnVuY3Rpb247XG5cdFx0Ly8gaW4gdGhhdCBjYXNlLCBlbGVtZW50IHdpbGwgYmUgc2Vjb25kIGFyZ3VtZW50XG5cdFx0ZWxlbSA9IGVsIHx8IGVsZW07XG5cdFx0cmV0dXJuIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgPT09IFwibm9uZVwiIHx8ICFqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXHR9O1xuXG52YXIgcmNoZWNrYWJsZVR5cGUgPSAoL14oPzpjaGVja2JveHxyYWRpbykkL2kpO1xuXG5cblxuKGZ1bmN0aW9uKCkge1xuXHR2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG5cdFx0ZGl2ID0gZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSApLFxuXHRcdGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICk7XG5cblx0Ly8gU3VwcG9ydDogU2FmYXJpPD01LjFcblx0Ly8gQ2hlY2sgc3RhdGUgbG9zdCBpZiB0aGUgbmFtZSBpcyBzZXQgKCMxMTIxNylcblx0Ly8gU3VwcG9ydDogV2luZG93cyBXZWIgQXBwcyAoV1dBKVxuXHQvLyBgbmFtZWAgYW5kIGB0eXBlYCBtdXN0IHVzZSAuc2V0QXR0cmlidXRlIGZvciBXV0EgKCMxNDkwMSlcblx0aW5wdXQuc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgXCJyYWRpb1wiICk7XG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJjaGVja2VkXCIsIFwiY2hlY2tlZFwiICk7XG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJuYW1lXCIsIFwidFwiICk7XG5cblx0ZGl2LmFwcGVuZENoaWxkKCBpbnB1dCApO1xuXG5cdC8vIFN1cHBvcnQ6IFNhZmFyaTw9NS4xLCBBbmRyb2lkPDQuMlxuXHQvLyBPbGRlciBXZWJLaXQgZG9lc24ndCBjbG9uZSBjaGVja2VkIHN0YXRlIGNvcnJlY3RseSBpbiBmcmFnbWVudHNcblx0c3VwcG9ydC5jaGVja0Nsb25lID0gZGl2LmNsb25lTm9kZSggdHJ1ZSApLmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5jaGVja2VkO1xuXG5cdC8vIFN1cHBvcnQ6IElFPD0xMStcblx0Ly8gTWFrZSBzdXJlIHRleHRhcmVhIChhbmQgY2hlY2tib3gpIGRlZmF1bHRWYWx1ZSBpcyBwcm9wZXJseSBjbG9uZWRcblx0ZGl2LmlubmVySFRNTCA9IFwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiO1xuXHRzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkID0gISFkaXYuY2xvbmVOb2RlKCB0cnVlICkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZTtcbn0pKCk7XG52YXIgc3RydW5kZWZpbmVkID0gdHlwZW9mIHVuZGVmaW5lZDtcblxuXG5cbnN1cHBvcnQuZm9jdXNpbkJ1YmJsZXMgPSBcIm9uZm9jdXNpblwiIGluIHdpbmRvdztcblxuXG52YXJcblx0cmtleUV2ZW50ID0gL15rZXkvLFxuXHRybW91c2VFdmVudCA9IC9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudSl8Y2xpY2svLFxuXHRyZm9jdXNNb3JwaCA9IC9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxcblx0cnR5cGVuYW1lc3BhY2UgPSAvXihbXi5dKikoPzpcXC4oLispfCkkLztcblxuZnVuY3Rpb24gcmV0dXJuVHJ1ZSgpIHtcblx0cmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHJldHVybkZhbHNlKCkge1xuXHRyZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHNhZmVBY3RpdmVFbGVtZW50KCkge1xuXHR0cnkge1xuXHRcdHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXHR9IGNhdGNoICggZXJyICkgeyB9XG59XG5cbi8qXG4gKiBIZWxwZXIgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyBldmVudHMgLS0gbm90IHBhcnQgb2YgdGhlIHB1YmxpYyBpbnRlcmZhY2UuXG4gKiBQcm9wcyB0byBEZWFuIEVkd2FyZHMnIGFkZEV2ZW50IGxpYnJhcnkgZm9yIG1hbnkgb2YgdGhlIGlkZWFzLlxuICovXG5qUXVlcnkuZXZlbnQgPSB7XG5cblx0Z2xvYmFsOiB7fSxcblxuXHRhZGQ6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgZGF0YSwgc2VsZWN0b3IgKSB7XG5cblx0XHR2YXIgaGFuZGxlT2JqSW4sIGV2ZW50SGFuZGxlLCB0bXAsXG5cdFx0XHRldmVudHMsIHQsIGhhbmRsZU9iaixcblx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdGVsZW1EYXRhID0gZGF0YV9wcml2LmdldCggZWxlbSApO1xuXG5cdFx0Ly8gRG9uJ3QgYXR0YWNoIGV2ZW50cyB0byBub0RhdGEgb3IgdGV4dC9jb21tZW50IG5vZGVzIChidXQgYWxsb3cgcGxhaW4gb2JqZWN0cylcblx0XHRpZiAoICFlbGVtRGF0YSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYW4gb2JqZWN0IG9mIGN1c3RvbSBkYXRhIGluIGxpZXUgb2YgdGhlIGhhbmRsZXJcblx0XHRpZiAoIGhhbmRsZXIuaGFuZGxlciApIHtcblx0XHRcdGhhbmRsZU9iakluID0gaGFuZGxlcjtcblx0XHRcdGhhbmRsZXIgPSBoYW5kbGVPYmpJbi5oYW5kbGVyO1xuXHRcdFx0c2VsZWN0b3IgPSBoYW5kbGVPYmpJbi5zZWxlY3Rvcjtcblx0XHR9XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB0aGUgaGFuZGxlciBoYXMgYSB1bmlxdWUgSUQsIHVzZWQgdG8gZmluZC9yZW1vdmUgaXQgbGF0ZXJcblx0XHRpZiAoICFoYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRoYW5kbGVyLmd1aWQgPSBqUXVlcnkuZ3VpZCsrO1xuXHRcdH1cblxuXHRcdC8vIEluaXQgdGhlIGVsZW1lbnQncyBldmVudCBzdHJ1Y3R1cmUgYW5kIG1haW4gaGFuZGxlciwgaWYgdGhpcyBpcyB0aGUgZmlyc3Rcblx0XHRpZiAoICEoZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzKSApIHtcblx0XHRcdGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyA9IHt9O1xuXHRcdH1cblx0XHRpZiAoICEoZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUpICkge1xuXHRcdFx0ZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgPSBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0Ly8gRGlzY2FyZCB0aGUgc2Vjb25kIGV2ZW50IG9mIGEgalF1ZXJ5LmV2ZW50LnRyaWdnZXIoKSBhbmRcblx0XHRcdFx0Ly8gd2hlbiBhbiBldmVudCBpcyBjYWxsZWQgYWZ0ZXIgYSBwYWdlIGhhcyB1bmxvYWRlZFxuXHRcdFx0XHRyZXR1cm4gdHlwZW9mIGpRdWVyeSAhPT0gc3RydW5kZWZpbmVkICYmIGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgIT09IGUudHlwZSA/XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmFwcGx5KCBlbGVtLCBhcmd1bWVudHMgKSA6IHVuZGVmaW5lZDtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIG11bHRpcGxlIGV2ZW50cyBzZXBhcmF0ZWQgYnkgYSBzcGFjZVxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXHRcdHQgPSB0eXBlcy5sZW5ndGg7XG5cdFx0d2hpbGUgKCB0LS0gKSB7XG5cdFx0XHR0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1t0XSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWzFdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWzJdIHx8IFwiXCIgKS5zcGxpdCggXCIuXCIgKS5zb3J0KCk7XG5cblx0XHRcdC8vIFRoZXJlICptdXN0KiBiZSBhIHR5cGUsIG5vIGF0dGFjaGluZyBuYW1lc3BhY2Utb25seSBoYW5kbGVyc1xuXHRcdFx0aWYgKCAhdHlwZSApIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGV2ZW50IGNoYW5nZXMgaXRzIHR5cGUsIHVzZSB0aGUgc3BlY2lhbCBldmVudCBoYW5kbGVycyBmb3IgdGhlIGNoYW5nZWQgdHlwZVxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cblx0XHRcdC8vIElmIHNlbGVjdG9yIGRlZmluZWQsIGRldGVybWluZSBzcGVjaWFsIGV2ZW50IGFwaSB0eXBlLCBvdGhlcndpc2UgZ2l2ZW4gdHlwZVxuXHRcdFx0dHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlO1xuXG5cdFx0XHQvLyBVcGRhdGUgc3BlY2lhbCBiYXNlZCBvbiBuZXdseSByZXNldCB0eXBlXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblxuXHRcdFx0Ly8gaGFuZGxlT2JqIGlzIHBhc3NlZCB0byBhbGwgZXZlbnQgaGFuZGxlcnNcblx0XHRcdGhhbmRsZU9iaiA9IGpRdWVyeS5leHRlbmQoe1xuXHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRvcmlnVHlwZTogb3JpZ1R5cGUsXG5cdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdGhhbmRsZXI6IGhhbmRsZXIsXG5cdFx0XHRcdGd1aWQ6IGhhbmRsZXIuZ3VpZCxcblx0XHRcdFx0c2VsZWN0b3I6IHNlbGVjdG9yLFxuXHRcdFx0XHRuZWVkc0NvbnRleHQ6IHNlbGVjdG9yICYmIGpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApLFxuXHRcdFx0XHRuYW1lc3BhY2U6IG5hbWVzcGFjZXMuam9pbihcIi5cIilcblx0XHRcdH0sIGhhbmRsZU9iakluICk7XG5cblx0XHRcdC8vIEluaXQgdGhlIGV2ZW50IGhhbmRsZXIgcXVldWUgaWYgd2UncmUgdGhlIGZpcnN0XG5cdFx0XHRpZiAoICEoaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSkgKSB7XG5cdFx0XHRcdGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gPSBbXTtcblx0XHRcdFx0aGFuZGxlcnMuZGVsZWdhdGVDb3VudCA9IDA7XG5cblx0XHRcdFx0Ly8gT25seSB1c2UgYWRkRXZlbnRMaXN0ZW5lciBpZiB0aGUgc3BlY2lhbCBldmVudHMgaGFuZGxlciByZXR1cm5zIGZhbHNlXG5cdFx0XHRcdGlmICggIXNwZWNpYWwuc2V0dXAgfHwgc3BlY2lhbC5zZXR1cC5jYWxsKCBlbGVtLCBkYXRhLCBuYW1lc3BhY2VzLCBldmVudEhhbmRsZSApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRpZiAoIGVsZW0uYWRkRXZlbnRMaXN0ZW5lciApIHtcblx0XHRcdFx0XHRcdGVsZW0uYWRkRXZlbnRMaXN0ZW5lciggdHlwZSwgZXZlbnRIYW5kbGUsIGZhbHNlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggc3BlY2lhbC5hZGQgKSB7XG5cdFx0XHRcdHNwZWNpYWwuYWRkLmNhbGwoIGVsZW0sIGhhbmRsZU9iaiApO1xuXG5cdFx0XHRcdGlmICggIWhhbmRsZU9iai5oYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCA9IGhhbmRsZXIuZ3VpZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgdG8gdGhlIGVsZW1lbnQncyBoYW5kbGVyIGxpc3QsIGRlbGVnYXRlcyBpbiBmcm9udFxuXHRcdFx0aWYgKCBzZWxlY3RvciApIHtcblx0XHRcdFx0aGFuZGxlcnMuc3BsaWNlKCBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50KyssIDAsIGhhbmRsZU9iaiApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGFuZGxlcnMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEtlZXAgdHJhY2sgb2Ygd2hpY2ggZXZlbnRzIGhhdmUgZXZlciBiZWVuIHVzZWQsIGZvciBldmVudCBvcHRpbWl6YXRpb25cblx0XHRcdGpRdWVyeS5ldmVudC5nbG9iYWxbIHR5cGUgXSA9IHRydWU7XG5cdFx0fVxuXG5cdH0sXG5cblx0Ly8gRGV0YWNoIGFuIGV2ZW50IG9yIHNldCBvZiBldmVudHMgZnJvbSBhbiBlbGVtZW50XG5cdHJlbW92ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBzZWxlY3RvciwgbWFwcGVkVHlwZXMgKSB7XG5cblx0XHR2YXIgaiwgb3JpZ0NvdW50LCB0bXAsXG5cdFx0XHRldmVudHMsIHQsIGhhbmRsZU9iaixcblx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdGVsZW1EYXRhID0gZGF0YV9wcml2Lmhhc0RhdGEoIGVsZW0gKSAmJiBkYXRhX3ByaXYuZ2V0KCBlbGVtICk7XG5cblx0XHRpZiAoICFlbGVtRGF0YSB8fCAhKGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cykgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gT25jZSBmb3IgZWFjaCB0eXBlLm5hbWVzcGFjZSBpbiB0eXBlczsgdHlwZSBtYXkgYmUgb21pdHRlZFxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXHRcdHQgPSB0eXBlcy5sZW5ndGg7XG5cdFx0d2hpbGUgKCB0LS0gKSB7XG5cdFx0XHR0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1t0XSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWzFdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWzJdIHx8IFwiXCIgKS5zcGxpdCggXCIuXCIgKS5zb3J0KCk7XG5cblx0XHRcdC8vIFVuYmluZCBhbGwgZXZlbnRzIChvbiB0aGlzIG5hbWVzcGFjZSwgaWYgcHJvdmlkZWQpIGZvciB0aGUgZWxlbWVudFxuXHRcdFx0aWYgKCAhdHlwZSApIHtcblx0XHRcdFx0Zm9yICggdHlwZSBpbiBldmVudHMgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSArIHR5cGVzWyB0IF0sIGhhbmRsZXIsIHNlbGVjdG9yLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXHRcdFx0dHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlO1xuXHRcdFx0aGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSB8fCBbXTtcblx0XHRcdHRtcCA9IHRtcFsyXSAmJiBuZXcgUmVnRXhwKCBcIihefFxcXFwuKVwiICsgbmFtZXNwYWNlcy5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikgKyBcIihcXFxcLnwkKVwiICk7XG5cblx0XHRcdC8vIFJlbW92ZSBtYXRjaGluZyBldmVudHNcblx0XHRcdG9yaWdDb3VudCA9IGogPSBoYW5kbGVycy5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0aGFuZGxlT2JqID0gaGFuZGxlcnNbIGogXTtcblxuXHRcdFx0XHRpZiAoICggbWFwcGVkVHlwZXMgfHwgb3JpZ1R5cGUgPT09IGhhbmRsZU9iai5vcmlnVHlwZSApICYmXG5cdFx0XHRcdFx0KCAhaGFuZGxlciB8fCBoYW5kbGVyLmd1aWQgPT09IGhhbmRsZU9iai5ndWlkICkgJiZcblx0XHRcdFx0XHQoICF0bXAgfHwgdG1wLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApICYmXG5cdFx0XHRcdFx0KCAhc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09IGhhbmRsZU9iai5zZWxlY3RvciB8fCBzZWxlY3RvciA9PT0gXCIqKlwiICYmIGhhbmRsZU9iai5zZWxlY3RvciApICkge1xuXHRcdFx0XHRcdGhhbmRsZXJzLnNwbGljZSggaiwgMSApO1xuXG5cdFx0XHRcdFx0aWYgKCBoYW5kbGVPYmouc2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LS07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggc3BlY2lhbC5yZW1vdmUgKSB7XG5cdFx0XHRcdFx0XHRzcGVjaWFsLnJlbW92ZS5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVtb3ZlIGdlbmVyaWMgZXZlbnQgaGFuZGxlciBpZiB3ZSByZW1vdmVkIHNvbWV0aGluZyBhbmQgbm8gbW9yZSBoYW5kbGVycyBleGlzdFxuXHRcdFx0Ly8gKGF2b2lkcyBwb3RlbnRpYWwgZm9yIGVuZGxlc3MgcmVjdXJzaW9uIGR1cmluZyByZW1vdmFsIG9mIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMpXG5cdFx0XHRpZiAoIG9yaWdDb3VudCAmJiAhaGFuZGxlcnMubGVuZ3RoICkge1xuXHRcdFx0XHRpZiAoICFzcGVjaWFsLnRlYXJkb3duIHx8IHNwZWNpYWwudGVhcmRvd24uY2FsbCggZWxlbSwgbmFtZXNwYWNlcywgZWxlbURhdGEuaGFuZGxlICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdGpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZWxlbURhdGEuaGFuZGxlICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkZWxldGUgZXZlbnRzWyB0eXBlIF07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUmVtb3ZlIHRoZSBleHBhbmRvIGlmIGl0J3Mgbm8gbG9uZ2VyIHVzZWRcblx0XHRpZiAoIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBldmVudHMgKSApIHtcblx0XHRcdGRlbGV0ZSBlbGVtRGF0YS5oYW5kbGU7XG5cdFx0XHRkYXRhX3ByaXYucmVtb3ZlKCBlbGVtLCBcImV2ZW50c1wiICk7XG5cdFx0fVxuXHR9LFxuXG5cdHRyaWdnZXI6IGZ1bmN0aW9uKCBldmVudCwgZGF0YSwgZWxlbSwgb25seUhhbmRsZXJzICkge1xuXG5cdFx0dmFyIGksIGN1ciwgdG1wLCBidWJibGVUeXBlLCBvbnR5cGUsIGhhbmRsZSwgc3BlY2lhbCxcblx0XHRcdGV2ZW50UGF0aCA9IFsgZWxlbSB8fCBkb2N1bWVudCBdLFxuXHRcdFx0dHlwZSA9IGhhc093bi5jYWxsKCBldmVudCwgXCJ0eXBlXCIgKSA/IGV2ZW50LnR5cGUgOiBldmVudCxcblx0XHRcdG5hbWVzcGFjZXMgPSBoYXNPd24uY2FsbCggZXZlbnQsIFwibmFtZXNwYWNlXCIgKSA/IGV2ZW50Lm5hbWVzcGFjZS5zcGxpdChcIi5cIikgOiBbXTtcblxuXHRcdGN1ciA9IHRtcCA9IGVsZW0gPSBlbGVtIHx8IGRvY3VtZW50O1xuXG5cdFx0Ly8gRG9uJ3QgZG8gZXZlbnRzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXNcblx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDMgfHwgZWxlbS5ub2RlVHlwZSA9PT0gOCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBmb2N1cy9ibHVyIG1vcnBocyB0byBmb2N1c2luL291dDsgZW5zdXJlIHdlJ3JlIG5vdCBmaXJpbmcgdGhlbSByaWdodCBub3dcblx0XHRpZiAoIHJmb2N1c01vcnBoLnRlc3QoIHR5cGUgKyBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCB0eXBlLmluZGV4T2YoXCIuXCIpID49IDAgKSB7XG5cdFx0XHQvLyBOYW1lc3BhY2VkIHRyaWdnZXI7IGNyZWF0ZSBhIHJlZ2V4cCB0byBtYXRjaCBldmVudCB0eXBlIGluIGhhbmRsZSgpXG5cdFx0XHRuYW1lc3BhY2VzID0gdHlwZS5zcGxpdChcIi5cIik7XG5cdFx0XHR0eXBlID0gbmFtZXNwYWNlcy5zaGlmdCgpO1xuXHRcdFx0bmFtZXNwYWNlcy5zb3J0KCk7XG5cdFx0fVxuXHRcdG9udHlwZSA9IHR5cGUuaW5kZXhPZihcIjpcIikgPCAwICYmIFwib25cIiArIHR5cGU7XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYSBqUXVlcnkuRXZlbnQgb2JqZWN0LCBPYmplY3QsIG9yIGp1c3QgYW4gZXZlbnQgdHlwZSBzdHJpbmdcblx0XHRldmVudCA9IGV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdID9cblx0XHRcdGV2ZW50IDpcblx0XHRcdG5ldyBqUXVlcnkuRXZlbnQoIHR5cGUsIHR5cGVvZiBldmVudCA9PT0gXCJvYmplY3RcIiAmJiBldmVudCApO1xuXG5cdFx0Ly8gVHJpZ2dlciBiaXRtYXNrOiAmIDEgZm9yIG5hdGl2ZSBoYW5kbGVyczsgJiAyIGZvciBqUXVlcnkgKGFsd2F5cyB0cnVlKVxuXHRcdGV2ZW50LmlzVHJpZ2dlciA9IG9ubHlIYW5kbGVycyA/IDIgOiAzO1xuXHRcdGV2ZW50Lm5hbWVzcGFjZSA9IG5hbWVzcGFjZXMuam9pbihcIi5cIik7XG5cdFx0ZXZlbnQubmFtZXNwYWNlX3JlID0gZXZlbnQubmFtZXNwYWNlID9cblx0XHRcdG5ldyBSZWdFeHAoIFwiKF58XFxcXC4pXCIgKyBuYW1lc3BhY2VzLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKSArIFwiKFxcXFwufCQpXCIgKSA6XG5cdFx0XHRudWxsO1xuXG5cdFx0Ly8gQ2xlYW4gdXAgdGhlIGV2ZW50IGluIGNhc2UgaXQgaXMgYmVpbmcgcmV1c2VkXG5cdFx0ZXZlbnQucmVzdWx0ID0gdW5kZWZpbmVkO1xuXHRcdGlmICggIWV2ZW50LnRhcmdldCApIHtcblx0XHRcdGV2ZW50LnRhcmdldCA9IGVsZW07XG5cdFx0fVxuXG5cdFx0Ly8gQ2xvbmUgYW55IGluY29taW5nIGRhdGEgYW5kIHByZXBlbmQgdGhlIGV2ZW50LCBjcmVhdGluZyB0aGUgaGFuZGxlciBhcmcgbGlzdFxuXHRcdGRhdGEgPSBkYXRhID09IG51bGwgP1xuXHRcdFx0WyBldmVudCBdIDpcblx0XHRcdGpRdWVyeS5tYWtlQXJyYXkoIGRhdGEsIFsgZXZlbnQgXSApO1xuXG5cdFx0Ly8gQWxsb3cgc3BlY2lhbCBldmVudHMgdG8gZHJhdyBvdXRzaWRlIHRoZSBsaW5lc1xuXHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiBzcGVjaWFsLnRyaWdnZXIgJiYgc3BlY2lhbC50cmlnZ2VyLmFwcGx5KCBlbGVtLCBkYXRhICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBldmVudCBwcm9wYWdhdGlvbiBwYXRoIGluIGFkdmFuY2UsIHBlciBXM0MgZXZlbnRzIHNwZWMgKCM5OTUxKVxuXHRcdC8vIEJ1YmJsZSB1cCB0byBkb2N1bWVudCwgdGhlbiB0byB3aW5kb3c7IHdhdGNoIGZvciBhIGdsb2JhbCBvd25lckRvY3VtZW50IHZhciAoIzk3MjQpXG5cdFx0aWYgKCAhb25seUhhbmRsZXJzICYmICFzcGVjaWFsLm5vQnViYmxlICYmICFqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0YnViYmxlVHlwZSA9IHNwZWNpYWwuZGVsZWdhdGVUeXBlIHx8IHR5cGU7XG5cdFx0XHRpZiAoICFyZm9jdXNNb3JwaC50ZXN0KCBidWJibGVUeXBlICsgdHlwZSApICkge1xuXHRcdFx0XHRjdXIgPSBjdXIucGFyZW50Tm9kZTtcblx0XHRcdH1cblx0XHRcdGZvciAoIDsgY3VyOyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0ZXZlbnRQYXRoLnB1c2goIGN1ciApO1xuXHRcdFx0XHR0bXAgPSBjdXI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE9ubHkgYWRkIHdpbmRvdyBpZiB3ZSBnb3QgdG8gZG9jdW1lbnQgKGUuZy4sIG5vdCBwbGFpbiBvYmogb3IgZGV0YWNoZWQgRE9NKVxuXHRcdFx0aWYgKCB0bXAgPT09IChlbGVtLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQpICkge1xuXHRcdFx0XHRldmVudFBhdGgucHVzaCggdG1wLmRlZmF1bHRWaWV3IHx8IHRtcC5wYXJlbnRXaW5kb3cgfHwgd2luZG93ICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmlyZSBoYW5kbGVycyBvbiB0aGUgZXZlbnQgcGF0aFxuXHRcdGkgPSAwO1xuXHRcdHdoaWxlICggKGN1ciA9IGV2ZW50UGF0aFtpKytdKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblxuXHRcdFx0ZXZlbnQudHlwZSA9IGkgPiAxID9cblx0XHRcdFx0YnViYmxlVHlwZSA6XG5cdFx0XHRcdHNwZWNpYWwuYmluZFR5cGUgfHwgdHlwZTtcblxuXHRcdFx0Ly8galF1ZXJ5IGhhbmRsZXJcblx0XHRcdGhhbmRsZSA9ICggZGF0YV9wcml2LmdldCggY3VyLCBcImV2ZW50c1wiICkgfHwge30gKVsgZXZlbnQudHlwZSBdICYmIGRhdGFfcHJpdi5nZXQoIGN1ciwgXCJoYW5kbGVcIiApO1xuXHRcdFx0aWYgKCBoYW5kbGUgKSB7XG5cdFx0XHRcdGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE5hdGl2ZSBoYW5kbGVyXG5cdFx0XHRoYW5kbGUgPSBvbnR5cGUgJiYgY3VyWyBvbnR5cGUgXTtcblx0XHRcdGlmICggaGFuZGxlICYmIGhhbmRsZS5hcHBseSAmJiBqUXVlcnkuYWNjZXB0RGF0YSggY3VyICkgKSB7XG5cdFx0XHRcdGV2ZW50LnJlc3VsdCA9IGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7XG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGV2ZW50LnR5cGUgPSB0eXBlO1xuXG5cdFx0Ly8gSWYgbm9ib2R5IHByZXZlbnRlZCB0aGUgZGVmYXVsdCBhY3Rpb24sIGRvIGl0IG5vd1xuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiAhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XG5cblx0XHRcdGlmICggKCFzcGVjaWFsLl9kZWZhdWx0IHx8IHNwZWNpYWwuX2RlZmF1bHQuYXBwbHkoIGV2ZW50UGF0aC5wb3AoKSwgZGF0YSApID09PSBmYWxzZSkgJiZcblx0XHRcdFx0alF1ZXJ5LmFjY2VwdERhdGEoIGVsZW0gKSApIHtcblxuXHRcdFx0XHQvLyBDYWxsIGEgbmF0aXZlIERPTSBtZXRob2Qgb24gdGhlIHRhcmdldCB3aXRoIHRoZSBzYW1lIG5hbWUgbmFtZSBhcyB0aGUgZXZlbnQuXG5cdFx0XHRcdC8vIERvbid0IGRvIGRlZmF1bHQgYWN0aW9ucyBvbiB3aW5kb3csIHRoYXQncyB3aGVyZSBnbG9iYWwgdmFyaWFibGVzIGJlICgjNjE3MClcblx0XHRcdFx0aWYgKCBvbnR5cGUgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIGVsZW1bIHR5cGUgXSApICYmICFqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0XHRcdC8vIERvbid0IHJlLXRyaWdnZXIgYW4gb25GT08gZXZlbnQgd2hlbiB3ZSBjYWxsIGl0cyBGT08oKSBtZXRob2Rcblx0XHRcdFx0XHR0bXAgPSBlbGVtWyBvbnR5cGUgXTtcblxuXHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0ZWxlbVsgb250eXBlIF0gPSBudWxsO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFByZXZlbnQgcmUtdHJpZ2dlcmluZyBvZiB0aGUgc2FtZSBldmVudCwgc2luY2Ugd2UgYWxyZWFkeSBidWJibGVkIGl0IGFib3ZlXG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHR5cGU7XG5cdFx0XHRcdFx0ZWxlbVsgdHlwZSBdKCk7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHVuZGVmaW5lZDtcblxuXHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0ZWxlbVsgb250eXBlIF0gPSB0bXA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50LnJlc3VsdDtcblx0fSxcblxuXHRkaXNwYXRjaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXG5cdFx0Ly8gTWFrZSBhIHdyaXRhYmxlIGpRdWVyeS5FdmVudCBmcm9tIHRoZSBuYXRpdmUgZXZlbnQgb2JqZWN0XG5cdFx0ZXZlbnQgPSBqUXVlcnkuZXZlbnQuZml4KCBldmVudCApO1xuXG5cdFx0dmFyIGksIGosIHJldCwgbWF0Y2hlZCwgaGFuZGxlT2JqLFxuXHRcdFx0aGFuZGxlclF1ZXVlID0gW10sXG5cdFx0XHRhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzICksXG5cdFx0XHRoYW5kbGVycyA9ICggZGF0YV9wcml2LmdldCggdGhpcywgXCJldmVudHNcIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSB8fCBbXSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZXZlbnQudHlwZSBdIHx8IHt9O1xuXG5cdFx0Ly8gVXNlIHRoZSBmaXgtZWQgalF1ZXJ5LkV2ZW50IHJhdGhlciB0aGFuIHRoZSAocmVhZC1vbmx5KSBuYXRpdmUgZXZlbnRcblx0XHRhcmdzWzBdID0gZXZlbnQ7XG5cdFx0ZXZlbnQuZGVsZWdhdGVUYXJnZXQgPSB0aGlzO1xuXG5cdFx0Ly8gQ2FsbCB0aGUgcHJlRGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlLCBhbmQgbGV0IGl0IGJhaWwgaWYgZGVzaXJlZFxuXHRcdGlmICggc3BlY2lhbC5wcmVEaXNwYXRjaCAmJiBzcGVjaWFsLnByZURpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBoYW5kbGVyc1xuXHRcdGhhbmRsZXJRdWV1ZSA9IGpRdWVyeS5ldmVudC5oYW5kbGVycy5jYWxsKCB0aGlzLCBldmVudCwgaGFuZGxlcnMgKTtcblxuXHRcdC8vIFJ1biBkZWxlZ2F0ZXMgZmlyc3Q7IHRoZXkgbWF5IHdhbnQgdG8gc3RvcCBwcm9wYWdhdGlvbiBiZW5lYXRoIHVzXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAobWF0Y2hlZCA9IGhhbmRsZXJRdWV1ZVsgaSsrIF0pICYmICFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcdFx0ZXZlbnQuY3VycmVudFRhcmdldCA9IG1hdGNoZWQuZWxlbTtcblxuXHRcdFx0aiA9IDA7XG5cdFx0XHR3aGlsZSAoIChoYW5kbGVPYmogPSBtYXRjaGVkLmhhbmRsZXJzWyBqKysgXSkgJiYgIWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cblx0XHRcdFx0Ly8gVHJpZ2dlcmVkIGV2ZW50IG11c3QgZWl0aGVyIDEpIGhhdmUgbm8gbmFtZXNwYWNlLCBvciAyKSBoYXZlIG5hbWVzcGFjZShzKVxuXHRcdFx0XHQvLyBhIHN1YnNldCBvciBlcXVhbCB0byB0aG9zZSBpbiB0aGUgYm91bmQgZXZlbnQgKGJvdGggY2FuIGhhdmUgbm8gbmFtZXNwYWNlKS5cblx0XHRcdFx0aWYgKCAhZXZlbnQubmFtZXNwYWNlX3JlIHx8IGV2ZW50Lm5hbWVzcGFjZV9yZS50ZXN0KCBoYW5kbGVPYmoubmFtZXNwYWNlICkgKSB7XG5cblx0XHRcdFx0XHRldmVudC5oYW5kbGVPYmogPSBoYW5kbGVPYmo7XG5cdFx0XHRcdFx0ZXZlbnQuZGF0YSA9IGhhbmRsZU9iai5kYXRhO1xuXG5cdFx0XHRcdFx0cmV0ID0gKCAoalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGhhbmRsZU9iai5vcmlnVHlwZSBdIHx8IHt9KS5oYW5kbGUgfHwgaGFuZGxlT2JqLmhhbmRsZXIgKVxuXHRcdFx0XHRcdFx0XHQuYXBwbHkoIG1hdGNoZWQuZWxlbSwgYXJncyApO1xuXG5cdFx0XHRcdFx0aWYgKCByZXQgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRcdGlmICggKGV2ZW50LnJlc3VsdCA9IHJldCkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWxsIHRoZSBwb3N0RGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlXG5cdFx0aWYgKCBzcGVjaWFsLnBvc3REaXNwYXRjaCApIHtcblx0XHRcdHNwZWNpYWwucG9zdERpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50LnJlc3VsdDtcblx0fSxcblxuXHRoYW5kbGVyczogZnVuY3Rpb24oIGV2ZW50LCBoYW5kbGVycyApIHtcblx0XHR2YXIgaSwgbWF0Y2hlcywgc2VsLCBoYW5kbGVPYmosXG5cdFx0XHRoYW5kbGVyUXVldWUgPSBbXSxcblx0XHRcdGRlbGVnYXRlQ291bnQgPSBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LFxuXHRcdFx0Y3VyID0gZXZlbnQudGFyZ2V0O1xuXG5cdFx0Ly8gRmluZCBkZWxlZ2F0ZSBoYW5kbGVyc1xuXHRcdC8vIEJsYWNrLWhvbGUgU1ZHIDx1c2U+IGluc3RhbmNlIHRyZWVzICgjMTMxODApXG5cdFx0Ly8gQXZvaWQgbm9uLWxlZnQtY2xpY2sgYnViYmxpbmcgaW4gRmlyZWZveCAoIzM4NjEpXG5cdFx0aWYgKCBkZWxlZ2F0ZUNvdW50ICYmIGN1ci5ub2RlVHlwZSAmJiAoIWV2ZW50LmJ1dHRvbiB8fCBldmVudC50eXBlICE9PSBcImNsaWNrXCIpICkge1xuXG5cdFx0XHRmb3IgKCA7IGN1ciAhPT0gdGhpczsgY3VyID0gY3VyLnBhcmVudE5vZGUgfHwgdGhpcyApIHtcblxuXHRcdFx0XHQvLyBEb24ndCBwcm9jZXNzIGNsaWNrcyBvbiBkaXNhYmxlZCBlbGVtZW50cyAoIzY5MTEsICM4MTY1LCAjMTEzODIsICMxMTc2NClcblx0XHRcdFx0aWYgKCBjdXIuZGlzYWJsZWQgIT09IHRydWUgfHwgZXZlbnQudHlwZSAhPT0gXCJjbGlja1wiICkge1xuXHRcdFx0XHRcdG1hdGNoZXMgPSBbXTtcblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGRlbGVnYXRlQ291bnQ7IGkrKyApIHtcblx0XHRcdFx0XHRcdGhhbmRsZU9iaiA9IGhhbmRsZXJzWyBpIF07XG5cblx0XHRcdFx0XHRcdC8vIERvbid0IGNvbmZsaWN0IHdpdGggT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzICgjMTMyMDMpXG5cdFx0XHRcdFx0XHRzZWwgPSBoYW5kbGVPYmouc2VsZWN0b3IgKyBcIiBcIjtcblxuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVzWyBzZWwgXSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVzWyBzZWwgXSA9IGhhbmRsZU9iai5uZWVkc0NvbnRleHQgP1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeSggc2VsLCB0aGlzICkuaW5kZXgoIGN1ciApID49IDAgOlxuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5maW5kKCBzZWwsIHRoaXMsIG51bGwsIFsgY3VyIF0gKS5sZW5ndGg7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXNbIHNlbCBdICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVzLnB1c2goIGhhbmRsZU9iaiApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIG1hdGNoZXMubGVuZ3RoICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlclF1ZXVlLnB1c2goeyBlbGVtOiBjdXIsIGhhbmRsZXJzOiBtYXRjaGVzIH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFkZCB0aGUgcmVtYWluaW5nIChkaXJlY3RseS1ib3VuZCkgaGFuZGxlcnNcblx0XHRpZiAoIGRlbGVnYXRlQ291bnQgPCBoYW5kbGVycy5sZW5ndGggKSB7XG5cdFx0XHRoYW5kbGVyUXVldWUucHVzaCh7IGVsZW06IHRoaXMsIGhhbmRsZXJzOiBoYW5kbGVycy5zbGljZSggZGVsZWdhdGVDb3VudCApIH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBoYW5kbGVyUXVldWU7XG5cdH0sXG5cblx0Ly8gSW5jbHVkZXMgc29tZSBldmVudCBwcm9wcyBzaGFyZWQgYnkgS2V5RXZlbnQgYW5kIE1vdXNlRXZlbnRcblx0cHJvcHM6IFwiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoXCIuc3BsaXQoXCIgXCIpLFxuXG5cdGZpeEhvb2tzOiB7fSxcblxuXHRrZXlIb29rczoge1xuXHRcdHByb3BzOiBcImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGVcIi5zcGxpdChcIiBcIiksXG5cdFx0ZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkge1xuXG5cdFx0XHQvLyBBZGQgd2hpY2ggZm9yIGtleSBldmVudHNcblx0XHRcdGlmICggZXZlbnQud2hpY2ggPT0gbnVsbCApIHtcblx0XHRcdFx0ZXZlbnQud2hpY2ggPSBvcmlnaW5hbC5jaGFyQ29kZSAhPSBudWxsID8gb3JpZ2luYWwuY2hhckNvZGUgOiBvcmlnaW5hbC5rZXlDb2RlO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZXZlbnQ7XG5cdFx0fVxuXHR9LFxuXG5cdG1vdXNlSG9va3M6IHtcblx0XHRwcm9wczogXCJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnRcIi5zcGxpdChcIiBcIiksXG5cdFx0ZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkge1xuXHRcdFx0dmFyIGV2ZW50RG9jLCBkb2MsIGJvZHksXG5cdFx0XHRcdGJ1dHRvbiA9IG9yaWdpbmFsLmJ1dHRvbjtcblxuXHRcdFx0Ly8gQ2FsY3VsYXRlIHBhZ2VYL1kgaWYgbWlzc2luZyBhbmQgY2xpZW50WC9ZIGF2YWlsYWJsZVxuXHRcdFx0aWYgKCBldmVudC5wYWdlWCA9PSBudWxsICYmIG9yaWdpbmFsLmNsaWVudFggIT0gbnVsbCApIHtcblx0XHRcdFx0ZXZlbnREb2MgPSBldmVudC50YXJnZXQub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudDtcblx0XHRcdFx0ZG9jID0gZXZlbnREb2MuZG9jdW1lbnRFbGVtZW50O1xuXHRcdFx0XHRib2R5ID0gZXZlbnREb2MuYm9keTtcblxuXHRcdFx0XHRldmVudC5wYWdlWCA9IG9yaWdpbmFsLmNsaWVudFggKyAoIGRvYyAmJiBkb2Muc2Nyb2xsTGVmdCB8fCBib2R5ICYmIGJvZHkuc2Nyb2xsTGVmdCB8fCAwICkgLSAoIGRvYyAmJiBkb2MuY2xpZW50TGVmdCB8fCBib2R5ICYmIGJvZHkuY2xpZW50TGVmdCB8fCAwICk7XG5cdFx0XHRcdGV2ZW50LnBhZ2VZID0gb3JpZ2luYWwuY2xpZW50WSArICggZG9jICYmIGRvYy5zY3JvbGxUb3AgIHx8IGJvZHkgJiYgYm9keS5zY3JvbGxUb3AgIHx8IDAgKSAtICggZG9jICYmIGRvYy5jbGllbnRUb3AgIHx8IGJvZHkgJiYgYm9keS5jbGllbnRUb3AgIHx8IDAgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIHdoaWNoIGZvciBjbGljazogMSA9PT0gbGVmdDsgMiA9PT0gbWlkZGxlOyAzID09PSByaWdodFxuXHRcdFx0Ly8gTm90ZTogYnV0dG9uIGlzIG5vdCBub3JtYWxpemVkLCBzbyBkb24ndCB1c2UgaXRcblx0XHRcdGlmICggIWV2ZW50LndoaWNoICYmIGJ1dHRvbiAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRldmVudC53aGljaCA9ICggYnV0dG9uICYgMSA/IDEgOiAoIGJ1dHRvbiAmIDIgPyAzIDogKCBidXR0b24gJiA0ID8gMiA6IDAgKSApICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBldmVudDtcblx0XHR9XG5cdH0sXG5cblx0Zml4OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0aWYgKCBldmVudFsgalF1ZXJ5LmV4cGFuZG8gXSApIHtcblx0XHRcdHJldHVybiBldmVudDtcblx0XHR9XG5cblx0XHQvLyBDcmVhdGUgYSB3cml0YWJsZSBjb3B5IG9mIHRoZSBldmVudCBvYmplY3QgYW5kIG5vcm1hbGl6ZSBzb21lIHByb3BlcnRpZXNcblx0XHR2YXIgaSwgcHJvcCwgY29weSxcblx0XHRcdHR5cGUgPSBldmVudC50eXBlLFxuXHRcdFx0b3JpZ2luYWxFdmVudCA9IGV2ZW50LFxuXHRcdFx0Zml4SG9vayA9IHRoaXMuZml4SG9va3NbIHR5cGUgXTtcblxuXHRcdGlmICggIWZpeEhvb2sgKSB7XG5cdFx0XHR0aGlzLmZpeEhvb2tzWyB0eXBlIF0gPSBmaXhIb29rID1cblx0XHRcdFx0cm1vdXNlRXZlbnQudGVzdCggdHlwZSApID8gdGhpcy5tb3VzZUhvb2tzIDpcblx0XHRcdFx0cmtleUV2ZW50LnRlc3QoIHR5cGUgKSA/IHRoaXMua2V5SG9va3MgOlxuXHRcdFx0XHR7fTtcblx0XHR9XG5cdFx0Y29weSA9IGZpeEhvb2sucHJvcHMgPyB0aGlzLnByb3BzLmNvbmNhdCggZml4SG9vay5wcm9wcyApIDogdGhpcy5wcm9wcztcblxuXHRcdGV2ZW50ID0gbmV3IGpRdWVyeS5FdmVudCggb3JpZ2luYWxFdmVudCApO1xuXG5cdFx0aSA9IGNvcHkubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0cHJvcCA9IGNvcHlbIGkgXTtcblx0XHRcdGV2ZW50WyBwcm9wIF0gPSBvcmlnaW5hbEV2ZW50WyBwcm9wIF07XG5cdFx0fVxuXG5cdFx0Ly8gU3VwcG9ydDogQ29yZG92YSAyLjUgKFdlYktpdCkgKCMxMzI1NSlcblx0XHQvLyBBbGwgZXZlbnRzIHNob3VsZCBoYXZlIGEgdGFyZ2V0OyBDb3Jkb3ZhIGRldmljZXJlYWR5IGRvZXNuJ3Rcblx0XHRpZiAoICFldmVudC50YXJnZXQgKSB7XG5cdFx0XHRldmVudC50YXJnZXQgPSBkb2N1bWVudDtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgNi4wKywgQ2hyb21lPDI4XG5cdFx0Ly8gVGFyZ2V0IHNob3VsZCBub3QgYmUgYSB0ZXh0IG5vZGUgKCM1MDQsICMxMzE0Mylcblx0XHRpZiAoIGV2ZW50LnRhcmdldC5ub2RlVHlwZSA9PT0gMyApIHtcblx0XHRcdGV2ZW50LnRhcmdldCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlO1xuXHRcdH1cblxuXHRcdHJldHVybiBmaXhIb29rLmZpbHRlciA/IGZpeEhvb2suZmlsdGVyKCBldmVudCwgb3JpZ2luYWxFdmVudCApIDogZXZlbnQ7XG5cdH0sXG5cblx0c3BlY2lhbDoge1xuXHRcdGxvYWQ6IHtcblx0XHRcdC8vIFByZXZlbnQgdHJpZ2dlcmVkIGltYWdlLmxvYWQgZXZlbnRzIGZyb20gYnViYmxpbmcgdG8gd2luZG93LmxvYWRcblx0XHRcdG5vQnViYmxlOiB0cnVlXG5cdFx0fSxcblx0XHRmb2N1czoge1xuXHRcdFx0Ly8gRmlyZSBuYXRpdmUgZXZlbnQgaWYgcG9zc2libGUgc28gYmx1ci9mb2N1cyBzZXF1ZW5jZSBpcyBjb3JyZWN0XG5cdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCB0aGlzICE9PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuZm9jdXMgKSB7XG5cdFx0XHRcdFx0dGhpcy5mb2N1cygpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c2luXCJcblx0XHR9LFxuXHRcdGJsdXI6IHtcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHRoaXMgPT09IHNhZmVBY3RpdmVFbGVtZW50KCkgJiYgdGhpcy5ibHVyICkge1xuXHRcdFx0XHRcdHRoaXMuYmx1cigpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c291dFwiXG5cdFx0fSxcblx0XHRjbGljazoge1xuXHRcdFx0Ly8gRm9yIGNoZWNrYm94LCBmaXJlIG5hdGl2ZSBldmVudCBzbyBjaGVja2VkIHN0YXRlIHdpbGwgYmUgcmlnaHRcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHRoaXMudHlwZSA9PT0gXCJjaGVja2JveFwiICYmIHRoaXMuY2xpY2sgJiYgalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCBcImlucHV0XCIgKSApIHtcblx0XHRcdFx0XHR0aGlzLmNsaWNrKCk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBGb3IgY3Jvc3MtYnJvd3NlciBjb25zaXN0ZW5jeSwgZG9uJ3QgZmlyZSBuYXRpdmUgLmNsaWNrKCkgb24gbGlua3Ncblx0XHRcdF9kZWZhdWx0OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdHJldHVybiBqUXVlcnkubm9kZU5hbWUoIGV2ZW50LnRhcmdldCwgXCJhXCIgKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0YmVmb3JldW5sb2FkOiB7XG5cdFx0XHRwb3N0RGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDIwK1xuXHRcdFx0XHQvLyBGaXJlZm94IGRvZXNuJ3QgYWxlcnQgaWYgdGhlIHJldHVyblZhbHVlIGZpZWxkIGlzIG5vdCBzZXQuXG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgZXZlbnQub3JpZ2luYWxFdmVudCApIHtcblx0XHRcdFx0XHRldmVudC5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlID0gZXZlbnQucmVzdWx0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdHNpbXVsYXRlOiBmdW5jdGlvbiggdHlwZSwgZWxlbSwgZXZlbnQsIGJ1YmJsZSApIHtcblx0XHQvLyBQaWdneWJhY2sgb24gYSBkb25vciBldmVudCB0byBzaW11bGF0ZSBhIGRpZmZlcmVudCBvbmUuXG5cdFx0Ly8gRmFrZSBvcmlnaW5hbEV2ZW50IHRvIGF2b2lkIGRvbm9yJ3Mgc3RvcFByb3BhZ2F0aW9uLCBidXQgaWYgdGhlXG5cdFx0Ly8gc2ltdWxhdGVkIGV2ZW50IHByZXZlbnRzIGRlZmF1bHQgdGhlbiB3ZSBkbyB0aGUgc2FtZSBvbiB0aGUgZG9ub3IuXG5cdFx0dmFyIGUgPSBqUXVlcnkuZXh0ZW5kKFxuXHRcdFx0bmV3IGpRdWVyeS5FdmVudCgpLFxuXHRcdFx0ZXZlbnQsXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdGlzU2ltdWxhdGVkOiB0cnVlLFxuXHRcdFx0XHRvcmlnaW5hbEV2ZW50OiB7fVxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0aWYgKCBidWJibGUgKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggZSwgbnVsbCwgZWxlbSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQuZGlzcGF0Y2guY2FsbCggZWxlbSwgZSApO1xuXHRcdH1cblx0XHRpZiAoIGUuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fVxufTtcblxualF1ZXJ5LnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGhhbmRsZSApIHtcblx0aWYgKCBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0ZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKCB0eXBlLCBoYW5kbGUsIGZhbHNlICk7XG5cdH1cbn07XG5cbmpRdWVyeS5FdmVudCA9IGZ1bmN0aW9uKCBzcmMsIHByb3BzICkge1xuXHQvLyBBbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgdGhlICduZXcnIGtleXdvcmRcblx0aWYgKCAhKHRoaXMgaW5zdGFuY2VvZiBqUXVlcnkuRXZlbnQpICkge1xuXHRcdHJldHVybiBuZXcgalF1ZXJ5LkV2ZW50KCBzcmMsIHByb3BzICk7XG5cdH1cblxuXHQvLyBFdmVudCBvYmplY3Rcblx0aWYgKCBzcmMgJiYgc3JjLnR5cGUgKSB7XG5cdFx0dGhpcy5vcmlnaW5hbEV2ZW50ID0gc3JjO1xuXHRcdHRoaXMudHlwZSA9IHNyYy50eXBlO1xuXG5cdFx0Ly8gRXZlbnRzIGJ1YmJsaW5nIHVwIHRoZSBkb2N1bWVudCBtYXkgaGF2ZSBiZWVuIG1hcmtlZCBhcyBwcmV2ZW50ZWRcblx0XHQvLyBieSBhIGhhbmRsZXIgbG93ZXIgZG93biB0aGUgdHJlZTsgcmVmbGVjdCB0aGUgY29ycmVjdCB2YWx1ZS5cblx0XHR0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IHNyYy5kZWZhdWx0UHJldmVudGVkIHx8XG5cdFx0XHRcdHNyYy5kZWZhdWx0UHJldmVudGVkID09PSB1bmRlZmluZWQgJiZcblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjBcblx0XHRcdFx0c3JjLnJldHVyblZhbHVlID09PSBmYWxzZSA/XG5cdFx0XHRyZXR1cm5UcnVlIDpcblx0XHRcdHJldHVybkZhbHNlO1xuXG5cdC8vIEV2ZW50IHR5cGVcblx0fSBlbHNlIHtcblx0XHR0aGlzLnR5cGUgPSBzcmM7XG5cdH1cblxuXHQvLyBQdXQgZXhwbGljaXRseSBwcm92aWRlZCBwcm9wZXJ0aWVzIG9udG8gdGhlIGV2ZW50IG9iamVjdFxuXHRpZiAoIHByb3BzICkge1xuXHRcdGpRdWVyeS5leHRlbmQoIHRoaXMsIHByb3BzICk7XG5cdH1cblxuXHQvLyBDcmVhdGUgYSB0aW1lc3RhbXAgaWYgaW5jb21pbmcgZXZlbnQgZG9lc24ndCBoYXZlIG9uZVxuXHR0aGlzLnRpbWVTdGFtcCA9IHNyYyAmJiBzcmMudGltZVN0YW1wIHx8IGpRdWVyeS5ub3coKTtcblxuXHQvLyBNYXJrIGl0IGFzIGZpeGVkXG5cdHRoaXNbIGpRdWVyeS5leHBhbmRvIF0gPSB0cnVlO1xufTtcblxuLy8galF1ZXJ5LkV2ZW50IGlzIGJhc2VkIG9uIERPTTMgRXZlbnRzIGFzIHNwZWNpZmllZCBieSB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBCaW5kaW5nXG4vLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDAzMDMzMS9lY21hLXNjcmlwdC1iaW5kaW5nLmh0bWxcbmpRdWVyeS5FdmVudC5wcm90b3R5cGUgPSB7XG5cdGlzRGVmYXVsdFByZXZlbnRlZDogcmV0dXJuRmFsc2UsXG5cdGlzUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcblx0aXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6IHJldHVybkZhbHNlLFxuXG5cdHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiBlLnByZXZlbnREZWZhdWx0ICkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fSxcblx0c3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlO1xuXG5cdFx0aWYgKCBlICYmIGUuc3RvcFByb3BhZ2F0aW9uICkge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9XG5cdH0sXG5cdHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cblx0XHR0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiApIHtcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5zdG9wUHJvcGFnYXRpb24oKTtcblx0fVxufTtcblxuLy8gQ3JlYXRlIG1vdXNlZW50ZXIvbGVhdmUgZXZlbnRzIHVzaW5nIG1vdXNlb3Zlci9vdXQgYW5kIGV2ZW50LXRpbWUgY2hlY2tzXG4vLyBTdXBwb3J0OiBDaHJvbWUgMTUrXG5qUXVlcnkuZWFjaCh7XG5cdG1vdXNlZW50ZXI6IFwibW91c2VvdmVyXCIsXG5cdG1vdXNlbGVhdmU6IFwibW91c2VvdXRcIixcblx0cG9pbnRlcmVudGVyOiBcInBvaW50ZXJvdmVyXCIsXG5cdHBvaW50ZXJsZWF2ZTogXCJwb2ludGVyb3V0XCJcbn0sIGZ1bmN0aW9uKCBvcmlnLCBmaXggKSB7XG5cdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBvcmlnIF0gPSB7XG5cdFx0ZGVsZWdhdGVUeXBlOiBmaXgsXG5cdFx0YmluZFR5cGU6IGZpeCxcblxuXHRcdGhhbmRsZTogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0dmFyIHJldCxcblx0XHRcdFx0dGFyZ2V0ID0gdGhpcyxcblx0XHRcdFx0cmVsYXRlZCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQsXG5cdFx0XHRcdGhhbmRsZU9iaiA9IGV2ZW50LmhhbmRsZU9iajtcblxuXHRcdFx0Ly8gRm9yIG1vdXNlbnRlci9sZWF2ZSBjYWxsIHRoZSBoYW5kbGVyIGlmIHJlbGF0ZWQgaXMgb3V0c2lkZSB0aGUgdGFyZ2V0LlxuXHRcdFx0Ly8gTkI6IE5vIHJlbGF0ZWRUYXJnZXQgaWYgdGhlIG1vdXNlIGxlZnQvZW50ZXJlZCB0aGUgYnJvd3NlciB3aW5kb3dcblx0XHRcdGlmICggIXJlbGF0ZWQgfHwgKHJlbGF0ZWQgIT09IHRhcmdldCAmJiAhalF1ZXJ5LmNvbnRhaW5zKCB0YXJnZXQsIHJlbGF0ZWQgKSkgKSB7XG5cdFx0XHRcdGV2ZW50LnR5cGUgPSBoYW5kbGVPYmoub3JpZ1R5cGU7XG5cdFx0XHRcdHJldCA9IGhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0ZXZlbnQudHlwZSA9IGZpeDtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXHR9O1xufSk7XG5cbi8vIFN1cHBvcnQ6IEZpcmVmb3gsIENocm9tZSwgU2FmYXJpXG4vLyBDcmVhdGUgXCJidWJibGluZ1wiIGZvY3VzIGFuZCBibHVyIGV2ZW50c1xuaWYgKCAhc3VwcG9ydC5mb2N1c2luQnViYmxlcyApIHtcblx0alF1ZXJ5LmVhY2goeyBmb2N1czogXCJmb2N1c2luXCIsIGJsdXI6IFwiZm9jdXNvdXRcIiB9LCBmdW5jdGlvbiggb3JpZywgZml4ICkge1xuXG5cdFx0Ly8gQXR0YWNoIGEgc2luZ2xlIGNhcHR1cmluZyBoYW5kbGVyIG9uIHRoZSBkb2N1bWVudCB3aGlsZSBzb21lb25lIHdhbnRzIGZvY3VzaW4vZm9jdXNvdXRcblx0XHR2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0alF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCBmaXgsIGV2ZW50LnRhcmdldCwgalF1ZXJ5LmV2ZW50LmZpeCggZXZlbnQgKSwgdHJ1ZSApO1xuXHRcdFx0fTtcblxuXHRcdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBmaXggXSA9IHtcblx0XHRcdHNldHVwOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLFxuXHRcdFx0XHRcdGF0dGFjaGVzID0gZGF0YV9wcml2LmFjY2VzcyggZG9jLCBmaXggKTtcblxuXHRcdFx0XHRpZiAoICFhdHRhY2hlcyApIHtcblx0XHRcdFx0XHRkb2MuYWRkRXZlbnRMaXN0ZW5lciggb3JpZywgaGFuZGxlciwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRhdGFfcHJpdi5hY2Nlc3MoIGRvYywgZml4LCAoIGF0dGFjaGVzIHx8IDAgKSArIDEgKTtcblx0XHRcdH0sXG5cdFx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBkb2MgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcyxcblx0XHRcdFx0XHRhdHRhY2hlcyA9IGRhdGFfcHJpdi5hY2Nlc3MoIGRvYywgZml4ICkgLSAxO1xuXG5cdFx0XHRcdGlmICggIWF0dGFjaGVzICkge1xuXHRcdFx0XHRcdGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG5cdFx0XHRcdFx0ZGF0YV9wcml2LnJlbW92ZSggZG9jLCBmaXggKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRhdGFfcHJpdi5hY2Nlc3MoIGRvYywgZml4LCBhdHRhY2hlcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fSk7XG59XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXG5cdG9uOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgLypJTlRFUk5BTCovIG9uZSApIHtcblx0XHR2YXIgb3JpZ0ZuLCB0eXBlO1xuXG5cdFx0Ly8gVHlwZXMgY2FuIGJlIGEgbWFwIG9mIHR5cGVzL2hhbmRsZXJzXG5cdFx0aWYgKCB0eXBlb2YgdHlwZXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHQvLyAoIHR5cGVzLU9iamVjdCwgc2VsZWN0b3IsIGRhdGEgKVxuXHRcdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdC8vICggdHlwZXMtT2JqZWN0LCBkYXRhIClcblx0XHRcdFx0ZGF0YSA9IGRhdGEgfHwgc2VsZWN0b3I7XG5cdFx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXHRcdFx0Zm9yICggdHlwZSBpbiB0eXBlcyApIHtcblx0XHRcdFx0dGhpcy5vbiggdHlwZSwgc2VsZWN0b3IsIGRhdGEsIHR5cGVzWyB0eXBlIF0sIG9uZSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0aWYgKCBkYXRhID09IG51bGwgJiYgZm4gPT0gbnVsbCApIHtcblx0XHRcdC8vICggdHlwZXMsIGZuIClcblx0XHRcdGZuID0gc2VsZWN0b3I7XG5cdFx0XHRkYXRhID0gc2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fSBlbHNlIGlmICggZm4gPT0gbnVsbCApIHtcblx0XHRcdGlmICggdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHQvLyAoIHR5cGVzLCBzZWxlY3RvciwgZm4gKVxuXHRcdFx0XHRmbiA9IGRhdGE7XG5cdFx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyAoIHR5cGVzLCBkYXRhLCBmbiApXG5cdFx0XHRcdGZuID0gZGF0YTtcblx0XHRcdFx0ZGF0YSA9IHNlbGVjdG9yO1xuXHRcdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKCBmbiA9PT0gZmFsc2UgKSB7XG5cdFx0XHRmbiA9IHJldHVybkZhbHNlO1xuXHRcdH0gZWxzZSBpZiAoICFmbiApIHtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdGlmICggb25lID09PSAxICkge1xuXHRcdFx0b3JpZ0ZuID0gZm47XG5cdFx0XHRmbiA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0Ly8gQ2FuIHVzZSBhbiBlbXB0eSBzZXQsIHNpbmNlIGV2ZW50IGNvbnRhaW5zIHRoZSBpbmZvXG5cdFx0XHRcdGpRdWVyeSgpLm9mZiggZXZlbnQgKTtcblx0XHRcdFx0cmV0dXJuIG9yaWdGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHR9O1xuXHRcdFx0Ly8gVXNlIHNhbWUgZ3VpZCBzbyBjYWxsZXIgY2FuIHJlbW92ZSB1c2luZyBvcmlnRm5cblx0XHRcdGZuLmd1aWQgPSBvcmlnRm4uZ3VpZCB8fCAoIG9yaWdGbi5ndWlkID0galF1ZXJ5Lmd1aWQrKyApO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC5hZGQoIHRoaXMsIHR5cGVzLCBmbiwgZGF0YSwgc2VsZWN0b3IgKTtcblx0XHR9KTtcblx0fSxcblx0b25lOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgMSApO1xuXHR9LFxuXHRvZmY6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGZuICkge1xuXHRcdHZhciBoYW5kbGVPYmosIHR5cGU7XG5cdFx0aWYgKCB0eXBlcyAmJiB0eXBlcy5wcmV2ZW50RGVmYXVsdCAmJiB0eXBlcy5oYW5kbGVPYmogKSB7XG5cdFx0XHQvLyAoIGV2ZW50ICkgIGRpc3BhdGNoZWQgalF1ZXJ5LkV2ZW50XG5cdFx0XHRoYW5kbGVPYmogPSB0eXBlcy5oYW5kbGVPYmo7XG5cdFx0XHRqUXVlcnkoIHR5cGVzLmRlbGVnYXRlVGFyZ2V0ICkub2ZmKFxuXHRcdFx0XHRoYW5kbGVPYmoubmFtZXNwYWNlID8gaGFuZGxlT2JqLm9yaWdUeXBlICsgXCIuXCIgKyBoYW5kbGVPYmoubmFtZXNwYWNlIDogaGFuZGxlT2JqLm9yaWdUeXBlLFxuXHRcdFx0XHRoYW5kbGVPYmouc2VsZWN0b3IsXG5cdFx0XHRcdGhhbmRsZU9iai5oYW5kbGVyXG5cdFx0XHQpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggdHlwZW9mIHR5cGVzID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0Ly8gKCB0eXBlcy1vYmplY3QgWywgc2VsZWN0b3JdIClcblx0XHRcdGZvciAoIHR5cGUgaW4gdHlwZXMgKSB7XG5cdFx0XHRcdHRoaXMub2ZmKCB0eXBlLCBzZWxlY3RvciwgdHlwZXNbIHR5cGUgXSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggc2VsZWN0b3IgPT09IGZhbHNlIHx8IHR5cGVvZiBzZWxlY3RvciA9PT0gXCJmdW5jdGlvblwiICkge1xuXHRcdFx0Ly8gKCB0eXBlcyBbLCBmbl0gKVxuXHRcdFx0Zm4gPSBzZWxlY3Rvcjtcblx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAoIGZuID09PSBmYWxzZSApIHtcblx0XHRcdGZuID0gcmV0dXJuRmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCB0aGlzLCB0eXBlcywgZm4sIHNlbGVjdG9yICk7XG5cdFx0fSk7XG5cdH0sXG5cblx0dHJpZ2dlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCB0aGlzICk7XG5cdFx0fSk7XG5cdH0sXG5cdHRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgZWxlbSA9IHRoaXNbMF07XG5cdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCBlbGVtLCB0cnVlICk7XG5cdFx0fVxuXHR9XG59KTtcblxuXG52YXJcblx0cnhodG1sVGFnID0gLzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzpdKylbXj5dKilcXC8+L2dpLFxuXHRydGFnTmFtZSA9IC88KFtcXHc6XSspLyxcblx0cmh0bWwgPSAvPHwmIz9cXHcrOy8sXG5cdHJub0lubmVyaHRtbCA9IC88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksXG5cdC8vIGNoZWNrZWQ9XCJjaGVja2VkXCIgb3IgY2hlY2tlZFxuXHRyY2hlY2tlZCA9IC9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksXG5cdHJzY3JpcHRUeXBlID0gL14kfFxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSxcblx0cnNjcmlwdFR5cGVNYXNrZWQgPSAvXnRydWVcXC8oLiopLyxcblx0cmNsZWFuU2NyaXB0ID0gL15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nLFxuXG5cdC8vIFdlIGhhdmUgdG8gY2xvc2UgdGhlc2UgdGFncyB0byBzdXBwb3J0IFhIVE1MICgjMTMyMDApXG5cdHdyYXBNYXAgPSB7XG5cblx0XHQvLyBTdXBwb3J0OiBJRTlcblx0XHRvcHRpb246IFsgMSwgXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsIFwiPC9zZWxlY3Q+XCIgXSxcblxuXHRcdHRoZWFkOiBbIDEsIFwiPHRhYmxlPlwiLCBcIjwvdGFibGU+XCIgXSxcblx0XHRjb2w6IFsgMiwgXCI8dGFibGU+PGNvbGdyb3VwPlwiLCBcIjwvY29sZ3JvdXA+PC90YWJsZT5cIiBdLFxuXHRcdHRyOiBbIDIsIFwiPHRhYmxlPjx0Ym9keT5cIiwgXCI8L3Rib2R5PjwvdGFibGU+XCIgXSxcblx0XHR0ZDogWyAzLCBcIjx0YWJsZT48dGJvZHk+PHRyPlwiLCBcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiIF0sXG5cblx0XHRfZGVmYXVsdDogWyAwLCBcIlwiLCBcIlwiIF1cblx0fTtcblxuLy8gU3VwcG9ydDogSUU5XG53cmFwTWFwLm9wdGdyb3VwID0gd3JhcE1hcC5vcHRpb247XG5cbndyYXBNYXAudGJvZHkgPSB3cmFwTWFwLnRmb290ID0gd3JhcE1hcC5jb2xncm91cCA9IHdyYXBNYXAuY2FwdGlvbiA9IHdyYXBNYXAudGhlYWQ7XG53cmFwTWFwLnRoID0gd3JhcE1hcC50ZDtcblxuLy8gU3VwcG9ydDogMS54IGNvbXBhdGliaWxpdHlcbi8vIE1hbmlwdWxhdGluZyB0YWJsZXMgcmVxdWlyZXMgYSB0Ym9keVxuZnVuY3Rpb24gbWFuaXB1bGF0aW9uVGFyZ2V0KCBlbGVtLCBjb250ZW50ICkge1xuXHRyZXR1cm4galF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcInRhYmxlXCIgKSAmJlxuXHRcdGpRdWVyeS5ub2RlTmFtZSggY29udGVudC5ub2RlVHlwZSAhPT0gMTEgPyBjb250ZW50IDogY29udGVudC5maXJzdENoaWxkLCBcInRyXCIgKSA/XG5cblx0XHRlbGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGJvZHlcIilbMF0gfHxcblx0XHRcdGVsZW0uYXBwZW5kQ2hpbGQoIGVsZW0ub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGJvZHlcIikgKSA6XG5cdFx0ZWxlbTtcbn1cblxuLy8gUmVwbGFjZS9yZXN0b3JlIHRoZSB0eXBlIGF0dHJpYnV0ZSBvZiBzY3JpcHQgZWxlbWVudHMgZm9yIHNhZmUgRE9NIG1hbmlwdWxhdGlvblxuZnVuY3Rpb24gZGlzYWJsZVNjcmlwdCggZWxlbSApIHtcblx0ZWxlbS50eXBlID0gKGVsZW0uZ2V0QXR0cmlidXRlKFwidHlwZVwiKSAhPT0gbnVsbCkgKyBcIi9cIiArIGVsZW0udHlwZTtcblx0cmV0dXJuIGVsZW07XG59XG5mdW5jdGlvbiByZXN0b3JlU2NyaXB0KCBlbGVtICkge1xuXHR2YXIgbWF0Y2ggPSByc2NyaXB0VHlwZU1hc2tlZC5leGVjKCBlbGVtLnR5cGUgKTtcblxuXHRpZiAoIG1hdGNoICkge1xuXHRcdGVsZW0udHlwZSA9IG1hdGNoWyAxIF07XG5cdH0gZWxzZSB7XG5cdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoXCJ0eXBlXCIpO1xuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbi8vIE1hcmsgc2NyaXB0cyBhcyBoYXZpbmcgYWxyZWFkeSBiZWVuIGV2YWx1YXRlZFxuZnVuY3Rpb24gc2V0R2xvYmFsRXZhbCggZWxlbXMsIHJlZkVsZW1lbnRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bCA9IGVsZW1zLmxlbmd0aDtcblxuXHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0ZGF0YV9wcml2LnNldChcblx0XHRcdGVsZW1zWyBpIF0sIFwiZ2xvYmFsRXZhbFwiLCAhcmVmRWxlbWVudHMgfHwgZGF0YV9wcml2LmdldCggcmVmRWxlbWVudHNbIGkgXSwgXCJnbG9iYWxFdmFsXCIgKVxuXHRcdCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY2xvbmVDb3B5RXZlbnQoIHNyYywgZGVzdCApIHtcblx0dmFyIGksIGwsIHR5cGUsIHBkYXRhT2xkLCBwZGF0YUN1ciwgdWRhdGFPbGQsIHVkYXRhQ3VyLCBldmVudHM7XG5cblx0aWYgKCBkZXN0Lm5vZGVUeXBlICE9PSAxICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIDEuIENvcHkgcHJpdmF0ZSBkYXRhOiBldmVudHMsIGhhbmRsZXJzLCBldGMuXG5cdGlmICggZGF0YV9wcml2Lmhhc0RhdGEoIHNyYyApICkge1xuXHRcdHBkYXRhT2xkID0gZGF0YV9wcml2LmFjY2Vzcyggc3JjICk7XG5cdFx0cGRhdGFDdXIgPSBkYXRhX3ByaXYuc2V0KCBkZXN0LCBwZGF0YU9sZCApO1xuXHRcdGV2ZW50cyA9IHBkYXRhT2xkLmV2ZW50cztcblxuXHRcdGlmICggZXZlbnRzICkge1xuXHRcdFx0ZGVsZXRlIHBkYXRhQ3VyLmhhbmRsZTtcblx0XHRcdHBkYXRhQ3VyLmV2ZW50cyA9IHt9O1xuXG5cdFx0XHRmb3IgKCB0eXBlIGluIGV2ZW50cyApIHtcblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBldmVudHNbIHR5cGUgXS5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmFkZCggZGVzdCwgdHlwZSwgZXZlbnRzWyB0eXBlIF1bIGkgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gMi4gQ29weSB1c2VyIGRhdGFcblx0aWYgKCBkYXRhX3VzZXIuaGFzRGF0YSggc3JjICkgKSB7XG5cdFx0dWRhdGFPbGQgPSBkYXRhX3VzZXIuYWNjZXNzKCBzcmMgKTtcblx0XHR1ZGF0YUN1ciA9IGpRdWVyeS5leHRlbmQoIHt9LCB1ZGF0YU9sZCApO1xuXG5cdFx0ZGF0YV91c2VyLnNldCggZGVzdCwgdWRhdGFDdXIgKTtcblx0fVxufVxuXG5mdW5jdGlvbiBnZXRBbGwoIGNvbnRleHQsIHRhZyApIHtcblx0dmFyIHJldCA9IGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPyBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgfHwgXCIqXCIgKSA6XG5cdFx0XHRjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwgPyBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIHRhZyB8fCBcIipcIiApIDpcblx0XHRcdFtdO1xuXG5cdHJldHVybiB0YWcgPT09IHVuZGVmaW5lZCB8fCB0YWcgJiYgalF1ZXJ5Lm5vZGVOYW1lKCBjb250ZXh0LCB0YWcgKSA/XG5cdFx0alF1ZXJ5Lm1lcmdlKCBbIGNvbnRleHQgXSwgcmV0ICkgOlxuXHRcdHJldDtcbn1cblxuLy8gRml4IElFIGJ1Z3MsIHNlZSBzdXBwb3J0IHRlc3RzXG5mdW5jdGlvbiBmaXhJbnB1dCggc3JjLCBkZXN0ICkge1xuXHR2YXIgbm9kZU5hbWUgPSBkZXN0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0Ly8gRmFpbHMgdG8gcGVyc2lzdCB0aGUgY2hlY2tlZCBzdGF0ZSBvZiBhIGNsb25lZCBjaGVja2JveCBvciByYWRpbyBidXR0b24uXG5cdGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiByY2hlY2thYmxlVHlwZS50ZXN0KCBzcmMudHlwZSApICkge1xuXHRcdGRlc3QuY2hlY2tlZCA9IHNyYy5jaGVja2VkO1xuXG5cdC8vIEZhaWxzIHRvIHJldHVybiB0aGUgc2VsZWN0ZWQgb3B0aW9uIHRvIHRoZSBkZWZhdWx0IHNlbGVjdGVkIHN0YXRlIHdoZW4gY2xvbmluZyBvcHRpb25zXG5cdH0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSBcImlucHV0XCIgfHwgbm9kZU5hbWUgPT09IFwidGV4dGFyZWFcIiApIHtcblx0XHRkZXN0LmRlZmF1bHRWYWx1ZSA9IHNyYy5kZWZhdWx0VmFsdWU7XG5cdH1cbn1cblxualF1ZXJ5LmV4dGVuZCh7XG5cdGNsb25lOiBmdW5jdGlvbiggZWxlbSwgZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0dmFyIGksIGwsIHNyY0VsZW1lbnRzLCBkZXN0RWxlbWVudHMsXG5cdFx0XHRjbG9uZSA9IGVsZW0uY2xvbmVOb2RlKCB0cnVlICksXG5cdFx0XHRpblBhZ2UgPSBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXG5cdFx0Ly8gRml4IElFIGNsb25pbmcgaXNzdWVzXG5cdFx0aWYgKCAhc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCAmJiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgZWxlbS5ub2RlVHlwZSA9PT0gMTEgKSAmJlxuXHRcdFx0XHQhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7XG5cblx0XHRcdC8vIFdlIGVzY2hldyBTaXp6bGUgaGVyZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29uczogaHR0cDovL2pzcGVyZi5jb20vZ2V0YWxsLXZzLXNpenpsZS8yXG5cdFx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lICk7XG5cdFx0XHRzcmNFbGVtZW50cyA9IGdldEFsbCggZWxlbSApO1xuXG5cdFx0XHRmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0Zml4SW5wdXQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ29weSB0aGUgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIHRvIHRoZSBjbG9uZVxuXHRcdGlmICggZGF0YUFuZEV2ZW50cyApIHtcblx0XHRcdGlmICggZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRcdHNyY0VsZW1lbnRzID0gc3JjRWxlbWVudHMgfHwgZ2V0QWxsKCBlbGVtICk7XG5cdFx0XHRcdGRlc3RFbGVtZW50cyA9IGRlc3RFbGVtZW50cyB8fCBnZXRBbGwoIGNsb25lICk7XG5cblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBzcmNFbGVtZW50cy5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0Y2xvbmVDb3B5RXZlbnQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNsb25lQ29weUV2ZW50KCBlbGVtLCBjbG9uZSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3Rvcnlcblx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lLCBcInNjcmlwdFwiICk7XG5cdFx0aWYgKCBkZXN0RWxlbWVudHMubGVuZ3RoID4gMCApIHtcblx0XHRcdHNldEdsb2JhbEV2YWwoIGRlc3RFbGVtZW50cywgIWluUGFnZSAmJiBnZXRBbGwoIGVsZW0sIFwic2NyaXB0XCIgKSApO1xuXHRcdH1cblxuXHRcdC8vIFJldHVybiB0aGUgY2xvbmVkIHNldFxuXHRcdHJldHVybiBjbG9uZTtcblx0fSxcblxuXHRidWlsZEZyYWdtZW50OiBmdW5jdGlvbiggZWxlbXMsIGNvbnRleHQsIHNjcmlwdHMsIHNlbGVjdGlvbiApIHtcblx0XHR2YXIgZWxlbSwgdG1wLCB0YWcsIHdyYXAsIGNvbnRhaW5zLCBqLFxuXHRcdFx0ZnJhZ21lbnQgPSBjb250ZXh0LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcblx0XHRcdG5vZGVzID0gW10sXG5cdFx0XHRpID0gMCxcblx0XHRcdGwgPSBlbGVtcy5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRlbGVtID0gZWxlbXNbIGkgXTtcblxuXHRcdFx0aWYgKCBlbGVtIHx8IGVsZW0gPT09IDAgKSB7XG5cblx0XHRcdFx0Ly8gQWRkIG5vZGVzIGRpcmVjdGx5XG5cdFx0XHRcdGlmICggalF1ZXJ5LnR5cGUoIGVsZW0gKSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBRdFdlYktpdCwgUGhhbnRvbUpTXG5cdFx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggbm9kZXMsIGVsZW0ubm9kZVR5cGUgPyBbIGVsZW0gXSA6IGVsZW0gKTtcblxuXHRcdFx0XHQvLyBDb252ZXJ0IG5vbi1odG1sIGludG8gYSB0ZXh0IG5vZGVcblx0XHRcdFx0fSBlbHNlIGlmICggIXJodG1sLnRlc3QoIGVsZW0gKSApIHtcblx0XHRcdFx0XHRub2Rlcy5wdXNoKCBjb250ZXh0LmNyZWF0ZVRleHROb2RlKCBlbGVtICkgKTtcblxuXHRcdFx0XHQvLyBDb252ZXJ0IGh0bWwgaW50byBET00gbm9kZXNcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0bXAgPSB0bXAgfHwgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGNvbnRleHQuY3JlYXRlRWxlbWVudChcImRpdlwiKSApO1xuXG5cdFx0XHRcdFx0Ly8gRGVzZXJpYWxpemUgYSBzdGFuZGFyZCByZXByZXNlbnRhdGlvblxuXHRcdFx0XHRcdHRhZyA9ICggcnRhZ05hbWUuZXhlYyggZWxlbSApIHx8IFsgXCJcIiwgXCJcIiBdIClbIDEgXS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdHdyYXAgPSB3cmFwTWFwWyB0YWcgXSB8fCB3cmFwTWFwLl9kZWZhdWx0O1xuXHRcdFx0XHRcdHRtcC5pbm5lckhUTUwgPSB3cmFwWyAxIF0gKyBlbGVtLnJlcGxhY2UoIHJ4aHRtbFRhZywgXCI8JDE+PC8kMj5cIiApICsgd3JhcFsgMiBdO1xuXG5cdFx0XHRcdFx0Ly8gRGVzY2VuZCB0aHJvdWdoIHdyYXBwZXJzIHRvIHRoZSByaWdodCBjb250ZW50XG5cdFx0XHRcdFx0aiA9IHdyYXBbIDAgXTtcblx0XHRcdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0XHRcdHRtcCA9IHRtcC5sYXN0Q2hpbGQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogUXRXZWJLaXQsIFBoYW50b21KU1xuXHRcdFx0XHRcdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIG5vZGVzLCB0bXAuY2hpbGROb2RlcyApO1xuXG5cdFx0XHRcdFx0Ly8gUmVtZW1iZXIgdGhlIHRvcC1sZXZlbCBjb250YWluZXJcblx0XHRcdFx0XHR0bXAgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXG5cdFx0XHRcdFx0Ly8gRW5zdXJlIHRoZSBjcmVhdGVkIG5vZGVzIGFyZSBvcnBoYW5lZCAoIzEyMzkyKVxuXHRcdFx0XHRcdHRtcC50ZXh0Q29udGVudCA9IFwiXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgd3JhcHBlciBmcm9tIGZyYWdtZW50XG5cdFx0ZnJhZ21lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAoZWxlbSA9IG5vZGVzWyBpKysgXSkgKSB7XG5cblx0XHRcdC8vICM0MDg3IC0gSWYgb3JpZ2luIGFuZCBkZXN0aW5hdGlvbiBlbGVtZW50cyBhcmUgdGhlIHNhbWUsIGFuZCB0aGlzIGlzXG5cdFx0XHQvLyB0aGF0IGVsZW1lbnQsIGRvIG5vdCBkbyBhbnl0aGluZ1xuXHRcdFx0aWYgKCBzZWxlY3Rpb24gJiYgalF1ZXJ5LmluQXJyYXkoIGVsZW0sIHNlbGVjdGlvbiApICE9PSAtMSApIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnRhaW5zID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblxuXHRcdFx0Ly8gQXBwZW5kIHRvIGZyYWdtZW50XG5cdFx0XHR0bXAgPSBnZXRBbGwoIGZyYWdtZW50LmFwcGVuZENoaWxkKCBlbGVtICksIFwic2NyaXB0XCIgKTtcblxuXHRcdFx0Ly8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeVxuXHRcdFx0aWYgKCBjb250YWlucyApIHtcblx0XHRcdFx0c2V0R2xvYmFsRXZhbCggdG1wICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENhcHR1cmUgZXhlY3V0YWJsZXNcblx0XHRcdGlmICggc2NyaXB0cyApIHtcblx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSB0bXBbIGorKyBdKSApIHtcblx0XHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIGVsZW0udHlwZSB8fCBcIlwiICkgKSB7XG5cdFx0XHRcdFx0XHRzY3JpcHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZnJhZ21lbnQ7XG5cdH0sXG5cblx0Y2xlYW5EYXRhOiBmdW5jdGlvbiggZWxlbXMgKSB7XG5cdFx0dmFyIGRhdGEsIGVsZW0sIHR5cGUsIGtleSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbCxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyAoZWxlbSA9IGVsZW1zWyBpIF0pICE9PSB1bmRlZmluZWQ7IGkrKyApIHtcblx0XHRcdGlmICggalF1ZXJ5LmFjY2VwdERhdGEoIGVsZW0gKSApIHtcblx0XHRcdFx0a2V5ID0gZWxlbVsgZGF0YV9wcml2LmV4cGFuZG8gXTtcblxuXHRcdFx0XHRpZiAoIGtleSAmJiAoZGF0YSA9IGRhdGFfcHJpdi5jYWNoZVsga2V5IF0pICkge1xuXHRcdFx0XHRcdGlmICggZGF0YS5ldmVudHMgKSB7XG5cdFx0XHRcdFx0XHRmb3IgKCB0eXBlIGluIGRhdGEuZXZlbnRzICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIHNwZWNpYWxbIHR5cGUgXSApIHtcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCBlbGVtLCB0eXBlICk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gVGhpcyBpcyBhIHNob3J0Y3V0IHRvIGF2b2lkIGpRdWVyeS5ldmVudC5yZW1vdmUncyBvdmVyaGVhZFxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZGF0YS5oYW5kbGUgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIGRhdGFfcHJpdi5jYWNoZVsga2V5IF0gKSB7XG5cdFx0XHRcdFx0XHQvLyBEaXNjYXJkIGFueSByZW1haW5pbmcgYHByaXZhdGVgIGRhdGFcblx0XHRcdFx0XHRcdGRlbGV0ZSBkYXRhX3ByaXYuY2FjaGVbIGtleSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gRGlzY2FyZCBhbnkgcmVtYWluaW5nIGB1c2VyYCBkYXRhXG5cdFx0XHRkZWxldGUgZGF0YV91c2VyLmNhY2hlWyBlbGVtWyBkYXRhX3VzZXIuZXhwYW5kbyBdIF07XG5cdFx0fVxuXHR9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdHRleHQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdGpRdWVyeS50ZXh0KCB0aGlzICkgOlxuXHRcdFx0XHR0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0XHRcdHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0YXBwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5kb21NYW5pcCggYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gbWFuaXB1bGF0aW9uVGFyZ2V0KCB0aGlzLCBlbGVtICk7XG5cdFx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdHByZXBlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmRvbU1hbmlwKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdHZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTtcblx0XHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZSggZWxlbSwgdGFyZ2V0LmZpcnN0Q2hpbGQgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRiZWZvcmU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmRvbU1hbmlwKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIGVsZW0sIHRoaXMgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRhZnRlcjogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZG9tTWFuaXAoIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcy5uZXh0U2libGluZyApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdHJlbW92ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCBrZWVwRGF0YSAvKiBJbnRlcm5hbCBVc2UgT25seSAqLyApIHtcblx0XHR2YXIgZWxlbSxcblx0XHRcdGVsZW1zID0gc2VsZWN0b3IgPyBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgdGhpcyApIDogdGhpcyxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0XHRpZiAoICFrZWVwRGF0YSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0gKSApO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0aWYgKCBrZWVwRGF0YSAmJiBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApICkge1xuXHRcdFx0XHRcdHNldEdsb2JhbEV2YWwoIGdldEFsbCggZWxlbSwgXCJzY3JpcHRcIiApICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxlbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0ZW1wdHk6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlbGVtLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7IChlbGVtID0gdGhpc1tpXSkgIT0gbnVsbDsgaSsrICkge1xuXHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXG5cdFx0XHRcdC8vIFJlbW92ZSBhbnkgcmVtYWluaW5nIG5vZGVzXG5cdFx0XHRcdGVsZW0udGV4dENvbnRlbnQgPSBcIlwiO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdGNsb25lOiBmdW5jdGlvbiggZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0ZGF0YUFuZEV2ZW50cyA9IGRhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGZhbHNlIDogZGF0YUFuZEV2ZW50cztcblx0XHRkZWVwRGF0YUFuZEV2ZW50cyA9IGRlZXBEYXRhQW5kRXZlbnRzID09IG51bGwgPyBkYXRhQW5kRXZlbnRzIDogZGVlcERhdGFBbmRFdmVudHM7XG5cblx0XHRyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmNsb25lKCB0aGlzLCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApO1xuXHRcdH0pO1xuXHR9LFxuXG5cdGh0bWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgZWxlbSA9IHRoaXNbIDAgXSB8fCB7fSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdGwgPSB0aGlzLmxlbmd0aDtcblxuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmlubmVySFRNTDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2VlIGlmIHdlIGNhbiB0YWtlIGEgc2hvcnRjdXQgYW5kIGp1c3QgdXNlIGlubmVySFRNTFxuXHRcdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgIXJub0lubmVyaHRtbC50ZXN0KCB2YWx1ZSApICYmXG5cdFx0XHRcdCF3cmFwTWFwWyAoIHJ0YWdOYW1lLmV4ZWMoIHZhbHVlICkgfHwgWyBcIlwiLCBcIlwiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCkgXSApIHtcblxuXHRcdFx0XHR2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoIHJ4aHRtbFRhZywgXCI8JDE+PC8kMj5cIiApO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdFx0ZWxlbSA9IHRoaXNbIGkgXSB8fCB7fTtcblxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGVsZW1lbnQgbm9kZXMgYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXHRcdFx0XHRcdFx0XHRlbGVtLmlubmVySFRNTCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGVsZW0gPSAwO1xuXG5cdFx0XHRcdC8vIElmIHVzaW5nIGlubmVySFRNTCB0aHJvd3MgYW4gZXhjZXB0aW9uLCB1c2UgdGhlIGZhbGxiYWNrIG1ldGhvZFxuXHRcdFx0XHR9IGNhdGNoKCBlICkge31cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0XHR0aGlzLmVtcHR5KCkuYXBwZW5kKCB2YWx1ZSApO1xuXHRcdFx0fVxuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0cmVwbGFjZVdpdGg6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBhcmcgPSBhcmd1bWVudHNbIDAgXTtcblxuXHRcdC8vIE1ha2UgdGhlIGNoYW5nZXMsIHJlcGxhY2luZyBlYWNoIGNvbnRleHQgZWxlbWVudCB3aXRoIHRoZSBuZXcgY29udGVudFxuXHRcdHRoaXMuZG9tTWFuaXAoIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRhcmcgPSB0aGlzLnBhcmVudE5vZGU7XG5cblx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggdGhpcyApICk7XG5cblx0XHRcdGlmICggYXJnICkge1xuXHRcdFx0XHRhcmcucmVwbGFjZUNoaWxkKCBlbGVtLCB0aGlzICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBGb3JjZSByZW1vdmFsIGlmIHRoZXJlIHdhcyBubyBuZXcgY29udGVudCAoZS5nLiwgZnJvbSBlbXB0eSBhcmd1bWVudHMpXG5cdFx0cmV0dXJuIGFyZyAmJiAoYXJnLmxlbmd0aCB8fCBhcmcubm9kZVR5cGUpID8gdGhpcyA6IHRoaXMucmVtb3ZlKCk7XG5cdH0sXG5cblx0ZGV0YWNoOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMucmVtb3ZlKCBzZWxlY3RvciwgdHJ1ZSApO1xuXHR9LFxuXG5cdGRvbU1hbmlwOiBmdW5jdGlvbiggYXJncywgY2FsbGJhY2sgKSB7XG5cblx0XHQvLyBGbGF0dGVuIGFueSBuZXN0ZWQgYXJyYXlzXG5cdFx0YXJncyA9IGNvbmNhdC5hcHBseSggW10sIGFyZ3MgKTtcblxuXHRcdHZhciBmcmFnbWVudCwgZmlyc3QsIHNjcmlwdHMsIGhhc1NjcmlwdHMsIG5vZGUsIGRvYyxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0c2V0ID0gdGhpcyxcblx0XHRcdGlOb0Nsb25lID0gbCAtIDEsXG5cdFx0XHR2YWx1ZSA9IGFyZ3NbIDAgXSxcblx0XHRcdGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKTtcblxuXHRcdC8vIFdlIGNhbid0IGNsb25lTm9kZSBmcmFnbWVudHMgdGhhdCBjb250YWluIGNoZWNrZWQsIGluIFdlYktpdFxuXHRcdGlmICggaXNGdW5jdGlvbiB8fFxuXHRcdFx0XHQoIGwgPiAxICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJlxuXHRcdFx0XHRcdCFzdXBwb3J0LmNoZWNrQ2xvbmUgJiYgcmNoZWNrZWQudGVzdCggdmFsdWUgKSApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaW5kZXggKSB7XG5cdFx0XHRcdHZhciBzZWxmID0gc2V0LmVxKCBpbmRleCApO1xuXHRcdFx0XHRpZiAoIGlzRnVuY3Rpb24gKSB7XG5cdFx0XHRcdFx0YXJnc1sgMCBdID0gdmFsdWUuY2FsbCggdGhpcywgaW5kZXgsIHNlbGYuaHRtbCgpICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0c2VsZi5kb21NYW5pcCggYXJncywgY2FsbGJhY2sgKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICggbCApIHtcblx0XHRcdGZyYWdtZW50ID0galF1ZXJ5LmJ1aWxkRnJhZ21lbnQoIGFyZ3MsIHRoaXNbIDAgXS5vd25lckRvY3VtZW50LCBmYWxzZSwgdGhpcyApO1xuXHRcdFx0Zmlyc3QgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXG5cdFx0XHRpZiAoIGZyYWdtZW50LmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICkge1xuXHRcdFx0XHRmcmFnbWVudCA9IGZpcnN0O1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGZpcnN0ICkge1xuXHRcdFx0XHRzY3JpcHRzID0galF1ZXJ5Lm1hcCggZ2V0QWxsKCBmcmFnbWVudCwgXCJzY3JpcHRcIiApLCBkaXNhYmxlU2NyaXB0ICk7XG5cdFx0XHRcdGhhc1NjcmlwdHMgPSBzY3JpcHRzLmxlbmd0aDtcblxuXHRcdFx0XHQvLyBVc2UgdGhlIG9yaWdpbmFsIGZyYWdtZW50IGZvciB0aGUgbGFzdCBpdGVtIGluc3RlYWQgb2YgdGhlIGZpcnN0IGJlY2F1c2UgaXQgY2FuIGVuZCB1cFxuXHRcdFx0XHQvLyBiZWluZyBlbXB0aWVkIGluY29ycmVjdGx5IGluIGNlcnRhaW4gc2l0dWF0aW9ucyAoIzgwNzApLlxuXHRcdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0bm9kZSA9IGZyYWdtZW50O1xuXG5cdFx0XHRcdFx0aWYgKCBpICE9PSBpTm9DbG9uZSApIHtcblx0XHRcdFx0XHRcdG5vZGUgPSBqUXVlcnkuY2xvbmUoIG5vZGUsIHRydWUsIHRydWUgKTtcblxuXHRcdFx0XHRcdFx0Ly8gS2VlcCByZWZlcmVuY2VzIHRvIGNsb25lZCBzY3JpcHRzIGZvciBsYXRlciByZXN0b3JhdGlvblxuXHRcdFx0XHRcdFx0aWYgKCBoYXNTY3JpcHRzICkge1xuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBRdFdlYktpdFxuXHRcdFx0XHRcdFx0XHQvLyBqUXVlcnkubWVyZ2UgYmVjYXVzZSBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzXG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggc2NyaXB0cywgZ2V0QWxsKCBub2RlLCBcInNjcmlwdFwiICkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKCB0aGlzWyBpIF0sIG5vZGUsIGkgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggaGFzU2NyaXB0cyApIHtcblx0XHRcdFx0XHRkb2MgPSBzY3JpcHRzWyBzY3JpcHRzLmxlbmd0aCAtIDEgXS5vd25lckRvY3VtZW50O1xuXG5cdFx0XHRcdFx0Ly8gUmVlbmFibGUgc2NyaXB0c1xuXHRcdFx0XHRcdGpRdWVyeS5tYXAoIHNjcmlwdHMsIHJlc3RvcmVTY3JpcHQgKTtcblxuXHRcdFx0XHRcdC8vIEV2YWx1YXRlIGV4ZWN1dGFibGUgc2NyaXB0cyBvbiBmaXJzdCBkb2N1bWVudCBpbnNlcnRpb25cblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGhhc1NjcmlwdHM7IGkrKyApIHtcblx0XHRcdFx0XHRcdG5vZGUgPSBzY3JpcHRzWyBpIF07XG5cdFx0XHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIG5vZGUudHlwZSB8fCBcIlwiICkgJiZcblx0XHRcdFx0XHRcdFx0IWRhdGFfcHJpdi5hY2Nlc3MoIG5vZGUsIFwiZ2xvYmFsRXZhbFwiICkgJiYgalF1ZXJ5LmNvbnRhaW5zKCBkb2MsIG5vZGUgKSApIHtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIG5vZGUuc3JjICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIE9wdGlvbmFsIEFKQVggZGVwZW5kZW5jeSwgYnV0IHdvbid0IHJ1biBzY3JpcHRzIGlmIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuX2V2YWxVcmwgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuX2V2YWxVcmwoIG5vZGUuc3JjICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5nbG9iYWxFdmFsKCBub2RlLnRleHRDb250ZW50LnJlcGxhY2UoIHJjbGVhblNjcmlwdCwgXCJcIiApICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fVxufSk7XG5cbmpRdWVyeS5lYWNoKHtcblx0YXBwZW5kVG86IFwiYXBwZW5kXCIsXG5cdHByZXBlbmRUbzogXCJwcmVwZW5kXCIsXG5cdGluc2VydEJlZm9yZTogXCJiZWZvcmVcIixcblx0aW5zZXJ0QWZ0ZXI6IFwiYWZ0ZXJcIixcblx0cmVwbGFjZUFsbDogXCJyZXBsYWNlV2l0aFwiXG59LCBmdW5jdGlvbiggbmFtZSwgb3JpZ2luYWwgKSB7XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBlbGVtcyxcblx0XHRcdHJldCA9IFtdLFxuXHRcdFx0aW5zZXJ0ID0galF1ZXJ5KCBzZWxlY3RvciApLFxuXHRcdFx0bGFzdCA9IGluc2VydC5sZW5ndGggLSAxLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7IGkgPD0gbGFzdDsgaSsrICkge1xuXHRcdFx0ZWxlbXMgPSBpID09PSBsYXN0ID8gdGhpcyA6IHRoaXMuY2xvbmUoIHRydWUgKTtcblx0XHRcdGpRdWVyeSggaW5zZXJ0WyBpIF0gKVsgb3JpZ2luYWwgXSggZWxlbXMgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogUXRXZWJLaXRcblx0XHRcdC8vIC5nZXQoKSBiZWNhdXNlIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Ncblx0XHRcdHB1c2guYXBwbHkoIHJldCwgZWxlbXMuZ2V0KCkgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHJldCApO1xuXHR9O1xufSk7XG5cblxudmFyIGlmcmFtZSxcblx0ZWxlbWRpc3BsYXkgPSB7fTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgYWN0dWFsIGRpc3BsYXkgb2YgYSBlbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBub2RlTmFtZSBvZiB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3R9IGRvYyBEb2N1bWVudCBvYmplY3RcbiAqL1xuLy8gQ2FsbGVkIG9ubHkgZnJvbSB3aXRoaW4gZGVmYXVsdERpc3BsYXlcbmZ1bmN0aW9uIGFjdHVhbERpc3BsYXkoIG5hbWUsIGRvYyApIHtcblx0dmFyIHN0eWxlLFxuXHRcdGVsZW0gPSBqUXVlcnkoIGRvYy5jcmVhdGVFbGVtZW50KCBuYW1lICkgKS5hcHBlbmRUbyggZG9jLmJvZHkgKSxcblxuXHRcdC8vIGdldERlZmF1bHRDb21wdXRlZFN0eWxlIG1pZ2h0IGJlIHJlbGlhYmx5IHVzZWQgb25seSBvbiBhdHRhY2hlZCBlbGVtZW50XG5cdFx0ZGlzcGxheSA9IHdpbmRvdy5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZSAmJiAoIHN0eWxlID0gd2luZG93LmdldERlZmF1bHRDb21wdXRlZFN0eWxlKCBlbGVtWyAwIF0gKSApID9cblxuXHRcdFx0Ly8gVXNlIG9mIHRoaXMgbWV0aG9kIGlzIGEgdGVtcG9yYXJ5IGZpeCAobW9yZSBsaWtlIG9wdGltaXphdGlvbikgdW50aWwgc29tZXRoaW5nIGJldHRlciBjb21lcyBhbG9uZyxcblx0XHRcdC8vIHNpbmNlIGl0IHdhcyByZW1vdmVkIGZyb20gc3BlY2lmaWNhdGlvbiBhbmQgc3VwcG9ydGVkIG9ubHkgaW4gRkZcblx0XHRcdHN0eWxlLmRpc3BsYXkgOiBqUXVlcnkuY3NzKCBlbGVtWyAwIF0sIFwiZGlzcGxheVwiICk7XG5cblx0Ly8gV2UgZG9uJ3QgaGF2ZSBhbnkgZGF0YSBzdG9yZWQgb24gdGhlIGVsZW1lbnQsXG5cdC8vIHNvIHVzZSBcImRldGFjaFwiIG1ldGhvZCBhcyBmYXN0IHdheSB0byBnZXQgcmlkIG9mIHRoZSBlbGVtZW50XG5cdGVsZW0uZGV0YWNoKCk7XG5cblx0cmV0dXJuIGRpc3BsYXk7XG59XG5cbi8qKlxuICogVHJ5IHRvIGRldGVybWluZSB0aGUgZGVmYXVsdCBkaXNwbGF5IHZhbHVlIG9mIGFuIGVsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBub2RlTmFtZVxuICovXG5mdW5jdGlvbiBkZWZhdWx0RGlzcGxheSggbm9kZU5hbWUgKSB7XG5cdHZhciBkb2MgPSBkb2N1bWVudCxcblx0XHRkaXNwbGF5ID0gZWxlbWRpc3BsYXlbIG5vZGVOYW1lIF07XG5cblx0aWYgKCAhZGlzcGxheSApIHtcblx0XHRkaXNwbGF5ID0gYWN0dWFsRGlzcGxheSggbm9kZU5hbWUsIGRvYyApO1xuXG5cdFx0Ly8gSWYgdGhlIHNpbXBsZSB3YXkgZmFpbHMsIHJlYWQgZnJvbSBpbnNpZGUgYW4gaWZyYW1lXG5cdFx0aWYgKCBkaXNwbGF5ID09PSBcIm5vbmVcIiB8fCAhZGlzcGxheSApIHtcblxuXHRcdFx0Ly8gVXNlIHRoZSBhbHJlYWR5LWNyZWF0ZWQgaWZyYW1lIGlmIHBvc3NpYmxlXG5cdFx0XHRpZnJhbWUgPSAoaWZyYW1lIHx8IGpRdWVyeSggXCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+XCIgKSkuYXBwZW5kVG8oIGRvYy5kb2N1bWVudEVsZW1lbnQgKTtcblxuXHRcdFx0Ly8gQWx3YXlzIHdyaXRlIGEgbmV3IEhUTUwgc2tlbGV0b24gc28gV2Via2l0IGFuZCBGaXJlZm94IGRvbid0IGNob2tlIG9uIHJldXNlXG5cdFx0XHRkb2MgPSBpZnJhbWVbIDAgXS5jb250ZW50RG9jdW1lbnQ7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFXG5cdFx0XHRkb2Mud3JpdGUoKTtcblx0XHRcdGRvYy5jbG9zZSgpO1xuXG5cdFx0XHRkaXNwbGF5ID0gYWN0dWFsRGlzcGxheSggbm9kZU5hbWUsIGRvYyApO1xuXHRcdFx0aWZyYW1lLmRldGFjaCgpO1xuXHRcdH1cblxuXHRcdC8vIFN0b3JlIHRoZSBjb3JyZWN0IGRlZmF1bHQgZGlzcGxheVxuXHRcdGVsZW1kaXNwbGF5WyBub2RlTmFtZSBdID0gZGlzcGxheTtcblx0fVxuXG5cdHJldHVybiBkaXNwbGF5O1xufVxudmFyIHJtYXJnaW4gPSAoL15tYXJnaW4vKTtcblxudmFyIHJudW1ub25weCA9IG5ldyBSZWdFeHAoIFwiXihcIiArIHBudW0gKyBcIikoPyFweClbYS16JV0rJFwiLCBcImlcIiApO1xuXG52YXIgZ2V0U3R5bGVzID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0Ly8gU3VwcG9ydDogSUU8PTExKywgRmlyZWZveDw9MzArICgjMTUwOTgsICMxNDE1MClcblx0XHQvLyBJRSB0aHJvd3Mgb24gZWxlbWVudHMgY3JlYXRlZCBpbiBwb3B1cHNcblx0XHQvLyBGRiBtZWFud2hpbGUgdGhyb3dzIG9uIGZyYW1lIGVsZW1lbnRzIHRocm91Z2ggXCJkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlXCJcblx0XHRpZiAoIGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5vcGVuZXIgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoIGVsZW0sIG51bGwgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGVsZW0sIG51bGwgKTtcblx0fTtcblxuXG5cbmZ1bmN0aW9uIGN1ckNTUyggZWxlbSwgbmFtZSwgY29tcHV0ZWQgKSB7XG5cdHZhciB3aWR0aCwgbWluV2lkdGgsIG1heFdpZHRoLCByZXQsXG5cdFx0c3R5bGUgPSBlbGVtLnN0eWxlO1xuXG5cdGNvbXB1dGVkID0gY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICk7XG5cblx0Ly8gU3VwcG9ydDogSUU5XG5cdC8vIGdldFByb3BlcnR5VmFsdWUgaXMgb25seSBuZWVkZWQgZm9yIC5jc3MoJ2ZpbHRlcicpICgjMTI1MzcpXG5cdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0cmV0ID0gY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSggbmFtZSApIHx8IGNvbXB1dGVkWyBuYW1lIF07XG5cdH1cblxuXHRpZiAoIGNvbXB1dGVkICkge1xuXG5cdFx0aWYgKCByZXQgPT09IFwiXCIgJiYgIWpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgKSB7XG5cdFx0XHRyZXQgPSBqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUgKTtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBpT1MgPCA2XG5cdFx0Ly8gQSB0cmlidXRlIHRvIHRoZSBcImF3ZXNvbWUgaGFjayBieSBEZWFuIEVkd2FyZHNcIlxuXHRcdC8vIGlPUyA8IDYgKGF0IGxlYXN0KSByZXR1cm5zIHBlcmNlbnRhZ2UgZm9yIGEgbGFyZ2VyIHNldCBvZiB2YWx1ZXMsIGJ1dCB3aWR0aCBzZWVtcyB0byBiZSByZWxpYWJseSBwaXhlbHNcblx0XHQvLyB0aGlzIGlzIGFnYWluc3QgdGhlIENTU09NIGRyYWZ0IHNwZWM6IGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzc29tLyNyZXNvbHZlZC12YWx1ZXNcblx0XHRpZiAoIHJudW1ub25weC50ZXN0KCByZXQgKSAmJiBybWFyZ2luLnRlc3QoIG5hbWUgKSApIHtcblxuXHRcdFx0Ly8gUmVtZW1iZXIgdGhlIG9yaWdpbmFsIHZhbHVlc1xuXHRcdFx0d2lkdGggPSBzdHlsZS53aWR0aDtcblx0XHRcdG1pbldpZHRoID0gc3R5bGUubWluV2lkdGg7XG5cdFx0XHRtYXhXaWR0aCA9IHN0eWxlLm1heFdpZHRoO1xuXG5cdFx0XHQvLyBQdXQgaW4gdGhlIG5ldyB2YWx1ZXMgdG8gZ2V0IGEgY29tcHV0ZWQgdmFsdWUgb3V0XG5cdFx0XHRzdHlsZS5taW5XaWR0aCA9IHN0eWxlLm1heFdpZHRoID0gc3R5bGUud2lkdGggPSByZXQ7XG5cdFx0XHRyZXQgPSBjb21wdXRlZC53aWR0aDtcblxuXHRcdFx0Ly8gUmV2ZXJ0IHRoZSBjaGFuZ2VkIHZhbHVlc1xuXHRcdFx0c3R5bGUud2lkdGggPSB3aWR0aDtcblx0XHRcdHN0eWxlLm1pbldpZHRoID0gbWluV2lkdGg7XG5cdFx0XHRzdHlsZS5tYXhXaWR0aCA9IG1heFdpZHRoO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiByZXQgIT09IHVuZGVmaW5lZCA/XG5cdFx0Ly8gU3VwcG9ydDogSUVcblx0XHQvLyBJRSByZXR1cm5zIHpJbmRleCB2YWx1ZSBhcyBhbiBpbnRlZ2VyLlxuXHRcdHJldCArIFwiXCIgOlxuXHRcdHJldDtcbn1cblxuXG5mdW5jdGlvbiBhZGRHZXRIb29rSWYoIGNvbmRpdGlvbkZuLCBob29rRm4gKSB7XG5cdC8vIERlZmluZSB0aGUgaG9vaywgd2UnbGwgY2hlY2sgb24gdGhlIGZpcnN0IHJ1biBpZiBpdCdzIHJlYWxseSBuZWVkZWQuXG5cdHJldHVybiB7XG5cdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggY29uZGl0aW9uRm4oKSApIHtcblx0XHRcdFx0Ly8gSG9vayBub3QgbmVlZGVkIChvciBpdCdzIG5vdCBwb3NzaWJsZSB0byB1c2UgaXQgZHVlXG5cdFx0XHRcdC8vIHRvIG1pc3NpbmcgZGVwZW5kZW5jeSksIHJlbW92ZSBpdC5cblx0XHRcdFx0ZGVsZXRlIHRoaXMuZ2V0O1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIEhvb2sgbmVlZGVkOyByZWRlZmluZSBpdCBzbyB0aGF0IHRoZSBzdXBwb3J0IHRlc3QgaXMgbm90IGV4ZWN1dGVkIGFnYWluLlxuXHRcdFx0cmV0dXJuICh0aGlzLmdldCA9IGhvb2tGbikuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH1cblx0fTtcbn1cblxuXG4oZnVuY3Rpb24oKSB7XG5cdHZhciBwaXhlbFBvc2l0aW9uVmFsLCBib3hTaXppbmdSZWxpYWJsZVZhbCxcblx0XHRkb2NFbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuXHRcdGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSxcblx0XHRkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XG5cblx0aWYgKCAhZGl2LnN0eWxlICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0Ly8gU3R5bGUgb2YgY2xvbmVkIGVsZW1lbnQgYWZmZWN0cyBzb3VyY2UgZWxlbWVudCBjbG9uZWQgKCM4OTA4KVxuXHRkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcImNvbnRlbnQtYm94XCI7XG5cdGRpdi5jbG9uZU5vZGUoIHRydWUgKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9IFwiXCI7XG5cdHN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlID0gZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID09PSBcImNvbnRlbnQtYm94XCI7XG5cblx0Y29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSBcImJvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O21hcmdpbi10b3A6MXB4O1wiICtcblx0XHRcInBvc2l0aW9uOmFic29sdXRlXCI7XG5cdGNvbnRhaW5lci5hcHBlbmRDaGlsZCggZGl2ICk7XG5cblx0Ly8gRXhlY3V0aW5nIGJvdGggcGl4ZWxQb3NpdGlvbiAmIGJveFNpemluZ1JlbGlhYmxlIHRlc3RzIHJlcXVpcmUgb25seSBvbmUgbGF5b3V0XG5cdC8vIHNvIHRoZXkncmUgZXhlY3V0ZWQgYXQgdGhlIHNhbWUgdGltZSB0byBzYXZlIHRoZSBzZWNvbmQgY29tcHV0YXRpb24uXG5cdGZ1bmN0aW9uIGNvbXB1dGVQaXhlbFBvc2l0aW9uQW5kQm94U2l6aW5nUmVsaWFibGUoKSB7XG5cdFx0ZGl2LnN0eWxlLmNzc1RleHQgPVxuXHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveDwyOSwgQW5kcm9pZCAyLjNcblx0XHRcdC8vIFZlbmRvci1wcmVmaXggYm94LXNpemluZ1xuXHRcdFx0XCItd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtcIiArXG5cdFx0XHRcImJveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MSU7dG9wOjElO1wiICtcblx0XHRcdFwiYm9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo0cHg7cG9zaXRpb246YWJzb2x1dGVcIjtcblx0XHRkaXYuaW5uZXJIVE1MID0gXCJcIjtcblx0XHRkb2NFbGVtLmFwcGVuZENoaWxkKCBjb250YWluZXIgKTtcblxuXHRcdHZhciBkaXZTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBkaXYsIG51bGwgKTtcblx0XHRwaXhlbFBvc2l0aW9uVmFsID0gZGl2U3R5bGUudG9wICE9PSBcIjElXCI7XG5cdFx0Ym94U2l6aW5nUmVsaWFibGVWYWwgPSBkaXZTdHlsZS53aWR0aCA9PT0gXCI0cHhcIjtcblxuXHRcdGRvY0VsZW0ucmVtb3ZlQ2hpbGQoIGNvbnRhaW5lciApO1xuXHR9XG5cblx0Ly8gU3VwcG9ydDogbm9kZS5qcyBqc2RvbVxuXHQvLyBEb24ndCBhc3N1bWUgdGhhdCBnZXRDb21wdXRlZFN0eWxlIGlzIGEgcHJvcGVydHkgb2YgdGhlIGdsb2JhbCBvYmplY3Rcblx0aWYgKCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSApIHtcblx0XHRqUXVlcnkuZXh0ZW5kKCBzdXBwb3J0LCB7XG5cdFx0XHRwaXhlbFBvc2l0aW9uOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBUaGlzIHRlc3QgaXMgZXhlY3V0ZWQgb25seSBvbmNlIGJ1dCB3ZSBzdGlsbCBkbyBtZW1vaXppbmdcblx0XHRcdFx0Ly8gc2luY2Ugd2UgY2FuIHVzZSB0aGUgYm94U2l6aW5nUmVsaWFibGUgcHJlLWNvbXB1dGluZy5cblx0XHRcdFx0Ly8gTm8gbmVlZCB0byBjaGVjayBpZiB0aGUgdGVzdCB3YXMgYWxyZWFkeSBwZXJmb3JtZWQsIHRob3VnaC5cblx0XHRcdFx0Y29tcHV0ZVBpeGVsUG9zaXRpb25BbmRCb3hTaXppbmdSZWxpYWJsZSgpO1xuXHRcdFx0XHRyZXR1cm4gcGl4ZWxQb3NpdGlvblZhbDtcblx0XHRcdH0sXG5cdFx0XHRib3hTaXppbmdSZWxpYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggYm94U2l6aW5nUmVsaWFibGVWYWwgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRjb21wdXRlUGl4ZWxQb3NpdGlvbkFuZEJveFNpemluZ1JlbGlhYmxlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGJveFNpemluZ1JlbGlhYmxlVmFsO1xuXHRcdFx0fSxcblx0XHRcdHJlbGlhYmxlTWFyZ2luUmlnaHQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG5cdFx0XHRcdC8vIENoZWNrIGlmIGRpdiB3aXRoIGV4cGxpY2l0IHdpZHRoIGFuZCBubyBtYXJnaW4tcmlnaHQgaW5jb3JyZWN0bHlcblx0XHRcdFx0Ly8gZ2V0cyBjb21wdXRlZCBtYXJnaW4tcmlnaHQgYmFzZWQgb24gd2lkdGggb2YgY29udGFpbmVyLiAoIzMzMzMpXG5cdFx0XHRcdC8vIFdlYktpdCBCdWcgMTMzNDMgLSBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgd3JvbmcgdmFsdWUgZm9yIG1hcmdpbi1yaWdodFxuXHRcdFx0XHQvLyBUaGlzIHN1cHBvcnQgZnVuY3Rpb24gaXMgb25seSBleGVjdXRlZCBvbmNlIHNvIG5vIG1lbW9pemluZyBpcyBuZWVkZWQuXG5cdFx0XHRcdHZhciByZXQsXG5cdFx0XHRcdFx0bWFyZ2luRGl2ID0gZGl2LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkgKTtcblxuXHRcdFx0XHQvLyBSZXNldCBDU1M6IGJveC1zaXppbmc7IGRpc3BsYXk7IG1hcmdpbjsgYm9yZGVyOyBwYWRkaW5nXG5cdFx0XHRcdG1hcmdpbkRpdi5zdHlsZS5jc3NUZXh0ID0gZGl2LnN0eWxlLmNzc1RleHQgPVxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3g8MjksIEFuZHJvaWQgMi4zXG5cdFx0XHRcdFx0Ly8gVmVuZG9yLXByZWZpeCBib3gtc2l6aW5nXG5cdFx0XHRcdFx0XCItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O1wiICtcblx0XHRcdFx0XHRcImJveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjBcIjtcblx0XHRcdFx0bWFyZ2luRGl2LnN0eWxlLm1hcmdpblJpZ2h0ID0gbWFyZ2luRGl2LnN0eWxlLndpZHRoID0gXCIwXCI7XG5cdFx0XHRcdGRpdi5zdHlsZS53aWR0aCA9IFwiMXB4XCI7XG5cdFx0XHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGNvbnRhaW5lciApO1xuXG5cdFx0XHRcdHJldCA9ICFwYXJzZUZsb2F0KCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggbWFyZ2luRGl2LCBudWxsICkubWFyZ2luUmlnaHQgKTtcblxuXHRcdFx0XHRkb2NFbGVtLnJlbW92ZUNoaWxkKCBjb250YWluZXIgKTtcblx0XHRcdFx0ZGl2LnJlbW92ZUNoaWxkKCBtYXJnaW5EaXYgKTtcblxuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59KSgpO1xuXG5cbi8vIEEgbWV0aG9kIGZvciBxdWlja2x5IHN3YXBwaW5nIGluL291dCBDU1MgcHJvcGVydGllcyB0byBnZXQgY29ycmVjdCBjYWxjdWxhdGlvbnMuXG5qUXVlcnkuc3dhcCA9IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBjYWxsYmFjaywgYXJncyApIHtcblx0dmFyIHJldCwgbmFtZSxcblx0XHRvbGQgPSB7fTtcblxuXHQvLyBSZW1lbWJlciB0aGUgb2xkIHZhbHVlcywgYW5kIGluc2VydCB0aGUgbmV3IG9uZXNcblx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdG9sZFsgbmFtZSBdID0gZWxlbS5zdHlsZVsgbmFtZSBdO1xuXHRcdGVsZW0uc3R5bGVbIG5hbWUgXSA9IG9wdGlvbnNbIG5hbWUgXTtcblx0fVxuXG5cdHJldCA9IGNhbGxiYWNrLmFwcGx5KCBlbGVtLCBhcmdzIHx8IFtdICk7XG5cblx0Ly8gUmV2ZXJ0IHRoZSBvbGQgdmFsdWVzXG5cdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcblx0XHRlbGVtLnN0eWxlWyBuYW1lIF0gPSBvbGRbIG5hbWUgXTtcblx0fVxuXG5cdHJldHVybiByZXQ7XG59O1xuXG5cbnZhclxuXHQvLyBTd2FwcGFibGUgaWYgZGlzcGxheSBpcyBub25lIG9yIHN0YXJ0cyB3aXRoIHRhYmxlIGV4Y2VwdCBcInRhYmxlXCIsIFwidGFibGUtY2VsbFwiLCBvciBcInRhYmxlLWNhcHRpb25cIlxuXHQvLyBTZWUgaGVyZSBmb3IgZGlzcGxheSB2YWx1ZXM6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvQ1NTL2Rpc3BsYXlcblx0cmRpc3BsYXlzd2FwID0gL14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFxuXHRybnVtc3BsaXQgPSBuZXcgUmVnRXhwKCBcIl4oXCIgKyBwbnVtICsgXCIpKC4qKSRcIiwgXCJpXCIgKSxcblx0cnJlbE51bSA9IG5ldyBSZWdFeHAoIFwiXihbKy1dKT0oXCIgKyBwbnVtICsgXCIpXCIsIFwiaVwiICksXG5cblx0Y3NzU2hvdyA9IHsgcG9zaXRpb246IFwiYWJzb2x1dGVcIiwgdmlzaWJpbGl0eTogXCJoaWRkZW5cIiwgZGlzcGxheTogXCJibG9ja1wiIH0sXG5cdGNzc05vcm1hbFRyYW5zZm9ybSA9IHtcblx0XHRsZXR0ZXJTcGFjaW5nOiBcIjBcIixcblx0XHRmb250V2VpZ2h0OiBcIjQwMFwiXG5cdH0sXG5cblx0Y3NzUHJlZml4ZXMgPSBbIFwiV2Via2l0XCIsIFwiT1wiLCBcIk1velwiLCBcIm1zXCIgXTtcblxuLy8gUmV0dXJuIGEgY3NzIHByb3BlcnR5IG1hcHBlZCB0byBhIHBvdGVudGlhbGx5IHZlbmRvciBwcmVmaXhlZCBwcm9wZXJ0eVxuZnVuY3Rpb24gdmVuZG9yUHJvcE5hbWUoIHN0eWxlLCBuYW1lICkge1xuXG5cdC8vIFNob3J0Y3V0IGZvciBuYW1lcyB0aGF0IGFyZSBub3QgdmVuZG9yIHByZWZpeGVkXG5cdGlmICggbmFtZSBpbiBzdHlsZSApIHtcblx0XHRyZXR1cm4gbmFtZTtcblx0fVxuXG5cdC8vIENoZWNrIGZvciB2ZW5kb3IgcHJlZml4ZWQgbmFtZXNcblx0dmFyIGNhcE5hbWUgPSBuYW1lWzBdLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpLFxuXHRcdG9yaWdOYW1lID0gbmFtZSxcblx0XHRpID0gY3NzUHJlZml4ZXMubGVuZ3RoO1xuXG5cdHdoaWxlICggaS0tICkge1xuXHRcdG5hbWUgPSBjc3NQcmVmaXhlc1sgaSBdICsgY2FwTmFtZTtcblx0XHRpZiAoIG5hbWUgaW4gc3R5bGUgKSB7XG5cdFx0XHRyZXR1cm4gbmFtZTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gb3JpZ05hbWU7XG59XG5cbmZ1bmN0aW9uIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKSB7XG5cdHZhciBtYXRjaGVzID0gcm51bXNwbGl0LmV4ZWMoIHZhbHVlICk7XG5cdHJldHVybiBtYXRjaGVzID9cblx0XHQvLyBHdWFyZCBhZ2FpbnN0IHVuZGVmaW5lZCBcInN1YnRyYWN0XCIsIGUuZy4sIHdoZW4gdXNlZCBhcyBpbiBjc3NIb29rc1xuXHRcdE1hdGgubWF4KCAwLCBtYXRjaGVzWyAxIF0gLSAoIHN1YnRyYWN0IHx8IDAgKSApICsgKCBtYXRjaGVzWyAyIF0gfHwgXCJweFwiICkgOlxuXHRcdHZhbHVlO1xufVxuXG5mdW5jdGlvbiBhdWdtZW50V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEsIGlzQm9yZGVyQm94LCBzdHlsZXMgKSB7XG5cdHZhciBpID0gZXh0cmEgPT09ICggaXNCb3JkZXJCb3ggPyBcImJvcmRlclwiIDogXCJjb250ZW50XCIgKSA/XG5cdFx0Ly8gSWYgd2UgYWxyZWFkeSBoYXZlIHRoZSByaWdodCBtZWFzdXJlbWVudCwgYXZvaWQgYXVnbWVudGF0aW9uXG5cdFx0NCA6XG5cdFx0Ly8gT3RoZXJ3aXNlIGluaXRpYWxpemUgZm9yIGhvcml6b250YWwgb3IgdmVydGljYWwgcHJvcGVydGllc1xuXHRcdG5hbWUgPT09IFwid2lkdGhcIiA/IDEgOiAwLFxuXG5cdFx0dmFsID0gMDtcblxuXHRmb3IgKCA7IGkgPCA0OyBpICs9IDIgKSB7XG5cdFx0Ly8gQm90aCBib3ggbW9kZWxzIGV4Y2x1ZGUgbWFyZ2luLCBzbyBhZGQgaXQgaWYgd2Ugd2FudCBpdFxuXHRcdGlmICggZXh0cmEgPT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHR2YWwgKz0galF1ZXJ5LmNzcyggZWxlbSwgZXh0cmEgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBpc0JvcmRlckJveCApIHtcblx0XHRcdC8vIGJvcmRlci1ib3ggaW5jbHVkZXMgcGFkZGluZywgc28gcmVtb3ZlIGl0IGlmIHdlIHdhbnQgY29udGVudFxuXHRcdFx0aWYgKCBleHRyYSA9PT0gXCJjb250ZW50XCIgKSB7XG5cdFx0XHRcdHZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQXQgdGhpcyBwb2ludCwgZXh0cmEgaXNuJ3QgYm9yZGVyIG5vciBtYXJnaW4sIHNvIHJlbW92ZSBib3JkZXJcblx0XHRcdGlmICggZXh0cmEgIT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHRcdHZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJvcmRlclwiICsgY3NzRXhwYW5kWyBpIF0gKyBcIldpZHRoXCIsIHRydWUsIHN0eWxlcyApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50LCBzbyBhZGQgcGFkZGluZ1xuXHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50IG5vciBwYWRkaW5nLCBzbyBhZGQgYm9yZGVyXG5cdFx0XHRpZiAoIGV4dHJhICE9PSBcInBhZGRpbmdcIiApIHtcblx0XHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHZhbDtcbn1cblxuZnVuY3Rpb24gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKSB7XG5cblx0Ly8gU3RhcnQgd2l0aCBvZmZzZXQgcHJvcGVydHksIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gdGhlIGJvcmRlci1ib3ggdmFsdWVcblx0dmFyIHZhbHVlSXNCb3JkZXJCb3ggPSB0cnVlLFxuXHRcdHZhbCA9IG5hbWUgPT09IFwid2lkdGhcIiA/IGVsZW0ub2Zmc2V0V2lkdGggOiBlbGVtLm9mZnNldEhlaWdodCxcblx0XHRzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKSxcblx0XHRpc0JvcmRlckJveCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCI7XG5cblx0Ly8gU29tZSBub24taHRtbCBlbGVtZW50cyByZXR1cm4gdW5kZWZpbmVkIGZvciBvZmZzZXRXaWR0aCwgc28gY2hlY2sgZm9yIG51bGwvdW5kZWZpbmVkXG5cdC8vIHN2ZyAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY0OTI4NVxuXHQvLyBNYXRoTUwgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD00OTE2Njhcblx0aWYgKCB2YWwgPD0gMCB8fCB2YWwgPT0gbnVsbCApIHtcblx0XHQvLyBGYWxsIGJhY2sgdG8gY29tcHV0ZWQgdGhlbiB1bmNvbXB1dGVkIGNzcyBpZiBuZWNlc3Nhcnlcblx0XHR2YWwgPSBjdXJDU1MoIGVsZW0sIG5hbWUsIHN0eWxlcyApO1xuXHRcdGlmICggdmFsIDwgMCB8fCB2YWwgPT0gbnVsbCApIHtcblx0XHRcdHZhbCA9IGVsZW0uc3R5bGVbIG5hbWUgXTtcblx0XHR9XG5cblx0XHQvLyBDb21wdXRlZCB1bml0IGlzIG5vdCBwaXhlbHMuIFN0b3AgaGVyZSBhbmQgcmV0dXJuLlxuXHRcdGlmICggcm51bW5vbnB4LnRlc3QodmFsKSApIHtcblx0XHRcdHJldHVybiB2YWw7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIHN0eWxlIGluIGNhc2UgYSBicm93c2VyIHdoaWNoIHJldHVybnMgdW5yZWxpYWJsZSB2YWx1ZXNcblx0XHQvLyBmb3IgZ2V0Q29tcHV0ZWRTdHlsZSBzaWxlbnRseSBmYWxscyBiYWNrIHRvIHRoZSByZWxpYWJsZSBlbGVtLnN0eWxlXG5cdFx0dmFsdWVJc0JvcmRlckJveCA9IGlzQm9yZGVyQm94ICYmXG5cdFx0XHQoIHN1cHBvcnQuYm94U2l6aW5nUmVsaWFibGUoKSB8fCB2YWwgPT09IGVsZW0uc3R5bGVbIG5hbWUgXSApO1xuXG5cdFx0Ly8gTm9ybWFsaXplIFwiXCIsIGF1dG8sIGFuZCBwcmVwYXJlIGZvciBleHRyYVxuXHRcdHZhbCA9IHBhcnNlRmxvYXQoIHZhbCApIHx8IDA7XG5cdH1cblxuXHQvLyBVc2UgdGhlIGFjdGl2ZSBib3gtc2l6aW5nIG1vZGVsIHRvIGFkZC9zdWJ0cmFjdCBpcnJlbGV2YW50IHN0eWxlc1xuXHRyZXR1cm4gKCB2YWwgK1xuXHRcdGF1Z21lbnRXaWR0aE9ySGVpZ2h0KFxuXHRcdFx0ZWxlbSxcblx0XHRcdG5hbWUsXG5cdFx0XHRleHRyYSB8fCAoIGlzQm9yZGVyQm94ID8gXCJib3JkZXJcIiA6IFwiY29udGVudFwiICksXG5cdFx0XHR2YWx1ZUlzQm9yZGVyQm94LFxuXHRcdFx0c3R5bGVzXG5cdFx0KVxuXHQpICsgXCJweFwiO1xufVxuXG5mdW5jdGlvbiBzaG93SGlkZSggZWxlbWVudHMsIHNob3cgKSB7XG5cdHZhciBkaXNwbGF5LCBlbGVtLCBoaWRkZW4sXG5cdFx0dmFsdWVzID0gW10sXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDtcblxuXHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdGVsZW0gPSBlbGVtZW50c1sgaW5kZXggXTtcblx0XHRpZiAoICFlbGVtLnN0eWxlICkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0dmFsdWVzWyBpbmRleCBdID0gZGF0YV9wcml2LmdldCggZWxlbSwgXCJvbGRkaXNwbGF5XCIgKTtcblx0XHRkaXNwbGF5ID0gZWxlbS5zdHlsZS5kaXNwbGF5O1xuXHRcdGlmICggc2hvdyApIHtcblx0XHRcdC8vIFJlc2V0IHRoZSBpbmxpbmUgZGlzcGxheSBvZiB0aGlzIGVsZW1lbnQgdG8gbGVhcm4gaWYgaXQgaXNcblx0XHRcdC8vIGJlaW5nIGhpZGRlbiBieSBjYXNjYWRlZCBydWxlcyBvciBub3Rcblx0XHRcdGlmICggIXZhbHVlc1sgaW5kZXggXSAmJiBkaXNwbGF5ID09PSBcIm5vbmVcIiApIHtcblx0XHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IGVsZW1lbnRzIHdoaWNoIGhhdmUgYmVlbiBvdmVycmlkZGVuIHdpdGggZGlzcGxheTogbm9uZVxuXHRcdFx0Ly8gaW4gYSBzdHlsZXNoZWV0IHRvIHdoYXRldmVyIHRoZSBkZWZhdWx0IGJyb3dzZXIgc3R5bGUgaXNcblx0XHRcdC8vIGZvciBzdWNoIGFuIGVsZW1lbnRcblx0XHRcdGlmICggZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICYmIGlzSGlkZGVuKCBlbGVtICkgKSB7XG5cdFx0XHRcdHZhbHVlc1sgaW5kZXggXSA9IGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIFwib2xkZGlzcGxheVwiLCBkZWZhdWx0RGlzcGxheShlbGVtLm5vZGVOYW1lKSApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRoaWRkZW4gPSBpc0hpZGRlbiggZWxlbSApO1xuXG5cdFx0XHRpZiAoIGRpc3BsYXkgIT09IFwibm9uZVwiIHx8ICFoaWRkZW4gKSB7XG5cdFx0XHRcdGRhdGFfcHJpdi5zZXQoIGVsZW0sIFwib2xkZGlzcGxheVwiLCBoaWRkZW4gPyBkaXNwbGF5IDogalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFNldCB0aGUgZGlzcGxheSBvZiBtb3N0IG9mIHRoZSBlbGVtZW50cyBpbiBhIHNlY29uZCBsb29wXG5cdC8vIHRvIGF2b2lkIHRoZSBjb25zdGFudCByZWZsb3dcblx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRlbGVtID0gZWxlbWVudHNbIGluZGV4IF07XG5cdFx0aWYgKCAhZWxlbS5zdHlsZSApIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRpZiAoICFzaG93IHx8IGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIgfHwgZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICkge1xuXHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID0gc2hvdyA/IHZhbHVlc1sgaW5kZXggXSB8fCBcIlwiIDogXCJub25lXCI7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW1lbnRzO1xufVxuXG5qUXVlcnkuZXh0ZW5kKHtcblxuXHQvLyBBZGQgaW4gc3R5bGUgcHJvcGVydHkgaG9va3MgZm9yIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHRcblx0Ly8gYmVoYXZpb3Igb2YgZ2V0dGluZyBhbmQgc2V0dGluZyBhIHN0eWxlIHByb3BlcnR5XG5cdGNzc0hvb2tzOiB7XG5cdFx0b3BhY2l0eToge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cblx0XHRcdFx0XHQvLyBXZSBzaG91bGQgYWx3YXlzIGdldCBhIG51bWJlciBiYWNrIGZyb20gb3BhY2l0eVxuXHRcdFx0XHRcdHZhciByZXQgPSBjdXJDU1MoIGVsZW0sIFwib3BhY2l0eVwiICk7XG5cdFx0XHRcdFx0cmV0dXJuIHJldCA9PT0gXCJcIiA/IFwiMVwiIDogcmV0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdC8vIERvbid0IGF1dG9tYXRpY2FsbHkgYWRkIFwicHhcIiB0byB0aGVzZSBwb3NzaWJseS11bml0bGVzcyBwcm9wZXJ0aWVzXG5cdGNzc051bWJlcjoge1xuXHRcdFwiY29sdW1uQ291bnRcIjogdHJ1ZSxcblx0XHRcImZpbGxPcGFjaXR5XCI6IHRydWUsXG5cdFx0XCJmbGV4R3Jvd1wiOiB0cnVlLFxuXHRcdFwiZmxleFNocmlua1wiOiB0cnVlLFxuXHRcdFwiZm9udFdlaWdodFwiOiB0cnVlLFxuXHRcdFwibGluZUhlaWdodFwiOiB0cnVlLFxuXHRcdFwib3BhY2l0eVwiOiB0cnVlLFxuXHRcdFwib3JkZXJcIjogdHJ1ZSxcblx0XHRcIm9ycGhhbnNcIjogdHJ1ZSxcblx0XHRcIndpZG93c1wiOiB0cnVlLFxuXHRcdFwiekluZGV4XCI6IHRydWUsXG5cdFx0XCJ6b29tXCI6IHRydWVcblx0fSxcblxuXHQvLyBBZGQgaW4gcHJvcGVydGllcyB3aG9zZSBuYW1lcyB5b3Ugd2lzaCB0byBmaXggYmVmb3JlXG5cdC8vIHNldHRpbmcgb3IgZ2V0dGluZyB0aGUgdmFsdWVcblx0Y3NzUHJvcHM6IHtcblx0XHRcImZsb2F0XCI6IFwiY3NzRmxvYXRcIlxuXHR9LFxuXG5cdC8vIEdldCBhbmQgc2V0IHRoZSBzdHlsZSBwcm9wZXJ0eSBvbiBhIERPTSBOb2RlXG5cdHN0eWxlOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUsIGV4dHJhICkge1xuXG5cdFx0Ly8gRG9uJ3Qgc2V0IHN0eWxlcyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzXG5cdFx0aWYgKCAhZWxlbSB8fCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggfHwgIWVsZW0uc3R5bGUgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lXG5cdFx0dmFyIHJldCwgdHlwZSwgaG9va3MsXG5cdFx0XHRvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKSxcblx0XHRcdHN0eWxlID0gZWxlbS5zdHlsZTtcblxuXHRcdG5hbWUgPSBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gfHwgKCBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gPSB2ZW5kb3JQcm9wTmFtZSggc3R5bGUsIG9yaWdOYW1lICkgKTtcblxuXHRcdC8vIEdldHMgaG9vayBmb3IgdGhlIHByZWZpeGVkIHZlcnNpb24sIHRoZW4gdW5wcmVmaXhlZCB2ZXJzaW9uXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07XG5cblx0XHQvLyBDaGVjayBpZiB3ZSdyZSBzZXR0aW5nIGEgdmFsdWVcblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR0eXBlID0gdHlwZW9mIHZhbHVlO1xuXG5cdFx0XHQvLyBDb252ZXJ0IFwiKz1cIiBvciBcIi09XCIgdG8gcmVsYXRpdmUgbnVtYmVycyAoIzczNDUpXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwic3RyaW5nXCIgJiYgKHJldCA9IHJyZWxOdW0uZXhlYyggdmFsdWUgKSkgKSB7XG5cdFx0XHRcdHZhbHVlID0gKCByZXRbMV0gKyAxICkgKiByZXRbMl0gKyBwYXJzZUZsb2F0KCBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lICkgKTtcblx0XHRcdFx0Ly8gRml4ZXMgYnVnICM5MjM3XG5cdFx0XHRcdHR5cGUgPSBcIm51bWJlclwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYWtlIHN1cmUgdGhhdCBudWxsIGFuZCBOYU4gdmFsdWVzIGFyZW4ndCBzZXQgKCM3MTE2KVxuXHRcdFx0aWYgKCB2YWx1ZSA9PSBudWxsIHx8IHZhbHVlICE9PSB2YWx1ZSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBhIG51bWJlciwgYWRkICdweCcgdG8gdGhlIChleGNlcHQgZm9yIGNlcnRhaW4gQ1NTIHByb3BlcnRpZXMpXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwibnVtYmVyXCIgJiYgIWpRdWVyeS5jc3NOdW1iZXJbIG9yaWdOYW1lIF0gKSB7XG5cdFx0XHRcdHZhbHVlICs9IFwicHhcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU5LTExK1xuXHRcdFx0Ly8gYmFja2dyb3VuZC0qIHByb3BzIGFmZmVjdCBvcmlnaW5hbCBjbG9uZSdzIHZhbHVlc1xuXHRcdFx0aWYgKCAhc3VwcG9ydC5jbGVhckNsb25lU3R5bGUgJiYgdmFsdWUgPT09IFwiXCIgJiYgbmFtZS5pbmRleE9mKCBcImJhY2tncm91bmRcIiApID09PSAwICkge1xuXHRcdFx0XHRzdHlsZVsgbmFtZSBdID0gXCJpbmhlcml0XCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQsIHVzZSB0aGF0IHZhbHVlLCBvdGhlcndpc2UganVzdCBzZXQgdGhlIHNwZWNpZmllZCB2YWx1ZVxuXHRcdFx0aWYgKCAhaG9va3MgfHwgIShcInNldFwiIGluIGhvb2tzKSB8fCAodmFsdWUgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBleHRyYSApKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRzdHlsZVsgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHR9XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIG5vbi1jb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG5cdFx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgZmFsc2UsIGV4dHJhICkpICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE90aGVyd2lzZSBqdXN0IGdldCB0aGUgdmFsdWUgZnJvbSB0aGUgc3R5bGUgb2JqZWN0XG5cdFx0XHRyZXR1cm4gc3R5bGVbIG5hbWUgXTtcblx0XHR9XG5cdH0sXG5cblx0Y3NzOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZXh0cmEsIHN0eWxlcyApIHtcblx0XHR2YXIgdmFsLCBudW0sIGhvb2tzLFxuXHRcdFx0b3JpZ05hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lICk7XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG5hbWVcblx0XHRuYW1lID0galF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdIHx8ICggalF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdID0gdmVuZG9yUHJvcE5hbWUoIGVsZW0uc3R5bGUsIG9yaWdOYW1lICkgKTtcblxuXHRcdC8vIFRyeSBwcmVmaXhlZCBuYW1lIGZvbGxvd2VkIGJ5IHRoZSB1bnByZWZpeGVkIG5hbWVcblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTtcblxuXHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQgZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG5cdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICkge1xuXHRcdFx0dmFsID0gaG9va3MuZ2V0KCBlbGVtLCB0cnVlLCBleHRyYSApO1xuXHRcdH1cblxuXHRcdC8vIE90aGVyd2lzZSwgaWYgYSB3YXkgdG8gZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBleGlzdHMsIHVzZSB0aGF0XG5cdFx0aWYgKCB2YWwgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHZhbCA9IGN1ckNTUyggZWxlbSwgbmFtZSwgc3R5bGVzICk7XG5cdFx0fVxuXG5cdFx0Ly8gQ29udmVydCBcIm5vcm1hbFwiIHRvIGNvbXB1dGVkIHZhbHVlXG5cdFx0aWYgKCB2YWwgPT09IFwibm9ybWFsXCIgJiYgbmFtZSBpbiBjc3NOb3JtYWxUcmFuc2Zvcm0gKSB7XG5cdFx0XHR2YWwgPSBjc3NOb3JtYWxUcmFuc2Zvcm1bIG5hbWUgXTtcblx0XHR9XG5cblx0XHQvLyBNYWtlIG51bWVyaWMgaWYgZm9yY2VkIG9yIGEgcXVhbGlmaWVyIHdhcyBwcm92aWRlZCBhbmQgdmFsIGxvb2tzIG51bWVyaWNcblx0XHRpZiAoIGV4dHJhID09PSBcIlwiIHx8IGV4dHJhICkge1xuXHRcdFx0bnVtID0gcGFyc2VGbG9hdCggdmFsICk7XG5cdFx0XHRyZXR1cm4gZXh0cmEgPT09IHRydWUgfHwgalF1ZXJ5LmlzTnVtZXJpYyggbnVtICkgPyBudW0gfHwgMCA6IHZhbDtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbDtcblx0fVxufSk7XG5cbmpRdWVyeS5lYWNoKFsgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSA9IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCwgZXh0cmEgKSB7XG5cdFx0XHRpZiAoIGNvbXB1dGVkICkge1xuXG5cdFx0XHRcdC8vIENlcnRhaW4gZWxlbWVudHMgY2FuIGhhdmUgZGltZW5zaW9uIGluZm8gaWYgd2UgaW52aXNpYmx5IHNob3cgdGhlbVxuXHRcdFx0XHQvLyBidXQgaXQgbXVzdCBoYXZlIGEgY3VycmVudCBkaXNwbGF5IHN0eWxlIHRoYXQgd291bGQgYmVuZWZpdFxuXHRcdFx0XHRyZXR1cm4gcmRpc3BsYXlzd2FwLnRlc3QoIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgKSAmJiBlbGVtLm9mZnNldFdpZHRoID09PSAwID9cblx0XHRcdFx0XHRqUXVlcnkuc3dhcCggZWxlbSwgY3NzU2hvdywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTtcblx0XHRcdFx0XHR9KSA6XG5cdFx0XHRcdFx0Z2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIGV4dHJhICkge1xuXHRcdFx0dmFyIHN0eWxlcyA9IGV4dHJhICYmIGdldFN0eWxlcyggZWxlbSApO1xuXHRcdFx0cmV0dXJuIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgZXh0cmEgP1xuXHRcdFx0XHRhdWdtZW50V2lkdGhPckhlaWdodChcblx0XHRcdFx0XHRlbGVtLFxuXHRcdFx0XHRcdG5hbWUsXG5cdFx0XHRcdFx0ZXh0cmEsXG5cdFx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgXCJib3hTaXppbmdcIiwgZmFsc2UsIHN0eWxlcyApID09PSBcImJvcmRlci1ib3hcIixcblx0XHRcdFx0XHRzdHlsZXNcblx0XHRcdFx0KSA6IDBcblx0XHRcdCk7XG5cdFx0fVxuXHR9O1xufSk7XG5cbi8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG5qUXVlcnkuY3NzSG9va3MubWFyZ2luUmlnaHQgPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucmVsaWFibGVNYXJnaW5SaWdodCxcblx0ZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnN3YXAoIGVsZW0sIHsgXCJkaXNwbGF5XCI6IFwiaW5saW5lLWJsb2NrXCIgfSxcblx0XHRcdFx0Y3VyQ1NTLCBbIGVsZW0sIFwibWFyZ2luUmlnaHRcIiBdICk7XG5cdFx0fVxuXHR9XG4pO1xuXG4vLyBUaGVzZSBob29rcyBhcmUgdXNlZCBieSBhbmltYXRlIHRvIGV4cGFuZCBwcm9wZXJ0aWVzXG5qUXVlcnkuZWFjaCh7XG5cdG1hcmdpbjogXCJcIixcblx0cGFkZGluZzogXCJcIixcblx0Ym9yZGVyOiBcIldpZHRoXCJcbn0sIGZ1bmN0aW9uKCBwcmVmaXgsIHN1ZmZpeCApIHtcblx0alF1ZXJ5LmNzc0hvb2tzWyBwcmVmaXggKyBzdWZmaXggXSA9IHtcblx0XHRleHBhbmQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBpID0gMCxcblx0XHRcdFx0ZXhwYW5kZWQgPSB7fSxcblxuXHRcdFx0XHQvLyBBc3N1bWVzIGEgc2luZ2xlIG51bWJlciBpZiBub3QgYSBzdHJpbmdcblx0XHRcdFx0cGFydHMgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyB2YWx1ZS5zcGxpdChcIiBcIikgOiBbIHZhbHVlIF07XG5cblx0XHRcdGZvciAoIDsgaSA8IDQ7IGkrKyApIHtcblx0XHRcdFx0ZXhwYW5kZWRbIHByZWZpeCArIGNzc0V4cGFuZFsgaSBdICsgc3VmZml4IF0gPVxuXHRcdFx0XHRcdHBhcnRzWyBpIF0gfHwgcGFydHNbIGkgLSAyIF0gfHwgcGFydHNbIDAgXTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGV4cGFuZGVkO1xuXHRcdH1cblx0fTtcblxuXHRpZiAoICFybWFyZ2luLnRlc3QoIHByZWZpeCApICkge1xuXHRcdGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0uc2V0ID0gc2V0UG9zaXRpdmVOdW1iZXI7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0Y3NzOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0dmFyIHN0eWxlcywgbGVuLFxuXHRcdFx0XHRtYXAgPSB7fSxcblx0XHRcdFx0aSA9IDA7XG5cblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIG5hbWUgKSApIHtcblx0XHRcdFx0c3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICk7XG5cdFx0XHRcdGxlbiA9IG5hbWUubGVuZ3RoO1xuXG5cdFx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdG1hcFsgbmFtZVsgaSBdIF0gPSBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lWyBpIF0sIGZhbHNlLCBzdHlsZXMgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBtYXA7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lLCB2YWx1ZSApIDpcblx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgbmFtZSApO1xuXHRcdH0sIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApO1xuXHR9LFxuXHRzaG93OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2hvd0hpZGUoIHRoaXMsIHRydWUgKTtcblx0fSxcblx0aGlkZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNob3dIaWRlKCB0aGlzICk7XG5cdH0sXG5cdHRvZ2dsZTogZnVuY3Rpb24oIHN0YXRlICkge1xuXHRcdGlmICggdHlwZW9mIHN0YXRlID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRcdHJldHVybiBzdGF0ZSA/IHRoaXMuc2hvdygpIDogdGhpcy5oaWRlKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGlmICggaXNIaWRkZW4oIHRoaXMgKSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuc2hvdygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59KTtcblxuXG5mdW5jdGlvbiBUd2VlbiggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKSB7XG5cdHJldHVybiBuZXcgVHdlZW4ucHJvdG90eXBlLmluaXQoIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nICk7XG59XG5qUXVlcnkuVHdlZW4gPSBUd2VlbjtcblxuVHdlZW4ucHJvdG90eXBlID0ge1xuXHRjb25zdHJ1Y3RvcjogVHdlZW4sXG5cdGluaXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZywgdW5pdCApIHtcblx0XHR0aGlzLmVsZW0gPSBlbGVtO1xuXHRcdHRoaXMucHJvcCA9IHByb3A7XG5cdFx0dGhpcy5lYXNpbmcgPSBlYXNpbmcgfHwgXCJzd2luZ1wiO1xuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0dGhpcy5zdGFydCA9IHRoaXMubm93ID0gdGhpcy5jdXIoKTtcblx0XHR0aGlzLmVuZCA9IGVuZDtcblx0XHR0aGlzLnVuaXQgPSB1bml0IHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApO1xuXHR9LFxuXHRjdXI6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRyZXR1cm4gaG9va3MgJiYgaG9va3MuZ2V0ID9cblx0XHRcdGhvb2tzLmdldCggdGhpcyApIDpcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5nZXQoIHRoaXMgKTtcblx0fSxcblx0cnVuOiBmdW5jdGlvbiggcGVyY2VudCApIHtcblx0XHR2YXIgZWFzZWQsXG5cdFx0XHRob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kdXJhdGlvbiApIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBqUXVlcnkuZWFzaW5nWyB0aGlzLmVhc2luZyBdKFxuXHRcdFx0XHRwZXJjZW50LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKiBwZXJjZW50LCAwLCAxLCB0aGlzLm9wdGlvbnMuZHVyYXRpb25cblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBwZXJjZW50O1xuXHRcdH1cblx0XHR0aGlzLm5vdyA9ICggdGhpcy5lbmQgLSB0aGlzLnN0YXJ0ICkgKiBlYXNlZCArIHRoaXMuc3RhcnQ7XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5zdGVwICkge1xuXHRcdFx0dGhpcy5vcHRpb25zLnN0ZXAuY2FsbCggdGhpcy5lbGVtLCB0aGlzLm5vdywgdGhpcyApO1xuXHRcdH1cblxuXHRcdGlmICggaG9va3MgJiYgaG9va3Muc2V0ICkge1xuXHRcdFx0aG9va3Muc2V0KCB0aGlzICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5zZXQoIHRoaXMgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn07XG5cblR3ZWVuLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZSA9IFR3ZWVuLnByb3RvdHlwZTtcblxuVHdlZW4ucHJvcEhvb2tzID0ge1xuXHRfZGVmYXVsdDoge1xuXHRcdGdldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXHRcdFx0dmFyIHJlc3VsdDtcblxuXHRcdFx0aWYgKCB0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gIT0gbnVsbCAmJlxuXHRcdFx0XHQoIXR3ZWVuLmVsZW0uc3R5bGUgfHwgdHdlZW4uZWxlbS5zdHlsZVsgdHdlZW4ucHJvcCBdID09IG51bGwpICkge1xuXHRcdFx0XHRyZXR1cm4gdHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQYXNzaW5nIGFuIGVtcHR5IHN0cmluZyBhcyBhIDNyZCBwYXJhbWV0ZXIgdG8gLmNzcyB3aWxsIGF1dG9tYXRpY2FsbHlcblx0XHRcdC8vIGF0dGVtcHQgYSBwYXJzZUZsb2F0IGFuZCBmYWxsYmFjayB0byBhIHN0cmluZyBpZiB0aGUgcGFyc2UgZmFpbHMuXG5cdFx0XHQvLyBTaW1wbGUgdmFsdWVzIHN1Y2ggYXMgXCIxMHB4XCIgYXJlIHBhcnNlZCB0byBGbG9hdDtcblx0XHRcdC8vIGNvbXBsZXggdmFsdWVzIHN1Y2ggYXMgXCJyb3RhdGUoMXJhZClcIiBhcmUgcmV0dXJuZWQgYXMtaXMuXG5cdFx0XHRyZXN1bHQgPSBqUXVlcnkuY3NzKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCBcIlwiICk7XG5cdFx0XHQvLyBFbXB0eSBzdHJpbmdzLCBudWxsLCB1bmRlZmluZWQgYW5kIFwiYXV0b1wiIGFyZSBjb252ZXJ0ZWQgdG8gMC5cblx0XHRcdHJldHVybiAhcmVzdWx0IHx8IHJlc3VsdCA9PT0gXCJhdXRvXCIgPyAwIDogcmVzdWx0O1xuXHRcdH0sXG5cdFx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0XHQvLyBVc2Ugc3RlcCBob29rIGZvciBiYWNrIGNvbXBhdC5cblx0XHRcdC8vIFVzZSBjc3NIb29rIGlmIGl0cyB0aGVyZS5cblx0XHRcdC8vIFVzZSAuc3R5bGUgaWYgYXZhaWxhYmxlIGFuZCB1c2UgcGxhaW4gcHJvcGVydGllcyB3aGVyZSBhdmFpbGFibGUuXG5cdFx0XHRpZiAoIGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0gKSB7XG5cdFx0XHRcdGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0oIHR3ZWVuICk7XG5cdFx0XHR9IGVsc2UgaWYgKCB0d2Vlbi5lbGVtLnN0eWxlICYmICggdHdlZW4uZWxlbS5zdHlsZVsgalF1ZXJ5LmNzc1Byb3BzWyB0d2Vlbi5wcm9wIF0gXSAhPSBudWxsIHx8IGpRdWVyeS5jc3NIb29rc1sgdHdlZW4ucHJvcCBdICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5zdHlsZSggdHdlZW4uZWxlbSwgdHdlZW4ucHJvcCwgdHdlZW4ubm93ICsgdHdlZW4udW5pdCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxuLy8gU3VwcG9ydDogSUU5XG4vLyBQYW5pYyBiYXNlZCBhcHByb2FjaCB0byBzZXR0aW5nIHRoaW5ncyBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblR3ZWVuLnByb3BIb29rcy5zY3JvbGxUb3AgPSBUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsTGVmdCA9IHtcblx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0aWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlICYmIHR3ZWVuLmVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdztcblx0XHR9XG5cdH1cbn07XG5cbmpRdWVyeS5lYXNpbmcgPSB7XG5cdGxpbmVhcjogZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIHA7XG5cdH0sXG5cdHN3aW5nOiBmdW5jdGlvbiggcCApIHtcblx0XHRyZXR1cm4gMC41IC0gTWF0aC5jb3MoIHAgKiBNYXRoLlBJICkgLyAyO1xuXHR9XG59O1xuXG5qUXVlcnkuZnggPSBUd2Vlbi5wcm90b3R5cGUuaW5pdDtcblxuLy8gQmFjayBDb21wYXQgPDEuOCBleHRlbnNpb24gcG9pbnRcbmpRdWVyeS5meC5zdGVwID0ge307XG5cblxuXG5cbnZhclxuXHRmeE5vdywgdGltZXJJZCxcblx0cmZ4dHlwZXMgPSAvXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sXG5cdHJmeG51bSA9IG5ldyBSZWdFeHAoIFwiXig/OihbKy1dKT18KShcIiArIHBudW0gKyBcIikoW2EteiVdKikkXCIsIFwiaVwiICksXG5cdHJydW4gPSAvcXVldWVIb29rcyQvLFxuXHRhbmltYXRpb25QcmVmaWx0ZXJzID0gWyBkZWZhdWx0UHJlZmlsdGVyIF0sXG5cdHR3ZWVuZXJzID0ge1xuXHRcdFwiKlwiOiBbIGZ1bmN0aW9uKCBwcm9wLCB2YWx1ZSApIHtcblx0XHRcdHZhciB0d2VlbiA9IHRoaXMuY3JlYXRlVHdlZW4oIHByb3AsIHZhbHVlICksXG5cdFx0XHRcdHRhcmdldCA9IHR3ZWVuLmN1cigpLFxuXHRcdFx0XHRwYXJ0cyA9IHJmeG51bS5leGVjKCB2YWx1ZSApLFxuXHRcdFx0XHR1bml0ID0gcGFydHMgJiYgcGFydHNbIDMgXSB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSA/IFwiXCIgOiBcInB4XCIgKSxcblxuXHRcdFx0XHQvLyBTdGFydGluZyB2YWx1ZSBjb21wdXRhdGlvbiBpcyByZXF1aXJlZCBmb3IgcG90ZW50aWFsIHVuaXQgbWlzbWF0Y2hlc1xuXHRcdFx0XHRzdGFydCA9ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdIHx8IHVuaXQgIT09IFwicHhcIiAmJiArdGFyZ2V0ICkgJiZcblx0XHRcdFx0XHRyZnhudW0uZXhlYyggalF1ZXJ5LmNzcyggdHdlZW4uZWxlbSwgcHJvcCApICksXG5cdFx0XHRcdHNjYWxlID0gMSxcblx0XHRcdFx0bWF4SXRlcmF0aW9ucyA9IDIwO1xuXG5cdFx0XHRpZiAoIHN0YXJ0ICYmIHN0YXJ0WyAzIF0gIT09IHVuaXQgKSB7XG5cdFx0XHRcdC8vIFRydXN0IHVuaXRzIHJlcG9ydGVkIGJ5IGpRdWVyeS5jc3Ncblx0XHRcdFx0dW5pdCA9IHVuaXQgfHwgc3RhcnRbIDMgXTtcblxuXHRcdFx0XHQvLyBNYWtlIHN1cmUgd2UgdXBkYXRlIHRoZSB0d2VlbiBwcm9wZXJ0aWVzIGxhdGVyIG9uXG5cdFx0XHRcdHBhcnRzID0gcGFydHMgfHwgW107XG5cblx0XHRcdFx0Ly8gSXRlcmF0aXZlbHkgYXBwcm94aW1hdGUgZnJvbSBhIG5vbnplcm8gc3RhcnRpbmcgcG9pbnRcblx0XHRcdFx0c3RhcnQgPSArdGFyZ2V0IHx8IDE7XG5cblx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdC8vIElmIHByZXZpb3VzIGl0ZXJhdGlvbiB6ZXJvZWQgb3V0LCBkb3VibGUgdW50aWwgd2UgZ2V0ICpzb21ldGhpbmcqLlxuXHRcdFx0XHRcdC8vIFVzZSBzdHJpbmcgZm9yIGRvdWJsaW5nIHNvIHdlIGRvbid0IGFjY2lkZW50YWxseSBzZWUgc2NhbGUgYXMgdW5jaGFuZ2VkIGJlbG93XG5cdFx0XHRcdFx0c2NhbGUgPSBzY2FsZSB8fCBcIi41XCI7XG5cblx0XHRcdFx0XHQvLyBBZGp1c3QgYW5kIGFwcGx5XG5cdFx0XHRcdFx0c3RhcnQgPSBzdGFydCAvIHNjYWxlO1xuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggdHdlZW4uZWxlbSwgcHJvcCwgc3RhcnQgKyB1bml0ICk7XG5cblx0XHRcdFx0Ly8gVXBkYXRlIHNjYWxlLCB0b2xlcmF0aW5nIHplcm8gb3IgTmFOIGZyb20gdHdlZW4uY3VyKCksXG5cdFx0XHRcdC8vIGJyZWFrIHRoZSBsb29wIGlmIHNjYWxlIGlzIHVuY2hhbmdlZCBvciBwZXJmZWN0LCBvciBpZiB3ZSd2ZSBqdXN0IGhhZCBlbm91Z2hcblx0XHRcdFx0fSB3aGlsZSAoIHNjYWxlICE9PSAoc2NhbGUgPSB0d2Vlbi5jdXIoKSAvIHRhcmdldCkgJiYgc2NhbGUgIT09IDEgJiYgLS1tYXhJdGVyYXRpb25zICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFVwZGF0ZSB0d2VlbiBwcm9wZXJ0aWVzXG5cdFx0XHRpZiAoIHBhcnRzICkge1xuXHRcdFx0XHRzdGFydCA9IHR3ZWVuLnN0YXJ0ID0gK3N0YXJ0IHx8ICt0YXJnZXQgfHwgMDtcblx0XHRcdFx0dHdlZW4udW5pdCA9IHVuaXQ7XG5cdFx0XHRcdC8vIElmIGEgKz0vLT0gdG9rZW4gd2FzIHByb3ZpZGVkLCB3ZSdyZSBkb2luZyBhIHJlbGF0aXZlIGFuaW1hdGlvblxuXHRcdFx0XHR0d2Vlbi5lbmQgPSBwYXJ0c1sgMSBdID9cblx0XHRcdFx0XHRzdGFydCArICggcGFydHNbIDEgXSArIDEgKSAqIHBhcnRzWyAyIF0gOlxuXHRcdFx0XHRcdCtwYXJ0c1sgMiBdO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdHdlZW47XG5cdFx0fSBdXG5cdH07XG5cbi8vIEFuaW1hdGlvbnMgY3JlYXRlZCBzeW5jaHJvbm91c2x5IHdpbGwgcnVuIHN5bmNocm9ub3VzbHlcbmZ1bmN0aW9uIGNyZWF0ZUZ4Tm93KCkge1xuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdGZ4Tm93ID0gdW5kZWZpbmVkO1xuXHR9KTtcblx0cmV0dXJuICggZnhOb3cgPSBqUXVlcnkubm93KCkgKTtcbn1cblxuLy8gR2VuZXJhdGUgcGFyYW1ldGVycyB0byBjcmVhdGUgYSBzdGFuZGFyZCBhbmltYXRpb25cbmZ1bmN0aW9uIGdlbkZ4KCB0eXBlLCBpbmNsdWRlV2lkdGggKSB7XG5cdHZhciB3aGljaCxcblx0XHRpID0gMCxcblx0XHRhdHRycyA9IHsgaGVpZ2h0OiB0eXBlIH07XG5cblx0Ly8gSWYgd2UgaW5jbHVkZSB3aWR0aCwgc3RlcCB2YWx1ZSBpcyAxIHRvIGRvIGFsbCBjc3NFeHBhbmQgdmFsdWVzLFxuXHQvLyBvdGhlcndpc2Ugc3RlcCB2YWx1ZSBpcyAyIHRvIHNraXAgb3ZlciBMZWZ0IGFuZCBSaWdodFxuXHRpbmNsdWRlV2lkdGggPSBpbmNsdWRlV2lkdGggPyAxIDogMDtcblx0Zm9yICggOyBpIDwgNCA7IGkgKz0gMiAtIGluY2x1ZGVXaWR0aCApIHtcblx0XHR3aGljaCA9IGNzc0V4cGFuZFsgaSBdO1xuXHRcdGF0dHJzWyBcIm1hcmdpblwiICsgd2hpY2ggXSA9IGF0dHJzWyBcInBhZGRpbmdcIiArIHdoaWNoIF0gPSB0eXBlO1xuXHR9XG5cblx0aWYgKCBpbmNsdWRlV2lkdGggKSB7XG5cdFx0YXR0cnMub3BhY2l0eSA9IGF0dHJzLndpZHRoID0gdHlwZTtcblx0fVxuXG5cdHJldHVybiBhdHRycztcbn1cblxuZnVuY3Rpb24gY3JlYXRlVHdlZW4oIHZhbHVlLCBwcm9wLCBhbmltYXRpb24gKSB7XG5cdHZhciB0d2Vlbixcblx0XHRjb2xsZWN0aW9uID0gKCB0d2VlbmVyc1sgcHJvcCBdIHx8IFtdICkuY29uY2F0KCB0d2VlbmVyc1sgXCIqXCIgXSApLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRpZiAoICh0d2VlbiA9IGNvbGxlY3Rpb25bIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBwcm9wLCB2YWx1ZSApKSApIHtcblxuXHRcdFx0Ly8gV2UncmUgZG9uZSB3aXRoIHRoaXMgcHJvcGVydHlcblx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gZGVmYXVsdFByZWZpbHRlciggZWxlbSwgcHJvcHMsIG9wdHMgKSB7XG5cdC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cblx0dmFyIHByb3AsIHZhbHVlLCB0b2dnbGUsIHR3ZWVuLCBob29rcywgb2xkZmlyZSwgZGlzcGxheSwgY2hlY2tEaXNwbGF5LFxuXHRcdGFuaW0gPSB0aGlzLFxuXHRcdG9yaWcgPSB7fSxcblx0XHRzdHlsZSA9IGVsZW0uc3R5bGUsXG5cdFx0aGlkZGVuID0gZWxlbS5ub2RlVHlwZSAmJiBpc0hpZGRlbiggZWxlbSApLFxuXHRcdGRhdGFTaG93ID0gZGF0YV9wcml2LmdldCggZWxlbSwgXCJmeHNob3dcIiApO1xuXG5cdC8vIEhhbmRsZSBxdWV1ZTogZmFsc2UgcHJvbWlzZXNcblx0aWYgKCAhb3B0cy5xdWV1ZSApIHtcblx0XHRob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgXCJmeFwiICk7XG5cdFx0aWYgKCBob29rcy51bnF1ZXVlZCA9PSBudWxsICkge1xuXHRcdFx0aG9va3MudW5xdWV1ZWQgPSAwO1xuXHRcdFx0b2xkZmlyZSA9IGhvb2tzLmVtcHR5LmZpcmU7XG5cdFx0XHRob29rcy5lbXB0eS5maXJlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggIWhvb2tzLnVucXVldWVkICkge1xuXHRcdFx0XHRcdG9sZGZpcmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0aG9va3MudW5xdWV1ZWQrKztcblxuXHRcdGFuaW0uYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gRW5zdXJlIHRoZSBjb21wbGV0ZSBoYW5kbGVyIGlzIGNhbGxlZCBiZWZvcmUgdGhpcyBjb21wbGV0ZXNcblx0XHRcdGFuaW0uYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRob29rcy51bnF1ZXVlZC0tO1xuXHRcdFx0XHRpZiAoICFqUXVlcnkucXVldWUoIGVsZW0sIFwiZnhcIiApLmxlbmd0aCApIHtcblx0XHRcdFx0XHRob29rcy5lbXB0eS5maXJlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gSGVpZ2h0L3dpZHRoIG92ZXJmbG93IHBhc3Ncblx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICggXCJoZWlnaHRcIiBpbiBwcm9wcyB8fCBcIndpZHRoXCIgaW4gcHJvcHMgKSApIHtcblx0XHQvLyBNYWtlIHN1cmUgdGhhdCBub3RoaW5nIHNuZWFrcyBvdXRcblx0XHQvLyBSZWNvcmQgYWxsIDMgb3ZlcmZsb3cgYXR0cmlidXRlcyBiZWNhdXNlIElFOS0xMCBkbyBub3Rcblx0XHQvLyBjaGFuZ2UgdGhlIG92ZXJmbG93IGF0dHJpYnV0ZSB3aGVuIG92ZXJmbG93WCBhbmRcblx0XHQvLyBvdmVyZmxvd1kgYXJlIHNldCB0byB0aGUgc2FtZSB2YWx1ZVxuXHRcdG9wdHMub3ZlcmZsb3cgPSBbIHN0eWxlLm92ZXJmbG93LCBzdHlsZS5vdmVyZmxvd1gsIHN0eWxlLm92ZXJmbG93WSBdO1xuXG5cdFx0Ly8gU2V0IGRpc3BsYXkgcHJvcGVydHkgdG8gaW5saW5lLWJsb2NrIGZvciBoZWlnaHQvd2lkdGhcblx0XHQvLyBhbmltYXRpb25zIG9uIGlubGluZSBlbGVtZW50cyB0aGF0IGFyZSBoYXZpbmcgd2lkdGgvaGVpZ2h0IGFuaW1hdGVkXG5cdFx0ZGlzcGxheSA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICk7XG5cblx0XHQvLyBUZXN0IGRlZmF1bHQgZGlzcGxheSBpZiBkaXNwbGF5IGlzIGN1cnJlbnRseSBcIm5vbmVcIlxuXHRcdGNoZWNrRGlzcGxheSA9IGRpc3BsYXkgPT09IFwibm9uZVwiID9cblx0XHRcdGRhdGFfcHJpdi5nZXQoIGVsZW0sIFwib2xkZGlzcGxheVwiICkgfHwgZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSA6IGRpc3BsYXk7XG5cblx0XHRpZiAoIGNoZWNrRGlzcGxheSA9PT0gXCJpbmxpbmVcIiAmJiBqUXVlcnkuY3NzKCBlbGVtLCBcImZsb2F0XCIgKSA9PT0gXCJub25lXCIgKSB7XG5cdFx0XHRzdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcblx0XHR9XG5cdH1cblxuXHRpZiAoIG9wdHMub3ZlcmZsb3cgKSB7XG5cdFx0c3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuXHRcdGFuaW0uYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0c3R5bGUub3ZlcmZsb3cgPSBvcHRzLm92ZXJmbG93WyAwIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1ggPSBvcHRzLm92ZXJmbG93WyAxIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1kgPSBvcHRzLm92ZXJmbG93WyAyIF07XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBzaG93L2hpZGUgcGFzc1xuXHRmb3IgKCBwcm9wIGluIHByb3BzICkge1xuXHRcdHZhbHVlID0gcHJvcHNbIHByb3AgXTtcblx0XHRpZiAoIHJmeHR5cGVzLmV4ZWMoIHZhbHVlICkgKSB7XG5cdFx0XHRkZWxldGUgcHJvcHNbIHByb3AgXTtcblx0XHRcdHRvZ2dsZSA9IHRvZ2dsZSB8fCB2YWx1ZSA9PT0gXCJ0b2dnbGVcIjtcblx0XHRcdGlmICggdmFsdWUgPT09ICggaGlkZGVuID8gXCJoaWRlXCIgOiBcInNob3dcIiApICkge1xuXG5cdFx0XHRcdC8vIElmIHRoZXJlIGlzIGRhdGFTaG93IGxlZnQgb3ZlciBmcm9tIGEgc3RvcHBlZCBoaWRlIG9yIHNob3cgYW5kIHdlIGFyZSBnb2luZyB0byBwcm9jZWVkIHdpdGggc2hvdywgd2Ugc2hvdWxkIHByZXRlbmQgdG8gYmUgaGlkZGVuXG5cdFx0XHRcdGlmICggdmFsdWUgPT09IFwic2hvd1wiICYmIGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRoaWRkZW4gPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRvcmlnWyBwcm9wIF0gPSBkYXRhU2hvdyAmJiBkYXRhU2hvd1sgcHJvcCBdIHx8IGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCApO1xuXG5cdFx0Ly8gQW55IG5vbi1meCB2YWx1ZSBzdG9wcyB1cyBmcm9tIHJlc3RvcmluZyB0aGUgb3JpZ2luYWwgZGlzcGxheSB2YWx1ZVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRkaXNwbGF5ID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXG5cdGlmICggIWpRdWVyeS5pc0VtcHR5T2JqZWN0KCBvcmlnICkgKSB7XG5cdFx0aWYgKCBkYXRhU2hvdyApIHtcblx0XHRcdGlmICggXCJoaWRkZW5cIiBpbiBkYXRhU2hvdyApIHtcblx0XHRcdFx0aGlkZGVuID0gZGF0YVNob3cuaGlkZGVuO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRkYXRhU2hvdyA9IGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIFwiZnhzaG93XCIsIHt9ICk7XG5cdFx0fVxuXG5cdFx0Ly8gU3RvcmUgc3RhdGUgaWYgaXRzIHRvZ2dsZSAtIGVuYWJsZXMgLnN0b3AoKS50b2dnbGUoKSB0byBcInJldmVyc2VcIlxuXHRcdGlmICggdG9nZ2xlICkge1xuXHRcdFx0ZGF0YVNob3cuaGlkZGVuID0gIWhpZGRlbjtcblx0XHR9XG5cdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRqUXVlcnkoIGVsZW0gKS5zaG93KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFuaW0uZG9uZShmdW5jdGlvbigpIHtcblx0XHRcdFx0alF1ZXJ5KCBlbGVtICkuaGlkZSgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGFuaW0uZG9uZShmdW5jdGlvbigpIHtcblx0XHRcdHZhciBwcm9wO1xuXG5cdFx0XHRkYXRhX3ByaXYucmVtb3ZlKCBlbGVtLCBcImZ4c2hvd1wiICk7XG5cdFx0XHRmb3IgKCBwcm9wIGluIG9yaWcgKSB7XG5cdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgb3JpZ1sgcHJvcCBdICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xuXHRcdFx0dHdlZW4gPSBjcmVhdGVUd2VlbiggaGlkZGVuID8gZGF0YVNob3dbIHByb3AgXSA6IDAsIHByb3AsIGFuaW0gKTtcblxuXHRcdFx0aWYgKCAhKCBwcm9wIGluIGRhdGFTaG93ICkgKSB7XG5cdFx0XHRcdGRhdGFTaG93WyBwcm9wIF0gPSB0d2Vlbi5zdGFydDtcblx0XHRcdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRcdFx0dHdlZW4uZW5kID0gdHdlZW4uc3RhcnQ7XG5cdFx0XHRcdFx0dHdlZW4uc3RhcnQgPSBwcm9wID09PSBcIndpZHRoXCIgfHwgcHJvcCA9PT0gXCJoZWlnaHRcIiA/IDEgOiAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdC8vIElmIHRoaXMgaXMgYSBub29wIGxpa2UgLmhpZGUoKS5oaWRlKCksIHJlc3RvcmUgYW4gb3ZlcndyaXR0ZW4gZGlzcGxheSB2YWx1ZVxuXHR9IGVsc2UgaWYgKCAoZGlzcGxheSA9PT0gXCJub25lXCIgPyBkZWZhdWx0RGlzcGxheSggZWxlbS5ub2RlTmFtZSApIDogZGlzcGxheSkgPT09IFwiaW5saW5lXCIgKSB7XG5cdFx0c3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XG5cdH1cbn1cblxuZnVuY3Rpb24gcHJvcEZpbHRlciggcHJvcHMsIHNwZWNpYWxFYXNpbmcgKSB7XG5cdHZhciBpbmRleCwgbmFtZSwgZWFzaW5nLCB2YWx1ZSwgaG9va3M7XG5cblx0Ly8gY2FtZWxDYXNlLCBzcGVjaWFsRWFzaW5nIGFuZCBleHBhbmQgY3NzSG9vayBwYXNzXG5cdGZvciAoIGluZGV4IGluIHByb3BzICkge1xuXHRcdG5hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBpbmRleCApO1xuXHRcdGVhc2luZyA9IHNwZWNpYWxFYXNpbmdbIG5hbWUgXTtcblx0XHR2YWx1ZSA9IHByb3BzWyBpbmRleCBdO1xuXHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRlYXNpbmcgPSB2YWx1ZVsgMSBdO1xuXHRcdFx0dmFsdWUgPSBwcm9wc1sgaW5kZXggXSA9IHZhbHVlWyAwIF07XG5cdFx0fVxuXG5cdFx0aWYgKCBpbmRleCAhPT0gbmFtZSApIHtcblx0XHRcdHByb3BzWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdGRlbGV0ZSBwcm9wc1sgaW5kZXggXTtcblx0XHR9XG5cblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdO1xuXHRcdGlmICggaG9va3MgJiYgXCJleHBhbmRcIiBpbiBob29rcyApIHtcblx0XHRcdHZhbHVlID0gaG9va3MuZXhwYW5kKCB2YWx1ZSApO1xuXHRcdFx0ZGVsZXRlIHByb3BzWyBuYW1lIF07XG5cblx0XHRcdC8vIE5vdCBxdWl0ZSAkLmV4dGVuZCwgdGhpcyB3b24ndCBvdmVyd3JpdGUgZXhpc3Rpbmcga2V5cy5cblx0XHRcdC8vIFJldXNpbmcgJ2luZGV4JyBiZWNhdXNlIHdlIGhhdmUgdGhlIGNvcnJlY3QgXCJuYW1lXCJcblx0XHRcdGZvciAoIGluZGV4IGluIHZhbHVlICkge1xuXHRcdFx0XHRpZiAoICEoIGluZGV4IGluIHByb3BzICkgKSB7XG5cdFx0XHRcdFx0cHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgaW5kZXggXTtcblx0XHRcdFx0XHRzcGVjaWFsRWFzaW5nWyBpbmRleCBdID0gZWFzaW5nO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNwZWNpYWxFYXNpbmdbIG5hbWUgXSA9IGVhc2luZztcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gQW5pbWF0aW9uKCBlbGVtLCBwcm9wZXJ0aWVzLCBvcHRpb25zICkge1xuXHR2YXIgcmVzdWx0LFxuXHRcdHN0b3BwZWQsXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGFuaW1hdGlvblByZWZpbHRlcnMubGVuZ3RoLFxuXHRcdGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCkuYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XHRcdC8vIERvbid0IG1hdGNoIGVsZW0gaW4gdGhlIDphbmltYXRlZCBzZWxlY3RvclxuXHRcdFx0ZGVsZXRlIHRpY2suZWxlbTtcblx0XHR9KSxcblx0XHR0aWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIHN0b3BwZWQgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHZhciBjdXJyZW50VGltZSA9IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksXG5cdFx0XHRcdHJlbWFpbmluZyA9IE1hdGgubWF4KCAwLCBhbmltYXRpb24uc3RhcnRUaW1lICsgYW5pbWF0aW9uLmR1cmF0aW9uIC0gY3VycmVudFRpbWUgKSxcblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCAyLjNcblx0XHRcdFx0Ly8gQXJjaGFpYyBjcmFzaCBidWcgd29uJ3QgYWxsb3cgdXMgdG8gdXNlIGAxIC0gKCAwLjUgfHwgMCApYCAoIzEyNDk3KVxuXHRcdFx0XHR0ZW1wID0gcmVtYWluaW5nIC8gYW5pbWF0aW9uLmR1cmF0aW9uIHx8IDAsXG5cdFx0XHRcdHBlcmNlbnQgPSAxIC0gdGVtcCxcblx0XHRcdFx0aW5kZXggPSAwLFxuXHRcdFx0XHRsZW5ndGggPSBhbmltYXRpb24udHdlZW5zLmxlbmd0aDtcblxuXHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7XG5cdFx0XHRcdGFuaW1hdGlvbi50d2VlbnNbIGluZGV4IF0ucnVuKCBwZXJjZW50ICk7XG5cdFx0XHR9XG5cblx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBwZXJjZW50LCByZW1haW5pbmcgXSk7XG5cblx0XHRcdGlmICggcGVyY2VudCA8IDEgJiYgbGVuZ3RoICkge1xuXHRcdFx0XHRyZXR1cm4gcmVtYWluaW5nO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uIF0gKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YW5pbWF0aW9uID0gZGVmZXJyZWQucHJvbWlzZSh7XG5cdFx0XHRlbGVtOiBlbGVtLFxuXHRcdFx0cHJvcHM6IGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wZXJ0aWVzICksXG5cdFx0XHRvcHRzOiBqUXVlcnkuZXh0ZW5kKCB0cnVlLCB7IHNwZWNpYWxFYXNpbmc6IHt9IH0sIG9wdGlvbnMgKSxcblx0XHRcdG9yaWdpbmFsUHJvcGVydGllczogcHJvcGVydGllcyxcblx0XHRcdG9yaWdpbmFsT3B0aW9uczogb3B0aW9ucyxcblx0XHRcdHN0YXJ0VGltZTogZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcblx0XHRcdGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuXHRcdFx0dHdlZW5zOiBbXSxcblx0XHRcdGNyZWF0ZVR3ZWVuOiBmdW5jdGlvbiggcHJvcCwgZW5kICkge1xuXHRcdFx0XHR2YXIgdHdlZW4gPSBqUXVlcnkuVHdlZW4oIGVsZW0sIGFuaW1hdGlvbi5vcHRzLCBwcm9wLCBlbmQsXG5cdFx0XHRcdFx0XHRhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nWyBwcm9wIF0gfHwgYW5pbWF0aW9uLm9wdHMuZWFzaW5nICk7XG5cdFx0XHRcdGFuaW1hdGlvbi50d2VlbnMucHVzaCggdHdlZW4gKTtcblx0XHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdFx0fSxcblx0XHRcdHN0b3A6IGZ1bmN0aW9uKCBnb3RvRW5kICkge1xuXHRcdFx0XHR2YXIgaW5kZXggPSAwLFxuXHRcdFx0XHRcdC8vIElmIHdlIGFyZSBnb2luZyB0byB0aGUgZW5kLCB3ZSB3YW50IHRvIHJ1biBhbGwgdGhlIHR3ZWVuc1xuXHRcdFx0XHRcdC8vIG90aGVyd2lzZSB3ZSBza2lwIHRoaXMgcGFydFxuXHRcdFx0XHRcdGxlbmd0aCA9IGdvdG9FbmQgPyBhbmltYXRpb24udHdlZW5zLmxlbmd0aCA6IDA7XG5cdFx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0XHRzdG9wcGVkID0gdHJ1ZTtcblx0XHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7XG5cdFx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIDEgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlc29sdmUgd2hlbiB3ZSBwbGF5ZWQgdGhlIGxhc3QgZnJhbWU7IG90aGVyd2lzZSwgcmVqZWN0XG5cdFx0XHRcdGlmICggZ290b0VuZCApIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24sIGdvdG9FbmQgXSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdFdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHR9KSxcblx0XHRwcm9wcyA9IGFuaW1hdGlvbi5wcm9wcztcblxuXHRwcm9wRmlsdGVyKCBwcm9wcywgYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZyApO1xuXG5cdGZvciAoIDsgaW5kZXggPCBsZW5ndGggOyBpbmRleCsrICkge1xuXHRcdHJlc3VsdCA9IGFuaW1hdGlvblByZWZpbHRlcnNbIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBlbGVtLCBwcm9wcywgYW5pbWF0aW9uLm9wdHMgKTtcblx0XHRpZiAoIHJlc3VsdCApIHtcblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fVxuXHR9XG5cblx0alF1ZXJ5Lm1hcCggcHJvcHMsIGNyZWF0ZVR3ZWVuLCBhbmltYXRpb24gKTtcblxuXHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBhbmltYXRpb24ub3B0cy5zdGFydCApICkge1xuXHRcdGFuaW1hdGlvbi5vcHRzLnN0YXJ0LmNhbGwoIGVsZW0sIGFuaW1hdGlvbiApO1xuXHR9XG5cblx0alF1ZXJ5LmZ4LnRpbWVyKFxuXHRcdGpRdWVyeS5leHRlbmQoIHRpY2ssIHtcblx0XHRcdGVsZW06IGVsZW0sXG5cdFx0XHRhbmltOiBhbmltYXRpb24sXG5cdFx0XHRxdWV1ZTogYW5pbWF0aW9uLm9wdHMucXVldWVcblx0XHR9KVxuXHQpO1xuXG5cdC8vIGF0dGFjaCBjYWxsYmFja3MgZnJvbSBvcHRpb25zXG5cdHJldHVybiBhbmltYXRpb24ucHJvZ3Jlc3MoIGFuaW1hdGlvbi5vcHRzLnByb2dyZXNzIClcblx0XHQuZG9uZSggYW5pbWF0aW9uLm9wdHMuZG9uZSwgYW5pbWF0aW9uLm9wdHMuY29tcGxldGUgKVxuXHRcdC5mYWlsKCBhbmltYXRpb24ub3B0cy5mYWlsIClcblx0XHQuYWx3YXlzKCBhbmltYXRpb24ub3B0cy5hbHdheXMgKTtcbn1cblxualF1ZXJ5LkFuaW1hdGlvbiA9IGpRdWVyeS5leHRlbmQoIEFuaW1hdGlvbiwge1xuXG5cdHR3ZWVuZXI6IGZ1bmN0aW9uKCBwcm9wcywgY2FsbGJhY2sgKSB7XG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcHJvcHMgKSApIHtcblx0XHRcdGNhbGxiYWNrID0gcHJvcHM7XG5cdFx0XHRwcm9wcyA9IFsgXCIqXCIgXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cHJvcHMgPSBwcm9wcy5zcGxpdChcIiBcIik7XG5cdFx0fVxuXG5cdFx0dmFyIHByb3AsXG5cdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcblx0XHRcdHByb3AgPSBwcm9wc1sgaW5kZXggXTtcblx0XHRcdHR3ZWVuZXJzWyBwcm9wIF0gPSB0d2VlbmVyc1sgcHJvcCBdIHx8IFtdO1xuXHRcdFx0dHdlZW5lcnNbIHByb3AgXS51bnNoaWZ0KCBjYWxsYmFjayApO1xuXHRcdH1cblx0fSxcblxuXHRwcmVmaWx0ZXI6IGZ1bmN0aW9uKCBjYWxsYmFjaywgcHJlcGVuZCApIHtcblx0XHRpZiAoIHByZXBlbmQgKSB7XG5cdFx0XHRhbmltYXRpb25QcmVmaWx0ZXJzLnVuc2hpZnQoIGNhbGxiYWNrICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFuaW1hdGlvblByZWZpbHRlcnMucHVzaCggY2FsbGJhY2sgKTtcblx0XHR9XG5cdH1cbn0pO1xuXG5qUXVlcnkuc3BlZWQgPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgZm4gKSB7XG5cdHZhciBvcHQgPSBzcGVlZCAmJiB0eXBlb2Ygc3BlZWQgPT09IFwib2JqZWN0XCIgPyBqUXVlcnkuZXh0ZW5kKCB7fSwgc3BlZWQgKSA6IHtcblx0XHRjb21wbGV0ZTogZm4gfHwgIWZuICYmIGVhc2luZyB8fFxuXHRcdFx0alF1ZXJ5LmlzRnVuY3Rpb24oIHNwZWVkICkgJiYgc3BlZWQsXG5cdFx0ZHVyYXRpb246IHNwZWVkLFxuXHRcdGVhc2luZzogZm4gJiYgZWFzaW5nIHx8IGVhc2luZyAmJiAhalF1ZXJ5LmlzRnVuY3Rpb24oIGVhc2luZyApICYmIGVhc2luZ1xuXHR9O1xuXG5cdG9wdC5kdXJhdGlvbiA9IGpRdWVyeS5meC5vZmYgPyAwIDogdHlwZW9mIG9wdC5kdXJhdGlvbiA9PT0gXCJudW1iZXJcIiA/IG9wdC5kdXJhdGlvbiA6XG5cdFx0b3B0LmR1cmF0aW9uIGluIGpRdWVyeS5meC5zcGVlZHMgPyBqUXVlcnkuZnguc3BlZWRzWyBvcHQuZHVyYXRpb24gXSA6IGpRdWVyeS5meC5zcGVlZHMuX2RlZmF1bHQ7XG5cblx0Ly8gTm9ybWFsaXplIG9wdC5xdWV1ZSAtIHRydWUvdW5kZWZpbmVkL251bGwgLT4gXCJmeFwiXG5cdGlmICggb3B0LnF1ZXVlID09IG51bGwgfHwgb3B0LnF1ZXVlID09PSB0cnVlICkge1xuXHRcdG9wdC5xdWV1ZSA9IFwiZnhcIjtcblx0fVxuXG5cdC8vIFF1ZXVlaW5nXG5cdG9wdC5vbGQgPSBvcHQuY29tcGxldGU7XG5cblx0b3B0LmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0Lm9sZCApICkge1xuXHRcdFx0b3B0Lm9sZC5jYWxsKCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHQucXVldWUgKSB7XG5cdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgb3B0LnF1ZXVlICk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBvcHQ7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0ZmFkZVRvOiBmdW5jdGlvbiggc3BlZWQsIHRvLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXG5cdFx0Ly8gU2hvdyBhbnkgaGlkZGVuIGVsZW1lbnRzIGFmdGVyIHNldHRpbmcgb3BhY2l0eSB0byAwXG5cdFx0cmV0dXJuIHRoaXMuZmlsdGVyKCBpc0hpZGRlbiApLmNzcyggXCJvcGFjaXR5XCIsIDAgKS5zaG93KClcblxuXHRcdFx0Ly8gQW5pbWF0ZSB0byB0aGUgdmFsdWUgc3BlY2lmaWVkXG5cdFx0XHQuZW5kKCkuYW5pbWF0ZSh7IG9wYWNpdHk6IHRvIH0sIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH0sXG5cdGFuaW1hdGU6IGZ1bmN0aW9uKCBwcm9wLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHR2YXIgZW1wdHkgPSBqUXVlcnkuaXNFbXB0eU9iamVjdCggcHJvcCApLFxuXHRcdFx0b3B0YWxsID0galF1ZXJ5LnNwZWVkKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApLFxuXHRcdFx0ZG9BbmltYXRpb24gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gT3BlcmF0ZSBvbiBhIGNvcHkgb2YgcHJvcCBzbyBwZXItcHJvcGVydHkgZWFzaW5nIHdvbid0IGJlIGxvc3Rcblx0XHRcdFx0dmFyIGFuaW0gPSBBbmltYXRpb24oIHRoaXMsIGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wICksIG9wdGFsbCApO1xuXG5cdFx0XHRcdC8vIEVtcHR5IGFuaW1hdGlvbnMsIG9yIGZpbmlzaGluZyByZXNvbHZlcyBpbW1lZGlhdGVseVxuXHRcdFx0XHRpZiAoIGVtcHR5IHx8IGRhdGFfcHJpdi5nZXQoIHRoaXMsIFwiZmluaXNoXCIgKSApIHtcblx0XHRcdFx0XHRhbmltLnN0b3AoIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGRvQW5pbWF0aW9uLmZpbmlzaCA9IGRvQW5pbWF0aW9uO1xuXG5cdFx0cmV0dXJuIGVtcHR5IHx8IG9wdGFsbC5xdWV1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0dGhpcy5lYWNoKCBkb0FuaW1hdGlvbiApIDpcblx0XHRcdHRoaXMucXVldWUoIG9wdGFsbC5xdWV1ZSwgZG9BbmltYXRpb24gKTtcblx0fSxcblx0c3RvcDogZnVuY3Rpb24oIHR5cGUsIGNsZWFyUXVldWUsIGdvdG9FbmQgKSB7XG5cdFx0dmFyIHN0b3BRdWV1ZSA9IGZ1bmN0aW9uKCBob29rcyApIHtcblx0XHRcdHZhciBzdG9wID0gaG9va3Muc3RvcDtcblx0XHRcdGRlbGV0ZSBob29rcy5zdG9wO1xuXHRcdFx0c3RvcCggZ290b0VuZCApO1xuXHRcdH07XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0Z290b0VuZCA9IGNsZWFyUXVldWU7XG5cdFx0XHRjbGVhclF1ZXVlID0gdHlwZTtcblx0XHRcdHR5cGUgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmICggY2xlYXJRdWV1ZSAmJiB0eXBlICE9PSBmYWxzZSApIHtcblx0XHRcdHRoaXMucXVldWUoIHR5cGUgfHwgXCJmeFwiLCBbXSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgZGVxdWV1ZSA9IHRydWUsXG5cdFx0XHRcdGluZGV4ID0gdHlwZSAhPSBudWxsICYmIHR5cGUgKyBcInF1ZXVlSG9va3NcIixcblx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0ZGF0YSA9IGRhdGFfcHJpdi5nZXQoIHRoaXMgKTtcblxuXHRcdFx0aWYgKCBpbmRleCApIHtcblx0XHRcdFx0aWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCApIHtcblx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm9yICggaW5kZXggaW4gZGF0YSApIHtcblx0XHRcdFx0XHRpZiAoIGRhdGFbIGluZGV4IF0gJiYgZGF0YVsgaW5kZXggXS5zdG9wICYmIHJydW4udGVzdCggaW5kZXggKSApIHtcblx0XHRcdFx0XHRcdHN0b3BRdWV1ZSggZGF0YVsgaW5kZXggXSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkge1xuXHRcdFx0XHRpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmICh0eXBlID09IG51bGwgfHwgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlKSApIHtcblx0XHRcdFx0XHR0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCBnb3RvRW5kICk7XG5cdFx0XHRcdFx0ZGVxdWV1ZSA9IGZhbHNlO1xuXHRcdFx0XHRcdHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhcnQgdGhlIG5leHQgaW4gdGhlIHF1ZXVlIGlmIHRoZSBsYXN0IHN0ZXAgd2Fzbid0IGZvcmNlZC5cblx0XHRcdC8vIFRpbWVycyBjdXJyZW50bHkgd2lsbCBjYWxsIHRoZWlyIGNvbXBsZXRlIGNhbGxiYWNrcywgd2hpY2hcblx0XHRcdC8vIHdpbGwgZGVxdWV1ZSBidXQgb25seSBpZiB0aGV5IHdlcmUgZ290b0VuZC5cblx0XHRcdGlmICggZGVxdWV1ZSB8fCAhZ290b0VuZCApIHtcblx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblx0ZmluaXNoOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRpZiAoIHR5cGUgIT09IGZhbHNlICkge1xuXHRcdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGluZGV4LFxuXHRcdFx0XHRkYXRhID0gZGF0YV9wcml2LmdldCggdGhpcyApLFxuXHRcdFx0XHRxdWV1ZSA9IGRhdGFbIHR5cGUgKyBcInF1ZXVlXCIgXSxcblx0XHRcdFx0aG9va3MgPSBkYXRhWyB0eXBlICsgXCJxdWV1ZUhvb2tzXCIgXSxcblx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0bGVuZ3RoID0gcXVldWUgPyBxdWV1ZS5sZW5ndGggOiAwO1xuXG5cdFx0XHQvLyBFbmFibGUgZmluaXNoaW5nIGZsYWcgb24gcHJpdmF0ZSBkYXRhXG5cdFx0XHRkYXRhLmZpbmlzaCA9IHRydWU7XG5cblx0XHRcdC8vIEVtcHR5IHRoZSBxdWV1ZSBmaXJzdFxuXHRcdFx0alF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBbXSApO1xuXG5cdFx0XHRpZiAoIGhvb2tzICYmIGhvb2tzLnN0b3AgKSB7XG5cdFx0XHRcdGhvb2tzLnN0b3AuY2FsbCggdGhpcywgdHJ1ZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb29rIGZvciBhbnkgYWN0aXZlIGFuaW1hdGlvbnMsIGFuZCBmaW5pc2ggdGhlbVxuXHRcdFx0Zm9yICggaW5kZXggPSB0aW1lcnMubGVuZ3RoOyBpbmRleC0tOyApIHtcblx0XHRcdFx0aWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJiB0aW1lcnNbIGluZGV4IF0ucXVldWUgPT09IHR5cGUgKSB7XG5cdFx0XHRcdFx0dGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggdHJ1ZSApO1xuXHRcdFx0XHRcdHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gTG9vayBmb3IgYW55IGFuaW1hdGlvbnMgaW4gdGhlIG9sZCBxdWV1ZSBhbmQgZmluaXNoIHRoZW1cblx0XHRcdGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRcdGlmICggcXVldWVbIGluZGV4IF0gJiYgcXVldWVbIGluZGV4IF0uZmluaXNoICkge1xuXHRcdFx0XHRcdHF1ZXVlWyBpbmRleCBdLmZpbmlzaC5jYWxsKCB0aGlzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gVHVybiBvZmYgZmluaXNoaW5nIGZsYWdcblx0XHRcdGRlbGV0ZSBkYXRhLmZpbmlzaDtcblx0XHR9KTtcblx0fVxufSk7XG5cbmpRdWVyeS5lYWNoKFsgXCJ0b2dnbGVcIiwgXCJzaG93XCIsIFwiaGlkZVwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHR2YXIgY3NzRm4gPSBqUXVlcnkuZm5bIG5hbWUgXTtcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIHNwZWVkID09IG51bGwgfHwgdHlwZW9mIHNwZWVkID09PSBcImJvb2xlYW5cIiA/XG5cdFx0XHRjc3NGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICkgOlxuXHRcdFx0dGhpcy5hbmltYXRlKCBnZW5GeCggbmFtZSwgdHJ1ZSApLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApO1xuXHR9O1xufSk7XG5cbi8vIEdlbmVyYXRlIHNob3J0Y3V0cyBmb3IgY3VzdG9tIGFuaW1hdGlvbnNcbmpRdWVyeS5lYWNoKHtcblx0c2xpZGVEb3duOiBnZW5GeChcInNob3dcIiksXG5cdHNsaWRlVXA6IGdlbkZ4KFwiaGlkZVwiKSxcblx0c2xpZGVUb2dnbGU6IGdlbkZ4KFwidG9nZ2xlXCIpLFxuXHRmYWRlSW46IHsgb3BhY2l0eTogXCJzaG93XCIgfSxcblx0ZmFkZU91dDogeyBvcGFjaXR5OiBcImhpZGVcIiB9LFxuXHRmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6IFwidG9nZ2xlXCIgfVxufSwgZnVuY3Rpb24oIG5hbWUsIHByb3BzICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5hbmltYXRlKCBwcm9wcywgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fTtcbn0pO1xuXG5qUXVlcnkudGltZXJzID0gW107XG5qUXVlcnkuZngudGljayA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgdGltZXIsXG5cdFx0aSA9IDAsXG5cdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycztcblxuXHRmeE5vdyA9IGpRdWVyeS5ub3coKTtcblxuXHRmb3IgKCA7IGkgPCB0aW1lcnMubGVuZ3RoOyBpKysgKSB7XG5cdFx0dGltZXIgPSB0aW1lcnNbIGkgXTtcblx0XHQvLyBDaGVja3MgdGhlIHRpbWVyIGhhcyBub3QgYWxyZWFkeSBiZWVuIHJlbW92ZWRcblx0XHRpZiAoICF0aW1lcigpICYmIHRpbWVyc1sgaSBdID09PSB0aW1lciApIHtcblx0XHRcdHRpbWVycy5zcGxpY2UoIGktLSwgMSApO1xuXHRcdH1cblx0fVxuXG5cdGlmICggIXRpbWVycy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5LmZ4LnN0b3AoKTtcblx0fVxuXHRmeE5vdyA9IHVuZGVmaW5lZDtcbn07XG5cbmpRdWVyeS5meC50aW1lciA9IGZ1bmN0aW9uKCB0aW1lciApIHtcblx0alF1ZXJ5LnRpbWVycy5wdXNoKCB0aW1lciApO1xuXHRpZiAoIHRpbWVyKCkgKSB7XG5cdFx0alF1ZXJ5LmZ4LnN0YXJ0KCk7XG5cdH0gZWxzZSB7XG5cdFx0alF1ZXJ5LnRpbWVycy5wb3AoKTtcblx0fVxufTtcblxualF1ZXJ5LmZ4LmludGVydmFsID0gMTM7XG5cbmpRdWVyeS5meC5zdGFydCA9IGZ1bmN0aW9uKCkge1xuXHRpZiAoICF0aW1lcklkICkge1xuXHRcdHRpbWVySWQgPSBzZXRJbnRlcnZhbCggalF1ZXJ5LmZ4LnRpY2ssIGpRdWVyeS5meC5pbnRlcnZhbCApO1xuXHR9XG59O1xuXG5qUXVlcnkuZnguc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRjbGVhckludGVydmFsKCB0aW1lcklkICk7XG5cdHRpbWVySWQgPSBudWxsO1xufTtcblxualF1ZXJ5LmZ4LnNwZWVkcyA9IHtcblx0c2xvdzogNjAwLFxuXHRmYXN0OiAyMDAsXG5cdC8vIERlZmF1bHQgc3BlZWRcblx0X2RlZmF1bHQ6IDQwMFxufTtcblxuXG4vLyBCYXNlZCBvZmYgb2YgdGhlIHBsdWdpbiBieSBDbGludCBIZWxmZXJzLCB3aXRoIHBlcm1pc3Npb24uXG4vLyBodHRwOi8vYmxpbmRzaWduYWxzLmNvbS9pbmRleC5waHAvMjAwOS8wNy9qcXVlcnktZGVsYXkvXG5qUXVlcnkuZm4uZGVsYXkgPSBmdW5jdGlvbiggdGltZSwgdHlwZSApIHtcblx0dGltZSA9IGpRdWVyeS5meCA/IGpRdWVyeS5meC5zcGVlZHNbIHRpbWUgXSB8fCB0aW1lIDogdGltZTtcblx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdHJldHVybiB0aGlzLnF1ZXVlKCB0eXBlLCBmdW5jdGlvbiggbmV4dCwgaG9va3MgKSB7XG5cdFx0dmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCBuZXh0LCB0aW1lICk7XG5cdFx0aG9va3Muc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y2xlYXJUaW1lb3V0KCB0aW1lb3V0ICk7XG5cdFx0fTtcblx0fSk7XG59O1xuXG5cbihmdW5jdGlvbigpIHtcblx0dmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICksXG5cdFx0c2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJzZWxlY3RcIiApLFxuXHRcdG9wdCA9IHNlbGVjdC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJvcHRpb25cIiApICk7XG5cblx0aW5wdXQudHlwZSA9IFwiY2hlY2tib3hcIjtcblxuXHQvLyBTdXBwb3J0OiBpT1M8PTUuMSwgQW5kcm9pZDw9NC4yK1xuXHQvLyBEZWZhdWx0IHZhbHVlIGZvciBhIGNoZWNrYm94IHNob3VsZCBiZSBcIm9uXCJcblx0c3VwcG9ydC5jaGVja09uID0gaW5wdXQudmFsdWUgIT09IFwiXCI7XG5cblx0Ly8gU3VwcG9ydDogSUU8PTExK1xuXHQvLyBNdXN0IGFjY2VzcyBzZWxlY3RlZEluZGV4IHRvIG1ha2UgZGVmYXVsdCBvcHRpb25zIHNlbGVjdFxuXHRzdXBwb3J0Lm9wdFNlbGVjdGVkID0gb3B0LnNlbGVjdGVkO1xuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8PTIuM1xuXHQvLyBPcHRpb25zIGluc2lkZSBkaXNhYmxlZCBzZWxlY3RzIGFyZSBpbmNvcnJlY3RseSBtYXJrZWQgYXMgZGlzYWJsZWRcblx0c2VsZWN0LmRpc2FibGVkID0gdHJ1ZTtcblx0c3VwcG9ydC5vcHREaXNhYmxlZCA9ICFvcHQuZGlzYWJsZWQ7XG5cblx0Ly8gU3VwcG9ydDogSUU8PTExK1xuXHQvLyBBbiBpbnB1dCBsb3NlcyBpdHMgdmFsdWUgYWZ0ZXIgYmVjb21pbmcgYSByYWRpb1xuXHRpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuXHRpbnB1dC52YWx1ZSA9IFwidFwiO1xuXHRpbnB1dC50eXBlID0gXCJyYWRpb1wiO1xuXHRzdXBwb3J0LnJhZGlvVmFsdWUgPSBpbnB1dC52YWx1ZSA9PT0gXCJ0XCI7XG59KSgpO1xuXG5cbnZhciBub2RlSG9vaywgYm9vbEhvb2ssXG5cdGF0dHJIYW5kbGUgPSBqUXVlcnkuZXhwci5hdHRySGFuZGxlO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0YXR0cjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5hdHRyLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIHRoaXMsIG5hbWUgKTtcblx0XHR9KTtcblx0fVxufSk7XG5cbmpRdWVyeS5leHRlbmQoe1xuXHRhdHRyOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0dmFyIGhvb2tzLCByZXQsXG5cdFx0XHRuVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cblx0XHQvLyBkb24ndCBnZXQvc2V0IGF0dHJpYnV0ZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzXG5cdFx0aWYgKCAhZWxlbSB8fCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBGYWxsYmFjayB0byBwcm9wIHdoZW4gYXR0cmlidXRlcyBhcmUgbm90IHN1cHBvcnRlZFxuXHRcdGlmICggdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlID09PSBzdHJ1bmRlZmluZWQgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnByb3AoIGVsZW0sIG5hbWUsIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0Ly8gQWxsIGF0dHJpYnV0ZXMgYXJlIGxvd2VyY2FzZVxuXHRcdC8vIEdyYWIgbmVjZXNzYXJ5IGhvb2sgaWYgb25lIGlzIGRlZmluZWRcblx0XHRpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblx0XHRcdG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRob29rcyA9IGpRdWVyeS5hdHRySG9va3NbIG5hbWUgXSB8fFxuXHRcdFx0XHQoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApID8gYm9vbEhvb2sgOiBub2RlSG9vayApO1xuXHRcdH1cblxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gbnVsbCApIHtcblx0XHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggaG9va3MgJiYgXCJzZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgdmFsdWUgKyBcIlwiICk7XG5cdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdH1cblxuXHRcdH0gZWxzZSBpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApKSAhPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiByZXQ7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0XHQvLyBOb24tZXhpc3RlbnQgYXR0cmlidXRlcyByZXR1cm4gbnVsbCwgd2Ugbm9ybWFsaXplIHRvIHVuZGVmaW5lZFxuXHRcdFx0cmV0dXJuIHJldCA9PSBudWxsID9cblx0XHRcdFx0dW5kZWZpbmVkIDpcblx0XHRcdFx0cmV0O1xuXHRcdH1cblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0dmFyIG5hbWUsIHByb3BOYW1lLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRhdHRyTmFtZXMgPSB2YWx1ZSAmJiB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICk7XG5cblx0XHRpZiAoIGF0dHJOYW1lcyAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0d2hpbGUgKCAobmFtZSA9IGF0dHJOYW1lc1tpKytdKSApIHtcblx0XHRcdFx0cHJvcE5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7XG5cblx0XHRcdFx0Ly8gQm9vbGVhbiBhdHRyaWJ1dGVzIGdldCBzcGVjaWFsIHRyZWF0bWVudCAoIzEwODcwKVxuXHRcdFx0XHRpZiAoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApICkge1xuXHRcdFx0XHRcdC8vIFNldCBjb3JyZXNwb25kaW5nIHByb3BlcnR5IHRvIGZhbHNlXG5cdFx0XHRcdFx0ZWxlbVsgcHJvcE5hbWUgXSA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoIG5hbWUgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0YXR0ckhvb2tzOiB7XG5cdFx0dHlwZToge1xuXHRcdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRcdGlmICggIXN1cHBvcnQucmFkaW9WYWx1ZSAmJiB2YWx1ZSA9PT0gXCJyYWRpb1wiICYmXG5cdFx0XHRcdFx0alF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcImlucHV0XCIgKSApIHtcblx0XHRcdFx0XHR2YXIgdmFsID0gZWxlbS52YWx1ZTtcblx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIHZhbHVlICk7XG5cdFx0XHRcdFx0aWYgKCB2YWwgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLnZhbHVlID0gdmFsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pO1xuXG4vLyBIb29rcyBmb3IgYm9vbGVhbiBhdHRyaWJ1dGVzXG5ib29sSG9vayA9IHtcblx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7XG5cdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHQvLyBSZW1vdmUgYm9vbGVhbiBhdHRyaWJ1dGVzIHdoZW4gc2V0IHRvIGZhbHNlXG5cdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgbmFtZSApO1xuXHRcdH1cblx0XHRyZXR1cm4gbmFtZTtcblx0fVxufTtcbmpRdWVyeS5lYWNoKCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCggL1xcdysvZyApLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcblx0dmFyIGdldHRlciA9IGF0dHJIYW5kbGVbIG5hbWUgXSB8fCBqUXVlcnkuZmluZC5hdHRyO1xuXG5cdGF0dHJIYW5kbGVbIG5hbWUgXSA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHR2YXIgcmV0LCBoYW5kbGU7XG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHQvLyBBdm9pZCBhbiBpbmZpbml0ZSBsb29wIGJ5IHRlbXBvcmFyaWx5IHJlbW92aW5nIHRoaXMgZnVuY3Rpb24gZnJvbSB0aGUgZ2V0dGVyXG5cdFx0XHRoYW5kbGUgPSBhdHRySGFuZGxlWyBuYW1lIF07XG5cdFx0XHRhdHRySGFuZGxlWyBuYW1lIF0gPSByZXQ7XG5cdFx0XHRyZXQgPSBnZXR0ZXIoIGVsZW0sIG5hbWUsIGlzWE1MICkgIT0gbnVsbCA/XG5cdFx0XHRcdG5hbWUudG9Mb3dlckNhc2UoKSA6XG5cdFx0XHRcdG51bGw7XG5cdFx0XHRhdHRySGFuZGxlWyBuYW1lIF0gPSBoYW5kbGU7XG5cdFx0fVxuXHRcdHJldHVybiByZXQ7XG5cdH07XG59KTtcblxuXG5cblxudmFyIHJmb2N1c2FibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0cHJvcDogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5wcm9wLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVQcm9wOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0ZGVsZXRlIHRoaXNbIGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZSBdO1xuXHRcdH0pO1xuXHR9XG59KTtcblxualF1ZXJ5LmV4dGVuZCh7XG5cdHByb3BGaXg6IHtcblx0XHRcImZvclwiOiBcImh0bWxGb3JcIixcblx0XHRcImNsYXNzXCI6IFwiY2xhc3NOYW1lXCJcblx0fSxcblxuXHRwcm9wOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0dmFyIHJldCwgaG9va3MsIG5vdHhtbCxcblx0XHRcdG5UeXBlID0gZWxlbS5ub2RlVHlwZTtcblxuXHRcdC8vIERvbid0IGdldC9zZXQgcHJvcGVydGllcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXNcblx0XHRpZiAoICFlbGVtIHx8IG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdG5vdHhtbCA9IG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKTtcblxuXHRcdGlmICggbm90eG1sICkge1xuXHRcdFx0Ly8gRml4IG5hbWUgYW5kIGF0dGFjaCBob29rc1xuXHRcdFx0bmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTtcblx0XHRcdGhvb2tzID0galF1ZXJ5LnByb3BIb29rc1sgbmFtZSBdO1xuXHRcdH1cblxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHJldHVybiBob29rcyAmJiBcInNldFwiIGluIGhvb2tzICYmIChyZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkpICE9PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRyZXQgOlxuXHRcdFx0XHQoIGVsZW1bIG5hbWUgXSA9IHZhbHVlICk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApKSAhPT0gbnVsbCA/XG5cdFx0XHRcdHJldCA6XG5cdFx0XHRcdGVsZW1bIG5hbWUgXTtcblx0XHR9XG5cdH0sXG5cblx0cHJvcEhvb2tzOiB7XG5cdFx0dGFiSW5kZXg6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmhhc0F0dHJpYnV0ZSggXCJ0YWJpbmRleFwiICkgfHwgcmZvY3VzYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgfHwgZWxlbS5ocmVmID9cblx0XHRcdFx0XHRlbGVtLnRhYkluZGV4IDpcblx0XHRcdFx0XHQtMTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pO1xuXG5pZiAoICFzdXBwb3J0Lm9wdFNlbGVjdGVkICkge1xuXHRqUXVlcnkucHJvcEhvb2tzLnNlbGVjdGVkID0ge1xuXHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0aWYgKCBwYXJlbnQgJiYgcGFyZW50LnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHBhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH07XG59XG5cbmpRdWVyeS5lYWNoKFtcblx0XCJ0YWJJbmRleFwiLFxuXHRcInJlYWRPbmx5XCIsXG5cdFwibWF4TGVuZ3RoXCIsXG5cdFwiY2VsbFNwYWNpbmdcIixcblx0XCJjZWxsUGFkZGluZ1wiLFxuXHRcInJvd1NwYW5cIixcblx0XCJjb2xTcGFuXCIsXG5cdFwidXNlTWFwXCIsXG5cdFwiZnJhbWVCb3JkZXJcIixcblx0XCJjb250ZW50RWRpdGFibGVcIlxuXSwgZnVuY3Rpb24oKSB7XG5cdGpRdWVyeS5wcm9wRml4WyB0aGlzLnRvTG93ZXJDYXNlKCkgXSA9IHRoaXM7XG59KTtcblxuXG5cblxudmFyIHJjbGFzcyA9IC9bXFx0XFxyXFxuXFxmXS9nO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0YWRkQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YXIgY2xhc3NlcywgZWxlbSwgY3VyLCBjbGF6eiwgaiwgZmluYWxWYWx1ZSxcblx0XHRcdHByb2NlZWQgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWUsXG5cdFx0XHRpID0gMCxcblx0XHRcdGxlbiA9IHRoaXMubGVuZ3RoO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGogKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLmFkZENsYXNzKCB2YWx1ZS5jYWxsKCB0aGlzLCBqLCB0aGlzLmNsYXNzTmFtZSApICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoIHByb2NlZWQgKSB7XG5cdFx0XHQvLyBUaGUgZGlzanVuY3Rpb24gaGVyZSBpcyBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIHJlbW92ZUNsYXNzKVxuXHRcdFx0Y2xhc3NlcyA9ICggdmFsdWUgfHwgXCJcIiApLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblxuXHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdGVsZW0gPSB0aGlzWyBpIF07XG5cdFx0XHRcdGN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgKCBlbGVtLmNsYXNzTmFtZSA/XG5cdFx0XHRcdFx0KCBcIiBcIiArIGVsZW0uY2xhc3NOYW1lICsgXCIgXCIgKS5yZXBsYWNlKCByY2xhc3MsIFwiIFwiICkgOlxuXHRcdFx0XHRcdFwiIFwiXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0aWYgKCBjdXIgKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoY2xhenogPSBjbGFzc2VzW2orK10pICkge1xuXHRcdFx0XHRcdFx0aWYgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPCAwICkge1xuXHRcdFx0XHRcdFx0XHRjdXIgKz0gY2xhenogKyBcIiBcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBvbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSBqUXVlcnkudHJpbSggY3VyICk7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLmNsYXNzTmFtZSAhPT0gZmluYWxWYWx1ZSApIHtcblx0XHRcdFx0XHRcdGVsZW0uY2xhc3NOYW1lID0gZmluYWxWYWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRyZW1vdmVDbGFzczogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLFxuXHRcdFx0cHJvY2VlZCA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDAgfHwgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW4gPSB0aGlzLmxlbmd0aDtcblxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCBqICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5yZW1vdmVDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgdGhpcy5jbGFzc05hbWUgKSApO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGlmICggcHJvY2VlZCApIHtcblx0XHRcdGNsYXNzZXMgPSAoIHZhbHVlIHx8IFwiXCIgKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107XG5cblx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRlbGVtID0gdGhpc1sgaSBdO1xuXHRcdFx0XHQvLyBUaGlzIGV4cHJlc3Npb24gaXMgaGVyZSBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIGFkZENsYXNzKVxuXHRcdFx0XHRjdXIgPSBlbGVtLm5vZGVUeXBlID09PSAxICYmICggZWxlbS5jbGFzc05hbWUgP1xuXHRcdFx0XHRcdCggXCIgXCIgKyBlbGVtLmNsYXNzTmFtZSArIFwiIFwiICkucmVwbGFjZSggcmNsYXNzLCBcIiBcIiApIDpcblx0XHRcdFx0XHRcIlwiXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0aWYgKCBjdXIgKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoY2xhenogPSBjbGFzc2VzW2orK10pICkge1xuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlICphbGwqIGluc3RhbmNlc1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPj0gMCApIHtcblx0XHRcdFx0XHRcdFx0Y3VyID0gY3VyLnJlcGxhY2UoIFwiIFwiICsgY2xhenogKyBcIiBcIiwgXCIgXCIgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBPbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSB2YWx1ZSA/IGpRdWVyeS50cmltKCBjdXIgKSA6IFwiXCI7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLmNsYXNzTmFtZSAhPT0gZmluYWxWYWx1ZSApIHtcblx0XHRcdFx0XHRcdGVsZW0uY2xhc3NOYW1lID0gZmluYWxWYWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHR0b2dnbGVDbGFzczogZnVuY3Rpb24oIHZhbHVlLCBzdGF0ZVZhbCApIHtcblx0XHR2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblxuXHRcdGlmICggdHlwZW9mIHN0YXRlVmFsID09PSBcImJvb2xlYW5cIiAmJiB0eXBlID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIHN0YXRlVmFsID8gdGhpcy5hZGRDbGFzcyggdmFsdWUgKSA6IHRoaXMucmVtb3ZlQ2xhc3MoIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnRvZ2dsZUNsYXNzKCB2YWx1ZS5jYWxsKHRoaXMsIGksIHRoaXMuY2xhc3NOYW1lLCBzdGF0ZVZhbCksIHN0YXRlVmFsICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCB0eXBlID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHQvLyBUb2dnbGUgaW5kaXZpZHVhbCBjbGFzcyBuYW1lc1xuXHRcdFx0XHR2YXIgY2xhc3NOYW1lLFxuXHRcdFx0XHRcdGkgPSAwLFxuXHRcdFx0XHRcdHNlbGYgPSBqUXVlcnkoIHRoaXMgKSxcblx0XHRcdFx0XHRjbGFzc05hbWVzID0gdmFsdWUubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdO1xuXG5cdFx0XHRcdHdoaWxlICggKGNsYXNzTmFtZSA9IGNsYXNzTmFtZXNbIGkrKyBdKSApIHtcblx0XHRcdFx0XHQvLyBDaGVjayBlYWNoIGNsYXNzTmFtZSBnaXZlbiwgc3BhY2Ugc2VwYXJhdGVkIGxpc3Rcblx0XHRcdFx0XHRpZiAoIHNlbGYuaGFzQ2xhc3MoIGNsYXNzTmFtZSApICkge1xuXHRcdFx0XHRcdFx0c2VsZi5yZW1vdmVDbGFzcyggY2xhc3NOYW1lICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbGYuYWRkQ2xhc3MoIGNsYXNzTmFtZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBUb2dnbGUgd2hvbGUgY2xhc3MgbmFtZVxuXHRcdFx0fSBlbHNlIGlmICggdHlwZSA9PT0gc3RydW5kZWZpbmVkIHx8IHR5cGUgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdFx0XHRpZiAoIHRoaXMuY2xhc3NOYW1lICkge1xuXHRcdFx0XHRcdC8vIHN0b3JlIGNsYXNzTmFtZSBpZiBzZXRcblx0XHRcdFx0XHRkYXRhX3ByaXYuc2V0KCB0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiwgdGhpcy5jbGFzc05hbWUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIElmIHRoZSBlbGVtZW50IGhhcyBhIGNsYXNzIG5hbWUgb3IgaWYgd2UncmUgcGFzc2VkIGBmYWxzZWAsXG5cdFx0XHRcdC8vIHRoZW4gcmVtb3ZlIHRoZSB3aG9sZSBjbGFzc25hbWUgKGlmIHRoZXJlIHdhcyBvbmUsIHRoZSBhYm92ZSBzYXZlZCBpdCkuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBicmluZyBiYWNrIHdoYXRldmVyIHdhcyBwcmV2aW91c2x5IHNhdmVkIChpZiBhbnl0aGluZyksXG5cdFx0XHRcdC8vIGZhbGxpbmcgYmFjayB0byB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC5cblx0XHRcdFx0dGhpcy5jbGFzc05hbWUgPSB0aGlzLmNsYXNzTmFtZSB8fCB2YWx1ZSA9PT0gZmFsc2UgPyBcIlwiIDogZGF0YV9wcml2LmdldCggdGhpcywgXCJfX2NsYXNzTmFtZV9fXCIgKSB8fCBcIlwiO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdGhhc0NsYXNzOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0dmFyIGNsYXNzTmFtZSA9IFwiIFwiICsgc2VsZWN0b3IgKyBcIiBcIixcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IHRoaXMubGVuZ3RoO1xuXHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdGlmICggdGhpc1tpXS5ub2RlVHlwZSA9PT0gMSAmJiAoXCIgXCIgKyB0aGlzW2ldLmNsYXNzTmFtZSArIFwiIFwiKS5yZXBsYWNlKHJjbGFzcywgXCIgXCIpLmluZGV4T2YoIGNsYXNzTmFtZSApID49IDAgKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufSk7XG5cblxuXG5cbnZhciBycmV0dXJuID0gL1xcci9nO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0dmFsOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0dmFyIGhvb2tzLCByZXQsIGlzRnVuY3Rpb24sXG5cdFx0XHRlbGVtID0gdGhpc1swXTtcblxuXHRcdGlmICggIWFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHRcdGhvb2tzID0galF1ZXJ5LnZhbEhvb2tzWyBlbGVtLnR5cGUgXSB8fCBqUXVlcnkudmFsSG9va3NbIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSBdO1xuXG5cdFx0XHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBcInZhbHVlXCIgKSkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0ID0gZWxlbS52YWx1ZTtcblxuXHRcdFx0XHRyZXR1cm4gdHlwZW9mIHJldCA9PT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdFx0Ly8gSGFuZGxlIG1vc3QgY29tbW9uIHN0cmluZyBjYXNlc1xuXHRcdFx0XHRcdHJldC5yZXBsYWNlKHJyZXR1cm4sIFwiXCIpIDpcblx0XHRcdFx0XHQvLyBIYW5kbGUgY2FzZXMgd2hlcmUgdmFsdWUgaXMgbnVsbC91bmRlZiBvciBudW1iZXJcblx0XHRcdFx0XHRyZXQgPT0gbnVsbCA/IFwiXCIgOiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICk7XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0dmFyIHZhbDtcblxuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlICE9PSAxICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaXNGdW5jdGlvbiApIHtcblx0XHRcdFx0dmFsID0gdmFsdWUuY2FsbCggdGhpcywgaSwgalF1ZXJ5KCB0aGlzICkudmFsKCkgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhbCA9IHZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUcmVhdCBudWxsL3VuZGVmaW5lZCBhcyBcIlwiOyBjb252ZXJ0IG51bWJlcnMgdG8gc3RyaW5nXG5cdFx0XHRpZiAoIHZhbCA9PSBudWxsICkge1xuXHRcdFx0XHR2YWwgPSBcIlwiO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHR2YWwgKz0gXCJcIjtcblxuXHRcdFx0fSBlbHNlIGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbCApICkge1xuXHRcdFx0XHR2YWwgPSBqUXVlcnkubWFwKCB2YWwsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZSArIFwiXCI7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRob29rcyA9IGpRdWVyeS52YWxIb29rc1sgdGhpcy50eXBlIF0gfHwgalF1ZXJ5LnZhbEhvb2tzWyB0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTtcblxuXHRcdFx0Ly8gSWYgc2V0IHJldHVybnMgdW5kZWZpbmVkLCBmYWxsIGJhY2sgdG8gbm9ybWFsIHNldHRpbmdcblx0XHRcdGlmICggIWhvb2tzIHx8ICEoXCJzZXRcIiBpbiBob29rcykgfHwgaG9va3Muc2V0KCB0aGlzLCB2YWwsIFwidmFsdWVcIiApID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHRoaXMudmFsdWUgPSB2YWw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZXh0ZW5kKHtcblx0dmFsSG9va3M6IHtcblx0XHRvcHRpb246IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciB2YWwgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBcInZhbHVlXCIgKTtcblx0XHRcdFx0cmV0dXJuIHZhbCAhPSBudWxsID9cblx0XHRcdFx0XHR2YWwgOlxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFMTAtMTErXG5cdFx0XHRcdFx0Ly8gb3B0aW9uLnRleHQgdGhyb3dzIGV4Y2VwdGlvbnMgKCMxNDY4NiwgIzE0ODU4KVxuXHRcdFx0XHRcdGpRdWVyeS50cmltKCBqUXVlcnkudGV4dCggZWxlbSApICk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRzZWxlY3Q6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciB2YWx1ZSwgb3B0aW9uLFxuXHRcdFx0XHRcdG9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsXG5cdFx0XHRcdFx0aW5kZXggPSBlbGVtLnNlbGVjdGVkSW5kZXgsXG5cdFx0XHRcdFx0b25lID0gZWxlbS50eXBlID09PSBcInNlbGVjdC1vbmVcIiB8fCBpbmRleCA8IDAsXG5cdFx0XHRcdFx0dmFsdWVzID0gb25lID8gbnVsbCA6IFtdLFxuXHRcdFx0XHRcdG1heCA9IG9uZSA/IGluZGV4ICsgMSA6IG9wdGlvbnMubGVuZ3RoLFxuXHRcdFx0XHRcdGkgPSBpbmRleCA8IDAgP1xuXHRcdFx0XHRcdFx0bWF4IDpcblx0XHRcdFx0XHRcdG9uZSA/IGluZGV4IDogMDtcblxuXHRcdFx0XHQvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBzZWxlY3RlZCBvcHRpb25zXG5cdFx0XHRcdGZvciAoIDsgaSA8IG1heDsgaSsrICkge1xuXHRcdFx0XHRcdG9wdGlvbiA9IG9wdGlvbnNbIGkgXTtcblxuXHRcdFx0XHRcdC8vIElFNi05IGRvZXNuJ3QgdXBkYXRlIHNlbGVjdGVkIGFmdGVyIGZvcm0gcmVzZXQgKCMyNTUxKVxuXHRcdFx0XHRcdGlmICggKCBvcHRpb24uc2VsZWN0ZWQgfHwgaSA9PT0gaW5kZXggKSAmJlxuXHRcdFx0XHRcdFx0XHQvLyBEb24ndCByZXR1cm4gb3B0aW9ucyB0aGF0IGFyZSBkaXNhYmxlZCBvciBpbiBhIGRpc2FibGVkIG9wdGdyb3VwXG5cdFx0XHRcdFx0XHRcdCggc3VwcG9ydC5vcHREaXNhYmxlZCA/ICFvcHRpb24uZGlzYWJsZWQgOiBvcHRpb24uZ2V0QXR0cmlidXRlKCBcImRpc2FibGVkXCIgKSA9PT0gbnVsbCApICYmXG5cdFx0XHRcdFx0XHRcdCggIW9wdGlvbi5wYXJlbnROb2RlLmRpc2FibGVkIHx8ICFqUXVlcnkubm9kZU5hbWUoIG9wdGlvbi5wYXJlbnROb2RlLCBcIm9wdGdyb3VwXCIgKSApICkge1xuXG5cdFx0XHRcdFx0XHQvLyBHZXQgdGhlIHNwZWNpZmljIHZhbHVlIGZvciB0aGUgb3B0aW9uXG5cdFx0XHRcdFx0XHR2YWx1ZSA9IGpRdWVyeSggb3B0aW9uICkudmFsKCk7XG5cblx0XHRcdFx0XHRcdC8vIFdlIGRvbid0IG5lZWQgYW4gYXJyYXkgZm9yIG9uZSBzZWxlY3RzXG5cdFx0XHRcdFx0XHRpZiAoIG9uZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBNdWx0aS1TZWxlY3RzIHJldHVybiBhbiBhcnJheVxuXHRcdFx0XHRcdFx0dmFsdWVzLnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHZhbHVlcztcblx0XHRcdH0sXG5cblx0XHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0XHR2YXIgb3B0aW9uU2V0LCBvcHRpb24sXG5cdFx0XHRcdFx0b3B0aW9ucyA9IGVsZW0ub3B0aW9ucyxcblx0XHRcdFx0XHR2YWx1ZXMgPSBqUXVlcnkubWFrZUFycmF5KCB2YWx1ZSApLFxuXHRcdFx0XHRcdGkgPSBvcHRpb25zLmxlbmd0aDtcblxuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRvcHRpb24gPSBvcHRpb25zWyBpIF07XG5cdFx0XHRcdFx0aWYgKCAob3B0aW9uLnNlbGVjdGVkID0galF1ZXJ5LmluQXJyYXkoIG9wdGlvbi52YWx1ZSwgdmFsdWVzICkgPj0gMCkgKSB7XG5cdFx0XHRcdFx0XHRvcHRpb25TZXQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEZvcmNlIGJyb3dzZXJzIHRvIGJlaGF2ZSBjb25zaXN0ZW50bHkgd2hlbiBub24tbWF0Y2hpbmcgdmFsdWUgaXMgc2V0XG5cdFx0XHRcdGlmICggIW9wdGlvblNldCApIHtcblx0XHRcdFx0XHRlbGVtLnNlbGVjdGVkSW5kZXggPSAtMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdmFsdWVzO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSk7XG5cbi8vIFJhZGlvcyBhbmQgY2hlY2tib3hlcyBnZXR0ZXIvc2V0dGVyXG5qUXVlcnkuZWFjaChbIFwicmFkaW9cIiwgXCJjaGVja2JveFwiIF0sIGZ1bmN0aW9uKCkge1xuXHRqUXVlcnkudmFsSG9va3NbIHRoaXMgXSA9IHtcblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRcdHJldHVybiAoIGVsZW0uY2hlY2tlZCA9IGpRdWVyeS5pbkFycmF5KCBqUXVlcnkoZWxlbSkudmFsKCksIHZhbHVlICkgPj0gMCApO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0aWYgKCAhc3VwcG9ydC5jaGVja09uICkge1xuXHRcdGpRdWVyeS52YWxIb29rc1sgdGhpcyBdLmdldCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKFwidmFsdWVcIikgPT09IG51bGwgPyBcIm9uXCIgOiBlbGVtLnZhbHVlO1xuXHRcdH07XG5cdH1cbn0pO1xuXG5cblxuXG4vLyBSZXR1cm4galF1ZXJ5IGZvciBhdHRyaWJ1dGVzLW9ubHkgaW5jbHVzaW9uXG5cblxualF1ZXJ5LmVhY2goIChcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIFwiICtcblx0XCJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBcIiArXG5cdFwiY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudVwiKS5zcGxpdChcIiBcIiksIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXG5cdC8vIEhhbmRsZSBldmVudCBiaW5kaW5nXG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMCA/XG5cdFx0XHR0aGlzLm9uKCBuYW1lLCBudWxsLCBkYXRhLCBmbiApIDpcblx0XHRcdHRoaXMudHJpZ2dlciggbmFtZSApO1xuXHR9O1xufSk7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRob3ZlcjogZnVuY3Rpb24oIGZuT3ZlciwgZm5PdXQgKSB7XG5cdFx0cmV0dXJuIHRoaXMubW91c2VlbnRlciggZm5PdmVyICkubW91c2VsZWF2ZSggZm5PdXQgfHwgZm5PdmVyICk7XG5cdH0sXG5cblx0YmluZDogZnVuY3Rpb24oIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIG51bGwsIGRhdGEsIGZuICk7XG5cdH0sXG5cdHVuYmluZDogZnVuY3Rpb24oIHR5cGVzLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vZmYoIHR5cGVzLCBudWxsLCBmbiApO1xuXHR9LFxuXG5cdGRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApO1xuXHR9LFxuXHR1bmRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBmbiApIHtcblx0XHQvLyAoIG5hbWVzcGFjZSApIG9yICggc2VsZWN0b3IsIHR5cGVzIFssIGZuXSApXG5cdFx0cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyB0aGlzLm9mZiggc2VsZWN0b3IsIFwiKipcIiApIDogdGhpcy5vZmYoIHR5cGVzLCBzZWxlY3RvciB8fCBcIioqXCIsIGZuICk7XG5cdH1cbn0pO1xuXG5cbnZhciBub25jZSA9IGpRdWVyeS5ub3coKTtcblxudmFyIHJxdWVyeSA9ICgvXFw/Lyk7XG5cblxuXG4vLyBTdXBwb3J0OiBBbmRyb2lkIDIuM1xuLy8gV29ya2Fyb3VuZCBmYWlsdXJlIHRvIHN0cmluZy1jYXN0IG51bGwgaW5wdXRcbmpRdWVyeS5wYXJzZUpTT04gPSBmdW5jdGlvbiggZGF0YSApIHtcblx0cmV0dXJuIEpTT04ucGFyc2UoIGRhdGEgKyBcIlwiICk7XG59O1xuXG5cbi8vIENyb3NzLWJyb3dzZXIgeG1sIHBhcnNpbmdcbmpRdWVyeS5wYXJzZVhNTCA9IGZ1bmN0aW9uKCBkYXRhICkge1xuXHR2YXIgeG1sLCB0bXA7XG5cdGlmICggIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBJRTlcblx0dHJ5IHtcblx0XHR0bXAgPSBuZXcgRE9NUGFyc2VyKCk7XG5cdFx0eG1sID0gdG1wLnBhcnNlRnJvbVN0cmluZyggZGF0YSwgXCJ0ZXh0L3htbFwiICk7XG5cdH0gY2F0Y2ggKCBlICkge1xuXHRcdHhtbCA9IHVuZGVmaW5lZDtcblx0fVxuXG5cdGlmICggIXhtbCB8fCB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwicGFyc2VyZXJyb3JcIiApLmxlbmd0aCApIHtcblx0XHRqUXVlcnkuZXJyb3IoIFwiSW52YWxpZCBYTUw6IFwiICsgZGF0YSApO1xuXHR9XG5cdHJldHVybiB4bWw7XG59O1xuXG5cbnZhclxuXHRyaGFzaCA9IC8jLiokLyxcblx0cnRzID0gLyhbPyZdKV89W14mXSovLFxuXHRyaGVhZGVycyA9IC9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKSQvbWcsXG5cdC8vICM3NjUzLCAjODEyNSwgIzgxNTI6IGxvY2FsIHByb3RvY29sIGRldGVjdGlvblxuXHRybG9jYWxQcm90b2NvbCA9IC9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLFxuXHRybm9Db250ZW50ID0gL14oPzpHRVR8SEVBRCkkLyxcblx0cnByb3RvY29sID0gL15cXC9cXC8vLFxuXHRydXJsID0gL14oW1xcdy4rLV0rOikoPzpcXC9cXC8oPzpbXlxcLz8jXSpAfCkoW15cXC8/IzpdKikoPzo6KFxcZCspfCl8KS8sXG5cblx0LyogUHJlZmlsdGVyc1xuXHQgKiAxKSBUaGV5IGFyZSB1c2VmdWwgdG8gaW50cm9kdWNlIGN1c3RvbSBkYXRhVHlwZXMgKHNlZSBhamF4L2pzb25wLmpzIGZvciBhbiBleGFtcGxlKVxuXHQgKiAyKSBUaGVzZSBhcmUgY2FsbGVkOlxuXHQgKiAgICAtIEJFRk9SRSBhc2tpbmcgZm9yIGEgdHJhbnNwb3J0XG5cdCAqICAgIC0gQUZURVIgcGFyYW0gc2VyaWFsaXphdGlvbiAocy5kYXRhIGlzIGEgc3RyaW5nIGlmIHMucHJvY2Vzc0RhdGEgaXMgdHJ1ZSlcblx0ICogMykga2V5IGlzIHRoZSBkYXRhVHlwZVxuXHQgKiA0KSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG5cdCAqIDUpIGV4ZWN1dGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGNvbnRpbnVlIGRvd24gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHRwcmVmaWx0ZXJzID0ge30sXG5cblx0LyogVHJhbnNwb3J0cyBiaW5kaW5nc1xuXHQgKiAxKSBrZXkgaXMgdGhlIGRhdGFUeXBlXG5cdCAqIDIpIHRoZSBjYXRjaGFsbCBzeW1ib2wgXCIqXCIgY2FuIGJlIHVzZWRcblx0ICogMykgc2VsZWN0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gZ28gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHR0cmFuc3BvcnRzID0ge30sXG5cblx0Ly8gQXZvaWQgY29tbWVudC1wcm9sb2cgY2hhciBzZXF1ZW5jZSAoIzEwMDk4KTsgbXVzdCBhcHBlYXNlIGxpbnQgYW5kIGV2YWRlIGNvbXByZXNzaW9uXG5cdGFsbFR5cGVzID0gXCIqL1wiLmNvbmNhdCggXCIqXCIgKSxcblxuXHQvLyBEb2N1bWVudCBsb2NhdGlvblxuXHRhamF4TG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24uaHJlZixcblxuXHQvLyBTZWdtZW50IGxvY2F0aW9uIGludG8gcGFydHNcblx0YWpheExvY1BhcnRzID0gcnVybC5leGVjKCBhamF4TG9jYXRpb24udG9Mb3dlckNhc2UoKSApIHx8IFtdO1xuXG4vLyBCYXNlIFwiY29uc3RydWN0b3JcIiBmb3IgalF1ZXJ5LmFqYXhQcmVmaWx0ZXIgYW5kIGpRdWVyeS5hamF4VHJhbnNwb3J0XG5mdW5jdGlvbiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHN0cnVjdHVyZSApIHtcblxuXHQvLyBkYXRhVHlwZUV4cHJlc3Npb24gaXMgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvIFwiKlwiXG5cdHJldHVybiBmdW5jdGlvbiggZGF0YVR5cGVFeHByZXNzaW9uLCBmdW5jICkge1xuXG5cdFx0aWYgKCB0eXBlb2YgZGF0YVR5cGVFeHByZXNzaW9uICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0ZnVuYyA9IGRhdGFUeXBlRXhwcmVzc2lvbjtcblx0XHRcdGRhdGFUeXBlRXhwcmVzc2lvbiA9IFwiKlwiO1xuXHRcdH1cblxuXHRcdHZhciBkYXRhVHlwZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0ZGF0YVR5cGVzID0gZGF0YVR5cGVFeHByZXNzaW9uLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggZnVuYyApICkge1xuXHRcdFx0Ly8gRm9yIGVhY2ggZGF0YVR5cGUgaW4gdGhlIGRhdGFUeXBlRXhwcmVzc2lvblxuXHRcdFx0d2hpbGUgKCAoZGF0YVR5cGUgPSBkYXRhVHlwZXNbaSsrXSkgKSB7XG5cdFx0XHRcdC8vIFByZXBlbmQgaWYgcmVxdWVzdGVkXG5cdFx0XHRcdGlmICggZGF0YVR5cGVbMF0gPT09IFwiK1wiICkge1xuXHRcdFx0XHRcdGRhdGFUeXBlID0gZGF0YVR5cGUuc2xpY2UoIDEgKSB8fCBcIipcIjtcblx0XHRcdFx0XHQoc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdKS51bnNoaWZ0KCBmdW5jICk7XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGFwcGVuZFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdChzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gPSBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10pLnB1c2goIGZ1bmMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxuLy8gQmFzZSBpbnNwZWN0aW9uIGZ1bmN0aW9uIGZvciBwcmVmaWx0ZXJzIGFuZCB0cmFuc3BvcnRzXG5mdW5jdGlvbiBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlLCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICkge1xuXG5cdHZhciBpbnNwZWN0ZWQgPSB7fSxcblx0XHRzZWVraW5nVHJhbnNwb3J0ID0gKCBzdHJ1Y3R1cmUgPT09IHRyYW5zcG9ydHMgKTtcblxuXHRmdW5jdGlvbiBpbnNwZWN0KCBkYXRhVHlwZSApIHtcblx0XHR2YXIgc2VsZWN0ZWQ7XG5cdFx0aW5zcGVjdGVkWyBkYXRhVHlwZSBdID0gdHJ1ZTtcblx0XHRqUXVlcnkuZWFjaCggc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdLCBmdW5jdGlvbiggXywgcHJlZmlsdGVyT3JGYWN0b3J5ICkge1xuXHRcdFx0dmFyIGRhdGFUeXBlT3JUcmFuc3BvcnQgPSBwcmVmaWx0ZXJPckZhY3RvcnkoIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKTtcblx0XHRcdGlmICggdHlwZW9mIGRhdGFUeXBlT3JUcmFuc3BvcnQgPT09IFwic3RyaW5nXCIgJiYgIXNlZWtpbmdUcmFuc3BvcnQgJiYgIWluc3BlY3RlZFsgZGF0YVR5cGVPclRyYW5zcG9ydCBdICkge1xuXHRcdFx0XHRvcHRpb25zLmRhdGFUeXBlcy51bnNoaWZ0KCBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHRcdGluc3BlY3QoIGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSBlbHNlIGlmICggc2Vla2luZ1RyYW5zcG9ydCApIHtcblx0XHRcdFx0cmV0dXJuICEoIHNlbGVjdGVkID0gZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiBzZWxlY3RlZDtcblx0fVxuXG5cdHJldHVybiBpbnNwZWN0KCBvcHRpb25zLmRhdGFUeXBlc1sgMCBdICkgfHwgIWluc3BlY3RlZFsgXCIqXCIgXSAmJiBpbnNwZWN0KCBcIipcIiApO1xufVxuXG4vLyBBIHNwZWNpYWwgZXh0ZW5kIGZvciBhamF4IG9wdGlvbnNcbi8vIHRoYXQgdGFrZXMgXCJmbGF0XCIgb3B0aW9ucyAobm90IHRvIGJlIGRlZXAgZXh0ZW5kZWQpXG4vLyBGaXhlcyAjOTg4N1xuZnVuY3Rpb24gYWpheEV4dGVuZCggdGFyZ2V0LCBzcmMgKSB7XG5cdHZhciBrZXksIGRlZXAsXG5cdFx0ZmxhdE9wdGlvbnMgPSBqUXVlcnkuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zIHx8IHt9O1xuXG5cdGZvciAoIGtleSBpbiBzcmMgKSB7XG5cdFx0aWYgKCBzcmNbIGtleSBdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHQoIGZsYXRPcHRpb25zWyBrZXkgXSA/IHRhcmdldCA6ICggZGVlcCB8fCAoZGVlcCA9IHt9KSApIClbIGtleSBdID0gc3JjWyBrZXkgXTtcblx0XHR9XG5cdH1cblx0aWYgKCBkZWVwICkge1xuXHRcdGpRdWVyeS5leHRlbmQoIHRydWUsIHRhcmdldCwgZGVlcCApO1xuXHR9XG5cblx0cmV0dXJuIHRhcmdldDtcbn1cblxuLyogSGFuZGxlcyByZXNwb25zZXMgdG8gYW4gYWpheCByZXF1ZXN0OlxuICogLSBmaW5kcyB0aGUgcmlnaHQgZGF0YVR5cGUgKG1lZGlhdGVzIGJldHdlZW4gY29udGVudC10eXBlIGFuZCBleHBlY3RlZCBkYXRhVHlwZSlcbiAqIC0gcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyByZXNwb25zZVxuICovXG5mdW5jdGlvbiBhamF4SGFuZGxlUmVzcG9uc2VzKCBzLCBqcVhIUiwgcmVzcG9uc2VzICkge1xuXG5cdHZhciBjdCwgdHlwZSwgZmluYWxEYXRhVHlwZSwgZmlyc3REYXRhVHlwZSxcblx0XHRjb250ZW50cyA9IHMuY29udGVudHMsXG5cdFx0ZGF0YVR5cGVzID0gcy5kYXRhVHlwZXM7XG5cblx0Ly8gUmVtb3ZlIGF1dG8gZGF0YVR5cGUgYW5kIGdldCBjb250ZW50LXR5cGUgaW4gdGhlIHByb2Nlc3Ncblx0d2hpbGUgKCBkYXRhVHlwZXNbIDAgXSA9PT0gXCIqXCIgKSB7XG5cdFx0ZGF0YVR5cGVzLnNoaWZ0KCk7XG5cdFx0aWYgKCBjdCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0Y3QgPSBzLm1pbWVUeXBlIHx8IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpO1xuXHRcdH1cblx0fVxuXG5cdC8vIENoZWNrIGlmIHdlJ3JlIGRlYWxpbmcgd2l0aCBhIGtub3duIGNvbnRlbnQtdHlwZVxuXHRpZiAoIGN0ICkge1xuXHRcdGZvciAoIHR5cGUgaW4gY29udGVudHMgKSB7XG5cdFx0XHRpZiAoIGNvbnRlbnRzWyB0eXBlIF0gJiYgY29udGVudHNbIHR5cGUgXS50ZXN0KCBjdCApICkge1xuXHRcdFx0XHRkYXRhVHlwZXMudW5zaGlmdCggdHlwZSApO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBDaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhIHJlc3BvbnNlIGZvciB0aGUgZXhwZWN0ZWQgZGF0YVR5cGVcblx0aWYgKCBkYXRhVHlwZXNbIDAgXSBpbiByZXNwb25zZXMgKSB7XG5cdFx0ZmluYWxEYXRhVHlwZSA9IGRhdGFUeXBlc1sgMCBdO1xuXHR9IGVsc2Uge1xuXHRcdC8vIFRyeSBjb252ZXJ0aWJsZSBkYXRhVHlwZXNcblx0XHRmb3IgKCB0eXBlIGluIHJlc3BvbnNlcyApIHtcblx0XHRcdGlmICggIWRhdGFUeXBlc1sgMCBdIHx8IHMuY29udmVydGVyc1sgdHlwZSArIFwiIFwiICsgZGF0YVR5cGVzWzBdIF0gKSB7XG5cdFx0XHRcdGZpbmFsRGF0YVR5cGUgPSB0eXBlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGlmICggIWZpcnN0RGF0YVR5cGUgKSB7XG5cdFx0XHRcdGZpcnN0RGF0YVR5cGUgPSB0eXBlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBPciBqdXN0IHVzZSBmaXJzdCBvbmVcblx0XHRmaW5hbERhdGFUeXBlID0gZmluYWxEYXRhVHlwZSB8fCBmaXJzdERhdGFUeXBlO1xuXHR9XG5cblx0Ly8gSWYgd2UgZm91bmQgYSBkYXRhVHlwZVxuXHQvLyBXZSBhZGQgdGhlIGRhdGFUeXBlIHRvIHRoZSBsaXN0IGlmIG5lZWRlZFxuXHQvLyBhbmQgcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlXG5cdGlmICggZmluYWxEYXRhVHlwZSApIHtcblx0XHRpZiAoIGZpbmFsRGF0YVR5cGUgIT09IGRhdGFUeXBlc1sgMCBdICkge1xuXHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIGZpbmFsRGF0YVR5cGUgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3BvbnNlc1sgZmluYWxEYXRhVHlwZSBdO1xuXHR9XG59XG5cbi8qIENoYWluIGNvbnZlcnNpb25zIGdpdmVuIHRoZSByZXF1ZXN0IGFuZCB0aGUgb3JpZ2luYWwgcmVzcG9uc2VcbiAqIEFsc28gc2V0cyB0aGUgcmVzcG9uc2VYWFggZmllbGRzIG9uIHRoZSBqcVhIUiBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKSB7XG5cdHZhciBjb252MiwgY3VycmVudCwgY29udiwgdG1wLCBwcmV2LFxuXHRcdGNvbnZlcnRlcnMgPSB7fSxcblx0XHQvLyBXb3JrIHdpdGggYSBjb3B5IG9mIGRhdGFUeXBlcyBpbiBjYXNlIHdlIG5lZWQgdG8gbW9kaWZ5IGl0IGZvciBjb252ZXJzaW9uXG5cdFx0ZGF0YVR5cGVzID0gcy5kYXRhVHlwZXMuc2xpY2UoKTtcblxuXHQvLyBDcmVhdGUgY29udmVydGVycyBtYXAgd2l0aCBsb3dlcmNhc2VkIGtleXNcblx0aWYgKCBkYXRhVHlwZXNbIDEgXSApIHtcblx0XHRmb3IgKCBjb252IGluIHMuY29udmVydGVycyApIHtcblx0XHRcdGNvbnZlcnRlcnNbIGNvbnYudG9Mb3dlckNhc2UoKSBdID0gcy5jb252ZXJ0ZXJzWyBjb252IF07XG5cdFx0fVxuXHR9XG5cblx0Y3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpO1xuXG5cdC8vIENvbnZlcnQgdG8gZWFjaCBzZXF1ZW50aWFsIGRhdGFUeXBlXG5cdHdoaWxlICggY3VycmVudCApIHtcblxuXHRcdGlmICggcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdICkge1xuXHRcdFx0anFYSFJbIHMucmVzcG9uc2VGaWVsZHNbIGN1cnJlbnQgXSBdID0gcmVzcG9uc2U7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgdGhlIGRhdGFGaWx0ZXIgaWYgcHJvdmlkZWRcblx0XHRpZiAoICFwcmV2ICYmIGlzU3VjY2VzcyAmJiBzLmRhdGFGaWx0ZXIgKSB7XG5cdFx0XHRyZXNwb25zZSA9IHMuZGF0YUZpbHRlciggcmVzcG9uc2UsIHMuZGF0YVR5cGUgKTtcblx0XHR9XG5cblx0XHRwcmV2ID0gY3VycmVudDtcblx0XHRjdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7XG5cblx0XHRpZiAoIGN1cnJlbnQgKSB7XG5cblx0XHQvLyBUaGVyZSdzIG9ubHkgd29yayB0byBkbyBpZiBjdXJyZW50IGRhdGFUeXBlIGlzIG5vbi1hdXRvXG5cdFx0XHRpZiAoIGN1cnJlbnQgPT09IFwiKlwiICkge1xuXG5cdFx0XHRcdGN1cnJlbnQgPSBwcmV2O1xuXG5cdFx0XHQvLyBDb252ZXJ0IHJlc3BvbnNlIGlmIHByZXYgZGF0YVR5cGUgaXMgbm9uLWF1dG8gYW5kIGRpZmZlcnMgZnJvbSBjdXJyZW50XG5cdFx0XHR9IGVsc2UgaWYgKCBwcmV2ICE9PSBcIipcIiAmJiBwcmV2ICE9PSBjdXJyZW50ICkge1xuXG5cdFx0XHRcdC8vIFNlZWsgYSBkaXJlY3QgY29udmVydGVyXG5cdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgXCIgXCIgKyBjdXJyZW50IF0gfHwgY29udmVydGVyc1sgXCIqIFwiICsgY3VycmVudCBdO1xuXG5cdFx0XHRcdC8vIElmIG5vbmUgZm91bmQsIHNlZWsgYSBwYWlyXG5cdFx0XHRcdGlmICggIWNvbnYgKSB7XG5cdFx0XHRcdFx0Zm9yICggY29udjIgaW4gY29udmVydGVycyApIHtcblxuXHRcdFx0XHRcdFx0Ly8gSWYgY29udjIgb3V0cHV0cyBjdXJyZW50XG5cdFx0XHRcdFx0XHR0bXAgPSBjb252Mi5zcGxpdCggXCIgXCIgKTtcblx0XHRcdFx0XHRcdGlmICggdG1wWyAxIF0gPT09IGN1cnJlbnQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gSWYgcHJldiBjYW4gYmUgY29udmVydGVkIHRvIGFjY2VwdGVkIGlucHV0XG5cdFx0XHRcdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgXCIgXCIgKyB0bXBbIDAgXSBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0Y29udmVydGVyc1sgXCIqIFwiICsgdG1wWyAwIF0gXTtcblx0XHRcdFx0XHRcdFx0aWYgKCBjb252ICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIENvbmRlbnNlIGVxdWl2YWxlbmNlIGNvbnZlcnRlcnNcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGNvbnYgPT09IHRydWUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgY29udjIgXTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgaW5zZXJ0IHRoZSBpbnRlcm1lZGlhdGUgZGF0YVR5cGVcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBjb252ZXJ0ZXJzWyBjb252MiBdICE9PSB0cnVlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y3VycmVudCA9IHRtcFsgMCBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIHRtcFsgMSBdICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQXBwbHkgY29udmVydGVyIChpZiBub3QgYW4gZXF1aXZhbGVuY2UpXG5cdFx0XHRcdGlmICggY29udiAhPT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdC8vIFVubGVzcyBlcnJvcnMgYXJlIGFsbG93ZWQgdG8gYnViYmxlLCBjYXRjaCBhbmQgcmV0dXJuIHRoZW1cblx0XHRcdFx0XHRpZiAoIGNvbnYgJiYgc1sgXCJ0aHJvd3NcIiBdICkge1xuXHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHsgc3RhdGU6IFwicGFyc2VyZXJyb3JcIiwgZXJyb3I6IGNvbnYgPyBlIDogXCJObyBjb252ZXJzaW9uIGZyb20gXCIgKyBwcmV2ICsgXCIgdG8gXCIgKyBjdXJyZW50IH07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHsgc3RhdGU6IFwic3VjY2Vzc1wiLCBkYXRhOiByZXNwb25zZSB9O1xufVxuXG5qUXVlcnkuZXh0ZW5kKHtcblxuXHQvLyBDb3VudGVyIGZvciBob2xkaW5nIHRoZSBudW1iZXIgb2YgYWN0aXZlIHF1ZXJpZXNcblx0YWN0aXZlOiAwLFxuXG5cdC8vIExhc3QtTW9kaWZpZWQgaGVhZGVyIGNhY2hlIGZvciBuZXh0IHJlcXVlc3Rcblx0bGFzdE1vZGlmaWVkOiB7fSxcblx0ZXRhZzoge30sXG5cblx0YWpheFNldHRpbmdzOiB7XG5cdFx0dXJsOiBhamF4TG9jYXRpb24sXG5cdFx0dHlwZTogXCJHRVRcIixcblx0XHRpc0xvY2FsOiBybG9jYWxQcm90b2NvbC50ZXN0KCBhamF4TG9jUGFydHNbIDEgXSApLFxuXHRcdGdsb2JhbDogdHJ1ZSxcblx0XHRwcm9jZXNzRGF0YTogdHJ1ZSxcblx0XHRhc3luYzogdHJ1ZSxcblx0XHRjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixcblx0XHQvKlxuXHRcdHRpbWVvdXQ6IDAsXG5cdFx0ZGF0YTogbnVsbCxcblx0XHRkYXRhVHlwZTogbnVsbCxcblx0XHR1c2VybmFtZTogbnVsbCxcblx0XHRwYXNzd29yZDogbnVsbCxcblx0XHRjYWNoZTogbnVsbCxcblx0XHR0aHJvd3M6IGZhbHNlLFxuXHRcdHRyYWRpdGlvbmFsOiBmYWxzZSxcblx0XHRoZWFkZXJzOiB7fSxcblx0XHQqL1xuXG5cdFx0YWNjZXB0czoge1xuXHRcdFx0XCIqXCI6IGFsbFR5cGVzLFxuXHRcdFx0dGV4dDogXCJ0ZXh0L3BsYWluXCIsXG5cdFx0XHRodG1sOiBcInRleHQvaHRtbFwiLFxuXHRcdFx0eG1sOiBcImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWxcIixcblx0XHRcdGpzb246IFwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJcblx0XHR9LFxuXG5cdFx0Y29udGVudHM6IHtcblx0XHRcdHhtbDogL3htbC8sXG5cdFx0XHRodG1sOiAvaHRtbC8sXG5cdFx0XHRqc29uOiAvanNvbi9cblx0XHR9LFxuXG5cdFx0cmVzcG9uc2VGaWVsZHM6IHtcblx0XHRcdHhtbDogXCJyZXNwb25zZVhNTFwiLFxuXHRcdFx0dGV4dDogXCJyZXNwb25zZVRleHRcIixcblx0XHRcdGpzb246IFwicmVzcG9uc2VKU09OXCJcblx0XHR9LFxuXG5cdFx0Ly8gRGF0YSBjb252ZXJ0ZXJzXG5cdFx0Ly8gS2V5cyBzZXBhcmF0ZSBzb3VyY2UgKG9yIGNhdGNoYWxsIFwiKlwiKSBhbmQgZGVzdGluYXRpb24gdHlwZXMgd2l0aCBhIHNpbmdsZSBzcGFjZVxuXHRcdGNvbnZlcnRlcnM6IHtcblxuXHRcdFx0Ly8gQ29udmVydCBhbnl0aGluZyB0byB0ZXh0XG5cdFx0XHRcIiogdGV4dFwiOiBTdHJpbmcsXG5cblx0XHRcdC8vIFRleHQgdG8gaHRtbCAodHJ1ZSA9IG5vIHRyYW5zZm9ybWF0aW9uKVxuXHRcdFx0XCJ0ZXh0IGh0bWxcIjogdHJ1ZSxcblxuXHRcdFx0Ly8gRXZhbHVhdGUgdGV4dCBhcyBhIGpzb24gZXhwcmVzc2lvblxuXHRcdFx0XCJ0ZXh0IGpzb25cIjogalF1ZXJ5LnBhcnNlSlNPTixcblxuXHRcdFx0Ly8gUGFyc2UgdGV4dCBhcyB4bWxcblx0XHRcdFwidGV4dCB4bWxcIjogalF1ZXJ5LnBhcnNlWE1MXG5cdFx0fSxcblxuXHRcdC8vIEZvciBvcHRpb25zIHRoYXQgc2hvdWxkbid0IGJlIGRlZXAgZXh0ZW5kZWQ6XG5cdFx0Ly8geW91IGNhbiBhZGQgeW91ciBvd24gY3VzdG9tIG9wdGlvbnMgaGVyZSBpZlxuXHRcdC8vIGFuZCB3aGVuIHlvdSBjcmVhdGUgb25lIHRoYXQgc2hvdWxkbid0IGJlXG5cdFx0Ly8gZGVlcCBleHRlbmRlZCAoc2VlIGFqYXhFeHRlbmQpXG5cdFx0ZmxhdE9wdGlvbnM6IHtcblx0XHRcdHVybDogdHJ1ZSxcblx0XHRcdGNvbnRleHQ6IHRydWVcblx0XHR9XG5cdH0sXG5cblx0Ly8gQ3JlYXRlcyBhIGZ1bGwgZmxlZGdlZCBzZXR0aW5ncyBvYmplY3QgaW50byB0YXJnZXRcblx0Ly8gd2l0aCBib3RoIGFqYXhTZXR0aW5ncyBhbmQgc2V0dGluZ3MgZmllbGRzLlxuXHQvLyBJZiB0YXJnZXQgaXMgb21pdHRlZCwgd3JpdGVzIGludG8gYWpheFNldHRpbmdzLlxuXHRhamF4U2V0dXA6IGZ1bmN0aW9uKCB0YXJnZXQsIHNldHRpbmdzICkge1xuXHRcdHJldHVybiBzZXR0aW5ncyA/XG5cblx0XHRcdC8vIEJ1aWxkaW5nIGEgc2V0dGluZ3Mgb2JqZWN0XG5cdFx0XHRhamF4RXh0ZW5kKCBhamF4RXh0ZW5kKCB0YXJnZXQsIGpRdWVyeS5hamF4U2V0dGluZ3MgKSwgc2V0dGluZ3MgKSA6XG5cblx0XHRcdC8vIEV4dGVuZGluZyBhamF4U2V0dGluZ3Ncblx0XHRcdGFqYXhFeHRlbmQoIGpRdWVyeS5hamF4U2V0dGluZ3MsIHRhcmdldCApO1xuXHR9LFxuXG5cdGFqYXhQcmVmaWx0ZXI6IGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycyApLFxuXHRhamF4VHJhbnNwb3J0OiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHRyYW5zcG9ydHMgKSxcblxuXHQvLyBNYWluIG1ldGhvZFxuXHRhamF4OiBmdW5jdGlvbiggdXJsLCBvcHRpb25zICkge1xuXG5cdFx0Ly8gSWYgdXJsIGlzIGFuIG9iamVjdCwgc2ltdWxhdGUgcHJlLTEuNSBzaWduYXR1cmVcblx0XHRpZiAoIHR5cGVvZiB1cmwgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRvcHRpb25zID0gdXJsO1xuXHRcdFx0dXJsID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdC8vIEZvcmNlIG9wdGlvbnMgdG8gYmUgYW4gb2JqZWN0XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0XHR2YXIgdHJhbnNwb3J0LFxuXHRcdFx0Ly8gVVJMIHdpdGhvdXQgYW50aS1jYWNoZSBwYXJhbVxuXHRcdFx0Y2FjaGVVUkwsXG5cdFx0XHQvLyBSZXNwb25zZSBoZWFkZXJzXG5cdFx0XHRyZXNwb25zZUhlYWRlcnNTdHJpbmcsXG5cdFx0XHRyZXNwb25zZUhlYWRlcnMsXG5cdFx0XHQvLyB0aW1lb3V0IGhhbmRsZVxuXHRcdFx0dGltZW91dFRpbWVyLFxuXHRcdFx0Ly8gQ3Jvc3MtZG9tYWluIGRldGVjdGlvbiB2YXJzXG5cdFx0XHRwYXJ0cyxcblx0XHRcdC8vIFRvIGtub3cgaWYgZ2xvYmFsIGV2ZW50cyBhcmUgdG8gYmUgZGlzcGF0Y2hlZFxuXHRcdFx0ZmlyZUdsb2JhbHMsXG5cdFx0XHQvLyBMb29wIHZhcmlhYmxlXG5cdFx0XHRpLFxuXHRcdFx0Ly8gQ3JlYXRlIHRoZSBmaW5hbCBvcHRpb25zIG9iamVjdFxuXHRcdFx0cyA9IGpRdWVyeS5hamF4U2V0dXAoIHt9LCBvcHRpb25zICksXG5cdFx0XHQvLyBDYWxsYmFja3MgY29udGV4dFxuXHRcdFx0Y2FsbGJhY2tDb250ZXh0ID0gcy5jb250ZXh0IHx8IHMsXG5cdFx0XHQvLyBDb250ZXh0IGZvciBnbG9iYWwgZXZlbnRzIGlzIGNhbGxiYWNrQ29udGV4dCBpZiBpdCBpcyBhIERPTSBub2RlIG9yIGpRdWVyeSBjb2xsZWN0aW9uXG5cdFx0XHRnbG9iYWxFdmVudENvbnRleHQgPSBzLmNvbnRleHQgJiYgKCBjYWxsYmFja0NvbnRleHQubm9kZVR5cGUgfHwgY2FsbGJhY2tDb250ZXh0LmpxdWVyeSApID9cblx0XHRcdFx0alF1ZXJ5KCBjYWxsYmFja0NvbnRleHQgKSA6XG5cdFx0XHRcdGpRdWVyeS5ldmVudCxcblx0XHRcdC8vIERlZmVycmVkc1xuXHRcdFx0ZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdGNvbXBsZXRlRGVmZXJyZWQgPSBqUXVlcnkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXG5cdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0c3RhdHVzQ29kZSA9IHMuc3RhdHVzQ29kZSB8fCB7fSxcblx0XHRcdC8vIEhlYWRlcnMgKHRoZXkgYXJlIHNlbnQgYWxsIGF0IG9uY2UpXG5cdFx0XHRyZXF1ZXN0SGVhZGVycyA9IHt9LFxuXHRcdFx0cmVxdWVzdEhlYWRlcnNOYW1lcyA9IHt9LFxuXHRcdFx0Ly8gVGhlIGpxWEhSIHN0YXRlXG5cdFx0XHRzdGF0ZSA9IDAsXG5cdFx0XHQvLyBEZWZhdWx0IGFib3J0IG1lc3NhZ2Vcblx0XHRcdHN0ckFib3J0ID0gXCJjYW5jZWxlZFwiLFxuXHRcdFx0Ly8gRmFrZSB4aHJcblx0XHRcdGpxWEhSID0ge1xuXHRcdFx0XHRyZWFkeVN0YXRlOiAwLFxuXG5cdFx0XHRcdC8vIEJ1aWxkcyBoZWFkZXJzIGhhc2h0YWJsZSBpZiBuZWVkZWRcblx0XHRcdFx0Z2V0UmVzcG9uc2VIZWFkZXI6IGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0XHRcdFx0dmFyIG1hdGNoO1xuXHRcdFx0XHRcdGlmICggc3RhdGUgPT09IDIgKSB7XG5cdFx0XHRcdFx0XHRpZiAoICFyZXNwb25zZUhlYWRlcnMgKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlSGVhZGVycyA9IHt9O1xuXHRcdFx0XHRcdFx0XHR3aGlsZSAoIChtYXRjaCA9IHJoZWFkZXJzLmV4ZWMoIHJlc3BvbnNlSGVhZGVyc1N0cmluZyApKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXNwb25zZUhlYWRlcnNbIG1hdGNoWzFdLnRvTG93ZXJDYXNlKCkgXSA9IG1hdGNoWyAyIF07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdG1hdGNoID0gcmVzcG9uc2VIZWFkZXJzWyBrZXkudG9Mb3dlckNhc2UoKSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gbWF0Y2ggPT0gbnVsbCA/IG51bGwgOiBtYXRjaDtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBSYXcgc3RyaW5nXG5cdFx0XHRcdGdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHN0YXRlID09PSAyID8gcmVzcG9uc2VIZWFkZXJzU3RyaW5nIDogbnVsbDtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBDYWNoZXMgdGhlIGhlYWRlclxuXHRcdFx0XHRzZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0dmFyIGxuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdGlmICggIXN0YXRlICkge1xuXHRcdFx0XHRcdFx0bmFtZSA9IHJlcXVlc3RIZWFkZXJzTmFtZXNbIGxuYW1lIF0gPSByZXF1ZXN0SGVhZGVyc05hbWVzWyBsbmFtZSBdIHx8IG5hbWU7XG5cdFx0XHRcdFx0XHRyZXF1ZXN0SGVhZGVyc1sgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIE92ZXJyaWRlcyByZXNwb25zZSBjb250ZW50LXR5cGUgaGVhZGVyXG5cdFx0XHRcdG92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdFx0XHRcdGlmICggIXN0YXRlICkge1xuXHRcdFx0XHRcdFx0cy5taW1lVHlwZSA9IHR5cGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRcdHN0YXR1c0NvZGU6IGZ1bmN0aW9uKCBtYXAgKSB7XG5cdFx0XHRcdFx0dmFyIGNvZGU7XG5cdFx0XHRcdFx0aWYgKCBtYXAgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIHN0YXRlIDwgMiApIHtcblx0XHRcdFx0XHRcdFx0Zm9yICggY29kZSBpbiBtYXAgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gTGF6eS1hZGQgdGhlIG5ldyBjYWxsYmFjayBpbiBhIHdheSB0aGF0IHByZXNlcnZlcyBvbGQgb25lc1xuXHRcdFx0XHRcdFx0XHRcdHN0YXR1c0NvZGVbIGNvZGUgXSA9IFsgc3RhdHVzQ29kZVsgY29kZSBdLCBtYXBbIGNvZGUgXSBdO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBFeGVjdXRlIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja3Ncblx0XHRcdFx0XHRcdFx0anFYSFIuYWx3YXlzKCBtYXBbIGpxWEhSLnN0YXR1cyBdICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIENhbmNlbCB0aGUgcmVxdWVzdFxuXHRcdFx0XHRhYm9ydDogZnVuY3Rpb24oIHN0YXR1c1RleHQgKSB7XG5cdFx0XHRcdFx0dmFyIGZpbmFsVGV4dCA9IHN0YXR1c1RleHQgfHwgc3RyQWJvcnQ7XG5cdFx0XHRcdFx0aWYgKCB0cmFuc3BvcnQgKSB7XG5cdFx0XHRcdFx0XHR0cmFuc3BvcnQuYWJvcnQoIGZpbmFsVGV4dCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkb25lKCAwLCBmaW5hbFRleHQgKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdC8vIEF0dGFjaCBkZWZlcnJlZHNcblx0XHRkZWZlcnJlZC5wcm9taXNlKCBqcVhIUiApLmNvbXBsZXRlID0gY29tcGxldGVEZWZlcnJlZC5hZGQ7XG5cdFx0anFYSFIuc3VjY2VzcyA9IGpxWEhSLmRvbmU7XG5cdFx0anFYSFIuZXJyb3IgPSBqcVhIUi5mYWlsO1xuXG5cdFx0Ly8gUmVtb3ZlIGhhc2ggY2hhcmFjdGVyICgjNzUzMTogYW5kIHN0cmluZyBwcm9tb3Rpb24pXG5cdFx0Ly8gQWRkIHByb3RvY29sIGlmIG5vdCBwcm92aWRlZCAocHJlZmlsdGVycyBtaWdodCBleHBlY3QgaXQpXG5cdFx0Ly8gSGFuZGxlIGZhbHN5IHVybCBpbiB0aGUgc2V0dGluZ3Mgb2JqZWN0ICgjMTAwOTM6IGNvbnNpc3RlbmN5IHdpdGggb2xkIHNpZ25hdHVyZSlcblx0XHQvLyBXZSBhbHNvIHVzZSB0aGUgdXJsIHBhcmFtZXRlciBpZiBhdmFpbGFibGVcblx0XHRzLnVybCA9ICggKCB1cmwgfHwgcy51cmwgfHwgYWpheExvY2F0aW9uICkgKyBcIlwiICkucmVwbGFjZSggcmhhc2gsIFwiXCIgKVxuXHRcdFx0LnJlcGxhY2UoIHJwcm90b2NvbCwgYWpheExvY1BhcnRzWyAxIF0gKyBcIi8vXCIgKTtcblxuXHRcdC8vIEFsaWFzIG1ldGhvZCBvcHRpb24gdG8gdHlwZSBhcyBwZXIgdGlja2V0ICMxMjAwNFxuXHRcdHMudHlwZSA9IG9wdGlvbnMubWV0aG9kIHx8IG9wdGlvbnMudHlwZSB8fCBzLm1ldGhvZCB8fCBzLnR5cGU7XG5cblx0XHQvLyBFeHRyYWN0IGRhdGFUeXBlcyBsaXN0XG5cdFx0cy5kYXRhVHlwZXMgPSBqUXVlcnkudHJpbSggcy5kYXRhVHlwZSB8fCBcIipcIiApLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXG5cdFx0Ly8gQSBjcm9zcy1kb21haW4gcmVxdWVzdCBpcyBpbiBvcmRlciB3aGVuIHdlIGhhdmUgYSBwcm90b2NvbDpob3N0OnBvcnQgbWlzbWF0Y2hcblx0XHRpZiAoIHMuY3Jvc3NEb21haW4gPT0gbnVsbCApIHtcblx0XHRcdHBhcnRzID0gcnVybC5leGVjKCBzLnVybC50b0xvd2VyQ2FzZSgpICk7XG5cdFx0XHRzLmNyb3NzRG9tYWluID0gISEoIHBhcnRzICYmXG5cdFx0XHRcdCggcGFydHNbIDEgXSAhPT0gYWpheExvY1BhcnRzWyAxIF0gfHwgcGFydHNbIDIgXSAhPT0gYWpheExvY1BhcnRzWyAyIF0gfHxcblx0XHRcdFx0XHQoIHBhcnRzWyAzIF0gfHwgKCBwYXJ0c1sgMSBdID09PSBcImh0dHA6XCIgPyBcIjgwXCIgOiBcIjQ0M1wiICkgKSAhPT1cblx0XHRcdFx0XHRcdCggYWpheExvY1BhcnRzWyAzIF0gfHwgKCBhamF4TG9jUGFydHNbIDEgXSA9PT0gXCJodHRwOlwiID8gXCI4MFwiIDogXCI0NDNcIiApICkgKVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBDb252ZXJ0IGRhdGEgaWYgbm90IGFscmVhZHkgYSBzdHJpbmdcblx0XHRpZiAoIHMuZGF0YSAmJiBzLnByb2Nlc3NEYXRhICYmIHR5cGVvZiBzLmRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRzLmRhdGEgPSBqUXVlcnkucGFyYW0oIHMuZGF0YSwgcy50cmFkaXRpb25hbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHByZWZpbHRlcnNcblx0XHRpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycywgcywgb3B0aW9ucywganFYSFIgKTtcblxuXHRcdC8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGEgcHJlZmlsdGVyLCBzdG9wIHRoZXJlXG5cdFx0aWYgKCBzdGF0ZSA9PT0gMiApIHtcblx0XHRcdHJldHVybiBqcVhIUjtcblx0XHR9XG5cblx0XHQvLyBXZSBjYW4gZmlyZSBnbG9iYWwgZXZlbnRzIGFzIG9mIG5vdyBpZiBhc2tlZCB0b1xuXHRcdC8vIERvbid0IGZpcmUgZXZlbnRzIGlmIGpRdWVyeS5ldmVudCBpcyB1bmRlZmluZWQgaW4gYW4gQU1ELXVzYWdlIHNjZW5hcmlvICgjMTUxMTgpXG5cdFx0ZmlyZUdsb2JhbHMgPSBqUXVlcnkuZXZlbnQgJiYgcy5nbG9iYWw7XG5cblx0XHQvLyBXYXRjaCBmb3IgYSBuZXcgc2V0IG9mIHJlcXVlc3RzXG5cdFx0aWYgKCBmaXJlR2xvYmFscyAmJiBqUXVlcnkuYWN0aXZlKysgPT09IDAgKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKTtcblx0XHR9XG5cblx0XHQvLyBVcHBlcmNhc2UgdGhlIHR5cGVcblx0XHRzLnR5cGUgPSBzLnR5cGUudG9VcHBlckNhc2UoKTtcblxuXHRcdC8vIERldGVybWluZSBpZiByZXF1ZXN0IGhhcyBjb250ZW50XG5cdFx0cy5oYXNDb250ZW50ID0gIXJub0NvbnRlbnQudGVzdCggcy50eXBlICk7XG5cblx0XHQvLyBTYXZlIHRoZSBVUkwgaW4gY2FzZSB3ZSdyZSB0b3lpbmcgd2l0aCB0aGUgSWYtTW9kaWZpZWQtU2luY2Vcblx0XHQvLyBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIgbGF0ZXIgb25cblx0XHRjYWNoZVVSTCA9IHMudXJsO1xuXG5cdFx0Ly8gTW9yZSBvcHRpb25zIGhhbmRsaW5nIGZvciByZXF1ZXN0cyB3aXRoIG5vIGNvbnRlbnRcblx0XHRpZiAoICFzLmhhc0NvbnRlbnQgKSB7XG5cblx0XHRcdC8vIElmIGRhdGEgaXMgYXZhaWxhYmxlLCBhcHBlbmQgZGF0YSB0byB1cmxcblx0XHRcdGlmICggcy5kYXRhICkge1xuXHRcdFx0XHRjYWNoZVVSTCA9ICggcy51cmwgKz0gKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/IFwiJlwiIDogXCI/XCIgKSArIHMuZGF0YSApO1xuXHRcdFx0XHQvLyAjOTY4MjogcmVtb3ZlIGRhdGEgc28gdGhhdCBpdCdzIG5vdCB1c2VkIGluIGFuIGV2ZW50dWFsIHJldHJ5XG5cdFx0XHRcdGRlbGV0ZSBzLmRhdGE7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCBhbnRpLWNhY2hlIGluIHVybCBpZiBuZWVkZWRcblx0XHRcdGlmICggcy5jYWNoZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdHMudXJsID0gcnRzLnRlc3QoIGNhY2hlVVJMICkgP1xuXG5cdFx0XHRcdFx0Ly8gSWYgdGhlcmUgaXMgYWxyZWFkeSBhICdfJyBwYXJhbWV0ZXIsIHNldCBpdHMgdmFsdWVcblx0XHRcdFx0XHRjYWNoZVVSTC5yZXBsYWNlKCBydHMsIFwiJDFfPVwiICsgbm9uY2UrKyApIDpcblxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSBhZGQgb25lIHRvIHRoZSBlbmRcblx0XHRcdFx0XHRjYWNoZVVSTCArICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBcIl89XCIgKyBub25jZSsrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0aWYgKCBzLmlmTW9kaWZpZWQgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKSB7XG5cdFx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiSWYtTW9kaWZpZWQtU2luY2VcIiwgalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSApIHtcblx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJJZi1Ob25lLU1hdGNoXCIsIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBjb3JyZWN0IGhlYWRlciwgaWYgZGF0YSBpcyBiZWluZyBzZW50XG5cdFx0aWYgKCBzLmRhdGEgJiYgcy5oYXNDb250ZW50ICYmIHMuY29udGVudFR5cGUgIT09IGZhbHNlIHx8IG9wdGlvbnMuY29udGVudFR5cGUgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIkNvbnRlbnQtVHlwZVwiLCBzLmNvbnRlbnRUeXBlICk7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBBY2NlcHRzIGhlYWRlciBmb3IgdGhlIHNlcnZlciwgZGVwZW5kaW5nIG9uIHRoZSBkYXRhVHlwZVxuXHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoXG5cdFx0XHRcIkFjY2VwdFwiLFxuXHRcdFx0cy5kYXRhVHlwZXNbIDAgXSAmJiBzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWzBdIF0gP1xuXHRcdFx0XHRzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWzBdIF0gKyAoIHMuZGF0YVR5cGVzWyAwIF0gIT09IFwiKlwiID8gXCIsIFwiICsgYWxsVHlwZXMgKyBcIjsgcT0wLjAxXCIgOiBcIlwiICkgOlxuXHRcdFx0XHRzLmFjY2VwdHNbIFwiKlwiIF1cblx0XHQpO1xuXG5cdFx0Ly8gQ2hlY2sgZm9yIGhlYWRlcnMgb3B0aW9uXG5cdFx0Zm9yICggaSBpbiBzLmhlYWRlcnMgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBzLmhlYWRlcnNbIGkgXSApO1xuXHRcdH1cblxuXHRcdC8vIEFsbG93IGN1c3RvbSBoZWFkZXJzL21pbWV0eXBlcyBhbmQgZWFybHkgYWJvcnRcblx0XHRpZiAoIHMuYmVmb3JlU2VuZCAmJiAoIHMuYmVmb3JlU2VuZC5jYWxsKCBjYWxsYmFja0NvbnRleHQsIGpxWEhSLCBzICkgPT09IGZhbHNlIHx8IHN0YXRlID09PSAyICkgKSB7XG5cdFx0XHQvLyBBYm9ydCBpZiBub3QgZG9uZSBhbHJlYWR5IGFuZCByZXR1cm5cblx0XHRcdHJldHVybiBqcVhIUi5hYm9ydCgpO1xuXHRcdH1cblxuXHRcdC8vIEFib3J0aW5nIGlzIG5vIGxvbmdlciBhIGNhbmNlbGxhdGlvblxuXHRcdHN0ckFib3J0ID0gXCJhYm9ydFwiO1xuXG5cdFx0Ly8gSW5zdGFsbCBjYWxsYmFja3Mgb24gZGVmZXJyZWRzXG5cdFx0Zm9yICggaSBpbiB7IHN1Y2Nlc3M6IDEsIGVycm9yOiAxLCBjb21wbGV0ZTogMSB9ICkge1xuXHRcdFx0anFYSFJbIGkgXSggc1sgaSBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IHRyYW5zcG9ydFxuXHRcdHRyYW5zcG9ydCA9IGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzLCBzLCBvcHRpb25zLCBqcVhIUiApO1xuXG5cdFx0Ly8gSWYgbm8gdHJhbnNwb3J0LCB3ZSBhdXRvLWFib3J0XG5cdFx0aWYgKCAhdHJhbnNwb3J0ICkge1xuXHRcdFx0ZG9uZSggLTEsIFwiTm8gVHJhbnNwb3J0XCIgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0anFYSFIucmVhZHlTdGF0ZSA9IDE7XG5cblx0XHRcdC8vIFNlbmQgZ2xvYmFsIGV2ZW50XG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4U2VuZFwiLCBbIGpxWEhSLCBzIF0gKTtcblx0XHRcdH1cblx0XHRcdC8vIFRpbWVvdXRcblx0XHRcdGlmICggcy5hc3luYyAmJiBzLnRpbWVvdXQgPiAwICkge1xuXHRcdFx0XHR0aW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGpxWEhSLmFib3J0KFwidGltZW91dFwiKTtcblx0XHRcdFx0fSwgcy50aW1lb3V0ICk7XG5cdFx0XHR9XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdHN0YXRlID0gMTtcblx0XHRcdFx0dHJhbnNwb3J0LnNlbmQoIHJlcXVlc3RIZWFkZXJzLCBkb25lICk7XG5cdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0Ly8gUHJvcGFnYXRlIGV4Y2VwdGlvbiBhcyBlcnJvciBpZiBub3QgZG9uZVxuXHRcdFx0XHRpZiAoIHN0YXRlIDwgMiApIHtcblx0XHRcdFx0XHRkb25lKCAtMSwgZSApO1xuXHRcdFx0XHQvLyBTaW1wbHkgcmV0aHJvdyBvdGhlcndpc2Vcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbGJhY2sgZm9yIHdoZW4gZXZlcnl0aGluZyBpcyBkb25lXG5cdFx0ZnVuY3Rpb24gZG9uZSggc3RhdHVzLCBuYXRpdmVTdGF0dXNUZXh0LCByZXNwb25zZXMsIGhlYWRlcnMgKSB7XG5cdFx0XHR2YXIgaXNTdWNjZXNzLCBzdWNjZXNzLCBlcnJvciwgcmVzcG9uc2UsIG1vZGlmaWVkLFxuXHRcdFx0XHRzdGF0dXNUZXh0ID0gbmF0aXZlU3RhdHVzVGV4dDtcblxuXHRcdFx0Ly8gQ2FsbGVkIG9uY2Vcblx0XHRcdGlmICggc3RhdGUgPT09IDIgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhdGUgaXMgXCJkb25lXCIgbm93XG5cdFx0XHRzdGF0ZSA9IDI7XG5cblx0XHRcdC8vIENsZWFyIHRpbWVvdXQgaWYgaXQgZXhpc3RzXG5cdFx0XHRpZiAoIHRpbWVvdXRUaW1lciApIHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aW1lb3V0VGltZXIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRGVyZWZlcmVuY2UgdHJhbnNwb3J0IGZvciBlYXJseSBnYXJiYWdlIGNvbGxlY3Rpb25cblx0XHRcdC8vIChubyBtYXR0ZXIgaG93IGxvbmcgdGhlIGpxWEhSIG9iamVjdCB3aWxsIGJlIHVzZWQpXG5cdFx0XHR0cmFuc3BvcnQgPSB1bmRlZmluZWQ7XG5cblx0XHRcdC8vIENhY2hlIHJlc3BvbnNlIGhlYWRlcnNcblx0XHRcdHJlc3BvbnNlSGVhZGVyc1N0cmluZyA9IGhlYWRlcnMgfHwgXCJcIjtcblxuXHRcdFx0Ly8gU2V0IHJlYWR5U3RhdGVcblx0XHRcdGpxWEhSLnJlYWR5U3RhdGUgPSBzdGF0dXMgPiAwID8gNCA6IDA7XG5cblx0XHRcdC8vIERldGVybWluZSBpZiBzdWNjZXNzZnVsXG5cdFx0XHRpc1N1Y2Nlc3MgPSBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMCB8fCBzdGF0dXMgPT09IDMwNDtcblxuXHRcdFx0Ly8gR2V0IHJlc3BvbnNlIGRhdGFcblx0XHRcdGlmICggcmVzcG9uc2VzICkge1xuXHRcdFx0XHRyZXNwb25zZSA9IGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29udmVydCBubyBtYXR0ZXIgd2hhdCAodGhhdCB3YXkgcmVzcG9uc2VYWFggZmllbGRzIGFyZSBhbHdheXMgc2V0KVxuXHRcdFx0cmVzcG9uc2UgPSBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKTtcblxuXHRcdFx0Ly8gSWYgc3VjY2Vzc2Z1bCwgaGFuZGxlIHR5cGUgY2hhaW5pbmdcblx0XHRcdGlmICggaXNTdWNjZXNzICkge1xuXG5cdFx0XHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0XHRcdGlmICggcy5pZk1vZGlmaWVkICkge1xuXHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJMYXN0LU1vZGlmaWVkXCIpO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJldGFnXCIpO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSA9IG1vZGlmaWVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGlmIG5vIGNvbnRlbnRcblx0XHRcdFx0aWYgKCBzdGF0dXMgPT09IDIwNCB8fCBzLnR5cGUgPT09IFwiSEVBRFwiICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcIm5vY29udGVudFwiO1xuXG5cdFx0XHRcdC8vIGlmIG5vdCBtb2RpZmllZFxuXHRcdFx0XHR9IGVsc2UgaWYgKCBzdGF0dXMgPT09IDMwNCApIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJub3Rtb2RpZmllZFwiO1xuXG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgZGF0YSwgbGV0J3MgY29udmVydCBpdFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSByZXNwb25zZS5zdGF0ZTtcblx0XHRcdFx0XHRzdWNjZXNzID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0XHRlcnJvciA9IHJlc3BvbnNlLmVycm9yO1xuXHRcdFx0XHRcdGlzU3VjY2VzcyA9ICFlcnJvcjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRXh0cmFjdCBlcnJvciBmcm9tIHN0YXR1c1RleHQgYW5kIG5vcm1hbGl6ZSBmb3Igbm9uLWFib3J0c1xuXHRcdFx0XHRlcnJvciA9IHN0YXR1c1RleHQ7XG5cdFx0XHRcdGlmICggc3RhdHVzIHx8ICFzdGF0dXNUZXh0ICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcImVycm9yXCI7XG5cdFx0XHRcdFx0aWYgKCBzdGF0dXMgPCAwICkge1xuXHRcdFx0XHRcdFx0c3RhdHVzID0gMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IGRhdGEgZm9yIHRoZSBmYWtlIHhociBvYmplY3Rcblx0XHRcdGpxWEhSLnN0YXR1cyA9IHN0YXR1cztcblx0XHRcdGpxWEhSLnN0YXR1c1RleHQgPSAoIG5hdGl2ZVN0YXR1c1RleHQgfHwgc3RhdHVzVGV4dCApICsgXCJcIjtcblxuXHRcdFx0Ly8gU3VjY2Vzcy9FcnJvclxuXHRcdFx0aWYgKCBpc1N1Y2Nlc3MgKSB7XG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsgc3VjY2Vzcywgc3RhdHVzVGV4dCwganFYSFIgXSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0V2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0LCBlcnJvciBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRqcVhIUi5zdGF0dXNDb2RlKCBzdGF0dXNDb2RlICk7XG5cdFx0XHRzdGF0dXNDb2RlID0gdW5kZWZpbmVkO1xuXG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggaXNTdWNjZXNzID8gXCJhamF4U3VjY2Vzc1wiIDogXCJhamF4RXJyb3JcIixcblx0XHRcdFx0XHRbIGpxWEhSLCBzLCBpc1N1Y2Nlc3MgPyBzdWNjZXNzIDogZXJyb3IgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb21wbGV0ZVxuXHRcdFx0Y29tcGxldGVEZWZlcnJlZC5maXJlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0IF0gKTtcblxuXHRcdFx0aWYgKCBmaXJlR2xvYmFscyApIHtcblx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIFwiYWpheENvbXBsZXRlXCIsIFsganFYSFIsIHMgXSApO1xuXHRcdFx0XHQvLyBIYW5kbGUgdGhlIGdsb2JhbCBBSkFYIGNvdW50ZXJcblx0XHRcdFx0aWYgKCAhKCAtLWpRdWVyeS5hY3RpdmUgKSApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcihcImFqYXhTdG9wXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGpxWEhSO1xuXHR9LFxuXG5cdGdldEpTT046IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ2V0KCB1cmwsIGRhdGEsIGNhbGxiYWNrLCBcImpzb25cIiApO1xuXHR9LFxuXG5cdGdldFNjcmlwdDogZnVuY3Rpb24oIHVybCwgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgdW5kZWZpbmVkLCBjYWxsYmFjaywgXCJzY3JpcHRcIiApO1xuXHR9XG59KTtcblxualF1ZXJ5LmVhY2goIFsgXCJnZXRcIiwgXCJwb3N0XCIgXSwgZnVuY3Rpb24oIGksIG1ldGhvZCApIHtcblx0alF1ZXJ5WyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrLCB0eXBlICkge1xuXHRcdC8vIFNoaWZ0IGFyZ3VtZW50cyBpZiBkYXRhIGFyZ3VtZW50IHdhcyBvbWl0dGVkXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggZGF0YSApICkge1xuXHRcdFx0dHlwZSA9IHR5cGUgfHwgY2FsbGJhY2s7XG5cdFx0XHRjYWxsYmFjayA9IGRhdGE7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdHJldHVybiBqUXVlcnkuYWpheCh7XG5cdFx0XHR1cmw6IHVybCxcblx0XHRcdHR5cGU6IG1ldGhvZCxcblx0XHRcdGRhdGFUeXBlOiB0eXBlLFxuXHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdHN1Y2Nlc3M6IGNhbGxiYWNrXG5cdFx0fSk7XG5cdH07XG59KTtcblxuXG5qUXVlcnkuX2V2YWxVcmwgPSBmdW5jdGlvbiggdXJsICkge1xuXHRyZXR1cm4galF1ZXJ5LmFqYXgoe1xuXHRcdHVybDogdXJsLFxuXHRcdHR5cGU6IFwiR0VUXCIsXG5cdFx0ZGF0YVR5cGU6IFwic2NyaXB0XCIsXG5cdFx0YXN5bmM6IGZhbHNlLFxuXHRcdGdsb2JhbDogZmFsc2UsXG5cdFx0XCJ0aHJvd3NcIjogdHJ1ZVxuXHR9KTtcbn07XG5cblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdHdyYXBBbGw6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHZhciB3cmFwO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcEFsbCggaHRtbC5jYWxsKHRoaXMsIGkpICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoIHRoaXNbIDAgXSApIHtcblxuXHRcdFx0Ly8gVGhlIGVsZW1lbnRzIHRvIHdyYXAgdGhlIHRhcmdldCBhcm91bmRcblx0XHRcdHdyYXAgPSBqUXVlcnkoIGh0bWwsIHRoaXNbIDAgXS5vd25lckRvY3VtZW50ICkuZXEoIDAgKS5jbG9uZSggdHJ1ZSApO1xuXG5cdFx0XHRpZiAoIHRoaXNbIDAgXS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHR3cmFwLmluc2VydEJlZm9yZSggdGhpc1sgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHdyYXAubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgZWxlbSA9IHRoaXM7XG5cblx0XHRcdFx0d2hpbGUgKCBlbGVtLmZpcnN0RWxlbWVudENoaWxkICkge1xuXHRcdFx0XHRcdGVsZW0gPSBlbGVtLmZpcnN0RWxlbWVudENoaWxkO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGVsZW07XG5cdFx0XHR9KS5hcHBlbmQoIHRoaXMgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHR3cmFwSW5uZXI6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBJbm5lciggaHRtbC5jYWxsKHRoaXMsIGkpICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSBqUXVlcnkoIHRoaXMgKSxcblx0XHRcdFx0Y29udGVudHMgPSBzZWxmLmNvbnRlbnRzKCk7XG5cblx0XHRcdGlmICggY29udGVudHMubGVuZ3RoICkge1xuXHRcdFx0XHRjb250ZW50cy53cmFwQWxsKCBodG1sICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNlbGYuYXBwZW5kKCBodG1sICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0d3JhcDogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0dmFyIGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApO1xuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBBbGwoIGlzRnVuY3Rpb24gPyBodG1sLmNhbGwodGhpcywgaSkgOiBodG1sICk7XG5cdFx0fSk7XG5cdH0sXG5cblx0dW53cmFwOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCAhalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCBcImJvZHlcIiApICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5yZXBsYWNlV2l0aCggdGhpcy5jaGlsZE5vZGVzICk7XG5cdFx0XHR9XG5cdFx0fSkuZW5kKCk7XG5cdH1cbn0pO1xuXG5cbmpRdWVyeS5leHByLmZpbHRlcnMuaGlkZGVuID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdC8vIFN1cHBvcnQ6IE9wZXJhIDw9IDEyLjEyXG5cdC8vIE9wZXJhIHJlcG9ydHMgb2Zmc2V0V2lkdGhzIGFuZCBvZmZzZXRIZWlnaHRzIGxlc3MgdGhhbiB6ZXJvIG9uIHNvbWUgZWxlbWVudHNcblx0cmV0dXJuIGVsZW0ub2Zmc2V0V2lkdGggPD0gMCAmJiBlbGVtLm9mZnNldEhlaWdodCA8PSAwO1xufTtcbmpRdWVyeS5leHByLmZpbHRlcnMudmlzaWJsZSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4gIWpRdWVyeS5leHByLmZpbHRlcnMuaGlkZGVuKCBlbGVtICk7XG59O1xuXG5cblxuXG52YXIgcjIwID0gLyUyMC9nLFxuXHRyYnJhY2tldCA9IC9cXFtcXF0kLyxcblx0ckNSTEYgPSAvXFxyP1xcbi9nLFxuXHRyc3VibWl0dGVyVHlwZXMgPSAvXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksXG5cdHJzdWJtaXR0YWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtcblxuZnVuY3Rpb24gYnVpbGRQYXJhbXMoIHByZWZpeCwgb2JqLCB0cmFkaXRpb25hbCwgYWRkICkge1xuXHR2YXIgbmFtZTtcblxuXHRpZiAoIGpRdWVyeS5pc0FycmF5KCBvYmogKSApIHtcblx0XHQvLyBTZXJpYWxpemUgYXJyYXkgaXRlbS5cblx0XHRqUXVlcnkuZWFjaCggb2JqLCBmdW5jdGlvbiggaSwgdiApIHtcblx0XHRcdGlmICggdHJhZGl0aW9uYWwgfHwgcmJyYWNrZXQudGVzdCggcHJlZml4ICkgKSB7XG5cdFx0XHRcdC8vIFRyZWF0IGVhY2ggYXJyYXkgaXRlbSBhcyBhIHNjYWxhci5cblx0XHRcdFx0YWRkKCBwcmVmaXgsIHYgKTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gSXRlbSBpcyBub24tc2NhbGFyIChhcnJheSBvciBvYmplY3QpLCBlbmNvZGUgaXRzIG51bWVyaWMgaW5kZXguXG5cdFx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArICggdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgPyBpIDogXCJcIiApICsgXCJdXCIsIHYsIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHR9IGVsc2UgaWYgKCAhdHJhZGl0aW9uYWwgJiYgalF1ZXJ5LnR5cGUoIG9iaiApID09PSBcIm9iamVjdFwiICkge1xuXHRcdC8vIFNlcmlhbGl6ZSBvYmplY3QgaXRlbS5cblx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArIG5hbWUgKyBcIl1cIiwgb2JqWyBuYW1lIF0sIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHR9XG5cblx0fSBlbHNlIHtcblx0XHQvLyBTZXJpYWxpemUgc2NhbGFyIGl0ZW0uXG5cdFx0YWRkKCBwcmVmaXgsIG9iaiApO1xuXHR9XG59XG5cbi8vIFNlcmlhbGl6ZSBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzIG9yIGEgc2V0IG9mXG4vLyBrZXkvdmFsdWVzIGludG8gYSBxdWVyeSBzdHJpbmdcbmpRdWVyeS5wYXJhbSA9IGZ1bmN0aW9uKCBhLCB0cmFkaXRpb25hbCApIHtcblx0dmFyIHByZWZpeCxcblx0XHRzID0gW10sXG5cdFx0YWRkID0gZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0XHQvLyBJZiB2YWx1ZSBpcyBhIGZ1bmN0aW9uLCBpbnZva2UgaXQgYW5kIHJldHVybiBpdHMgdmFsdWVcblx0XHRcdHZhbHVlID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgPyB2YWx1ZSgpIDogKCB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICk7XG5cdFx0XHRzWyBzLmxlbmd0aCBdID0gZW5jb2RlVVJJQ29tcG9uZW50KCBrZXkgKSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KCB2YWx1ZSApO1xuXHRcdH07XG5cblx0Ly8gU2V0IHRyYWRpdGlvbmFsIHRvIHRydWUgZm9yIGpRdWVyeSA8PSAxLjMuMiBiZWhhdmlvci5cblx0aWYgKCB0cmFkaXRpb25hbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdHRyYWRpdGlvbmFsID0galF1ZXJ5LmFqYXhTZXR0aW5ncyAmJiBqUXVlcnkuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsO1xuXHR9XG5cblx0Ly8gSWYgYW4gYXJyYXkgd2FzIHBhc3NlZCBpbiwgYXNzdW1lIHRoYXQgaXQgaXMgYW4gYXJyYXkgb2YgZm9ybSBlbGVtZW50cy5cblx0aWYgKCBqUXVlcnkuaXNBcnJheSggYSApIHx8ICggYS5qcXVlcnkgJiYgIWpRdWVyeS5pc1BsYWluT2JqZWN0KCBhICkgKSApIHtcblx0XHQvLyBTZXJpYWxpemUgdGhlIGZvcm0gZWxlbWVudHNcblx0XHRqUXVlcnkuZWFjaCggYSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRhZGQoIHRoaXMubmFtZSwgdGhpcy52YWx1ZSApO1xuXHRcdH0pO1xuXG5cdH0gZWxzZSB7XG5cdFx0Ly8gSWYgdHJhZGl0aW9uYWwsIGVuY29kZSB0aGUgXCJvbGRcIiB3YXkgKHRoZSB3YXkgMS4zLjIgb3Igb2xkZXJcblx0XHQvLyBkaWQgaXQpLCBvdGhlcndpc2UgZW5jb2RlIHBhcmFtcyByZWN1cnNpdmVseS5cblx0XHRmb3IgKCBwcmVmaXggaW4gYSApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXgsIGFbIHByZWZpeCBdLCB0cmFkaXRpb25hbCwgYWRkICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSByZXN1bHRpbmcgc2VyaWFsaXphdGlvblxuXHRyZXR1cm4gcy5qb2luKCBcIiZcIiApLnJlcGxhY2UoIHIyMCwgXCIrXCIgKTtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRzZXJpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBqUXVlcnkucGFyYW0oIHRoaXMuc2VyaWFsaXplQXJyYXkoKSApO1xuXHR9LFxuXHRzZXJpYWxpemVBcnJheTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gQ2FuIGFkZCBwcm9wSG9vayBmb3IgXCJlbGVtZW50c1wiIHRvIGZpbHRlciBvciBhZGQgZm9ybSBlbGVtZW50c1xuXHRcdFx0dmFyIGVsZW1lbnRzID0galF1ZXJ5LnByb3AoIHRoaXMsIFwiZWxlbWVudHNcIiApO1xuXHRcdFx0cmV0dXJuIGVsZW1lbnRzID8galF1ZXJ5Lm1ha2VBcnJheSggZWxlbWVudHMgKSA6IHRoaXM7XG5cdFx0fSlcblx0XHQuZmlsdGVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHR5cGUgPSB0aGlzLnR5cGU7XG5cblx0XHRcdC8vIFVzZSAuaXMoIFwiOmRpc2FibGVkXCIgKSBzbyB0aGF0IGZpZWxkc2V0W2Rpc2FibGVkXSB3b3Jrc1xuXHRcdFx0cmV0dXJuIHRoaXMubmFtZSAmJiAhalF1ZXJ5KCB0aGlzICkuaXMoIFwiOmRpc2FibGVkXCIgKSAmJlxuXHRcdFx0XHRyc3VibWl0dGFibGUudGVzdCggdGhpcy5ub2RlTmFtZSApICYmICFyc3VibWl0dGVyVHlwZXMudGVzdCggdHlwZSApICYmXG5cdFx0XHRcdCggdGhpcy5jaGVja2VkIHx8ICFyY2hlY2thYmxlVHlwZS50ZXN0KCB0eXBlICkgKTtcblx0XHR9KVxuXHRcdC5tYXAoZnVuY3Rpb24oIGksIGVsZW0gKSB7XG5cdFx0XHR2YXIgdmFsID0galF1ZXJ5KCB0aGlzICkudmFsKCk7XG5cblx0XHRcdHJldHVybiB2YWwgPT0gbnVsbCA/XG5cdFx0XHRcdG51bGwgOlxuXHRcdFx0XHRqUXVlcnkuaXNBcnJheSggdmFsICkgP1xuXHRcdFx0XHRcdGpRdWVyeS5tYXAoIHZhbCwgZnVuY3Rpb24oIHZhbCApIHtcblx0XHRcdFx0XHRcdHJldHVybiB7IG5hbWU6IGVsZW0ubmFtZSwgdmFsdWU6IHZhbC5yZXBsYWNlKCByQ1JMRiwgXCJcXHJcXG5cIiApIH07XG5cdFx0XHRcdFx0fSkgOlxuXHRcdFx0XHRcdHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcblx0XHR9KS5nZXQoKTtcblx0fVxufSk7XG5cblxualF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIgPSBmdW5jdGlvbigpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdH0gY2F0Y2goIGUgKSB7fVxufTtcblxudmFyIHhocklkID0gMCxcblx0eGhyQ2FsbGJhY2tzID0ge30sXG5cdHhoclN1Y2Nlc3NTdGF0dXMgPSB7XG5cdFx0Ly8gZmlsZSBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyBjb2RlIDAsIGFzc3VtZSAyMDBcblx0XHQwOiAyMDAsXG5cdFx0Ly8gU3VwcG9ydDogSUU5XG5cdFx0Ly8gIzE0NTA6IHNvbWV0aW1lcyBJRSByZXR1cm5zIDEyMjMgd2hlbiBpdCBzaG91bGQgYmUgMjA0XG5cdFx0MTIyMzogMjA0XG5cdH0sXG5cdHhoclN1cHBvcnRlZCA9IGpRdWVyeS5hamF4U2V0dGluZ3MueGhyKCk7XG5cbi8vIFN1cHBvcnQ6IElFOVxuLy8gT3BlbiByZXF1ZXN0cyBtdXN0IGJlIG1hbnVhbGx5IGFib3J0ZWQgb24gdW5sb2FkICgjNTI4MClcbi8vIFNlZSBodHRwczovL3N1cHBvcnQubWljcm9zb2Z0LmNvbS9rYi8yODU2NzQ2IGZvciBtb3JlIGluZm9cbmlmICggd2luZG93LmF0dGFjaEV2ZW50ICkge1xuXHR3aW5kb3cuYXR0YWNoRXZlbnQoIFwib251bmxvYWRcIiwgZnVuY3Rpb24oKSB7XG5cdFx0Zm9yICggdmFyIGtleSBpbiB4aHJDYWxsYmFja3MgKSB7XG5cdFx0XHR4aHJDYWxsYmFja3NbIGtleSBdKCk7XG5cdFx0fVxuXHR9KTtcbn1cblxuc3VwcG9ydC5jb3JzID0gISF4aHJTdXBwb3J0ZWQgJiYgKCBcIndpdGhDcmVkZW50aWFsc1wiIGluIHhoclN1cHBvcnRlZCApO1xuc3VwcG9ydC5hamF4ID0geGhyU3VwcG9ydGVkID0gISF4aHJTdXBwb3J0ZWQ7XG5cbmpRdWVyeS5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHR2YXIgY2FsbGJhY2s7XG5cblx0Ly8gQ3Jvc3MgZG9tYWluIG9ubHkgYWxsb3dlZCBpZiBzdXBwb3J0ZWQgdGhyb3VnaCBYTUxIdHRwUmVxdWVzdFxuXHRpZiAoIHN1cHBvcnQuY29ycyB8fCB4aHJTdXBwb3J0ZWQgJiYgIW9wdGlvbnMuY3Jvc3NEb21haW4gKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBoZWFkZXJzLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0dmFyIGksXG5cdFx0XHRcdFx0eGhyID0gb3B0aW9ucy54aHIoKSxcblx0XHRcdFx0XHRpZCA9ICsreGhySWQ7XG5cblx0XHRcdFx0eGhyLm9wZW4oIG9wdGlvbnMudHlwZSwgb3B0aW9ucy51cmwsIG9wdGlvbnMuYXN5bmMsIG9wdGlvbnMudXNlcm5hbWUsIG9wdGlvbnMucGFzc3dvcmQgKTtcblxuXHRcdFx0XHQvLyBBcHBseSBjdXN0b20gZmllbGRzIGlmIHByb3ZpZGVkXG5cdFx0XHRcdGlmICggb3B0aW9ucy54aHJGaWVsZHMgKSB7XG5cdFx0XHRcdFx0Zm9yICggaSBpbiBvcHRpb25zLnhockZpZWxkcyApIHtcblx0XHRcdFx0XHRcdHhoclsgaSBdID0gb3B0aW9ucy54aHJGaWVsZHNbIGkgXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBPdmVycmlkZSBtaW1lIHR5cGUgaWYgbmVlZGVkXG5cdFx0XHRcdGlmICggb3B0aW9ucy5taW1lVHlwZSAmJiB4aHIub3ZlcnJpZGVNaW1lVHlwZSApIHtcblx0XHRcdFx0XHR4aHIub3ZlcnJpZGVNaW1lVHlwZSggb3B0aW9ucy5taW1lVHlwZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gWC1SZXF1ZXN0ZWQtV2l0aCBoZWFkZXJcblx0XHRcdFx0Ly8gRm9yIGNyb3NzLWRvbWFpbiByZXF1ZXN0cywgc2VlaW5nIGFzIGNvbmRpdGlvbnMgZm9yIGEgcHJlZmxpZ2h0IGFyZVxuXHRcdFx0XHQvLyBha2luIHRvIGEgamlnc2F3IHB1enpsZSwgd2Ugc2ltcGx5IG5ldmVyIHNldCBpdCB0byBiZSBzdXJlLlxuXHRcdFx0XHQvLyAoaXQgY2FuIGFsd2F5cyBiZSBzZXQgb24gYSBwZXItcmVxdWVzdCBiYXNpcyBvciBldmVuIHVzaW5nIGFqYXhTZXR1cClcblx0XHRcdFx0Ly8gRm9yIHNhbWUtZG9tYWluIHJlcXVlc3RzLCB3b24ndCBjaGFuZ2UgaGVhZGVyIGlmIGFscmVhZHkgcHJvdmlkZWQuXG5cdFx0XHRcdGlmICggIW9wdGlvbnMuY3Jvc3NEb21haW4gJiYgIWhlYWRlcnNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdICkge1xuXHRcdFx0XHRcdGhlYWRlcnNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdID0gXCJYTUxIdHRwUmVxdWVzdFwiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gU2V0IGhlYWRlcnNcblx0XHRcdFx0Zm9yICggaSBpbiBoZWFkZXJzICkge1xuXHRcdFx0XHRcdHhoci5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBoZWFkZXJzWyBpIF0gKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENhbGxiYWNrXG5cdFx0XHRcdGNhbGxiYWNrID0gZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIHhockNhbGxiYWNrc1sgaWQgXTtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSB4aHIub25sb2FkID0geGhyLm9uZXJyb3IgPSBudWxsO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggdHlwZSA9PT0gXCJhYm9ydFwiICkge1xuXHRcdFx0XHRcdFx0XHRcdHhoci5hYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCB0eXBlID09PSBcImVycm9yXCIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBmaWxlOiBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyAwOyBzZWUgIzg2MDUsICMxNDIwN1xuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdHhoci5zdGF0dXNUZXh0XG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjb21wbGV0ZShcblx0XHRcdFx0XHRcdFx0XHRcdHhoclN1Y2Nlc3NTdGF0dXNbIHhoci5zdGF0dXMgXSB8fCB4aHIuc3RhdHVzLFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1c1RleHQsXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTlcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFjY2Vzc2luZyBiaW5hcnktZGF0YSByZXNwb25zZVRleHQgdGhyb3dzIGFuIGV4Y2VwdGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gKCMxMTQyNilcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGVvZiB4aHIucmVzcG9uc2VUZXh0ID09PSBcInN0cmluZ1wiID8ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiB4aHIucmVzcG9uc2VUZXh0XG5cdFx0XHRcdFx0XHRcdFx0XHR9IDogdW5kZWZpbmVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gTGlzdGVuIHRvIGV2ZW50c1xuXHRcdFx0XHR4aHIub25sb2FkID0gY2FsbGJhY2soKTtcblx0XHRcdFx0eGhyLm9uZXJyb3IgPSBjYWxsYmFjayhcImVycm9yXCIpO1xuXG5cdFx0XHRcdC8vIENyZWF0ZSB0aGUgYWJvcnQgY2FsbGJhY2tcblx0XHRcdFx0Y2FsbGJhY2sgPSB4aHJDYWxsYmFja3NbIGlkIF0gPSBjYWxsYmFjayhcImFib3J0XCIpO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gRG8gc2VuZCB0aGUgcmVxdWVzdCAodGhpcyBtYXkgcmFpc2UgYW4gZXhjZXB0aW9uKVxuXHRcdFx0XHRcdHhoci5zZW5kKCBvcHRpb25zLmhhc0NvbnRlbnQgJiYgb3B0aW9ucy5kYXRhIHx8IG51bGwgKTtcblx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0XHRcdFx0Ly8gIzE0NjgzOiBPbmx5IHJldGhyb3cgaWYgdGhpcyBoYXNuJ3QgYmVlbiBub3RpZmllZCBhcyBhbiBlcnJvciB5ZXRcblx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdGFib3J0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxufSk7XG5cblxuXG5cbi8vIEluc3RhbGwgc2NyaXB0IGRhdGFUeXBlXG5qUXVlcnkuYWpheFNldHVwKHtcblx0YWNjZXB0czoge1xuXHRcdHNjcmlwdDogXCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwiXG5cdH0sXG5cdGNvbnRlbnRzOiB7XG5cdFx0c2NyaXB0OiAvKD86amF2YXxlY21hKXNjcmlwdC9cblx0fSxcblx0Y29udmVydGVyczoge1xuXHRcdFwidGV4dCBzY3JpcHRcIjogZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0XHRqUXVlcnkuZ2xvYmFsRXZhbCggdGV4dCApO1xuXHRcdFx0cmV0dXJuIHRleHQ7XG5cdFx0fVxuXHR9XG59KTtcblxuLy8gSGFuZGxlIGNhY2hlJ3Mgc3BlY2lhbCBjYXNlIGFuZCBjcm9zc0RvbWFpblxualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIFwic2NyaXB0XCIsIGZ1bmN0aW9uKCBzICkge1xuXHRpZiAoIHMuY2FjaGUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRzLmNhY2hlID0gZmFsc2U7XG5cdH1cblx0aWYgKCBzLmNyb3NzRG9tYWluICkge1xuXHRcdHMudHlwZSA9IFwiR0VUXCI7XG5cdH1cbn0pO1xuXG4vLyBCaW5kIHNjcmlwdCB0YWcgaGFjayB0cmFuc3BvcnRcbmpRdWVyeS5hamF4VHJhbnNwb3J0KCBcInNjcmlwdFwiLCBmdW5jdGlvbiggcyApIHtcblx0Ly8gVGhpcyB0cmFuc3BvcnQgb25seSBkZWFscyB3aXRoIGNyb3NzIGRvbWFpbiByZXF1ZXN0c1xuXHRpZiAoIHMuY3Jvc3NEb21haW4gKSB7XG5cdFx0dmFyIHNjcmlwdCwgY2FsbGJhY2s7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBfLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0c2NyaXB0ID0galF1ZXJ5KFwiPHNjcmlwdD5cIikucHJvcCh7XG5cdFx0XHRcdFx0YXN5bmM6IHRydWUsXG5cdFx0XHRcdFx0Y2hhcnNldDogcy5zY3JpcHRDaGFyc2V0LFxuXHRcdFx0XHRcdHNyYzogcy51cmxcblx0XHRcdFx0fSkub24oXG5cdFx0XHRcdFx0XCJsb2FkIGVycm9yXCIsXG5cdFx0XHRcdFx0Y2FsbGJhY2sgPSBmdW5jdGlvbiggZXZ0ICkge1xuXHRcdFx0XHRcdFx0c2NyaXB0LnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSBudWxsO1xuXHRcdFx0XHRcdFx0aWYgKCBldnQgKSB7XG5cdFx0XHRcdFx0XHRcdGNvbXBsZXRlKCBldnQudHlwZSA9PT0gXCJlcnJvclwiID8gNDA0IDogMjAwLCBldnQudHlwZSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KTtcblx0XHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCggc2NyaXB0WyAwIF0gKTtcblx0XHRcdH0sXG5cdFx0XHRhYm9ydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cbn0pO1xuXG5cblxuXG52YXIgb2xkQ2FsbGJhY2tzID0gW10sXG5cdHJqc29ucCA9IC8oPSlcXD8oPz0mfCQpfFxcP1xcPy87XG5cbi8vIERlZmF1bHQganNvbnAgc2V0dGluZ3NcbmpRdWVyeS5hamF4U2V0dXAoe1xuXHRqc29ucDogXCJjYWxsYmFja1wiLFxuXHRqc29ucENhbGxiYWNrOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgY2FsbGJhY2sgPSBvbGRDYWxsYmFja3MucG9wKCkgfHwgKCBqUXVlcnkuZXhwYW5kbyArIFwiX1wiICsgKCBub25jZSsrICkgKTtcblx0XHR0aGlzWyBjYWxsYmFjayBdID0gdHJ1ZTtcblx0XHRyZXR1cm4gY2FsbGJhY2s7XG5cdH1cbn0pO1xuXG4vLyBEZXRlY3QsIG5vcm1hbGl6ZSBvcHRpb25zIGFuZCBpbnN0YWxsIGNhbGxiYWNrcyBmb3IganNvbnAgcmVxdWVzdHNcbmpRdWVyeS5hamF4UHJlZmlsdGVyKCBcImpzb24ganNvbnBcIiwgZnVuY3Rpb24oIHMsIG9yaWdpbmFsU2V0dGluZ3MsIGpxWEhSICkge1xuXG5cdHZhciBjYWxsYmFja05hbWUsIG92ZXJ3cml0dGVuLCByZXNwb25zZUNvbnRhaW5lcixcblx0XHRqc29uUHJvcCA9IHMuanNvbnAgIT09IGZhbHNlICYmICggcmpzb25wLnRlc3QoIHMudXJsICkgP1xuXHRcdFx0XCJ1cmxcIiA6XG5cdFx0XHR0eXBlb2Ygcy5kYXRhID09PSBcInN0cmluZ1wiICYmICEoIHMuY29udGVudFR5cGUgfHwgXCJcIiApLmluZGV4T2YoXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIikgJiYgcmpzb25wLnRlc3QoIHMuZGF0YSApICYmIFwiZGF0YVwiXG5cdFx0KTtcblxuXHQvLyBIYW5kbGUgaWZmIHRoZSBleHBlY3RlZCBkYXRhIHR5cGUgaXMgXCJqc29ucFwiIG9yIHdlIGhhdmUgYSBwYXJhbWV0ZXIgdG8gc2V0XG5cdGlmICgganNvblByb3AgfHwgcy5kYXRhVHlwZXNbIDAgXSA9PT0gXCJqc29ucFwiICkge1xuXG5cdFx0Ly8gR2V0IGNhbGxiYWNrIG5hbWUsIHJlbWVtYmVyaW5nIHByZWV4aXN0aW5nIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCBpdFxuXHRcdGNhbGxiYWNrTmFtZSA9IHMuanNvbnBDYWxsYmFjayA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBzLmpzb25wQ2FsbGJhY2sgKSA/XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2soKSA6XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2s7XG5cblx0XHQvLyBJbnNlcnQgY2FsbGJhY2sgaW50byB1cmwgb3IgZm9ybSBkYXRhXG5cdFx0aWYgKCBqc29uUHJvcCApIHtcblx0XHRcdHNbIGpzb25Qcm9wIF0gPSBzWyBqc29uUHJvcCBdLnJlcGxhY2UoIHJqc29ucCwgXCIkMVwiICsgY2FsbGJhY2tOYW1lICk7XG5cdFx0fSBlbHNlIGlmICggcy5qc29ucCAhPT0gZmFsc2UgKSB7XG5cdFx0XHRzLnVybCArPSAoIHJxdWVyeS50ZXN0KCBzLnVybCApID8gXCImXCIgOiBcIj9cIiApICsgcy5qc29ucCArIFwiPVwiICsgY2FsbGJhY2tOYW1lO1xuXHRcdH1cblxuXHRcdC8vIFVzZSBkYXRhIGNvbnZlcnRlciB0byByZXRyaWV2ZSBqc29uIGFmdGVyIHNjcmlwdCBleGVjdXRpb25cblx0XHRzLmNvbnZlcnRlcnNbXCJzY3JpcHQganNvblwiXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCAhcmVzcG9uc2VDb250YWluZXIgKSB7XG5cdFx0XHRcdGpRdWVyeS5lcnJvciggY2FsbGJhY2tOYW1lICsgXCIgd2FzIG5vdCBjYWxsZWRcIiApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlQ29udGFpbmVyWyAwIF07XG5cdFx0fTtcblxuXHRcdC8vIGZvcmNlIGpzb24gZGF0YVR5cGVcblx0XHRzLmRhdGFUeXBlc1sgMCBdID0gXCJqc29uXCI7XG5cblx0XHQvLyBJbnN0YWxsIGNhbGxiYWNrXG5cdFx0b3ZlcndyaXR0ZW4gPSB3aW5kb3dbIGNhbGxiYWNrTmFtZSBdO1xuXHRcdHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gYXJndW1lbnRzO1xuXHRcdH07XG5cblx0XHQvLyBDbGVhbi11cCBmdW5jdGlvbiAoZmlyZXMgYWZ0ZXIgY29udmVydGVycylcblx0XHRqcVhIUi5hbHdheXMoZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyBSZXN0b3JlIHByZWV4aXN0aW5nIHZhbHVlXG5cdFx0XHR3aW5kb3dbIGNhbGxiYWNrTmFtZSBdID0gb3ZlcndyaXR0ZW47XG5cblx0XHRcdC8vIFNhdmUgYmFjayBhcyBmcmVlXG5cdFx0XHRpZiAoIHNbIGNhbGxiYWNrTmFtZSBdICkge1xuXHRcdFx0XHQvLyBtYWtlIHN1cmUgdGhhdCByZS11c2luZyB0aGUgb3B0aW9ucyBkb2Vzbid0IHNjcmV3IHRoaW5ncyBhcm91bmRcblx0XHRcdFx0cy5qc29ucENhbGxiYWNrID0gb3JpZ2luYWxTZXR0aW5ncy5qc29ucENhbGxiYWNrO1xuXG5cdFx0XHRcdC8vIHNhdmUgdGhlIGNhbGxiYWNrIG5hbWUgZm9yIGZ1dHVyZSB1c2Vcblx0XHRcdFx0b2xkQ2FsbGJhY2tzLnB1c2goIGNhbGxiYWNrTmFtZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDYWxsIGlmIGl0IHdhcyBhIGZ1bmN0aW9uIGFuZCB3ZSBoYXZlIGEgcmVzcG9uc2Vcblx0XHRcdGlmICggcmVzcG9uc2VDb250YWluZXIgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIG92ZXJ3cml0dGVuICkgKSB7XG5cdFx0XHRcdG92ZXJ3cml0dGVuKCByZXNwb25zZUNvbnRhaW5lclsgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gb3ZlcndyaXR0ZW4gPSB1bmRlZmluZWQ7XG5cdFx0fSk7XG5cblx0XHQvLyBEZWxlZ2F0ZSB0byBzY3JpcHRcblx0XHRyZXR1cm4gXCJzY3JpcHRcIjtcblx0fVxufSk7XG5cblxuXG5cbi8vIGRhdGE6IHN0cmluZyBvZiBodG1sXG4vLyBjb250ZXh0IChvcHRpb25hbCk6IElmIHNwZWNpZmllZCwgdGhlIGZyYWdtZW50IHdpbGwgYmUgY3JlYXRlZCBpbiB0aGlzIGNvbnRleHQsIGRlZmF1bHRzIHRvIGRvY3VtZW50XG4vLyBrZWVwU2NyaXB0cyAob3B0aW9uYWwpOiBJZiB0cnVlLCB3aWxsIGluY2x1ZGUgc2NyaXB0cyBwYXNzZWQgaW4gdGhlIGh0bWwgc3RyaW5nXG5qUXVlcnkucGFyc2VIVE1MID0gZnVuY3Rpb24oIGRhdGEsIGNvbnRleHQsIGtlZXBTY3JpcHRzICkge1xuXHRpZiAoICFkYXRhIHx8IHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiICkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cdGlmICggdHlwZW9mIGNvbnRleHQgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdGtlZXBTY3JpcHRzID0gY29udGV4dDtcblx0XHRjb250ZXh0ID0gZmFsc2U7XG5cdH1cblx0Y29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7XG5cblx0dmFyIHBhcnNlZCA9IHJzaW5nbGVUYWcuZXhlYyggZGF0YSApLFxuXHRcdHNjcmlwdHMgPSAha2VlcFNjcmlwdHMgJiYgW107XG5cblx0Ly8gU2luZ2xlIHRhZ1xuXHRpZiAoIHBhcnNlZCApIHtcblx0XHRyZXR1cm4gWyBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIHBhcnNlZFsxXSApIF07XG5cdH1cblxuXHRwYXJzZWQgPSBqUXVlcnkuYnVpbGRGcmFnbWVudCggWyBkYXRhIF0sIGNvbnRleHQsIHNjcmlwdHMgKTtcblxuXHRpZiAoIHNjcmlwdHMgJiYgc2NyaXB0cy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5KCBzY3JpcHRzICkucmVtb3ZlKCk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbXSwgcGFyc2VkLmNoaWxkTm9kZXMgKTtcbn07XG5cblxuLy8gS2VlcCBhIGNvcHkgb2YgdGhlIG9sZCBsb2FkIG1ldGhvZFxudmFyIF9sb2FkID0galF1ZXJ5LmZuLmxvYWQ7XG5cbi8qKlxuICogTG9hZCBhIHVybCBpbnRvIGEgcGFnZVxuICovXG5qUXVlcnkuZm4ubG9hZCA9IGZ1bmN0aW9uKCB1cmwsIHBhcmFtcywgY2FsbGJhY2sgKSB7XG5cdGlmICggdHlwZW9mIHVybCAhPT0gXCJzdHJpbmdcIiAmJiBfbG9hZCApIHtcblx0XHRyZXR1cm4gX2xvYWQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHR9XG5cblx0dmFyIHNlbGVjdG9yLCB0eXBlLCByZXNwb25zZSxcblx0XHRzZWxmID0gdGhpcyxcblx0XHRvZmYgPSB1cmwuaW5kZXhPZihcIiBcIik7XG5cblx0aWYgKCBvZmYgPj0gMCApIHtcblx0XHRzZWxlY3RvciA9IGpRdWVyeS50cmltKCB1cmwuc2xpY2UoIG9mZiApICk7XG5cdFx0dXJsID0gdXJsLnNsaWNlKCAwLCBvZmYgKTtcblx0fVxuXG5cdC8vIElmIGl0J3MgYSBmdW5jdGlvblxuXHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBwYXJhbXMgKSApIHtcblxuXHRcdC8vIFdlIGFzc3VtZSB0aGF0IGl0J3MgdGhlIGNhbGxiYWNrXG5cdFx0Y2FsbGJhY2sgPSBwYXJhbXM7XG5cdFx0cGFyYW1zID0gdW5kZWZpbmVkO1xuXG5cdC8vIE90aGVyd2lzZSwgYnVpbGQgYSBwYXJhbSBzdHJpbmdcblx0fSBlbHNlIGlmICggcGFyYW1zICYmIHR5cGVvZiBwYXJhbXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0dHlwZSA9IFwiUE9TVFwiO1xuXHR9XG5cblx0Ly8gSWYgd2UgaGF2ZSBlbGVtZW50cyB0byBtb2RpZnksIG1ha2UgdGhlIHJlcXVlc3Rcblx0aWYgKCBzZWxmLmxlbmd0aCA+IDAgKSB7XG5cdFx0alF1ZXJ5LmFqYXgoe1xuXHRcdFx0dXJsOiB1cmwsXG5cblx0XHRcdC8vIGlmIFwidHlwZVwiIHZhcmlhYmxlIGlzIHVuZGVmaW5lZCwgdGhlbiBcIkdFVFwiIG1ldGhvZCB3aWxsIGJlIHVzZWRcblx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRkYXRhVHlwZTogXCJodG1sXCIsXG5cdFx0XHRkYXRhOiBwYXJhbXNcblx0XHR9KS5kb25lKGZ1bmN0aW9uKCByZXNwb25zZVRleHQgKSB7XG5cblx0XHRcdC8vIFNhdmUgcmVzcG9uc2UgZm9yIHVzZSBpbiBjb21wbGV0ZSBjYWxsYmFja1xuXHRcdFx0cmVzcG9uc2UgPSBhcmd1bWVudHM7XG5cblx0XHRcdHNlbGYuaHRtbCggc2VsZWN0b3IgP1xuXG5cdFx0XHRcdC8vIElmIGEgc2VsZWN0b3Igd2FzIHNwZWNpZmllZCwgbG9jYXRlIHRoZSByaWdodCBlbGVtZW50cyBpbiBhIGR1bW15IGRpdlxuXHRcdFx0XHQvLyBFeGNsdWRlIHNjcmlwdHMgdG8gYXZvaWQgSUUgJ1Blcm1pc3Npb24gRGVuaWVkJyBlcnJvcnNcblx0XHRcdFx0alF1ZXJ5KFwiPGRpdj5cIikuYXBwZW5kKCBqUXVlcnkucGFyc2VIVE1MKCByZXNwb25zZVRleHQgKSApLmZpbmQoIHNlbGVjdG9yICkgOlxuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSB1c2UgdGhlIGZ1bGwgcmVzdWx0XG5cdFx0XHRcdHJlc3BvbnNlVGV4dCApO1xuXG5cdFx0fSkuY29tcGxldGUoIGNhbGxiYWNrICYmIGZ1bmN0aW9uKCBqcVhIUiwgc3RhdHVzICkge1xuXHRcdFx0c2VsZi5lYWNoKCBjYWxsYmFjaywgcmVzcG9uc2UgfHwgWyBqcVhIUi5yZXNwb25zZVRleHQsIHN0YXR1cywganFYSFIgXSApO1xuXHRcdH0pO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG5cblxuXG4vLyBBdHRhY2ggYSBidW5jaCBvZiBmdW5jdGlvbnMgZm9yIGhhbmRsaW5nIGNvbW1vbiBBSkFYIGV2ZW50c1xualF1ZXJ5LmVhY2goIFsgXCJhamF4U3RhcnRcIiwgXCJhamF4U3RvcFwiLCBcImFqYXhDb21wbGV0ZVwiLCBcImFqYXhFcnJvclwiLCBcImFqYXhTdWNjZXNzXCIsIFwiYWpheFNlbmRcIiBdLCBmdW5jdGlvbiggaSwgdHlwZSApIHtcblx0alF1ZXJ5LmZuWyB0eXBlIF0gPSBmdW5jdGlvbiggZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub24oIHR5cGUsIGZuICk7XG5cdH07XG59KTtcblxuXG5cblxualF1ZXJ5LmV4cHIuZmlsdGVycy5hbmltYXRlZCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4galF1ZXJ5LmdyZXAoalF1ZXJ5LnRpbWVycywgZnVuY3Rpb24oIGZuICkge1xuXHRcdHJldHVybiBlbGVtID09PSBmbi5lbGVtO1xuXHR9KS5sZW5ndGg7XG59O1xuXG5cblxuXG52YXIgZG9jRWxlbSA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbi8qKlxuICogR2V0cyBhIHdpbmRvdyBmcm9tIGFuIGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gZ2V0V2luZG93KCBlbGVtICkge1xuXHRyZXR1cm4galF1ZXJ5LmlzV2luZG93KCBlbGVtICkgPyBlbGVtIDogZWxlbS5ub2RlVHlwZSA9PT0gOSAmJiBlbGVtLmRlZmF1bHRWaWV3O1xufVxuXG5qUXVlcnkub2Zmc2V0ID0ge1xuXHRzZXRPZmZzZXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBpICkge1xuXHRcdHZhciBjdXJQb3NpdGlvbiwgY3VyTGVmdCwgY3VyQ1NTVG9wLCBjdXJUb3AsIGN1ck9mZnNldCwgY3VyQ1NTTGVmdCwgY2FsY3VsYXRlUG9zaXRpb24sXG5cdFx0XHRwb3NpdGlvbiA9IGpRdWVyeS5jc3MoIGVsZW0sIFwicG9zaXRpb25cIiApLFxuXHRcdFx0Y3VyRWxlbSA9IGpRdWVyeSggZWxlbSApLFxuXHRcdFx0cHJvcHMgPSB7fTtcblxuXHRcdC8vIFNldCBwb3NpdGlvbiBmaXJzdCwgaW4tY2FzZSB0b3AvbGVmdCBhcmUgc2V0IGV2ZW4gb24gc3RhdGljIGVsZW1cblx0XHRpZiAoIHBvc2l0aW9uID09PSBcInN0YXRpY1wiICkge1xuXHRcdFx0ZWxlbS5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcblx0XHR9XG5cblx0XHRjdXJPZmZzZXQgPSBjdXJFbGVtLm9mZnNldCgpO1xuXHRcdGN1ckNTU1RvcCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwidG9wXCIgKTtcblx0XHRjdXJDU1NMZWZ0ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJsZWZ0XCIgKTtcblx0XHRjYWxjdWxhdGVQb3NpdGlvbiA9ICggcG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiB8fCBwb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkgJiZcblx0XHRcdCggY3VyQ1NTVG9wICsgY3VyQ1NTTGVmdCApLmluZGV4T2YoXCJhdXRvXCIpID4gLTE7XG5cblx0XHQvLyBOZWVkIHRvIGJlIGFibGUgdG8gY2FsY3VsYXRlIHBvc2l0aW9uIGlmIGVpdGhlclxuXHRcdC8vIHRvcCBvciBsZWZ0IGlzIGF1dG8gYW5kIHBvc2l0aW9uIGlzIGVpdGhlciBhYnNvbHV0ZSBvciBmaXhlZFxuXHRcdGlmICggY2FsY3VsYXRlUG9zaXRpb24gKSB7XG5cdFx0XHRjdXJQb3NpdGlvbiA9IGN1ckVsZW0ucG9zaXRpb24oKTtcblx0XHRcdGN1clRvcCA9IGN1clBvc2l0aW9uLnRvcDtcblx0XHRcdGN1ckxlZnQgPSBjdXJQb3NpdGlvbi5sZWZ0O1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdGN1clRvcCA9IHBhcnNlRmxvYXQoIGN1ckNTU1RvcCApIHx8IDA7XG5cdFx0XHRjdXJMZWZ0ID0gcGFyc2VGbG9hdCggY3VyQ1NTTGVmdCApIHx8IDA7XG5cdFx0fVxuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0aW9ucyApICkge1xuXHRcdFx0b3B0aW9ucyA9IG9wdGlvbnMuY2FsbCggZWxlbSwgaSwgY3VyT2Zmc2V0ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHRpb25zLnRvcCAhPSBudWxsICkge1xuXHRcdFx0cHJvcHMudG9wID0gKCBvcHRpb25zLnRvcCAtIGN1ck9mZnNldC50b3AgKSArIGN1clRvcDtcblx0XHR9XG5cdFx0aWYgKCBvcHRpb25zLmxlZnQgIT0gbnVsbCApIHtcblx0XHRcdHByb3BzLmxlZnQgPSAoIG9wdGlvbnMubGVmdCAtIGN1ck9mZnNldC5sZWZ0ICkgKyBjdXJMZWZ0O1xuXHRcdH1cblxuXHRcdGlmICggXCJ1c2luZ1wiIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRvcHRpb25zLnVzaW5nLmNhbGwoIGVsZW0sIHByb3BzICk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y3VyRWxlbS5jc3MoIHByb3BzICk7XG5cdFx0fVxuXHR9XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0b2Zmc2V0OiBmdW5jdGlvbiggb3B0aW9ucyApIHtcblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gb3B0aW9ucyA9PT0gdW5kZWZpbmVkID9cblx0XHRcdFx0dGhpcyA6XG5cdFx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0XHRqUXVlcnkub2Zmc2V0LnNldE9mZnNldCggdGhpcywgb3B0aW9ucywgaSApO1xuXHRcdFx0XHR9KTtcblx0XHR9XG5cblx0XHR2YXIgZG9jRWxlbSwgd2luLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdGJveCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH0sXG5cdFx0XHRkb2MgPSBlbGVtICYmIGVsZW0ub3duZXJEb2N1bWVudDtcblxuXHRcdGlmICggIWRvYyApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuXHRcdC8vIE1ha2Ugc3VyZSBpdCdzIG5vdCBhIGRpc2Nvbm5lY3RlZCBET00gbm9kZVxuXHRcdGlmICggIWpRdWVyeS5jb250YWlucyggZG9jRWxlbSwgZWxlbSApICkge1xuXHRcdFx0cmV0dXJuIGJveDtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBCbGFja0JlcnJ5IDUsIGlPUyAzIChvcmlnaW5hbCBpUGhvbmUpXG5cdFx0Ly8gSWYgd2UgZG9uJ3QgaGF2ZSBnQkNSLCBqdXN0IHVzZSAwLDAgcmF0aGVyIHRoYW4gZXJyb3Jcblx0XHRpZiAoIHR5cGVvZiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCAhPT0gc3RydW5kZWZpbmVkICkge1xuXHRcdFx0Ym94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHR9XG5cdFx0d2luID0gZ2V0V2luZG93KCBkb2MgKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0dG9wOiBib3gudG9wICsgd2luLnBhZ2VZT2Zmc2V0IC0gZG9jRWxlbS5jbGllbnRUb3AsXG5cdFx0XHRsZWZ0OiBib3gubGVmdCArIHdpbi5wYWdlWE9mZnNldCAtIGRvY0VsZW0uY2xpZW50TGVmdFxuXHRcdH07XG5cdH0sXG5cblx0cG9zaXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggIXRoaXNbIDAgXSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIgb2Zmc2V0UGFyZW50LCBvZmZzZXQsXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdLFxuXHRcdFx0cGFyZW50T2Zmc2V0ID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcblxuXHRcdC8vIEZpeGVkIGVsZW1lbnRzIGFyZSBvZmZzZXQgZnJvbSB3aW5kb3cgKHBhcmVudE9mZnNldCA9IHt0b3A6MCwgbGVmdDogMH0sIGJlY2F1c2UgaXQgaXMgaXRzIG9ubHkgb2Zmc2V0IHBhcmVudFxuXHRcdGlmICggalF1ZXJ5LmNzcyggZWxlbSwgXCJwb3NpdGlvblwiICkgPT09IFwiZml4ZWRcIiApIHtcblx0XHRcdC8vIEFzc3VtZSBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaXMgdGhlcmUgd2hlbiBjb21wdXRlZCBwb3NpdGlvbiBpcyBmaXhlZFxuXHRcdFx0b2Zmc2V0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBHZXQgKnJlYWwqIG9mZnNldFBhcmVudFxuXHRcdFx0b2Zmc2V0UGFyZW50ID0gdGhpcy5vZmZzZXRQYXJlbnQoKTtcblxuXHRcdFx0Ly8gR2V0IGNvcnJlY3Qgb2Zmc2V0c1xuXHRcdFx0b2Zmc2V0ID0gdGhpcy5vZmZzZXQoKTtcblx0XHRcdGlmICggIWpRdWVyeS5ub2RlTmFtZSggb2Zmc2V0UGFyZW50WyAwIF0sIFwiaHRtbFwiICkgKSB7XG5cdFx0XHRcdHBhcmVudE9mZnNldCA9IG9mZnNldFBhcmVudC5vZmZzZXQoKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIG9mZnNldFBhcmVudCBib3JkZXJzXG5cdFx0XHRwYXJlbnRPZmZzZXQudG9wICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCBcImJvcmRlclRvcFdpZHRoXCIsIHRydWUgKTtcblx0XHRcdHBhcmVudE9mZnNldC5sZWZ0ICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCBcImJvcmRlckxlZnRXaWR0aFwiLCB0cnVlICk7XG5cdFx0fVxuXG5cdFx0Ly8gU3VidHJhY3QgcGFyZW50IG9mZnNldHMgYW5kIGVsZW1lbnQgbWFyZ2luc1xuXHRcdHJldHVybiB7XG5cdFx0XHR0b3A6IG9mZnNldC50b3AgLSBwYXJlbnRPZmZzZXQudG9wIC0galF1ZXJ5LmNzcyggZWxlbSwgXCJtYXJnaW5Ub3BcIiwgdHJ1ZSApLFxuXHRcdFx0bGVmdDogb2Zmc2V0LmxlZnQgLSBwYXJlbnRPZmZzZXQubGVmdCAtIGpRdWVyeS5jc3MoIGVsZW0sIFwibWFyZ2luTGVmdFwiLCB0cnVlIClcblx0XHR9O1xuXHR9LFxuXG5cdG9mZnNldFBhcmVudDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50IHx8IGRvY0VsZW07XG5cblx0XHRcdHdoaWxlICggb2Zmc2V0UGFyZW50ICYmICggIWpRdWVyeS5ub2RlTmFtZSggb2Zmc2V0UGFyZW50LCBcImh0bWxcIiApICYmIGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJwb3NpdGlvblwiICkgPT09IFwic3RhdGljXCIgKSApIHtcblx0XHRcdFx0b2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50Lm9mZnNldFBhcmVudDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG9mZnNldFBhcmVudCB8fCBkb2NFbGVtO1xuXHRcdH0pO1xuXHR9XG59KTtcblxuLy8gQ3JlYXRlIHNjcm9sbExlZnQgYW5kIHNjcm9sbFRvcCBtZXRob2RzXG5qUXVlcnkuZWFjaCggeyBzY3JvbGxMZWZ0OiBcInBhZ2VYT2Zmc2V0XCIsIHNjcm9sbFRvcDogXCJwYWdlWU9mZnNldFwiIH0sIGZ1bmN0aW9uKCBtZXRob2QsIHByb3AgKSB7XG5cdHZhciB0b3AgPSBcInBhZ2VZT2Zmc2V0XCIgPT09IHByb3A7XG5cblx0alF1ZXJ5LmZuWyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB2YWwgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG1ldGhvZCwgdmFsICkge1xuXHRcdFx0dmFyIHdpbiA9IGdldFdpbmRvdyggZWxlbSApO1xuXG5cdFx0XHRpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gd2luID8gd2luWyBwcm9wIF0gOiBlbGVtWyBtZXRob2QgXTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCB3aW4gKSB7XG5cdFx0XHRcdHdpbi5zY3JvbGxUbyhcblx0XHRcdFx0XHQhdG9wID8gdmFsIDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuXHRcdFx0XHRcdHRvcCA/IHZhbCA6IHdpbmRvdy5wYWdlWU9mZnNldFxuXHRcdFx0XHQpO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtWyBtZXRob2QgXSA9IHZhbDtcblx0XHRcdH1cblx0XHR9LCBtZXRob2QsIHZhbCwgYXJndW1lbnRzLmxlbmd0aCwgbnVsbCApO1xuXHR9O1xufSk7XG5cbi8vIFN1cHBvcnQ6IFNhZmFyaTw3KywgQ2hyb21lPDM3K1xuLy8gQWRkIHRoZSB0b3AvbGVmdCBjc3NIb29rcyB1c2luZyBqUXVlcnkuZm4ucG9zaXRpb25cbi8vIFdlYmtpdCBidWc6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yOTA4NFxuLy8gQmxpbmsgYnVnOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MjgwXG4vLyBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgcGVyY2VudCB3aGVuIHNwZWNpZmllZCBmb3IgdG9wL2xlZnQvYm90dG9tL3JpZ2h0O1xuLy8gcmF0aGVyIHRoYW4gbWFrZSB0aGUgY3NzIG1vZHVsZSBkZXBlbmQgb24gdGhlIG9mZnNldCBtb2R1bGUsIGp1c3QgY2hlY2sgZm9yIGl0IGhlcmVcbmpRdWVyeS5lYWNoKCBbIFwidG9wXCIsIFwibGVmdFwiIF0sIGZ1bmN0aW9uKCBpLCBwcm9wICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIHByb3AgXSA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5waXhlbFBvc2l0aW9uLFxuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGNvbXB1dGVkID0gY3VyQ1NTKCBlbGVtLCBwcm9wICk7XG5cdFx0XHRcdC8vIElmIGN1ckNTUyByZXR1cm5zIHBlcmNlbnRhZ2UsIGZhbGxiYWNrIHRvIG9mZnNldFxuXHRcdFx0XHRyZXR1cm4gcm51bW5vbnB4LnRlc3QoIGNvbXB1dGVkICkgP1xuXHRcdFx0XHRcdGpRdWVyeSggZWxlbSApLnBvc2l0aW9uKClbIHByb3AgXSArIFwicHhcIiA6XG5cdFx0XHRcdFx0Y29tcHV0ZWQ7XG5cdFx0XHR9XG5cdFx0fVxuXHQpO1xufSk7XG5cblxuLy8gQ3JlYXRlIGlubmVySGVpZ2h0LCBpbm5lcldpZHRoLCBoZWlnaHQsIHdpZHRoLCBvdXRlckhlaWdodCBhbmQgb3V0ZXJXaWR0aCBtZXRob2RzXG5qUXVlcnkuZWFjaCggeyBIZWlnaHQ6IFwiaGVpZ2h0XCIsIFdpZHRoOiBcIndpZHRoXCIgfSwgZnVuY3Rpb24oIG5hbWUsIHR5cGUgKSB7XG5cdGpRdWVyeS5lYWNoKCB7IHBhZGRpbmc6IFwiaW5uZXJcIiArIG5hbWUsIGNvbnRlbnQ6IHR5cGUsIFwiXCI6IFwib3V0ZXJcIiArIG5hbWUgfSwgZnVuY3Rpb24oIGRlZmF1bHRFeHRyYSwgZnVuY05hbWUgKSB7XG5cdFx0Ly8gTWFyZ2luIGlzIG9ubHkgZm9yIG91dGVySGVpZ2h0LCBvdXRlcldpZHRoXG5cdFx0alF1ZXJ5LmZuWyBmdW5jTmFtZSBdID0gZnVuY3Rpb24oIG1hcmdpbiwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgY2hhaW5hYmxlID0gYXJndW1lbnRzLmxlbmd0aCAmJiAoIGRlZmF1bHRFeHRyYSB8fCB0eXBlb2YgbWFyZ2luICE9PSBcImJvb2xlYW5cIiApLFxuXHRcdFx0XHRleHRyYSA9IGRlZmF1bHRFeHRyYSB8fCAoIG1hcmdpbiA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gdHJ1ZSA/IFwibWFyZ2luXCIgOiBcImJvcmRlclwiICk7XG5cblx0XHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIGRvYztcblxuXHRcdFx0XHRpZiAoIGpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkge1xuXHRcdFx0XHRcdC8vIEFzIG9mIDUvOC8yMDEyIHRoaXMgd2lsbCB5aWVsZCBpbmNvcnJlY3QgcmVzdWx0cyBmb3IgTW9iaWxlIFNhZmFyaSwgYnV0IHRoZXJlXG5cdFx0XHRcdFx0Ly8gaXNuJ3QgYSB3aG9sZSBsb3Qgd2UgY2FuIGRvLiBTZWUgcHVsbCByZXF1ZXN0IGF0IHRoaXMgVVJMIGZvciBkaXNjdXNzaW9uOlxuXHRcdFx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L3B1bGwvNzY0XG5cdFx0XHRcdFx0cmV0dXJuIGVsZW0uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyBcImNsaWVudFwiICsgbmFtZSBdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gR2V0IGRvY3VtZW50IHdpZHRoIG9yIGhlaWdodFxuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0ZG9jID0gZWxlbS5kb2N1bWVudEVsZW1lbnQ7XG5cblx0XHRcdFx0XHQvLyBFaXRoZXIgc2Nyb2xsW1dpZHRoL0hlaWdodF0gb3Igb2Zmc2V0W1dpZHRoL0hlaWdodF0gb3IgY2xpZW50W1dpZHRoL0hlaWdodF0sXG5cdFx0XHRcdFx0Ly8gd2hpY2hldmVyIGlzIGdyZWF0ZXN0XG5cdFx0XHRcdFx0cmV0dXJuIE1hdGgubWF4KFxuXHRcdFx0XHRcdFx0ZWxlbS5ib2R5WyBcInNjcm9sbFwiICsgbmFtZSBdLCBkb2NbIFwic2Nyb2xsXCIgKyBuYW1lIF0sXG5cdFx0XHRcdFx0XHRlbGVtLmJvZHlbIFwib2Zmc2V0XCIgKyBuYW1lIF0sIGRvY1sgXCJvZmZzZXRcIiArIG5hbWUgXSxcblx0XHRcdFx0XHRcdGRvY1sgXCJjbGllbnRcIiArIG5hbWUgXVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdFx0Ly8gR2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudCwgcmVxdWVzdGluZyBidXQgbm90IGZvcmNpbmcgcGFyc2VGbG9hdFxuXHRcdFx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIHR5cGUsIGV4dHJhICkgOlxuXG5cdFx0XHRcdFx0Ly8gU2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudFxuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgdHlwZSwgdmFsdWUsIGV4dHJhICk7XG5cdFx0XHR9LCB0eXBlLCBjaGFpbmFibGUgPyBtYXJnaW4gOiB1bmRlZmluZWQsIGNoYWluYWJsZSwgbnVsbCApO1xuXHRcdH07XG5cdH0pO1xufSk7XG5cblxuLy8gVGhlIG51bWJlciBvZiBlbGVtZW50cyBjb250YWluZWQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXRcbmpRdWVyeS5mbi5zaXplID0gZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzLmxlbmd0aDtcbn07XG5cbmpRdWVyeS5mbi5hbmRTZWxmID0galF1ZXJ5LmZuLmFkZEJhY2s7XG5cblxuXG5cbi8vIFJlZ2lzdGVyIGFzIGEgbmFtZWQgQU1EIG1vZHVsZSwgc2luY2UgalF1ZXJ5IGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aCBvdGhlclxuLy8gZmlsZXMgdGhhdCBtYXkgdXNlIGRlZmluZSwgYnV0IG5vdCB2aWEgYSBwcm9wZXIgY29uY2F0ZW5hdGlvbiBzY3JpcHQgdGhhdFxuLy8gdW5kZXJzdGFuZHMgYW5vbnltb3VzIEFNRCBtb2R1bGVzLiBBIG5hbWVkIEFNRCBpcyBzYWZlc3QgYW5kIG1vc3Qgcm9idXN0XG4vLyB3YXkgdG8gcmVnaXN0ZXIuIExvd2VyY2FzZSBqcXVlcnkgaXMgdXNlZCBiZWNhdXNlIEFNRCBtb2R1bGUgbmFtZXMgYXJlXG4vLyBkZXJpdmVkIGZyb20gZmlsZSBuYW1lcywgYW5kIGpRdWVyeSBpcyBub3JtYWxseSBkZWxpdmVyZWQgaW4gYSBsb3dlcmNhc2Vcbi8vIGZpbGUgbmFtZS4gRG8gdGhpcyBhZnRlciBjcmVhdGluZyB0aGUgZ2xvYmFsIHNvIHRoYXQgaWYgYW4gQU1EIG1vZHVsZSB3YW50c1xuLy8gdG8gY2FsbCBub0NvbmZsaWN0IHRvIGhpZGUgdGhpcyB2ZXJzaW9uIG9mIGpRdWVyeSwgaXQgd2lsbCB3b3JrLlxuXG4vLyBOb3RlIHRoYXQgZm9yIG1heGltdW0gcG9ydGFiaWxpdHksIGxpYnJhcmllcyB0aGF0IGFyZSBub3QgalF1ZXJ5IHNob3VsZFxuLy8gZGVjbGFyZSB0aGVtc2VsdmVzIGFzIGFub255bW91cyBtb2R1bGVzLCBhbmQgYXZvaWQgc2V0dGluZyBhIGdsb2JhbCBpZiBhblxuLy8gQU1EIGxvYWRlciBpcyBwcmVzZW50LiBqUXVlcnkgaXMgYSBzcGVjaWFsIGNhc2UuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWVcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcmJ1cmtlL3JlcXVpcmVqcy93aWtpL1VwZGF0aW5nLWV4aXN0aW5nLWxpYnJhcmllcyN3aWtpLWFub25cblxuaWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcblx0ZGVmaW5lKCBcImpxdWVyeVwiLCBbXSwgZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGpRdWVyeTtcblx0fSk7XG59XG5cblxuXG5cbnZhclxuXHQvLyBNYXAgb3ZlciBqUXVlcnkgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0X2pRdWVyeSA9IHdpbmRvdy5qUXVlcnksXG5cblx0Ly8gTWFwIG92ZXIgdGhlICQgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0XyQgPSB3aW5kb3cuJDtcblxualF1ZXJ5Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiggZGVlcCApIHtcblx0aWYgKCB3aW5kb3cuJCA9PT0galF1ZXJ5ICkge1xuXHRcdHdpbmRvdy4kID0gXyQ7XG5cdH1cblxuXHRpZiAoIGRlZXAgJiYgd2luZG93LmpRdWVyeSA9PT0galF1ZXJ5ICkge1xuXHRcdHdpbmRvdy5qUXVlcnkgPSBfalF1ZXJ5O1xuXHR9XG5cblx0cmV0dXJuIGpRdWVyeTtcbn07XG5cbi8vIEV4cG9zZSBqUXVlcnkgYW5kICQgaWRlbnRpZmllcnMsIGV2ZW4gaW4gQU1EXG4vLyAoIzcxMDIjY29tbWVudDoxMCwgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvcHVsbC81NTcpXG4vLyBhbmQgQ29tbW9uSlMgZm9yIGJyb3dzZXIgZW11bGF0b3JzICgjMTM1NjYpXG5pZiAoIHR5cGVvZiBub0dsb2JhbCA9PT0gc3RydW5kZWZpbmVkICkge1xuXHR3aW5kb3cualF1ZXJ5ID0gd2luZG93LiQgPSBqUXVlcnk7XG59XG5cblxuXG5cbnJldHVybiBqUXVlcnk7XG5cbn0pKTtcbiIsIi8qIVxuICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuXG4gKlxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cblxudmFyIGJhc2U2NCA9IHJlcXVpcmUoJ2Jhc2U2NC1qcycpXG52YXIgaWVlZTc1NCA9IHJlcXVpcmUoJ2llZWU3NTQnKVxudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpcy1hcnJheScpXG5cbmV4cG9ydHMuQnVmZmVyID0gQnVmZmVyXG5leHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyXG5leHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTBcbkJ1ZmZlci5wb29sU2l6ZSA9IDgxOTIgLy8gbm90IHVzZWQgYnkgdGhpcyBpbXBsZW1lbnRhdGlvblxuXG52YXIga01heExlbmd0aCA9IDB4M2ZmZmZmZmZcbnZhciByb290UGFyZW50ID0ge31cblxuLyoqXG4gKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdClcbiAqICAgPT09IGZhbHNlICAgVXNlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNilcbiAqXG4gKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssXG4gKiBPcGVyYSAxMS42KywgaU9TIDQuMisuXG4gKlxuICogTm90ZTpcbiAqXG4gKiAtIEltcGxlbWVudGF0aW9uIG11c3Qgc3VwcG9ydCBhZGRpbmcgbmV3IHByb3BlcnRpZXMgdG8gYFVpbnQ4QXJyYXlgIGluc3RhbmNlcy5cbiAqICAgRmlyZWZveCA0LTI5IGxhY2tlZCBzdXBwb3J0LCBmaXhlZCBpbiBGaXJlZm94IDMwKy5cbiAqICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguXG4gKlxuICogIC0gQ2hyb21lIDktMTAgaXMgbWlzc2luZyB0aGUgYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbi5cbiAqXG4gKiAgLSBJRTEwIGhhcyBhIGJyb2tlbiBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYXJyYXlzIG9mXG4gKiAgICBpbmNvcnJlY3QgbGVuZ3RoIGluIHNvbWUgc2l0dWF0aW9ucy5cbiAqXG4gKiBXZSBkZXRlY3QgdGhlc2UgYnVnZ3kgYnJvd3NlcnMgYW5kIHNldCBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgIHRvIGBmYWxzZWAgc28gdGhleSB3aWxsXG4gKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCB3aWxsIHdvcmsgY29ycmVjdGx5LlxuICovXG5CdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IChmdW5jdGlvbiAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcigwKVxuICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheShidWYpXG4gICAgYXJyLmZvbyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDQyIH1cbiAgICByZXR1cm4gNDIgPT09IGFyci5mb28oKSAmJiAvLyB0eXBlZCBhcnJheSBpbnN0YW5jZXMgY2FuIGJlIGF1Z21lbnRlZFxuICAgICAgICB0eXBlb2YgYXJyLnN1YmFycmF5ID09PSAnZnVuY3Rpb24nICYmIC8vIGNocm9tZSA5LTEwIGxhY2sgYHN1YmFycmF5YFxuICAgICAgICBuZXcgVWludDhBcnJheSgxKS5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufSkoKVxuXG4vKipcbiAqIENsYXNzOiBCdWZmZXJcbiAqID09PT09PT09PT09PT1cbiAqXG4gKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGFyZSBhdWdtZW50ZWRcbiAqIHdpdGggZnVuY3Rpb24gcHJvcGVydGllcyBmb3IgYWxsIHRoZSBub2RlIGBCdWZmZXJgIEFQSSBmdW5jdGlvbnMuIFdlIHVzZVxuICogYFVpbnQ4QXJyYXlgIHNvIHRoYXQgc3F1YXJlIGJyYWNrZXQgbm90YXRpb24gd29ya3MgYXMgZXhwZWN0ZWQgLS0gaXQgcmV0dXJuc1xuICogYSBzaW5nbGUgb2N0ZXQuXG4gKlxuICogQnkgYXVnbWVudGluZyB0aGUgaW5zdGFuY2VzLCB3ZSBjYW4gYXZvaWQgbW9kaWZ5aW5nIHRoZSBgVWludDhBcnJheWBcbiAqIHByb3RvdHlwZS5cbiAqL1xuZnVuY3Rpb24gQnVmZmVyIChzdWJqZWN0LCBlbmNvZGluZywgbm9aZXJvKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKVxuICAgIHJldHVybiBuZXcgQnVmZmVyKHN1YmplY3QsIGVuY29kaW5nLCBub1plcm8pXG5cbiAgdmFyIHR5cGUgPSB0eXBlb2Ygc3ViamVjdFxuXG4gIC8vIEZpbmQgdGhlIGxlbmd0aFxuICB2YXIgbGVuZ3RoXG4gIGlmICh0eXBlID09PSAnbnVtYmVyJylcbiAgICBsZW5ndGggPSBzdWJqZWN0ID4gMCA/IHN1YmplY3QgPj4+IDAgOiAwXG4gIGVsc2UgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgbGVuZ3RoID0gQnVmZmVyLmJ5dGVMZW5ndGgoc3ViamVjdCwgZW5jb2RpbmcpXG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gJ29iamVjdCcgJiYgc3ViamVjdCAhPT0gbnVsbCkgeyAvLyBhc3N1bWUgb2JqZWN0IGlzIGFycmF5LWxpa2VcbiAgICBpZiAoc3ViamVjdC50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KHN1YmplY3QuZGF0YSkpXG4gICAgICBzdWJqZWN0ID0gc3ViamVjdC5kYXRhXG4gICAgbGVuZ3RoID0gK3N1YmplY3QubGVuZ3RoID4gMCA/IE1hdGguZmxvb3IoK3N1YmplY3QubGVuZ3RoKSA6IDBcbiAgfSBlbHNlXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbXVzdCBzdGFydCB3aXRoIG51bWJlciwgYnVmZmVyLCBhcnJheSBvciBzdHJpbmcnKVxuXG4gIGlmIChsZW5ndGggPiBrTWF4TGVuZ3RoKVxuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtICcgK1xuICAgICAgJ3NpemU6IDB4JyArIGtNYXhMZW5ndGgudG9TdHJpbmcoMTYpICsgJyBieXRlcycpXG5cbiAgdmFyIGJ1ZlxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBQcmVmZXJyZWQ6IFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgYnVmID0gQnVmZmVyLl9hdWdtZW50KG5ldyBVaW50OEFycmF5KGxlbmd0aCkpXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBUSElTIGluc3RhbmNlIG9mIEJ1ZmZlciAoY3JlYXRlZCBieSBgbmV3YClcbiAgICBidWYgPSB0aGlzXG4gICAgYnVmLmxlbmd0aCA9IGxlbmd0aFxuICAgIGJ1Zi5faXNCdWZmZXIgPSB0cnVlXG4gIH1cblxuICB2YXIgaVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgdHlwZW9mIHN1YmplY3QuYnl0ZUxlbmd0aCA9PT0gJ251bWJlcicpIHtcbiAgICAvLyBTcGVlZCBvcHRpbWl6YXRpb24gLS0gdXNlIHNldCBpZiB3ZSdyZSBjb3B5aW5nIGZyb20gYSB0eXBlZCBhcnJheVxuICAgIGJ1Zi5fc2V0KHN1YmplY3QpXG4gIH0gZWxzZSBpZiAoaXNBcnJheWlzaChzdWJqZWN0KSkge1xuICAgIC8vIFRyZWF0IGFycmF5LWlzaCBvYmplY3RzIGFzIGEgYnl0ZSBhcnJheVxuICAgIGlmIChCdWZmZXIuaXNCdWZmZXIoc3ViamVjdCkpIHtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcbiAgICAgICAgYnVmW2ldID0gc3ViamVjdC5yZWFkVUludDgoaSlcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxuICAgICAgICBidWZbaV0gPSAoKHN1YmplY3RbaV0gJSAyNTYpICsgMjU2KSAlIDI1NlxuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuICAgIGJ1Zi53cml0ZShzdWJqZWN0LCAwLCBlbmNvZGluZylcbiAgfSBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJyAmJiAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgIW5vWmVybykge1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgYnVmW2ldID0gMFxuICAgIH1cbiAgfVxuXG4gIGlmIChsZW5ndGggPiAwICYmIGxlbmd0aCA8PSBCdWZmZXIucG9vbFNpemUpXG4gICAgYnVmLnBhcmVudCA9IHJvb3RQYXJlbnRcblxuICByZXR1cm4gYnVmXG59XG5cbmZ1bmN0aW9uIFNsb3dCdWZmZXIoc3ViamVjdCwgZW5jb2RpbmcsIG5vWmVybykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU2xvd0J1ZmZlcikpXG4gICAgcmV0dXJuIG5ldyBTbG93QnVmZmVyKHN1YmplY3QsIGVuY29kaW5nLCBub1plcm8pXG5cbiAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIoc3ViamVjdCwgZW5jb2RpbmcsIG5vWmVybylcbiAgZGVsZXRlIGJ1Zi5wYXJlbnRcbiAgcmV0dXJuIGJ1ZlxufVxuXG5CdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiAoYikge1xuICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKVxufVxuXG5CdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycycpXG5cbiAgdmFyIHggPSBhLmxlbmd0aFxuICB2YXIgeSA9IGIubGVuZ3RoXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbiAmJiBhW2ldID09PSBiW2ldOyBpKyspIHt9XG4gIGlmIChpICE9PSBsZW4pIHtcbiAgICB4ID0gYVtpXVxuICAgIHkgPSBiW2ldXG4gIH1cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG5CdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIChlbmNvZGluZykge1xuICBzd2l0Y2ggKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgJ2hleCc6XG4gICAgY2FzZSAndXRmOCc6XG4gICAgY2FzZSAndXRmLTgnOlxuICAgIGNhc2UgJ2FzY2lpJzpcbiAgICBjYXNlICdiaW5hcnknOlxuICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgY2FzZSAncmF3JzpcbiAgICBjYXNlICd1Y3MyJzpcbiAgICBjYXNlICd1Y3MtMic6XG4gICAgY2FzZSAndXRmMTZsZSc6XG4gICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgcmV0dXJuIHRydWVcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuQnVmZmVyLmNvbmNhdCA9IGZ1bmN0aW9uIChsaXN0LCB0b3RhbExlbmd0aCkge1xuICBpZiAoIWlzQXJyYXkobGlzdCkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VzYWdlOiBCdWZmZXIuY29uY2F0KGxpc3RbLCBsZW5ndGhdKScpXG5cbiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXIoMClcbiAgfSBlbHNlIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiBsaXN0WzBdXG4gIH1cblxuICB2YXIgaVxuICBpZiAodG90YWxMZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIHRvdGFsTGVuZ3RoID0gMFxuICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB0b3RhbExlbmd0aCArPSBsaXN0W2ldLmxlbmd0aFxuICAgIH1cbiAgfVxuXG4gIHZhciBidWYgPSBuZXcgQnVmZmVyKHRvdGFsTGVuZ3RoKVxuICB2YXIgcG9zID0gMFxuICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXVxuICAgIGl0ZW0uY29weShidWYsIHBvcylcbiAgICBwb3MgKz0gaXRlbS5sZW5ndGhcbiAgfVxuICByZXR1cm4gYnVmXG59XG5cbkJ1ZmZlci5ieXRlTGVuZ3RoID0gZnVuY3Rpb24gKHN0ciwgZW5jb2RpbmcpIHtcbiAgdmFyIHJldFxuICBzdHIgPSBzdHIgKyAnJ1xuICBzd2l0Y2ggKGVuY29kaW5nIHx8ICd1dGY4Jykge1xuICAgIGNhc2UgJ2FzY2lpJzpcbiAgICBjYXNlICdiaW5hcnknOlxuICAgIGNhc2UgJ3Jhdyc6XG4gICAgICByZXQgPSBzdHIubGVuZ3RoXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXQgPSBzdHIubGVuZ3RoICogMlxuICAgICAgYnJlYWtcbiAgICBjYXNlICdoZXgnOlxuICAgICAgcmV0ID0gc3RyLmxlbmd0aCA+Pj4gMVxuICAgICAgYnJlYWtcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgICByZXQgPSB1dGY4VG9CeXRlcyhzdHIpLmxlbmd0aFxuICAgICAgYnJlYWtcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgcmV0ID0gYmFzZTY0VG9CeXRlcyhzdHIpLmxlbmd0aFxuICAgICAgYnJlYWtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0ID0gc3RyLmxlbmd0aFxuICB9XG4gIHJldHVybiByZXRcbn1cblxuLy8gcHJlLXNldCBmb3IgdmFsdWVzIHRoYXQgbWF5IGV4aXN0IGluIHRoZSBmdXR1cmVcbkJ1ZmZlci5wcm90b3R5cGUubGVuZ3RoID0gdW5kZWZpbmVkXG5CdWZmZXIucHJvdG90eXBlLnBhcmVudCA9IHVuZGVmaW5lZFxuXG4vLyB0b1N0cmluZyhlbmNvZGluZywgc3RhcnQ9MCwgZW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cbiAgc3RhcnQgPSBzdGFydCA+Pj4gMFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPT09IEluZmluaXR5ID8gdGhpcy5sZW5ndGggOiBlbmQgPj4+IDBcblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAoZW5kIDw9IHN0YXJ0KSByZXR1cm4gJydcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBiaW5hcnlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpXG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN0ciA9ICcnXG4gIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTXG4gIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcbiAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKVxuICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heClcbiAgICAgIHN0ciArPSAnIC4uLiAnXG4gIH1cbiAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPidcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYilcbn1cblxuLy8gYGdldGAgd2lsbCBiZSByZW1vdmVkIGluIE5vZGUgMC4xMytcbkJ1ZmZlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKG9mZnNldCkge1xuICBjb25zb2xlLmxvZygnLmdldCgpIGlzIGRlcHJlY2F0ZWQuIEFjY2VzcyB1c2luZyBhcnJheSBpbmRleGVzIGluc3RlYWQuJylcbiAgcmV0dXJuIHRoaXMucmVhZFVJbnQ4KG9mZnNldClcbn1cblxuLy8gYHNldGAgd2lsbCBiZSByZW1vdmVkIGluIE5vZGUgMC4xMytcbkJ1ZmZlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHYsIG9mZnNldCkge1xuICBjb25zb2xlLmxvZygnLnNldCgpIGlzIGRlcHJlY2F0ZWQuIEFjY2VzcyB1c2luZyBhcnJheSBpbmRleGVzIGluc3RlYWQuJylcbiAgcmV0dXJuIHRoaXMud3JpdGVVSW50OCh2LCBvZmZzZXQpXG59XG5cbmZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMFxuICB2YXIgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldFxuICBpZiAoIWxlbmd0aCkge1xuICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICB9IGVsc2Uge1xuICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpXG4gICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuICAgICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gICAgfVxuICB9XG5cbiAgLy8gbXVzdCBiZSBhbiBldmVuIG51bWJlciBvZiBkaWdpdHNcbiAgdmFyIHN0ckxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKHN0ckxlbiAlIDIgIT09IDApIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcblxuICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikge1xuICAgIGxlbmd0aCA9IHN0ckxlbiAvIDJcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGJ5dGUgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkgKiAyLCAyKSwgMTYpXG4gICAgaWYgKGlzTmFOKGJ5dGUpKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG4gICAgYnVmW29mZnNldCArIGldID0gYnl0ZVxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHZhciBjaGFyc1dyaXR0ZW4gPSBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG4gIHJldHVybiBjaGFyc1dyaXR0ZW5cbn1cblxuZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHZhciBjaGFyc1dyaXR0ZW4gPSBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxuICByZXR1cm4gY2hhcnNXcml0dGVuXG59XG5cbmZ1bmN0aW9uIGJpbmFyeVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGFzY2lpV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHZhciBjaGFyc1dyaXR0ZW4gPSBibGl0QnVmZmVyKGJhc2U2NFRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbiAgcmV0dXJuIGNoYXJzV3JpdHRlblxufVxuXG5mdW5jdGlvbiB1dGYxNmxlV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICB2YXIgY2hhcnNXcml0dGVuID0gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoLCAyKVxuICByZXR1cm4gY2hhcnNXcml0dGVuXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcbiAgLy8gU3VwcG9ydCBib3RoIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZylcbiAgLy8gYW5kIHRoZSBsZWdhY3kgKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldCwgbGVuZ3RoKVxuICBpZiAoaXNGaW5pdGUob2Zmc2V0KSkge1xuICAgIGlmICghaXNGaW5pdGUobGVuZ3RoKSkge1xuICAgICAgZW5jb2RpbmcgPSBsZW5ndGhcbiAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZFxuICAgIH1cbiAgfSBlbHNlIHsgIC8vIGxlZ2FjeVxuICAgIHZhciBzd2FwID0gZW5jb2RpbmdcbiAgICBlbmNvZGluZyA9IG9mZnNldFxuICAgIG9mZnNldCA9IGxlbmd0aFxuICAgIGxlbmd0aCA9IHN3YXBcbiAgfVxuXG4gIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDBcblxuICBpZiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwIHx8IG9mZnNldCA+IHRoaXMubGVuZ3RoKVxuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdhdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpO1xuXG4gIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldFxuICBpZiAoIWxlbmd0aCkge1xuICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICB9IGVsc2Uge1xuICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpXG4gICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuICAgICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gICAgfVxuICB9XG4gIGVuY29kaW5nID0gU3RyaW5nKGVuY29kaW5nIHx8ICd1dGY4JykudG9Mb3dlckNhc2UoKVxuXG4gIHZhciByZXRcbiAgc3dpdGNoIChlbmNvZGluZykge1xuICAgIGNhc2UgJ2hleCc6XG4gICAgICByZXQgPSBoZXhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgICByZXQgPSB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnYXNjaWknOlxuICAgICAgcmV0ID0gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdiaW5hcnknOlxuICAgICAgcmV0ID0gYmluYXJ5V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgIHJldCA9IGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXQgPSB1dGYxNmxlV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbiAgICAgIGJyZWFrXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdCdWZmZXInLFxuICAgIGRhdGE6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2FyciB8fCB0aGlzLCAwKVxuICB9XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSlcbiAgfVxufVxuXG5mdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmVzID0gJydcbiAgdmFyIHRtcCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgIGlmIChidWZbaV0gPD0gMHg3Rikge1xuICAgICAgcmVzICs9IGRlY29kZVV0ZjhDaGFyKHRtcCkgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSlcbiAgICAgIHRtcCA9ICcnXG4gICAgfSBlbHNlIHtcbiAgICAgIHRtcCArPSAnJScgKyBidWZbaV0udG9TdHJpbmcoMTYpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlcyArIGRlY29kZVV0ZjhDaGFyKHRtcClcbn1cblxuZnVuY3Rpb24gYXNjaWlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gYmluYXJ5U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gYnVmLmxlbmd0aFxuXG4gIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlblxuXG4gIHZhciBvdXQgPSAnJ1xuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgIG91dCArPSB0b0hleChidWZbaV0pXG4gIH1cbiAgcmV0dXJuIG91dFxufVxuXG5mdW5jdGlvbiB1dGYxNmxlU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgYnl0ZXMgPSBidWYuc2xpY2Uoc3RhcnQsIGVuZClcbiAgdmFyIHJlcyA9ICcnXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSArIGJ5dGVzW2kgKyAxXSAqIDI1NilcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgc3RhcnQgPSB+fnN0YXJ0XG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogfn5lbmRcblxuICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgKz0gbGVuO1xuICAgIGlmIChzdGFydCA8IDApXG4gICAgICBzdGFydCA9IDBcbiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuICAgIHN0YXJ0ID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgMCkge1xuICAgIGVuZCArPSBsZW5cbiAgICBpZiAoZW5kIDwgMClcbiAgICAgIGVuZCA9IDBcbiAgfSBlbHNlIGlmIChlbmQgPiBsZW4pIHtcbiAgICBlbmQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCBzdGFydClcbiAgICBlbmQgPSBzdGFydFxuXG4gIHZhciBuZXdCdWZcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgbmV3QnVmID0gQnVmZmVyLl9hdWdtZW50KHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZCkpXG4gIH0gZWxzZSB7XG4gICAgdmFyIHNsaWNlTGVuID0gZW5kIC0gc3RhcnRcbiAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQsIHRydWUpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgaSsrKSB7XG4gICAgICBuZXdCdWZbaV0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH1cblxuICBpZiAobmV3QnVmLmxlbmd0aClcbiAgICBuZXdCdWYucGFyZW50ID0gdGhpcy5wYXJlbnQgfHwgdGhpc1xuXG4gIHJldHVybiBuZXdCdWZcbn1cblxuLypcbiAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLlxuICovXG5mdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkge1xuICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApXG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBsZW5ndGgpXG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKVxuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF1cbiAgdmFyIG11bCA9IDFcbiAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKVxuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWw7XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCA4KSB8IHRoaXNbb2Zmc2V0ICsgMV1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICtcbiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuICAgICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgICB0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpXG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bClcbiAgICB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoXG4gIHZhciBtdWwgPSAxXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV1cbiAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKVxuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bClcbiAgICB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICBpZiAoISh0aGlzW29mZnNldF0gJiAweDgwKSlcbiAgICByZXR1cm4gKHRoaXNbb2Zmc2V0XSlcbiAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0pIHxcbiAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAzXSA8PCAyNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJCRSA9IGZ1bmN0aW9uIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpXG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICAgICh0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxufVxuXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2J1ZmZlciBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndmFsdWUgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCksIDApXG5cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSlcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSA+Pj4gMCAmIDB4RkZcblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSwgMClcblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIHZhciBtdWwgPSAxXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpID4+PiAwICYgMHhGRlxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDE2IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDIpOyBpIDwgajsgaSsrKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlICYgKDB4ZmYgPDwgKDggKiAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSkpKSA+Pj5cbiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgfSBlbHNlIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gdmFsdWVcbiAgfSBlbHNlIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQzMiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyBpKyspIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgPj4+IChsaXR0bGVFbmRpYW4gPyBpIDogMyAtIGkpICogOCkgJiAweGZmXG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXRdID0gdmFsdWVcbiAgfSBlbHNlIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9IHZhbHVlXG4gIH0gZWxzZSBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJbnQodGhpcyxcbiAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICBvZmZzZXQsXG4gICAgICAgICAgICAgYnl0ZUxlbmd0aCxcbiAgICAgICAgICAgICBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpIC0gMSxcbiAgICAgICAgICAgICAtTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKSlcbiAgfVxuXG4gIHZhciBpID0gMFxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gdmFsdWUgPCAwID8gMSA6IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0ludCh0aGlzLFxuICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgIG9mZnNldCxcbiAgICAgICAgICAgICBieXRlTGVuZ3RoLFxuICAgICAgICAgICAgIE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSkgLSAxLFxuICAgICAgICAgICAgIC1NYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpKVxuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gdmFsdWUgPCAwID8gMSA6IDBcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpXG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4ID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4N2YsIC0weDgwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZiArIHZhbHVlICsgMVxuICB0aGlzW29mZnNldF0gPSB2YWx1ZVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZMRSA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgfSBlbHNlIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkJFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSB2YWx1ZVxuICB9IGVsc2Ugb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSB2YWx1ZVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gIH0gZWxzZSBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydClcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDNdID0gdmFsdWVcbiAgfSBlbHNlIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5mdW5jdGlvbiBjaGVja0lFRUU3NTQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCd2YWx1ZSBpcyBvdXQgb2YgYm91bmRzJylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbmRleCBvdXQgb2YgcmFuZ2UnKVxuICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNClcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KVxuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgsIDEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4LCAtMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgpXG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuLy8gY29weSh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0PTAsIHNvdXJjZVN0YXJ0PTAsIHNvdXJjZUVuZD1idWZmZXIubGVuZ3RoKVxuQnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gKHRhcmdldCwgdGFyZ2V0X3N0YXJ0LCBzdGFydCwgZW5kKSB7XG4gIHZhciBzb3VyY2UgPSB0aGlzXG5cbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldF9zdGFydCA+PSB0YXJnZXQubGVuZ3RoKSB0YXJnZXRfc3RhcnQgPSB0YXJnZXQubGVuZ3RoXG4gIGlmICghdGFyZ2V0X3N0YXJ0KSB0YXJnZXRfc3RhcnQgPSAwXG4gIGlmIChlbmQgPiAwICYmIGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIC8vIENvcHkgMCBieXRlczsgd2UncmUgZG9uZVxuICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDBcbiAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgc291cmNlLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG4gIGlmICh0YXJnZXRfc3RhcnQgPCAwKVxuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSBzb3VyY2UubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIC8vIEFyZSB3ZSBvb2I/XG4gIGlmIChlbmQgPiB0aGlzLmxlbmd0aClcbiAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldF9zdGFydCA8IGVuZCAtIHN0YXJ0KVxuICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRfc3RhcnQgKyBzdGFydFxuXG4gIHZhciBsZW4gPSBlbmQgLSBzdGFydFxuXG4gIGlmIChsZW4gPCAxMDAwIHx8ICFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0X3N0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQuX3NldCh0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksIHRhcmdldF9zdGFydClcbiAgfVxuXG4gIHJldHVybiBsZW5cbn1cblxuLy8gZmlsbCh2YWx1ZSwgc3RhcnQ9MCwgZW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiAodmFsdWUsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCF2YWx1ZSkgdmFsdWUgPSAwXG4gIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCkgZW5kID0gdGhpcy5sZW5ndGhcblxuICBpZiAoZW5kIDwgc3RhcnQpIHRocm93IG5ldyBSYW5nZUVycm9yKCdlbmQgPCBzdGFydCcpXG5cbiAgLy8gRmlsbCAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm5cbiAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm5cblxuICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChlbmQgPCAwIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIHZhciBpXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgdGhpc1tpXSA9IHZhbHVlXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBieXRlcyA9IHV0ZjhUb0J5dGVzKHZhbHVlLnRvU3RyaW5nKCkpXG4gICAgdmFyIGxlbiA9IGJ5dGVzLmxlbmd0aFxuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIHRoaXNbaV0gPSBieXRlc1tpICUgbGVuXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBgQXJyYXlCdWZmZXJgIHdpdGggdGhlICpjb3BpZWQqIG1lbW9yeSBvZiB0aGUgYnVmZmVyIGluc3RhbmNlLlxuICogQWRkZWQgaW4gTm9kZSAwLjEyLiBPbmx5IGF2YWlsYWJsZSBpbiBicm93c2VycyB0aGF0IHN1cHBvcnQgQXJyYXlCdWZmZXIuXG4gKi9cbkJ1ZmZlci5wcm90b3R5cGUudG9BcnJheUJ1ZmZlciA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgICAgcmV0dXJuIChuZXcgQnVmZmVyKHRoaXMpKS5idWZmZXJcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGJ1ZiA9IG5ldyBVaW50OEFycmF5KHRoaXMubGVuZ3RoKVxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGJ1Zi5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICBidWZbaV0gPSB0aGlzW2ldXG4gICAgICB9XG4gICAgICByZXR1cm4gYnVmLmJ1ZmZlclxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCdWZmZXIudG9BcnJheUJ1ZmZlciBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlcicpXG4gIH1cbn1cblxuLy8gSEVMUEVSIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PVxuXG52YXIgQlAgPSBCdWZmZXIucHJvdG90eXBlXG5cbi8qKlxuICogQXVnbWVudCBhIFVpbnQ4QXJyYXkgKmluc3RhbmNlKiAobm90IHRoZSBVaW50OEFycmF5IGNsYXNzISkgd2l0aCBCdWZmZXIgbWV0aG9kc1xuICovXG5CdWZmZXIuX2F1Z21lbnQgPSBmdW5jdGlvbiAoYXJyKSB7XG4gIGFyci5jb25zdHJ1Y3RvciA9IEJ1ZmZlclxuICBhcnIuX2lzQnVmZmVyID0gdHJ1ZVxuXG4gIC8vIHNhdmUgcmVmZXJlbmNlIHRvIG9yaWdpbmFsIFVpbnQ4QXJyYXkgZ2V0L3NldCBtZXRob2RzIGJlZm9yZSBvdmVyd3JpdGluZ1xuICBhcnIuX2dldCA9IGFyci5nZXRcbiAgYXJyLl9zZXQgPSBhcnIuc2V0XG5cbiAgLy8gZGVwcmVjYXRlZCwgd2lsbCBiZSByZW1vdmVkIGluIG5vZGUgMC4xMytcbiAgYXJyLmdldCA9IEJQLmdldFxuICBhcnIuc2V0ID0gQlAuc2V0XG5cbiAgYXJyLndyaXRlID0gQlAud3JpdGVcbiAgYXJyLnRvU3RyaW5nID0gQlAudG9TdHJpbmdcbiAgYXJyLnRvTG9jYWxlU3RyaW5nID0gQlAudG9TdHJpbmdcbiAgYXJyLnRvSlNPTiA9IEJQLnRvSlNPTlxuICBhcnIuZXF1YWxzID0gQlAuZXF1YWxzXG4gIGFyci5jb21wYXJlID0gQlAuY29tcGFyZVxuICBhcnIuY29weSA9IEJQLmNvcHlcbiAgYXJyLnNsaWNlID0gQlAuc2xpY2VcbiAgYXJyLnJlYWRVSW50TEUgPSBCUC5yZWFkVUludExFXG4gIGFyci5yZWFkVUludEJFID0gQlAucmVhZFVJbnRCRVxuICBhcnIucmVhZFVJbnQ4ID0gQlAucmVhZFVJbnQ4XG4gIGFyci5yZWFkVUludDE2TEUgPSBCUC5yZWFkVUludDE2TEVcbiAgYXJyLnJlYWRVSW50MTZCRSA9IEJQLnJlYWRVSW50MTZCRVxuICBhcnIucmVhZFVJbnQzMkxFID0gQlAucmVhZFVJbnQzMkxFXG4gIGFyci5yZWFkVUludDMyQkUgPSBCUC5yZWFkVUludDMyQkVcbiAgYXJyLnJlYWRJbnRMRSA9IEJQLnJlYWRJbnRMRVxuICBhcnIucmVhZEludEJFID0gQlAucmVhZEludEJFXG4gIGFyci5yZWFkSW50OCA9IEJQLnJlYWRJbnQ4XG4gIGFyci5yZWFkSW50MTZMRSA9IEJQLnJlYWRJbnQxNkxFXG4gIGFyci5yZWFkSW50MTZCRSA9IEJQLnJlYWRJbnQxNkJFXG4gIGFyci5yZWFkSW50MzJMRSA9IEJQLnJlYWRJbnQzMkxFXG4gIGFyci5yZWFkSW50MzJCRSA9IEJQLnJlYWRJbnQzMkJFXG4gIGFyci5yZWFkRmxvYXRMRSA9IEJQLnJlYWRGbG9hdExFXG4gIGFyci5yZWFkRmxvYXRCRSA9IEJQLnJlYWRGbG9hdEJFXG4gIGFyci5yZWFkRG91YmxlTEUgPSBCUC5yZWFkRG91YmxlTEVcbiAgYXJyLnJlYWREb3VibGVCRSA9IEJQLnJlYWREb3VibGVCRVxuICBhcnIud3JpdGVVSW50OCA9IEJQLndyaXRlVUludDhcbiAgYXJyLndyaXRlVUludExFID0gQlAud3JpdGVVSW50TEVcbiAgYXJyLndyaXRlVUludEJFID0gQlAud3JpdGVVSW50QkVcbiAgYXJyLndyaXRlVUludDE2TEUgPSBCUC53cml0ZVVJbnQxNkxFXG4gIGFyci53cml0ZVVJbnQxNkJFID0gQlAud3JpdGVVSW50MTZCRVxuICBhcnIud3JpdGVVSW50MzJMRSA9IEJQLndyaXRlVUludDMyTEVcbiAgYXJyLndyaXRlVUludDMyQkUgPSBCUC53cml0ZVVJbnQzMkJFXG4gIGFyci53cml0ZUludExFID0gQlAud3JpdGVJbnRMRVxuICBhcnIud3JpdGVJbnRCRSA9IEJQLndyaXRlSW50QkVcbiAgYXJyLndyaXRlSW50OCA9IEJQLndyaXRlSW50OFxuICBhcnIud3JpdGVJbnQxNkxFID0gQlAud3JpdGVJbnQxNkxFXG4gIGFyci53cml0ZUludDE2QkUgPSBCUC53cml0ZUludDE2QkVcbiAgYXJyLndyaXRlSW50MzJMRSA9IEJQLndyaXRlSW50MzJMRVxuICBhcnIud3JpdGVJbnQzMkJFID0gQlAud3JpdGVJbnQzMkJFXG4gIGFyci53cml0ZUZsb2F0TEUgPSBCUC53cml0ZUZsb2F0TEVcbiAgYXJyLndyaXRlRmxvYXRCRSA9IEJQLndyaXRlRmxvYXRCRVxuICBhcnIud3JpdGVEb3VibGVMRSA9IEJQLndyaXRlRG91YmxlTEVcbiAgYXJyLndyaXRlRG91YmxlQkUgPSBCUC53cml0ZURvdWJsZUJFXG4gIGFyci5maWxsID0gQlAuZmlsbFxuICBhcnIuaW5zcGVjdCA9IEJQLmluc3BlY3RcbiAgYXJyLnRvQXJyYXlCdWZmZXIgPSBCUC50b0FycmF5QnVmZmVyXG5cbiAgcmV0dXJuIGFyclxufVxuXG52YXIgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rXFwvMC05QS16XFwtXS9nXG5cbmZ1bmN0aW9uIGJhc2U2NGNsZWFuIChzdHIpIHtcbiAgLy8gTm9kZSBzdHJpcHMgb3V0IGludmFsaWQgY2hhcmFjdGVycyBsaWtlIFxcbiBhbmQgXFx0IGZyb20gdGhlIHN0cmluZywgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHN0ciA9IHN0cmluZ3RyaW0oc3RyKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJylcbiAgLy8gTm9kZSBjb252ZXJ0cyBzdHJpbmdzIHdpdGggbGVuZ3RoIDwgMiB0byAnJ1xuICBpZiAoc3RyLmxlbmd0aCA8IDIpIHJldHVybiAnJ1xuICAvLyBOb2RlIGFsbG93cyBmb3Igbm9uLXBhZGRlZCBiYXNlNjQgc3RyaW5ncyAobWlzc2luZyB0cmFpbGluZyA9PT0pLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgd2hpbGUgKHN0ci5sZW5ndGggJSA0ICE9PSAwKSB7XG4gICAgc3RyID0gc3RyICsgJz0nXG4gIH1cbiAgcmV0dXJuIHN0clxufVxuXG5mdW5jdGlvbiBzdHJpbmd0cmltIChzdHIpIHtcbiAgaWYgKHN0ci50cmltKSByZXR1cm4gc3RyLnRyaW0oKVxuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxufVxuXG5mdW5jdGlvbiBpc0FycmF5aXNoIChzdWJqZWN0KSB7XG4gIHJldHVybiBpc0FycmF5KHN1YmplY3QpIHx8IEJ1ZmZlci5pc0J1ZmZlcihzdWJqZWN0KSB8fFxuICAgICAgc3ViamVjdCAmJiB0eXBlb2Ygc3ViamVjdCA9PT0gJ29iamVjdCcgJiZcbiAgICAgIHR5cGVvZiBzdWJqZWN0Lmxlbmd0aCA9PT0gJ251bWJlcidcbn1cblxuZnVuY3Rpb24gdG9IZXggKG4pIHtcbiAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpXG4gIHJldHVybiBuLnRvU3RyaW5nKDE2KVxufVxuXG5mdW5jdGlvbiB1dGY4VG9CeXRlcyhzdHJpbmcsIHVuaXRzKSB7XG4gIHZhciBjb2RlUG9pbnQsIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcbiAgdmFyIGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHlcbiAgdmFyIGJ5dGVzID0gW11cbiAgdmFyIGkgPSAwXG5cbiAgZm9yICg7IGk8bGVuZ3RoOyBpKyspIHtcbiAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXG4gICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudFxuICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG5cbiAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuXG4gICAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3dcbiAgICAgICAgaWYgKGNvZGVQb2ludCA8IDB4REMwMCkge1xuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXJcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY29kZVBvaW50ID0gbGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCB8IDB4MTAwMDBcbiAgICAgICAgICBsZWFkU3Vycm9nYXRlID0gbnVsbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIG5vIGxlYWQgeWV0XG4gICAgICBlbHNlIHtcblxuICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsXG4gICAgICAgIGlmIChjb2RlUG9pbnQgPiAweERCRkYpIHtcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdW5wYWlyZWQgbGVhZFxuICAgICAgICBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZhbGlkIGxlYWRcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICBsZWFkU3Vycm9nYXRlID0gbnVsbFxuICAgIH1cblxuICAgIC8vIGVuY29kZSB1dGY4XG4gICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQpXG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgfCAweEMwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZVBvaW50IDwgMHgyMDAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgICk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBieXRlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cbiAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpXG4gIH1cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuICB2YXIgYywgaGksIGxvXG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuXG4gICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcbiAgICBoaSA9IGMgPj4gOFxuICAgIGxvID0gYyAlIDI1NlxuICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcbiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKVxufVxuXG5mdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgsIHVuaXRTaXplKSB7XG4gIGlmICh1bml0U2l6ZSkgbGVuZ3RoIC09IGxlbmd0aCAlIHVuaXRTaXplO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKVxuICAgICAgYnJlYWtcbiAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV1cbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiBkZWNvZGVVdGY4Q2hhciAoc3RyKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzdHIpXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RkZGRCkgLy8gVVRGIDggaW52YWxpZCBjaGFyXG4gIH1cbn1cbiIsInZhciBsb29rdXAgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7XG5cbjsoZnVuY3Rpb24gKGV4cG9ydHMpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG4gIHZhciBBcnIgPSAodHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnKVxuICAgID8gVWludDhBcnJheVxuICAgIDogQXJyYXlcblxuXHR2YXIgUExVUyAgID0gJysnLmNoYXJDb2RlQXQoMClcblx0dmFyIFNMQVNIICA9ICcvJy5jaGFyQ29kZUF0KDApXG5cdHZhciBOVU1CRVIgPSAnMCcuY2hhckNvZGVBdCgwKVxuXHR2YXIgTE9XRVIgID0gJ2EnLmNoYXJDb2RlQXQoMClcblx0dmFyIFVQUEVSICA9ICdBJy5jaGFyQ29kZUF0KDApXG5cdHZhciBQTFVTX1VSTF9TQUZFID0gJy0nLmNoYXJDb2RlQXQoMClcblx0dmFyIFNMQVNIX1VSTF9TQUZFID0gJ18nLmNoYXJDb2RlQXQoMClcblxuXHRmdW5jdGlvbiBkZWNvZGUgKGVsdCkge1xuXHRcdHZhciBjb2RlID0gZWx0LmNoYXJDb2RlQXQoMClcblx0XHRpZiAoY29kZSA9PT0gUExVUyB8fFxuXHRcdCAgICBjb2RlID09PSBQTFVTX1VSTF9TQUZFKVxuXHRcdFx0cmV0dXJuIDYyIC8vICcrJ1xuXHRcdGlmIChjb2RlID09PSBTTEFTSCB8fFxuXHRcdCAgICBjb2RlID09PSBTTEFTSF9VUkxfU0FGRSlcblx0XHRcdHJldHVybiA2MyAvLyAnLydcblx0XHRpZiAoY29kZSA8IE5VTUJFUilcblx0XHRcdHJldHVybiAtMSAvL25vIG1hdGNoXG5cdFx0aWYgKGNvZGUgPCBOVU1CRVIgKyAxMClcblx0XHRcdHJldHVybiBjb2RlIC0gTlVNQkVSICsgMjYgKyAyNlxuXHRcdGlmIChjb2RlIDwgVVBQRVIgKyAyNilcblx0XHRcdHJldHVybiBjb2RlIC0gVVBQRVJcblx0XHRpZiAoY29kZSA8IExPV0VSICsgMjYpXG5cdFx0XHRyZXR1cm4gY29kZSAtIExPV0VSICsgMjZcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NFRvQnl0ZUFycmF5IChiNjQpIHtcblx0XHR2YXIgaSwgaiwgbCwgdG1wLCBwbGFjZUhvbGRlcnMsIGFyclxuXG5cdFx0aWYgKGI2NC5sZW5ndGggJSA0ID4gMCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0Jylcblx0XHR9XG5cblx0XHQvLyB0aGUgbnVtYmVyIG9mIGVxdWFsIHNpZ25zIChwbGFjZSBob2xkZXJzKVxuXHRcdC8vIGlmIHRoZXJlIGFyZSB0d28gcGxhY2Vob2xkZXJzLCB0aGFuIHRoZSB0d28gY2hhcmFjdGVycyBiZWZvcmUgaXRcblx0XHQvLyByZXByZXNlbnQgb25lIGJ5dGVcblx0XHQvLyBpZiB0aGVyZSBpcyBvbmx5IG9uZSwgdGhlbiB0aGUgdGhyZWUgY2hhcmFjdGVycyBiZWZvcmUgaXQgcmVwcmVzZW50IDIgYnl0ZXNcblx0XHQvLyB0aGlzIGlzIGp1c3QgYSBjaGVhcCBoYWNrIHRvIG5vdCBkbyBpbmRleE9mIHR3aWNlXG5cdFx0dmFyIGxlbiA9IGI2NC5sZW5ndGhcblx0XHRwbGFjZUhvbGRlcnMgPSAnPScgPT09IGI2NC5jaGFyQXQobGVuIC0gMikgPyAyIDogJz0nID09PSBiNjQuY2hhckF0KGxlbiAtIDEpID8gMSA6IDBcblxuXHRcdC8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuXHRcdGFyciA9IG5ldyBBcnIoYjY0Lmxlbmd0aCAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKVxuXG5cdFx0Ly8gaWYgdGhlcmUgYXJlIHBsYWNlaG9sZGVycywgb25seSBnZXQgdXAgdG8gdGhlIGxhc3QgY29tcGxldGUgNCBjaGFyc1xuXHRcdGwgPSBwbGFjZUhvbGRlcnMgPiAwID8gYjY0Lmxlbmd0aCAtIDQgOiBiNjQubGVuZ3RoXG5cblx0XHR2YXIgTCA9IDBcblxuXHRcdGZ1bmN0aW9uIHB1c2ggKHYpIHtcblx0XHRcdGFycltMKytdID0gdlxuXHRcdH1cblxuXHRcdGZvciAoaSA9IDAsIGogPSAwOyBpIDwgbDsgaSArPSA0LCBqICs9IDMpIHtcblx0XHRcdHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMTgpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAxKSkgPDwgMTIpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAyKSkgPDwgNikgfCBkZWNvZGUoYjY0LmNoYXJBdChpICsgMykpXG5cdFx0XHRwdXNoKCh0bXAgJiAweEZGMDAwMCkgPj4gMTYpXG5cdFx0XHRwdXNoKCh0bXAgJiAweEZGMDApID4+IDgpXG5cdFx0XHRwdXNoKHRtcCAmIDB4RkYpXG5cdFx0fVxuXG5cdFx0aWYgKHBsYWNlSG9sZGVycyA9PT0gMikge1xuXHRcdFx0dG1wID0gKGRlY29kZShiNjQuY2hhckF0KGkpKSA8PCAyKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpID4+IDQpXG5cdFx0XHRwdXNoKHRtcCAmIDB4RkYpXG5cdFx0fSBlbHNlIGlmIChwbGFjZUhvbGRlcnMgPT09IDEpIHtcblx0XHRcdHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMTApIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAxKSkgPDwgNCkgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDIpKSA+PiAyKVxuXHRcdFx0cHVzaCgodG1wID4+IDgpICYgMHhGRilcblx0XHRcdHB1c2godG1wICYgMHhGRilcblx0XHR9XG5cblx0XHRyZXR1cm4gYXJyXG5cdH1cblxuXHRmdW5jdGlvbiB1aW50OFRvQmFzZTY0ICh1aW50OCkge1xuXHRcdHZhciBpLFxuXHRcdFx0ZXh0cmFCeXRlcyA9IHVpbnQ4Lmxlbmd0aCAlIDMsIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzXG5cdFx0XHRvdXRwdXQgPSBcIlwiLFxuXHRcdFx0dGVtcCwgbGVuZ3RoXG5cblx0XHRmdW5jdGlvbiBlbmNvZGUgKG51bSkge1xuXHRcdFx0cmV0dXJuIGxvb2t1cC5jaGFyQXQobnVtKVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NCAobnVtKSB7XG5cdFx0XHRyZXR1cm4gZW5jb2RlKG51bSA+PiAxOCAmIDB4M0YpICsgZW5jb2RlKG51bSA+PiAxMiAmIDB4M0YpICsgZW5jb2RlKG51bSA+PiA2ICYgMHgzRikgKyBlbmNvZGUobnVtICYgMHgzRilcblx0XHR9XG5cblx0XHQvLyBnbyB0aHJvdWdoIHRoZSBhcnJheSBldmVyeSB0aHJlZSBieXRlcywgd2UnbGwgZGVhbCB3aXRoIHRyYWlsaW5nIHN0dWZmIGxhdGVyXG5cdFx0Zm9yIChpID0gMCwgbGVuZ3RoID0gdWludDgubGVuZ3RoIC0gZXh0cmFCeXRlczsgaSA8IGxlbmd0aDsgaSArPSAzKSB7XG5cdFx0XHR0ZW1wID0gKHVpbnQ4W2ldIDw8IDE2KSArICh1aW50OFtpICsgMV0gPDwgOCkgKyAodWludDhbaSArIDJdKVxuXHRcdFx0b3V0cHV0ICs9IHRyaXBsZXRUb0Jhc2U2NCh0ZW1wKVxuXHRcdH1cblxuXHRcdC8vIHBhZCB0aGUgZW5kIHdpdGggemVyb3MsIGJ1dCBtYWtlIHN1cmUgdG8gbm90IGZvcmdldCB0aGUgZXh0cmEgYnl0ZXNcblx0XHRzd2l0Y2ggKGV4dHJhQnl0ZXMpIHtcblx0XHRcdGNhc2UgMTpcblx0XHRcdFx0dGVtcCA9IHVpbnQ4W3VpbnQ4Lmxlbmd0aCAtIDFdXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUodGVtcCA+PiAyKVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wIDw8IDQpICYgMHgzRilcblx0XHRcdFx0b3V0cHV0ICs9ICc9PSdcblx0XHRcdFx0YnJlYWtcblx0XHRcdGNhc2UgMjpcblx0XHRcdFx0dGVtcCA9ICh1aW50OFt1aW50OC5sZW5ndGggLSAyXSA8PCA4KSArICh1aW50OFt1aW50OC5sZW5ndGggLSAxXSlcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSh0ZW1wID4+IDEwKVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wID4+IDQpICYgMHgzRilcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSgodGVtcCA8PCAyKSAmIDB4M0YpXG5cdFx0XHRcdG91dHB1dCArPSAnPSdcblx0XHRcdFx0YnJlYWtcblx0XHR9XG5cblx0XHRyZXR1cm4gb3V0cHV0XG5cdH1cblxuXHRleHBvcnRzLnRvQnl0ZUFycmF5ID0gYjY0VG9CeXRlQXJyYXlcblx0ZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gdWludDhUb0Jhc2U2NFxufSh0eXBlb2YgZXhwb3J0cyA9PT0gJ3VuZGVmaW5lZCcgPyAodGhpcy5iYXNlNjRqcyA9IHt9KSA6IGV4cG9ydHMpKVxuIiwiZXhwb3J0cy5yZWFkID0gZnVuY3Rpb24oYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbSxcbiAgICAgIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDEsXG4gICAgICBlTWF4ID0gKDEgPDwgZUxlbikgLSAxLFxuICAgICAgZUJpYXMgPSBlTWF4ID4+IDEsXG4gICAgICBuQml0cyA9IC03LFxuICAgICAgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwLFxuICAgICAgZCA9IGlzTEUgPyAtMSA6IDEsXG4gICAgICBzID0gYnVmZmVyW29mZnNldCArIGldO1xuXG4gIGkgKz0gZDtcblxuICBlID0gcyAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKTtcbiAgcyA+Pj0gKC1uQml0cyk7XG4gIG5CaXRzICs9IGVMZW47XG4gIGZvciAoOyBuQml0cyA+IDA7IGUgPSBlICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpO1xuXG4gIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpO1xuICBlID4+PSAoLW5CaXRzKTtcbiAgbkJpdHMgKz0gbUxlbjtcbiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IG0gKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCk7XG5cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzO1xuICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHtcbiAgICByZXR1cm4gbSA/IE5hTiA6ICgocyA/IC0xIDogMSkgKiBJbmZpbml0eSk7XG4gIH0gZWxzZSB7XG4gICAgbSA9IG0gKyBNYXRoLnBvdygyLCBtTGVuKTtcbiAgICBlID0gZSAtIGVCaWFzO1xuICB9XG4gIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pO1xufTtcblxuZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtLCBjLFxuICAgICAgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMSxcbiAgICAgIGVNYXggPSAoMSA8PCBlTGVuKSAtIDEsXG4gICAgICBlQmlhcyA9IGVNYXggPj4gMSxcbiAgICAgIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKSxcbiAgICAgIGkgPSBpc0xFID8gMCA6IChuQnl0ZXMgLSAxKSxcbiAgICAgIGQgPSBpc0xFID8gMSA6IC0xLFxuICAgICAgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMDtcblxuICB2YWx1ZSA9IE1hdGguYWJzKHZhbHVlKTtcblxuICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMDtcbiAgICBlID0gZU1heDtcbiAgfSBlbHNlIHtcbiAgICBlID0gTWF0aC5mbG9vcihNYXRoLmxvZyh2YWx1ZSkgLyBNYXRoLkxOMik7XG4gICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuICAgICAgZS0tO1xuICAgICAgYyAqPSAyO1xuICAgIH1cbiAgICBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIHZhbHVlICs9IHJ0IC8gYztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpO1xuICAgIH1cbiAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcbiAgICAgIGUrKztcbiAgICAgIGMgLz0gMjtcbiAgICB9XG5cbiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG0gPSAwO1xuICAgICAgZSA9IGVNYXg7XG4gICAgfSBlbHNlIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgbSA9ICh2YWx1ZSAqIGMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pO1xuICAgICAgZSA9IGUgKyBlQmlhcztcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pO1xuICAgICAgZSA9IDA7XG4gICAgfVxuICB9XG5cbiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCk7XG5cbiAgZSA9IChlIDw8IG1MZW4pIHwgbTtcbiAgZUxlbiArPSBtTGVuO1xuICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpO1xuXG4gIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyODtcbn07XG4iLCJcbi8qKlxuICogaXNBcnJheVxuICovXG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuLyoqXG4gKiB0b1N0cmluZ1xuICovXG5cbnZhciBzdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIFdoZXRoZXIgb3Igbm90IHRoZSBnaXZlbiBgdmFsYFxuICogaXMgYW4gYXJyYXkuXG4gKlxuICogZXhhbXBsZTpcbiAqXG4gKiAgICAgICAgaXNBcnJheShbXSk7XG4gKiAgICAgICAgLy8gPiB0cnVlXG4gKiAgICAgICAgaXNBcnJheShhcmd1bWVudHMpO1xuICogICAgICAgIC8vID4gZmFsc2VcbiAqICAgICAgICBpc0FycmF5KCcnKTtcbiAqICAgICAgICAvLyA+IGZhbHNlXG4gKlxuICogQHBhcmFtIHttaXhlZH0gdmFsXG4gKiBAcmV0dXJuIHtib29sfVxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gaXNBcnJheSB8fCBmdW5jdGlvbiAodmFsKSB7XG4gIHJldHVybiAhISB2YWwgJiYgJ1tvYmplY3QgQXJyYXldJyA9PSBzdHIuY2FsbCh2YWwpO1xufTtcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gdHJ1ZTtcbiAgICB2YXIgY3VycmVudFF1ZXVlO1xuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB2YXIgaSA9IC0xO1xuICAgICAgICB3aGlsZSAoKytpIDwgbGVuKSB7XG4gICAgICAgICAgICBjdXJyZW50UXVldWVbaV0oKTtcbiAgICAgICAgfVxuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG59XG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHF1ZXVlLnB1c2goZnVuKTtcbiAgICBpZiAoIWRyYWluaW5nKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZHJhaW5RdWV1ZSwgMCk7XG4gICAgfVxufTtcblxucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbi8vIFRPRE8oc2h0eWxtYW4pXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCJ2YXIgc2FsZWFibGVCYXNpY0N0cmwgPSBmdW5jdGlvbigkc2NvcGUsJHJvb3RTY29wZSxTYWxlYWJsZVNlcnZpY2UsTWVzc2FnZVNlcnZpY2Upe1xuXG4gICAgJHJvb3RTY29wZS4kb24oXCJuZXdCYXNpY0RldGFpbFwiLGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgLy92YXIgbnVtYmVyT2ZTYWxlYWJsZXMgPSAkc2NvcGUuJHBhcmVudC5zYWxlYWJsZXMubGVuZ3RoO1xuICAgICAgICB2YXIgc2FsZWFibGUgPSBTYWxlYWJsZVNlcnZpY2UuJGJ1aWxkKCk7XG4gICAgICAgIHNhbGVhYmxlLnR5cGUgPTA7XG4gICAgICAgIHNhbGVhYmxlLmZlYXR1cmVkID0gMDtcblxuICAgICAgICAvKmlmKG51bWJlck9mU2FsZWFibGVzPT0wKXtcblxuICAgICAgICB9Ki9cbiAgICAgICAgLy8kc2NvcGUuc2FsZWFibGUgPSBhbmd1bGFyLmNvcHkoJHNjb3BlLm1hc3Rlcik7XG4gICAgICAgICRzY29wZS5zYWxlYWJsZSA9IHNhbGVhYmxlO1xuXG5cblxuICAgICAgICAkc2NvcGUudXBkYXRlU2FsZWFibGUgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBpZigkc2NvcGUuc2FsZWFibGUuaXNmZWF0dXJlZCl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhbGVhYmxlLmZlYXR1cmVkID0gMTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWxlYWJsZS5mZWF0dXJlZCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzYWxlYWJsZS4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoXCJzYWxlYWJsZUNyZWF0ZWRcIixzYWxlYWJsZSk7XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICB9KTtcblxuICAgICRyb290U2NvcGUuJG9uKFwiZWRpdEJhc2ljRGV0YWlsXCIsZnVuY3Rpb24oZXZlbnQsc2FsZWFibGUpe1xuICAgICAgICAkc2NvcGUuc2FsZWFibGUgPSBzYWxlYWJsZTtcbiAgICAgICAgJHNjb3BlLnVwZGF0ZVNhbGVhYmxlID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgaWYoJHNjb3BlLnNhbGVhYmxlLmlzZmVhdHVyZWQpe1xuICAgICAgICAgICAgICAgICRzY29wZS5zYWxlYWJsZS5mZWF0dXJlZCA9IDE7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2FsZWFibGUuZmVhdHVyZWQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2FsZWFibGUuJHNhdmUoKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcblxuICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoXCJzYWxlYWJsZVVwZGF0ZWRcIixzYWxlYWJsZSk7XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICB9KTtcblxuXG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzYWxlYWJsZUJhc2ljQ3RybDtcbiIsIlxudmFyIGJpb0NvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsQmlvZ3JhcGh5U2VydmljZSxNZXNzYWdlU2VydmljZSl7XG5cblxuICAgIHZhciBkYXRhID0gQmlvZ3JhcGh5U2VydmljZS4kZmluZCgwKTtcblxuICAgICRzY29wZS5wcm9maWxlID0gZGF0YS4kZmV0Y2goKTtcblxuICAgICRzY29wZS51cGRhdGVCaW8gPSBmdW5jdGlvbigpe1xuICAgICAgICBkYXRhLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG5cbiAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcblxuICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSxtZXRhKTtcblxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmlvQ29udHJvbGxlcjsiLCJ2YXIgY29uZmlnQ29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwkdGltZW91dCxNZXNzYWdlU2VydmljZSxVc2VyQ29udGVudFR5cGUpe1xuXG4gICAgdmFyIGNvbnRlbnR0eXBlcyA9IFVzZXJDb250ZW50VHlwZS4kc2VhcmNoKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICRzY29wZS51c2VyY29udGVudHR5cGVzID0gZGF0YTtcbiAgICB9KTtcblxuICAgICRzY29wZS5lZGl0VXNlckNvbnRlbnQgPSBmdW5jdGlvbihjb250ZW50KXtcbiAgICAgICAgJHNjb3BlLmNvbnRlbnQgPSBjb250ZW50O1xuICAgICAgICAkc2NvcGUuc2hvd0VkaXRDb250ZW50SXRlbSA9IHRydWU7XG4gICAgfVxuICAgICRzY29wZS51cGRhdGVVc2VyQ29udGVudCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBpc0hvbWUgPSAkc2NvcGUuY29udGVudC5pc2hvbWU7XG4gICAgICAgIHZhciBhc0hvbWUgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLmNvbnRlbnQuYXNob21lID0gMDtcbiAgICAgICAgaWYoaXNIb21lKXtcbiAgICAgICAgICAgICRzY29wZS5jb250ZW50LmFzaG9tZSA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLmNvbnRlbnQuJHNhdmUoKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICRzY29wZS51c2VyY29udGVudHR5cGVzLiRyZWZyZXNoKCk7XG4gICAgICAgICAgICAkc2NvcGUuc2hvd0VkaXRDb250ZW50SXRlbSA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSxtZXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmNoYW5nZVN0YXRlQ29udGVudCA9IGZ1bmN0aW9uKCRldmVudCx1c2VyY29udGVudCl7XG4gICAgICAgIHZhciBjaGVja2JveCA9ICRldmVudC50YXJnZXQ7XG4gICAgICAgIHZhciBhY3Rpb24gPSAoY2hlY2tib3guY2hlY2tlZCA/IHRydWU6IGZhbHNlKTtcblxuICAgICAgICB1c2VyY29udGVudC5hY3RpdmUgPSBhY3Rpb247XG4gICAgICAgIHVzZXJjb250ZW50LiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAkc2NvcGUudXNlcmNvbnRlbnR0eXBlcy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSxtZXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICRzY29wZS5zZXRBc0hvbWUgPSBmdW5jdGlvbigkZXZlbnQsdXNlcmNvbnRlbnQpe1xuICAgICAgICB2YXIgY2hlY2tib3ggPSAkZXZlbnQudGFyZ2V0O1xuICAgICAgICB2YXIgYWN0aW9uID0gKGNoZWNrYm94LmNoZWNrZWQgPyB0cnVlOiBmYWxzZSk7XG5cbiAgICAgICAgdXNlcmNvbnRlbnQuYXNob21lID0gYWN0aW9uO1xuICAgICAgICB1c2VyY29udGVudC4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgJHNjb3BlLnVzZXJjb250ZW50dHlwZXMuJHJlZnJlc2goKTtcbiAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsbWV0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxufVxubW9kdWxlLmV4cG9ydHMgPSBjb25maWdDb250cm9sbGVyO1xuXG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgbWFjaW50b3NoIG9uIDIvMy8xNS5cbiAqL1xudmFyIGFsZXJ0RGlyZWN0aXZlID0gZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZW1wbGF0ZVVybDpcIi4uLy4uL2pzL2FkbWluL2FuZ3VsYXIvdGVtcGxhdGVzL2FsZXJ0Lmh0bWxcIixcbiAgICAgICAgcmVzdHJpY3Q6XCJFQVwiLFxuICAgICAgICBzY29wZSA6IHtcbiAgICAgICAgICAgIG1lc3NhZ2U6XCI9bXNnZVwiXG4gICAgICAgIH0sXG5cbiAgICAgICAgY29udHJvbGxlcjpmdW5jdGlvbigkc2NvcGUpe1xuXG4gICAgICAgICAgICAkc2NvcGUuc2hvd0FsZXJ0ID0gdHJ1ZTtcbiAgICAgICAgICAgICRzY29wZS5kZXN0cm95QWxlcnQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICRzY29wZS4kcGFyZW50LnNob3dBbGVydCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBhbGVydERpcmVjdGl2ZTtcbiIsInZhciBjbG9zZUNvbnRlbnREaXJlY3RpdmUgPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OidFQScsXG4gICAgICAgIHRlbXBsYXRlOic8YSBocmVmPVwiXCIgbmctY2xpY2s9XCJkZXN0cm95U2VjdGlvbigpXCIgY2xhc3M9XCJwdWxsLXJpZ2h0IHJlbW92ZS1idXR0b25cIiBkYXRhLWljb249XCImI3hlNzBkXCIgPjwvYT4nLFxuXG4gICAgICAgIHNjb3BlOntyZW1vdmU6JyYnfSxcbiAgICAgICAgY29udHJvbGxlcjpmdW5jdGlvbigkc2NvcGUpe1xuICAgICAgICAgICAgJHNjb3BlLmRlc3Ryb3lTZWN0aW9uID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2xvc2VDb250ZW50RGlyZWN0aXZlO1xuIiwidmFyIGNvbmZpZ01lbnUgPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OlwiRUFcIixcbiAgICAgICAgdGVtcGxhdGVVcmw6XCIuLi8uLi9qcy9hZG1pbi9hbmd1bGFyL3RlbXBsYXRlcy9jb25maWdfbWVudS5odG1sXCJcbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGNvbmZpZ01lbnU7IiwidmFyIGNvbnRlbnRTZWxlY3RvciA9IGZ1bmN0aW9uKE1lc3NhZ2VTZXJ2aWNlLFVzZXJDb250ZW50VHlwZSl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6XCIuLi8uLi9qcy9hZG1pbi9hbmd1bGFyL3RlbXBsYXRlcy9jb250ZW50X3NlbGVjdG9yLmh0bWxcIixcbiAgICAgICAgcmVzdHJpY3Q6XCJFQVwiLFxuICAgICAgICBzY29wZTp7fSxcbiAgICAgICAgdHJhbnNjbHVkZTp0cnVlLFxuICAgICAgICBjb250cm9sbGVyOmZ1bmN0aW9uKCRzY29wZSwkdGltZW91dCl7XG4gICAgICAgICAgICAkc2NvcGUuaW5mb0NvbnRlbnRTZWxlY3RvciA9IE1lc3NhZ2VTZXJ2aWNlLmdldCgnY29udGVudHNlbGVjdG9yX2luZm8nKS5tZXNzYWdlO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnR0eXBlcyA9IFVzZXJDb250ZW50VHlwZS4kc2VhcmNoKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJjb250ZW50dHlwZXMgPSBkYXRhO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRzY29wZS51cGRhdGVDb250ZW50ID0gZnVuY3Rpb24oJGV2ZW50LHVzZXJjb250ZW50KXtcblxuICAgICAgICAgICAgICAgIHZhciBjaGVja2JveCA9ICRldmVudC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IChjaGVja2JveC5jaGVja2VkID8gdHJ1ZTogZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgdXNlcmNvbnRlbnQuYWN0aXZlID0gYWN0aW9uO1xuICAgICAgICAgICAgICAgIHVzZXJjb250ZW50LiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSxtZXRhKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY29udGVudFNlbGVjdG9yOyIsInZhciBoYWxsbyA9IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCBuZ01vZGVsQ3RybCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJGVsZW1lbnQpO1xuICAgICAgICAgICAgJCh0aGlzKS5oYWxsbyh7XG4gICAgICAgICAgICAgICAgcGx1Z2luczoge1xuICAgICAgICAgICAgICAgICAgICAnaGFsbG9mb3JtYXQnOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgJ2hhbGxvYmxvY2snOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgJ2hhbGxvanVzdGlmeSc6IHt9LFxuICAgICAgICAgICAgICAgICAgICAnaGFsbG9saXN0cyc6IHt9LFxuICAgICAgICAgICAgICAgICAgICAnaGFsbG9yZXVuZG8nOiB7fVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50cyA9IG5nTW9kZWxDdHJsLiR2aWV3VmFsdWU7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5oYWxsbygnc2V0Q29udGVudHMnLCBjb250ZW50cyk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9XG4gICAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBoYWxsbyIsInZhciBwcm9maWxlTWVudSA9IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6XCJFQVwiLFxuICAgICAgICB0ZW1wbGF0ZVVybDpcIi4uLy4uL2pzL2FkbWluL2FuZ3VsYXIvdGVtcGxhdGVzL3Byb2ZpbGVfbWVudS5odG1sXCJcbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IHByb2ZpbGVNZW51OyIsInZhciBlZHVjYXRpb25EaXJlY3RpdmUgPSBmdW5jdGlvbihNZXNzYWdlU2VydmljZSxFZHVjYXRpb24sJHRpbWVvdXQsSGVscGVyKXtcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZW1wbGF0ZVVybDpcIi4uLy4uL2pzL2FkbWluL2FuZ3VsYXIvdGVtcGxhdGVzL3Jlc3VtZS9lZHVjYXRpb24uaHRtbFwiLFxuICAgICAgICByZXN0cmljdDpcIkVBXCIsXG4gICAgICAgIHNjb3BlOnt9LFxuICAgICAgICBjb250cm9sbGVyOmZ1bmN0aW9uKCRzY29wZSwkcm9vdFNjb3BlKSB7XG4gICAgICAgICAgICAkc2NvcGUuY2xvc2VGb3JtID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLGZhbHNlKTtcbiAgICAgICAgICAgICRyb290U2NvcGUuJG9uKCdyZXN1bWVDaGFuZ2UnLGZ1bmN0aW9uKGV2ZW50LGFyZ3Mpe1xuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBhcmdzLnJlc3VtZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdW1lSWQgPSBhcmdzLnJlc3VtZS5pZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVkdWNhdGlvbnMgPSBFZHVjYXRpb24uJHNlYXJjaCh7cmVzdW1lX2lkOiByZXN1bWVJZH0pLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWR1Y2F0aW9ucyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmVkdWNhdGlvbnMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXROb0l0ZW1zSW5mb01lc3NhZ2UoJHNjb3BlLCBcIiBlc3R1ZGlvc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi4gUHVsc2EgZWwgYm90w7NuIE51ZXZhIHBhcmEgY3JlYXIgdW5hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmV3RWR1Y2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlZHVjYXRpb24gPSBFZHVjYXRpb24uJGJ1aWxkKHtyZXN1bWVfaWQ6IHJlc3VtZUlkLCBpbml0ZGF0ZTogJycsIGVuZGRhdGU6ICcnfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWR1Y2F0aW9uID0gZWR1Y2F0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vbnRob3B0aW9ucyA9IEhlbHBlci5tb250aHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lZHVjYXRpb24uaW5pdG1vbnRoID0gSGVscGVyLm1vbnRocygpWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkdWNhdGlvbi5lbmRtb250aCA9IEhlbHBlci5tb250aHMoKVswXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZUVkdWNhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNDdXJyZW50ID0gJHNjb3BlLmVkdWNhdGlvbi5jdXJyZW50cGxhY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkdWNhdGlvbi5jdXJyZW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNDdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lZHVjYXRpb24uY3VycmVudCA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lZHVjYXRpb24uaW5pdGRhdGUgPSAkc2NvcGUuZWR1Y2F0aW9uLmluaXRtb250aCArIFwiLVwiICsgJHNjb3BlLmVkdWNhdGlvbi5pbml0eWVhcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWR1Y2F0aW9uLmVuZGRhdGUgPSAkc2NvcGUuZWR1Y2F0aW9uLmVuZG1vbnRoICsgXCItXCIgKyAkc2NvcGUuZWR1Y2F0aW9uLmVuZHllYXI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZHVjYXRpb24uJHNhdmUoKS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWR1Y2F0aW9ucy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWR1Y2F0aW9uRm9ybS4kcmVzZXRGb3JtKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRFZHVjYXRpb24gPSBmdW5jdGlvbiAoZWR1Y2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vbnRob3B0aW9ucyA9IEhlbHBlci5tb250aHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbW9udGhJbmRleCA9IEhlbHBlci5tb250aHMoKS5pbmRleE9mKGVkdWNhdGlvbi5pbW9udGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVtb250aEluZGV4ID0gSGVscGVyLm1vbnRocygpLmluZGV4T2YoZWR1Y2F0aW9uLmVtb250aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWR1Y2F0aW9uID0gZWR1Y2F0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkdWNhdGlvbi5pbml0bW9udGggPSAkc2NvcGUubW9udGhvcHRpb25zW2ltb250aEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lZHVjYXRpb24uZW5kbW9udGggPSAkc2NvcGUubW9udGhvcHRpb25zW2Vtb250aEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lZHVjYXRpb24uaW5pdHllYXIgPSBlZHVjYXRpb24uaXllYXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWR1Y2F0aW9uLmVuZHllYXIgPSBlZHVjYXRpb24uZXllYXI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVFZHVjYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzQ3VycmVudCA9ICRzY29wZS5lZHVjYXRpb24uY3VycmVudHBsYWNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lZHVjYXRpb24uY3VycmVudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWR1Y2F0aW9uLmN1cnJlbnQgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZWR1Y2F0aW9uLmluaXRkYXRlID0gJHNjb3BlLmVkdWNhdGlvbi5pbml0bW9udGggKyBcIi1cIiArICRzY29wZS5lZHVjYXRpb24uaW5pdHllYXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkdWNhdGlvbi5lbmRkYXRlID0gJHNjb3BlLmVkdWNhdGlvbi5lbmRtb250aCArIFwiLVwiICsgJHNjb3BlLmVkdWNhdGlvbi5lbmR5ZWFyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWR1Y2F0aW9uLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkdWNhdGlvbnMuJHJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkdWNhdGlvbkZvcm0uJHJlc2V0Rm9ybSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAvL2RlbGV0ZVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVtb3ZlRWR1Y2F0aW9uID0gZnVuY3Rpb24gKGVkdWNhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkdWNhdGlvbiA9IGVkdWNhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtYXRpb24gPSBNZXNzYWdlU2VydmljZS5zZXRDb25maXJtRGVsZXRlTWVzc2FnZShcIiBlc3R1ZGlvXCIsIFwiIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZHVjYXRpb24uJGRlc3Ryb3koKS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vY2hhbmdlIHN0YXR1c1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hhbmdlU3RhdHVzID0gZnVuY3Rpb24gKCRldmVudCwgZWR1Y2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tib3ggPSAkZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IChjaGVja2JveC5jaGVja2VkID8gdHJ1ZSA6IGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZWR1Y2F0aW9uLnN0YXR1cyA9IGFjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkdWNhdGlvbi4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkdWNhdGlvbnMuJHJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG5cblxuXG4gICAgICAgIH1cbiAgICB9XG5cbn1cbm1vZHVsZS5leHBvcnRzID0gZWR1Y2F0aW9uRGlyZWN0aXZlO1xuIiwidmFyIGV4cGVyaWVuY2VEaXJlY3RpdmUgPSBmdW5jdGlvbihNZXNzYWdlU2VydmljZSxFeHBlcmllbmNlLCR0aW1lb3V0LEhlbHBlcil7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6XCIuLi8uLi9qcy9hZG1pbi9hbmd1bGFyL3RlbXBsYXRlcy9yZXN1bWUvZXhwZXJpZW5jZS5odG1sXCIsXG4gICAgICAgIHJlc3RyaWN0OlwiRUFcIixcbiAgICAgICAgc2NvcGU6e30sXG4gICAgICAgIGNvbnRyb2xsZXI6ZnVuY3Rpb24oJHNjb3BlLCRyb290U2NvcGUpe1xuICAgICAgICAgICAgJHNjb3BlLmNsb3NlRm9ybSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSxmYWxzZSk7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbigncmVzdW1lQ2hhbmdlJyxmdW5jdGlvbihldmVudCxhcmdzKXtcbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgYXJncy5yZXN1bWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VtZUlkID0gYXJncy5yZXN1bWUuaWQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBleHBlcmllbmNlcyA9IEV4cGVyaWVuY2UuJHNlYXJjaCh7cmVzdW1lX2lkOiByZXN1bWVJZH0pLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhwZXJpZW5jZXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5leHBlcmllbmNlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldE5vSXRlbXNJbmZvTWVzc2FnZSgkc2NvcGUsIFwiIGV4cGVyaWVuY2lhc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi4gUHVsc2EgZWwgYm90w7NuIE51ZXZhIHBhcmEgY3JlYXIgdW5hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvL25ld1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmV3RXhwZXJpZW5jZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhwZXJpZW5jZSA9IEV4cGVyaWVuY2UuJGJ1aWxkKHtyZXN1bWVfaWQ6IHJlc3VtZUlkLCBpbml0ZGF0ZTogJycsIGVuZGRhdGU6ICcnfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhwZXJpZW5jZSA9IGV4cGVyaWVuY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9udGhvcHRpb25zID0gSGVscGVyLm1vbnRocygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVyaWVuY2UuaW5pdG1vbnRoID0gSGVscGVyLm1vbnRocygpWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVyaWVuY2UuZW5kbW9udGggPSBIZWxwZXIubW9udGhzKClbMF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVFeHBlcmllbmNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0N1cnJlbnQgPSAkc2NvcGUuZXhwZXJpZW5jZS5jdXJyZW50cGxhY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVyaWVuY2UuY3VycmVudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhwZXJpZW5jZS5jdXJyZW50ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVyaWVuY2UuaW5pdGRhdGUgPSAkc2NvcGUuZXhwZXJpZW5jZS5pbml0bW9udGggKyBcIi1cIiArICRzY29wZS5leHBlcmllbmNlLmluaXR5ZWFyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5leHBlcmllbmNlLmVuZGRhdGUgPSAkc2NvcGUuZXhwZXJpZW5jZS5lbmRtb250aCArIFwiLVwiICsgJHNjb3BlLmV4cGVyaWVuY2UuZW5keWVhcjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVyaWVuY2UuJHNhdmUoKS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhwZXJpZW5jZXMuJHJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVyaWVuY2VGb3JtLiRyZXNldEZvcm0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgLy9lZGl0XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lZGl0RXhwZXJpZW5jZSA9IGZ1bmN0aW9uIChleHBlcmllbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vbnRob3B0aW9ucyA9IEhlbHBlci5tb250aHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbW9udGhJbmRleCA9IEhlbHBlci5tb250aHMoKS5pbmRleE9mKGV4cGVyaWVuY2UuaW1vbnRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbW9udGhJbmRleCA9IEhlbHBlci5tb250aHMoKS5pbmRleE9mKGV4cGVyaWVuY2UuZW1vbnRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5leHBlcmllbmNlID0gZXhwZXJpZW5jZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5leHBlcmllbmNlLmluaXRtb250aCA9ICRzY29wZS5tb250aG9wdGlvbnNbaW1vbnRoSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVyaWVuY2UuZW5kbW9udGggPSAkc2NvcGUubW9udGhvcHRpb25zW2Vtb250aEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5leHBlcmllbmNlLmluaXR5ZWFyID0gZXhwZXJpZW5jZS5peWVhcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5leHBlcmllbmNlLmVuZHllYXIgPSBleHBlcmllbmNlLmV5ZWFyO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVFeHBlcmllbmNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0N1cnJlbnQgPSAkc2NvcGUuZXhwZXJpZW5jZS5jdXJyZW50cGxhY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVyaWVuY2UuY3VycmVudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhwZXJpZW5jZS5jdXJyZW50ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVyaWVuY2UuaW5pdGRhdGUgPSAkc2NvcGUuZXhwZXJpZW5jZS5pbml0bW9udGggKyBcIi1cIiArICRzY29wZS5leHBlcmllbmNlLmluaXR5ZWFyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5leHBlcmllbmNlLmVuZGRhdGUgPSAkc2NvcGUuZXhwZXJpZW5jZS5lbmRtb250aCArIFwiLVwiICsgJHNjb3BlLmV4cGVyaWVuY2UuZW5keWVhcjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVyaWVuY2UuJHNhdmUoKS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhwZXJpZW5jZXMuJHJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVyaWVuY2VGb3JtLiRyZXNldEZvcm0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgLy9kZWxldGVcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlbW92ZUV4cGVyaWVuY2UgPSBmdW5jdGlvbiAoZXhwZXJpZW5jZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVyaWVuY2UgPSBleHBlcmllbmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmZpcm1hdGlvbiA9IE1lc3NhZ2VTZXJ2aWNlLnNldENvbmZpcm1EZWxldGVNZXNzYWdlKFwiIGV4cGVyaWVuY2lhXCIsIFwiIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlcmllbmNlLiRkZXN0cm95KCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRyZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAvL2NoYW5nZSBzdGF0dXNcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYW5nZVN0YXR1cyA9IGZ1bmN0aW9uICgkZXZlbnQsIGV4cGVyaWVuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGVja2JveCA9ICRldmVudC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gKGNoZWNrYm94LmNoZWNrZWQgPyB0cnVlIDogZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlcmllbmNlLnN0YXR1cyA9IGFjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVyaWVuY2UuJHNhdmUoKS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5leHBlcmllbmNlcy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSxcbiAgICAgICAgbGluazpmdW5jdGlvbihzY29wZSxlbGVtZW50KXtcbiAgICAgICAgICAgIC8vJChlbGVtZW50KS5lZmZlY3QoXCJoaWdobGlnaHRcIiwge30sIDMwMDApO1xuICAgICAgICB9XG4gICAgfVxuXG59XG5tb2R1bGUuZXhwb3J0cyA9IGV4cGVyaWVuY2VEaXJlY3RpdmU7XG4iLCJ2YXIgaW50ZXJlc3REaXJlY3RpdmUgPSBmdW5jdGlvbihNZXNzYWdlU2VydmljZSxJbnRlcmVzdCwkdGltZW91dCxIZWxwZXIpe1xuICAgIHJldHVybiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOlwiLi4vLi4vanMvYWRtaW4vYW5ndWxhci90ZW1wbGF0ZXMvcmVzdW1lL2ludGVyZXN0cy5odG1sXCIsXG4gICAgICAgIHJlc3RyaWN0OlwiRUFcIixcbiAgICAgICAgc2NvcGU6e30sXG4gICAgICAgIGNvbnRyb2xsZXI6ZnVuY3Rpb24oJHNjb3BlLCRyb290U2NvcGUpIHtcbiAgICAgICAgICAgICRzY29wZS5jbG9zZUZvcm0gPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSxmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsZmFsc2UpO1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJ3Jlc3VtZUNoYW5nZScsZnVuY3Rpb24oZXZlbnQsYXJncyl7XG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIGFyZ3MucmVzdW1lICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bWVJZCA9IGFyZ3MucmVzdW1lLmlkO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW50ZXJlc3RzID0gSW50ZXJlc3QuJHNlYXJjaCh7cmVzdW1lX2lkOiByZXN1bWVJZH0pLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW50ZXJlc3RzID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuaW50ZXJlc3RzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0Tm9JdGVtc0luZm9NZXNzYWdlKCRzY29wZSwgXCIgaW50ZXJlc2VzIHByb2Zlc2lvbmFsZXNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIuIFB1bHNhIGVsIGJvdMOzbiBOdWV2byBwYXJhIGNyZWFyIHVub1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5ld0ludGVyZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnRlcmVzdCA9IEludGVyZXN0LiRidWlsZCh7cmVzdW1lX2lkOiByZXN1bWVJZH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmludGVyZXN0ID0gaW50ZXJlc3Q7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVJbnRlcmVzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlcmVzdC4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcmVzdHMuJHJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmludGVyZXN0Rm9ybS4kcmVzZXRGb3JtKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRJbnRlcmVzdCA9IGZ1bmN0aW9uIChpbnRlcmVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcmVzdCA9IGludGVyZXN0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlSW50ZXJlc3QgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlcmVzdC4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcmVzdHMuJHJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmludGVyZXN0Rm9ybS4kcmVzZXRGb3JtKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vZGVsZXRlXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZW1vdmVJbnRlcmVzdCA9IGZ1bmN0aW9uIChpbnRlcmVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmludGVyZXN0ID0gaW50ZXJlc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWF0aW9uID0gTWVzc2FnZVNlcnZpY2Uuc2V0Q29uZmlybURlbGV0ZU1lc3NhZ2UoXCIgaWRpb21hXCIsIFwiIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlcmVzdC4kZGVzdHJveSgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgLy9jaGFuZ2Ugc3RhdHVzXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jaGFuZ2VTdGF0dXMgPSBmdW5jdGlvbiAoJGV2ZW50LCBpbnRlcmVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrYm94ID0gJGV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSAoY2hlY2tib3guY2hlY2tlZCA/IHRydWUgOiBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVyZXN0LnN0YXR1cyA9IGFjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVyZXN0LiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW50ZXJlc3RzLiRyZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuXG5cblxuICAgICAgICB9XG4gICAgfVxuXG59XG5tb2R1bGUuZXhwb3J0cyA9IGludGVyZXN0RGlyZWN0aXZlO1xuIiwidmFyIGxhbmd1YWdlRGlyZWN0aXZlID0gZnVuY3Rpb24oTWVzc2FnZVNlcnZpY2UsTGFuZ3VhZ2UsJHRpbWVvdXQsSGVscGVyKXtcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZW1wbGF0ZVVybDpcIi4uLy4uL2pzL2FkbWluL2FuZ3VsYXIvdGVtcGxhdGVzL3Jlc3VtZS9sYW5ndWFnZXMuaHRtbFwiLFxuICAgICAgICByZXN0cmljdDpcIkVBXCIsXG4gICAgICAgIHNjb3BlOnt9LFxuICAgICAgICBjb250cm9sbGVyOmZ1bmN0aW9uKCRzY29wZSwkcm9vdFNjb3BlKSB7XG4gICAgICAgICAgICAkc2NvcGUuY2xvc2VGb3JtID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLGZhbHNlKTtcbiAgICAgICAgICAgICRyb290U2NvcGUuJG9uKCdyZXN1bWVDaGFuZ2UnLGZ1bmN0aW9uKGV2ZW50LGFyZ3Mpe1xuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBhcmdzLnJlc3VtZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdW1lSWQgPSBhcmdzLnJlc3VtZS5pZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhbmd1YWdlcyA9IExhbmd1YWdlLiRzZWFyY2goe3Jlc3VtZV9pZDogcmVzdW1lSWR9KS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxhbmd1YWdlcyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmxhbmd1YWdlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldE5vSXRlbXNJbmZvTWVzc2FnZSgkc2NvcGUsIFwiIGlkaW9tYXNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIuIFB1bHNhIGVsIGJvdMOzbiBOdWV2byBwYXJhIGNyZWFyIHVub1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5ld0xhbmd1YWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYW5ndWFnZSA9IExhbmd1YWdlLiRidWlsZCh7cmVzdW1lX2lkOiByZXN1bWVJZH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxhbmd1YWdlID0gbGFuZ3VhZ2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVMYW5ndWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZS4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sYW5ndWFnZXMuJHJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxhbmd1YWdlRm9ybS4kcmVzZXRGb3JtKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVkaXRMYW5ndWFnZSA9IGZ1bmN0aW9uIChsYW5ndWFnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sYW5ndWFnZSA9IGxhbmd1YWdlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlTGFuZ3VhZ2UgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZS4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sYW5ndWFnZXMuJHJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxhbmd1YWdlRm9ybS4kcmVzZXRGb3JtKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vZGVsZXRlXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZW1vdmVMYW5ndWFnZSA9IGZ1bmN0aW9uIChsYW5ndWFnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxhbmd1YWdlID0gbGFuZ3VhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWF0aW9uID0gTWVzc2FnZVNlcnZpY2Uuc2V0Q29uZmlybURlbGV0ZU1lc3NhZ2UoXCIgaWRpb21hXCIsIFwiIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZS4kZGVzdHJveSgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgLy9jaGFuZ2Ugc3RhdHVzXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jaGFuZ2VTdGF0dXMgPSBmdW5jdGlvbiAoJGV2ZW50LCBsYW5ndWFnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrYm94ID0gJGV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSAoY2hlY2tib3guY2hlY2tlZCA/IHRydWUgOiBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlLnN0YXR1cyA9IGFjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGFuZ3VhZ2VzLiRyZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuXG5cblxuICAgICAgICB9XG4gICAgfVxuXG59XG5tb2R1bGUuZXhwb3J0cyA9IGxhbmd1YWdlRGlyZWN0aXZlO1xuIiwidmFyIHJlc3VtZURpcmVjdGl2ZSA9IGZ1bmN0aW9uKE1lc3NhZ2VTZXJ2aWNlLFJlc3VtZSwkdGltZW91dCxSZXN1bWVIZWxwZXIpe1xuICAgIHJldHVybiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOlwiLi4vLi4vanMvYWRtaW4vYW5ndWxhci90ZW1wbGF0ZXMvcmVzdW1lL3Jlc3VtZS5odG1sXCIsXG4gICAgICAgIHJlc3RyaWN0OlwiRUFcIixcbiAgICAgICAgc2NvcGU6e1xuXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRyb2xsZXI6ZnVuY3Rpb24oJHNjb3BlLCRyb290U2NvcGUpe1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJ25vUmVzdW1lRm91bmQnLGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0Tm9JdGVtc0luZm9NZXNzYWdlKCRzY29wZSwgXCIgcsOpc3Vtw6lzXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiLiBQdWxzYSBlbCBib3TDs24gTnVldm8gcGFyYSBjcmVhclwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbigncmVzdW1lQ2hhbmdlJyxmdW5jdGlvbihldmVudCxhcmdzKXtcbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgYXJncy5yZXN1bWUgIT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdW1lcyA9IFJlc3VtZS4kc2VhcmNoKCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZXN1bWVzID0gZGF0YTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5yZXN1bWVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0Tm9JdGVtc0luZm9NZXNzYWdlKCRzY29wZSwgXCIgcsOpc3Vtw6lzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLiBQdWxzYSBlbCBib3TDs24gTnVldm8gcGFyYSBjcmVhciB1bm9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VtZSA9IFJlc3VtZS4kZmluZChhcmdzLnJlc3VtZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZXN1bWUgPSByZXN1bWU7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVSZXN1bWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVzdW1lLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dSZXN1bWVGb3JtID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkc2NvcGUubmV3UmVzdW1lID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd2VkUmVzdW1lRm9ybSA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kZW1pdChcIm5ld1Jlc3VtZVwiKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS5kZWxldGVSZXN1bWUgPSBmdW5jdGlvbihyZXN1bWUpe1xuICAgICAgICAgICAgICAgIHZhciBjb25maXJtYXRpb24gPSBNZXNzYWdlU2VydmljZS5zZXRDb25maXJtRGVsZXRlTWVzc2FnZShcIiByw6lzdW3DqVwiLFwiLiBUb2RvcyBsYXMgc2VjY2lvbmVzIGRlbCByw6lzdW3DqSBzZXLDoW4gZWxpbWluYWRhcyB0YW1iacOpbi4uLlwiKTtcbiAgICAgICAgICAgICAgICBpZihjb25maXJtYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdW1lLiRkZXN0cm95KCkuJHRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRyZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IFwiL2FkbWluL3Jlc3VtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTtcblxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5wdWJsaWNhdGlvbiA9IGZ1bmN0aW9uKHJlc3VtZSwgdG9CZVB1Ymxpc2hlZCl7XG4gICAgICAgICAgICAgICAgaWYodG9CZVB1Ymxpc2hlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bWUuYWN0aXZlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgLy9wdWJsaXNoIHJlc3VtZVxuICAgICAgICAgICAgICAgICAgICBSZXN1bWVIZWxwZXIucHVibGlzaFJlc3VtZSgkc2NvcGUsJHJvb3RTY29wZSxcIi9wdWJsaXNoX3Jlc3VtZS9cIityZXN1bWUuaWQpXG4gICAgICAgICAgICAgICAgfSAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgcmVzdW1lLmFjdGl2ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VtZS4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSxtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5jbG9uZVJlc3VtZSA9IGZ1bmN0aW9uKHJlc3VtZSl7XG4gICAgICAgICAgICAgICAgUmVzdW1lSGVscGVyLmNsb25lUmVzdW1lKCRzY29wZSwkcm9vdFNjb3BlLFwiL2Nsb25lX3Jlc3VtZS9cIityZXN1bWUuaWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuc2hvd1Jlc3VtZUVkaXRGb3JtID0gZnVuY3Rpb24ocmVzdW1lKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd2VkRWRpdFJlc3VtZUZvcm0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICAgICAgJHNjb3BlLmNsb3NlQWZ0ZXJVcGRhdGUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93ZWRFZGl0UmVzdW1lRm9ybSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuY2xvc2VBZnRlckNyZWF0ZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dlZFJlc3VtZUZvcm0gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyokc2NvcGUuJHdhdGNoKCckdmlld0NvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJsb2FkaW5nXCIpO1xuICAgICAgICAgICAgfSk7Ki9cblxuICAgICAgICB9XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlc3VtZURpcmVjdGl2ZTsiLCJ2YXIgcmVzdW1lRWRpdERpcmVjdGl2ZSA9IGZ1bmN0aW9uKE1lc3NhZ2VTZXJ2aWNlLFJlc3VtZSwkdGltZW91dCl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6XCIuLi8uLi9qcy9hZG1pbi9hbmd1bGFyL3RlbXBsYXRlcy9yZXN1bWUvcmVzdW1lZWRpdGZvcm0uaHRtbFwiLFxuICAgICAgICByZXN0cmljdDpcIkVBXCIsXG4gICAgICAgIHNjb3BlOntcbiAgICAgICAgICAgIHJlc3VtZTpcIj1yZXNcIixcbiAgICAgICAgICAgIGNsb3NlOlwiJmNsb3NlXCJcbiAgICAgICAgfSxcbiAgICAgICAgY29udHJvbGxlcjpmdW5jdGlvbigkc2NvcGUsJHJvb3RTY29wZSl7XG4gICAgICAgICAgICAkc2NvcGUuY2xvc2VGb3JtID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLnNhdmVSZXN1bWUgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgIHRoaXMucmVzdW1lLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kZW1pdChcInVwZGF0ZVJlc3VtZUxpc3RcIik7XG4gICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KFwicmVzdW1lQ2hhbmdlXCIsZGF0YS4kcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbG9zZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgIH0sNDAwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgIC8vJHNjb3BlLiRwYXJlbnQuc2hvd2VkRWRpdFJlc3VtZUZvcm0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXN1bWVFZGl0RGlyZWN0aXZlOyIsInZhciByZXN1bWVDcmVhdGlvbkRpcmVjdGl2ZSA9IGZ1bmN0aW9uKE1lc3NhZ2VTZXJ2aWNlLFJlc3VtZSwkdGltZW91dCl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6XCIuLi8uLi9qcy9hZG1pbi9hbmd1bGFyL3RlbXBsYXRlcy9yZXN1bWUvcmVzdW1lZm9ybS5odG1sXCIsXG4gICAgICAgIHJlc3RyaWN0OlwiRUFcIixcbiAgICAgICAgc2NvcGU6e1xuICAgICAgICAgICAgY2xvc2U6XCImY2xvc2VcIlxuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyOmZ1bmN0aW9uKCRzY29wZSwkcm9vdFNjb3BlKXtcbiAgICAgICAgICAgICRzY29wZS5jbG9zZUZvcm0gPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICRzY29wZS5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbihcIm5ld1Jlc3VtZVwiLGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VtZSA9IFJlc3VtZS4kYnVpbGQoKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVzdW1lID0gcmVzdW1lO1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNyZWF0ZVJlc3VtZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VtZS4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSxtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoXCJ1cGRhdGVSZXN1bWVMaXN0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kZW1pdChcInJlc3VtZUNoYW5nZVwiLGRhdGEuJHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2xvc2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8kc2NvcGUuJGRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sNDAwMCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIH1cbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVzdW1lQ3JlYXRpb25EaXJlY3RpdmU7IiwidmFyIGNvbnRlbnRTZWxlY3RvciA9IGZ1bmN0aW9uKE1lc3NhZ2VTZXJ2aWNlKXtcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZW1wbGF0ZVVybDpcIi4uLy4uL2pzL2FkbWluL2FuZ3VsYXIvdGVtcGxhdGVzL3Jlc3VtZS9yZXN1bWVfc2VsZWN0b3IuaHRtbFwiLFxuICAgICAgICByZXN0cmljdDpcIkVBXCIsXG4gICAgICAgIHNjb3BlOnt9LFxuICAgICAgICB0cmFuc2NsdWRlOnRydWUsXG4gICAgICAgIGNvbnRyb2xsZXI6ZnVuY3Rpb24oJHNjb3BlLCR0aW1lb3V0KXtcbiAgICAgICAgICAgICRzY29wZS5pbmZvUmVzdW1lU2VsZWN0b3IgPSBNZXNzYWdlU2VydmljZS5nZXQoJ3Jlc3VtZXNlbGVjdG9yX2luZm8nKS5tZXNzYWdlO1xuICAgICAgICAgICAgLy9UT0RPIGdldCBzZWN0aW9ucyBhY2NvcmRpbmcgdG8gdXNlciByZXN1bWVcblxuICAgICAgICAgICAgdmFyIHNlY3Rpb25zID0gW1xuICAgICAgICAgICAgICAgIHthbGlhczpcIkV4cGVyaWVuY2lhXCIsbGluazpcImV4cGVyaWVuY2VcIn0sXG4gICAgICAgICAgICAgICAge2FsaWFzOlwiRXN0dWRpb3NcIixsaW5rOlwic3R1ZHlcIn0sXG4gICAgICAgICAgICAgICAge2FsaWFzOlwiSGFiaWxpZGFkZXMgLyBDb25vY2ltaWVudG9zXCIsbGluazpcInNraWxsc1wifSxcbiAgICAgICAgICAgICAgICB7YWxpYXM6XCJJZGlvbWFzXCIsbGluazpcImxhbmd1YWdlc1wifSxcbiAgICAgICAgICAgICAgICB7YWxpYXM6XCJJbnRlcmVzZXMgUHJvZmVzaW9uYWxlc1wiLGxpbms6XCJwZXJzb25hbFwifVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICRzY29wZS5zZWN0aW9ucyA9IHNlY3Rpb25zO1xuXG5cbiAgICAgICAgfVxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjb250ZW50U2VsZWN0b3I7IiwidmFyIHNlY3Rpb25zRGlyZWN0aXZlID0gZnVuY3Rpb24oUmVzdW1lKXtcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZW1wbGF0ZVVybDpcIi4uLy4uL2pzL2FkbWluL2FuZ3VsYXIvdGVtcGxhdGVzL3Jlc3VtZS9zZWN0aW9ucy5odG1sXCIsXG4gICAgICAgIHJlc3RyaWN0OlwiRUFcIixcbiAgICAgICAgc2NvcGU6e30sXG4gICAgICAgIGNvbnRyb2xsZXI6ZnVuY3Rpb24oJHNjb3BlLCRyb290U2NvcGUpe1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJ3Jlc3VtZUNoYW5nZScsZnVuY3Rpb24oZXZlbnQsYXJncykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJncy5yZXN1bWUgIT09IFwidW5kZWZpbmVkXCIpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdW1lID0gUmVzdW1lLiRmaW5kKGFyZ3MucmVzdW1lLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlc3VtZSA9IHJlc3VtZS4kcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgbGluazpmdW5jdGlvbihzY29wZSxlbGVtZW50KXtcbiAgICAgICAgICAgIC8vJChlbGVtZW50KS5lZmZlY3QoXCJoaWdobGlnaHRcIiwge30sIDMwMDApO1xuICAgICAgICB9XG4gICAgfVxuXG59XG5tb2R1bGUuZXhwb3J0cyA9IHNlY3Rpb25zRGlyZWN0aXZlO1xuIiwidmFyIHNraWxsRGlyZWN0aXZlID0gZnVuY3Rpb24oTWVzc2FnZVNlcnZpY2UsU2tpbGwsJHRpbWVvdXQsSGVscGVyKXtcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZW1wbGF0ZVVybDpcIi4uLy4uL2pzL2FkbWluL2FuZ3VsYXIvdGVtcGxhdGVzL3Jlc3VtZS9za2lsbHMuaHRtbFwiLFxuICAgICAgICByZXN0cmljdDpcIkVBXCIsXG4gICAgICAgIHNjb3BlOnt9LFxuICAgICAgICBjb250cm9sbGVyOmZ1bmN0aW9uKCRzY29wZSwkcm9vdFNjb3BlKSB7XG4gICAgICAgICAgICAkc2NvcGUuY2xvc2VGb3JtID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgSGVscGVyLmVuYWJsZUZvcm0oJHNjb3BlLGZhbHNlKTtcbiAgICAgICAgICAgICRyb290U2NvcGUuJG9uKCdyZXN1bWVDaGFuZ2UnLGZ1bmN0aW9uKGV2ZW50LGFyZ3Mpe1xuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBhcmdzLnJlc3VtZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdW1lSWQgPSBhcmdzLnJlc3VtZS5pZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNraWxscyA9IFNraWxsLiRzZWFyY2goe3Jlc3VtZV9pZDogcmVzdW1lSWR9KS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNraWxscyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnNraWxscy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldE5vSXRlbXNJbmZvTWVzc2FnZSgkc2NvcGUsIFwiIGhhYmlsaWRhZGVzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLiBQdWxzYSBlbCBib3TDs24gTnVldmEgcGFyYSBjcmVhciB1bmFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5uZXdTa2lsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2tpbGwgPSBTa2lsbC4kYnVpbGQoe3Jlc3VtZV9pZDogcmVzdW1lSWR9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5za2lsbCA9IHNraWxsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXBkYXRlU2tpbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpbGwuJHNhdmUoKS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2tpbGxzLiRyZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5za2lsbEZvcm0uJHJlc2V0Rm9ybSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lZGl0U2tpbGwgPSBmdW5jdGlvbiAoc2tpbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5lbmFibGVGb3JtKCRzY29wZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2tpbGwgPSBza2lsbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZVNraWxsID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpbGwuJHNhdmUoKS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2tpbGxzLiRyZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5za2lsbEZvcm0uJHJlc2V0Rm9ybSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZW5hYmxlRm9ybSgkc2NvcGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAvL2RlbGV0ZVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVtb3ZlU2tpbGwgPSBmdW5jdGlvbiAoc2tpbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5za2lsbCA9IHNraWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmZpcm1hdGlvbiA9IE1lc3NhZ2VTZXJ2aWNlLnNldENvbmZpcm1EZWxldGVNZXNzYWdlKFwiIGhhYmlsaWRhZFwiLCBcIiBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlybWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpbGwuJGRlc3Ryb3koKS4kdGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vY2hhbmdlIHN0YXR1c1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hhbmdlU3RhdHVzID0gZnVuY3Rpb24gKCRldmVudCwgc2tpbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGVja2JveCA9ICRldmVudC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gKGNoZWNrYm94LmNoZWNrZWQgPyB0cnVlIDogZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBza2lsbC5zdGF0dXMgPSBhY3Rpb247XG4gICAgICAgICAgICAgICAgICAgICAgICBza2lsbC4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNraWxscy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cblxuXG5cbiAgICAgICAgfVxuICAgIH1cblxufVxubW9kdWxlLmV4cG9ydHMgPSBza2lsbERpcmVjdGl2ZTtcbiIsInZhciBzYWxlYWJsZUJhc2ljID0gZnVuY3Rpb24oU2FsZWFibGVTZXJ2aWNlKXtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDpcIkVBXCIsXG4gICAgICAgIHRlbXBsYXRlVXJsOlwiLi4vLi4vanMvYWRtaW4vYW5ndWxhci90ZW1wbGF0ZXMvc2FsZWFibGVfYmFzaWMuaHRtbFwiLFxuICAgICAgICByZXBsYWNlOnRydWUsXG4gICAgICAgIGNvbnRyb2xsZXI6XCJzYWxlYWJsZUJhc2ljQ3RybFwiLFxuICAgICAgICBzY29wZTp7fVxuXG4gICAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBzYWxlYWJsZUJhc2ljOyIsInZhciBzYWxlYWJsZURldGFpbHMgPSBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSwkY29tcGlsZSwkcm9vdFNjb3BlKXtcbiAgICByZXR1cm4ge1xuICAgICAgICB0cmFuc2NsdWRlOiAnZWxlbWVudCcgICAgLFxuICAgICAgICByZXN0cmljdDpcIkVBXCIsXG4gICAgICAgIHRlbXBsYXRlVXJsOlwiLi4vLi4vanMvYWRtaW4vYW5ndWxhci90ZW1wbGF0ZXMvc2FsZWFibGVfZGV0YWlscy5odG1sXCIsXG4gICAgICAgIHJlcGxhY2U6dHJ1ZSxcblxuICAgICAgICBjb250cm9sbGVyOlwiU2FsZWFibGVEZXRhaWxDdHJsXCIsXG4gICAgICAgIGxpbms6ZnVuY3Rpb24oc2NvcGUsJGVsZW1lbnQsJGF0dHJzLCRjdHJsLHRyYW5zY2x1ZGUpe1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oXCJuZXdCYXNpY0RldGFpbFwiLGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgJCgnI3RhYnNmIGFbaHJlZj1cIiNwaWxsdGFiMVwiXScpLnRhYignc2hvdycpO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICB9XG4gICAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBzYWxlYWJsZURldGFpbHM7IiwidmFyIHNhbGVhYmxlQmFzaWMgPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OlwiRUFcIixcbiAgICAgICAgdGVtcGxhdGVVcmw6XCIuLi8uLi9qcy9hZG1pbi9hbmd1bGFyL3RlbXBsYXRlcy9zYWxlYWJsZV9kZXRhaWxzX2xpc3QuaHRtbFwiLFxuICAgICAgICByZXBsYWNlOnRydWUsXG4gICAgICAgIHNjb3BlOntzYWxlYWJsZTpcIj1cIn0sXG4gICAgICAgIGNvbnRyb2xsZXI6XCJzYWxlYWJsZUFsbERldGFpbHNDdHJsXCJcblxuICAgIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gc2FsZWFibGVCYXNpYzsiLCJ2YXIgc2FsZWFibGVQcmljZXMgPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OlwiRUFcIixcbiAgICAgICAgdGVtcGxhdGVVcmw6XCIuLi8uLi9qcy9hZG1pbi9hbmd1bGFyL3RlbXBsYXRlcy9zYWxlYWJsZV9wcmljZXNfbGlzdC5odG1sXCIsXG4gICAgICAgIHJlcGxhY2U6dHJ1ZSxcbiAgICAgICAgc2NvcGU6e3NhbGVhYmxlOlwiPVwifSxcbiAgICAgICAgY29udHJvbGxlcjpcInNhbGVhYmxlUHJpY2VDdHJsXCJcblxuICAgIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gc2FsZWFibGVQcmljZXMiLCJcbnZhciBob21lQ29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSxVc2VyU2VydmljZSxVc2VyQ29udGVudFR5cGUpe1xuICAgIC8vY29uc29sZS5sb2coJHNjb3BlKTtcbiAgICAkc2NvcGUuc2hvd0FsZXJ0ID0gdHJ1ZTtcbiAgICAkc2NvcGUubm9Qcm9maWxlTXNnZSA9ICdFc3RlIGVzIHR1IHByaW1lcmEgc2VzacOzbiBlbiBlc3RlIHBhbmVsIGRlIGNvbnRyb2wuICcrXG4gICAgJ1BvciBmYXZvciwgYSBjb250aW51YWNpw7NuIGNvbXBsZXRhIHR1cyBkYXRvcyBwZXJzb25hbGVzLicrXG4gICAgICAgICdTaSBubyBkZXNlYXMgYWN0dWFsaXphciB0dXMgZGF0b3MsIHB1ZWRlcyBoYWNlcmxvIGVuIG90cm8gbW9tZW50byBkZXNkZSBbUGVyZmlsXSB5JytcbiAgICAnY29udGludWFyIGNvbiBsYXMgb3RyYXMgb3BjaW9uZXMgZGUgZXN0ZSBwYW5lbCBkZSBjb250cm9sLic7XG5cblxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gaG9tZUNvbnRyb2xsZXI7IiwidmFyIHJlc3VtZUNvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsJHJvb3RTY29wZSxSZXN1bWVIZWxwZXIsTWVzc2FnZVNlcnZpY2Upe1xuICAgIFJlc3VtZUhlbHBlci5kcm9wRG93bkxpc3QoJy9yZXN1bWVfZHJvcF9saXN0Jywkc2NvcGUpO1xuICAgIFJlc3VtZUhlbHBlci5nZXRSZXN1bWUoJHNjb3BlLCRyb290U2NvcGUsJy9wdWJsaXNoZWRyZXN1bWUnKTtcblxuXG5cbiAgICAkcm9vdFNjb3BlLiRvbihcInVwZGF0ZVJlc3VtZUxpc3RcIixmdW5jdGlvbigpe1xuICAgICAgICBSZXN1bWVIZWxwZXIuZHJvcERvd25MaXN0KCcvcmVzdW1lX2Ryb3BfbGlzdCcsJHNjb3BlKTtcbiAgICB9KTtcblxuICAgICRzY29wZS5nZXRSZXN1bWUgPSBmdW5jdGlvbihpZCl7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgIHJlc3VtZTp7XG4gICAgICAgICAgICAgIGlkOmlkXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvL2NvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KFwicmVzdW1lQ2hhbmdlXCIsZGF0YSk7XG4gICAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVzdW1lQ29udHJvbGxlcjtcbiIsInZhciBzYWxlYWJsZUFsbERldGFpbHMgPSBmdW5jdGlvbigkc2NvcGUsJHJvb3RTY29wZSxTYWxlYWJsZURldGFpbHNTZXJ2aWNlLE1lc3NhZ2VTZXJ2aWNlLEZpbGVQcm9jZXNzb3Ipe1xuICAgICRzY29wZS5vbkZpbGVTZWxlY3QgPSBmdW5jdGlvbigkZmlsZXMpIHtcbiAgICAgICAgJHNjb3BlLmZpbGVzID0gJGZpbGVzO1xuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuZmlsZXMpO1xuICAgIH07XG5cblxuICAgIC8qdmFyIHJlc2V0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJHNjb3BlLnNhbGVhYmxlRGV0YWlsRm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgJHNjb3BlLmRldGFpbCA9IGFuZ3VsYXIuY29weSh7fSk7XG4gICAgfSovXG5cbiAgICB2YXIgc2FsZWFibGVfaWQgPSAkc2NvcGUuc2FsZWFibGUuaWQ7XG4gICAgdmFyIGRldGFpbHMgPSBTYWxlYWJsZURldGFpbHNTZXJ2aWNlLiRzZWFyY2goe3NhbGVhYmxlX2lkOnNhbGVhYmxlX2lkfSkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgIHZhciBpdGVtc19udW1iZXIgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgY29uc29sZS5sb2coaXRlbXNfbnVtYmVyKTtcbiAgICAgICAgaWYoaXRlbXNfbnVtYmVyPT0wKXtcbiAgICAgICAgICAgIC8vdmFyIGxpbmtUb05ldyA9IFwiLiBDcmVhIHlhIHVubyBudWV2byFcIjtcbiAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldE5vSXRlbXNJbmZvTWVzc2FnZSgkc2NvcGUsXCJkZXRhbGxlc1wiLFwiIC5DcmVhIHVubyBudWV2byFcIik7XG4gICAgICAgIH1cbiAgICB9KS4kcmVzb2x2ZSgpO1xuICAgICRzY29wZS5zYWxlYWJsZS5kZXRhaWxzID0gZGV0YWlscztcblxuICAgIHZhciBkZXRhaWwgPSBTYWxlYWJsZURldGFpbHNTZXJ2aWNlLiRidWlsZCgpO1xuICAgIGRldGFpbC5zYWxlYWJsZV9pZCA9IHNhbGVhYmxlX2lkO1xuICAgIGRldGFpbC50eXBlID0gMDtcbiAgICAkc2NvcGUuZGV0YWlsID0gZGV0YWlsO1xuXG5cbiAgICAkc2NvcGUudXBkYXRlRGV0YWlsID0gZnVuY3Rpb24oKXtcbiAgICAgICAgZGV0YWlsLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICAgICAgZGV0YWlscy4kcmVmcmVzaCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUuZWRpdERldGFpbD1mdW5jdGlvbihkZXRhaWwpe1xuICAgICAgICAvL2Rvd25sb2FkIGRldGFpbCBpY29uIHRvIGxvYWRcbiAgICAgICAgRmlsZVByb2Nlc3Nvci5kb3dubG9hZCgkc2NvcGUsJy9zYWxlYWJsZWRldGFpbC8nK2RldGFpbC5pZCsnL2ljb24nKTtcbiAgICAgICAgLy8kc2NvcGUuZGVzY3JpcHRpdmVJY29uID0gXCJcIjtcbiAgICAgICAgJHNjb3BlLnNob3dEZXRhaWxGb3JtID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLmRldGFpbCA9IGRldGFpbDtcbiAgICAgICAgJHNjb3BlLnVwZGF0ZURldGFpbCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBkZXRhaWwuJHNhdmUoKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJG1ldGFkYXRhLm1ldGE7XG4gICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSxtZXRhKTtcbiAgICAgICAgICAgICAgICAvL3VwbG9hZCBmaWxlXG4gICAgICAgICAgICAgICAgRmlsZVByb2Nlc3Nvci51cGxvYWQoJHNjb3BlLCcvdXBsb2FkU2FsZWFibGVEZXRhaWxJY29uJyxkYXRhLmlkKTtcblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUubmV3RGV0YWlsID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJHNjb3BlLnNob3dEZXRhaWxGb3JtID0gdHJ1ZTtcblxuICAgICAgICAvLyRzY29wZS5zYWxlYWJsZURldGFpbEZvcm0uJHNldFByaXN0aW5lKCk7XG4gICAgICAgIHZhciBkZXRhaWwgPSBTYWxlYWJsZURldGFpbHNTZXJ2aWNlLiRidWlsZCgpO1xuICAgICAgICBkZXRhaWwuc2FsZWFibGVfaWQgPSBzYWxlYWJsZV9pZDtcbiAgICAgICAgZGV0YWlsLnR5cGUgPSAwO1xuICAgICAgICAkc2NvcGUuZGV0YWlsID0gZGV0YWlsO1xuXG4gICAgICAgICRzY29wZS51cGRhdGVEZXRhaWwgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgZGV0YWlsLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsbWV0YSk7XG4gICAgICAgICAgICAgICAgZGV0YWlscy4kcmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIEZpbGVQcm9jZXNzb3IudXBsb2FkKCRzY29wZSwnL3VwbG9hZFNhbGVhYmxlRGV0YWlsSWNvbicsZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgLy8kc2NvcGUuc2hvd0RldGFpbEZvcm0gPSBmYWxzZTtcblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUucmVtb3ZlRGV0YWlsID0gZnVuY3Rpb24oZGV0YWlsKXtcbiAgICAgICAgdmFyIGNvbmZpcm1hdGlvbiA9IE1lc3NhZ2VTZXJ2aWNlLnNldENvbmZpcm1EZWxldGVNZXNzYWdlKFwiZGV0YWxsZVwiLFwiIFwiKTtcbiAgICAgICAgaWYoY29uZmlybWF0aW9uKXtcbiAgICAgICAgICAgIGRldGFpbC4kZGVzdHJveSgpLiR0aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICAgICAgICAgIC8vJHNjb3BlLnNhbGVhYmxlRGV0YWlsRm9ybS4kc2V0UHJpc3RpbmUoKTtcblxuICAgICAgICAgICAgICAgIHZhciBkZXRhaWwgPSBTYWxlYWJsZURldGFpbHNTZXJ2aWNlLiRidWlsZCgpO1xuICAgICAgICAgICAgICAgIGRldGFpbC5zYWxlYWJsZV9pZCA9IHNhbGVhYmxlX2lkO1xuICAgICAgICAgICAgICAgIGRldGFpbC50eXBlID0gMDtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGV0YWlsID0gZGV0YWlsO1xuICAgICAgICAgICAgICAgICRzY29wZS51cGRhdGVEZXRhaWwgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBkZXRhaWwuJHNhdmUoKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzLiRyZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyRyb290U2NvcGUuJGVtaXQoJ3NhbGVhYmxlVXBkYXRlZCcpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxuXG5cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNhbGVhYmxlQWxsRGV0YWlscztcbiIsInZhciBzYWxlYWJsZUNvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsJHJvb3RTY29wZSwkdGltZW91dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTYWxlYWJsZVNlcnZpY2UsTWVzc2FnZVNlcnZpY2Upe1xuICAgICRzY29wZS5tYXN0ZXIgPSB7fTtcblxuICAgIHZhciBzYWxlYWJsZXMgPSBTYWxlYWJsZVNlcnZpY2UuJHNlYXJjaCgpLiR0aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAvL2NvbnNvbGUubG9nKGRhdGEubGVuZ3RoKTtcbiAgICAgICAgdmFyIGl0ZW1zX251bWJlciA9IGRhdGEubGVuZ3RoO1xuICAgICAgICBpZihpdGVtc19udW1iZXI9PTApe1xuICAgICAgICAgICAgdmFyIGxpbmtUb05ldyA9IFwiLiBDcmVhIHlhIHVubyBudWV2byFcIjtcbiAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldE5vSXRlbXNJbmZvTWVzc2FnZSgkc2NvcGUsXCJzZXJ2aWNpb3MgbyBwcm9kdWN0b3NcIixsaW5rVG9OZXcpO1xuXG4gICAgICAgIH0vKmVsc2V7XG4gICAgICAgICAgICAkc2NvcGUuc2FsZWFibGVzID0gZGF0YTtcblxuICAgICAgICB9Ki9cbiAgICB9KTtcblxuICAgICRzY29wZS5zYWxlYWJsZXMgPSBzYWxlYWJsZXM7XG5cbiAgICAkc2NvcGUucmVtb3ZlU2FsZWFibGUgPSBmdW5jdGlvbihzYWxlYWJsZSl7XG4gICAgICAgIHZhciBjb25maXJtYXRpb24gPSBNZXNzYWdlU2VydmljZS5zZXRDb25maXJtRGVsZXRlTWVzc2FnZShcIiBzZXJ2aWNpbyBvIHByb2R1Y3RvXCIsXCIgU2UgZGVzdHJ1aXLDoW4gdGFtYmnDqW4gdG9kb3Mgc3VzIGRldGFsbGVzLlwiKTtcbiAgICAgICAgaWYoY29uZmlybWF0aW9uKXtcbiAgICAgICAgICAgIHNhbGVhYmxlLiRkZXN0cm95KCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRyZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsbWV0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vRGV0YWlsc1xuICAgIC8vbmV3OiBjcmVhdGUgYSBuZXcgZGV0YWlscyBcIndpemFyZFwiIGluc3RhbmNlXG4gICAgJHNjb3BlLm5ld0RldGFpbHMgPSBmdW5jdGlvbigpe1xuICAgICAgICAkc2NvcGUuc2hvd0RldGFpbHMgPSB0cnVlO1xuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ25ld0RldGFpbHMnKTtcbiAgICB9XG4gICAgLy9lZGl0OiB3aXphcmQsIGVkaXQgZmFzaGlvblxuICAgICRzY29wZS5lZGl0RGV0YWlscyA9IGZ1bmN0aW9uKHNhbGVhYmxlKXtcbiAgICAgICAgJHNjb3BlLnNob3dEZXRhaWxzID0gdHJ1ZTtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdlZGl0RGV0YWlscycsc2FsZWFibGUpO1xuICAgIH1cblxuICAgIC8vY2xvc2Ugd2l6YXJkXG4gICAgJHNjb3BlLmNsb3NlV2l6YXJkID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJHNjb3BlLnNob3dEZXRhaWxzID0gZmFsc2U7XG4gICAgICAgIGNvbnNvbGUubG9nKFwieFwiKTtcbiAgICB9XG5cblxufVxubW9kdWxlLmV4cG9ydHMgPSBzYWxlYWJsZUNvbnRyb2xsZXI7IiwidmFyIHNhbGVhYmxlRGV0YWlsQ3RybCA9IGZ1bmN0aW9uKCRzY29wZSwkcm9vdFNjb3BlLFNhbGVhYmxlU2VydmljZSxNZXNzYWdlU2VydmljZSwkZWxlbWVudCwkY29tcGlsZSl7XG5cbiAgICAkcm9vdFNjb3BlLiRvbignbmV3RGV0YWlscycsZnVuY3Rpb24oKXtcblxuICAgICAgICAkc2NvcGUuc2FsZWFibGUgPSB7fTtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCduZXdCYXNpY0RldGFpbCcpO1xuICAgIH0pO1xuXG4gICAgJHJvb3RTY29wZS4kb24oJ3NhbGVhYmxlQ3JlYXRlZCcsZnVuY3Rpb24oZXZlbnQsZGF0YSl7XG4gICAgICAgICRzY29wZS5zYWxlYWJsZXMuJHJlZnJlc2goKTtcbiAgICAgICAgJHNjb3BlLnNhbGVhYmxlID0gZGF0YTtcbiAgICB9KTtcbiAgICAkcm9vdFNjb3BlLiRvbignZWRpdERldGFpbHMnLGZ1bmN0aW9uKGV2ZW50LHNhbGVhYmxlKXtcbiAgICAgICAgJHNjb3BlLnNhbGVhYmxlID0gc2FsZWFibGU7XG4gICAgICAgICRzY29wZS5zYWxlYWJsZXMuJHJlZnJlc2goKTtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdlZGl0QmFzaWNEZXRhaWwnLHNhbGVhYmxlKTtcbiAgICB9KVxuXG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzYWxlYWJsZURldGFpbEN0cmw7XG4iLCJ2YXIgc2FsZWFibGVQcmljZXMgPSBmdW5jdGlvbigkc2NvcGUsJHJvb3RTY29wZSxTYWxlYWJsZVByaWNlU2VydmljZSxNZXNzYWdlU2VydmljZSl7XG5cbiAgICAvKnZhciByZXNldCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRzY29wZS5zYWxlYWJsZVByaWNlRm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgJHNjb3BlLnByaWNlID0gYW5ndWxhci5jb3B5KHt9KTtcbiAgICB9Ki9cblxuICAgIHZhciBzYWxlYWJsZV9pZCA9ICRzY29wZS5zYWxlYWJsZS5pZDtcbiAgICB2YXIgcHJpY2VzID0gU2FsZWFibGVQcmljZVNlcnZpY2UuJHNlYXJjaCh7c2FsZWFibGVfaWQ6c2FsZWFibGVfaWR9KS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgdmFyIGl0ZW1zX251bWJlciA9IGRhdGEubGVuZ3RoO1xuICAgICAgICBpZihpdGVtc19udW1iZXI9PTApe1xuICAgICAgICAgICAgLy92YXIgbGlua1RvTmV3ID0gXCIuIENyZWEgeWEgdW5vIG51ZXZvIVwiO1xuICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0Tm9JdGVtc0luZm9NZXNzYWdlKCRzY29wZSxcInByZWNpb3NcIixcIiAuQ3JlYSB1bm8gbnVldm8hXCIpO1xuICAgICAgICB9XG4gICAgfSkuJHJlc29sdmUoKTtcblxuICAgICRzY29wZS5zYWxlYWJsZS5wcmljZXMgPSBwcmljZXM7XG5cbiAgICB2YXIgcHJpY2UgPSBTYWxlYWJsZVByaWNlU2VydmljZS4kYnVpbGQoKTtcbiAgICBwcmljZS5zYWxlYWJsZV9pZCA9IHNhbGVhYmxlX2lkO1xuICAgICRzY29wZS5wcmljZSA9IHByaWNlO1xuXG4gICAgJHNjb3BlLnVwZGF0ZVByaWNlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgcHJpY2UuJHNhdmUoKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsbWV0YSk7XG4gICAgICAgICAgICBwcmljZXMuJHJlZnJlc2goKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmVkaXRQcmljZT1mdW5jdGlvbihwcmljZSl7XG4gICAgICAgICRzY29wZS5zaG93UHJpY2VGb3JtID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLnByaWNlID0gcHJpY2U7XG4gICAgICAgICRzY29wZS51cGRhdGVQcmljZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBwcmljZS4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUubmV3UHJpY2UgPSBmdW5jdGlvbigpe1xuICAgICAgICAkc2NvcGUuc2hvd1ByaWNlRm9ybSA9IHRydWU7XG4gICAgICAgIC8vJHNjb3BlLnNhbGVhYmxlUHJpY2VGb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICB2YXIgcHJpY2UgPSBTYWxlYWJsZVByaWNlU2VydmljZS4kYnVpbGQoKTtcbiAgICAgICAgcHJpY2Uuc2FsZWFibGVfaWQgPSBzYWxlYWJsZV9pZDtcbiAgICAgICAgJHNjb3BlLnByaWNlID0gcHJpY2U7XG5cbiAgICAgICAgJHNjb3BlLnVwZGF0ZVByaWNlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHByaWNlLiRzYXZlKCkuJHRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsbWV0YSk7XG4gICAgICAgICAgICAgICAgcHJpY2VzLiRyZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dQcmljZUZvcm0gPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLnJlbW92ZVByaWNlID0gZnVuY3Rpb24ocHJpY2Upe1xuICAgICAgICB2YXIgY29uZmlybWF0aW9uID0gTWVzc2FnZVNlcnZpY2Uuc2V0Q29uZmlybURlbGV0ZU1lc3NhZ2UoXCIgcHJlY2lvXCIsXCIgXCIpO1xuICAgICAgICBpZihjb25maXJtYXRpb24pe1xuICAgICAgICAgICAgcHJpY2UuJGRlc3Ryb3koKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEuJHJlc3BvbnNlLmRhdGE7XG5cbiAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICAgICAgICAgIC8vcyRzY29wZS5zYWxlYWJsZVByaWNlRm9ybS4kc2V0UHJpc3RpbmUoKTtcblxuICAgICAgICAgICAgICAgIHZhciBwcmljZSA9IFNhbGVhYmxlUHJpY2VTZXJ2aWNlLiRidWlsZCgpO1xuICAgICAgICAgICAgICAgIHByaWNlLnNhbGVhYmxlX2lkID0gc2FsZWFibGVfaWQ7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnByaWNlID0gcHJpY2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZVByaWNlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgcHJpY2UuJHNhdmUoKS4kdGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhID0gZGF0YS4kbWV0YWRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldEFsZXJ0TWVzc2FnZSgkc2NvcGUsbWV0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmljZXMuJHJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93UHJpY2VGb3JtID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG5cblxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2FsZWFibGVQcmljZXM7XG4iLCJcbnZhciBiaW9TZXJ2aWNlID0gZnVuY3Rpb24ocmVzdG1vZCl7XG4gICAgcmV0dXJuIHJlc3Rtb2QubW9kZWwoJy9iaW8nKS5taXgoJ0RlZmF1bHRQYWNrZXInLHtcbiAgICAgJGNvbmZpZzp7anNvbk1ldGE6ICcuJ31cblxuICAgICB9KTtcbn1cbm1vZHVsZS5leHBvcnRzID0gYmlvU2VydmljZTsiLCJ2YXIgZWR1Y2F0aW9uU2VydmljZSA9IGZ1bmN0aW9uKHJlc3Rtb2Qpe1xuICAgIHJldHVybiByZXN0bW9kLm1vZGVsKCcvZWR1Y2F0aW9uJykubWl4KCdEZWZhdWx0UGFja2VyJyx7XG4gICAgICAgICRjb25maWc6e2pzb25NZXRhOiAnLid9XG4gICAgfSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGVkdWNhdGlvblNlcnZpY2U7IiwidmFyIGV4cGVyaWVuY2VTZXJ2aWNlID0gZnVuY3Rpb24ocmVzdG1vZCl7XG4gICAgcmV0dXJuIHJlc3Rtb2QubW9kZWwoJy9leHBlcmllbmNlJykubWl4KCdEZWZhdWx0UGFja2VyJyx7XG4gICAgICAgICRjb25maWc6e2pzb25NZXRhOiAnLid9XG4gICAgfSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGV4cGVyaWVuY2VTZXJ2aWNlOyIsInZhciBmaWxlUHJvY2Vzc29yID0gZnVuY3Rpb24oJHVwbG9hZCwkaHR0cCxNZXNzYWdlU2VydmljZSl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdXBsb2FkOmZ1bmN0aW9uKHNjb3BlLHBhdGgsZGF0YSl7XG5cbiAgICAgICAgICAgICAgICB2YXIgZmlsZXMgPSBzY29wZS5maWxlc1swXTtcbiAgICAgICAgICAgICAgICB2YXIgbnVtYmVyT2ZGaWxlcyA9IHNjb3BlLmZpbGVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZihudW1iZXJPZkZpbGVzID4gMSAmJiBudW1iZXJPZkZpbGVzIDwgOCkge1xuICAgICAgICAgICAgICAgICAgICBmaWxlcyA9IHNjb3BlLmZpbGVzO1xuICAgICAgICAgICAgICAgIH1lbHNlIGlmKG51bWJlck9mRmlsZXMgPiA3KXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJubyBjYXJndWUgYXNpaWlpaVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9mb3IgKHZhciBpID0gMDsgaSA8IHNjb3BlLmZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgLy92YXIgZmlsZSA9IHNjb3BlLmZpbGVzW2ldO1xuICAgICAgICAgICAgICAgIHZhciBmaWxlID0gc2NvcGUuZmlsZXM7XG4gICAgICAgICAgICAgICAgc2NvcGUudXBsb2FkID0gJHVwbG9hZC51cGxvYWQoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6IHBhdGgsIC8vdXBsb2FkLnBocCBzY3JpcHQsIG5vZGUuanMgcm91dGUsIG9yIHNlcnZsZXQgdXJsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLCAvL29yICdQVVQnLFxuICAgICAgICAgICAgICAgICAgICBmaWxlOiBmaWxlcyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICAgICAgICAgIH0pLnByb2dyZXNzKGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICBzY29wZS5nZXRQZXJjZW50YWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KDEwMC4wICogZXZ0LmxvYWRlZCAvIGV2dC50b3RhbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuZGVzY3JpcHRpdmVJY29uID0gZGF0YS5pbWc7XG4gICAgICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNldFNlcnZlclZhbGlkYXRpb25NZXNzYWdlKHNjb3BlKTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuZXJyb3JzID0gZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIH0sXG4gICAgICAgIGRvd25sb2FkOmZ1bmN0aW9uKHNjb3BlLHBhdGgpe1xuICAgICAgICAgICAgICAgICRodHRwLmdldChwYXRoKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgICAgICBzY29wZS5kZXNjcmlwdGl2ZUljb24gPSBkYXRhLmltZztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG5cbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGZpbGVQcm9jZXNzb3I7IiwidmFyIG51bWJlckZvcm1hdCA9IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKF92YWx1ZSkge1xuICAgICAgICB2YXIgbnVtYmVyRm9ybWF0dGVkID0gcGFyc2VGbG9hdChfdmFsdWUpO1xuICAgICAgICByZXR1cm4gbnVtYmVyRm9ybWF0dGVkO1xuICAgIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gbnVtYmVyRm9ybWF0O1xuIiwidmFyIGhlbHBlclNlcnZpY2UgPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICAgIG1vbnRoczpmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIG1vbnRocyA9IFtcImVuZXJvXCIsXCJmZWJyZXJvXCIsXCJtYXJ6b1wiLFwiYWJyaWxcIixcbiAgICAgICAgICAgICAgICBcIm1heW9cIixcImp1bmlvXCIsXCJqdWxpb1wiLFwiYWdvc3RvXCIsXG4gICAgICAgICAgICAgICAgXCJzZXB0aWVtYnJlXCIsXCJvY3R1YnJlXCIsXCJub3ZpZW1icmVcIixcImRpY2llbWJyZVwiXTtcbiAgICAgICAgICAgIHJldHVybiBtb250aHM7XG4gICAgICAgIH0sXG4gICAgICAgIGVuYWJsZUZvcm06ZnVuY3Rpb24oc2NvcGUsc3RhdHVzKXtcbiAgICAgICAgICAgIGlmKHN0YXR1cyl7XG4gICAgICAgICAgICAgICAgc2NvcGUuZ3JpZFNob3duID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc2NvcGUuZm9ybVNob3duID0gdHJ1ZTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHNjb3BlLmdyaWRTaG93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2NvcGUuZm9ybVNob3duID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdldENoZWNrQnV0dG9uU3RhdHVzOmZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgICAgIHZhciBjaGVja2JveCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgIHZhciBhY3Rpb24gPSAoY2hlY2tib3guY2hlY2tlZCA/IHRydWU6IGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybiBhY3Rpb247XG4gICAgICAgIH1cbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGhlbHBlclNlcnZpY2U7IiwidmFyIGludGVyZXN0U2VydmljZSA9IGZ1bmN0aW9uKHJlc3Rtb2Qpe1xuICAgIHJldHVybiByZXN0bW9kLm1vZGVsKCcvaW50ZXJlc3QnKS5taXgoJ0RlZmF1bHRQYWNrZXInLHtcbiAgICAgICAgJGNvbmZpZzp7anNvbk1ldGE6ICcuJ31cbiAgICB9KTtcbn1cbm1vZHVsZS5leHBvcnRzID0gaW50ZXJlc3RTZXJ2aWNlOyIsInZhciBsYW5ndWFnZVNlcnZpY2UgPSBmdW5jdGlvbihyZXN0bW9kKXtcbiAgICByZXR1cm4gcmVzdG1vZC5tb2RlbCgnL2xhbmd1YWdlJykubWl4KCdEZWZhdWx0UGFja2VyJyx7XG4gICAgICAgICRjb25maWc6e2pzb25NZXRhOiAnLid9XG4gICAgfSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGxhbmd1YWdlU2VydmljZTsiLCJ2YXIgbWVzc2FnZVNlcnZpY2UgPSBmdW5jdGlvbihNZXNzYWdlcywkdGltZW91dCl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0OmZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gTWVzc2FnZXMuZmlsdGVyKGZ1bmN0aW9uKCBvYmogKSB7XG4gICAgICAgICAgICAvLyBjb2VyY2UgYm90aCBvYmouaWQgYW5kIGlkIHRvIG51bWJlcnNcbiAgICAgICAgICAgIC8vIGZvciB2YWwgJiB0eXBlIGNvbXBhcmlzb25cbiAgICAgICAgICAgICAgICAvL3JldHVybiArb2JqLm5hbWUgPT09ICtuYW1lO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmoubmFtZSA9PT0gbmFtZTtcbiAgICAgICAgICAgIH0pWyAwIF07XG4gICAgICAgIH0sXG4gICAgICAgIHNldEFsZXJ0TWVzc2FnZTpmdW5jdGlvbihzY29wZSxkYXRhKXtcbiAgICAgICAgICAgIHNjb3BlLlNob3dSZXN1bHRBbGVydCA9IHRydWU7XG4gICAgICAgICAgICBzY29wZS5yZXN1bHQgPSBkYXRhO1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBzY29wZS5TaG93UmVzdWx0QWxlcnQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0sNDAwMCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFNlcnZlclZhbGlkYXRpb25NZXNzYWdlOmZ1bmN0aW9uKHNjb3BlKXtcbiAgICAgICAgICAgIHNjb3BlLlNob3dTZXJ2ZXJFcnJvcnMgPSB0cnVlO1xuICAgICAgICAgICAgc2NvcGUucmVzdWx0ID0gXCJMb3MgZGF0b3Mgbm8gc2UgcHVkaWVyb24gZ3VhcmRhclwiK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIgZGViaWRvIGEgbG9zIHNpZ3VpZW50ZXMgZXJyb3Jlcy4gUG9yIGZhdm9yIGNvcnLDrWdlbG9zLlwiO1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBzY29wZS5TaG93U2VydmVyRXJyb3JzID0gZmFsc2U7XG4gICAgICAgICAgICB9LDUwMDApO1xuICAgICAgICB9LFxuICAgICAgICBzZXROb0l0ZW1zSW5mb01lc3NhZ2U6ZnVuY3Rpb24oc2NvcGUsZGF0YXR5cGUsYWRkaXRpb25hbCl7XG4gICAgICAgICAgICBzY29wZS5zaG93Tm9JdGVtc0FsZXJ0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHNjb3BlLnJlc3VsdCA9IFwiTm8gc2UgaGFuIGVuY29udHJhZG8gXCIrZGF0YXR5cGUrYWRkaXRpb25hbDtcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgc2NvcGUuc2hvd05vSXRlbXNBbGVydCA9IGZhbHNlO1xuICAgICAgICAgICAgfSw4MDAwKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0Q29uZmlybURlbGV0ZU1lc3NhZ2U6ZnVuY3Rpb24oaXRlbSwgYWRkaXRpb25hbCl7XG4gICAgICAgICAgICByZXR1cm4gY29uZmlybShcIlJlYWxtZW50ZSBkZXNlYXMgZWxpbWluYXIgZXN0ZS9hXCIraXRlbStcIj8uIFwiK2FkZGl0aW9uYWwrXCJcIik7XG4gICAgICAgIH1cblxuICAgIH1cbn07XG5tb2R1bGUuZXhwb3J0cyA9IG1lc3NhZ2VTZXJ2aWNlO1xuIiwidmFyIG5ld1Bhc3N3b3JkID0gZnVuY3Rpb24oJGh0dHApe1xuICAgIC8vJGh0dHAucG9zdCgpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHVwZGF0ZVBhc3N3b3JkOmZ1bmN0aW9uKHVzZXJJZCxkYXRhKXtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYWRtaW4vbmV3cGFzc3dvcmQvJyt1c2VySWQsIGRhdGEpO1xuICAgICAgICB9XG4gICAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IG5ld1Bhc3N3b3JkOyIsIlxudmFyIHByb2ZpbGVTZXJ2aWNlID0gZnVuY3Rpb24ocmVzdG1vZCl7XG4gICAgcmV0dXJuIHJlc3Rtb2QubW9kZWwoJy9wcm9maWxlJykubWl4KCdEZWZhdWx0UGFja2VyJyx7XG4gICAgICAgICRjb25maWc6e2pzb25NZXRhOiAnLid9XG4gICAgfSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IHByb2ZpbGVTZXJ2aWNlO1xuIiwidmFyIHJlc3VtZUhlbHBlciA9IGZ1bmN0aW9uKCRodHRwLE1lc3NhZ2VTZXJ2aWNlKXtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGRyb3BEb3duTGlzdDpmdW5jdGlvbihwYXRoLHNjb3BlKXtcbiAgICAgICAgICAgICRodHRwLmdldChwYXRoKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIHNjb3BlLnJlc3VtZXMgPSBkYXRhLnJlc3VtZXM7XG4gICAgICAgICAgICAgICAgc2NvcGUucmVzdW1lID0gc2NvcGUucmVzdW1lc1s1XTtcbiAgICAgICAgICAgIH0pLmVycm9yKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFJlc3VtZTpmdW5jdGlvbihzY29wZSxyb290U2NvcGUscGF0aCl7XG4gICAgICAgICAgICAkaHR0cC5nZXQocGF0aCkudGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdW1lID0gZGF0YS5kYXRhLnJlc3VtZTtcblxuICAgICAgICAgICAgICAgIGlmKHJlc3VtZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByb290U2NvcGUuJGVtaXQoXCJub1Jlc3VtZUZvdW5kXCIpO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICByb290U2NvcGUuJGVtaXQoXCJyZXN1bWVDaGFuZ2VcIiwgZGF0YS5kYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9LFxuICAgICAgICBwdWJsaXNoUmVzdW1lOmZ1bmN0aW9uKHNjb3BlLHJvb3RTY29wZSxwYXRoKXtcbiAgICAgICAgICAgICRodHRwLnBvc3QocGF0aCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2Uoc2NvcGUsbWV0YSk7XG4gICAgICAgICAgICB9KS5lcnJvcigpO1xuXG4gICAgICAgIH0sXG4gICAgICAgIGNsb25lUmVzdW1lOmZ1bmN0aW9uKHNjb3BlLHJvb3RTY29wZSxwYXRoKXtcbiAgICAgICAgICAgICRodHRwLnBvc3QocGF0aCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICByb290U2NvcGUuJGVtaXQoXCJyZXN1bWVDaGFuZ2VcIixkYXRhKTtcbiAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IGRhdGEubWV0YTtcbiAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2Uoc2NvcGUsbWV0YSk7XG5cbiAgICAgICAgICAgIH0pLmVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgLyp1bnB1Ymxpc2hSZXN1bWU6ZnVuY3Rpb24oc2NvcGUscm9vdFNjb3BlLHBhdGgpe1xuICAgICAgICAgICAgJGh0dHAucG9zdChwYXRoKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidW5wdVwiKTtcbiAgICAgICAgICAgIH0pLmVycm9yKCk7XG4gICAgICAgIH0qL1xuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXN1bWVIZWxwZXI7IiwidmFyIHJlc3VtZVNlcnZpY2UgPSBmdW5jdGlvbihyZXN0bW9kKXtcbiAgICByZXR1cm4gcmVzdG1vZC5tb2RlbCgnL3Jlc3VtZScpLm1peCgnRGVmYXVsdFBhY2tlcicse1xuICAgICAgICAkY29uZmlnOntqc29uTWV0YTogJy4nfVxuICAgIH0pO1xufVxubW9kdWxlLmV4cG9ydHMgPSByZXN1bWVTZXJ2aWNlOyIsInZhciBzZWxlYWJsZURldGFpbHMgPSBmdW5jdGlvbihyZXN0bW9kKXtcbiAgICByZXR1cm4gcmVzdG1vZC5tb2RlbCgnL3NhbGVhYmxlZGV0YWlsJykubWl4KCdEZWZhdWx0UGFja2VyJyx7XG4gICAgICAgICRjb25maWc6e2pzb25NZXRhOiAnLid9XG4gICAgfSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IHNlbGVhYmxlRGV0YWlsczsiLCJ2YXIgc2VsZWFibGVQcmljZSA9IGZ1bmN0aW9uKHJlc3Rtb2Qpe1xuICAgIHJldHVybiByZXN0bW9kLm1vZGVsKCcvc2FsZWFibGVwcmljZScpLm1peCgnRGVmYXVsdFBhY2tlcicse1xuICAgICAgICAkY29uZmlnOntqc29uTWV0YTogJy4nfVxuICAgIH0pLm1peCh7XG4gICAgICAgIGFtbW91bnQ6IHtkZWNvZGU6J051bWJlckZvcm1hdCd9LFxuICAgICAgICBkaXNjb3VudDp7ZGVjb2RlOidOdW1iZXJGb3JtYXQnfVxuICAgIH0pO1xufVxubW9kdWxlLmV4cG9ydHMgPSBzZWxlYWJsZVByaWNlOyIsInZhciBzZWxlYWJsZVNlcnZpY2UgPSBmdW5jdGlvbihyZXN0bW9kKXtcbiAgICByZXR1cm4gcmVzdG1vZC5tb2RlbCgnL3NhbGVhYmxlJykubWl4KCdEZWZhdWx0UGFja2VyJyx7XG4gICAgICAgICRjb25maWc6e2pzb25NZXRhOiAnLid9XG4gICAgfSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IHNlbGVhYmxlU2VydmljZTsiLCJ2YXIgc2tpbGxTZXJ2aWNlID0gZnVuY3Rpb24ocmVzdG1vZCl7XG4gICAgcmV0dXJuIHJlc3Rtb2QubW9kZWwoJy9za2lsbCcpLm1peCgnRGVmYXVsdFBhY2tlcicse1xuICAgICAgICAkY29uZmlnOntqc29uTWV0YTogJy4nfVxuICAgIH0pO1xufVxubW9kdWxlLmV4cG9ydHMgPSBza2lsbFNlcnZpY2U7IiwidmFyIHRoZVBhY2tlciA9ICBmdW5jdGlvbigpIHtcblxuICAgIGZ1bmN0aW9uIE15UGFja2VyKF9tb2RlbCkge1xuICAgICAgICAvL3RoaXMubWV0YSA9IF9tb2RlbC4kZ2V0UHJvcGVydHkoJ2pzb25NZXRhJywgJ21ldGEnKTtcbiAgICAgICAgY29uc29sZS5sb2coX21vZGVsKTtcbiAgICAgICAgLy8geW91IGNhbiBzZXQgc29tZSBtb2RlbCBzcGVjaWZpYyBiZWhhdmlvdXIgaGVyZSwgbGlrZSB0aGUgcHJvcGVydHkgYmVpbmcgZXh0cmFjdGVkLlxuICAgIH1cblxuICAgIE15UGFja2VyLnByb3RvdHlwZSA9IHtcbiAgICAgICAgdW5QYWNrOiBmdW5jdGlvbihfcmF3RGF0YSwgX3JlY29yZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coX3Jhd0RhdGEpO1xuICAgICAgICAgICAgX3JlY29yZC4kbWV0YWRhdGEgPSBfcmF3RGF0YTsgLy8gc3RvcmUgbWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIHJlcXVlc3RcbiAgICAgICAgICAgIHJldHVybiBfcmF3RGF0YS5teVByb3A7IC8vIGV4dHJhY3QgcHJvcGVydHkgZnJvbSByZXF1ZXN0IGRhdGEuXG4gICAgICAgIH0sXG4gICAgICAgIHVuUGFja01hbnk6IGZ1bmN0aW9uKF9yYXdEYXRhLCBfY29sbGVjdGlvbikge1xuXG4gICAgICAgICAgICBfY29sbGVjdGlvbi4kbWV0YWRhdGEgPSBfcmF3RGF0YTsgLy8gc3RvcmUgbWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIHJlcXVlc3RcbiAgICAgICAgICAgIHJldHVybiBfY29sbGVjdGlvbi5teVByb3A7IC8vIGV4dHJhY3QgcHJvcGVydHkgZnJvbSByZXF1ZXN0IGRhdGEuXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIE15UGFja2VyO1xufTtcbm1vZHVsZS5leHBvcnRzID0gdGhlUGFja2VyO1xuIiwidmFyIHVzZXJDb250ZW50VHlwZSA9IGZ1bmN0aW9uKHJlc3Rtb2Qpe1xuICAgIHJldHVybiByZXN0bW9kLm1vZGVsKCcvdXNlcmNvbnRlbnR0eXBlJykubWl4KCdEZWZhdWx0UGFja2VyJyx7XG4gICAgICAgICRjb25maWc6e2pzb25NZXRhOiAnLid9XG4gICAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdXNlckNvbnRlbnRUeXBlO1xuXG5cbiIsIlxudmFyIHVzZXJTZXJ2aWNlID0gZnVuY3Rpb24ocmVzdG1vZCl7XG4gICAgcmV0dXJuIHJlc3Rtb2QubW9kZWwoJy91c2VyJykubWl4KCdEZWZhdWx0UGFja2VyJyx7XG4gICAgICAgICRjb25maWc6e2pzb25NZXRhOiAnLid9XG4gICAgfSk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IHVzZXJTZXJ2aWNlOyIsInZhciB1c2VyQ29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwkdGltZW91dCxVc2VyU2VydmljZSwgUHJvZmlsZVNlcnZpY2UsTWVzc2FnZVNlcnZpY2UsTmV3UGFzc3dvcmQpe1xuXG4gICAgdmFyIHVzZXIgPSBVc2VyU2VydmljZS4kZmluZCgwKTtcbiAgICB2YXIgcHJvZmlsZSA9IFByb2ZpbGVTZXJ2aWNlLiRmaW5kKDApO1xuICAgICRzY29wZS5wcm9maWxlID0gcHJvZmlsZS4kZmV0Y2goKTtcbiAgICAkc2NvcGUudXNlciA9IHVzZXIuJGZldGNoKCk7XG5cbiAgICAkc2NvcGUudXBkYXRlVXNlciA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgdXNlci4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSxtZXRhKTtcbiAgICAgICAgfSxmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICRzY29wZS5lcnJvcnMgPSBkYXRhLiRyZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0U2VydmVyVmFsaWRhdGlvbk1lc3NhZ2UoJHNjb3BlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLnVwZGF0ZVBhc3N3b3JkID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGNoYW5nZWRQYXNzd29yZCA9IHtcbiAgICAgICAgICBwYXNzd29yZDokc2NvcGUucGFzc3dvcmRcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG5ld1Bhc3N3b3JkID0gTmV3UGFzc3dvcmQudXBkYXRlUGFzc3dvcmQodXNlci5pZCxjaGFuZ2VkUGFzc3dvcmQpO1xuICAgICAgICBuZXdQYXNzd29yZC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLm1ldGE7XG4gICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZXRBbGVydE1lc3NhZ2UoJHNjb3BlLG1ldGEpO1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93UGFzc3dvcmRDaGFuZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH0sNDAwMCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAkc2NvcGUudXBkYXRlUGVyc29uYWxJbmZvID0gZnVuY3Rpb24oKXtcbiAgICAgICAgcHJvZmlsZS4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSxtZXRhKTtcbiAgICAgICAgfSxmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICRzY29wZS5lcnJvcnMgPSBkYXRhLiRyZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0U2VydmVyVmFsaWRhdGlvbk1lc3NhZ2UoJHNjb3BlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICRzY29wZS51cGRhdGVTb2NpYWxJbmZvID0gZnVuY3Rpb24oKXtcbiAgICAgICAgcHJvZmlsZS4kc2F2ZSgpLiR0aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgdmFyIG1ldGEgPSBkYXRhLiRtZXRhZGF0YS5tZXRhO1xuICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0QWxlcnRNZXNzYWdlKCRzY29wZSxtZXRhKTtcbiAgICAgICAgfSxmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICRzY29wZS5lcnJvcnMgPSBkYXRhLiRyZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2V0U2VydmVyVmFsaWRhdGlvbk1lc3NhZ2UoJHNjb3BlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gdXNlckNvbnRyb2xsZXI7XG4iLCJ2YXIgc3RjX21lc3NhZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBbXG5cbiAgICAgICAge1xuICAgICAgICAgICAgXCJjb2RlXCI6IDcwMSxcbiAgICAgICAgICAgIFwibmFtZVwiOlwiY29udGVudHNlbGVjdG9yX2luZm9cIixcbiAgICAgICAgICAgIFwibWVzc2FnZVwiOiAnQWN0aXZhIGxhcyBvcGNpb25lcyBxdWUgcXVpZXJlcyBxdWUgYXBhcmV6Y2FuIGVuIHR1IHNpdGlvIFdlYi4nK1xuICAgICAgICAgICAgJ1BvciBlamVtcGxvLCBzaSBubyBlcyB0dSBvYmpldGl2byBtb3N0cmFyIFNlcnZpY2lvcyBhIHR1cyB2aXNpdGFudGVzLCBwdWVkZXMgZGVzYWN0aXZhciBsYSBjYXNpbGxhIFwiU2VydmljaW9zXCIgeSBlc2UgY29udGVuaWRvIG5vIHNlIG1vc3RyYXLDoS4nLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwiaW5mb1wiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIFwiY29kZVwiOiA3MDIsXG4gICAgICAgICAgICBcIm5hbWVcIjpcInJlc3VtZXNlbGVjdG9yX2luZm9cIixcbiAgICAgICAgICAgIFwibWVzc2FnZVwiOiAnUHVsc2EgbGEgb3BjacOzbiBwYXJhIGlyIGEgbGEgc2VjY2nDs24gZGVsIFLDqXN1bcOpIGluZGljYWRhJyxcbiAgICAgICAgICAgIFwidHlwZVwiOiBcImluZm9cIlxuICAgICAgICB9LFxuXG4gICAgXVxuXG59O1xubW9kdWxlLmV4cG9ydHMgPSBzdGNfbWVzc2FnZXM7XG4iLCIvKlxuIEFuZ3VsYXJKUyB2MS4zLjEzXG4gKGMpIDIwMTAtMjAxNCBHb29nbGUsIEluYy4gaHR0cDovL2FuZ3VsYXJqcy5vcmdcbiBMaWNlbnNlOiBNSVRcbiovXG4oZnVuY3Rpb24ocixmLHMpeyd1c2Ugc3RyaWN0JztmLm1vZHVsZShcIm5nTWVzc2FnZXNcIixbXSkuZGlyZWN0aXZlKFwibmdNZXNzYWdlc1wiLFtcIiRjb21waWxlXCIsXCIkYW5pbWF0ZVwiLFwiJHRlbXBsYXRlUmVxdWVzdFwiLGZ1bmN0aW9uKHEsayxsKXtyZXR1cm57cmVzdHJpY3Q6XCJBRVwiLGNvbnRyb2xsZXI6ZnVuY3Rpb24oKXt0aGlzLiRyZW5kZXJOZ01lc3NhZ2VDbGFzc2VzPWYubm9vcDt2YXIgYj1bXTt0aGlzLnJlZ2lzdGVyTWVzc2FnZT1mdW5jdGlvbihkLGEpe2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKWlmKGJbY10udHlwZT09YS50eXBlKXtpZihkIT1jKXt2YXIgZz1iW2RdO2JbZF09YltjXTtkPGIubGVuZ3RoP2JbY109ZzpiLnNwbGljZSgwLGMpfXJldHVybn1iLnNwbGljZShkLDAsYSl9O3RoaXMucmVuZGVyTWVzc2FnZXM9ZnVuY3Rpb24oZCxhKXtkPWR8fHt9O3ZhciBjO2YuZm9yRWFjaChiLGZ1bmN0aW9uKGIpe3ZhciBlO2lmKGU9IWN8fGEpZT1kW2IudHlwZV0sZT1udWxsIT09XG5lJiYhMSE9PWUmJmU7ZT8oYi5hdHRhY2goKSxjPSEwKTpiLmRldGFjaCgpfSk7dGhpcy5yZW5kZXJFbGVtZW50Q2xhc3NlcyhjKX19LHJlcXVpcmU6XCJuZ01lc3NhZ2VzXCIsbGluazpmdW5jdGlvbihiLGQsYSxjKXtjLnJlbmRlckVsZW1lbnRDbGFzc2VzPWZ1bmN0aW9uKGIpe2I/ay5zZXRDbGFzcyhkLFwibmctYWN0aXZlXCIsXCJuZy1pbmFjdGl2ZVwiKTprLnNldENsYXNzKGQsXCJuZy1pbmFjdGl2ZVwiLFwibmctYWN0aXZlXCIpfTt2YXIgZz1mLmlzU3RyaW5nKGEubmdNZXNzYWdlc011bHRpcGxlKXx8Zi5pc1N0cmluZyhhLm11bHRpcGxlKSxlO2IuJHdhdGNoQ29sbGVjdGlvbihhLm5nTWVzc2FnZXN8fGFbXCJmb3JcIl0sZnVuY3Rpb24oYil7ZT1iO2MucmVuZGVyTWVzc2FnZXMoYixnKX0pOyhhPWEubmdNZXNzYWdlc0luY2x1ZGV8fGEuaW5jbHVkZSkmJmwoYSkudGhlbihmdW5jdGlvbihhKXt2YXIgaDthPWYuZWxlbWVudChcIjxkaXYvPlwiKS5odG1sKGEpO2YuZm9yRWFjaChhLmNoaWxkcmVuKCksXG5mdW5jdGlvbihhKXthPWYuZWxlbWVudChhKTtoP2guYWZ0ZXIoYSk6ZC5wcmVwZW5kKGEpO2g9YTtxKGEpKGIpfSk7Yy5yZW5kZXJNZXNzYWdlcyhlLGcpfSl9fX1dKS5kaXJlY3RpdmUoXCJuZ01lc3NhZ2VcIixbXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGYpe3JldHVybntyZXF1aXJlOlwiXm5nTWVzc2FnZXNcIix0cmFuc2NsdWRlOlwiZWxlbWVudFwiLHRlcm1pbmFsOiEwLHJlc3RyaWN0OlwiQUVcIixsaW5rOmZ1bmN0aW9uKGssbCxiLGQsYSl7Zm9yKHZhciBjLGcsZT1sWzBdLG49ZS5wYXJlbnROb2RlLGg9MCxwPTA7aDxuLmNoaWxkTm9kZXMubGVuZ3RoO2grKyl7dmFyIG09bi5jaGlsZE5vZGVzW2hdO2lmKDg9PW0ubm9kZVR5cGUmJjA8PW0ubm9kZVZhbHVlLmluZGV4T2YoXCJuZ01lc3NhZ2VcIikpe2lmKG09PT1lKXtjPXA7YnJlYWt9cCsrfX1kLnJlZ2lzdGVyTWVzc2FnZShjLHt0eXBlOmIubmdNZXNzYWdlfHxiLndoZW4sYXR0YWNoOmZ1bmN0aW9uKCl7Z3x8YShrLGZ1bmN0aW9uKGEpe2YuZW50ZXIoYSxcbm51bGwsbCk7Zz1hfSl9LGRldGFjaDpmdW5jdGlvbihhKXtnJiYoZi5sZWF2ZShnKSxnPW51bGwpfX0pfX19XSl9KSh3aW5kb3csd2luZG93LmFuZ3VsYXIpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5ndWxhci1tZXNzYWdlcy5taW4uanMubWFwXG4iLCIvKipcbiAqIEFQSSBCb3VuZCBNb2RlbHMgZm9yIEFuZ3VsYXJKU1xuICogQHZlcnNpb24gdjEuMS43IC0gMjAxNS0wMS0wNlxuICogQGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXItcGxhdGFudXMvcmVzdG1vZFxuICogQGF1dGhvciBJZ25hY2lvIEJhaXhhcyA8aWduYWNpb0BwbGF0YW4udXM+XG4gKiBAbGljZW5zZSBNSVQgTGljZW5zZSwgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcbiAqL1xuXG4oZnVuY3Rpb24oYW5ndWxhciwgdW5kZWZpbmVkKSB7XG4ndXNlIHN0cmljdCc7XG4vKipcbiAqIEFuZ3VsYXIgaW5mbGVjdGlvbiBsaWJyYXJ5XG4gKiBAdmVyc2lvbiB2MC4yLjAgLSAyMDE0LTA4LTIyXG4gKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vcGxhdGFudXMvYW5ndWxhci1pbmZsZWN0b3JcbiAqIEBhdXRob3IgSWduYWNpbyBCYWl4YXMgPGlnbmFjaW9AcGxhdGFuLnVzPlxuICogQGxpY2Vuc2UgTUlUIExpY2Vuc2UsIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4gKi9cblxuKGZ1bmN0aW9uKGFuZ3VsYXIsIHVuZGVmaW5lZCkge1xuYW5ndWxhci5tb2R1bGUoJ3BsYXRhbnVzLmluZmxlY3RvcicsIFtdKVxuICAvKipcbiAgICogQGNsYXNzIGluZmxlY3RvclByb3ZpZGVyXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBUaGUgaW5mbGVjdG9yUHJvdmlkZXIgZXhwb3NlcyBpbmZsZWN0b3IgY29uZmlndXJhdGlvbiBvcHRpb25zLCBtYWlubHkgcmVsYXRlZCB0byBsb2NhbGVzLlxuICAgKi9cbiAgLnByb3ZpZGVyKCdpbmZsZWN0b3InLCBbZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIGFjdGl2ZUxvY2FsZSA9ICdlbicsIGxvY2FsZU1hcCA9IHtcbiAgICAgIC8qKlxuICAgICAgICogRW5nbGlzaCB0cmFuc2Zvcm1hdGlvbiBydWxlcy5cbiAgICAgICAqXG4gICAgICAgKiBUYWtlbiBmcm9tIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvaW5mbGVjdGlvbi1qcy9zb3VyY2UvYnJvd3NlL3RydW5rL2luZmxlY3Rpb24uanNcbiAgICAgICAqL1xuICAgICAgZW46IHtcbiAgICAgICAgdW5jb3VudGFibGU6IFtcbiAgICAgICAgICAnbXVzaWMnLCAnYXJ0JywgJ2xvdmUnLCAnaGFwcGluZXNzJywgJ2FkdmljZScsICdmdXJuaXR1cmUnLCAnbHVnZ2FnZScsXG4gICAgICAgICAgJ3N1Z2FyJywgJ2J1dHRlcicsICd3YXRlcicsICdlbGVjdHJpY2l0eScsICdnYXMnLCAncG93ZXInLCAnY3VycmVuY3knLFxuICAgICAgICAgICdlcXVpcG1lbnQnLCAnaW5mb3JtYXRpb24nLCAncmljZScsICdtb25leScsICdzcGVjaWVzJywgJ3NlcmllcycsXG4gICAgICAgICAgJ2Zpc2gnLCAnc2hlZXAnLCAnbW9vc2UnLCAnZGVlcicsICduZXdzJ1xuICAgICAgICBdLFxuXG4gICAgICAgIHBsdXJhbDogW1xuICAgICAgICAgIFtuZXcgUmVnRXhwKCcobSlhbiQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICckMWVuJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhwZSlyc29uJCcsICdnaScpLCAgICAgICAgICAgICAgJyQxb3BsZSddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcoY2hpbGQpJCcsICdnaScpLCAgICAgICAgICAgICAgICckMXJlbiddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCdeKG94KSQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICckMWVuJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhheHx0ZXN0KWlzJCcsICdnaScpLCAgICAgICAgICAgJyQxZXMnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKG9jdG9wfHZpcil1cyQnLCAnZ2knKSwgICAgICAgICAnJDFpJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhhbGlhc3xzdGF0dXMpJCcsICdnaScpLCAgICAgICAgJyQxZXMnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKGJ1KXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAnJDFzZXMnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKGJ1ZmZhbHx0b21hdHxwb3RhdClvJCcsICdnaScpLCAnJDFvZXMnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKFt0aV0pdW0kJywgJ2dpJyksICAgICAgICAgICAgICAnJDFhJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJ3NpcyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgJ3NlcyddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcoPzooW15mXSlmZXwoW2xyXSlmKSQnLCAnZ2knKSwgICckMSQydmVzJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhoaXZlKSQnLCAnZ2knKSwgICAgICAgICAgICAgICAgJyQxcyddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcoW15hZWlvdXldfHF1KXkkJywgJ2dpJyksICAgICAgICckMWllcyddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcoeHxjaHxzc3xzaCkkJywgJ2dpJyksICAgICAgICAgICckMWVzJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhtYXRyfHZlcnR8aW5kKWl4fGV4JCcsICdnaScpLCAgJyQxaWNlcyddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcoW218bF0pb3VzZSQnLCAnZ2knKSwgICAgICAgICAgICckMWljZSddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcocXVpeikkJywgJ2dpJyksICAgICAgICAgICAgICAgICckMXplcyddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCdzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICdzJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgJ3MnXVxuICAgICAgICBdLFxuXG4gICAgICAgIHNpbmd1bGFyOiBbXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhtKWVuJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDFhbiddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcocGUpb3BsZSQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxcnNvbiddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcoY2hpbGQpcmVuJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhbdGldKWEkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDF1bSddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcoKGEpbmFseXwoYilhfChkKWlhZ25vfChwKWFyZW50aGV8KHApcm9nbm98KHMpeW5vcHwodCloZSlzZXMkJywnZ2knKSwgJyQxJDJzaXMnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKGhpdmUpcyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMSddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcodGl2ZSlzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhjdXJ2ZSlzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDEnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKFtscl0pdmVzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMWYnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKFteZm9dKXZlcyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMWZlJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhbXmFlaW91eV18cXUpaWVzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDF5J10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhzKWVyaWVzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDFlcmllcyddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcobSlvdmllcyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxb3ZpZSddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcoeHxjaHxzc3xzaCllcyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhbbXxsXSlpY2UkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDFvdXNlJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhidXMpZXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDEnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKG8pZXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMSddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcoc2hvZSlzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyhjcmlzfGF4fHRlc3QpZXMkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDFpcyddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcob2N0b3B8dmlyKWkkJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxdXMnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKGFsaWFzfHN0YXR1cyllcyQnLCAnZ2knKSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMSddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCdeKG94KWVuJywgJ2dpJyksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxJ10sXG4gICAgICAgICAgW25ldyBSZWdFeHAoJyh2ZXJ0fGluZClpY2VzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJDFleCddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCcobWF0cilpY2VzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQxaXgnXSxcbiAgICAgICAgICBbbmV3IFJlZ0V4cCgnKHF1aXopemVzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckMSddLFxuICAgICAgICAgIFtuZXcgUmVnRXhwKCdzJCcsICdnaScpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyddXG4gICAgICAgIF1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gaGVscGVyIGZ1bmN0aW9uIHVzZWQgYnkgc2luZ3VsYXJpemUgYW5kIHBsdXJhbGl6ZVxuICAgIGZ1bmN0aW9uIGFwcGx5UnVsZXMoX3N0cmluZywgX3J1bGVTZXQsIF9za2lwKSB7XG5cbiAgICAgIGlmKF9za2lwLmluZGV4T2YoX3N0cmluZy50b0xvd2VyQ2FzZSgpKSA9PT0gLTEpIHtcbiAgICAgICAgdmFyIGkgPSAwLCBydWxlO1xuICAgICAgICB3aGlsZShydWxlID0gX3J1bGVTZXRbaSsrXSkge1xuICAgICAgICAgIGlmKF9zdHJpbmcubWF0Y2gocnVsZVswXSkpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3RyaW5nLnJlcGxhY2UocnVsZVswXSwgcnVsZVsxXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfc3RyaW5nO1xuICAgIH1cblxuICAgIHJldHVybiB7XG5cbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIGluZmxlY3RvclByb3ZpZGVyI1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICpcbiAgICAgICAqIFJlZ2lzdGVycyBhIG5ldyBsb2NhbGUsIHNlZSB0aGUgZGVmYXVsdCBlbmdsaXNoIGxvY2FsZSBpbXBsZW1lbnRhdGlvbiBmb3IgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJlcXVpcmVkIHN0cnVjdHVyZS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gX2xvY2FsZSBMb2NhbGUgbmFtZVxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IF9kZWYgTG9jYWxlIGRlZmluaXRpb25cbiAgICAgICAqL1xuICAgICAgcmVnaXN0ZXJMb2NhbGU6IGZ1bmN0aW9uKF9sb2NhbGUsIF9kZWYpIHtcbiAgICAgICAgbG9jYWxlTWFwW19sb2NhbGVdID0gX2RlZjtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIGluZmxlY3RvclByb3ZpZGVyI1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICpcbiAgICAgICAqIFNldHMgdGhlIGRlZmF1bHQgbG9jYWxlLCBkZWZhdWx0cyB0byAnZW4nXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF9sb2NhbGUgTG9jYWxlIG5hbWVcbiAgICAgICAqL1xuICAgICAgc2V0TG9jYWxlOiBmdW5jdGlvbihfbG9jYWxlKSB7XG4gICAgICAgIGFjdGl2ZUxvY2FsZSA9IF9sb2NhbGU7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBjbGFzcyBpbmZsZWN0b3JcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqXG4gICAgICAgKiBUaGUgaW5mbGVjdG9yIHNlcnZpY2UgcHJvdmlkZXMgYSBzZXQgb2Ygc3RyaW5nIHRyYW5zZm9ybWF0aW9uIG1ldGhvZHMuXG4gICAgICAgKi9cbiAgICAgICRnZXQ6IFsnJGxvZycsIGZ1bmN0aW9uKCRsb2cpIHtcblxuICAgICAgICBmdW5jdGlvbiBsb2FkUnVsZXNGb3IoX2xvY2FsZSkge1xuICAgICAgICAgIF9sb2NhbGUgPSBfbG9jYWxlIHx8IGFjdGl2ZUxvY2FsZTtcbiAgICAgICAgICB2YXIgcnVsZXMgPSBsb2NhbGVNYXBbX2xvY2FsZV07XG4gICAgICAgICAgaWYoIXJ1bGVzKSAkbG9nLndhcm4oJ0ludmFsaWQgaW5mbGVjdG9yIGxvY2FsZSAnICsgX2xvY2FsZSk7XG4gICAgICAgICAgcmV0dXJuIHJ1bGVzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBtZW1iZXJvZiBpbmZsZWN0b3IjXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIFRyYW5zZm9ybSBhIHN0cmluZyB0byBjYW1lbGNhc2UsIHJlbW92aW5nIGV2ZXJ5IHNwYWNlLCBkYXNoIGFuZCB1bmRlcnNjb3JlXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gX3N0cmluZyBTdHJpbmcgdG8gdHJhbnNmb3JtXG4gICAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBfY29uc3RhbnQgSWYgc2V0IHRvIGZhbHNlLCBmaXJzdCBsZXR0ZXIgaXMgbm90IHVwcGVyY2FzZWQsIGRlZmF1bHRzIHRvIGZhbHNlLlxuICAgICAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHRyYW5zZm9ybWVkIHN0cmluZ1xuICAgICAgICAgICAqL1xuICAgICAgICAgIGNhbWVsaXplOiBmdW5jdGlvbihfc3RyaW5nLCBfY29uc3RhbnQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgX3N0cmluZyAhPT0gJ3N0cmluZycpIHJldHVybiBfc3RyaW5nO1xuICAgICAgICAgICAgcmV0dXJuIF9zdHJpbmcucmVwbGFjZSgvKD86XlstX1xcc10qfFstX1xcc10rKShbQS1aXFxkXSkvZ2ksIGZ1bmN0aW9uIChtYXRjaCwgX2ZpcnN0LCBfaW5kZXgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuICghX2NvbnN0YW50ICYmIF9pbmRleCA9PT0gMCkgPyBfZmlyc3QgOiBfZmlyc3QudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbWVtYmVyb2YgaW5mbGVjdG9yI1xuICAgICAgICAgICAqXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBUcmFuc2Zvcm1zIGEgY2FtZWxjYXNlIHN0cmluZyB0byBhIHNuYWtlY2FzZSBzdHJpbmdcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfc3RyaW5nIFN0cmluZyB0byB0cmFuc2Zvcm1cbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gX3NlcCBTZXBhcmF0b3IsIGRlZmF1bHRzIHRvICctJ1xuICAgICAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHRyYW5zZm9ybWVkIHN0cmluZ1xuICAgICAgICAgICAqL1xuICAgICAgICAgIHBhcmFtZXRlcml6ZTogZnVuY3Rpb24oX3N0cmluZywgX3NlcCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBfc3RyaW5nICE9PSAnc3RyaW5nJykgcmV0dXJuIF9zdHJpbmc7XG4gICAgICAgICAgICByZXR1cm4gX3N0cmluZy5yZXBsYWNlKC8oPzpbQS1aXSt8WzAtOV0rKS9nLCBmdW5jdGlvbiAoX21hdGNoLCBfaW5kZXgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIF9pbmRleCA9PT0gMCA/IF9tYXRjaCA6IChfc2VwIHx8ICctJykgKyBfbWF0Y2g7XG4gICAgICAgICAgICB9KS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbWVtYmVyb2YgaW5mbGVjdG9yI1xuICAgICAgICAgICAqXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBUcmFuc2Zvcm1zIGEgc3RyaW5nIHRvIHNuYWtlY2FzZSwgcmVwbGFjZXMgZXZlcnkgc3BhY2UsIGRhc2ggYW5kIHVuZGVyY29yZSBieSB0aGUgcHJvdmlkZWQgc2VwYXJhdG9yLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF9zdHJpbmcgU3RyaW5nIHRvIHRyYW5zZm9ybVxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfc2VwIFNlcGFyYXRvciwgZGVmYXVsdHMgdG8gJy0nXG4gICAgICAgICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdHJhbnNmb3JtZWQgc3RyaW5nXG4gICAgICAgICAgICovXG4gICAgICAgICAgZGFzaGVyaXplOiBmdW5jdGlvbihfc3RyaW5nLCBfc2VwKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N0cmluZy5yZXBsYWNlKC9bLV9cXHNdKy9nLCBfc2VwIHx8ICctJyk7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBtZW1iZXJvZiBpbmZsZWN0b3IjXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIFRyYW5zZm9ybXMgYSBzdHJpbmcgdG8gaXRzIHNpbmd1bGFyIGZvcm0uXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gX3N0cmluZyBTdHJpbmcgdG8gdHJhbnNmb3JtXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF9sb2NhbGUpIExvY2FsZSB0byB1c2UsIGRlZmF1bHRzIHRvIHRoZSBkZWZhdWx0IGxvY2FsZVxuICAgICAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHRyYW5zZm9ybWVkIHN0cmluZ1xuICAgICAgICAgICAqL1xuICAgICAgICAgIHNpbmd1bGFyaXplOiBmdW5jdGlvbihfc3RyaW5nLCBfbG9jYWxlKSB7XG4gICAgICAgICAgICB2YXIgcnVsZXMgPSBsb2FkUnVsZXNGb3IoX2xvY2FsZSk7XG4gICAgICAgICAgICByZXR1cm4gcnVsZXMgPyBhcHBseVJ1bGVzKF9zdHJpbmcsIHJ1bGVzLnNpbmd1bGFyLCBydWxlcy51bmNvdW50YWJsZSkgOiBfc3RyaW5nO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbWVtYmVyb2YgaW5mbGVjdG9yI1xuICAgICAgICAgICAqXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBUcmFuc2Zvcm1zIGEgc3RyaW5nIHRvIGl0cyBwbHVyYWwgZm9ybS5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfc3RyaW5nIFN0cmluZyB0byB0cmFuc2Zvcm1cbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gX2xvY2FsZSkgTG9jYWxlIHRvIHVzZSwgZGVmYXVsdHMgdG8gdGhlIGRlZmF1bHQgbG9jYWxlXG4gICAgICAgICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdHJhbnNmb3JtZWQgc3RyaW5nXG4gICAgICAgICAgICovXG4gICAgICAgICAgcGx1cmFsaXplOiBmdW5jdGlvbihfc3RyaW5nLCBfbG9jYWxlKSB7XG4gICAgICAgICAgICB2YXIgcnVsZXMgPSBsb2FkUnVsZXNGb3IoX2xvY2FsZSk7XG4gICAgICAgICAgICByZXR1cm4gcnVsZXMgPyBhcHBseVJ1bGVzKF9zdHJpbmcsIHJ1bGVzLnBsdXJhbCwgcnVsZXMudW5jb3VudGFibGUpIDogX3N0cmluZztcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgIH1dXG4gICAgfTtcbiAgfV0pO1xuXG59KShhbmd1bGFyKTtcbi8vIFByZWxvYWQgc29tZSBhbmd1bGFyIHN0dWZmXG52YXIgUk1Nb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncmVzdG1vZCcsIFsnbmcnLCAncGxhdGFudXMuaW5mbGVjdG9yJ10pO1xuXG4vKipcbiAqIEBjbGFzcyByZXN0bW9kUHJvdmlkZXJcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUgcmVzdG1vZFByb3ZpZGVyIGV4cG9zZXMgcmVzdG1vZCBjb25maWd1cmF0aW9uIG1ldGhvZHNcbiAqL1xuUk1Nb2R1bGUucHJvdmlkZXIoJ3Jlc3Rtb2QnLCBbZnVuY3Rpb24oKSB7XG5cbiAgdmFyIEJBU0VfQ0hBSU4gPSBbJ1JNQnVpbGRlckV4dCcsICdSTUJ1aWxkZXJSZWxhdGlvbnMnLCAnUk1CdWlsZGVyQ29tcHV0ZWQnXTtcblxuICBmdW5jdGlvbiB3cmFwSW5JbnZva2UoX21peGluKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKF9pbmplY3Rvcikge1xuICAgICAgX2luamVjdG9yLmludm9rZShfbWl4aW4sIHRoaXMsIHsgJGJ1aWxkZXI6IHRoaXMgfSk7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIHJlc3Rtb2RQcm92aWRlciNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogQWRkcyBiYXNlIG1peGlucyBmb3IgZXZlcnkgZ2VuZXJhdGVkIG1vZGVsLlxuICAgICAqXG4gICAgICogKipBVFRFTlRJT04qKiBNb2RlbCBuYW1lcyBzaG91bGQgTk9UIGJlIGFkZGVkIHRvIHRoaXMgY2hhaW4uXG4gICAgICpcbiAgICAgKiBBbGwgbWl4aW5zIGFkZGVkIHRvIHRoZSBjaGFpbiBhcmUgcHJlcGVuZGVkIHRvIGV2ZXJ5IGdlbmVyYXRlZCBtb2RlbC5cbiAgICAgKlxuICAgICAqIFVzYWdlOlxuICAgICAqXG4gICAgICogYGBgamF2YXNjcmlwdFxuICAgICAqICRwcm92aWRlci5yZWJhc2UoJ0NoYW5nZU1vZGVsJywgJ0xhenlSZWxhdGlvbnMnLCAnVGhyb3R0bGVkTW9kZWwnKVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHJlYmFzZTogZnVuY3Rpb24oLyogX21peF9uYW1lcyAqLykge1xuICAgICAgdmFyIG1peGluLCBpLCBsID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgIGZvcihpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICBtaXhpbiA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgaWYoYW5ndWxhci5pc0FycmF5KG1peGluKSB8fCBhbmd1bGFyLmlzRnVuY3Rpb24obWl4aW4pKSB7XG4gICAgICAgICAgbWl4aW4gPSB3cmFwSW5JbnZva2UobWl4aW4pO1xuICAgICAgICB9XG4gICAgICAgIEJBU0VfQ0hBSU4ucHVzaChtaXhpbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQGNsYXNzIHJlc3Rtb2RcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogVGhlIHJlc3Rtb2Qgc2VydmljZSBwcm92aWRlcyBmYWN0b3J5IG1ldGhvZHMgZm9yIHRoZSBkaWZmZXJlbnQgcmVzdG1vZCBjb25zdW1hYmxlcy5cbiAgICAgKi9cbiAgICAkZ2V0OiBbJ1JNTW9kZWxGYWN0b3J5JywgJyRsb2cnLCBmdW5jdGlvbihidWlsZE1vZGVsLCAkbG9nKSB7XG5cbiAgICAgIHZhciBhcnJheVNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xuXG4gICAgICB2YXIgcmVzdG1vZCA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXJPZiByZXN0bW9kI1xuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIG1vZGVsIGZhY3RvcnkgaXMgdXNlZCB0byBnZW5lcmF0ZSBuZXcgcmVzdG1vZCBtb2RlbCB0eXBlcy4gSXQncyByZWNvbW1lbmRlZCB0byBwdXQgbW9kZWxzIGluc2lkZSBmYWN0b3JpZXMsXG4gICAgICAgICAqIHRoaXMgaXMgdXNlZnVsbCBsYXRlciB3aGVuIGRlZmluaW5nIHJlbGF0aW9ucyBhbmQgaW5oZXJpdGFuY2UsIHNpbmNlIHRoZSBhbmd1bGFyICRpbmplY3RvciBpcyB1c2VkIGJ5XG4gICAgICAgICAqIHRoZXNlIGZlYXR1cmVzLiBJdCdzIGFsc28gdGhlIGFuZ3VsYXIgd2F5IG9mIGRvaW5nIHRoaW5ncy5cbiAgICAgICAgICpcbiAgICAgICAgICogQSBzaW1wbGUgbW9kZWwgY2FuIGJlIGJ1aWx0IGxpa2UgdGhpczpcbiAgICAgICAgICpcbiAgICAgICAgICogYGBgamF2YXNjcmlwdFxuICAgICAgICAgKiBhbmd1bGFyLm1vZHVsZSgnYmlrZS1hcHAnKS5mYWN0b3J5KCdCaWtlJywgZnVuY3Rpb24ocmVzdG1vZCkge1xuICAgICAgICAgKiAgIHJldHVybiByZXN0bW9kLm1vZGVsKCcvYmlrZXMnKTtcbiAgICAgICAgICogfSk7XG4gICAgICAgICAqYGBgXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBgX3VybGAgcGFyYW1ldGVyIGlzIHRoZSByZXNvdXJjZSB1cmwgdGhlIGdlbmVyYXRlZCBtb2RlbCB3aWxsIGJlIGJvdW5kIHRvLCBpZiBgbnVsbGAgaXMgZ2l2ZW4gdGhlblxuICAgICAgICAgKiB0aGUgbW9kZWwgaXMgKm5lc3RlZCogYW5kIGNhbiBvbmx5IGJlIHVzZWQgaW4gYW5vdGhlciBtb2RlbCBjb250ZXh0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgbW9kZWwgYWxzbyBhY2NlcHRzIG9uZSBvciBtb3JlIGRlZmluaXRpb24gcHJvdmlkZXJzIGFzIG9uZSBvciBtb3JlIGFyZ3VtZW50cyBhZnRlciB0aGUgX3VybCBwYXJhbWV0ZXIsXG4gICAgICAgICAqIHBvc2libGUgZGVmaW5pdGlvbiBwcm92aWRlcnMgYXJlOlxuICAgICAgICAgKlxuICAgICAgICAgKiAqIEEgZGVmaW5pdGlvbiBvYmplY3QgKG1vcmUgb24gdGhpcyBhdCB0aGUge0BsaW5rIEJ1aWxkZXJBcGl9KTpcbiAgICAgICAgICpcbiAgICAgICAgICogYGBgamF2YXNjcmlwdFxuICAgICAgICAgKiByZXN0bW9kLm1vZGVsKCcvYmlrZXMnLCB7XG4gICAgICAgICAqICAgdmlld2VkOiB7IGluaXQ6IGZhbHNlIH0sXG4gICAgICAgICAqICAgcGFydHM6IHsgaGFzTWFueTogJ1BhcnQnIH0sXG4gICAgICAgICAqICAgJ35hZnRlckNyZWF0ZSc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgKiAgICAgYWxlcnQoJ0Jpa2UgY3JlYXRlZCEhJyk7XG4gICAgICAgICAqICAgfVxuICAgICAgICAgKiB9KTtcbiAgICAgICAgICpgYGBcbiAgICAgICAgICpcbiAgICAgICAgICogKiBBIGRlZmluaXRpb24gZnVuY3Rpb24gKG1vcmUgb24gdGhpcyBhdCB0aGUge0BsaW5rIEJ1aWxkZXJBcGl9KTpcbiAgICAgICAgICpcbiAgICAgICAgICogYGBgamF2YXNjcmlwdFxuICAgICAgICAgKiByZXN0bW9kLm1vZGVsKCcvYmlrZXMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICogICB0aGlzLmF0dHJEZWZhdWx0KCd2aWV3ZWQnLCBmYWxzZSk7XG4gICAgICAgICAqICAgdGhpcy5hdHRyTWFzaygnaWQnLCAnQ1UnKTtcbiAgICAgICAgICogfSk7XG4gICAgICAgICAqYGBgXG4gICAgICAgICAqXG4gICAgICAgICAqICogQSBtaXhpbiAoZ2VuZXJhdGVkIHVzaW5nIHRoZSBtaXhpbiBtZXRob2QpIG9yIG1vZGVsIGZhY3RvcnkgbmFtZTpcbiAgICAgICAgICpcbiAgICAgICAgICogYGBgamF2YXNjcmlwdFxuICAgICAgICAgKiByZXN0bW9kLm1vZGVsKCcvYmlrZXMnLCAnQmFzZU1vZGVsJywgJ1BhZ2VkTW9kZWwnKTtcbiAgICAgICAgICpgYGBcbiAgICAgICAgICpcbiAgICAgICAgICogKiBBIG1peGluIChnZW5lcmF0ZWQgdXNpbmcgdGhlIG1peGluIG1ldGhvZCkgb3IgbW9kZWwgb2JqZWN0OlxuICAgICAgICAgKlxuICAgICAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICAgICAqIHJlc3Rtb2QubW9kZWwoJy9iaWtlcycsIEJhc2VNb2RlbCwgUGFnZWRNb2RlbCk7XG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gX3VybCBSZXNvdXJjZSB1cmwuXG4gICAgICAgICAqIEBwYXJhbSB7bWl4ZWR9IF9taXggT25lIG9yIG1vcmUgbWl4aW5zLCBkZXNjcmlwdGlvbiBvYmplY3RzIG9yIGRlc2NyaXB0aW9uIGJsb2Nrcy5cbiAgICAgICAgICogQHJldHVybiB7U3RhdGljQXBpfSBUaGUgbmV3IG1vZGVsLlxuICAgICAgICAgKi9cbiAgICAgICAgbW9kZWw6IGZ1bmN0aW9uKF9iYXNlVXJsLyogLCBfbWl4ICovKSB7XG4gICAgICAgICAgdmFyIG1vZGVsID0gYnVpbGRNb2RlbChfYmFzZVVybCwgQkFTRV9DSEFJTik7XG5cbiAgICAgICAgICBpZihhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgbW9kZWwubWl4KGFycmF5U2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICAgICAgICAgICRsb2cud2FybignUGFzc2luZyBtaXhpbnMgYW5kIGRpZmluaXRpb25zIGluIHRoZSBtb2RlbCBtZXRob2Qgd2lsbCBiZSBkZXByZWNhdGVkIGluIHJlc3Rtb2QgMS4yLCB1c2UgcmVzdG1vZC5tb2RlbCgpLm1peCgpIGluc3RlYWQuJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG1vZGVsO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyT2YgcmVzdG1vZCNcbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBtaXhpbiBmYWN0b3J5IGlzIHVzZWQgdG8gcGFjayBtb2RlbCBiZWhhdmlvcnMgd2l0aG91dCB0aGUgb3ZlcmxvYWQgb2YgZ2VuZXJhdGluZyBhIG5ld1xuICAgICAgICAgKiBtb2RlbC4gVGhlIG1peGluIGNhbiB0aGVuIGJlIHBhc3NlZCBhcyBhcmd1bWVudCB0byBhIGNhbGwgdG8ge0BsaW5rIHJlc3Rtb2QjbW9kZWwjbW9kZWx9XG4gICAgICAgICAqIHRvIGV4dGVuZCB0aGUgbW9kZWwgY2FwYWJpbGl0aWVzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBBIG1peGluIGNhbiBhbHNvIGJlIHBhc3NlZCB0byB0aGUge0BsaW5rIHJlc3Rtb2RQcm92aWRlciNyZWJhc2V9IG1ldGhvZCB0byBwcm92aWRlXG4gICAgICAgICAqIGEgYmFzZSBiZWhhdmlvciBmb3IgYWxsIGdlbmVyYXRlZCBtb2RlbHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7bWl4ZWR9IF9taXggT25lIG9yIG1vcmUgbWl4aW5zLCBkZXNjcmlwdGlvbiBvYmplY3RzIG9yIGRlc2NyaXB0aW9uIGJsb2Nrcy5cbiAgICAgICAgICogQHJldHVybiB7b2JqZWN0fSBUaGUgbWl4aW5cbiAgICAgICAgICovXG4gICAgICAgIG1peGluOiBmdW5jdGlvbigvKiBfbWl4ICovKSB7XG4gICAgICAgICAgcmV0dXJuIHsgJGlzQWJzdHJhY3Q6IHRydWUsICQkY2hhaW46IGFycmF5U2xpY2UuY2FsbChhcmd1bWVudHMsIDApIH07XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXJPZiByZXN0bW9kI1xuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICpcbiAgICAgICAgICogU2hvcmN1dCBtZXRob2QgdXNlZCB0byBjcmVhdGUgc2luZ2xldG9uIHJlc291cmNlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogU2FtZSBhcyBjYWxsaW5nIGByZXN0bW9kLm1vZGVsKG51bGwpLiRzaW5nbGUoX3VybClgXG4gICAgICAgICAqXG4gICAgICAgICAqIENoZWNrIHRoZSB7QGxpbmsgU3RhdGljQXBpIyRzaW5nbGV9IGRvY3VtZW50YXRpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfdXJsIFJlc291cmNlIHVybCxcbiAgICAgICAgICogQHBhcmFtIHttaXhlZH0gX21peCBNaXhpbiBjaGFpbi5cbiAgICAgICAgICogQHJldHVybiB7UmVjb3JkQXBpfSBOZXcgcmVzb3VyY2UgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICBzaW5nbGV0b246IGZ1bmN0aW9uKF91cmwvKiwgX21peCAqLykge1xuICAgICAgICAgIHJldHVybiByZXN0bW9kLm1vZGVsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykuc2luZ2xlKF91cmwpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gcmVzdG1vZDtcbiAgICB9XVxuICB9O1xufV0pXG4uZmFjdG9yeSgnbW9kZWwnLCBbJ3Jlc3Rtb2QnLCBmdW5jdGlvbihyZXN0bW9kKSB7XG4gIHJldHVybiByZXN0bW9kLm1vZGVsO1xufV0pXG4uZmFjdG9yeSgnbWl4aW4nLCBbJ3Jlc3Rtb2QnLCBmdW5jdGlvbihyZXN0bW9kKSB7XG4gIHJldHVybiByZXN0bW9kLm1peGluO1xufV0pO1xuXG5STU1vZHVsZS5mYWN0b3J5KCdSTUNvbGxlY3Rpb25BcGknLCBbJ1JNVXRpbHMnLCBmdW5jdGlvbihVdGlscykge1xuXG4gIHZhciBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZDtcblxuICAvKipcbiAgICogQGNsYXNzIENvbGxlY3Rpb25BcGlcbiAgICpcbiAgICogQGV4dGVuZHMgU2NvcGVBcGlcbiAgICogQGV4dGVuZHMgQ29tbW9uQXBpXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBBIHJlc3Rtb2QgY29sbGVjdGlvbiBpcyBhbiBleHRlbmRlZCBhcnJheSB0eXBlIGJvdW5kIFJFU1QgcmVzb3VyY2Ugcm91dGUuXG4gICAqXG4gICAqIEV2ZXJ5IHRpbWUgYSBuZXcgcmVzdG1vZCBtb2RlbCBpcyBjcmVhdGVkLCBhbiBhc3NvY2lhdGVkIGNvbGxlY3Rpb24gdHlwZSBpcyBjcmVhdGVkIHRvby5cbiAgICpcbiAgICogVE9ETzogdGFsayBhYm91dCBmZXRjaC9yZWZyZXNoIGJlaGF2aW91ciwgbGlmZWN5Y2xlcywgY29sbGVjdGlvbiBzY29wZXMsIGFkZGluZy9yZW1vdmluZ1xuICAgKlxuICAgKiBGb3IgYCRmZXRjaGAgb24gYSBjb2xsZWN0aW9uOlxuICAgKlxuICAgKiAqIGJlZm9yZS1mZXRjaC1tYW55XG4gICAqICogYmVmb3JlLXJlcXVlc3RcbiAgICogKiBhZnRlci1yZXF1ZXN0Wy1lcnJvcl1cbiAgICogKiBhZnRlci1mZWVkIChjYWxsZWQgZm9yIGV2ZXJ5IHJlY29yZCBpZiBubyBlcnJvcnMpXG4gICAqICogYWZ0ZXItZmVlZC1tYW55IChvbmx5IGNhbGxlZCBpZiBubyBlcnJvcnMpXG4gICAqICogYWZ0ZXItZmV0Y2gtbWFueVstZXJyb3JdXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJGlzQ29sbGVjdGlvbiBIZWxwZXIgZmxhZyB0byBzZXBhcmF0ZSBjb2xsZWN0aW9ucyBmcm9tIHRoZSBtYWluIHR5cGVcbiAgICogQHByb3BlcnR5IHtvYmplY3R9ICRzY29wZSBUaGUgY29sbGVjdGlvbiBzY29wZSAoaGllcmFyY2hpY2FsIHNjb3BlLCBub3QgYW5ndWxhciBzY29wZSlcbiAgICogQHByb3BlcnR5IHtvYmplY3R9ICRwYXJhbXMgVGhlIGNvbGxlY3Rpb24gcXVlcnkgcGFyYW1ldGVyc1xuICAgKlxuICAgKi9cbiAgcmV0dXJuIHtcblxuICAgICRpc0NvbGxlY3Rpb246IHRydWUsXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgQ29sbGVjdGlvbkFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBDYWxsZWQgYnkgY29sbGVjdGlvbiBjb25zdHJ1Y3RvciBvbiBpbml0aWFsaXphdGlvbi5cbiAgICAgKlxuICAgICAqIE5vdGU6IElzIGJldHRlciB0byBhZGQgYSBob29rIG9uIGFmdGVyLWluaXQgdGhhbiBvdmVycmlkaW5nIHRoaXMgbWV0aG9kLlxuICAgICAqL1xuICAgICRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgIC8vIGFmdGVyIGluaXRpYWxpemF0aW9uIGhvb2tcbiAgICAgIHRoaXMuJGRpc3BhdGNoKCdhZnRlci1jb2xsZWN0aW9uLWluaXQnKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIENvbGxlY3Rpb25BcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gRmVlZHMgcmF3IGNvbGxlY3Rpb24gZGF0YSBpbnRvIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgZm9yIHVzZSBpbiBjb2xsZWN0aW9ucyBvbmx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHthcnJheX0gX3JhdyBEYXRhIHRvIGFkZFxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gX21hc2sgJ0NSVScgbWFza1xuICAgICAqIEByZXR1cm4ge0NvbGxlY3Rpb25BcGl9IHNlbGZcbiAgICAgKi9cbiAgICAkZGVjb2RlOiBmdW5jdGlvbihfcmF3LCBfbWFzaykge1xuXG4gICAgICBVdGlscy5hc3NlcnQoX3JhdyAmJiBhbmd1bGFyLmlzQXJyYXkoX3JhdyksICdDb2xsZWN0aW9uICRkZWNvZGUgZXhwZWN0ZWQgYXJyYXknKTtcblxuICAgICAgZm9yKHZhciBpID0gMCwgbCA9IF9yYXcubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHRoaXMuJGJ1aWxkUmF3KF9yYXdbaV0sIF9tYXNrKS4kcmV2ZWFsKCk7IC8vIGJ1aWxkIGFuZCBkaXNjbG9zZSBldmVyeSBpdGVtLlxuICAgICAgfVxuXG4gICAgICB0aGlzLiRkaXNwYXRjaCgnYWZ0ZXItZmVlZC1tYW55JywgW19yYXddKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgQ29sbGVjdGlvbkFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBFbmNvZGVzIGFycmF5IGRhdGEgaW50byBhIGl0cyBzZXJpYWxpemVkIHZlcnNpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IF9tYXNrICdDUlUnIG1hc2tcbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uQXBpfSBzZWxmXG4gICAgICovXG4gICAgJGVuY29kZTogZnVuY3Rpb24oX21hc2spIHtcbiAgICAgIHZhciByYXcgPSBbXTtcbiAgICAgIGZvcih2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICByYXcucHVzaCh0aGlzW2ldLiRlbmNvZGUoX21hc2spKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy4kZGlzcGF0Y2goJ2JlZm9yZS1yZW5kZXItbWFueScsIFtyYXddKTtcbiAgICAgIHJldHVybiByYXc7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBDb2xsZWN0aW9uQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIFJlc2V0cyB0aGUgY29sbGVjdGlvbidzIGNvbnRlbnRzXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uQXBpfSBzZWxmXG4gICAgICovXG4gICAgJGNsZWFyOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLiRhbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gMDsgLy8gcmVzZXQgdGhlIGNvbGxlY3Rpb24gY29udGVudHNcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgQ29sbGVjdGlvbkFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBCZWdpbiBhIHNlcnZlciByZXF1ZXN0IHRvIHBvcHVsYXRlIGNvbGxlY3Rpb24uIFRoaXMgbWV0aG9kIGRvZXMgbm90XG4gICAgICogY2xlYXIgdGhlIGNvbGxlY3Rpb24gY29udGVudHMgYnkgZGVmYXVsdCwgdXNlIGAkcmVmcmVzaGAgdG8gcmVzZXQgYW5kIGZldGNoLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgZm9yIHVzZSBpbiBjb2xsZWN0aW9ucyBvbmx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R8ZnVuY3Rpb259IF9wYXJhbXMgQWRkaXRpb25hbCByZXF1ZXN0IHBhcmFtZXRlcnMsIG5vdCBzdG9yZWQgaW4gY29sbGVjdGlvbixcbiAgICAgKiBpZiBhIGZ1bmN0aW9uIGlzIGdpdmVuLCB0aGVuIGl0IHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlIHJlcXVlc3Qgb2JqZWN0IHRvIGFsbG93IHJlcXVldCBjdXN0b21pemF0aW9uLlxuICAgICAqIEByZXR1cm4ge0NvbGxlY3Rpb25BcGl9IHNlbGZcbiAgICAgKi9cbiAgICAkZmV0Y2g6IGZ1bmN0aW9uKF9wYXJhbXMpIHtcbiAgICAgIHJldHVybiB0aGlzLiRhY3Rpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByZXF1ZXN0ID0geyBtZXRob2Q6ICdHRVQnLCB1cmw6IHRoaXMuJHVybCgnZmV0Y2hNYW55JyksIHBhcmFtczogdGhpcy4kcGFyYW1zIH07XG5cbiAgICAgICAgaWYoX3BhcmFtcykge1xuICAgICAgICAgIHJlcXVlc3QucGFyYW1zID0gcmVxdWVzdC5wYXJhbXMgPyBleHRlbmQocmVxdWVzdC5wYXJhbXMsIF9wYXJhbXMpIDogX3BhcmFtcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRPRE86IGNoZWNrIHRoYXQgY29sbGVjdGlvbiBpcyBib3VuZC5cblxuICAgICAgICB0aGlzXG4gICAgICAgICAgLiRkaXNwYXRjaCgnYmVmb3JlLWZldGNoLW1hbnknLCBbcmVxdWVzdF0pXG4gICAgICAgICAgLiRzZW5kKHJlcXVlc3QsIGZ1bmN0aW9uKF9yZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgICAuJHVud3JhcChfcmVzcG9uc2UuZGF0YSlcbiAgICAgICAgICAgICAgLiRkaXNwYXRjaCgnYWZ0ZXItZmV0Y2gtbWFueScsIFtfcmVzcG9uc2VdKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbihfcmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuJGRpc3BhdGNoKCdhZnRlci1mZXRjaC1tYW55LWVycm9yJywgW19yZXNwb25zZV0pO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBDb2xsZWN0aW9uQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIEFkZHMgYW4gaXRlbSB0byB0aGUgYmFjayBvZiB0aGUgY29sbGVjdGlvbi4gVGhpcyBtZXRob2QgZG9lcyBub3QgYXR0ZW1wdCB0byBzZW5kIGNoYW5nZXNcbiAgICAgKiB0byB0aGUgc2VydmVyLiBUbyBjcmVhdGUgYSBuZXcgaXRlbSBhbmQgYWRkIGl0IHVzZSAkY3JlYXRlIG9yICRidWlsZC5cbiAgICAgKlxuICAgICAqIFRyaWdnZXJzIGFmdGVyLWFkZCBjYWxsYmFja3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlY29yZEFwaX0gX29iaiBJdGVtIHRvIGJlIGFkZGVkXG4gICAgICogQHJldHVybiB7Q29sbGVjdGlvbkFwaX0gc2VsZlxuICAgICAqL1xuICAgICRhZGQ6IGZ1bmN0aW9uKF9vYmosIF9pZHgpIHtcbiAgICAgIFV0aWxzLmFzc2VydChfb2JqLiR0eXBlICYmIF9vYmouJHR5cGUgPT09IHRoaXMuJHR5cGUsICdDb2xsZWN0aW9uICRhZGQgZXhwZWN0cyByZWNvcmQgb2YgdGhlIHNhbWUgJHR5cGUnKTtcblxuICAgICAgcmV0dXJuIHRoaXMuJGFjdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgaWYoX29iai4kcG9zaXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmKF9pZHggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5zcGxpY2UoX2lkeCwgMCwgX29iaik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucHVzaChfb2JqKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgX29iai4kcG9zaXRpb24gPSB0cnVlOyAvLyB1c2UgdHJ1ZSBmb3Igbm93LCBrZWVwaW5nIHBvc2l0aW9uIHVwZGF0ZWQgY2FuIGJlIGV4cGVuc2l2ZVxuICAgICAgICAgIHRoaXMuJGRpc3BhdGNoKCdhZnRlci1hZGQnLCBbX29ial0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIENvbGxlY3Rpb25BcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gIFJlbW92ZXMgYW4gaXRlbSBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgZG9lcyBub3Qgc2VuZCBhIERFTEVURSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIsIGl0IGp1c3QgcmVtb3ZlcyB0aGVcbiAgICAgKiBpdGVtIGxvY2FsbHkuIFRvIHJlbW92ZSBhbiBpdGVtIEFORCBzZW5kIGEgREVMRVRFIHVzZSB0aGUgaXRlbSdzICRkZXN0cm95IG1ldGhvZC5cbiAgICAgKlxuICAgICAqIFRyaWdnZXJzIGFmdGVyLXJlbW92ZSBjYWxsYmFja3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlY29yZEFwaX0gX29iaiBJdGVtIHRvIGJlIHJlbW92ZWRcbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uQXBpfSBzZWxmXG4gICAgICovXG4gICAgJHJlbW92ZTogZnVuY3Rpb24oX29iaikge1xuICAgICAgcmV0dXJuIHRoaXMuJGFjdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGlkeCA9IHRoaXMuJGluZGV4T2YoX29iaik7XG4gICAgICAgIGlmKGlkeCAhPT0gLTEpIHtcbiAgICAgICAgICB0aGlzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgIF9vYmouJHBvc2l0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICAgIHRoaXMuJGRpc3BhdGNoKCdhZnRlci1yZW1vdmUnLCBbX29ial0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIENvbGxlY3Rpb25BcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gRmluZHMgdGhlIGxvY2F0aW9uIG9mIGFuIG9iamVjdCBpbiB0aGUgYXJyYXkuXG4gICAgICpcbiAgICAgKiBJZiBhIGZ1bmN0aW9uIGlzIHByb3ZpZGVkIHRoZW4gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBpdGVtIGZvciB3aGljaCB0aGUgZnVuY3Rpb24gcmV0dXJucyB0cnVlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZWNvcmRBcGl8ZnVuY3Rpb259IF9vYmogT2JqZWN0IHRvIGZpbmRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE9iamVjdCBpbmRleCBvciAtMSBpZiBub3QgZm91bmRcbiAgICAgKi9cbiAgICAkaW5kZXhPZjogZnVuY3Rpb24oX29iaikge1xuICAgICAgdmFyIGFjY2VwdCA9IHR5cGVvZiBfb2JqID09PSAnZnVuY3Rpb24nID8gX29iaiA6IGZhbHNlO1xuICAgICAgZm9yKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmKGFjY2VwdCA/IGFjY2VwdCh0aGlzW2ldKSA6IHRoaXNbaV0gPT09IF9vYmopIHJldHVybiBpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgfTtcblxufV0pO1xuUk1Nb2R1bGUuZmFjdG9yeSgnUk1Db21tb25BcGknLCBbJyRodHRwJywgJ1JNRmFzdFEnLCAnJGxvZycsIGZ1bmN0aW9uKCRodHRwLCAkcSwgJGxvZykge1xuXG4gIHZhciBFTVBUWV9BUlJBWSA9IFtdO1xuXG4gIGZ1bmN0aW9uIHdyYXBQcm9taXNlKF9jdHgsIF9mdW4pIHtcbiAgICB2YXIgZHNwID0gX2N0eC4kZGlzcGF0Y2hlcigpO1xuICAgIHJldHVybiBmdW5jdGlvbihfbGFzdCkge1xuICAgICAgLy8gc2F2ZSBhbmQgcmVzZXQgcHJvbWlzZVxuICAgICAgdmFyIG9sZFByb21pc2UgPSBfY3R4LiRwcm9taXNlO1xuICAgICAgX2N0eC4kcHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgIHRyeSB7XG4gICAgICAgIF9jdHguJGxhc3QgPSBfbGFzdDtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGRzcCA/IF9jdHguJGRlY29yYXRlKGRzcCwgX2Z1biwgW19jdHhdKSA6IF9mdW4uY2FsbChfY3R4LCBfY3R4KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gX2N0eC4kcHJvbWlzZSA6IHJlc3VsdDtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIF9jdHguJHByb21pc2UgPSBvbGRQcm9taXNlOyAvLyByZXN0b3JlIG9sZCBwcm9taXNlXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAY2xhc3MgQ29tbW9uQXBpXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBQcm92aWRlcyBhIGNvbW1vbiBmcmFtZXdvcmsgZm9yIHJlc3Rtb2QgcmVzb3VyY2VzLlxuICAgKlxuICAgKiBUaGlzIEFQSSBpcyBpbmNsdWRlZCBpbiB7QGxpbmsgUmVjb3JkQXBpfSBhbmQge0BsaW5rIENvbGxlY3Rpb25BcGl9LlxuICAgKiBtYWtpbmcgaXRzIG1ldGhvZHMgYXZhaWxhYmxlIGluIGV2ZXJ5IHN0cnVjdHVyZSBnZW5lcmF0ZWQgYnkgcmVzdG1vZC5cbiAgICpcbiAgICogVE9ETzogRGVzY3JpYmUgaG9vayBtZWNoYW5pc20sIHByb21pc2UgbWVjaGFuaXNtIGFuZCBzZW5kIGxpZmVjeWNsZS5cbiAgICpcbiAgICogQHByb3BlcnR5IHtwcm9taXNlfSAkcHJvbWlzZSBUaGUgbGFzdCBvcGVyYXRpb24gcHJvbWlzZSAodW5kZWZpbmVkIGlmIG5vIHByb21pc2UgaGFzIGJlZW4gY3JlYXRlZCB5ZXQpXG4gICAqIEBwcm9wZXJ0eSB7YXJyYXl9ICRwZW5kaW5nIFBlbmRpbmcgcmVxdWVzdHMgYXNzb2NpYXRlZCB0byB0aGlzIHJlc291cmNlICh1bmRlZmluZWQgaWYgbm8gcmVxdWVzdCBoYXMgYmVlbiBpbml0aWF0ZWQpXG4gICAqIEBwcm9wZXJ0eSB7b2JqZWN0fSAkJGNiIFNjb3BlIGNhbGwgYmFja3MgKHVuZGVmaW5lZCBpZiBubyBjYWxsYmFja3MgaGF2ZSBiZWVuIGRlZmluZWQsIHByaXZhdGUgYXBpKVxuICAgKiBAcHJvcGVydHkge2Z1bmN0aW9ufSAkJGRzcCBUaGUgY3VycmVudCBldmVudCBkaXNwYXRjaGVyIChwcml2YXRlIGFwaSlcbiAgICovXG4gIHZhciBDb21tb25BcGkgPSB7XG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgQ29tbW9uQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIEdldHMgdGhpcyByZXNvdXJjZSB1cmwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX2ZvciBJbnRlbmRlZCB1c2FnZSBmb3IgdGhlIHVybCAob3B0aW9uYWwpXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgcmVzb3VyY2UgdXJsLlxuICAgICAqL1xuICAgICR1cmw6IGZ1bmN0aW9uKF9mb3IpIHtcbiAgICAgIGlmKF9mb3IpIHtcbiAgICAgICAgX2ZvciA9ICckJyArIF9mb3IgKyAnVXJsRm9yJztcbiAgICAgICAgaWYodGhpcy4kc2NvcGVbX2Zvcl0pIHJldHVybiB0aGlzLiRzY29wZVtfZm9yXSh0aGlzKTtcbiAgICAgIH0gZWxzZSBpZih0aGlzLiRzY29wZS4kY2Fub25pY2FsVXJsRm9yKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRzY29wZS4kY2Fub25pY2FsVXJsRm9yKHRoaXMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy4kc2NvcGUuJHVybEZvcih0aGlzKTtcbiAgICB9LFxuXG4gICAgLy8gSG9va3MgQVBJXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgQ29tbW9uQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIEV4ZWN1dGVzIGEgZ2l2ZW4gaG9vayBjYWxsYmFja3MgdXNpbmcgdGhlIGN1cnJlbnQgZGlzcGF0Y2hlciBjb250ZXh0LlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgdG8gcHJvdmlkZSBjdXN0b20gb2JqZWN0IGxpZmVjeWNsZSBob29rcy5cbiAgICAgKlxuICAgICAqIFVzYWdlOlxuICAgICAqXG4gICAgICogYGBgamF2YXNjcmlwdFxuICAgICAqIHZhciBtaXhpbiA9IHJlc3Rtb2QubWl4aW4oe1xuICAgICAqICAgdHJpZ2dlckR1bW15OiBmdW5jdGlvbihfcGFyYW0pIHtcbiAgICAgKiAgICAgdGhpcy4kZGlzcGF0Y2goJ2R1bW15LWhvb2snLCBfcGFyYW0pO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogLy8gVGhlbiBob29rIGNhbiBiZSB1c2VkIGF0IG1vZGVsIGRlZmluaXRpb24gdG8gcHJvdmlkZSB0eXBlLWxldmVsIGN1c3RvbWl6YXRpb246XG4gICAgICogdmFyIEJpa2UgJHJlc21vZC5tb2RlbCgnL2FwaS9iaWtlcycsIG1peGluLCB7XG4gICAgICogICAnfmR1bW15LWhvb2snOiBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgYWxlcnQoJ1RoaXMgaXMgY2FsbGVkIGZvciBldmVyeSBiaWtlJyk7XG4gICAgICogICB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIC8vIG9yIGF0IGluc3RhbmNlIGxldmVsOlxuICAgICAqIHZhciBteUJpa2UgPSBCaWtlLiRidWlsZCgpO1xuICAgICAqIG15QmlrZS4kb24oJ2R1bW15LWhvb2snLCBmdW5jdGlvbigpIHtcbiAgICAgKiAgIGFsZXJ0KCdUaGlzIGlzIGNhbGxlZCBmb3IgbXlCaWtlIG9ubHknKTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIC8vIG9yIGV2ZW50IGF0IGRlY29yYXRlZCBjb250ZXh0IGxldmVsXG4gICAgICogbXlCaWtlLiRkZWNvcmF0ZSh7XG4gICAgICogICAnZHVtbXktaG9vayc6IGZ1bmN0aW9uKCkge1xuICAgICAqICAgICBhbGVydCgnVGhpcyBpcyBjYWxsZWQgZm9yIG15QmlrZSBvbmx5IGluc2lkZSB0aGUgZGVjb3JhdGVkIGNvbnRleHQnKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9LCBmdWN0aW9uKCkge1xuICAgICAqICAvLyBkZWNvcmF0ZWQgY29udGV4dFxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBfaG9vayBIb29rIG5hbWVcbiAgICAgKiBAcGFyYW0gIHthcnJheX0gX2FyZ3MgSG9vayBhcmd1bWVudHNcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IF9jdHggSG9vayBleGVjdXRpb24gY29udGV4dCBvdmVycmlkZVxuICAgICAqXG4gICAgICogQHJldHVybiB7Q29tbW9uQXBpfSBzZWxmXG4gICAgICovXG4gICAgJGRpc3BhdGNoOiBmdW5jdGlvbihfaG9vaywgX2FyZ3MsIF9jdHgpIHtcbiAgICAgIHZhciBjYnMsIGksIGNiLCBkc3AgPSB0aGlzLiQkZHNwO1xuXG4gICAgICBpZighX2N0eCkgX2N0eCA9IHRoaXM7XG5cbiAgICAgIC8vIGNvbnRleHQgY2FsbGJhY2tzXG4gICAgICBpZihkc3ApIHtcbiAgICAgICAgdGhpcy4kJGRzcCA9IHVuZGVmaW5lZDsgLy8gZGlzYWJsZSBkc3AgZm9yIGhvb2tzXG4gICAgICAgIGRzcChfaG9vaywgX2FyZ3MsIF9jdHgpO1xuICAgICAgfVxuXG4gICAgICAvLyBpbnN0YW5jZSBjYWxsYmFja3NcbiAgICAgIGlmKHRoaXMuJCRjYiAmJiAoY2JzID0gdGhpcy4kJGNiW19ob29rXSkpIHtcbiAgICAgICAgZm9yKGkgPSAwOyAhIShjYiA9IGNic1tpXSk7IGkrKykge1xuICAgICAgICAgIGNiLmFwcGx5KF9jdHgsIF9hcmdzIHx8IEVNUFRZX0FSUkFZKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBidWJibGUgdXAgdGhlIG9iamVjdCBzY29wZSwgYnViYmxlIHRvIHR5cGUgb25seSBpZiB0aGVyZSBpc250IGEgdmlhYmxlIHBhcmVudCBzY29wZS5cbiAgICAgIGlmKHRoaXMuJHNjb3BlICYmIHRoaXMuJHNjb3BlLiRkaXNwYXRjaCkge1xuICAgICAgICB0aGlzLiRzY29wZS4kZGlzcGF0Y2goX2hvb2ssIF9hcmdzLCBfY3R4KTtcbiAgICAgIH0gZWxzZSBpZih0aGlzLiR0eXBlKSB7XG4gICAgICAgIHRoaXMuJHR5cGUuJGRpc3BhdGNoKF9ob29rLCBfYXJncywgX2N0eCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuJCRkc3AgPSBkc3A7IC8vIHJlZW5hYmxlIGRzcC5cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBDb21tb25BcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gUmVnaXN0ZXJzIGFuIGluc3RhbmNlIGhvb2suXG4gICAgICpcbiAgICAgKiBBbiBpbnN0YW5jZSBob29rIGlzIGNhbGxlZCBvbmx5IGZvciBldmVudHMgZ2VuZXJhdGVkIGJ5IHRoZSBjYWxsaW5nIG9iamVjdC5cbiAgICAgKlxuICAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAgKiB2YXIgYmlrZSA9IE1vZGVsLiRidWlsZCgpLCBiaWtlMiA9IE1vZGVsLiRidWlsZCgpO1xuICAgICAqIGJpa2UuJG9uKCdiZWZvcmUtc2F2ZScsIGZ1bmN0aW9uKCkgeyBhbGVydCgnc2F2ZWQhJyk7IH0pO1xuICAgICAqXG4gICAgICogYmlrZS4kc2F2ZSgpOyAvLyAnc2F2ZWQhJyBhbGVydCBpcyBzaG93biBhZnRlciBiaWtlIGlzIHNhdmVkXG4gICAgICogYmlrZTIuJHNhdmUoKTsgLy8gbm8gYWxlcnQgaXMgc2hvd24gYWZ0ZXIgYmlrZTIgaXMgc2F2ZWRcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfaG9vayBIb29rIG5hbWVcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBfZnVuIENhbGxiYWNrXG4gICAgICogQHJldHVybiB7Q29tbW9uQXBpfSBzZWxmXG4gICAgICovXG4gICAgJG9uOiBmdW5jdGlvbihfaG9vaywgX2Z1bikge1xuICAgICAgdmFyIGhvb2tzID0gKHRoaXMuJCRjYiB8fCAodGhpcy4kJGNiID0ge30pKVtfaG9va10gfHwgKHRoaXMuJCRjYltfaG9va10gPSBbXSk7XG4gICAgICBob29rcy5wdXNoKF9mdW4pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBDb21tb25BcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gUmVnaXN0ZXJzIGhvb2tzIHRvIGJlIHVzZWQgb25seSBpbnNpZGUgdGhlIGdpdmVuIGZ1bmN0aW9uIChkZWNvcmF0ZWQgY29udGV4dCkuXG4gICAgICpcbiAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICogLy8gc3BlY2lhbCBmZXRjaCBtZXRob2QgdGhhdCBzZW5kcyBhIHNwZWNpYWwgdG9rZW4gaGVhZGVyLlxuICAgICAqIHJlc3Rtb2QubWl4aW4oe1xuICAgICAqICAgJGZldGNoV2l0aFRva2VuOiBmdW5jdGlvbihfdG9rZW4pIHtcbiAgICAgKiAgICAgcmV0dXJuIHRoaXMuJGRlY29yYXRlKHtcbiAgICAgKiAgICAgICAnYmVmb3JlLWZldGNoJzogZnVuY3Rpb24oX3JlcSkge1xuICAgICAqICAgICAgICAgX3JlcS5oZWFkZXJzID0gX3JlcS5oZWFkZXJzIHx8IHt9O1xuICAgICAqICAgICAgICAgX3JlcS5oZWFkZXJzWydUb2tlbiddID0gX3Rva2VuO1xuICAgICAqICAgICAgIH1cbiAgICAgKiAgICAgKSwgZnVuY3Rpb24oKSB7XG4gICAgICogICAgICAgcmV0dXJuIHRoaXMuJGZldGNoKCk7XG4gICAgICogICAgIH0pXG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdHxmdW5jdGlvbn0gX2hvb2tzIEhvb2sgbWFwcGluZyBvYmplY3Qgb3IgaG9vayBleGVjdXRpb24gbWV0aG9kLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IF9mdW4gRnVuY3Rpb24gdG8gYmUgZXhlY3V0ZWQgaW4gd2l0aCBkZWNvcmF0ZWQgY29udGV4dCwgdGhpcyBmdW5jdGlvbiBpcyBleGVjdXRlZCBpbiB0aGUgY2FsbGVlIG9iamVjdCBjb250ZXh0LlxuICAgICAqIEByZXR1cm4ge0NvbW1vbkFwaX0gc2VsZlxuICAgICAqL1xuICAgICRkZWNvcmF0ZTogZnVuY3Rpb24oX2hvb2tzLCBfZnVuLCBfYXJncykge1xuXG4gICAgICB2YXIgb2xkRGlzcGF0Y2hlciA9IHRoaXMuJCRkc3A7XG5cbiAgICAgIC8vIHNldCBuZXcgZGlzcGF0Y2hlclxuICAgICAgdGhpcy4kJGRzcCA9ICh0eXBlb2YgX2hvb2tzID09PSAnZnVuY3Rpb24nIHx8ICFfaG9va3MpID8gX2hvb2tzIDogZnVuY3Rpb24oX2hvb2ssIF9hcmdzLCBfY3R4KSB7XG4gICAgICAgIGlmKG9sZERpc3BhdGNoZXIpIG9sZERpc3BhdGNoZXIuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICAgICAgdmFyIGV4dHJhQ2IgPSBfaG9va3NbX2hvb2tdO1xuICAgICAgICBpZihleHRyYUNiKSBleHRyYUNiLmFwcGx5KF9jdHgsIF9hcmdzIHx8IEVNUFRZX0FSUkFZKTtcbiAgICAgIH07XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBfZnVuLmFwcGx5KHRoaXMsIF9hcmdzKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIC8vIHJlc2V0IGRpc3BhdGNoZXIgd2l0aCBvbGQgdmFsdWVcbiAgICAgICAgdGhpcy4kJGRzcCA9IG9sZERpc3BhdGNoZXI7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBDb21tb25BcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gUmV0cmlldmVzIHRoZSBjdXJyZW50IG9iamVjdCdzIGV2ZW50IGRpc3BhdGNoZXIgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBpbiBjb25qdWN0aW9uIHdpdGggYCRkZWNvcmF0ZWAgdG8gcHJvdmlkZSBhIGNvbnNpc3RlbnQgaG9vayBjb250ZXh0XG4gICAgICogZHVyaW5nIGFzeW5jIG9wZXJhdGlvbnMuIFRoaXMgaXMgaW1wb3J0YW50IHdoZW4gYnVpbGRpbmcgZXh0ZW5zaW9ucyB0aGF0IHdhbnQgdG8gc3VwcG9ydCB0aGVcbiAgICAgKiBjb250ZXh0dWFsIGhvb2sgc3lzdGVtIGluIGFzeW5jaHJvbmljIG9wZXJhdGlvbnMuXG4gICAgICpcbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm9vdXQgY29udGV4dHVhbCBob29rcywgc2VlIHRoZSB7QGxpbmsgQ29tbW9uQXBpI2RlY29yYXRlfSBkb2N1bWVudGF0aW9uLlxuICAgICAqXG4gICAgICogVXNhZ2U6XG4gICAgICpcbiAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICogcmVzdG1vZC5taXhpbih7XG4gICAgICogICAkc2F2ZUFuZFRyYWNrOiBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgdmFyIGRzcCA9IHRoaXMuJGRpc3BhdGNoZXIoKSwgLy8gY2FwdHVyZSB0aGUgY3VycmVudCBkaXNwYXRjaGVyIGZ1bmN0aW9uLlxuICAgICAqICAgICAgICAgc2VsZiA9IHRoaXM7XG4gICAgICogICAgIHRoaXMuJHNhdmUoKS4kdGhlbihmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgICB0aGlzLiRzZW5kKHsgcGF0aDogJy90cmFjZXMnLCBkYXRhOiAnYmxlJyB9LCBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgICAgIHRoaXMuJGRlY29yYXRlKGRzcCwgZnVuY3Rpb24oKSB7XG4gICAgICogICAgICAgICAgIC8vIHRoZSBldmVudCBpcyBkaXNwYXRjaGVkIHVzaW5nIHRoZSBkaXNwYXRjaGVyIGZ1bmN0aW9uIGF2YWlsYWJsZSB3aGVuICRzYXZlQW5kVHJhY2sgd2FzIGNhbGxlZC5cbiAgICAgKiAgICAgICAgICAgdGhpcy4kZGlzcGF0Y2goJ3RyYWNlLXN0b3JlZCcpO1xuICAgICAqICAgICAgICAgfSk7XG4gICAgICogICAgICAgfSk7XG4gICAgICogICAgIH0pO1xuICAgICAqICAgfVxuICAgICAqIH0pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbn0gRGlzcGF0Y2hlciBldmFsdWF0b3JcbiAgICAgKi9cbiAgICAkZGlzcGF0Y2hlcjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy4kJGRzcDtcbiAgICB9LFxuXG4gICAgLy8gUHJvbWlzZSBBUElcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBDb21tb25BcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gUmV0dXJucyB0aGlzIG9iamVjdCBsYXN0IHByb21pc2UuXG4gICAgICpcbiAgICAgKiBJZiBwcm9taXNlIGRvZXMgbm90IGV4aXN0LCB0aGVuIGEgbmV3IG9uZSBpcyBnZW5lcmF0ZWQgdGhhdCByZXNvbHZlcyB0byB0aGUgb2JqZWN0IGl0c2VmLiBUaGVcbiAgICAgKiBuZXcgcHJvbWlzZSBpcyBub3Qgc2V0IGFzIHRoZSBjdXJyZW50IG9iamVjdCBwcm9taXNlLCBmb3IgdGhhdCB1c2UgYCR0aGVuYC5cbiAgICAgKlxuICAgICAqIFVzYWdlOlxuICAgICAqXG4gICAgICogYGBgamF2YXNjcmlwdFxuICAgICAqIGNvbC4kZmV0Y2goKS4kYXNQcm9taXNlKCk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtwcm9taXNlfSAkcSBwcm9taXNlXG4gICAgICovXG4gICAgJGFzUHJvbWlzZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgcmV0dXJuIHRoaXMuJHByb21pc2UgPyB0aGlzLiRwcm9taXNlLnRoZW4oXG4gICAgICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3RoaXM7IH0sXG4gICAgICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gJHEucmVqZWN0KF90aGlzKTsgfVxuICAgICAgKSA6ICRxLndoZW4odGhpcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBDb21tb25BcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gUHJvbWlzZSBjaGFpbmluZyBtZXRob2QsIGtlZXBzIHRoZSBtb2RlbCBpbnN0YW5jZSBhcyB0aGUgY2hhaW4gY29udGV4dC5cbiAgICAgKlxuICAgICAqIENhbGxzIGAkcS50aGVuYCBvbiB0aGUgbW9kZWwncyBsYXN0IHByb21pc2UuXG4gICAgICpcbiAgICAgKiBVc2FnZTpcbiAgICAgKlxuICAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAgKiBjb2wuJGZldGNoKCkuJHRoZW4oZnVuY3Rpb24oKSB7IH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gX3N1Y2Nlc3Mgc3VjY2VzcyBjYWxsYmFja1xuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IF9lcnJvciBlcnJvciBjYWxsYmFja1xuICAgICAqIEByZXR1cm4ge0NvbW1vbkFwaX0gc2VsZlxuICAgICAqL1xuICAgICR0aGVuOiBmdW5jdGlvbihfc3VjY2VzcywgX2Vycm9yKSB7XG5cbiAgICAgIGlmKCF0aGlzLiRwcm9taXNlKSB7XG4gICAgICAgIHRoaXMuJHByb21pc2UgPSAkcS53aGVuKHdyYXBQcm9taXNlKHRoaXMsIF9zdWNjZXNzKSh0aGlzKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLiRwcm9taXNlID0gdGhpcy4kcHJvbWlzZS50aGVuKFxuICAgICAgICAgIF9zdWNjZXNzID8gd3JhcFByb21pc2UodGhpcywgX3N1Y2Nlc3MpIDogX3N1Y2Nlc3MsXG4gICAgICAgICAgX2Vycm9yID8gd3JhcFByb21pc2UodGhpcywgX2Vycm9yKSA6IF9lcnJvclxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIENvbW1vbkFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBQcm9taXNlIGNoYWluaW5nIG1ldGhvZCwgc2ltaWxhciB0byB0aGVuIGJ1dCBleGVjdXRlcyBzYW1lIGNhbGxiYWNrIGluIHN1Y2Nlc3Mgb3IgZXJyb3IuXG4gICAgICpcbiAgICAgKiBVc2FnZTpcbiAgICAgKlxuICAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAgKiBjb2wuJGZldGNoKCkuJGFsd2F5cyhmdW5jdGlvbigpIHsgfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBfZnVuIHN1Y2Nlc3MvZXJyb3IgY2FsbGJhY2tcbiAgICAgKiBAcmV0dXJuIHtDb21tb25BcGl9IHNlbGZcbiAgICAgKi9cbiAgICAkYWx3YXlzOiBmdW5jdGlvbihfZnVuKSB7XG4gICAgICByZXR1cm4gdGhpcy4kdGhlbihfZnVuLCBfZnVuKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIENvbW1vbkFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBQcm9taXNlIGNoYWluaW5nLCBrZWVwcyB0aGUgbW9kZWwgaW5zdGFuY2UgYXMgdGhlIGNoYWluIGNvbnRleHQuXG4gICAgICpcbiAgICAgKiBDYWxscyDCtCRxLmZpbmFsbHnCtCBvbiB0aGUgY29sbGVjdGlvbidzIGxhc3QgcHJvbWlzZSwgdXBkYXRlcyBsYXN0IHByb21pc2Ugd2l0aCBmaW5hbGx5IHJlc3VsdC5cbiAgICAgKlxuICAgICAqIFVzYWdlOlxuICAgICAqXG4gICAgICogYGBgamF2YXNjcmlwdFxuICAgICAqIGNvbC4kZmV0Y2goKS4kZmluYWxseShmdW5jdGlvbigpIHsgfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBfY2IgY2FsbGJhY2tcbiAgICAgKiBAcmV0dXJuIHtDb21tb25BcGl9IHNlbGZcbiAgICAgKi9cbiAgICAkZmluYWxseTogZnVuY3Rpb24oX2NiKSB7XG4gICAgICB0aGlzLiRwcm9taXNlID0gdGhpcy4kcHJvbWlzZVsnZmluYWxseSddKHdyYXBQcm9taXNlKHRoaXMsIF9jYikpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIENvbW11bmljYXRpb24gQVBJXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgQ29tbW9uQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIExvdyBsZXZlbCBjb21tdW5pY2F0aW9uIG1ldGhvZCwgd3JhcHMgdGhlICRodHRwIGFwaS5cbiAgICAgKlxuICAgICAqICogWW91IGNhbiBhY2Nlc3MgbGFzdCByZXF1ZXN0IHByb21pc2UgdXNpbmcgdGhlIGAkYXNQcm9taXNlYCBtZXRob2QuXG4gICAgICogKiBQZW5kaW5nIHJlcXVlc3RzIHdpbGwgYmUgYXZhaWxhYmxlIGF0IHRoZSAkcGVuZGluZyBwcm9wZXJ0eSAoYXJyYXkpLlxuICAgICAqICogQ3VycmVudCByZXF1ZXN0IGV4ZWN1dGlvbiBzdGF0dXMgY2FuIGJlIHF1ZXJpZWQgdXNpbmcgdGhlICRzdGF0dXMgcHJvcGVydHkgKGN1cnJlbnQgcmVxdWVzdCwgbm90IGxhc3QpLlxuICAgICAqICogVGhlICRzdGF0dXMgcHJvcGVydHkgcmVmZXJzIHRvIHRoZSBjdXJyZW50IHJlcXVlc3QgaW5zaWRlICRzZW5kIGBfc3VjY2Vzc2AgYW5kIGBfZXJyb3JgIGNhbGxiYWNrcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBfb3B0aW9ucyAkaHR0cCBvcHRpb25zXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gX3N1Y2Nlc3Mgc3VjZXNzIGNhbGxiYWNrIChzeW5jKVxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IF9lcnJvciBlcnJvciBjYWxsYmFjayAoc3luYylcbiAgICAgKiBAcmV0dXJuIHtDb21tb25BcGl9IHNlbGZcbiAgICAgKi9cbiAgICAkc2VuZDogZnVuY3Rpb24oX29wdGlvbnMsIF9zdWNjZXNzLCBfZXJyb3IpIHtcblxuICAgICAgLy8gbWFrZSBzdXJlIGEgc3R5bGUgYmFzZSB3YXMgc2VsZWN0ZWQgZm9yIHRoZSBtb2RlbFxuICAgICAgaWYoIXRoaXMuJHR5cGUuZ2V0UHJvcGVydHkoJ3N0eWxlJykpIHtcbiAgICAgICAgJGxvZy53YXJuKCdObyBBUEkgc3R5bGUgYmFzZSB3YXMgc2VsZWN0ZWQsIHNlZSB0aGUgQXBpIEludGVncmF0aW9uIEZBUSBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB0aGlzIHdhcm5pbmcnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGFjdGlvbiA9IHRoaXMuJCRhY3Rpb247XG5cbiAgICAgIHJldHVybiB0aGlzLiRhbHdheXMoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdGhpcy4kcmVzcG9uc2UgPSBudWxsO1xuICAgICAgICB0aGlzLiRzdGF0dXMgPSAncGVuZGluZyc7XG4gICAgICAgIHRoaXMuJGRpc3BhdGNoKCdiZWZvcmUtcmVxdWVzdCcsIFtfb3B0aW9uc10pO1xuXG4gICAgICAgIHJldHVybiAkaHR0cChfb3B0aW9ucykudGhlbih3cmFwUHJvbWlzZSh0aGlzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZihhY3Rpb24gJiYgYWN0aW9uLmNhbmNlbGVkKSB7XG4gICAgICAgICAgICAvLyBpZiByZXF1ZXN0IHdhcyBjYW5jZWxlZCBkdXJpbmcgcmVxdWVzdCwgaWdub3JlIHBvc3QgcmVxdWVzdCBhY3Rpb25zLlxuICAgICAgICAgICAgdGhpcy4kc3RhdHVzID0gICdjYW5jZWxlZCc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuJHN0YXR1cyA9ICdvayc7XG4gICAgICAgICAgICB0aGlzLiRyZXNwb25zZSA9IHRoaXMuJGxhc3Q7XG4gICAgICAgICAgICB0aGlzLiRkaXNwYXRjaCgnYWZ0ZXItcmVxdWVzdCcsIFt0aGlzLiRsYXN0XSk7XG4gICAgICAgICAgICBpZihfc3VjY2VzcykgX3N1Y2Nlc3MuY2FsbCh0aGlzLCB0aGlzLiRsYXN0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLCB3cmFwUHJvbWlzZSh0aGlzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZihhY3Rpb24gJiYgYWN0aW9uLmNhbmNlbGVkKSB7XG4gICAgICAgICAgICAvLyBpZiByZXF1ZXN0IHdhcyBjYW5jZWxlZCBkdXJpbmcgcmVxdWVzdCwgaWdub3JlIGVycm9yIGhhbmRsaW5nXG4gICAgICAgICAgICB0aGlzLiRzdGF0dXMgPSAnY2FuY2VsZWQnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiRzdGF0dXMgPSAnZXJyb3InO1xuICAgICAgICAgICAgdGhpcy4kcmVzcG9uc2UgPSB0aGlzLiRsYXN0O1xuXG4gICAgICAgICAgICAvLyBJREVBOiBDb25zaWRlciBmbHVzaGluZyBwZW5kaW5nIHJlcXVlc3QgaW4gY2FzZSBvZiBhbiBlcnJvci4gQWxzbyBjb250aW51ZSBpZ25vcmluZyByZXF1ZXN0c1xuICAgICAgICAgICAgLy8gdW50aWwgdGhlIGVycm9yIGZsYWcgaXMgcmVzZXQgYnkgdXNlci5cblxuICAgICAgICAgICAgdGhpcy4kZGlzcGF0Y2goJ2FmdGVyLXJlcXVlc3QtZXJyb3InLCBbdGhpcy4kbGFzdF0pO1xuICAgICAgICAgICAgaWYoX2Vycm9yKSBfZXJyb3IuY2FsbCh0aGlzLCB0aGlzLiRsYXN0KTtcbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QodGhpcyk7IC8vIFRPRE86IHRoaXMgd2lsbCBzdGVwIG92ZXIgYW55IHByb21pc2UgZ2VuZXJhdGVkIGluIF9lcnJvciEhXG4gICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gQWN0aW9ucyBBUElcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBDb21tb25BcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gUmVnaXN0ZXJzIGEgbmV3IGFjdGlvbiB0byBiZSBleGVjdXRlZCBpbiB0aGUgcHJvbWlzZSBxdWV1ZS5cbiAgICAgKlxuICAgICAqIFJlZ2lzdGVyZWQgcGVuZGluZyBhY3Rpb25zIGNhbiBiZSBjYW5jZWxlZCB1c2luZyBgJGNhbmNlbGBcbiAgICAgKlxuICAgICAqIGAkY2FuY2VsYCB3aWxsIGFsc28gY2FuY2VsIGFueSBvbmdvaW5nIGNhbGwgdG8gYCRzZW5kYCAod2lsbCBub3QgYWJvcnQgaXQgeWV0IHRob3VnaC4uLilcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0NvbW1vbkFwaX0gc2VsZlxuICAgICAqL1xuICAgICRhY3Rpb246IGZ1bmN0aW9uKF9mdW4pIHtcbiAgICAgIHZhciBzdGF0dXMgPSB7XG4gICAgICAgIGNhbmNlbGVkOiBmYWxzZVxuICAgICAgfSwgcGVuZGluZyA9IHRoaXMuJHBlbmRpbmcgfHwgKHRoaXMuJHBlbmRpbmcgPSBbXSk7XG5cbiAgICAgIHBlbmRpbmcucHVzaChzdGF0dXMpO1xuXG4gICAgICByZXR1cm4gdGhpcy4kYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgb2xkQWN0aW9uID0gdGhpcy4kJGFjdGlvbjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZighc3RhdHVzLmNhbmNlbGVkKSB7XG4gICAgICAgICAgICB0aGlzLiQkYWN0aW9uID0gc3RhdHVzO1xuICAgICAgICAgICAgcmV0dXJuIF9mdW4uY2FsbCh0aGlzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdCh0aGlzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgLy8gcmVzdG9yZSBvYmplY3Qgc3RhdGUgYW5kIHBlbmRpbmcgYWN0aW9uc1xuICAgICAgICAgIHRoaXMuJCRhY3Rpb24gPSBvbGRBY3Rpb247XG4gICAgICAgIH1cbiAgICAgIH0pLiRmaW5hbGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBhZnRlciBhY3Rpb24gYW5kIHJlbGF0ZWQgYXN5bmMgY29kZSBmaW5pc2hlcywgcmVtb3ZlIHN0YXR1cyBmcm9tIHBlbmRpbmcgbGlzdFxuICAgICAgICBwZW5kaW5nLnNwbGljZShwZW5kaW5nLmluZGV4T2Yoc3RhdHVzKSwgMSk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIENvbW1vbkFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBDYW5jZWxzIGFsbCBwZW5kaW5nIGFjdGlvbnMgcmVnaXN0ZXJlZCB3aXRoICRhY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtDb21tb25BcGl9IHNlbGZcbiAgICAgKi9cbiAgICAkY2FuY2VsOiBmdW5jdGlvbigpIHtcbiAgICAgIC8vIGNhbmNlbCBldmVyeSBwZW5kaW5nIHJlcXVlc3QuXG4gICAgICBpZih0aGlzLiRwZW5kaW5nKSB7XG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh0aGlzLiRwZW5kaW5nLCBmdW5jdGlvbihfc3RhdHVzKSB7XG4gICAgICAgICAgX3N0YXR1cy5jYW5jZWxlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIENvbW1vbkFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBSZXR1cm5zIHRydWUgaWYgb2JqZWN0IGhhcyBxdWV1ZWQgYWN0aW9uc1xuICAgICAqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gT2JqZWN0IHJlcXVlc3QgcGVuZGluZyBzdGF0dXMuXG4gICAgICovXG4gICAgJGhhc1BlbmRpbmdBY3Rpb25zOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwZW5kaW5nQ291bnQgPSAwO1xuXG4gICAgICBpZih0aGlzLiRwZW5kaW5nKSB7XG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh0aGlzLiRwZW5kaW5nLCBmdW5jdGlvbihfc3RhdHVzKSB7XG4gICAgICAgICAgaWYoIV9zdGF0dXMuY2FuY2VsZWQpIHBlbmRpbmdDb3VudCsrO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBlbmRpbmdDb3VudCA+IDA7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBDb21tb25BcGk7XG5cbn1dKTtcblJNTW9kdWxlLmZhY3RvcnkoJ1JNRXh0ZW5kZWRBcGknLCBbJyRxJywgJ1JNUGFja2VyQ2FjaGUnLCBmdW5jdGlvbigkcSwgcGFja2VyQ2FjaGUpIHtcblxuICAvKipcbiAgICogQGNsYXNzIEV4dGVuZGVkQXBpXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBQcm92aWRlcyBhIGNvbW1vbiBmcmFtZXdvcmsgKipvbiB0b3AqKiBvZiB0aGUge0BsaW5rIFJlY29yZEFwaX0gYW5kIHtAbGluayBDb2xsZWN0aW9uQXBpfS5cbiAgICpcbiAgICogQHByb3BlcnR5IHtib29sZWFufSAkcmVzb2x2ZWQgVGhlIGNvbGxlY3Rpb24gcmVzb2x2ZSBzdGF0dXMsIGlzIHVuZGVmaW5lZCBvbiBpbnRpYWxpemF0aW9uXG4gICAqL1xuICByZXR1cm4ge1xuXG4gICAgLy8gb3ZlcnJpZGUgZGVjb2RlIHRvIGRldGVjdCByZXNvbHV0aW9uIG9mIHJlc291cmNlXG4gICAgJGRlY29kZTogZnVuY3Rpb24oX3JhdywgX21hc2spIHtcbiAgICAgIGlmKHRoaXMuJHJlc29sdmVkID09PSBmYWxzZSAmJiB0aGlzLiRjbGVhcikgdGhpcy4kY2xlYXIoKTsgLy8gY2xlYXIgaWYgbm90IHJlc29sdmVkLlxuICAgICAgdGhpcy4kc3VwZXIoX3JhdywgX21hc2spO1xuICAgICAgdGhpcy4kcmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vLyBNaXNjIGNvbW1vbiBtZXRob2RzXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgRXh0ZW5kZWRBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIFVucGFja3MgYW5kIGRlY29kZSByYXcgZGF0YSBmcm9tIGEgc2VydmVyIGdlbmVyYXRlZCBzdHJ1Y3R1cmUuXG4gICAgICpcbiAgICAgKiBBVFRFTlRJT046IGRvIG5vdCBvdmVycmlkZSB0aGlzIG1ldGhvZCB0byBjaGFuZ2UgdGhlIG9iamVjdCB3cmFwcGluZyBzdHJhdGVneSxcbiAgICAgKiBpbnN0ZWFkLCBvdmVycmlkZSB0aGUgc3RhdGljIHtAbGluayBNb2RlbC4kdW5wYWNrfSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHttaXhlZH0gX3JhdyBSYXcgc2VydmVyIGRhdGFcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IF9tYXNrICdDUlUnIG1hc2tcbiAgICAgKiBAcmV0dXJuIHtFeHRlbmRlZEFwaX0gdGhpc1xuICAgICAqL1xuICAgICR1bndyYXA6IGZ1bmN0aW9uKF9yYXcsIF9tYXNrKSB7XG4gICAgICB0cnkge1xuICAgICAgICBwYWNrZXJDYWNoZS5wcmVwYXJlKCk7XG4gICAgICAgIF9yYXcgPSB0aGlzLiR0eXBlLnVucGFjayh0aGlzLCBfcmF3KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGRlY29kZShfcmF3LCBfbWFzayk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBwYWNrZXJDYWNoZS5jbGVhcigpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgRXh0ZW5kZWRBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIEVuY29kZSBhbmQgcGFja3Mgb2JqZWN0IGludG8gYSBzZXJ2ZXIgY29tcGF0aWJsZSBzdHJ1Y3R1cmUgdGhhdCBjYW4gYmUgdXNlZCBmb3IgUFVUL1BPU1Qgb3BlcmF0aW9ucy5cbiAgICAgKlxuICAgICAqIEFUVEVOVElPTjogZG8gbm90IG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGNoYW5nZSB0aGUgb2JqZWN0IHdyYXBwaW5nIHN0cmF0ZWd5LFxuICAgICAqIGluc3RlYWQsIG92ZXJyaWRlIHRoZSBzdGF0aWMge0BsaW5rIE1vZGVsLiRwYWNrfSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IF9tYXNrICdDUlUnIG1hc2tcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IHJhdyBkYXRhXG4gICAgICovXG4gICAgJHdyYXA6IGZ1bmN0aW9uKF9tYXNrKSB7XG4gICAgICB2YXIgcmF3ID0gdGhpcy4kZW5jb2RlKF9tYXNrKTtcbiAgICAgIHJhdyA9IHRoaXMuJHR5cGUucGFjayh0aGlzLCByYXcpO1xuICAgICAgcmV0dXJuIHJhdztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIEV4dGVuZGVkQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIFJlc2V0cyB0aGUgcmVzb3VyY2UncyAkcmVzb2x2ZWQgc3RhdHVzLlxuICAgICAqXG4gICAgICogQWZ0ZXIgYmVpbmcgcmVzZXQsIGNhbGxzIHRvIGAkcmVzb2x2ZWAgd2lsbCBleGVjdXRlIGEgbmV3ICRmZXRjaC5cbiAgICAgKlxuICAgICAqIEFsc28sIGlmIHJlc2V0LCByZXNvdXJjZSB3aWxsIGJlIGNsZWFyZWQgb24gbmV3IGRhdGEuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtFeHRlbmRlZEFwaX0gc2VsZlxuICAgICAqL1xuICAgICRyZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICAvLyBjYW5jZWwgb3V0c2lkZSBwcm9taXNlIGNoYWluXG4gICAgICAvLyBUT0RPOiBmaW5kIGEgd2F5IG9mIG9ubHkgaWdub3JpbmcgcmVxdWVzdHMgdGhhdCB3aWxsIGxlYWQgdG8gcmVzb2x1dGlvbiwgbWF5YmUgdXNpbmcgYWN0aW9uIG1ldGFkYXRhXG4gICAgICByZXR1cm4gdGhpcy4kY2FuY2VsKCkuJGFjdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy4kcmVzb2x2ZWQgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgRXh0ZW5kZWRBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gUmVzb2x2ZXMgdGhlIHJlc291cmNlJ3MgY29udGVudHMuXG4gICAgICpcbiAgICAgKiBJZiBhbHJlYWR5IHJlc29sdmVkIHRoZW4gdGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gYSByZXNvbHZlZCBwcm9taXNlLCBpZiBub3QgdGhlblxuICAgICAqIGl0IHdpbGwgaW5pdGlhdGUgYSBgJGZldGNoYCBvcGVyYXRpb24gYW5kIHJldHVybiB0aGUgb3BlcmF0aW9uIHByb21pc2UuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIHRyaWdnZXIgYSBgYmVmb3JlLXJlc29sdmVgIGV2ZW50IGJlZm9yZSBjaGVja2luZyB0aGUgcmVzb2x2ZSBzdGF0dXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IF9wYXJhbXMgYCRmZXRjaGAgcGFyYW1zXG4gICAgICogQHJldHVybiB7cHJvbWlzZX0gUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSByZXNvdXJjZS5cbiAgICAgKi9cbiAgICAkcmVzb2x2ZTogZnVuY3Rpb24oX3BhcmFtcykge1xuICAgICAgcmV0dXJuIHRoaXMuJGFjdGlvbihmdW5jdGlvbigpIHsgLy8gY2hhaW4gcmVzb2x1dGlvbiBpbiByZXF1ZXN0IHByb21pc2UgY2hhaW5cbiAgICAgICAgdGhpcy4kZGlzcGF0Y2goJ2JlZm9yZS1yZXNvbHZlJywgW10pO1xuICAgICAgICBpZighdGhpcy4kcmVzb2x2ZWQpIHRoaXMuJGZldGNoKF9wYXJhbXMpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBFeHRlbmRlZEFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBSZXNldHMgYW5kIGZldGNoZXMgdGhlIHJlc291cmNlIGNvbnRlbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBfcGFyYW1zIGAkZmV0Y2hgIHBhcmFtc1xuICAgICAqIEByZXR1cm4ge0V4dGVuZGVkQXBpfSBzZWxmXG4gICAgICovXG4gICAgJHJlZnJlc2g6IGZ1bmN0aW9uKF9wYXJhbXMpIHtcbiAgICAgIHJldHVybiB0aGlzLiRyZXNldCgpLiRmZXRjaChfcGFyYW1zKTtcbiAgICB9XG4gIH07XG5cbn1dKTtcblJNTW9kdWxlLmZhY3RvcnkoJ1JNTGlzdEFwaScsIFtmdW5jdGlvbigpIHtcblxuICAvKipcbiAgICogQGNsYXNzIExpc3RBcGlcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uIENvbW1vbiBtZXRob2RzIGZvciBMaXN0cyBhbmQgQ29sbGVjdGlvbnMuXG4gICAqL1xuICByZXR1cm4ge1xuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIExpc3RBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gR2VuZXJhdGVzIGEgbmV3IGxpc3QgZnJvbSB0aGlzIG9uZS5cbiAgICAgKlxuICAgICAqIElmIGNhbGxlZCB3aXRob3V0IGFyZ3VtZW50cywgdGhlIGxpc3QgaXMgcG9wdXBhdGVkIHdpdGggdGhlIHNhbWUgY29udGVudHMgYXMgdGhpcyBsaXN0LlxuICAgICAqXG4gICAgICogSWYgdGhlcmUgaXMgYSBwZW5kaW5nIGFzeW5jIG9wZXJhdGlvbiBvbiB0aGUgaG9zdCBjb2xsZWN0aW9uL2xpc3QsIHRoZW4gdGhpcyBtZXRob2Qgd2lsbFxuICAgICAqIHJldHVybiBhbiBlbXB0eSBsaXN0IGFuZCBmaWxsIGl0IHdoZW4gdGhlIGFzeW5jIG9wZXJhdGlvbiBmaW5pc2hlcy4gSWYgeW91IGRvbid0IG5lZWQgdGhlIGFzeW5jIGJlaGF2aW9yXG4gICAgICogdGhlbiB1c2UgYCR0eXBlLmxpc3RgIGRpcmVjdGx5IHRvIGdlbmVyYXRlIGEgbmV3IGxpc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBfZmlsdGVyIEEgZmlsdGVyIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIHJldHVybiB0aGUgbGlzdCBjb250ZW50cyBhcyBhbiBhcnJheS5cbiAgICAgKiBAcmV0dXJuIHtMaXN0QXBpfSBsaXN0XG4gICAgICovXG4gICAgJGFzTGlzdDogZnVuY3Rpb24oX2ZpbHRlcikge1xuICAgICAgdmFyIGxpc3QgPSB0aGlzLiR0eXBlLmxpc3QoKSxcbiAgICAgICAgICBwcm9taXNlID0gdGhpcy4kYXNQcm9taXNlKCk7XG5cbiAgICAgIC8vIHNldCB0aGUgbGlzdCBpbml0aWFsIHByb21pc2UgdG8gdGhlIHJlc29sdXRpb24gb2YgdGhlIHBhcmVudCBwcm9taXNlLlxuICAgICAgbGlzdC4kcHJvbWlzZSA9IHByb21pc2UudGhlbihmdW5jdGlvbihfdGhpcykge1xuICAgICAgICBsaXN0LnB1c2guYXBwbHkobGlzdCwgX2ZpbHRlciA/IF9maWx0ZXIoX3RoaXMpIDogX3RoaXMpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBsaXN0O1xuICAgIH1cbiAgfTtcblxufV0pO1xuUk1Nb2R1bGUuZmFjdG9yeSgnUk1SZWNvcmRBcGknLCBbJ1JNVXRpbHMnLCBmdW5jdGlvbihVdGlscykge1xuXG4gIC8qKlxuICAgKiBAY2xhc3MgUmVsYXRpb25TY29wZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogU3BlY2lhbCBzY29wZSBhIHJlY29yZCBwcm92aWRlcyB0byByZXNvdXJjZXMgcmVsYXRlZCB2aWEgaGFzTWFueSBvciBoYXNPbmUgcmVsYXRpb24uXG4gICAqL1xuICB2YXIgUmVsYXRpb25TY29wZSA9IGZ1bmN0aW9uKF9zY29wZSwgX3RhcmdldCwgX3BhcnRpYWwpIHtcbiAgICB0aGlzLiRzY29wZSA9IF9zY29wZTtcbiAgICB0aGlzLiR0YXJnZXQgPSBfdGFyZ2V0O1xuICAgIHRoaXMuJHBhcnRpYWwgPSBVdGlscy5jbGVhblVybChfcGFydGlhbCk7XG4gIH07XG5cbiAgUmVsYXRpb25TY29wZS5wcm90b3R5cGUgPSB7XG5cbiAgICAkbmVzdGVkVXJsOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBVdGlscy5qb2luVXJsKHRoaXMuJHNjb3BlLiR1cmwoKSwgdGhpcy4kcGFydGlhbCk7XG4gICAgfSxcblxuICAgIC8vIHVybCBpcyBuZXN0ZWQgZm9yIGNvbGxlY3Rpb25zIGFuZCBuZXN0ZWQgcmVjb3Jkc1xuICAgICR1cmxGb3I6IGZ1bmN0aW9uKF9yZXNvdXJjZSkge1xuICAgICAgaWYoX3Jlc291cmNlLiRpc0NvbGxlY3Rpb24gfHwgdGhpcy4kdGFyZ2V0LmlzTmVzdGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJG5lc3RlZFVybCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHRhcmdldC4kdXJsRm9yKF9yZXNvdXJjZSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIGEgcmVjb3JkJ3MgZmV0Y2ggdXJsIGlzIGFsd2F5cyBuZXN0ZWRcbiAgICAkZmV0Y2hVcmxGb3I6IGZ1bmN0aW9uKC8qIF9yZXNvdXJjZSAqLykge1xuICAgICAgcmV0dXJuIHRoaXMuJG5lc3RlZFVybCgpO1xuICAgIH0sXG5cbiAgICAvLyBjcmVhdGUgaXMgbm90IHBvc2libGUgaW4gbmVzdGVkIG1lbWJlcnNcbiAgICAkY3JlYXRlVXJsRm9yOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQGNsYXNzIFJlY29yZEFwaVxuICAgKiBAZXh0ZW5kcyBDb21tb25BcGlcbiAgICpcbiAgICogQHByb3BlcnR5IHtvYmplY3R9ICRzY29wZSBUaGUgcmVjb3JkJ3Mgc2NvcGUgKHNlZSB7QGxpbmsgU2NvcGVBcGl9KVxuICAgKiBAcHJvcGVydHkge21peGVkfSAkcGsgVGhlIHJlY29yZCdzIHByaW1hcnkga2V5XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBQcm92aWRlcyByZWNvcmQgc3luY2hyb25pemF0aW9uIGFuZCBtYW5pcHVsYXRpb24gbWV0aG9kcy4gVGhpcyBpcyB0aGUgYmFzZSBBUEkgZm9yIGV2ZXJ5IHJlc3Rtb2QgcmVjb3JkLlxuICAgKlxuICAgKiBUT0RPOiBUYWxrIGFib3V0IHRoZSBvYmplY3QgbGlmZWN5Y2xlLlxuICAgKlxuICAgKiAjIyMgT2JqZWN0IGxpZmVjeWNsZSBob29rc1xuICAgKlxuICAgKiBGb3IgYCRmZXRjaGA6XG4gICAqXG4gICAqICogYmVmb3JlLWZldGNoXG4gICAqICogYmVmb3JlLXJlcXVlc3RcbiAgICogKiBhZnRlci1yZXF1ZXN0Wy1lcnJvcl1cbiAgICogKiBhZnRlci1mZWVkIChvbmx5IGNhbGxlZCBpZiBubyBlcnJvcnMpXG4gICAqICogYWZ0ZXItZmV0Y2hbLWVycm9yXVxuICAgKlxuICAgKiBGb3IgYCRzYXZlYCB3aGVuIGNyZWF0aW5nOlxuICAgKlxuICAgKiAqIGJlZm9yZS1yZW5kZXJcbiAgICogKiBiZWZvcmUtc2F2ZVxuICAgKiAqIGJlZm9yZS1jcmVhdGVcbiAgICogKiBiZWZvcmUtcmVxdWVzdFxuICAgKiAqIGFmdGVyLXJlcXVlc3RbLWVycm9yXVxuICAgKiAqIGFmdGVyLWZlZWQgKG9ubHkgY2FsbGVkIGlmIG5vIGVycm9ycylcbiAgICogKiBhZnRlci1jcmVhdGVbLWVycm9yXVxuICAgKiAqIGFmdGVyLXNhdmVbLWVycm9yXVxuICAgKlxuICAgKiBGb3IgYCRzYXZlYCB3aGVuIHVwZGF0aW5nOlxuICAgKlxuICAgKiAqIGJlZm9yZS1yZW5kZXJcbiAgICogKiBiZWZvcmUtc2F2ZVxuICAgKiAqIGJlZm9yZS11cGRhdGVcbiAgICogKiBiZWZvcmUtcmVxdWVzdFxuICAgKiAqIGFmdGVyLXJlcXVlc3RbLWVycm9yXVxuICAgKiAqIGFmdGVyLWZlZWQgKG9ubHkgY2FsbGVkIGlmIG5vIGVycm9ycylcbiAgICogKiBhZnRlci11cGRhdGVbLWVycm9yXVxuICAgKiAqIGFmdGVyLXNhdmVbLWVycm9yXVxuICAgKlxuICAgKiBGb3IgYCRkZXN0cm95YDpcbiAgICpcbiAgICogKiBiZWZvcmUtZGVzdHJveVxuICAgKiAqIGJlZm9yZS1yZXF1ZXN0XG4gICAqICogYWZ0ZXItcmVxdWVzdFstZXJyb3JdXG4gICAqICogYWZ0ZXItZGVzdHJveVstZXJyb3JdXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7bWl4ZWR9ICRwayBUaGUgcmVjb3JkIHByaW1hcnkga2V5XG4gICAqIEBwcm9wZXJ0eSB7b2JqZWN0fSAkc2NvcGUgVGhlIGNvbGxlY3Rpb24gc2NvcGUgKGhpZXJhcmNoaWNhbCBzY29wZSwgbm90IGFuZ3VsYXIgc2NvcGUpXG4gICAqL1xuXHRyZXR1cm4ge1xuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFJlY29yZEFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBDYWxsZWQgYnkgcmVjb3JkIGNvbnN0cnVjdG9yIG9uIGluaXRpYWxpemF0aW9uLlxuICAgICAqXG4gICAgICogTm90ZTogSXMgYmV0dGVyIHRvIGFkZCBhIGhvb2sgdG8gYWZ0ZXItaW5pdCB0aGFuIG92ZXJyaWRpbmcgdGhpcyBtZXRob2QuXG4gICAgICovXG4gICAgJGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gYXBwbHkgZGVmYXVsdHNcbiAgICAgIHRoaXMuJHN1cGVyKCk7XG5cbiAgICAgIC8vIGFmdGVyIGluaXRpYWxpemF0aW9uIGhvb2tcbiAgICAgIC8vIFRPRE86IHB1dCB0aGlzIG9uICRuZXcgc28gaXQgY2FuIHVzZSBzdGFja2VkIERTUD9cbiAgICAgIHRoaXMuJGRpc3BhdGNoKCdhZnRlci1pbml0Jyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBSZWNvcmRBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gQ2FsbGVkIHRoZSByZXNvdXJjZSdzIHNjb3BlICR1cmxGb3IgbWV0aG9kIHRvIGJ1aWxkIHRoZSB1cmwgZm9yIHRoZSByZWNvcmQgdXNpbmcgdGhlIHByb3BlciBzY29wZS5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQgdGhlIHJlc291cmNlIHBhcnRpYWwgdXJsIGlzIGp1c3QgaXRzIGAkcGtgIHByb3BlcnR5LiBUaGlzIGNhbiBiZSBvdmVycmlkZW4gdG8gcHJvdmlkZSBvdGhlciByb3V0aW5nIGFwcHJvYWNoZXMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSByZXNvdXJjZSBwYXJ0aWFsIHVybFxuICAgICAqL1xuICAgICRidWlsZFVybDogZnVuY3Rpb24oX3Njb3BlKSB7XG4gICAgICByZXR1cm4gKHRoaXMuJHBrID09PSB1bmRlZmluZWQgfHwgdGhpcy4kcGsgPT09IG51bGwpID8gbnVsbCA6IFV0aWxzLmpvaW5VcmwoX3Njb3BlLiR1cmwoKSwgdGhpcy4kcGsgKyAnJyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBSZWNvcmRBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gRGVmYXVsdCBpdGVtIGNoaWxkIHNjb3BlIGZhY3RvcnkuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBubyBjcmVhdGUgdXJsIGlzIHByb3ZpZGVkIGFuZCB0aGUgdXBkYXRlL2Rlc3Ryb3kgdXJsIHByb3ZpZGVyc1xuICAgICAqIGF0dGVtcHQgdG8gZmlyc3QgdXNlIHRoZSB1bnNjb3BlZCByZXNvdXJjZSB1cmwuXG4gICAgICpcbiAgICAgKiAvLyBUT0RPOiBjcmVhdGUgc3BlY2lhbCBhcGkgdG8gaG9sZCBzY29wZSAoc28gaXQgaXMgbm90IG5lY2Vzc2FyeSB0byByZWNyZWF0ZSB0aGUgd2hvbGUgb2JqZWN0IGV2ZXJ5IHRpbWUuKVxuICAgICAqXG4gICAgICogQHBhcmFtIHttaXhlZH0gX2ZvciBTY29wZSB0YXJnZXQgdHlwZSwgYWNjZXB0cyBhbnkgbW9kZWwgY2xhc3MuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IF9wYXJ0aWFsIFBhcnRpYWwgcm91dGUuXG4gICAgICogQHJldHVybiB7UmVsYXRpb25TY29wZX0gTmV3IHNjb3BlLlxuICAgICAqL1xuICAgICRidWlsZFNjb3BlOiBmdW5jdGlvbihfZm9yLCBfcGFydGlhbCkge1xuICAgICAgaWYoX2Zvci4kYnVpbGRPd25TY29wZSkge1xuICAgICAgICAvLyBUT0RPXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IFJlbGF0aW9uU2NvcGUodGhpcywgX2ZvciwgX3BhcnRpYWwpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgUmVjb3JkQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIEl0ZXJhdGVzIG92ZXIgdGhlIG9iamVjdCBub24tcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBfZnVuIEZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2hcbiAgICAgKiBAcmV0dXJuIHtSZWNvcmRBcGl9IHNlbGZcbiAgICAgKi9cbiAgICAkZWFjaDogZnVuY3Rpb24oX2Z1biwgX2N0eCkge1xuICAgICAgZm9yKHZhciBrZXkgaW4gdGhpcykge1xuICAgICAgICBpZih0aGlzLmhhc093blByb3BlcnR5KGtleSkgJiYga2V5WzBdICE9PSAnJCcpIHtcbiAgICAgICAgICBfZnVuLmNhbGwoX2N0eCB8fCB0aGlzW2tleV0sIHRoaXNba2V5XSwga2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFJlY29yZEFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBGZWVkIHJhdyBkYXRhIHRvIHRoaXMgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gX3JhdyBSYXcgZGF0YSB0byBiZSBmZWRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX21hc2sgJ0NSVScgbWFza1xuICAgICAqIEByZXR1cm4ge1JlY29yZEFwaX0gdGhpc1xuICAgICAqL1xuICAgICRkZWNvZGU6IGZ1bmN0aW9uKF9yYXcsIF9tYXNrKSB7XG4gICAgICAvLyBJREVBOiBsZXQgdXNlciBvdmVycmlkZSBzZXJpYWxpemVyXG4gICAgICB0aGlzLiR0eXBlLmRlY29kZSh0aGlzLCBfcmF3LCBfbWFzayB8fCBVdGlscy5SRUFEX01BU0spO1xuICAgICAgaWYodGhpcy4kcGsgPT09IHVuZGVmaW5lZCB8fCB0aGlzLiRwayA9PT0gbnVsbCkgdGhpcy4kcGsgPSB0aGlzLiR0eXBlLmluZmVyS2V5KF9yYXcpOyAvLyBUT0RPOiB3YXJuIGlmIGtleSBjaGFuZ2VzXG4gICAgICB0aGlzLiRkaXNwYXRjaCgnYWZ0ZXItZmVlZCcsIFtfcmF3XSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFJlY29yZEFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBHZW5lcmF0ZSBkYXRhIHRvIGJlIHNlbnQgdG8gdGhlIHNlcnZlciB3aGVuIGNyZWF0aW5nL3VwZGF0aW5nIHRoZSByZXNvdXJjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfbWFzayAnQ1JVJyBtYXNrXG4gICAgICogQHJldHVybiB7c3RyaW5nfSByYXcgZGF0YVxuICAgICAqL1xuICAgICRlbmNvZGU6IGZ1bmN0aW9uKF9tYXNrKSB7XG4gICAgICB2YXIgcmF3ID0gdGhpcy4kdHlwZS5lbmNvZGUodGhpcywgX21hc2sgfHwgVXRpbHMuQ1JFQVRFX01BU0spO1xuICAgICAgdGhpcy4kZGlzcGF0Y2goJ2JlZm9yZS1yZW5kZXInLCBbcmF3XSk7XG4gICAgICByZXR1cm4gcmF3O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgUmVjb3JkQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIEJlZ2luIGEgc2VydmVyIHJlcXVlc3QgZm9yIHVwZGF0ZWQgcmVzb3VyY2UgZGF0YS5cbiAgICAgKlxuICAgICAqIFRoZSByZXF1ZXN0J3MgcHJvbWlzZSBjYW4gYmUgYWNjZXNzZWQgdXNpbmcgdGhlIGAkYXNQcm9taXNlYCBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gX3BhcmFtcyBPcHRpb25hbCBsaXN0IG9mIHBhcmFtcyB0byBiZSBwYXNzZWQgdG8gb2JqZWN0IHJlcXVlc3QuXG4gICAgICogQHJldHVybiB7UmVjb3JkQXBpfSB0aGlzXG4gICAgICovXG4gICAgJGZldGNoOiBmdW5jdGlvbihfcGFyYW1zKSB7XG4gICAgICByZXR1cm4gdGhpcy4kYWN0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdXJsID0gdGhpcy4kdXJsKCdmZXRjaCcpO1xuICAgICAgICBVdGlscy5hc3NlcnQoISF1cmwsICdDYW50ICRmZXRjaCBpZiByZXNvdXJjZSBpcyBub3QgYm91bmQnKTtcblxuICAgICAgICB2YXIgcmVxdWVzdCA9IHsgbWV0aG9kOiAnR0VUJywgdXJsOiB1cmwsIHBhcmFtczogX3BhcmFtcyB9O1xuXG4gICAgICAgIHRoaXMuJGRpc3BhdGNoKCdiZWZvcmUtZmV0Y2gnLCBbcmVxdWVzdF0pO1xuICAgICAgICB0aGlzLiRzZW5kKHJlcXVlc3QsIGZ1bmN0aW9uKF9yZXNwb25zZSkge1xuICAgICAgICAgIHRoaXMuJHVud3JhcChfcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgdGhpcy4kZGlzcGF0Y2goJ2FmdGVyLWZldGNoJywgW19yZXNwb25zZV0pO1xuICAgICAgICB9LCBmdW5jdGlvbihfcmVzcG9uc2UpIHtcbiAgICAgICAgICB0aGlzLiRkaXNwYXRjaCgnYWZ0ZXItZmV0Y2gtZXJyb3InLCBbX3Jlc3BvbnNlXSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBSZWNvcmRBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gQ29weWllcyBhbm90aGVyIG9iamVjdCdzIG5vbi1wcml2YXRlIHByb3BlcnRpZXMuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBydW5zIGluc2lkZSB0aGUgcHJvbWlzZSBjaGFpbiwgc28gY2FsbGluZ1xuICAgICAqXG4gICAgICogYGBgamF2YXNjcmlwdFxuICAgICAqIEJpa2UuJGZpbmQoMSkuJGV4dGVuZCh7IHNpemU6IFwiTFwiIH0pLiRzYXZlKCk7XG4gICAgICogYGBgXG4gICAgICogV2lsbCBmaXJzdCBmZXRjaCB0aGUgYmlrZSBkYXRhIGFuZCBhZnRlciBpdCBpcyBsb2FkZWQgdGhlIG5ldyBzaXplIHdpbGwgYmUgYXBwbGllZCBhbmQgdGhlbiB0aGVcbiAgICAgKiB1cGRhdGVkIG1vZGVsIHNhdmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IF9vdGhlciBPYmplY3QgdG8gbWVyZ2UuXG4gICAgICogQHJldHVybiB7UmVjb3JkQXBpfSBzZWxmXG4gICAgICovXG4gICAgJGV4dGVuZDogZnVuY3Rpb24oX290aGVyKSB7XG4gICAgICByZXR1cm4gdGhpcy4kYWN0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IodmFyIHRtcCBpbiBfb3RoZXIpIHtcbiAgICAgICAgICBpZiAoX290aGVyLmhhc093blByb3BlcnR5KHRtcCkgJiYgdG1wWzBdICE9PSAnJCcpIHtcbiAgICAgICAgICAgIHRoaXNbdG1wXSA9IF9vdGhlclt0bXBdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBSZWNvcmRBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gU2hvcnRjdXQgbWV0aG9kIHVzZWQgdG8gZXh0ZW5kIGFuZCBzYXZlIGEgbW9kZWwuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIG5vdCBmb3JjZSBhIFBVVCwgaWYgb2JqZWN0IGlzIG5ldyBgJHVwZGF0ZWAgd2lsbCBhdHRlbXB0IHRvIFBPU1QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gX290aGVyIERhdGEgdG8gY2hhbmdlXG4gICAgICogQHJldHVybiB7UmVjb3JkQXBpfSBzZWxmXG4gICAgICovXG4gICAgJHVwZGF0ZTogZnVuY3Rpb24oX290aGVyKSB7XG4gICAgICByZXR1cm4gdGhpcy4kZXh0ZW5kKF9vdGhlcikuJHNhdmUoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFJlY29yZEFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBCZWdpbiBhIHNlcnZlciByZXF1ZXN0IHRvIGNyZWF0ZS91cGRhdGUvcGF0Y2ggcmVzb3VyY2UuXG4gICAgICpcbiAgICAgKiBBIHBhdGNoIGlzIG9ubHkgZXhlY3V0ZWQgaWYgbW9kZWwgaXMgaWRlbnRpZmllZCBhbmQgYSBwYXRjaCBwcm9wZXJ0eSBsaXN0IGlzIGdpdmVuLiBJdCBpcyBwb3NpYmxlIHRvXG4gICAgICogY2hhbmdlIHRoZSBtZXRob2QgdXNlZCBmb3IgUEFUQ0ggb3BlcmF0aW9ucyBieSBzZXR0aW5nIHRoZSBgcGF0Y2hNZXRob2RgIGNvbmZpZ3VyYXRpb24uXG4gICAgICpcbiAgICAgKiBJZiByZXNvdXJjZSBpcyBuZXcgYW5kIGl0IGJlbG9uZ3MgdG8gYSBjb2xsZWN0aW9uIGFuZCBpdCBoYXNudCBiZWVuIHJldmVhbGVkLCB0aGVuIGl0IHdpbGwgYmUgcmV2ZWFsZWQuXG4gICAgICpcbiAgICAgKiBUaGUgcmVxdWVzdCdzIHByb21pc2UgY2FuIGJlIGFjY2Vzc2VkIHVzaW5nIHRoZSBgJGFzUHJvbWlzZWAgbWV0aG9kLlxuICAgICAqXG4gICAgICogQHBhcmFtIHthcnJheX0gX3BhdGNoIE9wdGlvbmFsIGxpc3Qgb2YgcHJvcGVydGllcyB0byBzZW5kIGluIHVwZGF0ZSBvcGVyYXRpb24uXG4gICAgICogQHJldHVybiB7UmVjb3JkQXBpfSB0aGlzXG4gICAgICovXG4gICAgJHNhdmU6IGZ1bmN0aW9uKF9wYXRjaCkge1xuICAgICAgcmV0dXJuIHRoaXMuJGFjdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHVybCA9IHRoaXMuJHVybCgndXBkYXRlJyksIHJlcXVlc3Q7XG5cbiAgICAgICAgaWYodXJsKSB7XG5cbiAgICAgICAgICAvLyBJZiBib3VuZCwgdXBkYXRlXG4gICAgICAgICAgaWYoX3BhdGNoKSB7XG4gICAgICAgICAgICByZXF1ZXN0ID0ge1xuICAgICAgICAgICAgICBtZXRob2Q6IHRoaXMuJHR5cGUuZ2V0UHJvcGVydHkoJ3BhdGNoTWV0aG9kJywgJ1BBVENIJyksIC8vIGFsbG93IHVzZXIgdG8gb3ZlcnJpZGUgcGF0Y2ggbWV0aG9kXG4gICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAvLyBVc2Ugc3BlY2lhbCBtYXNrIGZvciBwYXRjaGVzLCBtYXNrIGV2ZXJ5dGhpbmcgdGhhdCBpcyBub3QgaW4gdGhlIHBhdGNoIGxpc3QuXG4gICAgICAgICAgICAgIGRhdGE6IHRoaXMuJHdyYXAoZnVuY3Rpb24oX25hbWUpIHtcbiAgICAgICAgICAgICAgICBfbmFtZSA9IF9uYW1lLnJlcGxhY2UoJ1tdJywgJycpO1xuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDAsIGwgPSBfcGF0Y2gubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICBpZihfbmFtZSA9PT0gX3BhdGNoW2ldIHx8XG4gICAgICAgICAgICAgICAgICAgIF9uYW1lLmluZGV4T2YoX3BhdGNoW2ldICsgJy4nKSA9PT0gMCB8fFxuICAgICAgICAgICAgICAgICAgICBfcGF0Y2hbaV0uaW5kZXhPZihfbmFtZSArICcuJykgPT09IDBcbiAgICAgICAgICAgICAgICAgICkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcXVlc3QgPSB7IG1ldGhvZDogJ1BVVCcsIHVybDogdXJsLCBkYXRhOiB0aGlzLiR3cmFwKFV0aWxzLlVQREFURV9NQVNLKSB9O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgIC4kZGlzcGF0Y2goJ2JlZm9yZS11cGRhdGUnLCBbcmVxdWVzdCwgISFfcGF0Y2hdKVxuICAgICAgICAgICAgLiRkaXNwYXRjaCgnYmVmb3JlLXNhdmUnLCBbcmVxdWVzdF0pXG4gICAgICAgICAgICAuJHNlbmQocmVxdWVzdCwgZnVuY3Rpb24oX3Jlc3BvbnNlKSB7XG4gICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgICAgICAuJHVud3JhcChfcmVzcG9uc2UuZGF0YSlcbiAgICAgICAgICAgICAgICAuJGRpc3BhdGNoKCdhZnRlci11cGRhdGUnLCBbX3Jlc3BvbnNlLCAhIV9wYXRjaF0pXG4gICAgICAgICAgICAgICAgLiRkaXNwYXRjaCgnYWZ0ZXItc2F2ZScsIFtfcmVzcG9uc2VdKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKF9yZXNwb25zZSkge1xuICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAgICAgLiRkaXNwYXRjaCgnYWZ0ZXItdXBkYXRlLWVycm9yJywgW19yZXNwb25zZSwgISFfcGF0Y2hdKVxuICAgICAgICAgICAgICAgIC4kZGlzcGF0Y2goJ2FmdGVyLXNhdmUtZXJyb3InLCBbX3Jlc3BvbnNlXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiBub3QgYm91bmQgY3JlYXRlLlxuICAgICAgICAgIHVybCA9IHRoaXMuJHVybCgnY3JlYXRlJykgfHwgdGhpcy4kc2NvcGUuJHVybCgpO1xuICAgICAgICAgIFV0aWxzLmFzc2VydCghIXVybCwgJ0NhbnQgJGNyZWF0ZSBpZiBwYXJlbnQgc2NvcGUgaXMgbm90IGJvdW5kJyk7XG5cbiAgICAgICAgICByZXF1ZXN0ID0geyBtZXRob2Q6ICdQT1NUJywgdXJsOiB1cmwsIGRhdGE6IHRoaXMuJHdyYXAoVXRpbHMuQ1JFQVRFX01BU0spIH07XG4gICAgICAgICAgdGhpc1xuICAgICAgICAgICAgLiRkaXNwYXRjaCgnYmVmb3JlLXNhdmUnLCBbcmVxdWVzdF0pXG4gICAgICAgICAgICAuJGRpc3BhdGNoKCdiZWZvcmUtY3JlYXRlJywgW3JlcXVlc3RdKVxuICAgICAgICAgICAgLiRzZW5kKHJlcXVlc3QsIGZ1bmN0aW9uKF9yZXNwb25zZSkge1xuICAgICAgICAgICAgICB0aGlzLiR1bndyYXAoX3Jlc3BvbnNlLmRhdGEpO1xuXG4gICAgICAgICAgICAgIC8vIHJldmVhbCBpdGVtIChpZiBub3QgeWV0IHBvc2l0aW9uZWQpXG4gICAgICAgICAgICAgIGlmKHRoaXMuJHNjb3BlLiRpc0NvbGxlY3Rpb24gJiYgdGhpcy4kcG9zaXRpb24gPT09IHVuZGVmaW5lZCAmJiAhdGhpcy4kcHJldmVudFJldmVhbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLiRhZGQodGhpcywgdGhpcy4kcmV2ZWFsQXQpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgICAgIC4kZGlzcGF0Y2goJ2FmdGVyLWNyZWF0ZScsIFtfcmVzcG9uc2VdKVxuICAgICAgICAgICAgICAgIC4kZGlzcGF0Y2goJ2FmdGVyLXNhdmUnLCBbX3Jlc3BvbnNlXSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbihfcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgICAgIC4kZGlzcGF0Y2goJ2FmdGVyLWNyZWF0ZS1lcnJvcicsIFtfcmVzcG9uc2VdKVxuICAgICAgICAgICAgICAgIC4kZGlzcGF0Y2goJ2FmdGVyLXNhdmUtZXJyb3InLCBbX3Jlc3BvbnNlXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBSZWNvcmRBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gQmVnaW4gYSBzZXJ2ZXIgcmVxdWVzdCB0byBkZXN0cm95IHRoZSByZXNvdXJjZS5cbiAgICAgKlxuICAgICAqIFRoZSByZXF1ZXN0J3MgcHJvbWlzZSBjYW4gYmUgYWNjZXNzZWQgdXNpbmcgdGhlIGAkYXNQcm9taXNlYCBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtSZWNvcmRBcGl9IHRoaXNcbiAgICAgKi9cbiAgICAkZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy4kYWN0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdXJsID0gdGhpcy4kdXJsKCdkZXN0cm95Jyk7XG4gICAgICAgIGlmKHVybClcbiAgICAgICAge1xuICAgICAgICAgIHZhciByZXF1ZXN0ID0geyBtZXRob2Q6ICdERUxFVEUnLCB1cmw6IHVybCB9O1xuXG4gICAgICAgICAgdGhpc1xuICAgICAgICAgICAgLiRkaXNwYXRjaCgnYmVmb3JlLWRlc3Ryb3knLCBbcmVxdWVzdF0pXG4gICAgICAgICAgICAuJHNlbmQocmVxdWVzdCwgZnVuY3Rpb24oX3Jlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgICAgLy8gcmVtb3ZlIGZyb20gc2NvcGVcbiAgICAgICAgICAgICAgaWYodGhpcy4kc2NvcGUuJHJlbW92ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLiRyZW1vdmUodGhpcyk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLiRkaXNwYXRjaCgnYWZ0ZXItZGVzdHJveScsIFtfcmVzcG9uc2VdKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKF9yZXNwb25zZSkge1xuICAgICAgICAgICAgICB0aGlzLiRkaXNwYXRjaCgnYWZ0ZXItZGVzdHJveS1lcnJvcicsIFtfcmVzcG9uc2VdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgIC8vIElmIG5vdCB5ZXQgYm91bmQsIGp1c3QgcmVtb3ZlIGZyb20gcGFyZW50XG4gICAgICAgICAgaWYodGhpcy4kc2NvcGUuJHJlbW92ZSkgdGhpcy4kc2NvcGUuJHJlbW92ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8vIENvbGxlY3Rpb24gcmVsYXRlZCBtZXRob2RzLlxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFJlY29yZEFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBDaGFuZ2VzIHRoZSBsb2NhdGlvbiBvZiB0aGUgb2JqZWN0IGluIHRoZSBib3VuZCBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogSWYgb2JqZWN0IGhhc24ndCBiZWVuIHJldmVhbGVkLCB0aGVuIHRoaXMgbWV0aG9kIHdpbGwgY2hhbmdlIHRoZSBpbmRleCB3aGVyZSBvYmplY3Qgd2lsbCBiZSByZXZlYWxlZCBhdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge2ludGVnZXJ9IF90byBOZXcgb2JqZWN0IHBvc2l0aW9uIChpbmRleClcbiAgICAgKiBAcmV0dXJuIHtSZWNvcmRBcGl9IHRoaXNcbiAgICAgKi9cbiAgICAkbW92ZVRvOiBmdW5jdGlvbihfdG8pIHtcbiAgICAgIGlmKHRoaXMuJHBvc2l0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gVE9ETzogbW92ZSBpdGVtIHRvIGdpdmVuIGluZGV4LlxuICAgICAgICAvLyBUT0RPOiBjYWxsYmFja1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy4kcmV2ZWFsQXQgPSBfdG87XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFJlY29yZEFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBSZXZlYWwgaW4gY29sbGVjdGlvblxuICAgICAqXG4gICAgICogSWYgaW5zdGFuY2UgaXMgYm91bmQgdG8gYSBjb2xsZWN0aW9uIGFuZCBpdCBoYXNudCBiZWVuIHJldmVhbGVkIChiZWNhdXNlIGl0J3MgbmV3IGFuZCBoYXNuJ3QgYmVlbiBzYXZlZCksXG4gICAgICogdGhlbiBjYWxsaW5nIHRoaXMgbWV0aG9kIHdpdGhvdXQgcGFyYW1ldGVycyB3aWxsIGZvcmNlIHRoZSBvYmplY3QgdG8gYmUgYWRkZWQgdG8gdGhlIGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBJZiB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgd2l0aCAqKl9zaG93Kiogc2V0IHRvIGBmYWxzZWAsIHRoZW4gdGhlIG9iamVjdCB3b250IGJlIHJldmVhbGVkIGJ5IGEgc2F2ZSBvcGVyYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSBfc2hvdyBXaGV0aGVyIHRvIHJldmVhbCBpbm1lZGlhdGVsbHkgb3IgcHJldmVudCBhdXRvbWF0aWMgcmV2ZWFsLlxuICAgICAqIEByZXR1cm4ge1JlY29yZEFwaX0gdGhpc1xuICAgICAqL1xuICAgICRyZXZlYWw6IGZ1bmN0aW9uKF9zaG93KSB7XG4gICAgICBpZihfc2hvdyA9PT0gdW5kZWZpbmVkIHx8IF9zaG93KSB7XG4gICAgICAgIHRoaXMuJHNjb3BlLiRhZGQodGhpcywgdGhpcy4kcmV2ZWFsQXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy4kcHJldmVudFJldmVhbCA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07XG5cbn1dKTtcblJNTW9kdWxlLmZhY3RvcnkoJ1JNU2NvcGVBcGknLCBbJ1JNVXRpbHMnLCBmdW5jdGlvbihVdGlscykge1xuXG4gIC8qKlxuICAgKiBAY2xhc3MgU2NvcGVBcGlcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uIENvbW1vbiBiZWhhdmlvdXIgZm9yIHJlY29yZCBzY29wZXMuXG4gICAqXG4gICAqIFJlY29yZCBzY29wZXMgYXJlIHN0YXJ0aW5nIHBvaW50cyBmb3IgcmVjb3JkIG9wZXJhdGlvbnMgKGxpa2UgYmFzZSB0eXBlIG9yIGEgY29sbGVjdGlvbilcbiAgICpcbiAgICogVE9ETzogVGFsayBhYm91dCByZWNvcmQgYnVpbGRpbmcgaGVyZVxuICAgKi9cbiAgcmV0dXJuIHtcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBTY29wZUFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBwcm92aWRlcyB1cmxzIGZvciBzY29wZSdzIHJlc291cmNlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bWl4ZWR9IF9yZXNvdXJjZSBUaGUgdGFyZ2V0IHJlc291cmNlLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3xudWxsfSBUaGUgdXJsIG9yIG5pbGwgaWYgcmVzb3VyY2UgZG9lcyBub3QgbWVldCB0aGUgdXJsIHJlcXVpcmVtZW50cy5cbiAgICAgKi9cbiAgICAkdXJsRm9yOiBmdW5jdGlvbihfcmVzb3VyY2UpIHtcbiAgICAgIC8vIGZvcmNlIGl0ZW0gdW5zY29waW5nIGlmIG1vZGVsIGlzIG5vdCBuZXN0ZWQgKG1heWJlIG1ha2UgdGhpcyBvcHRpb25hbClcbiAgICAgIHZhciBzY29wZSA9IHRoaXMuJHR5cGUuaXNOZXN0ZWQoKSA/IHRoaXMgOiB0aGlzLiR0eXBlO1xuICAgICAgcmV0dXJuIHR5cGVvZiBfcmVzb3VyY2UuJGJ1aWxkVXJsID09PSAnZnVuY3Rpb24nID8gX3Jlc291cmNlLiRidWlsZFVybChzY29wZSkgOiBzY29wZS4kdXJsKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBTY29wZUFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBCdWlsZHMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhpcyBtb2RlbCwgYm91bmQgdG8gdGhpcyBpbnN0YW5jZSBzY29wZSwgc2V0cyBpdHMgcHJpbWFyeSBrZXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge21peGVkfSBfcGsgb2JqZWN0IHByaXZhdGUga2V5XG4gICAgICogQHBhcmFtIHtvYmplY3R9IF9zY29wZSBzY29wZSBvdmVycmlkZSAob3B0aW9uYWwpXG4gICAgICogQHJldHVybiB7UmVjb3JkQXBpfSBOZXcgbW9kZWwgaW5zdGFuY2VcbiAgICAgKi9cbiAgICAkbmV3OiBmdW5jdGlvbihfcGssIF9zY29wZSkge1xuICAgICAgcmV0dXJuIHRoaXMuJHN1cGVyKF9waywgX3Njb3BlKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFNjb3BlQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIEJ1aWxkcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGlzIG1vZGVsLCBkb2VzIG5vdCBhc3NpZ24gYSBwayB0byB0aGUgY3JlYXRlZCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBBVFRFTlRJT046IGl0ZW0gd2lsbCBub3Qgc2hvdyBpbiBjb2xsZWN0aW9uIHVudGlsIGAkc2F2ZWAgaXMgY2FsbGVkLiBUbyByZXZlYWwgaXRlbSBiZWZvcmUgdGhhbiBjYWxsIGAkcmV2ZWFsYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge29iamVjdH0gX2luaXQgSW5pdGlhbCB2YWx1ZXNcbiAgICAgKiBAcmV0dXJuIHtSZWNvcmRBcGl9IHNpbmdsZSByZWNvcmRcbiAgICAgKi9cbiAgICAkYnVpbGQ6IGZ1bmN0aW9uKF9pbml0KSB7XG4gICAgICByZXR1cm4gdGhpcy4kbmV3KCkuJGV4dGVuZChfaW5pdCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBTY29wZUFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBCdWlsZHMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhpcyBtb2RlbCB1c2luZyB1bmRlY29kZWQgZGF0YS5cbiAgICAgKlxuICAgICAqIEFUVEVOVElPTjogZG9lcyBub3QgYXV0b21hdGljYWxseSByZXZlYWwgaXRlbSBpbiBjb2xsZWN0aW9uLCBjaGFpbiBhIGNhbGwgdG8gJHJldmVhbCB0byBkbyBzby5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge29iamVjdH0gX3JhdyBVbmRlY29kZWQgZGF0YVxuICAgICAqIEByZXR1cm4ge1JlY29yZEFwaX0gc2luZ2xlIHJlY29yZFxuICAgICAqL1xuICAgICRidWlsZFJhdzogZnVuY3Rpb24oX3JhdywgX21hc2spIHtcbiAgICAgIHZhciBvYmogPSB0aGlzLiRuZXcodGhpcy4kdHlwZS5pbmZlcktleShfcmF3KSk7XG4gICAgICBvYmouJGRlY29kZShfcmF3LCBfbWFzayk7XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgU2NvcGVBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gQXR0ZW1wdHMgdG8gcmVzb2x2ZSBhIHJlc291cmNlIHVzaW5nIHByb3ZpZGVkIHByaXZhdGUga2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHttaXhlZH0gX3BrIFByaXZhdGUga2V5XG4gICAgICogQHBhcmFtIHtvYmplY3R9IF9wYXJhbXMgQWRkaXRpb25hbCBxdWVyeSBwYXJhbWV0ZXJzXG4gICAgICogQHJldHVybiB7UmVjb3JkQXBpfSBzaW5nbGUgcmVjb3JkXG4gICAgICovXG4gICAgJGZpbmQ6IGZ1bmN0aW9uKF9waywgX3BhcmFtcykge1xuICAgICAgcmV0dXJuIHRoaXMuJG5ldyhfcGspLiRyZXNvbHZlKF9wYXJhbXMpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgU2NvcGVBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gQnVpbGRzIGFuZCBzYXZlcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGlzIG1vZGVsXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IF9hdHRyIERhdGEgdG8gYmUgc2F2ZWRcbiAgICAgKiBAcmV0dXJuIHtSZWNvcmRBcGl9IHNpbmdsZSByZWNvcmRcbiAgICAgKi9cbiAgICAkY3JlYXRlOiBmdW5jdGlvbihfYXR0cikge1xuICAgICAgcmV0dXJuIHRoaXMuJGJ1aWxkKF9hdHRyKS4kc2F2ZSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgU2NvcGVBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gQnVpbGRzIGEgbmV3IGNvbGxlY3Rpb24gYm91bmQgdG8gdGhpcyBzY29wZS5cbiAgICAgKlxuICAgICAqIElmIHNjb3BlIGlzIGFub3RoZXIgY29sbGVjdGlvbiB0aGVuIGl0IHdpbGwgaW5oZXJpdCBpdHMgcGFyYW1ldGVyc1xuICAgICAqXG4gICAgICogQ29sbGVjdGlvbnMgYXJlIGJvdW5kIHRvIGFuIGFwaSByZXNvdXJjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge29iamVjdH0gX3BhcmFtcyAgQWRkaXRpb25hbCBxdWVyeSBzdHJpbmcgcGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSAge29iamVjdH0gX3Njb3BlICBTY29wZSBvdmVycmlkZSAob3B0aW9uYWwpXG4gICAgICogQHJldHVybiB7Q29sbGVjdGlvbkFwaX0gTW9kZWwgQ29sbGVjdGlvblxuICAgICAqL1xuICAgICRjb2xsZWN0aW9uOiBmdW5jdGlvbihfcGFyYW1zLCBfc2NvcGUpIHtcbiAgICAgIHJldHVybiB0aGlzLiRzdXBlcihfcGFyYW1zLCBfc2NvcGUpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgU2NvcGVBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gR2VuZXJhdGVzIGEgbmV3IGNvbGxlY3Rpb24gYm91bmQgdG8gdGhpcyBjb250ZXh0IGFuZCB1cmwgYW5kIGNhbGxzICRmZXRjaCBvbiBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBfcGFyYW1zIENvbGxlY3Rpb24gcGFyYW1ldGVyc1xuICAgICAqIEByZXR1cm4ge0NvbGxlY3Rpb25BcGl9IHJlY29yZCBjb2xsZWN0aW9uXG4gICAgICovXG4gICAgJHNlYXJjaDogZnVuY3Rpb24oX3BhcmFtcykge1xuICAgICAgcmV0dXJuIHRoaXMuJGNvbGxlY3Rpb24oX3BhcmFtcykuJGZldGNoKCk7XG4gICAgfVxuICB9O1xuXG59XSk7XG5STU1vZHVsZS5mYWN0b3J5KCdSTUJ1aWxkZXInLCBbJyRpbmplY3RvcicsICdpbmZsZWN0b3InLCAnJGxvZycsICdSTVV0aWxzJywgZnVuY3Rpb24oJGluamVjdG9yLCBpbmZsZWN0b3IsICRsb2csIFV0aWxzKSB7XG5cbiAgLy8gVE9ETzogYWRkIHVybFByZWZpeCBvcHRpb25cblxuICB2YXIgZm9yRWFjaCA9IGFuZ3VsYXIuZm9yRWFjaCxcbiAgICAgIGlzT2JqZWN0ID0gYW5ndWxhci5pc09iamVjdCxcbiAgICAgIGlzQXJyYXkgPSBhbmd1bGFyLmlzQXJyYXksXG4gICAgICBpc0Z1bmN0aW9uID0gYW5ndWxhci5pc0Z1bmN0aW9uLFxuICAgICAgZXh0ZW5kID0gYW5ndWxhci5leHRlbmQsXG4gICAgICBWQVJfUkdYID0gL15bQS1aXStbQS1aXzAtOV0qJC87XG5cbiAgLyoqXG4gICAqIEBjbGFzcyBCdWlsZGVyQXBpXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBQcm92aWRlcyB0aGUgRFNMIGZvciBtb2RlbCBnZW5lcmF0aW9uLCBpdCBzdXBwb3J0cyB0byBtb2RlcyBvZiBtb2RlbCBkZWZpbml0aW9uczpcbiAgICpcbiAgICogIyMgRGVmaW5pdGlvbiBvYmplY3RcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgcHJlZmVycmVkIHdheSBvZiBkZXNjcmliaW5nIGEgbW9kZWwgYmVoYXZpb3IuXG4gICAqXG4gICAqIEEgbW9kZWwgZGVzY3JpcHRpb24gb2JqZWN0IGxvb2tzIGxpa2UgdGhpczpcbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiByZXN0bW9kLm1vZGVsKHtcbiAgICpcbiAgICogICAvLyBNT0RFTCBDT05GSUdVUkFUSU9OXG4gICAqXG4gICAqICAgJGNvbmZpZzoge1xuICAgKiAgICAgbmFtZTogJ3Jlc291cmNlJyxcbiAgICogICAgIHByaW1hcnlLZXk6ICdfaWQnXG4gICAqICAgfSxcbiAgICpcbiAgICogICAvLyBBVFRSSUJVVEUgTU9ESUZJRVJTIEFORCBSRUxBVElPTlNcbiAgICpcbiAgICogICBwcm9wV2l0aERlZmF1bHQ6IHsgaW5pdDogMjAgfSxcbiAgICogICBwcm9wV2l0aERlY29kZXI6IHsgZGVjb2RlOiAnZGF0ZScsIGNoYWluOiB0cnVlIH0sXG4gICAqICAgaGFzTWFueVJlbGF0aW9uOiB7IGhhc01hbnk6ICdPdGhlcicgfSxcbiAgICogICBoYXNPbmVSZWxhdGlvbjogeyBoYXNPbmU6ICdPdGhlcicgfSxcbiAgICpcbiAgICogICAvLyBIT09LU1xuICAgKlxuICAgKiAgICRob29rczoge1xuICAgKiAgICAgJ2FmdGVyLWNyZWF0ZSc6IGZ1bmN0aW9uKCkge1xuICAgKiAgICAgfVxuICAgKiAgIH0sXG4gICAqXG4gICAqICAgLy8gTUVUSE9EU1xuICAgKlxuICAgKiAgICRleHRlbmQ6IHtcbiAgICogICAgIFJlY29yZDoge1xuICAgKiAgICAgICBpbnN0YW5jZU1ldGhvZDogZnVuY3Rpb24oKSB7XG4gICAqICAgICAgIH1cbiAgICogICAgIH0sXG4gICAqICAgICBNb2RlbDoge1xuICAgKiAgICAgICBzY29wZU1ldGhvZDogZnVuY3Rpb24oKSB7XG4gICAqICAgICAgIH1cbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogU3BlY2lhbCBtb2RlbCBjb25maWd1cmF0aW9uIHZhcmlhYmxlcyBjYW4gYmUgc2V0IGJ5IHVzaW5nIGEgYCRjb25maWdgIGJsb2NrOlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIHJlc3Rtb2QubW9kZWwoe1xuICAgKlxuICAgKiAgICRjb25maWc6IHtcbiAgICogICAgIG5hbWU6ICdyZXNvdXJjZScsXG4gICAqICAgICBwcmltYXJ5S2V5OiAnX2lkJ1xuICAgKiAgIH1cbiAgICpcbiAgICogIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogV2l0aCB0aGUgZXhjZXB0aW9uIG9mIG1vZGVsIGNvbmZpZ3VyYXRpb24gdmFyaWFibGVzIGFuZCBwcm9wZXJ0aWVzIHN0YXJ0aW5nIHdpdGggYSBzcGVjaWFsIGNoYXJhY3RlciAoKipAKiogb3IgKip+KiopLFxuICAgKiBlYWNoIHByb3BlcnR5IGluIHRoZSBkZWZpbml0aW9uIG9iamVjdCBhc2lnbnMgYSBiZWhhdmlvciB0byB0aGUgc2FtZSBuYW1lZCBwcm9wZXJ0eSBpbiBhIG1vZGVsJ3MgcmVjb3JkLlxuICAgKlxuICAgKiBUbyBtb2RpZnkgYSBwcm9wZXJ0eSBiZWhhdmlvciBhc3NpZ24gYW4gb2JqZWN0IHdpdGggdGhlIGRlc2lyZWQgbW9kaWZpZXJzIHRvIGFcbiAgICogZGVmaW5pdGlvbiBwcm9wZXJ0eSB3aXRoIHRoZSBzYW1lIG5hbWUuIEJ1aWx0aW4gbW9kaWZpZXJzIGFyZTpcbiAgICpcbiAgICogVGhlIGZvbGxvd2luZyBidWlsdCBpbiBwcm9wZXJ0eSBtb2RpZmllcnMgYXJlIHByb3ZpZGVkIChzZWUgZWFjaCBtYXBwZWQtbWV0aG9kIGRvY3MgZm9yIHVzYWdlIGluZm9ybWF0aW9uKTpcbiAgICpcbiAgICogKiBgaW5pdGAgc2V0cyBhbiBhdHRyaWJ1dGUgZGVmYXVsdCB2YWx1ZSwgc2VlIHtAbGluayBCdWlsZGVyQXBpI2F0dHJEZWZhdWx0fVxuICAgKiAqIGBtYXNrYCBhbmQgYGlnbm9yZWAgc2V0cyBhbiBhdHRyaWJ1dGUgbWFzaywgc2VlIHtAbGluayBCdWlsZGVyQXBpI2F0dHJNYXNrfVxuICAgKiAqIGBtYXBgIHNldHMgYW4gZXhwbGljaXQgc2VydmVyIGF0dHJpYnV0ZSBtYXBwaW5nLCBzZWUge0BsaW5rIEJ1aWxkZXJBcGkjYXR0ck1hcH1cbiAgICogKiBgZGVjb2RlYCBzZXRzIGhvdyBhbiBhdHRyaWJ1dGUgaXMgZGVjb2RlZCBhZnRlciBiZWluZyBmZXRjaCwgbWFwcyB0byB7QGxpbmsgQnVpbGRlckFwaSNhdHRyRGVjb2Rlcn1cbiAgICogKiBgZW5jb2RlYCBzZXRzIGhvdyBhbiBhdHRyaWJ1dGUgaXMgZW5jb2RlZCBiZWZvcmUgYmVpbmcgc2VudCwgbWFwcyB0byB7QGxpbmsgQnVpbGRlckFwaSNhdHRyRW5jb2Rlcn1cbiAgICogKiBgdm9sYXRpbGVgIHNldHMgdGhlIGF0dHJpYnV0ZSB2b2xhdGlsaXR5LCBtYXBzIHRvIHtAbGluayBCdWlsZGVyQXBpI2F0dHJWb2xhdGlsZX1cbiAgICpcbiAgICogKipGb3IgcmVsYXRpb25zIG1vZGlmaWVycyB0YWtlIGEgbG9vayBhdCB7QGxpbmsgUmVsYXRpb25CdWlsZGVyQXBpfSoqXG4gICAqXG4gICAqICoqRm9yIG90aGVyIGV4dGVuZGVkIGJ1bmRsZWQgbWV0aG9kcyBjaGVjayBvdXQgdGhlIHtAbGluayBFeHRlbmRlZEJ1aWxkZXJBcGl9KipcbiAgICpcbiAgICogSWYgb3RoZXIga2luZCBvZiB2YWx1ZSAoZGlmZmVyZW50IGZyb20gb2JqZWN0IG9yIGZ1bmN0aW9uKSBpcyBwYXNzZWQgdG8gYSBkZWZpbml0aW9uIHByb3BlcnR5LFxuICAgKiB0aGVuIGl0IGlzIGNvbnNpZGVyZWQgdG8gYmUgYSBkZWZhdWx0IHZhbHVlLiAoc2FtZSBhcyBjYWxsaW5nIHtAbGluayBCdWlsZGVyQXBpI2RlZmluZX0gYXQgYSBkZWZpbml0aW9uIGZ1bmN0aW9uKVxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIHZhciBNb2RlbCA9IHJlc3Rtb2QubW9kZWwoJy8nLCB7XG4gICAqICAgaW0yMDogMjAgLy8gc2FtZSBhcyB7IGluaXQ6IDIwIH1cbiAgICogfSlcbiAgICpcbiAgICogLy8gdGhlbiBzYXkgaGVsbG8gaXMgYXZhaWxhYmxlIGZvciB1c2UgYXQgbW9kZWwgcmVjb3Jkc1xuICAgKiBNb2RlbC4kbmV3KCkuaW0yMDsgLy8gMjBcbiAgICogYGBgXG4gICAqXG4gICAqIFRvIGFkZC9vdmVycmlkZSBtZXRob2RzIGZyb20gdGhlIHJlY29yZCBhcGksIHVzZSB0aGUgYCRleHRlbmRgIGJsb2NrOlxuICAgKlxuICAgKiBgYGBqYXZhc2NyaXB0XG4gICAqIHZhciBNb2RlbCA9IHJlc3Rtb2QubW9kZWwoJy8nLCB7XG4gICAqICAgJGV4dGVuZDoge1xuICAgKiAgICAgc2F5SGVsbG86IGZ1bmN0aW9uKCkgeyBhbGVydCgnaGVsbG8hJyk7IH1cbiAgICogICB9XG4gICAqIH0pXG4gICAqXG4gICAqIC8vIHRoZW4gc2F5IGhlbGxvIGlzIGF2YWlsYWJsZSBmb3IgdXNlIGF0IG1vZGVsIHJlY29yZHNcbiAgICogTW9kZWwuJG5ldygpLnNheUhlbGxvKCk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBUbyBhZGQgYSBzdGF0aWMgbWV0aG9kIG9yIGEgY29sbGVjdGlvbiBtZXRob2QsIHlvdSBtdXN0IHNwZWNpZnkgdGhlIG1ldGhvZCBzY29wZTogLCBwcmVmaXggdGhlIGRlZmluaXRpb24ga2V5IHdpdGggKipeKiosIHRvIGFkZCBpdCB0byB0aGUgbW9kZWwgY29sbGVjdGlvbiBwcm90b3R5cGUsXG4gICAqIHByZWZpeCBpdCB3aXRoICoqKioqIHN0YXRpYy9jb2xsZWN0aW9uIG1ldGhvZHMgdG8gdGhlIE1vZGVsLCBwcmVmaXggdGhlIGRlZmluaXRpb24gcHJvcGVydHkgbmFtZSB3aXRoICoqQCoqXG4gICAqIChzYW1lIGFzIGNhbGxpbmcge0BsaW5rIEJ1aWxkZXJBcGkjc2NvcGVEZWZpbmV9IGF0IGEgZGVmaW5pdGlvbiBmdW5jdGlvbikuXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogdmFyIE1vZGVsID0gcmVzdG1vZC5tb2RlbCgnLycsIHtcbiAgICogICAkZXh0ZW5kOiB7XG4gICAqICAgICAnQ29sbGVjdGlvbi5jb3VudCc6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5sZW5ndGg7IH0sICAvLyBzY29wZSBpcyBzZXQgdXNpbmcgYSBwcmVmaXhcbiAgICpcbiAgICogICAgIE1vZGVsOiB7XG4gICAqICAgICAgIHNheUhlbGxvOiBmdW5jdGlvbigpIHsgYWxlcnQoJ2hlbGxvIScpOyB9IC8vIHNjb3BlIGlzIHNldCB1c2luZyBhIGJsb2NrXG4gICAqICAgICB9XG4gICAqIH0pXG4gICAqXG4gICAqIC8vIHRoZW4gdGhlIGZvbGxvd2luZyBjYWxsIHdpbGwgYmUgdmFsaWQuXG4gICAqIE1vZGVsLnNheUhlbGxvKCk7XG4gICAqIE1vZGVsLiRjb2xsZWN0aW9uKCkuY291bnQoKTtcbiAgICogYGBgXG4gICAqXG4gICAqIE1vcmUgaW5mb3JtYXRpb24gYWJvdXQgbWV0aG9kIHNjb3BlcyBjYW4gYmUgZm91bmQgaW4ge0BsaW5rIEJ1aWxkZXJBcGkjZGVmaW5lfVxuICAgKlxuICAgKiBUbyBhZGQgaG9va3MgdG8gdGhlIE1vZGVsIGxpZmVjeWNsZSBldmVudHMgdXNlIHRoZSBgJGhvb2tzYCBibG9jazpcbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiB2YXIgTW9kZWwgPSByZXN0bW9kLm1vZGVsKCcvJywge1xuICAgKiAgICRob29rczoge1xuICAgKiAgICAgJ2FmdGVyLWluaXQnOiBmdW5jdGlvbigpIHsgYWxlcnQoJ2hlbGxvIScpOyB9XG4gICAqICAgfVxuICAgKiB9KVxuICAgKlxuICAgKiAvLyB0aGUgYWZ0ZXItaW5pdCBob29rIGlzIGNhbGxlZCBhZnRlciBldmVyeSByZWNvcmQgaW5pdGlhbGl6YXRpb24uXG4gICAqIE1vZGVsLiRuZXcoKTsgLy8gYWxlcnRzICdoZWxsbyEnO1xuICAgKiBgYGBcbiAgICpcbiAgICogIyMgRGVmaW5pdGlvbiBmdW5jdGlvblxuICAgKlxuICAgKiBUaGUgZGVmaW5pdGlvbiBmdW5jdGlvbiBnaXZlcyBjb21wbGV0ZSBhY2Nlc3MgdG8gdGhlIG1vZGVsIGJ1aWxkZXIgYXBpLCBldmVyeSBtb2RlbCBidWlsZGVyIGZ1bmN0aW9uIGRlc2NyaWJlZFxuICAgKiBpbiB0aGlzIHBhZ2UgY2FuIGJlIGNhbGxlZCBmcm9tIHRoZSBkZWZpbml0aW9uIGZ1bmN0aW9uIGJ5IHJlZmVyZW5jaW5nICp0aGlzKi5cbiAgICpcbiAgICogYGBgamF2YXNjcmlwdFxuICAgKiByZXN0bW9kLm1vZGVsKCcnLCBmdW5jdGlvbigpIHtcbiAgICogICB0aGlzLmF0dHJEZWZhdWx0KCdwcm9wV2l0aERlZmF1bHQnLCAyMClcbiAgICogICAgICAgLmF0dHJBc0NvbGxlY3Rpb24oJ2hhc01hbnlSZWxhdGlvbicsICdNb2RlbE5hbWUnKVxuICAgKiAgICAgICAub24oJ2FmdGVyLWNyZWF0ZScsIGZ1bmN0aW9uKCkge1xuICAgKiAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBhZnRlciBjcmVhdGUuXG4gICAqICAgICAgIH0pO1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqL1xuICBmdW5jdGlvbiBCdWlsZGVyKF9iYXNlRHNsKSB7XG5cbiAgICB2YXIgbWFwcGluZ3MgPSB7XG4gICAgICBpbml0OiBbJ2F0dHJEZWZhdWx0J10sXG4gICAgICBtYXNrOiBbJ2F0dHJNYXNrJ10sXG4gICAgICBpZ25vcmU6IFsnYXR0ck1hc2snXSxcbiAgICAgIG1hcDogWydhdHRyTWFwJywgJ2ZvcmNlJ10sXG4gICAgICBkZWNvZGU6IFsnYXR0ckRlY29kZXInLCAncGFyYW0nLCAnY2hhaW4nXSxcbiAgICAgIGVuY29kZTogWydhdHRyRW5jb2RlcicsICdwYXJhbScsICdjaGFpbiddLFxuICAgICAgJ3ZvbGF0aWxlJzogWydhdHRyVm9sYXRpbGUnXVxuICAgIH07XG5cbiAgICAvLyBEU0wgY29yZSBmdW5jdGlvbnMuXG5cbiAgICB0aGlzLmRzbCA9IGV4dGVuZChfYmFzZURzbCwge1xuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBCdWlsZGVyQXBpI1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBQYXJzZXMgYSBkZXNjcmlwdGlvbiBvYmplY3QsIGNhbGxzIHRoZSBwcm9wZXIgYnVpbGRlciBtZXRob2QgZGVwZW5kaW5nXG4gICAgICAgKiBvbiBlYWNoIHByb3BlcnR5IGRlc2NyaXB0aW9uIHR5cGUuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IF9kZXNjcmlwdGlvbiBUaGUgZGVzY3JpcHRpb24gb2JqZWN0XG4gICAgICAgKiBAcmV0dXJuIHtCdWlsZGVyQXBpfSBzZWxmXG4gICAgICAgKi9cbiAgICAgIGRlc2NyaWJlOiBmdW5jdGlvbihfZGVzY3JpcHRpb24pIHtcbiAgICAgICAgZm9yRWFjaChfZGVzY3JpcHRpb24sIGZ1bmN0aW9uKF9kZXNjLCBfYXR0cikge1xuICAgICAgICAgIHN3aXRjaChfYXR0ci5jaGFyQXQoMCkpIHtcbiAgICAgICAgICBjYXNlICdAJzpcbiAgICAgICAgICAgICRsb2cud2FybignVXNhZ2Ugb2YgQCBpbiBkZXNjcmlwdGlvbiBvYmplY3RzIHdpbGwgYmUgcmVtb3ZlZCBpbiAxLjIsIHVzZSBhICRleHRlbmQgYmxvY2sgaW5zdGVhZCcpO1xuICAgICAgICAgICAgdGhpcy5kZWZpbmUoJ1Njb3BlLicgKyBfYXR0ci5zdWJzdHJpbmcoMSksIF9kZXNjKTsgLy8gc2V0IHN0YXRpYyBtZXRob2RcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ34nOlxuICAgICAgICAgICAgX2F0dHIgPSBpbmZsZWN0b3IucGFyYW1ldGVyaXplKF9hdHRyLnN1YnN0cmluZygxKSk7XG4gICAgICAgICAgICAkbG9nLndhcm4oJ1VzYWdlIG9mIH4gaW4gZGVzY3JpcHRpb24gb2JqZWN0cyB3aWxsIGJlIHJlbW92ZWQgaW4gMS4yLCB1c2UgYSAkaG9va3MgYmxvY2sgaW5zdGVhZCcpO1xuICAgICAgICAgICAgdGhpcy5vbihfYXR0ciwgX2Rlc2MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmKF9hdHRyID09PSAnJGNvbmZpZycpIHsgLy8gY29uZmlndXJhdGlvbiBibG9ja1xuICAgICAgICAgICAgICBmb3IodmFyIGtleSBpbiBfZGVzYykge1xuICAgICAgICAgICAgICAgIGlmKF9kZXNjLmhhc093blByb3BlcnR5KGtleSkpIHRoaXMuc2V0UHJvcGVydHkoa2V5LCBfZGVzY1trZXldKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmKF9hdHRyID09PSAnJGV4dGVuZCcpIHsgLy8gZXh0ZW5zaW9uIGJsb2NrXG4gICAgICAgICAgICAgIGZvcih2YXIga2V5IGluIF9kZXNjKSB7XG4gICAgICAgICAgICAgICAgaWYoX2Rlc2MuaGFzT3duUHJvcGVydHkoa2V5KSkgdGhpcy5kZWZpbmUoa2V5LCBfZGVzY1trZXldKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmKF9hdHRyID09PSAnJGhvb2tzJykgeyAvLyBob29rcyBibG9ja1xuICAgICAgICAgICAgICBmb3IodmFyIGtleSBpbiBfZGVzYykge1xuICAgICAgICAgICAgICAgIGlmKF9kZXNjLmhhc093blByb3BlcnR5KGtleSkpIHRoaXMub24oa2V5LCBfZGVzY1trZXldKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmKFZBUl9SR1gudGVzdChfYXR0cikpIHtcbiAgICAgICAgICAgICAgJGxvZy53YXJuKCdVc2FnZSBvZiB+IGluIGRlc2NyaXB0aW9uIG9iamVjdHMgd2lsbCBiZSByZW1vdmVkIGluIDEuMiwgdXNlIGEgJGNvbmZpZyBibG9jayBpbnN0ZWFkJyk7XG4gICAgICAgICAgICAgIF9hdHRyID0gaW5mbGVjdG9yLmNhbWVsaXplKF9hdHRyLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICB0aGlzLnNldFByb3BlcnR5KF9hdHRyLCBfZGVzYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKGlzT2JqZWN0KF9kZXNjKSkgdGhpcy5hdHRyaWJ1dGUoX2F0dHIsIF9kZXNjKTtcbiAgICAgICAgICAgIGVsc2UgaWYoaXNGdW5jdGlvbihfZGVzYykpIHRoaXMuZGVmaW5lKF9hdHRyLCBfZGVzYyk7XG4gICAgICAgICAgICBlbHNlIHRoaXMuYXR0ckRlZmF1bHQoX2F0dHIsIF9kZXNjKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIEJ1aWxkZXJBcGkjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIEV4dGVuZHMgdGhlIGJ1aWxkZXIgRFNMXG4gICAgICAgKlxuICAgICAgICogQWRkcyBhIGZ1bmN0aW9uIHRvIGRlIGJ1aWxkZXIgYW5kIGFsdGVybmF0aXZlbHkgbWFwcyB0aGUgZnVuY3Rpb24gdG8gYW5cbiAgICAgICAqIGF0dHJpYnV0ZSBkZWZpbml0aW9uIGtleXdvcmQgdGhhdCBjYW4gYmUgbGF0ZXIgdXNlZCB3aGVuIGNhbGxpbmdcbiAgICAgICAqIGBkZWZpbmVgIG9yIGBhdHRyaWJ1dGVgLlxuICAgICAgICpcbiAgICAgICAqIE1hcHBpbmcgd29ya3MgYXMgZm9sbG93aW5nOlxuICAgICAgICpcbiAgICAgICAqICAgIC8vIEdpdmVuIHRoZSBmb2xsb3dpbmcgY2FsbFxuICAgICAgICogICAgYnVpbGRlci5leHRlbmQoJ3Rlc3RBdHRyJywgZnVuY3Rpb24oX2F0dHIsIF90ZXN0LCBfcGFyYW0xLCBwYXJhbTIpIHtcbiAgICAgICAqICAgICAgLy8gd2hhcmV2ZXIuLlxuICAgICAgICogICAgfSwgWyd0ZXN0JywgJ3Rlc3RQMScsICd0ZXN0UDInXSk7XG4gICAgICAgKlxuICAgICAgICogICAgLy8gQSBjYWxsIHRvXG4gICAgICAgKiAgICBidWlsZGVyLmF0dHJpYnV0ZSgnY2hhcHRlcicsIHsgdGVzdDogJ2hlbGxvJywgdGVzdFAxOiAnd29ybGQnIH0pO1xuICAgICAgICpcbiAgICAgICAqICAgIC8vIEl0cyBlcXVpdmFsZW50IHRvXG4gICAgICAgKiAgICBidWlsZGVyLnRlc3RBdHRyKCdjaGFwdGVyJywgJ2hlbGxvJywgJ3dvcmxkJyk7XG4gICAgICAgKlxuICAgICAgICogVGhlIG1ldGhvZCBjYW4gYWxzbyBiZSBwYXNzZWQgYW4gb2JqZWN0IHdpdGggdmFyaW91cyBtZXRob2RzIHRvIGJlIGFkZGVkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gX25hbWUgZnVuY3Rpb24gbmFtZSBvciBvYmplY3QgdG8gbWVyZ2VcbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IF9mdW4gZnVuY3Rpb25cbiAgICAgICAqIEBwYXJhbSB7YXJyYXl9IF9tYXBwaW5nIGZ1bmN0aW9uIG1hcHBpbmcgZGVmaW5pdGlvblxuICAgICAgICogQHJldHVybiB7QnVpbGRlckFwaX0gc2VsZlxuICAgICAgICovXG4gICAgICBleHRlbmQ6IGZ1bmN0aW9uKF9uYW1lLCBfZnVuLCBfbWFwcGluZykge1xuICAgICAgICBpZih0eXBlb2YgX25hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdGhpc1tfbmFtZV0gPSBVdGlscy5vdmVycmlkZSh0aGlzW25hbWVdLCBfZnVuKTtcbiAgICAgICAgICBpZihfbWFwcGluZykge1xuICAgICAgICAgICAgbWFwcGluZ3NbX21hcHBpbmdbMF1dID0gX21hcHBpbmc7XG4gICAgICAgICAgICBfbWFwcGluZ1swXSA9IF9uYW1lO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIFV0aWxzLmV4dGVuZE92ZXJyaWRlbih0aGlzLCBfbmFtZSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgQnVpbGRlckFwaSNcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gU2V0cyBhbiBhdHRyaWJ1dGUgcHJvcGVydGllcy5cbiAgICAgICAqXG4gICAgICAgKiBUaGlzIG1ldGhvZCB1c2VzIHRoZSBhdHRyaWJ1dGUgbW9kaWZpZXJzIG1hcHBpbmcgdG8gY2FsbCBwcm9wZXJcbiAgICAgICAqIG1vZGlmaWVycyBvbiB0aGUgYXJndW1lbnQuXG4gICAgICAgKlxuICAgICAgICogRm9yIGV4YW1wbGUsIHVzaW5nIHRoZSBmb2xsb3dpbmcgZGVzY3JpcHRpb24gb24gdGhlIGNyZWF0ZWRBdCBhdHRyaWJ1dGVcbiAgICAgICAqXG4gICAgICAgKiAgICB7IGRlY29kZTogJ2RhdGUnLCBwYXJhbTsgJ1lZLW1tLWRkJyB9XG4gICAgICAgKlxuICAgICAgICogSXMgdGhlIHNhbWUgYXMgY2FsbGluZ1xuICAgICAgICpcbiAgICAgICAqICAgIGJ1aWxkZXIuYXR0ckRlY29kZXIoJ2NyZWF0ZWRBdCcsICdkYXRlJywgJ1lZLW1tLWRkJylcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gX25hbWUgQXR0cmlidXRlIG5hbWVcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBfZGVzY3JpcHRpb24gRGVzY3JpcHRpb24gb2JqZWN0XG4gICAgICAgKiBAcmV0dXJuIHtCdWlsZGVyQXBpfSBzZWxmXG4gICAgICAgKi9cbiAgICAgIGF0dHJpYnV0ZTogZnVuY3Rpb24oX25hbWUsIF9kZXNjcmlwdGlvbikge1xuICAgICAgICB2YXIga2V5LCBtYXAsIGFyZ3MsIGk7XG4gICAgICAgIGZvcihrZXkgaW4gX2Rlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgaWYoX2Rlc2NyaXB0aW9uLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIG1hcCA9IG1hcHBpbmdzW2tleV07XG4gICAgICAgICAgICBpZihtYXApIHtcbiAgICAgICAgICAgICAgYXJncyA9IFtfbmFtZSwgX2Rlc2NyaXB0aW9uW2tleV1dO1xuICAgICAgICAgICAgICBmb3IoaSA9IDE7IGkgPCBtYXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzLnB1c2goX2Rlc2NyaXB0aW9uW21hcFtpXV0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGFyZ3MucHVzaChfZGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgICB0aGlzW21hcFswXV0uYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgQnVpbGRlci5wcm90b3R5cGUgPSB7XG5cbiAgICAvLyB1c2UgdGhlIGJ1aWxkZXIgdG8gcHJvY2VzcyBhIG1peGluIGNoYWluXG4gICAgY2hhaW46IGZ1bmN0aW9uKF9jaGFpbikge1xuICAgICAgZm9yKHZhciBpID0gMCwgbCA9IF9jaGFpbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdGhpcy5taXhpbihfY2hhaW5baV0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyB1c2UgdGhlIGJ1aWxkZXIgdG8gcHJvY2VzcyBhIHNpbmdsZSBtaXhpblxuICAgIG1peGluOiBmdW5jdGlvbihfbWl4KSB7XG4gICAgICBpZihfbWl4LiQkY2hhaW4pIHtcbiAgICAgICAgdGhpcy5jaGFpbihfbWl4LiQkY2hhaW4pO1xuICAgICAgfSBlbHNlIGlmKHR5cGVvZiBfbWl4ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLm1peGluKCRpbmplY3Rvci5nZXQoX21peCkpO1xuICAgICAgfSBlbHNlIGlmKGlzQXJyYXkoX21peCkpIHtcbiAgICAgICAgdGhpcy5jaGFpbihfbWl4KTtcbiAgICAgIH0gZWxzZSBpZihpc0Z1bmN0aW9uKF9taXgpKSB7XG4gICAgICAgIF9taXguY2FsbCh0aGlzLmRzbCwgJGluamVjdG9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZHNsLmRlc2NyaWJlKF9taXgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gQnVpbGRlcjtcblxufV0pO1xuUk1Nb2R1bGUuZmFjdG9yeSgnUk1CdWlsZGVyQ29tcHV0ZWQnLCBbJ3Jlc3Rtb2QnLFxuICBmdW5jdGlvbihyZXN0bW9kKSB7XG4gICAgLyoqXG4gICAgICogQGNsYXNzIFJNQnVpbGRlckNvbXB1dGVkQXBpXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIEJ1aWxkZXIgRFNMIGV4dGVuc2lvbiB0byBidWlsZCBjb21wdXRlZCBwcm9wZXJ0aWVzLlxuICAgICAqXG4gICAgICogQSBjb21wdXRlZCBwcm9wZXJ0eSBpcyBhIFwidmlydHVhbFwiIHByb3BlcnR5IHdoaWNoIGlzIGNyZWF0ZWQgdXNpbmdcbiAgICAgKiBvdGhlciBtb2RlbCBwcm9wZXJ0aWVzLiBGb3IgZXhhbXBsZSwgYSB1c2VyIGhhcyBhIGZpcnN0TmFtZSBhbmQgbGFzdE5hbWUsXG4gICAgICogQSBjb21wdXRlZCBwcm9wZXJ0eSwgZnVsbE5hbWUsIGlzIGdlbmVyYXRlZCBmcm9tIHRoZSB0d28uXG4gICAgICpcbiAgICAgKiBBZGRzIHRoZSBmb2xsb3dpbmcgcHJvcGVydHkgbW9kaWZpZXJzOlxuICAgICAqICogYGNvbXB1dGVkYCBmdW5jdGlvbiB3aWxsIGJlIGFzc2lnbmVkIGFzIGdldHRlciB0byBNb2RlbCwgbWFwcyB0byB7QGxpbmsgUk1CdWlsZGVyQ29tcHV0ZWRBcGkjYXR0ckFzQ29tcHV0ZWR9XG4gICAgICpcbiAgICAgKi9cbiAgICB2YXIgRVhUID0ge1xuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBSTUJ1aWxkZXJDb21wdXRlZEFwaSNcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gUmVnaXN0ZXJzIGEgbW9kZWwgY29tcHV0ZWQgcHJvcGVydHlcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gIF9hdHRyIEF0dHJpYnV0ZSBuYW1lXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBfZm4gRnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBkZXNpcmVkIGF0dHJpYnV0ZSB2YWx1ZSB3aGVuIHJ1bi5cbiAgICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgICAqL1xuICAgICAgYXR0ckFzQ29tcHV0ZWQ6IGZ1bmN0aW9uKF9hdHRyLCBfZm4pIHtcbiAgICAgICAgdGhpcy5hdHRyQ29tcHV0ZWQoX2F0dHIsIF9mbik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gcmVzdG1vZC5taXhpbihmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZXh0ZW5kKCdhdHRyQXNDb21wdXRlZCcsIEVYVC5hdHRyQXNDb21wdXRlZCwgWydjb21wdXRlZCddKTtcbiAgICB9KTtcbiAgfVxuXSk7XG5STU1vZHVsZS5mYWN0b3J5KCdSTUJ1aWxkZXJFeHQnLCBbJyRpbmplY3RvcicsICckcGFyc2UnLCAnaW5mbGVjdG9yJywgJyRsb2cnLCAncmVzdG1vZCcsIGZ1bmN0aW9uKCRpbmplY3RvciwgJHBhcnNlLCBpbmZsZWN0b3IsICRsb2csIHJlc3Rtb2QpIHtcblxuICB2YXIgYmluZCA9IGFuZ3VsYXIuYmluZCxcbiAgICAgIGlzRnVuY3Rpb24gPSBhbmd1bGFyLmlzRnVuY3Rpb247XG5cbiAgLyoqXG4gICAqIEBjbGFzcyBFeHRlbmRlZEJ1aWxkZXJBcGlcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIE5vbi1jb3JlIGJ1aWxkZXIgZXh0ZW5zaW9uc1xuICAgKlxuICAgKiBBZGRzIHRoZSBmb2xsb3dpbmcgcHJvcGVydHkgbW9kaWZpZXJzOlxuICAgKiAqIGBzZXJpYWxpemVgIHNldHMgdGhlIGVuY29kZXIgYW5kIGRlY29kZXIgYmVhdmlvdXIgZm9yIGFuIGF0dHJpYnV0ZSwgbWFwcyB0byB7QGxpbmsgQnVpbGRlckFwaSNhdHRyU2VyaWFsaXplcn1cbiAgICpcbiAgICovXG4gIHZhciBFWFQgPSB7XG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIEV4dGVuZGVkQnVpbGRlckFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBTZXRzIGFuIHVybCBwcmVmaXggdG8gYmUgYWRkZWQgdG8gZXZlcnkgdXJsIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwuXG4gICAgICpcbiAgICAgKiBUaGlzIGFwcGxpZXMgZXZlbiB0byBvYmplY3RzIGdlbmVyYXRlZCBieSB0aGUgYCRzaW5nbGVgIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGludGVuZGVkIHRvIGJlIHVzZWQgaW4gYSBiYXNlIG1vZGVsIG1peGluIHNvIGV2ZXJ5bW9kZWwgdGhhdCBleHRlbmRzIGZyb20gaXRcbiAgICAgKiBnZXRzIHRoZSBzYW1lIHVybCBwcmVmaXguXG4gICAgICpcbiAgICAgKiBVc2FnZTpcbiAgICAgKlxuICAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAgKiB2YXIgQmFzZU1vZGVsID0gcmVzdG1vZC5taXhpbihmdW5jdGlvbigpIHtcbiAgICAgKiAgIHRoaXMuc2V0VXJsUHJlZml4KCcvYXBpJyk7XG4gICAgICogfSlcbiAgICAgKlxuICAgICAqIHZhciBiaWtlID0gcmVzdG1vZC5tb2RlbCgnL2Jpa2VzJywgQmFzZU1vZGVsKS4kYnVpbGQoeyBpZDogMSB9KTtcbiAgICAgKiBjb25zb2xlLmxvZyhiaWtlLiR1cmwoKSkgLy8gb3V0cHV0cyAnL2FwaS9iaWtlcy8xJ1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IF9wcmVmaXggdXJsIHBvcnRpb25cbiAgICAgKiBAcmV0dXJuIHtCdWlsZGVyQXBpfSBzZWxmXG4gICAgICovXG4gICAgc2V0VXJsUHJlZml4OiBmdW5jdGlvbihfcHJlZml4KSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXRQcm9wZXJ0eSgndXJsUHJlZml4JywgX3ByZWZpeCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBFeHRlbmRlZEJ1aWxkZXJBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gQ2hhbmdlcyB0aGUgbW9kZWwncyBwcmltYXJ5IGtleS5cbiAgICAgKlxuICAgICAqIFByaW1hcnkga2V5cyBhcmUgcGFzc2VkIHRvIHNjb3BlJ3MgdXJsIG1ldGhvZHMgdG8gZ2VuZXJhdGUgdXJscy4gVGhlIGRlZmF1bHQgcHJpbWFyeSBrZXkgaXMgJ2lkJy5cbiAgICAgKlxuICAgICAqICoqQVRURU5USU9OKiogUHJpbWFyeSBrZXlzIGFyZSBleHRyYWN0ZWQgZnJvbSByYXcgZGF0YSwgc28gX2tleSBtdXN0IHVzZSByYXcgYXBpIG5hbWluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9ufSBfa2V5IE5ldyBwcmltYXJ5IGtleS5cbiAgICAgKiBAcmV0dXJuIHtCdWlsZGVyQXBpfSBzZWxmXG4gICAgICovXG4gICAgc2V0UHJpbWFyeUtleTogZnVuY3Rpb24oX2tleSkge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0UHJvcGVydHkoJ3ByaW1hcnlLZXknLCBfa2V5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIEV4dGVuZGVkQnVpbGRlckFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBBc3NpZ25zIGEgc2VyaWFsaXplciB0byBhIGdpdmVuIGF0dHJpYnV0ZS5cbiAgICAgKlxuICAgICAqIEEgX3NlcmlhbGl6ZXIgaXM6XG4gICAgICogKiBhbiBvYmplY3QgdGhhdCBkZWZpbmVzIGJvdGggYSBgZGVjb2RlYCBhbmQgYSBgZW5jb2RlYCBtZXRob2RcbiAgICAgKiAqIGEgZnVuY3Rpb24gdGhhdCB3aGVuIGNhbGxlZCByZXR1cm5zIGFuIG9iamVjdCB0aGF0IG1hdGNoZXMgdGhlIGFib3ZlIGRlc2NyaXB0aW9uLlxuICAgICAqICogYSBzdHJpbmcgdGhhdCByZXByZXNlbnRzIGFuIGluamVjdGFibGUgdGhhdCBtYXRjaGVzIGFueSBvZiB0aGUgYWJvdmUgZGVzY3JpcHRpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IF9uYW1lIEF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fGZ1bmN0aW9ufSBfc2VyaWFsaXplciBUaGUgc2VyaWFsaXplclxuICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgKi9cbiAgICBhdHRyU2VyaWFsaXplcjogZnVuY3Rpb24oX25hbWUsIF9zZXJpYWxpemVyLCBfb3B0KSB7XG4gICAgICBpZih0eXBlb2YgX3NlcmlhbGl6ZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIF9zZXJpYWxpemVyID0gJGluamVjdG9yLmdldChpbmZsZWN0b3IuY2FtZWxpemUoX3NlcmlhbGl6ZXIsIHRydWUpICsgJ1NlcmlhbGl6ZXInKTtcbiAgICAgIH1cblxuICAgICAgaWYoaXNGdW5jdGlvbihfc2VyaWFsaXplcikpIF9zZXJpYWxpemVyID0gX3NlcmlhbGl6ZXIoX29wdCk7XG4gICAgICBpZihfc2VyaWFsaXplci5kZWNvZGUpIHRoaXMuYXR0ckRlY29kZXIoX25hbWUsIGJpbmQoX3NlcmlhbGl6ZXIsIF9zZXJpYWxpemVyLmRlY29kZSkpO1xuICAgICAgaWYoX3NlcmlhbGl6ZXIuZW5jb2RlKSB0aGlzLmF0dHJFbmNvZGVyKF9uYW1lLCBiaW5kKF9zZXJpYWxpemVyLCBfc2VyaWFsaXplci5lbmNvZGUpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLy8gRXhwZXJpbWVudGFsIG1vZGlmaWVyc1xuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIEV4dGVuZGVkQnVpbGRlckFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBFeHByZXNzaW9uIGF0dHJpYnV0ZXMgYXJlIGV2YWx1YXRlZCBldmVyeSB0aW1lIG5ldyBkYXRhIGlzIGZlZCB0byB0aGUgbW9kZWwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gIF9uYW1lIEF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IF9leHByIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBldmFsdWF0ZVxuICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgKi9cbiAgICBhdHRyRXhwcmVzc2lvbjogZnVuY3Rpb24oX25hbWUsIF9leHByKSB7XG4gICAgICB2YXIgZmlsdGVyID0gJHBhcnNlKF9leHByKTtcbiAgICAgIHJldHVybiB0aGlzLm9uKCdhZnRlci1mZWVkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXNbX25hbWVdID0gZmlsdGVyKHRoaXMpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiByZXN0bW9kLm1peGluKGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZXh0ZW5kKCdzZXRVcmxQcmVmaXgnLCBFWFQuc2V0VXJsUHJlZml4KVxuICAgICAgICAuZXh0ZW5kKCdzZXRQcmltYXJ5S2V5JywgRVhULnNldFByaW1hcnlLZXkpXG4gICAgICAgIC5leHRlbmQoJ2F0dHJTZXJpYWxpemVyJywgRVhULmF0dHJTZXJpYWxpemVyLCBbJ3NlcmlhbGl6ZSddKTtcbiAgfSk7XG59XSk7XG5STU1vZHVsZS5mYWN0b3J5KCdSTUJ1aWxkZXJSZWxhdGlvbnMnLCBbJyRpbmplY3RvcicsICdpbmZsZWN0b3InLCAnJGxvZycsICdSTVV0aWxzJywgJ3Jlc3Rtb2QnLCAnUk1QYWNrZXJDYWNoZScsIGZ1bmN0aW9uKCRpbmplY3RvciwgaW5mbGVjdG9yLCAkbG9nLCBVdGlscywgcmVzdG1vZCwgcGFja2VyQ2FjaGUpIHtcblxuICAvLyB3cmFwcyBhIGhvb2sgY2FsbGJhY2sgdG8gZ2l2ZSBhY2Nlc3MgdG8gdGhlICRvd25lciBvYmplY3RcbiAgZnVuY3Rpb24gd3JhcEhvb2soX2Z1biwgX293bmVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9sZE93bmVyID0gdGhpcy4kb3duZXI7XG4gICAgICB0aGlzLiRvd25lciA9IF9vd25lcjtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBfZnVuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0aGlzLiRvd25lciA9IG9sZE93bmVyO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyB3cmFwcyBhIGJ1bmNoIG9mIGhvb2tzXG4gIGZ1bmN0aW9uIGFwcGx5SG9va3MoX3RhcmdldCwgX2hvb2tzLCBfb3duZXIpIHtcbiAgICBmb3IodmFyIGtleSBpbiBfaG9va3MpIHtcbiAgICAgIGlmKF9ob29rcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIF90YXJnZXQuJG9uKGtleSwgd3JhcEhvb2soX2hvb2tzW2tleV0sIF9vd25lcikpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAY2xhc3MgUmVsYXRpb25CdWlsZGVyQXBpXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBCdWlsZGVyIERTTCBleHRlbnNpb24gdG8gYnVpbGQgbW9kZWwgcmVsYXRpb25zXG4gICAqXG4gICAqIEFkZHMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0eSBtb2RpZmllcnM6XG4gICAqICogYGhhc01hbnlgIHNldHMgYSBvbmUgdG8gbWFueSBoaWVyYXJjaGljYWwgcmVsYXRpb24gdW5kZXIgdGhlIGF0dHJpYnV0ZSBuYW1lLCBtYXBzIHRvIHtAbGluayBSZWxhdGlvbkJ1aWxkZXJBcGkjYXR0ckFzQ29sbGVjdGlvbn1cbiAgICogKiBgaGFzT25lYCBzZXRzIGEgb25lIHRvIG9uZSBoaWVyYXJjaGljYWwgcmVsYXRpb24gdW5kZXIgdGhlIGF0dHJpYnV0ZSBuYW1lLCBtYXBzIHRvIHtAbGluayBSZWxhdGlvbkJ1aWxkZXJBcGkjYXR0ckFzUmVzb3VyY2V9XG4gICAqICogYGJlbG9uZ3NUb2Agc2V0cyBhIG9uZSB0byBvbmUgcmVmZXJlbmNlIHJlbGF0aW9uIHVuZGVyIHRoZSBhdHRyaWJ1dGUgbmFtZSwgbWFwcyB0byB7QGxpbmsgUmVsYXRpb25CdWlsZGVyQXBpI2F0dHJBc1JlZmVyZW5jZX1cbiAgICogKiBgYmVsb25nc1RvTWFueWAgc2V0cyBhIG9uZSB0byBtYW55IHJlZmVyZW5jZSByZWxhdGlvbiB1bmRlciB0aGUgYXR0cmlidXRlIG5hbWUsIG1hcHMgdG8ge0BsaW5rIFJlbGF0aW9uQnVpbGRlckFwaSNhdHRyQXNSZWZlcmVuY2VUb01hbnl9XG4gICAqXG4gICAqL1xuICB2YXIgRVhUID0ge1xuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBSZWxhdGlvbkJ1aWxkZXJBcGkjXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb24gUmVnaXN0ZXJzIGEgbW9kZWwgKipyZXNvdXJjZXMqKiByZWxhdGlvblxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9ICBfbmFtZSBBdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gX21vZGVsIE90aGVyIG1vZGVsLCBzdXBwb3J0cyBhIG1vZGVsIG5hbWUgb3IgYSBkaXJlY3QgcmVmZXJlbmNlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfdXJsIFBhcnRpYWwgdXJsXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IF9zb3VyY2UgSW5saW5lIHJlc291cmNlIGFsaWFzIChvcHRpb25hbClcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX2ludmVyc2VPZiBJbnZlcnNlIHByb3BlcnR5IG5hbWUgKG9wdGlvbmFsKVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBfcGFyYW1zIEdlbmVyYXRlZCBjb2xsZWN0aW9uIGRlZmF1bHQgcGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBfaG9va3MgSG9va3MgdG8gYmUgYXBwbGllZCBqdXN0IHRvIHRoZSBnZW5lcmF0ZWQgY29sbGVjdGlvblxuICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgKi9cbiAgICBhdHRyQXNDb2xsZWN0aW9uOiBmdW5jdGlvbihfYXR0ciwgX21vZGVsLCBfdXJsLCBfc291cmNlLCBfaW52ZXJzZU9mLCBfcGFyYW1zLCBfaG9va3MpIHtcblxuICAgICAgdmFyIG9wdGlvbnMsIGdsb2JhbEhvb2tzOyAvLyBnbG9iYWwgcmVsYXRpb24gY29uZmlndXJhdGlvblxuXG4gICAgICB0aGlzLmF0dHJEZWZhdWx0KF9hdHRyLCBmdW5jdGlvbigpIHtcblxuICAgICAgICBpZih0eXBlb2YgX21vZGVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIF9tb2RlbCA9ICRpbmplY3Rvci5nZXQoX21vZGVsKTtcblxuICAgICAgICAgIC8vIHJldHJpZXZlIGdsb2JhbCBvcHRpb25zXG4gICAgICAgICAgb3B0aW9ucyA9IF9tb2RlbC5nZXRQcm9wZXJ0eSgnaGFzTWFueScsIHt9KTtcbiAgICAgICAgICBnbG9iYWxIb29rcyA9IG9wdGlvbnMuaG9va3M7XG5cbiAgICAgICAgICBpZihfaW52ZXJzZU9mKSB7XG4gICAgICAgICAgICB2YXIgZGVzYyA9IF9tb2RlbC4kJGdldERlc2NyaXB0aW9uKF9pbnZlcnNlT2YpO1xuICAgICAgICAgICAgaWYoIWRlc2MgfHwgZGVzYy5yZWxhdGlvbiAhPT0gJ2JlbG9uZ3NfdG8nKSB7XG4gICAgICAgICAgICAgICRsb2cud2FybignTXVzdCBkZWZpbmUgYW4gaW52ZXJzZSBiZWxvbmdzVG8gcmVsYXRpb24gZm9yIGludmVyc2VPZiB0byB3b3JrJyk7XG4gICAgICAgICAgICAgIF9pbnZlcnNlT2YgPSBmYWxzZTsgLy8gZGlzYWJsZSB0aGUgaW52ZXJzZSBpZiBubyBpbnZlcnNlIHJlbGF0aW9uIGlzIGZvdW5kLlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzY29wZSA9IHRoaXMuJGJ1aWxkU2NvcGUoX21vZGVsLCBfdXJsIHx8IF9tb2RlbC5lbmNvZGVVcmxOYW1lKF9hdHRyKSksIGNvbDtcblxuICAgICAgICAvLyBzZXR1cCBjb2xsZWN0aW9uXG4gICAgICAgIGNvbCA9IF9tb2RlbC4kY29sbGVjdGlvbihfcGFyYW1zIHx8IG51bGwsIHNjb3BlKTtcbiAgICAgICAgaWYoZ2xvYmFsSG9va3MpIGFwcGx5SG9va3MoY29sLCBnbG9iYWxIb29rcywgdGhpcyk7XG4gICAgICAgIGlmKF9ob29rcykgYXBwbHlIb29rcyhjb2wsIF9ob29rcywgdGhpcyk7XG4gICAgICAgIGNvbC4kZGlzcGF0Y2goJ2FmdGVyLWhhcy1tYW55LWluaXQnKTtcblxuICAgICAgICAvLyBzZXQgaW52ZXJzZSBwcm9wZXJ0eSBpZiByZXF1aXJlZC5cbiAgICAgICAgaWYoX2ludmVyc2VPZikge1xuICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICBjb2wuJG9uKCdhZnRlci1hZGQnLCBmdW5jdGlvbihfb2JqKSB7XG4gICAgICAgICAgICBfb2JqW19pbnZlcnNlT2ZdID0gc2VsZjtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb2w7XG4gICAgICB9KTtcblxuICAgICAgaWYoX3NvdXJjZSB8fCBfdXJsKSB0aGlzLmF0dHJNYXAoX2F0dHIsIF9zb3VyY2UgfHwgX3VybCk7XG5cbiAgICAgIHRoaXMuYXR0ckRlY29kZXIoX2F0dHIsIGZ1bmN0aW9uKF9yYXcpIHtcbiAgICAgICAgICAgIHRoaXNbX2F0dHJdLiRyZXNldCgpLiRkZWNvZGUoX3Jhdyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuYXR0ck1hc2soX2F0dHIsIFV0aWxzLldSSVRFX01BU0spXG4gICAgICAgICAgLmF0dHJNZXRhKF9hdHRyLCB7IHJlbGF0aW9uOiAnaGFzX21hbnknIH0pO1xuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFJlbGF0aW9uQnVpbGRlckFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBSZWdpc3RlcnMgYSBtb2RlbCAqKnJlc291cmNlKiogcmVsYXRpb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSAgX25hbWUgQXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xvYmplY3R9IF9tb2RlbCBPdGhlciBtb2RlbCwgc3VwcG9ydHMgYSBtb2RlbCBuYW1lIG9yIGEgZGlyZWN0IHJlZmVyZW5jZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX3VybCBQYXJ0aWFsIHVybCAob3B0aW9uYWwpXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IF9zb3VyY2UgSW5saW5lIHJlc291cmNlIGFsaWFzIChvcHRpb25hbClcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX2ludmVyc2VPZiBJbnZlcnNlIHByb3BlcnR5IG5hbWUgKG9wdGlvbmFsKVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBfaG9va3MgSG9va3MgdG8gYmUgYXBwbGllZCBqdXN0IHRvIHRoZSBpbnN0YW50aWF0ZWQgcmVjb3JkXG4gICAgICogQHJldHVybiB7QnVpbGRlckFwaX0gc2VsZlxuICAgICAqL1xuICAgIGF0dHJBc1Jlc291cmNlOiBmdW5jdGlvbihfYXR0ciwgX21vZGVsLCBfdXJsLCBfc291cmNlLCBfaW52ZXJzZU9mLCBfaG9va3MpIHtcblxuICAgICAgdmFyIG9wdGlvbnMsIGdsb2JhbEhvb2tzOyAvLyBnbG9iYWwgcmVsYXRpb24gY29uZmlndXJhdGlvblxuXG4gICAgICB0aGlzLmF0dHJEZWZhdWx0KF9hdHRyLCBmdW5jdGlvbigpIHtcblxuICAgICAgICBpZih0eXBlb2YgX21vZGVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIF9tb2RlbCA9ICRpbmplY3Rvci5nZXQoX21vZGVsKTtcblxuICAgICAgICAgIC8vIHJldHJpZXZlIGdsb2JhbCBvcHRpb25zXG4gICAgICAgICAgb3B0aW9ucyA9IF9tb2RlbC5nZXRQcm9wZXJ0eSgnaGFzT25lJywge30pO1xuICAgICAgICAgIGdsb2JhbEhvb2tzID0gb3B0aW9ucy5ob29rcztcblxuICAgICAgICAgIGlmKF9pbnZlcnNlT2YpIHtcbiAgICAgICAgICAgIHZhciBkZXNjID0gX21vZGVsLiQkZ2V0RGVzY3JpcHRpb24oX2ludmVyc2VPZik7XG4gICAgICAgICAgICBpZighZGVzYyB8fCBkZXNjLnJlbGF0aW9uICE9PSAnYmVsb25nc190bycpIHtcbiAgICAgICAgICAgICAgJGxvZy53YXJuKCdNdXN0IGRlZmluZSBhbiBpbnZlcnNlIGJlbG9uZ3NUbyByZWxhdGlvbiBmb3IgaW52ZXJzZU9mIHRvIHdvcmsnKTtcbiAgICAgICAgICAgICAgX2ludmVyc2VPZiA9IGZhbHNlOyAvLyBkaXNhYmxlIHRoZSBpbnZlcnNlIGlmIG5vIGludmVyc2UgcmVsYXRpb24gaXMgZm91bmQuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNjb3BlID0gdGhpcy4kYnVpbGRTY29wZShfbW9kZWwsIF91cmwgfHwgX21vZGVsLmVuY29kZVVybE5hbWUoX2F0dHIpKSwgaW5zdDtcblxuICAgICAgICAvLyBzZXR1cCByZWNvcmRcbiAgICAgICAgaW5zdCA9IF9tb2RlbC4kbmV3KG51bGwsIHNjb3BlKTtcbiAgICAgICAgaWYoZ2xvYmFsSG9va3MpIGFwcGx5SG9va3MoaW5zdCwgZ2xvYmFsSG9va3MsIHRoaXMpO1xuICAgICAgICBpZihfaG9va3MpIGFwcGx5SG9va3MoaW5zdCwgX2hvb2tzLCB0aGlzKTtcbiAgICAgICAgaW5zdC4kZGlzcGF0Y2goJ2FmdGVyLWhhcy1vbmUtaW5pdCcpO1xuXG4gICAgICAgIGlmKF9pbnZlcnNlT2YpIHtcbiAgICAgICAgICBpbnN0W19pbnZlcnNlT2ZdID0gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpbnN0O1xuICAgICAgfSk7XG5cbiAgICAgIGlmKF9zb3VyY2UgfHwgX3VybCkgdGhpcy5hdHRyTWFwKF9hdHRyLCBfc291cmNlIHx8IF91cmwpO1xuXG4gICAgICB0aGlzLmF0dHJEZWNvZGVyKF9hdHRyLCBmdW5jdGlvbihfcmF3KSB7XG4gICAgICAgICAgICB0aGlzW19hdHRyXS4kZGVjb2RlKF9yYXcpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmF0dHJNYXNrKF9hdHRyLCBVdGlscy5XUklURV9NQVNLKVxuICAgICAgICAgIC5hdHRyTWV0YShfYXR0ciwgeyByZWxhdGlvbjogJ2hhc19vbmUnIH0pO1xuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFJlbGF0aW9uQnVpbGRlckFwaSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBSZWdpc3RlcnMgYSBtb2RlbCAqKnJlZmVyZW5jZSoqIHJlbGF0aW9uLlxuICAgICAqXG4gICAgICogQSByZWZlcmVuY2UgcmVsYXRpb24gZXhwZWN0cyB0aGUgaG9zdCBvYmplY3QgdG8gcHJvdmlkZSB0aGUgcHJpbWFyeSBrZXkgb2YgdGhlIHJlZmVyZW5jZWQgb2JqZWN0IG9yIHRoZSByZWZlcmVuY2VkIG9iamVjdCBpdHNlbGYgKGluY2x1ZGluZyBpdHMga2V5KS5cbiAgICAgKlxuICAgICAqIEZvciBleGFtcGxlLCBnaXZlbiB0aGUgZm9sbG93aW5nIHJlc291cmNlIHN0cnVjdHVyZSB3aXRoIGEgZm9yZWlnbiBrZXk6XG4gICAgICpcbiAgICAgKiBgYGBqc29uXG4gICAgICoge1xuICAgICAqICAgdXNlcl9pZDogMjBcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBPciB0aGlzIG90aGVyIHN0cnVjdHVyZSB3aXRoIGlubGluZWQgZGF0YTpcbiAgICAgKlxuICAgICAqIGBgYGpzb25cbiAgICAgKiB7XG4gICAgICogICB1c2VyOiB7XG4gICAgICogICAgIGlkOiAzMCxcbiAgICAgKiAgICAgbmFtZTogJ1N0ZXZlJ1xuICAgICAqICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFlvdSBzaG91bGQgZGVmaW5lIHRoZSBmb2xsb3dpbmcgbW9kZWw6XG4gICAgICpcbiAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICogcmVzdG1vZC5tb2RlbCgnL2Jpa2VzJywge1xuICAgICAqICAgdXNlcjogeyBiZWxvbmdzVG86ICdVc2VyJyB9IC8vIHdvcmtzIGZvciBib3RoIGNhc2VzIGRldGFpbGVkIGFib3ZlXG4gICAgICogfSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFRoZSBvYmplY3QgZ2VuZXJhdGVkIGJ5IHRoZSByZWxhdGlvbiBpcyBub3Qgc2NvcGVkIHRvIHRoZSBob3N0IG9iamVjdCwgYnV0IHRvIGl0J3MgYmFzZSBjbGFzcyBpbnN0ZWFkIChub3QgbGlrZSBoYXNPbmUpLFxuICAgICAqIHNvIHRoZSB0eXBlIHNob3VsZCBub3QgYmUgbmVzdGVkLlxuICAgICAqXG4gICAgICogSXRzIGFsc28gcG9zaWJsZSB0byBvdmVycmlkZSB0aGUgKipmb3JlaWduIGtleSBuYW1lKiouXG4gICAgICpcbiAgICAgKiBXaGVuIGEgb2JqZWN0IGNvbnRhaW5pbmcgYSBiZWxvbmdzVG8gcmVmZXJlbmNlIGlzIGVuY29kZWQgZm9yIGEgc2VydmVyIHJlcXVlc3QsIG9ubHkgdGhlIHByaW1hcnkga2V5IHZhbHVlIGlzIHNlbnQgdXNpbmcgdGhlXG4gICAgICogc2FtZSAqKmZvcmVpZ24ga2V5IG5hbWUqKiB0aGF0IHdhcyB1c2luZyBvbiBkZWNvZGluZy4gKGB1c2VyX2lkYCBpbiB0aGUgYWJvdmUgZXhhbXBsZSkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gIF9uYW1lIEF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSBfbW9kZWwgT3RoZXIgbW9kZWwsIHN1cHBvcnRzIGEgbW9kZWwgbmFtZSBvciBhIGRpcmVjdCByZWZlcmVuY2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IF9rZXkgZm9yZWlnbiBrZXkgcHJvcGVydHkgbmFtZSAob3B0aW9uYWwsIGRlZmF1bHRzIHRvIF9hdHRyICsgJ19pZCcpLlxuICAgICAqIEBwYXJhbSB7Ym9vbH0gX3ByZWZldGNoIGlmIHNldCB0byB0cnVlLCAkZmV0Y2ggd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGNhbGxlZCBvbiByZWxhdGlvbiBvYmplY3QgbG9hZC5cbiAgICAgKiBAcmV0dXJuIHtCdWlsZGVyQXBpfSBzZWxmXG4gICAgICovXG4gICAgYXR0ckFzUmVmZXJlbmNlOiBmdW5jdGlvbihfYXR0ciwgX21vZGVsLCBfa2V5LCBfcHJlZmV0Y2gpIHtcblxuICAgICAgdGhpcy5hdHRyRGVmYXVsdChfYXR0ciwgbnVsbClcbiAgICAgICAgICAuYXR0ck1hc2soX2F0dHIsIFV0aWxzLldSSVRFX01BU0spXG4gICAgICAgICAgLmF0dHJNZXRhKF9hdHRyLCB7IHJlbGF0aW9uOiAnYmVsb25nc190bycgfSk7XG5cbiAgICAgIGZ1bmN0aW9uIGxvYWRNb2RlbCgpIHtcbiAgICAgICAgaWYodHlwZW9mIF9tb2RlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBfbW9kZWwgPSAkaW5qZWN0b3IuZ2V0KF9tb2RlbCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVE9ETzogdGhlIGZvbGxvd2luZyBjb2RlIGFzc3VtZXMgdGhhdCBhdHRyaWJ1dGUgaXMgYXQgcm9vdCBsZXZlbCEgKHdoZW4gdXNlcyB0aGlzW19hdHRyXSBvciB0aGlzW19hdHRyICsgJ0lkJ10pXG5cbiAgICAgIC8vIGlubGluZSBkYXRhIGhhbmRsaW5nXG4gICAgICB0aGlzLmF0dHJEZWNvZGVyKF9hdHRyLCBmdW5jdGlvbihfcmF3KSB7XG4gICAgICAgIGlmKF9yYXcgPT09IG51bGwpIHJldHVybiBudWxsO1xuICAgICAgICBsb2FkTW9kZWwoKTtcbiAgICAgICAgaWYoIXRoaXNbX2F0dHJdIHx8IHRoaXNbX2F0dHJdLiRwayAhPT0gX21vZGVsLmluZmVyS2V5KF9yYXcpKSB7XG4gICAgICAgICAgdGhpc1tfYXR0cl0gPSBfbW9kZWwuJGJ1aWxkUmF3KF9yYXcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXNbX2F0dHJdLiRkZWNvZGUoX3Jhdyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBmb3JlaWduIGtleSBoYW5kbGluZ1xuICAgICAgaWYoX2tleSAhPT0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5hdHRyTWFwKF9hdHRyICsgJ0lkJywgX2tleSB8fCAnKicsIHRydWUpIC8vIHNldCBhIGZvcmNlZCBtYXBwaW5nIHRvIGFsd2F5cyBnZW5lcmF0ZSBrZXlcbiAgICAgICAgICAgIC5hdHRyRGVjb2RlcihfYXR0ciArICdJZCcsIGZ1bmN0aW9uKF92YWx1ZSkge1xuICAgICAgICAgICAgICBpZihfdmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgICAgICAgICAgICBpZighdGhpc1tfYXR0cl0gfHwgdGhpc1tfYXR0cl0uJHBrICE9PSBfdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZihfdmFsdWUgIT09IG51bGwgJiYgX3ZhbHVlICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgbG9hZE1vZGVsKCk7XG4gICAgICAgICAgICAgICAgICB0aGlzW19hdHRyXSA9IHBhY2tlckNhY2hlLnJlc29sdmUoX21vZGVsLiRuZXcoX3ZhbHVlKSk7IC8vIHJlc29sdmUgaW5tZWRpYXRlbGx5IGlmIGNhY2hlZFxuICAgICAgICAgICAgICAgICAgaWYoX3ByZWZldGNoKSB0aGlzW19hdHRyXS4kZmV0Y2goKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgdGhpc1tfYXR0cl0gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hdHRyRW5jb2RlcihfYXR0ciArICdJZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gdGhpc1tfYXR0cl0gPyB0aGlzW19hdHRyXS4kcGsgOiBudWxsO1xuICAgICAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgUmVsYXRpb25CdWlsZGVyQXBpI1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uIFJlZ2lzdGVycyBhIG1vZGVsICoqcmVmZXJlbmNlKiogcmVsYXRpb24uXG4gICAgICpcbiAgICAgKiBBIHJlZmVyZW5jZSByZWxhdGlvbiBleHBlY3RzIHRoZSBob3N0IG9iamVjdCB0byBwcm92aWRlIHRoZSBwcmltYXJ5IGtleSBvZiB0aGUgcmVmZXJlbmNlZCBvYmplY3RzIG9yIHRoZSByZWZlcmVuY2VkIG9iamVjdHMgdGhlbXNlbHZlcyAoaW5jbHVkaW5nIGl0cyBrZXkpLlxuICAgICAqXG4gICAgICogRm9yIGV4YW1wbGUsIGdpdmVuIHRoZSBmb2xsb3dpbmcgcmVzb3VyY2Ugc3RydWN0dXJlIHdpdGggYSBmb3JlaWduIGtleSBhcnJheTpcbiAgICAgKlxuICAgICAqIGBgYGpzb25cbiAgICAgKiB7XG4gICAgICogICB1c2Vyc19pZHM6IFsyMCwgMzBdXG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogT3IgdGhpcyBvdGhlciBzdHJ1Y3R1cmUgd2l0aCBpbmxpbmVkIGRhdGE6XG4gICAgICpcbiAgICAgKiBgYGBqc29uXG4gICAgICoge1xuICAgICAqICAgdXNlcnM6IFt7XG4gICAgICogICAgIGlkOiAyMCxcbiAgICAgKiAgICAgbmFtZTogJ1N0ZXZlJ1xuICAgICAqICAgfSx7XG4gICAgICogICAgIGlkOiAzMCxcbiAgICAgKiAgICAgbmFtZTogJ1BpbGknXG4gICAgICogICB9XVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFlvdSBzaG91bGQgZGVmaW5lIHRoZSBmb2xsb3dpbmcgbW9kZWw6XG4gICAgICpcbiAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICogcmVzdG1vZC5tb2RlbCgnL2Jpa2VzJywge1xuICAgICAqICAgdXNlcnM6IHsgYmVsb25nc1RvTWFueTogJ1VzZXInIH0gLy8gd29ya3MgZm9yIGJvdGggY2FzZXMgZGV0YWlsZWQgYWJvdmVcbiAgICAgKiB9KVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogVGhlIG9iamVjdCBnZW5lcmF0ZWQgYnkgdGhlIHJlbGF0aW9uIGlzIG5vdCBzY29wZWQgdG8gdGhlIGhvc3Qgb2JqZWN0LCBidXQgdG8gaXQncyBiYXNlIGNsYXNzIGluc3RlYWQgKHVubGlrZSBoYXNNYW55KSxcbiAgICAgKiBzbyB0aGUgcmVmZXJlbmNlZCB0eXBlIHNob3VsZCBub3QgYmUgbmVzdGVkLlxuICAgICAqXG4gICAgICogV2hlbiBhIG9iamVjdCBjb250YWluaW5nIGEgYmVsb25nc1RvTWFueSByZWZlcmVuY2UgaXMgZW5jb2RlZCBmb3IgYSBzZXJ2ZXIgcmVxdWVzdCwgb25seSB0aGUgcHJpbWFyeSBrZXkgdmFsdWUgaXMgc2VudCBmb3IgZWFjaCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gIF9uYW1lIEF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSBfbW9kZWwgT3RoZXIgbW9kZWwsIHN1cHBvcnRzIGEgbW9kZWwgbmFtZSBvciBhIGRpcmVjdCByZWZlcmVuY2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IF9rZXlzIFNlcnZlciBuYW1lIGZvciB0aGUgcHJvcGVydHkgdGhhdCBob2xkcyB0aGUgcmVmZXJlbmNlZCBrZXlzIGluIHJlc3BvbnNlIGFuZCByZXF1ZXN0LlxuICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgKi9cbiAgICBhdHRyQXNSZWZlcmVuY2VUb01hbnk6IGZ1bmN0aW9uKF9hdHRyLCBfbW9kZWwsIF9rZXlzKSB7XG5cbiAgICAgIHRoaXMuYXR0ckRlZmF1bHQoX2F0dHIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gW107IH0pXG4gICAgICAgICAgLmF0dHJNYXNrKF9hdHRyLCBVdGlscy5XUklURV9NQVNLKVxuICAgICAgICAgIC5hdHRyTWV0YShfYXR0ciwgeyByZWxhdGlvbjogJ2JlbG9uZ3NfdG9fbWFueScgfSk7XG5cbiAgICAgIC8vIFRPRE86IHRoZSBmb2xsb3dpbmcgY29kZSBhc3N1bWVzIHRoYXQgYXR0cmlidXRlIGlzIGF0IHJvb3QgbGV2ZWwhICh3aGVuIHVzZXMgdGhpc1tfYXR0cl0pXG5cbiAgICAgIGZ1bmN0aW9uIGxvYWRNb2RlbCgpIHtcbiAgICAgICAgaWYodHlwZW9mIF9tb2RlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBfbW9kZWwgPSAkaW5qZWN0b3IuZ2V0KF9tb2RlbCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcHJvY2Vzc0luYm91bmQoX3JhdywgX3JlZikge1xuICAgICAgICBsb2FkTW9kZWwoKTtcbiAgICAgICAgX3JlZi5sZW5ndGggPSAwO1xuICAgICAgICAvLyBUT0RPOiByZXVzZSBvYmplY3RzIHRoYXQgZG8gbm90IGNoYW5nZSAoY29tcGFyZSAkcGtzKVxuICAgICAgICBmb3IodmFyIGkgPSAwLCBsID0gX3Jhdy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICBpZih0eXBlb2YgX3Jhd1tpXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIF9yZWYucHVzaChfbW9kZWwuJGJ1aWxkUmF3KF9yYXdbaV0pKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3JlZi5wdXNoKHBhY2tlckNhY2hlLnJlc29sdmUoX21vZGVsLiRuZXcoX3Jhd1tpXSkpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gaW5saW5lIGRhdGEgaGFuZGxpbmdcbiAgICAgIHRoaXMuYXR0ckRlY29kZXIoX2F0dHIsIGZ1bmN0aW9uKF9yYXcpIHtcbiAgICAgICAgLy8gVE9ETzogaWYgX2tleXMgPT0gX2F0dHIgdGhlbiBpbmJvdW5kIGRhdGEgd2lsbCBiZSBwcm9jZXNzZWQgdHdpY2UhXG4gICAgICAgIGlmKF9yYXcpIHByb2Nlc3NJbmJvdW5kKF9yYXcsIHRoaXNbX2F0dHJdKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBmb3JlaWduIGtleSBoYW5kbGluZ1xuICAgICAgaWYoX2tleXMgIT09IGZhbHNlKSB7XG4gICAgICAgIHZhciBhdHRySWRzID0gaW5mbGVjdG9yLnNpbmd1bGFyaXplKF9hdHRyKSArICdJZHMnO1xuICAgICAgICB0aGlzLmF0dHJNYXAoYXR0cklkcywgX2tleXMgfHwgJyonLCB0cnVlKVxuICAgICAgICAgICAgLmF0dHJEZWNvZGVyKGF0dHJJZHMsIGZ1bmN0aW9uKF9yYXcpIHtcbiAgICAgICAgICAgICAgaWYoX3JhdykgcHJvY2Vzc0luYm91bmQoX3JhdywgdGhpc1tfYXR0cl0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hdHRyRW5jb2RlcihhdHRySWRzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdLCBvdGhlcnMgPSB0aGlzW19hdHRyXTtcbiAgICAgICAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9IG90aGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChvdGhlcnNbaV0uJHBrKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gcmVzdG1vZC5taXhpbihmdW5jdGlvbigpIHtcbiAgICB0aGlzLmV4dGVuZCgnYXR0ckFzQ29sbGVjdGlvbicsIEVYVC5hdHRyQXNDb2xsZWN0aW9uLCBbJ2hhc01hbnknLCAncGF0aCcsICdzb3VyY2UnLCAnaW52ZXJzZU9mJywgJ3BhcmFtcycsICdob29rcyddKSAvLyBUT0RPOiByZW5hbWUgc291cmNlIHRvIG1hcCwgYnV0IGRpc2FibGUgYXR0ck1hcCBpZiBtYXAgaXMgdXNlZCBoZXJlLi4uXG4gICAgICAgIC5leHRlbmQoJ2F0dHJBc1Jlc291cmNlJywgRVhULmF0dHJBc1Jlc291cmNlLCBbJ2hhc09uZScsICdwYXRoJywgJ3NvdXJjZScsICdpbnZlcnNlT2YnLCAnaG9va3MnXSlcbiAgICAgICAgLmV4dGVuZCgnYXR0ckFzUmVmZXJlbmNlJywgRVhULmF0dHJBc1JlZmVyZW5jZSwgWydiZWxvbmdzVG8nLCAna2V5JywgJ3ByZWZldGNoJ10pXG4gICAgICAgIC5leHRlbmQoJ2F0dHJBc1JlZmVyZW5jZVRvTWFueScsIEVYVC5hdHRyQXNSZWZlcmVuY2VUb01hbnksIFsnYmVsb25nc1RvTWFueScsICdrZXlzJ10pO1xuICB9KTtcblxufV0pO1xuUk1Nb2R1bGUuZmFjdG9yeSgnUk1Nb2RlbEZhY3RvcnknLCBbJyRpbmplY3RvcicsICckbG9nJywgJ2luZmxlY3RvcicsICdSTVV0aWxzJywgJ1JNU2NvcGVBcGknLCAnUk1Db21tb25BcGknLCAnUk1SZWNvcmRBcGknLCAnUk1MaXN0QXBpJywgJ1JNQ29sbGVjdGlvbkFwaScsICdSTUV4dGVuZGVkQXBpJywgJ1JNU2VyaWFsaXplcicsICdSTUJ1aWxkZXInLFxuICBmdW5jdGlvbigkaW5qZWN0b3IsICRsb2csIGluZmxlY3RvciwgVXRpbHMsIFNjb3BlQXBpLCBDb21tb25BcGksIFJlY29yZEFwaSwgTGlzdEFwaSwgQ29sbGVjdGlvbkFwaSwgRXh0ZW5kZWRBcGksIFNlcmlhbGl6ZXIsIEJ1aWxkZXIpIHtcblxuICB2YXIgTkFNRV9SR1ggPSAvKC4qPykoW15cXC9dKylcXC8/JC8sXG4gICAgICBleHRlbmQgPSBVdGlscy5leHRlbmRPdmVycmlkZW47XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKF9iYXNlVXJsLCBfYmFzZUNoYWluKSB7XG5cbiAgICAvLyBJREVBOiBtYWtlIGNvbnN0cnVjdG9yIGluYWNjZXNzaWJsZSwgdXNlIHNlcGFyYXRlIHR5cGUgZm9yIHJlY29yZHM/XG4gICAgLy8gKiBXaWxsIGVuc3VyZSBwcm9wZXIgdXNhZ2UuXG4gICAgLy8gKiBXaWxsIGxvc2UgdHlwZSBjaGVja2luZ1xuICAgIGZ1bmN0aW9uIE1vZGVsKF9zY29wZSwgX3BrKSB7XG4gICAgICB0aGlzLiRzY29wZSA9IF9zY29wZSB8fCBNb2RlbDtcbiAgICAgIHRoaXMuJHBrID0gX3BrO1xuICAgICAgdGhpcy4kaW5pdGlhbGl6ZSgpO1xuICAgIH1cblxuICAgIF9iYXNlVXJsID0gVXRpbHMuY2xlYW5VcmwoX2Jhc2VVcmwpO1xuXG4gICAgdmFyIGNvbmZpZyA9IHtcbiAgICAgICAgcHJpbWFyeUtleTogJ2lkJyxcbiAgICAgICAgdXJsUHJlZml4OiBudWxsXG4gICAgICB9LFxuICAgICAgc2VyaWFsaXplciA9IG5ldyBTZXJpYWxpemVyKE1vZGVsKSxcbiAgICAgIGRlZmF1bHRzID0gW10sICAgICAgICAgICAgICAgICAgICAvLyBhdHRyaWJ1dGUgZGVmYXVsdHMgYXMgYW4gYXJyYXkgb2YgW2tleSwgdmFsdWVdXG4gICAgICBjb21wdXRlcyA9IFtdLCAgICAgICAgICAgICAgICAgICAgLy8gY29tcHV0ZWQgYXR0cmlidXRlc1xuICAgICAgbWV0YSA9IHt9LCAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF0cmlidXRlIG1ldGFkYXRhXG4gICAgICBob29rcyA9IHt9LFxuICAgICAgYnVpbGRlcjsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBtb2RlbCBidWlsZGVyXG5cbiAgICAvLyBtYWtlIHN1cmUgdGhlIHJlc291cmNlIG5hbWUgYW5kIHBsdXJhbCBuYW1lIGFyZSBhdmFpbGFibGUgaWYgcG9zaWJsZTpcblxuICAgIGlmKCFjb25maWcubmFtZSAmJiBfYmFzZVVybCkge1xuICAgICAgY29uZmlnLm5hbWUgPSBpbmZsZWN0b3Iuc2luZ3VsYXJpemUoX2Jhc2VVcmwucmVwbGFjZShOQU1FX1JHWCwgJyQyJykpO1xuICAgIH1cblxuICAgIGlmKCFjb25maWcucGx1cmFsICYmIGNvbmZpZy5uYW1lKSB7XG4gICAgICBjb25maWcucGx1cmFsID0gaW5mbGVjdG9yLnBsdXJhbGl6ZShjb25maWcubmFtZSk7XG4gICAgfVxuXG4gICAgdmFyIENvbGxlY3Rpb24gPSBVdGlscy5idWlsZEFycmF5VHlwZSgpLFxuICAgICAgICBMaXN0ID0gVXRpbHMuYnVpbGRBcnJheVR5cGUoKSxcbiAgICAgICAgRHVtbXkgPSBmdW5jdGlvbihfYXNDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgdGhpcy4kaXNDb2xsZWN0aW9uID0gX2FzQ29sbGVjdGlvbjtcbiAgICAgICAgICB0aGlzLiRpbml0aWFsaXplKCk7IC8vIFRPRE86IGRlcHJlY2F0ZSB0aGlzXG4gICAgICAgIH07XG5cbiAgICAvLyBDb2xsZWN0aW9uIGZhY3RvcnlcbiAgICBmdW5jdGlvbiBuZXdDb2xsZWN0aW9uKF9wYXJhbXMsIF9zY29wZSkge1xuICAgICAgdmFyIGNvbCA9IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgICBjb2wuJHNjb3BlID0gX3Njb3BlIHx8IE1vZGVsO1xuICAgICAgY29sLiRwYXJhbXMgPSBfcGFyYW1zO1xuICAgICAgY29sLiRpbml0aWFsaXplKCk7XG4gICAgICByZXR1cm4gY29sO1xuICAgIH1cblxuICAgIC8vLy8vIFNldHVwIHN0YXRpYyBhcGlcblxuICAgIC8qKlxuICAgICAqIEBjbGFzcyBTdGF0aWNBcGlcbiAgICAgKiBAZXh0ZW5kcyBTY29wZUFwaVxuICAgICAqIEBleHRlbmRzIENvbW1vbkFwaVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICpcbiAgICAgKiBUaGUgcmVzdG1vZCB0eXBlIEFQSSwgZXZlcnkgZ2VuZXJhdGVkIHJlc3Rtb2QgbW9kZWwgdHlwZSBleHBvc2VzIHRoaXMgQVBJLlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IHtvYmplY3R9ICR0eXBlIFJlZmVyZW5jZSB0byB0aGUgdHlwZSBpdHNlbGYsIGZvciBjb21wYXRpYmlsaXR5IHdpdGggdGhlIHtAbGluayBTY29wZUFwaX1cbiAgICAgKlxuICAgICAqICMjIyMgQWJvdXQgb2JqZWN0IGNyZWF0aW9uXG4gICAgICpcbiAgICAgKiBEaXJlY3QgY29uc3RydWN0aW9uIG9mIG9iamVjdCBpbnN0YW5jZXMgdXNpbmcgYG5ld2AgaXMgbm90IHJlY29tbWVuZGVkLiBBIGNvbGxlY3Rpb24gb2ZcbiAgICAgKiBzdGF0aWMgbWV0aG9kcyBhcmUgYXZhaWxhYmxlIHRvIGdlbmVyYXRlIG5ldyBpbnN0YW5jZXMgb2YgYSBtb2RlbCwgZm9yIG1vcmUgaW5mb3JtYXRpb25cbiAgICAgKiByZWFkIHRoZSB7QGxpbmsgTW9kZWxDb2xsZWN0aW9ufSBkb2N1bWVudGF0aW9uLlxuICAgICAqL1xuICAgIGV4dGVuZChNb2RlbCwge1xuXG4gICAgICAvLyBnZXRzIGFuIGF0dHJpYnV0ZSBkZXNjcmlwdGlvbiAobWV0YWRhdGEpXG4gICAgICAkJGdldERlc2NyaXB0aW9uOiBmdW5jdGlvbihfYXR0cmlidXRlKSB7XG4gICAgICAgIHJldHVybiBtZXRhW19hdHRyaWJ1dGVdO1xuICAgICAgfSxcblxuICAgICAgLy8gZGVmaW5pdGlvbiBjaGFpblxuICAgICAgJCRjaGFpbjogW10sXG5cbiAgICAgIC8vIGtlZXAgYSByZWZlcmVuY2UgdG8gdHlwZSBpdHNlbGYgZm9yIHNjb3BlIGFwaSBjb21wYXRpYmlsaXR5XG4gICAgICAkdHlwZTogTW9kZWwsXG5cbiAgICAgIC8vIGNyZWF0ZXMgYSBuZXcgbW9kZWwgYm91bmQgYnkgZGVmYXVsdCB0byB0aGUgc3RhdGljIHNjb3BlXG4gICAgICAkbmV3OiBmdW5jdGlvbihfcGssIF9zY29wZSkge1xuICAgICAgICByZXR1cm4gbmV3IE1vZGVsKF9zY29wZSB8fCBNb2RlbCwgX3BrKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIGNyZWF0ZXMgYSBuZXcgY29sbGVjdGlvbiBib3VuZCBieSBkZWZhdWx0IHRvIHRoZSBzdGF0aWMgc2NvcGVcbiAgICAgICRjb2xsZWN0aW9uOiBuZXdDb2xsZWN0aW9uLFxuXG4gICAgICAvLyBnZXRzIHNjb3BlIHVybFxuICAgICAgJHVybDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBjb25maWcudXJsUHJlZml4ID8gVXRpbHMuam9pblVybChjb25maWcudXJsUHJlZml4LCBfYmFzZVVybCkgOiBfYmFzZVVybDtcbiAgICAgIH0sXG5cbiAgICAgIC8vIGJ1YmJsZXMgZXZlbnRzIGNvbW1pbmcgZnJvbSByZWxhdGVkIHJlc291cmNlc1xuICAgICAgJGRpc3BhdGNoOiBmdW5jdGlvbihfaG9vaywgX2FyZ3MsIF9jdHgpIHtcbiAgICAgICAgdmFyIGNicyA9IGhvb2tzW19ob29rXSwgaSwgY2I7XG4gICAgICAgIGlmKGNicykge1xuICAgICAgICAgIGZvcihpID0gMDsgISEoY2IgPSBjYnNbaV0pOyBpKyspIHtcbiAgICAgICAgICAgIGNiLmFwcGx5KF9jdHggfHwgdGhpcywgX2FyZ3MgfHwgW10pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIFN0YXRpY0FwaSNcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqXG4gICAgICAgKiBFeHRyYWN0cyB0aGUgcHJpbWFyeSBrZXkgZnJvbSByYXcgcmVjb3JkIGRhdGEuXG4gICAgICAgKlxuICAgICAgICogVXNlcyB0aGUga2V5IGNvbmZpZ3VyZWQgaW4gdGhlIFBSSU1BUllfS0VZIHZhcmlhYmxlIG9yICdpZCcgYnkgZGVmYXVsdC5cbiAgICAgICAqXG4gICAgICAgKiBTb21lIGNvbnNpZGVyYXRpb25zOlxuICAgICAgICogKiBUaGlzIG1ldGhvZCBjYW4gYmUgb3ZlcnJpZGVuIHRvIGhhbmRsZSBvdGhlciBzY2VuYXJpb3MuXG4gICAgICAgKiAqIFRoaXMgbWV0aG9kIHNob3VsZCBub3QgY2hhbmdlIHRoZSByYXcgZGF0YSBwYXNzZWQgdG8gaXQuXG4gICAgICAgKiAqIFRoZSBwcmltYXJ5IGtleSB2YWx1ZSBleHRyYWN0ZWQgYnkgdGhpcyBtZXRob2Qgc2hvdWxkIGJlIGNvbXBhcmFibGUgdXNpbmcgdGhlID09IG9wZXJhdG9yLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSAge3N0cmluZ30gX3Jhd0RhdGEgUmF3IG9iamVjdCBkYXRhIChiZWZvcmUgaXQgZ29lcyBpbnRvIGRlY29kZSlcbiAgICAgICAqIEByZXR1cm4ge21peGVkfSBUaGUgcHJpbWFyeSBrZXkgdmFsdWUuXG4gICAgICAgKi9cbiAgICAgIGluZmVyS2V5OiBmdW5jdGlvbihfcmF3RGF0YSkge1xuICAgICAgICBpZighX3Jhd0RhdGEgfHwgdHlwZW9mIF9yYXdEYXRhW2NvbmZpZy5wcmltYXJ5S2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gX3Jhd0RhdGFbY29uZmlnLnByaW1hcnlLZXldO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgU3RhdGljQXBpI1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICpcbiAgICAgICAqIEdldHMgYSBtb2RlbCdzIGludGVybmFsIHByb3BlcnR5IHZhbHVlLlxuICAgICAgICpcbiAgICAgICAqIFNvbWUgYnVpbHRpbiBwcm9wZXJ0aWVzOlxuICAgICAgICogKiB1cmxcbiAgICAgICAqICogdXJsUHJlZml4XG4gICAgICAgKiAqIHByaW1hcnlLZXlcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IF9rZXkgUHJvcGVydHkgbmFtZVxuICAgICAgICogQHBhcmFtICB7bWl4ZWR9IF9kZWZhdWx0IFZhbHVlIHRvIHJldHVybiBpZiBwcm9wZXJ0eSBpcyBub3QgZGVmaW5lZFxuICAgICAgICogQHJldHVybiB7bWl4ZWR9IHZhbHVlXG4gICAgICAgKi9cbiAgICAgIGdldFByb3BlcnR5OiBmdW5jdGlvbihfa2V5LCBfZGVmYXVsdCkge1xuICAgICAgICB2YXIgdmFsID0gY29uZmlnW19rZXldO1xuICAgICAgICByZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgPyB2YWwgOiBfZGVmYXVsdDtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIFN0YXRpY0FwaSNcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gUmV0dXJucyB0cnVlIGlmIG1vZGVsIGlzIG5lc3RlZC5cbiAgICAgICAqXG4gICAgICAgKiBBbiBuZXN0ZWQgbW9kZWwgY2FuIG9ubHkgYmUgdXNlZCBhcyBhIG5lc3RlZCByZXNvdXJjZSAodXNpbmcgaGFzTWFueSBvciBoYXNPbmUgcmVsYXRpb25zKVxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgbW9kZWwgaXMgbmVzdGVkLlxuICAgICAgICovXG4gICAgICBpc05lc3RlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAhX2Jhc2VVcmw7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBTdGF0aWNBcGkjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIFJldHVybnMgYSByZXNvdXJjZSBib3VuZCB0byBhIGdpdmVuIHVybCwgd2l0aCBubyBwYXJlbnQgc2NvcGUuXG4gICAgICAgKlxuICAgICAgICogVGhpcyBjYW4gYmUgdXNlZCB0byBjcmVhdGUgc2luZ2xldG9uIHJlc291cmNlczpcbiAgICAgICAqXG4gICAgICAgKiBgYGBqYXZhc2NyaXB0XG4gICAgICAgKiBtb2R1bGUoJ0Jpa2VTaG9wJywgW10pLmZhY3RvcnkoJ1N0YXR1cycsIGZ1bmN0aW9uKHJlc3Rtb2QpIHtcbiAgICAgICAqICAgcmV0dXJuIHJlc3Rtb2QubW9kZWwobnVsbCkuJHNpbmdsZSgnL2FwaS9zdGF0dXMnKTtcbiAgICAgICAqIH07KVxuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF91cmwgVXJsIHRvIGJvdW5kIHJlc291cmNlIHRvLlxuICAgICAgICogQHJldHVybiB7TW9kZWx9IG5ldyByZXNvdXJjZSBpbnN0YW5jZS5cbiAgICAgICAqL1xuICAgICAgc2luZ2xlOiBmdW5jdGlvbihfdXJsKSB7XG4gICAgICAgIHJldHVybiBuZXcgTW9kZWwoe1xuICAgICAgICAgICR1cmxGb3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy51cmxQcmVmaXggPyBVdGlscy5qb2luVXJsKGNvbmZpZy51cmxQcmVmaXgsIF91cmwpIDogX3VybDtcbiAgICAgICAgICB9XG4gICAgICAgIH0sICcnKTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQnVpbGRzIGEgbmV3IGR1bW15IHJlc291cmNlLCB0aGUgZHVtbXkgcmVzb3VyY2UgY2FuIGJlIHVzZWQgdG8gZXhlY3V0ZSByYW5kb20gcXVlcmllc1xuICAgICAgICogdXNpbmcgdGhlIHNhbWUgaW5mcmFzdHJ1Y3R1cmUgYXMgcmVjb3JkcyBhbmQgY29sbGVjdGlvbnMuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7RHVtbXl9IHRoZSBkdW1teSBvYmplY3RcbiAgICAgICAqL1xuICAgICAgZHVtbXk6IGZ1bmN0aW9uKF9hc0NvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEdW1teShfYXNDb2xsZWN0aW9uKTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlcyBhIG5ldyByZWNvcmQgbGlzdC5cbiAgICAgICAqXG4gICAgICAgKiBBIGxpc3QgaXMgYSBvcmRlcmVkIHNldCBvZiByZWNvcmRzIG5vdCBib3VuZCB0byBhIHBhcnRpY3VsYXIgc2NvcGUuXG4gICAgICAgKlxuICAgICAgICogQ29udGFpbmVkIHJlY29yZHMgY2FuIGJlbG9uZyB0byBhbnkgc2NvcGUuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7TGlzdH0gdGhlIG5ldyBsaXN0XG4gICAgICAgKi9cbiAgICAgIGxpc3Q6IGZ1bmN0aW9uKF9pdGVtcykge1xuICAgICAgICB2YXIgbGlzdCA9IG5ldyBMaXN0KCk7XG4gICAgICAgIGlmKF9pdGVtcykgbGlzdC5wdXNoLmFwcGx5KGxpc3QsIF9pdGVtcyk7XG4gICAgICAgIHJldHVybiBsaXN0O1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgU3RhdGljQXBpI1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBSZXR1cm5zIHRoZSBtb2RlbCBBUEkgbmFtZS5cbiAgICAgICAqXG4gICAgICAgKiBUaGlzIG5hbWUgc2hvdWxkIG1hdGNoIHRoZSBvbmUgdXNlZCB0aHJvdWdob3V0IHRoZSBBUEkuIEl0J3Mgb25seSB1c2VkIGJ5IHNvbWUgZXh0ZW5kZWRcbiAgICAgICAqIGZ1bmN0aW9uYWxpdHksIGxpa2UgdGhlIGRlZmF1bHQgcGFja2VyLlxuICAgICAgICpcbiAgICAgICAqIEJ5IGRlZmF1bHQgbW9kZWwgbmFtZSBpcyBpbmZlcmVkIGZyb20gdGhlIHVybCwgYnV0IGZvciBuZXN0ZWQgbW9kZWxzIGFuZCBzcGVjaWFsIGNhc2VzXG4gICAgICAgKiBpdCBzaG91bGQgYmUgbWFudWFsbHkgc2V0IGJ5IHdyaXRpbmcgdGhlIG5hbWUgYW5kIHBsdXJhbCBwcm9wZXJ0aWVzOlxuICAgICAgICpcbiAgICAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAgICAqIHJlc3Rtb2QubW9kZWwobnVsbCwge1xuICAgICAgICogICBfX25hbWVfXzogJ3Jlc291cmNlJyxcbiAgICAgICAqICAgX19wbHVyYWxfXzogJ3Jlc291cmNpbmVzcycgLy8gc2V0IG9ubHkgaWYgaW5mbGVjdG9yIGNhbnQgcHJvcGVybHkgZ2VzcyB0aGUgbmFtZS5cbiAgICAgICAqIH0pO1xuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdHJ1ZSwgcmV0dXJuIHBsdXJhbCBuYW1lXG4gICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBiYXNlIHVybC5cbiAgICAgICAqL1xuICAgICAgaWRlbnRpdHk6IGZ1bmN0aW9uKF9wbHVyYWwpIHtcbiAgICAgICAgcmV0dXJuIF9wbHVyYWwgPyBjb25maWcucGx1cmFsIDogY29uZmlnLm5hbWU7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBTdGF0aWNBcGkjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIE1vZGlmaWVzIG1vZGVsIGJlaGF2aW9yLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbXMge21peGVkfSBfbWl4aW5zIE9uZSBvciBtb3JlIG1peGlucyBvciBtb2RlbCBkZWZpbml0aW9ucy5cbiAgICAgICAqIEByZXR1cm4ge01vZGVsfSBUaGUgbW9kZWxcbiAgICAgICAqL1xuICAgICAgbWl4OiBmdW5jdGlvbigvKiBtaXhpbnMgKi8pIHtcbiAgICAgICAgYnVpbGRlci5jaGFpbihhcmd1bWVudHMpO1xuICAgICAgICB0aGlzLiQkY2hhaW4ucHVzaC5hcHBseSh0aGlzLiQkY2hhaW4sIGFyZ3VtZW50cyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcblxuICAgICAgLy8gU3RyYXRlZ2llc1xuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBTdGF0aWNBcGkjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIFRoZSBtb2RlbCB1bnBhY2tpbmcgc3RyYXRlZ3lcbiAgICAgICAqXG4gICAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgdG8gZXh0cmFjdCByZWNvcmQgZGF0YSBmcm9tIGEgcmVxdWVzdCByZXNwb25zZSwgaXRzIGFsc29cbiAgICAgICAqIHJlc3BvbnNpYmxlIG9mIGhhbmRsaW5nIHRoZSByZXNwb25zZSBtZXRhZGF0YS5cbiAgICAgICAqXG4gICAgICAgKiBPdmVycmlkZSB0aGlzIG1ldGhvZCB0byBjaGFuZ2UgdGhlIG1ldGFkYXRhIHByb2Nlc3Npbmcgc3RyYXRlZ3ksIGJ5IGRlZmF1bHQgaXRzIGEgbm9vcFxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbXMge21peGVkfSBfcmVzb3VyY2UgUmVsYXRlZCByZXNvdXJjZSBpbnN0YW5jZVxuICAgICAgICogQHBhcmFtcyB7bWl4ZWR9IF9yYXcgUmVzcG9uc2UgcmF3IGRhdGFcbiAgICAgICAqIEByZXR1cm4ge21peGVkfSBSZXNvdXJjZSByYXcgZGF0YVxuICAgICAgICovXG4gICAgICB1bnBhY2s6IGZ1bmN0aW9uKF9yZXNvdXJjZSwgX3JhdykgeyByZXR1cm4gX3JhdzsgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgU3RhdGljQXBpI1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBUaGUgbW9kZWwgcGFja2luZyBzdHJhdGVneVxuICAgICAgICpcbiAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB0byB3cmFwIHJhdyByZWNvcmQgZGF0YSB0byBiZSBzZW50IGluIGEgcmVxdWVzdC5cbiAgICAgICAqXG4gICAgICAgKiBPdmVycmlkZSB0aGlzIG1ldGhvZCB0byBjaGFuZ2UgdGhlIHJlcXVlc3QgcGFja2luZyBzdHJhdGVneSwgYnkgZGVmYXVsdCBpdHMgYSBub29wXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtcyB7bWl4ZWR9IF9yZXNvdXJjZSBSZWxhdGVkIHJlc291cmNlIGluc3RhbmNlXG4gICAgICAgKiBAcGFyYW1zIHttaXhlZH0gX3JhdyBSZWNvcmQgZGF0YSB0byBiZSBzZW50IChjYW4gYmUgYW4gYXJyYXkgaWYgcmVzb3VyY2UgaXMgY29sbGVjdGlvbilcbiAgICAgICAqIEByZXR1cm4ge21peGVkfSBXcmFwcGVkIGRhdGFcbiAgICAgICAqL1xuICAgICAgcGFjazogZnVuY3Rpb24oX3JlY29yZCwgX3JhdykgeyByZXR1cm4gX3JhdzsgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgU3RhdGljQXBpI1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBUaGUgbW9kZWwgZGVjb2Rpbmcgc3RyYXRlZ3lcbiAgICAgICAqXG4gICAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgdG8gcG9wdWxhdGUgYSByZWNvcmQgZnJvbSByYXcgZGF0YSAodW5wcGFja2VkKVxuICAgICAgICovXG4gICAgICBkZWNvZGU6IHNlcmlhbGl6ZXIuZGVjb2RlLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBTdGF0aWNBcGkjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIFRoZSBtb2RlbCBlbmNvZGluZyBzdHJhdGVneVxuICAgICAgICpcbiAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB0byBleHRyYWN0IHJhdyBkYXRhIGZyb20gYSByZWNvcmQgdG8gYmUgc2VudCB0byBzZXJ2ZXIgKGJlZm9yZSBwYWNraW5nKVxuICAgICAgICovXG4gICAgICBlbmNvZGU6IHNlcmlhbGl6ZXIuZW5jb2RlLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBTdGF0aWNBcGkjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIFRoZSBtb2RlbCBuYW1lIGRlY29kaW5nIHN0cmF0ZWd5XG4gICAgICAgKlxuICAgICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIG9uIGV2ZXJ5IHJhdyByZWNvcmQgZGF0YSBwcm9wZXJ0eSB0byByZW5hbWUgaXQsIGJ5IGRlZmF1bHQgaXMgbm90IGRlZmluZWQuXG4gICAgICAgKlxuICAgICAgICogT3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gY2hhbmdlIHRoZSBwcm9wZXJ0eSByZW5hbWluZyBzdHJhdGVneS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW1zIHtzdHJpbmd9IF9uYW1lIFJlc3BvbnNlIChyYXcpIG5hbWVcbiAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gUmVjb3JkIG5hbWVcbiAgICAgICAqL1xuICAgICAgZGVjb2RlTmFtZTogbnVsbCxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgU3RhdGljQXBpI1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBUaGUgbW9kZWwgbmFtZSBlbmNvZGluZyBzdHJhdGVneVxuICAgICAgICpcbiAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIGVuY29kaW5nIGEgcmVjb3JkIHRvIHJlbmFtZSB0aGUgcmVjb3JkIHByb3BlcnRpZXMgaW50byB0aGUgcmF3IGRhdGEgcHJvcGVydGllcyxcbiAgICAgICAqIGJ5IGRlZmF1bHQgaXMgbm90IGRlZmluZWQuXG4gICAgICAgKlxuICAgICAgICogT3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gY2hhbmdlIHRoZSBwcm9wZXJ0eSByZW5hbWluZyBzdHJhdGVneVxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbXMge3N0cmluZ30gX25hbWUgUmVjb3JkIG5hbWVcbiAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gUmVzcG9uc2UgKHJhdykgbmFtZVxuICAgICAgICovXG4gICAgICBlbmNvZGVOYW1lOiBudWxsLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBTdGF0aWNBcGkjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIFRoZSBtb2RlbCBuYW1lIHRvIHVybCBlbmNvZGluZyBzdHJhdGVneVxuICAgICAgICpcbiAgICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIHRyYW5zbGF0aW5nIGEgbmFtZSBpbnRvIGFuIHVybCBmcmFnbWVudCAobWFpbmx5IGJ5IHJlbGF0aW9ucykuXG4gICAgICAgKlxuICAgICAgICogQnkgZGVmYXVsdCBpdCB1c2VzIHRoZSBgaW5mbGVjdG9yLnBhcmFtZXRlcml6ZWAgbWV0aG9kLCBpbiAxLjIgdGhpcyB3aWxsIGNoYW5nZSBhbmQgdGhlIGRlZmF1bHRcbiAgICAgICAqIGJlaGF2aW91ciB3aWxsIGJlIHRvIGRvIG5vdGhpbmcuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtcyB7c3RyaW5nfSBfbmFtZSBsb2NhbCBuYW1lXG4gICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IHVybCBmcmFnbWVudFxuICAgICAgICovXG4gICAgICBlbmNvZGVVcmxOYW1lOiBmdW5jdGlvbihfbmFtZSkge1xuICAgICAgICAkbG9nLndhcm4oJ0RlZmF1bHQgcGFyZW1ldGVyaXphdGlvbiBvZiB1cmxzIHdpbGwgYmUgZGlzYWJsZWQgaW4gMS4yLCBvdmVycmlkZSBNb2RlbC5lbmNvZGVVcmxOYW1lIHdpdGggaW5mbGVjdG9yLnBhcmFtZXRlcml6ZSBpbiB5b3VyIGJhc2UgbW9kZWwgdG8ga2VlcCB0aGUgc2FtZSBiZWhhdmlvdXIuJyk7XG4gICAgICAgIHJldHVybiBpbmZsZWN0b3IucGFyYW1ldGVyaXplKF9uYW1lKTtcbiAgICAgIH1cblxuICAgIH0sIFNjb3BlQXBpKTtcblxuICAgIC8vLy8vIFNldHVwIHJlY29yZCBhcGlcblxuICAgIGV4dGVuZChNb2RlbC5wcm90b3R5cGUsIHtcblxuICAgICAgJHR5cGU6IE1vZGVsLFxuXG4gICAgICAvLyBkZWZhdWx0IGluaXRpYWxpemVyOiBsb2FkcyB0aGUgZGVmYXVsdCBwYXJhbWV0ZXIgdmFsdWVzXG4gICAgICAkaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0bXAsIGksIHNlbGYgPSB0aGlzO1xuICAgICAgICBmb3IoaSA9IDA7ICh0bXAgPSBkZWZhdWx0c1tpXSk7IGkrKykge1xuICAgICAgICAgIHRoaXNbdG1wWzBdXSA9ICh0eXBlb2YgdG1wWzFdID09PSAnZnVuY3Rpb24nKSA/IHRtcFsxXS5hcHBseSh0aGlzKSA6IHRtcFsxXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcihpID0gMDsgKHRtcCA9IGNvbXB1dGVzW2ldKTsgaSsrKSB7XG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYsIHRtcFswXSwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogdG1wWzFdXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH0sIENvbW1vbkFwaSwgUmVjb3JkQXBpLCBFeHRlbmRlZEFwaSk7XG5cbiAgICAvLy8vLyBTZXR1cCBjb2xsZWN0aW9uIGFwaVxuXG4gICAgZXh0ZW5kKENvbGxlY3Rpb24ucHJvdG90eXBlLCB7XG5cbiAgICAgICR0eXBlOiBNb2RlbCxcblxuICAgICAgLy8gcHJvdmlkZSByZWNvcmQgY29udHJ1Y3RvclxuICAgICAgJG5ldzogZnVuY3Rpb24oX3BrLCBfc2NvcGUpIHtcbiAgICAgICAgcmV0dXJuIE1vZGVsLiRuZXcoX3BrLCBfc2NvcGUgfHwgdGhpcyk7XG4gICAgICB9LFxuXG4gICAgICAvLyBwcm92aWRlIGNvbGxlY3Rpb24gY29uc3RydWN0b3JcbiAgICAgICRjb2xsZWN0aW9uOiBmdW5jdGlvbihfcGFyYW1zLCBfc2NvcGUpIHtcbiAgICAgICAgX3BhcmFtcyA9IHRoaXMuJHBhcmFtcyA/IGFuZ3VsYXIuZXh0ZW5kKHt9LCB0aGlzLiRwYXJhbXMsIF9wYXJhbXMpIDogX3BhcmFtcztcbiAgICAgICAgcmV0dXJuIG5ld0NvbGxlY3Rpb24oX3BhcmFtcywgX3Njb3BlIHx8IHRoaXMuJHNjb3BlKTtcbiAgICAgIH1cblxuICAgIH0sIExpc3RBcGksIFNjb3BlQXBpLCBDb21tb25BcGksIENvbGxlY3Rpb25BcGksIEV4dGVuZGVkQXBpKTtcblxuICAgIC8vLy8vIFNldHVwIGxpc3QgYXBpXG5cbiAgICBleHRlbmQoTGlzdC5wcm90b3R5cGUsIHtcblxuICAgICAgJHR5cGU6IE1vZGVsXG5cbiAgICB9LCBMaXN0QXBpLCBDb21tb25BcGkpO1xuXG4gICAgLy8vLy8gU2V0dXAgZHVtbXkgYXBpXG5cbiAgICBleHRlbmQoRHVtbXkucHJvdG90eXBlLCB7XG5cbiAgICAgICR0eXBlOiBNb2RlbCxcblxuICAgICAgJGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBOb3RoaW5nIGJ5IGRlZmF1bHRcbiAgICAgIH1cblxuICAgIH0sIENvbW1vbkFwaSk7XG5cbiAgICAvLy8vLyBTZXR1cCBidWlsZGVyXG5cbiAgICB2YXIgQVBJUyA9IHtcbiAgICAgIE1vZGVsOiBNb2RlbCxcbiAgICAgIFJlY29yZDogTW9kZWwucHJvdG90eXBlLFxuICAgICAgQ29sbGVjdGlvbjogQ29sbGVjdGlvbi5wcm90b3R5cGUsXG4gICAgICBMaXN0OiBMaXN0LnByb3RvdHlwZSxcbiAgICAgIER1bW15OiBEdW1teS5wcm90b3R5cGVcbiAgICB9O1xuXG4gICAgLy8gaGVscGVyIHVzZWQgdG8gZXh0ZW5kIGFwaSdzXG4gICAgZnVuY3Rpb24gaGVscERlZmluZShfYXBpLCBfbmFtZSwgX2Z1bikge1xuICAgICAgdmFyIGFwaSA9IEFQSVNbX2FwaV07XG5cbiAgICAgIFV0aWxzLmFzc2VydCghIWFwaSwgJ0ludmFsaWQgYXBpIG5hbWUgJDEnLCBfYXBpKTtcblxuICAgICAgaWYoX25hbWUpIHtcbiAgICAgICAgYXBpW19uYW1lXSA9IFV0aWxzLm92ZXJyaWRlKGFwaVtfbmFtZV0sIF9mdW4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgVXRpbHMuZXh0ZW5kT3ZlcnJpZGVuKGFwaSwgX2Z1bik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gbG9hZCB0aGUgYnVpbGRlclxuICAgIGJ1aWxkZXIgPSBuZXcgQnVpbGRlcihhbmd1bGFyLmV4dGVuZChzZXJpYWxpemVyLmRzbCgpLCB7XG5cbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIEJ1aWxkZXJBcGkjXG4gICAgICAgKlxuICAgICAgICogU2V0cyBvbmUgb2YgdGhlIG1vZGVsJ3MgY29uZmlndXJhdGlvbiBwcm9wZXJ0aWVzLlxuICAgICAgICpcbiAgICAgICAqIFRoZSBmb2xsb3dpbmcgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzIGFyZSBhdmFpbGFibGUgYnkgZGVmYXVsdDpcbiAgICAgICAqICogcHJpbWFyeUtleTogVGhlIG1vZGVsJ3MgcHJpbWFyeSBrZXksIGRlZmF1bHRzIHRvICoqaWQqKi4gS2V5cyBtdXN0IHVzZSBzZXJ2ZXIgbmFtaW5nIGNvbnZlbnRpb24hXG4gICAgICAgKiAqIHVybFByZWZpeDogVXJsIHByZWZpeCB0byBwcmVwZW5kIHRvIHJlc291cmNlIHVybCwgdXNlZnVsbCB0byB1c2UgaW4gYSBiYXNlIG1peGluIHdoZW4gbXVsdGlwbGVzIG1vZGVscyBoYXZlIHRoZSBzYW1lIHByZWZpeC5cbiAgICAgICAqICogdXJsOiBUaGUgcmVzb3VyY2UgYmFzZSB1cmwsIG51bGwgYnkgZGVmYXVsdC4gSWYgbm90IGdpdmVuIHJlc291cmNlIGlzIGNvbnNpZGVyZWQgbmVzdGVkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfa2V5IFRoZSBjb25maWd1cmF0aW9uIGtleSB0byBzZXQuXG4gICAgICAgKiBAcGFyYW0ge21peGVkfSBfdmFsdWUgVGhlIGNvbmZpZ3VyYXRpb24gdmFsdWUuXG4gICAgICAgKiBAcmV0dXJuIHtCdWlsZGVyQXBpfSBzZWxmXG4gICAgICAgKi9cbiAgICAgIHNldFByb3BlcnR5OiBmdW5jdGlvbiAoX2tleSwgX3ZhbHVlKSB7XG4gICAgICAgIGNvbmZpZ1tfa2V5XSA9IF92YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBCdWlsZGVyQXBpI1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBTZXRzIHRoZSBkZWZhdWx0IHZhbHVlIGZvciBhbiBhdHRyaWJ1dGUuXG4gICAgICAgKlxuICAgICAgICogRGVmYXVsdHMgdmFsdWVzIGFyZSBzZXQgb25seSBvbiBvYmplY3QgY29uc3RydWN0aW9uIHBoYXNlLlxuICAgICAgICpcbiAgICAgICAqIGlmIGBfaW5pdGAgaXMgYSBmdW5jdGlvbiwgdGhlbiBpdHMgZXZhbHVhdGVkIGV2ZXJ5IHRpbWUgdGhlXG4gICAgICAgKiBkZWZhdWx0IHZhbHVlIGlzIHJlcXVpcmVkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfYXR0ciBBdHRyaWJ1dGUgbmFtZVxuICAgICAgICogQHBhcmFtIHttaXhlZH0gX2luaXQgRGVmYXVsZiB2YWx1ZSAvIGluaWxpbmUgZnVuY3Rpb25cbiAgICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgICAqL1xuICAgICAgYXR0ckRlZmF1bHQ6IGZ1bmN0aW9uKF9hdHRyLCBfaW5pdCkge1xuICAgICAgICBkZWZhdWx0cy5wdXNoKFtfYXR0ciwgX2luaXRdKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZW1iZXJvZiBCdWlsZGVyQXBpI1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBTZXRzIGEgY29tcHV0ZWQgdmFsdWUgZm9yIGFuIGF0dHJpYnV0ZS5cbiAgICAgICAqXG4gICAgICAgKiBDb21wdXRlZCB2YWx1ZXMgYXJlIHNldCBvbmx5IG9uIG9iamVjdCBjb25zdHJ1Y3Rpb24gcGhhc2UuXG4gICAgICAgKiBDb21wdXRlZCB2YWx1ZXMgYXJlIGFsd2F5cyBtYXNrZWRcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gX2F0dHIgQXR0cmlidXRlIG5hbWVcbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IF9mbiBGdW5jdGlvbiB0aGF0IHJldHVybnMgdmFsdWVcbiAgICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgICAqL1xuICAgICAgYXR0ckNvbXB1dGVkOiBmdW5jdGlvbihfYXR0ciwgX2ZuKSB7XG4gICAgICAgIGNvbXB1dGVzLnB1c2goW19hdHRyLCBfZm5dKTtcbiAgICAgICAgdGhpcy5hdHRyTWFzayhfYXR0ciwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgQnVpbGRlckFwaSNcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gUmVnaXN0ZXJzIGF0dHJpYnV0ZSBtZXRhZGF0YS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gX25hbWUgQXR0cmlidXRlIG5hbWVcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBfbWV0YWRhdGEgQXR0cmlidXRlIG1ldGFkYXRhXG4gICAgICAgKiBAcmV0dXJuIHtCdWlsZGVyQXBpfSBzZWxmXG4gICAgICAgKi9cbiAgICAgIGF0dHJNZXRhOiBmdW5jdGlvbihfbmFtZSwgX21ldGFkYXRhKSB7XG4gICAgICAgIG1ldGFbX25hbWVdID0gZXh0ZW5kKG1ldGFbX25hbWVdIHx8IHt9LCBfbWV0YWRhdGEpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG1lbWJlcm9mIEJ1aWxkZXJBcGkjXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIEFkZHMgbWV0aG9kcyB0byB0aGUgbW9kZWxcbiAgICAgICAqXG4gICAgICAgKiBUaGlzIG1ldGhvZCBhbGxvd3MgdG8gZXh0ZW5kIHRoZSBkaWZmZXJlbnQgbW9kZWwgQVBJJ3MuXG4gICAgICAgKlxuICAgICAgICogVGhlIGZvbGxvd2luZyBBUEkncyBjYW4gYmUgZXh0ZW5kZWQgdXNpbmcgdGhpcyBtZXRob2Q6XG4gICAgICAgKiAqIE1vZGVsOiBUaGUgc3RhdGljIEFQSSwgYWZmZWN0cyB0aGUgTW9kZWwgb2JqZWN0IGl0c2VsZi5cbiAgICAgICAqICogUmVjb3JkOiBBZmZlY3RzIGVhY2ggcmVjb3JkIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwuXG4gICAgICAgKiAqIENvbGxlY3Rpb246IEFmZmVjdHMgZWFjaCBjb2xsZWN0aW9uIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwuXG4gICAgICAgKiAqIFNjb3BlOiBBZmZlY3RzIGJvdGggdGhlIHN0YXRpYyBBUEkgYW5kIGNvbGxlY3Rpb25zLlxuICAgICAgICogKiBSZXNvdXJjZTogQWZmZWN0cyByZWNvcmRzIGFuZCBjb2xsZWN0aW9ucy5cbiAgICAgICAqXG4gICAgICAgKiBJZiBubyBhcGkgaXMgZ2l2ZW5cbiAgICAgICAqXG4gICAgICAgKlxuICAgICAgICogSWYgbm8gc2NvcGUgaXMgZ2l2ZW4sXG4gICAgICAgKiBCeSBkZWZhdWx0IHRoaXMgbWV0aG9kIGV4dGVuZHMgdGhlICoqUmVjb3JkKiogcHJvdG90eXBlLlxuICAgICAgICogSWYgY2FsbGVkIHdpdGggYW4gb2JqZWN0XG4gICAgICAgKiBpbnN0ZWFkIG9mIGEgZnVuY3Rpb24gaXQgY2FuIGJlIHVzZWQgdG8gZXh0ZW5kIHRoZSBjb2xsZWN0aW9uIGFuZCB0aGUgdHlwZSB3aXRoXG4gICAgICAgKiBzcGVjaWZpYyBpbXBsZW1lbnRhdGlvbnMuXG4gICAgICAgKlxuICAgICAgICogVXNhZ2U6XG4gICAgICAgKlxuICAgICAgICogYGBgamF2YXNjcmlwdFxuICAgICAgICogcmVzdG1vZC5taXhpbihmdW5jdGlvbigpIHtcbiAgICAgICAqICAgdGhpcy5kZWZpbmUoJ215UmVjb3JkTWV0aG9kJywgZnVuY3Rpb24oKSB7fSlcbiAgICAgICAqICAgICAgIC5kZWZpbmUoJ01vZGVsLm15U3RhdGljTWV0aG9kJywgZnVuY3Rpb24oKSB7fSlcbiAgICAgICAqICAgICAgIC5kZWZpbmUoJ0NvbGxlY3Rpb24nLCB7IH0pOyAvLyBvYmplY3QgdG8gZXh0ZW5kIGNvbGxlY3Rpb24gYXBpIHdpdGhcbiAgICAgICAqIH0pO1xuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICogSXQgaXMgcG9zaWJsZSB0byBvdmVycmlkZSBhbiBleGlzdGluZyBtZXRob2QgdXNpbmcgZGVmaW5lLCBpZiBvdmVycmlkZW4sXG4gICAgICAgKiB0aGUgb2xkIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHVzaW5nIGB0aGlzLiRzdXBlcmAgaW5zaWRlIGRlIG5ldyBtZXRob2QuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF93aGVyZVxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gX2Z1biBGdW5jdGlvbiB0byBkZWZpbmUgb3Igb2JqZWN0IHdpdGggcGFydGljdWxhciBpbXBsZW1lbnRhdGlvbnNcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfYXBpIE9uZSBvZiB0aGUgYXBpIG5hbWVzIGxpc3RlZCBhYm92ZSwgaWYgbm90IGdpdmVuIGRlZmF1bHRzIHRvICdSZWNvcmQnXG4gICAgICAgKiBAcmV0dXJuIHtCdWlsZGVyQXBpfSBzZWxmXG4gICAgICAgKi9cbiAgICAgIGRlZmluZTogZnVuY3Rpb24oX3doZXJlLCBfZnVuKSB7XG5cbiAgICAgICAgdmFyIG5hbWUgPSBmYWxzZSwgYXBpID0gJ1JlY29yZCc7XG4gICAgICAgIGlmKHR5cGVvZiBfZnVuID09PSAnb2JqZWN0JyAmJiBfZnVuKSB7XG4gICAgICAgICAgYXBpID0gX3doZXJlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5hbWUgPSBfd2hlcmUuc3BsaXQoJy4nKTtcbiAgICAgICAgICBpZihuYW1lLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgbmFtZSA9IG5hbWVbMF07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFwaSA9IG5hbWVbMF07XG4gICAgICAgICAgICBuYW1lID0gbmFtZVsxXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2goYXBpKSB7XG4gICAgICAgIC8vIFZpcnR1YWwgQVBJJ3NcbiAgICAgICAgY2FzZSAnTGlzdCc6XG4gICAgICAgICAgaGVscERlZmluZSgnQ29sbGVjdGlvbicsIG5hbWUsIF9mdW4pO1xuICAgICAgICAgIGhlbHBEZWZpbmUoJ0xpc3QnLCBuYW1lLCBfZnVuKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnU2NvcGUnOlxuICAgICAgICAgIGhlbHBEZWZpbmUoJ01vZGVsJywgbmFtZSwgX2Z1bik7XG4gICAgICAgICAgaGVscERlZmluZSgnQ29sbGVjdGlvbicsIG5hbWUsIF9mdW4pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdSZXNvdXJjZSc6XG4gICAgICAgICAgaGVscERlZmluZSgnUmVjb3JkJywgbmFtZSwgX2Z1bik7XG4gICAgICAgICAgaGVscERlZmluZSgnQ29sbGVjdGlvbicsIG5hbWUsIF9mdW4pO1xuICAgICAgICAgIGhlbHBEZWZpbmUoJ0xpc3QnLCBuYW1lLCBfZnVuKTtcbiAgICAgICAgICBoZWxwRGVmaW5lKCdEdW1teScsIG5hbWUsIF9mdW4pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGhlbHBEZWZpbmUoYXBpLCBuYW1lLCBfZnVuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbWVtYmVyb2YgQnVpbGRlckFwaSNcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gQWRkcyBhbiBldmVudCBob29rXG4gICAgICAgKlxuICAgICAgICogSG9va3MgYXJlIHVzZWQgdG8gZXh0ZW5kIG9yIG1vZGlmeSB0aGUgbW9kZWwgYmVoYXZpb3IsIGFuZCBhcmUgbm90XG4gICAgICAgKiBkZXNpZ25lZCB0byBiZSB1c2VkIGFzIGFuIGV2ZW50IGxpc3RlbmluZyBzeXN0ZW0uXG4gICAgICAgKlxuICAgICAgICogVGhlIGdpdmVuIGZ1bmN0aW9uIGlzIGV4ZWN1dGVkIGluIHRoZSBob29rJ3MgY29udGV4dCwgZGlmZmVyZW50IGhvb2tzXG4gICAgICAgKiBtYWtlIGRpZmZlcmVudCBwYXJhbWV0ZXJzIGF2YWlsYWJsZSB0byBjYWxsYmFja3MuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF9ob29rIFRoZSBob29rIG5hbWUsIHJlZmVyIHRvIHJlc3Rtb2QgZG9jcyBmb3IgYnVpbHRpbiBob29rcy5cbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IF9kbyBmdW5jdGlvbiB0byBiZSBleGVjdXRlZFxuICAgICAgICogQHJldHVybiB7QnVpbGRlckFwaX0gc2VsZlxuICAgICAgICovXG4gICAgICBvbjogZnVuY3Rpb24oX2hvb2ssIF9kbykge1xuICAgICAgICAoaG9va3NbX2hvb2tdIHx8IChob29rc1tfaG9va10gPSBbXSkpLnB1c2goX2RvKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgYnVpbGRlci5jaGFpbihfYmFzZUNoYWluKTsgLy8gbG9hZCBiYXNlIGNoYWluLlxuXG4gICAgcmV0dXJuIE1vZGVsO1xuICB9O1xuXG59XSk7XG5cbi8qKlxuICogQGNsYXNzIEZhc3RRXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogU3luY2hyb25vdXMgcHJvbWlzZSBpbXBsZW1lbnRhdGlvbiAocGFydGlhbClcbiAqXG4gKi9cblJNTW9kdWxlLmZhY3RvcnkoJ1JNRmFzdFEnLCBbZnVuY3Rpb24oKSB7XG5cbiAgdmFyIGlzRnVuY3Rpb24gPSBhbmd1bGFyLmlzRnVuY3Rpb24sXG4gICAgICBjYXRjaEVycm9yID0gZnVuY3Rpb24oX2Vycm9yKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgX2Vycm9yKTtcbiAgICAgIH07XG5cbiAgZnVuY3Rpb24gc2ltcGxlUShfdmFsLCBfd2l0aEVycm9yKSB7XG5cbiAgICBpZihfdmFsICYmIGlzRnVuY3Rpb24oX3ZhbC50aGVuKSkgcmV0dXJuIHdyYXBwZWRRKF92YWwpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHNpbXBsZTogdHJ1ZSxcblxuICAgICAgdGhlbjogZnVuY3Rpb24oX3N1Y2Nlc3MsIF9lcnJvcikge1xuICAgICAgICByZXR1cm4gc2ltcGxlUShfd2l0aEVycm9yID8gX2Vycm9yKF92YWwpIDogX3N1Y2Nlc3MoX3ZhbCkpO1xuICAgICAgfSxcbiAgICAgICdjYXRjaCc6IGNhdGNoRXJyb3IsXG4gICAgICAnZmluYWxseSc6IGZ1bmN0aW9uKF9jYikge1xuICAgICAgICB2YXIgcmVzdWx0ID0gX2NiKCk7XG4gICAgICAgIGlmKHJlc3VsdCAmJiBpc0Z1bmN0aW9uKF92YWwudGhlbikpIHtcbiAgICAgICAgICAvLyBpZiBmaW5hbGx5IHJldHVybnMgYSBwcm9taXNlLCB0aGVuXG4gICAgICAgICAgcmV0dXJuIHdyYXBwZWRRKF92YWwudGhlbihcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3dpdGhFcnJvciA/IHNpbXBsZVEoX3ZhbCwgdHJ1ZSkgOiBfdmFsOyB9LFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7IHJldHVybiBfd2l0aEVycm9yID8gc2ltcGxlUShfdmFsLCB0cnVlKSA6IF92YWw7IH0pXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiB3cmFwcGVkUShfcHJvbWlzZSkge1xuICAgIGlmKF9wcm9taXNlLnNpbXBsZSkgcmV0dXJuIF9wcm9taXNlO1xuXG4gICAgdmFyIHNpbXBsZTtcblxuICAgIC8vIHdoZW4gcmVzb2x2ZWQsIG1ha2UgJHEgYSBzaW1wbGVRXG4gICAgX3Byb21pc2UudGhlbihmdW5jdGlvbihfdmFsKSB7XG4gICAgICBzaW1wbGUgPSBzaW1wbGVRKF92YWwpO1xuICAgIH0sIGZ1bmN0aW9uKF92YWwpIHtcbiAgICAgIHNpbXBsZSA9IHNpbXBsZVEoX3ZhbCwgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdGhlbjogZnVuY3Rpb24oX3N1Y2Nlc3MsIF9lcnJvcikge1xuICAgICAgICByZXR1cm4gc2ltcGxlID9cbiAgICAgICAgICBzaW1wbGUudGhlbihfc3VjY2VzcywgX2Vycm9yKSA6XG4gICAgICAgICAgd3JhcHBlZFEoX3Byb21pc2UudGhlbihfc3VjY2VzcywgX2Vycm9yKSk7XG4gICAgICB9LFxuICAgICAgJ2NhdGNoJzogY2F0Y2hFcnJvcixcbiAgICAgICdmaW5hbGx5JzogZnVuY3Rpb24oX2NiKSB7XG4gICAgICAgIHJldHVybiBzaW1wbGUgP1xuICAgICAgICAgIHNpbXBsZVsnZmluYWxseSddKF9jYikgOlxuICAgICAgICAgIHdyYXBwZWRRKF9wcm9taXNlWydmaW5hbGx5J10oX2NiKSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmVqZWN0OiBmdW5jdGlvbihfcmVhc29uKSB7XG4gICAgICByZXR1cm4gc2ltcGxlUShfcmVhc29uLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgLy8gbm9uIHdhaXRpbmcgcHJvbWlzZSwgaWYgcmVzb2x2ZWQgZXhlY3V0ZXMgaW1tZWRpYXRlbHlcbiAgICB3aGVuOiBmdW5jdGlvbihfdmFsKSB7XG4gICAgICByZXR1cm4gc2ltcGxlUShfdmFsLCBmYWxzZSk7XG4gICAgfSxcblxuICAgIHdyYXA6IHdyYXBwZWRRXG4gIH07XG59XSk7XG5cblJNTW9kdWxlLmZhY3RvcnkoJ1JNUGFja2VyQ2FjaGUnLCBbZnVuY3Rpb24oKSB7XG5cbiAgdmFyIHBhY2tlckNhY2hlO1xuXG4gIC8qKlxuICAgKiBAY2xhc3MgUGFja2VyQ2FjaGVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFRoZSBwYWNrZXIgY2FjaGUgc2VydmljZSBlbmFibGVzIHBhY2tpbmcgc3RyYXRlZ2llcyB0byByZWdpc3RlciByYXcgb2JqZWN0IGRhdGEgdGhhdCBjYW4gYmUgdGhlbiB1c2VkIGJ5XG4gICAqIHN1cHBvcnRpbmcgcmVsYXRpb25zIGR1cmluZyB0aGUgZGVjb2RpbmcgcHJvY2VzcyB0byBwcmVsb2FkIG90aGVyIHJlbGF0ZWQgcmVzb3VyY2VzLlxuICAgKlxuICAgKiBUaGlzIGlzIHNwZWNpYWxseSB1c2VmdWwgZm9yIGFwaXMgdGhhdCBpbmNsdWRlIGxpbmtlZCBvYmplY3RzIGRhdGEgaW4gZXh0ZXJuYWwgbWV0YWRhdGEuXG4gICAqXG4gICAqIFRoZSBwYWNrZXIgY2FjaGUgaXMgcmVzZXQgb24gZXZlcnkgcmVzcG9uc2UgdW53cmFwcGluZyBzbyBpdCdzIG5vdCBzdXBwb3NlZCB0byBiZSB1c2VkIGFzIGFuXG4gICAqIGFwcGxpY2F0aW9uIHdpZGUgY2FjaGUuXG4gICAqXG4gICAqICMjIyBGb3IgZXh0ZW5zaW9uIGRldmVsb3BlcnM6XG4gICAqXG4gICAqIFVzZSB0aGUgYGZlZWRgIG1ldGhvZCB0byBhZGQgbmV3IHJhdyBkYXRhIHRvIGNhY2hlLlxuICAgKlxuICAgKiAjIyMgRm9yIHJlbGF0aW9uIGRldmVsb3BlcnM6XG4gICAqXG4gICAqIFVzZSB0aGUgYHJlc29sdmVgIG1ldGhvZCB0byBpbmplY3QgY2FjaGUgZGF0YSBpbnRvIGEgZ2l2ZW4gaWRlbnRpZmllZCByZWNvcmQuXG4gICAqXG4gICAqL1xuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBQYWNrZXJDYWNoZSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBGZWVkIGRhdGEgdG8gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IF9uYW1lIFJlc291cmNlIG5hbWUgKHNpbmd1bGFyKVxuICAgICAqIEBwYXJhbSB7YXJyYXl9IF9yYXdSZWNvcmRzIFJhdyByZWNvcmQgZGF0YSBhcyBhbiBhcnJheVxuICAgICAqL1xuICAgIGZlZWQ6IGZ1bmN0aW9uKF9uYW1lLCBfcmF3UmVjb3Jkcykge1xuICAgICAgcGFja2VyQ2FjaGVbX25hbWVdID0gX3Jhd1JlY29yZHM7IC8vIFRPRE86IG1heWJlIGFwcGVuZCBuZXcgcmVjb3JkIHRvIHN1cHBvcnQgZXh0ZW5kZWQgc2NlbmFyaW9zLlxuICAgIH0sXG5cbiAgICAvLyBJREVBOiBmZWVkU2luZ2xlOiB3b3VsZCByZXF1aXJlIHR3byBzdGVwIHJlc29sdmUgbWFueSAtPiBzaW5nbGVcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBQYWNrZXJDYWNoZSNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvbiBTZWFyY2hlcyBmb3IgZGF0YSBtYXRjaGluZyB0aGUgcmVjb3JkJ3MgcGssIGlmIGZvdW5kIGRhdGEgaXMgdGhlbiBmZWQgdG8gdGhlIHJlY29yZCB1c2luZyAkZGVjb2RlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZWNvcmRBcGl9IF9yZWNvcmQgcmVzdG1vZCByZWNvcmQgdG8gcmVzb2x2ZSwgbXVzdCBiZSBpZGVudGlmaWVkLlxuICAgICAqIEByZXR1cm4ge1JlY29yZEFwaX0gVGhlIHJlY29yZCwgc28gY2FsbCBjYW4gYmUgbmVzdGVkLlxuICAgICAqL1xuICAgIHJlc29sdmU6IGZ1bmN0aW9uKF9yZWNvcmQpIHtcblxuICAgICAgaWYocGFja2VyQ2FjaGUpIHsgLy8gbWFrZSBzdXJlIHRoaXMgaXMgYSBwYWNrZXIgY2FjaGUgZW5hYmxlZCBjb250ZXh0LlxuXG4gICAgICAgIHZhciBtb2RlbFR5cGUgPSBfcmVjb3JkLiR0eXBlLFxuICAgICAgICAgICAgY2FjaGUgPSBwYWNrZXJDYWNoZVttb2RlbFR5cGUuaWRlbnRpdHkodHJ1ZSldO1xuXG4gICAgICAgIGlmKGNhY2hlICYmIF9yZWNvcmQuJHBrKSB7XG4gICAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9IGNhY2hlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgaWYoX3JlY29yZC4kcGsgPT09IG1vZGVsVHlwZS5pbmZlcktleShjYWNoZVtpXSkpIHsgLy8gdGhpcyBjb3VsZCBiZSBzb3J0IG9mIHNsb3c/IG5haFxuICAgICAgICAgICAgICBfcmVjb3JkLiRkZWNvZGUoY2FjaGVbaV0pO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9yZWNvcmQ7XG4gICAgfSxcblxuICAgIC8vIHByaXZhdGUgYXBpIG1ldGhvZCB1c2VkIGJ5IHRoZSB1bndyYXBwZXIgZnVuY3Rpb24uXG4gICAgcHJlcGFyZTogZnVuY3Rpb24oKSB7XG4gICAgICBwYWNrZXJDYWNoZSA9IHt9O1xuICAgIH0sXG5cbiAgICAvLyBwcml2YXRlIGFwaSBpbnRlcm5hbCBtZXRob2QgdXNlZCBieSB0aGUgdW53cmFwcGVyIGZ1bmN0aW9uLlxuICAgIGNsZWFyOiBmdW5jdGlvbigpIHtcbiAgICAgIHBhY2tlckNhY2hlID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbn1dKTtcblJNTW9kdWxlLmZhY3RvcnkoJ1JNU2VyaWFsaXplcicsIFsnJGluamVjdG9yJywgJ2luZmxlY3RvcicsICckZmlsdGVyJywgJ1JNVXRpbHMnLCBmdW5jdGlvbigkaW5qZWN0b3IsIGluZmxlY3RvciwgJGZpbHRlciwgVXRpbHMpIHtcblxuICBmdW5jdGlvbiBleHRyYWN0KF9mcm9tLCBfcGF0aCkge1xuICAgIHZhciBub2RlO1xuICAgIGZvcih2YXIgaSA9IDA7IF9mcm9tICYmIChub2RlID0gX3BhdGhbaV0pOyBpKyspIHtcbiAgICAgIF9mcm9tID0gX2Zyb21bbm9kZV07XG4gICAgfVxuICAgIHJldHVybiBfZnJvbTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluc2VydChfaW50bywgX3BhdGgsIF92YWx1ZSkge1xuICAgIGZvcih2YXIgaSA9IDAsIGwgPSBfcGF0aC5sZW5ndGgtMTsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIG5vZGUgPSBfcGF0aFtpXTtcbiAgICAgIF9pbnRvID0gX2ludG9bbm9kZV0gfHwgKF9pbnRvW25vZGVdID0ge30pO1xuICAgIH1cbiAgICBfaW50b1tfcGF0aFtfcGF0aC5sZW5ndGgtMV1dID0gX3ZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKF9zdHJhdGVnaWVzKSB7XG5cbiAgICB2YXIgaXNBcnJheSA9IGFuZ3VsYXIuaXNBcnJheTtcblxuICAgIC8vIFByaXZhdGUgc2VyaWFsaXplciBhdHRyaWJ1dGVzXG4gICAgdmFyIG1hc2tzID0ge30sXG4gICAgICAgIGRlY29kZXJzID0ge30sXG4gICAgICAgIGVuY29kZXJzID0ge30sXG4gICAgICAgIG1hcHBlZCA9IHt9LFxuICAgICAgICBtYXBwaW5ncyA9IHt9LFxuICAgICAgICB2b2wgPSB7fTtcblxuICAgIGZ1bmN0aW9uIGlzTWFza2VkKF9uYW1lLCBfbWFzaykge1xuICAgICAgaWYodHlwZW9mIF9tYXNrID09PSAnZnVuY3Rpb24nKSByZXR1cm4gX21hc2soX25hbWUpO1xuICAgICAgdmFyIG1hc2sgPSBtYXNrc1tfbmFtZV07XG4gICAgICByZXR1cm4gKG1hc2sgJiYgKG1hc2sgPT09IHRydWUgfHwgbWFzay5pbmRleE9mKF9tYXNrKSAhPT0gLTEpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWNvZGUoX2Zyb20sIF90bywgX3ByZWZpeCwgX21hc2ssIF9jdHgpIHtcbiAgICAgIHZhciBrZXksIGRlY29kZWROYW1lLCBmdWxsTmFtZSwgdmFsdWUsIG1hcHMsIGlzTWFwcGVkLCBpLCBsLFxuICAgICAgICAgIHByZWZpeCA9IF9wcmVmaXggPyBfcHJlZml4ICsgJy4nIDogJyc7XG5cbiAgICAgIC8vIGV4cGxpY2l0IG1hcHBpbmdzXG4gICAgICBtYXBzID0gbWFwcGluZ3NbX3ByZWZpeF07XG4gICAgICBpZihtYXBzKSB7XG4gICAgICAgIGZvcihpID0gMCwgbCA9IG1hcHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgZnVsbE5hbWUgPSBwcmVmaXggKyBtYXBzW2ldLnBhdGg7XG4gICAgICAgICAgaWYoaXNNYXNrZWQoZnVsbE5hbWUsIF9tYXNrKSkgY29udGludWU7XG5cbiAgICAgICAgICBpZihtYXBzW2ldLm1hcCkge1xuICAgICAgICAgICAgdmFsdWUgPSBleHRyYWN0KF9mcm9tLCBtYXBzW2ldLm1hcCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbHVlID0gX2Zyb21bX3N0cmF0ZWdpZXMuZW5jb2RlTmFtZSA/IF9zdHJhdGVnaWVzLmVuY29kZU5hbWUobWFwc1tpXS5wYXRoKSA6IG1hcHNbaV0ucGF0aF07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYoIW1hcHNbaV0uZm9yY2VkICYmIHZhbHVlID09PSB1bmRlZmluZWQpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgdmFsdWUgPSBkZWNvZGVQcm9wKHZhbHVlLCBmdWxsTmFtZSwgX21hc2ssIF9jdHgpO1xuICAgICAgICAgIGlmKHZhbHVlICE9PSB1bmRlZmluZWQpIF90b1ttYXBzW2ldLnBhdGhdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gaW1wbGljaXQgbWFwcGluZ3NcbiAgICAgIGZvcihrZXkgaW4gX2Zyb20pIHtcbiAgICAgICAgaWYoX2Zyb20uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXG4gICAgICAgICAgZGVjb2RlZE5hbWUgPSBfc3RyYXRlZ2llcy5kZWNvZGVOYW1lID8gX3N0cmF0ZWdpZXMuZGVjb2RlTmFtZShrZXkpIDoga2V5O1xuICAgICAgICAgIGlmKGRlY29kZWROYW1lWzBdID09PSAnJCcpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgaWYobWFwcykge1xuICAgICAgICAgICAgLy8gaWdub3JlIGFscmVhZHkgbWFwcGVkIGtleXNcbiAgICAgICAgICAgIC8vIFRPRE86IGlnbm9yZSBuZXN0ZWQgbWFwcGluZ3MgdG9vLlxuICAgICAgICAgICAgZm9yKFxuICAgICAgICAgICAgICAvLyBpcyB0aGlzIHNvIG11Y2ggZmFzdGVyIHRoYW4gdXNpbmcgLnNvbWU/IGh0dHA6Ly9qc3BlcmYuY29tL3NvbWUtdnMtZm9yLWxvb3BcbiAgICAgICAgICAgICAgaXNNYXBwZWQgPSBmYWxzZSwgaSA9IDAsIGwgPSBtYXBzLmxlbmd0aDtcbiAgICAgICAgICAgICAgaSA8IGwgJiYgIShpc01hcHBlZCA9IChtYXBzW2ldLm1hcFBhdGggPT09IGtleSkpO1xuICAgICAgICAgICAgICBpKytcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZihpc01hcHBlZCkgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVsbE5hbWUgPSBwcmVmaXggKyBkZWNvZGVkTmFtZTtcbiAgICAgICAgICAvLyBwcmV2ZW50IG1hc2tlZCBvciBhbHJlYWR5IG1hcHBlZCBwcm9wZXJ0aWVzIHRvIGJlIHNldFxuICAgICAgICAgIGlmKG1hcHBlZFtmdWxsTmFtZV0gfHwgaXNNYXNrZWQoZnVsbE5hbWUsIF9tYXNrKSkgY29udGludWU7XG5cbiAgICAgICAgICB2YWx1ZSA9IGRlY29kZVByb3AoX2Zyb21ba2V5XSwgZnVsbE5hbWUsIF9tYXNrLCBfY3R4KTtcbiAgICAgICAgICBpZih2YWx1ZSAhPT0gdW5kZWZpbmVkKSBfdG9bZGVjb2RlZE5hbWVdID0gdmFsdWU7IC8vIGlnbm9yZSB2YWx1ZSBpZiBmaWx0ZXIgcmV0dXJucyB1bmRlZmluZWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlY29kZVByb3AoX3ZhbHVlLCBfbmFtZSwgX21hc2ssIF9jdHgpIHtcbiAgICAgIHZhciBmaWx0ZXIgPSBkZWNvZGVyc1tfbmFtZV0sIHJlc3VsdCA9IF92YWx1ZTtcblxuICAgICAgaWYoZmlsdGVyKSB7XG4gICAgICAgIHJlc3VsdCA9IGZpbHRlci5jYWxsKF9jdHgsIF92YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYodHlwZW9mIF92YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gSURFQTogbWFrZSBleHRlbmRlZCBkZWNvZGluZy9lbmNvZGluZyBvcHRpb25hbCwgY291bGQgYmUgYSBsaXR0bGUgdGF4aW5nIGZvciBzb21lIGFwcHNcbiAgICAgICAgaWYoaXNBcnJheShfdmFsdWUpKSB7XG4gICAgICAgICAgcmVzdWx0ID0gW107XG4gICAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9IF92YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGRlY29kZVByb3AoX3ZhbHVlW2ldLCBfbmFtZSArICdbXScsIF9tYXNrLCBfY3R4KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYoX3ZhbHVlKSB7XG4gICAgICAgICAgcmVzdWx0ID0ge307XG4gICAgICAgICAgZGVjb2RlKF92YWx1ZSwgcmVzdWx0LCBfbmFtZSwgX21hc2ssIF9jdHgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW5jb2RlKF9mcm9tLCBfdG8sIF9wcmVmaXgsIF9tYXNrLCBfY3R4KSB7XG4gICAgICB2YXIga2V5LCBmdWxsTmFtZSwgZW5jb2RlZE5hbWUsIHZhbHVlLCBtYXBzLFxuICAgICAgICAgIHByZWZpeCA9IF9wcmVmaXggPyBfcHJlZml4ICsgJy4nIDogJyc7XG5cbiAgICAgIC8vIGltcGxpY2l0IG1hcHBpbmdzXG4gICAgICBmb3Ioa2V5IGluIF9mcm9tKSB7XG4gICAgICAgIGlmKF9mcm9tLmhhc093blByb3BlcnR5KGtleSkgJiYga2V5WzBdICE9PSAnJCcpIHtcbiAgICAgICAgICBmdWxsTmFtZSA9IHByZWZpeCArIGtleTtcbiAgICAgICAgICAvLyBwcmV2ZW50IG1hc2tlZCBvciBhbHJlYWR5IG1hcHBlZCBwcm9wZXJ0aWVzIHRvIGJlIGNvcGllZFxuICAgICAgICAgIGlmKG1hcHBlZFtmdWxsTmFtZV0gfHwgaXNNYXNrZWQoZnVsbE5hbWUsIF9tYXNrKSkgY29udGludWU7XG5cbiAgICAgICAgICB2YWx1ZSA9IGVuY29kZVByb3AoX2Zyb21ba2V5XSwgZnVsbE5hbWUsIF9tYXNrLCBfY3R4KTtcbiAgICAgICAgICBpZih2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBlbmNvZGVkTmFtZSA9IF9zdHJhdGVnaWVzLmVuY29kZU5hbWUgPyBfc3RyYXRlZ2llcy5lbmNvZGVOYW1lKGtleSkgOiBrZXk7XG4gICAgICAgICAgICBfdG9bZW5jb2RlZE5hbWVdID0gdmFsdWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYodm9sW2Z1bGxOYW1lXSkgZGVsZXRlIF9mcm9tW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gZXhwbGljaXQgbWFwcGluZ3M6XG4gICAgICBtYXBzID0gbWFwcGluZ3NbX3ByZWZpeF07XG4gICAgICBpZihtYXBzKSB7XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGwgPSBtYXBzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIGZ1bGxOYW1lID0gcHJlZml4ICsgbWFwc1tpXS5wYXRoO1xuICAgICAgICAgIGlmKGlzTWFza2VkKGZ1bGxOYW1lLCBfbWFzaykpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgdmFsdWUgPSBfZnJvbVttYXBzW2ldLnBhdGhdO1xuICAgICAgICAgIGlmKCFtYXBzW2ldLmZvcmNlZCAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTtcblxuICAgICAgICAgIHZhbHVlID0gZW5jb2RlUHJvcCh2YWx1ZSwgZnVsbE5hbWUsIF9tYXNrLCBfY3R4KTtcbiAgICAgICAgICBpZih2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZihtYXBzW2ldLm1hcCkge1xuICAgICAgICAgICAgICBpbnNlcnQoX3RvLCBtYXBzW2ldLm1hcCwgdmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgX3RvW19zdHJhdGVnaWVzLmVuY29kZU5hbWUgPyBfc3RyYXRlZ2llcy5lbmNvZGVOYW1lKG1hcHNbaV0ucGF0aCkgOiBtYXBzW2ldLnBhdGhdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW5jb2RlUHJvcChfdmFsdWUsIF9uYW1lLCBfbWFzaywgX2N0eCkge1xuICAgICAgdmFyIGZpbHRlciA9IGVuY29kZXJzW19uYW1lXSwgcmVzdWx0ID0gX3ZhbHVlO1xuXG4gICAgICBpZihmaWx0ZXIpIHtcbiAgICAgICAgcmVzdWx0ID0gZmlsdGVyLmNhbGwoX2N0eCwgX3ZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZihfdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIF92YWx1ZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIF92YWx1ZS50b0pTT04gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gSURFQTogbWFrZSBkZWVwIGRlY29kaW5nL2VuY29kaW5nIG9wdGlvbmFsLCBjb3VsZCBiZSBhIGxpdHRsZSB0YXhpbmcgZm9yIHNvbWUgYXBwc1xuICAgICAgICBpZihpc0FycmF5KF92YWx1ZSkpIHtcbiAgICAgICAgICByZXN1bHQgPSBbXTtcbiAgICAgICAgICBmb3IodmFyIGkgPSAwLCBsID0gX3ZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goZW5jb2RlUHJvcChfdmFsdWVbaV0sIF9uYW1lICsgJ1tdJywgX21hc2ssIF9jdHgpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZihfdmFsdWUpIHtcbiAgICAgICAgICByZXN1bHQgPSB7fTtcbiAgICAgICAgICBlbmNvZGUoX3ZhbHVlLCByZXN1bHQsIF9uYW1lLCBfbWFzaywgX2N0eCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuXG4gICAgICAvLyBkZWNvZGVzIGEgcmF3IHJlY29yZCBpbnRvIGEgcmVjb3JkXG4gICAgICBkZWNvZGU6IGZ1bmN0aW9uKF9yZWNvcmQsIF9yYXcsIF9tYXNrKSB7XG4gICAgICAgIGRlY29kZShfcmF3LCBfcmVjb3JkLCAnJywgX21hc2ssIF9yZWNvcmQpO1xuICAgICAgfSxcblxuICAgICAgLy8gZW5jb2RlcyBhIHJlY29yZCwgcmV0dXJuaW5nIGEgcmF3IHJlY29yZFxuICAgICAgZW5jb2RlOiBmdW5jdGlvbihfcmVjb3JkLCBfbWFzaykge1xuICAgICAgICB2YXIgcmF3ID0ge307XG4gICAgICAgIGVuY29kZShfcmVjb3JkLCByYXcsICcnLCBfbWFzaywgX3JlY29yZCk7XG4gICAgICAgIHJldHVybiByYXc7XG4gICAgICB9LFxuXG4gICAgICAvLyBidWlsZHMgYSBzZXJpYWxpemVyZCBEU0wsIGlzIGEgc3RhbmRhbG9uZSBvYmplY3QgdGhhdCBjYW4gYmUgZXh0ZW5kZWQuXG4gICAgICBkc2w6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHJldHVybiB7XG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbWVtYmVyb2YgQnVpbGRlckFwaSNcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiBTZXRzIGFuIGF0dHJpYnV0ZSBtYXBwaW5nLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogQWxsb3dzIGEgZXhwbGljaXQgc2VydmVyIHRvIG1vZGVsIHByb3BlcnR5IG1hcHBpbmcgdG8gYmUgZGVmaW5lZC5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEZvciBleGFtcGxlLCB0byBtYXAgdGhlIHJlc3BvbnNlIHByb3BlcnR5IGBzdGF0cy5jcmVhdGVkX2F0YCB0byBtb2RlbCdzIGBjcmVhdGVkYCBwcm9wZXJ0eS5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAgICAgICAgKiBidWlsZGVyLmF0dHJNYXAoJ2NyZWF0ZWQnLCAnc3RhdHMuY3JlYXRlZF9hdCcpO1xuICAgICAgICAgICAqIGBgYFxuICAgICAgICAgICAqXG4gICAgICAgICAgICogSXQncyBhbHNvIHBvc2libGUgdG8gdXNlIGEgd2lsZGNhcmQgJyonIGFzIHNlcnZlciBuYW1lIHRvIHVzZSB0aGUgZGVmYXVsdCBuYW1lIGRlY29kZXIgYXNcbiAgICAgICAgICAgKiBzZXJ2ZXIgbmFtZS4gVGhpcyBpcyB1c2VkIHRvIGZvcmNlIGEgcHJvcGVydHkgdG8gYmUgcHJvY2Vzc2VkIG9uIGRlY29kZS9lbmNvZGUgZXZlbiBpZiBpdHNcbiAgICAgICAgICAgKiBub3QgcHJlc2VudCBvbiByZXF1ZXN0L3JlY29yZCAocmVzcGVjdGl2ZWx5KSwgYnkgZG9pbmcgdGhpcyBpdHMgcG9zaWJsZSwgZm9yIGV4YW1wbGUsIHRvIGRlZmluZVxuICAgICAgICAgICAqIGEgZHluYW1pYyBwcm9wZXJ0eSB0aGF0IGlzIGdlbmVyYXRlZCBhdXRvbWF0aWNhbGx5IGJlZm9yZSB0aGUgb2JqZWN0IGlzIHNlbmQgdG8gdGhlIHNlcnZlci5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfYXR0ciBBdHRyaWJ1dGUgbmFtZVxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfc2VydmVyTmFtZSBTZXJ2ZXIgKHJlcXVlc3QvcmVzcG9uc2UpIHByb3BlcnR5IG5hbWVcbiAgICAgICAgICAgKiBAcmV0dXJuIHtCdWlsZGVyQXBpfSBzZWxmXG4gICAgICAgICAgICovXG4gICAgICAgICAgYXR0ck1hcDogZnVuY3Rpb24oX2F0dHIsIF9zZXJ2ZXJQYXRoLCBfZm9yY2VkKSB7XG4gICAgICAgICAgICAvLyBleHRyYWN0IHBhcmVudCBub2RlIGZyb20gY2xpZW50IG5hbWU6XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBfYXR0ci5sYXN0SW5kZXhPZignLicpLFxuICAgICAgICAgICAgICAgIG5vZGUgPSBpbmRleCAhPT0gLTEgPyBfYXR0ci5zdWJzdHIoMCwgaW5kZXgpIDogJycsXG4gICAgICAgICAgICAgICAgbGVhZiA9IGluZGV4ICE9PSAtMSA/IF9hdHRyLnN1YnN0cihpbmRleCArIDEpIDogX2F0dHI7XG5cbiAgICAgICAgICAgIG1hcHBlZFtfYXR0cl0gPSB0cnVlO1xuXG4gICAgICAgICAgICB2YXIgbm9kZXMgPSAobWFwcGluZ3Nbbm9kZV0gfHwgKG1hcHBpbmdzW25vZGVdID0gW10pKTtcbiAgICAgICAgICAgIG5vZGVzLnB1c2goeyBwYXRoOiBsZWFmLCBtYXA6IF9zZXJ2ZXJQYXRoID09PSAnKicgPyBudWxsIDogX3NlcnZlclBhdGguc3BsaXQoJy4nKSwgbWFwUGF0aDogX3NlcnZlclBhdGgsIGZvcmNlZDogX2ZvcmNlZCB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbWVtYmVyb2YgQnVpbGRlckFwaSNcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvbiBTZXRzIGFuIGF0dHJpYnV0ZSBtYXNrLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogQW4gYXR0cmlidXRlIG1hc2sgcHJldmVudHMgdGhlIGF0dHJpYnV0ZSB0byBiZSBsb2FkZWQgZnJvbSBvciBzZW50IHRvIHRoZSBzZXJ2ZXIgb24gY2VydGFpbiBvcGVyYXRpb25zLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogVGhlIGF0dHJpYnV0ZSBtYXNrIGlzIGEgc3RyaW5nIGNvbXBvc2VkIGJ5OlxuICAgICAgICAgICAqICogQzogVG8gcHJldmVudCBhdHRyaWJ1dGUgZnJvbSBiZWluZyBzZW50IG9uIGNyZWF0ZVxuICAgICAgICAgICAqICogUjogVG8gcHJldmVudCBhdHRyaWJ1dGUgZnJvbSBiZWluZyBsb2FkZWQgZnJvbSBzZXJ2ZXJcbiAgICAgICAgICAgKiAqIFU6IFRvIHByZXZlbnQgYXR0cmlidXRlIGZyb20gYmVpbmcgc2VudCBvbiB1cGRhdGVcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEZvciBleGFtcGxlLCB0aGUgZm9sbG93aW5nIHdpbGwgcHJldmVudCBhbiBhdHRyaWJ1dGUgdG8gYmUgc2VuZCBvbiBjcmVhdGUgb3IgdXBkYXRlOlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogYGBgamF2YXNjcmlwdFxuICAgICAgICAgICAqIGJ1aWxkZXIuYXR0ck1hc2soJ3JlYWRPbmx5JywgJ0NVJyk7XG4gICAgICAgICAgICogYGBgXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBJZiBhIHRydWUgYm9vbGVhbiB2YWx1ZSBpcyBwYXNzZWQgYXMgbWFzaywgdGhlbiAnQ1JVJyB3aWxsIGJlIHVzZWRcbiAgICAgICAgICAgKiBJZiBhIGZhbHNlIGJvb2xlYW4gdmFsdXMgaXMgcGFzc2VkIGFzIG1hc2ssIHRoZW4gbWFzayB3aWxsIGJlIHJlbW92ZWRcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfYXR0ciBBdHRyaWJ1dGUgbmFtZVxuICAgICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbnxzdHJpbmd9IF9tYXNrIEF0dHJpYnV0ZSBtYXNrXG4gICAgICAgICAgICogQHJldHVybiB7QnVpbGRlckFwaX0gc2VsZlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGF0dHJNYXNrOiBmdW5jdGlvbihfYXR0ciwgX21hc2spIHtcbiAgICAgICAgICAgIGlmKCFfbWFzaykge1xuICAgICAgICAgICAgICBkZWxldGUgbWFza3NbX2F0dHJdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbWFza3NbX2F0dHJdID0gX21hc2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG1lbWJlcm9mIEJ1aWxkZXJBcGkjXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb24gQXNzaWducyBhIGRlY29kaW5nIGZ1bmN0aW9uL2ZpbHRlciB0byBhIGdpdmVuIGF0dHJpYnV0ZS5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfbmFtZSBBdHRyaWJ1dGUgbmFtZVxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9ufSBfZmlsdGVyIGZpbHRlciBvciBmdW5jdGlvbiB0byByZWdpc3RlclxuICAgICAgICAgICAqIEBwYXJhbSB7bWl4ZWR9IF9maWx0ZXJQYXJhbSBNaXNjIGZpbHRlciBwYXJhbWV0ZXJcbiAgICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IF9jaGFpbiBJZiB0cnVlLCBmaWx0ZXIgaXMgY2hhaW5lZCB0byB0aGUgY3VycmVudCBhdHRyaWJ1dGUgZmlsdGVyLlxuICAgICAgICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgICAgICAgKi9cbiAgICAgICAgICBhdHRyRGVjb2RlcjogZnVuY3Rpb24oX2F0dHIsIF9maWx0ZXIsIF9maWx0ZXJQYXJhbSwgX2NoYWluKSB7XG5cbiAgICAgICAgICAgIGlmKHR5cGVvZiBfZmlsdGVyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICB2YXIgZmlsdGVyID0gJGZpbHRlcihfZmlsdGVyKTtcbiAgICAgICAgICAgICAgX2ZpbHRlciA9IGZ1bmN0aW9uKF92YWx1ZSkgeyByZXR1cm4gZmlsdGVyKF92YWx1ZSwgX2ZpbHRlclBhcmFtKTsgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGVjb2RlcnNbX2F0dHJdID0gX2NoYWluID8gVXRpbHMuY2hhaW4oZGVjb2RlcnNbX2F0dHJdLCBfZmlsdGVyKSA6IF9maWx0ZXI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG1lbWJlcm9mIEJ1aWxkZXJBcGkjXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb24gQXNzaWducyBhIGVuY29kaW5nIGZ1bmN0aW9uL2ZpbHRlciB0byBhIGdpdmVuIGF0dHJpYnV0ZS5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfbmFtZSBBdHRyaWJ1dGUgbmFtZVxuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9ufSBfZmlsdGVyIGZpbHRlciBvciBmdW5jdGlvbiB0byByZWdpc3RlclxuICAgICAgICAgICAqIEBwYXJhbSB7bWl4ZWR9IF9maWx0ZXJQYXJhbSBNaXNjIGZpbHRlciBwYXJhbWV0ZXJcbiAgICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IF9jaGFpbiBJZiB0cnVlLCBmaWx0ZXIgaXMgY2hhaW5lZCB0byB0aGUgY3VycmVudCBhdHRyaWJ1dGUgZmlsdGVyLlxuICAgICAgICAgICAqIEByZXR1cm4ge0J1aWxkZXJBcGl9IHNlbGZcbiAgICAgICAgICAgKi9cbiAgICAgICAgICBhdHRyRW5jb2RlcjogZnVuY3Rpb24oX2F0dHIsIF9maWx0ZXIsIF9maWx0ZXJQYXJhbSwgX2NoYWluKSB7XG5cbiAgICAgICAgICAgIGlmKHR5cGVvZiBfZmlsdGVyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICB2YXIgZmlsdGVyID0gJGZpbHRlcihfZmlsdGVyKTtcbiAgICAgICAgICAgICAgX2ZpbHRlciA9IGZ1bmN0aW9uKF92YWx1ZSkgeyByZXR1cm4gZmlsdGVyKF92YWx1ZSwgX2ZpbHRlclBhcmFtKTsgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZW5jb2RlcnNbX2F0dHJdID0gX2NoYWluID8gVXRpbHMuY2hhaW4oZW5jb2RlcnNbX2F0dHJdLCBfZmlsdGVyKSA6IF9maWx0ZXI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG1lbWJlcm9mIEJ1aWxkZXJBcGkjXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb24gTWFrZXMgYW4gYXR0cmlidXRlIHZvbGF0aWxlLCBhIHZvbGF0aWxlIGF0dHJpYnV0ZSBpcyBkZWxldGVkIGZyb20gc291cmNlIGFmdGVyIGVuY29kaW5nLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IF9uYW1lIEF0dHJpYnV0ZSBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBfaXNWb2xhdGlsZSBkZWZhdWx0cyB0byB0cnVlLCBpZiBzZXQgdG8gZmFsc2UgdGhlbiB0aGUgYXR0cmlidXRlIGlzIG5vIGxvbmdlciB2b2xhdGlsZS5cbiAgICAgICAgICAgKiBAcmV0dXJuIHtCdWlsZGVyQXBpfSBzZWxmXG4gICAgICAgICAgICovXG4gICAgICAgICAgYXR0clZvbGF0aWxlOiBmdW5jdGlvbihfYXR0ciwgX2lzVm9sYXRpbGUpIHtcbiAgICAgICAgICAgIHZvbFtfYXR0cl0gPSBfaXNWb2xhdGlsZSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IF9pc1ZvbGF0aWxlO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG4gIH07XG5cbn1dKTtcblJNTW9kdWxlLmZhY3RvcnkoJ0RlZmF1bHRQYWNrZXInLCBbJ3Jlc3Rtb2QnLCAnaW5mbGVjdG9yJywgJ1JNUGFja2VyQ2FjaGUnLCBmdW5jdGlvbihyZXN0bW9kLCBpbmZsZWN0b3IsIHBhY2tlckNhY2hlKSB7XG5cbiAgZnVuY3Rpb24gaW5jbHVkZShfc291cmNlLCBfbGlzdCwgX2RvKSB7XG4gICAgZm9yKHZhciBpID0gMCwgbCA9IF9saXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgX2RvKF9saXN0W2ldLCBfc291cmNlW19saXN0W2ldXSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZXhjbHVkZShfc291cmNlLCBfc2tpcCwgX2RvKSB7XG4gICAgZm9yKHZhciBrZXkgaW4gX3NvdXJjZSkge1xuICAgICAgaWYoX3NvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIF9za2lwLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHtcbiAgICAgICAgX2RvKGtleSwgX3NvdXJjZVtrZXldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBwcm9jZXNzIGxpbmtzIGFuZCBzdG9yZXMgdGhlbSBpbiB0aGUgcGFja2VyIGNhY2hlXG4gIGZ1bmN0aW9uIHByb2Nlc3NGZWF0dXJlKF9yYXcsIF9uYW1lLCBfZmVhdHVyZSwgX290aGVyLCBfZG8pIHtcbiAgICBpZihfZmVhdHVyZSA9PT0gJy4nIHx8IF9mZWF0dXJlID09PSB0cnVlKSB7XG4gICAgICB2YXIgc2tpcCA9IFtfbmFtZV07XG4gICAgICBpZihfb3RoZXIpIHNraXAucHVzaC5hcHBseShza2lwLCBhbmd1bGFyLmlzQXJyYXkoX290aGVyKSA/IF9vdGhlciA6IFtfb3RoZXJdKTtcbiAgICAgIGV4Y2x1ZGUoX3Jhdywgc2tpcCwgX2RvKTtcbiAgICB9IGVsc2UgaWYodHlwZW9mIF9mZWF0dXJlID09PSAnc3RyaW5nJykge1xuICAgICAgZXhjbHVkZShfcmF3W19mZWF0dXJlXSwgW10sIF9kbyk7XG4gICAgfSBlbHNlIHsgLy8gbGlua3MgaXMgYW4gYXJyYXlcbiAgICAgIGluY2x1ZGUoX3JhdywgX2ZlYXR1cmUsIF9kbyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBjbGFzcyBEZWZhdWx0UGFja2VyXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBTaW1wbGUgYCR1bnBhY2tgIGltcGxlbWVudGF0aW9uIHRoYXQgYXR0ZW1wdHMgdG8gY292ZXIgdGhlIHN0YW5kYXJkIHByb3Bvc2VkIGJ5XG4gICAqIFthY3RpdmVfbW9kZWxfc2VyaWFsaXplcnNdKGh0dHBzOi8vZ2l0aHViLmNvbS9yYWlscy1hcGkvYWN0aXZlX21vZGVsX3NlcmlhbGl6ZXJzLlxuICAgKlxuICAgKiBUaGlzIGlzIGEgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoZSB3cmFwcGluZyBzdHJ1Y3R1cmUgcmVjb21tZW50ZWQgYnkgdGhlIGpzb25hcGkub3JnIHN0YW5kYXJkLFxuICAgKiBpdCBzdXBwb3J0cyBzaWRlIGxvYWRlZCBhc3NvY2lhdGVkIHJlc291cmNlcyAodmlhIHN1cHBvcnRpbmcgcmVsYXRpb25zKSBhbmQgbWV0YWRhdGEgZXh0cmFjdGlvbi5cbiAgICpcbiAgICogVG8gYWN0aXZhdGUgYWRkIG1peGluIHRvIG1vZGVsIGNoYWluXG4gICAqXG4gICAqIGBgYGphdmFzY3JpcHRcbiAgICogcmVzdG1vZFByb3ZpZGUucmViYXNlKCdEZWZhdWx0UGFja2VyJyk7XG4gICAqIGBgYFxuICAgKlxuICAgKiAjIyMgSnNvbiByb290XG4gICAqXG4gICAqIEJ5IGRlZmF1bHQgdGhlIG1peGluIHdpbGwgdXNlIHRoZSBzaW5ndWxhciBtb2RlbCBuYW1lIGFzIGpzb24gcm9vdCBmb3Igc2luZ2xlIHJlc291cmNlIHJlcXVlc3RzXG4gICAqIGFuZCBwbHVyYWxpemVkIG5hbWUgZm9yIGNvbGxlY3Rpb24gcmVxdWVzdHMuIE1ha2Ugc3VyZSB0aGUgbW9kZWwgbmFtZSBpcyBjb3JyZWN0bHkgc2V0LlxuICAgKlxuICAgKiBUbyBvdmVycmlkZSB0aGUgbmFtZSB1c2VkIGJ5IHRoZSBtaXhpbiBzZXQgdGhlICoqanNvblJvb3RTaW5nbGUqKiBhbmQgKipqc29uUm9vdE1hbnkqKiB2YXJpYWJsZXMuXG4gICAqIE9yIHNldCAqKmpzb25Sb290KiogdG8gb3ZlcnJpZGUgYm90aC5cbiAgICpcbiAgICogIyMjIFNpZGUgbG9hZGVkIHJlc291cmNlc1xuICAgKlxuICAgKiBCeSBkZWZhdWx0IHRoZSBtaXhpbiB3aWxsIGxvb2sgZm9yIGxpbmtzIHRvIG90aGVyIHJlc291cmNlcyBpbiB0aGUgJ2xpbmtlZCcgcm9vdCBwcm9wZXJ0eSwgeW91XG4gICAqIGNhbiBjaGFuZ2UgdGhpcyBieSBzZXR0aW5nIHRoZSBqc29uTGlua3MgdmFyaWFibGUuIFRvIHVzZSB0aGUgcm9vdCBlbGVtZW50IGFzIGxpbmsgc291cmNlXG4gICAqIHVzZSBganNvbkxpbmtzOiAnLidgLiBZb3UgY2FuIGFsc28gZXhwbGljaXRseSBzZWxlY3Qgd2hpY2ggcHJvcGVydGllcyB0byBjb25zaWRlciBsaW5rcyB1c2luZyBhblxuICAgKiBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy4gVG8gc2tpcCBsaW5rcyBwcm9jZXNzaW5nIGFsdG9nZXRoZXIsIHNldCBpdCB0byBmYWxzZS5cbiAgICpcbiAgICogTGlua3MgYXJlIGV4cGVjdGVkIHRvIHVzZSB0aGUgcGx1cmFsaXplZCB2ZXJzaW9uIG9mIHRoZSBuYW1lIGZvciB0aGUgcmVmZXJlbmNlZCBtb2RlbC4gRm9yIGV4YW1wbGUsXG4gICAqIGdpdmVuIHRoZSBmb2xsb3dpbmcgcmVzcG9uc2U6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICoge1xuICAgKiAgIGJpa2VzOiBbLi4uXSxcbiAgICogICBsaW5rcyB7XG4gICAqICAgICBwYXJ0czogWy4uLl1cbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFJlc3Rtb2Qgd2lsbCBleHBlY3QgdGhhdCB0aGUgUGFydCBtb2RlbCBwbHVyYWwgbmFtZSBpcyBjb3JyZWN0bHkgc2V0IHBhcnRzLiBPbmx5IHByb3BlcnRpZXMgZGVjbGFyZWRcbiAgICogYXMgcmVmZXJlbmNlIHJlbGF0aW9ucyAoYmVsb25nc1RvIGFuZCBiZWxvbmdzVG9NYW55KSB3aWxsIGJlIGNvcnJlY3RseSByZXNvbHZlZC5cbiAgICpcbiAgICogIyMjIE1ldGFkYXRhXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQgbWV0YWRhdGEgaXMgb25seSBjYXB0dXJlZCBpZiBpdCBjb21lcyBpbiB0aGUgJ21ldGEnIHJvb3QgcHJvcGVydHkuIE1ldGFkYXRhIGlzIHRoZW5cbiAgICogc3RvcmVkIGluIHRoZSAkbWV0YSBwcm9wZXJ0eSBvZiB0aGUgcmVzb3VyY2UgYmVpbmcgdW53cmFwcGVkLlxuICAgKlxuICAgKiBKdXN0IGxpa2UgbGlua3MsIHRvIGNoYW5nZSB0aGUgbWV0YWRhdGEgc291cmNlIHByb3BlcnR5IHNldCB0aGUganNvbk1ldGEgcHJvcGVydHkgdG8gdGhlIGRlc2lyZWQgbmFtZSwgc2V0XG4gICAqIGl0IHRvICcuJyB0byBjYXB0dXJlIHRoZSBlbnRpcmUgcmF3IHJlc3BvbnNlIG9yIHNldCBpdCB0byBmYWxzZSB0byBza2lwIG1ldGFkYXRhIGFuZCBzZXQgaXQgdG8gYW4gYXJyYXkgb2YgcHJvcGVydGllc1xuICAgKiB0byBiZSBleHRyYWN0IHNlbGVjdGVkIHByb3BlcnRpZXMuXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7bWl4ZWR9IHNpbmdsZSBUaGUgZXhwZWN0ZWQgc2luZ2xlIHJlc291cmNlIHdyYXBwZXIgcHJvcGVydHkgbmFtZVxuICAgKiBAcHJvcGVydHkge29iamVjdH0gcGx1cmFsIFRoZSBleHBlY3RlZCBjb2xsZWN0aW9uIHdyYXBwZXIgcHJvcGVydHkgbmFtZVxuICAgKiBAcHJvcGVydHkge21peGVkfSBsaW5rcyBUaGUgbGlua3MgcmVwb3NpdG9yeSBwcm9wZXJ0eSBuYW1lXG4gICAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBtZXRhIFRoZSBtZXRhZGF0YSByZXBvc2l0b3J5IHByb3BlcnR5IG5hbWVcbiAgICpcbiAgICovXG4gIHJldHVybiByZXN0bW9kLm1peGluKGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZGVmaW5lKCdNb2RlbC51bnBhY2snLCBmdW5jdGlvbihfcmVzb3VyY2UsIF9yYXcpIHtcbiAgICAgIHZhciBuYW1lID0gbnVsbCxcbiAgICAgICAgICBsaW5rcyA9IHRoaXMuZ2V0UHJvcGVydHkoJ2pzb25MaW5rcycsICdsaW5rZWQnKSxcbiAgICAgICAgICBtZXRhID0gdGhpcy5nZXRQcm9wZXJ0eSgnanNvbk1ldGEnLCAnbWV0YScpO1xuXG4gICAgICBpZihfcmVzb3VyY2UuJGlzQ29sbGVjdGlvbikge1xuICAgICAgICBuYW1lID0gdGhpcy5nZXRQcm9wZXJ0eSgnanNvblJvb3RNYW55JykgfHwgdGhpcy5nZXRQcm9wZXJ0eSgnanNvblJvb3QnKSB8fCB0aGlzLmdldFByb3BlcnR5KCdwbHVyYWwnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFRPRE86IHVzZSBwbHVyYWwgZm9yIHNpbmdsZSByZXNvdXJjZSBvcHRpb24uXG4gICAgICAgIG5hbWUgPSB0aGlzLmdldFByb3BlcnR5KCdqc29uUm9vdFNpbmdsZScpIHx8IHRoaXMuZ2V0UHJvcGVydHkoJ2pzb25Sb290JykgfHwgdGhpcy5nZXRQcm9wZXJ0eSgnbmFtZScpO1xuICAgICAgfVxuXG4gICAgICBpZihtZXRhKSB7XG4gICAgICAgIF9yZXNvdXJjZS4kbWV0YWRhdGEgPSB7fTtcbiAgICAgICAgcHJvY2Vzc0ZlYXR1cmUoX3JhdywgbmFtZSwgbWV0YSwgbGlua3MsIGZ1bmN0aW9uKF9rZXksIF92YWx1ZSkge1xuICAgICAgICAgIF9yZXNvdXJjZS4kbWV0YWRhdGFbX2tleV0gPSBfdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZihsaW5rcykge1xuICAgICAgICBwcm9jZXNzRmVhdHVyZShfcmF3LCBuYW1lLCBsaW5rcywgbWV0YSwgZnVuY3Rpb24oX2tleSwgX3ZhbHVlKSB7XG4gICAgICAgICAgLy8gVE9ETzogY2hlY2sgdGhhdCBjYWNoZSBpcyBhbiBhcnJheS5cbiAgICAgICAgICBwYWNrZXJDYWNoZS5mZWVkKF9rZXksIF92YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3Jhd1tuYW1lXTtcbiAgICB9KTtcbiAgfSk7XG5cbn1dKTtcbi8qKlxuICogQGNsYXNzIFV0aWxzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogVmFyaW91cyB1dGlsaXRpZXMgdXNlZCBhY3Jvc3MgdGhlIGxpYnJhcnkuXG4gKlxuICovXG5STU1vZHVsZS5mYWN0b3J5KCdSTVV0aWxzJywgWyckbG9nJywgZnVuY3Rpb24oJGxvZykge1xuXG4gIC8vIGRldGVybWluZSBicm93c2VyIHN1cHBvcnQgZm9yIG9iamVjdCBwcm90b3R5cGUgY2hhbmdpbmdcbiAgdmFyIElGUkFNRV9SRUYgPSBbXTtcbiAgdmFyIFBST1RPX1NFVFRFUiA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgVGVzdCA9IGZ1bmN0aW9uKCkge307XG4gICAgaWYoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oX3RhcmdldCwgX3Byb3RvKSB7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihfdGFyZ2V0LCBfcHJvdG8pOyAvLyBOb3Qgc3VyZSBhYm91dCBzdXBwb3J0aW5nIHRoaXMuLi5cbiAgICAgIH07XG4gICAgfSBlbHNlIGlmKChuZXcgVGVzdCkuX19wcm90b19fID09PSBUZXN0LnByb3RvdHlwZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKF90YXJnZXQsIF9wcm90bykge1xuICAgICAgICBfdGFyZ2V0Ll9fcHJvdG9fXyA9IF9wcm90bztcbiAgICAgIH07XG4gICAgfVxuICB9KSgpO1xuXG4gIHZhciBVdGlscyA9IHtcblxuICAgIC8vIElnbm9yZSBNYXNrc1xuICAgIENSRUFURV9NQVNLOiAnQycsXG4gICAgVVBEQVRFX01BU0s6ICdVJyxcbiAgICBSRUFEX01BU0s6ICdSJyxcbiAgICBXUklURV9NQVNLOiAnQ1UnLFxuICAgIEZVTExfTUFTSzogJ0NSVScsXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgVXRpbHNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogRm9ybWF0cyBhIHN0cmluZ1xuICAgICAqXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBfc3RyIFN0cmluZyB0byBmb3JtYXRcbiAgICAgKiBAcGFyYW0gIHthcnJheX0gX2FyZ3MgU3RyaW5nIGFyZ3VtZW50c1xuICAgICAqIEByZXR1cm4ge3N0cmluZ30gRm9ybWF0ZWQgc3RyaW5nXG4gICAgICovXG4gICAgZm9ybWF0OiBmdW5jdGlvbihfc3RyLCBfYXJncykge1xuICAgICAgZm9yKHZhciBpID0gMDsgX2FyZ3MgJiYgaSA8IF9hcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIF9zdHIgPSBfc3RyLnJlcGxhY2UoJyQnICsgKGkrMSksIF9hcmdzW2ldKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfc3RyO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgVXRpbHNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogVGVzdCBmb3IgYSBjb25kaXRpb24gdG8gYmUgbWV0LCBpZiBub3QgYW4gZXhjZXB0aW9uIGlzIHRocm93bi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge2Jvb2xlYW59IF9jb25kaXRpb24gQ29uZGl0aW9uIHRvIGFzc2VydFxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gX21zZyBFcnJvciBtZXNzYWdlXG4gICAgICovXG4gICAgYXNzZXJ0OiBmdW5jdGlvbihfY29uZGl0aW9uLCBfbXNnIC8qLCBwYXJhbXMgKi8pIHtcbiAgICAgIGlmKCFfY29uZGl0aW9uKSB7XG4gICAgICAgIHZhciBwYXJhbXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgICAgICBfbXNnID0gVXRpbHMuZm9ybWF0KF9tc2csIHBhcmFtcyk7XG4gICAgICAgICRsb2cuZXJyb3IoX21zZyk7IC8vIGxvZyBlcnJvciBtZXNzYWdlXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihfbXNnKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFV0aWxzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIFNpbXBsZSB1cmwgam9pbmluZywgcmV0dXJucyBudWxsIGlmIF9oZWFkIG9yIF90YWlsIGlzIG51bGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IF9oZWFkIFVybCBwcmVmaXhcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IF90YWlsIFVybCBzdWZmaXhcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFJlc3VsdGluZyB1cmxcbiAgICAgKi9cbiAgICBqb2luVXJsOiBmdW5jdGlvbihfaGVhZCwgX3RhaWwpIHtcbiAgICAgIGlmKCFfaGVhZCB8fCAhX3RhaWwpIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIChfaGVhZCsnJykucmVwbGFjZSgvXFwvJC8sICcnKSArICcvJyArIChfdGFpbCsnJykucmVwbGFjZSgvXlxcLy8sICcnKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFV0aWxzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIENsZWFucyB0cmFpbGluZyBzbGFzaGVzIGZyb20gYW4gdXJsXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IF91cmwgVXJsIHRvIGNsZWFuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBSZXN1bHRpbmcgdXJsXG4gICAgICovXG4gICAgY2xlYW5Vcmw6IGZ1bmN0aW9uKF91cmwpIHtcbiAgICAgIHJldHVybiBfdXJsID8gX3VybC5yZXBsYWNlKC9cXC8kLywgJycpIDogX3VybDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFV0aWxzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIENoYWlucyB0byBmaWx0ZXJpbmcgZnVuY3Rpb25zIHRvZ2V0aGVyXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtmdW5jdGlvbn0gX2ZpcnN0IG9yaWdpbmFsIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtICB7ZnVuY3Rpb259IF9mdW4gICBmdW5jdGlvbiB0byBjYWxsIG9uIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiByZXN1bHRcbiAgICAgKiBAcmV0dXJuIHttaXhlZH0gdmFsdWUgcmV0dXJuZWQgYnkgdGhlIGxhc3QgZnVuY3Rpb24gY2FsbFxuICAgICAqL1xuICAgIGNoYWluOiBmdW5jdGlvbihfZmlyc3QsIF9mdW4pIHtcbiAgICAgIGlmKCFfZmlyc3QpIHJldHVybiBfZnVuO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKF92YWx1ZSkge1xuICAgICAgICByZXR1cm4gX2Z1bi5jYWxsKHRoaXMsIF9maXJzdC5jYWxsKHRoaXMsIF92YWx1ZSkpO1xuICAgICAgfTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFV0aWxzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIE92ZXJyaWRlIGEgcHJvcGVydHkgdmFsdWUsIG1ha2luZyBvdmVycmlkZW4gZnVuY3Rpb24gYXZhaWxhYmxlIGFzIHRoaXMuJHN1cGVyXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtmdW5jdGlvbn0gX3N1cGVyIE9yaWdpbmFsIHZhbHVlXG4gICAgICogQHBhcmFtICB7bWl4ZWR9IF9mdW4gTmV3IHByb3BlcnR5IHZhbHVlXG4gICAgICogQHJldHVybiB7bWl4ZWR9IFZhbHVlIHJldHVybmVkIGJ5IG5ldyBmdW5jdGlvblxuICAgICAqL1xuICAgIG92ZXJyaWRlOiBmdW5jdGlvbihfc3VwZXIsIF9mdW4pIHtcbiAgICAgIGlmKCFfc3VwZXIgfHwgdHlwZW9mIF9mdW4gIT09ICdmdW5jdGlvbicpIHJldHVybiBfZnVuO1xuXG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvbGRTdXBlciA9IHRoaXMuJHN1cGVyO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMuJHN1cGVyID0gX3N1cGVyO1xuICAgICAgICAgIHJldHVybiBfZnVuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgdGhpcy4kc3VwZXIgPSBvbGRTdXBlcjtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIFV0aWxzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIEV4dGVuZCBhbiBvYmplY3QgdXNpbmcgYFV0aWxzLm92ZXJyaWRlYCBpbnN0ZWFkIG9mIGp1c3QgcmVwbGFjaW5nIHRoZSBmdW5jdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IF90YXJnZXQgT2JqZWN0IHRvIGJlIGV4dGVuZGVkXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBfb3RoZXIgIFNvdXJjZSBvYmplY3RcbiAgICAgKi9cbiAgICBleHRlbmRPdmVycmlkZW46IGZ1bmN0aW9uKF90YXJnZXQpIHtcbiAgICAgIGZvcih2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG90aGVyID0gYXJndW1lbnRzW2ldO1xuICAgICAgICBmb3IodmFyIGtleSBpbiBvdGhlcikge1xuICAgICAgICAgIGlmKG90aGVyLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIF90YXJnZXRba2V5XSA9IF90YXJnZXRba2V5XSAmJiB0eXBlb2YgX3RhcmdldFtrZXldID09PSAnZnVuY3Rpb24nID8gVXRpbHMub3ZlcnJpZGUoX3RhcmdldFtrZXldLCBvdGhlcltrZXldKSA6IG90aGVyW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfdGFyZ2V0O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YgVXRpbHNcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogR2VuZXJhdGVzIGEgbmV3IGFycmF5IHR5cGUsIGhhbmRsZXMgcGxhdGZvcm0gc3BlY2lmaWNzIChiYWctTy1oYWNrcylcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge29iamVjdH0gSW5kZXBlbmRlbnQgYXJyYXkgdHlwZS5cbiAgICAgKi9cbiAgICBidWlsZEFycmF5VHlwZTogZnVuY3Rpb24oX2ZvcmNlSWZyYW1lKSB7XG5cbiAgICAgIHZhciBhcnJheVR5cGU7XG5cbiAgICAgIGlmKFBST1RPX1NFVFRFUiAmJiAhX2ZvcmNlSWZyYW1lKSB7XG5cbiAgICAgICAgLy8gVXNlIG9iamVjdCBwcm90b3R5cGUgb3ZlcnJpZGUgdGVjaG5pcXVlXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFZlcnkgbmljZSBhcnJheSBzdWJjbGFzc2luZyBhbmFseXNpczogaHR0cDovL3BlcmZlY3Rpb25raWxscy5jb20vaG93LWVjbWFzY3JpcHQtNS1zdGlsbC1kb2VzLW5vdC1hbGxvdy10by1zdWJjbGFzcy1hbi1hcnJheS8jd2h5X3N1YmNsYXNzX2FuX2FycmF5XG4gICAgICAgIC8vXG5cbiAgICAgICAgdmFyIFN1YkFycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGFyciA9IFsgXTtcbiAgICAgICAgICBhcnIucHVzaC5hcHBseShhcnIsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgUFJPVE9fU0VUVEVSKGFyciwgU3ViQXJyYXkucHJvdG90eXBlKTtcbiAgICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgICB9O1xuXG4gICAgICAgIFN1YkFycmF5LnByb3RvdHlwZSA9IFtdO1xuICAgICAgICBTdWJBcnJheS5wcm90b3R5cGUubGFzdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB0aGlzW3RoaXMubGVuZ3RoIC0gMV07XG4gICAgICAgIH07XG5cbiAgICAgICAgYXJyYXlUeXBlID0gU3ViQXJyYXk7XG5cbiAgICAgIH0gZWxzZSAge1xuXG4gICAgICAgIC8vIFVzZSBpZnJhbWUgaGlqYWNrIHRlY2huaXF1ZSBmb3IgSUUxMTxcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQmFzZWQgb24gdGhlIGF3ZXNvbWUgYmxvZyBwb3N0IG9mIERlYW4gRWR3YXJkczogaHR0cDovL2RlYW4uZWR3YXJkcy5uYW1lL3dlYmxvZy8yMDA2LzExL2hvb3JheS9cbiAgICAgICAgLy9cblxuICAgICAgICAvLyBjcmVhdGUgYSBoaWRkZW4gPGlmcmFtZT4uXG4gICAgICAgIHZhciBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICAgICAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGlmcmFtZS5oZWlnaHQgPSAwO1xuICAgICAgICBpZnJhbWUud2lkdGggPSAwO1xuICAgICAgICBpZnJhbWUuYm9yZGVyID0gMDtcblxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7XG5cbiAgICAgICAgLy8gd3JpdGUgYSBzY3JpcHQgaW50byB0aGUgPGlmcmFtZT4gYW5kIHN0ZWFsIGl0cyBBcnJheSBvYmplY3QuXG4gICAgICAgIHdpbmRvdy5mcmFtZXNbd2luZG93LmZyYW1lcy5sZW5ndGggLSAxXS5kb2N1bWVudC53cml0ZSgnPHNjcmlwdD5wYXJlbnQuUmVzdG1vZEFycmF5ID0gQXJyYXk7PFxcL3NjcmlwdD4nKTtcblxuICAgICAgICAvLyB0YWtlIHRoZSBhcnJheSBvYmplY3QgYW5kIG1vdmUgaXQgdG8gbG9jYWwgY29udGV4dC5cbiAgICAgICAgYXJyYXlUeXBlID0gd2luZG93LlJlc3Rtb2RBcnJheTtcbiAgICAgICAgZGVsZXRlIHdpbmRvdy5SZXN0bW9kQXJyYXk7XG5cbiAgICAgICAgLy8gY29weSB0aGlzIGNvbnRleHQgQXJyYXkncyBleHRlbnNpb25zIHRvIG5ldyBhcnJheSB0eXBlIChjb3VsZCBiZSBhIGxpdHRsZSBzbG93Li4uKVxuICAgICAgICBmb3IodmFyIGtleSBpbiBBcnJheS5wcm90b3R5cGUpIHtcbiAgICAgICAgICBpZih0eXBlb2YgQXJyYXkucHJvdG90eXBlW2tleV0gPT09ICdmdW5jdGlvbicgJiYgIWFycmF5VHlwZS5wcm90b3R5cGVba2V5XSkge1xuICAgICAgICAgICAgYXJyYXlUeXBlLnByb3RvdHlwZVtrZXldID0gQXJyYXkucHJvdG90eXBlW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVtb3ZlIGlmcmFtZSBmcm9tIERPTS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gRXZlbiB0aG91Z2ggTVMgc2F5cyB0aGF0IHJlbW92aW5nIGlmcmFtZSBmcm9tIERPTSB3aWxsIHJlbGVhc2UgaXQncyByZWxhdGVkIHN0cnVjdHVyZXMgKGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9nZzYyMjkyOSh2PXZzLjg1KS5hc3B4KSxcbiAgICAgICAgLy8gYWN0dWFsbHkga2VlcGluZyBpdCByZWZlcmVuY2VkIGhhcyBwcm92ZW4gdG8gYmUgZW5vdWdoIHRvIGtlZXAgdGhlIHN0cnVjdHVyZXMgYWxpdmUuICh0aGF0IGluY2x1ZGVzIG91ciBhcnJheSB0eXBlKVxuICAgICAgICAvL1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7XG4gICAgICAgIElGUkFNRV9SRUYucHVzaChpZnJhbWUpOyAvLyBrZWVwIGlmcmFtZSByZWZlcmVuY2UhXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhcnJheVR5cGU7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBVdGlscztcbn1dKTtcbn0pKGFuZ3VsYXIpOyIsIi8qKlxuICogQVBJIEJvdW5kIE1vZGVscyBmb3IgQW5ndWxhckpTXG4gKiBAdmVyc2lvbiB2MS4xLjcgLSAyMDE1LTAxLTA2XG4gKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci1wbGF0YW51cy9yZXN0bW9kXG4gKiBAYXV0aG9yIElnbmFjaW8gQmFpeGFzIDxpZ25hY2lvQHBsYXRhbi51cz5cbiAqIEBsaWNlbnNlIE1JVCBMaWNlbnNlLCBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICovXG4hZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7YS5tb2R1bGUoXCJyZXN0bW9kXCIpLmZhY3RvcnkoXCJBTVNBcGlcIixbXCJyZXN0bW9kXCIsXCJpbmZsZWN0b3JcIixmdW5jdGlvbihhLGIpe3JldHVybiBhLm1peGluKFwiRGVmYXVsdFBhY2tlclwiLHskY29uZmlnOntzdHlsZTpcIkFNU1wiLHByaW1hcnlLZXk6XCJpZFwiLGpzb25NZXRhOlwibWV0YVwiLGpzb25MaW5rczpcImxpbmtzXCJ9LCRleHRlbmQ6e01vZGVsOntkZWNvZGVOYW1lOmIuY2FtZWxpemUsZW5jb2RlTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gYi5wYXJhbWV0ZXJpemUoYSxcIl9cIil9LGVuY29kZVVybE5hbWU6Yi5wYXJhbWV0ZXJpemV9fX0pfV0pfShhbmd1bGFyKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgbWFjaW50b3NoIG9uIDEvMjgvMTUuXG4gKi9cblxucmVxdWlyZSgnLi9hbmd1bGFyLm1pbi5qcycpO1xubW9kdWxlLmV4cG9ydHMgPSBhbmd1bGFyOyIsIi8qXG4gQW5ndWxhckpTIHYxLjMuMTNcbiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuIExpY2Vuc2U6IE1JVFxuKi9cbihmdW5jdGlvbihNLFksdCl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIFMoYil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzWzBdLGM7Yz1cIltcIisoYj9iK1wiOlwiOlwiXCIpK2ErXCJdIGh0dHA6Ly9lcnJvcnMuYW5ndWxhcmpzLm9yZy8xLjMuMTMvXCIrKGI/YitcIi9cIjpcIlwiKSthO2ZvcihhPTE7YTxhcmd1bWVudHMubGVuZ3RoO2ErKyl7Yz1jKygxPT1hP1wiP1wiOlwiJlwiKStcInBcIisoYS0xKStcIj1cIjt2YXIgZD1lbmNvZGVVUklDb21wb25lbnQsZTtlPWFyZ3VtZW50c1thXTtlPVwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZS50b1N0cmluZygpLnJlcGxhY2UoLyBcXHtbXFxzXFxTXSokLyxcIlwiKTpcInVuZGVmaW5lZFwiPT10eXBlb2YgZT9cInVuZGVmaW5lZFwiOlwic3RyaW5nXCIhPXR5cGVvZiBlP0pTT04uc3RyaW5naWZ5KGUpOmU7Yys9ZChlKX1yZXR1cm4gRXJyb3IoYyl9fWZ1bmN0aW9uIFRhKGIpe2lmKG51bGw9PWJ8fFVhKGIpKXJldHVybiExO3ZhciBhPWIubGVuZ3RoO3JldHVybiBiLm5vZGVUeXBlPT09XG5vYSYmYT8hMDpGKGIpfHxIKGIpfHwwPT09YXx8XCJudW1iZXJcIj09PXR5cGVvZiBhJiYwPGEmJmEtMSBpbiBifWZ1bmN0aW9uIHMoYixhLGMpe3ZhciBkLGU7aWYoYilpZihHKGIpKWZvcihkIGluIGIpXCJwcm90b3R5cGVcIj09ZHx8XCJsZW5ndGhcIj09ZHx8XCJuYW1lXCI9PWR8fGIuaGFzT3duUHJvcGVydHkmJiFiLmhhc093blByb3BlcnR5KGQpfHxhLmNhbGwoYyxiW2RdLGQsYik7ZWxzZSBpZihIKGIpfHxUYShiKSl7dmFyIGY9XCJvYmplY3RcIiE9PXR5cGVvZiBiO2Q9MDtmb3IoZT1iLmxlbmd0aDtkPGU7ZCsrKShmfHxkIGluIGIpJiZhLmNhbGwoYyxiW2RdLGQsYil9ZWxzZSBpZihiLmZvckVhY2gmJmIuZm9yRWFjaCE9PXMpYi5mb3JFYWNoKGEsYyxiKTtlbHNlIGZvcihkIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShkKSYmYS5jYWxsKGMsYltkXSxkLGIpO3JldHVybiBifWZ1bmN0aW9uIEVkKGIsYSxjKXtmb3IodmFyIGQ9T2JqZWN0LmtleXMoYikuc29ydCgpLGU9MDtlPGQubGVuZ3RoO2UrKylhLmNhbGwoYyxcbmJbZFtlXV0sZFtlXSk7cmV0dXJuIGR9ZnVuY3Rpb24gbGMoYil7cmV0dXJuIGZ1bmN0aW9uKGEsYyl7YihjLGEpfX1mdW5jdGlvbiBGZCgpe3JldHVybisrb2J9ZnVuY3Rpb24gbWMoYixhKXthP2IuJCRoYXNoS2V5PWE6ZGVsZXRlIGIuJCRoYXNoS2V5fWZ1bmN0aW9uIHgoYil7Zm9yKHZhciBhPWIuJCRoYXNoS2V5LGM9MSxkPWFyZ3VtZW50cy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9YXJndW1lbnRzW2NdO2lmKGUpZm9yKHZhciBmPU9iamVjdC5rZXlzKGUpLGc9MCxoPWYubGVuZ3RoO2c8aDtnKyspe3ZhciBsPWZbZ107YltsXT1lW2xdfX1tYyhiLGEpO3JldHVybiBifWZ1bmN0aW9uIGJhKGIpe3JldHVybiBwYXJzZUludChiLDEwKX1mdW5jdGlvbiBQYihiLGEpe3JldHVybiB4KE9iamVjdC5jcmVhdGUoYiksYSl9ZnVuY3Rpb24geigpe31mdW5jdGlvbiBwYShiKXtyZXR1cm4gYn1mdW5jdGlvbiBlYShiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYn19ZnVuY3Rpb24gQihiKXtyZXR1cm5cInVuZGVmaW5lZFwiPT09XG50eXBlb2YgYn1mdW5jdGlvbiB5KGIpe3JldHVyblwidW5kZWZpbmVkXCIhPT10eXBlb2YgYn1mdW5jdGlvbiBJKGIpe3JldHVybiBudWxsIT09YiYmXCJvYmplY3RcIj09PXR5cGVvZiBifWZ1bmN0aW9uIEYoYil7cmV0dXJuXCJzdHJpbmdcIj09PXR5cGVvZiBifWZ1bmN0aW9uIFYoYil7cmV0dXJuXCJudW1iZXJcIj09PXR5cGVvZiBifWZ1bmN0aW9uIHFhKGIpe3JldHVyblwiW29iamVjdCBEYXRlXVwiPT09RGEuY2FsbChiKX1mdW5jdGlvbiBHKGIpe3JldHVyblwiZnVuY3Rpb25cIj09PXR5cGVvZiBifWZ1bmN0aW9uIHBiKGIpe3JldHVyblwiW29iamVjdCBSZWdFeHBdXCI9PT1EYS5jYWxsKGIpfWZ1bmN0aW9uIFVhKGIpe3JldHVybiBiJiZiLndpbmRvdz09PWJ9ZnVuY3Rpb24gVmEoYil7cmV0dXJuIGImJmIuJGV2YWxBc3luYyYmYi4kd2F0Y2h9ZnVuY3Rpb24gV2EoYil7cmV0dXJuXCJib29sZWFuXCI9PT10eXBlb2YgYn1mdW5jdGlvbiBuYyhiKXtyZXR1cm4hKCFifHwhKGIubm9kZU5hbWV8fGIucHJvcCYmXG5iLmF0dHImJmIuZmluZCkpfWZ1bmN0aW9uIEdkKGIpe3ZhciBhPXt9O2I9Yi5zcGxpdChcIixcIik7dmFyIGM7Zm9yKGM9MDtjPGIubGVuZ3RoO2MrKylhW2JbY11dPSEwO3JldHVybiBhfWZ1bmN0aW9uIHVhKGIpe3JldHVybiBRKGIubm9kZU5hbWV8fGJbMF0mJmJbMF0ubm9kZU5hbWUpfWZ1bmN0aW9uIFhhKGIsYSl7dmFyIGM9Yi5pbmRleE9mKGEpOzA8PWMmJmIuc3BsaWNlKGMsMSk7cmV0dXJuIGF9ZnVuY3Rpb24gRWEoYixhLGMsZCl7aWYoVWEoYil8fFZhKGIpKXRocm93IEthKFwiY3B3c1wiKTtpZihhKXtpZihiPT09YSl0aHJvdyBLYShcImNwaVwiKTtjPWN8fFtdO2Q9ZHx8W107aWYoSShiKSl7dmFyIGU9Yy5pbmRleE9mKGIpO2lmKC0xIT09ZSlyZXR1cm4gZFtlXTtjLnB1c2goYik7ZC5wdXNoKGEpfWlmKEgoYikpZm9yKHZhciBmPWEubGVuZ3RoPTA7ZjxiLmxlbmd0aDtmKyspZT1FYShiW2ZdLG51bGwsYyxkKSxJKGJbZl0pJiYoYy5wdXNoKGJbZl0pLGQucHVzaChlKSksYS5wdXNoKGUpO1xuZWxzZXt2YXIgZz1hLiQkaGFzaEtleTtIKGEpP2EubGVuZ3RoPTA6cyhhLGZ1bmN0aW9uKGIsYyl7ZGVsZXRlIGFbY119KTtmb3IoZiBpbiBiKWIuaGFzT3duUHJvcGVydHkoZikmJihlPUVhKGJbZl0sbnVsbCxjLGQpLEkoYltmXSkmJihjLnB1c2goYltmXSksZC5wdXNoKGUpKSxhW2ZdPWUpO21jKGEsZyl9fWVsc2UgaWYoYT1iKUgoYik/YT1FYShiLFtdLGMsZCk6cWEoYik/YT1uZXcgRGF0ZShiLmdldFRpbWUoKSk6cGIoYik/KGE9bmV3IFJlZ0V4cChiLnNvdXJjZSxiLnRvU3RyaW5nKCkubWF0Y2goL1teXFwvXSokLylbMF0pLGEubGFzdEluZGV4PWIubGFzdEluZGV4KTpJKGIpJiYoZT1PYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZihiKSksYT1FYShiLGUsYyxkKSk7cmV0dXJuIGF9ZnVuY3Rpb24gcmEoYixhKXtpZihIKGIpKXthPWF8fFtdO2Zvcih2YXIgYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKylhW2NdPWJbY119ZWxzZSBpZihJKGIpKWZvcihjIGluIGE9YXx8e30sXG5iKWlmKFwiJFwiIT09Yy5jaGFyQXQoMCl8fFwiJFwiIT09Yy5jaGFyQXQoMSkpYVtjXT1iW2NdO3JldHVybiBhfHxifWZ1bmN0aW9uIGdhKGIsYSl7aWYoYj09PWEpcmV0dXJuITA7aWYobnVsbD09PWJ8fG51bGw9PT1hKXJldHVybiExO2lmKGIhPT1iJiZhIT09YSlyZXR1cm4hMDt2YXIgYz10eXBlb2YgYixkO2lmKGM9PXR5cGVvZiBhJiZcIm9iamVjdFwiPT1jKWlmKEgoYikpe2lmKCFIKGEpKXJldHVybiExO2lmKChjPWIubGVuZ3RoKT09YS5sZW5ndGgpe2ZvcihkPTA7ZDxjO2QrKylpZighZ2EoYltkXSxhW2RdKSlyZXR1cm4hMTtyZXR1cm4hMH19ZWxzZXtpZihxYShiKSlyZXR1cm4gcWEoYSk/Z2EoYi5nZXRUaW1lKCksYS5nZXRUaW1lKCkpOiExO2lmKHBiKGIpJiZwYihhKSlyZXR1cm4gYi50b1N0cmluZygpPT1hLnRvU3RyaW5nKCk7aWYoVmEoYil8fFZhKGEpfHxVYShiKXx8VWEoYSl8fEgoYSkpcmV0dXJuITE7Yz17fTtmb3IoZCBpbiBiKWlmKFwiJFwiIT09ZC5jaGFyQXQoMCkmJiFHKGJbZF0pKXtpZighZ2EoYltkXSxcbmFbZF0pKXJldHVybiExO2NbZF09ITB9Zm9yKGQgaW4gYSlpZighYy5oYXNPd25Qcm9wZXJ0eShkKSYmXCIkXCIhPT1kLmNoYXJBdCgwKSYmYVtkXSE9PXQmJiFHKGFbZF0pKXJldHVybiExO3JldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIFlhKGIsYSxjKXtyZXR1cm4gYi5jb25jYXQoWmEuY2FsbChhLGMpKX1mdW5jdGlvbiBvYyhiLGEpe3ZhciBjPTI8YXJndW1lbnRzLmxlbmd0aD9aYS5jYWxsKGFyZ3VtZW50cywyKTpbXTtyZXR1cm4hRyhhKXx8YSBpbnN0YW5jZW9mIFJlZ0V4cD9hOmMubGVuZ3RoP2Z1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/YS5hcHBseShiLFlhKGMsYXJndW1lbnRzLDApKTphLmFwcGx5KGIsYyl9OmZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/YS5hcHBseShiLGFyZ3VtZW50cyk6YS5jYWxsKGIpfX1mdW5jdGlvbiBIZChiLGEpe3ZhciBjPWE7XCJzdHJpbmdcIj09PXR5cGVvZiBiJiZcIiRcIj09PWIuY2hhckF0KDApJiZcIiRcIj09PWIuY2hhckF0KDEpP1xuYz10OlVhKGEpP2M9XCIkV0lORE9XXCI6YSYmWT09PWE/Yz1cIiRET0NVTUVOVFwiOlZhKGEpJiYoYz1cIiRTQ09QRVwiKTtyZXR1cm4gY31mdW5jdGlvbiAkYShiLGEpe2lmKFwidW5kZWZpbmVkXCI9PT10eXBlb2YgYilyZXR1cm4gdDtWKGEpfHwoYT1hPzI6bnVsbCk7cmV0dXJuIEpTT04uc3RyaW5naWZ5KGIsSGQsYSl9ZnVuY3Rpb24gcGMoYil7cmV0dXJuIEYoYik/SlNPTi5wYXJzZShiKTpifWZ1bmN0aW9uIHZhKGIpe2I9RChiKS5jbG9uZSgpO3RyeXtiLmVtcHR5KCl9Y2F0Y2goYSl7fXZhciBjPUQoXCI8ZGl2PlwiKS5hcHBlbmQoYikuaHRtbCgpO3RyeXtyZXR1cm4gYlswXS5ub2RlVHlwZT09PXFiP1EoYyk6Yy5tYXRjaCgvXig8W14+XSs+KS8pWzFdLnJlcGxhY2UoL148KFtcXHdcXC1dKykvLGZ1bmN0aW9uKGEsYil7cmV0dXJuXCI8XCIrUShiKX0pfWNhdGNoKGQpe3JldHVybiBRKGMpfX1mdW5jdGlvbiBxYyhiKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChiKX1jYXRjaChhKXt9fWZ1bmN0aW9uIHJjKGIpe3ZhciBhPVxue30sYyxkO3MoKGJ8fFwiXCIpLnNwbGl0KFwiJlwiKSxmdW5jdGlvbihiKXtiJiYoYz1iLnJlcGxhY2UoL1xcKy9nLFwiJTIwXCIpLnNwbGl0KFwiPVwiKSxkPXFjKGNbMF0pLHkoZCkmJihiPXkoY1sxXSk/cWMoY1sxXSk6ITAsc2MuY2FsbChhLGQpP0goYVtkXSk/YVtkXS5wdXNoKGIpOmFbZF09W2FbZF0sYl06YVtkXT1iKSl9KTtyZXR1cm4gYX1mdW5jdGlvbiBRYihiKXt2YXIgYT1bXTtzKGIsZnVuY3Rpb24oYixkKXtIKGIpP3MoYixmdW5jdGlvbihiKXthLnB1c2goRmEoZCwhMCkrKCEwPT09Yj9cIlwiOlwiPVwiK0ZhKGIsITApKSl9KTphLnB1c2goRmEoZCwhMCkrKCEwPT09Yj9cIlwiOlwiPVwiK0ZhKGIsITApKSl9KTtyZXR1cm4gYS5sZW5ndGg/YS5qb2luKFwiJlwiKTpcIlwifWZ1bmN0aW9uIHJiKGIpe3JldHVybiBGYShiLCEwKS5yZXBsYWNlKC8lMjYvZ2ksXCImXCIpLnJlcGxhY2UoLyUzRC9naSxcIj1cIikucmVwbGFjZSgvJTJCL2dpLFwiK1wiKX1mdW5jdGlvbiBGYShiLGEpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoYikucmVwbGFjZSgvJTQwL2dpLFxuXCJAXCIpLnJlcGxhY2UoLyUzQS9naSxcIjpcIikucmVwbGFjZSgvJTI0L2csXCIkXCIpLnJlcGxhY2UoLyUyQy9naSxcIixcIikucmVwbGFjZSgvJTNCL2dpLFwiO1wiKS5yZXBsYWNlKC8lMjAvZyxhP1wiJTIwXCI6XCIrXCIpfWZ1bmN0aW9uIElkKGIsYSl7dmFyIGMsZCxlPXNiLmxlbmd0aDtiPUQoYik7Zm9yKGQ9MDtkPGU7KytkKWlmKGM9c2JbZF0rYSxGKGM9Yi5hdHRyKGMpKSlyZXR1cm4gYztyZXR1cm4gbnVsbH1mdW5jdGlvbiBKZChiLGEpe3ZhciBjLGQsZT17fTtzKHNiLGZ1bmN0aW9uKGEpe2ErPVwiYXBwXCI7IWMmJmIuaGFzQXR0cmlidXRlJiZiLmhhc0F0dHJpYnV0ZShhKSYmKGM9YixkPWIuZ2V0QXR0cmlidXRlKGEpKX0pO3Moc2IsZnVuY3Rpb24oYSl7YSs9XCJhcHBcIjt2YXIgZTshYyYmKGU9Yi5xdWVyeVNlbGVjdG9yKFwiW1wiK2EucmVwbGFjZShcIjpcIixcIlxcXFw6XCIpK1wiXVwiKSkmJihjPWUsZD1lLmdldEF0dHJpYnV0ZShhKSl9KTtjJiYoZS5zdHJpY3REaT1udWxsIT09SWQoYyxcInN0cmljdC1kaVwiKSxcbmEoYyxkP1tkXTpbXSxlKSl9ZnVuY3Rpb24gdGMoYixhLGMpe0koYyl8fChjPXt9KTtjPXgoe3N0cmljdERpOiExfSxjKTt2YXIgZD1mdW5jdGlvbigpe2I9RChiKTtpZihiLmluamVjdG9yKCkpe3ZhciBkPWJbMF09PT1ZP1wiZG9jdW1lbnRcIjp2YShiKTt0aHJvdyBLYShcImJ0c3RycGRcIixkLnJlcGxhY2UoLzwvLFwiJmx0O1wiKS5yZXBsYWNlKC8+LyxcIiZndDtcIikpO31hPWF8fFtdO2EudW5zaGlmdChbXCIkcHJvdmlkZVwiLGZ1bmN0aW9uKGEpe2EudmFsdWUoXCIkcm9vdEVsZW1lbnRcIixiKX1dKTtjLmRlYnVnSW5mb0VuYWJsZWQmJmEucHVzaChbXCIkY29tcGlsZVByb3ZpZGVyXCIsZnVuY3Rpb24oYSl7YS5kZWJ1Z0luZm9FbmFibGVkKCEwKX1dKTthLnVuc2hpZnQoXCJuZ1wiKTtkPWFiKGEsYy5zdHJpY3REaSk7ZC5pbnZva2UoW1wiJHJvb3RTY29wZVwiLFwiJHJvb3RFbGVtZW50XCIsXCIkY29tcGlsZVwiLFwiJGluamVjdG9yXCIsZnVuY3Rpb24oYSxiLGMsZCl7YS4kYXBwbHkoZnVuY3Rpb24oKXtiLmRhdGEoXCIkaW5qZWN0b3JcIixcbmQpO2MoYikoYSl9KX1dKTtyZXR1cm4gZH0sZT0vXk5HX0VOQUJMRV9ERUJVR19JTkZPIS8sZj0vXk5HX0RFRkVSX0JPT1RTVFJBUCEvO00mJmUudGVzdChNLm5hbWUpJiYoYy5kZWJ1Z0luZm9FbmFibGVkPSEwLE0ubmFtZT1NLm5hbWUucmVwbGFjZShlLFwiXCIpKTtpZihNJiYhZi50ZXN0KE0ubmFtZSkpcmV0dXJuIGQoKTtNLm5hbWU9TS5uYW1lLnJlcGxhY2UoZixcIlwiKTtjYS5yZXN1bWVCb290c3RyYXA9ZnVuY3Rpb24oYil7cyhiLGZ1bmN0aW9uKGIpe2EucHVzaChiKX0pO3JldHVybiBkKCl9O0coY2EucmVzdW1lRGVmZXJyZWRCb290c3RyYXApJiZjYS5yZXN1bWVEZWZlcnJlZEJvb3RzdHJhcCgpfWZ1bmN0aW9uIEtkKCl7TS5uYW1lPVwiTkdfRU5BQkxFX0RFQlVHX0lORk8hXCIrTS5uYW1lO00ubG9jYXRpb24ucmVsb2FkKCl9ZnVuY3Rpb24gTGQoYil7Yj1jYS5lbGVtZW50KGIpLmluamVjdG9yKCk7aWYoIWIpdGhyb3cgS2EoXCJ0ZXN0XCIpO3JldHVybiBiLmdldChcIiQkdGVzdGFiaWxpdHlcIil9XG5mdW5jdGlvbiB1YyhiLGEpe2E9YXx8XCJfXCI7cmV0dXJuIGIucmVwbGFjZShNZCxmdW5jdGlvbihiLGQpe3JldHVybihkP2E6XCJcIikrYi50b0xvd2VyQ2FzZSgpfSl9ZnVuY3Rpb24gTmQoKXt2YXIgYjt2Y3x8KChzYT1NLmpRdWVyeSkmJnNhLmZuLm9uPyhEPXNhLHgoc2EuZm4se3Njb3BlOkxhLnNjb3BlLGlzb2xhdGVTY29wZTpMYS5pc29sYXRlU2NvcGUsY29udHJvbGxlcjpMYS5jb250cm9sbGVyLGluamVjdG9yOkxhLmluamVjdG9yLGluaGVyaXRlZERhdGE6TGEuaW5oZXJpdGVkRGF0YX0pLGI9c2EuY2xlYW5EYXRhLHNhLmNsZWFuRGF0YT1mdW5jdGlvbihhKXt2YXIgYztpZihSYilSYj0hMTtlbHNlIGZvcih2YXIgZD0wLGU7bnVsbCE9KGU9YVtkXSk7ZCsrKShjPXNhLl9kYXRhKGUsXCJldmVudHNcIikpJiZjLiRkZXN0cm95JiZzYShlKS50cmlnZ2VySGFuZGxlcihcIiRkZXN0cm95XCIpO2IoYSl9KTpEPVIsY2EuZWxlbWVudD1ELHZjPSEwKX1mdW5jdGlvbiBTYihiLGEsYyl7aWYoIWIpdGhyb3cgS2EoXCJhcmVxXCIsXG5hfHxcIj9cIixjfHxcInJlcXVpcmVkXCIpO3JldHVybiBifWZ1bmN0aW9uIHRiKGIsYSxjKXtjJiZIKGIpJiYoYj1iW2IubGVuZ3RoLTFdKTtTYihHKGIpLGEsXCJub3QgYSBmdW5jdGlvbiwgZ290IFwiKyhiJiZcIm9iamVjdFwiPT09dHlwZW9mIGI/Yi5jb25zdHJ1Y3Rvci5uYW1lfHxcIk9iamVjdFwiOnR5cGVvZiBiKSk7cmV0dXJuIGJ9ZnVuY3Rpb24gTWEoYixhKXtpZihcImhhc093blByb3BlcnR5XCI9PT1iKXRocm93IEthKFwiYmFkbmFtZVwiLGEpO31mdW5jdGlvbiB3YyhiLGEsYyl7aWYoIWEpcmV0dXJuIGI7YT1hLnNwbGl0KFwiLlwiKTtmb3IodmFyIGQsZT1iLGY9YS5sZW5ndGgsZz0wO2c8ZjtnKyspZD1hW2ddLGImJihiPShlPWIpW2RdKTtyZXR1cm4hYyYmRyhiKT9vYyhlLGIpOmJ9ZnVuY3Rpb24gdWIoYil7dmFyIGE9YlswXTtiPWJbYi5sZW5ndGgtMV07dmFyIGM9W2FdO2Rve2E9YS5uZXh0U2libGluZztpZighYSlicmVhaztjLnB1c2goYSl9d2hpbGUoYSE9PWIpO3JldHVybiBEKGMpfWZ1bmN0aW9uIGhhKCl7cmV0dXJuIE9iamVjdC5jcmVhdGUobnVsbCl9XG5mdW5jdGlvbiBPZChiKXtmdW5jdGlvbiBhKGEsYixjKXtyZXR1cm4gYVtiXXx8KGFbYl09YygpKX12YXIgYz1TKFwiJGluamVjdG9yXCIpLGQ9UyhcIm5nXCIpO2I9YShiLFwiYW5ndWxhclwiLE9iamVjdCk7Yi4kJG1pbkVycj1iLiQkbWluRXJyfHxTO3JldHVybiBhKGIsXCJtb2R1bGVcIixmdW5jdGlvbigpe3ZhciBiPXt9O3JldHVybiBmdW5jdGlvbihmLGcsaCl7aWYoXCJoYXNPd25Qcm9wZXJ0eVwiPT09Zil0aHJvdyBkKFwiYmFkbmFtZVwiLFwibW9kdWxlXCIpO2cmJmIuaGFzT3duUHJvcGVydHkoZikmJihiW2ZdPW51bGwpO3JldHVybiBhKGIsZixmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYyxkLGUsZil7Znx8KGY9Yik7cmV0dXJuIGZ1bmN0aW9uKCl7ZltlfHxcInB1c2hcIl0oW2MsZCxhcmd1bWVudHNdKTtyZXR1cm4gdX19aWYoIWcpdGhyb3cgYyhcIm5vbW9kXCIsZik7dmFyIGI9W10sZD1bXSxlPVtdLHE9YShcIiRpbmplY3RvclwiLFwiaW52b2tlXCIsXCJwdXNoXCIsZCksdT17X2ludm9rZVF1ZXVlOmIsX2NvbmZpZ0Jsb2NrczpkLFxuX3J1bkJsb2NrczplLHJlcXVpcmVzOmcsbmFtZTpmLHByb3ZpZGVyOmEoXCIkcHJvdmlkZVwiLFwicHJvdmlkZXJcIiksZmFjdG9yeTphKFwiJHByb3ZpZGVcIixcImZhY3RvcnlcIiksc2VydmljZTphKFwiJHByb3ZpZGVcIixcInNlcnZpY2VcIiksdmFsdWU6YShcIiRwcm92aWRlXCIsXCJ2YWx1ZVwiKSxjb25zdGFudDphKFwiJHByb3ZpZGVcIixcImNvbnN0YW50XCIsXCJ1bnNoaWZ0XCIpLGFuaW1hdGlvbjphKFwiJGFuaW1hdGVQcm92aWRlclwiLFwicmVnaXN0ZXJcIiksZmlsdGVyOmEoXCIkZmlsdGVyUHJvdmlkZXJcIixcInJlZ2lzdGVyXCIpLGNvbnRyb2xsZXI6YShcIiRjb250cm9sbGVyUHJvdmlkZXJcIixcInJlZ2lzdGVyXCIpLGRpcmVjdGl2ZTphKFwiJGNvbXBpbGVQcm92aWRlclwiLFwiZGlyZWN0aXZlXCIpLGNvbmZpZzpxLHJ1bjpmdW5jdGlvbihhKXtlLnB1c2goYSk7cmV0dXJuIHRoaXN9fTtoJiZxKGgpO3JldHVybiB1fSl9fSl9ZnVuY3Rpb24gUGQoYil7eChiLHtib290c3RyYXA6dGMsY29weTpFYSxleHRlbmQ6eCxlcXVhbHM6Z2EsXG5lbGVtZW50OkQsZm9yRWFjaDpzLGluamVjdG9yOmFiLG5vb3A6eixiaW5kOm9jLHRvSnNvbjokYSxmcm9tSnNvbjpwYyxpZGVudGl0eTpwYSxpc1VuZGVmaW5lZDpCLGlzRGVmaW5lZDp5LGlzU3RyaW5nOkYsaXNGdW5jdGlvbjpHLGlzT2JqZWN0OkksaXNOdW1iZXI6Vixpc0VsZW1lbnQ6bmMsaXNBcnJheTpILHZlcnNpb246UWQsaXNEYXRlOnFhLGxvd2VyY2FzZTpRLHVwcGVyY2FzZTp2YixjYWxsYmFja3M6e2NvdW50ZXI6MH0sZ2V0VGVzdGFiaWxpdHk6TGQsJCRtaW5FcnI6UywkJGNzcDpiYixyZWxvYWRXaXRoRGVidWdJbmZvOktkfSk7Y2I9T2QoTSk7dHJ5e2NiKFwibmdMb2NhbGVcIil9Y2F0Y2goYSl7Y2IoXCJuZ0xvY2FsZVwiLFtdKS5wcm92aWRlcihcIiRsb2NhbGVcIixSZCl9Y2IoXCJuZ1wiLFtcIm5nTG9jYWxlXCJdLFtcIiRwcm92aWRlXCIsZnVuY3Rpb24oYSl7YS5wcm92aWRlcih7JCRzYW5pdGl6ZVVyaTpTZH0pO2EucHJvdmlkZXIoXCIkY29tcGlsZVwiLHhjKS5kaXJlY3RpdmUoe2E6VGQsXG5pbnB1dDp5Yyx0ZXh0YXJlYTp5Yyxmb3JtOlVkLHNjcmlwdDpWZCxzZWxlY3Q6V2Qsc3R5bGU6WGQsb3B0aW9uOllkLG5nQmluZDpaZCxuZ0JpbmRIdG1sOiRkLG5nQmluZFRlbXBsYXRlOmFlLG5nQ2xhc3M6YmUsbmdDbGFzc0V2ZW46Y2UsbmdDbGFzc09kZDpkZSxuZ0Nsb2FrOmVlLG5nQ29udHJvbGxlcjpmZSxuZ0Zvcm06Z2UsbmdIaWRlOmhlLG5nSWY6aWUsbmdJbmNsdWRlOmplLG5nSW5pdDprZSxuZ05vbkJpbmRhYmxlOmxlLG5nUGx1cmFsaXplOm1lLG5nUmVwZWF0Om5lLG5nU2hvdzpvZSxuZ1N0eWxlOnBlLG5nU3dpdGNoOnFlLG5nU3dpdGNoV2hlbjpyZSxuZ1N3aXRjaERlZmF1bHQ6c2UsbmdPcHRpb25zOnRlLG5nVHJhbnNjbHVkZTp1ZSxuZ01vZGVsOnZlLG5nTGlzdDp3ZSxuZ0NoYW5nZTp4ZSxwYXR0ZXJuOnpjLG5nUGF0dGVybjp6YyxyZXF1aXJlZDpBYyxuZ1JlcXVpcmVkOkFjLG1pbmxlbmd0aDpCYyxuZ01pbmxlbmd0aDpCYyxtYXhsZW5ndGg6Q2MsbmdNYXhsZW5ndGg6Q2MsXG5uZ1ZhbHVlOnllLG5nTW9kZWxPcHRpb25zOnplfSkuZGlyZWN0aXZlKHtuZ0luY2x1ZGU6QWV9KS5kaXJlY3RpdmUod2IpLmRpcmVjdGl2ZShEYyk7YS5wcm92aWRlcih7JGFuY2hvclNjcm9sbDpCZSwkYW5pbWF0ZTpDZSwkYnJvd3NlcjpEZSwkY2FjaGVGYWN0b3J5OkVlLCRjb250cm9sbGVyOkZlLCRkb2N1bWVudDpHZSwkZXhjZXB0aW9uSGFuZGxlcjpIZSwkZmlsdGVyOkVjLCRpbnRlcnBvbGF0ZTpJZSwkaW50ZXJ2YWw6SmUsJGh0dHA6S2UsJGh0dHBCYWNrZW5kOkxlLCRsb2NhdGlvbjpNZSwkbG9nOk5lLCRwYXJzZTpPZSwkcm9vdFNjb3BlOlBlLCRxOlFlLCQkcTpSZSwkc2NlOlNlLCRzY2VEZWxlZ2F0ZTpUZSwkc25pZmZlcjpVZSwkdGVtcGxhdGVDYWNoZTpWZSwkdGVtcGxhdGVSZXF1ZXN0OldlLCQkdGVzdGFiaWxpdHk6WGUsJHRpbWVvdXQ6WWUsJHdpbmRvdzpaZSwkJHJBRjokZSwkJGFzeW5jQ2FsbGJhY2s6YWYsJCRqcUxpdGU6YmZ9KX1dKX1mdW5jdGlvbiBkYihiKXtyZXR1cm4gYi5yZXBsYWNlKGNmLFxuZnVuY3Rpb24oYSxiLGQsZSl7cmV0dXJuIGU/ZC50b1VwcGVyQ2FzZSgpOmR9KS5yZXBsYWNlKGRmLFwiTW96JDFcIil9ZnVuY3Rpb24gRmMoYil7Yj1iLm5vZGVUeXBlO3JldHVybiBiPT09b2F8fCFifHw5PT09Yn1mdW5jdGlvbiBHYyhiLGEpe3ZhciBjLGQsZT1hLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxmPVtdO2lmKFRiLnRlc3QoYikpe2M9Y3x8ZS5hcHBlbmRDaGlsZChhLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO2Q9KGVmLmV4ZWMoYil8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpO2Q9aWFbZF18fGlhLl9kZWZhdWx0O2MuaW5uZXJIVE1MPWRbMV0rYi5yZXBsYWNlKGZmLFwiPCQxPjwvJDI+XCIpK2RbMl07Zm9yKGQ9ZFswXTtkLS07KWM9Yy5sYXN0Q2hpbGQ7Zj1ZYShmLGMuY2hpbGROb2Rlcyk7Yz1lLmZpcnN0Q2hpbGQ7Yy50ZXh0Q29udGVudD1cIlwifWVsc2UgZi5wdXNoKGEuY3JlYXRlVGV4dE5vZGUoYikpO2UudGV4dENvbnRlbnQ9XCJcIjtlLmlubmVySFRNTD1cIlwiO3MoZixmdW5jdGlvbihhKXtlLmFwcGVuZENoaWxkKGEpfSk7XG5yZXR1cm4gZX1mdW5jdGlvbiBSKGIpe2lmKGIgaW5zdGFuY2VvZiBSKXJldHVybiBiO3ZhciBhO0YoYikmJihiPVUoYiksYT0hMCk7aWYoISh0aGlzIGluc3RhbmNlb2YgUikpe2lmKGEmJlwiPFwiIT1iLmNoYXJBdCgwKSl0aHJvdyBVYihcIm5vc2VsXCIpO3JldHVybiBuZXcgUihiKX1pZihhKXthPVk7dmFyIGM7Yj0oYz1nZi5leGVjKGIpKT9bYS5jcmVhdGVFbGVtZW50KGNbMV0pXTooYz1HYyhiLGEpKT9jLmNoaWxkTm9kZXM6W119SGModGhpcyxiKX1mdW5jdGlvbiBWYihiKXtyZXR1cm4gYi5jbG9uZU5vZGUoITApfWZ1bmN0aW9uIHhiKGIsYSl7YXx8eWIoYik7aWYoYi5xdWVyeVNlbGVjdG9yQWxsKWZvcih2YXIgYz1iLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqXCIpLGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspeWIoY1tkXSl9ZnVuY3Rpb24gSWMoYixhLGMsZCl7aWYoeShkKSl0aHJvdyBVYihcIm9mZmFyZ3NcIik7dmFyIGU9KGQ9emIoYikpJiZkLmV2ZW50cyxmPWQmJmQuaGFuZGxlO2lmKGYpaWYoYSlzKGEuc3BsaXQoXCIgXCIpLFxuZnVuY3Rpb24oYSl7aWYoeShjKSl7dmFyIGQ9ZVthXTtYYShkfHxbXSxjKTtpZihkJiYwPGQubGVuZ3RoKXJldHVybn1iLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxmLCExKTtkZWxldGUgZVthXX0pO2Vsc2UgZm9yKGEgaW4gZSlcIiRkZXN0cm95XCIhPT1hJiZiLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxmLCExKSxkZWxldGUgZVthXX1mdW5jdGlvbiB5YihiLGEpe3ZhciBjPWIubmczMzksZD1jJiZBYltjXTtkJiYoYT9kZWxldGUgZC5kYXRhW2FdOihkLmhhbmRsZSYmKGQuZXZlbnRzLiRkZXN0cm95JiZkLmhhbmRsZSh7fSxcIiRkZXN0cm95XCIpLEljKGIpKSxkZWxldGUgQWJbY10sYi5uZzMzOT10KSl9ZnVuY3Rpb24gemIoYixhKXt2YXIgYz1iLm5nMzM5LGM9YyYmQWJbY107YSYmIWMmJihiLm5nMzM5PWM9KytoZixjPUFiW2NdPXtldmVudHM6e30sZGF0YTp7fSxoYW5kbGU6dH0pO3JldHVybiBjfWZ1bmN0aW9uIFdiKGIsYSxjKXtpZihGYyhiKSl7dmFyIGQ9eShjKSxlPSFkJiZhJiYhSShhKSxcbmY9IWE7Yj0oYj16YihiLCFlKSkmJmIuZGF0YTtpZihkKWJbYV09YztlbHNle2lmKGYpcmV0dXJuIGI7aWYoZSlyZXR1cm4gYiYmYlthXTt4KGIsYSl9fX1mdW5jdGlvbiBCYihiLGEpe3JldHVybiBiLmdldEF0dHJpYnV0ZT8tMTwoXCIgXCIrKGIuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLFwiIFwiKS5pbmRleE9mKFwiIFwiK2ErXCIgXCIpOiExfWZ1bmN0aW9uIENiKGIsYSl7YSYmYi5zZXRBdHRyaWJ1dGUmJnMoYS5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7Yi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLFUoKFwiIFwiKyhiLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKStcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZyxcIiBcIikucmVwbGFjZShcIiBcIitVKGEpK1wiIFwiLFwiIFwiKSkpfSl9ZnVuY3Rpb24gRGIoYixhKXtpZihhJiZiLnNldEF0dHJpYnV0ZSl7dmFyIGM9KFwiIFwiKyhiLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKStcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZyxcIiBcIik7XG5zKGEuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEpe2E9VShhKTstMT09PWMuaW5kZXhPZihcIiBcIithK1wiIFwiKSYmKGMrPWErXCIgXCIpfSk7Yi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLFUoYykpfX1mdW5jdGlvbiBIYyhiLGEpe2lmKGEpaWYoYS5ub2RlVHlwZSliW2IubGVuZ3RoKytdPWE7ZWxzZXt2YXIgYz1hLmxlbmd0aDtpZihcIm51bWJlclwiPT09dHlwZW9mIGMmJmEud2luZG93IT09YSl7aWYoYylmb3IodmFyIGQ9MDtkPGM7ZCsrKWJbYi5sZW5ndGgrK109YVtkXX1lbHNlIGJbYi5sZW5ndGgrK109YX19ZnVuY3Rpb24gSmMoYixhKXtyZXR1cm4gRWIoYixcIiRcIisoYXx8XCJuZ0NvbnRyb2xsZXJcIikrXCJDb250cm9sbGVyXCIpfWZ1bmN0aW9uIEViKGIsYSxjKXs5PT1iLm5vZGVUeXBlJiYoYj1iLmRvY3VtZW50RWxlbWVudCk7Zm9yKGE9SChhKT9hOlthXTtiOyl7Zm9yKHZhciBkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKWlmKChjPUQuZGF0YShiLGFbZF0pKSE9PXQpcmV0dXJuIGM7Yj1iLnBhcmVudE5vZGV8fFxuMTE9PT1iLm5vZGVUeXBlJiZiLmhvc3R9fWZ1bmN0aW9uIEtjKGIpe2Zvcih4YihiLCEwKTtiLmZpcnN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYi5maXJzdENoaWxkKX1mdW5jdGlvbiBMYyhiLGEpe2F8fHhiKGIpO3ZhciBjPWIucGFyZW50Tm9kZTtjJiZjLnJlbW92ZUNoaWxkKGIpfWZ1bmN0aW9uIGpmKGIsYSl7YT1hfHxNO2lmKFwiY29tcGxldGVcIj09PWEuZG9jdW1lbnQucmVhZHlTdGF0ZSlhLnNldFRpbWVvdXQoYik7ZWxzZSBEKGEpLm9uKFwibG9hZFwiLGIpfWZ1bmN0aW9uIE1jKGIsYSl7dmFyIGM9RmJbYS50b0xvd2VyQ2FzZSgpXTtyZXR1cm4gYyYmTmNbdWEoYildJiZjfWZ1bmN0aW9uIGtmKGIsYSl7dmFyIGM9Yi5ub2RlTmFtZTtyZXR1cm4oXCJJTlBVVFwiPT09Y3x8XCJURVhUQVJFQVwiPT09YykmJk9jW2FdfWZ1bmN0aW9uIGxmKGIsYSl7dmFyIGM9ZnVuY3Rpb24oYyxlKXtjLmlzRGVmYXVsdFByZXZlbnRlZD1mdW5jdGlvbigpe3JldHVybiBjLmRlZmF1bHRQcmV2ZW50ZWR9O3ZhciBmPVxuYVtlfHxjLnR5cGVdLGc9Zj9mLmxlbmd0aDowO2lmKGcpe2lmKEIoYy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQpKXt2YXIgaD1jLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjtjLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbj1mdW5jdGlvbigpe2MuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPSEwO2Muc3RvcFByb3BhZ2F0aW9uJiZjLnN0b3BQcm9wYWdhdGlvbigpO2gmJmguY2FsbChjKX19Yy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1mdW5jdGlvbigpe3JldHVybiEwPT09Yy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWR9OzE8ZyYmKGY9cmEoZikpO2Zvcih2YXIgbD0wO2w8ZztsKyspYy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpfHxmW2xdLmNhbGwoYixjKX19O2MuZWxlbT1iO3JldHVybiBjfWZ1bmN0aW9uIGJmKCl7dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHgoUix7aGFzQ2xhc3M6ZnVuY3Rpb24oYixhKXtiLmF0dHImJihiPWJbMF0pO1xucmV0dXJuIEJiKGIsYSl9LGFkZENsYXNzOmZ1bmN0aW9uKGIsYSl7Yi5hdHRyJiYoYj1iWzBdKTtyZXR1cm4gRGIoYixhKX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYixhKXtiLmF0dHImJihiPWJbMF0pO3JldHVybiBDYihiLGEpfX0pfX1mdW5jdGlvbiBOYShiLGEpe3ZhciBjPWImJmIuJCRoYXNoS2V5O2lmKGMpcmV0dXJuXCJmdW5jdGlvblwiPT09dHlwZW9mIGMmJihjPWIuJCRoYXNoS2V5KCkpLGM7Yz10eXBlb2YgYjtyZXR1cm4gYz1cImZ1bmN0aW9uXCI9PWN8fFwib2JqZWN0XCI9PWMmJm51bGwhPT1iP2IuJCRoYXNoS2V5PWMrXCI6XCIrKGF8fEZkKSgpOmMrXCI6XCIrYn1mdW5jdGlvbiBlYihiLGEpe2lmKGEpe3ZhciBjPTA7dGhpcy5uZXh0VWlkPWZ1bmN0aW9uKCl7cmV0dXJuKytjfX1zKGIsdGhpcy5wdXQsdGhpcyl9ZnVuY3Rpb24gbWYoYil7cmV0dXJuKGI9Yi50b1N0cmluZygpLnJlcGxhY2UoUGMsXCJcIikubWF0Y2goUWMpKT9cImZ1bmN0aW9uKFwiKyhiWzFdfHxcIlwiKS5yZXBsYWNlKC9bXFxzXFxyXFxuXSsvLFxuXCIgXCIpK1wiKVwiOlwiZm5cIn1mdW5jdGlvbiBhYihiLGEpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7aWYoSShiKSlzKGIsbGMoYSkpO2Vsc2UgcmV0dXJuIGEoYixjKX19ZnVuY3Rpb24gZChhLGIpe01hKGEsXCJzZXJ2aWNlXCIpO2lmKEcoYil8fEgoYikpYj1xLmluc3RhbnRpYXRlKGIpO2lmKCFiLiRnZXQpdGhyb3cgR2EoXCJwZ2V0XCIsYSk7cmV0dXJuIG5bYStcIlByb3ZpZGVyXCJdPWJ9ZnVuY3Rpb24gZShhLGIpe3JldHVybiBmdW5jdGlvbigpe3ZhciBjPXIuaW52b2tlKGIsdGhpcyk7aWYoQihjKSl0aHJvdyBHYShcInVuZGVmXCIsYSk7cmV0dXJuIGN9fWZ1bmN0aW9uIGYoYSxiLGMpe3JldHVybiBkKGEseyRnZXQ6ITEhPT1jP2UoYSxiKTpifSl9ZnVuY3Rpb24gZyhhKXt2YXIgYj1bXSxjO3MoYSxmdW5jdGlvbihhKXtmdW5jdGlvbiBkKGEpe3ZhciBiLGM7Yj0wO2ZvcihjPWEubGVuZ3RoO2I8YztiKyspe3ZhciBlPWFbYl0sZj1xLmdldChlWzBdKTtmW2VbMV1dLmFwcGx5KGYsXG5lWzJdKX19aWYoIW0uZ2V0KGEpKXttLnB1dChhLCEwKTt0cnl7RihhKT8oYz1jYihhKSxiPWIuY29uY2F0KGcoYy5yZXF1aXJlcykpLmNvbmNhdChjLl9ydW5CbG9ja3MpLGQoYy5faW52b2tlUXVldWUpLGQoYy5fY29uZmlnQmxvY2tzKSk6RyhhKT9iLnB1c2gocS5pbnZva2UoYSkpOkgoYSk/Yi5wdXNoKHEuaW52b2tlKGEpKTp0YihhLFwibW9kdWxlXCIpfWNhdGNoKGUpe3Rocm93IEgoYSkmJihhPWFbYS5sZW5ndGgtMV0pLGUubWVzc2FnZSYmZS5zdGFjayYmLTE9PWUuc3RhY2suaW5kZXhPZihlLm1lc3NhZ2UpJiYoZT1lLm1lc3NhZ2UrXCJcXG5cIitlLnN0YWNrKSxHYShcIm1vZHVsZXJyXCIsYSxlLnN0YWNrfHxlLm1lc3NhZ2V8fGUpO319fSk7cmV0dXJuIGJ9ZnVuY3Rpb24gaChiLGMpe2Z1bmN0aW9uIGQoYSxlKXtpZihiLmhhc093blByb3BlcnR5KGEpKXtpZihiW2FdPT09bCl0aHJvdyBHYShcImNkZXBcIixhK1wiIDwtIFwiK2suam9pbihcIiA8LSBcIikpO3JldHVybiBiW2FdfXRyeXtyZXR1cm4gay51bnNoaWZ0KGEpLFxuYlthXT1sLGJbYV09YyhhLGUpfWNhdGNoKGYpe3Rocm93IGJbYV09PT1sJiZkZWxldGUgYlthXSxmO31maW5hbGx5e2suc2hpZnQoKX19ZnVuY3Rpb24gZShiLGMsZixnKXtcInN0cmluZ1wiPT09dHlwZW9mIGYmJihnPWYsZj1udWxsKTt2YXIgaD1bXSxrPWFiLiQkYW5ub3RhdGUoYixhLGcpLGwscSxuO3E9MDtmb3IobD1rLmxlbmd0aDtxPGw7cSsrKXtuPWtbcV07aWYoXCJzdHJpbmdcIiE9PXR5cGVvZiBuKXRocm93IEdhKFwiaXRrblwiLG4pO2gucHVzaChmJiZmLmhhc093blByb3BlcnR5KG4pP2Zbbl06ZChuLGcpKX1IKGIpJiYoYj1iW2xdKTtyZXR1cm4gYi5hcHBseShjLGgpfXJldHVybntpbnZva2U6ZSxpbnN0YW50aWF0ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9T2JqZWN0LmNyZWF0ZSgoSChhKT9hW2EubGVuZ3RoLTFdOmEpLnByb3RvdHlwZXx8bnVsbCk7YT1lKGEsZCxiLGMpO3JldHVybiBJKGEpfHxHKGEpP2E6ZH0sZ2V0OmQsYW5ub3RhdGU6YWIuJCRhbm5vdGF0ZSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uaGFzT3duUHJvcGVydHkoYStcblwiUHJvdmlkZXJcIil8fGIuaGFzT3duUHJvcGVydHkoYSl9fX1hPSEwPT09YTt2YXIgbD17fSxrPVtdLG09bmV3IGViKFtdLCEwKSxuPXskcHJvdmlkZTp7cHJvdmlkZXI6YyhkKSxmYWN0b3J5OmMoZiksc2VydmljZTpjKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGYoYSxbXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhKXtyZXR1cm4gYS5pbnN0YW50aWF0ZShiKX1dKX0pLHZhbHVlOmMoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZihhLGVhKGIpLCExKX0pLGNvbnN0YW50OmMoZnVuY3Rpb24oYSxiKXtNYShhLFwiY29uc3RhbnRcIik7blthXT1iO3VbYV09Yn0pLGRlY29yYXRvcjpmdW5jdGlvbihhLGIpe3ZhciBjPXEuZ2V0KGErXCJQcm92aWRlclwiKSxkPWMuJGdldDtjLiRnZXQ9ZnVuY3Rpb24oKXt2YXIgYT1yLmludm9rZShkLGMpO3JldHVybiByLmludm9rZShiLG51bGwseyRkZWxlZ2F0ZTphfSl9fX19LHE9bi4kaW5qZWN0b3I9aChuLGZ1bmN0aW9uKGEsYil7Y2EuaXNTdHJpbmcoYikmJmsucHVzaChiKTtcbnRocm93IEdhKFwidW5wclwiLGsuam9pbihcIiA8LSBcIikpO30pLHU9e30scj11LiRpbmplY3Rvcj1oKHUsZnVuY3Rpb24oYSxiKXt2YXIgYz1xLmdldChhK1wiUHJvdmlkZXJcIixiKTtyZXR1cm4gci5pbnZva2UoYy4kZ2V0LGMsdCxhKX0pO3MoZyhiKSxmdW5jdGlvbihhKXtyLmludm9rZShhfHx6KX0pO3JldHVybiByfWZ1bmN0aW9uIEJlKCl7dmFyIGI9ITA7dGhpcy5kaXNhYmxlQXV0b1Njcm9sbGluZz1mdW5jdGlvbigpe2I9ITF9O3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkbG9jYXRpb25cIixcIiRyb290U2NvcGVcIixmdW5jdGlvbihhLGMsZCl7ZnVuY3Rpb24gZShhKXt2YXIgYj1udWxsO0FycmF5LnByb3RvdHlwZS5zb21lLmNhbGwoYSxmdW5jdGlvbihhKXtpZihcImFcIj09PXVhKGEpKXJldHVybiBiPWEsITB9KTtyZXR1cm4gYn1mdW5jdGlvbiBmKGIpe2lmKGIpe2Iuc2Nyb2xsSW50b1ZpZXcoKTt2YXIgYztjPWcueU9mZnNldDtHKGMpP2M9YygpOm5jKGMpPyhjPWNbMF0sYz1cImZpeGVkXCIhPT1cbmEuZ2V0Q29tcHV0ZWRTdHlsZShjKS5wb3NpdGlvbj8wOmMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tKTpWKGMpfHwoYz0wKTtjJiYoYj1iLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCxhLnNjcm9sbEJ5KDAsYi1jKSl9ZWxzZSBhLnNjcm9sbFRvKDAsMCl9ZnVuY3Rpb24gZygpe3ZhciBhPWMuaGFzaCgpLGI7YT8oYj1oLmdldEVsZW1lbnRCeUlkKGEpKT9mKGIpOihiPWUoaC5nZXRFbGVtZW50c0J5TmFtZShhKSkpP2YoYik6XCJ0b3BcIj09PWEmJmYobnVsbCk6ZihudWxsKX12YXIgaD1hLmRvY3VtZW50O2ImJmQuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGMuaGFzaCgpfSxmdW5jdGlvbihhLGIpe2E9PT1iJiZcIlwiPT09YXx8amYoZnVuY3Rpb24oKXtkLiRldmFsQXN5bmMoZyl9KX0pO3JldHVybiBnfV19ZnVuY3Rpb24gYWYoKXt0aGlzLiRnZXQ9W1wiJCRyQUZcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYixhKXtyZXR1cm4gYi5zdXBwb3J0ZWQ/ZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSl9OlxuZnVuY3Rpb24oYil7cmV0dXJuIGEoYiwwLCExKX19XX1mdW5jdGlvbiBuZihiLGEsYyxkKXtmdW5jdGlvbiBlKGEpe3RyeXthLmFwcGx5KG51bGwsWmEuY2FsbChhcmd1bWVudHMsMSkpfWZpbmFsbHl7aWYodi0tLDA9PT12KWZvcig7dy5sZW5ndGg7KXRyeXt3LnBvcCgpKCl9Y2F0Y2goYil7Yy5lcnJvcihiKX19fWZ1bmN0aW9uIGYoYSxiKXsoZnVuY3Rpb24gTigpe3MoTCxmdW5jdGlvbihhKXthKCl9KTtDPWIoTixhKX0pKCl9ZnVuY3Rpb24gZygpe2goKTtsKCl9ZnVuY3Rpb24gaCgpe0E9Yi5oaXN0b3J5LnN0YXRlO0E9QihBKT9udWxsOkE7Z2EoQSxKKSYmKEE9Sik7Sj1BfWZ1bmN0aW9uIGwoKXtpZihFIT09bS51cmwoKXx8TyE9PUEpRT1tLnVybCgpLE89QSxzKFcsZnVuY3Rpb24oYSl7YShtLnVybCgpLEEpfSl9ZnVuY3Rpb24gayhhKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChhKX1jYXRjaChiKXtyZXR1cm4gYX19dmFyIG09dGhpcyxuPWFbMF0scT1iLmxvY2F0aW9uLFxudT1iLmhpc3Rvcnkscj1iLnNldFRpbWVvdXQsUD1iLmNsZWFyVGltZW91dCxwPXt9O20uaXNNb2NrPSExO3ZhciB2PTAsdz1bXTttLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Q9ZTttLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQ9ZnVuY3Rpb24oKXt2Kyt9O20ubm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cz1mdW5jdGlvbihhKXtzKEwsZnVuY3Rpb24oYSl7YSgpfSk7MD09PXY/YSgpOncucHVzaChhKX07dmFyIEw9W10sQzttLmFkZFBvbGxGbj1mdW5jdGlvbihhKXtCKEMpJiZmKDEwMCxyKTtMLnB1c2goYSk7cmV0dXJuIGF9O3ZhciBBLE8sRT1xLmhyZWYsVD1hLmZpbmQoXCJiYXNlXCIpLFg9bnVsbDtoKCk7Tz1BO20udXJsPWZ1bmN0aW9uKGEsYyxlKXtCKGUpJiYoZT1udWxsKTtxIT09Yi5sb2NhdGlvbiYmKHE9Yi5sb2NhdGlvbik7dSE9PWIuaGlzdG9yeSYmKHU9Yi5oaXN0b3J5KTtpZihhKXt2YXIgZj1PPT09ZTtpZihFPT09YSYmKCFkLmhpc3Rvcnl8fGYpKXJldHVybiBtO1xudmFyIGc9RSYmSGEoRSk9PT1IYShhKTtFPWE7Tz1lOyFkLmhpc3Rvcnl8fGcmJmY/KGd8fChYPWEpLGM/cS5yZXBsYWNlKGEpOmc/KGM9cSxlPWEuaW5kZXhPZihcIiNcIiksYT0tMT09PWU/XCJcIjphLnN1YnN0cihlKzEpLGMuaGFzaD1hKTpxLmhyZWY9YSk6KHVbYz9cInJlcGxhY2VTdGF0ZVwiOlwicHVzaFN0YXRlXCJdKGUsXCJcIixhKSxoKCksTz1BKTtyZXR1cm4gbX1yZXR1cm4gWHx8cS5ocmVmLnJlcGxhY2UoLyUyNy9nLFwiJ1wiKX07bS5zdGF0ZT1mdW5jdGlvbigpe3JldHVybiBBfTt2YXIgVz1bXSx3YT0hMSxKPW51bGw7bS5vblVybENoYW5nZT1mdW5jdGlvbihhKXtpZighd2Epe2lmKGQuaGlzdG9yeSlEKGIpLm9uKFwicG9wc3RhdGVcIixnKTtEKGIpLm9uKFwiaGFzaGNoYW5nZVwiLGcpO3dhPSEwfVcucHVzaChhKTtyZXR1cm4gYX07bS4kJGNoZWNrVXJsQ2hhbmdlPWw7bS5iYXNlSHJlZj1mdW5jdGlvbigpe3ZhciBhPVQuYXR0cihcImhyZWZcIik7cmV0dXJuIGE/YS5yZXBsYWNlKC9eKGh0dHBzP1xcOik/XFwvXFwvW15cXC9dKi8sXG5cIlwiKTpcIlwifTt2YXIgZmE9e30seT1cIlwiLGRhPW0uYmFzZUhyZWYoKTttLmNvb2tpZXM9ZnVuY3Rpb24oYSxiKXt2YXIgZCxlLGYsZztpZihhKWI9PT10P24uY29va2llPWVuY29kZVVSSUNvbXBvbmVudChhKStcIj07cGF0aD1cIitkYStcIjtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UXCI6RihiKSYmKGQ9KG4uY29va2llPWVuY29kZVVSSUNvbXBvbmVudChhKStcIj1cIitlbmNvZGVVUklDb21wb25lbnQoYikrXCI7cGF0aD1cIitkYSkubGVuZ3RoKzEsNDA5NjxkJiZjLndhcm4oXCJDb29raWUgJ1wiK2ErXCInIHBvc3NpYmx5IG5vdCBzZXQgb3Igb3ZlcmZsb3dlZCBiZWNhdXNlIGl0IHdhcyB0b28gbGFyZ2UgKFwiK2QrXCIgPiA0MDk2IGJ5dGVzKSFcIikpO2Vsc2V7aWYobi5jb29raWUhPT15KWZvcih5PW4uY29va2llLGQ9eS5zcGxpdChcIjsgXCIpLGZhPXt9LGY9MDtmPGQubGVuZ3RoO2YrKyllPWRbZl0sZz1lLmluZGV4T2YoXCI9XCIpLDA8ZyYmKGE9ayhlLnN1YnN0cmluZygwLGcpKSxcbmZhW2FdPT09dCYmKGZhW2FdPWsoZS5zdWJzdHJpbmcoZysxKSkpKTtyZXR1cm4gZmF9fTttLmRlZmVyPWZ1bmN0aW9uKGEsYil7dmFyIGM7disrO2M9cihmdW5jdGlvbigpe2RlbGV0ZSBwW2NdO2UoYSl9LGJ8fDApO3BbY109ITA7cmV0dXJuIGN9O20uZGVmZXIuY2FuY2VsPWZ1bmN0aW9uKGEpe3JldHVybiBwW2FdPyhkZWxldGUgcFthXSxQKGEpLGUoeiksITApOiExfX1mdW5jdGlvbiBEZSgpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkbG9nXCIsXCIkc25pZmZlclwiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oYixhLGMsZCl7cmV0dXJuIG5ldyBuZihiLGQsYSxjKX1dfWZ1bmN0aW9uIEVlKCl7dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYihiLGQpe2Z1bmN0aW9uIGUoYSl7YSE9biYmKHE/cT09YSYmKHE9YS5uKTpxPWEsZihhLm4sYS5wKSxmKGEsbiksbj1hLG4ubj1udWxsKX1mdW5jdGlvbiBmKGEsYil7YSE9YiYmKGEmJihhLnA9YiksYiYmKGIubj1hKSl9aWYoYiBpbiBhKXRocm93IFMoXCIkY2FjaGVGYWN0b3J5XCIpKFwiaWlkXCIsXG5iKTt2YXIgZz0wLGg9eCh7fSxkLHtpZDpifSksbD17fSxrPWQmJmQuY2FwYWNpdHl8fE51bWJlci5NQVhfVkFMVUUsbT17fSxuPW51bGwscT1udWxsO3JldHVybiBhW2JdPXtwdXQ6ZnVuY3Rpb24oYSxiKXtpZihrPE51bWJlci5NQVhfVkFMVUUpe3ZhciBjPW1bYV18fChtW2FdPXtrZXk6YX0pO2UoYyl9aWYoIUIoYikpcmV0dXJuIGEgaW4gbHx8ZysrLGxbYV09YixnPmsmJnRoaXMucmVtb3ZlKHEua2V5KSxifSxnZXQ6ZnVuY3Rpb24oYSl7aWYoazxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgYj1tW2FdO2lmKCFiKXJldHVybjtlKGIpfXJldHVybiBsW2FdfSxyZW1vdmU6ZnVuY3Rpb24oYSl7aWYoazxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgYj1tW2FdO2lmKCFiKXJldHVybjtiPT1uJiYobj1iLnApO2I9PXEmJihxPWIubik7ZihiLm4sYi5wKTtkZWxldGUgbVthXX1kZWxldGUgbFthXTtnLS19LHJlbW92ZUFsbDpmdW5jdGlvbigpe2w9e307Zz0wO209e307bj1xPW51bGx9LGRlc3Ryb3k6ZnVuY3Rpb24oKXttPVxuaD1sPW51bGw7ZGVsZXRlIGFbYl19LGluZm86ZnVuY3Rpb24oKXtyZXR1cm4geCh7fSxoLHtzaXplOmd9KX19fXZhciBhPXt9O2IuaW5mbz1mdW5jdGlvbigpe3ZhciBiPXt9O3MoYSxmdW5jdGlvbihhLGUpe2JbZV09YS5pbmZvKCl9KTtyZXR1cm4gYn07Yi5nZXQ9ZnVuY3Rpb24oYil7cmV0dXJuIGFbYl19O3JldHVybiBifX1mdW5jdGlvbiBWZSgpe3RoaXMuJGdldD1bXCIkY2FjaGVGYWN0b3J5XCIsZnVuY3Rpb24oYil7cmV0dXJuIGIoXCJ0ZW1wbGF0ZXNcIil9XX1mdW5jdGlvbiB4YyhiLGEpe2Z1bmN0aW9uIGMoYSxiKXt2YXIgYz0vXlxccyooW0AmXXw9KFxcKj8pKShcXD8/KVxccyooXFx3KilcXHMqJC8sZD17fTtzKGEsZnVuY3Rpb24oYSxlKXt2YXIgZj1hLm1hdGNoKGMpO2lmKCFmKXRocm93IGphKFwiaXNjcFwiLGIsZSxhKTtkW2VdPXttb2RlOmZbMV1bMF0sY29sbGVjdGlvbjpcIipcIj09PWZbMl0sb3B0aW9uYWw6XCI/XCI9PT1mWzNdLGF0dHJOYW1lOmZbNF18fGV9fSk7cmV0dXJuIGR9dmFyIGQ9XG57fSxlPS9eXFxzKmRpcmVjdGl2ZVxcOlxccyooW1xcd1xcLV0rKVxccysoLiopJC8sZj0vKChbXFx3XFwtXSspKD86XFw6KFteO10rKSk/Oz8pLyxnPUdkKFwibmdTcmMsbmdTcmNzZXQsc3JjLHNyY3NldFwiKSxoPS9eKD86KFxcXlxcXj8pPyhcXD8pPyhcXF5cXF4/KT8pPy8sbD0vXihvblthLXpdK3xmb3JtYWN0aW9uKSQvO3RoaXMuZGlyZWN0aXZlPWZ1bmN0aW9uIG4oYSxlKXtNYShhLFwiZGlyZWN0aXZlXCIpO0YoYSk/KFNiKGUsXCJkaXJlY3RpdmVGYWN0b3J5XCIpLGQuaGFzT3duUHJvcGVydHkoYSl8fChkW2FdPVtdLGIuZmFjdG9yeShhK1wiRGlyZWN0aXZlXCIsW1wiJGluamVjdG9yXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLGZ1bmN0aW9uKGIsZSl7dmFyIGY9W107cyhkW2FdLGZ1bmN0aW9uKGQsZyl7dHJ5e3ZhciBoPWIuaW52b2tlKGQpO0coaCk/aD17Y29tcGlsZTplYShoKX06IWguY29tcGlsZSYmaC5saW5rJiYoaC5jb21waWxlPWVhKGgubGluaykpO2gucHJpb3JpdHk9aC5wcmlvcml0eXx8MDtoLmluZGV4PVxuZztoLm5hbWU9aC5uYW1lfHxhO2gucmVxdWlyZT1oLnJlcXVpcmV8fGguY29udHJvbGxlciYmaC5uYW1lO2gucmVzdHJpY3Q9aC5yZXN0cmljdHx8XCJFQVwiO0koaC5zY29wZSkmJihoLiQkaXNvbGF0ZUJpbmRpbmdzPWMoaC5zY29wZSxoLm5hbWUpKTtmLnB1c2goaCl9Y2F0Y2gobCl7ZShsKX19KTtyZXR1cm4gZn1dKSksZFthXS5wdXNoKGUpKTpzKGEsbGMobikpO3JldHVybiB0aGlzfTt0aGlzLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0PWZ1bmN0aW9uKGIpe3JldHVybiB5KGIpPyhhLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0KGIpLHRoaXMpOmEuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QoKX07dGhpcy5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24oYil7cmV0dXJuIHkoYik/KGEuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0KGIpLHRoaXMpOmEuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0KCl9O3ZhciBrPSEwO3RoaXMuZGVidWdJbmZvRW5hYmxlZD1cbmZ1bmN0aW9uKGEpe3JldHVybiB5KGEpPyhrPWEsdGhpcyk6a307dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLFwiJGludGVycG9sYXRlXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLFwiJHRlbXBsYXRlUmVxdWVzdFwiLFwiJHBhcnNlXCIsXCIkY29udHJvbGxlclwiLFwiJHJvb3RTY29wZVwiLFwiJGRvY3VtZW50XCIsXCIkc2NlXCIsXCIkYW5pbWF0ZVwiLFwiJCRzYW5pdGl6ZVVyaVwiLGZ1bmN0aW9uKGEsYixjLHIsUCxwLHYsdyxMLEMsQSl7ZnVuY3Rpb24gTyhhLGIpe3RyeXthLmFkZENsYXNzKGIpfWNhdGNoKGMpe319ZnVuY3Rpb24gRShhLGIsYyxkLGUpe2EgaW5zdGFuY2VvZiBEfHwoYT1EKGEpKTtzKGEsZnVuY3Rpb24oYixjKXtiLm5vZGVUeXBlPT1xYiYmYi5ub2RlVmFsdWUubWF0Y2goL1xcUysvKSYmKGFbY109RChiKS53cmFwKFwiPHNwYW4+PC9zcGFuPlwiKS5wYXJlbnQoKVswXSl9KTt2YXIgZj1UKGEsYixhLGMsZCxlKTtFLiQkYWRkU2NvcGVDbGFzcyhhKTt2YXIgZz1udWxsO3JldHVybiBmdW5jdGlvbihiLGMsXG5kKXtTYihiLFwic2NvcGVcIik7ZD1kfHx7fTt2YXIgZT1kLnBhcmVudEJvdW5kVHJhbnNjbHVkZUZuLGg9ZC50cmFuc2NsdWRlQ29udHJvbGxlcnM7ZD1kLmZ1dHVyZVBhcmVudEVsZW1lbnQ7ZSYmZS4kJGJvdW5kVHJhbnNjbHVkZSYmKGU9ZS4kJGJvdW5kVHJhbnNjbHVkZSk7Z3x8KGc9KGQ9ZCYmZFswXSk/XCJmb3JlaWdub2JqZWN0XCIhPT11YShkKSYmZC50b1N0cmluZygpLm1hdGNoKC9TVkcvKT9cInN2Z1wiOlwiaHRtbFwiOlwiaHRtbFwiKTtkPVwiaHRtbFwiIT09Zz9EKFhiKGcsRChcIjxkaXY+XCIpLmFwcGVuZChhKS5odG1sKCkpKTpjP0xhLmNsb25lLmNhbGwoYSk6YTtpZihoKWZvcih2YXIgbCBpbiBoKWQuZGF0YShcIiRcIitsK1wiQ29udHJvbGxlclwiLGhbbF0uaW5zdGFuY2UpO0UuJCRhZGRTY29wZUluZm8oZCxiKTtjJiZjKGQsYik7ZiYmZihiLGQsZCxlKTtyZXR1cm4gZH19ZnVuY3Rpb24gVChhLGIsYyxkLGUsZil7ZnVuY3Rpb24gZyhhLGMsZCxlKXt2YXIgZixsLGsscSxuLHAsdztpZihyKWZvcih3PVxuQXJyYXkoYy5sZW5ndGgpLHE9MDtxPGgubGVuZ3RoO3ErPTMpZj1oW3FdLHdbZl09Y1tmXTtlbHNlIHc9YztxPTA7Zm9yKG49aC5sZW5ndGg7cTxuOylsPXdbaFtxKytdXSxjPWhbcSsrXSxmPWhbcSsrXSxjPyhjLnNjb3BlPyhrPWEuJG5ldygpLEUuJCRhZGRTY29wZUluZm8oRChsKSxrKSk6az1hLHA9Yy50cmFuc2NsdWRlT25UaGlzRWxlbWVudD9YKGEsYy50cmFuc2NsdWRlLGUsYy5lbGVtZW50VHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQpOiFjLnRlbXBsYXRlT25UaGlzRWxlbWVudCYmZT9lOiFlJiZiP1goYSxiKTpudWxsLGMoZixrLGwsZCxwKSk6ZiYmZihhLGwuY2hpbGROb2Rlcyx0LGUpfWZvcih2YXIgaD1bXSxsLGsscSxuLHIscD0wO3A8YS5sZW5ndGg7cCsrKXtsPW5ldyBZYjtrPVcoYVtwXSxbXSxsLDA9PT1wP2Q6dCxlKTsoZj1rLmxlbmd0aD9mYShrLGFbcF0sbCxiLGMsbnVsbCxbXSxbXSxmKTpudWxsKSYmZi5zY29wZSYmRS4kJGFkZFNjb3BlQ2xhc3MobC4kJGVsZW1lbnQpO1xubD1mJiZmLnRlcm1pbmFsfHwhKHE9YVtwXS5jaGlsZE5vZGVzKXx8IXEubGVuZ3RoP251bGw6VChxLGY/KGYudHJhbnNjbHVkZU9uVGhpc0VsZW1lbnR8fCFmLnRlbXBsYXRlT25UaGlzRWxlbWVudCkmJmYudHJhbnNjbHVkZTpiKTtpZihmfHxsKWgucHVzaChwLGYsbCksbj0hMCxyPXJ8fGY7Zj1udWxsfXJldHVybiBuP2c6bnVsbH1mdW5jdGlvbiBYKGEsYixjLGQpe3JldHVybiBmdW5jdGlvbihkLGUsZixnLGgpe2R8fChkPWEuJG5ldyghMSxoKSxkLiQkdHJhbnNjbHVkZWQ9ITApO3JldHVybiBiKGQsZSx7cGFyZW50Qm91bmRUcmFuc2NsdWRlRm46Yyx0cmFuc2NsdWRlQ29udHJvbGxlcnM6ZixmdXR1cmVQYXJlbnRFbGVtZW50Omd9KX19ZnVuY3Rpb24gVyhhLGIsYyxkLGcpe3ZhciBoPWMuJGF0dHIsbDtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSBvYTpkYShiLHlhKHVhKGEpKSxcIkVcIixkLGcpO2Zvcih2YXIgayxxLG4scj1hLmF0dHJpYnV0ZXMscD0wLHc9ciYmci5sZW5ndGg7cDxcbnc7cCsrKXt2YXIgUD0hMSxMPSExO2s9cltwXTtsPWsubmFtZTtxPVUoay52YWx1ZSk7az15YShsKTtpZihuPWdiLnRlc3QoaykpbD1sLnJlcGxhY2UoU2MsXCJcIikuc3Vic3RyKDgpLnJlcGxhY2UoL18oLikvZyxmdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9KTt2YXIgdT1rLnJlcGxhY2UoLyhTdGFydHxFbmQpJC8sXCJcIik7Qih1KSYmaz09PXUrXCJTdGFydFwiJiYoUD1sLEw9bC5zdWJzdHIoMCxsLmxlbmd0aC01KStcImVuZFwiLGw9bC5zdWJzdHIoMCxsLmxlbmd0aC02KSk7az15YShsLnRvTG93ZXJDYXNlKCkpO2hba109bDtpZihufHwhYy5oYXNPd25Qcm9wZXJ0eShrKSljW2tdPXEsTWMoYSxrKSYmKGNba109ITApO1BhKGEsYixxLGssbik7ZGEoYixrLFwiQVwiLGQsZyxQLEwpfWE9YS5jbGFzc05hbWU7SShhKSYmKGE9YS5hbmltVmFsKTtpZihGKGEpJiZcIlwiIT09YSlmb3IoO2w9Zi5leGVjKGEpOylrPXlhKGxbMl0pLGRhKGIsayxcIkNcIixkLGcpJiYoY1trXT1VKGxbM10pKSxcbmE9YS5zdWJzdHIobC5pbmRleCtsWzBdLmxlbmd0aCk7YnJlYWs7Y2FzZSBxYjpNKGIsYS5ub2RlVmFsdWUpO2JyZWFrO2Nhc2UgODp0cnl7aWYobD1lLmV4ZWMoYS5ub2RlVmFsdWUpKWs9eWEobFsxXSksZGEoYixrLFwiTVwiLGQsZykmJihjW2tdPVUobFsyXSkpfWNhdGNoKHYpe319Yi5zb3J0KE4pO3JldHVybiBifWZ1bmN0aW9uIHdhKGEsYixjKXt2YXIgZD1bXSxlPTA7aWYoYiYmYS5oYXNBdHRyaWJ1dGUmJmEuaGFzQXR0cmlidXRlKGIpKXtkb3tpZighYSl0aHJvdyBqYShcInV0ZXJkaXJcIixiLGMpO2Eubm9kZVR5cGU9PW9hJiYoYS5oYXNBdHRyaWJ1dGUoYikmJmUrKyxhLmhhc0F0dHJpYnV0ZShjKSYmZS0tKTtkLnB1c2goYSk7YT1hLm5leHRTaWJsaW5nfXdoaWxlKDA8ZSl9ZWxzZSBkLnB1c2goYSk7cmV0dXJuIEQoZCl9ZnVuY3Rpb24gSihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmLGcsaCl7ZT13YShlWzBdLGIsYyk7cmV0dXJuIGEoZCxlLGYsZyxoKX19ZnVuY3Rpb24gZmEoYSxcbmQsZSxmLGcsbCxrLG4scil7ZnVuY3Rpb24gdyhhLGIsYyxkKXtpZihhKXtjJiYoYT1KKGEsYyxkKSk7YS5yZXF1aXJlPUsucmVxdWlyZTthLmRpcmVjdGl2ZU5hbWU9eDtpZihUPT09S3x8Sy4kJGlzb2xhdGVTY29wZSlhPVooYSx7aXNvbGF0ZVNjb3BlOiEwfSk7ay5wdXNoKGEpfWlmKGIpe2MmJihiPUooYixjLGQpKTtiLnJlcXVpcmU9Sy5yZXF1aXJlO2IuZGlyZWN0aXZlTmFtZT14O2lmKFQ9PT1LfHxLLiQkaXNvbGF0ZVNjb3BlKWI9WihiLHtpc29sYXRlU2NvcGU6ITB9KTtuLnB1c2goYil9fWZ1bmN0aW9uIEwoYSxiLGMsZCl7dmFyIGUsZj1cImRhdGFcIixnPSExLGw9YyxrO2lmKEYoYikpe2s9Yi5tYXRjaChoKTtiPWIuc3Vic3RyaW5nKGtbMF0ubGVuZ3RoKTtrWzNdJiYoa1sxXT9rWzNdPW51bGw6a1sxXT1rWzNdKTtcIl5cIj09PWtbMV0/Zj1cImluaGVyaXRlZERhdGFcIjpcIl5eXCI9PT1rWzFdJiYoZj1cImluaGVyaXRlZERhdGFcIixsPWMucGFyZW50KCkpO1wiP1wiPT09a1syXSYmKGc9ITApO1xuZT1udWxsO2QmJlwiZGF0YVwiPT09ZiYmKGU9ZFtiXSkmJihlPWUuaW5zdGFuY2UpO2U9ZXx8bFtmXShcIiRcIitiK1wiQ29udHJvbGxlclwiKTtpZighZSYmIWcpdGhyb3cgamEoXCJjdHJlcVwiLGIsYSk7cmV0dXJuIGV8fG51bGx9SChiKSYmKGU9W10scyhiLGZ1bmN0aW9uKGIpe2UucHVzaChMKGEsYixjLGQpKX0pKTtyZXR1cm4gZX1mdW5jdGlvbiB2KGEsYyxmLGcsaCl7ZnVuY3Rpb24gbChhLGIsYyl7dmFyIGQ7VmEoYSl8fChjPWIsYj1hLGE9dCk7eiYmKGQ9Tyk7Y3x8KGM9ej9XLnBhcmVudCgpOlcpO3JldHVybiBoKGEsYixkLGMsd2EpfXZhciByLHcsdSxBLE8sZmIsVyxKO2Q9PT1mPyhKPWUsVz1lLiQkZWxlbWVudCk6KFc9RChmKSxKPW5ldyBZYihXLGUpKTtUJiYoQT1jLiRuZXcoITApKTtoJiYoZmI9bCxmYi4kJGJvdW5kVHJhbnNjbHVkZT1oKTtDJiYoWD17fSxPPXt9LHMoQyxmdW5jdGlvbihhKXt2YXIgYj17JHNjb3BlOmE9PT1UfHxhLiQkaXNvbGF0ZVNjb3BlP0E6YywkZWxlbWVudDpXLFxuJGF0dHJzOkosJHRyYW5zY2x1ZGU6ZmJ9O3U9YS5jb250cm9sbGVyO1wiQFwiPT11JiYodT1KW2EubmFtZV0pO2I9cCh1LGIsITAsYS5jb250cm9sbGVyQXMpO09bYS5uYW1lXT1iO3p8fFcuZGF0YShcIiRcIithLm5hbWUrXCJDb250cm9sbGVyXCIsYi5pbnN0YW5jZSk7WFthLm5hbWVdPWJ9KSk7aWYoVCl7RS4kJGFkZFNjb3BlSW5mbyhXLEEsITAsIShrYSYmKGthPT09VHx8a2E9PT1ULiQkb3JpZ2luYWxEaXJlY3RpdmUpKSk7RS4kJGFkZFNjb3BlQ2xhc3MoVywhMCk7Zz1YJiZYW1QubmFtZV07dmFyIHhhPUE7ZyYmZy5pZGVudGlmaWVyJiYhMD09PVQuYmluZFRvQ29udHJvbGxlciYmKHhhPWcuaW5zdGFuY2UpO3MoQS4kJGlzb2xhdGVCaW5kaW5ncz1ULiQkaXNvbGF0ZUJpbmRpbmdzLGZ1bmN0aW9uKGEsZCl7dmFyIGU9YS5hdHRyTmFtZSxmPWEub3B0aW9uYWwsZyxoLGwsaztzd2l0Y2goYS5tb2RlKXtjYXNlIFwiQFwiOkouJG9ic2VydmUoZSxmdW5jdGlvbihhKXt4YVtkXT1hfSk7Si4kJG9ic2VydmVyc1tlXS4kJHNjb3BlPVxuYztKW2VdJiYoeGFbZF09YihKW2VdKShjKSk7YnJlYWs7Y2FzZSBcIj1cIjppZihmJiYhSltlXSlicmVhaztoPVAoSltlXSk7az1oLmxpdGVyYWw/Z2E6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ8fGEhPT1hJiZiIT09Yn07bD1oLmFzc2lnbnx8ZnVuY3Rpb24oKXtnPXhhW2RdPWgoYyk7dGhyb3cgamEoXCJub25hc3NpZ25cIixKW2VdLFQubmFtZSk7fTtnPXhhW2RdPWgoYyk7Zj1mdW5jdGlvbihhKXtrKGEseGFbZF0pfHwoayhhLGcpP2woYyxhPXhhW2RdKTp4YVtkXT1hKTtyZXR1cm4gZz1hfTtmLiRzdGF0ZWZ1bD0hMDtmPWEuY29sbGVjdGlvbj9jLiR3YXRjaENvbGxlY3Rpb24oSltlXSxmKTpjLiR3YXRjaChQKEpbZV0sZiksbnVsbCxoLmxpdGVyYWwpO0EuJG9uKFwiJGRlc3Ryb3lcIixmKTticmVhaztjYXNlIFwiJlwiOmg9UChKW2VdKSx4YVtkXT1mdW5jdGlvbihhKXtyZXR1cm4gaChjLGEpfX19KX1YJiYocyhYLGZ1bmN0aW9uKGEpe2EoKX0pLFg9bnVsbCk7Zz0wO2ZvcihyPWsubGVuZ3RoO2c8XG5yO2crKyl3PWtbZ10sJCh3LHcuaXNvbGF0ZVNjb3BlP0E6YyxXLEosdy5yZXF1aXJlJiZMKHcuZGlyZWN0aXZlTmFtZSx3LnJlcXVpcmUsVyxPKSxmYik7dmFyIHdhPWM7VCYmKFQudGVtcGxhdGV8fG51bGw9PT1ULnRlbXBsYXRlVXJsKSYmKHdhPUEpO2EmJmEod2EsZi5jaGlsZE5vZGVzLHQsaCk7Zm9yKGc9bi5sZW5ndGgtMTswPD1nO2ctLSl3PW5bZ10sJCh3LHcuaXNvbGF0ZVNjb3BlP0E6YyxXLEosdy5yZXF1aXJlJiZMKHcuZGlyZWN0aXZlTmFtZSx3LnJlcXVpcmUsVyxPKSxmYil9cj1yfHx7fTtmb3IodmFyIEE9LU51bWJlci5NQVhfVkFMVUUsTyxDPXIuY29udHJvbGxlckRpcmVjdGl2ZXMsWCxUPXIubmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLGthPXIudGVtcGxhdGVEaXJlY3RpdmUsZmE9ci5ub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlLGRhPSExLEI9ITEsej1yLmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlLGFhPWUuJCRlbGVtZW50PUQoZCksSyx4LE4sQWE9ZixcblEsTT0wLFI9YS5sZW5ndGg7TTxSO00rKyl7Sz1hW01dO3ZhciBQYT1LLiQkc3RhcnQsZ2I9Sy4kJGVuZDtQYSYmKGFhPXdhKGQsUGEsZ2IpKTtOPXQ7aWYoQT5LLnByaW9yaXR5KWJyZWFrO2lmKE49Sy5zY29wZSlLLnRlbXBsYXRlVXJsfHwoSShOKT8oT2EoXCJuZXcvaXNvbGF0ZWQgc2NvcGVcIixUfHxPLEssYWEpLFQ9Syk6T2EoXCJuZXcvaXNvbGF0ZWQgc2NvcGVcIixULEssYWEpKSxPPU98fEs7eD1LLm5hbWU7IUsudGVtcGxhdGVVcmwmJksuY29udHJvbGxlciYmKE49Sy5jb250cm9sbGVyLEM9Q3x8e30sT2EoXCInXCIreCtcIicgY29udHJvbGxlclwiLENbeF0sSyxhYSksQ1t4XT1LKTtpZihOPUsudHJhbnNjbHVkZSlkYT0hMCxLLiQkdGxifHwoT2EoXCJ0cmFuc2NsdXNpb25cIixmYSxLLGFhKSxmYT1LKSxcImVsZW1lbnRcIj09Tj8oej0hMCxBPUsucHJpb3JpdHksTj1hYSxhYT1lLiQkZWxlbWVudD1EKFkuY3JlYXRlQ29tbWVudChcIiBcIit4K1wiOiBcIitlW3hdK1wiIFwiKSksZD1hYVswXSxWKGcsWmEuY2FsbChOLFxuMCksZCksQWE9RShOLGYsQSxsJiZsLm5hbWUse25vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmU6ZmF9KSk6KE49RChWYihkKSkuY29udGVudHMoKSxhYS5lbXB0eSgpLEFhPUUoTixmKSk7aWYoSy50ZW1wbGF0ZSlpZihCPSEwLE9hKFwidGVtcGxhdGVcIixrYSxLLGFhKSxrYT1LLE49RyhLLnRlbXBsYXRlKT9LLnRlbXBsYXRlKGFhLGUpOksudGVtcGxhdGUsTj1UYyhOKSxLLnJlcGxhY2Upe2w9SztOPVRiLnRlc3QoTik/VWMoWGIoSy50ZW1wbGF0ZU5hbWVzcGFjZSxVKE4pKSk6W107ZD1OWzBdO2lmKDEhPU4ubGVuZ3RofHxkLm5vZGVUeXBlIT09b2EpdGhyb3cgamEoXCJ0cGxydFwiLHgsXCJcIik7VihnLGFhLGQpO1I9eyRhdHRyOnt9fTtOPVcoZCxbXSxSKTt2YXIgYmE9YS5zcGxpY2UoTSsxLGEubGVuZ3RoLShNKzEpKTtUJiZ5KE4pO2E9YS5jb25jYXQoTikuY29uY2F0KGJhKTtSYyhlLFIpO1I9YS5sZW5ndGh9ZWxzZSBhYS5odG1sKE4pO2lmKEsudGVtcGxhdGVVcmwpQj0hMCxPYShcInRlbXBsYXRlXCIsXG5rYSxLLGFhKSxrYT1LLEsucmVwbGFjZSYmKGw9Syksdj1TKGEuc3BsaWNlKE0sYS5sZW5ndGgtTSksYWEsZSxnLGRhJiZBYSxrLG4se2NvbnRyb2xsZXJEaXJlY3RpdmVzOkMsbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlOlQsdGVtcGxhdGVEaXJlY3RpdmU6a2Esbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTpmYX0pLFI9YS5sZW5ndGg7ZWxzZSBpZihLLmNvbXBpbGUpdHJ5e1E9Sy5jb21waWxlKGFhLGUsQWEpLEcoUSk/dyhudWxsLFEsUGEsZ2IpOlEmJncoUS5wcmUsUS5wb3N0LFBhLGdiKX1jYXRjaChvZil7YyhvZix2YShhYSkpfUsudGVybWluYWwmJih2LnRlcm1pbmFsPSEwLEE9TWF0aC5tYXgoQSxLLnByaW9yaXR5KSl9di5zY29wZT1PJiYhMD09PU8uc2NvcGU7di50cmFuc2NsdWRlT25UaGlzRWxlbWVudD1kYTt2LmVsZW1lbnRUcmFuc2NsdWRlT25UaGlzRWxlbWVudD16O3YudGVtcGxhdGVPblRoaXNFbGVtZW50PUI7di50cmFuc2NsdWRlPUFhO3IuaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmU9XG56O3JldHVybiB2fWZ1bmN0aW9uIHkoYSl7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7YisrKWFbYl09UGIoYVtiXSx7JCRpc29sYXRlU2NvcGU6ITB9KX1mdW5jdGlvbiBkYShiLGUsZixnLGgsbCxrKXtpZihlPT09aClyZXR1cm4gbnVsbDtoPW51bGw7aWYoZC5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHE7ZT1hLmdldChlK1wiRGlyZWN0aXZlXCIpO2Zvcih2YXIgcj0wLHA9ZS5sZW5ndGg7cjxwO3IrKyl0cnl7cT1lW3JdLChnPT09dHx8Zz5xLnByaW9yaXR5KSYmLTEhPXEucmVzdHJpY3QuaW5kZXhPZihmKSYmKGwmJihxPVBiKHEseyQkc3RhcnQ6bCwkJGVuZDprfSkpLGIucHVzaChxKSxoPXEpfWNhdGNoKHcpe2Modyl9fXJldHVybiBofWZ1bmN0aW9uIEIoYil7aWYoZC5oYXNPd25Qcm9wZXJ0eShiKSlmb3IodmFyIGM9YS5nZXQoYitcIkRpcmVjdGl2ZVwiKSxlPTAsZj1jLmxlbmd0aDtlPGY7ZSsrKWlmKGI9Y1tlXSxiLm11bHRpRWxlbWVudClyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBSYyhhLFxuYil7dmFyIGM9Yi4kYXR0cixkPWEuJGF0dHIsZT1hLiQkZWxlbWVudDtzKGEsZnVuY3Rpb24oZCxlKXtcIiRcIiE9ZS5jaGFyQXQoMCkmJihiW2VdJiZiW2VdIT09ZCYmKGQrPShcInN0eWxlXCI9PT1lP1wiO1wiOlwiIFwiKStiW2VdKSxhLiRzZXQoZSxkLCEwLGNbZV0pKX0pO3MoYixmdW5jdGlvbihiLGYpe1wiY2xhc3NcIj09Zj8oTyhlLGIpLGFbXCJjbGFzc1wiXT0oYVtcImNsYXNzXCJdP2FbXCJjbGFzc1wiXStcIiBcIjpcIlwiKStiKTpcInN0eWxlXCI9PWY/KGUuYXR0cihcInN0eWxlXCIsZS5hdHRyKFwic3R5bGVcIikrXCI7XCIrYiksYS5zdHlsZT0oYS5zdHlsZT9hLnN0eWxlK1wiO1wiOlwiXCIpK2IpOlwiJFwiPT1mLmNoYXJBdCgwKXx8YS5oYXNPd25Qcm9wZXJ0eShmKXx8KGFbZl09YixkW2ZdPWNbZl0pfSl9ZnVuY3Rpb24gUyhhLGIsYyxkLGUsZixnLGgpe3ZhciBsPVtdLGsscSxuPWJbMF0scD1hLnNoaWZ0KCksdz1QYihwLHt0ZW1wbGF0ZVVybDpudWxsLHRyYW5zY2x1ZGU6bnVsbCxyZXBsYWNlOm51bGwsJCRvcmlnaW5hbERpcmVjdGl2ZTpwfSksXG5QPUcocC50ZW1wbGF0ZVVybCk/cC50ZW1wbGF0ZVVybChiLGMpOnAudGVtcGxhdGVVcmwsdT1wLnRlbXBsYXRlTmFtZXNwYWNlO2IuZW1wdHkoKTtyKEwuZ2V0VHJ1c3RlZFJlc291cmNlVXJsKFApKS50aGVuKGZ1bmN0aW9uKHIpe3ZhciBMLHY7cj1UYyhyKTtpZihwLnJlcGxhY2Upe3I9VGIudGVzdChyKT9VYyhYYih1LFUocikpKTpbXTtMPXJbMF07aWYoMSE9ci5sZW5ndGh8fEwubm9kZVR5cGUhPT1vYSl0aHJvdyBqYShcInRwbHJ0XCIscC5uYW1lLFApO3I9eyRhdHRyOnt9fTtWKGQsYixMKTt2YXIgQT1XKEwsW10scik7SShwLnNjb3BlKSYmeShBKTthPUEuY29uY2F0KGEpO1JjKGMscil9ZWxzZSBMPW4sYi5odG1sKHIpO2EudW5zaGlmdCh3KTtrPWZhKGEsTCxjLGUsYixwLGYsZyxoKTtzKGQsZnVuY3Rpb24oYSxjKXthPT1MJiYoZFtjXT1iWzBdKX0pO2ZvcihxPVQoYlswXS5jaGlsZE5vZGVzLGUpO2wubGVuZ3RoOyl7cj1sLnNoaWZ0KCk7dj1sLnNoaWZ0KCk7dmFyIEM9bC5zaGlmdCgpLFxuRT1sLnNoaWZ0KCksQT1iWzBdO2lmKCFyLiQkZGVzdHJveWVkKXtpZih2IT09bil7dmFyIEo9di5jbGFzc05hbWU7aC5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSYmcC5yZXBsYWNlfHwoQT1WYihMKSk7VihDLEQodiksQSk7TyhEKEEpLEopfXY9ay50cmFuc2NsdWRlT25UaGlzRWxlbWVudD9YKHIsay50cmFuc2NsdWRlLEUpOkU7ayhxLHIsQSxkLHYpfX1sPW51bGx9KTtyZXR1cm4gZnVuY3Rpb24oYSxiLGMsZCxlKXthPWU7Yi4kJGRlc3Ryb3llZHx8KGw/bC5wdXNoKGIsYyxkLGEpOihrLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50JiYoYT1YKGIsay50cmFuc2NsdWRlLGUpKSxrKHEsYixjLGQsYSkpKX19ZnVuY3Rpb24gTihhLGIpe3ZhciBjPWIucHJpb3JpdHktYS5wcmlvcml0eTtyZXR1cm4gMCE9PWM/YzphLm5hbWUhPT1iLm5hbWU/YS5uYW1lPGIubmFtZT8tMToxOmEuaW5kZXgtYi5pbmRleH1mdW5jdGlvbiBPYShhLGIsYyxkKXtpZihiKXRocm93IGphKFwibXVsdGlkaXJcIixcbmIubmFtZSxjLm5hbWUsYSx2YShkKSk7fWZ1bmN0aW9uIE0oYSxjKXt2YXIgZD1iKGMsITApO2QmJmEucHVzaCh7cHJpb3JpdHk6MCxjb21waWxlOmZ1bmN0aW9uKGEpe2E9YS5wYXJlbnQoKTt2YXIgYj0hIWEubGVuZ3RoO2ImJkUuJCRhZGRCaW5kaW5nQ2xhc3MoYSk7cmV0dXJuIGZ1bmN0aW9uKGEsYyl7dmFyIGU9Yy5wYXJlbnQoKTtifHxFLiQkYWRkQmluZGluZ0NsYXNzKGUpO0UuJCRhZGRCaW5kaW5nSW5mbyhlLGQuZXhwcmVzc2lvbnMpO2EuJHdhdGNoKGQsZnVuY3Rpb24oYSl7Y1swXS5ub2RlVmFsdWU9YX0pfX19KX1mdW5jdGlvbiBYYihhLGIpe2E9UShhfHxcImh0bWxcIik7c3dpdGNoKGEpe2Nhc2UgXCJzdmdcIjpjYXNlIFwibWF0aFwiOnZhciBjPVkuY3JlYXRlRWxlbWVudChcImRpdlwiKTtjLmlubmVySFRNTD1cIjxcIithK1wiPlwiK2IrXCI8L1wiK2ErXCI+XCI7cmV0dXJuIGMuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzO2RlZmF1bHQ6cmV0dXJuIGJ9fWZ1bmN0aW9uIFIoYSxiKXtpZihcInNyY2RvY1wiPT1cbmIpcmV0dXJuIEwuSFRNTDt2YXIgYz11YShhKTtpZihcInhsaW5rSHJlZlwiPT1ifHxcImZvcm1cIj09YyYmXCJhY3Rpb25cIj09Ynx8XCJpbWdcIiE9YyYmKFwic3JjXCI9PWJ8fFwibmdTcmNcIj09YikpcmV0dXJuIEwuUkVTT1VSQ0VfVVJMfWZ1bmN0aW9uIFBhKGEsYyxkLGUsZil7dmFyIGg9UihhLGUpO2Y9Z1tlXXx8Zjt2YXIgaz1iKGQsITAsaCxmKTtpZihrKXtpZihcIm11bHRpcGxlXCI9PT1lJiZcInNlbGVjdFwiPT09dWEoYSkpdGhyb3cgamEoXCJzZWxtdWx0aVwiLHZhKGEpKTtjLnB1c2goe3ByaW9yaXR5OjEwMCxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihhLGMsZyl7Yz1nLiQkb2JzZXJ2ZXJzfHwoZy4kJG9ic2VydmVycz17fSk7aWYobC50ZXN0KGUpKXRocm93IGphKFwibm9kb21ldmVudHNcIik7dmFyIG49Z1tlXTtuIT09ZCYmKGs9biYmYihuLCEwLGgsZiksZD1uKTtrJiYoZ1tlXT1rKGEpLChjW2VdfHwoY1tlXT1bXSkpLiQkaW50ZXI9ITAsKGcuJCRvYnNlcnZlcnMmJmcuJCRvYnNlcnZlcnNbZV0uJCRzY29wZXx8XG5hKS4kd2F0Y2goayxmdW5jdGlvbihhLGIpe1wiY2xhc3NcIj09PWUmJmEhPWI/Zy4kdXBkYXRlQ2xhc3MoYSxiKTpnLiRzZXQoZSxhKX0pKX19fX0pfX1mdW5jdGlvbiBWKGEsYixjKXt2YXIgZD1iWzBdLGU9Yi5sZW5ndGgsZj1kLnBhcmVudE5vZGUsZyxoO2lmKGEpZm9yKGc9MCxoPWEubGVuZ3RoO2c8aDtnKyspaWYoYVtnXT09ZCl7YVtnKytdPWM7aD1nK2UtMTtmb3IodmFyIGw9YS5sZW5ndGg7ZzxsO2crKyxoKyspaDxsP2FbZ109YVtoXTpkZWxldGUgYVtnXTthLmxlbmd0aC09ZS0xO2EuY29udGV4dD09PWQmJihhLmNvbnRleHQ9Yyk7YnJlYWt9ZiYmZi5yZXBsYWNlQ2hpbGQoYyxkKTthPVkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2EuYXBwZW5kQ2hpbGQoZCk7RChjKS5kYXRhKEQoZCkuZGF0YSgpKTtzYT8oUmI9ITAsc2EuY2xlYW5EYXRhKFtkXSkpOmRlbGV0ZSBELmNhY2hlW2RbRC5leHBhbmRvXV07ZD0xO2ZvcihlPWIubGVuZ3RoO2Q8ZTtkKyspZj1iW2RdLEQoZikucmVtb3ZlKCksXG5hLmFwcGVuZENoaWxkKGYpLGRlbGV0ZSBiW2RdO2JbMF09YztiLmxlbmd0aD0xfWZ1bmN0aW9uIFooYSxiKXtyZXR1cm4geChmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYSxiKX1mdW5jdGlvbiAkKGEsYixkLGUsZixnKXt0cnl7YShiLGQsZSxmLGcpfWNhdGNoKGgpe2MoaCx2YShkKSl9fXZhciBZYj1mdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPU9iamVjdC5rZXlzKGIpLGQsZSxmO2Q9MDtmb3IoZT1jLmxlbmd0aDtkPGU7ZCsrKWY9Y1tkXSx0aGlzW2ZdPWJbZl19ZWxzZSB0aGlzLiRhdHRyPXt9O3RoaXMuJCRlbGVtZW50PWF9O1liLnByb3RvdHlwZT17JG5vcm1hbGl6ZTp5YSwkYWRkQ2xhc3M6ZnVuY3Rpb24oYSl7YSYmMDxhLmxlbmd0aCYmQy5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCxhKX0sJHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEpe2EmJjA8YS5sZW5ndGgmJkMucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsYSl9LCR1cGRhdGVDbGFzczpmdW5jdGlvbihhLFxuYil7dmFyIGM9VmMoYSxiKTtjJiZjLmxlbmd0aCYmQy5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCxjKTsoYz1WYyhiLGEpKSYmYy5sZW5ndGgmJkMucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsYyl9LCRzZXQ6ZnVuY3Rpb24oYSxiLGQsZSl7dmFyIGY9dGhpcy4kJGVsZW1lbnRbMF0sZz1NYyhmLGEpLGg9a2YoZixhKSxmPWE7Zz8odGhpcy4kJGVsZW1lbnQucHJvcChhLGIpLGU9Zyk6aCYmKHRoaXNbaF09YixmPWgpO3RoaXNbYV09YjtlP3RoaXMuJGF0dHJbYV09ZTooZT10aGlzLiRhdHRyW2FdKXx8KHRoaXMuJGF0dHJbYV09ZT11YyhhLFwiLVwiKSk7Zz11YSh0aGlzLiQkZWxlbWVudCk7aWYoXCJhXCI9PT1nJiZcImhyZWZcIj09PWF8fFwiaW1nXCI9PT1nJiZcInNyY1wiPT09YSl0aGlzW2FdPWI9QShiLFwic3JjXCI9PT1hKTtlbHNlIGlmKFwiaW1nXCI9PT1nJiZcInNyY3NldFwiPT09YSl7Zm9yKHZhciBnPVwiXCIsaD1VKGIpLGw9LyhcXHMrXFxkK3hcXHMqLHxcXHMrXFxkK3dcXHMqLHxcXHMrLHwsXFxzKykvLGw9L1xccy8udGVzdChoKT9cbmw6LygsKS8saD1oLnNwbGl0KGwpLGw9TWF0aC5mbG9vcihoLmxlbmd0aC8yKSxrPTA7azxsO2srKyl2YXIgcT0yKmssZz1nK0EoVShoW3FdKSwhMCksZz1nKyhcIiBcIitVKGhbcSsxXSkpO2g9VShoWzIqa10pLnNwbGl0KC9cXHMvKTtnKz1BKFUoaFswXSksITApOzI9PT1oLmxlbmd0aCYmKGcrPVwiIFwiK1UoaFsxXSkpO3RoaXNbYV09Yj1nfSExIT09ZCYmKG51bGw9PT1ifHxiPT09dD90aGlzLiQkZWxlbWVudC5yZW1vdmVBdHRyKGUpOnRoaXMuJCRlbGVtZW50LmF0dHIoZSxiKSk7KGE9dGhpcy4kJG9ic2VydmVycykmJnMoYVtmXSxmdW5jdGlvbihhKXt0cnl7YShiKX1jYXRjaChkKXtjKGQpfX0pfSwkb2JzZXJ2ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1jLiQkb2JzZXJ2ZXJzfHwoYy4kJG9ic2VydmVycz1oYSgpKSxlPWRbYV18fChkW2FdPVtdKTtlLnB1c2goYik7di4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7IWUuJCRpbnRlciYmYy5oYXNPd25Qcm9wZXJ0eShhKSYmYihjW2FdKX0pO1xucmV0dXJuIGZ1bmN0aW9uKCl7WGEoZSxiKX19fTt2YXIgQWE9Yi5zdGFydFN5bWJvbCgpLGthPWIuZW5kU3ltYm9sKCksVGM9XCJ7e1wiPT1BYXx8XCJ9fVwiPT1rYT9wYTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC9cXHtcXHsvZyxBYSkucmVwbGFjZSgvfX0vZyxrYSl9LGdiPS9ebmdBdHRyW0EtWl0vO0UuJCRhZGRCaW5kaW5nSW5mbz1rP2Z1bmN0aW9uKGEsYil7dmFyIGM9YS5kYXRhKFwiJGJpbmRpbmdcIil8fFtdO0goYik/Yz1jLmNvbmNhdChiKTpjLnB1c2goYik7YS5kYXRhKFwiJGJpbmRpbmdcIixjKX06ejtFLiQkYWRkQmluZGluZ0NsYXNzPWs/ZnVuY3Rpb24oYSl7TyhhLFwibmctYmluZGluZ1wiKX06ejtFLiQkYWRkU2NvcGVJbmZvPWs/ZnVuY3Rpb24oYSxiLGMsZCl7YS5kYXRhKGM/ZD9cIiRpc29sYXRlU2NvcGVOb1RlbXBsYXRlXCI6XCIkaXNvbGF0ZVNjb3BlXCI6XCIkc2NvcGVcIixiKX06ejtFLiQkYWRkU2NvcGVDbGFzcz1rP2Z1bmN0aW9uKGEsYil7TyhhLGI/XCJuZy1pc29sYXRlLXNjb3BlXCI6XG5cIm5nLXNjb3BlXCIpfTp6O3JldHVybiBFfV19ZnVuY3Rpb24geWEoYil7cmV0dXJuIGRiKGIucmVwbGFjZShTYyxcIlwiKSl9ZnVuY3Rpb24gVmMoYixhKXt2YXIgYz1cIlwiLGQ9Yi5zcGxpdCgvXFxzKy8pLGU9YS5zcGxpdCgvXFxzKy8pLGY9MDthOmZvcig7ZjxkLmxlbmd0aDtmKyspe2Zvcih2YXIgZz1kW2ZdLGg9MDtoPGUubGVuZ3RoO2grKylpZihnPT1lW2hdKWNvbnRpbnVlIGE7Yys9KDA8Yy5sZW5ndGg/XCIgXCI6XCJcIikrZ31yZXR1cm4gY31mdW5jdGlvbiBVYyhiKXtiPUQoYik7dmFyIGE9Yi5sZW5ndGg7aWYoMT49YSlyZXR1cm4gYjtmb3IoO2EtLTspOD09PWJbYV0ubm9kZVR5cGUmJnBmLmNhbGwoYixhLDEpO3JldHVybiBifWZ1bmN0aW9uIEZlKCl7dmFyIGI9e30sYT0hMSxjPS9eKFxcUyspKFxccythc1xccysoXFx3KykpPyQvO3RoaXMucmVnaXN0ZXI9ZnVuY3Rpb24oYSxjKXtNYShhLFwiY29udHJvbGxlclwiKTtJKGEpP3goYixhKTpiW2FdPWN9O3RoaXMuYWxsb3dHbG9iYWxzPWZ1bmN0aW9uKCl7YT1cbiEwfTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsXCIkd2luZG93XCIsZnVuY3Rpb24oZCxlKXtmdW5jdGlvbiBmKGEsYixjLGQpe2lmKCFhfHwhSShhLiRzY29wZSkpdGhyb3cgUyhcIiRjb250cm9sbGVyXCIpKFwibm9zY3BcIixkLGIpO2EuJHNjb3BlW2JdPWN9cmV0dXJuIGZ1bmN0aW9uKGcsaCxsLGspe3ZhciBtLG4scTtsPSEwPT09bDtrJiZGKGspJiYocT1rKTtpZihGKGcpKXtrPWcubWF0Y2goYyk7aWYoIWspdGhyb3cgcWYoXCJjdHJsZm10XCIsZyk7bj1rWzFdO3E9cXx8a1szXTtnPWIuaGFzT3duUHJvcGVydHkobik/YltuXTp3YyhoLiRzY29wZSxuLCEwKXx8KGE/d2MoZSxuLCEwKTp0KTt0YihnLG4sITApfWlmKGwpcmV0dXJuIGw9KEgoZyk/Z1tnLmxlbmd0aC0xXTpnKS5wcm90b3R5cGUsbT1PYmplY3QuY3JlYXRlKGx8fG51bGwpLHEmJmYoaCxxLG0sbnx8Zy5uYW1lKSx4KGZ1bmN0aW9uKCl7ZC5pbnZva2UoZyxtLGgsbik7cmV0dXJuIG19LHtpbnN0YW5jZTptLGlkZW50aWZpZXI6cX0pO1xubT1kLmluc3RhbnRpYXRlKGcsaCxuKTtxJiZmKGgscSxtLG58fGcubmFtZSk7cmV0dXJuIG19fV19ZnVuY3Rpb24gR2UoKXt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLGZ1bmN0aW9uKGIpe3JldHVybiBEKGIuZG9jdW1lbnQpfV19ZnVuY3Rpb24gSGUoKXt0aGlzLiRnZXQ9W1wiJGxvZ1wiLGZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbihhLGMpe2IuZXJyb3IuYXBwbHkoYixhcmd1bWVudHMpfX1dfWZ1bmN0aW9uIFpiKGIsYSl7aWYoRihiKSl7dmFyIGM9Yi5yZXBsYWNlKHJmLFwiXCIpLnRyaW0oKTtpZihjKXt2YXIgZD1hKFwiQ29udGVudC1UeXBlXCIpOyhkPWQmJjA9PT1kLmluZGV4T2YoV2MpKXx8KGQ9KGQ9Yy5tYXRjaChzZikpJiZ0ZltkWzBdXS50ZXN0KGMpKTtkJiYoYj1wYyhjKSl9fXJldHVybiBifWZ1bmN0aW9uIFhjKGIpe3ZhciBhPWhhKCksYyxkLGU7aWYoIWIpcmV0dXJuIGE7cyhiLnNwbGl0KFwiXFxuXCIpLGZ1bmN0aW9uKGIpe2U9Yi5pbmRleE9mKFwiOlwiKTtjPVEoVShiLnN1YnN0cigwLFxuZSkpKTtkPVUoYi5zdWJzdHIoZSsxKSk7YyYmKGFbY109YVtjXT9hW2NdK1wiLCBcIitkOmQpfSk7cmV0dXJuIGF9ZnVuY3Rpb24gWWMoYil7dmFyIGE9SShiKT9iOnQ7cmV0dXJuIGZ1bmN0aW9uKGMpe2F8fChhPVhjKGIpKTtyZXR1cm4gYz8oYz1hW1EoYyldLHZvaWQgMD09PWMmJihjPW51bGwpLGMpOmF9fWZ1bmN0aW9uIFpjKGIsYSxjLGQpe2lmKEcoZCkpcmV0dXJuIGQoYixhLGMpO3MoZCxmdW5jdGlvbihkKXtiPWQoYixhLGMpfSk7cmV0dXJuIGJ9ZnVuY3Rpb24gS2UoKXt2YXIgYj10aGlzLmRlZmF1bHRzPXt0cmFuc2Zvcm1SZXNwb25zZTpbWmJdLHRyYW5zZm9ybVJlcXVlc3Q6W2Z1bmN0aW9uKGEpe3JldHVybiBJKGEpJiZcIltvYmplY3QgRmlsZV1cIiE9PURhLmNhbGwoYSkmJlwiW29iamVjdCBCbG9iXVwiIT09RGEuY2FsbChhKSYmXCJbb2JqZWN0IEZvcm1EYXRhXVwiIT09RGEuY2FsbChhKT8kYShhKTphfV0saGVhZGVyczp7Y29tbW9uOntBY2NlcHQ6XCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLypcIn0sXG5wb3N0OnJhKCRiKSxwdXQ6cmEoJGIpLHBhdGNoOnJhKCRiKX0seHNyZkNvb2tpZU5hbWU6XCJYU1JGLVRPS0VOXCIseHNyZkhlYWRlck5hbWU6XCJYLVhTUkYtVE9LRU5cIn0sYT0hMTt0aGlzLnVzZUFwcGx5QXN5bmM9ZnVuY3Rpb24oYil7cmV0dXJuIHkoYik/KGE9ISFiLHRoaXMpOmF9O3ZhciBjPXRoaXMuaW50ZXJjZXB0b3JzPVtdO3RoaXMuJGdldD1bXCIkaHR0cEJhY2tlbmRcIixcIiRicm93c2VyXCIsXCIkY2FjaGVGYWN0b3J5XCIsXCIkcm9vdFNjb3BlXCIsXCIkcVwiLFwiJGluamVjdG9yXCIsZnVuY3Rpb24oZCxlLGYsZyxoLGwpe2Z1bmN0aW9uIGsoYSl7ZnVuY3Rpb24gYyhhKXt2YXIgYj14KHt9LGEpO2IuZGF0YT1hLmRhdGE/WmMoYS5kYXRhLGEuaGVhZGVycyxhLnN0YXR1cyxlLnRyYW5zZm9ybVJlc3BvbnNlKTphLmRhdGE7YT1hLnN0YXR1cztyZXR1cm4gMjAwPD1hJiYzMDA+YT9iOmgucmVqZWN0KGIpfWZ1bmN0aW9uIGQoYSl7dmFyIGIsYz17fTtzKGEsZnVuY3Rpb24oYSxkKXtHKGEpPyhiPVxuYSgpLG51bGwhPWImJihjW2RdPWIpKTpjW2RdPWF9KTtyZXR1cm4gY31pZighY2EuaXNPYmplY3QoYSkpdGhyb3cgUyhcIiRodHRwXCIpKFwiYmFkcmVxXCIsYSk7dmFyIGU9eCh7bWV0aG9kOlwiZ2V0XCIsdHJhbnNmb3JtUmVxdWVzdDpiLnRyYW5zZm9ybVJlcXVlc3QsdHJhbnNmb3JtUmVzcG9uc2U6Yi50cmFuc2Zvcm1SZXNwb25zZX0sYSk7ZS5oZWFkZXJzPWZ1bmN0aW9uKGEpe3ZhciBjPWIuaGVhZGVycyxlPXgoe30sYS5oZWFkZXJzKSxmLGcsYz14KHt9LGMuY29tbW9uLGNbUShhLm1ldGhvZCldKTthOmZvcihmIGluIGMpe2E9UShmKTtmb3IoZyBpbiBlKWlmKFEoZyk9PT1hKWNvbnRpbnVlIGE7ZVtmXT1jW2ZdfXJldHVybiBkKGUpfShhKTtlLm1ldGhvZD12YihlLm1ldGhvZCk7dmFyIGY9W2Z1bmN0aW9uKGEpe3ZhciBkPWEuaGVhZGVycyxlPVpjKGEuZGF0YSxZYyhkKSx0LGEudHJhbnNmb3JtUmVxdWVzdCk7QihlKSYmcyhkLGZ1bmN0aW9uKGEsYil7XCJjb250ZW50LXR5cGVcIj09PVEoYikmJlxuZGVsZXRlIGRbYl19KTtCKGEud2l0aENyZWRlbnRpYWxzKSYmIUIoYi53aXRoQ3JlZGVudGlhbHMpJiYoYS53aXRoQ3JlZGVudGlhbHM9Yi53aXRoQ3JlZGVudGlhbHMpO3JldHVybiBtKGEsZSkudGhlbihjLGMpfSx0XSxnPWgud2hlbihlKTtmb3Iocyh1LGZ1bmN0aW9uKGEpeyhhLnJlcXVlc3R8fGEucmVxdWVzdEVycm9yKSYmZi51bnNoaWZ0KGEucmVxdWVzdCxhLnJlcXVlc3RFcnJvcik7KGEucmVzcG9uc2V8fGEucmVzcG9uc2VFcnJvcikmJmYucHVzaChhLnJlc3BvbnNlLGEucmVzcG9uc2VFcnJvcil9KTtmLmxlbmd0aDspe2E9Zi5zaGlmdCgpO3ZhciBsPWYuc2hpZnQoKSxnPWcudGhlbihhLGwpfWcuc3VjY2Vzcz1mdW5jdGlvbihhKXtnLnRoZW4oZnVuY3Rpb24oYil7YShiLmRhdGEsYi5zdGF0dXMsYi5oZWFkZXJzLGUpfSk7cmV0dXJuIGd9O2cuZXJyb3I9ZnVuY3Rpb24oYSl7Zy50aGVuKG51bGwsZnVuY3Rpb24oYil7YShiLmRhdGEsYi5zdGF0dXMsYi5oZWFkZXJzLGUpfSk7XG5yZXR1cm4gZ307cmV0dXJuIGd9ZnVuY3Rpb24gbShjLGYpe2Z1bmN0aW9uIGwoYixjLGQsZSl7ZnVuY3Rpb24gZigpe20oYyxiLGQsZSl9TyYmKDIwMDw9YiYmMzAwPmI/Ty5wdXQoWCxbYixjLFhjKGQpLGVdKTpPLnJlbW92ZShYKSk7YT9nLiRhcHBseUFzeW5jKGYpOihmKCksZy4kJHBoYXNlfHxnLiRhcHBseSgpKX1mdW5jdGlvbiBtKGEsYixkLGUpe2I9TWF0aC5tYXgoYiwwKTsoMjAwPD1iJiYzMDA+Yj9DLnJlc29sdmU6Qy5yZWplY3QpKHtkYXRhOmEsc3RhdHVzOmIsaGVhZGVyczpZYyhkKSxjb25maWc6YyxzdGF0dXNUZXh0OmV9KX1mdW5jdGlvbiB3KGEpe20oYS5kYXRhLGEuc3RhdHVzLHJhKGEuaGVhZGVycygpKSxhLnN0YXR1c1RleHQpfWZ1bmN0aW9uIHUoKXt2YXIgYT1rLnBlbmRpbmdSZXF1ZXN0cy5pbmRleE9mKGMpOy0xIT09YSYmay5wZW5kaW5nUmVxdWVzdHMuc3BsaWNlKGEsMSl9dmFyIEM9aC5kZWZlcigpLEE9Qy5wcm9taXNlLE8sRSxzPWMuaGVhZGVycyxYPW4oYy51cmwsXG5jLnBhcmFtcyk7ay5wZW5kaW5nUmVxdWVzdHMucHVzaChjKTtBLnRoZW4odSx1KTshYy5jYWNoZSYmIWIuY2FjaGV8fCExPT09Yy5jYWNoZXx8XCJHRVRcIiE9PWMubWV0aG9kJiZcIkpTT05QXCIhPT1jLm1ldGhvZHx8KE89SShjLmNhY2hlKT9jLmNhY2hlOkkoYi5jYWNoZSk/Yi5jYWNoZTpxKTtPJiYoRT1PLmdldChYKSx5KEUpP0UmJkcoRS50aGVuKT9FLnRoZW4odyx3KTpIKEUpP20oRVsxXSxFWzBdLHJhKEVbMl0pLEVbM10pOm0oRSwyMDAse30sXCJPS1wiKTpPLnB1dChYLEEpKTtCKEUpJiYoKEU9JGMoYy51cmwpP2UuY29va2llcygpW2MueHNyZkNvb2tpZU5hbWV8fGIueHNyZkNvb2tpZU5hbWVdOnQpJiYoc1tjLnhzcmZIZWFkZXJOYW1lfHxiLnhzcmZIZWFkZXJOYW1lXT1FKSxkKGMubWV0aG9kLFgsZixsLHMsYy50aW1lb3V0LGMud2l0aENyZWRlbnRpYWxzLGMucmVzcG9uc2VUeXBlKSk7cmV0dXJuIEF9ZnVuY3Rpb24gbihhLGIpe2lmKCFiKXJldHVybiBhO3ZhciBjPVtdO0VkKGIsXG5mdW5jdGlvbihhLGIpe251bGw9PT1hfHxCKGEpfHwoSChhKXx8KGE9W2FdKSxzKGEsZnVuY3Rpb24oYSl7SShhKSYmKGE9cWEoYSk/YS50b0lTT1N0cmluZygpOiRhKGEpKTtjLnB1c2goRmEoYikrXCI9XCIrRmEoYSkpfSkpfSk7MDxjLmxlbmd0aCYmKGErPSgtMT09YS5pbmRleE9mKFwiP1wiKT9cIj9cIjpcIiZcIikrYy5qb2luKFwiJlwiKSk7cmV0dXJuIGF9dmFyIHE9ZihcIiRodHRwXCIpLHU9W107cyhjLGZ1bmN0aW9uKGEpe3UudW5zaGlmdChGKGEpP2wuZ2V0KGEpOmwuaW52b2tlKGEpKX0pO2sucGVuZGluZ1JlcXVlc3RzPVtdOyhmdW5jdGlvbihhKXtzKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtrW2FdPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGsoeChjfHx7fSx7bWV0aG9kOmEsdXJsOmJ9KSl9fSl9KShcImdldFwiLFwiZGVsZXRlXCIsXCJoZWFkXCIsXCJqc29ucFwiKTsoZnVuY3Rpb24oYSl7cyhhcmd1bWVudHMsZnVuY3Rpb24oYSl7a1thXT1mdW5jdGlvbihiLGMsZCl7cmV0dXJuIGsoeChkfHx7fSx7bWV0aG9kOmEsXG51cmw6YixkYXRhOmN9KSl9fSl9KShcInBvc3RcIixcInB1dFwiLFwicGF0Y2hcIik7ay5kZWZhdWx0cz1iO3JldHVybiBrfV19ZnVuY3Rpb24gdWYoKXtyZXR1cm4gbmV3IE0uWE1MSHR0cFJlcXVlc3R9ZnVuY3Rpb24gTGUoKXt0aGlzLiRnZXQ9W1wiJGJyb3dzZXJcIixcIiR3aW5kb3dcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGIsYSxjKXtyZXR1cm4gdmYoYix1ZixiLmRlZmVyLGEuYW5ndWxhci5jYWxsYmFja3MsY1swXSl9XX1mdW5jdGlvbiB2ZihiLGEsYyxkLGUpe2Z1bmN0aW9uIGYoYSxiLGMpe3ZhciBmPWUuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxtPW51bGw7Zi50eXBlPVwidGV4dC9qYXZhc2NyaXB0XCI7Zi5zcmM9YTtmLmFzeW5jPSEwO209ZnVuY3Rpb24oYSl7Zi5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLG0sITEpO2YucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsbSwhMSk7ZS5ib2R5LnJlbW92ZUNoaWxkKGYpO2Y9bnVsbDt2YXIgZz0tMSx1PVwidW5rbm93blwiO2EmJihcImxvYWRcIiE9PVxuYS50eXBlfHxkW2JdLmNhbGxlZHx8KGE9e3R5cGU6XCJlcnJvclwifSksdT1hLnR5cGUsZz1cImVycm9yXCI9PT1hLnR5cGU/NDA0OjIwMCk7YyYmYyhnLHUpfTtmLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsbSwhMSk7Zi5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixtLCExKTtlLmJvZHkuYXBwZW5kQ2hpbGQoZik7cmV0dXJuIG19cmV0dXJuIGZ1bmN0aW9uKGUsaCxsLGssbSxuLHEsdSl7ZnVuY3Rpb24gcigpe3YmJnYoKTt3JiZ3LmFib3J0KCl9ZnVuY3Rpb24gUChhLGQsZSxmLGcpe0MhPT10JiZjLmNhbmNlbChDKTt2PXc9bnVsbDthKGQsZSxmLGcpO2IuJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCh6KX1iLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQoKTtoPWh8fGIudXJsKCk7aWYoXCJqc29ucFwiPT1RKGUpKXt2YXIgcD1cIl9cIisoZC5jb3VudGVyKyspLnRvU3RyaW5nKDM2KTtkW3BdPWZ1bmN0aW9uKGEpe2RbcF0uZGF0YT1hO2RbcF0uY2FsbGVkPSEwfTt2YXIgdj1mKGgucmVwbGFjZShcIkpTT05fQ0FMTEJBQ0tcIixcblwiYW5ndWxhci5jYWxsYmFja3MuXCIrcCkscCxmdW5jdGlvbihhLGIpe1AoayxhLGRbcF0uZGF0YSxcIlwiLGIpO2RbcF09en0pfWVsc2V7dmFyIHc9YSgpO3cub3BlbihlLGgsITApO3MobSxmdW5jdGlvbihhLGIpe3koYSkmJncuc2V0UmVxdWVzdEhlYWRlcihiLGEpfSk7dy5vbmxvYWQ9ZnVuY3Rpb24oKXt2YXIgYT13LnN0YXR1c1RleHR8fFwiXCIsYj1cInJlc3BvbnNlXCJpbiB3P3cucmVzcG9uc2U6dy5yZXNwb25zZVRleHQsYz0xMjIzPT09dy5zdGF0dXM/MjA0Oncuc3RhdHVzOzA9PT1jJiYoYz1iPzIwMDpcImZpbGVcIj09QmEoaCkucHJvdG9jb2w/NDA0OjApO1AoayxjLGIsdy5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSxhKX07ZT1mdW5jdGlvbigpe1AoaywtMSxudWxsLG51bGwsXCJcIil9O3cub25lcnJvcj1lO3cub25hYm9ydD1lO3EmJih3LndpdGhDcmVkZW50aWFscz0hMCk7aWYodSl0cnl7dy5yZXNwb25zZVR5cGU9dX1jYXRjaChMKXtpZihcImpzb25cIiE9PXUpdGhyb3cgTDt9dy5zZW5kKGx8fFxubnVsbCl9aWYoMDxuKXZhciBDPWMocixuKTtlbHNlIG4mJkcobi50aGVuKSYmbi50aGVuKHIpfX1mdW5jdGlvbiBJZSgpe3ZhciBiPVwie3tcIixhPVwifX1cIjt0aGlzLnN0YXJ0U3ltYm9sPWZ1bmN0aW9uKGEpe3JldHVybiBhPyhiPWEsdGhpcyk6Yn07dGhpcy5lbmRTeW1ib2w9ZnVuY3Rpb24oYil7cmV0dXJuIGI/KGE9Yix0aGlzKTphfTt0aGlzLiRnZXQ9W1wiJHBhcnNlXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLFwiJHNjZVwiLGZ1bmN0aW9uKGMsZCxlKXtmdW5jdGlvbiBmKGEpe3JldHVyblwiXFxcXFxcXFxcXFxcXCIrYX1mdW5jdGlvbiBnKGYsZyx1LHIpe2Z1bmN0aW9uIFAoYyl7cmV0dXJuIGMucmVwbGFjZShrLGIpLnJlcGxhY2UobSxhKX1mdW5jdGlvbiBwKGEpe3RyeXt2YXIgYj1hO2E9dT9lLmdldFRydXN0ZWQodSxiKTplLnZhbHVlT2YoYik7dmFyIGM7aWYociYmIXkoYSkpYz1hO2Vsc2UgaWYobnVsbD09YSljPVwiXCI7ZWxzZXtzd2l0Y2godHlwZW9mIGEpe2Nhc2UgXCJzdHJpbmdcIjpicmVhaztjYXNlIFwibnVtYmVyXCI6YT1cblwiXCIrYTticmVhaztkZWZhdWx0OmE9JGEoYSl9Yz1hfXJldHVybiBjfWNhdGNoKGcpe2M9YWMoXCJpbnRlcnJcIixmLGcudG9TdHJpbmcoKSksZChjKX19cj0hIXI7Zm9yKHZhciB2LHcsTD0wLEM9W10sQT1bXSxPPWYubGVuZ3RoLEU9W10scz1bXTtMPE87KWlmKC0xIT0odj1mLmluZGV4T2YoYixMKSkmJi0xIT0odz1mLmluZGV4T2YoYSx2K2gpKSlMIT09diYmRS5wdXNoKFAoZi5zdWJzdHJpbmcoTCx2KSkpLEw9Zi5zdWJzdHJpbmcoditoLHcpLEMucHVzaChMKSxBLnB1c2goYyhMLHApKSxMPXcrbCxzLnB1c2goRS5sZW5ndGgpLEUucHVzaChcIlwiKTtlbHNle0whPT1PJiZFLnB1c2goUChmLnN1YnN0cmluZyhMKSkpO2JyZWFrfWlmKHUmJjE8RS5sZW5ndGgpdGhyb3cgYWMoXCJub2NvbmNhdFwiLGYpO2lmKCFnfHxDLmxlbmd0aCl7dmFyIFg9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz1DLmxlbmd0aDtiPGM7YisrKXtpZihyJiZCKGFbYl0pKXJldHVybjtFW3NbYl1dPWFbYl19cmV0dXJuIEUuam9pbihcIlwiKX07XG5yZXR1cm4geChmdW5jdGlvbihhKXt2YXIgYj0wLGM9Qy5sZW5ndGgsZT1BcnJheShjKTt0cnl7Zm9yKDtiPGM7YisrKWVbYl09QVtiXShhKTtyZXR1cm4gWChlKX1jYXRjaChnKXthPWFjKFwiaW50ZXJyXCIsZixnLnRvU3RyaW5nKCkpLGQoYSl9fSx7ZXhwOmYsZXhwcmVzc2lvbnM6QywkJHdhdGNoRGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBhLiR3YXRjaEdyb3VwKEEsZnVuY3Rpb24oYyxlKXt2YXIgZj1YKGMpO0coYikmJmIuY2FsbCh0aGlzLGYsYyE9PWU/ZDpmLGEpO2Q9Zn0sYyl9fSl9fXZhciBoPWIubGVuZ3RoLGw9YS5sZW5ndGgsaz1uZXcgUmVnRXhwKGIucmVwbGFjZSgvLi9nLGYpLFwiZ1wiKSxtPW5ldyBSZWdFeHAoYS5yZXBsYWNlKC8uL2csZiksXCJnXCIpO2cuc3RhcnRTeW1ib2w9ZnVuY3Rpb24oKXtyZXR1cm4gYn07Zy5lbmRTeW1ib2w9ZnVuY3Rpb24oKXtyZXR1cm4gYX07cmV0dXJuIGd9XX1mdW5jdGlvbiBKZSgpe3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXG5cIiR3aW5kb3dcIixcIiRxXCIsXCIkJHFcIixmdW5jdGlvbihiLGEsYyxkKXtmdW5jdGlvbiBlKGUsaCxsLGspe3ZhciBtPWEuc2V0SW50ZXJ2YWwsbj1hLmNsZWFySW50ZXJ2YWwscT0wLHU9eShrKSYmIWsscj0odT9kOmMpLmRlZmVyKCksUD1yLnByb21pc2U7bD15KGwpP2w6MDtQLnRoZW4obnVsbCxudWxsLGUpO1AuJCRpbnRlcnZhbElkPW0oZnVuY3Rpb24oKXtyLm5vdGlmeShxKyspOzA8bCYmcT49bCYmKHIucmVzb2x2ZShxKSxuKFAuJCRpbnRlcnZhbElkKSxkZWxldGUgZltQLiQkaW50ZXJ2YWxJZF0pO3V8fGIuJGFwcGx5KCl9LGgpO2ZbUC4kJGludGVydmFsSWRdPXI7cmV0dXJuIFB9dmFyIGY9e307ZS5jYW5jZWw9ZnVuY3Rpb24oYil7cmV0dXJuIGImJmIuJCRpbnRlcnZhbElkIGluIGY/KGZbYi4kJGludGVydmFsSWRdLnJlamVjdChcImNhbmNlbGVkXCIpLGEuY2xlYXJJbnRlcnZhbChiLiQkaW50ZXJ2YWxJZCksZGVsZXRlIGZbYi4kJGludGVydmFsSWRdLCEwKTohMX07cmV0dXJuIGV9XX1cbmZ1bmN0aW9uIFJkKCl7dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJue2lkOlwiZW4tdXNcIixOVU1CRVJfRk9STUFUUzp7REVDSU1BTF9TRVA6XCIuXCIsR1JPVVBfU0VQOlwiLFwiLFBBVFRFUk5TOlt7bWluSW50OjEsbWluRnJhYzowLG1heEZyYWM6Myxwb3NQcmU6XCJcIixwb3NTdWY6XCJcIixuZWdQcmU6XCItXCIsbmVnU3VmOlwiXCIsZ1NpemU6MyxsZ1NpemU6M30se21pbkludDoxLG1pbkZyYWM6MixtYXhGcmFjOjIscG9zUHJlOlwiXFx1MDBhNFwiLHBvc1N1ZjpcIlwiLG5lZ1ByZTpcIihcXHUwMGE0XCIsbmVnU3VmOlwiKVwiLGdTaXplOjMsbGdTaXplOjN9XSxDVVJSRU5DWV9TWU06XCIkXCJ9LERBVEVUSU1FX0ZPUk1BVFM6e01PTlRIOlwiSmFudWFyeSBGZWJydWFyeSBNYXJjaCBBcHJpbCBNYXkgSnVuZSBKdWx5IEF1Z3VzdCBTZXB0ZW1iZXIgT2N0b2JlciBOb3ZlbWJlciBEZWNlbWJlclwiLnNwbGl0KFwiIFwiKSxTSE9SVE1PTlRIOlwiSmFuIEZlYiBNYXIgQXByIE1heSBKdW4gSnVsIEF1ZyBTZXAgT2N0IE5vdiBEZWNcIi5zcGxpdChcIiBcIiksXG5EQVk6XCJTdW5kYXkgTW9uZGF5IFR1ZXNkYXkgV2VkbmVzZGF5IFRodXJzZGF5IEZyaWRheSBTYXR1cmRheVwiLnNwbGl0KFwiIFwiKSxTSE9SVERBWTpcIlN1biBNb24gVHVlIFdlZCBUaHUgRnJpIFNhdFwiLnNwbGl0KFwiIFwiKSxBTVBNUzpbXCJBTVwiLFwiUE1cIl0sbWVkaXVtOlwiTU1NIGQsIHkgaDptbTpzcyBhXCIsXCJzaG9ydFwiOlwiTS9kL3l5IGg6bW0gYVwiLGZ1bGxEYXRlOlwiRUVFRSwgTU1NTSBkLCB5XCIsbG9uZ0RhdGU6XCJNTU1NIGQsIHlcIixtZWRpdW1EYXRlOlwiTU1NIGQsIHlcIixzaG9ydERhdGU6XCJNL2QveXlcIixtZWRpdW1UaW1lOlwiaDptbTpzcyBhXCIsc2hvcnRUaW1lOlwiaDptbSBhXCJ9LHBsdXJhbENhdDpmdW5jdGlvbihiKXtyZXR1cm4gMT09PWI/XCJvbmVcIjpcIm90aGVyXCJ9fX19ZnVuY3Rpb24gYmMoYil7Yj1iLnNwbGl0KFwiL1wiKTtmb3IodmFyIGE9Yi5sZW5ndGg7YS0tOyliW2FdPXJiKGJbYV0pO3JldHVybiBiLmpvaW4oXCIvXCIpfWZ1bmN0aW9uIGFkKGIsYSl7dmFyIGM9QmEoYik7YS4kJHByb3RvY29sPVxuYy5wcm90b2NvbDthLiQkaG9zdD1jLmhvc3RuYW1lO2EuJCRwb3J0PWJhKGMucG9ydCl8fHdmW2MucHJvdG9jb2xdfHxudWxsfWZ1bmN0aW9uIGJkKGIsYSl7dmFyIGM9XCIvXCIhPT1iLmNoYXJBdCgwKTtjJiYoYj1cIi9cIitiKTt2YXIgZD1CYShiKTthLiQkcGF0aD1kZWNvZGVVUklDb21wb25lbnQoYyYmXCIvXCI9PT1kLnBhdGhuYW1lLmNoYXJBdCgwKT9kLnBhdGhuYW1lLnN1YnN0cmluZygxKTpkLnBhdGhuYW1lKTthLiQkc2VhcmNoPXJjKGQuc2VhcmNoKTthLiQkaGFzaD1kZWNvZGVVUklDb21wb25lbnQoZC5oYXNoKTthLiQkcGF0aCYmXCIvXCIhPWEuJCRwYXRoLmNoYXJBdCgwKSYmKGEuJCRwYXRoPVwiL1wiK2EuJCRwYXRoKX1mdW5jdGlvbiB6YShiLGEpe2lmKDA9PT1hLmluZGV4T2YoYikpcmV0dXJuIGEuc3Vic3RyKGIubGVuZ3RoKX1mdW5jdGlvbiBIYShiKXt2YXIgYT1iLmluZGV4T2YoXCIjXCIpO3JldHVybi0xPT1hP2I6Yi5zdWJzdHIoMCxhKX1mdW5jdGlvbiBHYihiKXtyZXR1cm4gYi5yZXBsYWNlKC8oIy4rKXwjJC8sXG5cIiQxXCIpfWZ1bmN0aW9uIGNjKGIpe3JldHVybiBiLnN1YnN0cigwLEhhKGIpLmxhc3RJbmRleE9mKFwiL1wiKSsxKX1mdW5jdGlvbiBkYyhiLGEpe3RoaXMuJCRodG1sNT0hMDthPWF8fFwiXCI7dmFyIGM9Y2MoYik7YWQoYix0aGlzKTt0aGlzLiQkcGFyc2U9ZnVuY3Rpb24oYSl7dmFyIGI9emEoYyxhKTtpZighRihiKSl0aHJvdyBIYihcImlwdGhwcmZ4XCIsYSxjKTtiZChiLHRoaXMpO3RoaXMuJCRwYXRofHwodGhpcy4kJHBhdGg9XCIvXCIpO3RoaXMuJCRjb21wb3NlKCl9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGE9UWIodGhpcy4kJHNlYXJjaCksYj10aGlzLiQkaGFzaD9cIiNcIityYih0aGlzLiQkaGFzaCk6XCJcIjt0aGlzLiQkdXJsPWJjKHRoaXMuJCRwYXRoKSsoYT9cIj9cIithOlwiXCIpK2I7dGhpcy4kJGFic1VybD1jK3RoaXMuJCR1cmwuc3Vic3RyKDEpfTt0aGlzLiQkcGFyc2VMaW5rVXJsPWZ1bmN0aW9uKGQsZSl7aWYoZSYmXCIjXCI9PT1lWzBdKXJldHVybiB0aGlzLmhhc2goZS5zbGljZSgxKSksXG4hMDt2YXIgZixnOyhmPXphKGIsZCkpIT09dD8oZz1mLGc9KGY9emEoYSxmKSkhPT10P2MrKHphKFwiL1wiLGYpfHxmKTpiK2cpOihmPXphKGMsZCkpIT09dD9nPWMrZjpjPT1kK1wiL1wiJiYoZz1jKTtnJiZ0aGlzLiQkcGFyc2UoZyk7cmV0dXJuISFnfX1mdW5jdGlvbiBlYyhiLGEpe3ZhciBjPWNjKGIpO2FkKGIsdGhpcyk7dGhpcy4kJHBhcnNlPWZ1bmN0aW9uKGQpe2Q9emEoYixkKXx8emEoYyxkKTt2YXIgZTtcIiNcIj09PWQuY2hhckF0KDApPyhlPXphKGEsZCksQihlKSYmKGU9ZCkpOmU9dGhpcy4kJGh0bWw1P2Q6XCJcIjtiZChlLHRoaXMpO2Q9dGhpcy4kJHBhdGg7dmFyIGY9L15cXC9bQS1aXTooXFwvLiopLzswPT09ZS5pbmRleE9mKGIpJiYoZT1lLnJlcGxhY2UoYixcIlwiKSk7Zi5leGVjKGUpfHwoZD0oZT1mLmV4ZWMoZCkpP2VbMV06ZCk7dGhpcy4kJHBhdGg9ZDt0aGlzLiQkY29tcG9zZSgpfTt0aGlzLiQkY29tcG9zZT1mdW5jdGlvbigpe3ZhciBjPVFiKHRoaXMuJCRzZWFyY2gpLGU9dGhpcy4kJGhhc2g/XG5cIiNcIityYih0aGlzLiQkaGFzaCk6XCJcIjt0aGlzLiQkdXJsPWJjKHRoaXMuJCRwYXRoKSsoYz9cIj9cIitjOlwiXCIpK2U7dGhpcy4kJGFic1VybD1iKyh0aGlzLiQkdXJsP2ErdGhpcy4kJHVybDpcIlwiKX07dGhpcy4kJHBhcnNlTGlua1VybD1mdW5jdGlvbihhLGMpe3JldHVybiBIYShiKT09SGEoYSk/KHRoaXMuJCRwYXJzZShhKSwhMCk6ITF9fWZ1bmN0aW9uIGNkKGIsYSl7dGhpcy4kJGh0bWw1PSEwO2VjLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYz1jYyhiKTt0aGlzLiQkcGFyc2VMaW5rVXJsPWZ1bmN0aW9uKGQsZSl7aWYoZSYmXCIjXCI9PT1lWzBdKXJldHVybiB0aGlzLmhhc2goZS5zbGljZSgxKSksITA7dmFyIGYsZztiPT1IYShkKT9mPWQ6KGc9emEoYyxkKSk/Zj1iK2ErZzpjPT09ZCtcIi9cIiYmKGY9Yyk7ZiYmdGhpcy4kJHBhcnNlKGYpO3JldHVybiEhZn07dGhpcy4kJGNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgYz1RYih0aGlzLiQkc2VhcmNoKSxlPXRoaXMuJCRoYXNoP1wiI1wiK3JiKHRoaXMuJCRoYXNoKTpcblwiXCI7dGhpcy4kJHVybD1iYyh0aGlzLiQkcGF0aCkrKGM/XCI/XCIrYzpcIlwiKStlO3RoaXMuJCRhYnNVcmw9YithK3RoaXMuJCR1cmx9fWZ1bmN0aW9uIEliKGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzW2JdfX1mdW5jdGlvbiBkZChiLGEpe3JldHVybiBmdW5jdGlvbihjKXtpZihCKGMpKXJldHVybiB0aGlzW2JdO3RoaXNbYl09YShjKTt0aGlzLiQkY29tcG9zZSgpO3JldHVybiB0aGlzfX1mdW5jdGlvbiBNZSgpe3ZhciBiPVwiXCIsYT17ZW5hYmxlZDohMSxyZXF1aXJlQmFzZTohMCxyZXdyaXRlTGlua3M6ITB9O3RoaXMuaGFzaFByZWZpeD1mdW5jdGlvbihhKXtyZXR1cm4geShhKT8oYj1hLHRoaXMpOmJ9O3RoaXMuaHRtbDVNb2RlPWZ1bmN0aW9uKGIpe3JldHVybiBXYShiKT8oYS5lbmFibGVkPWIsdGhpcyk6SShiKT8oV2EoYi5lbmFibGVkKSYmKGEuZW5hYmxlZD1iLmVuYWJsZWQpLFdhKGIucmVxdWlyZUJhc2UpJiYoYS5yZXF1aXJlQmFzZT1iLnJlcXVpcmVCYXNlKSxXYShiLnJld3JpdGVMaW5rcykmJlxuKGEucmV3cml0ZUxpbmtzPWIucmV3cml0ZUxpbmtzKSx0aGlzKTphfTt0aGlzLiRnZXQ9W1wiJHJvb3RTY29wZVwiLFwiJGJyb3dzZXJcIixcIiRzbmlmZmVyXCIsXCIkcm9vdEVsZW1lbnRcIixcIiR3aW5kb3dcIixmdW5jdGlvbihjLGQsZSxmLGcpe2Z1bmN0aW9uIGgoYSxiLGMpe3ZhciBlPWsudXJsKCksZj1rLiQkc3RhdGU7dHJ5e2QudXJsKGEsYixjKSxrLiQkc3RhdGU9ZC5zdGF0ZSgpfWNhdGNoKGcpe3Rocm93IGsudXJsKGUpLGsuJCRzdGF0ZT1mLGc7fX1mdW5jdGlvbiBsKGEsYil7Yy4kYnJvYWRjYXN0KFwiJGxvY2F0aW9uQ2hhbmdlU3VjY2Vzc1wiLGsuYWJzVXJsKCksYSxrLiQkc3RhdGUsYil9dmFyIGssbTttPWQuYmFzZUhyZWYoKTt2YXIgbj1kLnVybCgpLHE7aWYoYS5lbmFibGVkKXtpZighbSYmYS5yZXF1aXJlQmFzZSl0aHJvdyBIYihcIm5vYmFzZVwiKTtxPW4uc3Vic3RyaW5nKDAsbi5pbmRleE9mKFwiL1wiLG4uaW5kZXhPZihcIi8vXCIpKzIpKSsobXx8XCIvXCIpO209ZS5oaXN0b3J5P2RjOmNkfWVsc2UgcT1cbkhhKG4pLG09ZWM7az1uZXcgbShxLFwiI1wiK2IpO2suJCRwYXJzZUxpbmtVcmwobixuKTtrLiQkc3RhdGU9ZC5zdGF0ZSgpO3ZhciB1PS9eXFxzKihqYXZhc2NyaXB0fG1haWx0byk6L2k7Zi5vbihcImNsaWNrXCIsZnVuY3Rpb24oYil7aWYoYS5yZXdyaXRlTGlua3MmJiFiLmN0cmxLZXkmJiFiLm1ldGFLZXkmJiFiLnNoaWZ0S2V5JiYyIT1iLndoaWNoJiYyIT1iLmJ1dHRvbil7Zm9yKHZhciBlPUQoYi50YXJnZXQpO1wiYVwiIT09dWEoZVswXSk7KWlmKGVbMF09PT1mWzBdfHwhKGU9ZS5wYXJlbnQoKSlbMF0pcmV0dXJuO3ZhciBoPWUucHJvcChcImhyZWZcIiksbD1lLmF0dHIoXCJocmVmXCIpfHxlLmF0dHIoXCJ4bGluazpocmVmXCIpO0koaCkmJlwiW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ11cIj09PWgudG9TdHJpbmcoKSYmKGg9QmEoaC5hbmltVmFsKS5ocmVmKTt1LnRlc3QoaCl8fCFofHxlLmF0dHIoXCJ0YXJnZXRcIil8fGIuaXNEZWZhdWx0UHJldmVudGVkKCl8fCFrLiQkcGFyc2VMaW5rVXJsKGgsXG5sKXx8KGIucHJldmVudERlZmF1bHQoKSxrLmFic1VybCgpIT1kLnVybCgpJiYoYy4kYXBwbHkoKSxnLmFuZ3VsYXJbXCJmZi02ODQyMDgtcHJldmVudERlZmF1bHRcIl09ITApKX19KTtHYihrLmFic1VybCgpKSE9R2IobikmJmQudXJsKGsuYWJzVXJsKCksITApO3ZhciByPSEwO2Qub25VcmxDaGFuZ2UoZnVuY3Rpb24oYSxiKXtjLiRldmFsQXN5bmMoZnVuY3Rpb24oKXt2YXIgZD1rLmFic1VybCgpLGU9ay4kJHN0YXRlLGY7ay4kJHBhcnNlKGEpO2suJCRzdGF0ZT1iO2Y9Yy4kYnJvYWRjYXN0KFwiJGxvY2F0aW9uQ2hhbmdlU3RhcnRcIixhLGQsYixlKS5kZWZhdWx0UHJldmVudGVkO2suYWJzVXJsKCk9PT1hJiYoZj8oay4kJHBhcnNlKGQpLGsuJCRzdGF0ZT1lLGgoZCwhMSxlKSk6KHI9ITEsbChkLGUpKSl9KTtjLiQkcGhhc2V8fGMuJGRpZ2VzdCgpfSk7Yy4kd2F0Y2goZnVuY3Rpb24oKXt2YXIgYT1HYihkLnVybCgpKSxiPUdiKGsuYWJzVXJsKCkpLGY9ZC5zdGF0ZSgpLGc9ay4kJHJlcGxhY2UsXG5xPWEhPT1ifHxrLiQkaHRtbDUmJmUuaGlzdG9yeSYmZiE9PWsuJCRzdGF0ZTtpZihyfHxxKXI9ITEsYy4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7dmFyIGI9ay5hYnNVcmwoKSxkPWMuJGJyb2FkY2FzdChcIiRsb2NhdGlvbkNoYW5nZVN0YXJ0XCIsYixhLGsuJCRzdGF0ZSxmKS5kZWZhdWx0UHJldmVudGVkO2suYWJzVXJsKCk9PT1iJiYoZD8oay4kJHBhcnNlKGEpLGsuJCRzdGF0ZT1mKToocSYmaChiLGcsZj09PWsuJCRzdGF0ZT9udWxsOmsuJCRzdGF0ZSksbChhLGYpKSl9KTtrLiQkcmVwbGFjZT0hMX0pO3JldHVybiBrfV19ZnVuY3Rpb24gTmUoKXt2YXIgYj0hMCxhPXRoaXM7dGhpcy5kZWJ1Z0VuYWJsZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSk/KGI9YSx0aGlzKTpifTt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLGZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGQoYSl7YSBpbnN0YW5jZW9mIEVycm9yJiYoYS5zdGFjaz9hPWEubWVzc2FnZSYmLTE9PT1hLnN0YWNrLmluZGV4T2YoYS5tZXNzYWdlKT9cblwiRXJyb3I6IFwiK2EubWVzc2FnZStcIlxcblwiK2Euc3RhY2s6YS5zdGFjazphLnNvdXJjZVVSTCYmKGE9YS5tZXNzYWdlK1wiXFxuXCIrYS5zb3VyY2VVUkwrXCI6XCIrYS5saW5lKSk7cmV0dXJuIGF9ZnVuY3Rpb24gZShhKXt2YXIgYj1jLmNvbnNvbGV8fHt9LGU9YlthXXx8Yi5sb2d8fHo7YT0hMTt0cnl7YT0hIWUuYXBwbHl9Y2F0Y2gobCl7fXJldHVybiBhP2Z1bmN0aW9uKCl7dmFyIGE9W107cyhhcmd1bWVudHMsZnVuY3Rpb24oYil7YS5wdXNoKGQoYikpfSk7cmV0dXJuIGUuYXBwbHkoYixhKX06ZnVuY3Rpb24oYSxiKXtlKGEsbnVsbD09Yj9cIlwiOmIpfX1yZXR1cm57bG9nOmUoXCJsb2dcIiksaW5mbzplKFwiaW5mb1wiKSx3YXJuOmUoXCJ3YXJuXCIpLGVycm9yOmUoXCJlcnJvclwiKSxkZWJ1ZzpmdW5jdGlvbigpe3ZhciBjPWUoXCJkZWJ1Z1wiKTtyZXR1cm4gZnVuY3Rpb24oKXtiJiZjLmFwcGx5KGEsYXJndW1lbnRzKX19KCl9fV19ZnVuY3Rpb24gdGEoYixhKXtpZihcIl9fZGVmaW5lR2V0dGVyX19cIj09PVxuYnx8XCJfX2RlZmluZVNldHRlcl9fXCI9PT1ifHxcIl9fbG9va3VwR2V0dGVyX19cIj09PWJ8fFwiX19sb29rdXBTZXR0ZXJfX1wiPT09Ynx8XCJfX3Byb3RvX19cIj09PWIpdGhyb3cgbGEoXCJpc2VjZmxkXCIsYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gbWEoYixhKXtpZihiKXtpZihiLmNvbnN0cnVjdG9yPT09Yil0aHJvdyBsYShcImlzZWNmblwiLGEpO2lmKGIud2luZG93PT09Yil0aHJvdyBsYShcImlzZWN3aW5kb3dcIixhKTtpZihiLmNoaWxkcmVuJiYoYi5ub2RlTmFtZXx8Yi5wcm9wJiZiLmF0dHImJmIuZmluZCkpdGhyb3cgbGEoXCJpc2VjZG9tXCIsYSk7aWYoYj09PU9iamVjdCl0aHJvdyBsYShcImlzZWNvYmpcIixhKTt9cmV0dXJuIGJ9ZnVuY3Rpb24gZmMoYil7cmV0dXJuIGIuY29uc3RhbnR9ZnVuY3Rpb24gaGIoYixhLGMsZCxlKXttYShiLGUpO21hKGEsZSk7Yz1jLnNwbGl0KFwiLlwiKTtmb3IodmFyIGYsZz0wOzE8Yy5sZW5ndGg7ZysrKXtmPXRhKGMuc2hpZnQoKSxlKTt2YXIgaD0wPT09ZyYmYSYmYVtmXXx8XG5iW2ZdO2h8fChoPXt9LGJbZl09aCk7Yj1tYShoLGUpfWY9dGEoYy5zaGlmdCgpLGUpO21hKGJbZl0sZSk7cmV0dXJuIGJbZl09ZH1mdW5jdGlvbiBRYShiKXtyZXR1cm5cImNvbnN0cnVjdG9yXCI9PWJ9ZnVuY3Rpb24gZWQoYixhLGMsZCxlLGYsZyl7dGEoYixmKTt0YShhLGYpO3RhKGMsZik7dGEoZCxmKTt0YShlLGYpO3ZhciBoPWZ1bmN0aW9uKGEpe3JldHVybiBtYShhLGYpfSxsPWd8fFFhKGIpP2g6cGEsaz1nfHxRYShhKT9oOnBhLG09Z3x8UWEoYyk/aDpwYSxuPWd8fFFhKGQpP2g6cGEscT1nfHxRYShlKT9oOnBhO3JldHVybiBmdW5jdGlvbihmLGcpe3ZhciBoPWcmJmcuaGFzT3duUHJvcGVydHkoYik/ZzpmO2lmKG51bGw9PWgpcmV0dXJuIGg7aD1sKGhbYl0pO2lmKCFhKXJldHVybiBoO2lmKG51bGw9PWgpcmV0dXJuIHQ7aD1rKGhbYV0pO2lmKCFjKXJldHVybiBoO2lmKG51bGw9PWgpcmV0dXJuIHQ7aD1tKGhbY10pO2lmKCFkKXJldHVybiBoO2lmKG51bGw9PWgpcmV0dXJuIHQ7XG5oPW4oaFtkXSk7cmV0dXJuIGU/bnVsbD09aD90Omg9cShoW2VdKTpofX1mdW5jdGlvbiB4ZihiLGEpe3JldHVybiBmdW5jdGlvbihjLGQpe3JldHVybiBiKGMsZCxtYSxhKX19ZnVuY3Rpb24geWYoYixhLGMpe3ZhciBkPWEuZXhwZW5zaXZlQ2hlY2tzLGU9ZD96ZjpBZixmPWVbYl07aWYoZilyZXR1cm4gZjt2YXIgZz1iLnNwbGl0KFwiLlwiKSxoPWcubGVuZ3RoO2lmKGEuY3NwKWY9Nj5oP2VkKGdbMF0sZ1sxXSxnWzJdLGdbM10sZ1s0XSxjLGQpOmZ1bmN0aW9uKGEsYil7dmFyIGU9MCxmO2RvIGY9ZWQoZ1tlKytdLGdbZSsrXSxnW2UrK10sZ1tlKytdLGdbZSsrXSxjLGQpKGEsYiksYj10LGE9Zjt3aGlsZShlPGgpO3JldHVybiBmfTtlbHNle3ZhciBsPVwiXCI7ZCYmKGwrPVwicyA9IGVzbyhzLCBmZSk7XFxubCA9IGVzbyhsLCBmZSk7XFxuXCIpO3ZhciBrPWQ7cyhnLGZ1bmN0aW9uKGEsYil7dGEoYSxjKTt2YXIgZT0oYj9cInNcIjonKChsJiZsLmhhc093blByb3BlcnR5KFwiJythKydcIikpP2w6cyknKStcblwiLlwiK2E7aWYoZHx8UWEoYSkpZT1cImVzbyhcIitlK1wiLCBmZSlcIixrPSEwO2wrPVwiaWYocyA9PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkO1xcbnM9XCIrZStcIjtcXG5cIn0pO2wrPVwicmV0dXJuIHM7XCI7YT1uZXcgRnVuY3Rpb24oXCJzXCIsXCJsXCIsXCJlc29cIixcImZlXCIsbCk7YS50b1N0cmluZz1lYShsKTtrJiYoYT14ZihhLGMpKTtmPWF9Zi5zaGFyZWRHZXR0ZXI9ITA7Zi5hc3NpZ249ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBoYihhLGQsYixjLGIpfTtyZXR1cm4gZVtiXT1mfWZ1bmN0aW9uIGdjKGIpe3JldHVybiBHKGIudmFsdWVPZik/Yi52YWx1ZU9mKCk6QmYuY2FsbChiKX1mdW5jdGlvbiBPZSgpe3ZhciBiPWhhKCksYT1oYSgpO3RoaXMuJGdldD1bXCIkZmlsdGVyXCIsXCIkc25pZmZlclwiLGZ1bmN0aW9uKGMsZCl7ZnVuY3Rpb24gZShhKXt2YXIgYj1hO2Euc2hhcmVkR2V0dGVyJiYoYj1mdW5jdGlvbihiLGMpe3JldHVybiBhKGIsYyl9LGIubGl0ZXJhbD1hLmxpdGVyYWwsYi5jb25zdGFudD1hLmNvbnN0YW50LFxuYi5hc3NpZ249YS5hc3NpZ24pO3JldHVybiBifWZ1bmN0aW9uIGYoYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPWFbY107ZS5jb25zdGFudHx8KGUuaW5wdXRzP2YoZS5pbnB1dHMsYik6LTE9PT1iLmluZGV4T2YoZSkmJmIucHVzaChlKSl9cmV0dXJuIGJ9ZnVuY3Rpb24gZyhhLGIpe3JldHVybiBudWxsPT1hfHxudWxsPT1iP2E9PT1iOlwib2JqZWN0XCI9PT10eXBlb2YgYSYmKGE9Z2MoYSksXCJvYmplY3RcIj09PXR5cGVvZiBhKT8hMTphPT09Ynx8YSE9PWEmJmIhPT1ifWZ1bmN0aW9uIGgoYSxiLGMsZCl7dmFyIGU9ZC4kJGlucHV0c3x8KGQuJCRpbnB1dHM9ZihkLmlucHV0cyxbXSkpLGg7aWYoMT09PWUubGVuZ3RoKXt2YXIgbD1nLGU9ZVswXTtyZXR1cm4gYS4kd2F0Y2goZnVuY3Rpb24oYSl7dmFyIGI9ZShhKTtnKGIsbCl8fChoPWQoYSksbD1iJiZnYyhiKSk7cmV0dXJuIGh9LGIsYyl9Zm9yKHZhciBrPVtdLHE9MCxuPWUubGVuZ3RoO3E8bjtxKyspa1txXT1cbmc7cmV0dXJuIGEuJHdhdGNoKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0hMSxjPTAsZj1lLmxlbmd0aDtjPGY7YysrKXt2YXIgbD1lW2NdKGEpO2lmKGJ8fChiPSFnKGwsa1tjXSkpKWtbY109bCYmZ2MobCl9YiYmKGg9ZChhKSk7cmV0dXJuIGh9LGIsYyl9ZnVuY3Rpb24gbChhLGIsYyxkKXt2YXIgZSxmO3JldHVybiBlPWEuJHdhdGNoKGZ1bmN0aW9uKGEpe3JldHVybiBkKGEpfSxmdW5jdGlvbihhLGMsZCl7Zj1hO0coYikmJmIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3koYSkmJmQuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7eShmKSYmZSgpfSl9LGMpfWZ1bmN0aW9uIGsoYSxiLGMsZCl7ZnVuY3Rpb24gZShhKXt2YXIgYj0hMDtzKGEsZnVuY3Rpb24oYSl7eShhKXx8KGI9ITEpfSk7cmV0dXJuIGJ9dmFyIGYsZztyZXR1cm4gZj1hLiR3YXRjaChmdW5jdGlvbihhKXtyZXR1cm4gZChhKX0sZnVuY3Rpb24oYSxjLGQpe2c9YTtHKGIpJiZiLmNhbGwodGhpcyxhLGMsZCk7ZShhKSYmZC4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtlKGcpJiZcbmYoKX0pfSxjKX1mdW5jdGlvbiBtKGEsYixjLGQpe3ZhciBlO3JldHVybiBlPWEuJHdhdGNoKGZ1bmN0aW9uKGEpe3JldHVybiBkKGEpfSxmdW5jdGlvbihhLGMsZCl7RyhiKSYmYi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZSgpfSxjKX1mdW5jdGlvbiBuKGEsYil7aWYoIWIpcmV0dXJuIGE7dmFyIGM9YS4kJHdhdGNoRGVsZWdhdGUsYz1jIT09ayYmYyE9PWw/ZnVuY3Rpb24oYyxkKXt2YXIgZT1hKGMsZCk7cmV0dXJuIGIoZSxjLGQpfTpmdW5jdGlvbihjLGQpe3ZhciBlPWEoYyxkKSxmPWIoZSxjLGQpO3JldHVybiB5KGUpP2Y6ZX07YS4kJHdhdGNoRGVsZWdhdGUmJmEuJCR3YXRjaERlbGVnYXRlIT09aD9jLiQkd2F0Y2hEZWxlZ2F0ZT1hLiQkd2F0Y2hEZWxlZ2F0ZTpiLiRzdGF0ZWZ1bHx8KGMuJCR3YXRjaERlbGVnYXRlPWgsYy5pbnB1dHM9W2FdKTtyZXR1cm4gY312YXIgcT17Y3NwOmQuY3NwLGV4cGVuc2l2ZUNoZWNrczohMX0sdT17Y3NwOmQuY3NwLGV4cGVuc2l2ZUNoZWNrczohMH07XG5yZXR1cm4gZnVuY3Rpb24oZCxmLGcpe3ZhciB2LHcsTDtzd2l0Y2godHlwZW9mIGQpe2Nhc2UgXCJzdHJpbmdcIjpMPWQ9ZC50cmltKCk7dmFyIEM9Zz9hOmI7dj1DW0xdO3Z8fChcIjpcIj09PWQuY2hhckF0KDApJiZcIjpcIj09PWQuY2hhckF0KDEpJiYodz0hMCxkPWQuc3Vic3RyaW5nKDIpKSxnPWc/dTpxLHY9bmV3IGhjKGcpLHY9KG5ldyBpYih2LGMsZykpLnBhcnNlKGQpLHYuY29uc3RhbnQ/di4kJHdhdGNoRGVsZWdhdGU9bTp3Pyh2PWUodiksdi4kJHdhdGNoRGVsZWdhdGU9di5saXRlcmFsP2s6bCk6di5pbnB1dHMmJih2LiQkd2F0Y2hEZWxlZ2F0ZT1oKSxDW0xdPXYpO3JldHVybiBuKHYsZik7Y2FzZSBcImZ1bmN0aW9uXCI6cmV0dXJuIG4oZCxmKTtkZWZhdWx0OnJldHVybiBuKHosZil9fX1dfWZ1bmN0aW9uIFFlKCl7dGhpcy4kZ2V0PVtcIiRyb290U2NvcGVcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsZnVuY3Rpb24oYixhKXtyZXR1cm4gZmQoZnVuY3Rpb24oYSl7Yi4kZXZhbEFzeW5jKGEpfSxcbmEpfV19ZnVuY3Rpb24gUmUoKXt0aGlzLiRnZXQ9W1wiJGJyb3dzZXJcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsZnVuY3Rpb24oYixhKXtyZXR1cm4gZmQoZnVuY3Rpb24oYSl7Yi5kZWZlcihhKX0sYSl9XX1mdW5jdGlvbiBmZChiLGEpe2Z1bmN0aW9uIGMoYSxiLGMpe2Z1bmN0aW9uIGQoYil7cmV0dXJuIGZ1bmN0aW9uKGMpe2V8fChlPSEwLGIuY2FsbChhLGMpKX19dmFyIGU9ITE7cmV0dXJuW2QoYiksZChjKV19ZnVuY3Rpb24gZCgpe3RoaXMuJCRzdGF0ZT17c3RhdHVzOjB9fWZ1bmN0aW9uIGUoYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyl7Yi5jYWxsKGEsYyl9fWZ1bmN0aW9uIGYoYyl7IWMucHJvY2Vzc1NjaGVkdWxlZCYmYy5wZW5kaW5nJiYoYy5wcm9jZXNzU2NoZWR1bGVkPSEwLGIoZnVuY3Rpb24oKXt2YXIgYixkLGU7ZT1jLnBlbmRpbmc7Yy5wcm9jZXNzU2NoZWR1bGVkPSExO2MucGVuZGluZz10O2Zvcih2YXIgZj0wLGc9ZS5sZW5ndGg7ZjxnOysrZil7ZD1lW2ZdWzBdO2I9ZVtmXVtjLnN0YXR1c107XG50cnl7RyhiKT9kLnJlc29sdmUoYihjLnZhbHVlKSk6MT09PWMuc3RhdHVzP2QucmVzb2x2ZShjLnZhbHVlKTpkLnJlamVjdChjLnZhbHVlKX1jYXRjaChoKXtkLnJlamVjdChoKSxhKGgpfX19KSl9ZnVuY3Rpb24gZygpe3RoaXMucHJvbWlzZT1uZXcgZDt0aGlzLnJlc29sdmU9ZSh0aGlzLHRoaXMucmVzb2x2ZSk7dGhpcy5yZWplY3Q9ZSh0aGlzLHRoaXMucmVqZWN0KTt0aGlzLm5vdGlmeT1lKHRoaXMsdGhpcy5ub3RpZnkpfXZhciBoPVMoXCIkcVwiLFR5cGVFcnJvcik7ZC5wcm90b3R5cGU9e3RoZW46ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW5ldyBnO3RoaXMuJCRzdGF0ZS5wZW5kaW5nPXRoaXMuJCRzdGF0ZS5wZW5kaW5nfHxbXTt0aGlzLiQkc3RhdGUucGVuZGluZy5wdXNoKFtkLGEsYixjXSk7MDx0aGlzLiQkc3RhdGUuc3RhdHVzJiZmKHRoaXMuJCRzdGF0ZSk7cmV0dXJuIGQucHJvbWlzZX0sXCJjYXRjaFwiOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRoZW4obnVsbCxhKX0sXCJmaW5hbGx5XCI6ZnVuY3Rpb24oYSxcbmIpe3JldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24oYil7cmV0dXJuIGsoYiwhMCxhKX0sZnVuY3Rpb24oYil7cmV0dXJuIGsoYiwhMSxhKX0sYil9fTtnLnByb3RvdHlwZT17cmVzb2x2ZTpmdW5jdGlvbihhKXt0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXN8fChhPT09dGhpcy5wcm9taXNlP3RoaXMuJCRyZWplY3QoaChcInFjeWNsZVwiLGEpKTp0aGlzLiQkcmVzb2x2ZShhKSl9LCQkcmVzb2x2ZTpmdW5jdGlvbihiKXt2YXIgZCxlO2U9Yyh0aGlzLHRoaXMuJCRyZXNvbHZlLHRoaXMuJCRyZWplY3QpO3RyeXtpZihJKGIpfHxHKGIpKWQ9YiYmYi50aGVuO0coZCk/KHRoaXMucHJvbWlzZS4kJHN0YXRlLnN0YXR1cz0tMSxkLmNhbGwoYixlWzBdLGVbMV0sdGhpcy5ub3RpZnkpKToodGhpcy5wcm9taXNlLiQkc3RhdGUudmFsdWU9Yix0aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXM9MSxmKHRoaXMucHJvbWlzZS4kJHN0YXRlKSl9Y2F0Y2goZyl7ZVsxXShnKSxhKGcpfX0scmVqZWN0OmZ1bmN0aW9uKGEpe3RoaXMucHJvbWlzZS4kJHN0YXRlLnN0YXR1c3x8XG50aGlzLiQkcmVqZWN0KGEpfSwkJHJlamVjdDpmdW5jdGlvbihhKXt0aGlzLnByb21pc2UuJCRzdGF0ZS52YWx1ZT1hO3RoaXMucHJvbWlzZS4kJHN0YXRlLnN0YXR1cz0yO2YodGhpcy5wcm9taXNlLiQkc3RhdGUpfSxub3RpZnk6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5wcm9taXNlLiQkc3RhdGUucGVuZGluZzswPj10aGlzLnByb21pc2UuJCRzdGF0ZS5zdGF0dXMmJmQmJmQubGVuZ3RoJiZiKGZ1bmN0aW9uKCl7Zm9yKHZhciBiLGUsZj0wLGc9ZC5sZW5ndGg7ZjxnO2YrKyl7ZT1kW2ZdWzBdO2I9ZFtmXVszXTt0cnl7ZS5ub3RpZnkoRyhiKT9iKGMpOmMpfWNhdGNoKGgpe2EoaCl9fX0pfX07dmFyIGw9ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgZztiP2MucmVzb2x2ZShhKTpjLnJlamVjdChhKTtyZXR1cm4gYy5wcm9taXNlfSxrPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1udWxsO3RyeXtHKGMpJiYoZD1jKCkpfWNhdGNoKGUpe3JldHVybiBsKGUsITEpfXJldHVybiBkJiZHKGQudGhlbik/XG5kLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbChhLGIpfSxmdW5jdGlvbihhKXtyZXR1cm4gbChhLCExKX0pOmwoYSxiKX0sbT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uZXcgZztlLnJlc29sdmUoYSk7cmV0dXJuIGUucHJvbWlzZS50aGVuKGIsYyxkKX0sbj1mdW5jdGlvbiB1KGEpe2lmKCFHKGEpKXRocm93IGgoXCJub3JzbHZyXCIsYSk7aWYoISh0aGlzIGluc3RhbmNlb2YgdSkpcmV0dXJuIG5ldyB1KGEpO3ZhciBiPW5ldyBnO2EoZnVuY3Rpb24oYSl7Yi5yZXNvbHZlKGEpfSxmdW5jdGlvbihhKXtiLnJlamVjdChhKX0pO3JldHVybiBiLnByb21pc2V9O24uZGVmZXI9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGd9O24ucmVqZWN0PWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBnO2IucmVqZWN0KGEpO3JldHVybiBiLnByb21pc2V9O24ud2hlbj1tO24uYWxsPWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBnLGM9MCxkPUgoYSk/W106e307cyhhLGZ1bmN0aW9uKGEsZSl7YysrO20oYSkudGhlbihmdW5jdGlvbihhKXtkLmhhc093blByb3BlcnR5KGUpfHxcbihkW2VdPWEsLS1jfHxiLnJlc29sdmUoZCkpfSxmdW5jdGlvbihhKXtkLmhhc093blByb3BlcnR5KGUpfHxiLnJlamVjdChhKX0pfSk7MD09PWMmJmIucmVzb2x2ZShkKTtyZXR1cm4gYi5wcm9taXNlfTtyZXR1cm4gbn1mdW5jdGlvbiAkZSgpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGIsYSl7dmFyIGM9Yi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGIud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lLGQ9Yi5jYW5jZWxBbmltYXRpb25GcmFtZXx8Yi53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8Yi53ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUsZT0hIWMsZj1lP2Z1bmN0aW9uKGEpe3ZhciBiPWMoYSk7cmV0dXJuIGZ1bmN0aW9uKCl7ZChiKX19OmZ1bmN0aW9uKGIpe3ZhciBjPWEoYiwxNi42NiwhMSk7cmV0dXJuIGZ1bmN0aW9uKCl7YS5jYW5jZWwoYyl9fTtmLnN1cHBvcnRlZD1lO3JldHVybiBmfV19ZnVuY3Rpb24gUGUoKXt2YXIgYj1cbjEwLGE9UyhcIiRyb290U2NvcGVcIiksYz1udWxsLGQ9bnVsbDt0aGlzLmRpZ2VzdFR0bD1mdW5jdGlvbihhKXthcmd1bWVudHMubGVuZ3RoJiYoYj1hKTtyZXR1cm4gYn07dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixcIiRwYXJzZVwiLFwiJGJyb3dzZXJcIixmdW5jdGlvbihlLGYsZyxoKXtmdW5jdGlvbiBsKCl7dGhpcy4kaWQ9KytvYjt0aGlzLiQkcGhhc2U9dGhpcy4kcGFyZW50PXRoaXMuJCR3YXRjaGVycz10aGlzLiQkbmV4dFNpYmxpbmc9dGhpcy4kJHByZXZTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1udWxsO3RoaXMuJHJvb3Q9dGhpczt0aGlzLiQkZGVzdHJveWVkPSExO3RoaXMuJCRsaXN0ZW5lcnM9e307dGhpcy4kJGxpc3RlbmVyQ291bnQ9e307dGhpcy4kJGlzb2xhdGVCaW5kaW5ncz1udWxsfWZ1bmN0aW9uIGsoYil7aWYoci4kJHBoYXNlKXRocm93IGEoXCJpbnByb2dcIixyLiQkcGhhc2UpO3IuJCRwaGFzZT1ifWZ1bmN0aW9uIG0oYSxcbmIsYyl7ZG8gYS4kJGxpc3RlbmVyQ291bnRbY10tPWIsMD09PWEuJCRsaXN0ZW5lckNvdW50W2NdJiZkZWxldGUgYS4kJGxpc3RlbmVyQ291bnRbY107d2hpbGUoYT1hLiRwYXJlbnQpfWZ1bmN0aW9uIG4oKXt9ZnVuY3Rpb24gcSgpe2Zvcig7di5sZW5ndGg7KXRyeXt2LnNoaWZ0KCkoKX1jYXRjaChhKXtmKGEpfWQ9bnVsbH1mdW5jdGlvbiB1KCl7bnVsbD09PWQmJihkPWguZGVmZXIoZnVuY3Rpb24oKXtyLiRhcHBseShxKX0pKX1sLnByb3RvdHlwZT17Y29uc3RydWN0b3I6bCwkbmV3OmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe2QuJCRkZXN0cm95ZWQ9ITB9dmFyIGQ7Yj1ifHx0aGlzO2E/KGQ9bmV3IGwsZC4kcm9vdD10aGlzLiRyb290KToodGhpcy4kJENoaWxkU2NvcGV8fCh0aGlzLiQkQ2hpbGRTY29wZT1mdW5jdGlvbigpe3RoaXMuJCR3YXRjaGVycz10aGlzLiQkbmV4dFNpYmxpbmc9dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPW51bGw7dGhpcy4kJGxpc3RlbmVycz1cbnt9O3RoaXMuJCRsaXN0ZW5lckNvdW50PXt9O3RoaXMuJGlkPSsrb2I7dGhpcy4kJENoaWxkU2NvcGU9bnVsbH0sdGhpcy4kJENoaWxkU2NvcGUucHJvdG90eXBlPXRoaXMpLGQ9bmV3IHRoaXMuJCRDaGlsZFNjb3BlKTtkLiRwYXJlbnQ9YjtkLiQkcHJldlNpYmxpbmc9Yi4kJGNoaWxkVGFpbDtiLiQkY2hpbGRIZWFkPyhiLiQkY2hpbGRUYWlsLiQkbmV4dFNpYmxpbmc9ZCxiLiQkY2hpbGRUYWlsPWQpOmIuJCRjaGlsZEhlYWQ9Yi4kJGNoaWxkVGFpbD1kOyhhfHxiIT10aGlzKSYmZC4kb24oXCIkZGVzdHJveVwiLGMpO3JldHVybiBkfSwkd2F0Y2g6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPWcoYSk7aWYoZS4kJHdhdGNoRGVsZWdhdGUpcmV0dXJuIGUuJCR3YXRjaERlbGVnYXRlKHRoaXMsYixkLGUpO3ZhciBmPXRoaXMuJCR3YXRjaGVycyxoPXtmbjpiLGxhc3Q6bixnZXQ6ZSxleHA6YSxlcTohIWR9O2M9bnVsbDtHKGIpfHwoaC5mbj16KTtmfHwoZj10aGlzLiQkd2F0Y2hlcnM9W10pO2YudW5zaGlmdChoKTtcbnJldHVybiBmdW5jdGlvbigpe1hhKGYsaCk7Yz1udWxsfX0sJHdhdGNoR3JvdXA6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKCl7aD0hMTtsPyhsPSExLGIoZSxlLGcpKTpiKGUsZCxnKX12YXIgZD1BcnJheShhLmxlbmd0aCksZT1BcnJheShhLmxlbmd0aCksZj1bXSxnPXRoaXMsaD0hMSxsPSEwO2lmKCFhLmxlbmd0aCl7dmFyIGs9ITA7Zy4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7ayYmYihlLGUsZyl9KTtyZXR1cm4gZnVuY3Rpb24oKXtrPSExfX1pZigxPT09YS5sZW5ndGgpcmV0dXJuIHRoaXMuJHdhdGNoKGFbMF0sZnVuY3Rpb24oYSxjLGYpe2VbMF09YTtkWzBdPWM7YihlLGE9PT1jP2U6ZCxmKX0pO3MoYSxmdW5jdGlvbihhLGIpe3ZhciBsPWcuJHdhdGNoKGEsZnVuY3Rpb24oYSxmKXtlW2JdPWE7ZFtiXT1mO2h8fChoPSEwLGcuJGV2YWxBc3luYyhjKSl9KTtmLnB1c2gobCl9KTtyZXR1cm4gZnVuY3Rpb24oKXtmb3IoO2YubGVuZ3RoOylmLnNoaWZ0KCkoKX19LCR3YXRjaENvbGxlY3Rpb246ZnVuY3Rpb24oYSxcbmIpe2Z1bmN0aW9uIGMoYSl7ZT1hO3ZhciBiLGQsZyxoO2lmKCFCKGUpKXtpZihJKGUpKWlmKFRhKGUpKWZvcihmIT09cSYmKGY9cSx1PWYubGVuZ3RoPTAsaysrKSxhPWUubGVuZ3RoLHUhPT1hJiYoaysrLGYubGVuZ3RoPXU9YSksYj0wO2I8YTtiKyspaD1mW2JdLGc9ZVtiXSxkPWghPT1oJiZnIT09ZyxkfHxoPT09Z3x8KGsrKyxmW2JdPWcpO2Vsc2V7ZiE9PW0mJihmPW09e30sdT0wLGsrKyk7YT0wO2ZvcihiIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShiKSYmKGErKyxnPWVbYl0saD1mW2JdLGIgaW4gZj8oZD1oIT09aCYmZyE9PWcsZHx8aD09PWd8fChrKyssZltiXT1nKSk6KHUrKyxmW2JdPWcsaysrKSk7aWYodT5hKWZvcihiIGluIGsrKyxmKWUuaGFzT3duUHJvcGVydHkoYil8fCh1LS0sZGVsZXRlIGZbYl0pfWVsc2UgZiE9PWUmJihmPWUsaysrKTtyZXR1cm4ga319Yy4kc3RhdGVmdWw9ITA7dmFyIGQ9dGhpcyxlLGYsaCxsPTE8Yi5sZW5ndGgsaz0wLG49ZyhhLGMpLHE9W10sbT1cbnt9LHA9ITAsdT0wO3JldHVybiB0aGlzLiR3YXRjaChuLGZ1bmN0aW9uKCl7cD8ocD0hMSxiKGUsZSxkKSk6YihlLGgsZCk7aWYobClpZihJKGUpKWlmKFRhKGUpKXtoPUFycmF5KGUubGVuZ3RoKTtmb3IodmFyIGE9MDthPGUubGVuZ3RoO2ErKyloW2FdPWVbYV19ZWxzZSBmb3IoYSBpbiBoPXt9LGUpc2MuY2FsbChlLGEpJiYoaFthXT1lW2FdKTtlbHNlIGg9ZX0pfSwkZGlnZXN0OmZ1bmN0aW9uKCl7dmFyIGUsZyxsLG0sdSx2LHM9Yix0LFc9W10seSxKO2soXCIkZGlnZXN0XCIpO2guJCRjaGVja1VybENoYW5nZSgpO3RoaXM9PT1yJiZudWxsIT09ZCYmKGguZGVmZXIuY2FuY2VsKGQpLHEoKSk7Yz1udWxsO2Rve3Y9ITE7Zm9yKHQ9dGhpcztQLmxlbmd0aDspe3RyeXtKPVAuc2hpZnQoKSxKLnNjb3BlLiRldmFsKEouZXhwcmVzc2lvbixKLmxvY2Fscyl9Y2F0Y2goRCl7ZihEKX1jPW51bGx9YTpkb3tpZihtPXQuJCR3YXRjaGVycylmb3IodT1tLmxlbmd0aDt1LS07KXRyeXtpZihlPW1bdV0paWYoKGc9XG5lLmdldCh0KSkhPT0obD1lLmxhc3QpJiYhKGUuZXE/Z2EoZyxsKTpcIm51bWJlclwiPT09dHlwZW9mIGcmJlwibnVtYmVyXCI9PT10eXBlb2YgbCYmaXNOYU4oZykmJmlzTmFOKGwpKSl2PSEwLGM9ZSxlLmxhc3Q9ZS5lcT9FYShnLG51bGwpOmcsZS5mbihnLGw9PT1uP2c6bCx0KSw1PnMmJih5PTQtcyxXW3ldfHwoV1t5XT1bXSksV1t5XS5wdXNoKHttc2c6RyhlLmV4cCk/XCJmbjogXCIrKGUuZXhwLm5hbWV8fGUuZXhwLnRvU3RyaW5nKCkpOmUuZXhwLG5ld1ZhbDpnLG9sZFZhbDpsfSkpO2Vsc2UgaWYoZT09PWMpe3Y9ITE7YnJlYWsgYX19Y2F0Y2goQil7ZihCKX1pZighKG09dC4kJGNoaWxkSGVhZHx8dCE9PXRoaXMmJnQuJCRuZXh0U2libGluZykpZm9yKDt0IT09dGhpcyYmIShtPXQuJCRuZXh0U2libGluZyk7KXQ9dC4kcGFyZW50fXdoaWxlKHQ9bSk7aWYoKHZ8fFAubGVuZ3RoKSYmIXMtLSl0aHJvdyByLiQkcGhhc2U9bnVsbCxhKFwiaW5mZGlnXCIsYixXKTt9d2hpbGUodnx8UC5sZW5ndGgpO1xuZm9yKHIuJCRwaGFzZT1udWxsO3AubGVuZ3RoOyl0cnl7cC5zaGlmdCgpKCl9Y2F0Y2goZGEpe2YoZGEpfX0sJGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZighdGhpcy4kJGRlc3Ryb3llZCl7dmFyIGE9dGhpcy4kcGFyZW50O3RoaXMuJGJyb2FkY2FzdChcIiRkZXN0cm95XCIpO3RoaXMuJCRkZXN0cm95ZWQ9ITA7aWYodGhpcyE9PXIpe2Zvcih2YXIgYiBpbiB0aGlzLiQkbGlzdGVuZXJDb3VudCltKHRoaXMsdGhpcy4kJGxpc3RlbmVyQ291bnRbYl0sYik7YS4kJGNoaWxkSGVhZD09dGhpcyYmKGEuJCRjaGlsZEhlYWQ9dGhpcy4kJG5leHRTaWJsaW5nKTthLiQkY2hpbGRUYWlsPT10aGlzJiYoYS4kJGNoaWxkVGFpbD10aGlzLiQkcHJldlNpYmxpbmcpO3RoaXMuJCRwcmV2U2libGluZyYmKHRoaXMuJCRwcmV2U2libGluZy4kJG5leHRTaWJsaW5nPXRoaXMuJCRuZXh0U2libGluZyk7dGhpcy4kJG5leHRTaWJsaW5nJiYodGhpcy4kJG5leHRTaWJsaW5nLiQkcHJldlNpYmxpbmc9dGhpcy4kJHByZXZTaWJsaW5nKTtcbnRoaXMuJGRlc3Ryb3k9dGhpcy4kZGlnZXN0PXRoaXMuJGFwcGx5PXRoaXMuJGV2YWxBc3luYz10aGlzLiRhcHBseUFzeW5jPXo7dGhpcy4kb249dGhpcy4kd2F0Y2g9dGhpcy4kd2F0Y2hHcm91cD1mdW5jdGlvbigpe3JldHVybiB6fTt0aGlzLiQkbGlzdGVuZXJzPXt9O3RoaXMuJHBhcmVudD10aGlzLiQkbmV4dFNpYmxpbmc9dGhpcy4kJHByZXZTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD10aGlzLiRyb290PXRoaXMuJCR3YXRjaGVycz1udWxsfX19LCRldmFsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGcoYSkodGhpcyxiKX0sJGV2YWxBc3luYzpmdW5jdGlvbihhLGIpe3IuJCRwaGFzZXx8UC5sZW5ndGh8fGguZGVmZXIoZnVuY3Rpb24oKXtQLmxlbmd0aCYmci4kZGlnZXN0KCl9KTtQLnB1c2goe3Njb3BlOnRoaXMsZXhwcmVzc2lvbjphLGxvY2FsczpifSl9LCQkcG9zdERpZ2VzdDpmdW5jdGlvbihhKXtwLnB1c2goYSl9LCRhcHBseTpmdW5jdGlvbihhKXt0cnl7cmV0dXJuIGsoXCIkYXBwbHlcIiksXG50aGlzLiRldmFsKGEpfWNhdGNoKGIpe2YoYil9ZmluYWxseXtyLiQkcGhhc2U9bnVsbDt0cnl7ci4kZGlnZXN0KCl9Y2F0Y2goYyl7dGhyb3cgZihjKSxjO319fSwkYXBwbHlBc3luYzpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7Yy4kZXZhbChhKX12YXIgYz10aGlzO2EmJnYucHVzaChiKTt1KCl9LCRvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuJCRsaXN0ZW5lcnNbYV07Y3x8KHRoaXMuJCRsaXN0ZW5lcnNbYV09Yz1bXSk7Yy5wdXNoKGIpO3ZhciBkPXRoaXM7ZG8gZC4kJGxpc3RlbmVyQ291bnRbYV18fChkLiQkbGlzdGVuZXJDb3VudFthXT0wKSxkLiQkbGlzdGVuZXJDb3VudFthXSsrO3doaWxlKGQ9ZC4kcGFyZW50KTt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuaW5kZXhPZihiKTstMSE9PWQmJihjW2RdPW51bGwsbShlLDEsYSkpfX0sJGVtaXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkLGU9dGhpcyxnPSExLGg9e25hbWU6YSx0YXJnZXRTY29wZTplLFxuc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7Zz0hMH0scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXtoLmRlZmF1bHRQcmV2ZW50ZWQ9ITB9LGRlZmF1bHRQcmV2ZW50ZWQ6ITF9LGw9WWEoW2hdLGFyZ3VtZW50cywxKSxrLG07ZG97ZD1lLiQkbGlzdGVuZXJzW2FdfHxjO2guY3VycmVudFNjb3BlPWU7az0wO2ZvcihtPWQubGVuZ3RoO2s8bTtrKyspaWYoZFtrXSl0cnl7ZFtrXS5hcHBseShudWxsLGwpfWNhdGNoKG4pe2Yobil9ZWxzZSBkLnNwbGljZShrLDEpLGstLSxtLS07aWYoZylyZXR1cm4gaC5jdXJyZW50U2NvcGU9bnVsbCxoO2U9ZS4kcGFyZW50fXdoaWxlKGUpO2guY3VycmVudFNjb3BlPW51bGw7cmV0dXJuIGh9LCRicm9hZGNhc3Q6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9dGhpcyxlPXtuYW1lOmEsdGFyZ2V0U2NvcGU6dGhpcyxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2UuZGVmYXVsdFByZXZlbnRlZD0hMH0sZGVmYXVsdFByZXZlbnRlZDohMX07aWYoIXRoaXMuJCRsaXN0ZW5lckNvdW50W2FdKXJldHVybiBlO1xuZm9yKHZhciBnPVlhKFtlXSxhcmd1bWVudHMsMSksaCxsO2M9ZDspe2UuY3VycmVudFNjb3BlPWM7ZD1jLiQkbGlzdGVuZXJzW2FdfHxbXTtoPTA7Zm9yKGw9ZC5sZW5ndGg7aDxsO2grKylpZihkW2hdKXRyeXtkW2hdLmFwcGx5KG51bGwsZyl9Y2F0Y2goayl7ZihrKX1lbHNlIGQuc3BsaWNlKGgsMSksaC0tLGwtLTtpZighKGQ9Yy4kJGxpc3RlbmVyQ291bnRbYV0mJmMuJCRjaGlsZEhlYWR8fGMhPT10aGlzJiZjLiQkbmV4dFNpYmxpbmcpKWZvcig7YyE9PXRoaXMmJiEoZD1jLiQkbmV4dFNpYmxpbmcpOyljPWMuJHBhcmVudH1lLmN1cnJlbnRTY29wZT1udWxsO3JldHVybiBlfX07dmFyIHI9bmV3IGwsUD1yLiQkYXN5bmNRdWV1ZT1bXSxwPXIuJCRwb3N0RGlnZXN0UXVldWU9W10sdj1yLiQkYXBwbHlBc3luY1F1ZXVlPVtdO3JldHVybiByfV19ZnVuY3Rpb24gU2QoKXt2YXIgYj0vXlxccyooaHR0cHM/fGZ0cHxtYWlsdG98dGVsfGZpbGUpOi8sYT0vXlxccyooKGh0dHBzP3xmdHB8ZmlsZXxibG9iKTp8ZGF0YTppbWFnZVxcLykvO1xudGhpcy5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihhKXtyZXR1cm4geShhKT8oYj1hLHRoaXMpOmJ9O3RoaXMuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0PWZ1bmN0aW9uKGIpe3JldHVybiB5KGIpPyhhPWIsdGhpcyk6YX07dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dmFyIGU9ZD9hOmIsZjtmPUJhKGMpLmhyZWY7cmV0dXJuXCJcIj09PWZ8fGYubWF0Y2goZSk/YzpcInVuc2FmZTpcIitmfX19ZnVuY3Rpb24gQ2YoYil7aWYoXCJzZWxmXCI9PT1iKXJldHVybiBiO2lmKEYoYikpe2lmKC0xPGIuaW5kZXhPZihcIioqKlwiKSl0aHJvdyBDYShcIml3Y2FyZFwiLGIpO2I9Z2QoYikucmVwbGFjZShcIlxcXFwqXFxcXCpcIixcIi4qXCIpLnJlcGxhY2UoXCJcXFxcKlwiLFwiW146Ly4/JjtdKlwiKTtyZXR1cm4gbmV3IFJlZ0V4cChcIl5cIitiK1wiJFwiKX1pZihwYihiKSlyZXR1cm4gbmV3IFJlZ0V4cChcIl5cIitiLnNvdXJjZStcIiRcIik7dGhyb3cgQ2EoXCJpbWF0Y2hlclwiKTt9ZnVuY3Rpb24gaGQoYil7dmFyIGE9XG5bXTt5KGIpJiZzKGIsZnVuY3Rpb24oYil7YS5wdXNoKENmKGIpKX0pO3JldHVybiBhfWZ1bmN0aW9uIFRlKCl7dGhpcy5TQ0VfQ09OVEVYVFM9bmE7dmFyIGI9W1wic2VsZlwiXSxhPVtdO3RoaXMucmVzb3VyY2VVcmxXaGl0ZWxpc3Q9ZnVuY3Rpb24oYSl7YXJndW1lbnRzLmxlbmd0aCYmKGI9aGQoYSkpO3JldHVybiBifTt0aGlzLnJlc291cmNlVXJsQmxhY2tsaXN0PWZ1bmN0aW9uKGIpe2FyZ3VtZW50cy5sZW5ndGgmJihhPWhkKGIpKTtyZXR1cm4gYX07dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGQoYSxiKXtyZXR1cm5cInNlbGZcIj09PWE/JGMoYik6ISFhLmV4ZWMoYi5ocmVmKX1mdW5jdGlvbiBlKGEpe3ZhciBiPWZ1bmN0aW9uKGEpe3RoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gYX19O2EmJihiLnByb3RvdHlwZT1uZXcgYSk7Yi5wcm90b3R5cGUudmFsdWVPZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCl9O1xuYi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpLnRvU3RyaW5nKCl9O3JldHVybiBifXZhciBmPWZ1bmN0aW9uKGEpe3Rocm93IENhKFwidW5zYWZlXCIpO307Yy5oYXMoXCIkc2FuaXRpemVcIikmJihmPWMuZ2V0KFwiJHNhbml0aXplXCIpKTt2YXIgZz1lKCksaD17fTtoW25hLkhUTUxdPWUoZyk7aFtuYS5DU1NdPWUoZyk7aFtuYS5VUkxdPWUoZyk7aFtuYS5KU109ZShnKTtoW25hLlJFU09VUkNFX1VSTF09ZShoW25hLlVSTF0pO3JldHVybnt0cnVzdEFzOmZ1bmN0aW9uKGEsYil7dmFyIGM9aC5oYXNPd25Qcm9wZXJ0eShhKT9oW2FdOm51bGw7aWYoIWMpdGhyb3cgQ2EoXCJpY29udGV4dFwiLGEsYik7aWYobnVsbD09PWJ8fGI9PT10fHxcIlwiPT09YilyZXR1cm4gYjtpZihcInN0cmluZ1wiIT09dHlwZW9mIGIpdGhyb3cgQ2EoXCJpdHlwZVwiLGEpO3JldHVybiBuZXcgYyhiKX0sZ2V0VHJ1c3RlZDpmdW5jdGlvbihjLGUpe2lmKG51bGw9PT1cbmV8fGU9PT10fHxcIlwiPT09ZSlyZXR1cm4gZTt2YXIgZz1oLmhhc093blByb3BlcnR5KGMpP2hbY106bnVsbDtpZihnJiZlIGluc3RhbmNlb2YgZylyZXR1cm4gZS4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpO2lmKGM9PT1uYS5SRVNPVVJDRV9VUkwpe3ZhciBnPUJhKGUudG9TdHJpbmcoKSksbixxLHU9ITE7bj0wO2ZvcihxPWIubGVuZ3RoO248cTtuKyspaWYoZChiW25dLGcpKXt1PSEwO2JyZWFrfWlmKHUpZm9yKG49MCxxPWEubGVuZ3RoO248cTtuKyspaWYoZChhW25dLGcpKXt1PSExO2JyZWFrfWlmKHUpcmV0dXJuIGU7dGhyb3cgQ2EoXCJpbnNlY3VybFwiLGUudG9TdHJpbmcoKSk7fWlmKGM9PT1uYS5IVE1MKXJldHVybiBmKGUpO3Rocm93IENhKFwidW5zYWZlXCIpO30sdmFsdWVPZjpmdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIGc/YS4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpOmF9fX1dfWZ1bmN0aW9uIFNlKCl7dmFyIGI9ITA7dGhpcy5lbmFibGVkPWZ1bmN0aW9uKGEpe2FyZ3VtZW50cy5sZW5ndGgmJlxuKGI9ISFhKTtyZXR1cm4gYn07dGhpcy4kZ2V0PVtcIiRwYXJzZVwiLFwiJHNjZURlbGVnYXRlXCIsZnVuY3Rpb24oYSxjKXtpZihiJiY4PlJhKXRocm93IENhKFwiaWVxdWlya3NcIik7dmFyIGQ9cmEobmEpO2QuaXNFbmFibGVkPWZ1bmN0aW9uKCl7cmV0dXJuIGJ9O2QudHJ1c3RBcz1jLnRydXN0QXM7ZC5nZXRUcnVzdGVkPWMuZ2V0VHJ1c3RlZDtkLnZhbHVlT2Y9Yy52YWx1ZU9mO2J8fChkLnRydXN0QXM9ZC5nZXRUcnVzdGVkPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGJ9LGQudmFsdWVPZj1wYSk7ZC5wYXJzZUFzPWZ1bmN0aW9uKGIsYyl7dmFyIGU9YShjKTtyZXR1cm4gZS5saXRlcmFsJiZlLmNvbnN0YW50P2U6YShjLGZ1bmN0aW9uKGEpe3JldHVybiBkLmdldFRydXN0ZWQoYixhKX0pfTt2YXIgZT1kLnBhcnNlQXMsZj1kLmdldFRydXN0ZWQsZz1kLnRydXN0QXM7cyhuYSxmdW5jdGlvbihhLGIpe3ZhciBjPVEoYik7ZFtkYihcInBhcnNlX2FzX1wiK2MpXT1mdW5jdGlvbihiKXtyZXR1cm4gZShhLFxuYil9O2RbZGIoXCJnZXRfdHJ1c3RlZF9cIitjKV09ZnVuY3Rpb24oYil7cmV0dXJuIGYoYSxiKX07ZFtkYihcInRydXN0X2FzX1wiK2MpXT1mdW5jdGlvbihiKXtyZXR1cm4gZyhhLGIpfX0pO3JldHVybiBkfV19ZnVuY3Rpb24gVWUoKXt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oYixhKXt2YXIgYz17fSxkPWJhKCgvYW5kcm9pZCAoXFxkKykvLmV4ZWMoUSgoYi5uYXZpZ2F0b3J8fHt9KS51c2VyQWdlbnQpKXx8W10pWzFdKSxlPS9Cb3hlZS9pLnRlc3QoKGIubmF2aWdhdG9yfHx7fSkudXNlckFnZW50KSxmPWFbMF18fHt9LGcsaD0vXihNb3p8d2Via2l0fG1zKSg/PVtBLVpdKS8sbD1mLmJvZHkmJmYuYm9keS5zdHlsZSxrPSExLG09ITE7aWYobCl7Zm9yKHZhciBuIGluIGwpaWYoaz1oLmV4ZWMobikpe2c9a1swXTtnPWcuc3Vic3RyKDAsMSkudG9VcHBlckNhc2UoKStnLnN1YnN0cigxKTticmVha31nfHwoZz1cIldlYmtpdE9wYWNpdHlcImluIGwmJlwid2Via2l0XCIpO1xuaz0hIShcInRyYW5zaXRpb25cImluIGx8fGcrXCJUcmFuc2l0aW9uXCJpbiBsKTttPSEhKFwiYW5pbWF0aW9uXCJpbiBsfHxnK1wiQW5pbWF0aW9uXCJpbiBsKTshZHx8ayYmbXx8KGs9RihmLmJvZHkuc3R5bGUud2Via2l0VHJhbnNpdGlvbiksbT1GKGYuYm9keS5zdHlsZS53ZWJraXRBbmltYXRpb24pKX1yZXR1cm57aGlzdG9yeTohKCFiLmhpc3Rvcnl8fCFiLmhpc3RvcnkucHVzaFN0YXRlfHw0PmR8fGUpLGhhc0V2ZW50OmZ1bmN0aW9uKGEpe2lmKFwiaW5wdXRcIj09PWEmJjExPj1SYSlyZXR1cm4hMTtpZihCKGNbYV0pKXt2YXIgYj1mLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Y1thXT1cIm9uXCIrYSBpbiBifXJldHVybiBjW2FdfSxjc3A6YmIoKSx2ZW5kb3JQcmVmaXg6Zyx0cmFuc2l0aW9uczprLGFuaW1hdGlvbnM6bSxhbmRyb2lkOmR9fV19ZnVuY3Rpb24gV2UoKXt0aGlzLiRnZXQ9W1wiJHRlbXBsYXRlQ2FjaGVcIixcIiRodHRwXCIsXCIkcVwiLGZ1bmN0aW9uKGIsYSxjKXtmdW5jdGlvbiBkKGUsZil7ZC50b3RhbFBlbmRpbmdSZXF1ZXN0cysrO1xudmFyIGc9YS5kZWZhdWx0cyYmYS5kZWZhdWx0cy50cmFuc2Zvcm1SZXNwb25zZTtIKGcpP2c9Zy5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT1aYn0pOmc9PT1aYiYmKGc9bnVsbCk7cmV0dXJuIGEuZ2V0KGUse2NhY2hlOmIsdHJhbnNmb3JtUmVzcG9uc2U6Z30pLmZpbmFsbHkoZnVuY3Rpb24oKXtkLnRvdGFsUGVuZGluZ1JlcXVlc3RzLS19KS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBhLmRhdGF9LGZ1bmN0aW9uKGEpe2lmKCFmKXRocm93IGphKFwidHBsb2FkXCIsZSk7cmV0dXJuIGMucmVqZWN0KGEpfSl9ZC50b3RhbFBlbmRpbmdSZXF1ZXN0cz0wO3JldHVybiBkfV19ZnVuY3Rpb24gWGUoKXt0aGlzLiRnZXQ9W1wiJHJvb3RTY29wZVwiLFwiJGJyb3dzZXJcIixcIiRsb2NhdGlvblwiLGZ1bmN0aW9uKGIsYSxjKXtyZXR1cm57ZmluZEJpbmRpbmdzOmZ1bmN0aW9uKGEsYixjKXthPWEuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm5nLWJpbmRpbmdcIik7dmFyIGc9W107cyhhLGZ1bmN0aW9uKGEpe3ZhciBkPVxuY2EuZWxlbWVudChhKS5kYXRhKFwiJGJpbmRpbmdcIik7ZCYmcyhkLGZ1bmN0aW9uKGQpe2M/KG5ldyBSZWdFeHAoXCIoXnxcXFxccylcIitnZChiKStcIihcXFxcc3xcXFxcfHwkKVwiKSkudGVzdChkKSYmZy5wdXNoKGEpOi0xIT1kLmluZGV4T2YoYikmJmcucHVzaChhKX0pfSk7cmV0dXJuIGd9LGZpbmRNb2RlbHM6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZz1bXCJuZy1cIixcImRhdGEtbmctXCIsXCJuZ1xcXFw6XCJdLGg9MDtoPGcubGVuZ3RoOysraCl7dmFyIGw9YS5xdWVyeVNlbGVjdG9yQWxsKFwiW1wiK2dbaF0rXCJtb2RlbFwiKyhjP1wiPVwiOlwiKj1cIikrJ1wiJytiKydcIl0nKTtpZihsLmxlbmd0aClyZXR1cm4gbH19LGdldExvY2F0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGMudXJsKCl9LHNldExvY2F0aW9uOmZ1bmN0aW9uKGEpe2EhPT1jLnVybCgpJiYoYy51cmwoYSksYi4kZGlnZXN0KCkpfSx3aGVuU3RhYmxlOmZ1bmN0aW9uKGIpe2Eubm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cyhiKX19fV19ZnVuY3Rpb24gWWUoKXt0aGlzLiRnZXQ9XG5bXCIkcm9vdFNjb3BlXCIsXCIkYnJvd3NlclwiLFwiJHFcIixcIiQkcVwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixmdW5jdGlvbihiLGEsYyxkLGUpe2Z1bmN0aW9uIGYoZixsLGspe3ZhciBtPXkoaykmJiFrLG49KG0/ZDpjKS5kZWZlcigpLHE9bi5wcm9taXNlO2w9YS5kZWZlcihmdW5jdGlvbigpe3RyeXtuLnJlc29sdmUoZigpKX1jYXRjaChhKXtuLnJlamVjdChhKSxlKGEpfWZpbmFsbHl7ZGVsZXRlIGdbcS4kJHRpbWVvdXRJZF19bXx8Yi4kYXBwbHkoKX0sbCk7cS4kJHRpbWVvdXRJZD1sO2dbbF09bjtyZXR1cm4gcX12YXIgZz17fTtmLmNhbmNlbD1mdW5jdGlvbihiKXtyZXR1cm4gYiYmYi4kJHRpbWVvdXRJZCBpbiBnPyhnW2IuJCR0aW1lb3V0SWRdLnJlamVjdChcImNhbmNlbGVkXCIpLGRlbGV0ZSBnW2IuJCR0aW1lb3V0SWRdLGEuZGVmZXIuY2FuY2VsKGIuJCR0aW1lb3V0SWQpKTohMX07cmV0dXJuIGZ9XX1mdW5jdGlvbiBCYShiKXtSYSYmKFouc2V0QXR0cmlidXRlKFwiaHJlZlwiLGIpLGI9Wi5ocmVmKTtcblouc2V0QXR0cmlidXRlKFwiaHJlZlwiLGIpO3JldHVybntocmVmOlouaHJlZixwcm90b2NvbDpaLnByb3RvY29sP1oucHJvdG9jb2wucmVwbGFjZSgvOiQvLFwiXCIpOlwiXCIsaG9zdDpaLmhvc3Qsc2VhcmNoOlouc2VhcmNoP1ouc2VhcmNoLnJlcGxhY2UoL15cXD8vLFwiXCIpOlwiXCIsaGFzaDpaLmhhc2g/Wi5oYXNoLnJlcGxhY2UoL14jLyxcIlwiKTpcIlwiLGhvc3RuYW1lOlouaG9zdG5hbWUscG9ydDpaLnBvcnQscGF0aG5hbWU6XCIvXCI9PT1aLnBhdGhuYW1lLmNoYXJBdCgwKT9aLnBhdGhuYW1lOlwiL1wiK1oucGF0aG5hbWV9fWZ1bmN0aW9uICRjKGIpe2I9RihiKT9CYShiKTpiO3JldHVybiBiLnByb3RvY29sPT09aWQucHJvdG9jb2wmJmIuaG9zdD09PWlkLmhvc3R9ZnVuY3Rpb24gWmUoKXt0aGlzLiRnZXQ9ZWEoTSl9ZnVuY3Rpb24gRWMoYil7ZnVuY3Rpb24gYShjLGQpe2lmKEkoYykpe3ZhciBlPXt9O3MoYyxmdW5jdGlvbihiLGMpe2VbY109YShjLGIpfSk7cmV0dXJuIGV9cmV0dXJuIGIuZmFjdG9yeShjK1xuXCJGaWx0ZXJcIixkKX10aGlzLnJlZ2lzdGVyPWE7dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYS5nZXQoYitcIkZpbHRlclwiKX19XTthKFwiY3VycmVuY3lcIixqZCk7YShcImRhdGVcIixrZCk7YShcImZpbHRlclwiLERmKTthKFwianNvblwiLEVmKTthKFwibGltaXRUb1wiLEZmKTthKFwibG93ZXJjYXNlXCIsR2YpO2EoXCJudW1iZXJcIixsZCk7YShcIm9yZGVyQnlcIixtZCk7YShcInVwcGVyY2FzZVwiLEhmKX1mdW5jdGlvbiBEZigpe3JldHVybiBmdW5jdGlvbihiLGEsYyl7aWYoIUgoYikpcmV0dXJuIGI7dmFyIGQ7c3dpdGNoKHR5cGVvZiBhKXtjYXNlIFwiZnVuY3Rpb25cIjpicmVhaztjYXNlIFwiYm9vbGVhblwiOmNhc2UgXCJudW1iZXJcIjpjYXNlIFwic3RyaW5nXCI6ZD0hMDtjYXNlIFwib2JqZWN0XCI6YT1JZihhLGMsZCk7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gYn1yZXR1cm4gYi5maWx0ZXIoYSl9fWZ1bmN0aW9uIElmKGIsYSxjKXt2YXIgZD1JKGIpJiZcIiRcImluXG5iOyEwPT09YT9hPWdhOkcoYSl8fChhPWZ1bmN0aW9uKGEsYil7aWYoSShhKXx8SShiKSlyZXR1cm4hMTthPVEoXCJcIithKTtiPVEoXCJcIitiKTtyZXR1cm4tMSE9PWEuaW5kZXhPZihiKX0pO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZCYmIUkoZSk/SWEoZSxiLiQsYSwhMSk6SWEoZSxiLGEsYyl9fWZ1bmN0aW9uIElhKGIsYSxjLGQsZSl7dmFyIGY9dHlwZW9mIGIsZz10eXBlb2YgYTtpZihcInN0cmluZ1wiPT09ZyYmXCIhXCI9PT1hLmNoYXJBdCgwKSlyZXR1cm4hSWEoYixhLnN1YnN0cmluZygxKSxjLGQpO2lmKEgoYikpcmV0dXJuIGIuc29tZShmdW5jdGlvbihiKXtyZXR1cm4gSWEoYixhLGMsZCl9KTtzd2l0Y2goZil7Y2FzZSBcIm9iamVjdFwiOnZhciBoO2lmKGQpe2ZvcihoIGluIGIpaWYoXCIkXCIhPT1oLmNoYXJBdCgwKSYmSWEoYltoXSxhLGMsITApKXJldHVybiEwO3JldHVybiBlPyExOklhKGIsYSxjLCExKX1pZihcIm9iamVjdFwiPT09Zyl7Zm9yKGggaW4gYSlpZihlPWFbaF0sIUcoZSkmJlxuKGY9XCIkXCI9PT1oLCFJYShmP2I6YltoXSxlLGMsZixmKSkpcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuIGMoYixhKTtjYXNlIFwiZnVuY3Rpb25cIjpyZXR1cm4hMTtkZWZhdWx0OnJldHVybiBjKGIsYSl9fWZ1bmN0aW9uIGpkKGIpe3ZhciBhPWIuTlVNQkVSX0ZPUk1BVFM7cmV0dXJuIGZ1bmN0aW9uKGIsZCxlKXtCKGQpJiYoZD1hLkNVUlJFTkNZX1NZTSk7QihlKSYmKGU9YS5QQVRURVJOU1sxXS5tYXhGcmFjKTtyZXR1cm4gbnVsbD09Yj9iOm5kKGIsYS5QQVRURVJOU1sxXSxhLkdST1VQX1NFUCxhLkRFQ0lNQUxfU0VQLGUpLnJlcGxhY2UoL1xcdTAwQTQvZyxkKX19ZnVuY3Rpb24gbGQoYil7dmFyIGE9Yi5OVU1CRVJfRk9STUFUUztyZXR1cm4gZnVuY3Rpb24oYixkKXtyZXR1cm4gbnVsbD09Yj9iOm5kKGIsYS5QQVRURVJOU1swXSxhLkdST1VQX1NFUCxhLkRFQ0lNQUxfU0VQLGQpfX1mdW5jdGlvbiBuZChiLGEsYyxkLGUpe2lmKCFpc0Zpbml0ZShiKXx8SShiKSlyZXR1cm5cIlwiO3ZhciBmPVxuMD5iO2I9TWF0aC5hYnMoYik7dmFyIGc9YitcIlwiLGg9XCJcIixsPVtdLGs9ITE7aWYoLTEhPT1nLmluZGV4T2YoXCJlXCIpKXt2YXIgbT1nLm1hdGNoKC8oW1xcZFxcLl0rKWUoLT8pKFxcZCspLyk7bSYmXCItXCI9PW1bMl0mJm1bM10+ZSsxP2I9MDooaD1nLGs9ITApfWlmKGspMDxlJiYxPmImJihoPWIudG9GaXhlZChlKSxiPXBhcnNlRmxvYXQoaCkpO2Vsc2V7Zz0oZy5zcGxpdChvZClbMV18fFwiXCIpLmxlbmd0aDtCKGUpJiYoZT1NYXRoLm1pbihNYXRoLm1heChhLm1pbkZyYWMsZyksYS5tYXhGcmFjKSk7Yj0rKE1hdGgucm91bmQoKyhiLnRvU3RyaW5nKCkrXCJlXCIrZSkpLnRvU3RyaW5nKCkrXCJlXCIrLWUpO3ZhciBnPShcIlwiK2IpLnNwbGl0KG9kKSxrPWdbMF0sZz1nWzFdfHxcIlwiLG49MCxxPWEubGdTaXplLHU9YS5nU2l6ZTtpZihrLmxlbmd0aD49cSt1KWZvcihuPWsubGVuZ3RoLXEsbT0wO208bjttKyspMD09PShuLW0pJXUmJjAhPT1tJiYoaCs9YyksaCs9ay5jaGFyQXQobSk7Zm9yKG09bjttPGsubGVuZ3RoO20rKykwPT09XG4oay5sZW5ndGgtbSklcSYmMCE9PW0mJihoKz1jKSxoKz1rLmNoYXJBdChtKTtmb3IoO2cubGVuZ3RoPGU7KWcrPVwiMFwiO2UmJlwiMFwiIT09ZSYmKGgrPWQrZy5zdWJzdHIoMCxlKSl9MD09PWImJihmPSExKTtsLnB1c2goZj9hLm5lZ1ByZTphLnBvc1ByZSxoLGY/YS5uZWdTdWY6YS5wb3NTdWYpO3JldHVybiBsLmpvaW4oXCJcIil9ZnVuY3Rpb24gSmIoYixhLGMpe3ZhciBkPVwiXCI7MD5iJiYoZD1cIi1cIixiPS1iKTtmb3IoYj1cIlwiK2I7Yi5sZW5ndGg8YTspYj1cIjBcIitiO2MmJihiPWIuc3Vic3RyKGIubGVuZ3RoLWEpKTtyZXR1cm4gZCtifWZ1bmN0aW9uICQoYixhLGMsZCl7Yz1jfHwwO3JldHVybiBmdW5jdGlvbihlKXtlPWVbXCJnZXRcIitiXSgpO2lmKDA8Y3x8ZT4tYyllKz1jOzA9PT1lJiYtMTI9PWMmJihlPTEyKTtyZXR1cm4gSmIoZSxhLGQpfX1mdW5jdGlvbiBLYihiLGEpe3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlPWNbXCJnZXRcIitiXSgpLGY9dmIoYT9cIlNIT1JUXCIrYjpiKTtyZXR1cm4gZFtmXVtlXX19XG5mdW5jdGlvbiBwZChiKXt2YXIgYT0obmV3IERhdGUoYiwwLDEpKS5nZXREYXkoKTtyZXR1cm4gbmV3IERhdGUoYiwwLCg0Pj1hPzU6MTIpLWEpfWZ1bmN0aW9uIHFkKGIpe3JldHVybiBmdW5jdGlvbihhKXt2YXIgYz1wZChhLmdldEZ1bGxZZWFyKCkpO2E9K25ldyBEYXRlKGEuZ2V0RnVsbFllYXIoKSxhLmdldE1vbnRoKCksYS5nZXREYXRlKCkrKDQtYS5nZXREYXkoKSkpLStjO2E9MStNYXRoLnJvdW5kKGEvNjA0OEU1KTtyZXR1cm4gSmIoYSxiKX19ZnVuY3Rpb24ga2QoYil7ZnVuY3Rpb24gYShhKXt2YXIgYjtpZihiPWEubWF0Y2goYykpe2E9bmV3IERhdGUoMCk7dmFyIGY9MCxnPTAsaD1iWzhdP2Euc2V0VVRDRnVsbFllYXI6YS5zZXRGdWxsWWVhcixsPWJbOF0/YS5zZXRVVENIb3VyczphLnNldEhvdXJzO2JbOV0mJihmPWJhKGJbOV0rYlsxMF0pLGc9YmEoYls5XStiWzExXSkpO2guY2FsbChhLGJhKGJbMV0pLGJhKGJbMl0pLTEsYmEoYlszXSkpO2Y9YmEoYls0XXx8MCktZjtcbmc9YmEoYls1XXx8MCktZztoPWJhKGJbNl18fDApO2I9TWF0aC5yb3VuZCgxRTMqcGFyc2VGbG9hdChcIjAuXCIrKGJbN118fDApKSk7bC5jYWxsKGEsZixnLGgsYil9cmV0dXJuIGF9dmFyIGM9L14oXFxkezR9KS0/KFxcZFxcZCktPyhcXGRcXGQpKD86VChcXGRcXGQpKD86Oj8oXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzpcXC4oXFxkKykpPyk/KT8oWnwoWystXSkoXFxkXFxkKTo/KFxcZFxcZCkpPyk/JC87cmV0dXJuIGZ1bmN0aW9uKGMsZSxmKXt2YXIgZz1cIlwiLGg9W10sbCxrO2U9ZXx8XCJtZWRpdW1EYXRlXCI7ZT1iLkRBVEVUSU1FX0ZPUk1BVFNbZV18fGU7RihjKSYmKGM9SmYudGVzdChjKT9iYShjKTphKGMpKTtWKGMpJiYoYz1uZXcgRGF0ZShjKSk7aWYoIXFhKGMpKXJldHVybiBjO2Zvcig7ZTspKGs9S2YuZXhlYyhlKSk/KGg9WWEoaCxrLDEpLGU9aC5wb3AoKSk6KGgucHVzaChlKSxlPW51bGwpO2YmJlwiVVRDXCI9PT1mJiYoYz1uZXcgRGF0ZShjLmdldFRpbWUoKSksYy5zZXRNaW51dGVzKGMuZ2V0TWludXRlcygpK1xuYy5nZXRUaW1lem9uZU9mZnNldCgpKSk7cyhoLGZ1bmN0aW9uKGEpe2w9TGZbYV07Zys9bD9sKGMsYi5EQVRFVElNRV9GT1JNQVRTKTphLnJlcGxhY2UoLyheJ3wnJCkvZyxcIlwiKS5yZXBsYWNlKC8nJy9nLFwiJ1wiKX0pO3JldHVybiBnfX1mdW5jdGlvbiBFZigpe3JldHVybiBmdW5jdGlvbihiLGEpe0IoYSkmJihhPTIpO3JldHVybiAkYShiLGEpfX1mdW5jdGlvbiBGZigpe3JldHVybiBmdW5jdGlvbihiLGEpe1YoYikmJihiPWIudG9TdHJpbmcoKSk7cmV0dXJuIEgoYil8fEYoYik/KGE9SW5maW5pdHk9PT1NYXRoLmFicyhOdW1iZXIoYSkpP051bWJlcihhKTpiYShhKSk/MDxhP2Iuc2xpY2UoMCxhKTpiLnNsaWNlKGEpOkYoYik/XCJcIjpbXTpifX1mdW5jdGlvbiBtZChiKXtyZXR1cm4gZnVuY3Rpb24oYSxjLGQpe2Z1bmN0aW9uIGUoYSxiKXtyZXR1cm4gYj9mdW5jdGlvbihiLGMpe3JldHVybiBhKGMsYil9OmF9ZnVuY3Rpb24gZihhKXtzd2l0Y2godHlwZW9mIGEpe2Nhc2UgXCJudW1iZXJcIjpjYXNlIFwiYm9vbGVhblwiOmNhc2UgXCJzdHJpbmdcIjpyZXR1cm4hMDtcbmRlZmF1bHQ6cmV0dXJuITF9fWZ1bmN0aW9uIGcoYSl7cmV0dXJuIG51bGw9PT1hP1wibnVsbFwiOlwiZnVuY3Rpb25cIj09PXR5cGVvZiBhLnZhbHVlT2YmJihhPWEudmFsdWVPZigpLGYoYSkpfHxcImZ1bmN0aW9uXCI9PT10eXBlb2YgYS50b1N0cmluZyYmKGE9YS50b1N0cmluZygpLGYoYSkpP2E6XCJcIn1mdW5jdGlvbiBoKGEsYil7dmFyIGM9dHlwZW9mIGEsZD10eXBlb2YgYjtjPT09ZCYmXCJvYmplY3RcIj09PWMmJihhPWcoYSksYj1nKGIpKTtyZXR1cm4gYz09PWQ/KFwic3RyaW5nXCI9PT1jJiYoYT1hLnRvTG93ZXJDYXNlKCksYj1iLnRvTG93ZXJDYXNlKCkpLGE9PT1iPzA6YTxiPy0xOjEpOmM8ZD8tMToxfWlmKCFUYShhKSlyZXR1cm4gYTtjPUgoYyk/YzpbY107MD09PWMubGVuZ3RoJiYoYz1bXCIrXCJdKTtjPWMubWFwKGZ1bmN0aW9uKGEpe3ZhciBjPSExLGQ9YXx8cGE7aWYoRihhKSl7aWYoXCIrXCI9PWEuY2hhckF0KDApfHxcIi1cIj09YS5jaGFyQXQoMCkpYz1cIi1cIj09YS5jaGFyQXQoMCksYT1hLnN1YnN0cmluZygxKTtcbmlmKFwiXCI9PT1hKXJldHVybiBlKGgsYyk7ZD1iKGEpO2lmKGQuY29uc3RhbnQpe3ZhciBmPWQoKTtyZXR1cm4gZShmdW5jdGlvbihhLGIpe3JldHVybiBoKGFbZl0sYltmXSl9LGMpfX1yZXR1cm4gZShmdW5jdGlvbihhLGIpe3JldHVybiBoKGQoYSksZChiKSl9LGMpfSk7cmV0dXJuIFphLmNhbGwoYSkuc29ydChlKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF0oYSxiKTtpZigwIT09ZSlyZXR1cm4gZX1yZXR1cm4gMH0sZCkpfX1mdW5jdGlvbiBKYShiKXtHKGIpJiYoYj17bGluazpifSk7Yi5yZXN0cmljdD1iLnJlc3RyaWN0fHxcIkFDXCI7cmV0dXJuIGVhKGIpfWZ1bmN0aW9uIHJkKGIsYSxjLGQsZSl7dmFyIGY9dGhpcyxnPVtdLGg9Zi4kJHBhcmVudEZvcm09Yi5wYXJlbnQoKS5jb250cm9sbGVyKFwiZm9ybVwiKXx8TGI7Zi4kZXJyb3I9e307Zi4kJHN1Y2Nlc3M9e307Zi4kcGVuZGluZz10O2YuJG5hbWU9ZShhLm5hbWV8fGEubmdGb3JtfHxcblwiXCIpKGMpO2YuJGRpcnR5PSExO2YuJHByaXN0aW5lPSEwO2YuJHZhbGlkPSEwO2YuJGludmFsaWQ9ITE7Zi4kc3VibWl0dGVkPSExO2guJGFkZENvbnRyb2woZik7Zi4kcm9sbGJhY2tWaWV3VmFsdWU9ZnVuY3Rpb24oKXtzKGcsZnVuY3Rpb24oYSl7YS4kcm9sbGJhY2tWaWV3VmFsdWUoKX0pfTtmLiRjb21taXRWaWV3VmFsdWU9ZnVuY3Rpb24oKXtzKGcsZnVuY3Rpb24oYSl7YS4kY29tbWl0Vmlld1ZhbHVlKCl9KX07Zi4kYWRkQ29udHJvbD1mdW5jdGlvbihhKXtNYShhLiRuYW1lLFwiaW5wdXRcIik7Zy5wdXNoKGEpO2EuJG5hbWUmJihmW2EuJG5hbWVdPWEpfTtmLiQkcmVuYW1lQ29udHJvbD1mdW5jdGlvbihhLGIpe3ZhciBjPWEuJG5hbWU7ZltjXT09PWEmJmRlbGV0ZSBmW2NdO2ZbYl09YTthLiRuYW1lPWJ9O2YuJHJlbW92ZUNvbnRyb2w9ZnVuY3Rpb24oYSl7YS4kbmFtZSYmZlthLiRuYW1lXT09PWEmJmRlbGV0ZSBmW2EuJG5hbWVdO3MoZi4kcGVuZGluZyxmdW5jdGlvbihiLGMpe2YuJHNldFZhbGlkaXR5KGMsXG5udWxsLGEpfSk7cyhmLiRlcnJvcixmdW5jdGlvbihiLGMpe2YuJHNldFZhbGlkaXR5KGMsbnVsbCxhKX0pO3MoZi4kJHN1Y2Nlc3MsZnVuY3Rpb24oYixjKXtmLiRzZXRWYWxpZGl0eShjLG51bGwsYSl9KTtYYShnLGEpfTtzZCh7Y3RybDp0aGlzLCRlbGVtZW50OmIsc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hW2JdO2Q/LTE9PT1kLmluZGV4T2YoYykmJmQucHVzaChjKTphW2JdPVtjXX0sdW5zZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWFbYl07ZCYmKFhhKGQsYyksMD09PWQubGVuZ3RoJiZkZWxldGUgYVtiXSl9LHBhcmVudEZvcm06aCwkYW5pbWF0ZTpkfSk7Zi4kc2V0RGlydHk9ZnVuY3Rpb24oKXtkLnJlbW92ZUNsYXNzKGIsU2EpO2QuYWRkQ2xhc3MoYixNYik7Zi4kZGlydHk9ITA7Zi4kcHJpc3RpbmU9ITE7aC4kc2V0RGlydHkoKX07Zi4kc2V0UHJpc3RpbmU9ZnVuY3Rpb24oKXtkLnNldENsYXNzKGIsU2EsTWIrXCIgbmctc3VibWl0dGVkXCIpO2YuJGRpcnR5PSExO2YuJHByaXN0aW5lPVxuITA7Zi4kc3VibWl0dGVkPSExO3MoZyxmdW5jdGlvbihhKXthLiRzZXRQcmlzdGluZSgpfSl9O2YuJHNldFVudG91Y2hlZD1mdW5jdGlvbigpe3MoZyxmdW5jdGlvbihhKXthLiRzZXRVbnRvdWNoZWQoKX0pfTtmLiRzZXRTdWJtaXR0ZWQ9ZnVuY3Rpb24oKXtkLmFkZENsYXNzKGIsXCJuZy1zdWJtaXR0ZWRcIik7Zi4kc3VibWl0dGVkPSEwO2guJHNldFN1Ym1pdHRlZCgpfX1mdW5jdGlvbiBpYyhiKXtiLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIGIuJGlzRW1wdHkoYSk/YTphLnRvU3RyaW5nKCl9KX1mdW5jdGlvbiBqYihiLGEsYyxkLGUsZil7dmFyIGc9UShhWzBdLnR5cGUpO2lmKCFlLmFuZHJvaWQpe3ZhciBoPSExO2Eub24oXCJjb21wb3NpdGlvbnN0YXJ0XCIsZnVuY3Rpb24oYSl7aD0hMH0pO2Eub24oXCJjb21wb3NpdGlvbmVuZFwiLGZ1bmN0aW9uKCl7aD0hMTtsKCl9KX12YXIgbD1mdW5jdGlvbihiKXtrJiYoZi5kZWZlci5jYW5jZWwoayksaz1udWxsKTtpZighaCl7dmFyIGU9XG5hLnZhbCgpO2I9YiYmYi50eXBlO1wicGFzc3dvcmRcIj09PWd8fGMubmdUcmltJiZcImZhbHNlXCI9PT1jLm5nVHJpbXx8KGU9VShlKSk7KGQuJHZpZXdWYWx1ZSE9PWV8fFwiXCI9PT1lJiZkLiQkaGFzTmF0aXZlVmFsaWRhdG9ycykmJmQuJHNldFZpZXdWYWx1ZShlLGIpfX07aWYoZS5oYXNFdmVudChcImlucHV0XCIpKWEub24oXCJpbnB1dFwiLGwpO2Vsc2V7dmFyIGssbT1mdW5jdGlvbihhLGIsYyl7a3x8KGs9Zi5kZWZlcihmdW5jdGlvbigpe2s9bnVsbDtiJiZiLnZhbHVlPT09Y3x8bChhKX0pKX07YS5vbihcImtleWRvd25cIixmdW5jdGlvbihhKXt2YXIgYj1hLmtleUNvZGU7OTE9PT1ifHwxNTxiJiYxOT5ifHwzNzw9YiYmNDA+PWJ8fG0oYSx0aGlzLHRoaXMudmFsdWUpfSk7aWYoZS5oYXNFdmVudChcInBhc3RlXCIpKWEub24oXCJwYXN0ZSBjdXRcIixtKX1hLm9uKFwiY2hhbmdlXCIsbCk7ZC4kcmVuZGVyPWZ1bmN0aW9uKCl7YS52YWwoZC4kaXNFbXB0eShkLiR2aWV3VmFsdWUpP1wiXCI6ZC4kdmlld1ZhbHVlKX19XG5mdW5jdGlvbiBOYihiLGEpe3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlLGY7aWYocWEoYykpcmV0dXJuIGM7aWYoRihjKSl7J1wiJz09Yy5jaGFyQXQoMCkmJidcIic9PWMuY2hhckF0KGMubGVuZ3RoLTEpJiYoYz1jLnN1YnN0cmluZygxLGMubGVuZ3RoLTEpKTtpZihNZi50ZXN0KGMpKXJldHVybiBuZXcgRGF0ZShjKTtiLmxhc3RJbmRleD0wO2lmKGU9Yi5leGVjKGMpKXJldHVybiBlLnNoaWZ0KCksZj1kP3t5eXl5OmQuZ2V0RnVsbFllYXIoKSxNTTpkLmdldE1vbnRoKCkrMSxkZDpkLmdldERhdGUoKSxISDpkLmdldEhvdXJzKCksbW06ZC5nZXRNaW51dGVzKCksc3M6ZC5nZXRTZWNvbmRzKCksc3NzOmQuZ2V0TWlsbGlzZWNvbmRzKCkvMUUzfTp7eXl5eToxOTcwLE1NOjEsZGQ6MSxISDowLG1tOjAsc3M6MCxzc3M6MH0scyhlLGZ1bmN0aW9uKGIsYyl7YzxhLmxlbmd0aCYmKGZbYVtjXV09K2IpfSksbmV3IERhdGUoZi55eXl5LGYuTU0tMSxmLmRkLGYuSEgsZi5tbSxmLnNzfHwwLFxuMUUzKmYuc3NzfHwwKX1yZXR1cm4gTmFOfX1mdW5jdGlvbiBrYihiLGEsYyxkKXtyZXR1cm4gZnVuY3Rpb24oZSxmLGcsaCxsLGssbSl7ZnVuY3Rpb24gbihhKXtyZXR1cm4gYSYmIShhLmdldFRpbWUmJmEuZ2V0VGltZSgpIT09YS5nZXRUaW1lKCkpfWZ1bmN0aW9uIHEoYSl7cmV0dXJuIHkoYSk/cWEoYSk/YTpjKGEpOnR9dGQoZSxmLGcsaCk7amIoZSxmLGcsaCxsLGspO3ZhciB1PWgmJmguJG9wdGlvbnMmJmguJG9wdGlvbnMudGltZXpvbmUscjtoLiQkcGFyc2VyTmFtZT1iO2guJHBhcnNlcnMucHVzaChmdW5jdGlvbihiKXtyZXR1cm4gaC4kaXNFbXB0eShiKT9udWxsOmEudGVzdChiKT8oYj1jKGIsciksXCJVVENcIj09PXUmJmIuc2V0TWludXRlcyhiLmdldE1pbnV0ZXMoKS1iLmdldFRpbWV6b25lT2Zmc2V0KCkpLGIpOnR9KTtoLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7aWYoYSYmIXFhKGEpKXRocm93IE9iKFwiZGF0ZWZtdFwiLGEpO2lmKG4oYSkpe2lmKChyPWEpJiZcIlVUQ1wiPT09XG51KXt2YXIgYj02RTQqci5nZXRUaW1lem9uZU9mZnNldCgpO3I9bmV3IERhdGUoci5nZXRUaW1lKCkrYil9cmV0dXJuIG0oXCJkYXRlXCIpKGEsZCx1KX1yPW51bGw7cmV0dXJuXCJcIn0pO2lmKHkoZy5taW4pfHxnLm5nTWluKXt2YXIgcztoLiR2YWxpZGF0b3JzLm1pbj1mdW5jdGlvbihhKXtyZXR1cm4hbihhKXx8QihzKXx8YyhhKT49c307Zy4kb2JzZXJ2ZShcIm1pblwiLGZ1bmN0aW9uKGEpe3M9cShhKTtoLiR2YWxpZGF0ZSgpfSl9aWYoeShnLm1heCl8fGcubmdNYXgpe3ZhciBwO2guJHZhbGlkYXRvcnMubWF4PWZ1bmN0aW9uKGEpe3JldHVybiFuKGEpfHxCKHApfHxjKGEpPD1wfTtnLiRvYnNlcnZlKFwibWF4XCIsZnVuY3Rpb24oYSl7cD1xKGEpO2guJHZhbGlkYXRlKCl9KX19fWZ1bmN0aW9uIHRkKGIsYSxjLGQpeyhkLiQkaGFzTmF0aXZlVmFsaWRhdG9ycz1JKGFbMF0udmFsaWRpdHkpKSYmZC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGIpe3ZhciBjPWEucHJvcChcInZhbGlkaXR5XCIpfHx7fTtcbnJldHVybiBjLmJhZElucHV0JiYhYy50eXBlTWlzbWF0Y2g/dDpifSl9ZnVuY3Rpb24gdWQoYixhLGMsZCxlKXtpZih5KGQpKXtiPWIoZCk7aWYoIWIuY29uc3RhbnQpdGhyb3cgUyhcIm5nTW9kZWxcIikoXCJjb25zdGV4cHJcIixjLGQpO3JldHVybiBiKGEpfXJldHVybiBlfWZ1bmN0aW9uIGpjKGIsYSl7Yj1cIm5nQ2xhc3NcIitiO3JldHVybltcIiRhbmltYXRlXCIsZnVuY3Rpb24oYyl7ZnVuY3Rpb24gZChhLGIpe3ZhciBjPVtdLGQ9MDthOmZvcig7ZDxhLmxlbmd0aDtkKyspe2Zvcih2YXIgZT1hW2RdLG09MDttPGIubGVuZ3RoO20rKylpZihlPT1iW21dKWNvbnRpbnVlIGE7Yy5wdXNoKGUpfXJldHVybiBjfWZ1bmN0aW9uIGUoYSl7aWYoIUgoYSkpe2lmKEYoYSkpcmV0dXJuIGEuc3BsaXQoXCIgXCIpO2lmKEkoYSkpe3ZhciBiPVtdO3MoYSxmdW5jdGlvbihhLGMpe2EmJihiPWIuY29uY2F0KGMuc3BsaXQoXCIgXCIpKSl9KTtyZXR1cm4gYn19cmV0dXJuIGF9cmV0dXJue3Jlc3RyaWN0OlwiQUNcIixsaW5rOmZ1bmN0aW9uKGYsXG5nLGgpe2Z1bmN0aW9uIGwoYSxiKXt2YXIgYz1nLmRhdGEoXCIkY2xhc3NDb3VudHNcIil8fHt9LGQ9W107cyhhLGZ1bmN0aW9uKGEpe2lmKDA8Ynx8Y1thXSljW2FdPShjW2FdfHwwKStiLGNbYV09PT0rKDA8YikmJmQucHVzaChhKX0pO2cuZGF0YShcIiRjbGFzc0NvdW50c1wiLGMpO3JldHVybiBkLmpvaW4oXCIgXCIpfWZ1bmN0aW9uIGsoYil7aWYoITA9PT1hfHxmLiRpbmRleCUyPT09YSl7dmFyIGs9ZShifHxbXSk7aWYoIW0pe3ZhciB1PWwoaywxKTtoLiRhZGRDbGFzcyh1KX1lbHNlIGlmKCFnYShiLG0pKXt2YXIgcj1lKG0pLHU9ZChrLHIpLGs9ZChyLGspLHU9bCh1LDEpLGs9bChrLC0xKTt1JiZ1Lmxlbmd0aCYmYy5hZGRDbGFzcyhnLHUpO2smJmsubGVuZ3RoJiZjLnJlbW92ZUNsYXNzKGcsayl9fW09cmEoYil9dmFyIG07Zi4kd2F0Y2goaFtiXSxrLCEwKTtoLiRvYnNlcnZlKFwiY2xhc3NcIixmdW5jdGlvbihhKXtrKGYuJGV2YWwoaFtiXSkpfSk7XCJuZ0NsYXNzXCIhPT1iJiZmLiR3YXRjaChcIiRpbmRleFwiLFxuZnVuY3Rpb24oYyxkKXt2YXIgZz1jJjE7aWYoZyE9PShkJjEpKXt2YXIgaz1lKGYuJGV2YWwoaFtiXSkpO2c9PT1hPyhnPWwoaywxKSxoLiRhZGRDbGFzcyhnKSk6KGc9bChrLC0xKSxoLiRyZW1vdmVDbGFzcyhnKSl9fSl9fX1dfWZ1bmN0aW9uIHNkKGIpe2Z1bmN0aW9uIGEoYSxiKXtiJiYhZlthXT8oay5hZGRDbGFzcyhlLGEpLGZbYV09ITApOiFiJiZmW2FdJiYoay5yZW1vdmVDbGFzcyhlLGEpLGZbYV09ITEpfWZ1bmN0aW9uIGMoYixjKXtiPWI/XCItXCIrdWMoYixcIi1cIik6XCJcIjthKGxiK2IsITA9PT1jKTthKHZkK2IsITE9PT1jKX12YXIgZD1iLmN0cmwsZT1iLiRlbGVtZW50LGY9e30sZz1iLnNldCxoPWIudW5zZXQsbD1iLnBhcmVudEZvcm0saz1iLiRhbmltYXRlO2ZbdmRdPSEoZltsYl09ZS5oYXNDbGFzcyhsYikpO2QuJHNldFZhbGlkaXR5PWZ1bmN0aW9uKGIsZSxmKXtlPT09dD8oZC4kcGVuZGluZ3x8KGQuJHBlbmRpbmc9e30pLGcoZC4kcGVuZGluZyxiLGYpKTooZC4kcGVuZGluZyYmXG5oKGQuJHBlbmRpbmcsYixmKSx3ZChkLiRwZW5kaW5nKSYmKGQuJHBlbmRpbmc9dCkpO1dhKGUpP2U/KGgoZC4kZXJyb3IsYixmKSxnKGQuJCRzdWNjZXNzLGIsZikpOihnKGQuJGVycm9yLGIsZiksaChkLiQkc3VjY2VzcyxiLGYpKTooaChkLiRlcnJvcixiLGYpLGgoZC4kJHN1Y2Nlc3MsYixmKSk7ZC4kcGVuZGluZz8oYSh4ZCwhMCksZC4kdmFsaWQ9ZC4kaW52YWxpZD10LGMoXCJcIixudWxsKSk6KGEoeGQsITEpLGQuJHZhbGlkPXdkKGQuJGVycm9yKSxkLiRpbnZhbGlkPSFkLiR2YWxpZCxjKFwiXCIsZC4kdmFsaWQpKTtlPWQuJHBlbmRpbmcmJmQuJHBlbmRpbmdbYl0/dDpkLiRlcnJvcltiXT8hMTpkLiQkc3VjY2Vzc1tiXT8hMDpudWxsO2MoYixlKTtsLiRzZXRWYWxpZGl0eShiLGUsZCl9fWZ1bmN0aW9uIHdkKGIpe2lmKGIpZm9yKHZhciBhIGluIGIpcmV0dXJuITE7cmV0dXJuITB9dmFyIE5mPS9eXFwvKC4rKVxcLyhbYS16XSopJC8sUT1mdW5jdGlvbihiKXtyZXR1cm4gRihiKT9iLnRvTG93ZXJDYXNlKCk6XG5ifSxzYz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LHZiPWZ1bmN0aW9uKGIpe3JldHVybiBGKGIpP2IudG9VcHBlckNhc2UoKTpifSxSYSxELHNhLFphPVtdLnNsaWNlLHBmPVtdLnNwbGljZSxPZj1bXS5wdXNoLERhPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsS2E9UyhcIm5nXCIpLGNhPU0uYW5ndWxhcnx8KE0uYW5ndWxhcj17fSksY2Isb2I9MDtSYT1ZLmRvY3VtZW50TW9kZTt6LiRpbmplY3Q9W107cGEuJGluamVjdD1bXTt2YXIgSD1BcnJheS5pc0FycmF5LFU9ZnVuY3Rpb24oYil7cmV0dXJuIEYoYik/Yi50cmltKCk6Yn0sZ2Q9ZnVuY3Rpb24oYil7cmV0dXJuIGIucmVwbGFjZSgvKFstKClcXFtcXF17fSs/Ki4kXFxefCw6IzwhXFxcXF0pL2csXCJcXFxcJDFcIikucmVwbGFjZSgvXFx4MDgvZyxcIlxcXFx4MDhcIil9LGJiPWZ1bmN0aW9uKCl7aWYoeShiYi5pc0FjdGl2ZV8pKXJldHVybiBiYi5pc0FjdGl2ZV87dmFyIGI9ISghWS5xdWVyeVNlbGVjdG9yKFwiW25nLWNzcF1cIikmJiFZLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1uZy1jc3BdXCIpKTtcbmlmKCFiKXRyeXtuZXcgRnVuY3Rpb24oXCJcIil9Y2F0Y2goYSl7Yj0hMH1yZXR1cm4gYmIuaXNBY3RpdmVfPWJ9LHNiPVtcIm5nLVwiLFwiZGF0YS1uZy1cIixcIm5nOlwiLFwieC1uZy1cIl0sTWQ9L1tBLVpdL2csdmM9ITEsUmIsb2E9MSxxYj0zLFFkPXtmdWxsOlwiMS4zLjEzXCIsbWFqb3I6MSxtaW5vcjozLGRvdDoxMyxjb2RlTmFtZTpcIm1ldGljdWxvdXMtcmlmZmxlc2h1ZmZsZVwifTtSLmV4cGFuZG89XCJuZzMzOVwiO3ZhciBBYj1SLmNhY2hlPXt9LGhmPTE7Ui5fZGF0YT1mdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5jYWNoZVtiW3RoaXMuZXhwYW5kb11dfHx7fX07dmFyIGNmPS8oW1xcOlxcLVxcX10rKC4pKS9nLGRmPS9ebW96KFtBLVpdKS8sUGY9e21vdXNlbGVhdmU6XCJtb3VzZW91dFwiLG1vdXNlZW50ZXI6XCJtb3VzZW92ZXJcIn0sVWI9UyhcImpxTGl0ZVwiKSxnZj0vXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8sVGI9Lzx8JiM/XFx3KzsvLGVmPS88KFtcXHc6XSspLyxmZj0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Ol0rKVtePl0qKVxcLz4vZ2ksXG5pYT17b3B0aW9uOlsxLCc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLFwiPC9zZWxlY3Q+XCJdLHRoZWFkOlsxLFwiPHRhYmxlPlwiLFwiPC90YWJsZT5cIl0sY29sOlsyLFwiPHRhYmxlPjxjb2xncm91cD5cIixcIjwvY29sZ3JvdXA+PC90YWJsZT5cIl0sdHI6WzIsXCI8dGFibGU+PHRib2R5PlwiLFwiPC90Ym9keT48L3RhYmxlPlwiXSx0ZDpbMyxcIjx0YWJsZT48dGJvZHk+PHRyPlwiLFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLF9kZWZhdWx0OlswLFwiXCIsXCJcIl19O2lhLm9wdGdyb3VwPWlhLm9wdGlvbjtpYS50Ym9keT1pYS50Zm9vdD1pYS5jb2xncm91cD1pYS5jYXB0aW9uPWlhLnRoZWFkO2lhLnRoPWlhLnRkO3ZhciBMYT1SLnByb3RvdHlwZT17cmVhZHk6ZnVuY3Rpb24oYil7ZnVuY3Rpb24gYSgpe2N8fChjPSEwLGIoKSl9dmFyIGM9ITE7XCJjb21wbGV0ZVwiPT09WS5yZWFkeVN0YXRlP3NldFRpbWVvdXQoYSk6KHRoaXMub24oXCJET01Db250ZW50TG9hZGVkXCIsYSksUihNKS5vbihcImxvYWRcIixhKSl9LFxudG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgYj1bXTtzKHRoaXMsZnVuY3Rpb24oYSl7Yi5wdXNoKFwiXCIrYSl9KTtyZXR1cm5cIltcIitiLmpvaW4oXCIsIFwiKStcIl1cIn0sZXE6ZnVuY3Rpb24oYil7cmV0dXJuIDA8PWI/RCh0aGlzW2JdKTpEKHRoaXNbdGhpcy5sZW5ndGgrYl0pfSxsZW5ndGg6MCxwdXNoOk9mLHNvcnQ6W10uc29ydCxzcGxpY2U6W10uc3BsaWNlfSxGYj17fTtzKFwibXVsdGlwbGUgc2VsZWN0ZWQgY2hlY2tlZCBkaXNhYmxlZCByZWFkT25seSByZXF1aXJlZCBvcGVuXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGIpe0ZiW1EoYildPWJ9KTt2YXIgTmM9e307cyhcImlucHV0IHNlbGVjdCBvcHRpb24gdGV4dGFyZWEgYnV0dG9uIGZvcm0gZGV0YWlsc1wiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihiKXtOY1tiXT0hMH0pO3ZhciBPYz17bmdNaW5sZW5ndGg6XCJtaW5sZW5ndGhcIixuZ01heGxlbmd0aDpcIm1heGxlbmd0aFwiLG5nTWluOlwibWluXCIsbmdNYXg6XCJtYXhcIixuZ1BhdHRlcm46XCJwYXR0ZXJuXCJ9O1xucyh7ZGF0YTpXYixyZW1vdmVEYXRhOnlifSxmdW5jdGlvbihiLGEpe1JbYV09Yn0pO3Moe2RhdGE6V2IsaW5oZXJpdGVkRGF0YTpFYixzY29wZTpmdW5jdGlvbihiKXtyZXR1cm4gRC5kYXRhKGIsXCIkc2NvcGVcIil8fEViKGIucGFyZW50Tm9kZXx8YixbXCIkaXNvbGF0ZVNjb3BlXCIsXCIkc2NvcGVcIl0pfSxpc29sYXRlU2NvcGU6ZnVuY3Rpb24oYil7cmV0dXJuIEQuZGF0YShiLFwiJGlzb2xhdGVTY29wZVwiKXx8RC5kYXRhKGIsXCIkaXNvbGF0ZVNjb3BlTm9UZW1wbGF0ZVwiKX0sY29udHJvbGxlcjpKYyxpbmplY3RvcjpmdW5jdGlvbihiKXtyZXR1cm4gRWIoYixcIiRpbmplY3RvclwiKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihiLGEpe2IucmVtb3ZlQXR0cmlidXRlKGEpfSxoYXNDbGFzczpCYixjc3M6ZnVuY3Rpb24oYixhLGMpe2E9ZGIoYSk7aWYoeShjKSliLnN0eWxlW2FdPWM7ZWxzZSByZXR1cm4gYi5zdHlsZVthXX0sYXR0cjpmdW5jdGlvbihiLGEsYyl7dmFyIGQ9UShhKTtpZihGYltkXSlpZih5KGMpKWM/XG4oYlthXT0hMCxiLnNldEF0dHJpYnV0ZShhLGQpKTooYlthXT0hMSxiLnJlbW92ZUF0dHJpYnV0ZShkKSk7ZWxzZSByZXR1cm4gYlthXXx8KGIuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oYSl8fHopLnNwZWNpZmllZD9kOnQ7ZWxzZSBpZih5KGMpKWIuc2V0QXR0cmlidXRlKGEsYyk7ZWxzZSBpZihiLmdldEF0dHJpYnV0ZSlyZXR1cm4gYj1iLmdldEF0dHJpYnV0ZShhLDIpLG51bGw9PT1iP3Q6Yn0scHJvcDpmdW5jdGlvbihiLGEsYyl7aWYoeShjKSliW2FdPWM7ZWxzZSByZXR1cm4gYlthXX0sdGV4dDpmdW5jdGlvbigpe2Z1bmN0aW9uIGIoYSxiKXtpZihCKGIpKXt2YXIgZD1hLm5vZGVUeXBlO3JldHVybiBkPT09b2F8fGQ9PT1xYj9hLnRleHRDb250ZW50OlwiXCJ9YS50ZXh0Q29udGVudD1ifWIuJGR2PVwiXCI7cmV0dXJuIGJ9KCksdmFsOmZ1bmN0aW9uKGIsYSl7aWYoQihhKSl7aWYoYi5tdWx0aXBsZSYmXCJzZWxlY3RcIj09PXVhKGIpKXt2YXIgYz1bXTtzKGIub3B0aW9ucyxmdW5jdGlvbihhKXthLnNlbGVjdGVkJiZcbmMucHVzaChhLnZhbHVlfHxhLnRleHQpfSk7cmV0dXJuIDA9PT1jLmxlbmd0aD9udWxsOmN9cmV0dXJuIGIudmFsdWV9Yi52YWx1ZT1hfSxodG1sOmZ1bmN0aW9uKGIsYSl7aWYoQihhKSlyZXR1cm4gYi5pbm5lckhUTUw7eGIoYiwhMCk7Yi5pbm5lckhUTUw9YX0sZW1wdHk6S2N9LGZ1bmN0aW9uKGIsYSl7Ui5wcm90b3R5cGVbYV09ZnVuY3Rpb24oYSxkKXt2YXIgZSxmLGc9dGhpcy5sZW5ndGg7aWYoYiE9PUtjJiYoMj09Yi5sZW5ndGgmJmIhPT1CYiYmYiE9PUpjP2E6ZCk9PT10KXtpZihJKGEpKXtmb3IoZT0wO2U8ZztlKyspaWYoYj09PVdiKWIodGhpc1tlXSxhKTtlbHNlIGZvcihmIGluIGEpYih0aGlzW2VdLGYsYVtmXSk7cmV0dXJuIHRoaXN9ZT1iLiRkdjtnPWU9PT10P01hdGgubWluKGcsMSk6Zztmb3IoZj0wO2Y8ZztmKyspe3ZhciBoPWIodGhpc1tmXSxhLGQpO2U9ZT9lK2g6aH1yZXR1cm4gZX1mb3IoZT0wO2U8ZztlKyspYih0aGlzW2VdLGEsZCk7cmV0dXJuIHRoaXN9fSk7XG5zKHtyZW1vdmVEYXRhOnliLG9uOmZ1bmN0aW9uIGEoYyxkLGUsZil7aWYoeShmKSl0aHJvdyBVYihcIm9uYXJnc1wiKTtpZihGYyhjKSl7dmFyIGc9emIoYywhMCk7Zj1nLmV2ZW50czt2YXIgaD1nLmhhbmRsZTtofHwoaD1nLmhhbmRsZT1sZihjLGYpKTtmb3IodmFyIGc9MDw9ZC5pbmRleE9mKFwiIFwiKT9kLnNwbGl0KFwiIFwiKTpbZF0sbD1nLmxlbmd0aDtsLS07KXtkPWdbbF07dmFyIGs9ZltkXTtrfHwoZltkXT1bXSxcIm1vdXNlZW50ZXJcIj09PWR8fFwibW91c2VsZWF2ZVwiPT09ZD9hKGMsUGZbZF0sZnVuY3Rpb24oYSl7dmFyIGM9YS5yZWxhdGVkVGFyZ2V0O2MmJihjPT09dGhpc3x8dGhpcy5jb250YWlucyhjKSl8fGgoYSxkKX0pOlwiJGRlc3Ryb3lcIiE9PWQmJmMuYWRkRXZlbnRMaXN0ZW5lcihkLGgsITEpLGs9ZltkXSk7ay5wdXNoKGUpfX19LG9mZjpJYyxvbmU6ZnVuY3Rpb24oYSxjLGQpe2E9RChhKTthLm9uKGMsZnVuY3Rpb24gZigpe2Eub2ZmKGMsZCk7YS5vZmYoYyxmKX0pO2Eub24oYyxcbmQpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbihhLGMpe3ZhciBkLGU9YS5wYXJlbnROb2RlO3hiKGEpO3MobmV3IFIoYyksZnVuY3Rpb24oYyl7ZD9lLmluc2VydEJlZm9yZShjLGQubmV4dFNpYmxpbmcpOmUucmVwbGFjZUNoaWxkKGMsYSk7ZD1jfSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3ZhciBjPVtdO3MoYS5jaGlsZE5vZGVzLGZ1bmN0aW9uKGEpe2Eubm9kZVR5cGU9PT1vYSYmYy5wdXNoKGEpfSk7cmV0dXJuIGN9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnREb2N1bWVudHx8YS5jaGlsZE5vZGVzfHxbXX0sYXBwZW5kOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9YS5ub2RlVHlwZTtpZihkPT09b2F8fDExPT09ZCl7Yz1uZXcgUihjKTtmb3IodmFyIGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspYS5hcHBlbmRDaGlsZChjW2RdKX19LHByZXBlbmQ6ZnVuY3Rpb24oYSxjKXtpZihhLm5vZGVUeXBlPT09b2Epe3ZhciBkPWEuZmlyc3RDaGlsZDtzKG5ldyBSKGMpLGZ1bmN0aW9uKGMpe2EuaW5zZXJ0QmVmb3JlKGMsXG5kKX0pfX0sd3JhcDpmdW5jdGlvbihhLGMpe2M9RChjKS5lcSgwKS5jbG9uZSgpWzBdO3ZhciBkPWEucGFyZW50Tm9kZTtkJiZkLnJlcGxhY2VDaGlsZChjLGEpO2MuYXBwZW5kQ2hpbGQoYSl9LHJlbW92ZTpMYyxkZXRhY2g6ZnVuY3Rpb24oYSl7TGMoYSwhMCl9LGFmdGVyOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9YSxlPWEucGFyZW50Tm9kZTtjPW5ldyBSKGMpO2Zvcih2YXIgZj0wLGc9Yy5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9Y1tmXTtlLmluc2VydEJlZm9yZShoLGQubmV4dFNpYmxpbmcpO2Q9aH19LGFkZENsYXNzOkRiLHJlbW92ZUNsYXNzOkNiLHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYyxkKXtjJiZzKGMuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGMpe3ZhciBmPWQ7QihmKSYmKGY9IUJiKGEsYykpOyhmP0RiOkNiKShhLGMpfSl9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4oYT1hLnBhcmVudE5vZGUpJiYxMSE9PWEubm9kZVR5cGU/YTpudWxsfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5leHRFbGVtZW50U2libGluZ30sXG5maW5kOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShjKTpbXX0sY2xvbmU6VmIsdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlLGYsZz1jLnR5cGV8fGMsaD16YihhKTtpZihoPShoPWgmJmguZXZlbnRzKSYmaFtnXSllPXtwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3RoaXMuZGVmYXVsdFByZXZlbnRlZD0hMH0saXNEZWZhdWx0UHJldmVudGVkOmZ1bmN0aW9uKCl7cmV0dXJuITA9PT10aGlzLmRlZmF1bHRQcmV2ZW50ZWR9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3RoaXMuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPSEwfSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpmdW5jdGlvbigpe3JldHVybiEwPT09dGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWR9LHN0b3BQcm9wYWdhdGlvbjp6LHR5cGU6Zyx0YXJnZXQ6YX0sYy50eXBlJiYoZT14KGUsXG5jKSksYz1yYShoKSxmPWQ/W2VdLmNvbmNhdChkKTpbZV0scyhjLGZ1bmN0aW9uKGMpe2UuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKXx8Yy5hcHBseShhLGYpfSl9fSxmdW5jdGlvbihhLGMpe1IucHJvdG90eXBlW2NdPWZ1bmN0aW9uKGMsZSxmKXtmb3IodmFyIGcsaD0wLGw9dGhpcy5sZW5ndGg7aDxsO2grKylCKGcpPyhnPWEodGhpc1toXSxjLGUsZikseShnKSYmKGc9RChnKSkpOkhjKGcsYSh0aGlzW2hdLGMsZSxmKSk7cmV0dXJuIHkoZyk/Zzp0aGlzfTtSLnByb3RvdHlwZS5iaW5kPVIucHJvdG90eXBlLm9uO1IucHJvdG90eXBlLnVuYmluZD1SLnByb3RvdHlwZS5vZmZ9KTtlYi5wcm90b3R5cGU9e3B1dDpmdW5jdGlvbihhLGMpe3RoaXNbTmEoYSx0aGlzLm5leHRVaWQpXT1jfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbTmEoYSx0aGlzLm5leHRVaWQpXX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXNbYT1OYShhLHRoaXMubmV4dFVpZCldO2RlbGV0ZSB0aGlzW2FdO1xucmV0dXJuIGN9fTt2YXIgUWM9L15mdW5jdGlvblxccypbXlxcKF0qXFwoXFxzKihbXlxcKV0qKVxcKS9tLFFmPS8sLyxSZj0vXlxccyooXz8pKFxcUys/KVxcMVxccyokLyxQYz0vKChcXC9cXC8uKiQpfChcXC9cXCpbXFxzXFxTXSo/XFwqXFwvKSkvbWcsR2E9UyhcIiRpbmplY3RvclwiKTthYi4kJGFubm90YXRlPWZ1bmN0aW9uKGEsYyxkKXt2YXIgZTtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSl7aWYoIShlPWEuJGluamVjdCkpe2U9W107aWYoYS5sZW5ndGgpe2lmKGMpdGhyb3cgRihkKSYmZHx8KGQ9YS5uYW1lfHxtZihhKSksR2EoXCJzdHJpY3RkaVwiLGQpO2M9YS50b1N0cmluZygpLnJlcGxhY2UoUGMsXCJcIik7Yz1jLm1hdGNoKFFjKTtzKGNbMV0uc3BsaXQoUWYpLGZ1bmN0aW9uKGEpe2EucmVwbGFjZShSZixmdW5jdGlvbihhLGMsZCl7ZS5wdXNoKGQpfSl9KX1hLiRpbmplY3Q9ZX19ZWxzZSBIKGEpPyhjPWEubGVuZ3RoLTEsdGIoYVtjXSxcImZuXCIpLGU9YS5zbGljZSgwLGMpKTp0YihhLFwiZm5cIiwhMCk7cmV0dXJuIGV9O1xudmFyIFNmPVMoXCIkYW5pbWF0ZVwiKSxDZT1bXCIkcHJvdmlkZVwiLGZ1bmN0aW9uKGEpe3RoaXMuJCRzZWxlY3RvcnM9e307dGhpcy5yZWdpc3Rlcj1mdW5jdGlvbihjLGQpe3ZhciBlPWMrXCItYW5pbWF0aW9uXCI7aWYoYyYmXCIuXCIhPWMuY2hhckF0KDApKXRocm93IFNmKFwibm90Y3NlbFwiLGMpO3RoaXMuJCRzZWxlY3RvcnNbYy5zdWJzdHIoMSldPWU7YS5mYWN0b3J5KGUsZCl9O3RoaXMuY2xhc3NOYW1lRmlsdGVyPWZ1bmN0aW9uKGEpezE9PT1hcmd1bWVudHMubGVuZ3RoJiYodGhpcy4kJGNsYXNzTmFtZUZpbHRlcj1hIGluc3RhbmNlb2YgUmVnRXhwP2E6bnVsbCk7cmV0dXJuIHRoaXMuJCRjbGFzc05hbWVGaWx0ZXJ9O3RoaXMuJGdldD1bXCIkJHFcIixcIiQkYXN5bmNDYWxsYmFja1wiLFwiJHJvb3RTY29wZVwiLGZ1bmN0aW9uKGEsZCxlKXtmdW5jdGlvbiBmKGQpe3ZhciBmLGc9YS5kZWZlcigpO2cucHJvbWlzZS4kJGNhbmNlbEZuPWZ1bmN0aW9uKCl7ZiYmZigpfTtlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe2Y9XG5kKGZ1bmN0aW9uKCl7Zy5yZXNvbHZlKCl9KX0pO3JldHVybiBnLnByb21pc2V9ZnVuY3Rpb24gZyhhLGMpe3ZhciBkPVtdLGU9W10sZj1oYSgpO3MoKGEuYXR0cihcImNsYXNzXCIpfHxcIlwiKS5zcGxpdCgvXFxzKy8pLGZ1bmN0aW9uKGEpe2ZbYV09ITB9KTtzKGMsZnVuY3Rpb24oYSxjKXt2YXIgZz1mW2NdOyExPT09YSYmZz9lLnB1c2goYyk6ITAhPT1hfHxnfHxkLnB1c2goYyl9KTtyZXR1cm4gMDxkLmxlbmd0aCtlLmxlbmd0aCYmW2QubGVuZ3RoP2Q6bnVsbCxlLmxlbmd0aD9lOm51bGxdfWZ1bmN0aW9uIGgoYSxjLGQpe2Zvcih2YXIgZT0wLGY9Yy5sZW5ndGg7ZTxmOysrZSlhW2NbZV1dPWR9ZnVuY3Rpb24gbCgpe218fChtPWEuZGVmZXIoKSxkKGZ1bmN0aW9uKCl7bS5yZXNvbHZlKCk7bT1udWxsfSkpO3JldHVybiBtLnByb21pc2V9ZnVuY3Rpb24gayhhLGMpe2lmKGNhLmlzT2JqZWN0KGMpKXt2YXIgZD14KGMuZnJvbXx8e30sYy50b3x8e30pO2EuY3NzKGQpfX12YXIgbTtyZXR1cm57YW5pbWF0ZTpmdW5jdGlvbihhLFxuYyxkKXtrKGEse2Zyb206Yyx0bzpkfSk7cmV0dXJuIGwoKX0sZW50ZXI6ZnVuY3Rpb24oYSxjLGQsZSl7ayhhLGUpO2Q/ZC5hZnRlcihhKTpjLnByZXBlbmQoYSk7cmV0dXJuIGwoKX0sbGVhdmU6ZnVuY3Rpb24oYSxjKXthLnJlbW92ZSgpO3JldHVybiBsKCl9LG1vdmU6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIHRoaXMuZW50ZXIoYSxjLGQsZSl9LGFkZENsYXNzOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gdGhpcy5zZXRDbGFzcyhhLGMsW10sZCl9LCQkYWRkQ2xhc3NJbW1lZGlhdGVseTpmdW5jdGlvbihhLGMsZCl7YT1EKGEpO2M9RihjKT9jOkgoYyk/Yy5qb2luKFwiIFwiKTpcIlwiO3MoYSxmdW5jdGlvbihhKXtEYihhLGMpfSk7ayhhLGQpO3JldHVybiBsKCl9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gdGhpcy5zZXRDbGFzcyhhLFtdLGMsZCl9LCQkcmVtb3ZlQ2xhc3NJbW1lZGlhdGVseTpmdW5jdGlvbihhLGMsZCl7YT1EKGEpO2M9RihjKT9jOkgoYyk/Yy5qb2luKFwiIFwiKTpcblwiXCI7cyhhLGZ1bmN0aW9uKGEpe0NiKGEsYyl9KTtrKGEsZCk7cmV0dXJuIGwoKX0sc2V0Q2xhc3M6ZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGs9dGhpcyxsPSExO2E9RChhKTt2YXIgbT1hLmRhdGEoXCIkJGFuaW1hdGVDbGFzc2VzXCIpO20/ZSYmbS5vcHRpb25zJiYobS5vcHRpb25zPWNhLmV4dGVuZChtLm9wdGlvbnN8fHt9LGUpKToobT17Y2xhc3Nlczp7fSxvcHRpb25zOmV9LGw9ITApO2U9bS5jbGFzc2VzO2M9SChjKT9jOmMuc3BsaXQoXCIgXCIpO2Q9SChkKT9kOmQuc3BsaXQoXCIgXCIpO2goZSxjLCEwKTtoKGUsZCwhMSk7bCYmKG0ucHJvbWlzZT1mKGZ1bmN0aW9uKGMpe3ZhciBkPWEuZGF0YShcIiQkYW5pbWF0ZUNsYXNzZXNcIik7YS5yZW1vdmVEYXRhKFwiJCRhbmltYXRlQ2xhc3Nlc1wiKTtpZihkKXt2YXIgZT1nKGEsZC5jbGFzc2VzKTtlJiZrLiQkc2V0Q2xhc3NJbW1lZGlhdGVseShhLGVbMF0sZVsxXSxkLm9wdGlvbnMpfWMoKX0pLGEuZGF0YShcIiQkYW5pbWF0ZUNsYXNzZXNcIixtKSk7XG5yZXR1cm4gbS5wcm9taXNlfSwkJHNldENsYXNzSW1tZWRpYXRlbHk6ZnVuY3Rpb24oYSxjLGQsZSl7YyYmdGhpcy4kJGFkZENsYXNzSW1tZWRpYXRlbHkoYSxjKTtkJiZ0aGlzLiQkcmVtb3ZlQ2xhc3NJbW1lZGlhdGVseShhLGQpO2soYSxlKTtyZXR1cm4gbCgpfSxlbmFibGVkOnosY2FuY2VsOnp9fV19XSxqYT1TKFwiJGNvbXBpbGVcIik7eGMuJGluamVjdD1bXCIkcHJvdmlkZVwiLFwiJCRzYW5pdGl6ZVVyaVByb3ZpZGVyXCJdO3ZhciBTYz0vXigoPzp4fGRhdGEpW1xcOlxcLV9dKS9pLHFmPVMoXCIkY29udHJvbGxlclwiKSxXYz1cImFwcGxpY2F0aW9uL2pzb25cIiwkYj17XCJDb250ZW50LVR5cGVcIjpXYytcIjtjaGFyc2V0PXV0Zi04XCJ9LHNmPS9eXFxbfF5cXHsoPyFcXHspLyx0Zj17XCJbXCI6L10kLyxcIntcIjovfSQvfSxyZj0vXlxcKVxcXVxcfScsP1xcbi8sYWM9UyhcIiRpbnRlcnBvbGF0ZVwiKSxUZj0vXihbXlxcPyNdKikoXFw/KFteI10qKSk/KCMoLiopKT8kLyx3Zj17aHR0cDo4MCxodHRwczo0NDMsZnRwOjIxfSxIYj1cblMoXCIkbG9jYXRpb25cIiksVWY9eyQkaHRtbDU6ITEsJCRyZXBsYWNlOiExLGFic1VybDpJYihcIiQkYWJzVXJsXCIpLHVybDpmdW5jdGlvbihhKXtpZihCKGEpKXJldHVybiB0aGlzLiQkdXJsO3ZhciBjPVRmLmV4ZWMoYSk7KGNbMV18fFwiXCI9PT1hKSYmdGhpcy5wYXRoKGRlY29kZVVSSUNvbXBvbmVudChjWzFdKSk7KGNbMl18fGNbMV18fFwiXCI9PT1hKSYmdGhpcy5zZWFyY2goY1szXXx8XCJcIik7dGhpcy5oYXNoKGNbNV18fFwiXCIpO3JldHVybiB0aGlzfSxwcm90b2NvbDpJYihcIiQkcHJvdG9jb2xcIiksaG9zdDpJYihcIiQkaG9zdFwiKSxwb3J0OkliKFwiJCRwb3J0XCIpLHBhdGg6ZGQoXCIkJHBhdGhcIixmdW5jdGlvbihhKXthPW51bGwhPT1hP2EudG9TdHJpbmcoKTpcIlwiO3JldHVyblwiL1wiPT1hLmNoYXJBdCgwKT9hOlwiL1wiK2F9KSxzZWFyY2g6ZnVuY3Rpb24oYSxjKXtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiB0aGlzLiQkc2VhcmNoO2Nhc2UgMTppZihGKGEpfHxWKGEpKWE9XG5hLnRvU3RyaW5nKCksdGhpcy4kJHNlYXJjaD1yYyhhKTtlbHNlIGlmKEkoYSkpYT1FYShhLHt9KSxzKGEsZnVuY3Rpb24oYyxlKXtudWxsPT1jJiZkZWxldGUgYVtlXX0pLHRoaXMuJCRzZWFyY2g9YTtlbHNlIHRocm93IEhiKFwiaXNyY2hhcmdcIik7YnJlYWs7ZGVmYXVsdDpCKGMpfHxudWxsPT09Yz9kZWxldGUgdGhpcy4kJHNlYXJjaFthXTp0aGlzLiQkc2VhcmNoW2FdPWN9dGhpcy4kJGNvbXBvc2UoKTtyZXR1cm4gdGhpc30saGFzaDpkZChcIiQkaGFzaFwiLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT09YT9hLnRvU3RyaW5nKCk6XCJcIn0pLHJlcGxhY2U6ZnVuY3Rpb24oKXt0aGlzLiQkcmVwbGFjZT0hMDtyZXR1cm4gdGhpc319O3MoW2NkLGVjLGRjXSxmdW5jdGlvbihhKXthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFVmKTthLnByb3RvdHlwZS5zdGF0ZT1mdW5jdGlvbihjKXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy4kJHN0YXRlO2lmKGEhPT1kY3x8IXRoaXMuJCRodG1sNSl0aHJvdyBIYihcIm5vc3RhdGVcIik7XG50aGlzLiQkc3RhdGU9QihjKT9udWxsOmM7cmV0dXJuIHRoaXN9fSk7dmFyIGxhPVMoXCIkcGFyc2VcIiksVmY9RnVuY3Rpb24ucHJvdG90eXBlLmNhbGwsV2Y9RnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LFhmPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLG1iPWhhKCk7cyh7XCJudWxsXCI6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sXCJ0cnVlXCI6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sXCJmYWxzZVwiOmZ1bmN0aW9uKCl7cmV0dXJuITF9LHVuZGVmaW5lZDpmdW5jdGlvbigpe319LGZ1bmN0aW9uKGEsYyl7YS5jb25zdGFudD1hLmxpdGVyYWw9YS5zaGFyZWRHZXR0ZXI9ITA7bWJbY109YX0pO21iW1widGhpc1wiXT1mdW5jdGlvbihhKXtyZXR1cm4gYX07bWJbXCJ0aGlzXCJdLnNoYXJlZEdldHRlcj0hMDt2YXIgbmI9eChoYSgpLHtcIitcIjpmdW5jdGlvbihhLGMsZCxlKXtkPWQoYSxjKTtlPWUoYSxjKTtyZXR1cm4geShkKT95KGUpP2QrZTpkOnkoZSk/ZTp0fSxcIi1cIjpmdW5jdGlvbihhLGMsZCxlKXtkPWQoYSxcbmMpO2U9ZShhLGMpO3JldHVybih5KGQpP2Q6MCktKHkoZSk/ZTowKX0sXCIqXCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKSplKGEsYyl9LFwiL1wiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYykvZShhLGMpfSxcIiVcIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpJWUoYSxjKX0sXCI9PT1cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpPT09ZShhLGMpfSxcIiE9PVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYykhPT1lKGEsYyl9LFwiPT1cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpPT1lKGEsYyl9LFwiIT1cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpIT1lKGEsYyl9LFwiPFwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk8ZShhLGMpfSxcIj5cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpPmUoYSxjKX0sXCI8PVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk8PWUoYSxjKX0sXCI+PVwiOmZ1bmN0aW9uKGEsXG5jLGQsZSl7cmV0dXJuIGQoYSxjKT49ZShhLGMpfSxcIiYmXCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKSYmZShhLGMpfSxcInx8XCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKXx8ZShhLGMpfSxcIiFcIjpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIWQoYSxjKX0sXCI9XCI6ITAsXCJ8XCI6ITB9KSxZZj17bjpcIlxcblwiLGY6XCJcXGZcIixyOlwiXFxyXCIsdDpcIlxcdFwiLHY6XCJcXHZcIixcIidcIjpcIidcIiwnXCInOidcIid9LGhjPWZ1bmN0aW9uKGEpe3RoaXMub3B0aW9ucz1hfTtoYy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmhjLGxleDpmdW5jdGlvbihhKXt0aGlzLnRleHQ9YTt0aGlzLmluZGV4PTA7Zm9yKHRoaXMudG9rZW5zPVtdO3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspaWYoYT10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpLCdcIic9PT1hfHxcIidcIj09PWEpdGhpcy5yZWFkU3RyaW5nKGEpO2Vsc2UgaWYodGhpcy5pc051bWJlcihhKXx8XCIuXCI9PT1hJiZ0aGlzLmlzTnVtYmVyKHRoaXMucGVlaygpKSl0aGlzLnJlYWROdW1iZXIoKTtcbmVsc2UgaWYodGhpcy5pc0lkZW50KGEpKXRoaXMucmVhZElkZW50KCk7ZWxzZSBpZih0aGlzLmlzKGEsXCIoKXt9W10uLDs6P1wiKSl0aGlzLnRva2Vucy5wdXNoKHtpbmRleDp0aGlzLmluZGV4LHRleHQ6YX0pLHRoaXMuaW5kZXgrKztlbHNlIGlmKHRoaXMuaXNXaGl0ZXNwYWNlKGEpKXRoaXMuaW5kZXgrKztlbHNle3ZhciBjPWErdGhpcy5wZWVrKCksZD1jK3RoaXMucGVlaygyKSxlPW5iW2NdLGY9bmJbZF07bmJbYV18fGV8fGY/KGE9Zj9kOmU/YzphLHRoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDphLG9wZXJhdG9yOiEwfSksdGhpcy5pbmRleCs9YS5sZW5ndGgpOnRoaXMudGhyb3dFcnJvcihcIlVuZXhwZWN0ZWQgbmV4dCBjaGFyYWN0ZXIgXCIsdGhpcy5pbmRleCx0aGlzLmluZGV4KzEpfXJldHVybiB0aGlzLnRva2Vuc30saXM6ZnVuY3Rpb24oYSxjKXtyZXR1cm4tMSE9PWMuaW5kZXhPZihhKX0scGVlazpmdW5jdGlvbihhKXthPWF8fDE7cmV0dXJuIHRoaXMuaW5kZXgrXG5hPHRoaXMudGV4dC5sZW5ndGg/dGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4K2EpOiExfSxpc051bWJlcjpmdW5jdGlvbihhKXtyZXR1cm5cIjBcIjw9YSYmXCI5XCI+PWEmJlwic3RyaW5nXCI9PT10eXBlb2YgYX0saXNXaGl0ZXNwYWNlOmZ1bmN0aW9uKGEpe3JldHVyblwiIFwiPT09YXx8XCJcXHJcIj09PWF8fFwiXFx0XCI9PT1hfHxcIlxcblwiPT09YXx8XCJcXHZcIj09PWF8fFwiXFx1MDBhMFwiPT09YX0saXNJZGVudDpmdW5jdGlvbihhKXtyZXR1cm5cImFcIjw9YSYmXCJ6XCI+PWF8fFwiQVwiPD1hJiZcIlpcIj49YXx8XCJfXCI9PT1hfHxcIiRcIj09PWF9LGlzRXhwT3BlcmF0b3I6ZnVuY3Rpb24oYSl7cmV0dXJuXCItXCI9PT1hfHxcIitcIj09PWF8fHRoaXMuaXNOdW1iZXIoYSl9LHRocm93RXJyb3I6ZnVuY3Rpb24oYSxjLGQpe2Q9ZHx8dGhpcy5pbmRleDtjPXkoYyk/XCJzIFwiK2MrXCItXCIrdGhpcy5pbmRleCtcIiBbXCIrdGhpcy50ZXh0LnN1YnN0cmluZyhjLGQpK1wiXVwiOlwiIFwiK2Q7dGhyb3cgbGEoXCJsZXhlcnJcIixhLGMsdGhpcy50ZXh0KTtcbn0scmVhZE51bWJlcjpmdW5jdGlvbigpe2Zvcih2YXIgYT1cIlwiLGM9dGhpcy5pbmRleDt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KXt2YXIgZD1RKHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCkpO2lmKFwiLlwiPT1kfHx0aGlzLmlzTnVtYmVyKGQpKWErPWQ7ZWxzZXt2YXIgZT10aGlzLnBlZWsoKTtpZihcImVcIj09ZCYmdGhpcy5pc0V4cE9wZXJhdG9yKGUpKWErPWQ7ZWxzZSBpZih0aGlzLmlzRXhwT3BlcmF0b3IoZCkmJmUmJnRoaXMuaXNOdW1iZXIoZSkmJlwiZVwiPT1hLmNoYXJBdChhLmxlbmd0aC0xKSlhKz1kO2Vsc2UgaWYoIXRoaXMuaXNFeHBPcGVyYXRvcihkKXx8ZSYmdGhpcy5pc051bWJlcihlKXx8XCJlXCIhPWEuY2hhckF0KGEubGVuZ3RoLTEpKWJyZWFrO2Vsc2UgdGhpcy50aHJvd0Vycm9yKFwiSW52YWxpZCBleHBvbmVudFwiKX10aGlzLmluZGV4Kyt9dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6Yyx0ZXh0OmEsY29uc3RhbnQ6ITAsdmFsdWU6TnVtYmVyKGEpfSl9LHJlYWRJZGVudDpmdW5jdGlvbigpe2Zvcih2YXIgYT1cbnRoaXMuaW5kZXg7dGhpcy5pbmRleDx0aGlzLnRleHQubGVuZ3RoOyl7dmFyIGM9dGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KTtpZighdGhpcy5pc0lkZW50KGMpJiYhdGhpcy5pc051bWJlcihjKSlicmVhazt0aGlzLmluZGV4Kyt9dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6YSx0ZXh0OnRoaXMudGV4dC5zbGljZShhLHRoaXMuaW5kZXgpLGlkZW50aWZpZXI6ITB9KX0scmVhZFN0cmluZzpmdW5jdGlvbihhKXt2YXIgYz10aGlzLmluZGV4O3RoaXMuaW5kZXgrKztmb3IodmFyIGQ9XCJcIixlPWEsZj0hMTt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KXt2YXIgZz10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpLGU9ZStnO2lmKGYpXCJ1XCI9PT1nPyhmPXRoaXMudGV4dC5zdWJzdHJpbmcodGhpcy5pbmRleCsxLHRoaXMuaW5kZXgrNSksZi5tYXRjaCgvW1xcZGEtZl17NH0vaSl8fHRoaXMudGhyb3dFcnJvcihcIkludmFsaWQgdW5pY29kZSBlc2NhcGUgW1xcXFx1XCIrZitcIl1cIiksdGhpcy5pbmRleCs9XG40LGQrPVN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoZiwxNikpKTpkKz1ZZltnXXx8ZyxmPSExO2Vsc2UgaWYoXCJcXFxcXCI9PT1nKWY9ITA7ZWxzZXtpZihnPT09YSl7dGhpcy5pbmRleCsrO3RoaXMudG9rZW5zLnB1c2goe2luZGV4OmMsdGV4dDplLGNvbnN0YW50OiEwLHZhbHVlOmR9KTtyZXR1cm59ZCs9Z310aGlzLmluZGV4Kyt9dGhpcy50aHJvd0Vycm9yKFwiVW50ZXJtaW5hdGVkIHF1b3RlXCIsYyl9fTt2YXIgaWI9ZnVuY3Rpb24oYSxjLGQpe3RoaXMubGV4ZXI9YTt0aGlzLiRmaWx0ZXI9Yzt0aGlzLm9wdGlvbnM9ZH07aWIuWkVSTz14KGZ1bmN0aW9uKCl7cmV0dXJuIDB9LHtzaGFyZWRHZXR0ZXI6ITAsY29uc3RhbnQ6ITB9KTtpYi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmliLHBhcnNlOmZ1bmN0aW9uKGEpe3RoaXMudGV4dD1hO3RoaXMudG9rZW5zPXRoaXMubGV4ZXIubGV4KGEpO2E9dGhpcy5zdGF0ZW1lbnRzKCk7MCE9PXRoaXMudG9rZW5zLmxlbmd0aCYmdGhpcy50aHJvd0Vycm9yKFwiaXMgYW4gdW5leHBlY3RlZCB0b2tlblwiLFxudGhpcy50b2tlbnNbMF0pO2EubGl0ZXJhbD0hIWEubGl0ZXJhbDthLmNvbnN0YW50PSEhYS5jb25zdGFudDtyZXR1cm4gYX0scHJpbWFyeTpmdW5jdGlvbigpe3ZhciBhO3RoaXMuZXhwZWN0KFwiKFwiKT8oYT10aGlzLmZpbHRlckNoYWluKCksdGhpcy5jb25zdW1lKFwiKVwiKSk6dGhpcy5leHBlY3QoXCJbXCIpP2E9dGhpcy5hcnJheURlY2xhcmF0aW9uKCk6dGhpcy5leHBlY3QoXCJ7XCIpP2E9dGhpcy5vYmplY3QoKTp0aGlzLnBlZWsoKS5pZGVudGlmaWVyJiZ0aGlzLnBlZWsoKS50ZXh0IGluIG1iP2E9bWJbdGhpcy5jb25zdW1lKCkudGV4dF06dGhpcy5wZWVrKCkuaWRlbnRpZmllcj9hPXRoaXMuaWRlbnRpZmllcigpOnRoaXMucGVlaygpLmNvbnN0YW50P2E9dGhpcy5jb25zdGFudCgpOnRoaXMudGhyb3dFcnJvcihcIm5vdCBhIHByaW1hcnkgZXhwcmVzc2lvblwiLHRoaXMucGVlaygpKTtmb3IodmFyIGMsZDtjPXRoaXMuZXhwZWN0KFwiKFwiLFwiW1wiLFwiLlwiKTspXCIoXCI9PT1jLnRleHQ/KGE9dGhpcy5mdW5jdGlvbkNhbGwoYSxcbmQpLGQ9bnVsbCk6XCJbXCI9PT1jLnRleHQ/KGQ9YSxhPXRoaXMub2JqZWN0SW5kZXgoYSkpOlwiLlwiPT09Yy50ZXh0PyhkPWEsYT10aGlzLmZpZWxkQWNjZXNzKGEpKTp0aGlzLnRocm93RXJyb3IoXCJJTVBPU1NJQkxFXCIpO3JldHVybiBhfSx0aHJvd0Vycm9yOmZ1bmN0aW9uKGEsYyl7dGhyb3cgbGEoXCJzeW50YXhcIixjLnRleHQsYSxjLmluZGV4KzEsdGhpcy50ZXh0LHRoaXMudGV4dC5zdWJzdHJpbmcoYy5pbmRleCkpO30scGVla1Rva2VuOmZ1bmN0aW9uKCl7aWYoMD09PXRoaXMudG9rZW5zLmxlbmd0aCl0aHJvdyBsYShcInVlb2VcIix0aGlzLnRleHQpO3JldHVybiB0aGlzLnRva2Vuc1swXX0scGVlazpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gdGhpcy5wZWVrQWhlYWQoMCxhLGMsZCxlKX0scGVla0FoZWFkOmZ1bmN0aW9uKGEsYyxkLGUsZil7aWYodGhpcy50b2tlbnMubGVuZ3RoPmEpe2E9dGhpcy50b2tlbnNbYV07dmFyIGc9YS50ZXh0O2lmKGc9PT1jfHxnPT09ZHx8Zz09PWV8fGc9PT1cbmZ8fCEoY3x8ZHx8ZXx8ZikpcmV0dXJuIGF9cmV0dXJuITF9LGV4cGVjdDpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4oYT10aGlzLnBlZWsoYSxjLGQsZSkpPyh0aGlzLnRva2Vucy5zaGlmdCgpLGEpOiExfSxjb25zdW1lOmZ1bmN0aW9uKGEpe2lmKDA9PT10aGlzLnRva2Vucy5sZW5ndGgpdGhyb3cgbGEoXCJ1ZW9lXCIsdGhpcy50ZXh0KTt2YXIgYz10aGlzLmV4cGVjdChhKTtjfHx0aGlzLnRocm93RXJyb3IoXCJpcyB1bmV4cGVjdGVkLCBleHBlY3RpbmcgW1wiK2ErXCJdXCIsdGhpcy5wZWVrKCkpO3JldHVybiBjfSx1bmFyeUZuOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9bmJbYV07cmV0dXJuIHgoZnVuY3Rpb24oYSxmKXtyZXR1cm4gZChhLGYsYyl9LHtjb25zdGFudDpjLmNvbnN0YW50LGlucHV0czpbY119KX0sYmluYXJ5Rm46ZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGY9bmJbY107cmV0dXJuIHgoZnVuY3Rpb24oYyxlKXtyZXR1cm4gZihjLGUsYSxkKX0se2NvbnN0YW50OmEuY29uc3RhbnQmJlxuZC5jb25zdGFudCxpbnB1dHM6IWUmJlthLGRdfSl9LGlkZW50aWZpZXI6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5jb25zdW1lKCkudGV4dDt0aGlzLnBlZWsoXCIuXCIpJiZ0aGlzLnBlZWtBaGVhZCgxKS5pZGVudGlmaWVyJiYhdGhpcy5wZWVrQWhlYWQoMixcIihcIik7KWErPXRoaXMuY29uc3VtZSgpLnRleHQrdGhpcy5jb25zdW1lKCkudGV4dDtyZXR1cm4geWYoYSx0aGlzLm9wdGlvbnMsdGhpcy50ZXh0KX0sY29uc3RhbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNvbnN1bWUoKS52YWx1ZTtyZXR1cm4geChmdW5jdGlvbigpe3JldHVybiBhfSx7Y29uc3RhbnQ6ITAsbGl0ZXJhbDohMH0pfSxzdGF0ZW1lbnRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdOzspaWYoMDx0aGlzLnRva2Vucy5sZW5ndGgmJiF0aGlzLnBlZWsoXCJ9XCIsXCIpXCIsXCI7XCIsXCJdXCIpJiZhLnB1c2godGhpcy5maWx0ZXJDaGFpbigpKSwhdGhpcy5leHBlY3QoXCI7XCIpKXJldHVybiAxPT09YS5sZW5ndGg/YVswXTpmdW5jdGlvbihjLFxuZCl7Zm9yKHZhciBlLGY9MCxnPWEubGVuZ3RoO2Y8ZztmKyspZT1hW2ZdKGMsZCk7cmV0dXJuIGV9fSxmaWx0ZXJDaGFpbjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmV4cHJlc3Npb24oKTt0aGlzLmV4cGVjdChcInxcIik7KWE9dGhpcy5maWx0ZXIoYSk7cmV0dXJuIGF9LGZpbHRlcjpmdW5jdGlvbihhKXt2YXIgYz10aGlzLiRmaWx0ZXIodGhpcy5jb25zdW1lKCkudGV4dCksZCxlO2lmKHRoaXMucGVlayhcIjpcIikpZm9yKGQ9W10sZT1bXTt0aGlzLmV4cGVjdChcIjpcIik7KWQucHVzaCh0aGlzLmV4cHJlc3Npb24oKSk7dmFyIGY9W2FdLmNvbmNhdChkfHxbXSk7cmV0dXJuIHgoZnVuY3Rpb24oZixoKXt2YXIgbD1hKGYsaCk7aWYoZSl7ZVswXT1sO2ZvcihsPWQubGVuZ3RoO2wtLTspZVtsKzFdPWRbbF0oZixoKTtyZXR1cm4gYy5hcHBseSh0LGUpfXJldHVybiBjKGwpfSx7Y29uc3RhbnQ6IWMuJHN0YXRlZnVsJiZmLmV2ZXJ5KGZjKSxpbnB1dHM6IWMuJHN0YXRlZnVsJiZmfSl9LGV4cHJlc3Npb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hc3NpZ25tZW50KCl9LFxuYXNzaWdubWVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMudGVybmFyeSgpLGMsZDtyZXR1cm4oZD10aGlzLmV4cGVjdChcIj1cIikpPyhhLmFzc2lnbnx8dGhpcy50aHJvd0Vycm9yKFwiaW1wbGllcyBhc3NpZ25tZW50IGJ1dCBbXCIrdGhpcy50ZXh0LnN1YnN0cmluZygwLGQuaW5kZXgpK1wiXSBjYW4gbm90IGJlIGFzc2lnbmVkIHRvXCIsZCksYz10aGlzLnRlcm5hcnkoKSx4KGZ1bmN0aW9uKGQsZil7cmV0dXJuIGEuYXNzaWduKGQsYyhkLGYpLGYpfSx7aW5wdXRzOlthLGNdfSkpOmF9LHRlcm5hcnk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxvZ2ljYWxPUigpLGM7aWYodGhpcy5leHBlY3QoXCI/XCIpJiYoYz10aGlzLmFzc2lnbm1lbnQoKSx0aGlzLmNvbnN1bWUoXCI6XCIpKSl7dmFyIGQ9dGhpcy5hc3NpZ25tZW50KCk7cmV0dXJuIHgoZnVuY3Rpb24oZSxmKXtyZXR1cm4gYShlLGYpP2MoZSxmKTpkKGUsZil9LHtjb25zdGFudDphLmNvbnN0YW50JiZjLmNvbnN0YW50JiZkLmNvbnN0YW50fSl9cmV0dXJuIGF9LFxubG9naWNhbE9SOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubG9naWNhbEFORCgpLGM7Yz10aGlzLmV4cGVjdChcInx8XCIpOylhPXRoaXMuYmluYXJ5Rm4oYSxjLnRleHQsdGhpcy5sb2dpY2FsQU5EKCksITApO3JldHVybiBhfSxsb2dpY2FsQU5EOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZXF1YWxpdHkoKSxjO2M9dGhpcy5leHBlY3QoXCImJlwiKTspYT10aGlzLmJpbmFyeUZuKGEsYy50ZXh0LHRoaXMuZXF1YWxpdHkoKSwhMCk7cmV0dXJuIGF9LGVxdWFsaXR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMucmVsYXRpb25hbCgpLGM7Yz10aGlzLmV4cGVjdChcIj09XCIsXCIhPVwiLFwiPT09XCIsXCIhPT1cIik7KWE9dGhpcy5iaW5hcnlGbihhLGMudGV4dCx0aGlzLnJlbGF0aW9uYWwoKSk7cmV0dXJuIGF9LHJlbGF0aW9uYWw6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5hZGRpdGl2ZSgpLGM7Yz10aGlzLmV4cGVjdChcIjxcIixcIj5cIixcIjw9XCIsXCI+PVwiKTspYT10aGlzLmJpbmFyeUZuKGEsYy50ZXh0LFxudGhpcy5hZGRpdGl2ZSgpKTtyZXR1cm4gYX0sYWRkaXRpdmU6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5tdWx0aXBsaWNhdGl2ZSgpLGM7Yz10aGlzLmV4cGVjdChcIitcIixcIi1cIik7KWE9dGhpcy5iaW5hcnlGbihhLGMudGV4dCx0aGlzLm11bHRpcGxpY2F0aXZlKCkpO3JldHVybiBhfSxtdWx0aXBsaWNhdGl2ZTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLnVuYXJ5KCksYztjPXRoaXMuZXhwZWN0KFwiKlwiLFwiL1wiLFwiJVwiKTspYT10aGlzLmJpbmFyeUZuKGEsYy50ZXh0LHRoaXMudW5hcnkoKSk7cmV0dXJuIGF9LHVuYXJ5OmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIHRoaXMuZXhwZWN0KFwiK1wiKT90aGlzLnByaW1hcnkoKTooYT10aGlzLmV4cGVjdChcIi1cIikpP3RoaXMuYmluYXJ5Rm4oaWIuWkVSTyxhLnRleHQsdGhpcy51bmFyeSgpKTooYT10aGlzLmV4cGVjdChcIiFcIikpP3RoaXMudW5hcnlGbihhLnRleHQsdGhpcy51bmFyeSgpKTp0aGlzLnByaW1hcnkoKX0sZmllbGRBY2Nlc3M6ZnVuY3Rpb24oYSl7dmFyIGM9XG50aGlzLmlkZW50aWZpZXIoKTtyZXR1cm4geChmdW5jdGlvbihkLGUsZil7ZD1mfHxhKGQsZSk7cmV0dXJuIG51bGw9PWQ/dDpjKGQpfSx7YXNzaWduOmZ1bmN0aW9uKGQsZSxmKXt2YXIgZz1hKGQsZik7Z3x8YS5hc3NpZ24oZCxnPXt9LGYpO3JldHVybiBjLmFzc2lnbihnLGUpfX0pfSxvYmplY3RJbmRleDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnRleHQsZD10aGlzLmV4cHJlc3Npb24oKTt0aGlzLmNvbnN1bWUoXCJdXCIpO3JldHVybiB4KGZ1bmN0aW9uKGUsZil7dmFyIGc9YShlLGYpLGg9ZChlLGYpO3RhKGgsYyk7cmV0dXJuIGc/bWEoZ1toXSxjKTp0fSx7YXNzaWduOmZ1bmN0aW9uKGUsZixnKXt2YXIgaD10YShkKGUsZyksYyksbD1tYShhKGUsZyksYyk7bHx8YS5hc3NpZ24oZSxsPXt9LGcpO3JldHVybiBsW2hdPWZ9fSl9LGZ1bmN0aW9uQ2FsbDpmdW5jdGlvbihhLGMpe3ZhciBkPVtdO2lmKFwiKVwiIT09dGhpcy5wZWVrVG9rZW4oKS50ZXh0KXtkbyBkLnB1c2godGhpcy5leHByZXNzaW9uKCkpO1xud2hpbGUodGhpcy5leHBlY3QoXCIsXCIpKX10aGlzLmNvbnN1bWUoXCIpXCIpO3ZhciBlPXRoaXMudGV4dCxmPWQubGVuZ3RoP1tdOm51bGw7cmV0dXJuIGZ1bmN0aW9uKGcsaCl7dmFyIGw9Yz9jKGcsaCk6eShjKT90Omcsaz1hKGcsaCxsKXx8ejtpZihmKWZvcih2YXIgbT1kLmxlbmd0aDttLS07KWZbbV09bWEoZFttXShnLGgpLGUpO21hKGwsZSk7aWYoayl7aWYoay5jb25zdHJ1Y3Rvcj09PWspdGhyb3cgbGEoXCJpc2VjZm5cIixlKTtpZihrPT09VmZ8fGs9PT1XZnx8az09PVhmKXRocm93IGxhKFwiaXNlY2ZmXCIsZSk7fWw9ay5hcHBseT9rLmFwcGx5KGwsZik6ayhmWzBdLGZbMV0sZlsyXSxmWzNdLGZbNF0pO2YmJihmLmxlbmd0aD0wKTtyZXR1cm4gbWEobCxlKX19LGFycmF5RGVjbGFyYXRpb246ZnVuY3Rpb24oKXt2YXIgYT1bXTtpZihcIl1cIiE9PXRoaXMucGVla1Rva2VuKCkudGV4dCl7ZG97aWYodGhpcy5wZWVrKFwiXVwiKSlicmVhazthLnB1c2godGhpcy5leHByZXNzaW9uKCkpfXdoaWxlKHRoaXMuZXhwZWN0KFwiLFwiKSlcbn10aGlzLmNvbnN1bWUoXCJdXCIpO3JldHVybiB4KGZ1bmN0aW9uKGMsZCl7Zm9yKHZhciBlPVtdLGY9MCxnPWEubGVuZ3RoO2Y8ZztmKyspZS5wdXNoKGFbZl0oYyxkKSk7cmV0dXJuIGV9LHtsaXRlcmFsOiEwLGNvbnN0YW50OmEuZXZlcnkoZmMpLGlucHV0czphfSl9LG9iamVjdDpmdW5jdGlvbigpe3ZhciBhPVtdLGM9W107aWYoXCJ9XCIhPT10aGlzLnBlZWtUb2tlbigpLnRleHQpe2Rve2lmKHRoaXMucGVlayhcIn1cIikpYnJlYWs7dmFyIGQ9dGhpcy5jb25zdW1lKCk7ZC5jb25zdGFudD9hLnB1c2goZC52YWx1ZSk6ZC5pZGVudGlmaWVyP2EucHVzaChkLnRleHQpOnRoaXMudGhyb3dFcnJvcihcImludmFsaWQga2V5XCIsZCk7dGhpcy5jb25zdW1lKFwiOlwiKTtjLnB1c2godGhpcy5leHByZXNzaW9uKCkpfXdoaWxlKHRoaXMuZXhwZWN0KFwiLFwiKSl9dGhpcy5jb25zdW1lKFwifVwiKTtyZXR1cm4geChmdW5jdGlvbihkLGYpe2Zvcih2YXIgZz17fSxoPTAsbD1jLmxlbmd0aDtoPGw7aCsrKWdbYVtoXV09XG5jW2hdKGQsZik7cmV0dXJuIGd9LHtsaXRlcmFsOiEwLGNvbnN0YW50OmMuZXZlcnkoZmMpLGlucHV0czpjfSl9fTt2YXIgQWY9aGEoKSx6Zj1oYSgpLEJmPU9iamVjdC5wcm90b3R5cGUudmFsdWVPZixDYT1TKFwiJHNjZVwiKSxuYT17SFRNTDpcImh0bWxcIixDU1M6XCJjc3NcIixVUkw6XCJ1cmxcIixSRVNPVVJDRV9VUkw6XCJyZXNvdXJjZVVybFwiLEpTOlwianNcIn0samE9UyhcIiRjb21waWxlXCIpLFo9WS5jcmVhdGVFbGVtZW50KFwiYVwiKSxpZD1CYShNLmxvY2F0aW9uLmhyZWYpO0VjLiRpbmplY3Q9W1wiJHByb3ZpZGVcIl07amQuJGluamVjdD1bXCIkbG9jYWxlXCJdO2xkLiRpbmplY3Q9W1wiJGxvY2FsZVwiXTt2YXIgb2Q9XCIuXCIsTGY9e3l5eXk6JChcIkZ1bGxZZWFyXCIsNCkseXk6JChcIkZ1bGxZZWFyXCIsMiwwLCEwKSx5OiQoXCJGdWxsWWVhclwiLDEpLE1NTU06S2IoXCJNb250aFwiKSxNTU06S2IoXCJNb250aFwiLCEwKSxNTTokKFwiTW9udGhcIiwyLDEpLE06JChcIk1vbnRoXCIsMSwxKSxkZDokKFwiRGF0ZVwiLDIpLGQ6JChcIkRhdGVcIixcbjEpLEhIOiQoXCJIb3Vyc1wiLDIpLEg6JChcIkhvdXJzXCIsMSksaGg6JChcIkhvdXJzXCIsMiwtMTIpLGg6JChcIkhvdXJzXCIsMSwtMTIpLG1tOiQoXCJNaW51dGVzXCIsMiksbTokKFwiTWludXRlc1wiLDEpLHNzOiQoXCJTZWNvbmRzXCIsMiksczokKFwiU2Vjb25kc1wiLDEpLHNzczokKFwiTWlsbGlzZWNvbmRzXCIsMyksRUVFRTpLYihcIkRheVwiKSxFRUU6S2IoXCJEYXlcIiwhMCksYTpmdW5jdGlvbihhLGMpe3JldHVybiAxMj5hLmdldEhvdXJzKCk/Yy5BTVBNU1swXTpjLkFNUE1TWzFdfSxaOmZ1bmN0aW9uKGEpe2E9LTEqYS5nZXRUaW1lem9uZU9mZnNldCgpO3JldHVybiBhPSgwPD1hP1wiK1wiOlwiXCIpKyhKYihNYXRoWzA8YT9cImZsb29yXCI6XCJjZWlsXCJdKGEvNjApLDIpK0piKE1hdGguYWJzKGElNjApLDIpKX0sd3c6cWQoMiksdzpxZCgxKX0sS2Y9LygoPzpbXnlNZEhobXNhWkV3J10rKXwoPzonKD86W14nXXwnJykqJyl8KD86RSt8eSt8TSt8ZCt8SCt8aCt8bSt8cyt8YXxafHcrKSkoLiopLyxKZj0vXlxcLT9cXGQrJC87XG5rZC4kaW5qZWN0PVtcIiRsb2NhbGVcIl07dmFyIEdmPWVhKFEpLEhmPWVhKHZiKTttZC4kaW5qZWN0PVtcIiRwYXJzZVwiXTt2YXIgVGQ9ZWEoe3Jlc3RyaWN0OlwiRVwiLGNvbXBpbGU6ZnVuY3Rpb24oYSxjKXtpZighYy5ocmVmJiYhYy54bGlua0hyZWYmJiFjLm5hbWUpcmV0dXJuIGZ1bmN0aW9uKGEsYyl7aWYoXCJhXCI9PT1jWzBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe3ZhciBmPVwiW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ11cIj09PURhLmNhbGwoYy5wcm9wKFwiaHJlZlwiKSk/XCJ4bGluazpocmVmXCI6XCJocmVmXCI7Yy5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7Yy5hdHRyKGYpfHxhLnByZXZlbnREZWZhdWx0KCl9KX19fX0pLHdiPXt9O3MoRmIsZnVuY3Rpb24oYSxjKXtpZihcIm11bHRpcGxlXCIhPWEpe3ZhciBkPXlhKFwibmctXCIrYyk7d2JbZF09ZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscHJpb3JpdHk6MTAwLGxpbms6ZnVuY3Rpb24oYSxmLGcpe2EuJHdhdGNoKGdbZF0sZnVuY3Rpb24oYSl7Zy4kc2V0KGMsXG4hIWEpfSl9fX19fSk7cyhPYyxmdW5jdGlvbihhLGMpe3diW2NdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5OjEwMCxsaW5rOmZ1bmN0aW9uKGEsZSxmKXtpZihcIm5nUGF0dGVyblwiPT09YyYmXCIvXCI9PWYubmdQYXR0ZXJuLmNoYXJBdCgwKSYmKGU9Zi5uZ1BhdHRlcm4ubWF0Y2goTmYpKSl7Zi4kc2V0KFwibmdQYXR0ZXJuXCIsbmV3IFJlZ0V4cChlWzFdLGVbMl0pKTtyZXR1cm59YS4kd2F0Y2goZltjXSxmdW5jdGlvbihhKXtmLiRzZXQoYyxhKX0pfX19fSk7cyhbXCJzcmNcIixcInNyY3NldFwiLFwiaHJlZlwiXSxmdW5jdGlvbihhKXt2YXIgYz15YShcIm5nLVwiK2EpO3diW2NdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5Ojk5LGxpbms6ZnVuY3Rpb24oZCxlLGYpe3ZhciBnPWEsaD1hO1wiaHJlZlwiPT09YSYmXCJbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXVwiPT09RGEuY2FsbChlLnByb3AoXCJocmVmXCIpKSYmKGg9XCJ4bGlua0hyZWZcIixmLiRhdHRyW2hdPVwieGxpbms6aHJlZlwiLGc9bnVsbCk7Zi4kb2JzZXJ2ZShjLFxuZnVuY3Rpb24oYyl7Yz8oZi4kc2V0KGgsYyksUmEmJmcmJmUucHJvcChnLGZbaF0pKTpcImhyZWZcIj09PWEmJmYuJHNldChoLG51bGwpfSl9fX19KTt2YXIgTGI9eyRhZGRDb250cm9sOnosJCRyZW5hbWVDb250cm9sOmZ1bmN0aW9uKGEsYyl7YS4kbmFtZT1jfSwkcmVtb3ZlQ29udHJvbDp6LCRzZXRWYWxpZGl0eTp6LCRzZXREaXJ0eTp6LCRzZXRQcmlzdGluZTp6LCRzZXRTdWJtaXR0ZWQ6en07cmQuJGluamVjdD1bXCIkZWxlbWVudFwiLFwiJGF0dHJzXCIsXCIkc2NvcGVcIixcIiRhbmltYXRlXCIsXCIkaW50ZXJwb2xhdGVcIl07dmFyIHlkPWZ1bmN0aW9uKGEpe3JldHVybltcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYyl7cmV0dXJue25hbWU6XCJmb3JtXCIscmVzdHJpY3Q6YT9cIkVBQ1wiOlwiRVwiLGNvbnRyb2xsZXI6cmQsY29tcGlsZTpmdW5jdGlvbihhKXthLmFkZENsYXNzKFNhKS5hZGRDbGFzcyhsYik7cmV0dXJue3ByZTpmdW5jdGlvbihhLGQsZyxoKXtpZighKFwiYWN0aW9uXCJpbiBnKSl7dmFyIGw9ZnVuY3Rpb24oYyl7YS4kYXBwbHkoZnVuY3Rpb24oKXtoLiRjb21taXRWaWV3VmFsdWUoKTtcbmguJHNldFN1Ym1pdHRlZCgpfSk7Yy5wcmV2ZW50RGVmYXVsdCgpfTtkWzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIixsLCExKTtkLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2MoZnVuY3Rpb24oKXtkWzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIixsLCExKX0sMCwhMSl9KX12YXIgaz1oLiQkcGFyZW50Rm9ybSxtPWguJG5hbWU7bSYmKGhiKGEsbnVsbCxtLGgsbSksZy4kb2JzZXJ2ZShnLm5hbWU/XCJuYW1lXCI6XCJuZ0Zvcm1cIixmdW5jdGlvbihjKXttIT09YyYmKGhiKGEsbnVsbCxtLHQsbSksbT1jLGhiKGEsbnVsbCxtLGgsbSksay4kJHJlbmFtZUNvbnRyb2woaCxtKSl9KSk7ZC5vbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtrLiRyZW1vdmVDb250cm9sKGgpO20mJmhiKGEsbnVsbCxtLHQsbSk7eChoLExiKX0pfX19fX1dfSxVZD15ZCgpLGdlPXlkKCEwKSxNZj0vXFxkezR9LVswMV1cXGQtWzAtM11cXGRUWzAtMl1cXGQ6WzAtNV1cXGQ6WzAtNV1cXGRcXC5cXGQrKFsrLV1bMC0yXVxcZDpbMC01XVxcZHxaKS8sXG5aZj0vXihmdHB8aHR0cHxodHRwcyk6XFwvXFwvKFxcdys6ezAsMX1cXHcqQCk/KFxcUyspKDpbMC05XSspPyhcXC98XFwvKFtcXHcjITouPys9JiVAIVxcLVxcL10pKT8kLywkZj0vXlthLXowLTkhIyQlJicqK1xcLz0/Xl9ge3x9fi4tXStAW2EtejAtOV0oW2EtejAtOS1dKlthLXowLTldKT8oXFwuW2EtejAtOV0oW2EtejAtOS1dKlthLXowLTldKT8pKiQvaSxhZz0vXlxccyooXFwtfFxcKyk/KFxcZCt8KFxcZCooXFwuXFxkKikpKVxccyokLyx6ZD0vXihcXGR7NH0pLShcXGR7Mn0pLShcXGR7Mn0pJC8sQWQ9L14oXFxkezR9KS0oXFxkXFxkKS0oXFxkXFxkKVQoXFxkXFxkKTooXFxkXFxkKSg/OjooXFxkXFxkKShcXC5cXGR7MSwzfSk/KT8kLyxrYz0vXihcXGR7NH0pLVcoXFxkXFxkKSQvLEJkPS9eKFxcZHs0fSktKFxcZFxcZCkkLyxDZD0vXihcXGRcXGQpOihcXGRcXGQpKD86OihcXGRcXGQpKFxcLlxcZHsxLDN9KT8pPyQvLERkPXt0ZXh0OmZ1bmN0aW9uKGEsYyxkLGUsZixnKXtqYihhLGMsZCxlLGYsZyk7aWMoZSl9LGRhdGU6a2IoXCJkYXRlXCIsemQsTmIoemQsW1wieXl5eVwiLFxuXCJNTVwiLFwiZGRcIl0pLFwieXl5eS1NTS1kZFwiKSxcImRhdGV0aW1lLWxvY2FsXCI6a2IoXCJkYXRldGltZWxvY2FsXCIsQWQsTmIoQWQsXCJ5eXl5IE1NIGRkIEhIIG1tIHNzIHNzc1wiLnNwbGl0KFwiIFwiKSksXCJ5eXl5LU1NLWRkVEhIOm1tOnNzLnNzc1wiKSx0aW1lOmtiKFwidGltZVwiLENkLE5iKENkLFtcIkhIXCIsXCJtbVwiLFwic3NcIixcInNzc1wiXSksXCJISDptbTpzcy5zc3NcIiksd2VlazprYihcIndlZWtcIixrYyxmdW5jdGlvbihhLGMpe2lmKHFhKGEpKXJldHVybiBhO2lmKEYoYSkpe2tjLmxhc3RJbmRleD0wO3ZhciBkPWtjLmV4ZWMoYSk7aWYoZCl7dmFyIGU9K2RbMV0sZj0rZFsyXSxnPWQ9MCxoPTAsbD0wLGs9cGQoZSksZj03KihmLTEpO2MmJihkPWMuZ2V0SG91cnMoKSxnPWMuZ2V0TWludXRlcygpLGg9Yy5nZXRTZWNvbmRzKCksbD1jLmdldE1pbGxpc2Vjb25kcygpKTtyZXR1cm4gbmV3IERhdGUoZSwwLGsuZ2V0RGF0ZSgpK2YsZCxnLGgsbCl9fXJldHVybiBOYU59LFwieXl5eS1Xd3dcIiksbW9udGg6a2IoXCJtb250aFwiLFxuQmQsTmIoQmQsW1wieXl5eVwiLFwiTU1cIl0pLFwieXl5eS1NTVwiKSxudW1iZXI6ZnVuY3Rpb24oYSxjLGQsZSxmLGcpe3RkKGEsYyxkLGUpO2piKGEsYyxkLGUsZixnKTtlLiQkcGFyc2VyTmFtZT1cIm51bWJlclwiO2UuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gZS4kaXNFbXB0eShhKT9udWxsOmFnLnRlc3QoYSk/cGFyc2VGbG9hdChhKTp0fSk7ZS4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe2lmKCFlLiRpc0VtcHR5KGEpKXtpZighVihhKSl0aHJvdyBPYihcIm51bWZtdFwiLGEpO2E9YS50b1N0cmluZygpfXJldHVybiBhfSk7aWYoZC5taW58fGQubmdNaW4pe3ZhciBoO2UuJHZhbGlkYXRvcnMubWluPWZ1bmN0aW9uKGEpe3JldHVybiBlLiRpc0VtcHR5KGEpfHxCKGgpfHxhPj1ofTtkLiRvYnNlcnZlKFwibWluXCIsZnVuY3Rpb24oYSl7eShhKSYmIVYoYSkmJihhPXBhcnNlRmxvYXQoYSwxMCkpO2g9VihhKSYmIWlzTmFOKGEpP2E6dDtlLiR2YWxpZGF0ZSgpfSl9aWYoZC5tYXh8fFxuZC5uZ01heCl7dmFyIGw7ZS4kdmFsaWRhdG9ycy5tYXg9ZnVuY3Rpb24oYSl7cmV0dXJuIGUuJGlzRW1wdHkoYSl8fEIobCl8fGE8PWx9O2QuJG9ic2VydmUoXCJtYXhcIixmdW5jdGlvbihhKXt5KGEpJiYhVihhKSYmKGE9cGFyc2VGbG9hdChhLDEwKSk7bD1WKGEpJiYhaXNOYU4oYSk/YTp0O2UuJHZhbGlkYXRlKCl9KX19LHVybDpmdW5jdGlvbihhLGMsZCxlLGYsZyl7amIoYSxjLGQsZSxmLGcpO2ljKGUpO2UuJCRwYXJzZXJOYW1lPVwidXJsXCI7ZS4kdmFsaWRhdG9ycy51cmw9ZnVuY3Rpb24oYSxjKXt2YXIgZD1hfHxjO3JldHVybiBlLiRpc0VtcHR5KGQpfHxaZi50ZXN0KGQpfX0sZW1haWw6ZnVuY3Rpb24oYSxjLGQsZSxmLGcpe2piKGEsYyxkLGUsZixnKTtpYyhlKTtlLiQkcGFyc2VyTmFtZT1cImVtYWlsXCI7ZS4kdmFsaWRhdG9ycy5lbWFpbD1mdW5jdGlvbihhLGMpe3ZhciBkPWF8fGM7cmV0dXJuIGUuJGlzRW1wdHkoZCl8fCRmLnRlc3QoZCl9fSxyYWRpbzpmdW5jdGlvbihhLGMsXG5kLGUpe0IoZC5uYW1lKSYmYy5hdHRyKFwibmFtZVwiLCsrb2IpO2Mub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2NbMF0uY2hlY2tlZCYmZS4kc2V0Vmlld1ZhbHVlKGQudmFsdWUsYSYmYS50eXBlKX0pO2UuJHJlbmRlcj1mdW5jdGlvbigpe2NbMF0uY2hlY2tlZD1kLnZhbHVlPT1lLiR2aWV3VmFsdWV9O2QuJG9ic2VydmUoXCJ2YWx1ZVwiLGUuJHJlbmRlcil9LGNoZWNrYm94OmZ1bmN0aW9uKGEsYyxkLGUsZixnLGgsbCl7dmFyIGs9dWQobCxhLFwibmdUcnVlVmFsdWVcIixkLm5nVHJ1ZVZhbHVlLCEwKSxtPXVkKGwsYSxcIm5nRmFsc2VWYWx1ZVwiLGQubmdGYWxzZVZhbHVlLCExKTtjLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXtlLiRzZXRWaWV3VmFsdWUoY1swXS5jaGVja2VkLGEmJmEudHlwZSl9KTtlLiRyZW5kZXI9ZnVuY3Rpb24oKXtjWzBdLmNoZWNrZWQ9ZS4kdmlld1ZhbHVlfTtlLiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiExPT09YX07ZS4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBnYShhLFxuayl9KTtlLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIGE/azptfSl9LGhpZGRlbjp6LGJ1dHRvbjp6LHN1Ym1pdDp6LHJlc2V0OnosZmlsZTp6fSx5Yz1bXCIkYnJvd3NlclwiLFwiJHNuaWZmZXJcIixcIiRmaWx0ZXJcIixcIiRwYXJzZVwiLGZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybntyZXN0cmljdDpcIkVcIixyZXF1aXJlOltcIj9uZ01vZGVsXCJdLGxpbms6e3ByZTpmdW5jdGlvbihmLGcsaCxsKXtsWzBdJiYoRGRbUShoLnR5cGUpXXx8RGQudGV4dCkoZixnLGgsbFswXSxjLGEsZCxlKX19fX1dLGJnPS9eKHRydWV8ZmFsc2V8XFxkKykkLyx5ZT1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixwcmlvcml0eToxMDAsY29tcGlsZTpmdW5jdGlvbihhLGMpe3JldHVybiBiZy50ZXN0KGMubmdWYWx1ZSk/ZnVuY3Rpb24oYSxjLGYpe2YuJHNldChcInZhbHVlXCIsYS4kZXZhbChmLm5nVmFsdWUpKX06ZnVuY3Rpb24oYSxjLGYpe2EuJHdhdGNoKGYubmdWYWx1ZSxmdW5jdGlvbihhKXtmLiRzZXQoXCJ2YWx1ZVwiLFxuYSl9KX19fX0sWmQ9W1wiJGNvbXBpbGVcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJBQ1wiLGNvbXBpbGU6ZnVuY3Rpb24oYyl7YS4kJGFkZEJpbmRpbmdDbGFzcyhjKTtyZXR1cm4gZnVuY3Rpb24oYyxlLGYpe2EuJCRhZGRCaW5kaW5nSW5mbyhlLGYubmdCaW5kKTtlPWVbMF07Yy4kd2F0Y2goZi5uZ0JpbmQsZnVuY3Rpb24oYSl7ZS50ZXh0Q29udGVudD1hPT09dD9cIlwiOmF9KX19fX1dLGFlPVtcIiRpbnRlcnBvbGF0ZVwiLFwiJGNvbXBpbGVcIixmdW5jdGlvbihhLGMpe3JldHVybntjb21waWxlOmZ1bmN0aW9uKGQpe2MuJCRhZGRCaW5kaW5nQ2xhc3MoZCk7cmV0dXJuIGZ1bmN0aW9uKGQsZixnKXtkPWEoZi5hdHRyKGcuJGF0dHIubmdCaW5kVGVtcGxhdGUpKTtjLiQkYWRkQmluZGluZ0luZm8oZixkLmV4cHJlc3Npb25zKTtmPWZbMF07Zy4kb2JzZXJ2ZShcIm5nQmluZFRlbXBsYXRlXCIsZnVuY3Rpb24oYSl7Zi50ZXh0Q29udGVudD1hPT09dD9cIlwiOmF9KX19fX1dLCRkPVtcIiRzY2VcIixcblwiJHBhcnNlXCIsXCIkY29tcGlsZVwiLGZ1bmN0aW9uKGEsYyxkKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsY29tcGlsZTpmdW5jdGlvbihlLGYpe3ZhciBnPWMoZi5uZ0JpbmRIdG1sKSxoPWMoZi5uZ0JpbmRIdG1sLGZ1bmN0aW9uKGEpe3JldHVybihhfHxcIlwiKS50b1N0cmluZygpfSk7ZC4kJGFkZEJpbmRpbmdDbGFzcyhlKTtyZXR1cm4gZnVuY3Rpb24oYyxlLGYpe2QuJCRhZGRCaW5kaW5nSW5mbyhlLGYubmdCaW5kSHRtbCk7Yy4kd2F0Y2goaCxmdW5jdGlvbigpe2UuaHRtbChhLmdldFRydXN0ZWRIdG1sKGcoYykpfHxcIlwiKX0pfX19fV0seGU9ZWEoe3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCJuZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGMsZCxlKXtlLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLnB1c2goZnVuY3Rpb24oKXthLiRldmFsKGQubmdDaGFuZ2UpfSl9fSksYmU9amMoXCJcIiwhMCksZGU9amMoXCJPZGRcIiwwKSxjZT1qYyhcIkV2ZW5cIiwxKSxlZT1KYSh7Y29tcGlsZTpmdW5jdGlvbihhLGMpe2MuJHNldChcIm5nQ2xvYWtcIixcbnQpO2EucmVtb3ZlQ2xhc3MoXCJuZy1jbG9ha1wiKX19KSxmZT1bZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsc2NvcGU6ITAsY29udHJvbGxlcjpcIkBcIixwcmlvcml0eTo1MDB9fV0sRGM9e30sY2c9e2JsdXI6ITAsZm9jdXM6ITB9O3MoXCJjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2Vtb3ZlIG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBrZXlkb3duIGtleXVwIGtleXByZXNzIHN1Ym1pdCBmb2N1cyBibHVyIGNvcHkgY3V0IHBhc3RlXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEpe3ZhciBjPXlhKFwibmctXCIrYSk7RGNbY109W1wiJHBhcnNlXCIsXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24oZCxlKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsY29tcGlsZTpmdW5jdGlvbihmLGcpe3ZhciBoPWQoZ1tjXSxudWxsLCEwKTtyZXR1cm4gZnVuY3Rpb24oYyxkKXtkLm9uKGEsZnVuY3Rpb24oZCl7dmFyIGY9ZnVuY3Rpb24oKXtoKGMseyRldmVudDpkfSl9O1xuY2dbYV0mJmUuJCRwaGFzZT9jLiRldmFsQXN5bmMoZik6Yy4kYXBwbHkoZil9KX19fX1dfSk7dmFyIGllPVtcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJue211bHRpRWxlbWVudDohMCx0cmFuc2NsdWRlOlwiZWxlbWVudFwiLHByaW9yaXR5OjYwMCx0ZXJtaW5hbDohMCxyZXN0cmljdDpcIkFcIiwkJHRsYjohMCxsaW5rOmZ1bmN0aW9uKGMsZCxlLGYsZyl7dmFyIGgsbCxrO2MuJHdhdGNoKGUubmdJZixmdW5jdGlvbihjKXtjP2x8fGcoZnVuY3Rpb24oYyxmKXtsPWY7Y1tjLmxlbmd0aCsrXT1ZLmNyZWF0ZUNvbW1lbnQoXCIgZW5kIG5nSWY6IFwiK2UubmdJZitcIiBcIik7aD17Y2xvbmU6Y307YS5lbnRlcihjLGQucGFyZW50KCksZCl9KTooayYmKGsucmVtb3ZlKCksaz1udWxsKSxsJiYobC4kZGVzdHJveSgpLGw9bnVsbCksaCYmKGs9dWIoaC5jbG9uZSksYS5sZWF2ZShrKS50aGVuKGZ1bmN0aW9uKCl7az1udWxsfSksaD1udWxsKSl9KX19fV0samU9W1wiJHRlbXBsYXRlUmVxdWVzdFwiLFwiJGFuY2hvclNjcm9sbFwiLFxuXCIkYW5pbWF0ZVwiLFwiJHNjZVwiLGZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybntyZXN0cmljdDpcIkVDQVwiLHByaW9yaXR5OjQwMCx0ZXJtaW5hbDohMCx0cmFuc2NsdWRlOlwiZWxlbWVudFwiLGNvbnRyb2xsZXI6Y2Eubm9vcCxjb21waWxlOmZ1bmN0aW9uKGYsZyl7dmFyIGg9Zy5uZ0luY2x1ZGV8fGcuc3JjLGw9Zy5vbmxvYWR8fFwiXCIsaz1nLmF1dG9zY3JvbGw7cmV0dXJuIGZ1bmN0aW9uKGYsZyxxLHMscil7dmFyIHQ9MCxwLHYsdyxMPWZ1bmN0aW9uKCl7diYmKHYucmVtb3ZlKCksdj1udWxsKTtwJiYocC4kZGVzdHJveSgpLHA9bnVsbCk7dyYmKGQubGVhdmUodykudGhlbihmdW5jdGlvbigpe3Y9bnVsbH0pLHY9dyx3PW51bGwpfTtmLiR3YXRjaChlLnBhcnNlQXNSZXNvdXJjZVVybChoKSxmdW5jdGlvbihlKXt2YXIgaD1mdW5jdGlvbigpeyF5KGspfHxrJiYhZi4kZXZhbChrKXx8YygpfSxxPSsrdDtlPyhhKGUsITApLnRoZW4oZnVuY3Rpb24oYSl7aWYocT09PXQpe3ZhciBjPWYuJG5ldygpO1xucy50ZW1wbGF0ZT1hO2E9cihjLGZ1bmN0aW9uKGEpe0woKTtkLmVudGVyKGEsbnVsbCxnKS50aGVuKGgpfSk7cD1jO3c9YTtwLiRlbWl0KFwiJGluY2x1ZGVDb250ZW50TG9hZGVkXCIsZSk7Zi4kZXZhbChsKX19LGZ1bmN0aW9uKCl7cT09PXQmJihMKCksZi4kZW1pdChcIiRpbmNsdWRlQ29udGVudEVycm9yXCIsZSkpfSksZi4kZW1pdChcIiRpbmNsdWRlQ29udGVudFJlcXVlc3RlZFwiLGUpKTooTCgpLHMudGVtcGxhdGU9bnVsbCl9KX19fX1dLEFlPVtcIiRjb21waWxlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiRUNBXCIscHJpb3JpdHk6LTQwMCxyZXF1aXJlOlwibmdJbmNsdWRlXCIsbGluazpmdW5jdGlvbihjLGQsZSxmKXsvU1ZHLy50ZXN0KGRbMF0udG9TdHJpbmcoKSk/KGQuZW1wdHkoKSxhKEdjKGYudGVtcGxhdGUsWSkuY2hpbGROb2RlcykoYyxmdW5jdGlvbihhKXtkLmFwcGVuZChhKX0se2Z1dHVyZVBhcmVudEVsZW1lbnQ6ZH0pKTooZC5odG1sKGYudGVtcGxhdGUpLGEoZC5jb250ZW50cygpKShjKSl9fX1dLFxua2U9SmEoe3ByaW9yaXR5OjQ1MCxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihhLGMsZCl7YS4kZXZhbChkLm5nSW5pdCl9fX19KSx3ZT1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixwcmlvcml0eToxMDAscmVxdWlyZTpcIm5nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYyxkLGUpe3ZhciBmPWMuYXR0cihkLiRhdHRyLm5nTGlzdCl8fFwiLCBcIixnPVwiZmFsc2VcIiE9PWQubmdUcmltLGg9Zz9VKGYpOmY7ZS4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe2lmKCFCKGEpKXt2YXIgYz1bXTthJiZzKGEuc3BsaXQoaCksZnVuY3Rpb24oYSl7YSYmYy5wdXNoKGc/VShhKTphKX0pO3JldHVybiBjfX0pO2UuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gSChhKT9hLmpvaW4oZik6dH0pO2UuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fCFhLmxlbmd0aH19fX0sbGI9XCJuZy12YWxpZFwiLHZkPVwibmctaW52YWxpZFwiLFNhPVwibmctcHJpc3RpbmVcIixcbk1iPVwibmctZGlydHlcIix4ZD1cIm5nLXBlbmRpbmdcIixPYj1uZXcgUyhcIm5nTW9kZWxcIiksZGc9W1wiJHNjb3BlXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLFwiJGF0dHJzXCIsXCIkZWxlbWVudFwiLFwiJHBhcnNlXCIsXCIkYW5pbWF0ZVwiLFwiJHRpbWVvdXRcIixcIiRyb290U2NvcGVcIixcIiRxXCIsXCIkaW50ZXJwb2xhdGVcIixmdW5jdGlvbihhLGMsZCxlLGYsZyxoLGwsayxtKXt0aGlzLiRtb2RlbFZhbHVlPXRoaXMuJHZpZXdWYWx1ZT1OdW1iZXIuTmFOO3RoaXMuJCRyYXdNb2RlbFZhbHVlPXQ7dGhpcy4kdmFsaWRhdG9ycz17fTt0aGlzLiRhc3luY1ZhbGlkYXRvcnM9e307dGhpcy4kcGFyc2Vycz1bXTt0aGlzLiRmb3JtYXR0ZXJzPVtdO3RoaXMuJHZpZXdDaGFuZ2VMaXN0ZW5lcnM9W107dGhpcy4kdW50b3VjaGVkPSEwO3RoaXMuJHRvdWNoZWQ9ITE7dGhpcy4kcHJpc3RpbmU9ITA7dGhpcy4kZGlydHk9ITE7dGhpcy4kdmFsaWQ9ITA7dGhpcy4kaW52YWxpZD0hMTt0aGlzLiRlcnJvcj17fTt0aGlzLiQkc3VjY2Vzcz1cbnt9O3RoaXMuJHBlbmRpbmc9dDt0aGlzLiRuYW1lPW0oZC5uYW1lfHxcIlwiLCExKShhKTt2YXIgbj1mKGQubmdNb2RlbCkscT1uLmFzc2lnbix1PW4scj1xLFA9bnVsbCxwPXRoaXM7dGhpcy4kJHNldE9wdGlvbnM9ZnVuY3Rpb24oYSl7aWYoKHAuJG9wdGlvbnM9YSkmJmEuZ2V0dGVyU2V0dGVyKXt2YXIgYz1mKGQubmdNb2RlbCtcIigpXCIpLGc9ZihkLm5nTW9kZWwrXCIoJCQkcClcIik7dT1mdW5jdGlvbihhKXt2YXIgZD1uKGEpO0coZCkmJihkPWMoYSkpO3JldHVybiBkfTtyPWZ1bmN0aW9uKGEsYyl7RyhuKGEpKT9nKGEseyQkJHA6cC4kbW9kZWxWYWx1ZX0pOnEoYSxwLiRtb2RlbFZhbHVlKX19ZWxzZSBpZighbi5hc3NpZ24pdGhyb3cgT2IoXCJub25hc3NpZ25cIixkLm5nTW9kZWwsdmEoZSkpO307dGhpcy4kcmVuZGVyPXo7dGhpcy4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4gQihhKXx8XCJcIj09PWF8fG51bGw9PT1hfHxhIT09YX07dmFyIHY9ZS5pbmhlcml0ZWREYXRhKFwiJGZvcm1Db250cm9sbGVyXCIpfHxcbkxiLHc9MDtzZCh7Y3RybDp0aGlzLCRlbGVtZW50OmUsc2V0OmZ1bmN0aW9uKGEsYyl7YVtjXT0hMH0sdW5zZXQ6ZnVuY3Rpb24oYSxjKXtkZWxldGUgYVtjXX0scGFyZW50Rm9ybTp2LCRhbmltYXRlOmd9KTt0aGlzLiRzZXRQcmlzdGluZT1mdW5jdGlvbigpe3AuJGRpcnR5PSExO3AuJHByaXN0aW5lPSEwO2cucmVtb3ZlQ2xhc3MoZSxNYik7Zy5hZGRDbGFzcyhlLFNhKX07dGhpcy4kc2V0RGlydHk9ZnVuY3Rpb24oKXtwLiRkaXJ0eT0hMDtwLiRwcmlzdGluZT0hMTtnLnJlbW92ZUNsYXNzKGUsU2EpO2cuYWRkQ2xhc3MoZSxNYik7di4kc2V0RGlydHkoKX07dGhpcy4kc2V0VW50b3VjaGVkPWZ1bmN0aW9uKCl7cC4kdG91Y2hlZD0hMTtwLiR1bnRvdWNoZWQ9ITA7Zy5zZXRDbGFzcyhlLFwibmctdW50b3VjaGVkXCIsXCJuZy10b3VjaGVkXCIpfTt0aGlzLiRzZXRUb3VjaGVkPWZ1bmN0aW9uKCl7cC4kdG91Y2hlZD0hMDtwLiR1bnRvdWNoZWQ9ITE7Zy5zZXRDbGFzcyhlLFwibmctdG91Y2hlZFwiLFxuXCJuZy11bnRvdWNoZWRcIil9O3RoaXMuJHJvbGxiYWNrVmlld1ZhbHVlPWZ1bmN0aW9uKCl7aC5jYW5jZWwoUCk7cC4kdmlld1ZhbHVlPXAuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlO3AuJHJlbmRlcigpfTt0aGlzLiR2YWxpZGF0ZT1mdW5jdGlvbigpe2lmKCFWKHAuJG1vZGVsVmFsdWUpfHwhaXNOYU4ocC4kbW9kZWxWYWx1ZSkpe3ZhciBhPXAuJCRyYXdNb2RlbFZhbHVlLGM9cC4kdmFsaWQsZD1wLiRtb2RlbFZhbHVlLGU9cC4kb3B0aW9ucyYmcC4kb3B0aW9ucy5hbGxvd0ludmFsaWQ7cC4kJHJ1blZhbGlkYXRvcnMocC4kZXJyb3JbcC4kJHBhcnNlck5hbWV8fFwicGFyc2VcIl0/ITE6dCxhLHAuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlLGZ1bmN0aW9uKGYpe2V8fGM9PT1mfHwocC4kbW9kZWxWYWx1ZT1mP2E6dCxwLiRtb2RlbFZhbHVlIT09ZCYmcC4kJHdyaXRlTW9kZWxUb1Njb3BlKCkpfSl9fTt0aGlzLiQkcnVuVmFsaWRhdG9ycz1mdW5jdGlvbihhLGMsZCxlKXtmdW5jdGlvbiBmKCl7dmFyIGE9XG4hMDtzKHAuJHZhbGlkYXRvcnMsZnVuY3Rpb24oZSxmKXt2YXIgZz1lKGMsZCk7YT1hJiZnO2goZixnKX0pO3JldHVybiBhPyEwOihzKHAuJGFzeW5jVmFsaWRhdG9ycyxmdW5jdGlvbihhLGMpe2goYyxudWxsKX0pLCExKX1mdW5jdGlvbiBnKCl7dmFyIGE9W10sZT0hMDtzKHAuJGFzeW5jVmFsaWRhdG9ycyxmdW5jdGlvbihmLGcpe3ZhciBsPWYoYyxkKTtpZighbHx8IUcobC50aGVuKSl0aHJvdyBPYihcIiRhc3luY1ZhbGlkYXRvcnNcIixsKTtoKGcsdCk7YS5wdXNoKGwudGhlbihmdW5jdGlvbigpe2goZywhMCl9LGZ1bmN0aW9uKGEpe2U9ITE7aChnLCExKX0pKX0pO2EubGVuZ3RoP2suYWxsKGEpLnRoZW4oZnVuY3Rpb24oKXtsKGUpfSx6KTpsKCEwKX1mdW5jdGlvbiBoKGEsYyl7bT09PXcmJnAuJHNldFZhbGlkaXR5KGEsYyl9ZnVuY3Rpb24gbChhKXttPT09dyYmZShhKX13Kys7dmFyIG09dzsoZnVuY3Rpb24oYSl7dmFyIGM9cC4kJHBhcnNlck5hbWV8fFwicGFyc2VcIjtpZihhPT09XG50KWgoYyxudWxsKTtlbHNlIGlmKGgoYyxhKSwhYSlyZXR1cm4gcyhwLiR2YWxpZGF0b3JzLGZ1bmN0aW9uKGEsYyl7aChjLG51bGwpfSkscyhwLiRhc3luY1ZhbGlkYXRvcnMsZnVuY3Rpb24oYSxjKXtoKGMsbnVsbCl9KSwhMTtyZXR1cm4hMH0pKGEpP2YoKT9nKCk6bCghMSk6bCghMSl9O3RoaXMuJGNvbW1pdFZpZXdWYWx1ZT1mdW5jdGlvbigpe3ZhciBhPXAuJHZpZXdWYWx1ZTtoLmNhbmNlbChQKTtpZihwLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSE9PWF8fFwiXCI9PT1hJiZwLiQkaGFzTmF0aXZlVmFsaWRhdG9ycylwLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZT1hLHAuJHByaXN0aW5lJiZ0aGlzLiRzZXREaXJ0eSgpLHRoaXMuJCRwYXJzZUFuZFZhbGlkYXRlKCl9O3RoaXMuJCRwYXJzZUFuZFZhbGlkYXRlPWZ1bmN0aW9uKCl7dmFyIGM9cC4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUsZD1CKGMpP3Q6ITA7aWYoZClmb3IodmFyIGU9MDtlPHAuJHBhcnNlcnMubGVuZ3RoO2UrKylpZihjPVxucC4kcGFyc2Vyc1tlXShjKSxCKGMpKXtkPSExO2JyZWFrfVYocC4kbW9kZWxWYWx1ZSkmJmlzTmFOKHAuJG1vZGVsVmFsdWUpJiYocC4kbW9kZWxWYWx1ZT11KGEpKTt2YXIgZj1wLiRtb2RlbFZhbHVlLGc9cC4kb3B0aW9ucyYmcC4kb3B0aW9ucy5hbGxvd0ludmFsaWQ7cC4kJHJhd01vZGVsVmFsdWU9YztnJiYocC4kbW9kZWxWYWx1ZT1jLHAuJG1vZGVsVmFsdWUhPT1mJiZwLiQkd3JpdGVNb2RlbFRvU2NvcGUoKSk7cC4kJHJ1blZhbGlkYXRvcnMoZCxjLHAuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlLGZ1bmN0aW9uKGEpe2d8fChwLiRtb2RlbFZhbHVlPWE/Yzp0LHAuJG1vZGVsVmFsdWUhPT1mJiZwLiQkd3JpdGVNb2RlbFRvU2NvcGUoKSl9KX07dGhpcy4kJHdyaXRlTW9kZWxUb1Njb3BlPWZ1bmN0aW9uKCl7cihhLHAuJG1vZGVsVmFsdWUpO3MocC4kdmlld0NoYW5nZUxpc3RlbmVycyxmdW5jdGlvbihhKXt0cnl7YSgpfWNhdGNoKGQpe2MoZCl9fSl9O3RoaXMuJHNldFZpZXdWYWx1ZT1cbmZ1bmN0aW9uKGEsYyl7cC4kdmlld1ZhbHVlPWE7cC4kb3B0aW9ucyYmIXAuJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0fHxwLiQkZGVib3VuY2VWaWV3VmFsdWVDb21taXQoYyl9O3RoaXMuJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdD1mdW5jdGlvbihjKXt2YXIgZD0wLGU9cC4kb3B0aW9ucztlJiZ5KGUuZGVib3VuY2UpJiYoZT1lLmRlYm91bmNlLFYoZSk/ZD1lOlYoZVtjXSk/ZD1lW2NdOlYoZVtcImRlZmF1bHRcIl0pJiYoZD1lW1wiZGVmYXVsdFwiXSkpO2guY2FuY2VsKFApO2Q/UD1oKGZ1bmN0aW9uKCl7cC4kY29tbWl0Vmlld1ZhbHVlKCl9LGQpOmwuJCRwaGFzZT9wLiRjb21taXRWaWV3VmFsdWUoKTphLiRhcHBseShmdW5jdGlvbigpe3AuJGNvbW1pdFZpZXdWYWx1ZSgpfSl9O2EuJHdhdGNoKGZ1bmN0aW9uKCl7dmFyIGM9dShhKTtpZihjIT09cC4kbW9kZWxWYWx1ZSl7cC4kbW9kZWxWYWx1ZT1wLiQkcmF3TW9kZWxWYWx1ZT1jO2Zvcih2YXIgZD1wLiRmb3JtYXR0ZXJzLGU9ZC5sZW5ndGgsXG5mPWM7ZS0tOylmPWRbZV0oZik7cC4kdmlld1ZhbHVlIT09ZiYmKHAuJHZpZXdWYWx1ZT1wLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZT1mLHAuJHJlbmRlcigpLHAuJCRydW5WYWxpZGF0b3JzKHQsYyxmLHopKX1yZXR1cm4gY30pfV0sdmU9W1wiJHJvb3RTY29wZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOltcIm5nTW9kZWxcIixcIl4/Zm9ybVwiLFwiXj9uZ01vZGVsT3B0aW9uc1wiXSxjb250cm9sbGVyOmRnLHByaW9yaXR5OjEsY29tcGlsZTpmdW5jdGlvbihjKXtjLmFkZENsYXNzKFNhKS5hZGRDbGFzcyhcIm5nLXVudG91Y2hlZFwiKS5hZGRDbGFzcyhsYik7cmV0dXJue3ByZTpmdW5jdGlvbihhLGMsZixnKXt2YXIgaD1nWzBdLGw9Z1sxXXx8TGI7aC4kJHNldE9wdGlvbnMoZ1syXSYmZ1syXS4kb3B0aW9ucyk7bC4kYWRkQ29udHJvbChoKTtmLiRvYnNlcnZlKFwibmFtZVwiLGZ1bmN0aW9uKGEpe2guJG5hbWUhPT1hJiZsLiQkcmVuYW1lQ29udHJvbChoLGEpfSk7YS4kb24oXCIkZGVzdHJveVwiLFxuZnVuY3Rpb24oKXtsLiRyZW1vdmVDb250cm9sKGgpfSl9LHBvc3Q6ZnVuY3Rpb24oYyxlLGYsZyl7dmFyIGg9Z1swXTtpZihoLiRvcHRpb25zJiZoLiRvcHRpb25zLnVwZGF0ZU9uKWUub24oaC4kb3B0aW9ucy51cGRhdGVPbixmdW5jdGlvbihhKXtoLiQkZGVib3VuY2VWaWV3VmFsdWVDb21taXQoYSYmYS50eXBlKX0pO2Uub24oXCJibHVyXCIsZnVuY3Rpb24oZSl7aC4kdG91Y2hlZHx8KGEuJCRwaGFzZT9jLiRldmFsQXN5bmMoaC4kc2V0VG91Y2hlZCk6Yy4kYXBwbHkoaC4kc2V0VG91Y2hlZCkpfSl9fX19fV0sZWc9LyhcXHMrfF4pZGVmYXVsdChcXHMrfCQpLyx6ZT1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixjb250cm9sbGVyOltcIiRzY29wZVwiLFwiJGF0dHJzXCIsZnVuY3Rpb24oYSxjKXt2YXIgZD10aGlzO3RoaXMuJG9wdGlvbnM9YS4kZXZhbChjLm5nTW9kZWxPcHRpb25zKTt0aGlzLiRvcHRpb25zLnVwZGF0ZU9uIT09dD8odGhpcy4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQ9XG4hMSx0aGlzLiRvcHRpb25zLnVwZGF0ZU9uPVUodGhpcy4kb3B0aW9ucy51cGRhdGVPbi5yZXBsYWNlKGVnLGZ1bmN0aW9uKCl7ZC4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQ9ITA7cmV0dXJuXCIgXCJ9KSkpOnRoaXMuJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0PSEwfV19fSxsZT1KYSh7dGVybWluYWw6ITAscHJpb3JpdHk6MUUzfSksbWU9W1wiJGxvY2FsZVwiLFwiJGludGVycG9sYXRlXCIsZnVuY3Rpb24oYSxjKXt2YXIgZD0ve30vZyxlPS9ed2hlbihNaW51cyk/KC4rKSQvO3JldHVybntyZXN0cmljdDpcIkVBXCIsbGluazpmdW5jdGlvbihmLGcsaCl7ZnVuY3Rpb24gbChhKXtnLnRleHQoYXx8XCJcIil9dmFyIGs9aC5jb3VudCxtPWguJGF0dHIud2hlbiYmZy5hdHRyKGguJGF0dHIud2hlbiksbj1oLm9mZnNldHx8MCxxPWYuJGV2YWwobSl8fHt9LHU9e30sbT1jLnN0YXJ0U3ltYm9sKCkscj1jLmVuZFN5bWJvbCgpLHQ9bStrK1wiLVwiK24rcixwPWNhLm5vb3AsdjtzKGgsZnVuY3Rpb24oYSxjKXt2YXIgZD1cbmUuZXhlYyhjKTtkJiYoZD0oZFsxXT9cIi1cIjpcIlwiKStRKGRbMl0pLHFbZF09Zy5hdHRyKGguJGF0dHJbY10pKX0pO3MocSxmdW5jdGlvbihhLGUpe3VbZV09YyhhLnJlcGxhY2UoZCx0KSl9KTtmLiR3YXRjaChrLGZ1bmN0aW9uKGMpe2M9cGFyc2VGbG9hdChjKTt2YXIgZD1pc05hTihjKTtkfHxjIGluIHF8fChjPWEucGx1cmFsQ2F0KGMtbikpO2M9PT12fHxkJiZpc05hTih2KXx8KHAoKSxwPWYuJHdhdGNoKHVbY10sbCksdj1jKX0pfX19XSxuZT1bXCIkcGFyc2VcIixcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSxjKXt2YXIgZD1TKFwibmdSZXBlYXRcIiksZT1mdW5jdGlvbihhLGMsZCxlLGssbSxuKXthW2RdPWU7ayYmKGFba109bSk7YS4kaW5kZXg9YzthLiRmaXJzdD0wPT09YzthLiRsYXN0PWM9PT1uLTE7YS4kbWlkZGxlPSEoYS4kZmlyc3R8fGEuJGxhc3QpO2EuJG9kZD0hKGEuJGV2ZW49MD09PShjJjEpKX07cmV0dXJue3Jlc3RyaWN0OlwiQVwiLG11bHRpRWxlbWVudDohMCx0cmFuc2NsdWRlOlwiZWxlbWVudFwiLFxucHJpb3JpdHk6MUUzLHRlcm1pbmFsOiEwLCQkdGxiOiEwLGNvbXBpbGU6ZnVuY3Rpb24oZixnKXt2YXIgaD1nLm5nUmVwZWF0LGw9WS5jcmVhdGVDb21tZW50KFwiIGVuZCBuZ1JlcGVhdDogXCIraCtcIiBcIiksaz1oLm1hdGNoKC9eXFxzKihbXFxzXFxTXSs/KVxccytpblxccysoW1xcc1xcU10rPykoPzpcXHMrYXNcXHMrKFtcXHNcXFNdKz8pKT8oPzpcXHMrdHJhY2tcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT9cXHMqJC8pO2lmKCFrKXRocm93IGQoXCJpZXhwXCIsaCk7dmFyIG09a1sxXSxuPWtbMl0scT1rWzNdLHU9a1s0XSxrPW0ubWF0Y2goL14oPzooXFxzKltcXCRcXHddKyl8XFwoXFxzKihbXFwkXFx3XSspXFxzKixcXHMqKFtcXCRcXHddKylcXHMqXFwpKSQvKTtpZighayl0aHJvdyBkKFwiaWlkZXhwXCIsbSk7dmFyIHI9a1szXXx8a1sxXSx5PWtbMl07aWYocSYmKCEvXlskYS16QS1aX11bJGEtekEtWjAtOV9dKiQvLnRlc3QocSl8fC9eKG51bGx8dW5kZWZpbmVkfHRoaXN8XFwkaW5kZXh8XFwkZmlyc3R8XFwkbWlkZGxlfFxcJGxhc3R8XFwkZXZlbnxcXCRvZGR8XFwkcGFyZW50fFxcJHJvb3R8XFwkaWQpJC8udGVzdChxKSkpdGhyb3cgZChcImJhZGlkZW50XCIsXG5xKTt2YXIgcCx2LHcsQix6PXskaWQ6TmF9O3U/cD1hKHUpOih3PWZ1bmN0aW9uKGEsYyl7cmV0dXJuIE5hKGMpfSxCPWZ1bmN0aW9uKGEpe3JldHVybiBhfSk7cmV0dXJuIGZ1bmN0aW9uKGEsZixnLGssbSl7cCYmKHY9ZnVuY3Rpb24oYyxkLGUpe3kmJih6W3ldPWMpO3pbcl09ZDt6LiRpbmRleD1lO3JldHVybiBwKGEseil9KTt2YXIgdT1oYSgpO2EuJHdhdGNoQ29sbGVjdGlvbihuLGZ1bmN0aW9uKGcpe3ZhciBrLHAsbj1mWzBdLEUsej1oYSgpLHgsVCxOLEcsSCxDLEk7cSYmKGFbcV09Zyk7aWYoVGEoZykpSD1nLHA9dnx8dztlbHNle3A9dnx8QjtIPVtdO2ZvcihJIGluIGcpZy5oYXNPd25Qcm9wZXJ0eShJKSYmXCIkXCIhPUkuY2hhckF0KDApJiZILnB1c2goSSk7SC5zb3J0KCl9eD1ILmxlbmd0aDtJPUFycmF5KHgpO2ZvcihrPTA7azx4O2srKylpZihUPWc9PT1IP2s6SFtrXSxOPWdbVF0sRz1wKFQsTixrKSx1W0ddKUM9dVtHXSxkZWxldGUgdVtHXSx6W0ddPUMsSVtrXT1DO2Vsc2V7aWYoeltHXSl0aHJvdyBzKEksXG5mdW5jdGlvbihhKXthJiZhLnNjb3BlJiYodVthLmlkXT1hKX0pLGQoXCJkdXBlc1wiLGgsRyxOKTtJW2tdPXtpZDpHLHNjb3BlOnQsY2xvbmU6dH07eltHXT0hMH1mb3IoRSBpbiB1KXtDPXVbRV07Rz11YihDLmNsb25lKTtjLmxlYXZlKEcpO2lmKEdbMF0ucGFyZW50Tm9kZSlmb3Ioaz0wLHA9Ry5sZW5ndGg7azxwO2srKylHW2tdLiQkTkdfUkVNT1ZFRD0hMDtDLnNjb3BlLiRkZXN0cm95KCl9Zm9yKGs9MDtrPHg7aysrKWlmKFQ9Zz09PUg/azpIW2tdLE49Z1tUXSxDPUlba10sQy5zY29wZSl7RT1uO2RvIEU9RS5uZXh0U2libGluZzt3aGlsZShFJiZFLiQkTkdfUkVNT1ZFRCk7Qy5jbG9uZVswXSE9RSYmYy5tb3ZlKHViKEMuY2xvbmUpLG51bGwsRChuKSk7bj1DLmNsb25lW0MuY2xvbmUubGVuZ3RoLTFdO2UoQy5zY29wZSxrLHIsTix5LFQseCl9ZWxzZSBtKGZ1bmN0aW9uKGEsZCl7Qy5zY29wZT1kO3ZhciBmPWwuY2xvbmVOb2RlKCExKTthW2EubGVuZ3RoKytdPWY7Yy5lbnRlcihhLFxubnVsbCxEKG4pKTtuPWY7Qy5jbG9uZT1hO3pbQy5pZF09QztlKEMuc2NvcGUsayxyLE4seSxULHgpfSk7dT16fSl9fX19XSxvZT1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkFcIixtdWx0aUVsZW1lbnQ6ITAsbGluazpmdW5jdGlvbihjLGQsZSl7Yy4kd2F0Y2goZS5uZ1Nob3csZnVuY3Rpb24oYyl7YVtjP1wicmVtb3ZlQ2xhc3NcIjpcImFkZENsYXNzXCJdKGQsXCJuZy1oaWRlXCIse3RlbXBDbGFzc2VzOlwibmctaGlkZS1hbmltYXRlXCJ9KX0pfX19XSxoZT1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkFcIixtdWx0aUVsZW1lbnQ6ITAsbGluazpmdW5jdGlvbihjLGQsZSl7Yy4kd2F0Y2goZS5uZ0hpZGUsZnVuY3Rpb24oYyl7YVtjP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKGQsXCJuZy1oaWRlXCIse3RlbXBDbGFzc2VzOlwibmctaGlkZS1hbmltYXRlXCJ9KX0pfX19XSxwZT1KYShmdW5jdGlvbihhLGMsZCl7YS4kd2F0Y2hDb2xsZWN0aW9uKGQubmdTdHlsZSxcbmZ1bmN0aW9uKGEsZCl7ZCYmYSE9PWQmJnMoZCxmdW5jdGlvbihhLGQpe2MuY3NzKGQsXCJcIil9KTthJiZjLmNzcyhhKX0pfSkscWU9W1wiJGFuaW1hdGVcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHJlcXVpcmU6XCJuZ1N3aXRjaFwiLGNvbnRyb2xsZXI6W1wiJHNjb3BlXCIsZnVuY3Rpb24oKXt0aGlzLmNhc2VzPXt9fV0sbGluazpmdW5jdGlvbihjLGQsZSxmKXt2YXIgZz1bXSxoPVtdLGw9W10saz1bXSxtPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGZ1bmN0aW9uKCl7YS5zcGxpY2UoYywxKX19O2MuJHdhdGNoKGUubmdTd2l0Y2h8fGUub24sZnVuY3Rpb24oYyl7dmFyIGQsZTtkPTA7Zm9yKGU9bC5sZW5ndGg7ZDxlOysrZClhLmNhbmNlbChsW2RdKTtkPWwubGVuZ3RoPTA7Zm9yKGU9ay5sZW5ndGg7ZDxlOysrZCl7dmFyIHI9dWIoaFtkXS5jbG9uZSk7a1tkXS4kZGVzdHJveSgpOyhsW2RdPWEubGVhdmUocikpLnRoZW4obShsLGQpKX1oLmxlbmd0aD0wO2subGVuZ3RoPTA7KGc9XG5mLmNhc2VzW1wiIVwiK2NdfHxmLmNhc2VzW1wiP1wiXSkmJnMoZyxmdW5jdGlvbihjKXtjLnRyYW5zY2x1ZGUoZnVuY3Rpb24oZCxlKXtrLnB1c2goZSk7dmFyIGY9Yy5lbGVtZW50O2RbZC5sZW5ndGgrK109WS5jcmVhdGVDb21tZW50KFwiIGVuZCBuZ1N3aXRjaFdoZW46IFwiKTtoLnB1c2goe2Nsb25lOmR9KTthLmVudGVyKGQsZi5wYXJlbnQoKSxmKX0pfSl9KX19fV0scmU9SmEoe3RyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6MTIwMCxyZXF1aXJlOlwiXm5nU3dpdGNoXCIsbXVsdGlFbGVtZW50OiEwLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSxmKXtlLmNhc2VzW1wiIVwiK2QubmdTd2l0Y2hXaGVuXT1lLmNhc2VzW1wiIVwiK2QubmdTd2l0Y2hXaGVuXXx8W107ZS5jYXNlc1tcIiFcIitkLm5nU3dpdGNoV2hlbl0ucHVzaCh7dHJhbnNjbHVkZTpmLGVsZW1lbnQ6Y30pfX0pLHNlPUphKHt0cmFuc2NsdWRlOlwiZWxlbWVudFwiLHByaW9yaXR5OjEyMDAscmVxdWlyZTpcIl5uZ1N3aXRjaFwiLG11bHRpRWxlbWVudDohMCxcbmxpbms6ZnVuY3Rpb24oYSxjLGQsZSxmKXtlLmNhc2VzW1wiP1wiXT1lLmNhc2VzW1wiP1wiXXx8W107ZS5jYXNlc1tcIj9cIl0ucHVzaCh7dHJhbnNjbHVkZTpmLGVsZW1lbnQ6Y30pfX0pLHVlPUphKHtyZXN0cmljdDpcIkVBQ1wiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSxmKXtpZighZil0aHJvdyBTKFwibmdUcmFuc2NsdWRlXCIpKFwib3JwaGFuXCIsdmEoYykpO2YoZnVuY3Rpb24oYSl7Yy5lbXB0eSgpO2MuYXBwZW5kKGEpfSl9fSksVmQ9W1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIsdGVybWluYWw6ITAsY29tcGlsZTpmdW5jdGlvbihjLGQpe1widGV4dC9uZy10ZW1wbGF0ZVwiPT1kLnR5cGUmJmEucHV0KGQuaWQsY1swXS50ZXh0KX19fV0sZmc9UyhcIm5nT3B0aW9uc1wiKSx0ZT1lYSh7cmVzdHJpY3Q6XCJBXCIsdGVybWluYWw6ITB9KSxXZD1bXCIkY29tcGlsZVwiLFwiJHBhcnNlXCIsZnVuY3Rpb24oYSxjKXt2YXIgZD0vXlxccyooW1xcc1xcU10rPykoPzpcXHMrYXNcXHMrKFtcXHNcXFNdKz8pKT8oPzpcXHMrZ3JvdXBcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT9cXHMrZm9yXFxzKyg/OihbXFwkXFx3XVtcXCRcXHddKil8KD86XFwoXFxzKihbXFwkXFx3XVtcXCRcXHddKilcXHMqLFxccyooW1xcJFxcd11bXFwkXFx3XSopXFxzKlxcKSkpXFxzK2luXFxzKyhbXFxzXFxTXSs/KSg/Olxccyt0cmFja1xccytieVxccysoW1xcc1xcU10rPykpPyQvLFxuZT17JHNldFZpZXdWYWx1ZTp6fTtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVxdWlyZTpbXCJzZWxlY3RcIixcIj9uZ01vZGVsXCJdLGNvbnRyb2xsZXI6W1wiJGVsZW1lbnRcIixcIiRzY29wZVwiLFwiJGF0dHJzXCIsZnVuY3Rpb24oYSxjLGQpe3ZhciBsPXRoaXMsaz17fSxtPWUsbjtsLmRhdGFib3VuZD1kLm5nTW9kZWw7bC5pbml0PWZ1bmN0aW9uKGEsYyxkKXttPWE7bj1kfTtsLmFkZE9wdGlvbj1mdW5jdGlvbihjLGQpe01hKGMsJ1wib3B0aW9uIHZhbHVlXCInKTtrW2NdPSEwO20uJHZpZXdWYWx1ZT09YyYmKGEudmFsKGMpLG4ucGFyZW50KCkmJm4ucmVtb3ZlKCkpO2QmJmRbMF0uaGFzQXR0cmlidXRlKFwic2VsZWN0ZWRcIikmJihkWzBdLnNlbGVjdGVkPSEwKX07bC5yZW1vdmVPcHRpb249ZnVuY3Rpb24oYSl7dGhpcy5oYXNPcHRpb24oYSkmJihkZWxldGUga1thXSxtLiR2aWV3VmFsdWU9PT1hJiZ0aGlzLnJlbmRlclVua25vd25PcHRpb24oYSkpfTtsLnJlbmRlclVua25vd25PcHRpb249ZnVuY3Rpb24oYyl7Yz1cblwiPyBcIitOYShjKStcIiA/XCI7bi52YWwoYyk7YS5wcmVwZW5kKG4pO2EudmFsKGMpO24ucHJvcChcInNlbGVjdGVkXCIsITApfTtsLmhhc09wdGlvbj1mdW5jdGlvbihhKXtyZXR1cm4gay5oYXNPd25Qcm9wZXJ0eShhKX07Yy4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7bC5yZW5kZXJVbmtub3duT3B0aW9uPXp9KX1dLGxpbms6ZnVuY3Rpb24oZSxnLGgsbCl7ZnVuY3Rpb24gayhhLGMsZCxlKXtkLiRyZW5kZXI9ZnVuY3Rpb24oKXt2YXIgYT1kLiR2aWV3VmFsdWU7ZS5oYXNPcHRpb24oYSk/KEMucGFyZW50KCkmJkMucmVtb3ZlKCksYy52YWwoYSksXCJcIj09PWEmJnAucHJvcChcInNlbGVjdGVkXCIsITApKTpCKGEpJiZwP2MudmFsKFwiXCIpOmUucmVuZGVyVW5rbm93bk9wdGlvbihhKX07Yy5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7YS4kYXBwbHkoZnVuY3Rpb24oKXtDLnBhcmVudCgpJiZDLnJlbW92ZSgpO2QuJHNldFZpZXdWYWx1ZShjLnZhbCgpKX0pfSl9ZnVuY3Rpb24gbShhLGMsZCl7dmFyIGU7XG5kLiRyZW5kZXI9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgZWIoZC4kdmlld1ZhbHVlKTtzKGMuZmluZChcIm9wdGlvblwiKSxmdW5jdGlvbihjKXtjLnNlbGVjdGVkPXkoYS5nZXQoYy52YWx1ZSkpfSl9O2EuJHdhdGNoKGZ1bmN0aW9uKCl7Z2EoZSxkLiR2aWV3VmFsdWUpfHwoZT1yYShkLiR2aWV3VmFsdWUpLGQuJHJlbmRlcigpKX0pO2Mub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7dmFyIGE9W107cyhjLmZpbmQoXCJvcHRpb25cIiksZnVuY3Rpb24oYyl7Yy5zZWxlY3RlZCYmYS5wdXNoKGMudmFsdWUpfSk7ZC4kc2V0Vmlld1ZhbHVlKGEpfSl9KX1mdW5jdGlvbiBuKGUsZixnKXtmdW5jdGlvbiBoKGEsYyxkKXtTW3hdPWQ7RCYmKFNbRF09Yyk7cmV0dXJuIGEoZSxTKX1mdW5jdGlvbiBrKGEpe3ZhciBjO2lmKHUpaWYoTSYmSChhKSl7Yz1uZXcgZWIoW10pO2Zvcih2YXIgZD0wO2Q8YS5sZW5ndGg7ZCsrKWMucHV0KGgoTSxudWxsLGFbZF0pLCEwKX1lbHNlIGM9XG5uZXcgZWIoYSk7ZWxzZSBNJiYoYT1oKE0sbnVsbCxhKSk7cmV0dXJuIGZ1bmN0aW9uKGQsZSl7dmFyIGY7Zj1NP006Qj9COkY7cmV0dXJuIHU/eShjLnJlbW92ZShoKGYsZCxlKSkpOmE9PT1oKGYsZCxlKX19ZnVuY3Rpb24gbCgpe3Z8fChlLiQkcG9zdERpZ2VzdChwKSx2PSEwKX1mdW5jdGlvbiBtKGEsYyxkKXthW2NdPWFbY118fDA7YVtjXSs9ZD8xOi0xfWZ1bmN0aW9uIHAoKXt2PSExO3ZhciBhPXtcIlwiOltdfSxjPVtcIlwiXSxkLGwsbixyLHQ7bj1nLiR2aWV3VmFsdWU7cj1PKGUpfHxbXTt2YXIgQj1EP09iamVjdC5rZXlzKHIpLnNvcnQoKTpyLHgsQSxILEYsTj17fTt0PWsobik7dmFyIEo9ITEsVSxWO1E9e307Zm9yKEY9MDtIPUIubGVuZ3RoLEY8SDtGKyspe3g9RjtpZihEJiYoeD1CW0ZdLFwiJFwiPT09eC5jaGFyQXQoMCkpKWNvbnRpbnVlO0E9clt4XTtkPWgoSSx4LEEpfHxcIlwiOyhsPWFbZF0pfHwobD1hW2RdPVtdLGMucHVzaChkKSk7ZD10KHgsQSk7Sj1KfHxkO0E9aChDLHgsQSk7XG5BPXkoQSk/QTpcIlwiO1Y9TT9NKGUsUyk6RD9CW0ZdOkY7TSYmKFFbVl09eCk7bC5wdXNoKHtpZDpWLGxhYmVsOkEsc2VsZWN0ZWQ6ZH0pfXV8fCh6fHxudWxsPT09bj9hW1wiXCJdLnVuc2hpZnQoe2lkOlwiXCIsbGFiZWw6XCJcIixzZWxlY3RlZDohSn0pOkp8fGFbXCJcIl0udW5zaGlmdCh7aWQ6XCI/XCIsbGFiZWw6XCJcIixzZWxlY3RlZDohMH0pKTt4PTA7Zm9yKEI9Yy5sZW5ndGg7eDxCO3grKyl7ZD1jW3hdO2w9YVtkXTtSLmxlbmd0aDw9eD8obj17ZWxlbWVudDpHLmNsb25lKCkuYXR0cihcImxhYmVsXCIsZCksbGFiZWw6bC5sYWJlbH0scj1bbl0sUi5wdXNoKHIpLGYuYXBwZW5kKG4uZWxlbWVudCkpOihyPVJbeF0sbj1yWzBdLG4ubGFiZWwhPWQmJm4uZWxlbWVudC5hdHRyKFwibGFiZWxcIixuLmxhYmVsPWQpKTtKPW51bGw7Rj0wO2ZvcihIPWwubGVuZ3RoO0Y8SDtGKyspZD1sW0ZdLCh0PXJbRisxXSk/KEo9dC5lbGVtZW50LHQubGFiZWwhPT1kLmxhYmVsJiYobShOLHQubGFiZWwsITEpLG0oTixkLmxhYmVsLFxuITApLEoudGV4dCh0LmxhYmVsPWQubGFiZWwpLEoucHJvcChcImxhYmVsXCIsdC5sYWJlbCkpLHQuaWQhPT1kLmlkJiZKLnZhbCh0LmlkPWQuaWQpLEpbMF0uc2VsZWN0ZWQhPT1kLnNlbGVjdGVkJiYoSi5wcm9wKFwic2VsZWN0ZWRcIix0LnNlbGVjdGVkPWQuc2VsZWN0ZWQpLFJhJiZKLnByb3AoXCJzZWxlY3RlZFwiLHQuc2VsZWN0ZWQpKSk6KFwiXCI9PT1kLmlkJiZ6P1U9ejooVT13LmNsb25lKCkpLnZhbChkLmlkKS5wcm9wKFwic2VsZWN0ZWRcIixkLnNlbGVjdGVkKS5hdHRyKFwic2VsZWN0ZWRcIixkLnNlbGVjdGVkKS5wcm9wKFwibGFiZWxcIixkLmxhYmVsKS50ZXh0KGQubGFiZWwpLHIucHVzaCh0PXtlbGVtZW50OlUsbGFiZWw6ZC5sYWJlbCxpZDpkLmlkLHNlbGVjdGVkOmQuc2VsZWN0ZWR9KSxtKE4sZC5sYWJlbCwhMCksSj9KLmFmdGVyKFUpOm4uZWxlbWVudC5hcHBlbmQoVSksSj1VKTtmb3IoRisrO3IubGVuZ3RoPkY7KWQ9ci5wb3AoKSxtKE4sZC5sYWJlbCwhMSksZC5lbGVtZW50LnJlbW92ZSgpfWZvcig7Ui5sZW5ndGg+XG54Oyl7bD1SLnBvcCgpO2ZvcihGPTE7RjxsLmxlbmd0aDsrK0YpbShOLGxbRl0ubGFiZWwsITEpO2xbMF0uZWxlbWVudC5yZW1vdmUoKX1zKE4sZnVuY3Rpb24oYSxjKXswPGE/cS5hZGRPcHRpb24oYyk6MD5hJiZxLnJlbW92ZU9wdGlvbihjKX0pfXZhciBuO2lmKCEobj1yLm1hdGNoKGQpKSl0aHJvdyBmZyhcImlleHBcIixyLHZhKGYpKTt2YXIgQz1jKG5bMl18fG5bMV0pLHg9bls0XXx8bls2XSxBPS8gYXMgLy50ZXN0KG5bMF0pJiZuWzFdLEI9QT9jKEEpOm51bGwsRD1uWzVdLEk9YyhuWzNdfHxcIlwiKSxGPWMoblsyXT9uWzFdOngpLE89YyhuWzddKSxNPW5bOF0/YyhuWzhdKTpudWxsLFE9e30sUj1bW3tlbGVtZW50OmYsbGFiZWw6XCJcIn1dXSxTPXt9O3omJihhKHopKGUpLHoucmVtb3ZlQ2xhc3MoXCJuZy1zY29wZVwiKSx6LnJlbW92ZSgpKTtmLmVtcHR5KCk7Zi5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7ZS4kYXBwbHkoZnVuY3Rpb24oKXt2YXIgYT1PKGUpfHxbXSxjO2lmKHUpYz1bXSxzKGYudmFsKCksXG5mdW5jdGlvbihkKXtkPU0/UVtkXTpkO2MucHVzaChcIj9cIj09PWQ/dDpcIlwiPT09ZD9udWxsOmgoQj9COkYsZCxhW2RdKSl9KTtlbHNle3ZhciBkPU0/UVtmLnZhbCgpXTpmLnZhbCgpO2M9XCI/XCI9PT1kP3Q6XCJcIj09PWQ/bnVsbDpoKEI/QjpGLGQsYVtkXSl9Zy4kc2V0Vmlld1ZhbHVlKGMpO3AoKX0pfSk7Zy4kcmVuZGVyPXA7ZS4kd2F0Y2hDb2xsZWN0aW9uKE8sbCk7ZS4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uKCl7dmFyIGE9TyhlKSxjO2lmKGEmJkgoYSkpe2M9QXJyYXkoYS5sZW5ndGgpO2Zvcih2YXIgZD0wLGY9YS5sZW5ndGg7ZDxmO2QrKyljW2RdPWgoQyxkLGFbZF0pfWVsc2UgaWYoYSlmb3IoZCBpbiBjPXt9LGEpYS5oYXNPd25Qcm9wZXJ0eShkKSYmKGNbZF09aChDLGQsYVtkXSkpO3JldHVybiBjfSxsKTt1JiZlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKXtyZXR1cm4gZy4kbW9kZWxWYWx1ZX0sbCl9aWYobFsxXSl7dmFyIHE9bFswXTtsPWxbMV07dmFyIHU9aC5tdWx0aXBsZSxcbnI9aC5uZ09wdGlvbnMsej0hMSxwLHY9ITEsdz1EKFkuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSksRz1EKFkuY3JlYXRlRWxlbWVudChcIm9wdGdyb3VwXCIpKSxDPXcuY2xvbmUoKTtoPTA7Zm9yKHZhciBBPWcuY2hpbGRyZW4oKSx4PUEubGVuZ3RoO2g8eDtoKyspaWYoXCJcIj09PUFbaF0udmFsdWUpe3A9ej1BLmVxKGgpO2JyZWFrfXEuaW5pdChsLHosQyk7dSYmKGwuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fDA9PT1hLmxlbmd0aH0pO3I/bihlLGcsbCk6dT9tKGUsZyxsKTprKGUsZyxsLHEpfX19fV0sWWQ9W1wiJGludGVycG9sYXRlXCIsZnVuY3Rpb24oYSl7dmFyIGM9e2FkZE9wdGlvbjp6LHJlbW92ZU9wdGlvbjp6fTtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscHJpb3JpdHk6MTAwLGNvbXBpbGU6ZnVuY3Rpb24oZCxlKXtpZihCKGUudmFsdWUpKXt2YXIgZj1hKGQudGV4dCgpLCEwKTtmfHxlLiRzZXQoXCJ2YWx1ZVwiLGQudGV4dCgpKX1yZXR1cm4gZnVuY3Rpb24oYSxkLGUpe3ZhciBrPVxuZC5wYXJlbnQoKSxtPWsuZGF0YShcIiRzZWxlY3RDb250cm9sbGVyXCIpfHxrLnBhcmVudCgpLmRhdGEoXCIkc2VsZWN0Q29udHJvbGxlclwiKTttJiZtLmRhdGFib3VuZHx8KG09Yyk7Zj9hLiR3YXRjaChmLGZ1bmN0aW9uKGEsYyl7ZS4kc2V0KFwidmFsdWVcIixhKTtjIT09YSYmbS5yZW1vdmVPcHRpb24oYyk7bS5hZGRPcHRpb24oYSxkKX0pOm0uYWRkT3B0aW9uKGUudmFsdWUsZCk7ZC5vbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXttLnJlbW92ZU9wdGlvbihlLnZhbHVlKX0pfX19fV0sWGQ9ZWEoe3Jlc3RyaWN0OlwiRVwiLHRlcm1pbmFsOiExfSksQWM9ZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpcIj9uZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGMsZCxlKXtlJiYoZC5yZXF1aXJlZD0hMCxlLiR2YWxpZGF0b3JzLnJlcXVpcmVkPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIWQucmVxdWlyZWR8fCFlLiRpc0VtcHR5KGMpfSxkLiRvYnNlcnZlKFwicmVxdWlyZWRcIixmdW5jdGlvbigpe2UuJHZhbGlkYXRlKCl9KSl9fX0sXG56Yz1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwiP25nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYyxkLGUpe2lmKGUpe3ZhciBmLGc9ZC5uZ1BhdHRlcm58fGQucGF0dGVybjtkLiRvYnNlcnZlKFwicGF0dGVyblwiLGZ1bmN0aW9uKGEpe0YoYSkmJjA8YS5sZW5ndGgmJihhPW5ldyBSZWdFeHAoXCJeXCIrYStcIiRcIikpO2lmKGEmJiFhLnRlc3QpdGhyb3cgUyhcIm5nUGF0dGVyblwiKShcIm5vcmVnZXhwXCIsZyxhLHZhKGMpKTtmPWF8fHQ7ZS4kdmFsaWRhdGUoKX0pO2UuJHZhbGlkYXRvcnMucGF0dGVybj1mdW5jdGlvbihhKXtyZXR1cm4gZS4kaXNFbXB0eShhKXx8QihmKXx8Zi50ZXN0KGEpfX19fX0sQ2M9ZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpcIj9uZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGMsZCxlKXtpZihlKXt2YXIgZj0tMTtkLiRvYnNlcnZlKFwibWF4bGVuZ3RoXCIsZnVuY3Rpb24oYSl7YT1iYShhKTtmPWlzTmFOKGEpPy0xOmE7ZS4kdmFsaWRhdGUoKX0pO1xuZS4kdmFsaWRhdG9ycy5tYXhsZW5ndGg9ZnVuY3Rpb24oYSxjKXtyZXR1cm4gMD5mfHxlLiRpc0VtcHR5KGMpfHxjLmxlbmd0aDw9Zn19fX19LEJjPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCI/bmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7aWYoZSl7dmFyIGY9MDtkLiRvYnNlcnZlKFwibWlubGVuZ3RoXCIsZnVuY3Rpb24oYSl7Zj1iYShhKXx8MDtlLiR2YWxpZGF0ZSgpfSk7ZS4kdmFsaWRhdG9ycy5taW5sZW5ndGg9ZnVuY3Rpb24oYSxjKXtyZXR1cm4gZS4kaXNFbXB0eShjKXx8Yy5sZW5ndGg+PWZ9fX19fTtNLmFuZ3VsYXIuYm9vdHN0cmFwP2NvbnNvbGUubG9nKFwiV0FSTklORzogVHJpZWQgdG8gbG9hZCBhbmd1bGFyIG1vcmUgdGhhbiBvbmNlLlwiKTooTmQoKSxQZChjYSksRChZKS5yZWFkeShmdW5jdGlvbigpe0pkKFksdGMpfSkpfSkod2luZG93LGRvY3VtZW50KTshd2luZG93LmFuZ3VsYXIuJCRjc3AoKSYmd2luZG93LmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuZmluZChcImhlYWRcIikucHJlcGVuZCgnPHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPkBjaGFyc2V0IFwiVVRGLThcIjtbbmdcXFxcOmNsb2FrXSxbbmctY2xvYWtdLFtkYXRhLW5nLWNsb2FrXSxbeC1uZy1jbG9ha10sLm5nLWNsb2FrLC54LW5nLWNsb2FrLC5uZy1oaWRlOm5vdCgubmctaGlkZS1hbmltYXRlKXtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9bmdcXFxcOmZvcm17ZGlzcGxheTpibG9jazt9PC9zdHlsZT4nKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXIubWluLmpzLm1hcFxuIiwiLypcbiBBbmd1bGFySlMgdjEuMy4wXG4gKGMpIDIwMTAtMjAxNCBHb29nbGUsIEluYy4gaHR0cDovL2FuZ3VsYXJqcy5vcmdcbiBMaWNlbnNlOiBNSVRcbiovXG4oZnVuY3Rpb24oTSxmLFMpeyd1c2Ugc3RyaWN0JztmLm1vZHVsZShcIm5nQW5pbWF0ZVwiLFtcIm5nXCJdKS5kaXJlY3RpdmUoXCJuZ0FuaW1hdGVDaGlsZHJlblwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKFQsQixrKXtrPWsubmdBbmltYXRlQ2hpbGRyZW47Zi5pc1N0cmluZyhrKSYmMD09PWsubGVuZ3RoP0IuZGF0YShcIiQkbmdBbmltYXRlQ2hpbGRyZW5cIiwhMCk6VC4kd2F0Y2goayxmdW5jdGlvbihmKXtCLmRhdGEoXCIkJG5nQW5pbWF0ZUNoaWxkcmVuXCIsISFmKX0pfX0pLmZhY3RvcnkoXCIkJGFuaW1hdGVSZWZsb3dcIixbXCIkJHJBRlwiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oZixCKXtyZXR1cm4gZnVuY3Rpb24oayl7cmV0dXJuIGYoZnVuY3Rpb24oKXtrKCl9KX19XSkuY29uZmlnKFtcIiRwcm92aWRlXCIsXCIkYW5pbWF0ZVByb3ZpZGVyXCIsZnVuY3Rpb24oVCxCKXtmdW5jdGlvbiBrKGYpe2Zvcih2YXIgZz0wO2c8Zi5sZW5ndGg7ZysrKXt2YXIgaz1mW2ddO2lmKDE9PWsubm9kZVR5cGUpcmV0dXJuIGt9fVxuZnVuY3Rpb24gTihmLGcpe3JldHVybiBrKGYpPT1rKGcpfXZhciBzPWYubm9vcCxnPWYuZm9yRWFjaCxiYT1CLiQkc2VsZWN0b3JzLCQ9Zi5pc0FycmF5LGNhPWYuaXNTdHJpbmcsZGE9Zi5pc09iamVjdCx0PXtydW5uaW5nOiEwfTtULmRlY29yYXRvcihcIiRhbmltYXRlXCIsW1wiJGRlbGVnYXRlXCIsXCIkJHFcIixcIiRpbmplY3RvclwiLFwiJHNuaWZmZXJcIixcIiRyb290RWxlbWVudFwiLFwiJCRhc3luY0NhbGxiYWNrXCIsXCIkcm9vdFNjb3BlXCIsXCIkZG9jdW1lbnRcIixcIiR0ZW1wbGF0ZVJlcXVlc3RcIixmdW5jdGlvbihPLE0sSSxVLHgsQyxQLFMsVil7ZnVuY3Rpb24gQShhLGMpe3ZhciBiPWEuZGF0YShcIiQkbmdBbmltYXRlU3RhdGVcIil8fHt9O2MmJihiLnJ1bm5pbmc9ITAsYi5zdHJ1Y3R1cmFsPSEwLGEuZGF0YShcIiQkbmdBbmltYXRlU3RhdGVcIixiKSk7cmV0dXJuIGIuZGlzYWJsZWR8fGIucnVubmluZyYmYi5zdHJ1Y3R1cmFsfWZ1bmN0aW9uIHooYSl7dmFyIGMsYj1NLmRlZmVyKCk7Yi5wcm9taXNlLiQkY2FuY2VsRm49XG5mdW5jdGlvbigpe2MmJmMoKX07UC4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtjPWEoZnVuY3Rpb24oKXtiLnJlc29sdmUoKX0pfSk7cmV0dXJuIGIucHJvbWlzZX1mdW5jdGlvbiBKKGEpe2lmKGRhKGEpKXJldHVybiBhLnRlbXBDbGFzc2VzJiZjYShhLnRlbXBDbGFzc2VzKSYmKGEudGVtcENsYXNzZXM9YS50ZW1wQ2xhc3Nlcy5zcGxpdCgvXFxzKy8pKSxhfWZ1bmN0aW9uIFcoYSxjLGIpe2I9Ynx8e307dmFyIGU9e307ZyhiLGZ1bmN0aW9uKGEsZCl7ZyhkLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihkKXtlW2RdPWF9KX0pO3ZhciBtPU9iamVjdC5jcmVhdGUobnVsbCk7ZygoYS5hdHRyKFwiY2xhc3NcIil8fFwiXCIpLnNwbGl0KC9cXHMrLyksZnVuY3Rpb24oYSl7bVthXT0hMH0pO3ZhciBmPVtdLGs9W107ZyhjLmNsYXNzZXMsZnVuY3Rpb24oYSxkKXt2YXIgYj1tW2RdLGM9ZVtkXXx8e307ITE9PT1hPyhifHxcImFkZENsYXNzXCI9PWMuZXZlbnQpJiZrLnB1c2goZCk6ITA9PT1hJiYoYiYmXCJyZW1vdmVDbGFzc1wiIT1cbmMuZXZlbnR8fGYucHVzaChkKSl9KTtyZXR1cm4gMDxmLmxlbmd0aCtrLmxlbmd0aCYmW2Yuam9pbihcIiBcIiksay5qb2luKFwiIFwiKV19ZnVuY3Rpb24gUShhKXtpZihhKXt2YXIgYz1bXSxiPXt9O2E9YS5zdWJzdHIoMSkuc3BsaXQoXCIuXCIpOyhVLnRyYW5zaXRpb25zfHxVLmFuaW1hdGlvbnMpJiZjLnB1c2goSS5nZXQoYmFbXCJcIl0pKTtmb3IodmFyIGU9MDtlPGEubGVuZ3RoO2UrKyl7dmFyIGY9YVtlXSxrPWJhW2ZdO2smJiFiW2ZdJiYoYy5wdXNoKEkuZ2V0KGspKSxiW2ZdPSEwKX1yZXR1cm4gY319ZnVuY3Rpb24gUihhLGMsYixlKXtmdW5jdGlvbiBtKGEsZCl7dmFyIGI9YVtkXSxjPWFbXCJiZWZvcmVcIitkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Quc3Vic3RyKDEpXTtpZihifHxjKXJldHVyblwibGVhdmVcIj09ZCYmKGM9YixiPW51bGwpLGwucHVzaCh7ZXZlbnQ6ZCxmbjpifSksSC5wdXNoKHtldmVudDpkLGZuOmN9KSwhMH1mdW5jdGlvbiBrKGMsaCxHKXt2YXIgdz1bXTtnKGMsZnVuY3Rpb24oYSl7YS5mbiYmXG53LnB1c2goYSl9KTt2YXIgZj0wO2codyxmdW5jdGlvbihjLG4pe3ZhciB1PWZ1bmN0aW9uKCl7YTp7aWYoaCl7KGhbbl18fHMpKCk7aWYoKytmPHcubGVuZ3RoKWJyZWFrIGE7aD1udWxsfUcoKX19O3N3aXRjaChjLmV2ZW50KXtjYXNlIFwic2V0Q2xhc3NcIjpoLnB1c2goYy5mbihhLEYsZCx1LGUpKTticmVhaztjYXNlIFwiYW5pbWF0ZVwiOmgucHVzaChjLmZuKGEsYixlLmZyb20sZS50byx1KSk7YnJlYWs7Y2FzZSBcImFkZENsYXNzXCI6aC5wdXNoKGMuZm4oYSxGfHxiLHUsZSkpO2JyZWFrO2Nhc2UgXCJyZW1vdmVDbGFzc1wiOmgucHVzaChjLmZuKGEsZHx8Yix1LGUpKTticmVhaztkZWZhdWx0OmgucHVzaChjLmZuKGEsdSxlKSl9fSk7aCYmMD09PWgubGVuZ3RoJiZHKCl9dmFyIHA9YVswXTtpZihwKXtlJiYoZS50bz1lLnRvfHx7fSxlLmZyb209ZS5mcm9tfHx7fSk7dmFyIEYsZDskKGIpJiYoRj1iWzBdLGQ9YlsxXSxGP2Q/Yj1GK1wiIFwiK2Q6KGI9RixjPVwiYWRkQ2xhc3NcIik6KGI9ZCxjPVwicmVtb3ZlQ2xhc3NcIikpO1xudmFyIGg9XCJzZXRDbGFzc1wiPT1jLEc9aHx8XCJhZGRDbGFzc1wiPT1jfHxcInJlbW92ZUNsYXNzXCI9PWN8fFwiYW5pbWF0ZVwiPT1jLHc9YS5hdHRyKFwiY2xhc3NcIikrXCIgXCIrYjtpZihYKHcpKXt2YXIgdT1zLG49W10sSD1bXSxxPXMscj1bXSxsPVtdLHc9KFwiIFwiK3cpLnJlcGxhY2UoL1xccysvZyxcIi5cIik7ZyhRKHcpLGZ1bmN0aW9uKGEpeyFtKGEsYykmJmgmJihtKGEsXCJhZGRDbGFzc1wiKSxtKGEsXCJyZW1vdmVDbGFzc1wiKSl9KTtyZXR1cm57bm9kZTpwLGV2ZW50OmMsY2xhc3NOYW1lOmIsaXNDbGFzc0Jhc2VkOkcsaXNTZXRDbGFzc09wZXJhdGlvbjpoLGFwcGx5U3R5bGVzOmZ1bmN0aW9uKCl7ZSYmYS5jc3MoZi5leHRlbmQoZS5mcm9tfHx7fSxlLnRvfHx7fSkpfSxiZWZvcmU6ZnVuY3Rpb24oYSl7dT1hO2soSCxuLGZ1bmN0aW9uKCl7dT1zO2EoKX0pfSxhZnRlcjpmdW5jdGlvbihhKXtxPWE7ayhsLHIsZnVuY3Rpb24oKXtxPXM7YSgpfSl9LGNhbmNlbDpmdW5jdGlvbigpe24mJihnKG4sZnVuY3Rpb24oYSl7KGF8fFxucykoITApfSksdSghMCkpO3ImJihnKHIsZnVuY3Rpb24oYSl7KGF8fHMpKCEwKX0pLHEoITApKX19fX19ZnVuY3Rpb24geShhLGMsYixlLG0sayxwLEYpe2Z1bmN0aW9uIGQoZCl7dmFyIGg9XCIkYW5pbWF0ZTpcIitkO0gmJkhbaF0mJjA8SFtoXS5sZW5ndGgmJkMoZnVuY3Rpb24oKXtiLnRyaWdnZXJIYW5kbGVyKGgse2V2ZW50OmEsY2xhc3NOYW1lOmN9KX0pfWZ1bmN0aW9uIGgoKXtkKFwiYmVmb3JlXCIpfWZ1bmN0aW9uIEcoKXtkKFwiYWZ0ZXJcIil9ZnVuY3Rpb24gdygpe3cuaGFzQmVlblJ1bnx8KHcuaGFzQmVlblJ1bj0hMCxrKCkpfWZ1bmN0aW9uIHUoKXtpZighdS5oYXNCZWVuUnVuKXtuJiZuLmFwcGx5U3R5bGVzKCk7dS5oYXNCZWVuUnVuPSEwO3AmJnAudGVtcENsYXNzZXMmJmcocC50ZW1wQ2xhc3NlcyxmdW5jdGlvbihhKXtiLnJlbW92ZUNsYXNzKGEpfSk7dmFyIGg9Yi5kYXRhKFwiJCRuZ0FuaW1hdGVTdGF0ZVwiKTtoJiYobiYmbi5pc0NsYXNzQmFzZWQ/bChiLGMpOihDKGZ1bmN0aW9uKCl7dmFyIGQ9XG5iLmRhdGEoXCIkJG5nQW5pbWF0ZVN0YXRlXCIpfHx7fTt2PT1kLmluZGV4JiZsKGIsYyxhKX0pLGIuZGF0YShcIiQkbmdBbmltYXRlU3RhdGVcIixoKSkpO2QoXCJjbG9zZVwiKTtGKCl9fXZhciBuPVIoYixhLGMscCk7aWYoIW4pcmV0dXJuIHcoKSxoKCksRygpLHUoKSxzO2E9bi5ldmVudDtjPW4uY2xhc3NOYW1lO3ZhciBIPWYuZWxlbWVudC5fZGF0YShuLm5vZGUpLEg9SCYmSC5ldmVudHM7ZXx8KGU9bT9tLnBhcmVudCgpOmIucGFyZW50KCkpO2lmKFkoYixlKSlyZXR1cm4gdygpLGgoKSxHKCksdSgpLHM7ZT1iLmRhdGEoXCIkJG5nQW5pbWF0ZVN0YXRlXCIpfHx7fTt2YXIgcT1lLmFjdGl2ZXx8e30scj1lLnRvdGFsQWN0aXZlfHwwLHQ9ZS5sYXN0O209ITE7aWYoMDxyKXtyPVtdO2lmKG4uaXNDbGFzc0Jhc2VkKVwic2V0Q2xhc3NcIj09dC5ldmVudD8oci5wdXNoKHQpLGwoYixjKSk6cVtjXSYmKGFhPXFbY10sYWEuZXZlbnQ9PWE/bT0hMDooci5wdXNoKGFhKSxsKGIsYykpKTtlbHNlIGlmKFwibGVhdmVcIj09XG5hJiZxW1wibmctbGVhdmVcIl0pbT0hMDtlbHNle2Zvcih2YXIgYWEgaW4gcSlyLnB1c2gocVthYV0pO2U9e307bChiLCEwKX0wPHIubGVuZ3RoJiZnKHIsZnVuY3Rpb24oYSl7YS5jYW5jZWwoKX0pfSFuLmlzQ2xhc3NCYXNlZHx8bi5pc1NldENsYXNzT3BlcmF0aW9ufHxcImFuaW1hdGVcIj09YXx8bXx8KG09XCJhZGRDbGFzc1wiPT1hPT1iLmhhc0NsYXNzKGMpKTtpZihtKXJldHVybiB3KCksaCgpLEcoKSxkKFwiY2xvc2VcIiksRigpLHM7cT1lLmFjdGl2ZXx8e307cj1lLnRvdGFsQWN0aXZlfHwwO2lmKFwibGVhdmVcIj09YSliLm9uZShcIiRkZXN0cm95XCIsZnVuY3Rpb24oYSl7YT1mLmVsZW1lbnQodGhpcyk7dmFyIGQ9YS5kYXRhKFwiJCRuZ0FuaW1hdGVTdGF0ZVwiKTtkJiYoZD1kLmFjdGl2ZVtcIm5nLWxlYXZlXCJdKSYmKGQuY2FuY2VsKCksbChhLFwibmctbGVhdmVcIikpfSk7Yi5hZGRDbGFzcyhcIm5nLWFuaW1hdGVcIik7cCYmcC50ZW1wQ2xhc3NlcyYmZyhwLnRlbXBDbGFzc2VzLGZ1bmN0aW9uKGEpe2IuYWRkQ2xhc3MoYSl9KTtcbnZhciB2PVorKztyKys7cVtjXT1uO2IuZGF0YShcIiQkbmdBbmltYXRlU3RhdGVcIix7bGFzdDpuLGFjdGl2ZTpxLGluZGV4OnYsdG90YWxBY3RpdmU6cn0pO2goKTtuLmJlZm9yZShmdW5jdGlvbihkKXt2YXIgaD1iLmRhdGEoXCIkJG5nQW5pbWF0ZVN0YXRlXCIpO2Q9ZHx8IWh8fCFoLmFjdGl2ZVtjXXx8bi5pc0NsYXNzQmFzZWQmJmguYWN0aXZlW2NdLmV2ZW50IT1hO3coKTshMD09PWQ/dSgpOihHKCksbi5hZnRlcih1KSl9KTtyZXR1cm4gbi5jYW5jZWx9ZnVuY3Rpb24gSyhhKXtpZihhPWsoYSkpYT1mLmlzRnVuY3Rpb24oYS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKT9hLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJuZy1hbmltYXRlXCIpOmEucXVlcnlTZWxlY3RvckFsbChcIi5uZy1hbmltYXRlXCIpLGcoYSxmdW5jdGlvbihhKXthPWYuZWxlbWVudChhKTsoYT1hLmRhdGEoXCIkJG5nQW5pbWF0ZVN0YXRlXCIpKSYmYS5hY3RpdmUmJmcoYS5hY3RpdmUsZnVuY3Rpb24oYSl7YS5jYW5jZWwoKX0pfSl9XG5mdW5jdGlvbiBsKGEsYyl7aWYoTihhLHgpKXQuZGlzYWJsZWR8fCh0LnJ1bm5pbmc9ITEsdC5zdHJ1Y3R1cmFsPSExKTtlbHNlIGlmKGMpe3ZhciBiPWEuZGF0YShcIiQkbmdBbmltYXRlU3RhdGVcIil8fHt9LGU9ITA9PT1jOyFlJiZiLmFjdGl2ZSYmYi5hY3RpdmVbY10mJihiLnRvdGFsQWN0aXZlLS0sZGVsZXRlIGIuYWN0aXZlW2NdKTtpZihlfHwhYi50b3RhbEFjdGl2ZSlhLnJlbW92ZUNsYXNzKFwibmctYW5pbWF0ZVwiKSxhLnJlbW92ZURhdGEoXCIkJG5nQW5pbWF0ZVN0YXRlXCIpfX1mdW5jdGlvbiBZKGEsYyl7aWYodC5kaXNhYmxlZClyZXR1cm4hMDtpZihOKGEseCkpcmV0dXJuIHQucnVubmluZzt2YXIgYixlLGs7ZG97aWYoMD09PWMubGVuZ3RoKWJyZWFrO3ZhciBnPU4oYyx4KSxwPWc/dDpjLmRhdGEoXCIkJG5nQW5pbWF0ZVN0YXRlXCIpfHx7fTtpZihwLmRpc2FibGVkKXJldHVybiEwO2cmJihrPSEwKTshMSE9PWImJihnPWMuZGF0YShcIiQkbmdBbmltYXRlQ2hpbGRyZW5cIiksZi5pc0RlZmluZWQoZykmJlxuKGI9ZykpO2U9ZXx8cC5ydW5uaW5nfHxwLmxhc3QmJiFwLmxhc3QuaXNDbGFzc0Jhc2VkfXdoaWxlKGM9Yy5wYXJlbnQoKSk7cmV0dXJuIWt8fCFiJiZlfXguZGF0YShcIiQkbmdBbmltYXRlU3RhdGVcIix0KTt2YXIgTD1QLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBWLnRvdGFsUGVuZGluZ1JlcXVlc3RzfSxmdW5jdGlvbihhLGMpezA9PT1hJiYoTCgpLFAuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7UC4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXt0LnJ1bm5pbmc9ITF9KX0pKX0pLFo9MCxFPUIuY2xhc3NOYW1lRmlsdGVyKCksWD1FP2Z1bmN0aW9uKGEpe3JldHVybiBFLnRlc3QoYSl9OmZ1bmN0aW9uKCl7cmV0dXJuITB9O3JldHVybnthbmltYXRlOmZ1bmN0aW9uKGEsYyxiLGUsZyl7ZT1lfHxcIm5nLWlubGluZS1hbmltYXRlXCI7Zz1KKGcpfHx7fTtnLmZyb209Yj9jOm51bGw7Zy50bz1iP2I6YztyZXR1cm4geihmdW5jdGlvbihiKXtyZXR1cm4geShcImFuaW1hdGVcIixlLGYuZWxlbWVudChrKGEpKSxcbm51bGwsbnVsbCxzLGcsYil9KX0sZW50ZXI6ZnVuY3Rpb24oYSxjLGIsZSl7ZT1KKGUpO2E9Zi5lbGVtZW50KGEpO2M9YyYmZi5lbGVtZW50KGMpO2I9YiYmZi5lbGVtZW50KGIpO0EoYSwhMCk7Ty5lbnRlcihhLGMsYik7cmV0dXJuIHooZnVuY3Rpb24oZyl7cmV0dXJuIHkoXCJlbnRlclwiLFwibmctZW50ZXJcIixmLmVsZW1lbnQoayhhKSksYyxiLHMsZSxnKX0pfSxsZWF2ZTpmdW5jdGlvbihhLGMpe2M9SihjKTthPWYuZWxlbWVudChhKTtLKGEpO0EoYSwhMCk7cmV0dXJuIHooZnVuY3Rpb24oYil7cmV0dXJuIHkoXCJsZWF2ZVwiLFwibmctbGVhdmVcIixmLmVsZW1lbnQoayhhKSksbnVsbCxudWxsLGZ1bmN0aW9uKCl7Ty5sZWF2ZShhKX0sYyxiKX0pfSxtb3ZlOmZ1bmN0aW9uKGEsYyxiLGUpe2U9SihlKTthPWYuZWxlbWVudChhKTtjPWMmJmYuZWxlbWVudChjKTtiPWImJmYuZWxlbWVudChiKTtLKGEpO0EoYSwhMCk7Ty5tb3ZlKGEsYyxiKTtyZXR1cm4geihmdW5jdGlvbihnKXtyZXR1cm4geShcIm1vdmVcIixcblwibmctbW92ZVwiLGYuZWxlbWVudChrKGEpKSxjLGIscyxlLGcpfSl9LGFkZENsYXNzOmZ1bmN0aW9uKGEsYyxiKXtyZXR1cm4gdGhpcy5zZXRDbGFzcyhhLGMsW10sYil9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEsYyxiKXtyZXR1cm4gdGhpcy5zZXRDbGFzcyhhLFtdLGMsYil9LHNldENsYXNzOmZ1bmN0aW9uKGEsYyxiLGUpe2U9SihlKTthPWYuZWxlbWVudChhKTthPWYuZWxlbWVudChrKGEpKTtpZihBKGEpKXJldHVybiBPLiQkc2V0Q2xhc3NJbW1lZGlhdGVseShhLGMsYixlKTt2YXIgbSxsPWEuZGF0YShcIiQkYW5pbWF0ZUNsYXNzZXNcIikscD0hIWw7bHx8KGw9e2NsYXNzZXM6e319KTttPWwuY2xhc3NlcztjPSQoYyk/YzpjLnNwbGl0KFwiIFwiKTtnKGMsZnVuY3Rpb24oYSl7YSYmYS5sZW5ndGgmJihtW2FdPSEwKX0pO2I9JChiKT9iOmIuc3BsaXQoXCIgXCIpO2coYixmdW5jdGlvbihhKXthJiZhLmxlbmd0aCYmKG1bYV09ITEpfSk7aWYocClyZXR1cm4gZSYmbC5vcHRpb25zJiYobC5vcHRpb25zPVxuZi5leHRlbmQobC5vcHRpb25zfHx7fSxlKSksbC5wcm9taXNlO2EuZGF0YShcIiQkYW5pbWF0ZUNsYXNzZXNcIixsPXtjbGFzc2VzOm0sb3B0aW9uczplfSk7cmV0dXJuIGwucHJvbWlzZT16KGZ1bmN0aW9uKGIpe3ZhciBkPWEucGFyZW50KCksaD1rKGEpLGM9aC5wYXJlbnROb2RlO2lmKCFjfHxjLiQkTkdfUkVNT1ZFRHx8aC4kJE5HX1JFTU9WRUQpYigpO2Vsc2V7aD1hLmRhdGEoXCIkJGFuaW1hdGVDbGFzc2VzXCIpO2EucmVtb3ZlRGF0YShcIiQkYW5pbWF0ZUNsYXNzZXNcIik7dmFyIGM9YS5kYXRhKFwiJCRuZ0FuaW1hdGVTdGF0ZVwiKXx8e30sZT1XKGEsaCxjLmFjdGl2ZSk7cmV0dXJuIGU/eShcInNldENsYXNzXCIsZSxhLGQsbnVsbCxmdW5jdGlvbigpe2VbMF0mJk8uJCRhZGRDbGFzc0ltbWVkaWF0ZWx5KGEsZVswXSk7ZVsxXSYmTy4kJHJlbW92ZUNsYXNzSW1tZWRpYXRlbHkoYSxlWzFdKX0saC5vcHRpb25zLGIpOmIoKX19KX0sY2FuY2VsOmZ1bmN0aW9uKGEpe2EuJCRjYW5jZWxGbigpfSxcbmVuYWJsZWQ6ZnVuY3Rpb24oYSxjKXtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAyOmlmKGEpbChjKTtlbHNle3ZhciBiPWMuZGF0YShcIiQkbmdBbmltYXRlU3RhdGVcIil8fHt9O2IuZGlzYWJsZWQ9ITA7Yy5kYXRhKFwiJCRuZ0FuaW1hdGVTdGF0ZVwiLGIpfWJyZWFrO2Nhc2UgMTp0LmRpc2FibGVkPSFhO2JyZWFrO2RlZmF1bHQ6YT0hdC5kaXNhYmxlZH1yZXR1cm4hIWF9fX1dKTtCLnJlZ2lzdGVyKFwiXCIsW1wiJHdpbmRvd1wiLFwiJHNuaWZmZXJcIixcIiR0aW1lb3V0XCIsXCIkJGFuaW1hdGVSZWZsb3dcIixmdW5jdGlvbih0LEIsSSxVKXtmdW5jdGlvbiB4KCl7ZXx8KGU9VShmdW5jdGlvbigpe2I9W107ZT1udWxsO2E9e319KSl9ZnVuY3Rpb24gQyhjLGQpe2UmJmUoKTtiLnB1c2goZCk7ZT1VKGZ1bmN0aW9uKCl7ZyhiLGZ1bmN0aW9uKGEpe2EoKX0pO2I9W107ZT1udWxsO2E9e319KX1mdW5jdGlvbiBQKGEsZCl7dmFyIGg9ayhhKTthPWYuZWxlbWVudChoKTtwLnB1c2goYSk7aD1EYXRlLm5vdygpK1xuZDtoPD1OfHwoSS5jYW5jZWwobSksTj1oLG09SShmdW5jdGlvbigpe1QocCk7cD1bXX0sZCwhMSkpfWZ1bmN0aW9uIFQoYSl7ZyhhLGZ1bmN0aW9uKGEpeyhhPWEuZGF0YShcIiQkbmdBbmltYXRlQ1NTM0RhdGFcIikpJiZnKGEuY2xvc2VBbmltYXRpb25GbnMsZnVuY3Rpb24oYSl7YSgpfSl9KX1mdW5jdGlvbiBWKGIsZCl7dmFyIGg9ZD9hW2RdOm51bGw7aWYoIWgpe3ZhciBjPTAsZT0wLGY9MCxrPTA7ZyhiLGZ1bmN0aW9uKGEpe2lmKDE9PWEubm9kZVR5cGUpe2E9dC5nZXRDb21wdXRlZFN0eWxlKGEpfHx7fTtjPU1hdGgubWF4KEEoYVtMK1wiRHVyYXRpb25cIl0pLGMpO2U9TWF0aC5tYXgoQShhW0wrXCJEZWxheVwiXSksZSk7az1NYXRoLm1heChBKGFbRStcIkRlbGF5XCJdKSxrKTt2YXIgZD1BKGFbRStcIkR1cmF0aW9uXCJdKTswPGQmJihkKj1wYXJzZUludChhW0UrXCJJdGVyYXRpb25Db3VudFwiXSwxMCl8fDEpO2Y9TWF0aC5tYXgoZCxmKX19KTtoPXt0b3RhbDowLHRyYW5zaXRpb25EZWxheTplLFxudHJhbnNpdGlvbkR1cmF0aW9uOmMsYW5pbWF0aW9uRGVsYXk6ayxhbmltYXRpb25EdXJhdGlvbjpmfTtkJiYoYVtkXT1oKX1yZXR1cm4gaH1mdW5jdGlvbiBBKGEpe3ZhciBkPTA7YT1jYShhKT9hLnNwbGl0KC9cXHMqLFxccyovKTpbXTtnKGEsZnVuY3Rpb24oYSl7ZD1NYXRoLm1heChwYXJzZUZsb2F0KGEpfHwwLGQpfSk7cmV0dXJuIGR9ZnVuY3Rpb24geihiLGQsaCxlKXtiPTA8PVtcIm5nLWVudGVyXCIsXCJuZy1sZWF2ZVwiLFwibmctbW92ZVwiXS5pbmRleE9mKGgpO3ZhciBmLGc9ZC5wYXJlbnQoKSxuPWcuZGF0YShcIiQkbmdBbmltYXRlS2V5XCIpO258fChnLmRhdGEoXCIkJG5nQW5pbWF0ZUtleVwiLCsrYyksbj1jKTtmPW4rXCItXCIrayhkKS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTt2YXIgZz1mK1wiIFwiK2gsbj1hW2ddPysrYVtnXS50b3RhbDowLGw9e307aWYoMDxuKXt2YXIgcT1oK1wiLXN0YWdnZXJcIixsPWYrXCIgXCIrcTsoZj0hYVtsXSkmJmQuYWRkQ2xhc3MocSk7bD1WKGQsbCk7ZiYmZC5yZW1vdmVDbGFzcyhxKX1kLmFkZENsYXNzKGgpO1xudmFyIHE9ZC5kYXRhKFwiJCRuZ0FuaW1hdGVDU1MzRGF0YVwiKXx8e30scj1WKGQsZyk7Zj1yLnRyYW5zaXRpb25EdXJhdGlvbjtyPXIuYW5pbWF0aW9uRHVyYXRpb247aWYoYiYmMD09PWYmJjA9PT1yKXJldHVybiBkLnJlbW92ZUNsYXNzKGgpLCExO2g9ZXx8YiYmMDxmO2I9MDxyJiYwPGwuYW5pbWF0aW9uRGVsYXkmJjA9PT1sLmFuaW1hdGlvbkR1cmF0aW9uO2QuZGF0YShcIiQkbmdBbmltYXRlQ1NTM0RhdGFcIix7c3RhZ2dlcjpsLGNhY2hlS2V5OmcscnVubmluZzpxLnJ1bm5pbmd8fDAsaXRlbUluZGV4Om4sYmxvY2tUcmFuc2l0aW9uOmgsY2xvc2VBbmltYXRpb25GbnM6cS5jbG9zZUFuaW1hdGlvbkZuc3x8W119KTtnPWsoZCk7aCYmKFcoZywhMCksZSYmZC5jc3MoZSkpO2ImJihnLnN0eWxlW0UrXCJQbGF5U3RhdGVcIl09XCJwYXVzZWRcIik7cmV0dXJuITB9ZnVuY3Rpb24gSihhLGQsYixjLGUpe2Z1bmN0aW9uIGYoKXtkLm9mZihDLGwpO2QucmVtb3ZlQ2xhc3MocSk7ZC5yZW1vdmVDbGFzcyhyKTtcbnomJkkuY2FuY2VsKHopO0soZCxiKTt2YXIgYT1rKGQpLGM7Zm9yKGMgaW4gcClhLnN0eWxlLnJlbW92ZVByb3BlcnR5KHBbY10pfWZ1bmN0aW9uIGwoYSl7YS5zdG9wUHJvcGFnYXRpb24oKTt2YXIgZD1hLm9yaWdpbmFsRXZlbnR8fGE7YT1kLiRtYW51YWxUaW1lU3RhbXB8fGQudGltZVN0YW1wfHxEYXRlLm5vdygpO2Q9cGFyc2VGbG9hdChkLmVsYXBzZWRUaW1lLnRvRml4ZWQoMykpO01hdGgubWF4KGEtQiwwKT49QSYmZD49eCYmYygpfXZhciBtPWsoZCk7YT1kLmRhdGEoXCIkJG5nQW5pbWF0ZUNTUzNEYXRhXCIpO2lmKC0xIT1tLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpLmluZGV4T2YoYikmJmEpe3ZhciBxPVwiXCIscj1cIlwiO2coYi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSxkKXt2YXIgYj0oMDxkP1wiIFwiOlwiXCIpK2E7cSs9YitcIi1hY3RpdmVcIjtyKz1iK1wiLXBlbmRpbmdcIn0pO3ZhciBwPVtdLHQ9YS5pdGVtSW5kZXgsdj1hLnN0YWdnZXIscz0wO2lmKDA8dCl7cz0wOzA8di50cmFuc2l0aW9uRGVsYXkmJlxuMD09PXYudHJhbnNpdGlvbkR1cmF0aW9uJiYocz12LnRyYW5zaXRpb25EZWxheSp0KTt2YXIgeT0wOzA8di5hbmltYXRpb25EZWxheSYmMD09PXYuYW5pbWF0aW9uRHVyYXRpb24mJih5PXYuYW5pbWF0aW9uRGVsYXkqdCxwLnB1c2goWStcImFuaW1hdGlvbi1wbGF5LXN0YXRlXCIpKTtzPU1hdGgucm91bmQoMTAwKk1hdGgubWF4KHMseSkpLzEwMH1zfHwoZC5hZGRDbGFzcyhxKSxhLmJsb2NrVHJhbnNpdGlvbiYmVyhtLCExKSk7dmFyIEQ9VihkLGEuY2FjaGVLZXkrXCIgXCIrcSkseD1NYXRoLm1heChELnRyYW5zaXRpb25EdXJhdGlvbixELmFuaW1hdGlvbkR1cmF0aW9uKTtpZigwPT09eClkLnJlbW92ZUNsYXNzKHEpLEsoZCxiKSxjKCk7ZWxzZXshcyYmZSYmKEQudHJhbnNpdGlvbkR1cmF0aW9ufHwoZC5jc3MoXCJ0cmFuc2l0aW9uXCIsRC5hbmltYXRpb25EdXJhdGlvbitcInMgbGluZWFyIGFsbFwiKSxwLnB1c2goXCJ0cmFuc2l0aW9uXCIpKSxkLmNzcyhlKSk7dmFyIHQ9TWF0aC5tYXgoRC50cmFuc2l0aW9uRGVsYXksXG5ELmFuaW1hdGlvbkRlbGF5KSxBPTFFMyp0OzA8cC5sZW5ndGgmJih2PW0uZ2V0QXR0cmlidXRlKFwic3R5bGVcIil8fFwiXCIsXCI7XCIhPT12LmNoYXJBdCh2Lmxlbmd0aC0xKSYmKHYrPVwiO1wiKSxtLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsditcIiBcIikpO3ZhciBCPURhdGUubm93KCksQz1YK1wiIFwiK1osdD0xRTMqKHMrMS41Kih0K3gpKSx6OzA8cyYmKGQuYWRkQ2xhc3Mociksej1JKGZ1bmN0aW9uKCl7ej1udWxsOzA8RC50cmFuc2l0aW9uRHVyYXRpb24mJlcobSwhMSk7MDxELmFuaW1hdGlvbkR1cmF0aW9uJiYobS5zdHlsZVtFK1wiUGxheVN0YXRlXCJdPVwiXCIpO2QuYWRkQ2xhc3MocSk7ZC5yZW1vdmVDbGFzcyhyKTtlJiYoMD09PUQudHJhbnNpdGlvbkR1cmF0aW9uJiZkLmNzcyhcInRyYW5zaXRpb25cIixELmFuaW1hdGlvbkR1cmF0aW9uK1wicyBsaW5lYXIgYWxsXCIpLGQuY3NzKGUpLHAucHVzaChcInRyYW5zaXRpb25cIikpfSwxRTMqcywhMSkpO2Qub24oQyxsKTthLmNsb3NlQW5pbWF0aW9uRm5zLnB1c2goZnVuY3Rpb24oKXtmKCk7XG5jKCl9KTthLnJ1bm5pbmcrKztQKGQsdCk7cmV0dXJuIGZ9fWVsc2UgYygpfWZ1bmN0aW9uIFcoYSxkKXthLnN0eWxlW0wrXCJQcm9wZXJ0eVwiXT1kP1wibm9uZVwiOlwiXCJ9ZnVuY3Rpb24gUShhLGQsYixjKXtpZih6KGEsZCxiLGMpKXJldHVybiBmdW5jdGlvbihhKXthJiZLKGQsYil9fWZ1bmN0aW9uIFIoYSxkLGIsYyxlKXtpZihkLmRhdGEoXCIkJG5nQW5pbWF0ZUNTUzNEYXRhXCIpKXJldHVybiBKKGEsZCxiLGMsZSk7SyhkLGIpO2MoKX1mdW5jdGlvbiB5KGEsZCxiLGMsZSl7dmFyIGY9UShhLGQsYixlLmZyb20pO2lmKGYpe3ZhciBnPWY7QyhkLGZ1bmN0aW9uKCl7Zz1SKGEsZCxiLGMsZS50byl9KTtyZXR1cm4gZnVuY3Rpb24oYSl7KGd8fHMpKGEpfX14KCk7YygpfWZ1bmN0aW9uIEsoYSxkKXthLnJlbW92ZUNsYXNzKGQpO3ZhciBiPWEuZGF0YShcIiQkbmdBbmltYXRlQ1NTM0RhdGFcIik7YiYmKGIucnVubmluZyYmYi5ydW5uaW5nLS0sYi5ydW5uaW5nJiYwIT09Yi5ydW5uaW5nfHxhLnJlbW92ZURhdGEoXCIkJG5nQW5pbWF0ZUNTUzNEYXRhXCIpKX1cbmZ1bmN0aW9uIGwoYSxkKXt2YXIgYj1cIlwiO2E9JChhKT9hOmEuc3BsaXQoL1xccysvKTtnKGEsZnVuY3Rpb24oYSxjKXthJiYwPGEubGVuZ3RoJiYoYis9KDA8Yz9cIiBcIjpcIlwiKSthK2QpfSk7cmV0dXJuIGJ9dmFyIFk9XCJcIixMLFosRSxYO00ub250cmFuc2l0aW9uZW5kPT09UyYmTS5vbndlYmtpdHRyYW5zaXRpb25lbmQhPT1TPyhZPVwiLXdlYmtpdC1cIixMPVwiV2Via2l0VHJhbnNpdGlvblwiLFo9XCJ3ZWJraXRUcmFuc2l0aW9uRW5kIHRyYW5zaXRpb25lbmRcIik6KEw9XCJ0cmFuc2l0aW9uXCIsWj1cInRyYW5zaXRpb25lbmRcIik7TS5vbmFuaW1hdGlvbmVuZD09PVMmJk0ub253ZWJraXRhbmltYXRpb25lbmQhPT1TPyhZPVwiLXdlYmtpdC1cIixFPVwiV2Via2l0QW5pbWF0aW9uXCIsWD1cIndlYmtpdEFuaW1hdGlvbkVuZCBhbmltYXRpb25lbmRcIik6KEU9XCJhbmltYXRpb25cIixYPVwiYW5pbWF0aW9uZW5kXCIpO3ZhciBhPXt9LGM9MCxiPVtdLGUsbT1udWxsLE49MCxwPVtdO3JldHVybnthbmltYXRlOmZ1bmN0aW9uKGEsXG5kLGIsYyxlLGYpe2Y9Znx8e307Zi5mcm9tPWI7Zi50bz1jO3JldHVybiB5KFwiYW5pbWF0ZVwiLGEsZCxlLGYpfSxlbnRlcjpmdW5jdGlvbihhLGIsYyl7Yz1jfHx7fTtyZXR1cm4geShcImVudGVyXCIsYSxcIm5nLWVudGVyXCIsYixjKX0sbGVhdmU6ZnVuY3Rpb24oYSxiLGMpe2M9Y3x8e307cmV0dXJuIHkoXCJsZWF2ZVwiLGEsXCJuZy1sZWF2ZVwiLGIsYyl9LG1vdmU6ZnVuY3Rpb24oYSxiLGMpe2M9Y3x8e307cmV0dXJuIHkoXCJtb3ZlXCIsYSxcIm5nLW1vdmVcIixiLGMpfSxiZWZvcmVTZXRDbGFzczpmdW5jdGlvbihhLGIsYyxlLGYpe2Y9Znx8e307Yj1sKGMsXCItcmVtb3ZlXCIpK1wiIFwiK2woYixcIi1hZGRcIik7aWYoZj1RKFwic2V0Q2xhc3NcIixhLGIsZi5mcm9tKSlyZXR1cm4gQyhhLGUpLGY7eCgpO2UoKX0sYmVmb3JlQWRkQ2xhc3M6ZnVuY3Rpb24oYSxiLGMsZSl7ZT1lfHx7fTtpZihiPVEoXCJhZGRDbGFzc1wiLGEsbChiLFwiLWFkZFwiKSxlLmZyb20pKXJldHVybiBDKGEsYyksYjt4KCk7YygpfSxiZWZvcmVSZW1vdmVDbGFzczpmdW5jdGlvbihhLFxuYixjLGUpe2U9ZXx8e307aWYoYj1RKFwicmVtb3ZlQ2xhc3NcIixhLGwoYixcIi1yZW1vdmVcIiksZS5mcm9tKSlyZXR1cm4gQyhhLGMpLGI7eCgpO2MoKX0sc2V0Q2xhc3M6ZnVuY3Rpb24oYSxiLGMsZSxmKXtmPWZ8fHt9O2M9bChjLFwiLXJlbW92ZVwiKTtiPWwoYixcIi1hZGRcIik7cmV0dXJuIFIoXCJzZXRDbGFzc1wiLGEsYytcIiBcIitiLGUsZi50byl9LGFkZENsYXNzOmZ1bmN0aW9uKGEsYixjLGUpe2U9ZXx8e307cmV0dXJuIFIoXCJhZGRDbGFzc1wiLGEsbChiLFwiLWFkZFwiKSxjLGUudG8pfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhLGIsYyxlKXtlPWV8fHt9O3JldHVybiBSKFwicmVtb3ZlQ2xhc3NcIixhLGwoYixcIi1yZW1vdmVcIiksYyxlLnRvKX19fV0pfV0pfSkod2luZG93LHdpbmRvdy5hbmd1bGFyKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXItYW5pbWF0ZS5taW4uanMubWFwXG4iLCIvKiEgMy4xLjIgKi9cbiFmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiKXt3aW5kb3cuWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlW2FdPWIod2luZG93LlhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZVthXSl9ZnVuY3Rpb24gYihhLGIsYyl7dHJ5e09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIse2dldDpjfSl9Y2F0Y2goZCl7fX12YXIgYz1mdW5jdGlvbigpe3RyeXt2YXIgYT1uZXcgQWN0aXZlWE9iamVjdChcIlNob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoXCIpO2lmKGEpcmV0dXJuITB9Y2F0Y2goYil7aWYodm9pZCAwIT1uYXZpZ2F0b3IubWltZVR5cGVzW1wiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2hcIl0pcmV0dXJuITB9cmV0dXJuITF9O2lmKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCYmIXdpbmRvdy5Gb3JtRGF0YXx8d2luZG93LkZpbGVBUEkmJkZpbGVBUEkuZm9yY2VMb2FkKXt2YXIgZD1mdW5jdGlvbihhKXtpZighYS5fX2xpc3RlbmVycyl7YS51cGxvYWR8fChhLnVwbG9hZD17fSksYS5fX2xpc3RlbmVycz1bXTt2YXIgYj1hLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyO2EudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYyxkKXthLl9fbGlzdGVuZXJzW2NdPWQsYiYmYi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX07YShcIm9wZW5cIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixjLGUpe2QodGhpcyksdGhpcy5fX3VybD1jO3RyeXthLmFwcGx5KHRoaXMsW2IsYyxlXSl9Y2F0Y2goZil7Zi5tZXNzYWdlLmluZGV4T2YoXCJBY2Nlc3MgaXMgZGVuaWVkXCIpPi0xJiYodGhpcy5fX29yaWdFcnJvcj1mLGEuYXBwbHkodGhpcyxbYixcIl9maXhfZm9yX2llX2Nyb3NzZG9tYWluX19cIixlXSkpfX19KSxhKFwiZ2V0UmVzcG9uc2VIZWFkZXJcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuX19maWxlQXBpWEhSJiZ0aGlzLl9fZmlsZUFwaVhIUi5nZXRSZXNwb25zZUhlYWRlcj90aGlzLl9fZmlsZUFwaVhIUi5nZXRSZXNwb25zZUhlYWRlcihiKTpudWxsPT1hP251bGw6YS5hcHBseSh0aGlzLFtiXSl9fSksYShcImdldEFsbFJlc3BvbnNlSGVhZGVyc1wiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzLl9fZmlsZUFwaVhIUiYmdGhpcy5fX2ZpbGVBcGlYSFIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzP3RoaXMuX19maWxlQXBpWEhSLmdldEFsbFJlc3BvbnNlSGVhZGVycygpOm51bGw9PWE/bnVsbDphLmFwcGx5KHRoaXMpfX0pLGEoXCJhYm9ydFwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzLl9fZmlsZUFwaVhIUiYmdGhpcy5fX2ZpbGVBcGlYSFIuYWJvcnQ/dGhpcy5fX2ZpbGVBcGlYSFIuYWJvcnQoKTpudWxsPT1hP251bGw6YS5hcHBseSh0aGlzKX19KSxhKFwic2V0UmVxdWVzdEhlYWRlclwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe2lmKFwiX19zZXRYSFJfXCI9PT1iKXtkKHRoaXMpO3ZhciBlPWModGhpcyk7ZSBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZlKHRoaXMpfWVsc2UgdGhpcy5fX3JlcXVlc3RIZWFkZXJzPXRoaXMuX19yZXF1ZXN0SGVhZGVyc3x8e30sdGhpcy5fX3JlcXVlc3RIZWFkZXJzW2JdPWMsYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSksYShcInNlbmRcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD10aGlzO2lmKGFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdLl9faXNGaWxlQVBJU2hpbSl7dmFyIGU9YXJndW1lbnRzWzBdLGY9e3VybDpkLl9fdXJsLGpzb25wOiExLGNhY2hlOiEwLGNvbXBsZXRlOmZ1bmN0aW9uKGEsYyl7ZC5fX2NvbXBsZXRlZD0hMCwhYSYmZC5fX2xpc3RlbmVycy5sb2FkJiZkLl9fbGlzdGVuZXJzLmxvYWQoe3R5cGU6XCJsb2FkXCIsbG9hZGVkOmQuX19sb2FkZWQsdG90YWw6ZC5fX3RvdGFsLHRhcmdldDpkLGxlbmd0aENvbXB1dGFibGU6ITB9KSwhYSYmZC5fX2xpc3RlbmVycy5sb2FkZW5kJiZkLl9fbGlzdGVuZXJzLmxvYWRlbmQoe3R5cGU6XCJsb2FkZW5kXCIsbG9hZGVkOmQuX19sb2FkZWQsdG90YWw6ZC5fX3RvdGFsLHRhcmdldDpkLGxlbmd0aENvbXB1dGFibGU6ITB9KSxcImFib3J0XCI9PT1hJiZkLl9fbGlzdGVuZXJzLmFib3J0JiZkLl9fbGlzdGVuZXJzLmFib3J0KHt0eXBlOlwiYWJvcnRcIixsb2FkZWQ6ZC5fX2xvYWRlZCx0b3RhbDpkLl9fdG90YWwsdGFyZ2V0OmQsbGVuZ3RoQ29tcHV0YWJsZTohMH0pLHZvaWQgMCE9PWMuc3RhdHVzJiZiKGQsXCJzdGF0dXNcIixmdW5jdGlvbigpe3JldHVybiAwPT1jLnN0YXR1cyYmYSYmXCJhYm9ydFwiIT09YT81MDA6Yy5zdGF0dXN9KSx2b2lkIDAhPT1jLnN0YXR1c1RleHQmJmIoZCxcInN0YXR1c1RleHRcIixmdW5jdGlvbigpe3JldHVybiBjLnN0YXR1c1RleHR9KSxiKGQsXCJyZWFkeVN0YXRlXCIsZnVuY3Rpb24oKXtyZXR1cm4gNH0pLHZvaWQgMCE9PWMucmVzcG9uc2UmJmIoZCxcInJlc3BvbnNlXCIsZnVuY3Rpb24oKXtyZXR1cm4gYy5yZXNwb25zZX0pO3ZhciBlPWMucmVzcG9uc2VUZXh0fHwoYSYmMD09Yy5zdGF0dXMmJlwiYWJvcnRcIiE9PWE/YTp2b2lkIDApO2IoZCxcInJlc3BvbnNlVGV4dFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGV9KSxiKGQsXCJyZXNwb25zZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIGV9KSxhJiZiKGQsXCJlcnJcIixmdW5jdGlvbigpe3JldHVybiBhfSksZC5fX2ZpbGVBcGlYSFI9YyxkLm9ucmVhZHlzdGF0ZWNoYW5nZSYmZC5vbnJlYWR5c3RhdGVjaGFuZ2UoKSxkLm9ubG9hZCYmZC5vbmxvYWQoKX0sZmlsZXByb2dyZXNzOmZ1bmN0aW9uKGEpe2lmKGEudGFyZ2V0PWQsZC5fX2xpc3RlbmVycy5wcm9ncmVzcyYmZC5fX2xpc3RlbmVycy5wcm9ncmVzcyhhKSxkLl9fdG90YWw9YS50b3RhbCxkLl9fbG9hZGVkPWEubG9hZGVkLGEudG90YWw9PT1hLmxvYWRlZCl7dmFyIGI9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZC5fX2NvbXBsZXRlZHx8KGQuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzPWZ1bmN0aW9uKCl7fSxiLmNvbXBsZXRlKG51bGwse3N0YXR1czoyMDQsc3RhdHVzVGV4dDpcIk5vIENvbnRlbnRcIn0pKX0sRmlsZUFQSS5ub0NvbnRlbnRUaW1lb3V0fHwxZTQpfX0saGVhZGVyczpkLl9fcmVxdWVzdEhlYWRlcnN9O2YuZGF0YT17fSxmLmZpbGVzPXt9O2Zvcih2YXIgZz0wO2c8ZS5kYXRhLmxlbmd0aDtnKyspe3ZhciBoPWUuZGF0YVtnXTtudWxsIT1oLnZhbCYmbnVsbCE9aC52YWwubmFtZSYmbnVsbCE9aC52YWwuc2l6ZSYmbnVsbCE9aC52YWwudHlwZT9mLmZpbGVzW2gua2V5XT1oLnZhbDpmLmRhdGFbaC5rZXldPWgudmFsfXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZighYygpKXRocm93J0Fkb2RlIEZsYXNoIFBsYXllciBuZWVkIHRvIGJlIGluc3RhbGxlZC4gVG8gY2hlY2sgYWhlYWQgdXNlIFwiRmlsZUFQSS5oYXNGbGFzaFwiJztkLl9fZmlsZUFwaVhIUj1GaWxlQVBJLnVwbG9hZChmKX0sMSl9ZWxzZXtpZih0aGlzLl9fb3JpZ0Vycm9yKXRocm93IHRoaXMuX19vcmlnRXJyb3I7YS5hcHBseShkLGFyZ3VtZW50cyl9fX0pLHdpbmRvdy5YTUxIdHRwUmVxdWVzdC5fX2lzRmlsZUFQSVNoaW09ITA7dmFyIGU9ZnVuY3Rpb24oYSl7aWYoIWMoKSl0aHJvdydBZG9kZSBGbGFzaCBQbGF5ZXIgbmVlZCB0byBiZSBpbnN0YWxsZWQuIFRvIGNoZWNrIGFoZWFkIHVzZSBcIkZpbGVBUEkuaGFzRmxhc2hcIic7dmFyIGI9YW5ndWxhci5lbGVtZW50KGEpO2lmKCFiLmF0dHIoXCJkaXNhYmxlZFwiKSl7Zm9yKHZhciBkPSExLGU9MDtlPGJbMF0uYXR0cmlidXRlcy5sZW5ndGg7ZSsrKXt2YXIgZj1iWzBdLmF0dHJpYnV0ZXNbZV07aWYoLTEhPT1mLm5hbWUuaW5kZXhPZihcImZpbGUtc2VsZWN0XCIpKXtkPSEwO2JyZWFrfX1pZighYi5oYXNDbGFzcyhcImpzLWZpbGVhcGktd3JhcHBlclwiKSYmKGR8fG51bGwhPWIuYXR0cihcIl9fYWZ1X2dlbl9fXCIpKSYmKGIuYWRkQ2xhc3MoXCJqcy1maWxlYXBpLXdyYXBwZXJcIiksbnVsbCE9Yi5hdHRyKFwiX19hZnVfZ2VuX19cIikpKXtmb3IodmFyIGc9YlswXS5fX3JlZkVsZW1fXyYmYW5ndWxhci5lbGVtZW50KGJbMF0uX19yZWZFbGVtX18pfHxiO2cmJiFnLmF0dHIoXCJfX3JlZkVsZW1fX1wiKTspZz1hbmd1bGFyLmVsZW1lbnQoZ1swXS5uZXh0U2libGluZyk7Zy5iaW5kKFwibW91c2VvdmVyXCIsZnVuY3Rpb24oKXsoXCJcIj09PWIucGFyZW50KCkuY3NzKFwicG9zaXRpb25cIil8fFwic3RhdGljXCI9PT1iLnBhcmVudCgpLmNzcyhcInBvc2l0aW9uXCIpKSYmYi5wYXJlbnQoKS5jc3MoXCJwb3NpdGlvblwiLFwicmVsYXRpdmVcIiksYi5jc3MoXCJwb3NpdGlvblwiLFwiYWJzb2x1dGVcIikuY3NzKFwidG9wXCIsZ1swXS5vZmZzZXRUb3ArXCJweFwiKS5jc3MoXCJsZWZ0XCIsZ1swXS5vZmZzZXRMZWZ0K1wicHhcIikuY3NzKFwid2lkdGhcIixnWzBdLm9mZnNldFdpZHRoK1wicHhcIikuY3NzKFwiaGVpZ2h0XCIsZ1swXS5vZmZzZXRIZWlnaHQrXCJweFwiKS5jc3MoXCJwYWRkaW5nXCIsZy5jc3MoXCJwYWRkaW5nXCIpKS5jc3MoXCJtYXJnaW5cIixnLmNzcyhcIm1hcmdpblwiKSkuY3NzKFwiZmlsdGVyXCIsXCJhbHBoYShvcGFjaXR5PTApXCIpLGcuYXR0cihcIm9uY2xpY2tcIixcIlwiKSxiLmNzcyhcInotaW5kZXhcIixcIjEwMDBcIil9KX19fSxmPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9RmlsZUFQSS5nZXRGaWxlcyhiKSxkPTA7ZDxjLmxlbmd0aDtkKyspdm9pZCAwPT09Y1tkXS5zaXplJiYoY1tkXS5zaXplPTApLHZvaWQgMD09PWNbZF0ubmFtZSYmKGNbZF0ubmFtZT1cImZpbGVcIiksdm9pZCAwPT09Y1tkXS50eXBlJiYoY1tkXS50eXBlPVwidW5kZWZpbmVkXCIpO2IudGFyZ2V0fHwoYi50YXJnZXQ9e30pLGIudGFyZ2V0LmZpbGVzPWMsYi50YXJnZXQuZmlsZXMhPWMmJihiLl9fZmlsZXNfPWMpLChiLl9fZmlsZXNffHxiLnRhcmdldC5maWxlcykuaXRlbT1mdW5jdGlvbihhKXtyZXR1cm4oYi5fX2ZpbGVzX3x8Yi50YXJnZXQuZmlsZXMpW2FdfHxudWxsfSxhJiZhLmFwcGx5KHRoaXMsW2JdKX19LGc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4oXCJjaGFuZ2VcIj09PWIudG9Mb3dlckNhc2UoKXx8XCJvbmNoYW5nZVwiPT09Yi50b0xvd2VyQ2FzZSgpKSYmXCJmaWxlXCI9PWEuZ2V0QXR0cmlidXRlKFwidHlwZVwiKX07SFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciYmKEhUTUxJbnB1dEVsZW1lbnQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkLGgpe2codGhpcyxiKT8oZSh0aGlzKSxhLmFwcGx5KHRoaXMsW2IsZihjKSxkLGhdKSk6YS5hcHBseSh0aGlzLFtiLGMsZCxoXSl9fShIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyKSksSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUuYXR0YWNoRXZlbnQmJihIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5hdHRhY2hFdmVudD1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtnKHRoaXMsYik/KGUodGhpcyksd2luZG93LmpRdWVyeT9hbmd1bGFyLmVsZW1lbnQodGhpcykuYmluZChcImNoYW5nZVwiLGYobnVsbCkpOmEuYXBwbHkodGhpcyxbYixmKGMpXSkpOmEuYXBwbHkodGhpcyxbYixjXSl9fShIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5hdHRhY2hFdmVudCkpLHdpbmRvdy5Gb3JtRGF0YT1Gb3JtRGF0YT1mdW5jdGlvbigpe3JldHVybnthcHBlbmQ6ZnVuY3Rpb24oYSxiLGMpe2IuX19pc0ZpbGVBUElCbG9iU2hpbSYmKGI9Yi5kYXRhWzBdKSx0aGlzLmRhdGEucHVzaCh7a2V5OmEsdmFsOmIsbmFtZTpjfSl9LGRhdGE6W10sX19pc0ZpbGVBUElTaGltOiEwfX0sd2luZG93LkJsb2I9QmxvYj1mdW5jdGlvbihhKXtyZXR1cm57ZGF0YTphLF9faXNGaWxlQVBJQmxvYlNoaW06ITB9fSxmdW5jdGlvbigpe2lmKHdpbmRvdy5GaWxlQVBJfHwod2luZG93LkZpbGVBUEk9e30pLEZpbGVBUEkuZm9yY2VMb2FkJiYoRmlsZUFQSS5odG1sNT0hMSksIUZpbGVBUEkudXBsb2FkKXt2YXIgYSxiLGQsZSxmLGc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxoPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO2lmKHdpbmRvdy5GaWxlQVBJLmpzVXJsKWE9d2luZG93LkZpbGVBUEkuanNVcmw7ZWxzZSBpZih3aW5kb3cuRmlsZUFQSS5qc1BhdGgpYj13aW5kb3cuRmlsZUFQSS5qc1BhdGg7ZWxzZSBmb3IoZD0wO2Q8aC5sZW5ndGg7ZCsrKWlmKGY9aFtkXS5zcmMsZT1mLnNlYXJjaCgvXFwvYW5ndWxhclxcLWZpbGVcXC11cGxvYWRbXFwtYS16QS16MC05XFwuXSpcXC5qcy8pLGU+LTEpe2I9Zi5zdWJzdHJpbmcoMCxlKzEpO2JyZWFrfW51bGw9PUZpbGVBUEkuc3RhdGljUGF0aCYmKEZpbGVBUEkuc3RhdGljUGF0aD1iKSxnLnNldEF0dHJpYnV0ZShcInNyY1wiLGF8fGIrXCJGaWxlQVBJLm1pbi5qc1wiKSxkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQoZyksRmlsZUFQSS5oYXNGbGFzaD1jKCl9fSgpLEZpbGVBUEkuZGlzYWJsZUZpbGVJbnB1dD1mdW5jdGlvbihhLGIpe2I/YS5yZW1vdmVDbGFzcyhcImpzLWZpbGVhcGktd3JhcHBlclwiKTphLmFkZENsYXNzKFwianMtZmlsZWFwaS13cmFwcGVyXCIpfX13aW5kb3cuRmlsZVJlYWRlcnx8KHdpbmRvdy5GaWxlUmVhZGVyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPSExO3RoaXMubGlzdGVuZXJzPXt9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihiLGMpe2EubGlzdGVuZXJzW2JdPWEubGlzdGVuZXJzW2JdfHxbXSxhLmxpc3RlbmVyc1tiXS5wdXNoKGMpfSx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYixjKXthLmxpc3RlbmVyc1tiXSYmYS5saXN0ZW5lcnNbYl0uc3BsaWNlKGEubGlzdGVuZXJzW2JdLmluZGV4T2YoYyksMSl9LHRoaXMuZGlzcGF0Y2hFdmVudD1mdW5jdGlvbihiKXt2YXIgYz1hLmxpc3RlbmVyc1tiLnR5cGVdO2lmKGMpZm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspY1tkXS5jYWxsKGEsYil9LHRoaXMub25hYm9ydD10aGlzLm9uZXJyb3I9dGhpcy5vbmxvYWQ9dGhpcy5vbmxvYWRzdGFydD10aGlzLm9ubG9hZGVuZD10aGlzLm9ucHJvZ3Jlc3M9bnVsbDt2YXIgYz1mdW5jdGlvbihiLGMpe3ZhciBkPXt0eXBlOmIsdGFyZ2V0OmEsbG9hZGVkOmMubG9hZGVkLHRvdGFsOmMudG90YWwsZXJyb3I6Yy5lcnJvcn07cmV0dXJuIG51bGwhPWMucmVzdWx0JiYoZC50YXJnZXQucmVzdWx0PWMucmVzdWx0KSxkfSxkPWZ1bmN0aW9uKGQpe2lmKGJ8fChiPSEwLGEub25sb2Fkc3RhcnQmJmEub25sb2Fkc3RhcnQoYyhcImxvYWRzdGFydFwiLGQpKSksXCJsb2FkXCI9PT1kLnR5cGUpe2Eub25sb2FkZW5kJiZhLm9ubG9hZGVuZChjKFwibG9hZGVuZFwiLGQpKTt2YXIgZT1jKFwibG9hZFwiLGQpO2Eub25sb2FkJiZhLm9ubG9hZChlKSxhLmRpc3BhdGNoRXZlbnQoZSl9ZWxzZSBpZihcInByb2dyZXNzXCI9PT1kLnR5cGUpe3ZhciBlPWMoXCJwcm9ncmVzc1wiLGQpO2Eub25wcm9ncmVzcyYmYS5vbnByb2dyZXNzKGUpLGEuZGlzcGF0Y2hFdmVudChlKX1lbHNle3ZhciBlPWMoXCJlcnJvclwiLGQpO2Eub25lcnJvciYmYS5vbmVycm9yKGUpLGEuZGlzcGF0Y2hFdmVudChlKX19O3RoaXMucmVhZEFzQXJyYXlCdWZmZXI9ZnVuY3Rpb24oYSl7RmlsZUFQSS5yZWFkQXNCaW5hcnlTdHJpbmcoYSxkKX0sdGhpcy5yZWFkQXNCaW5hcnlTdHJpbmc9ZnVuY3Rpb24oYSl7RmlsZUFQSS5yZWFkQXNCaW5hcnlTdHJpbmcoYSxkKX0sdGhpcy5yZWFkQXNEYXRhVVJMPWZ1bmN0aW9uKGEpe0ZpbGVBUEkucmVhZEFzRGF0YVVSTChhLGQpfSx0aGlzLnJlYWRBc1RleHQ9ZnVuY3Rpb24oYSl7RmlsZUFQSS5yZWFkQXNUZXh0KGEsZCl9fSl9KCk7IiwiLyohIDMuMS4yICovXG4hZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYil7d2luZG93LlhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZVthXT1iKHdpbmRvdy5YTUxIdHRwUmVxdWVzdC5wcm90b3R5cGVbYV0pfWZ1bmN0aW9uIGIoYSxiLGMsZCxmLGcsaCl7ZnVuY3Rpb24gaSgpe3JldHVyblwiaW5wdXRcIj09PWJbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpJiZiLmF0dHIoXCJ0eXBlXCIpJiZcImZpbGVcIj09PWIuYXR0cihcInR5cGVcIikudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBqKGMpe2coZnVuY3Rpb24oKXtiLnBhcmVudCgpLmxlbmd0aCYmcC5wdXNoKGEuJHdhdGNoKGMsZnVuY3Rpb24oYSxiKXthIT1iJiZrKCl9KSl9KX1mdW5jdGlvbiBrKCl7dmFyIGM9Yi5jbG9uZSgpO2lmKGIuYXR0cihcIl9fYWZ1X2dlbl9fXCIpJiZhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYi5hdHRyKFwiaWRcIikuc3Vic3RyaW5nKDEpKSkucmVtb3ZlKCksYi5wYXJlbnQoKS5sZW5ndGgpe2Zvcih2YXIgZD0wO2Q8cC5sZW5ndGg7ZCsrKXBbZF0oKTtiLnJlcGxhY2VXaXRoKGMpLGgoYykoYSl9cmV0dXJuIGN9ZnVuY3Rpb24gbChkLGUpe2lmKGQpe2ooZCk7dmFyIGc9ZihkKShhKTtnPyhiLmF0dHIoZSxnKSxjW2VdPWcpOihiLmF0dHIoZSxudWxsKSxkZWxldGUgY1tlXSl9fWZ1bmN0aW9uIG0oYil7dmFyIGU7ZT1iLl9fZmlsZXNffHxiLnRhcmdldCYmYi50YXJnZXQuZmlsZXMsbyhlLGMsZCxhLGIpfWZ1bmN0aW9uIG4oYSl7aWYobnVsbCE9cVswXS52YWx1ZSYmXCJcIiE9cVswXS52YWx1ZSYmKHFbMF0udmFsdWU9bnVsbCwtMT09PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIlRyaWRlbnQvN1wiKSYmbSh7dGFyZ2V0OntmaWxlczpbXX19KSksYi5hdHRyKFwiX19hZnVfY2xvbmVfX1wiKSliLmF0dHIoXCJfX2FmdV9jbG9uZV9fXCIsbnVsbCk7ZWxzZSBpZigtMSE9PW5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoXCJNU0lFIDEwXCIpfHwtMSE9PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIlRyaWRlbnQvN1wiKSl7dmFyIGM9aygpO3JldHVybiBjLmF0dHIoXCJfX2FmdV9jbG9uZV9fXCIsITApLGNbMF0uY2xpY2soKSxhLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSwhMH19ZnVuY3Rpb24gbyhhLGIsYyxkLGgpe2Zvcih2YXIgaT1bXSxqPVtdLGs9ZihiLm5nQWNjZXB0KShkKSxsPWFuZ3VsYXIuaXNTdHJpbmcoaykmJms/bmV3IFJlZ0V4cChlKGspLFwiZ2lcIik6bnVsbCxtPWw/bnVsbDpiLm5nQWNjZXB0LG49MDtuPGEubGVuZ3RoO24rKyl7dmFyIG89YS5pdGVtKG4pOyEoIWx8fG8udHlwZS5tYXRjaChsKXx8bnVsbCE9by5uYW1lJiZvLm5hbWUubWF0Y2gobCkpfHxtJiYhZihtKShkLHskZmlsZTpvLCRldmVudDpofSk/ai5wdXNoKG8pOmkucHVzaChvKX1nKGZ1bmN0aW9uKCl7YyYmKGYoYi5uZ01vZGVsKS5hc3NpZ24oZCxpKSxjJiZjLiRzZXRWaWV3VmFsdWUobnVsbCE9aSYmMD09aS5sZW5ndGg/XCJcIjppKSxiLm5nTW9kZWxSZWplY3RlZCYmZihiLm5nTW9kZWxSZWplY3RlZCkuYXNzaWduKGQsaikpLGIubmdGaWxlQ2hhbmdlJiZcIlwiIT1iLm5nRmlsZUNoYW5nZSYmZihiLm5nRmlsZUNoYW5nZSkoZCx7JGZpbGVzOmksJHJlamVjdGVkRmlsZXM6aiwkZXZlbnQ6aH0pfSl9dmFyIHA9W107bChjLm5nTXVsdGlwbGUsXCJtdWx0aXBsZVwiKSxsKGMubmdBY2NlcHQsXCJuZy1hY2NlcHRcIiksbChjLm5nQ2FwdHVyZSxcImNhcHR1cmVcIiksXCJcIiE9Yy5uZ0ZpbGVTZWxlY3QmJihjLm5nRmlsZUNoYW5nZT1jLm5nRmlsZVNlbGVjdCk7dmFyIHE9YjtpZihpKCkpYi5iaW5kKFwiY2xpY2tcIixuKTtlbHNle3E9YW5ndWxhci5lbGVtZW50KCc8aW5wdXQgdHlwZT1cImZpbGVcIj4nKSxiLmF0dHIoXCJtdWx0aXBsZVwiKSYmcS5hdHRyKFwibXVsdGlwbGVcIixiLmF0dHIoXCJtdWx0aXBsZVwiKSksYi5hdHRyKFwiYWNjZXB0XCIpJiZxLmF0dHIoXCJhY2NlcHRcIixiLmF0dHIoXCJhY2NlcHRcIikpLGIuYXR0cihcImNhcHR1cmVcIikmJnEuYXR0cihcImNhcHR1cmVcIixiLmF0dHIoXCJjYXB0dXJlXCIpKTtmb3IodmFyIHIgaW4gYylpZigwPT1yLmluZGV4T2YoXCJpbnB1dEZpbGVcIikpe3ZhciBzPXIuc3Vic3RyaW5nKFwiaW5wdXRGaWxlXCIubGVuZ3RoKTtzPXNbMF0udG9Mb3dlckNhc2UoKStzLnN1YnN0cmluZygxKSxxLmF0dHIocyxjW3JdKX1xLmNzcyhcIndpZHRoXCIsXCIwcHhcIikuY3NzKFwiaGVpZ2h0XCIsXCIwcHhcIikuY3NzKFwicG9zaXRpb25cIixcImFic29sdXRlXCIpLmNzcyhcInBhZGRpbmdcIiwwKS5jc3MoXCJtYXJnaW5cIiwwKS5jc3MoXCJvdmVyZmxvd1wiLFwiaGlkZGVuXCIpLmF0dHIoXCJ0YWJpbmRleFwiLFwiLTFcIikuY3NzKFwib3BhY2l0eVwiLDApLmF0dHIoXCJfX2FmdV9nZW5fX1wiLCEwKSxiLmF0dHIoXCJfX3JlZkVsZW1fX1wiLCEwKSxxWzBdLl9fcmVmRWxlbV9fPWJbMF0sYi5wYXJlbnQoKVswXS5pbnNlcnRCZWZvcmUocVswXSxiWzBdKSxiLmNzcyhcIm92ZXJmbG93XCIsXCJoaWRkZW5cIiksYi5iaW5kKFwiY2xpY2tcIixmdW5jdGlvbihhKXtuKGEpfHxxWzBdLmNsaWNrKCl9KX1xLmJpbmQoXCJjaGFuZ2VcIixtKSxiLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8cC5sZW5ndGg7YSsrKXBbYV0oKTtiWzBdIT1xWzBdJiZxLnJlbW92ZSgpfSkscC5wdXNoKGEuJHdhdGNoKGMubmdNb2RlbCxmdW5jdGlvbihhLGIpe2E9PWJ8fG51bGwhPWEmJmEubGVuZ3RofHwoLTEhPT1uYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKFwiTVNJRSAxMFwiKT9rKCk6cVswXS52YWx1ZT1udWxsKX0pKX1mdW5jdGlvbiBjKGEsYixjLGYsZyxoLGkpe2Z1bmN0aW9uIGooYSxiLGMpe3ZhciBkPSEwO2lmKHJ8fHMpe3ZhciBlPWMuZGF0YVRyYW5zZmVyLml0ZW1zO2lmKG51bGwhPWUpZm9yKHZhciBmPTA7ZjxlLmxlbmd0aCYmZDtmKyspZD1kJiYoXCJmaWxlXCI9PWVbZl0ua2luZHx8XCJcIj09ZVtmXS5raW5kKSYmKHMmJmcocykoYSx7JGZpbGU6ZVtmXSwkZXZlbnQ6Y30pfHxyJiZudWxsIT1lW2ZdLnR5cGUmJmVbZl0udHlwZS5tYXRjaChyKXx8bnVsbCE9ZVtmXS5uYW1lJiZlW2ZdLm5hbWUubWF0Y2gocikpfXZhciBoPWcoYi5kcmFnT3ZlckNsYXNzKShhLHskZXZlbnQ6Y30pO3JldHVybiBoJiYoaC5kZWxheSYmKHA9aC5kZWxheSksaC5hY2NlcHQmJihoPWQ/aC5hY2NlcHQ6aC5yZWplY3QpKSxofHxiLmRyYWdPdmVyQ2xhc3N8fFwiZHJhZ292ZXJcIn1mdW5jdGlvbiBrKGIsYyxkLGUpe2Z1bmN0aW9uIGYoYyl7ISghcnx8Yy50eXBlLm1hdGNoKHIpfHxudWxsIT1jLm5hbWUmJmMubmFtZS5tYXRjaChyKSl8fHMmJiFnKHMpKGEseyRmaWxlOmMsJGV2ZW50OmJ9KT9sLnB1c2goYyk6ay5wdXNoKGMpfWZ1bmN0aW9uIGooYSxiLGMpe2lmKG51bGwhPWIpaWYoYi5pc0RpcmVjdG9yeSl7dmFyIGQ9KGN8fFwiXCIpK2IubmFtZTtmKHtuYW1lOmIubmFtZSx0eXBlOlwiZGlyZWN0b3J5XCIscGF0aDpkfSk7dmFyIGU9Yi5jcmVhdGVSZWFkZXIoKSxnPVtdO24rKzt2YXIgaD1mdW5jdGlvbigpe2UucmVhZEVudHJpZXMoZnVuY3Rpb24oZCl7dHJ5e2lmKGQubGVuZ3RoKWc9Zy5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZHx8W10sMCkpLGgoKTtlbHNle2Zvcih2YXIgZT0wO2U8Zy5sZW5ndGg7ZSsrKWooYSxnW2VdLChjP2M6XCJcIikrYi5uYW1lK1wiL1wiKTtuLS19fWNhdGNoKGYpe24tLSxjb25zb2xlLmVycm9yKGYpfX0sZnVuY3Rpb24oKXtuLS19KX07aCgpfWVsc2UgbisrLGIuZmlsZShmdW5jdGlvbihhKXt0cnl7bi0tLGEucGF0aD0oYz9jOlwiXCIpK2EubmFtZSxmKGEpfWNhdGNoKGIpe24tLSxjb25zb2xlLmVycm9yKGIpfX0sZnVuY3Rpb24oKXtuLS19KX12YXIgaz1bXSxsPVtdLG09Yi5kYXRhVHJhbnNmZXIuaXRlbXMsbj0wO2lmKG0mJm0ubGVuZ3RoPjAmJlwiZmlsZVwiIT1pLnByb3RvY29sKCkpZm9yKHZhciBvPTA7bzxtLmxlbmd0aDtvKyspe2lmKG1bb10ud2Via2l0R2V0QXNFbnRyeSYmbVtvXS53ZWJraXRHZXRBc0VudHJ5KCkmJm1bb10ud2Via2l0R2V0QXNFbnRyeSgpLmlzRGlyZWN0b3J5KXt2YXIgcD1tW29dLndlYmtpdEdldEFzRW50cnkoKTtpZihwLmlzRGlyZWN0b3J5JiYhZCljb250aW51ZTtudWxsIT1wJiZqKGsscCl9ZWxzZXt2YXIgcT1tW29dLmdldEFzRmlsZSgpO251bGwhPXEmJmYocSl9aWYoIWUmJmsubGVuZ3RoPjApYnJlYWt9ZWxzZXt2YXIgdD1iLmRhdGFUcmFuc2Zlci5maWxlcztpZihudWxsIT10KWZvcih2YXIgbz0wO288dC5sZW5ndGgmJihmKHQuaXRlbShvKSksZXx8IShrLmxlbmd0aD4wKSk7bysrKTt9dmFyIHU9MDshZnVuY3Rpb24gdihhKXtoKGZ1bmN0aW9uKCl7aWYobikxMCp1Kys8MmU0JiZ2KDEwKTtlbHNle2lmKCFlJiZrLmxlbmd0aD4xKXtmb3IodmFyIGE9MDtcImRpcmVjdG9yeVwiPT1rW2FdLnR5cGU7KWErKztrPVtrW2FdXX1jKGssbCl9fSxhfHwwKX0oKX12YXIgbD1kKCk7aWYoYy5kcm9wQXZhaWxhYmxlJiZoKGZ1bmN0aW9uKCl7YS5kcm9wQXZhaWxhYmxlP2EuZHJvcEF2YWlsYWJsZS52YWx1ZT1sOmEuZHJvcEF2YWlsYWJsZT1sfSksIWwpcmV0dXJuIDAhPWcoYy5oaWRlT25Ecm9wTm90QXZhaWxhYmxlKShhKSYmYi5jc3MoXCJkaXNwbGF5XCIsXCJub25lXCIpLHZvaWQgMDt2YXIgbSxuPW51bGwsbz1nKGMuc3RvcFByb3BhZ2F0aW9uKShhKSxwPTEscT1nKGMubmdBY2NlcHQpKGEpfHxjLmFjY2VwdCxyPWFuZ3VsYXIuaXNTdHJpbmcocSkmJnE/bmV3IFJlZ0V4cChlKHEpLFwiZ2lcIik6bnVsbCxzPXI/bnVsbDpjLm5nQWNjZXB0O2JbMF0uYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsZnVuY3Rpb24oZCl7aWYoZC5wcmV2ZW50RGVmYXVsdCgpLG8mJmQuc3RvcFByb3BhZ2F0aW9uKCksbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiQ2hyb21lXCIpPi0xKXt2YXIgZT1kLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkO2QuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3Q9XCJtb3ZlXCI9PT1lfHxcImxpbmtNb3ZlXCI9PT1lP1wibW92ZVwiOlwiY29weVwifWguY2FuY2VsKG4pLGEuYWN0dWFsRHJhZ092ZXJDbGFzc3x8KG09aihhLGMsZCkpLGIuYWRkQ2xhc3MobSl9LCExKSxiWzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW50ZXJcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksbyYmYS5zdG9wUHJvcGFnYXRpb24oKX0sITEpLGJbMF0uYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdsZWF2ZVwiLGZ1bmN0aW9uKCl7bj1oKGZ1bmN0aW9uKCl7Yi5yZW1vdmVDbGFzcyhtKSxtPW51bGx9LHB8fDEpfSwhMSksXCJcIiE9Yy5uZ0ZpbGVEcm9wJiYoYy5uZ0ZpbGVDaGFuZ2U9YS5uZ0ZpbGVEcm9wKSxiWzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsZnVuY3Rpb24oZCl7ZC5wcmV2ZW50RGVmYXVsdCgpLG8mJmQuc3RvcFByb3BhZ2F0aW9uKCksYi5yZW1vdmVDbGFzcyhtKSxtPW51bGwsayhkLGZ1bmN0aW9uKGIsZSl7aChmdW5jdGlvbigpe2YmJihnKGMubmdNb2RlbCkuYXNzaWduKGEsYiksZiYmZi4kc2V0Vmlld1ZhbHVlKG51bGwhPWImJjA9PWIubGVuZ3RoP1wiXCI6YikpLGMubmdNb2RlbFJlamVjdGVkJiZhW2MubmdNb2RlbFJlamVjdGVkXSYmZyhjLm5nTW9kZWxSZWplY3RlZCkuYXNzaWduKGEsZSl9KSxoKGZ1bmN0aW9uKCl7ZyhjLm5nRmlsZUNoYW5nZSkoYSx7JGZpbGVzOmIsJHJlamVjdGVkRmlsZXM6ZSwkZXZlbnQ6ZH0pfSl9LDAhPWcoYy5hbGxvd0RpcikoYSksYy5tdWx0aXBsZXx8ZyhjLm5nTXVsdGlwbGUpKGEpKX0sITEpfWZ1bmN0aW9uIGQoKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVyblwiZHJhZ2dhYmxlXCJpbiBhJiZcIm9uZHJvcFwiaW4gYX1mdW5jdGlvbiBlKGEpe2lmKGEubGVuZ3RoPjImJlwiL1wiPT09YVswXSYmXCIvXCI9PT1hW2EubGVuZ3RoLTFdKXJldHVybiBhLnN1YnN0cmluZygxLGEubGVuZ3RoLTEpO3ZhciBiPWEuc3BsaXQoXCIsXCIpLGM9XCJcIjtpZihiLmxlbmd0aD4xKWZvcih2YXIgZD0wO2Q8Yi5sZW5ndGg7ZCsrKWMrPVwiKFwiK2UoYltkXSkrXCIpXCIsZDxiLmxlbmd0aC0xJiYoYys9XCJ8XCIpO2Vsc2UgMD09YS5pbmRleE9mKFwiLlwiKSYmKGE9XCIqXCIrYSksYz1cIl5cIithLnJlcGxhY2UobmV3IFJlZ0V4cChcIlsuXFxcXFxcXFwrKj9cXFxcW1xcXFxeXFxcXF0kKCl7fT0hPD58OlxcXFwtXVwiLFwiZ1wiKSxcIlxcXFwkJlwiKStcIiRcIixjPWMucmVwbGFjZSgvXFxcXFxcKi9nLFwiLipcIikucmVwbGFjZSgvXFxcXFxcPy9nLFwiLlwiKTtyZXR1cm4gY313aW5kb3cuWE1MSHR0cFJlcXVlc3QmJiF3aW5kb3cuWE1MSHR0cFJlcXVlc3QuX19pc0ZpbGVBUElTaGltJiZhKFwic2V0UmVxdWVzdEhlYWRlclwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe2lmKFwiX19zZXRYSFJfXCI9PT1iKXt2YXIgZD1jKHRoaXMpO2QgaW5zdGFuY2VvZiBGdW5jdGlvbiYmZCh0aGlzKX1lbHNlIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pO3ZhciBmPWFuZ3VsYXIubW9kdWxlKFwiYW5ndWxhckZpbGVVcGxvYWRcIixbXSk7Zi52ZXJzaW9uPVwiMy4xLjJcIixmLnNlcnZpY2UoXCIkdXBsb2FkXCIsW1wiJGh0dHBcIixcIiRxXCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGQpe2QubWV0aG9kPWQubWV0aG9kfHxcIlBPU1RcIixkLmhlYWRlcnM9ZC5oZWFkZXJzfHx7fSxkLnRyYW5zZm9ybVJlcXVlc3Q9ZC50cmFuc2Zvcm1SZXF1ZXN0fHxmdW5jdGlvbihiLGMpe3JldHVybiB3aW5kb3cuQXJyYXlCdWZmZXImJmIgaW5zdGFuY2VvZiB3aW5kb3cuQXJyYXlCdWZmZXI/YjphLmRlZmF1bHRzLnRyYW5zZm9ybVJlcXVlc3RbMF0oYixjKX07dmFyIGU9Yi5kZWZlcigpLGY9ZS5wcm9taXNlO3JldHVybiBkLmhlYWRlcnMuX19zZXRYSFJfPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEpe2EmJihkLl9fWEhSPWEsZC54aHJGbiYmZC54aHJGbihhKSxhLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIixmdW5jdGlvbihhKXthLmNvbmZpZz1kLGUubm90aWZ5P2Uubm90aWZ5KGEpOmYucHJvZ3Jlc3NfZm4mJmMoZnVuY3Rpb24oKXtmLnByb2dyZXNzX2ZuKGEpfSl9LCExKSxhLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGZ1bmN0aW9uKGEpe2EubGVuZ3RoQ29tcHV0YWJsZSYmKGEuY29uZmlnPWQsZS5ub3RpZnk/ZS5ub3RpZnkoYSk6Zi5wcm9ncmVzc19mbiYmYyhmdW5jdGlvbigpe2YucHJvZ3Jlc3NfZm4oYSl9KSl9LCExKSl9fSxhKGQpLnRoZW4oZnVuY3Rpb24oYSl7ZS5yZXNvbHZlKGEpfSxmdW5jdGlvbihhKXtlLnJlamVjdChhKX0sZnVuY3Rpb24oYSl7ZS5ub3RpZnkoYSl9KSxmLnN1Y2Nlc3M9ZnVuY3Rpb24oYSl7cmV0dXJuIGYudGhlbihmdW5jdGlvbihiKXthKGIuZGF0YSxiLnN0YXR1cyxiLmhlYWRlcnMsZCl9KSxmfSxmLmVycm9yPWZ1bmN0aW9uKGEpe3JldHVybiBmLnRoZW4obnVsbCxmdW5jdGlvbihiKXthKGIuZGF0YSxiLnN0YXR1cyxiLmhlYWRlcnMsZCl9KSxmfSxmLnByb2dyZXNzPWZ1bmN0aW9uKGEpe3JldHVybiBmLnByb2dyZXNzX2ZuPWEsZi50aGVuKG51bGwsbnVsbCxmdW5jdGlvbihiKXthKGIpfSksZn0sZi5hYm9ydD1mdW5jdGlvbigpe3JldHVybiBkLl9fWEhSJiZjKGZ1bmN0aW9uKCl7ZC5fX1hIUi5hYm9ydCgpfSksZn0sZi54aHI9ZnVuY3Rpb24oYSl7cmV0dXJuIGQueGhyRm49ZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKCl7YiYmYi5hcHBseShmLGFyZ3VtZW50cyksYS5hcHBseShmLGFyZ3VtZW50cyl9fShkLnhockZuKSxmfSxmfXRoaXMudXBsb2FkPWZ1bmN0aW9uKGEpe2EuaGVhZGVycz1hLmhlYWRlcnN8fHt9LGEuaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXT12b2lkIDA7YS50cmFuc2Zvcm1SZXF1ZXN0O3JldHVybiBhLnRyYW5zZm9ybVJlcXVlc3Q9YS50cmFuc2Zvcm1SZXF1ZXN0P1wiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhLnRyYW5zZm9ybVJlcXVlc3QpP2EudHJhbnNmb3JtUmVxdWVzdDpbYS50cmFuc2Zvcm1SZXF1ZXN0XTpbXSxhLnRyYW5zZm9ybVJlcXVlc3QucHVzaChmdW5jdGlvbihiKXt2YXIgYz1uZXcgRm9ybURhdGEsZD17fTtmb3IodmFyIGUgaW4gYS5maWVsZHMpZFtlXT1hLmZpZWxkc1tlXTtpZihiJiYoZC5kYXRhPWIpLGEuZm9ybURhdGFBcHBlbmRlcilmb3IodmFyIGUgaW4gZClhLmZvcm1EYXRhQXBwZW5kZXIoYyxlLGRbZV0pO2Vsc2UgZm9yKHZhciBlIGluIGQpe3ZhciBmPWRbZV07dm9pZCAwIT09ZiYmKFwiW29iamVjdCBTdHJpbmddXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZik/Yy5hcHBlbmQoZSxmKTphLnNlbmRPYmplY3RzQXNKc29uQmxvYiYmXCJvYmplY3RcIj09dHlwZW9mIGY/Yy5hcHBlbmQoZSxuZXcgQmxvYihbZl0se3R5cGU6XCJhcHBsaWNhdGlvbi9qc29uXCJ9KSk6Yy5hcHBlbmQoZSxKU09OLnN0cmluZ2lmeShmKSkpfWlmKG51bGwhPWEuZmlsZSl7dmFyIGc9YS5maWxlRm9ybURhdGFOYW1lfHxcImZpbGVcIjtpZihcIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYS5maWxlKSlmb3IodmFyIGg9XCJbb2JqZWN0IFN0cmluZ11cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnKSxpPTA7aTxhLmZpbGUubGVuZ3RoO2krKyljLmFwcGVuZChoP2c6Z1tpXSxhLmZpbGVbaV0sYS5maWxlTmFtZSYmYS5maWxlTmFtZVtpXXx8YS5maWxlW2ldLm5hbWUpO2Vsc2UgYy5hcHBlbmQoZyxhLmZpbGUsYS5maWxlTmFtZXx8YS5maWxlLm5hbWUpfXJldHVybiBjfSksZChhKX0sdGhpcy5odHRwPWZ1bmN0aW9uKGEpe3JldHVybiBkKGEpfX1dKSxmLmRpcmVjdGl2ZShcIm5nRmlsZVNlbGVjdFwiLFtcIiRwYXJzZVwiLFwiJHRpbWVvdXRcIixcIiRjb21waWxlXCIsZnVuY3Rpb24oYSxjLGQpe3JldHVybntyZXN0cmljdDpcIkFFQ1wiLHJlcXVpcmU6XCI/bmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oZSxmLGcsaCl7YihlLGYsZyxoLGEsYyxkKX19fV0pLGYuZGlyZWN0aXZlKFwibmdGaWxlRHJvcFwiLFtcIiRwYXJzZVwiLFwiJHRpbWVvdXRcIixcIiRsb2NhdGlvblwiLGZ1bmN0aW9uKGEsYixkKXtyZXR1cm57cmVzdHJpY3Q6XCJBRUNcIixyZXF1aXJlOlwiP25nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGUsZixnLGgpe2MoZSxmLGcsaCxhLGIsZCl9fX1dKSxmLmRpcmVjdGl2ZShcIm5nTm9GaWxlRHJvcFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEsYil7ZCgpJiZiLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIil9fSksZi5kaXJlY3RpdmUoXCJuZ0ZpbGVEcm9wQXZhaWxhYmxlXCIsW1wiJHBhcnNlXCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmKXtpZihkKCkpe3ZhciBnPWEoZi5uZ0ZpbGVEcm9wQXZhaWxhYmxlKTtiKGZ1bmN0aW9uKCl7ZyhjKX0pfX19XSk7dmFyIGc9YW5ndWxhci5tb2R1bGUoXCJuZ0ZpbGVVcGxvYWRcIixbXSk7Zm9yKHZhciBoIGluIGYpZ1toXT1mW2hdfSgpOyIsImFuZ3VsYXIubW9kdWxlKFwibmdGYWJGb3JtXCIsW1wibmdNZXNzYWdlc1wiXSksYW5ndWxhci5tb2R1bGUoXCJuZ0ZhYkZvcm1cIikuZGlyZWN0aXZlKFwiZm9ybVwiLFtcIm5nRmFiRm9ybURpcmVjdGl2ZVwiLGZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO3JldHVybiBhfV0pLGFuZ3VsYXIubW9kdWxlKFwibmdGYWJGb3JtXCIpLmRpcmVjdGl2ZShcImlucHV0XCIsW1wibmdGYWJGb3JtVmFsaWRhdGlvbnNEaXJlY3RpdmVcIixmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gYX1dKSxhbmd1bGFyLm1vZHVsZShcIm5nRmFiRm9ybVwiKS5kaXJlY3RpdmUoXCJ0ZXh0YXJlYVwiLFtcIm5nRmFiRm9ybVZhbGlkYXRpb25zRGlyZWN0aXZlXCIsZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7cmV0dXJuIGF9XSksYW5ndWxhci5tb2R1bGUoXCJuZ0ZhYkZvcm1cIikuZGlyZWN0aXZlKFwic2VsZWN0XCIsW1wibmdGYWJGb3JtVmFsaWRhdGlvbnNEaXJlY3RpdmVcIixmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gYX1dKSxhbmd1bGFyLm1vZHVsZShcIm5nRmFiRm9ybVwiKS5wcm92aWRlcihcIm5nRmFiRm9ybVwiLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYShhLGIpe3ZhciBkPWFuZ3VsYXIuZWxlbWVudChhbmd1bGFyLmVsZW1lbnQoXCI8ZGl2Lz5cIikuaHRtbChhKSk7cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChiLGZ1bmN0aW9uKGEsYil7dmFyIGU9bmV3IFJlZ0V4cChjLnZhbGlkYXRpb25Nc2dQcmVmaXgpO2lmKGIubWF0Y2goZSkpe3ZhciBmPWIucmVwbGFjZShjLnZhbGlkYXRpb25Nc2dQcmVmaXgsXCJcIik7Zj1mLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpK2Yuc2xpY2UoMSk7dmFyIGc9ZFswXS5xdWVyeVNlbGVjdG9yKCdbbmctbWVzc2FnZT1cIicrZisnXCJdJyk7YW5ndWxhci5lbGVtZW50KGcpLmh0bWwoYSl9fSksZH12YXIgYixjPXt2YWxpZGF0aW9uc1RlbXBsYXRlOlwiZGVmYXVsdC12YWxpZGF0aW9uLW1zZ3MuaHRtbFwiLHByZXZlbnRJbnZhbGlkU3VibWl0OiEwLHByZXZlbnREb3VibGVTdWJtaXQ6ITAscHJldmVudERvdWJsZVN1Ym1pdFRpbWVvdXRMZW5ndGg6MWUzLHNldEZvcm1EaXJ0eU9uU3VibWl0OiEwLHNjcm9sbFRvQW5kRm9jdXNGaXJzdEVycm9yT25TdWJtaXQ6ITAsc2Nyb2xsQW5pbWF0aW9uVGltZTo1MDAsc2Nyb2xsT2Zmc2V0Oi0xMDAsZGlzYWJsZWRGb3JtczohMCxnbG9iYWxGYWJGb3JtRGlzYWJsZTohMSxzZXROb3ZhbGlkYXRlOiEwLHNldE5hbWVzQnlOZ01vZGVsOiEwLHNldEFzdGVyaXNrRm9yUmVxdWlyZWRMYWJlbDohMSxhc3Rlcmlza1N0cjpcIipcIix2YWxpZGF0aW9uTXNnUHJlZml4OlwidmFsaWRhdGlvbk1zZ1wiLGVtYWlsUmVnZXg6L1thLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pPy8sd2F0Y2hGb3JGb3JtQ3RybDohMSxmb3JtQ2hhbmdlRXZlbnQ6XCJOR19GQUJfRk9STV9PUFRJT05TX0NIQU5HRURcIn0sZD1mdW5jdGlvbihhLGIsYyl7XCJjaGVja2JveFwiPT09Yy50eXBlfHxcInJhZGlvXCI9PT1jLnR5cGU/Yi5wYXJlbnQoKS5hZnRlcihhKTpiLmFmdGVyKGEpfSxlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyxkKXtyZXR1cm4oYS89ZC8yKTwxP2MvMiphKmErYjotYy8yKigtLWEqKGEtMiktMSkrYn1mdW5jdGlvbiBiKGEsYil7dmFyIGM9NTAwLGQ9TWF0aC5hYnMoYSksZT1iLzEwO3JldHVybiBiKmQvYytlfXJldHVybiBmdW5jdGlvbihjLGQsZSl7ZnVuY3Rpb24gZigpe2wrPW07dmFyIGI9YShsLGosayxpKTt3aW5kb3cuc2Nyb2xsVG8oaCxiKSxpPmw/c2V0VGltZW91dChmLG0pOmMuZm9jdXMoKX12YXIgZz1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCtwYXJzZUludChlKSxoPWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCxpPWIoZyxkKSxqPXdpbmRvdy5wYWdlWU9mZnNldCxrPWcsbD0wLG09MjA7cmV0dXJuIDA9PT1rP3ZvaWQgYy5mb2N1cygpOnZvaWQgZigpfX0oKTtyZXR1cm57ZXh0ZW5kQ29uZmlnOmZ1bmN0aW9uKGEpe2M9YW5ndWxhci5leHRlbmQoYyxhKX0sc2V0SW5zZXJ0RXJyb3JUcGxGbjpmdW5jdGlvbihhKXtkPWF9LHNldFNjcm9sbFRvRm46ZnVuY3Rpb24oYSl7ZT1hfSxzZXRDdXN0b21WYWxpZGF0b3JzRm46ZnVuY3Rpb24oYSl7Yj1hfSwkZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2luc2VydEVycm9yVHBsOmQsYWRkQ3VzdG9tVmFsaWRhdGlvbnM6YSxjdXN0b21WYWxpZGF0b3JzOmIsc2Nyb2xsVG86ZSxjb25maWc6Y319fX0pLGFuZ3VsYXIubW9kdWxlKFwibmdGYWJGb3JtXCIpLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2EucHV0KFwiZGVmYXVsdC12YWxpZGF0aW9uLW1zZ3MuaHRtbFwiLCc8ZGl2IG5nLW1lc3NhZ2VzPVwiZmllbGQuJGVycm9yXCIgY2xhc3M9XCJ2YWxpZGF0aW9uXCIgbmctc2hvdz1cImF0dHJzLnJlcXVpcmVkPT1cXCdcXCd8fCBhdHRycy5yZXF1aXJlZFwiPjx1bCBjbGFzcz1cImxpc3QtdW5zdHlsZWQgdmFsaWRhdGlvbi1lcnJvcnNcIiBuZy1zaG93PVwiZmllbGQuJGludmFsaWQgJiYgKGZpZWxkLiR0b3VjaGVkIHx8IGZpZWxkLiRkaXJ0eSB8fCBmb3JtLiR0cmllZFN1Ym1pdClcIj48bGkgbmctbWVzc2FnZT1cInJlcXVpcmVkXCI+VGhpcyBmaWVsZCBpcyByZXF1aXJlZDwvbGk+PGxpIG5nLW1lc3NhZ2U9XCJuZ0ZhYkVuc3VyZUV4cHJlc3Npb25cIj5Ob3QgdmFsaWQgY29uZGl0aW9uPC9saT48bGkgbmctbWVzc2FnZT1cInBhc3N3b3JkXCI+UGxlYXNlIGVudGVyIGEgdmFsaWQgcGFzc3dvcmQ8L2xpPjxsaSBuZy1tZXNzYWdlPVwiZW1haWxcIj5QbGVhc2UgZW50ZXIgYSB2YWxpZCBlLW1haWw8L2xpPjxsaSBuZy1tZXNzYWdlPVwicGF0dGVyblwiPkludmFsaWQgaW5wdXQgZm9ybWF0PC9saT48bGkgbmctbWVzc2FnZT1cImRhdGVcIj5QbGVhc2UgZW50ZXIgYSB2YWxpZCBkYXRlPC9saT48bGkgbmctbWVzc2FnZT1cInRpbWVcIj5QbGVhc2UgZW50ZXIgYSB2YWxpZCB0aW1lPC9saT48bGkgbmctbWVzc2FnZT1cImRhdGV0aW1lXCI+UGxlYXNlIGVudGVyIGEgdmFsaWQgZGF0ZSBhbmQgdGltZTwvbGk+PGxpIG5nLW1lc3NhZ2U9XCJkYXRldGltZS1sb2NhbFwiPlBsZWFzZSBlbnRlciBhIHZhbGlkIGRhdGUgYW5kIHRpbWU8L2xpPjxsaSBuZy1tZXNzYWdlPVwibnVtYmVyXCI+VGhpcyBmaWVsZCBtdXN0IGJlIG51bWVyaWM8L2xpPjxsaSBuZy1tZXNzYWdlPVwiY29sb3JcIj5QbGVhc2UgZW50ZXIgYSB2YWxpZCBjb2xvcjwvbGk+PGxpIG5nLW1lc3NhZ2U9XCJyYW5nZVwiPlBsZWFzZSBlbnRlciBhIHZhbGlkIHJhbmdlPC9saT48bGkgbmctbWVzc2FnZT1cIm1vbnRoXCI+UGxlYXNlIGVudGVyIGEgdmFsaWQgbW9udGg8L2xpPjxsaSBuZy1tZXNzYWdlPVwidXJsXCI+UGxlYXNlIGVudGVyIGEgdmFsaWQgVVJMPC9saT48bGkgbmctbWVzc2FnZT1cImZpbGVcIj5JbnZhbGlkIGZpbGU8L2xpPjxsaSBuZy1tZXNzYWdlPVwibWlubGVuZ3RoXCI+UGxlYXNlIHVzZSBhdCBsZWFzdCB7eyBhdHRycy5taW5sZW5ndGggfX0gY2hhcmFjdGVyczwvbGk+PGxpIG5nLW1lc3NhZ2U9XCJtYXhsZW5ndGhcIj5QbGVhc2UgZG8gbm90IGV4Y2VlZCB7eyBhdHRycy5tYXhsZW5ndGggfX0gY2hhcmFjdGVyczwvbGk+PGxpIG5nLW1lc3NhZ2U9XCJuZ0ZhYk1hdGNoXCI+VGhlIHt7IGF0dHJzLnR5cGUgPT09XFwncGFzc3dvcmRcXCc/IFxcJ3Bhc3N3b3Jkc1xcJyA6IFxcJ3ZhbHVlc1xcJyB9fSBzaG91bGQgbWF0Y2g8L2xpPjxsaSBuZy1pZj1cImF0dHJzLnR5cGUgPT0gXFwndGltZVxcJyBcIiBuZy1tZXNzYWdlPVwibWluXCI+VGhlIHRpbWUgcHJvdmlkZWQgc2hvdWxkIGFmdGVyIHt7IGF0dHJzLm1pbiB8ZGF0ZTogXFwnSEg6TU1cXCcgfX08L2xpPjxsaSBuZy1tZXNzYWdlPVwibWF4XCIgbmctaWY9XCJhdHRycy50eXBlID09IFxcJ3RpbWVcXCcgXCI+VGhlIHRpbWUgcHJvdmlkZWQgc2hvdWxkIGJlIGJlZm9yZSB7e2F0dHJzLm1heCB8ZGF0ZTogXFwnSEg6TU1cXCd9fTwvbGk+PGxpIG5nLW1lc3NhZ2U9XCJtaW5cIiBuZy1pZj1cImF0dHJzLnR5cGUgPT0gXFwnZGF0ZVxcJyBcIj5UaGUgZGF0ZSBwcm92aWRlZCBzaG91bGQgYmUgYWZ0ZXIge3thdHRycy5taW4gfGRhdGU6XFwnZGQuTU0ueXlcXCd9fTwvbGk+PGxpIG5nLW1lc3NhZ2U9XCJtYXhcIiBuZy1pZj1cImF0dHJzLnR5cGUgPT0gXFwnZGF0ZVxcJyBcIj5UaGUgZGF0ZSBwcm92aWRlZCBzaG91bGQgYmUgYmVmb3JlIHt7YXR0cnMubWF4IHxkYXRlOiBcXCdkZC5NTS55eVxcJ319PC9saT48L3VsPjxkaXYgY2xhc3M9XCJ2YWxpZGF0aW9uLXN1Y2Nlc3NcIiBuZy1zaG93PVwiZmllbGQuJHZhbGlkICYmICFmaWVsZC4kaW52YWxpZFwiPjwvZGl2PjwvZGl2PicpfV0pLGFuZ3VsYXIubW9kdWxlKFwibmdGYWJGb3JtXCIpLmZhY3RvcnkoXCJuZ0ZhYkZvcm1WYWxpZGF0aW9uc0RpcmVjdGl2ZVwiLFtcIm5nRmFiRm9ybVwiLFwiJGNvbXBpbGVcIixcIiR0ZW1wbGF0ZVJlcXVlc3RcIixcIiRyb290U2NvcGVcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYSxiLGMsZCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBmKGUpe3ZhciBmPWUuZWwsZz1lLmNmZyxoPWUuZm9ybUN0cmwsaT1lLm5nTW9kZWxDdHJsLGo9ZS5hdHRycztlLmN1cnJlbnRWYWxpZGF0aW9uVmFycy50cGwmJjAhPT1PYmplY3Qua2V5cyhlLmN1cnJlbnRWYWxpZGF0aW9uVmFycy50cGwpLmxlbmd0aCYmYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFZhbGlkYXRpb25WYXJzLnRwbCkucmVtb3ZlKCksYyhnLnZhbGlkYXRpb25zVGVtcGxhdGUpLnRoZW4oZnVuY3Rpb24oYyl7dmFyIGc9ZC4kbmV3KCEwKTtlLmN1cnJlbnRWYWxpZGF0aW9uVmFycy5wcml2YXRlU2NvcGU9ZyxjPWEuYWRkQ3VzdG9tVmFsaWRhdGlvbnMoYyxqKSxnLmF0dHJzPWosZy5mb3JtPWgsZy5maWVsZD1pO3ZhciBrPWIoYy5jaGlsZHJlbigpKShnKTtlLmN1cnJlbnRWYWxpZGF0aW9uVmFycy50cGw9a1swXSxhLmluc2VydEVycm9yVHBsKGtbMF0sZixqKX0pfWZ1bmN0aW9uIGcoYSxiLGMpe3ZhciBkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xhYmVsW2Zvcj1cIicrYi5uYW1lKydcIl0nKTtpZighZHx8ZC5sZW5ndGg8MSl7dmFyIGU9YVswXS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO2UmJlwiTEFCRUxcIj09PWUudGFnTmFtZSYmKGQ9W2VdKX1pZihkJiZkLmxlbmd0aD4wJiZcInJhZGlvXCIhPT1iLnR5cGUmJlwiY2hlY2tib3hcIiE9PWIudHlwZSlmb3IodmFyIGY9MDtmPGQubGVuZ3RoO2YrKyl7dmFyIGc9ZFtmXTtnLnRleHRDb250ZW50LnNsaWNlKC1jLmFzdGVyaXNrU3RyLmxlbmd0aCkhPT1jLmFzdGVyaXNrU3RyJiYoZy50ZXh0Q29udGVudD1nLnRleHRDb250ZW50K2MuYXN0ZXJpc2tTdHIpfX1yZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVxdWlyZTpcIj9uZ01vZGVsXCIsY29tcGlsZTpmdW5jdGlvbihiLGMpe3JldHVybiFjLnR5cGV8fFwic3VibWl0XCIhPT1jLnR5cGUudG9Mb3dlckNhc2UoKSYmXCJidXR0b25cIiE9PWMudHlwZS50b0xvd2VyQ2FzZSgpPyhhLmNvbmZpZy5zZXROYW1lc0J5TmdNb2RlbCYmYy5uZ01vZGVsJiYhYy5uYW1lJiYhYS5jb25maWcuZ2xvYmFsRmFiRm9ybURpc2FibGUmJihiLmF0dHIoXCJuYW1lXCIsYy5uZ01vZGVsKSxjLm5hbWU9Yy5uZ01vZGVsKSxmdW5jdGlvbihiLGMsZCxoKXtmdW5jdGlvbiBpKGEpeyFofHwhay52YWxpZGF0aW9uc1RlbXBsYXRlfHwwPT09T2JqZWN0LmtleXMoaC4kdmFsaWRhdG9ycykubGVuZ3RoJiYwPT09T2JqZWN0LmtleXMoaC4kYXN5bmNWYWxpZGF0b3JzKS5sZW5ndGh8fGEmJmsudmFsaWRhdGlvbnNUZW1wbGF0ZT09PWEudmFsaWRhdGlvbnNUZW1wbGF0ZT8hay52YWxpZGF0aW9uc1RlbXBsYXRlJiZvLnRwbCYmMCE9PU9iamVjdC5rZXlzKG8udHBsKS5sZW5ndGgmJihvLnByaXZhdGVTY29wZS4kZGVzdHJveSgpLGFuZ3VsYXIuZWxlbWVudChvLnRwbCkucmVtb3ZlKCkpOmYoe2VsOmMsY2ZnOmssZm9ybUN0cmw6bCxuZ01vZGVsQ3RybDpoLGF0dHJzOmQsY3VycmVudFZhbGlkYXRpb25WYXJzOm99KSwhay5zZXRBc3Rlcmlza0ZvclJlcXVpcmVkTGFiZWx8fGQucmVxdWlyZWQhPT0hMHx8YSYmay5zZXRBc3Rlcmlza0ZvclJlcXVpcmVkTGFiZWw9PT1hLnNldEFzdGVyaXNrRm9yUmVxdWlyZWRMYWJlbCYmay5hc3Rlcmlza1N0cj09PWEuYXN0ZXJpc2tTdHJ8fGcoYyxkLGspfWZ1bmN0aW9uIGooKXtlKGZ1bmN0aW9uKCl7aWYobD1jLmNvbnRyb2xsZXIoXCJmb3JtXCIpLGwmJmgpe2lmKGt8fChrPWwubmdGYWJGb3JtQ29uZmlnKSwhaylyZXR1cm47ay5lbWFpbFJlZ2V4JiZcImVtYWlsXCI9PT1kLnR5cGUmJihoLiR2YWxpZGF0b3JzLmVtYWlsPWZ1bmN0aW9uKGEpe3JldHVybiBoLiRpc0VtcHR5KGEpfHxrLmVtYWlsUmVnZXgudGVzdChhKX0pLGEuY3VzdG9tVmFsaWRhdG9ycyYmYS5jdXN0b21WYWxpZGF0b3JzKGgsZCksaSgpLG09Yi4kb24oYS5mb3JtQ2hhbmdlRXZlbnQsZnVuY3Rpb24oYSxiLGMpe2s9YixpKGMpfSl9fSwwKX12YXIgayxsLG0sbixvPXt0cGw6dm9pZCAwLHByaXZhdGVTY29wZTp2b2lkIDB9O2EuY29uZmlnLndhdGNoRm9yRm9ybUN0cmw/bj1iLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBjLmNvbnRyb2xsZXIoXCJmb3JtXCIpfSxmdW5jdGlvbihhKXthJiYobigpLGooKSl9KTpqKCksYi4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7byYmby5wcml2YXRlU2NvcGUmJm8ucHJpdmF0ZVNjb3BlLiRkZXN0cm95KCl9KX0pOnZvaWQgMH19fV0pLGFuZ3VsYXIubW9kdWxlKFwibmdGYWJGb3JtXCIpLmRpcmVjdGl2ZShcIm5nRmFiRW5zdXJlRXhwcmVzc2lvblwiLFtcIiRodHRwXCIsXCIkcGFyc2VcIixmdW5jdGlvbihhLGIpe1widXNlIHN0cmljdFwiO3JldHVybntyZXF1aXJlOlwibmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7YS4kd2F0Y2goZC5uZ01vZGVsLGZ1bmN0aW9uKCl7dmFyIGM9YihkLm5nRmFiRW5zdXJlRXhwcmVzc2lvbikoYSk7ZS4kc2V0VmFsaWRpdHkoXCJuZ0ZhYkVuc3VyZUV4cHJlc3Npb25cIixjKSxlLiR2YWxpZGF0ZSgpfSl9fX1dKSxhbmd1bGFyLm1vZHVsZShcIm5nRmFiRm9ybVwiKS5kaXJlY3RpdmUoXCJuZ0ZhYk1hdGNoXCIsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtyZXR1cm57cmVxdWlyZTpcIm5nTW9kZWxcIixyZXN0cmljdDpcIkFcIixzY29wZTp7bmdGYWJNYXRjaDpcIj1cIn0sbGluazpmdW5jdGlvbihhLGIsYyxkKXtkLiR2YWxpZGF0b3JzLm5nRmFiTWF0Y2g9ZnVuY3Rpb24oYil7cmV0dXJuIEJvb2xlYW4oYikmJmI9PWEubmdGYWJNYXRjaH0sYS4kd2F0Y2goXCJuZ0ZhYk1hdGNoXCIsZnVuY3Rpb24oKXtkLiR2YWxpZGF0ZSgpfSl9fX0pLGFuZ3VsYXIubW9kdWxlKFwibmdGYWJGb3JtXCIpLmRpcmVjdGl2ZShcIm5nRmFiUmVzZXRGb3JtT25cIixmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3JldHVybntyZXF1aXJlOlwiXmZvcm1cIixyZXN0cmljdDpcIkFcIixzY29wZTp7bmdGYWJSZXNldEZvcm1PbjpcIkBcIixkb05vdENsZWFySW5wdXRzOlwiQFwifSxsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2MubmdGYWJSZXNldEZvcm1Pbnx8KGMubmdGYWJSZXNldEZvcm1Pbj1cImNsaWNrXCIpLGIub24oYy5uZ0ZhYlJlc2V0Rm9ybU9uLGZ1bmN0aW9uKCl7Yy5kb05vdENsZWFySW5wdXRzP2QuJHJlc2V0Rm9ybSgpOmQuJHJlc2V0Rm9ybSghMCksYS4kYXBwbHkoKX0pfX19KSxhbmd1bGFyLm1vZHVsZShcIm5nRmFiRm9ybVwiKS5mYWN0b3J5KFwibmdGYWJGb3JtRGlyZWN0aXZlXCIsW1wiJGNvbXBpbGVcIixcIiR0aW1lb3V0XCIsXCJuZ0ZhYkZvcm1cIixmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXthLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSxhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpfWZ1bmN0aW9uIGUoYSxiKXtpZihiLmRpc2FibGVGb3JtKXthLmNvbnRlbnRzKCkud3JhcChcIjxmaWVsZHNldD5cIik7dmFyIGM9YS5jaGlsZHJlbigpO2IuJG9ic2VydmUoXCJkaXNhYmxlRm9ybVwiLGZ1bmN0aW9uKCl7XCJ0cnVlXCI9PT1iLmRpc2FibGVGb3JtfHxiLmRpc2FibGVGb3JtPT09ITA/Yy5hdHRyKFwiZGlzYWJsZWRcIiwhMCk6Yy5hdHRyKFwiZGlzYWJsZWRcIiwhMSl9KX19ZnVuY3Rpb24gZihhLGIsZCxlKXt2YXIgZj1hWzBdLnF1ZXJ5U2VsZWN0b3IoXCIubmctaW52YWxpZFwiKTtmJiZiLiRpbnZhbGlkJiZjLnNjcm9sbFRvKGYscGFyc2VJbnQoZCksZSl9cmV0dXJue3Jlc3RyaWN0OlwiRUFDXCIsc2NvcGU6ITEscmVxdWlyZTpcImZvcm1cIixjb21waWxlOmZ1bmN0aW9uKGEsZyl7dmFyIGgsaT1hbmd1bGFyLmNvcHkoYy5jb25maWcpO2lmKGkuZ2xvYmFsRmFiRm9ybURpc2FibGUhPT0hMHx8IWFuZ3VsYXIuaXNVbmRlZmluZWQoZy5uZ0ZhYkZvcm0pKXJldHVybiFnLm5vdmFsaWRhdGUmJmkuc2V0Tm92YWxpZGF0ZSYmKGEuYXR0cihcIm5vdmFsaWRhdGVcIiwhMCksZy5ub3ZhbGlkYXRlPSEwKSx7cHJlOmZ1bmN0aW9uKGEsYyxlLGcpe2MuYmluZChcInN1Ym1pdFwiLGZ1bmN0aW9uKGUpe2kuc2V0Rm9ybURpcnR5T25TdWJtaXQmJmEuJGFwcGx5KGZ1bmN0aW9uKCl7Zy4kdHJpZWRTdWJtaXQ9ITB9KSxpLnByZXZlbnRJbnZhbGlkU3VibWl0JiYhZy4kdmFsaWQ/ZChlKTppLnByZXZlbnREb3VibGVTdWJtaXQmJihnLiRwcmV2ZW50RG91YmxlU3VibWl0JiZkKGUpLGgmJmIuY2FuY2VsKGgpLGcuJHByZXZlbnREb3VibGVTdWJtaXQ9ITAsaD1iKGZ1bmN0aW9uKCl7Zy4kcHJldmVudERvdWJsZVN1Ym1pdD0hMX0saS5wcmV2ZW50RG91YmxlU3VibWl0VGltZW91dExlbmd0aCkpLGkuc2Nyb2xsVG9BbmRGb2N1c0ZpcnN0RXJyb3JPblN1Ym1pdCYmZihjLGcsaS5zY3JvbGxBbmltYXRpb25UaW1lLGkuc2Nyb2xsT2Zmc2V0KX0pfSxwb3N0OmZ1bmN0aW9uKGEsZCxmLGcpe2cuJHRyaWVkU3VibWl0PSExLGcuJHByZXZlbnREb3VibGVTdWJtaXQ9ITEsZy5uZ0ZhYkZvcm1Db25maWc9aSxnLiRyZXNldEZvcm09ZnVuY3Rpb24oYSl7aWYoYT09PSEwKWZvcih2YXIgYj1kLmZpbmQoXCJpbnB1dFwiKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBlPWFuZ3VsYXIuZWxlbWVudChiW2NdKSxmPWUuY29udHJvbGxlcihcIm5nTW9kZWxcIik7ZiYmKGYuJHNldFZpZXdWYWx1ZShcIlwiKSxmLiRyZW5kZXIoKSl9Zy4kdHJpZWRTdWJtaXQ9ITEsZy4kc2V0UHJpc3RpbmUoKSxnLiRzZXRVbnRvdWNoZWQoKX0saS5kaXNhYmxlZEZvcm1zJiZlKGQsZiksZi5uZ0ZhYkZvcm1PcHRpb25zJiZhLiR3YXRjaChmLm5nRmFiRm9ybU9wdGlvbnMsZnVuY3Rpb24oYil7aWYoYil7dmFyIGQ9YW5ndWxhci5jb3B5KGkpO2k9Zy5uZ0ZhYkZvcm1Db25maWc9YW5ndWxhci5leHRlbmQoaSxiKSxhLiRicm9hZGNhc3QoYy5mb3JtQ2hhbmdlRXZlbnQsaSxkKX19LCEwKSxhLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtoJiZiLmNhbmNlbChoKX0pfX19fX1dKSxhbmd1bGFyLm1vZHVsZShcIm5nRmFiRm9ybVwiKS5kaXJlY3RpdmUoXCJuZ0Zvcm1cIixbXCJuZ0ZhYkZvcm1EaXJlY3RpdmVcIixmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gYX1dKTsiLCIhZnVuY3Rpb24oYSxiKXtiW1widHJ1ZVwiXT1hLC8qKlxuICogQGxpY2Vuc2UgUmFuZ3ksIGEgY3Jvc3MtYnJvd3NlciBKYXZhU2NyaXB0IHJhbmdlIGFuZCBzZWxlY3Rpb24gbGlicmFyeVxuICogaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL3Jhbmd5L1xuICpcbiAqIENvcHlyaWdodCAyMDEyLCBUaW0gRG93blxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogVmVyc2lvbjogMS4yLjNcbiAqIEJ1aWxkIGRhdGU6IDI2IEZlYnJ1YXJ5IDIwMTJcbiAqL1xud2luZG93LnJhbmd5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIpe3ZhciBjPXR5cGVvZiBhW2JdO3JldHVybiBjPT1sfHwhKGMhPWt8fCFhW2JdKXx8XCJ1bmtub3duXCI9PWN9ZnVuY3Rpb24gYihhLGIpe3JldHVybiEodHlwZW9mIGFbYl0hPWt8fCFhW2JdKX1mdW5jdGlvbiBjKGEsYil7cmV0dXJuIHR5cGVvZiBhW2JdIT1tfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7Zm9yKHZhciBkPWMubGVuZ3RoO2QtLTspaWYoIWEoYixjW2RdKSlyZXR1cm4hMTtyZXR1cm4hMH19ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSYmcihhLHEpJiZ0KGEscCl9ZnVuY3Rpb24gZihhKXt3aW5kb3cuYWxlcnQoXCJSYW5neSBub3Qgc3VwcG9ydGVkIGluIHlvdXIgYnJvd3Nlci4gUmVhc29uOiBcIithKSx1LmluaXRpYWxpemVkPSEwLHUuc3VwcG9ydGVkPSExfWZ1bmN0aW9uIGcoYSl7dmFyIGI9XCJSYW5neSB3YXJuaW5nOiBcIithO3UuY29uZmlnLmFsZXJ0T25XYXJuP3dpbmRvdy5hbGVydChiKTp0eXBlb2Ygd2luZG93LmNvbnNvbGUhPW0mJnR5cGVvZiB3aW5kb3cuY29uc29sZS5sb2chPW0mJndpbmRvdy5jb25zb2xlLmxvZyhiKX1mdW5jdGlvbiBoKCl7aWYoIXUuaW5pdGlhbGl6ZWQpe3ZhciBjLGQ9ITEsZz0hMTthKGRvY3VtZW50LFwiY3JlYXRlUmFuZ2VcIikmJihjPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCkscihjLG8pJiZ0KGMsbikmJihkPSEwKSxjLmRldGFjaCgpKTt2YXIgaD1iKGRvY3VtZW50LFwiYm9keVwiKT9kb2N1bWVudC5ib2R5OmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXTtoJiZhKGgsXCJjcmVhdGVUZXh0UmFuZ2VcIikmJihjPWguY3JlYXRlVGV4dFJhbmdlKCksZShjKSYmKGc9ITApKSxkfHxnfHxmKFwiTmVpdGhlciBSYW5nZSBub3IgVGV4dFJhbmdlIGFyZSBpbXBsZW1lbnRlZFwiKSx1LmluaXRpYWxpemVkPSEwLHUuZmVhdHVyZXM9e2ltcGxlbWVudHNEb21SYW5nZTpkLGltcGxlbWVudHNUZXh0UmFuZ2U6Z307Zm9yKHZhciBpPXcuY29uY2F0KHYpLGo9MCxrPWkubGVuZ3RoO2s+ajsrK2opdHJ5e2lbal0odSl9Y2F0Y2gobCl7Yih3aW5kb3csXCJjb25zb2xlXCIpJiZhKHdpbmRvdy5jb25zb2xlLFwibG9nXCIpJiZ3aW5kb3cuY29uc29sZS5sb2coXCJJbml0IGxpc3RlbmVyIHRocmV3IGFuIGV4Y2VwdGlvbi4gQ29udGludWluZy5cIixsKX19fWZ1bmN0aW9uIGkoYSl7YT1hfHx3aW5kb3csaCgpO2Zvcih2YXIgYj0wLGM9eC5sZW5ndGg7Yz5iOysrYil4W2JdKGEpfWZ1bmN0aW9uIGooYSl7dGhpcy5uYW1lPWEsdGhpcy5pbml0aWFsaXplZD0hMSx0aGlzLnN1cHBvcnRlZD0hMX12YXIgaz1cIm9iamVjdFwiLGw9XCJmdW5jdGlvblwiLG09XCJ1bmRlZmluZWRcIixuPVtcInN0YXJ0Q29udGFpbmVyXCIsXCJzdGFydE9mZnNldFwiLFwiZW5kQ29udGFpbmVyXCIsXCJlbmRPZmZzZXRcIixcImNvbGxhcHNlZFwiLFwiY29tbW9uQW5jZXN0b3JDb250YWluZXJcIixcIlNUQVJUX1RPX1NUQVJUXCIsXCJTVEFSVF9UT19FTkRcIixcIkVORF9UT19TVEFSVFwiLFwiRU5EX1RPX0VORFwiXSxvPVtcInNldFN0YXJ0XCIsXCJzZXRTdGFydEJlZm9yZVwiLFwic2V0U3RhcnRBZnRlclwiLFwic2V0RW5kXCIsXCJzZXRFbmRCZWZvcmVcIixcInNldEVuZEFmdGVyXCIsXCJjb2xsYXBzZVwiLFwic2VsZWN0Tm9kZVwiLFwic2VsZWN0Tm9kZUNvbnRlbnRzXCIsXCJjb21wYXJlQm91bmRhcnlQb2ludHNcIixcImRlbGV0ZUNvbnRlbnRzXCIsXCJleHRyYWN0Q29udGVudHNcIixcImNsb25lQ29udGVudHNcIixcImluc2VydE5vZGVcIixcInN1cnJvdW5kQ29udGVudHNcIixcImNsb25lUmFuZ2VcIixcInRvU3RyaW5nXCIsXCJkZXRhY2hcIl0scD1bXCJib3VuZGluZ0hlaWdodFwiLFwiYm91bmRpbmdMZWZ0XCIsXCJib3VuZGluZ1RvcFwiLFwiYm91bmRpbmdXaWR0aFwiLFwiaHRtbFRleHRcIixcInRleHRcIl0scT1bXCJjb2xsYXBzZVwiLFwiY29tcGFyZUVuZFBvaW50c1wiLFwiZHVwbGljYXRlXCIsXCJnZXRCb29rbWFya1wiLFwibW92ZVRvQm9va21hcmtcIixcIm1vdmVUb0VsZW1lbnRUZXh0XCIsXCJwYXJlbnRFbGVtZW50XCIsXCJwYXN0ZUhUTUxcIixcInNlbGVjdFwiLFwic2V0RW5kUG9pbnRcIixcImdldEJvdW5kaW5nQ2xpZW50UmVjdFwiXSxyPWQoYSkscz1kKGIpLHQ9ZChjKSx1PXt2ZXJzaW9uOlwiMS4yLjNcIixpbml0aWFsaXplZDohMSxzdXBwb3J0ZWQ6ITAsdXRpbDp7aXNIb3N0TWV0aG9kOmEsaXNIb3N0T2JqZWN0OmIsaXNIb3N0UHJvcGVydHk6YyxhcmVIb3N0TWV0aG9kczpyLGFyZUhvc3RPYmplY3RzOnMsYXJlSG9zdFByb3BlcnRpZXM6dCxpc1RleHRSYW5nZTplfSxmZWF0dXJlczp7fSxtb2R1bGVzOnt9LGNvbmZpZzp7YWxlcnRPbldhcm46ITEscHJlZmVyVGV4dFJhbmdlOiExfX07dS5mYWlsPWYsdS53YXJuPWcse30uaGFzT3duUHJvcGVydHk/dS51dGlsLmV4dGVuZD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYyBpbiBiKWIuaGFzT3duUHJvcGVydHkoYykmJihhW2NdPWJbY10pfTpmKFwiaGFzT3duUHJvcGVydHkgbm90IHN1cHBvcnRlZFwiKTt2YXIgdj1bXSx3PVtdO3UuaW5pdD1oLHUuYWRkSW5pdExpc3RlbmVyPWZ1bmN0aW9uKGEpe3UuaW5pdGlhbGl6ZWQ/YSh1KTp2LnB1c2goYSl9O3ZhciB4PVtdO3UuYWRkQ3JlYXRlTWlzc2luZ05hdGl2ZUFwaUxpc3RlbmVyPWZ1bmN0aW9uKGEpe3gucHVzaChhKX0sdS5jcmVhdGVNaXNzaW5nTmF0aXZlQXBpPWksai5wcm90b3R5cGUuZmFpbD1mdW5jdGlvbihhKXt0aHJvdyB0aGlzLmluaXRpYWxpemVkPSEwLHRoaXMuc3VwcG9ydGVkPSExLG5ldyBFcnJvcihcIk1vZHVsZSAnXCIrdGhpcy5uYW1lK1wiJyBmYWlsZWQgdG8gbG9hZDogXCIrYSl9LGoucHJvdG90eXBlLndhcm49ZnVuY3Rpb24oYSl7dS53YXJuKFwiTW9kdWxlIFwiK3RoaXMubmFtZStcIjogXCIrYSl9LGoucHJvdG90eXBlLmNyZWF0ZUVycm9yPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgRXJyb3IoXCJFcnJvciBpbiBSYW5neSBcIit0aGlzLm5hbWUrXCIgbW9kdWxlOiBcIithKX0sdS5jcmVhdGVNb2R1bGU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgaihhKTt1Lm1vZHVsZXNbYV09Yyx3LnB1c2goZnVuY3Rpb24oYSl7YihhLGMpLGMuaW5pdGlhbGl6ZWQ9ITAsYy5zdXBwb3J0ZWQ9ITB9KX0sdS5yZXF1aXJlTW9kdWxlcz1mdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkPTAsZT1hLmxlbmd0aDtlPmQ7KytkKXtpZihjPWFbZF0sYj11Lm1vZHVsZXNbY10sIShiJiZiIGluc3RhbmNlb2YgaikpdGhyb3cgbmV3IEVycm9yKFwiTW9kdWxlICdcIitjK1wiJyBub3QgZm91bmRcIik7aWYoIWIuc3VwcG9ydGVkKXRocm93IG5ldyBFcnJvcihcIk1vZHVsZSAnXCIrYytcIicgbm90IHN1cHBvcnRlZFwiKX19O3ZhciB5PSExLHo9ZnVuY3Rpb24oKXt5fHwoeT0hMCx1LmluaXRpYWxpemVkfHxoKCkpfTtyZXR1cm4gdHlwZW9mIHdpbmRvdz09bT92b2lkIGYoXCJObyB3aW5kb3cgZm91bmRcIik6dHlwZW9mIGRvY3VtZW50PT1tP3ZvaWQgZihcIk5vIGRvY3VtZW50IGZvdW5kXCIpOihhKGRvY3VtZW50LFwiYWRkRXZlbnRMaXN0ZW5lclwiKSYmZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIix6LCExKSxhKHdpbmRvdyxcImFkZEV2ZW50TGlzdGVuZXJcIik/d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIseiwhMSk6YSh3aW5kb3csXCJhdHRhY2hFdmVudFwiKT93aW5kb3cuYXR0YWNoRXZlbnQoXCJvbmxvYWRcIix6KTpmKFwiV2luZG93IGRvZXMgbm90IGhhdmUgcmVxdWlyZWQgYWRkRXZlbnRMaXN0ZW5lciBvciBhdHRhY2hFdmVudCBtZXRob2RcIiksdSl9KCkscmFuZ3kuY3JlYXRlTW9kdWxlKFwiRG9tVXRpbFwiLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXt2YXIgYjtyZXR1cm4gdHlwZW9mIGEubmFtZXNwYWNlVVJJPT16fHxudWxsPT09KGI9YS5uYW1lc3BhY2VVUkkpfHxcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIj09Yn1mdW5jdGlvbiBkKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gMT09Yi5ub2RlVHlwZT9iOm51bGx9ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9MDthPWEucHJldmlvdXNTaWJsaW5nOyliKys7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhKXt2YXIgYjtyZXR1cm4gaihhKT9hLmxlbmd0aDooYj1hLmNoaWxkTm9kZXMpP2IubGVuZ3RoOjB9ZnVuY3Rpb24gZyhhLGIpe3ZhciBjLGQ9W107Zm9yKGM9YTtjO2M9Yy5wYXJlbnROb2RlKWQucHVzaChjKTtmb3IoYz1iO2M7Yz1jLnBhcmVudE5vZGUpaWYoRChkLGMpKXJldHVybiBjO3JldHVybiBudWxsfWZ1bmN0aW9uIGgoYSxiLGMpe2Zvcih2YXIgZD1jP2I6Yi5wYXJlbnROb2RlO2Q7KXtpZihkPT09YSlyZXR1cm4hMDtkPWQucGFyZW50Tm9kZX1yZXR1cm4hMX1mdW5jdGlvbiBpKGEsYixjKXtmb3IodmFyIGQsZT1jP2E6YS5wYXJlbnROb2RlO2U7KXtpZihkPWUucGFyZW50Tm9kZSxkPT09YilyZXR1cm4gZTtlPWR9cmV0dXJuIG51bGx9ZnVuY3Rpb24gaihhKXt2YXIgYj1hLm5vZGVUeXBlO3JldHVybiAzPT1ifHw0PT1ifHw4PT1ifWZ1bmN0aW9uIGsoYSxiKXt2YXIgYz1iLm5leHRTaWJsaW5nLGQ9Yi5wYXJlbnROb2RlO3JldHVybiBjP2QuaW5zZXJ0QmVmb3JlKGEsYyk6ZC5hcHBlbmRDaGlsZChhKSxhfWZ1bmN0aW9uIGwoYSxiKXt2YXIgYz1hLmNsb25lTm9kZSghMSk7cmV0dXJuIGMuZGVsZXRlRGF0YSgwLGIpLGEuZGVsZXRlRGF0YShiLGEubGVuZ3RoLWIpLGsoYyxhKSxjfWZ1bmN0aW9uIG0oYSl7aWYoOT09YS5ub2RlVHlwZSlyZXR1cm4gYTtpZih0eXBlb2YgYS5vd25lckRvY3VtZW50IT16KXJldHVybiBhLm93bmVyRG9jdW1lbnQ7aWYodHlwZW9mIGEuZG9jdW1lbnQhPXopcmV0dXJuIGEuZG9jdW1lbnQ7aWYoYS5wYXJlbnROb2RlKXJldHVybiBtKGEucGFyZW50Tm9kZSk7dGhyb3cgbmV3IEVycm9yKFwiZ2V0RG9jdW1lbnQ6IG5vIGRvY3VtZW50IGZvdW5kIGZvciBub2RlXCIpfWZ1bmN0aW9uIG4oYSl7dmFyIGI9bShhKTtpZih0eXBlb2YgYi5kZWZhdWx0VmlldyE9eilyZXR1cm4gYi5kZWZhdWx0VmlldztpZih0eXBlb2YgYi5wYXJlbnRXaW5kb3chPXopcmV0dXJuIGIucGFyZW50V2luZG93O3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBnZXQgYSB3aW5kb3cgb2JqZWN0IGZvciBub2RlXCIpfWZ1bmN0aW9uIG8oYSl7aWYodHlwZW9mIGEuY29udGVudERvY3VtZW50IT16KXJldHVybiBhLmNvbnRlbnREb2N1bWVudDtpZih0eXBlb2YgYS5jb250ZW50V2luZG93IT16KXJldHVybiBhLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7dGhyb3cgbmV3IEVycm9yKFwiZ2V0SWZyYW1lV2luZG93OiBObyBEb2N1bWVudCBvYmplY3QgZm91bmQgZm9yIGlmcmFtZSBlbGVtZW50XCIpfWZ1bmN0aW9uIHAoYSl7aWYodHlwZW9mIGEuY29udGVudFdpbmRvdyE9eilyZXR1cm4gYS5jb250ZW50V2luZG93O2lmKHR5cGVvZiBhLmNvbnRlbnREb2N1bWVudCE9eilyZXR1cm4gYS5jb250ZW50RG9jdW1lbnQuZGVmYXVsdFZpZXc7dGhyb3cgbmV3IEVycm9yKFwiZ2V0SWZyYW1lV2luZG93OiBObyBXaW5kb3cgb2JqZWN0IGZvdW5kIGZvciBpZnJhbWUgZWxlbWVudFwiKX1mdW5jdGlvbiBxKGEpe3JldHVybiBBLmlzSG9zdE9iamVjdChhLFwiYm9keVwiKT9hLmJvZHk6YS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF19ZnVuY3Rpb24gcihhKXtmb3IodmFyIGI7Yj1hLnBhcmVudE5vZGU7KWE9YjtyZXR1cm4gYX1mdW5jdGlvbiBzKGEsYixjLGQpe3ZhciBmLGgsaixrLGw7aWYoYT09YylyZXR1cm4gYj09PWQ/MDpkPmI/LTE6MTtpZihmPWkoYyxhLCEwKSlyZXR1cm4gYjw9ZShmKT8tMToxO2lmKGY9aShhLGMsITApKXJldHVybiBlKGYpPGQ/LTE6MTtpZihoPWcoYSxjKSxqPWE9PT1oP2g6aShhLGgsITApLGs9Yz09PWg/aDppKGMsaCwhMCksaj09PWspdGhyb3cgbmV3IEVycm9yKFwiY29tcGFyZVBvaW50cyBnb3QgdG8gY2FzZSA0IGFuZCBjaGlsZEEgYW5kIGNoaWxkQiBhcmUgdGhlIHNhbWUhXCIpO2ZvcihsPWguZmlyc3RDaGlsZDtsOyl7aWYobD09PWopcmV0dXJuLTE7aWYobD09PWspcmV0dXJuIDE7bD1sLm5leHRTaWJsaW5nfXRocm93IG5ldyBFcnJvcihcIlNob3VsZCBub3QgYmUgaGVyZSFcIil9ZnVuY3Rpb24gdChhKXtmb3IodmFyIGIsYz1tKGEpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtiPWEuZmlyc3RDaGlsZDspYy5hcHBlbmRDaGlsZChiKTtyZXR1cm4gY31mdW5jdGlvbiB1KGEpe2lmKCFhKXJldHVyblwiW05vIG5vZGVdXCI7aWYoaihhKSlyZXR1cm4nXCInK2EuZGF0YSsnXCInO2lmKDE9PWEubm9kZVR5cGUpe3ZhciBiPWEuaWQ/JyBpZD1cIicrYS5pZCsnXCInOlwiXCI7cmV0dXJuXCI8XCIrYS5ub2RlTmFtZStiK1wiPltcIithLmNoaWxkTm9kZXMubGVuZ3RoK1wiXVwifXJldHVybiBhLm5vZGVOYW1lfWZ1bmN0aW9uIHYoYSl7dGhpcy5yb290PWEsdGhpcy5fbmV4dD1hfWZ1bmN0aW9uIHcoYSl7cmV0dXJuIG5ldyB2KGEpfWZ1bmN0aW9uIHgoYSxiKXt0aGlzLm5vZGU9YSx0aGlzLm9mZnNldD1ifWZ1bmN0aW9uIHkoYSl7dGhpcy5jb2RlPXRoaXNbYV0sdGhpcy5jb2RlTmFtZT1hLHRoaXMubWVzc2FnZT1cIkRPTUV4Y2VwdGlvbjogXCIrdGhpcy5jb2RlTmFtZX12YXIgej1cInVuZGVmaW5lZFwiLEE9YS51dGlsO0EuYXJlSG9zdE1ldGhvZHMoZG9jdW1lbnQsW1wiY3JlYXRlRG9jdW1lbnRGcmFnbWVudFwiLFwiY3JlYXRlRWxlbWVudFwiLFwiY3JlYXRlVGV4dE5vZGVcIl0pfHxiLmZhaWwoXCJkb2N1bWVudCBtaXNzaW5nIGEgTm9kZSBjcmVhdGlvbiBtZXRob2RcIiksQS5pc0hvc3RNZXRob2QoZG9jdW1lbnQsXCJnZXRFbGVtZW50c0J5VGFnTmFtZVwiKXx8Yi5mYWlsKFwiZG9jdW1lbnQgbWlzc2luZyBnZXRFbGVtZW50c0J5VGFnTmFtZSBtZXRob2RcIik7dmFyIEI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtBLmFyZUhvc3RNZXRob2RzKEIsW1wiaW5zZXJ0QmVmb3JlXCIsXCJhcHBlbmRDaGlsZFwiLFwiY2xvbmVOb2RlXCJdfHwhQS5hcmVIb3N0T2JqZWN0cyhCLFtcInByZXZpb3VzU2libGluZ1wiLFwibmV4dFNpYmxpbmdcIixcImNoaWxkTm9kZXNcIixcInBhcmVudE5vZGVcIl0pKXx8Yi5mYWlsKFwiSW5jb21wbGV0ZSBFbGVtZW50IGltcGxlbWVudGF0aW9uXCIpLEEuaXNIb3N0UHJvcGVydHkoQixcImlubmVySFRNTFwiKXx8Yi5mYWlsKFwiRWxlbWVudCBpcyBtaXNzaW5nIGlubmVySFRNTCBwcm9wZXJ0eVwiKTt2YXIgQz1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcInRlc3RcIik7QS5hcmVIb3N0TWV0aG9kcyhDLFtcInNwbGl0VGV4dFwiLFwiZGVsZXRlRGF0YVwiLFwiaW5zZXJ0RGF0YVwiLFwiYXBwZW5kRGF0YVwiLFwiY2xvbmVOb2RlXCJdfHwhQS5hcmVIb3N0T2JqZWN0cyhCLFtcInByZXZpb3VzU2libGluZ1wiLFwibmV4dFNpYmxpbmdcIixcImNoaWxkTm9kZXNcIixcInBhcmVudE5vZGVcIl0pfHwhQS5hcmVIb3N0UHJvcGVydGllcyhDLFtcImRhdGFcIl0pKXx8Yi5mYWlsKFwiSW5jb21wbGV0ZSBUZXh0IE5vZGUgaW1wbGVtZW50YXRpb25cIik7dmFyIEQ9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YS5sZW5ndGg7Yy0tOylpZihhW2NdPT09YilyZXR1cm4hMDtyZXR1cm4hMX07di5wcm90b3R5cGU9e19jdXJyZW50Om51bGwsaGFzTmV4dDpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5fbmV4dH0sbmV4dDpmdW5jdGlvbigpe3ZhciBhLGIsYz10aGlzLl9jdXJyZW50PXRoaXMuX25leHQ7aWYodGhpcy5fY3VycmVudClpZihhPWMuZmlyc3RDaGlsZCl0aGlzLl9uZXh0PWE7ZWxzZXtmb3IoYj1udWxsO2MhPT10aGlzLnJvb3QmJiEoYj1jLm5leHRTaWJsaW5nKTspYz1jLnBhcmVudE5vZGU7dGhpcy5fbmV4dD1ifXJldHVybiB0aGlzLl9jdXJyZW50fSxkZXRhY2g6ZnVuY3Rpb24oKXt0aGlzLl9jdXJyZW50PXRoaXMuX25leHQ9dGhpcy5yb290PW51bGx9fSx4LnByb3RvdHlwZT17ZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vZGU9PT1hLm5vZGUmdGhpcy5vZmZzZXQ9PWEub2Zmc2V0fSxpbnNwZWN0OmZ1bmN0aW9uKCl7cmV0dXJuXCJbRG9tUG9zaXRpb24oXCIrdSh0aGlzLm5vZGUpK1wiOlwiK3RoaXMub2Zmc2V0K1wiKV1cIn19LHkucHJvdG90eXBlPXtJTkRFWF9TSVpFX0VSUjoxLEhJRVJBUkNIWV9SRVFVRVNUX0VSUjozLFdST05HX0RPQ1VNRU5UX0VSUjo0LE5PX01PRElGSUNBVElPTl9BTExPV0VEX0VSUjo3LE5PVF9GT1VORF9FUlI6OCxOT1RfU1VQUE9SVEVEX0VSUjo5LElOVkFMSURfU1RBVEVfRVJSOjExfSx5LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1lc3NhZ2V9LGEuZG9tPXthcnJheUNvbnRhaW5zOkQsaXNIdG1sTmFtZXNwYWNlOmMscGFyZW50RWxlbWVudDpkLGdldE5vZGVJbmRleDplLGdldE5vZGVMZW5ndGg6ZixnZXRDb21tb25BbmNlc3RvcjpnLGlzQW5jZXN0b3JPZjpoLGdldENsb3Nlc3RBbmNlc3RvckluOmksaXNDaGFyYWN0ZXJEYXRhTm9kZTpqLGluc2VydEFmdGVyOmssc3BsaXREYXRhTm9kZTpsLGdldERvY3VtZW50Om0sZ2V0V2luZG93Om4sZ2V0SWZyYW1lV2luZG93OnAsZ2V0SWZyYW1lRG9jdW1lbnQ6byxnZXRCb2R5OnEsZ2V0Um9vdENvbnRhaW5lcjpyLGNvbXBhcmVQb2ludHM6cyxpbnNwZWN0Tm9kZTp1LGZyYWdtZW50RnJvbU5vZGVDaGlsZHJlbjp0LGNyZWF0ZUl0ZXJhdG9yOncsRG9tUG9zaXRpb246eH0sYS5ET01FeGNlcHRpb249eX0pLHJhbmd5LmNyZWF0ZU1vZHVsZShcIkRvbVJhbmdlXCIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiAzIT1hLm5vZGVUeXBlJiYoTC5pc0FuY2VzdG9yT2YoYSxiLnN0YXJ0Q29udGFpbmVyLCEwKXx8TC5pc0FuY2VzdG9yT2YoYSxiLmVuZENvbnRhaW5lciwhMCkpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIEwuZ2V0RG9jdW1lbnQoYS5zdGFydENvbnRhaW5lcil9ZnVuY3Rpb24gZChhLGIsYyl7dmFyIGQ9YS5fbGlzdGVuZXJzW2JdO2lmKGQpZm9yKHZhciBlPTAsZj1kLmxlbmd0aDtmPmU7KytlKWRbZV0uY2FsbChhLHt0YXJnZXQ6YSxhcmdzOmN9KX1mdW5jdGlvbiBlKGEpe3JldHVybiBuZXcgTShhLnBhcmVudE5vZGUsTC5nZXROb2RlSW5kZXgoYSkpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIG5ldyBNKGEucGFyZW50Tm9kZSxMLmdldE5vZGVJbmRleChhKSsxKX1mdW5jdGlvbiBnKGEsYixjKXt2YXIgZD0xMT09YS5ub2RlVHlwZT9hLmZpcnN0Q2hpbGQ6YTtyZXR1cm4gTC5pc0NoYXJhY3RlckRhdGFOb2RlKGIpP2M9PWIubGVuZ3RoP0wuaW5zZXJ0QWZ0ZXIoYSxiKTpiLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsMD09Yz9iOkwuc3BsaXREYXRhTm9kZShiLGMpKTpjPj1iLmNoaWxkTm9kZXMubGVuZ3RoP2IuYXBwZW5kQ2hpbGQoYSk6Yi5pbnNlcnRCZWZvcmUoYSxiLmNoaWxkTm9kZXNbY10pLGR9ZnVuY3Rpb24gaChhKXtmb3IodmFyIGIsZCxlLGY9YyhhLnJhbmdlKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7ZD1hLm5leHQoKTspe2lmKGI9YS5pc1BhcnRpYWxseVNlbGVjdGVkU3VidHJlZSgpLGQ9ZC5jbG9uZU5vZGUoIWIpLGImJihlPWEuZ2V0U3VidHJlZUl0ZXJhdG9yKCksZC5hcHBlbmRDaGlsZChoKGUpKSxlLmRldGFjaCghMCkpLDEwPT1kLm5vZGVUeXBlKXRocm93IG5ldyBOKFwiSElFUkFSQ0hZX1JFUVVFU1RfRVJSXCIpO2YuYXBwZW5kQ2hpbGQoZCl9cmV0dXJuIGZ9ZnVuY3Rpb24gaShhLGIsYyl7dmFyIGQsZTtjPWN8fHtzdG9wOiExfTtmb3IodmFyIGYsZztmPWEubmV4dCgpOylpZihhLmlzUGFydGlhbGx5U2VsZWN0ZWRTdWJ0cmVlKCkpe2lmKGIoZik9PT0hMSlyZXR1cm4gdm9pZChjLnN0b3A9ITApO2lmKGc9YS5nZXRTdWJ0cmVlSXRlcmF0b3IoKSxpKGcsYixjKSxnLmRldGFjaCghMCksYy5zdG9wKXJldHVybn1lbHNlIGZvcihkPUwuY3JlYXRlSXRlcmF0b3IoZik7ZT1kLm5leHQoKTspaWYoYihlKT09PSExKXJldHVybiB2b2lkKGMuc3RvcD0hMCl9ZnVuY3Rpb24gaihhKXtmb3IodmFyIGI7YS5uZXh0KCk7KWEuaXNQYXJ0aWFsbHlTZWxlY3RlZFN1YnRyZWUoKT8oYj1hLmdldFN1YnRyZWVJdGVyYXRvcigpLGooYiksYi5kZXRhY2goITApKTphLnJlbW92ZSgpfWZ1bmN0aW9uIGsoYSl7Zm9yKHZhciBiLGQsZT1jKGEucmFuZ2UpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtiPWEubmV4dCgpOyl7aWYoYS5pc1BhcnRpYWxseVNlbGVjdGVkU3VidHJlZSgpPyhiPWIuY2xvbmVOb2RlKCExKSxkPWEuZ2V0U3VidHJlZUl0ZXJhdG9yKCksYi5hcHBlbmRDaGlsZChrKGQpKSxkLmRldGFjaCghMCkpOmEucmVtb3ZlKCksMTA9PWIubm9kZVR5cGUpdGhyb3cgbmV3IE4oXCJISUVSQVJDSFlfUkVRVUVTVF9FUlJcIik7ZS5hcHBlbmRDaGlsZChiKX1yZXR1cm4gZX1mdW5jdGlvbiBsKGEsYixjKXt2YXIgZCxlPSEoIWJ8fCFiLmxlbmd0aCksZj0hIWM7ZSYmKGQ9bmV3IFJlZ0V4cChcIl4oXCIrYi5qb2luKFwifFwiKStcIikkXCIpKTt2YXIgZz1bXTtyZXR1cm4gaShuZXcgbihhLCExKSxmdW5jdGlvbihhKXtlJiYhZC50ZXN0KGEubm9kZVR5cGUpfHxmJiYhYyhhKXx8Zy5wdXNoKGEpfSksZ31mdW5jdGlvbiBtKGEpe3ZhciBiPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBhLmdldE5hbWU/XCJSYW5nZVwiOmEuZ2V0TmFtZSgpO3JldHVyblwiW1wiK2IrXCIoXCIrTC5pbnNwZWN0Tm9kZShhLnN0YXJ0Q29udGFpbmVyKStcIjpcIithLnN0YXJ0T2Zmc2V0K1wiLCBcIitMLmluc3BlY3ROb2RlKGEuZW5kQ29udGFpbmVyKStcIjpcIithLmVuZE9mZnNldCtcIildXCJ9ZnVuY3Rpb24gbihhLGIpe2lmKHRoaXMucmFuZ2U9YSx0aGlzLmNsb25lUGFydGlhbGx5U2VsZWN0ZWRUZXh0Tm9kZXM9YiwhYS5jb2xsYXBzZWQpe3RoaXMuc2M9YS5zdGFydENvbnRhaW5lcix0aGlzLnNvPWEuc3RhcnRPZmZzZXQsdGhpcy5lYz1hLmVuZENvbnRhaW5lcix0aGlzLmVvPWEuZW5kT2Zmc2V0O3ZhciBjPWEuY29tbW9uQW5jZXN0b3JDb250YWluZXI7dGhpcy5zYz09PXRoaXMuZWMmJkwuaXNDaGFyYWN0ZXJEYXRhTm9kZSh0aGlzLnNjKT8odGhpcy5pc1NpbmdsZUNoYXJhY3RlckRhdGFOb2RlPSEwLHRoaXMuX2ZpcnN0PXRoaXMuX2xhc3Q9dGhpcy5fbmV4dD10aGlzLnNjKToodGhpcy5fZmlyc3Q9dGhpcy5fbmV4dD10aGlzLnNjIT09Y3x8TC5pc0NoYXJhY3RlckRhdGFOb2RlKHRoaXMuc2MpP0wuZ2V0Q2xvc2VzdEFuY2VzdG9ySW4odGhpcy5zYyxjLCEwKTp0aGlzLnNjLmNoaWxkTm9kZXNbdGhpcy5zb10sdGhpcy5fbGFzdD10aGlzLmVjIT09Y3x8TC5pc0NoYXJhY3RlckRhdGFOb2RlKHRoaXMuZWMpP0wuZ2V0Q2xvc2VzdEFuY2VzdG9ySW4odGhpcy5lYyxjLCEwKTp0aGlzLmVjLmNoaWxkTm9kZXNbdGhpcy5lby0xXSl9fWZ1bmN0aW9uIG8oYSl7dGhpcy5jb2RlPXRoaXNbYV0sdGhpcy5jb2RlTmFtZT1hLHRoaXMubWVzc2FnZT1cIlJhbmdlRXhjZXB0aW9uOiBcIit0aGlzLmNvZGVOYW1lfWZ1bmN0aW9uIHAoYSxiLGMpe3RoaXMubm9kZXM9bChhLGIsYyksdGhpcy5fbmV4dD10aGlzLm5vZGVzWzBdLHRoaXMuX3Bvc2l0aW9uPTB9ZnVuY3Rpb24gcShhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtmb3IodmFyIGQsZT1jP2I6Yi5wYXJlbnROb2RlO2U7KXtpZihkPWUubm9kZVR5cGUsTC5hcnJheUNvbnRhaW5zKGEsZCkpcmV0dXJuIGU7ZT1lLnBhcmVudE5vZGV9cmV0dXJuIG51bGx9fWZ1bmN0aW9uIHIoYSxiKXtpZihXKGEsYikpdGhyb3cgbmV3IG8oXCJJTlZBTElEX05PREVfVFlQRV9FUlJcIil9ZnVuY3Rpb24gcyhhKXtpZighYS5zdGFydENvbnRhaW5lcil0aHJvdyBuZXcgTihcIklOVkFMSURfU1RBVEVfRVJSXCIpfWZ1bmN0aW9uIHQoYSxiKXtpZighTC5hcnJheUNvbnRhaW5zKGIsYS5ub2RlVHlwZSkpdGhyb3cgbmV3IG8oXCJJTlZBTElEX05PREVfVFlQRV9FUlJcIil9ZnVuY3Rpb24gdShhLGIpe2lmKDA+Ynx8Yj4oTC5pc0NoYXJhY3RlckRhdGFOb2RlKGEpP2EubGVuZ3RoOmEuY2hpbGROb2Rlcy5sZW5ndGgpKXRocm93IG5ldyBOKFwiSU5ERVhfU0laRV9FUlJcIil9ZnVuY3Rpb24gdihhLGIpe2lmKFUoYSwhMCkhPT1VKGIsITApKXRocm93IG5ldyBOKFwiV1JPTkdfRE9DVU1FTlRfRVJSXCIpfWZ1bmN0aW9uIHcoYSl7aWYoVihhLCEwKSl0aHJvdyBuZXcgTihcIk5PX01PRElGSUNBVElPTl9BTExPV0VEX0VSUlwiKX1mdW5jdGlvbiB4KGEsYil7aWYoIWEpdGhyb3cgbmV3IE4oYil9ZnVuY3Rpb24geShhKXtyZXR1cm4hTC5hcnJheUNvbnRhaW5zKFAsYS5ub2RlVHlwZSkmJiFVKGEsITApfWZ1bmN0aW9uIHooYSxiKXtyZXR1cm4gYjw9KEwuaXNDaGFyYWN0ZXJEYXRhTm9kZShhKT9hLmxlbmd0aDphLmNoaWxkTm9kZXMubGVuZ3RoKX1mdW5jdGlvbiBBKGEpe3JldHVybiEhYS5zdGFydENvbnRhaW5lciYmISFhLmVuZENvbnRhaW5lciYmIXkoYS5zdGFydENvbnRhaW5lcikmJiF5KGEuZW5kQ29udGFpbmVyKSYmeihhLnN0YXJ0Q29udGFpbmVyLGEuc3RhcnRPZmZzZXQpJiZ6KGEuZW5kQ29udGFpbmVyLGEuZW5kT2Zmc2V0KX1mdW5jdGlvbiBCKGEpe2lmKHMoYSksIUEoYSkpdGhyb3cgbmV3IEVycm9yKFwiUmFuZ2UgZXJyb3I6IFJhbmdlIGlzIG5vIGxvbmdlciB2YWxpZCBhZnRlciBET00gbXV0YXRpb24gKFwiK2EuaW5zcGVjdCgpK1wiKVwiKX1mdW5jdGlvbiBDKCl7fWZ1bmN0aW9uIEQoYSl7YS5TVEFSVF9UT19TVEFSVD1hYixhLlNUQVJUX1RPX0VORD1iYixhLkVORF9UT19FTkQ9Y2IsYS5FTkRfVE9fU1RBUlQ9ZGIsYS5OT0RFX0JFRk9SRT1lYixhLk5PREVfQUZURVI9ZmIsYS5OT0RFX0JFRk9SRV9BTkRfQUZURVI9Z2IsYS5OT0RFX0lOU0lERT1oYn1mdW5jdGlvbiBFKGEpe0QoYSksRChhLnByb3RvdHlwZSl9ZnVuY3Rpb24gRihhLGIpe3JldHVybiBmdW5jdGlvbigpe0IodGhpcyk7dmFyIGMsZCxlPXRoaXMuc3RhcnRDb250YWluZXIsZz10aGlzLnN0YXJ0T2Zmc2V0LGg9dGhpcy5jb21tb25BbmNlc3RvckNvbnRhaW5lcixqPW5ldyBuKHRoaXMsITApO2UhPT1oJiYoYz1MLmdldENsb3Nlc3RBbmNlc3RvckluKGUsaCwhMCksZD1mKGMpLGU9ZC5ub2RlLGc9ZC5vZmZzZXQpLGkoaix3KSxqLnJlc2V0KCk7dmFyIGs9YShqKTtyZXR1cm4gai5kZXRhY2goKSxiKHRoaXMsZSxnLGUsZyksa319ZnVuY3Rpb24gRyhjLGQsZyl7ZnVuY3Rpb24gaChhLGIpe3JldHVybiBmdW5jdGlvbihjKXtzKHRoaXMpLHQoYyxPKSx0KFQoYyksUCk7dmFyIGQ9KGE/ZTpmKShjKTsoYj9pOmwpKHRoaXMsZC5ub2RlLGQub2Zmc2V0KX19ZnVuY3Rpb24gaShhLGIsYyl7dmFyIGU9YS5lbmRDb250YWluZXIsZj1hLmVuZE9mZnNldDsoYiE9PWEuc3RhcnRDb250YWluZXJ8fGMhPT1hLnN0YXJ0T2Zmc2V0KSYmKChUKGIpIT1UKGUpfHwxPT1MLmNvbXBhcmVQb2ludHMoYixjLGUsZikpJiYoZT1iLGY9YyksZChhLGIsYyxlLGYpKX1mdW5jdGlvbiBsKGEsYixjKXt2YXIgZT1hLnN0YXJ0Q29udGFpbmVyLGY9YS5zdGFydE9mZnNldDsoYiE9PWEuZW5kQ29udGFpbmVyfHxjIT09YS5lbmRPZmZzZXQpJiYoKFQoYikhPVQoZSl8fC0xPT1MLmNvbXBhcmVQb2ludHMoYixjLGUsZikpJiYoZT1iLGY9YyksZChhLGUsZixiLGMpKX1mdW5jdGlvbiBtKGEsYixjKXsoYiE9PWEuc3RhcnRDb250YWluZXJ8fGMhPT1hLnN0YXJ0T2Zmc2V0fHxiIT09YS5lbmRDb250YWluZXJ8fGMhPT1hLmVuZE9mZnNldCkmJmQoYSxiLGMsYixjKX1jLnByb3RvdHlwZT1uZXcgQyxhLnV0aWwuZXh0ZW5kKGMucHJvdG90eXBlLHtzZXRTdGFydDpmdW5jdGlvbihhLGIpe3ModGhpcykscihhLCEwKSx1KGEsYiksaSh0aGlzLGEsYil9LHNldEVuZDpmdW5jdGlvbihhLGIpe3ModGhpcykscihhLCEwKSx1KGEsYiksbCh0aGlzLGEsYil9LHNldFN0YXJ0QmVmb3JlOmgoITAsITApLHNldFN0YXJ0QWZ0ZXI6aCghMSwhMCksc2V0RW5kQmVmb3JlOmgoITAsITEpLHNldEVuZEFmdGVyOmgoITEsITEpLGNvbGxhcHNlOmZ1bmN0aW9uKGEpe0IodGhpcyksYT9kKHRoaXMsdGhpcy5zdGFydENvbnRhaW5lcix0aGlzLnN0YXJ0T2Zmc2V0LHRoaXMuc3RhcnRDb250YWluZXIsdGhpcy5zdGFydE9mZnNldCk6ZCh0aGlzLHRoaXMuZW5kQ29udGFpbmVyLHRoaXMuZW5kT2Zmc2V0LHRoaXMuZW5kQ29udGFpbmVyLHRoaXMuZW5kT2Zmc2V0KX0sc2VsZWN0Tm9kZUNvbnRlbnRzOmZ1bmN0aW9uKGEpe3ModGhpcykscihhLCEwKSxkKHRoaXMsYSwwLGEsTC5nZXROb2RlTGVuZ3RoKGEpKX0sc2VsZWN0Tm9kZTpmdW5jdGlvbihhKXtzKHRoaXMpLHIoYSwhMSksdChhLE8pO3ZhciBiPWUoYSksYz1mKGEpO2QodGhpcyxiLm5vZGUsYi5vZmZzZXQsYy5ub2RlLGMub2Zmc2V0KX0sZXh0cmFjdENvbnRlbnRzOkYoayxkKSxkZWxldGVDb250ZW50czpGKGosZCksY2FuU3Vycm91bmRDb250ZW50czpmdW5jdGlvbigpe0IodGhpcyksdyh0aGlzLnN0YXJ0Q29udGFpbmVyKSx3KHRoaXMuZW5kQ29udGFpbmVyKTt2YXIgYT1uZXcgbih0aGlzLCEwKSxjPWEuX2ZpcnN0JiZiKGEuX2ZpcnN0LHRoaXMpfHxhLl9sYXN0JiZiKGEuX2xhc3QsdGhpcyk7cmV0dXJuIGEuZGV0YWNoKCksIWN9LGRldGFjaDpmdW5jdGlvbigpe2codGhpcyl9LHNwbGl0Qm91bmRhcmllczpmdW5jdGlvbigpe0IodGhpcyk7dmFyIGE9dGhpcy5zdGFydENvbnRhaW5lcixiPXRoaXMuc3RhcnRPZmZzZXQsYz10aGlzLmVuZENvbnRhaW5lcixlPXRoaXMuZW5kT2Zmc2V0LGY9YT09PWM7TC5pc0NoYXJhY3RlckRhdGFOb2RlKGMpJiZlPjAmJmU8Yy5sZW5ndGgmJkwuc3BsaXREYXRhTm9kZShjLGUpLEwuaXNDaGFyYWN0ZXJEYXRhTm9kZShhKSYmYj4wJiZiPGEubGVuZ3RoJiYoYT1MLnNwbGl0RGF0YU5vZGUoYSxiKSxmPyhlLT1iLGM9YSk6Yz09YS5wYXJlbnROb2RlJiZlPj1MLmdldE5vZGVJbmRleChhKSYmZSsrLGI9MCksZCh0aGlzLGEsYixjLGUpfSxub3JtYWxpemVCb3VuZGFyaWVzOmZ1bmN0aW9uKCl7Qih0aGlzKTt2YXIgYT10aGlzLnN0YXJ0Q29udGFpbmVyLGI9dGhpcy5zdGFydE9mZnNldCxjPXRoaXMuZW5kQ29udGFpbmVyLGU9dGhpcy5lbmRPZmZzZXQsZj1mdW5jdGlvbihhKXt2YXIgYj1hLm5leHRTaWJsaW5nO2ImJmIubm9kZVR5cGU9PWEubm9kZVR5cGUmJihjPWEsZT1hLmxlbmd0aCxhLmFwcGVuZERhdGEoYi5kYXRhKSxiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYikpfSxnPWZ1bmN0aW9uKGQpe3ZhciBmPWQucHJldmlvdXNTaWJsaW5nO2lmKGYmJmYubm9kZVR5cGU9PWQubm9kZVR5cGUpe2E9ZDt2YXIgZz1kLmxlbmd0aDtpZihiPWYubGVuZ3RoLGQuaW5zZXJ0RGF0YSgwLGYuZGF0YSksZi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGYpLGE9PWMpZSs9YixjPWE7ZWxzZSBpZihjPT1kLnBhcmVudE5vZGUpe3ZhciBoPUwuZ2V0Tm9kZUluZGV4KGQpO2U9PWg/KGM9ZCxlPWcpOmU+aCYmZS0tfX19LGg9ITA7aWYoTC5pc0NoYXJhY3RlckRhdGFOb2RlKGMpKWMubGVuZ3RoPT1lJiZmKGMpO2Vsc2V7aWYoZT4wKXt2YXIgaT1jLmNoaWxkTm9kZXNbZS0xXTtpJiZMLmlzQ2hhcmFjdGVyRGF0YU5vZGUoaSkmJmYoaSl9aD0hdGhpcy5jb2xsYXBzZWR9aWYoaCl7aWYoTC5pc0NoYXJhY3RlckRhdGFOb2RlKGEpKTA9PWImJmcoYSk7ZWxzZSBpZihiPGEuY2hpbGROb2Rlcy5sZW5ndGgpe3ZhciBqPWEuY2hpbGROb2Rlc1tiXTtqJiZMLmlzQ2hhcmFjdGVyRGF0YU5vZGUoaikmJmcoail9fWVsc2UgYT1jLGI9ZTtkKHRoaXMsYSxiLGMsZSl9LGNvbGxhcHNlVG9Qb2ludDpmdW5jdGlvbihhLGIpe3ModGhpcykscihhLCEwKSx1KGEsYiksbSh0aGlzLGEsYil9fSksRShjKX1mdW5jdGlvbiBIKGEpe2EuY29sbGFwc2VkPWEuc3RhcnRDb250YWluZXI9PT1hLmVuZENvbnRhaW5lciYmYS5zdGFydE9mZnNldD09PWEuZW5kT2Zmc2V0LGEuY29tbW9uQW5jZXN0b3JDb250YWluZXI9YS5jb2xsYXBzZWQ/YS5zdGFydENvbnRhaW5lcjpMLmdldENvbW1vbkFuY2VzdG9yKGEuc3RhcnRDb250YWluZXIsYS5lbmRDb250YWluZXIpfWZ1bmN0aW9uIEkoYSxiLGMsZSxmKXt2YXIgZz1hLnN0YXJ0Q29udGFpbmVyIT09Ynx8YS5zdGFydE9mZnNldCE9PWMsaD1hLmVuZENvbnRhaW5lciE9PWV8fGEuZW5kT2Zmc2V0IT09ZjthLnN0YXJ0Q29udGFpbmVyPWIsYS5zdGFydE9mZnNldD1jLGEuZW5kQ29udGFpbmVyPWUsYS5lbmRPZmZzZXQ9ZixIKGEpLGQoYSxcImJvdW5kYXJ5Y2hhbmdlXCIse3N0YXJ0TW92ZWQ6ZyxlbmRNb3ZlZDpofSl9ZnVuY3Rpb24gSihhKXtzKGEpLGEuc3RhcnRDb250YWluZXI9YS5zdGFydE9mZnNldD1hLmVuZENvbnRhaW5lcj1hLmVuZE9mZnNldD1udWxsLGEuY29sbGFwc2VkPWEuY29tbW9uQW5jZXN0b3JDb250YWluZXI9bnVsbCxkKGEsXCJkZXRhY2hcIixudWxsKSxhLl9saXN0ZW5lcnM9bnVsbH1mdW5jdGlvbiBLKGEpe3RoaXMuc3RhcnRDb250YWluZXI9YSx0aGlzLnN0YXJ0T2Zmc2V0PTAsdGhpcy5lbmRDb250YWluZXI9YSx0aGlzLmVuZE9mZnNldD0wLHRoaXMuX2xpc3RlbmVycz17Ym91bmRhcnljaGFuZ2U6W10sZGV0YWNoOltdfSxIKHRoaXMpfWEucmVxdWlyZU1vZHVsZXMoW1wiRG9tVXRpbFwiXSk7dmFyIEw9YS5kb20sTT1MLkRvbVBvc2l0aW9uLE49YS5ET01FeGNlcHRpb247bi5wcm90b3R5cGU9e19jdXJyZW50Om51bGwsX25leHQ6bnVsbCxfZmlyc3Q6bnVsbCxfbGFzdDpudWxsLGlzU2luZ2xlQ2hhcmFjdGVyRGF0YU5vZGU6ITEscmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9jdXJyZW50PW51bGwsdGhpcy5fbmV4dD10aGlzLl9maXJzdH0saGFzTmV4dDpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5fbmV4dH0sbmV4dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2N1cnJlbnQ9dGhpcy5fbmV4dDtyZXR1cm4gYSYmKHRoaXMuX25leHQ9YSE9PXRoaXMuX2xhc3Q/YS5uZXh0U2libGluZzpudWxsLEwuaXNDaGFyYWN0ZXJEYXRhTm9kZShhKSYmdGhpcy5jbG9uZVBhcnRpYWxseVNlbGVjdGVkVGV4dE5vZGVzJiYoYT09PXRoaXMuZWMmJihhPWEuY2xvbmVOb2RlKCEwKSkuZGVsZXRlRGF0YSh0aGlzLmVvLGEubGVuZ3RoLXRoaXMuZW8pLHRoaXMuX2N1cnJlbnQ9PT10aGlzLnNjJiYoYT1hLmNsb25lTm9kZSghMCkpLmRlbGV0ZURhdGEoMCx0aGlzLnNvKSkpLGF9LHJlbW92ZTpmdW5jdGlvbigpe3ZhciBhLGIsYz10aGlzLl9jdXJyZW50OyFMLmlzQ2hhcmFjdGVyRGF0YU5vZGUoYyl8fGMhPT10aGlzLnNjJiZjIT09dGhpcy5lYz9jLnBhcmVudE5vZGUmJmMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKTooYT1jPT09dGhpcy5zYz90aGlzLnNvOjAsYj1jPT09dGhpcy5lYz90aGlzLmVvOmMubGVuZ3RoLGEhPWImJmMuZGVsZXRlRGF0YShhLGItYSkpfSxpc1BhcnRpYWxseVNlbGVjdGVkU3VidHJlZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2N1cnJlbnQ7cmV0dXJuIGIoYSx0aGlzLnJhbmdlKX0sZ2V0U3VidHJlZUl0ZXJhdG9yOmZ1bmN0aW9uKCl7dmFyIGE7aWYodGhpcy5pc1NpbmdsZUNoYXJhY3RlckRhdGFOb2RlKWE9dGhpcy5yYW5nZS5jbG9uZVJhbmdlKCksYS5jb2xsYXBzZSgpO2Vsc2V7YT1uZXcgSyhjKHRoaXMucmFuZ2UpKTt2YXIgYj10aGlzLl9jdXJyZW50LGQ9YixlPTAsZj1iLGc9TC5nZXROb2RlTGVuZ3RoKGIpO0wuaXNBbmNlc3Rvck9mKGIsdGhpcy5zYywhMCkmJihkPXRoaXMuc2MsZT10aGlzLnNvKSxMLmlzQW5jZXN0b3JPZihiLHRoaXMuZWMsITApJiYoZj10aGlzLmVjLGc9dGhpcy5lbyksSShhLGQsZSxmLGcpfXJldHVybiBuZXcgbihhLHRoaXMuY2xvbmVQYXJ0aWFsbHlTZWxlY3RlZFRleHROb2Rlcyl9LGRldGFjaDpmdW5jdGlvbihhKXthJiZ0aGlzLnJhbmdlLmRldGFjaCgpLHRoaXMucmFuZ2U9dGhpcy5fY3VycmVudD10aGlzLl9uZXh0PXRoaXMuX2ZpcnN0PXRoaXMuX2xhc3Q9dGhpcy5zYz10aGlzLnNvPXRoaXMuZWM9dGhpcy5lbz1udWxsfX0sby5wcm90b3R5cGU9e0JBRF9CT1VOREFSWVBPSU5UU19FUlI6MSxJTlZBTElEX05PREVfVFlQRV9FUlI6Mn0sby5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tZXNzYWdlfSxwLnByb3RvdHlwZT17X2N1cnJlbnQ6bnVsbCxoYXNOZXh0OmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9uZXh0fSxuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnQ9dGhpcy5fbmV4dCx0aGlzLl9uZXh0PXRoaXMubm9kZXNbKyt0aGlzLl9wb3NpdGlvbl0sdGhpcy5fY3VycmVudH0sZGV0YWNoOmZ1bmN0aW9uKCl7dGhpcy5fY3VycmVudD10aGlzLl9uZXh0PXRoaXMubm9kZXM9bnVsbH19O3ZhciBPPVsxLDMsNCw1LDcsOCwxMF0sUD1bMiw5LDExXSxRPVs1LDYsMTAsMTJdLFI9WzEsMyw0LDUsNyw4LDEwLDExXSxTPVsxLDMsNCw1LDcsOF0sVD1MLmdldFJvb3RDb250YWluZXIsVT1xKFs5LDExXSksVj1xKFEpLFc9cShbNiwxMCwxMl0pLFg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpLFk9ITE7dHJ5e1guaW5uZXJIVE1MPVwiPGI+eDwvYj5cIixZPTM9PVguZmlyc3RDaGlsZC5ub2RlVHlwZX1jYXRjaChaKXt9YS5mZWF0dXJlcy5odG1sUGFyc2luZ0NvbmZvcm1zPVk7dmFyICQ9WT9mdW5jdGlvbihhKXt2YXIgYj10aGlzLnN0YXJ0Q29udGFpbmVyLGM9TC5nZXREb2N1bWVudChiKTtpZighYil0aHJvdyBuZXcgTihcIklOVkFMSURfU1RBVEVfRVJSXCIpO3ZhciBkPW51bGw7cmV0dXJuIDE9PWIubm9kZVR5cGU/ZD1iOkwuaXNDaGFyYWN0ZXJEYXRhTm9kZShiKSYmKGQ9TC5wYXJlbnRFbGVtZW50KGIpKSxkPW51bGw9PT1kfHxcIkhUTUxcIj09ZC5ub2RlTmFtZSYmTC5pc0h0bWxOYW1lc3BhY2UoTC5nZXREb2N1bWVudChkKS5kb2N1bWVudEVsZW1lbnQpJiZMLmlzSHRtbE5hbWVzcGFjZShkKT9jLmNyZWF0ZUVsZW1lbnQoXCJib2R5XCIpOmQuY2xvbmVOb2RlKCExKSxkLmlubmVySFRNTD1hLEwuZnJhZ21lbnRGcm9tTm9kZUNoaWxkcmVuKGQpfTpmdW5jdGlvbihhKXtzKHRoaXMpO3ZhciBiPWModGhpcyksZD1iLmNyZWF0ZUVsZW1lbnQoXCJib2R5XCIpO3JldHVybiBkLmlubmVySFRNTD1hLEwuZnJhZ21lbnRGcm9tTm9kZUNoaWxkcmVuKGQpfSxfPVtcInN0YXJ0Q29udGFpbmVyXCIsXCJzdGFydE9mZnNldFwiLFwiZW5kQ29udGFpbmVyXCIsXCJlbmRPZmZzZXRcIixcImNvbGxhcHNlZFwiLFwiY29tbW9uQW5jZXN0b3JDb250YWluZXJcIl0sYWI9MCxiYj0xLGNiPTIsZGI9MyxlYj0wLGZiPTEsZ2I9MixoYj0zO0MucHJvdG90eXBlPXthdHRhY2hMaXN0ZW5lcjpmdW5jdGlvbihhLGIpe3RoaXMuX2xpc3RlbmVyc1thXS5wdXNoKGIpfSxjb21wYXJlQm91bmRhcnlQb2ludHM6ZnVuY3Rpb24oYSxiKXtCKHRoaXMpLHYodGhpcy5zdGFydENvbnRhaW5lcixiLnN0YXJ0Q29udGFpbmVyKTt2YXIgYyxkLGUsZixnPWE9PWRifHxhPT1hYj9cInN0YXJ0XCI6XCJlbmRcIixoPWE9PWJifHxhPT1hYj9cInN0YXJ0XCI6XCJlbmRcIjtyZXR1cm4gYz10aGlzW2crXCJDb250YWluZXJcIl0sZD10aGlzW2crXCJPZmZzZXRcIl0sZT1iW2grXCJDb250YWluZXJcIl0sZj1iW2grXCJPZmZzZXRcIl0sTC5jb21wYXJlUG9pbnRzKGMsZCxlLGYpfSxpbnNlcnROb2RlOmZ1bmN0aW9uKGEpe2lmKEIodGhpcyksdChhLFIpLHcodGhpcy5zdGFydENvbnRhaW5lciksTC5pc0FuY2VzdG9yT2YoYSx0aGlzLnN0YXJ0Q29udGFpbmVyLCEwKSl0aHJvdyBuZXcgTihcIkhJRVJBUkNIWV9SRVFVRVNUX0VSUlwiKTt2YXIgYj1nKGEsdGhpcy5zdGFydENvbnRhaW5lcix0aGlzLnN0YXJ0T2Zmc2V0KTt0aGlzLnNldFN0YXJ0QmVmb3JlKGIpfSxjbG9uZUNvbnRlbnRzOmZ1bmN0aW9uKCl7Qih0aGlzKTt2YXIgYSxiO2lmKHRoaXMuY29sbGFwc2VkKXJldHVybiBjKHRoaXMpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZih0aGlzLnN0YXJ0Q29udGFpbmVyPT09dGhpcy5lbmRDb250YWluZXImJkwuaXNDaGFyYWN0ZXJEYXRhTm9kZSh0aGlzLnN0YXJ0Q29udGFpbmVyKSlyZXR1cm4gYT10aGlzLnN0YXJ0Q29udGFpbmVyLmNsb25lTm9kZSghMCksYS5kYXRhPWEuZGF0YS5zbGljZSh0aGlzLnN0YXJ0T2Zmc2V0LHRoaXMuZW5kT2Zmc2V0KSxiPWModGhpcykuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGIuYXBwZW5kQ2hpbGQoYSksYjt2YXIgZD1uZXcgbih0aGlzLCEwKTtyZXR1cm4gYT1oKGQpLGQuZGV0YWNoKCksYX0sY2FuU3Vycm91bmRDb250ZW50czpmdW5jdGlvbigpe0IodGhpcyksdyh0aGlzLnN0YXJ0Q29udGFpbmVyKSx3KHRoaXMuZW5kQ29udGFpbmVyKTt2YXIgYT1uZXcgbih0aGlzLCEwKSxjPWEuX2ZpcnN0JiZiKGEuX2ZpcnN0LHRoaXMpfHxhLl9sYXN0JiZiKGEuX2xhc3QsdGhpcyk7cmV0dXJuIGEuZGV0YWNoKCksIWN9LHN1cnJvdW5kQ29udGVudHM6ZnVuY3Rpb24oYSl7aWYodChhLFMpLCF0aGlzLmNhblN1cnJvdW5kQ29udGVudHMoKSl0aHJvdyBuZXcgbyhcIkJBRF9CT1VOREFSWVBPSU5UU19FUlJcIik7dmFyIGI9dGhpcy5leHRyYWN0Q29udGVudHMoKTtpZihhLmhhc0NoaWxkTm9kZXMoKSlmb3IoO2EubGFzdENoaWxkOylhLnJlbW92ZUNoaWxkKGEubGFzdENoaWxkKTtnKGEsdGhpcy5zdGFydENvbnRhaW5lcix0aGlzLnN0YXJ0T2Zmc2V0KSxhLmFwcGVuZENoaWxkKGIpLHRoaXMuc2VsZWN0Tm9kZShhKX0sY2xvbmVSYW5nZTpmdW5jdGlvbigpe0IodGhpcyk7Zm9yKHZhciBhLGI9bmV3IEsoYyh0aGlzKSksZD1fLmxlbmd0aDtkLS07KWE9X1tkXSxiW2FdPXRoaXNbYV07cmV0dXJuIGJ9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7Qih0aGlzKTt2YXIgYT10aGlzLnN0YXJ0Q29udGFpbmVyO2lmKGE9PT10aGlzLmVuZENvbnRhaW5lciYmTC5pc0NoYXJhY3RlckRhdGFOb2RlKGEpKXJldHVybiAzPT1hLm5vZGVUeXBlfHw0PT1hLm5vZGVUeXBlP2EuZGF0YS5zbGljZSh0aGlzLnN0YXJ0T2Zmc2V0LHRoaXMuZW5kT2Zmc2V0KTpcIlwiO3ZhciBiPVtdLGM9bmV3IG4odGhpcywhMCk7cmV0dXJuIGkoYyxmdW5jdGlvbihhKXsoMz09YS5ub2RlVHlwZXx8ND09YS5ub2RlVHlwZSkmJmIucHVzaChhLmRhdGEpfSksYy5kZXRhY2goKSxiLmpvaW4oXCJcIil9LGNvbXBhcmVOb2RlOmZ1bmN0aW9uKGEpe0IodGhpcyk7dmFyIGI9YS5wYXJlbnROb2RlLGM9TC5nZXROb2RlSW5kZXgoYSk7aWYoIWIpdGhyb3cgbmV3IE4oXCJOT1RfRk9VTkRfRVJSXCIpO3ZhciBkPXRoaXMuY29tcGFyZVBvaW50KGIsYyksZT10aGlzLmNvbXBhcmVQb2ludChiLGMrMSk7cmV0dXJuIDA+ZD9lPjA/Z2I6ZWI6ZT4wP2ZiOmhifSxjb21wYXJlUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQih0aGlzKSx4KGEsXCJISUVSQVJDSFlfUkVRVUVTVF9FUlJcIiksdihhLHRoaXMuc3RhcnRDb250YWluZXIpLEwuY29tcGFyZVBvaW50cyhhLGIsdGhpcy5zdGFydENvbnRhaW5lcix0aGlzLnN0YXJ0T2Zmc2V0KTwwPy0xOkwuY29tcGFyZVBvaW50cyhhLGIsdGhpcy5lbmRDb250YWluZXIsdGhpcy5lbmRPZmZzZXQpPjA/MTowfSxjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQ6JCx0b0h0bWw6ZnVuY3Rpb24oKXtCKHRoaXMpO3ZhciBhPWModGhpcykuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gYS5hcHBlbmRDaGlsZCh0aGlzLmNsb25lQ29udGVudHMoKSksYS5pbm5lckhUTUx9LGludGVyc2VjdHNOb2RlOmZ1bmN0aW9uKGEsYil7aWYoQih0aGlzKSx4KGEsXCJOT1RfRk9VTkRfRVJSXCIpLEwuZ2V0RG9jdW1lbnQoYSkhPT1jKHRoaXMpKXJldHVybiExO3ZhciBkPWEucGFyZW50Tm9kZSxlPUwuZ2V0Tm9kZUluZGV4KGEpO3goZCxcIk5PVF9GT1VORF9FUlJcIik7dmFyIGY9TC5jb21wYXJlUG9pbnRzKGQsZSx0aGlzLmVuZENvbnRhaW5lcix0aGlzLmVuZE9mZnNldCksZz1MLmNvbXBhcmVQb2ludHMoZCxlKzEsdGhpcy5zdGFydENvbnRhaW5lcix0aGlzLnN0YXJ0T2Zmc2V0KTtyZXR1cm4gYj8wPj1mJiZnPj0wOjA+ZiYmZz4wfSxpc1BvaW50SW5SYW5nZTpmdW5jdGlvbihhLGIpe3JldHVybiBCKHRoaXMpLHgoYSxcIkhJRVJBUkNIWV9SRVFVRVNUX0VSUlwiKSx2KGEsdGhpcy5zdGFydENvbnRhaW5lciksTC5jb21wYXJlUG9pbnRzKGEsYix0aGlzLnN0YXJ0Q29udGFpbmVyLHRoaXMuc3RhcnRPZmZzZXQpPj0wJiZMLmNvbXBhcmVQb2ludHMoYSxiLHRoaXMuZW5kQ29udGFpbmVyLHRoaXMuZW5kT2Zmc2V0KTw9MH0saW50ZXJzZWN0c1JhbmdlOmZ1bmN0aW9uKGEsYil7aWYoQih0aGlzKSxjKGEpIT1jKHRoaXMpKXRocm93IG5ldyBOKFwiV1JPTkdfRE9DVU1FTlRfRVJSXCIpO3ZhciBkPUwuY29tcGFyZVBvaW50cyh0aGlzLnN0YXJ0Q29udGFpbmVyLHRoaXMuc3RhcnRPZmZzZXQsYS5lbmRDb250YWluZXIsYS5lbmRPZmZzZXQpLGU9TC5jb21wYXJlUG9pbnRzKHRoaXMuZW5kQ29udGFpbmVyLHRoaXMuZW5kT2Zmc2V0LGEuc3RhcnRDb250YWluZXIsYS5zdGFydE9mZnNldCk7cmV0dXJuIGI/MD49ZCYmZT49MDowPmQmJmU+MH0saW50ZXJzZWN0aW9uOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaW50ZXJzZWN0c1JhbmdlKGEpKXt2YXIgYj1MLmNvbXBhcmVQb2ludHModGhpcy5zdGFydENvbnRhaW5lcix0aGlzLnN0YXJ0T2Zmc2V0LGEuc3RhcnRDb250YWluZXIsYS5zdGFydE9mZnNldCksYz1MLmNvbXBhcmVQb2ludHModGhpcy5lbmRDb250YWluZXIsdGhpcy5lbmRPZmZzZXQsYS5lbmRDb250YWluZXIsYS5lbmRPZmZzZXQpLGQ9dGhpcy5jbG9uZVJhbmdlKCk7cmV0dXJuLTE9PWImJmQuc2V0U3RhcnQoYS5zdGFydENvbnRhaW5lcixhLnN0YXJ0T2Zmc2V0KSwxPT1jJiZkLnNldEVuZChhLmVuZENvbnRhaW5lcixhLmVuZE9mZnNldCksZH1yZXR1cm4gbnVsbH0sdW5pb246ZnVuY3Rpb24oYSl7aWYodGhpcy5pbnRlcnNlY3RzUmFuZ2UoYSwhMCkpe3ZhciBiPXRoaXMuY2xvbmVSYW5nZSgpO3JldHVybi0xPT1MLmNvbXBhcmVQb2ludHMoYS5zdGFydENvbnRhaW5lcixhLnN0YXJ0T2Zmc2V0LHRoaXMuc3RhcnRDb250YWluZXIsdGhpcy5zdGFydE9mZnNldCkmJmIuc2V0U3RhcnQoYS5zdGFydENvbnRhaW5lcixhLnN0YXJ0T2Zmc2V0KSwxPT1MLmNvbXBhcmVQb2ludHMoYS5lbmRDb250YWluZXIsYS5lbmRPZmZzZXQsdGhpcy5lbmRDb250YWluZXIsdGhpcy5lbmRPZmZzZXQpJiZiLnNldEVuZChhLmVuZENvbnRhaW5lcixhLmVuZE9mZnNldCksYn10aHJvdyBuZXcgbyhcIlJhbmdlcyBkbyBub3QgaW50ZXJzZWN0XCIpfSxjb250YWluc05vZGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj90aGlzLmludGVyc2VjdHNOb2RlKGEsITEpOnRoaXMuY29tcGFyZU5vZGUoYSk9PWhifSxjb250YWluc05vZGVDb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jb21wYXJlUG9pbnQoYSwwKT49MCYmdGhpcy5jb21wYXJlUG9pbnQoYSxMLmdldE5vZGVMZW5ndGgoYSkpPD0wfSxjb250YWluc1JhbmdlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmludGVyc2VjdGlvbihhKS5lcXVhbHMoYSl9LGNvbnRhaW5zTm9kZVRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jbG9uZVJhbmdlKCk7Yi5zZWxlY3ROb2RlKGEpO3ZhciBjPWIuZ2V0Tm9kZXMoWzNdKTtpZihjLmxlbmd0aD4wKXtiLnNldFN0YXJ0KGNbMF0sMCk7dmFyIGQ9Yy5wb3AoKTtiLnNldEVuZChkLGQubGVuZ3RoKTt2YXIgZT10aGlzLmNvbnRhaW5zUmFuZ2UoYik7cmV0dXJuIGIuZGV0YWNoKCksZX1yZXR1cm4gdGhpcy5jb250YWluc05vZGVDb250ZW50cyhhKX0sY3JlYXRlTm9kZUl0ZXJhdG9yOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEIodGhpcyksbmV3IHAodGhpcyxhLGIpfSxnZXROb2RlczpmdW5jdGlvbihhLGIpe3JldHVybiBCKHRoaXMpLGwodGhpcyxhLGIpfSxnZXREb2N1bWVudDpmdW5jdGlvbigpe3JldHVybiBjKHRoaXMpfSxjb2xsYXBzZUJlZm9yZTpmdW5jdGlvbihhKXtzKHRoaXMpLHRoaXMuc2V0RW5kQmVmb3JlKGEpLHRoaXMuY29sbGFwc2UoITEpfSxjb2xsYXBzZUFmdGVyOmZ1bmN0aW9uKGEpe3ModGhpcyksdGhpcy5zZXRTdGFydEFmdGVyKGEpLHRoaXMuY29sbGFwc2UoITApfSxnZXROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuXCJEb21SYW5nZVwifSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIEsucmFuZ2VzRXF1YWwodGhpcyxhKX0saXNWYWxpZDpmdW5jdGlvbigpe3JldHVybiBBKHRoaXMpfSxpbnNwZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIG0odGhpcyl9fSxHKEssSSxKKSxhLnJhbmdlUHJvdG90eXBlPUMucHJvdG90eXBlLEsucmFuZ2VQcm9wZXJ0aWVzPV8sSy5SYW5nZUl0ZXJhdG9yPW4sSy5jb3B5Q29tcGFyaXNvbkNvbnN0YW50cz1FLEsuY3JlYXRlUHJvdG90eXBlUmFuZ2U9RyxLLmluc3BlY3Q9bSxLLmdldFJhbmdlRG9jdW1lbnQ9YyxLLnJhbmdlc0VxdWFsPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuc3RhcnRDb250YWluZXI9PT1iLnN0YXJ0Q29udGFpbmVyJiZhLnN0YXJ0T2Zmc2V0PT09Yi5zdGFydE9mZnNldCYmYS5lbmRDb250YWluZXI9PT1iLmVuZENvbnRhaW5lciYmYS5lbmRPZmZzZXQ9PT1iLmVuZE9mZnNldH0sYS5Eb21SYW5nZT1LLGEuUmFuZ2VFeGNlcHRpb249b30pLHJhbmd5LmNyZWF0ZU1vZHVsZShcIldyYXBwZWRSYW5nZVwiLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9YS5wYXJlbnRFbGVtZW50KCksYz1hLmR1cGxpY2F0ZSgpO2MuY29sbGFwc2UoITApO3ZhciBkPWMucGFyZW50RWxlbWVudCgpO2M9YS5kdXBsaWNhdGUoKSxjLmNvbGxhcHNlKCExKTt2YXIgZT1jLnBhcmVudEVsZW1lbnQoKSxmPWQ9PWU/ZDpnLmdldENvbW1vbkFuY2VzdG9yKGQsZSk7cmV0dXJuIGY9PWI/ZjpnLmdldENvbW1vbkFuY2VzdG9yKGIsZil9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gMD09YS5jb21wYXJlRW5kUG9pbnRzKFwiU3RhcnRUb0VuZFwiLGEpfWZ1bmN0aW9uIGQoYSxiLGMsZCl7dmFyIGU9YS5kdXBsaWNhdGUoKTtlLmNvbGxhcHNlKGMpO3ZhciBmPWUucGFyZW50RWxlbWVudCgpO2lmKGcuaXNBbmNlc3Rvck9mKGIsZiwhMCl8fChmPWIpLCFmLmNhbkhhdmVIVE1MKXJldHVybiBuZXcgaChmLnBhcmVudE5vZGUsZy5nZXROb2RlSW5kZXgoZikpO3ZhciBpLGosayxsLG0sbj1nLmdldERvY3VtZW50KGYpLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLG89Yz9cIlN0YXJ0VG9TdGFydFwiOlwiU3RhcnRUb0VuZFwiO2RvIGYuaW5zZXJ0QmVmb3JlKG4sbi5wcmV2aW91c1NpYmxpbmcpLGUubW92ZVRvRWxlbWVudFRleHQobik7d2hpbGUoKGk9ZS5jb21wYXJlRW5kUG9pbnRzKG8sYSkpPjAmJm4ucHJldmlvdXNTaWJsaW5nKTtpZihtPW4ubmV4dFNpYmxpbmcsLTE9PWkmJm0mJmcuaXNDaGFyYWN0ZXJEYXRhTm9kZShtKSl7ZS5zZXRFbmRQb2ludChjP1wiRW5kVG9TdGFydFwiOlwiRW5kVG9FbmRcIixhKTt2YXIgcDtpZigvW1xcclxcbl0vLnRlc3QobS5kYXRhKSl7dmFyIHE9ZS5kdXBsaWNhdGUoKSxyPXEudGV4dC5yZXBsYWNlKC9cXHJcXG4vZyxcIlxcclwiKS5sZW5ndGg7Zm9yKHA9cS5tb3ZlU3RhcnQoXCJjaGFyYWN0ZXJcIixyKTstMT09KGk9cS5jb21wYXJlRW5kUG9pbnRzKFwiU3RhcnRUb0VuZFwiLHEpKTspcCsrLHEubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsMSl9ZWxzZSBwPWUudGV4dC5sZW5ndGg7bD1uZXcgaChtLHApfWVsc2Ugaj0oZHx8IWMpJiZuLnByZXZpb3VzU2libGluZyxrPShkfHxjKSYmbi5uZXh0U2libGluZyxsPWsmJmcuaXNDaGFyYWN0ZXJEYXRhTm9kZShrKT9uZXcgaChrLDApOmomJmcuaXNDaGFyYWN0ZXJEYXRhTm9kZShqKT9uZXcgaChqLGoubGVuZ3RoKTpuZXcgaChmLGcuZ2V0Tm9kZUluZGV4KG4pKTtyZXR1cm4gbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pLGx9ZnVuY3Rpb24gZShhLGIpe3ZhciBjLGQsZSxmLGg9YS5vZmZzZXQsaT1nLmdldERvY3VtZW50KGEubm9kZSksaj1pLmJvZHkuY3JlYXRlVGV4dFJhbmdlKCksaz1nLmlzQ2hhcmFjdGVyRGF0YU5vZGUoYS5ub2RlKTtyZXR1cm4gaz8oYz1hLm5vZGUsZD1jLnBhcmVudE5vZGUpOihmPWEubm9kZS5jaGlsZE5vZGVzLGM9aDxmLmxlbmd0aD9mW2hdOm51bGwsZD1hLm5vZGUpLGU9aS5jcmVhdGVFbGVtZW50KFwic3BhblwiKSxlLmlubmVySFRNTD1cIiYjZmVmZjtcIixjP2QuaW5zZXJ0QmVmb3JlKGUsYyk6ZC5hcHBlbmRDaGlsZChlKSxqLm1vdmVUb0VsZW1lbnRUZXh0KGUpLGouY29sbGFwc2UoIWIpLGQucmVtb3ZlQ2hpbGQoZSksayYmaltiP1wibW92ZVN0YXJ0XCI6XCJtb3ZlRW5kXCJdKFwiY2hhcmFjdGVyXCIsaCksan1hLnJlcXVpcmVNb2R1bGVzKFtcIkRvbVV0aWxcIixcIkRvbVJhbmdlXCJdKTt2YXIgZixnPWEuZG9tLGg9Zy5Eb21Qb3NpdGlvbixpPWEuRG9tUmFuZ2U7aWYoIWEuZmVhdHVyZXMuaW1wbGVtZW50c0RvbVJhbmdlfHxhLmZlYXR1cmVzLmltcGxlbWVudHNUZXh0UmFuZ2UmJmEuY29uZmlnLnByZWZlclRleHRSYW5nZSl7aWYoYS5mZWF0dXJlcy5pbXBsZW1lbnRzVGV4dFJhbmdlKXtmPWZ1bmN0aW9uKGEpe3RoaXMudGV4dFJhbmdlPWEsdGhpcy5yZWZyZXNoKCl9LGYucHJvdG90eXBlPW5ldyBpKGRvY3VtZW50KSxmLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKCl7dmFyIGEsZSxmPWIodGhpcy50ZXh0UmFuZ2UpO2ModGhpcy50ZXh0UmFuZ2UpP2U9YT1kKHRoaXMudGV4dFJhbmdlLGYsITAsITApOihhPWQodGhpcy50ZXh0UmFuZ2UsZiwhMCwhMSksZT1kKHRoaXMudGV4dFJhbmdlLGYsITEsITEpKSx0aGlzLnNldFN0YXJ0KGEubm9kZSxhLm9mZnNldCksdGhpcy5zZXRFbmQoZS5ub2RlLGUub2Zmc2V0KX0saS5jb3B5Q29tcGFyaXNvbkNvbnN0YW50cyhmKTt2YXIgaj1mdW5jdGlvbigpe3JldHVybiB0aGlzfSgpO1widW5kZWZpbmVkXCI9PXR5cGVvZiBqLlJhbmdlJiYoai5SYW5nZT1mKSxhLmNyZWF0ZU5hdGl2ZVJhbmdlPWZ1bmN0aW9uKGEpe3JldHVybiBhPWF8fGRvY3VtZW50LGEuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKX19fWVsc2UhZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGEpe2Zvcih2YXIgYixjPWsubGVuZ3RoO2MtLTspYj1rW2NdLGFbYl09YS5uYXRpdmVSYW5nZVtiXX1mdW5jdGlvbiBjKGEsYixjLGQsZSl7dmFyIGY9YS5zdGFydENvbnRhaW5lciE9PWJ8fGEuc3RhcnRPZmZzZXQhPWMsZz1hLmVuZENvbnRhaW5lciE9PWR8fGEuZW5kT2Zmc2V0IT1lOyhmfHxnKSYmKGEuc2V0RW5kKGQsZSksYS5zZXRTdGFydChiLGMpKX1mdW5jdGlvbiBkKGEpe2EubmF0aXZlUmFuZ2UuZGV0YWNoKCksYS5kZXRhY2hlZD0hMDtmb3IodmFyIGIsYz1rLmxlbmd0aDtjLS07KWI9a1tjXSxhW2JdPW51bGx9dmFyIGUsaCxqLGs9aS5yYW5nZVByb3BlcnRpZXM7Zj1mdW5jdGlvbihhKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoXCJSYW5nZSBtdXN0IGJlIHNwZWNpZmllZFwiKTt0aGlzLm5hdGl2ZVJhbmdlPWEsYih0aGlzKX0saS5jcmVhdGVQcm90b3R5cGVSYW5nZShmLGMsZCksZT1mLnByb3RvdHlwZSxlLnNlbGVjdE5vZGU9ZnVuY3Rpb24oYSl7dGhpcy5uYXRpdmVSYW5nZS5zZWxlY3ROb2RlKGEpLGIodGhpcyl9LGUuZGVsZXRlQ29udGVudHM9ZnVuY3Rpb24oKXt0aGlzLm5hdGl2ZVJhbmdlLmRlbGV0ZUNvbnRlbnRzKCksYih0aGlzKX0sZS5leHRyYWN0Q29udGVudHM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm5hdGl2ZVJhbmdlLmV4dHJhY3RDb250ZW50cygpO3JldHVybiBiKHRoaXMpLGF9LGUuY2xvbmVDb250ZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5hdGl2ZVJhbmdlLmNsb25lQ29udGVudHMoKX0sZS5zdXJyb3VuZENvbnRlbnRzPWZ1bmN0aW9uKGEpe3RoaXMubmF0aXZlUmFuZ2Uuc3Vycm91bmRDb250ZW50cyhhKSxiKHRoaXMpfSxlLmNvbGxhcHNlPWZ1bmN0aW9uKGEpe3RoaXMubmF0aXZlUmFuZ2UuY29sbGFwc2UoYSksYih0aGlzKX0sZS5jbG9uZVJhbmdlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBmKHRoaXMubmF0aXZlUmFuZ2UuY2xvbmVSYW5nZSgpKX0sZS5yZWZyZXNoPWZ1bmN0aW9uKCl7Yih0aGlzKX0sZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5hdGl2ZVJhbmdlLnRvU3RyaW5nKCl9O3ZhciBsPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwidGVzdFwiKTtnLmdldEJvZHkoZG9jdW1lbnQpLmFwcGVuZENoaWxkKGwpO3ZhciBtPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7bS5zZXRTdGFydChsLDApLG0uc2V0RW5kKGwsMCk7dHJ5e20uc2V0U3RhcnQobCwxKSxoPSEwLGUuc2V0U3RhcnQ9ZnVuY3Rpb24oYSxjKXt0aGlzLm5hdGl2ZVJhbmdlLnNldFN0YXJ0KGEsYyksYih0aGlzKX0sZS5zZXRFbmQ9ZnVuY3Rpb24oYSxjKXt0aGlzLm5hdGl2ZVJhbmdlLnNldEVuZChhLGMpLGIodGhpcyl9LGo9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGMpe3RoaXMubmF0aXZlUmFuZ2VbYV0oYyksYih0aGlzKX19fWNhdGNoKG4pe2g9ITEsZS5zZXRTdGFydD1mdW5jdGlvbihhLGMpe3RyeXt0aGlzLm5hdGl2ZVJhbmdlLnNldFN0YXJ0KGEsYyl9Y2F0Y2goZCl7dGhpcy5uYXRpdmVSYW5nZS5zZXRFbmQoYSxjKSx0aGlzLm5hdGl2ZVJhbmdlLnNldFN0YXJ0KGEsYyl9Yih0aGlzKX0sZS5zZXRFbmQ9ZnVuY3Rpb24oYSxjKXt0cnl7dGhpcy5uYXRpdmVSYW5nZS5zZXRFbmQoYSxjKX1jYXRjaChkKXt0aGlzLm5hdGl2ZVJhbmdlLnNldFN0YXJ0KGEsYyksdGhpcy5uYXRpdmVSYW5nZS5zZXRFbmQoYSxjKX1iKHRoaXMpfSxqPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3RyeXt0aGlzLm5hdGl2ZVJhbmdlW2FdKGQpfWNhdGNoKGUpe3RoaXMubmF0aXZlUmFuZ2VbY10oZCksdGhpcy5uYXRpdmVSYW5nZVthXShkKX1iKHRoaXMpfX19ZS5zZXRTdGFydEJlZm9yZT1qKFwic2V0U3RhcnRCZWZvcmVcIixcInNldEVuZEJlZm9yZVwiKSxlLnNldFN0YXJ0QWZ0ZXI9aihcInNldFN0YXJ0QWZ0ZXJcIixcInNldEVuZEFmdGVyXCIpLGUuc2V0RW5kQmVmb3JlPWooXCJzZXRFbmRCZWZvcmVcIixcInNldFN0YXJ0QmVmb3JlXCIpLGUuc2V0RW5kQWZ0ZXI9aihcInNldEVuZEFmdGVyXCIsXCJzZXRTdGFydEFmdGVyXCIpLG0uc2VsZWN0Tm9kZUNvbnRlbnRzKGwpLGUuc2VsZWN0Tm9kZUNvbnRlbnRzPW0uc3RhcnRDb250YWluZXI9PWwmJm0uZW5kQ29udGFpbmVyPT1sJiYwPT1tLnN0YXJ0T2Zmc2V0JiZtLmVuZE9mZnNldD09bC5sZW5ndGg/ZnVuY3Rpb24oYSl7dGhpcy5uYXRpdmVSYW5nZS5zZWxlY3ROb2RlQ29udGVudHMoYSksYih0aGlzKX06ZnVuY3Rpb24oYSl7dGhpcy5zZXRTdGFydChhLDApLHRoaXMuc2V0RW5kKGEsaS5nZXRFbmRPZmZzZXQoYSkpfSxtLnNlbGVjdE5vZGVDb250ZW50cyhsKSxtLnNldEVuZChsLDMpO3ZhciBvPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7by5zZWxlY3ROb2RlQ29udGVudHMobCksby5zZXRFbmQobCw0KSxvLnNldFN0YXJ0KGwsMiksZS5jb21wYXJlQm91bmRhcnlQb2ludHM9LTE9PW0uY29tcGFyZUJvdW5kYXJ5UG9pbnRzKG0uU1RBUlRfVE9fRU5ELG8pJjE9PW0uY29tcGFyZUJvdW5kYXJ5UG9pbnRzKG0uRU5EX1RPX1NUQVJULG8pP2Z1bmN0aW9uKGEsYil7cmV0dXJuIGI9Yi5uYXRpdmVSYW5nZXx8YixhPT1iLlNUQVJUX1RPX0VORD9hPWIuRU5EX1RPX1NUQVJUOmE9PWIuRU5EX1RPX1NUQVJUJiYoYT1iLlNUQVJUX1RPX0VORCksdGhpcy5uYXRpdmVSYW5nZS5jb21wYXJlQm91bmRhcnlQb2ludHMoYSxiKX06ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5uYXRpdmVSYW5nZS5jb21wYXJlQm91bmRhcnlQb2ludHMoYSxiLm5hdGl2ZVJhbmdlfHxiKX0sYS51dGlsLmlzSG9zdE1ldGhvZChtLFwiY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50XCIpJiYoZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubmF0aXZlUmFuZ2UuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGEpfSksZy5nZXRCb2R5KGRvY3VtZW50KS5yZW1vdmVDaGlsZChsKSxtLmRldGFjaCgpLG8uZGV0YWNoKCl9KCksYS5jcmVhdGVOYXRpdmVSYW5nZT1mdW5jdGlvbihhKXtyZXR1cm4gYT1hfHxkb2N1bWVudCxhLmNyZWF0ZVJhbmdlKCl9O2EuZmVhdHVyZXMuaW1wbGVtZW50c1RleHRSYW5nZSYmKGYucmFuZ2VUb1RleHRSYW5nZT1mdW5jdGlvbihhKXtpZihhLmNvbGxhcHNlZCl7dmFyIGI9ZShuZXcgaChhLnN0YXJ0Q29udGFpbmVyLGEuc3RhcnRPZmZzZXQpLCEwKTtyZXR1cm4gYn12YXIgYz1lKG5ldyBoKGEuc3RhcnRDb250YWluZXIsYS5zdGFydE9mZnNldCksITApLGQ9ZShuZXcgaChhLmVuZENvbnRhaW5lcixhLmVuZE9mZnNldCksITEpLGY9Zy5nZXREb2N1bWVudChhLnN0YXJ0Q29udGFpbmVyKS5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpO3JldHVybiBmLnNldEVuZFBvaW50KFwiU3RhcnRUb1N0YXJ0XCIsYyksZi5zZXRFbmRQb2ludChcIkVuZFRvRW5kXCIsZCksZn0pLGYucHJvdG90eXBlLmdldE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIldyYXBwZWRSYW5nZVwifSxhLldyYXBwZWRSYW5nZT1mLGEuY3JlYXRlUmFuZ2U9ZnVuY3Rpb24oYil7cmV0dXJuIGI9Ynx8ZG9jdW1lbnQsbmV3IGYoYS5jcmVhdGVOYXRpdmVSYW5nZShiKSl9LGEuY3JlYXRlUmFuZ3lSYW5nZT1mdW5jdGlvbihhKXtyZXR1cm4gYT1hfHxkb2N1bWVudCxuZXcgaShhKX0sYS5jcmVhdGVJZnJhbWVSYW5nZT1mdW5jdGlvbihiKXtyZXR1cm4gYS5jcmVhdGVSYW5nZShnLmdldElmcmFtZURvY3VtZW50KGIpKX0sYS5jcmVhdGVJZnJhbWVSYW5neVJhbmdlPWZ1bmN0aW9uKGIpe3JldHVybiBhLmNyZWF0ZVJhbmd5UmFuZ2UoZy5nZXRJZnJhbWVEb2N1bWVudChiKSl9LGEuYWRkQ3JlYXRlTWlzc2luZ05hdGl2ZUFwaUxpc3RlbmVyKGZ1bmN0aW9uKGIpe3ZhciBjPWIuZG9jdW1lbnQ7XCJ1bmRlZmluZWRcIj09dHlwZW9mIGMuY3JlYXRlUmFuZ2UmJihjLmNyZWF0ZVJhbmdlPWZ1bmN0aW9uKCl7cmV0dXJuIGEuY3JlYXRlUmFuZ2UodGhpcyl9KSxjPWI9bnVsbH0pfSkscmFuZ3kuY3JlYXRlTW9kdWxlKFwiV3JhcHBlZFNlbGVjdGlvblwiLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtyZXR1cm4oYXx8d2luZG93KS5nZXRTZWxlY3Rpb24oKX1mdW5jdGlvbiBkKGEpe3JldHVybihhfHx3aW5kb3cpLmRvY3VtZW50LnNlbGVjdGlvbn1mdW5jdGlvbiBlKGEsYixjKXt2YXIgZD1jP1wiZW5kXCI6XCJzdGFydFwiLGU9Yz9cInN0YXJ0XCI6XCJlbmRcIjthLmFuY2hvck5vZGU9YltkK1wiQ29udGFpbmVyXCJdLGEuYW5jaG9yT2Zmc2V0PWJbZCtcIk9mZnNldFwiXSxhLmZvY3VzTm9kZT1iW2UrXCJDb250YWluZXJcIl0sYS5mb2N1c09mZnNldD1iW2UrXCJPZmZzZXRcIl19ZnVuY3Rpb24gZihhKXt2YXIgYj1hLm5hdGl2ZVNlbGVjdGlvbjthLmFuY2hvck5vZGU9Yi5hbmNob3JOb2RlLGEuYW5jaG9yT2Zmc2V0PWIuYW5jaG9yT2Zmc2V0LGEuZm9jdXNOb2RlPWIuZm9jdXNOb2RlLGEuZm9jdXNPZmZzZXQ9Yi5mb2N1c09mZnNldH1mdW5jdGlvbiBnKGEpe2EuYW5jaG9yTm9kZT1hLmZvY3VzTm9kZT1udWxsLGEuYW5jaG9yT2Zmc2V0PWEuZm9jdXNPZmZzZXQ9MCxhLnJhbmdlQ291bnQ9MCxhLmlzQ29sbGFwc2VkPSEwLGEuX3Jhbmdlcy5sZW5ndGg9MH1mdW5jdGlvbiBoKGIpe3ZhciBjO3JldHVybiBiIGluc3RhbmNlb2YgeT8oYz1iLl9zZWxlY3Rpb25OYXRpdmVSYW5nZSxjfHwoYz1hLmNyZWF0ZU5hdGl2ZVJhbmdlKHcuZ2V0RG9jdW1lbnQoYi5zdGFydENvbnRhaW5lcikpLGMuc2V0RW5kKGIuZW5kQ29udGFpbmVyLGIuZW5kT2Zmc2V0KSxjLnNldFN0YXJ0KGIuc3RhcnRDb250YWluZXIsYi5zdGFydE9mZnNldCksYi5fc2VsZWN0aW9uTmF0aXZlUmFuZ2U9YyxiLmF0dGFjaExpc3RlbmVyKFwiZGV0YWNoXCIsZnVuY3Rpb24oKXt0aGlzLl9zZWxlY3Rpb25OYXRpdmVSYW5nZT1udWxsfSkpKTpiIGluc3RhbmNlb2Ygej9jPWIubmF0aXZlUmFuZ2U6YS5mZWF0dXJlcy5pbXBsZW1lbnRzRG9tUmFuZ2UmJmIgaW5zdGFuY2VvZiB3LmdldFdpbmRvdyhiLnN0YXJ0Q29udGFpbmVyKS5SYW5nZSYmKGM9YiksY31mdW5jdGlvbiBpKGEpe2lmKCFhLmxlbmd0aHx8MSE9YVswXS5ub2RlVHlwZSlyZXR1cm4hMTtmb3IodmFyIGI9MSxjPWEubGVuZ3RoO2M+YjsrK2IpaWYoIXcuaXNBbmNlc3Rvck9mKGFbMF0sYVtiXSkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gaihhKXt2YXIgYj1hLmdldE5vZGVzKCk7aWYoIWkoYikpdGhyb3cgbmV3IEVycm9yKFwiZ2V0U2luZ2xlRWxlbWVudEZyb21SYW5nZTogcmFuZ2UgXCIrYS5pbnNwZWN0KCkrXCIgZGlkIG5vdCBjb25zaXN0IG9mIGEgc2luZ2xlIGVsZW1lbnRcIik7cmV0dXJuIGJbMF19ZnVuY3Rpb24gayhhKXtyZXR1cm4hIWEmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLnRleHR9ZnVuY3Rpb24gbChhLGIpe3ZhciBjPW5ldyB6KGIpO2EuX3Jhbmdlcz1bY10sZShhLGMsITEpLGEucmFuZ2VDb3VudD0xLGEuaXNDb2xsYXBzZWQ9Yy5jb2xsYXBzZWR9ZnVuY3Rpb24gbShiKXtpZihiLl9yYW5nZXMubGVuZ3RoPTAsXCJOb25lXCI9PWIuZG9jU2VsZWN0aW9uLnR5cGUpZyhiKTtlbHNle3ZhciBjPWIuZG9jU2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7aWYoayhjKSlsKGIsYyk7ZWxzZXtiLnJhbmdlQ291bnQ9Yy5sZW5ndGg7Zm9yKHZhciBkLGY9dy5nZXREb2N1bWVudChjLml0ZW0oMCkpLGg9MDtoPGIucmFuZ2VDb3VudDsrK2gpZD1hLmNyZWF0ZVJhbmdlKGYpLGQuc2VsZWN0Tm9kZShjLml0ZW0oaCkpLGIuX3Jhbmdlcy5wdXNoKGQpO1xuYi5pc0NvbGxhcHNlZD0xPT1iLnJhbmdlQ291bnQmJmIuX3Jhbmdlc1swXS5jb2xsYXBzZWQsZShiLGIuX3Jhbmdlc1tiLnJhbmdlQ291bnQtMV0sITEpfX19ZnVuY3Rpb24gbihhLGIpe2Zvcih2YXIgYz1hLmRvY1NlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLGQ9aihiKSxlPXcuZ2V0RG9jdW1lbnQoYy5pdGVtKDApKSxmPXcuZ2V0Qm9keShlKS5jcmVhdGVDb250cm9sUmFuZ2UoKSxnPTAsaD1jLmxlbmd0aDtoPmc7KytnKWYuYWRkKGMuaXRlbShnKSk7dHJ5e2YuYWRkKGQpfWNhdGNoKGkpe3Rocm93IG5ldyBFcnJvcihcImFkZFJhbmdlKCk6IEVsZW1lbnQgd2l0aGluIHRoZSBzcGVjaWZpZWQgUmFuZ2UgY291bGQgbm90IGJlIGFkZGVkIHRvIGNvbnRyb2wgc2VsZWN0aW9uIChkb2VzIGl0IGhhdmUgbGF5b3V0PylcIil9Zi5zZWxlY3QoKSxtKGEpfWZ1bmN0aW9uIG8oYSxiLGMpe3RoaXMubmF0aXZlU2VsZWN0aW9uPWEsdGhpcy5kb2NTZWxlY3Rpb249Yix0aGlzLl9yYW5nZXM9W10sdGhpcy53aW49Yyx0aGlzLnJlZnJlc2goKX1mdW5jdGlvbiBwKGEsYil7Zm9yKHZhciBjLGQ9dy5nZXREb2N1bWVudChiWzBdLnN0YXJ0Q29udGFpbmVyKSxlPXcuZ2V0Qm9keShkKS5jcmVhdGVDb250cm9sUmFuZ2UoKSxmPTA7ZjxyYW5nZUNvdW50OysrZil7Yz1qKGJbZl0pO3RyeXtlLmFkZChjKX1jYXRjaChnKXt0aHJvdyBuZXcgRXJyb3IoXCJzZXRSYW5nZXMoKTogRWxlbWVudCB3aXRoaW4gdGhlIG9uZSBvZiB0aGUgc3BlY2lmaWVkIFJhbmdlcyBjb3VsZCBub3QgYmUgYWRkZWQgdG8gY29udHJvbCBzZWxlY3Rpb24gKGRvZXMgaXQgaGF2ZSBsYXlvdXQ/KVwiKX19ZS5zZWxlY3QoKSxtKGEpfWZ1bmN0aW9uIHEoYSxiKXtpZihhLmFuY2hvck5vZGUmJncuZ2V0RG9jdW1lbnQoYS5hbmNob3JOb2RlKSE9PXcuZ2V0RG9jdW1lbnQoYikpdGhyb3cgbmV3IEEoXCJXUk9OR19ET0NVTUVOVF9FUlJcIil9ZnVuY3Rpb24gcihhKXt2YXIgYj1bXSxjPW5ldyBCKGEuYW5jaG9yTm9kZSxhLmFuY2hvck9mZnNldCksZD1uZXcgQihhLmZvY3VzTm9kZSxhLmZvY3VzT2Zmc2V0KSxlPVwiZnVuY3Rpb25cIj09dHlwZW9mIGEuZ2V0TmFtZT9hLmdldE5hbWUoKTpcIlNlbGVjdGlvblwiO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLnJhbmdlQ291bnQpZm9yKHZhciBmPTAsZz1hLnJhbmdlQ291bnQ7Zz5mOysrZiliW2ZdPXkuaW5zcGVjdChhLmdldFJhbmdlQXQoZikpO3JldHVyblwiW1wiK2UrXCIoUmFuZ2VzOiBcIitiLmpvaW4oXCIsIFwiKStcIikoYW5jaG9yOiBcIitjLmluc3BlY3QoKStcIiwgZm9jdXM6IFwiK2QuaW5zcGVjdCgpK1wiXVwifWEucmVxdWlyZU1vZHVsZXMoW1wiRG9tVXRpbFwiLFwiRG9tUmFuZ2VcIixcIldyYXBwZWRSYW5nZVwiXSksYS5jb25maWcuY2hlY2tTZWxlY3Rpb25SYW5nZXM9ITA7dmFyIHMsdCx1PVwiYm9vbGVhblwiLHY9XCJfcmFuZ3lTZWxlY3Rpb25cIix3PWEuZG9tLHg9YS51dGlsLHk9YS5Eb21SYW5nZSx6PWEuV3JhcHBlZFJhbmdlLEE9YS5ET01FeGNlcHRpb24sQj13LkRvbVBvc2l0aW9uLEM9XCJDb250cm9sXCIsRD1hLnV0aWwuaXNIb3N0TWV0aG9kKHdpbmRvdyxcImdldFNlbGVjdGlvblwiKSxFPWEudXRpbC5pc0hvc3RPYmplY3QoZG9jdW1lbnQsXCJzZWxlY3Rpb25cIiksRj1FJiYoIUR8fGEuY29uZmlnLnByZWZlclRleHRSYW5nZSk7Rj8ocz1kLGEuaXNTZWxlY3Rpb25WYWxpZD1mdW5jdGlvbihhKXt2YXIgYj0oYXx8d2luZG93KS5kb2N1bWVudCxjPWIuc2VsZWN0aW9uO3JldHVyblwiTm9uZVwiIT1jLnR5cGV8fHcuZ2V0RG9jdW1lbnQoYy5jcmVhdGVSYW5nZSgpLnBhcmVudEVsZW1lbnQoKSk9PWJ9KTpEPyhzPWMsYS5pc1NlbGVjdGlvblZhbGlkPWZ1bmN0aW9uKCl7cmV0dXJuITB9KTpiLmZhaWwoXCJOZWl0aGVyIGRvY3VtZW50LnNlbGVjdGlvbiBvciB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkgZGV0ZWN0ZWQuXCIpLGEuZ2V0TmF0aXZlU2VsZWN0aW9uPXM7dmFyIEc9cygpLEg9YS5jcmVhdGVOYXRpdmVSYW5nZShkb2N1bWVudCksST13LmdldEJvZHkoZG9jdW1lbnQpLEo9eC5hcmVIb3N0T2JqZWN0cyhHLFtcImFuY2hvck5vZGVcIixcImZvY3VzTm9kZVwiXSYmeC5hcmVIb3N0UHJvcGVydGllcyhHLFtcImFuY2hvck9mZnNldFwiLFwiZm9jdXNPZmZzZXRcIl0pKTthLmZlYXR1cmVzLnNlbGVjdGlvbkhhc0FuY2hvckFuZEZvY3VzPUo7dmFyIEs9eC5pc0hvc3RNZXRob2QoRyxcImV4dGVuZFwiKTthLmZlYXR1cmVzLnNlbGVjdGlvbkhhc0V4dGVuZD1LO3ZhciBMPVwibnVtYmVyXCI9PXR5cGVvZiBHLnJhbmdlQ291bnQ7YS5mZWF0dXJlcy5zZWxlY3Rpb25IYXNSYW5nZUNvdW50PUw7dmFyIE09ITEsTj0hMDt4LmFyZUhvc3RNZXRob2RzKEcsW1wiYWRkUmFuZ2VcIixcImdldFJhbmdlQXRcIixcInJlbW92ZUFsbFJhbmdlc1wiXSkmJlwibnVtYmVyXCI9PXR5cGVvZiBHLnJhbmdlQ291bnQmJmEuZmVhdHVyZXMuaW1wbGVtZW50c0RvbVJhbmdlJiYhZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO2EuZnJhbWVCb3JkZXI9MCxhLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixhLnN0eWxlLmxlZnQ9XCItMTAwMDBweFwiLEkuYXBwZW5kQ2hpbGQoYSk7dmFyIGI9dy5nZXRJZnJhbWVEb2N1bWVudChhKTtiLm9wZW4oKSxiLndyaXRlKFwiPGh0bWw+PGhlYWQ+PC9oZWFkPjxib2R5PjEyPC9ib2R5PjwvaHRtbD5cIiksYi5jbG9zZSgpO3ZhciBjPXcuZ2V0SWZyYW1lV2luZG93KGEpLmdldFNlbGVjdGlvbigpLGQ9Yi5kb2N1bWVudEVsZW1lbnQsZT1kLmxhc3RDaGlsZCxmPWUuZmlyc3RDaGlsZCxnPWIuY3JlYXRlUmFuZ2UoKTtnLnNldFN0YXJ0KGYsMSksZy5jb2xsYXBzZSghMCksYy5hZGRSYW5nZShnKSxOPTE9PWMucmFuZ2VDb3VudCxjLnJlbW92ZUFsbFJhbmdlcygpO3ZhciBoPWcuY2xvbmVSYW5nZSgpO2cuc2V0U3RhcnQoZiwwKSxoLnNldEVuZChmLDIpLGMuYWRkUmFuZ2UoZyksYy5hZGRSYW5nZShoKSxNPTI9PWMucmFuZ2VDb3VudCxnLmRldGFjaCgpLGguZGV0YWNoKCksSS5yZW1vdmVDaGlsZChhKX0oKSxhLmZlYXR1cmVzLnNlbGVjdGlvblN1cHBvcnRzTXVsdGlwbGVSYW5nZXM9TSxhLmZlYXR1cmVzLmNvbGxhcHNlZE5vbkVkaXRhYmxlU2VsZWN0aW9uc1N1cHBvcnRlZD1OO3ZhciBPLFA9ITE7SSYmeC5pc0hvc3RNZXRob2QoSSxcImNyZWF0ZUNvbnRyb2xSYW5nZVwiKSYmKE89SS5jcmVhdGVDb250cm9sUmFuZ2UoKSx4LmFyZUhvc3RQcm9wZXJ0aWVzKE8sW1wiaXRlbVwiLFwiYWRkXCJdKSYmKFA9ITApKSxhLmZlYXR1cmVzLmltcGxlbWVudHNDb250cm9sUmFuZ2U9UCx0PUo/ZnVuY3Rpb24oYSl7cmV0dXJuIGEuYW5jaG9yTm9kZT09PWEuZm9jdXNOb2RlJiZhLmFuY2hvck9mZnNldD09PWEuZm9jdXNPZmZzZXR9OmZ1bmN0aW9uKGEpe3JldHVybiBhLnJhbmdlQ291bnQ/YS5nZXRSYW5nZUF0KGEucmFuZ2VDb3VudC0xKS5jb2xsYXBzZWQ6ITF9O3ZhciBRO3guaXNIb3N0TWV0aG9kKEcsXCJnZXRSYW5nZUF0XCIpP1E9ZnVuY3Rpb24oYSxiKXt0cnl7cmV0dXJuIGEuZ2V0UmFuZ2VBdChiKX1jYXRjaChjKXtyZXR1cm4gbnVsbH19OkomJihRPWZ1bmN0aW9uKGIpe3ZhciBjPXcuZ2V0RG9jdW1lbnQoYi5hbmNob3JOb2RlKSxkPWEuY3JlYXRlUmFuZ2UoYyk7cmV0dXJuIGQuc2V0U3RhcnQoYi5hbmNob3JOb2RlLGIuYW5jaG9yT2Zmc2V0KSxkLnNldEVuZChiLmZvY3VzTm9kZSxiLmZvY3VzT2Zmc2V0KSxkLmNvbGxhcHNlZCE9PXRoaXMuaXNDb2xsYXBzZWQmJihkLnNldFN0YXJ0KGIuZm9jdXNOb2RlLGIuZm9jdXNPZmZzZXQpLGQuc2V0RW5kKGIuYW5jaG9yTm9kZSxiLmFuY2hvck9mZnNldCkpLGR9KSxhLmdldFNlbGVjdGlvbj1mdW5jdGlvbihhKXthPWF8fHdpbmRvdzt2YXIgYj1hW3ZdLGM9cyhhKSxlPUU/ZChhKTpudWxsO3JldHVybiBiPyhiLm5hdGl2ZVNlbGVjdGlvbj1jLGIuZG9jU2VsZWN0aW9uPWUsYi5yZWZyZXNoKGEpKTooYj1uZXcgbyhjLGUsYSksYVt2XT1iKSxifSxhLmdldElmcmFtZVNlbGVjdGlvbj1mdW5jdGlvbihiKXtyZXR1cm4gYS5nZXRTZWxlY3Rpb24ody5nZXRJZnJhbWVXaW5kb3coYikpfTt2YXIgUj1vLnByb3RvdHlwZTtpZighRiYmSiYmeC5hcmVIb3N0TWV0aG9kcyhHLFtcInJlbW92ZUFsbFJhbmdlc1wiLFwiYWRkUmFuZ2VcIl0pKXtSLnJlbW92ZUFsbFJhbmdlcz1mdW5jdGlvbigpe3RoaXMubmF0aXZlU2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpLGcodGhpcyl9O3ZhciBTPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9eS5nZXRSYW5nZURvY3VtZW50KGMpLGU9YS5jcmVhdGVSYW5nZShkKTtlLmNvbGxhcHNlVG9Qb2ludChjLmVuZENvbnRhaW5lcixjLmVuZE9mZnNldCksYi5uYXRpdmVTZWxlY3Rpb24uYWRkUmFuZ2UoaChlKSksYi5uYXRpdmVTZWxlY3Rpb24uZXh0ZW5kKGMuc3RhcnRDb250YWluZXIsYy5zdGFydE9mZnNldCksYi5yZWZyZXNoKCl9O1IuYWRkUmFuZ2U9TD9mdW5jdGlvbihiLGMpe2lmKFAmJkUmJnRoaXMuZG9jU2VsZWN0aW9uLnR5cGU9PUMpbih0aGlzLGIpO2Vsc2UgaWYoYyYmSylTKHRoaXMsYik7ZWxzZXt2YXIgZDtpZihNP2Q9dGhpcy5yYW5nZUNvdW50Oih0aGlzLnJlbW92ZUFsbFJhbmdlcygpLGQ9MCksdGhpcy5uYXRpdmVTZWxlY3Rpb24uYWRkUmFuZ2UoaChiKSksdGhpcy5yYW5nZUNvdW50PXRoaXMubmF0aXZlU2VsZWN0aW9uLnJhbmdlQ291bnQsdGhpcy5yYW5nZUNvdW50PT1kKzEpe2lmKGEuY29uZmlnLmNoZWNrU2VsZWN0aW9uUmFuZ2VzKXt2YXIgZj1RKHRoaXMubmF0aXZlU2VsZWN0aW9uLHRoaXMucmFuZ2VDb3VudC0xKTtmJiYheS5yYW5nZXNFcXVhbChmLGIpJiYoYj1uZXcgeihmKSl9dGhpcy5fcmFuZ2VzW3RoaXMucmFuZ2VDb3VudC0xXT1iLGUodGhpcyxiLFYodGhpcy5uYXRpdmVTZWxlY3Rpb24pKSx0aGlzLmlzQ29sbGFwc2VkPXQodGhpcyl9ZWxzZSB0aGlzLnJlZnJlc2goKX19OmZ1bmN0aW9uKGEsYil7YiYmSz9TKHRoaXMsYSk6KHRoaXMubmF0aXZlU2VsZWN0aW9uLmFkZFJhbmdlKGgoYSkpLHRoaXMucmVmcmVzaCgpKX0sUi5zZXRSYW5nZXM9ZnVuY3Rpb24oYSl7aWYoUCYmYS5sZW5ndGg+MSlwKHRoaXMsYSk7ZWxzZXt0aGlzLnJlbW92ZUFsbFJhbmdlcygpO2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7Yz5iOysrYil0aGlzLmFkZFJhbmdlKGFbYl0pfX19ZWxzZXtpZighKHguaXNIb3N0TWV0aG9kKEcsXCJlbXB0eVwiKSYmeC5pc0hvc3RNZXRob2QoSCxcInNlbGVjdFwiKSYmUCYmRikpcmV0dXJuIGIuZmFpbChcIk5vIG1lYW5zIG9mIHNlbGVjdGluZyBhIFJhbmdlIG9yIFRleHRSYW5nZSB3YXMgZm91bmRcIiksITE7Ui5yZW1vdmVBbGxSYW5nZXM9ZnVuY3Rpb24oKXt0cnl7aWYodGhpcy5kb2NTZWxlY3Rpb24uZW1wdHkoKSxcIk5vbmVcIiE9dGhpcy5kb2NTZWxlY3Rpb24udHlwZSl7dmFyIGE7aWYodGhpcy5hbmNob3JOb2RlKWE9dy5nZXREb2N1bWVudCh0aGlzLmFuY2hvck5vZGUpO2Vsc2UgaWYodGhpcy5kb2NTZWxlY3Rpb24udHlwZT09Qyl7dmFyIGI9dGhpcy5kb2NTZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtiLmxlbmd0aCYmKGE9dy5nZXREb2N1bWVudChiLml0ZW0oMCkpLmJvZHkuY3JlYXRlVGV4dFJhbmdlKCkpfWlmKGEpe3ZhciBjPWEuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKTtjLnNlbGVjdCgpLHRoaXMuZG9jU2VsZWN0aW9uLmVtcHR5KCl9fX1jYXRjaChkKXt9Zyh0aGlzKX0sUi5hZGRSYW5nZT1mdW5jdGlvbihhKXt0aGlzLmRvY1NlbGVjdGlvbi50eXBlPT1DP24odGhpcyxhKTooei5yYW5nZVRvVGV4dFJhbmdlKGEpLnNlbGVjdCgpLHRoaXMuX3Jhbmdlc1swXT1hLHRoaXMucmFuZ2VDb3VudD0xLHRoaXMuaXNDb2xsYXBzZWQ9dGhpcy5fcmFuZ2VzWzBdLmNvbGxhcHNlZCxlKHRoaXMsYSwhMSkpfSxSLnNldFJhbmdlcz1mdW5jdGlvbihhKXt0aGlzLnJlbW92ZUFsbFJhbmdlcygpO3ZhciBiPWEubGVuZ3RoO2I+MT9wKHRoaXMsYSk6YiYmdGhpcy5hZGRSYW5nZShhWzBdKX19Ui5nZXRSYW5nZUF0PWZ1bmN0aW9uKGEpe2lmKDA+YXx8YT49dGhpcy5yYW5nZUNvdW50KXRocm93IG5ldyBBKFwiSU5ERVhfU0laRV9FUlJcIik7cmV0dXJuIHRoaXMuX3Jhbmdlc1thXX07dmFyIFQ7aWYoRilUPWZ1bmN0aW9uKGIpe3ZhciBjO2EuaXNTZWxlY3Rpb25WYWxpZChiLndpbik/Yz1iLmRvY1NlbGVjdGlvbi5jcmVhdGVSYW5nZSgpOihjPXcuZ2V0Qm9keShiLndpbi5kb2N1bWVudCkuY3JlYXRlVGV4dFJhbmdlKCksYy5jb2xsYXBzZSghMCkpLGIuZG9jU2VsZWN0aW9uLnR5cGU9PUM/bShiKTprKGMpP2woYixjKTpnKGIpfTtlbHNlIGlmKHguaXNIb3N0TWV0aG9kKEcsXCJnZXRSYW5nZUF0XCIpJiZcIm51bWJlclwiPT10eXBlb2YgRy5yYW5nZUNvdW50KVQ9ZnVuY3Rpb24oYil7aWYoUCYmRSYmYi5kb2NTZWxlY3Rpb24udHlwZT09QyltKGIpO2Vsc2UgaWYoYi5fcmFuZ2VzLmxlbmd0aD1iLnJhbmdlQ291bnQ9Yi5uYXRpdmVTZWxlY3Rpb24ucmFuZ2VDb3VudCxiLnJhbmdlQ291bnQpe2Zvcih2YXIgYz0wLGQ9Yi5yYW5nZUNvdW50O2Q+YzsrK2MpYi5fcmFuZ2VzW2NdPW5ldyBhLldyYXBwZWRSYW5nZShiLm5hdGl2ZVNlbGVjdGlvbi5nZXRSYW5nZUF0KGMpKTtlKGIsYi5fcmFuZ2VzW2IucmFuZ2VDb3VudC0xXSxWKGIubmF0aXZlU2VsZWN0aW9uKSksYi5pc0NvbGxhcHNlZD10KGIpfWVsc2UgZyhiKX07ZWxzZXtpZighSnx8dHlwZW9mIEcuaXNDb2xsYXBzZWQhPXV8fHR5cGVvZiBILmNvbGxhcHNlZCE9dXx8IWEuZmVhdHVyZXMuaW1wbGVtZW50c0RvbVJhbmdlKXJldHVybiBiLmZhaWwoXCJObyBtZWFucyBvZiBvYnRhaW5pbmcgYSBSYW5nZSBvciBUZXh0UmFuZ2UgZnJvbSB0aGUgdXNlcidzIHNlbGVjdGlvbiB3YXMgZm91bmRcIiksITE7VD1mdW5jdGlvbihhKXt2YXIgYixjPWEubmF0aXZlU2VsZWN0aW9uO2MuYW5jaG9yTm9kZT8oYj1RKGMsMCksYS5fcmFuZ2VzPVtiXSxhLnJhbmdlQ291bnQ9MSxmKGEpLGEuaXNDb2xsYXBzZWQ9dChhKSk6ZyhhKX19Ui5yZWZyZXNoPWZ1bmN0aW9uKGEpe3ZhciBiPWE/dGhpcy5fcmFuZ2VzLnNsaWNlKDApOm51bGw7aWYoVCh0aGlzKSxhKXt2YXIgYz1iLmxlbmd0aDtpZihjIT10aGlzLl9yYW5nZXMubGVuZ3RoKXJldHVybiExO2Zvcig7Yy0tOylpZigheS5yYW5nZXNFcXVhbChiW2NdLHRoaXMuX3Jhbmdlc1tjXSkpcmV0dXJuITE7cmV0dXJuITB9fTt2YXIgVT1mdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QWxsUmFuZ2VzKCksZD0hMTthLnJlbW92ZUFsbFJhbmdlcygpO2Zvcih2YXIgZT0wLGY9Yy5sZW5ndGg7Zj5lOysrZSlkfHxiIT09Y1tlXT9hLmFkZFJhbmdlKGNbZV0pOmQ9ITA7YS5yYW5nZUNvdW50fHxnKGEpfTtSLnJlbW92ZVJhbmdlPVA/ZnVuY3Rpb24oYSl7aWYodGhpcy5kb2NTZWxlY3Rpb24udHlwZT09Qyl7Zm9yKHZhciBiLGM9dGhpcy5kb2NTZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKSxkPWooYSksZT13LmdldERvY3VtZW50KGMuaXRlbSgwKSksZj13LmdldEJvZHkoZSkuY3JlYXRlQ29udHJvbFJhbmdlKCksZz0hMSxoPTAsaT1jLmxlbmd0aDtpPmg7KytoKWI9Yy5pdGVtKGgpLGIhPT1kfHxnP2YuYWRkKGMuaXRlbShoKSk6Zz0hMDtmLnNlbGVjdCgpLG0odGhpcyl9ZWxzZSBVKHRoaXMsYSl9OmZ1bmN0aW9uKGEpe1UodGhpcyxhKX07dmFyIFY7IUYmJkomJmEuZmVhdHVyZXMuaW1wbGVtZW50c0RvbVJhbmdlPyhWPWZ1bmN0aW9uKGEpe3ZhciBiPSExO3JldHVybiBhLmFuY2hvck5vZGUmJihiPTE9PXcuY29tcGFyZVBvaW50cyhhLmFuY2hvck5vZGUsYS5hbmNob3JPZmZzZXQsYS5mb2N1c05vZGUsYS5mb2N1c09mZnNldCkpLGJ9LFIuaXNCYWNrd2FyZHM9ZnVuY3Rpb24oKXtyZXR1cm4gVih0aGlzKX0pOlY9Ui5pc0JhY2t3YXJkcz1mdW5jdGlvbigpe3JldHVybiExfSxSLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMucmFuZ2VDb3VudDtjPmI7KytiKWFbYl09XCJcIit0aGlzLl9yYW5nZXNbYl07cmV0dXJuIGEuam9pbihcIlwiKX0sUi5jb2xsYXBzZT1mdW5jdGlvbihiLGMpe3EodGhpcyxiKTt2YXIgZD1hLmNyZWF0ZVJhbmdlKHcuZ2V0RG9jdW1lbnQoYikpO2QuY29sbGFwc2VUb1BvaW50KGIsYyksdGhpcy5yZW1vdmVBbGxSYW5nZXMoKSx0aGlzLmFkZFJhbmdlKGQpLHRoaXMuaXNDb2xsYXBzZWQ9ITB9LFIuY29sbGFwc2VUb1N0YXJ0PWZ1bmN0aW9uKCl7aWYoIXRoaXMucmFuZ2VDb3VudCl0aHJvdyBuZXcgQShcIklOVkFMSURfU1RBVEVfRVJSXCIpO3ZhciBhPXRoaXMuX3Jhbmdlc1swXTt0aGlzLmNvbGxhcHNlKGEuc3RhcnRDb250YWluZXIsYS5zdGFydE9mZnNldCl9LFIuY29sbGFwc2VUb0VuZD1mdW5jdGlvbigpe2lmKCF0aGlzLnJhbmdlQ291bnQpdGhyb3cgbmV3IEEoXCJJTlZBTElEX1NUQVRFX0VSUlwiKTt2YXIgYT10aGlzLl9yYW5nZXNbdGhpcy5yYW5nZUNvdW50LTFdO3RoaXMuY29sbGFwc2UoYS5lbmRDb250YWluZXIsYS5lbmRPZmZzZXQpfSxSLnNlbGVjdEFsbENoaWxkcmVuPWZ1bmN0aW9uKGIpe3EodGhpcyxiKTt2YXIgYz1hLmNyZWF0ZVJhbmdlKHcuZ2V0RG9jdW1lbnQoYikpO2Muc2VsZWN0Tm9kZUNvbnRlbnRzKGIpLHRoaXMucmVtb3ZlQWxsUmFuZ2VzKCksdGhpcy5hZGRSYW5nZShjKX0sUi5kZWxldGVGcm9tRG9jdW1lbnQ9ZnVuY3Rpb24oKXtpZihQJiZFJiZ0aGlzLmRvY1NlbGVjdGlvbi50eXBlPT1DKXtmb3IodmFyIGEsYj10aGlzLmRvY1NlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO2IubGVuZ3RoOylhPWIuaXRlbSgwKSxiLnJlbW92ZShhKSxhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSk7dGhpcy5yZWZyZXNoKCl9ZWxzZSBpZih0aGlzLnJhbmdlQ291bnQpe3ZhciBjPXRoaXMuZ2V0QWxsUmFuZ2VzKCk7dGhpcy5yZW1vdmVBbGxSYW5nZXMoKTtmb3IodmFyIGQ9MCxlPWMubGVuZ3RoO2U+ZDsrK2QpY1tkXS5kZWxldGVDb250ZW50cygpO3RoaXMuYWRkUmFuZ2UoY1tlLTFdKX19LFIuZ2V0QWxsUmFuZ2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jhbmdlcy5zbGljZSgwKX0sUi5zZXRTaW5nbGVSYW5nZT1mdW5jdGlvbihhKXt0aGlzLnNldFJhbmdlcyhbYV0pfSxSLmNvbnRhaW5zTm9kZT1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9dGhpcy5fcmFuZ2VzLmxlbmd0aDtkPmM7KytjKWlmKHRoaXMuX3Jhbmdlc1tjXS5jb250YWluc05vZGUoYSxiKSlyZXR1cm4hMDtyZXR1cm4hMX0sUi50b0h0bWw9ZnVuY3Rpb24oKXt2YXIgYT1cIlwiO2lmKHRoaXMucmFuZ2VDb3VudCl7Zm9yKHZhciBiPXkuZ2V0UmFuZ2VEb2N1bWVudCh0aGlzLl9yYW5nZXNbMF0pLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksYz0wLGQ9dGhpcy5fcmFuZ2VzLmxlbmd0aDtkPmM7KytjKWIuYXBwZW5kQ2hpbGQodGhpcy5fcmFuZ2VzW2NdLmNsb25lQ29udGVudHMoKSk7YT1iLmlubmVySFRNTH1yZXR1cm4gYX0sUi5nZXROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJXcmFwcGVkU2VsZWN0aW9uXCJ9LFIuaW5zcGVjdD1mdW5jdGlvbigpe3JldHVybiByKHRoaXMpfSxSLmRldGFjaD1mdW5jdGlvbigpe3RoaXMud2luW3ZdPW51bGwsdGhpcy53aW49dGhpcy5hbmNob3JOb2RlPXRoaXMuZm9jdXNOb2RlPW51bGx9LG8uaW5zcGVjdD1yLGEuU2VsZWN0aW9uPW8sYS5zZWxlY3Rpb25Qcm90b3R5cGU9UixhLmFkZENyZWF0ZU1pc3NpbmdOYXRpdmVBcGlMaXN0ZW5lcihmdW5jdGlvbihiKXtcInVuZGVmaW5lZFwiPT10eXBlb2YgYi5nZXRTZWxlY3Rpb24mJihiLmdldFNlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiBhLmdldFNlbGVjdGlvbih0aGlzKX0pLGI9bnVsbH0pfSksLyoqXG4gKiBAbGljZW5zZSBTZWxlY3Rpb24gc2F2ZSBhbmQgcmVzdG9yZSBtb2R1bGUgZm9yIFJhbmd5LlxuICogU2F2ZXMgYW5kIHJlc3RvcmVzIHVzZXIgc2VsZWN0aW9ucyB1c2luZyBtYXJrZXIgaW52aXNpYmxlIGVsZW1lbnRzIGluIHRoZSBET00uXG4gKlxuICogUGFydCBvZiBSYW5neSwgYSBjcm9zcy1icm93c2VyIEphdmFTY3JpcHQgcmFuZ2UgYW5kIHNlbGVjdGlvbiBsaWJyYXJ5XG4gKiBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvcmFuZ3kvXG4gKlxuICogRGVwZW5kcyBvbiBSYW5neSBjb3JlLlxuICpcbiAqIENvcHlyaWdodCAyMDEyLCBUaW0gRG93blxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogVmVyc2lvbjogMS4yLjNcbiAqIEJ1aWxkIGRhdGU6IDI2IEZlYnJ1YXJ5IDIwMTJcbiAqL1xucmFuZ3kuY3JlYXRlTW9kdWxlKFwiU2F2ZVJlc3RvcmVcIixmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiKXtyZXR1cm4oYnx8ZG9jdW1lbnQpLmdldEVsZW1lbnRCeUlkKGEpfWZ1bmN0aW9uIGQoYSxiKXt2YXIgYyxkPVwic2VsZWN0aW9uQm91bmRhcnlfXCIrICtuZXcgRGF0ZStcIl9cIisoXCJcIitNYXRoLnJhbmRvbSgpKS5zbGljZSgyKSxlPWsuZ2V0RG9jdW1lbnQoYS5zdGFydENvbnRhaW5lciksZj1hLmNsb25lUmFuZ2UoKTtyZXR1cm4gZi5jb2xsYXBzZShiKSxjPWUuY3JlYXRlRWxlbWVudChcInNwYW5cIiksYy5pZD1kLGMuc3R5bGUubGluZUhlaWdodD1cIjBcIixjLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsYy5jbGFzc05hbWU9XCJyYW5neVNlbGVjdGlvbkJvdW5kYXJ5XCIsYy5hcHBlbmRDaGlsZChlLmNyZWF0ZVRleHROb2RlKGwpKSxmLmluc2VydE5vZGUoYyksZi5kZXRhY2goKSxjfWZ1bmN0aW9uIGUoYSxkLGUsZil7dmFyIGc9YyhlLGEpO2c/KGRbZj9cInNldFN0YXJ0QmVmb3JlXCI6XCJzZXRFbmRCZWZvcmVcIl0oZyksZy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGcpKTpiLndhcm4oXCJNYXJrZXIgZWxlbWVudCBoYXMgYmVlbiByZW1vdmVkLiBDYW5ub3QgcmVzdG9yZSBzZWxlY3Rpb24uXCIpfWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gYi5jb21wYXJlQm91bmRhcnlQb2ludHMoYS5TVEFSVF9UT19TVEFSVCxhKX1mdW5jdGlvbiBnKGUpe2U9ZXx8d2luZG93O3ZhciBnPWUuZG9jdW1lbnQ7aWYoIWEuaXNTZWxlY3Rpb25WYWxpZChlKSlyZXR1cm4gdm9pZCBiLndhcm4oXCJDYW5ub3Qgc2F2ZSBzZWxlY3Rpb24uIFRoaXMgdXN1YWxseSBoYXBwZW5zIHdoZW4gdGhlIHNlbGVjdGlvbiBpcyBjb2xsYXBzZWQgYW5kIHRoZSBzZWxlY3Rpb24gZG9jdW1lbnQgaGFzIGxvc3QgZm9jdXMuXCIpO3ZhciBoLGksaixrPWEuZ2V0U2VsZWN0aW9uKGUpLGw9ay5nZXRBbGxSYW5nZXMoKSxtPVtdO2wuc29ydChmKTtmb3IodmFyIG49MCxvPWwubGVuZ3RoO28+bjsrK24paj1sW25dLGouY29sbGFwc2VkPyhpPWQoaiwhMSksbS5wdXNoKHttYXJrZXJJZDppLmlkLGNvbGxhcHNlZDohMH0pKTooaT1kKGosITEpLGg9ZChqLCEwKSxtW25dPXtzdGFydE1hcmtlcklkOmguaWQsZW5kTWFya2VySWQ6aS5pZCxjb2xsYXBzZWQ6ITEsYmFja3dhcmRzOjE9PWwubGVuZ3RoJiZrLmlzQmFja3dhcmRzKCl9KTtmb3Iobj1vLTE7bj49MDstLW4paj1sW25dLGouY29sbGFwc2VkP2ouY29sbGFwc2VCZWZvcmUoYyhtW25dLm1hcmtlcklkLGcpKTooai5zZXRFbmRCZWZvcmUoYyhtW25dLmVuZE1hcmtlcklkLGcpKSxqLnNldFN0YXJ0QWZ0ZXIoYyhtW25dLnN0YXJ0TWFya2VySWQsZykpKTtyZXR1cm4gay5zZXRSYW5nZXMobCkse3dpbjplLGRvYzpnLHJhbmdlSW5mb3M6bSxyZXN0b3JlZDohMX19ZnVuY3Rpb24gaChkLGYpe2lmKCFkLnJlc3RvcmVkKXtmb3IodmFyIGcsaCxpPWQucmFuZ2VJbmZvcyxqPWEuZ2V0U2VsZWN0aW9uKGQud2luKSxrPVtdLGw9aS5sZW5ndGgsbT1sLTE7bT49MDstLW0pe2lmKGc9aVttXSxoPWEuY3JlYXRlUmFuZ2UoZC5kb2MpLGcuY29sbGFwc2VkKXt2YXIgbj1jKGcubWFya2VySWQsZC5kb2MpO2lmKG4pe24uc3R5bGUuZGlzcGxheT1cImlubGluZVwiO3ZhciBvPW4ucHJldmlvdXNTaWJsaW5nO28mJjM9PW8ubm9kZVR5cGU/KG4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKSxoLmNvbGxhcHNlVG9Qb2ludChvLG8ubGVuZ3RoKSk6KGguY29sbGFwc2VCZWZvcmUobiksbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pKX1lbHNlIGIud2FybihcIk1hcmtlciBlbGVtZW50IGhhcyBiZWVuIHJlbW92ZWQuIENhbm5vdCByZXN0b3JlIHNlbGVjdGlvbi5cIil9ZWxzZSBlKGQuZG9jLGgsZy5zdGFydE1hcmtlcklkLCEwKSxlKGQuZG9jLGgsZy5lbmRNYXJrZXJJZCwhMSk7MT09bCYmaC5ub3JtYWxpemVCb3VuZGFyaWVzKCksa1ttXT1ofTE9PWwmJmYmJmEuZmVhdHVyZXMuc2VsZWN0aW9uSGFzRXh0ZW5kJiZpWzBdLmJhY2t3YXJkcz8oai5yZW1vdmVBbGxSYW5nZXMoKSxqLmFkZFJhbmdlKGtbMF0sITApKTpqLnNldFJhbmdlcyhrKSxkLnJlc3RvcmVkPSEwfX1mdW5jdGlvbiBpKGEsYil7dmFyIGQ9YyhiLGEpO2QmJmQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKX1mdW5jdGlvbiBqKGEpe2Zvcih2YXIgYixjPWEucmFuZ2VJbmZvcyxkPTAsZT1jLmxlbmd0aDtlPmQ7KytkKWI9Y1tkXSxiLmNvbGxhcHNlZD9pKGEuZG9jLGIubWFya2VySWQpOihpKGEuZG9jLGIuc3RhcnRNYXJrZXJJZCksaShhLmRvYyxiLmVuZE1hcmtlcklkKSl9YS5yZXF1aXJlTW9kdWxlcyhbXCJEb21VdGlsXCIsXCJEb21SYW5nZVwiLFwiV3JhcHBlZFJhbmdlXCJdKTt2YXIgaz1hLmRvbSxsPVwi77u/XCI7YS5zYXZlU2VsZWN0aW9uPWcsYS5yZXN0b3JlU2VsZWN0aW9uPWgsYS5yZW1vdmVNYXJrZXJFbGVtZW50PWksYS5yZW1vdmVNYXJrZXJzPWp9KX0oe30sZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSk7IiwiIWZ1bmN0aW9uKGEsYil7YltcInRydWVcIl09YSwvKipcbiAqIEBsaWNlbnNlIEFuZ3VsYXJKUyB2MS4zLjEwXG4gKiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuICogTGljZW5zZTogTUlUXG4gKi9cbmZ1bmN0aW9uKGEsYil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYygpe3RoaXMuJGdldD1bXCIkJHNhbml0aXplVXJpXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPVtdO3JldHVybiBmKGIsayhjLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIS9edW5zYWZlLy50ZXN0KGEoYixjKSl9KSksYy5qb2luKFwiXCIpfX1dfWZ1bmN0aW9uIGQoYSl7dmFyIGM9W10sZD1rKGMsYi5ub29wKTtyZXR1cm4gZC5jaGFycyhhKSxjLmpvaW4oXCJcIil9ZnVuY3Rpb24gZShhKXt2YXIgYixjPXt9LGQ9YS5zcGxpdChcIixcIik7Zm9yKGI9MDtiPGQubGVuZ3RoO2IrKyljW2RbYl1dPSEwO3JldHVybiBjfWZ1bmN0aW9uIGYoYSxjKXtmdW5jdGlvbiBkKGEsZCxmLGgpe2lmKGQ9Yi5sb3dlcmNhc2UoZCksQVtkXSlmb3IoO2subGFzdCgpJiZCW2subGFzdCgpXTspZShcIlwiLGsubGFzdCgpKTt6W2RdJiZrLmxhc3QoKT09ZCYmZShcIlwiLGQpLGg9d1tkXXx8ISFoLGh8fGsucHVzaChkKTt2YXIgaT17fTtmLnJlcGxhY2UobyxmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWN8fGR8fGV8fFwiXCI7aVtiXT1nKGYpfSksYy5zdGFydCYmYy5zdGFydChkLGksaCl9ZnVuY3Rpb24gZShhLGQpe3ZhciBlLGY9MDtpZihkPWIubG93ZXJjYXNlKGQpKWZvcihmPWsubGVuZ3RoLTE7Zj49MCYma1tmXSE9ZDtmLS0pO2lmKGY+PTApe2ZvcihlPWsubGVuZ3RoLTE7ZT49ZjtlLS0pYy5lbmQmJmMuZW5kKGtbZV0pO2subGVuZ3RoPWZ9fVwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYT1udWxsPT09YXx8XCJ1bmRlZmluZWRcIj09dHlwZW9mIGE/XCJcIjpcIlwiK2EpO3ZhciBmLGgsaSxqLGs9W10sdT1hO2ZvcihrLmxhc3Q9ZnVuY3Rpb24oKXtyZXR1cm4ga1trLmxlbmd0aC0xXX07YTspe2lmKGo9XCJcIixoPSEwLGsubGFzdCgpJiZEW2subGFzdCgpXT8oYT1hLnJlcGxhY2UobmV3IFJlZ0V4cChcIihbXl0qKTxcXFxccypcXFxcL1xcXFxzKlwiK2subGFzdCgpK1wiW14+XSo+XCIsXCJpXCIpLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI9Yi5yZXBsYWNlKHIsXCIkMVwiKS5yZXBsYWNlKHQsXCIkMVwiKSxjLmNoYXJzJiZjLmNoYXJzKGcoYikpLFwiXCJ9KSxlKFwiXCIsay5sYXN0KCkpKTooMD09PWEuaW5kZXhPZihcIjwhLS1cIik/KGY9YS5pbmRleE9mKFwiLS1cIiw0KSxmPj0wJiZhLmxhc3RJbmRleE9mKFwiLS0+XCIsZik9PT1mJiYoYy5jb21tZW50JiZjLmNvbW1lbnQoYS5zdWJzdHJpbmcoNCxmKSksYT1hLnN1YnN0cmluZyhmKzMpLGg9ITEpKTpzLnRlc3QoYSk/KGk9YS5tYXRjaChzKSxpJiYoYT1hLnJlcGxhY2UoaVswXSxcIlwiKSxoPSExKSk6cS50ZXN0KGEpPyhpPWEubWF0Y2gobiksaSYmKGE9YS5zdWJzdHJpbmcoaVswXS5sZW5ndGgpLGlbMF0ucmVwbGFjZShuLGUpLGg9ITEpKTpwLnRlc3QoYSkmJihpPWEubWF0Y2gobSksaT8oaVs0XSYmKGE9YS5zdWJzdHJpbmcoaVswXS5sZW5ndGgpLGlbMF0ucmVwbGFjZShtLGQpKSxoPSExKTooais9XCI8XCIsYT1hLnN1YnN0cmluZygxKSkpLGgmJihmPWEuaW5kZXhPZihcIjxcIiksais9MD5mP2E6YS5zdWJzdHJpbmcoMCxmKSxhPTA+Zj9cIlwiOmEuc3Vic3RyaW5nKGYpLGMuY2hhcnMmJmMuY2hhcnMoZyhqKSkpKSxhPT11KXRocm93IGwoXCJiYWRwYXJzZVwiLFwiVGhlIHNhbml0aXplciB3YXMgdW5hYmxlIHRvIHBhcnNlIHRoZSBmb2xsb3dpbmcgYmxvY2sgb2YgaHRtbDogezB9XCIsYSk7dT1hfWUoKX1mdW5jdGlvbiBnKGEpe2lmKCFhKXJldHVyblwiXCI7dmFyIGI9Sy5leGVjKGEpLGM9YlsxXSxkPWJbM10sZT1iWzJdO3JldHVybiBlJiYoSi5pbm5lckhUTUw9ZS5yZXBsYWNlKC88L2csXCImbHQ7XCIpLGU9XCJ0ZXh0Q29udGVudFwiaW4gSj9KLnRleHRDb250ZW50OkouaW5uZXJUZXh0KSxjK2UrZH1mdW5jdGlvbiBoKGEpe3JldHVybiBhLnJlcGxhY2UoLyYvZyxcIiZhbXA7XCIpLnJlcGxhY2UodSxmdW5jdGlvbihhKXt2YXIgYj1hLmNoYXJDb2RlQXQoMCksYz1hLmNoYXJDb2RlQXQoMSk7cmV0dXJuXCImI1wiKygxMDI0KihiLTU1Mjk2KSsoYy01NjMyMCkrNjU1MzYpK1wiO1wifSkucmVwbGFjZSh2LGZ1bmN0aW9uKGEpe3ZhciBiPWEuY2hhckNvZGVBdCgwKTtyZXR1cm4gMTU5Pj1ifHwxNzM9PWJ8fGI+PTE1MzYmJjE1NDA+PWJ8fDE4MDc9PWJ8fDYwNjg9PWJ8fDYwNjk9PWJ8fGI+PTgyMDQmJjgyMDc+PWJ8fGI+PTgyMzImJjgyMzk+PWJ8fGI+PTgyODgmJjgzMDM+PWJ8fDY1Mjc5PT1ifHxiPj02NTUyMCYmNjU1MzU+PWI/XCImI1wiK2IrXCI7XCI6YX0pLnJlcGxhY2UoLzwvZyxcIiZsdDtcIikucmVwbGFjZSgvPi9nLFwiJmd0O1wiKX1mdW5jdGlvbiBpKGEpe3ZhciBjPVwiXCIsZD1hLnNwbGl0KFwiO1wiKTtyZXR1cm4gYi5mb3JFYWNoKGQsZnVuY3Rpb24oYSl7dmFyIGQ9YS5zcGxpdChcIjpcIik7aWYoMj09ZC5sZW5ndGgpe3ZhciBlPUwoYi5sb3dlcmNhc2UoZFswXSkpLGE9TChiLmxvd2VyY2FzZShkWzFdKSk7KChcImNvbG9yXCI9PT1lfHxcImJhY2tncm91bmQtY29sb3JcIj09PWUpJiYoYS5tYXRjaCgvXnJnYlxcKFswLTklLFxcLiBdKlxcKSQvaSl8fGEubWF0Y2goL15yZ2JhXFwoWzAtOSUsXFwuIF0qXFwpJC9pKXx8YS5tYXRjaCgvXmhzbFxcKFswLTklLFxcLiBdKlxcKSQvaSl8fGEubWF0Y2goL15oc2xhXFwoWzAtOSUsXFwuIF0qXFwpJC9pKXx8YS5tYXRjaCgvXiNbMC05YS1mXXszLDZ9JC9pKXx8YS5tYXRjaCgvXlthLXpdKiQvaSkpfHxcInRleHQtYWxpZ25cIj09PWUmJihcImxlZnRcIj09PWF8fFwicmlnaHRcIj09PWF8fFwiY2VudGVyXCI9PT1hfHxcImp1c3RpZnlcIj09PWEpfHxcImZsb2F0XCI9PT1lJiYoXCJsZWZ0XCI9PT1hfHxcInJpZ2h0XCI9PT1hfHxcIm5vbmVcIj09PWEpfHwoXCJ3aWR0aFwiPT09ZXx8XCJoZWlnaHRcIj09PWUpJiZhLm1hdGNoKC9bMC05XFwuXSoocHh8ZW18cmVtfCUpLyl8fFwiZGlyZWN0aW9uXCI9PT1lJiZhLm1hdGNoKC9ebHRyfHJ0bHxpbml0aWFsfGluaGVyaXQkLykpJiYoYys9ZStcIjogXCIrYStcIjtcIil9fSksY31mdW5jdGlvbiBqKGEsYixjLGQpe3JldHVyblwiaW1nXCI9PT1hJiZiW1widGEtaW5zZXJ0LXZpZGVvXCJdJiYoXCJ0YS1pbnNlcnQtdmlkZW9cIj09PWN8fFwiYWxsb3dmdWxsc2NyZWVuXCI9PT1jfHxcImZyYW1lYm9yZGVyXCI9PT1jfHxcImNvbnRlbnRlZGl0YWJsZVwiPT09YyYmXCJmYWxzZVwiPT09ZCk/ITA6ITF9ZnVuY3Rpb24gayhhLGMpe3ZhciBkPSExLGU9Yi5iaW5kKGEsYS5wdXNoKTtyZXR1cm57c3RhcnQ6ZnVuY3Rpb24oYSxmLGcpe2E9Yi5sb3dlcmNhc2UoYSksIWQmJkRbYV0mJihkPWEpLGR8fEVbYV0hPT0hMHx8KGUoXCI8XCIpLGUoYSksYi5mb3JFYWNoKGYsZnVuY3Rpb24oZCxnKXt2YXIgaz1iLmxvd2VyY2FzZShnKSxsPVwiaW1nXCI9PT1hJiZcInNyY1wiPT09a3x8XCJiYWNrZ3JvdW5kXCI9PT1rOyhcInN0eWxlXCI9PT1rJiZcIlwiIT09KGQ9aShkKSl8fGooYSxmLGssZCl8fElba109PT0hMCYmKEZba10hPT0hMHx8YyhkLGwpKSkmJihlKFwiIFwiKSxlKGcpLGUoJz1cIicpLGUoaChkKSksZSgnXCInKSl9KSxlKGc/XCIvPlwiOlwiPlwiKSl9LGVuZDpmdW5jdGlvbihhKXthPWIubG93ZXJjYXNlKGEpLGR8fEVbYV0hPT0hMHx8KGUoXCI8L1wiKSxlKGEpLGUoXCI+XCIpKSxhPT1kJiYoZD0hMSl9LGNoYXJzOmZ1bmN0aW9uKGEpe2R8fGUoaChhKSl9fX12YXIgbD1iLiQkbWluRXJyKFwiJHNhbml0aXplXCIpLG09L148KCg/OlthLXpBLVpdKVtcXHc6LV0qKSgoPzpcXHMrW1xcdzotXSsoPzpcXHMqPVxccyooPzooPzpcIlteXCJdKlwiKXwoPzonW14nXSonKXxbXj5cXHNdKykpPykqKVxccyooXFwvPylcXHMqKD4/KS8sbj0vXjxcXC9cXHMqKFtcXHc6LV0rKVtePl0qPi8sbz0vKFtcXHc6LV0rKSg/Olxccyo9XFxzKig/Oig/OlwiKCg/OlteXCJdKSopXCIpfCg/OicoKD86W14nXSkqKScpfChbXj5cXHNdKykpKT8vZyxwPS9ePC8scT0vXjxcXC8vLHI9LzwhLS0oLio/KS0tPi9nLHM9LzwhRE9DVFlQRShbXj5dKj8pPi9pLHQ9LzwhXFxbQ0RBVEFcXFsoLio/KV1dPi9nLHU9L1tcXHVEODAwLVxcdURCRkZdW1xcdURDMDAtXFx1REZGRl0vZyx2PS8oW15cXCMtfnwgfCFdKS9nLHc9ZShcImFyZWEsYnIsY29sLGhyLGltZyx3YnJcIikseD1lKFwiY29sZ3JvdXAsZGQsZHQsbGkscCx0Ym9keSx0ZCx0Zm9vdCx0aCx0aGVhZCx0clwiKSx5PWUoXCJycCxydFwiKSx6PWIuZXh0ZW5kKHt9LHkseCksQT1iLmV4dGVuZCh7fSx4LGUoXCJhZGRyZXNzLGFydGljbGUsYXNpZGUsYmxvY2txdW90ZSxjYXB0aW9uLGNlbnRlcixkZWwsZGlyLGRpdixkbCxmaWd1cmUsZmlnY2FwdGlvbixmb290ZXIsaDEsaDIsaDMsaDQsaDUsaDYsaGVhZGVyLGhncm91cCxocixpbnMsbWFwLG1lbnUsbmF2LG9sLHByZSxzY3JpcHQsc2VjdGlvbix0YWJsZSx1bFwiKSksQj1iLmV4dGVuZCh7fSx5LGUoXCJhLGFiYnIsYWNyb255bSxiLGJkaSxiZG8sYmlnLGJyLGNpdGUsY29kZSxkZWwsZGZuLGVtLGZvbnQsaSxpbWcsaW5zLGtiZCxsYWJlbCxtYXAsbWFyayxxLHJ1YnkscnAscnQscyxzYW1wLHNtYWxsLHNwYW4sc3RyaWtlLHN0cm9uZyxzdWIsc3VwLHRpbWUsdHQsdSx2YXJcIikpLEM9ZShcImFuaW1hdGUsYW5pbWF0ZUNvbG9yLGFuaW1hdGVNb3Rpb24sYW5pbWF0ZVRyYW5zZm9ybSxjaXJjbGUsZGVmcyxkZXNjLGVsbGlwc2UsZm9udC1mYWNlLGZvbnQtZmFjZS1uYW1lLGZvbnQtZmFjZS1zcmMsZyxnbHlwaCxoa2VybixpbWFnZSxsaW5lYXJHcmFkaWVudCxsaW5lLG1hcmtlcixtZXRhZGF0YSxtaXNzaW5nLWdseXBoLG1wYXRoLHBhdGgscG9seWdvbixwb2x5bGluZSxyYWRpYWxHcmFkaWVudCxyZWN0LHNldCxzdG9wLHN2Zyxzd2l0Y2gsdGV4dCx0aXRsZSx0c3Bhbix1c2VcIiksRD1lKFwic2NyaXB0LHN0eWxlXCIpLEU9Yi5leHRlbmQoe30sdyxBLEIseixDKSxGPWUoXCJiYWNrZ3JvdW5kLGNpdGUsaHJlZixsb25nZGVzYyxzcmMsdXNlbWFwLHhsaW5rOmhyZWZcIiksRz1lKFwiYWJicixhbGlnbixhbHQsYXhpcyxiZ2NvbG9yLGJvcmRlcixjZWxscGFkZGluZyxjZWxsc3BhY2luZyxjbGFzcyxjbGVhcixjb2xvcixjb2xzLGNvbHNwYW4sY29tcGFjdCxjb29yZHMsZGlyLGZhY2UsaGVhZGVycyxoZWlnaHQsaHJlZmxhbmcsaHNwYWNlLGlkLGlzbWFwLGxhbmcsbGFuZ3VhZ2Usbm9ocmVmLG5vd3JhcCxyZWwscmV2LHJvd3Mscm93c3BhbixydWxlcyxzY29wZSxzY3JvbGxpbmcsc2hhcGUsc2l6ZSxzcGFuLHN0YXJ0LHN1bW1hcnksdGFyZ2V0LHRpdGxlLHR5cGUsdmFsaWduLHZhbHVlLHZzcGFjZSx3aWR0aFwiKSxIPWUoXCJhY2NlbnQtaGVpZ2h0LGFjY3VtdWxhdGUsYWRkaXRpdmUsYWxwaGFiZXRpYyxhcmFiaWMtZm9ybSxhc2NlbnQsYXR0cmlidXRlTmFtZSxhdHRyaWJ1dGVUeXBlLGJhc2VQcm9maWxlLGJib3gsYmVnaW4sYnksY2FsY01vZGUsY2FwLWhlaWdodCxjbGFzcyxjb2xvcixjb2xvci1yZW5kZXJpbmcsY29udGVudCxjeCxjeSxkLGR4LGR5LGRlc2NlbnQsZGlzcGxheSxkdXIsZW5kLGZpbGwsZmlsbC1ydWxlLGZvbnQtZmFtaWx5LGZvbnQtc2l6ZSxmb250LXN0cmV0Y2gsZm9udC1zdHlsZSxmb250LXZhcmlhbnQsZm9udC13ZWlnaHQsZnJvbSxmeCxmeSxnMSxnMixnbHlwaC1uYW1lLGdyYWRpZW50VW5pdHMsaGFuZ2luZyxoZWlnaHQsaG9yaXotYWR2LXgsaG9yaXotb3JpZ2luLXgsaWRlb2dyYXBoaWMsayxrZXlQb2ludHMsa2V5U3BsaW5lcyxrZXlUaW1lcyxsYW5nLG1hcmtlci1lbmQsbWFya2VyLW1pZCxtYXJrZXItc3RhcnQsbWFya2VySGVpZ2h0LG1hcmtlclVuaXRzLG1hcmtlcldpZHRoLG1hdGhlbWF0aWNhbCxtYXgsbWluLG9mZnNldCxvcGFjaXR5LG9yaWVudCxvcmlnaW4sb3ZlcmxpbmUtcG9zaXRpb24sb3ZlcmxpbmUtdGhpY2tuZXNzLHBhbm9zZS0xLHBhdGgscGF0aExlbmd0aCxwb2ludHMscHJlc2VydmVBc3BlY3RSYXRpbyxyLHJlZlgscmVmWSxyZXBlYXRDb3VudCxyZXBlYXREdXIscmVxdWlyZWRFeHRlbnNpb25zLHJlcXVpcmVkRmVhdHVyZXMscmVzdGFydCxyb3RhdGUscngscnksc2xvcGUsc3RlbWgsc3RlbXYsc3RvcC1jb2xvcixzdG9wLW9wYWNpdHksc3RyaWtldGhyb3VnaC1wb3NpdGlvbixzdHJpa2V0aHJvdWdoLXRoaWNrbmVzcyxzdHJva2Usc3Ryb2tlLWRhc2hhcnJheSxzdHJva2UtZGFzaG9mZnNldCxzdHJva2UtbGluZWNhcCxzdHJva2UtbGluZWpvaW4sc3Ryb2tlLW1pdGVybGltaXQsc3Ryb2tlLW9wYWNpdHksc3Ryb2tlLXdpZHRoLHN5c3RlbUxhbmd1YWdlLHRhcmdldCx0ZXh0LWFuY2hvcix0byx0cmFuc2Zvcm0sdHlwZSx1MSx1Mix1bmRlcmxpbmUtcG9zaXRpb24sdW5kZXJsaW5lLXRoaWNrbmVzcyx1bmljb2RlLHVuaWNvZGUtcmFuZ2UsdW5pdHMtcGVyLWVtLHZhbHVlcyx2ZXJzaW9uLHZpZXdCb3gsdmlzaWJpbGl0eSx3aWR0aCx3aWR0aHMseCx4LWhlaWdodCx4MSx4Mix4bGluazphY3R1YXRlLHhsaW5rOmFyY3JvbGUseGxpbms6cm9sZSx4bGluazpzaG93LHhsaW5rOnRpdGxlLHhsaW5rOnR5cGUseG1sOmJhc2UseG1sOmxhbmcseG1sOnNwYWNlLHhtbG5zLHhtbG5zOnhsaW5rLHkseTEseTIsem9vbUFuZFBhblwiKSxJPWIuZXh0ZW5kKHt9LEYsSCxHKSxKPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwcmVcIiksSz0vXihcXHMqKShbXFxzXFxTXSo/KShcXHMqKSQvLEw9ZnVuY3Rpb24oKXtyZXR1cm4gU3RyaW5nLnByb3RvdHlwZS50cmltP2Z1bmN0aW9uKGEpe3JldHVybiBiLmlzU3RyaW5nKGEpP2EudHJpbSgpOmF9OmZ1bmN0aW9uKGEpe3JldHVybiBiLmlzU3RyaW5nKGEpP2EucmVwbGFjZSgvXlxcc1xccyovLFwiXCIpLnJlcGxhY2UoL1xcc1xccyokLyxcIlwiKTphfX0oKTtiLm1vZHVsZShcIm5nU2FuaXRpemVcIixbXSkucHJvdmlkZXIoXCIkc2FuaXRpemVcIixjKSxiLm1vZHVsZShcIm5nU2FuaXRpemVcIikuZmlsdGVyKFwibGlua3lcIixbXCIkc2FuaXRpemVcIixmdW5jdGlvbihhKXt2YXIgYz0vKChmdHB8aHR0cHM/KTpcXC9cXC98KHd3d1xcLil8KG1haWx0bzopP1tBLVphLXowLTkuXyUrLV0rQClcXFMqW15cXHMuOywoKXt9PD5cIuKAneKAmV0vLGU9L15tYWlsdG86LztyZXR1cm4gZnVuY3Rpb24oZixnKXtmdW5jdGlvbiBoKGEpe2EmJm4ucHVzaChkKGEpKX1mdW5jdGlvbiBpKGEsYyl7bi5wdXNoKFwiPGEgXCIpLGIuaXNEZWZpbmVkKGcpJiZuLnB1c2goJ3RhcmdldD1cIicsZywnXCIgJyksbi5wdXNoKCdocmVmPVwiJyxhLnJlcGxhY2UoL1wiL2csXCImcXVvdDtcIiksJ1wiPicpLGgoYyksbi5wdXNoKFwiPC9hPlwiKX1pZighZilyZXR1cm4gZjtmb3IodmFyIGosayxsLG09ZixuPVtdO2o9bS5tYXRjaChjKTspaz1qWzBdLGpbMl18fGpbNF18fChrPShqWzNdP1wiaHR0cDovL1wiOlwibWFpbHRvOlwiKStrKSxsPWouaW5kZXgsaChtLnN1YnN0cigwLGwpKSxpKGssalswXS5yZXBsYWNlKGUsXCJcIikpLG09bS5zdWJzdHJpbmcobCtqWzBdLmxlbmd0aCk7cmV0dXJuIGgobSksYShuLmpvaW4oXCJcIikpfX1dKX0od2luZG93LHdpbmRvdy5hbmd1bGFyKX0oe30sZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSk7IiwiIWZ1bmN0aW9uKGEsYil7YltcInRydWVcIl09YSwvKlxuQGxpY2Vuc2UgdGV4dEFuZ3VsYXJcbkF1dGhvciA6IEF1c3RpbiBBbmRlcnNvblxuTGljZW5zZSA6IDIwMTMgTUlUXG5WZXJzaW9uIDEuMy43XG5cblNlZSBSRUFETUUubWQgb3IgaHR0cHM6Ly9naXRodWIuY29tL2ZyYXl3aW5nL3RleHRBbmd1bGFyL3dpa2kgZm9yIHJlcXVpcmVtZW50cyBhbmQgdXNlLlxuKi9cbmFuZ3VsYXIubW9kdWxlKFwidGV4dEFuZ3VsYXJTZXR1cFwiLFtdKS52YWx1ZShcInRhT3B0aW9uc1wiLHt0b29sYmFyOltbXCJoMVwiLFwiaDJcIixcImgzXCIsXCJoNFwiLFwiaDVcIixcImg2XCIsXCJwXCIsXCJwcmVcIixcInF1b3RlXCJdLFtcImJvbGRcIixcIml0YWxpY3NcIixcInVuZGVybGluZVwiLFwic3RyaWtlVGhyb3VnaFwiLFwidWxcIixcIm9sXCIsXCJyZWRvXCIsXCJ1bmRvXCIsXCJjbGVhclwiXSxbXCJqdXN0aWZ5TGVmdFwiLFwianVzdGlmeUNlbnRlclwiLFwianVzdGlmeVJpZ2h0XCIsXCJpbmRlbnRcIixcIm91dGRlbnRcIl0sW1wiaHRtbFwiLFwiaW5zZXJ0SW1hZ2VcIixcImluc2VydExpbmtcIixcImluc2VydFZpZGVvXCIsXCJ3b3JkY291bnRcIixcImNoYXJjb3VudFwiXV0sY2xhc3Nlczp7Zm9jdXNzZWQ6XCJmb2N1c3NlZFwiLHRvb2xiYXI6XCJidG4tdG9vbGJhclwiLHRvb2xiYXJHcm91cDpcImJ0bi1ncm91cFwiLHRvb2xiYXJCdXR0b246XCJidG4gYnRuLWRlZmF1bHRcIix0b29sYmFyQnV0dG9uQWN0aXZlOlwiYWN0aXZlXCIsZGlzYWJsZWQ6XCJkaXNhYmxlZFwiLHRleHRFZGl0b3I6XCJmb3JtLWNvbnRyb2xcIixodG1sRWRpdG9yOlwiZm9ybS1jb250cm9sXCJ9LHNldHVwOnt0ZXh0RWRpdG9yU2V0dXA6ZnVuY3Rpb24oKXt9LGh0bWxFZGl0b3JTZXR1cDpmdW5jdGlvbigpe319LGRlZmF1bHRGaWxlRHJvcEhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgRmlsZVJlYWRlcjtyZXR1cm5cImltYWdlXCI9PT1hLnR5cGUuc3Vic3RyaW5nKDAsNSk/KGMub25sb2FkPWZ1bmN0aW9uKCl7XCJcIiE9PWMucmVzdWx0JiZiKFwiaW5zZXJ0SW1hZ2VcIixjLnJlc3VsdCwhMCl9LGMucmVhZEFzRGF0YVVSTChhKSwhMCk6ITF9fSkudmFsdWUoXCJ0YVNlbGVjdGFibGVFbGVtZW50c1wiLFtcImFcIixcImltZ1wiXSkudmFsdWUoXCJ0YUN1c3RvbVJlbmRlcmVyc1wiLFt7c2VsZWN0b3I6XCJpbWdcIixjdXN0b21BdHRyaWJ1dGU6XCJ0YS1pbnNlcnQtdmlkZW9cIixyZW5kZXJMb2dpYzpmdW5jdGlvbihhKXt2YXIgYj1hbmd1bGFyLmVsZW1lbnQoXCI8aWZyYW1lPjwvaWZyYW1lPlwiKSxjPWEucHJvcChcImF0dHJpYnV0ZXNcIik7YW5ndWxhci5mb3JFYWNoKGMsZnVuY3Rpb24oYSl7Yi5hdHRyKGEubmFtZSxhLnZhbHVlKX0pLGIuYXR0cihcInNyY1wiLGIuYXR0cihcInRhLWluc2VydC12aWRlb1wiKSksYS5yZXBsYWNlV2l0aChiKX19XSkudmFsdWUoXCJ0YVRyYW5zbGF0aW9uc1wiLHtodG1sOnt0b29sdGlwOlwiVG9nZ2xlIGh0bWwgLyBSaWNoIFRleHRcIn0saGVhZGluZzp7dG9vbHRpcDpcIkhlYWRpbmcgXCJ9LHA6e3Rvb2x0aXA6XCJQYXJhZ3JhcGhcIn0scHJlOnt0b29sdGlwOlwiUHJlZm9ybWF0dGVkIHRleHRcIn0sdWw6e3Rvb2x0aXA6XCJVbm9yZGVyZWQgTGlzdFwifSxvbDp7dG9vbHRpcDpcIk9yZGVyZWQgTGlzdFwifSxxdW90ZTp7dG9vbHRpcDpcIlF1b3RlL3VucW91dGUgc2VsZWN0aW9uIG9yIHBhcmFncmFwaFwifSx1bmRvOnt0b29sdGlwOlwiVW5kb1wifSxyZWRvOnt0b29sdGlwOlwiUmVkb1wifSxib2xkOnt0b29sdGlwOlwiQm9sZFwifSxpdGFsaWM6e3Rvb2x0aXA6XCJJdGFsaWNcIn0sdW5kZXJsaW5lOnt0b29sdGlwOlwiVW5kZXJsaW5lXCJ9LHN0cmlrZVRocm91Z2g6e3Rvb2x0aXA6XCJTdHJpa2V0aHJvdWdoXCJ9LGp1c3RpZnlMZWZ0Ont0b29sdGlwOlwiQWxpZ24gdGV4dCBsZWZ0XCJ9LGp1c3RpZnlSaWdodDp7dG9vbHRpcDpcIkFsaWduIHRleHQgcmlnaHRcIn0sanVzdGlmeUNlbnRlcjp7dG9vbHRpcDpcIkNlbnRlclwifSxpbmRlbnQ6e3Rvb2x0aXA6XCJJbmNyZWFzZSBpbmRlbnRcIn0sb3V0ZGVudDp7dG9vbHRpcDpcIkRlY3JlYXNlIGluZGVudFwifSxjbGVhcjp7dG9vbHRpcDpcIkNsZWFyIGZvcm1hdHRpbmdcIn0saW5zZXJ0SW1hZ2U6e2RpYWxvZ1Byb21wdDpcIlBsZWFzZSBlbnRlciBhbiBpbWFnZSBVUkwgdG8gaW5zZXJ0XCIsdG9vbHRpcDpcIkluc2VydCBpbWFnZVwiLGhvdGtleTpcInRoZSAtIHBvc3NpYmx5IGxhbmd1YWdlIGRlcGVuZGVudCBob3RrZXkgLi4uIGZvciBzb21lIGZ1dHVyZSBpbXBsZW1lbnRhdGlvblwifSxpbnNlcnRWaWRlbzp7dG9vbHRpcDpcIkluc2VydCB2aWRlb1wiLGRpYWxvZ1Byb21wdDpcIlBsZWFzZSBlbnRlciBhIHlvdXR1YmUgVVJMIHRvIGVtYmVkXCJ9LGluc2VydExpbms6e3Rvb2x0aXA6XCJJbnNlcnQgLyBlZGl0IGxpbmtcIixkaWFsb2dQcm9tcHQ6XCJQbGVhc2UgZW50ZXIgYSBVUkwgdG8gaW5zZXJ0XCJ9LGVkaXRMaW5rOntyZUxpbmtCdXR0b246e3Rvb2x0aXA6XCJSZWxpbmtcIn0sdW5MaW5rQnV0dG9uOnt0b29sdGlwOlwiVW5saW5rXCJ9LHRhcmdldFRvZ2dsZTp7YnV0dG9udGV4dDpcIk9wZW4gaW4gTmV3IFdpbmRvd1wifX0sd29yZGNvdW50Ont0b29sdGlwOlwiRGlzcGxheSB3b3JkcyBDb3VudFwifSxjaGFyY291bnQ6e3Rvb2x0aXA6XCJEaXNwbGF5IGNoYXJhY3RlcnMgQ291bnRcIn19KS5ydW4oW1widGFSZWdpc3RlclRvb2xcIixcIiR3aW5kb3dcIixcInRhVHJhbnNsYXRpb25zXCIsXCJ0YVNlbGVjdGlvblwiLGZ1bmN0aW9uKGEsYixjLGQpe2EoXCJodG1sXCIse2ljb25jbGFzczpcImZhIGZhLWNvZGVcIix0b29sdGlwdGV4dDpjLmh0bWwudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXt0aGlzLiRlZGl0b3IoKS5zd2l0Y2hWaWV3KCl9LGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLnNob3dIdG1sfX0pO3ZhciBlPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS5xdWVyeUZvcm1hdEJsb2NrU3RhdGUoYSl9fSxmPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJmb3JtYXRCbG9ja1wiLFwiPFwiK3RoaXMubmFtZS50b1VwcGVyQ2FzZSgpK1wiPlwiKX07YW5ndWxhci5mb3JFYWNoKFtcImgxXCIsXCJoMlwiLFwiaDNcIixcImg0XCIsXCJoNVwiLFwiaDZcIl0sZnVuY3Rpb24oYil7YShiLnRvTG93ZXJDYXNlKCkse2J1dHRvbnRleHQ6Yi50b1VwcGVyQ2FzZSgpLHRvb2x0aXB0ZXh0OmMuaGVhZGluZy50b29sdGlwK2IuY2hhckF0KDEpLGFjdGlvbjpmLGFjdGl2ZVN0YXRlOmUoYi50b0xvd2VyQ2FzZSgpKX0pfSksYShcInBcIix7YnV0dG9udGV4dDpcIlBcIix0b29sdGlwdGV4dDpjLnAudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImZvcm1hdEJsb2NrXCIsXCI8UD5cIil9LGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLnF1ZXJ5Rm9ybWF0QmxvY2tTdGF0ZShcInBcIil9fSksYShcInByZVwiLHtidXR0b250ZXh0OlwicHJlXCIsdG9vbHRpcHRleHQ6Yy5wcmUudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImZvcm1hdEJsb2NrXCIsXCI8UFJFPlwiKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkucXVlcnlGb3JtYXRCbG9ja1N0YXRlKFwicHJlXCIpfX0pLGEoXCJ1bFwiLHtpY29uY2xhc3M6XCJmYSBmYS1saXN0LXVsXCIsdG9vbHRpcHRleHQ6Yy51bC50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiaW5zZXJ0VW5vcmRlcmVkTGlzdFwiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS5xdWVyeUNvbW1hbmRTdGF0ZShcImluc2VydFVub3JkZXJlZExpc3RcIil9fSksYShcIm9sXCIse2ljb25jbGFzczpcImZhIGZhLWxpc3Qtb2xcIix0b29sdGlwdGV4dDpjLm9sLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJpbnNlcnRPcmRlcmVkTGlzdFwiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS5xdWVyeUNvbW1hbmRTdGF0ZShcImluc2VydE9yZGVyZWRMaXN0XCIpfX0pLGEoXCJxdW90ZVwiLHtpY29uY2xhc3M6XCJmYSBmYS1xdW90ZS1yaWdodFwiLHRvb2x0aXB0ZXh0OmMucXVvdGUudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImZvcm1hdEJsb2NrXCIsXCI8QkxPQ0tRVU9URT5cIil9LGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLnF1ZXJ5Rm9ybWF0QmxvY2tTdGF0ZShcImJsb2NrcXVvdGVcIil9fSksYShcInVuZG9cIix7aWNvbmNsYXNzOlwiZmEgZmEtdW5kb1wiLHRvb2x0aXB0ZXh0OmMudW5kby50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwidW5kb1wiLG51bGwpfX0pLGEoXCJyZWRvXCIse2ljb25jbGFzczpcImZhIGZhLXJlcGVhdFwiLHRvb2x0aXB0ZXh0OmMucmVkby50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwicmVkb1wiLG51bGwpfX0pLGEoXCJib2xkXCIse2ljb25jbGFzczpcImZhIGZhLWJvbGRcIix0b29sdGlwdGV4dDpjLmJvbGQudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImJvbGRcIixudWxsKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkucXVlcnlDb21tYW5kU3RhdGUoXCJib2xkXCIpfSxjb21tYW5kS2V5Q29kZTo5OH0pLGEoXCJqdXN0aWZ5TGVmdFwiLHtpY29uY2xhc3M6XCJmYSBmYS1hbGlnbi1sZWZ0XCIsdG9vbHRpcHRleHQ6Yy5qdXN0aWZ5TGVmdC50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwianVzdGlmeUxlZnRcIixudWxsKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7cmV0dXJuIGEmJihiPVwibGVmdFwiPT09YS5jc3MoXCJ0ZXh0LWFsaWduXCIpfHxcImxlZnRcIj09PWEuYXR0cihcImFsaWduXCIpfHxcInJpZ2h0XCIhPT1hLmNzcyhcInRleHQtYWxpZ25cIikmJlwiY2VudGVyXCIhPT1hLmNzcyhcInRleHQtYWxpZ25cIikmJlwianVzdGlmeVwiIT09YS5jc3MoXCJ0ZXh0LWFsaWduXCIpJiYhdGhpcy4kZWRpdG9yKCkucXVlcnlDb21tYW5kU3RhdGUoXCJqdXN0aWZ5UmlnaHRcIikmJiF0aGlzLiRlZGl0b3IoKS5xdWVyeUNvbW1hbmRTdGF0ZShcImp1c3RpZnlDZW50ZXJcIikmJiF0aGlzLiRlZGl0b3IoKS5xdWVyeUNvbW1hbmRTdGF0ZShcImp1c3RpZnlGdWxsXCIpKSxiPWJ8fHRoaXMuJGVkaXRvcigpLnF1ZXJ5Q29tbWFuZFN0YXRlKFwianVzdGlmeUxlZnRcIil9fSksYShcImp1c3RpZnlSaWdodFwiLHtpY29uY2xhc3M6XCJmYSBmYS1hbGlnbi1yaWdodFwiLHRvb2x0aXB0ZXh0OmMuanVzdGlmeVJpZ2h0LnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJqdXN0aWZ5UmlnaHRcIixudWxsKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7cmV0dXJuIGEmJihiPVwicmlnaHRcIj09PWEuY3NzKFwidGV4dC1hbGlnblwiKSksYj1ifHx0aGlzLiRlZGl0b3IoKS5xdWVyeUNvbW1hbmRTdGF0ZShcImp1c3RpZnlSaWdodFwiKX19KSxhKFwianVzdGlmeUNlbnRlclwiLHtpY29uY2xhc3M6XCJmYSBmYS1hbGlnbi1jZW50ZXJcIix0b29sdGlwdGV4dDpjLmp1c3RpZnlDZW50ZXIudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImp1c3RpZnlDZW50ZXJcIixudWxsKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7cmV0dXJuIGEmJihiPVwiY2VudGVyXCI9PT1hLmNzcyhcInRleHQtYWxpZ25cIikpLGI9Ynx8dGhpcy4kZWRpdG9yKCkucXVlcnlDb21tYW5kU3RhdGUoXCJqdXN0aWZ5Q2VudGVyXCIpfX0pLGEoXCJpbmRlbnRcIix7aWNvbmNsYXNzOlwiZmEgZmEtaW5kZW50XCIsdG9vbHRpcHRleHQ6Yy5pbmRlbnQudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImluZGVudFwiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS5xdWVyeUZvcm1hdEJsb2NrU3RhdGUoXCJibG9ja3F1b3RlXCIpfX0pLGEoXCJvdXRkZW50XCIse2ljb25jbGFzczpcImZhIGZhLW91dGRlbnRcIix0b29sdGlwdGV4dDpjLm91dGRlbnQudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcIm91dGRlbnRcIixudWxsKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4hMX19KSxhKFwiaXRhbGljc1wiLHtpY29uY2xhc3M6XCJmYSBmYS1pdGFsaWNcIix0b29sdGlwdGV4dDpjLml0YWxpYy50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiaXRhbGljXCIsbnVsbCl9LGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLnF1ZXJ5Q29tbWFuZFN0YXRlKFwiaXRhbGljXCIpfSxjb21tYW5kS2V5Q29kZToxMDV9KSxhKFwidW5kZXJsaW5lXCIse2ljb25jbGFzczpcImZhIGZhLXVuZGVybGluZVwiLHRvb2x0aXB0ZXh0OmMudW5kZXJsaW5lLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJ1bmRlcmxpbmVcIixudWxsKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkucXVlcnlDb21tYW5kU3RhdGUoXCJ1bmRlcmxpbmVcIil9LGNvbW1hbmRLZXlDb2RlOjExN30pLGEoXCJzdHJpa2VUaHJvdWdoXCIse2ljb25jbGFzczpcImZhIGZhLXN0cmlrZXRocm91Z2hcIixhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcInN0cmlrZVRocm91Z2hcIixudWxsKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQucXVlcnlDb21tYW5kU3RhdGUoXCJzdHJpa2VUaHJvdWdoXCIpfX0pLGEoXCJjbGVhclwiLHtpY29uY2xhc3M6XCJmYSBmYS1iYW5cIix0b29sdGlwdGV4dDpjLmNsZWFyLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM7dGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcInJlbW92ZUZvcm1hdFwiLG51bGwpO3ZhciBlPWFuZ3VsYXIuZWxlbWVudChkLmdldFNlbGVjdGlvbkVsZW1lbnQoKSksZj1mdW5jdGlvbihhKXthPWFuZ3VsYXIuZWxlbWVudChhKTt2YXIgYj1hO2FuZ3VsYXIuZm9yRWFjaChhLmNoaWxkcmVuKCksZnVuY3Rpb24oYSl7dmFyIGM9YW5ndWxhci5lbGVtZW50KFwiPHA+PC9wPlwiKTtjLmh0bWwoYW5ndWxhci5lbGVtZW50KGEpLmh0bWwoKSksYi5hZnRlcihjKSxiPWN9KSxhLnJlbW92ZSgpfTtpZihhbmd1bGFyLmZvckVhY2goZS5maW5kKFwidWxcIiksZiksYW5ndWxhci5mb3JFYWNoKGUuZmluZChcIm9sXCIpLGYpLFwibGlcIj09PWVbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpKXt2YXIgZz1lWzBdLnBhcmVudE5vZGUuY2hpbGROb2RlcyxoPVtdLGk9W10saj0hMTtmb3IoYz0wO2M8Zy5sZW5ndGg7YysrKWdbY109PT1lWzBdP2o9ITA6aj9pLnB1c2goZ1tjXSk6aC5wdXNoKGdbY10pO3ZhciBrPWFuZ3VsYXIuZWxlbWVudChlWzBdLnBhcmVudE5vZGUpLGw9YW5ndWxhci5lbGVtZW50KFwiPHA+PC9wPlwiKTtpZihsLmh0bWwoYW5ndWxhci5lbGVtZW50KGVbMF0pLmh0bWwoKSksMD09PWgubGVuZ3RofHwwPT09aS5sZW5ndGgpMD09PWkubGVuZ3RoP2suYWZ0ZXIobCk6a1swXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShsWzBdLGtbMF0pLDA9PT1oLmxlbmd0aCYmMD09PWkubGVuZ3RoP2sucmVtb3ZlKCk6YW5ndWxhci5lbGVtZW50KGVbMF0pLnJlbW92ZSgpO2Vsc2V7dmFyIG09YW5ndWxhci5lbGVtZW50KFwiPFwiK2tbMF0udGFnTmFtZStcIj48L1wiK2tbMF0udGFnTmFtZStcIj5cIiksbj1hbmd1bGFyLmVsZW1lbnQoXCI8XCIra1swXS50YWdOYW1lK1wiPjwvXCIra1swXS50YWdOYW1lK1wiPlwiKTtmb3IoYz0wO2M8aC5sZW5ndGg7YysrKW0uYXBwZW5kKGFuZ3VsYXIuZWxlbWVudChoW2NdKSk7Zm9yKGM9MDtjPGkubGVuZ3RoO2MrKyluLmFwcGVuZChhbmd1bGFyLmVsZW1lbnQoaVtjXSkpO2suYWZ0ZXIobiksay5hZnRlcihsKSxrLmFmdGVyKG0pLGsucmVtb3ZlKCl9ZC5zZXRTZWxlY3Rpb25Ub0VsZW1lbnRFbmQobFswXSl9dmFyIG89dGhpcy4kZWRpdG9yKCkscD1mdW5jdGlvbihhKXthPWFuZ3VsYXIuZWxlbWVudChhKSxhWzBdIT09by5kaXNwbGF5RWxlbWVudHMudGV4dFswXSYmYS5yZW1vdmVBdHRyKFwiY2xhc3NcIiksYW5ndWxhci5mb3JFYWNoKGEuY2hpbGRyZW4oKSxwKX07YW5ndWxhci5mb3JFYWNoKGUscCksXCJsaVwiIT09ZVswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJlwib2xcIiE9PWVbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpJiZcInVsXCIhPT1lWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImZvcm1hdEJsb2NrXCIsXCJkZWZhdWx0XCIpLGIoKX19KTt2YXIgZz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oKXtjLnVwZGF0ZVRhQmluZHRhVGV4dEVsZW1lbnQoKSxjLmhpZGVQb3BvdmVyKCl9O2EucHJldmVudERlZmF1bHQoKSxjLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLmNzcyhcIndpZHRoXCIsXCIzNzVweFwiKTt2YXIgZT1jLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyQ29udGFpbmVyO2UuZW1wdHkoKTt2YXIgZj1hbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJidG4tZ3JvdXBcIiBzdHlsZT1cInBhZGRpbmctcmlnaHQ6IDZweDtcIj4nKSxnPWFuZ3VsYXIuZWxlbWVudCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIGJ0bi1zbWFsbFwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgdGFiaW5kZXg9XCItMVwiPjEwMCUgPC9idXR0b24+Jyk7Zy5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpLGIuY3NzKHt3aWR0aDpcIjEwMCVcIixoZWlnaHQ6XCJcIn0pLGQoKX0pO3ZhciBoPWFuZ3VsYXIuZWxlbWVudCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIGJ0bi1zbWFsbFwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgdGFiaW5kZXg9XCItMVwiPjUwJSA8L2J1dHRvbj4nKTtoLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksYi5jc3Moe3dpZHRoOlwiNTAlXCIsaGVpZ2h0OlwiXCJ9KSxkKCl9KTt2YXIgaT1hbmd1bGFyLmVsZW1lbnQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBidG4tc21hbGxcIiB1bnNlbGVjdGFibGU9XCJvblwiIHRhYmluZGV4PVwiLTFcIj4yNSUgPC9idXR0b24+Jyk7aS5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpLGIuY3NzKHt3aWR0aDpcIjI1JVwiLGhlaWdodDpcIlwifSksZCgpfSk7dmFyIGo9YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0YWJpbmRleD1cIi0xXCI+UmVzZXQ8L2J1dHRvbj4nKTtqLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksYi5jc3Moe3dpZHRoOlwiXCIsaGVpZ2h0OlwiXCJ9KSxkKCl9KSxmLmFwcGVuZChnKSxmLmFwcGVuZChoKSxmLmFwcGVuZChpKSxmLmFwcGVuZChqKSxlLmFwcGVuZChmKSxmPWFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cImJ0bi1ncm91cFwiIHN0eWxlPVwicGFkZGluZy1yaWdodDogNnB4O1wiPicpO3ZhciBrPWFuZ3VsYXIuZWxlbWVudCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIGJ0bi1zbWFsbFwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZmEgZmEtYWxpZ24tbGVmdFwiPjwvaT48L2J1dHRvbj4nKTtrLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksYi5jc3MoXCJmbG9hdFwiLFwibGVmdFwiKSxiLmNzcyhcImNzc0Zsb2F0XCIsXCJsZWZ0XCIpLGIuY3NzKFwic3R5bGVGbG9hdFwiLFwibGVmdFwiKSxkKCl9KTt2YXIgbD1hbmd1bGFyLmVsZW1lbnQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBidG4tc21hbGxcIiB1bnNlbGVjdGFibGU9XCJvblwiIHRhYmluZGV4PVwiLTFcIj48aSBjbGFzcz1cImZhIGZhLWFsaWduLXJpZ2h0XCI+PC9pPjwvYnV0dG9uPicpO2wub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxiLmNzcyhcImZsb2F0XCIsXCJyaWdodFwiKSxiLmNzcyhcImNzc0Zsb2F0XCIsXCJyaWdodFwiKSxiLmNzcyhcInN0eWxlRmxvYXRcIixcInJpZ2h0XCIpLGQoKX0pO3ZhciBtPWFuZ3VsYXIuZWxlbWVudCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIGJ0bi1zbWFsbFwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZmEgZmEtYWxpZ24tanVzdGlmeVwiPjwvaT48L2J1dHRvbj4nKTttLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksYi5jc3MoXCJmbG9hdFwiLFwiXCIpLGIuY3NzKFwiY3NzRmxvYXRcIixcIlwiKSxiLmNzcyhcInN0eWxlRmxvYXRcIixcIlwiKSxkKCl9KSxmLmFwcGVuZChrKSxmLmFwcGVuZChtKSxmLmFwcGVuZChsKSxlLmFwcGVuZChmKSxmPWFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cImJ0bi1ncm91cFwiPicpO3ZhciBuPWFuZ3VsYXIuZWxlbWVudCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIGJ0bi1zbWFsbFwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZmEgZmEtdHJhc2gtb1wiPjwvaT48L2J1dHRvbj4nKTtuLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksYi5yZW1vdmUoKSxkKCl9KSxmLmFwcGVuZChuKSxlLmFwcGVuZChmKSxjLnNob3dQb3BvdmVyKGIpLGMuc2hvd1Jlc2l6ZU92ZXJsYXkoYil9O2EoXCJpbnNlcnRJbWFnZVwiLHtpY29uY2xhc3M6XCJmYSBmYS1waWN0dXJlLW9cIix0b29sdGlwdGV4dDpjLmluc2VydEltYWdlLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGE9Yi5wcm9tcHQoYy5pbnNlcnRJbWFnZS5kaWFsb2dQcm9tcHQsXCJodHRwOi8vXCIpLGEmJlwiXCIhPT1hJiZcImh0dHA6Ly9cIiE9PWE/dGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImluc2VydEltYWdlXCIsYSwhMCk6dm9pZCAwfSxvbkVsZW1lbnRTZWxlY3Q6e2VsZW1lbnQ6XCJpbWdcIixhY3Rpb246Z319KSxhKFwiaW5zZXJ0VmlkZW9cIix7aWNvbmNsYXNzOlwiZmEgZmEteW91dHViZS1wbGF5XCIsdG9vbHRpcHRleHQ6Yy5pbnNlcnRWaWRlby50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3ZhciBhO2lmKGE9Yi5wcm9tcHQoYy5pbnNlcnRWaWRlby5kaWFsb2dQcm9tcHQsXCJodHRwczovL1wiKSxhJiZcIlwiIT09YSYmXCJodHRwczovL1wiIT09YSl7dmFyIGQ9YS5tYXRjaCgvKFxcP3wmKXY9W14mXSovKTtpZihkJiZkLmxlbmd0aD4wKXt2YXIgZT1cImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkL1wiK2RbMF0uc3Vic3RyaW5nKDMpLGY9JzxpbWcgY2xhc3M9XCJ0YS1pbnNlcnQtdmlkZW9cIiBzcmM9XCJodHRwczovL2ltZy55b3V0dWJlLmNvbS92aS8nK2RbMF0uc3Vic3RyaW5nKDMpKycvaHFkZWZhdWx0LmpwZ1wiIHRhLWluc2VydC12aWRlbz1cIicrZSsnXCIgY29udGVudGVkaXRhYmxlPVwiZmFsc2VcIiBzcmM9XCJcIiBhbGxvd2Z1bGxzY3JlZW49XCJ0cnVlXCIgZnJhbWVib3JkZXI9XCIwXCIgLz4nO3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiaW5zZXJ0SFRNTFwiLGYsITApfX19LG9uRWxlbWVudFNlbGVjdDp7ZWxlbWVudDpcImltZ1wiLG9ubHlXaXRoQXR0cnM6W1widGEtaW5zZXJ0LXZpZGVvXCJdLGFjdGlvbjpnfX0pLGEoXCJpbnNlcnRMaW5rXCIse3Rvb2x0aXB0ZXh0OmMuaW5zZXJ0TGluay50b29sdGlwLGljb25jbGFzczpcImZhIGZhLWxpbmtcIixhY3Rpb246ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gYT1iLnByb21wdChjLmluc2VydExpbmsuZGlhbG9nUHJvbXB0LFwiaHR0cDovL1wiKSxhJiZcIlwiIT09YSYmXCJodHRwOi8vXCIhPT1hP3RoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJjcmVhdGVMaW5rXCIsYSwhMCk6dm9pZCAwfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT9cIkFcIj09PWFbMF0udGFnTmFtZTohMX0sb25FbGVtZW50U2VsZWN0OntlbGVtZW50OlwiYVwiLGFjdGlvbjpmdW5jdGlvbihhLGQsZSl7YS5wcmV2ZW50RGVmYXVsdCgpLGUuZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIuY3NzKFwid2lkdGhcIixcIjQzNXB4XCIpO3ZhciBmPWUuZGlzcGxheUVsZW1lbnRzLnBvcG92ZXJDb250YWluZXI7Zi5lbXB0eSgpLGYuY3NzKFwibGluZS1oZWlnaHRcIixcIjI4cHhcIik7dmFyIGc9YW5ndWxhci5lbGVtZW50KCc8YSBocmVmPVwiJytkLmF0dHIoXCJocmVmXCIpKydcIiB0YXJnZXQ9XCJfYmxhbmtcIj4nK2QuYXR0cihcImhyZWZcIikrXCI8L2E+XCIpO2cuY3NzKHtkaXNwbGF5OlwiaW5saW5lLWJsb2NrXCIsXCJtYXgtd2lkdGhcIjpcIjIwMHB4XCIsb3ZlcmZsb3c6XCJoaWRkZW5cIixcInRleHQtb3ZlcmZsb3dcIjpcImVsbGlwc2lzXCIsXCJ3aGl0ZS1zcGFjZVwiOlwibm93cmFwXCIsXCJ2ZXJ0aWNhbC1hbGlnblwiOlwibWlkZGxlXCJ9KSxmLmFwcGVuZChnKTt2YXIgaD1hbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJidG4tZ3JvdXAgcHVsbC1yaWdodFwiPicpLGk9YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdGFiaW5kZXg9XCItMVwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgdGl0bGU9XCInK2MuZWRpdExpbmsucmVMaW5rQnV0dG9uLnRvb2x0aXArJ1wiPjxpIGNsYXNzPVwiZmEgZmEtZWRpdCBpY29uLWVkaXRcIj48L2k+PC9idXR0b24+Jyk7aS5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBmPWIucHJvbXB0KGMuaW5zZXJ0TGluay5kaWFsb2dQcm9tcHQsZC5hdHRyKFwiaHJlZlwiKSk7ZiYmXCJcIiE9PWYmJlwiaHR0cDovL1wiIT09ZiYmKGQuYXR0cihcImhyZWZcIixmKSxlLnVwZGF0ZVRhQmluZHRhVGV4dEVsZW1lbnQoKSksZS5oaWRlUG9wb3ZlcigpfSksaC5hcHBlbmQoaSk7dmFyIGo9YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdGFiaW5kZXg9XCItMVwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgdGl0bGU9XCInK2MuZWRpdExpbmsudW5MaW5rQnV0dG9uLnRvb2x0aXArJ1wiPjxpIGNsYXNzPVwiZmEgZmEtdW5saW5rIGljb24tdW5saW5rXCI+PC9pPjwvYnV0dG9uPicpO2oub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxkLnJlcGxhY2VXaXRoKGQuY29udGVudHMoKSksZS51cGRhdGVUYUJpbmR0YVRleHRFbGVtZW50KCksZS5oaWRlUG9wb3ZlcigpfSksaC5hcHBlbmQoaik7dmFyIGs9YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdGFiaW5kZXg9XCItMVwiIHVuc2VsZWN0YWJsZT1cIm9uXCI+JytjLmVkaXRMaW5rLnRhcmdldFRvZ2dsZS5idXR0b250ZXh0K1wiPC9idXR0b24+XCIpO1wiX2JsYW5rXCI9PT1kLmF0dHIoXCJ0YXJnZXRcIikmJmsuYWRkQ2xhc3MoXCJhY3RpdmVcIiksay5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpLGQuYXR0cihcInRhcmdldFwiLFwiX2JsYW5rXCI9PT1kLmF0dHIoXCJ0YXJnZXRcIik/XCJcIjpcIl9ibGFua1wiKSxrLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpLGUudXBkYXRlVGFCaW5kdGFUZXh0RWxlbWVudCgpfSksaC5hcHBlbmQoayksZi5hcHBlbmQoaCksZS5zaG93UG9wb3ZlcihkKX19fSksYShcIndvcmRjb3VudFwiLHtkaXNwbGF5Oic8ZGl2IGlkPVwidG9vbGJhcldDXCIgc3R5bGU9XCJkaXNwbGF5OmJsb2NrOyBtaW4td2lkdGg6MTAwcHg7XCI+V29yZHM6e3t3b3JkY291bnR9fTwvZGl2PicsZGlzYWJsZWQ6ITAsd29yZGNvdW50OjAsYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRlZGl0b3IoKS5kaXNwbGF5RWxlbWVudHMudGV4dCxiPWFbMF0uaW5uZXJIVE1MLGM9Yi5yZXBsYWNlKC8oPFtePl0qPz4pL2dpLFwiIFwiKSxkPWMubWF0Y2goL1xcUysvZyksZT1kJiZkLmxlbmd0aHx8MDtyZXR1cm4gdGhpcy53b3JkY291bnQ9ZSx0aGlzLiRlZGl0b3IoKS53b3JkY291bnQ9ZSwhMX19KSxhKFwiY2hhcmNvdW50XCIse2Rpc3BsYXk6JzxkaXYgaWQ9XCJ0b29sYmFyQ0NcIiBzdHlsZT1cImRpc3BsYXk6YmxvY2s7IG1pbi13aWR0aDoxMjBweDtcIj5DaGFyYWN0ZXJzOnt7Y2hhcmNvdW50fX08L2Rpdj4nLGRpc2FibGVkOiEwLGNoYXJjb3VudDowLGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWRpdG9yKCkuZGlzcGxheUVsZW1lbnRzLnRleHQsYj1hWzBdLmlubmVyVGV4dHx8YVswXS50ZXh0Q29udGVudCxjPWIucmVwbGFjZSgvKFxcclxcbnxcXG58XFxyKS9nbSxcIlwiKS5yZXBsYWNlKC9eXFxzKy9nLFwiIFwiKS5yZXBsYWNlKC9cXHMrJC9nLFwiIFwiKS5sZW5ndGg7cmV0dXJuIHRoaXMuY2hhcmNvdW50PWMsdGhpcy4kZWRpdG9yKCkuY2hhcmNvdW50PWMsITF9fSl9XSksLypcbkBsaWNlbnNlIHRleHRBbmd1bGFyXG5BdXRob3IgOiBBdXN0aW4gQW5kZXJzb25cbkxpY2Vuc2UgOiAyMDEzIE1JVFxuVmVyc2lvbiAxLjMuN1xuXG5TZWUgUkVBRE1FLm1kIG9yIGh0dHBzOi8vZ2l0aHViLmNvbS9mcmF5d2luZy90ZXh0QW5ndWxhci93aWtpIGZvciByZXF1aXJlbWVudHMgYW5kIHVzZS5cbiovXG5mdW5jdGlvbigpe1wiVXNlIFN0cmljdFwiO2Z1bmN0aW9uIGEoYSl7dHJ5e3JldHVybiAwIT09YW5ndWxhci5lbGVtZW50KGEpLmxlbmd0aH1jYXRjaChiKXtyZXR1cm4hMX19ZnVuY3Rpb24gYihiLGMpe2lmKCFifHxcIlwiPT09Ynx8ci5oYXNPd25Qcm9wZXJ0eShiKSl0aHJvd1widGV4dEFuZ3VsYXIgRXJyb3I6IEEgdW5pcXVlIG5hbWUgaXMgcmVxdWlyZWQgZm9yIGEgVG9vbCBEZWZpbml0aW9uXCI7aWYoYy5kaXNwbGF5JiYoXCJcIj09PWMuZGlzcGxheXx8IWEoYy5kaXNwbGF5KSl8fCFjLmRpc3BsYXkmJiFjLmJ1dHRvbnRleHQmJiFjLmljb25jbGFzcyl0aHJvdyd0ZXh0QW5ndWxhciBFcnJvcjogVG9vbCBEZWZpbml0aW9uIGZvciBcIicrYisnXCIgZG9lcyBub3QgaGF2ZSBhIHZhbGlkIGRpc3BsYXkvaWNvbmNsYXNzL2J1dHRvbnRleHQgdmFsdWUnO3JbYl09Y312YXIgYz17aWU6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0zLGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxkPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpXCIpO2MuaW5uZXJIVE1MPVwiPCEtLVtpZiBndCBJRSBcIisgKytiK1wiXT48aT48L2k+PCFbZW5kaWZdLS0+XCIsZFswXTspO3JldHVybiBiPjQ/YjphfSgpLHdlYmtpdDovQXBwbGVXZWJLaXRcXC8oW1xcZC5dKykvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpfSxkPSExO2Mud2Via2l0JiYoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGEpe3ZhciBiPWF8fHdpbmRvdy5ldmVudCxjPWIudGFyZ2V0O2lmKGQmJm51bGwhPT1jKXtmb3IodmFyIGU9ITEsZj1jO251bGwhPT1mJiZcImh0bWxcIiE9PWYudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYhZTspZT1cInRydWVcIj09PWYuY29udGVudEVkaXRhYmxlLGY9Zi5wYXJlbnROb2RlO2V8fChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRleHRBbmd1bGFyLWVkaXRhYmxlRml4LTAxMDIwMzA0MDUwNjA3MDgwOVwiKS5zZXRTZWxlY3Rpb25SYW5nZSgwLDApLGMuZm9jdXMoKSxjLnNlbGVjdCYmYy5zZWxlY3QoKSl9ZD0hMX0sITEpLGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXthbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSkuYXBwZW5kKGFuZ3VsYXIuZWxlbWVudCgnPGlucHV0IGlkPVwidGV4dEFuZ3VsYXItZWRpdGFibGVGaXgtMDEwMjAzMDQwNTA2MDcwODA5XCIgY2xhc3M9XCJ0YS1oaWRkZW4taW5wdXRcIiB1bnNlbGVjdGFibGU9XCJvblwiIHRhYkluZGV4PVwiLTFcIj4nKSl9KSk7dmFyIGU9L14oYWRkcmVzc3xhcnRpY2xlfGFzaWRlfGF1ZGlvfGJsb2NrcXVvdGV8Y2FudmFzfGRkfGRpdnxkbHxmaWVsZHNldHxmaWdjYXB0aW9ufGZpZ3VyZXxmb290ZXJ8Zm9ybXxoMXxoMnxoM3xoNHxoNXxoNnxoZWFkZXJ8aGdyb3VwfGhyfG5vc2NyaXB0fG9sfG91dHB1dHxwfHByZXxzZWN0aW9ufHRhYmxlfHRmb290fHVsfHZpZGVvKSQvaSxmPS9eKHVsfGxpfG9sKSQvaSxnPS9eKGFkZHJlc3N8YXJ0aWNsZXxhc2lkZXxhdWRpb3xibG9ja3F1b3RlfGNhbnZhc3xkZHxkaXZ8ZGx8ZmllbGRzZXR8ZmlnY2FwdGlvbnxmaWd1cmV8Zm9vdGVyfGZvcm18aDF8aDJ8aDN8aDR8aDV8aDZ8aGVhZGVyfGhncm91cHxocnxub3NjcmlwdHxvbHxvdXRwdXR8cHxwcmV8c2VjdGlvbnx0YWJsZXx0Zm9vdHx1bHx2aWRlb3xsaSkkL2k7U3RyaW5nLnByb3RvdHlwZS50cmltfHwoU3RyaW5nLnByb3RvdHlwZS50cmltPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKX0pO3ZhciBoLGksayxsLG07aWYoYy5pZT44fHx2b2lkIDA9PT1jLmllKXtmb3IodmFyIG49ZG9jdW1lbnQuc3R5bGVTaGVldHMsbz0wO288bi5sZW5ndGg7bysrKWlmKCgwPT09bltvXS5tZWRpYS5sZW5ndGh8fG5bb10ubWVkaWEubWVkaWFUZXh0Lm1hdGNoKC8oYWxsfHNjcmVlbikvZ2kpKSYmbltvXS5ocmVmJiZuW29dLmhyZWYubWF0Y2goL3RleHRhbmd1bGFyXFwuKG1pblxcLnwpY3NzL2dpKSl7aD1uW29dO2JyZWFrfWh8fChoPWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO3JldHVybiBjLndlYmtpdCYmYS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKSksZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKGEpLGEuc2hlZXR9KCkpLGk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbChoLGEsYil9LGw9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBhLmNzc1J1bGVzP2Q9TWF0aC5tYXgoYS5jc3NSdWxlcy5sZW5ndGgtMSwwKTphLnJ1bGVzJiYoZD1NYXRoLm1heChhLnJ1bGVzLmxlbmd0aC0xLDApKSxhLmluc2VydFJ1bGU/YS5pbnNlcnRSdWxlKGIrXCJ7XCIrYytcIn1cIixkKTphLmFkZFJ1bGUoYixjLGQpLGR9LGs9ZnVuY3Rpb24oYSl7bShoLGEpfSxtPWZ1bmN0aW9uKGEsYil7YS5yZW1vdmVSdWxlP2EucmVtb3ZlUnVsZShiKTphLmRlbGV0ZVJ1bGUoYil9fWFuZ3VsYXIubW9kdWxlKFwidGV4dEFuZ3VsYXIuZmFjdG9yaWVzXCIsW10pLmZhY3RvcnkoXCJ0YUJyb3dzZXJUYWdcIixbZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGE/XCJcIj09PWE/dm9pZCAwPT09Yy5pZT9cImRpdlwiOmMuaWU8PTg/XCJQXCI6XCJwXCI6Yy5pZTw9OD9hLnRvVXBwZXJDYXNlKCk6YTpjLmllPD04P1wiUFwiOlwicFwifX1dKS5mYWN0b3J5KFwidGFBcHBseUN1c3RvbVJlbmRlcmVyc1wiLFtcInRhQ3VzdG9tUmVuZGVyZXJzXCIsXCJ0YURPTVwiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBkPWFuZ3VsYXIuZWxlbWVudChcIjxkaXY+PC9kaXY+XCIpO3JldHVybiBkWzBdLmlubmVySFRNTD1jLGFuZ3VsYXIuZm9yRWFjaChhLGZ1bmN0aW9uKGEpe3ZhciBjPVtdO2Euc2VsZWN0b3ImJlwiXCIhPT1hLnNlbGVjdG9yP2M9ZC5maW5kKGEuc2VsZWN0b3IpOmEuY3VzdG9tQXR0cmlidXRlJiZcIlwiIT09YS5jdXN0b21BdHRyaWJ1dGUmJihjPWIuZ2V0QnlBdHRyaWJ1dGUoZCxhLmN1c3RvbUF0dHJpYnV0ZSkpLGFuZ3VsYXIuZm9yRWFjaChjLGZ1bmN0aW9uKGIpe2I9YW5ndWxhci5lbGVtZW50KGIpLGEuc2VsZWN0b3ImJlwiXCIhPT1hLnNlbGVjdG9yJiZhLmN1c3RvbUF0dHJpYnV0ZSYmXCJcIiE9PWEuY3VzdG9tQXR0cmlidXRlP3ZvaWQgMCE9PWIuYXR0cihhLmN1c3RvbUF0dHJpYnV0ZSkmJmEucmVuZGVyTG9naWMoYik6YS5yZW5kZXJMb2dpYyhiKX0pfSksZFswXS5pbm5lckhUTUx9fV0pLmZhY3RvcnkoXCJ0YUZpeENocm9tZVwiLGZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oYSl7aWYoIWF8fCFhbmd1bGFyLmlzU3RyaW5nKGEpfHxhLmxlbmd0aDw9MClyZXR1cm4gYTtmb3IodmFyIGIsYyxkLGU9LzwoW14+XFwvXSs/KXN0eWxlPShcIihbXlwiXSspXCJ8JyhbXiddKyknKShbXj5dKik+L2dpLGY9XCJcIixnPTA7Yj1lLmV4ZWMoYSk7KWM9YlszXXx8Yls0XSxjJiZjLm1hdGNoKC9saW5lLWhlaWdodDogMS40Mjg1NzE0Mjk7fGNvbG9yOiBpbmhlcml0OyBsaW5lLWhlaWdodDogMS4xOy9pKSYmKGM9Yy5yZXBsYWNlKC8oIHwpZm9udC1mYW1pbHk6IGluaGVyaXQ7fCggfClsaW5lLWhlaWdodDogMS40Mjg1NzE0Mjk7fCggfClsaW5lLWhlaWdodDoxLjE7fCggfCljb2xvcjogaW5oZXJpdDsvZ2ksXCJcIiksZD1cIjxcIitiWzFdLnRyaW0oKSxjLmxlbmd0aD4wJiYoZCs9XCIgc3R5bGU9XCIrYlsyXS5zdWJzdHJpbmcoMCwxKStjK2JbMl0uc3Vic3RyaW5nKDAsMSkpLGQrPWJbNV0udHJpbSgpK1wiPlwiLGYrPWEuc3Vic3RyaW5nKGcsYi5pbmRleCkrZCxnPWIuaW5kZXgrYlswXS5sZW5ndGgpO3JldHVybiBmKz1hLnN1YnN0cmluZyhnKSxnPjA/Zi5yZXBsYWNlKC88c3Bhblxccyo+KC4qPyk8XFwvc3Bhbj4oPGJyKFxcL3wpPnwpL2dpLFwiJDFcIik6YX07cmV0dXJuIGF9KS5mYWN0b3J5KFwidGFTYW5pdGl6ZVwiLFtcIiRzYW5pdGl6ZVwiLFwidGFET01cIixmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7Zm9yKHZhciBjLGQ9MCxlPTAsZj0vPFtePl0qPi9naTtjPWYuZXhlYyhhKTspaWYoZT1jLmluZGV4LFwiL1wiPT09Y1swXS5zdWJzdHIoMSwxKSl7aWYoMD09PWQpYnJlYWs7ZC0tfWVsc2UgZCsrO3JldHVybiBiK2Euc3Vic3RyaW5nKDAsZSkrYW5ndWxhci5lbGVtZW50KGIpWzBdLm91dGVySFRNTC5zdWJzdHJpbmcoYi5sZW5ndGgpK2Euc3Vic3RyaW5nKGUpfWZ1bmN0aW9uIGMoYSl7aWYoIWF8fCFhbmd1bGFyLmlzU3RyaW5nKGEpfHxhLmxlbmd0aDw9MClyZXR1cm4gYTtmb3IodmFyIGQsZixnLGgsaixrPS88KFtePlxcL10rPylzdHlsZT0oXCIoW15cIl0rKVwifCcoW14nXSspJykoW14+XSopPi9naSxsPVwiXCIsbT1cIlwiLG49MDtmPWsuZXhlYyhhKTspe2c9ZlszXXx8Zls0XTt2YXIgbz1uZXcgUmVnRXhwKGksXCJpXCIpO2lmKGFuZ3VsYXIuaXNTdHJpbmcoZykmJm8udGVzdChnKSl7aD1cIlwiO2Zvcih2YXIgcD1uZXcgUmVnRXhwKGksXCJpZ1wiKTtzdWJNYXRjaD1wLmV4ZWMoZyk7KWZvcihkPTA7ZDxlLmxlbmd0aDtkKyspc3ViTWF0Y2hbMipkKzJdJiYoaCs9XCI8XCIrZVtkXS50YWcrXCI+XCIpO2o9YyhhLnN1YnN0cmluZyhuLGYuaW5kZXgpKSxtKz1sLmxlbmd0aD4wP2IoaixsKTpqLGc9Zy5yZXBsYWNlKG5ldyBSZWdFeHAoaSxcImlnXCIpLFwiXCIpLG0rPVwiPFwiK2ZbMV0udHJpbSgpLGcubGVuZ3RoPjAmJihtKz0nIHN0eWxlPVwiJytnKydcIicpLG0rPWZbNV0rXCI+XCIsbj1mLmluZGV4K2ZbMF0ubGVuZ3RoLGw9aH19cmV0dXJuIG0rPWwubGVuZ3RoPjA/YihhLnN1YnN0cmluZyhuKSxsKTphLnN1YnN0cmluZyhuKX1mdW5jdGlvbiBkKGEpe2lmKCFhfHwhYW5ndWxhci5pc1N0cmluZyhhKXx8YS5sZW5ndGg8PTApcmV0dXJuIGE7Zm9yKHZhciBiLGM9LzwoW14+XFwvXSs/KWFsaWduPShcIihbXlwiXSspXCJ8JyhbXiddKyknKShbXj5dKik+L2dpLGQ9XCJcIixlPTA7Yj1jLmV4ZWMoYSk7KWQrPWEuc3Vic3RyaW5nKGUsYi5pbmRleCksZT1iLmluZGV4K2JbMF0ubGVuZ3RoLG5ld1RhZz1cIjxcIitiWzFdK2JbNV0sL3N0eWxlPShcIihbXlwiXSspXCJ8JyhbXiddKyknKS9naS50ZXN0KG5ld1RhZyk/bmV3VGFnPW5ld1RhZy5yZXBsYWNlKC9zdHlsZT0oXCIoW15cIl0rKVwifCcoW14nXSspJykvaSwnc3R5bGU9XCIkMiQzIHRleHQtYWxpZ246JysoYlszXXx8Yls0XSkrJztcIicpOm5ld1RhZys9JyBzdHlsZT1cInRleHQtYWxpZ246JysoYlszXXx8Yls0XSkrJztcIicsbmV3VGFnKz1cIj5cIixkKz1uZXdUYWc7cmV0dXJuIGQrYS5zdWJzdHJpbmcoZSl9Zm9yKHZhciBlPVt7cHJvcGVydHk6XCJmb250LXdlaWdodFwiLHZhbHVlczpbXCJib2xkXCJdLHRhZzpcImJcIn0se3Byb3BlcnR5OlwiZm9udC1zdHlsZVwiLHZhbHVlczpbXCJpdGFsaWNcIl0sdGFnOlwiaVwifV0sZj1bXSxnPTA7ZzxlLmxlbmd0aDtnKyspe3ZhciBoPVwiKFwiK2VbZ10ucHJvcGVydHkrXCI6XFxcXHMqKFwiO2ZvcihqPTA7ajxlW2ddLnZhbHVlcy5sZW5ndGg7aisrKWo+MCYmKGgrPVwifFwiKSxoKz1lW2ddLnZhbHVlc1tqXTtoKz1cIik7KVwiLGYucHVzaChoKX12YXIgaT1cIihcIitmLmpvaW4oXCJ8XCIpK1wiKVwiO3JldHVybiBmdW5jdGlvbihiLGUsZil7aWYoIWYpdHJ5e2I9YyhiKX1jYXRjaChnKXt9Yj1kKGIpO3ZhciBoO3RyeXtoPWEoYiksZiYmKGg9Yil9Y2F0Y2goZyl7aD1lfHxcIlwifXZhciBpPWgubWF0Y2goLyg8cHJlW14+XSo+Lio/PFxcL3ByZVtePl0qPikvZ2kpO3Byb2Nlc3NlZFNhZmU9aC5yZXBsYWNlKC8oJiMoOXwxMCk7KSovZ2ksXCJcIik7dmFyIGosaz0vPHByZVtePl0qPi4qPzxcXC9wcmVbXj5dKj4vZ2ksbD0wLG09MDtmb3IoaD1cIlwiO251bGwhPT0oaj1rLmV4ZWMocHJvY2Vzc2VkU2FmZSkpJiZsPGkubGVuZ3RoOyloKz1wcm9jZXNzZWRTYWZlLnN1YnN0cmluZyhtLGouaW5kZXgpK2lbbF0sbT1qLmluZGV4K2pbMF0ubGVuZ3RoLGwrKztyZXR1cm4gaCtwcm9jZXNzZWRTYWZlLnN1YnN0cmluZyhtKX19XSkuZmFjdG9yeShcInRhVG9vbEV4ZWN1dGVBY3Rpb25cIixbXCIkcVwiLFwiJGxvZ1wiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe3ZvaWQgMCE9PWMmJih0aGlzLiRlZGl0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gY30pO3ZhciBkPWEuZGVmZXIoKSxlPWQucHJvbWlzZSxmPXRoaXMuJGVkaXRvcigpO2VbXCJmaW5hbGx5XCJdKGZ1bmN0aW9uKCl7Zi5lbmRBY3Rpb24uY2FsbChmKX0pO3ZhciBnO3RyeXtnPXRoaXMuYWN0aW9uKGQsZi5zdGFydEFjdGlvbigpKX1jYXRjaChoKXtiLmVycm9yKGgpfShnfHx2b2lkIDA9PT1nKSYmZC5yZXNvbHZlKCl9fV0pLGFuZ3VsYXIubW9kdWxlKFwidGV4dEFuZ3VsYXIuRE9NXCIsW1widGV4dEFuZ3VsYXIuZmFjdG9yaWVzXCJdKS5mYWN0b3J5KFwidGFFeGVjQ29tbWFuZFwiLFtcInRhU2VsZWN0aW9uXCIsXCJ0YUJyb3dzZXJUYWdcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihiLGMpe3ZhciBkLGUsZj1iLmZpbmQoXCJsaVwiKTtmb3IoZT1mLmxlbmd0aC0xO2U+PTA7ZS0tKWQ9YW5ndWxhci5lbGVtZW50KFwiPFwiK2MrXCI+XCIrZltlXS5pbm5lckhUTUwrXCI8L1wiK2MrXCI+XCIpLGIuYWZ0ZXIoZCk7Yi5yZW1vdmUoKSxhLnNldFNlbGVjdGlvblRvRWxlbWVudEVuZChkWzBdKX0sZz1mdW5jdGlvbihiKXsvKDxicih8XFwvKT4pJC9pLnRlc3QoYi5pbm5lckhUTUwudHJpbSgpKT9hLnNldFNlbGVjdGlvbkJlZm9yZUVsZW1lbnQoYW5ndWxhci5lbGVtZW50KGIpLmZpbmQoXCJiclwiKVswXSk6YS5zZXRTZWxlY3Rpb25Ub0VsZW1lbnRFbmQoYil9LGg9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hbmd1bGFyLmVsZW1lbnQoXCI8XCIrYitcIj5cIithWzBdLmlubmVySFRNTCtcIjwvXCIrYitcIj5cIik7YS5hZnRlcihjKSxhLnJlbW92ZSgpLGcoYy5maW5kKFwibGlcIilbMF0pfSxpPWZ1bmN0aW9uKGEsYyxkKXtmb3IodmFyIGU9XCJcIixmPTA7ZjxhLmxlbmd0aDtmKyspZSs9XCI8XCIrYihcImxpXCIpK1wiPlwiK2FbZl0uaW5uZXJIVE1MK1wiPC9cIitiKFwibGlcIikrXCI+XCI7dmFyIGg9YW5ndWxhci5lbGVtZW50KFwiPFwiK2QrXCI+XCIrZStcIjwvXCIrZCtcIj5cIik7Yy5hZnRlcihoKSxjLnJlbW92ZSgpLGcoaC5maW5kKFwibGlcIilbMF0pfTtyZXR1cm4gZnVuY3Rpb24oZyxqKXtyZXR1cm4gZz1iKGcpLGZ1bmN0aW9uKGssbCxtKXt2YXIgbixvLHAscSxyLHMsdCx1PWFuZ3VsYXIuZWxlbWVudChcIjxcIitnK1wiPlwiKTt0cnl7dD1hLmdldFNlbGVjdGlvbkVsZW1lbnQoKX1jYXRjaCh2KXt9dmFyIHc9YW5ndWxhci5lbGVtZW50KHQpO2lmKHZvaWQgMCE9PXQpe3ZhciB4PXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO2lmKFwiaW5zZXJ0b3JkZXJlZGxpc3RcIj09PWsudG9Mb3dlckNhc2UoKXx8XCJpbnNlcnR1bm9yZGVyZWRsaXN0XCI9PT1rLnRvTG93ZXJDYXNlKCkpe3ZhciB5PWIoXCJpbnNlcnRvcmRlcmVkbGlzdFwiPT09ay50b0xvd2VyQ2FzZSgpP1wib2xcIjpcInVsXCIpO2lmKHg9PT15KXJldHVybiBkKHcsZyk7aWYoXCJsaVwiPT09eCYmdy5wYXJlbnQoKVswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PT15JiYxPT09dy5wYXJlbnQoKS5jaGlsZHJlbigpLmxlbmd0aClyZXR1cm4gZCh3LnBhcmVudCgpLGcpO2lmKFwibGlcIj09PXgmJncucGFyZW50KClbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpIT09eSYmMT09PXcucGFyZW50KCkuY2hpbGRyZW4oKS5sZW5ndGgpcmV0dXJuIGgody5wYXJlbnQoKSx5KTtpZih4Lm1hdGNoKGUpJiYhdy5oYXNDbGFzcyhcInRhLWJpbmRcIikpe2lmKFwib2xcIj09PXh8fFwidWxcIj09PXgpcmV0dXJuIGgodyx5KTt2YXIgej0hMTtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKHcuY2hpbGRyZW4oKSxmdW5jdGlvbihhKXthLnRhZ05hbWUubWF0Y2goZSkmJih6PSEwKX0pLHo/aSh3LmNoaWxkcmVuKCksdyx5KTppKFthbmd1bGFyLmVsZW1lbnQoXCI8ZGl2PlwiK3QuaW5uZXJIVE1MK1wiPC9kaXY+XCIpWzBdXSx3LHkpfWlmKHgubWF0Y2goZSkpe2lmKHE9YS5nZXRPbmx5U2VsZWN0ZWRFbGVtZW50cygpLDA9PT1xLmxlbmd0aClvPWFuZ3VsYXIuZWxlbWVudChcIjxcIit5K1wiPjxsaT5cIit0LmlubmVySFRNTCtcIjwvbGk+PC9cIit5K1wiPlwiKSx3Lmh0bWwoXCJcIiksdy5hcHBlbmQobyk7ZWxzZXtpZigxPT09cS5sZW5ndGgmJihcIm9sXCI9PT1xWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKXx8XCJ1bFwiPT09cVswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpKXJldHVybiBxWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09PXk/ZChhbmd1bGFyLmVsZW1lbnQocVswXSksZyk6aChhbmd1bGFyLmVsZW1lbnQocVswXSkseSk7cD1cIlwiO3ZhciBBPVtdO2ZvcihuPTA7bjxxLmxlbmd0aDtuKyspaWYoMyE9PXFbbl0ubm9kZVR5cGUpe3ZhciBCPWFuZ3VsYXIuZWxlbWVudChxW25dKTtpZihcImxpXCI9PT1xW25dLnRhZ05hbWUudG9Mb3dlckNhc2UoKSljb250aW51ZTtwKz1cIm9sXCI9PT1xW25dLnRhZ05hbWUudG9Mb3dlckNhc2UoKXx8XCJ1bFwiPT09cVtuXS50YWdOYW1lLnRvTG93ZXJDYXNlKCk/QlswXS5pbm5lckhUTUw6XCJzcGFuXCIhPT1xW25dLnRhZ05hbWUudG9Mb3dlckNhc2UoKXx8XCJvbFwiIT09cVtuXS5jaGlsZE5vZGVzWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmXCJ1bFwiIT09cVtuXS5jaGlsZE5vZGVzWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKT9cIjxcIitiKFwibGlcIikrXCI+XCIrQlswXS5pbm5lckhUTUwrXCI8L1wiK2IoXCJsaVwiKStcIj5cIjpCWzBdLmNoaWxkTm9kZXNbMF0uaW5uZXJIVE1MLEEudW5zaGlmdChCKX1vPWFuZ3VsYXIuZWxlbWVudChcIjxcIit5K1wiPlwiK3ArXCI8L1wiK3krXCI+XCIpLEEucG9wKCkucmVwbGFjZVdpdGgobyksYW5ndWxhci5mb3JFYWNoKEEsZnVuY3Rpb24oYSl7YS5yZW1vdmUoKX0pfXJldHVybiB2b2lkIGEuc2V0U2VsZWN0aW9uVG9FbGVtZW50RW5kKG9bMF0pfX1lbHNle2lmKFwiZm9ybWF0YmxvY2tcIj09PWsudG9Mb3dlckNhc2UoKSl7Zm9yKHM9bS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1s8Pl0vZ2ksXCJcIiksXCJkZWZhdWx0XCI9PT1zLnRyaW0oKSYmKHM9ZyxtPVwiPFwiK2crXCI+XCIpLG89XCJsaVwiPT09eD93LnBhcmVudCgpOnc7IW9bMF0udGFnTmFtZXx8IW9bMF0udGFnTmFtZS5tYXRjaChlKSYmIW8ucGFyZW50KCkuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiKTspbz1vLnBhcmVudCgpLHg9KG9bMF0udGFnTmFtZXx8XCJcIikudG9Mb3dlckNhc2UoKTtpZih4PT09cyl7cT1vLmNoaWxkcmVuKCk7dmFyIEM9ITE7Zm9yKG49MDtuPHEubGVuZ3RoO24rKylDPUN8fHFbbl0udGFnTmFtZS5tYXRjaChlKTtDPyhvLmFmdGVyKHEpLHI9by5uZXh0KCksby5yZW1vdmUoKSxvPXIpOih1LmFwcGVuZChvWzBdLmNoaWxkTm9kZXMpLG8uYWZ0ZXIodSksby5yZW1vdmUoKSxvPXUpfWVsc2UgaWYoby5wYXJlbnQoKVswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkhPT1zfHxvLnBhcmVudCgpLmhhc0NsYXNzKFwidGEtYmluZFwiKSlpZih4Lm1hdGNoKGYpKW8ud3JhcChtKTtlbHNle2ZvcihxPWEuZ2V0T25seVNlbGVjdGVkRWxlbWVudHMoKSwwPT09cS5sZW5ndGgmJihxPVtvWzBdXSksbj0wO248cS5sZW5ndGg7bisrKWlmKDM9PT1xW25dLm5vZGVUeXBlfHwhcVtuXS50YWdOYW1lLm1hdGNoKGUpKWZvcig7Mz09PXFbbl0ubm9kZVR5cGV8fCFxW25dLnRhZ05hbWV8fCFxW25dLnRhZ05hbWUubWF0Y2goZSk7KXFbbl09cVtuXS5wYXJlbnROb2RlO2lmKGFuZ3VsYXIuZWxlbWVudChxWzBdKS5oYXNDbGFzcyhcInRhLWJpbmRcIikpbz1hbmd1bGFyLmVsZW1lbnQobSksb1swXS5pbm5lckhUTUw9cVswXS5pbm5lckhUTUwscVswXS5pbm5lckhUTUw9b1swXS5vdXRlckhUTUw7ZWxzZSBpZihcImJsb2NrcXVvdGVcIj09PXMpe2ZvcihwPVwiXCIsbj0wO248cS5sZW5ndGg7bisrKXArPXFbbl0ub3V0ZXJIVE1MO2ZvcihvPWFuZ3VsYXIuZWxlbWVudChtKSxvWzBdLmlubmVySFRNTD1wLHFbMF0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUob1swXSxxWzBdKSxuPXEubGVuZ3RoLTE7bj49MDtuLS0pcVtuXS5wYXJlbnROb2RlJiZxW25dLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocVtuXSl9ZWxzZSBmb3Iobj0wO248cS5sZW5ndGg7bisrKW89YW5ndWxhci5lbGVtZW50KG0pLG9bMF0uaW5uZXJIVE1MPXFbbl0uaW5uZXJIVE1MLHFbbl0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUob1swXSxxW25dKSxxW25dLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocVtuXSl9ZWxzZXt2YXIgRD1vLnBhcmVudCgpLEU9RC5jb250ZW50cygpO2ZvcihuPTA7bjxFLmxlbmd0aDtuKyspRC5wYXJlbnQoKS5oYXNDbGFzcyhcInRhLWJpbmRcIikmJjM9PT1FW25dLm5vZGVUeXBlJiYodT1hbmd1bGFyLmVsZW1lbnQoXCI8XCIrZytcIj5cIiksdVswXS5pbm5lckhUTUw9RVtuXS5vdXRlckhUTUwsRVtuXT11WzBdKSxELnBhcmVudCgpWzBdLmluc2VydEJlZm9yZShFW25dLERbMF0pO0QucmVtb3ZlKCl9cmV0dXJuIHZvaWQgYS5zZXRTZWxlY3Rpb25Ub0VsZW1lbnRFbmQob1swXSl9aWYoXCJjcmVhdGVsaW5rXCI9PT1rLnRvTG93ZXJDYXNlKCkpe3ZhciBGPWEuZ2V0U2VsZWN0aW9uKCk7aWYoRi5jb2xsYXBzZWQpcmV0dXJuIHZvaWQgYS5pbnNlcnRIdG1sKCc8YSBocmVmPVwiJyttKydcIj4nK20rXCI8L2E+XCIsail9ZWxzZSBpZihcImluc2VydGh0bWxcIj09PWsudG9Mb3dlckNhc2UoKSlyZXR1cm4gdm9pZCBhLmluc2VydEh0bWwobSxqKX19dHJ5e2NbMF0uZXhlY0NvbW1hbmQoayxsLG0pfWNhdGNoKHYpe319fX1dKS5zZXJ2aWNlKFwidGFTZWxlY3Rpb25cIixbXCIkd2luZG93XCIsXCIkZG9jdW1lbnRcIixcInRhRE9NXCIsZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWJbMF0sZj1hLnJhbmd5LGg9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS50YWdOYW1lJiZhLnRhZ05hbWUubWF0Y2goL15iciQvaSkmJjA9PT1iJiYhYS5wcmV2aW91c1NpYmxpbmc/e2VsZW1lbnQ6YS5wYXJlbnROb2RlLG9mZnNldDowfTp7ZWxlbWVudDphLG9mZnNldDpifX0saT17Z2V0U2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9Zi5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZUF0KDApLGI9YS5jb21tb25BbmNlc3RvckNvbnRhaW5lcixjPXtzdGFydDpoKGEuc3RhcnRDb250YWluZXIsYS5zdGFydE9mZnNldCksZW5kOmgoYS5lbmRDb250YWluZXIsYS5lbmRPZmZzZXQpLGNvbGxhcHNlZDphLmNvbGxhcHNlZH07cmV0dXJuIGI9Mz09PWIubm9kZVR5cGU/Yi5wYXJlbnROb2RlOmIsYy5jb250YWluZXI9Yi5wYXJlbnROb2RlPT09Yy5zdGFydC5lbGVtZW50fHxiLnBhcmVudE5vZGU9PT1jLmVuZC5lbGVtZW50P2IucGFyZW50Tm9kZTpiLGN9LGdldE9ubHlTZWxlY3RlZEVsZW1lbnRzOmZ1bmN0aW9uKCl7dmFyIGE9Zi5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZUF0KDApLGI9YS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjtyZXR1cm4gYj0zPT09Yi5ub2RlVHlwZT9iLnBhcmVudE5vZGU6YixhLmdldE5vZGVzKFsxXSxmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlPT09Yn0pfSxnZXRTZWxlY3Rpb25FbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIGkuZ2V0U2VsZWN0aW9uKCkuY29udGFpbmVyfSxzZXRTZWxlY3Rpb246ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWYuY3JlYXRlUmFuZ2UoKTtkLnNldFN0YXJ0KGEsYiksZC5zZXRFbmQoYSxjKSxmLmdldFNlbGVjdGlvbigpLnNldFNpbmdsZVJhbmdlKGQpfSxzZXRTZWxlY3Rpb25CZWZvcmVFbGVtZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWYuY3JlYXRlUmFuZ2UoKTtiLnNlbGVjdE5vZGUoYSksYi5jb2xsYXBzZSghMCksZi5nZXRTZWxlY3Rpb24oKS5zZXRTaW5nbGVSYW5nZShiKX0sc2V0U2VsZWN0aW9uQWZ0ZXJFbGVtZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWYuY3JlYXRlUmFuZ2UoKTtiLnNlbGVjdE5vZGUoYSksYi5jb2xsYXBzZSghMSksZi5nZXRTZWxlY3Rpb24oKS5zZXRTaW5nbGVSYW5nZShiKX0sc2V0U2VsZWN0aW9uVG9FbGVtZW50U3RhcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9Zi5jcmVhdGVSYW5nZSgpO2Iuc2VsZWN0Tm9kZUNvbnRlbnRzKGEpLGIuY29sbGFwc2UoITApLGYuZ2V0U2VsZWN0aW9uKCkuc2V0U2luZ2xlUmFuZ2UoYil9LHNldFNlbGVjdGlvblRvRWxlbWVudEVuZDpmdW5jdGlvbihhKXt2YXIgYj1mLmNyZWF0ZVJhbmdlKCk7Yi5zZWxlY3ROb2RlQ29udGVudHMoYSksYi5jb2xsYXBzZSghMSksYS5jaGlsZE5vZGVzJiZhLmNoaWxkTm9kZXNbYS5jaGlsZE5vZGVzLmxlbmd0aC0xXSYmXCJiclwiPT09YS5jaGlsZE5vZGVzW2EuY2hpbGROb2Rlcy5sZW5ndGgtMV0ubm9kZU5hbWUmJihiLnN0YXJ0T2Zmc2V0PWIuZW5kT2Zmc2V0PWIuc3RhcnRPZmZzZXQtMSksZi5nZXRTZWxlY3Rpb24oKS5zZXRTaW5nbGVSYW5nZShiKX0saW5zZXJ0SHRtbDpmdW5jdGlvbihhLGIpe3ZhciBoLGosayxsLG0sbixvLHA9YW5ndWxhci5lbGVtZW50KFwiPGRpdj5cIithK1wiPC9kaXY+XCIpLHE9Zi5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZUF0KDApLHI9ZC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkscz1wWzBdLmNoaWxkTm9kZXMsdD0hMDtpZihzLmxlbmd0aD4wKXtmb3IobD1bXSxrPTA7azxzLmxlbmd0aDtrKyspXCJwXCI9PT1zW2tdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJlwiXCI9PT1zW2tdLmlubmVySFRNTC50cmltKCl8fDM9PT1zW2tdLm5vZGVUeXBlJiZcIlwiPT09c1trXS5ub2RlVmFsdWUudHJpbSgpfHwodD10JiYhZS50ZXN0KHNba10ubm9kZU5hbWUpLGwucHVzaChzW2tdKSk7Zm9yKHZhciB1PTA7dTxsLmxlbmd0aDt1Kyspbj1yLmFwcGVuZENoaWxkKGxbdV0pOyF0JiZxLmNvbGxhcHNlZCYmL14ofDxicih8XFwvKT4pJC9pLnRlc3QocS5zdGFydENvbnRhaW5lci5pbm5lckhUTUwpJiZxLnNlbGVjdE5vZGUocS5zdGFydENvbnRhaW5lcil9ZWxzZSB0PSEwLG49cj1kLmNyZWF0ZVRleHROb2RlKGEpO2lmKHQpcS5kZWxldGVDb250ZW50cygpO2Vsc2UgaWYocS5jb2xsYXBzZWQmJnEuc3RhcnRDb250YWluZXIhPT1iKWlmKHEuc3RhcnRDb250YWluZXIuaW5uZXJIVE1MJiZxLnN0YXJ0Q29udGFpbmVyLmlubmVySFRNTC5tYXRjaCgvXjxbXj5dKj4kL2kpKWg9cS5zdGFydENvbnRhaW5lciwxPT09cS5zdGFydE9mZnNldD8ocS5zZXRTdGFydEFmdGVyKGgpLHEuc2V0RW5kQWZ0ZXIoaCkpOihxLnNldFN0YXJ0QmVmb3JlKGgpLHEuc2V0RW5kQmVmb3JlKGgpKTtlbHNle2lmKDM9PT1xLnN0YXJ0Q29udGFpbmVyLm5vZGVUeXBlJiZxLnN0YXJ0Q29udGFpbmVyLnBhcmVudE5vZGUhPT1iKWZvcihoPXEuc3RhcnRDb250YWluZXIucGFyZW50Tm9kZSxqPWguY2xvbmVOb2RlKCksYy5zcGxpdE5vZGVzKGguY2hpbGROb2RlcyxoLGoscS5zdGFydENvbnRhaW5lcixxLnN0YXJ0T2Zmc2V0KTshZy50ZXN0KGgubm9kZU5hbWUpOyl7YW5ndWxhci5lbGVtZW50KGgpLmFmdGVyKGopLGg9aC5wYXJlbnROb2RlO3ZhciB2PWo7aj1oLmNsb25lTm9kZSgpLGMuc3BsaXROb2RlcyhoLmNoaWxkTm9kZXMsaCxqLHYpfWVsc2UgaD1xLnN0YXJ0Q29udGFpbmVyLGo9aC5jbG9uZU5vZGUoKSxjLnNwbGl0Tm9kZXMoaC5jaGlsZE5vZGVzLGgsaix2b2lkIDAsdm9pZCAwLHEuc3RhcnRPZmZzZXQpO2lmKGFuZ3VsYXIuZWxlbWVudChoKS5hZnRlcihqKSxxLnNldFN0YXJ0QWZ0ZXIoaCkscS5zZXRFbmRBZnRlcihoKSwvXih8PGJyKHxcXC8pPikkL2kudGVzdChoLmlubmVySFRNTC50cmltKCkpJiYocS5zZXRTdGFydEJlZm9yZShoKSxxLnNldEVuZEJlZm9yZShoKSxhbmd1bGFyLmVsZW1lbnQoaCkucmVtb3ZlKCkpLC9eKHw8YnIofFxcLyk+KSQvaS50ZXN0KGouaW5uZXJIVE1MLnRyaW0oKSkmJmFuZ3VsYXIuZWxlbWVudChqKS5yZW1vdmUoKSxcImxpXCI9PT1oLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2ZvcihvPWQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLG09MDttPHIuY2hpbGROb2Rlcy5sZW5ndGg7bSsrKXA9YW5ndWxhci5lbGVtZW50KFwiPGxpPlwiKSxjLnRyYW5zZmVyQ2hpbGROb2RlcyhyLmNoaWxkTm9kZXNbbV0scFswXSksYy50cmFuc2Zlck5vZGVBdHRyaWJ1dGVzKHIuY2hpbGROb2Rlc1ttXSxwWzBdKSxvLmFwcGVuZENoaWxkKHBbMF0pO3I9byxuJiYobj1yLmNoaWxkTm9kZXNbci5jaGlsZE5vZGVzLmxlbmd0aC0xXSxuPW4uY2hpbGROb2Rlc1tuLmNoaWxkTm9kZXMubGVuZ3RoLTFdKX19ZWxzZSBxLmRlbGV0ZUNvbnRlbnRzKCk7cS5pbnNlcnROb2RlKHIpLG4mJmkuc2V0U2VsZWN0aW9uVG9FbGVtZW50RW5kKG4pfX07cmV0dXJuIGl9XSkuc2VydmljZShcInRhRE9NXCIsZnVuY3Rpb24oKXt2YXIgYT17Z2V0QnlBdHRyaWJ1dGU6ZnVuY3Rpb24oYixjKXt2YXIgZD1bXSxlPWIuY2hpbGRyZW4oKTtyZXR1cm4gZS5sZW5ndGgmJmFuZ3VsYXIuZm9yRWFjaChlLGZ1bmN0aW9uKGIpe2Q9ZC5jb25jYXQoYS5nZXRCeUF0dHJpYnV0ZShhbmd1bGFyLmVsZW1lbnQoYiksYykpfSksdm9pZCAwIT09Yi5hdHRyKGMpJiZkLnB1c2goYiksZH0sdHJhbnNmZXJDaGlsZE5vZGVzOmZ1bmN0aW9uKGEsYil7Zm9yKGIuaW5uZXJIVE1MPVwiXCI7YS5jaGlsZE5vZGVzLmxlbmd0aD4wOyliLmFwcGVuZENoaWxkKGEuY2hpbGROb2Rlc1swXSk7cmV0dXJuIGJ9LHNwbGl0Tm9kZXM6ZnVuY3Rpb24oYixjLGQsZSxmLGcpe2lmKCFlJiZpc05hTihnKSl0aHJvdyBuZXcgRXJyb3IoXCJ0YURPTS5zcGxpdE5vZGVzIHJlcXVpcmVzIGEgc3BsaXROb2RlIG9yIHNwbGl0SW5kZXhcIik7Zm9yKHZhciBoPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxpPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxqPTA7Yi5sZW5ndGg+MCYmKGlzTmFOKGcpfHxnIT09aikmJmJbMF0hPT1lOyloLmFwcGVuZENoaWxkKGJbMF0pLGorKztmb3IoIWlzTmFOKGYpJiZmPj0wJiZiWzBdJiYoaC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShiWzBdLm5vZGVWYWx1ZS5zdWJzdHJpbmcoMCxmKSkpLGJbMF0ubm9kZVZhbHVlPWJbMF0ubm9kZVZhbHVlLnN1YnN0cmluZyhmKSk7Yi5sZW5ndGg+MDspaS5hcHBlbmRDaGlsZChiWzBdKTthLnRyYW5zZmVyQ2hpbGROb2RlcyhoLGMpLGEudHJhbnNmZXJDaGlsZE5vZGVzKGksZCl9LHRyYW5zZmVyTm9kZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtjPGEuYXR0cmlidXRlcy5sZW5ndGg7YysrKWIuc2V0QXR0cmlidXRlKGEuYXR0cmlidXRlc1tjXS5uYW1lLGEuYXR0cmlidXRlc1tjXS52YWx1ZSk7cmV0dXJuIGJ9fTtyZXR1cm4gYX0pLGFuZ3VsYXIubW9kdWxlKFwidGV4dEFuZ3VsYXIudmFsaWRhdG9yc1wiLFtdKS5kaXJlY3RpdmUoXCJ0YU1heFRleHRcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwibmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShhKXt2YXIgYj1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2Lz5cIik7Yi5odG1sKGEpO3ZhciBjPWIudGV4dCgpLmxlbmd0aDtyZXR1cm4gZj49Yz8oZC4kc2V0VmFsaWRpdHkoXCJ0YU1heFRleHRcIiwhMCksYSk6dm9pZCBkLiRzZXRWYWxpZGl0eShcInRhTWF4VGV4dFwiLCExKX12YXIgZj1wYXJzZUludChhLiRldmFsKGMudGFNYXhUZXh0KSk7aWYoaXNOYU4oZikpdGhyb3dcIk1heCB0ZXh0IG11c3QgYmUgYW4gaW50ZWdlclwiO2MuJG9ic2VydmUoXCJ0YU1heFRleHRcIixmdW5jdGlvbihhKXtpZihmPXBhcnNlSW50KGEpLGlzTmFOKGYpKXRocm93XCJNYXggdGV4dCBtdXN0IGJlIGFuIGludGVnZXJcIjtkLiRkaXJ0eSYmZC4kc2V0Vmlld1ZhbHVlKGQuJHZpZXdWYWx1ZSl9KSxkLiRwYXJzZXJzLnVuc2hpZnQoZSl9fX0pLmRpcmVjdGl2ZShcInRhTWluVGV4dFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCJuZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBlKGEpe3ZhciBiPWFuZ3VsYXIuZWxlbWVudChcIjxkaXYvPlwiKTtiLmh0bWwoYSk7dmFyIGM9Yi50ZXh0KCkubGVuZ3RoO3JldHVybiFjfHxjPj1mPyhkLiRzZXRWYWxpZGl0eShcInRhTWluVGV4dFwiLCEwKSxhKTp2b2lkIGQuJHNldFZhbGlkaXR5KFwidGFNaW5UZXh0XCIsITEpfXZhciBmPXBhcnNlSW50KGEuJGV2YWwoYy50YU1pblRleHQpKTtpZihpc05hTihmKSl0aHJvd1wiTWluIHRleHQgbXVzdCBiZSBhbiBpbnRlZ2VyXCI7Yy4kb2JzZXJ2ZShcInRhTWluVGV4dFwiLGZ1bmN0aW9uKGEpe2lmKGY9cGFyc2VJbnQoYSksaXNOYU4oZikpdGhyb3dcIk1pbiB0ZXh0IG11c3QgYmUgYW4gaW50ZWdlclwiO2QuJGRpcnR5JiZkLiRzZXRWaWV3VmFsdWUoZC4kdmlld1ZhbHVlKX0pLGQuJHBhcnNlcnMudW5zaGlmdChlKX19fSksYW5ndWxhci5tb2R1bGUoXCJ0ZXh0QW5ndWxhci50YUJpbmRcIixbXCJ0ZXh0QW5ndWxhci5mYWN0b3JpZXNcIixcInRleHRBbmd1bGFyLkRPTVwiXSkuc2VydmljZShcIl90YUJsYW5rVGVzdFwiLFtmdW5jdGlvbigpe3ZhciBhPS88KGF8YWJicnxhY3JvbnltfGJkaXxiZG98YmlnfGNpdGV8Y29kZXxkZWx8ZGZufGltZ3xpbnN8a2JkfGxhYmVsfG1hcHxtYXJrfHF8cnVieXxycHxydHxzfHNhbXB8dGltZXx0dHx2YXIpW14+XSooPnwkKS9pO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZnVuY3Rpb24oYyl7aWYoIWMpcmV0dXJuITA7dmFyIGQsZT0vKF5bXjxdfD4pW148XS9pLmV4ZWMoYyk7cmV0dXJuIGU/ZD1lLmluZGV4OihjPWMudG9TdHJpbmcoKS5yZXBsYWNlKC89XCJbXlwiXSpcIi9pLFwiXCIpLnJlcGxhY2UoLz1cIlteXCJdKlwiL2ksXCJcIikucmVwbGFjZSgvPVwiW15cIl0qXCIvaSxcIlwiKS5yZXBsYWNlKC89XCJbXlwiXSpcIi9pLFwiXCIpLGQ9Yy5pbmRleE9mKFwiPlwiKSksYz1jLnRyaW0oKS5zdWJzdHJpbmcoZCxkKzEwMCksL15bXjw+XSskL2kudGVzdChjKT8hMTowPT09Yy5sZW5ndGh8fGM9PT1ifHwvXj4oXFxzfCZuYnNwOykqPFxcL1tePl0rPiQvZ2kudGVzdChjKT8hMDovPlxccypbXlxcczxdL2kudGVzdChjKXx8YS50ZXN0KGMpPyExOiEwfX19XSkuZGlyZWN0aXZlKFwidGFCaW5kXCIsW1widGFTYW5pdGl6ZVwiLFwiJHRpbWVvdXRcIixcIiR3aW5kb3dcIixcIiRkb2N1bWVudFwiLFwidGFGaXhDaHJvbWVcIixcInRhQnJvd3NlclRhZ1wiLFwidGFTZWxlY3Rpb25cIixcInRhU2VsZWN0YWJsZUVsZW1lbnRzXCIsXCJ0YUFwcGx5Q3VzdG9tUmVuZGVyZXJzXCIsXCJ0YU9wdGlvbnNcIixcIl90YUJsYW5rVGVzdFwiLFwiJHBhcnNlXCIsXCJ0YURPTVwiLGZ1bmN0aW9uKGEsYixlLGYsaCxqLGwsbSxuLG8scSxyLHMpe3JldHVybntyZXF1aXJlOlwibmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oaix0LHUsdil7dmFyIHcseCx5LHosQT12b2lkIDAhPT10LmF0dHIoXCJjb250ZW50ZWRpdGFibGVcIikmJnQuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiKSxCPUF8fFwidGV4dGFyZWFcIj09PXRbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxcImlucHV0XCI9PT10WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxDPSExLEQ9ITEsRT0hMSxGPXUudGFVbnNhZmVTYW5pdGl6ZXJ8fG8uZGlzYWJsZVNhbml0aXplcixHPS9eKDl8MTl8MjB8Mjd8MzN8MzR8MzV8MzZ8Mzd8Mzh8Mzl8NDB8NDV8MTEyfDExM3wxMTR8MTE1fDExNnwxMTd8MTE4fDExOXwxMjB8MTIxfDEyMnwxMjN8MTQ0fDE0NSkkL2ksSD0vXig4fDEzfDMyfDQ2fDU5fDYxfDEwN3wxMDl8MTg2fDE4N3wxODh8MTg5fDE5MHwxOTF8MTkyfDIxOXwyMjB8MjIxfDIyMikkL2k7dm9pZCAwPT09dS50YURlZmF1bHRXcmFwJiYodS50YURlZmF1bHRXcmFwPVwicFwiKSxcIlwiPT09dS50YURlZmF1bHRXcmFwPyh5PVwiXCIsej12b2lkIDA9PT1jLmllP1wiPGRpdj48YnI+PC9kaXY+XCI6Yy5pZT49MTE/XCI8cD48YnI+PC9wPlwiOmMuaWU8PTg/XCI8UD4mbmJzcDs8L1A+XCI6XCI8cD4mbmJzcDs8L3A+XCIpOih5PXZvaWQgMD09PWMuaWV8fGMuaWU+PTExP1wiPFwiK3UudGFEZWZhdWx0V3JhcCtcIj48YnI+PC9cIit1LnRhRGVmYXVsdFdyYXArXCI+XCI6Yy5pZTw9OD9cIjxcIit1LnRhRGVmYXVsdFdyYXAudG9VcHBlckNhc2UoKStcIj48L1wiK3UudGFEZWZhdWx0V3JhcC50b1VwcGVyQ2FzZSgpK1wiPlwiOlwiPFwiK3UudGFEZWZhdWx0V3JhcCtcIj48L1wiK3UudGFEZWZhdWx0V3JhcCtcIj5cIix6PXZvaWQgMD09PWMuaWV8fGMuaWU+PTExP1wiPFwiK3UudGFEZWZhdWx0V3JhcCtcIj48YnI+PC9cIit1LnRhRGVmYXVsdFdyYXArXCI+XCI6Yy5pZTw9OD9cIjxcIit1LnRhRGVmYXVsdFdyYXAudG9VcHBlckNhc2UoKStcIj4mbmJzcDs8L1wiK3UudGFEZWZhdWx0V3JhcC50b1VwcGVyQ2FzZSgpK1wiPlwiOlwiPFwiK3UudGFEZWZhdWx0V3JhcCtcIj4mbmJzcDs8L1wiK3UudGFEZWZhdWx0V3JhcCtcIj5cIik7dmFyIEk9cSh6KTt1LnRhUGFzdGUmJih4PXIodS50YVBhc3RlKSksdC5hZGRDbGFzcyhcInRhLWJpbmRcIik7dmFyIEo7altcIiR1bmRvTWFuYWdlclwiKyh1LmlkfHxcIlwiKV09di4kdW5kb01hbmFnZXI9e19zdGFjazpbXSxfaW5kZXg6MCxfbWF4OjFlMyxwdXNoOmZ1bmN0aW9uKGEpe3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiBhfHxudWxsPT09YXx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHRoaXMuY3VycmVudCgpJiZudWxsIT09dGhpcy5jdXJyZW50KCkmJmE9PT10aGlzLmN1cnJlbnQoKT9hOih0aGlzLl9pbmRleDx0aGlzLl9zdGFjay5sZW5ndGgtMSYmKHRoaXMuX3N0YWNrPXRoaXMuX3N0YWNrLnNsaWNlKDAsdGhpcy5faW5kZXgrMSkpLHRoaXMuX3N0YWNrLnB1c2goYSksSiYmYi5jYW5jZWwoSiksdGhpcy5fc3RhY2subGVuZ3RoPnRoaXMuX21heCYmdGhpcy5fc3RhY2suc2hpZnQoKSx0aGlzLl9pbmRleD10aGlzLl9zdGFjay5sZW5ndGgtMSxhKX0sdW5kbzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNldFRvSW5kZXgodGhpcy5faW5kZXgtMSl9LHJlZG86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRUb0luZGV4KHRoaXMuX2luZGV4KzEpfSxzZXRUb0luZGV4OmZ1bmN0aW9uKGEpe3JldHVybiAwPmF8fGE+dGhpcy5fc3RhY2subGVuZ3RoLTE/dm9pZCAwOih0aGlzLl9pbmRleD1hLHRoaXMuY3VycmVudCgpKX0sY3VycmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGFja1t0aGlzLl9pbmRleF19fTt2YXIgSz1qW1wiJHVuZG9UYUJpbmRcIisodS5pZHx8XCJcIildPWZ1bmN0aW9uKCl7aWYoIUMmJkEpe3ZhciBhPXYuJHVuZG9NYW5hZ2VyLnVuZG8oKTtcInVuZGVmaW5lZFwiIT10eXBlb2YgYSYmbnVsbCE9PWEmJihZKGEpLE4oYSwhMSksbC5zZXRTZWxlY3Rpb25Ub0VsZW1lbnRFbmQodFswXS5jaGlsZE5vZGVzLmxlbmd0aD90WzBdLmNoaWxkTm9kZXNbdFswXS5jaGlsZE5vZGVzLmxlbmd0aC0xXTp0WzBdKSl9fSxMPWpbXCIkcmVkb1RhQmluZFwiKyh1LmlkfHxcIlwiKV09ZnVuY3Rpb24oKXtpZighQyYmQSl7dmFyIGE9di4kdW5kb01hbmFnZXIucmVkbygpO1widW5kZWZpbmVkXCIhPXR5cGVvZiBhJiZudWxsIT09YSYmKFkoYSksTihhLCExKSxsLnNldFNlbGVjdGlvblRvRWxlbWVudEVuZCh0WzBdLmNoaWxkTm9kZXMubGVuZ3RoP3RbMF0uY2hpbGROb2Rlc1t0WzBdLmNoaWxkTm9kZXMubGVuZ3RoLTFdOnRbMF0pKX19LE09ZnVuY3Rpb24oKXtpZihBKXJldHVybiB0WzBdLmlubmVySFRNTDtpZihCKXJldHVybiB0LnZhbCgpO3Rocm93XCJ0ZXh0QW5ndWxhciBFcnJvcjogYXR0ZW1wdGluZyB0byB1cGRhdGUgbm9uLWVkaXRhYmxlIHRhQmluZFwifSxOPWZ1bmN0aW9uKGEsYil7RT0hMCwoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGJ8fG51bGw9PT1iKSYmKGI9ITAmJkEpLChcInVuZGVmaW5lZFwiPT10eXBlb2YgYXx8bnVsbD09PWEpJiYoYT1NKCkpLEkoYSk/KFwiXCIhPT12LiR2aWV3VmFsdWUmJnYuJHNldFZpZXdWYWx1ZShcIlwiKSxiJiZcIlwiIT09di4kdW5kb01hbmFnZXIuY3VycmVudCgpJiZ2LiR1bmRvTWFuYWdlci5wdXNoKFwiXCIpKTooWCgpLHYuJHZpZXdWYWx1ZSE9PWEmJih2LiRzZXRWaWV3VmFsdWUoYSksYiYmdi4kdW5kb01hbmFnZXIucHVzaChhKSkpfTtpZihqW1widXBkYXRlVGFCaW5kXCIrKHUuaWR8fFwiXCIpXT1mdW5jdGlvbigpe0N8fE4oKX0sQilpZihqLmV2ZW50cz17fSxBKXt2YXIgTz0hMSxQPWZ1bmN0aW9uKGMpe2lmKGMmJmMudHJpbSgpLmxlbmd0aCl7aWYoYy5tYXRjaCgvY2xhc3M9W1wiJ10qTXNvKE5vcm1hbHxMaXN0KS9pKSl7dmFyIGQ9Yy5tYXRjaCgvPCEtLVN0YXJ0RnJhZ21lbnQtLT4oW1xcc1xcU10qPyk8IS0tRW5kRnJhZ21lbnQtLT4vaSk7ZD1kP2RbMV06YyxkPWQucmVwbGFjZSgvPG86cD5bXFxzXFxTXSo/PFxcL286cD4vZ2ksXCJcIikucmVwbGFjZSgvY2xhc3M9KFtcIiddfClNc29Ob3JtYWwoW1wiJ118KS9naSxcIlwiKTt2YXIgZT1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2PlwiK2QrXCI8L2Rpdj5cIiksZj1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2PjwvZGl2PlwiKSxnPXtlbGVtZW50Om51bGwsbGFzdEluZGVudDpbXSxsYXN0TGk6bnVsbCxpc1VsOiExfTtnLmxhc3RJbmRlbnQucGVlaz1mdW5jdGlvbigpe3ZhciBhPXRoaXMubGVuZ3RoO3JldHVybiBhPjA/dGhpc1thLTFdOnZvaWQgMH07Zm9yKHZhciBoPWZ1bmN0aW9uKGEpe2cuaXNVbD1hLGcuZWxlbWVudD1hbmd1bGFyLmVsZW1lbnQoYT9cIjx1bD5cIjpcIjxvbD5cIiksZy5sYXN0SW5kZW50PVtdLGcubGFzdEluZGVudC5wZWVrPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sZW5ndGg7cmV0dXJuIGE+MD90aGlzW2EtMV06dm9pZCAwfSxnLmxhc3RMZXZlbE1hdGNoPW51bGx9LGk9MDtpPD1lWzBdLmNoaWxkTm9kZXMubGVuZ3RoO2krKylpZihlWzBdLmNoaWxkTm9kZXNbaV0mJlwiI3RleHRcIiE9PWVbMF0uY2hpbGROb2Rlc1tpXS5ub2RlTmFtZSYmXCJwXCI9PT1lWzBdLmNoaWxkTm9kZXNbaV0udGFnTmFtZS50b0xvd2VyQ2FzZSgpKXt2YXIgaz1hbmd1bGFyLmVsZW1lbnQoZVswXS5jaGlsZE5vZGVzW2ldKSxtPShrLmF0dHIoXCJjbGFzc1wiKXx8XCJcIikubWF0Y2goL01zb0xpc3QoQnVsbGV0fE51bWJlcnxQYXJhZ3JhcGgpKEN4U3AoRmlyc3R8TWlkZGxlfExhc3QpfCkvaSk7aWYobSl7aWYoa1swXS5jaGlsZE5vZGVzLmxlbmd0aDwyfHxrWzBdLmNoaWxkTm9kZXNbMV0uY2hpbGROb2Rlcy5sZW5ndGg8MSljb250aW51ZTt2YXIgbj1cImJ1bGxldFwiPT09bVsxXS50b0xvd2VyQ2FzZSgpfHxcIm51bWJlclwiIT09bVsxXS50b0xvd2VyQ2FzZSgpJiYhKC9eW14wLTlhLXo8XSpbMC05YS16XStbXjAtOWEtejw+XTwvaS50ZXN0KGtbMF0uY2hpbGROb2Rlc1sxXS5pbm5lckhUTUwpfHwvXlteMC05YS16PF0qWzAtOWEtel0rW14wLTlhLXo8Pl08L2kudGVzdChrWzBdLmNoaWxkTm9kZXNbMV0uY2hpbGROb2Rlc1swXS5pbm5lckhUTUwpKSxvPShrLmF0dHIoXCJzdHlsZVwiKXx8XCJcIikubWF0Y2goL21hcmdpbi1sZWZ0OihbXFwtXFwuMC05XSopL2kpLHA9cGFyc2VGbG9hdChvP29bMV06MCkscT0oay5hdHRyKFwic3R5bGVcIil8fFwiXCIpLm1hdGNoKC9tc28tbGlzdDpsKFswLTldKykgbGV2ZWwoWzAtOV0rKSBsZm9bMC05K10oJHw7KS9pKTtpZihxJiZxWzJdJiYocD1wYXJzZUludChxWzJdKSkscSYmKCFnLmxhc3RMZXZlbE1hdGNofHxxWzFdIT09Zy5sYXN0TGV2ZWxNYXRjaFsxXSl8fCFtWzNdfHxcImZpcnN0XCI9PT1tWzNdLnRvTG93ZXJDYXNlKCl8fG51bGw9PT1nLmxhc3RJbmRlbnQucGVlaygpfHxnLmlzVWwhPT1uJiZnLmxhc3RJbmRlbnQucGVlaygpPT09cCloKG4pLGYuYXBwZW5kKGcuZWxlbWVudCk7ZWxzZSBpZihudWxsIT1nLmxhc3RJbmRlbnQucGVlaygpJiZnLmxhc3RJbmRlbnQucGVlaygpPHApZy5lbGVtZW50PWFuZ3VsYXIuZWxlbWVudChuP1wiPHVsPlwiOlwiPG9sPlwiKSxnLmxhc3RMaS5hcHBlbmQoZy5lbGVtZW50KTtlbHNlIGlmKG51bGwhPWcubGFzdEluZGVudC5wZWVrKCkmJmcubGFzdEluZGVudC5wZWVrKCk+cCl7Zm9yKDtudWxsIT1nLmxhc3RJbmRlbnQucGVlaygpJiZnLmxhc3RJbmRlbnQucGVlaygpPnA7KWlmKFwibGlcIiE9PWcuZWxlbWVudC5wYXJlbnQoKVswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpe2lmKCEvW3VvXWwvaS50ZXN0KGcuZWxlbWVudC5wYXJlbnQoKVswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpKWJyZWFrO2cuZWxlbWVudD1nLmVsZW1lbnQucGFyZW50KCksZy5sYXN0SW5kZW50LnBvcCgpfWVsc2UgZy5lbGVtZW50PWcuZWxlbWVudC5wYXJlbnQoKTtnLmlzVWw9XCJ1bFwiPT09Zy5lbGVtZW50WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxuIT09Zy5pc1VsJiYoaChuKSxmLmFwcGVuZChnLmVsZW1lbnQpKX1nLmxhc3RMZXZlbE1hdGNoPXEscCE9PWcubGFzdEluZGVudC5wZWVrKCkmJmcubGFzdEluZGVudC5wdXNoKHApLGcubGFzdExpPWFuZ3VsYXIuZWxlbWVudChcIjxsaT5cIiksZy5lbGVtZW50LmFwcGVuZChnLmxhc3RMaSksZy5sYXN0TGkuaHRtbChrLmh0bWwoKS5yZXBsYWNlKC88ISgtLXwpXFxbaWYgIXN1cHBvcnRMaXN0c1xcXSgtLXwpPltcXHNcXFNdKj88ISgtLXwpXFxbZW5kaWZcXF0oLS18KT4vZ2ksXCJcIikpLGsucmVtb3ZlKCl9ZWxzZSBoKCExKSxmLmFwcGVuZChrKX12YXIgcj1mdW5jdGlvbihhKXthPWFuZ3VsYXIuZWxlbWVudChhKTtmb3IodmFyIGI9YVswXS5jaGlsZE5vZGVzLmxlbmd0aC0xO2I+PTA7Yi0tKWEuYWZ0ZXIoYVswXS5jaGlsZE5vZGVzW2JdKTthLnJlbW92ZSgpfTthbmd1bGFyLmZvckVhY2goZi5maW5kKFwic3BhblwiKSxmdW5jdGlvbihhKXthLnJlbW92ZUF0dHJpYnV0ZShcImxhbmdcIiksYS5hdHRyaWJ1dGVzLmxlbmd0aDw9MCYmcihhKX0pLGFuZ3VsYXIuZm9yRWFjaChmLmZpbmQoXCJmb250XCIpLHIpLGM9Zi5odG1sKCl9ZWxzZXtpZihjPWMucmVwbGFjZSgvPCh8XFwvKW1ldGFbXj5dKj8+L2dpLFwiXCIpLGMubWF0Y2goLzxbXj5dKj8odGEtYmluZClbXj5dKj8+Lykpe2lmKGMubWF0Y2goLzxbXj5dKj8odGV4dC1hbmd1bGFyKVtePl0qPz4vKSl7dmFyIHU9YW5ndWxhci5lbGVtZW50KFwiPGRpdj5cIitjK1wiPC9kaXY+XCIpO3UuZmluZChcInRleHRhcmVhXCIpLnJlbW92ZSgpO2Zvcih2YXIgdz1zLmdldEJ5QXR0cmlidXRlKHUsXCJ0YS1iaW5kXCIpLHk9MDt5PHcubGVuZ3RoO3krKyl7Zm9yKHZhciB6PXdbeV1bMF0ucGFyZW50Tm9kZS5wYXJlbnROb2RlLEE9MDtBPHdbeV1bMF0uY2hpbGROb2Rlcy5sZW5ndGg7QSsrKXoucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod1t5XVswXS5jaGlsZE5vZGVzW0FdLHopO3oucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh6KX1jPXUuaHRtbCgpLnJlcGxhY2UoJzxiciBjbGFzcz1cIkFwcGxlLWludGVyY2hhbmdlLW5ld2xpbmVcIj4nLFwiXCIpfX1lbHNlIGMubWF0Y2goL148c3Bhbi8pJiYoYz1jLnJlcGxhY2UoLzwofFxcLylzcGFuW14+XSo/Pi9naSxcIlwiKSk7Yz1jLnJlcGxhY2UoLzxiciBjbGFzcz1cIkFwcGxlLWludGVyY2hhbmdlLW5ld2xpbmVcIltePl0qPz4vZ2ksXCJcIikucmVwbGFjZSgvPHNwYW4gY2xhc3M9XCJBcHBsZS1jb252ZXJ0ZWQtc3BhY2VcIj4oIHwmbmJzcDspPFxcL3NwYW4+L2dpLFwiJm5ic3A7XCIpfWM9YShjLFwiXCIsRikseCYmKGM9eChqLHskaHRtbDpjfSl8fGMpLGwuaW5zZXJ0SHRtbChjLHRbMF0pLGIoZnVuY3Rpb24oKXt2LiRzZXRWaWV3VmFsdWUoTSgpKSxPPSExLHQucmVtb3ZlQ2xhc3MoXCJwcm9jZXNzaW5nLXBhc3RlXCIpfSwwKX1lbHNlIE89ITEsdC5yZW1vdmVDbGFzcyhcInByb2Nlc3NpbmctcGFzdGVcIil9O2lmKHQub24oXCJwYXN0ZVwiLGouZXZlbnRzLnBhc3RlPWZ1bmN0aW9uKGEsYyl7aWYoYyYmYW5ndWxhci5leHRlbmQoYSxjKSxDfHxPKXJldHVybiBhLnN0b3BQcm9wYWdhdGlvbigpLGEucHJldmVudERlZmF1bHQoKSwhMTtPPSEwLHQuYWRkQ2xhc3MoXCJwcm9jZXNzaW5nLXBhc3RlXCIpO3ZhciBkLGc9KGEub3JpZ2luYWxFdmVudHx8YSkuY2xpcGJvYXJkRGF0YTtpZihnJiZnLmdldERhdGEpe2Zvcih2YXIgaD1cIlwiLGk9MDtpPGcudHlwZXMubGVuZ3RoO2krKyloKz1cIiBcIitnLnR5cGVzW2ldO3JldHVybi90ZXh0XFwvaHRtbC9pLnRlc3QoaCk/ZD1nLmdldERhdGEoXCJ0ZXh0L2h0bWxcIik6L3RleHRcXC9wbGFpbi9pLnRlc3QoaCkmJihkPWcuZ2V0RGF0YShcInRleHQvcGxhaW5cIikpLFAoZCksYS5zdG9wUHJvcGFnYXRpb24oKSxhLnByZXZlbnREZWZhdWx0KCksITF9dmFyIGo9ZS5yYW5neS5zYXZlU2VsZWN0aW9uKCksaz1hbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJ0YS1oaWRkZW4taW5wdXRcIiBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCI+PC9kaXY+Jyk7Zi5maW5kKFwiYm9keVwiKS5hcHBlbmQoayksa1swXS5mb2N1cygpLGIoZnVuY3Rpb24oKXtlLnJhbmd5LnJlc3RvcmVTZWxlY3Rpb24oaiksUChrWzBdLmlubmVySFRNTCksay5yZW1vdmUoKSx0WzBdLmZvY3VzKCl9LDApfSksdC5vbihcImN1dFwiLGouZXZlbnRzLmN1dD1mdW5jdGlvbihhKXtDP2EucHJldmVudERlZmF1bHQoKTpiKGZ1bmN0aW9uKCl7di4kc2V0Vmlld1ZhbHVlKE0oKSl9LDApfSksdC5vbihcImtleWRvd25cIixqLmV2ZW50cy5rZXlkb3duPWZ1bmN0aW9uKGEsYil7aWYoYiYmYW5ndWxhci5leHRlbmQoYSxiKSwhQylpZighYS5hbHRLZXkmJmEubWV0YUtleXx8YS5jdHJsS2V5KTkwIT09YS5rZXlDb2RlfHxhLnNoaWZ0S2V5Pyg5MD09PWEua2V5Q29kZSYmYS5zaGlmdEtleXx8ODk9PT1hLmtleUNvZGUmJiFhLnNoaWZ0S2V5KSYmKEwoKSxhLnByZXZlbnREZWZhdWx0KCkpOihLKCksYS5wcmV2ZW50RGVmYXVsdCgpKTtlbHNlIGlmKDEzPT09YS5rZXlDb2RlJiYhYS5zaGlmdEtleSl7dmFyIGM9bC5nZXRTZWxlY3Rpb25FbGVtZW50KCk7aWYoIWMudGFnTmFtZS5tYXRjaChnKSlyZXR1cm47dmFyIGQ9YW5ndWxhci5lbGVtZW50KHkpO2lmKC9ePGJyKHxcXC8pPiQvaS50ZXN0KGMuaW5uZXJIVE1MLnRyaW0oKSkmJlwiYmxvY2txdW90ZVwiPT09Yy5wYXJlbnROb2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmIWMubmV4dFNpYmxpbmcpeyRzZWxlY3Rpb249YW5ndWxhci5lbGVtZW50KGMpO3ZhciBlPSRzZWxlY3Rpb24ucGFyZW50KCk7ZS5hZnRlcihkKSwkc2VsZWN0aW9uLnJlbW92ZSgpLDA9PT1lLmNoaWxkcmVuKCkubGVuZ3RoJiZlLnJlbW92ZSgpLGwuc2V0U2VsZWN0aW9uVG9FbGVtZW50U3RhcnQoZFswXSksYS5wcmV2ZW50RGVmYXVsdCgpfWVsc2UvXjxbXj5dKz48YnIofFxcLyk+PFxcL1tePl0rPiQvaS50ZXN0KGMuaW5uZXJIVE1MLnRyaW0oKSkmJlwiYmxvY2txdW90ZVwiPT09Yy50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJigkc2VsZWN0aW9uPWFuZ3VsYXIuZWxlbWVudChjKSwkc2VsZWN0aW9uLmFmdGVyKGQpLCRzZWxlY3Rpb24ucmVtb3ZlKCksbC5zZXRTZWxlY3Rpb25Ub0VsZW1lbnRTdGFydChkWzBdKSxhLnByZXZlbnREZWZhdWx0KCkpfX0pLHQub24oXCJrZXl1cFwiLGouZXZlbnRzLmtleXVwPWZ1bmN0aW9uKGEsYyl7aWYoYyYmYW5ndWxhci5leHRlbmQoYSxjKSxKJiZiLmNhbmNlbChKKSwhQyYmIUcudGVzdChhLmtleUNvZGUpKXtpZihcIlwiIT09eSYmMTM9PT1hLmtleUNvZGUmJiFhLnNoaWZ0S2V5KXtmb3IodmFyIGQ9bC5nZXRTZWxlY3Rpb25FbGVtZW50KCk7IWQudGFnTmFtZS5tYXRjaChnKSYmZCE9PXRbMF07KWQ9ZC5wYXJlbnROb2RlO2lmKGQudGFnTmFtZS50b0xvd2VyQ2FzZSgpIT09dS50YURlZmF1bHRXcmFwJiZcImxpXCIhPT1kLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmKFwiXCI9PT1kLmlubmVySFRNTC50cmltKCl8fFwiPGJyPlwiPT09ZC5pbm5lckhUTUwudHJpbSgpKSl7dmFyIGY9YW5ndWxhci5lbGVtZW50KHkpO2FuZ3VsYXIuZWxlbWVudChkKS5yZXBsYWNlV2l0aChmKSxsLnNldFNlbGVjdGlvblRvRWxlbWVudFN0YXJ0KGZbMF0pfX12YXIgaD1NKCk7aWYoXCJcIiE9PXkmJlwiXCI9PT1oLnRyaW0oKSlZKHkpLGwuc2V0U2VsZWN0aW9uVG9FbGVtZW50U3RhcnQodC5jaGlsZHJlbigpWzBdKTtlbHNlIGlmKFwiPFwiIT09aC5zdWJzdHJpbmcoMCwxKSYmXCJcIiE9PXUudGFEZWZhdWx0V3JhcCl7dmFyIGk9ZS5yYW5neS5zYXZlU2VsZWN0aW9uKCk7aD1NKCksaD1cIjxcIit1LnRhRGVmYXVsdFdyYXArXCI+XCIraCtcIjwvXCIrdS50YURlZmF1bHRXcmFwK1wiPlwiLFkoaCksZS5yYW5neS5yZXN0b3JlU2VsZWN0aW9uKGkpfXZhciBqPXchPT1hLmtleUNvZGUmJkgudGVzdChhLmtleUNvZGUpO04oaCxqKSxqfHwoSj1iKGZ1bmN0aW9uKCl7di4kdW5kb01hbmFnZXIucHVzaChoKX0sMjUwKSksdz1hLmtleUNvZGV9fSksdC5vbihcImJsdXJcIixqLmV2ZW50cy5ibHVyPWZ1bmN0aW9uKCl7RD0hMSxDfHxOKCksRT0hMCx2LiRyZW5kZXIoKX0pLHUucGxhY2Vob2xkZXImJihjLmllPjh8fHZvaWQgMD09PWMuaWUpKXt2YXIgUTtpZighdS5pZCl0aHJvd1widGV4dEFuZ3VsYXIgRXJyb3I6IEFuIHVuaXF1ZSBJRCBpcyByZXF1aXJlZCBmb3IgcGxhY2Vob2xkZXJzIHRvIHdvcmtcIjtRPWkoXCIjXCIrdS5pZCtcIi5wbGFjZWhvbGRlci10ZXh0OmJlZm9yZVwiLCdjb250ZW50OiBcIicrdS5wbGFjZWhvbGRlcisnXCInKSxqLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtrKFEpfSl9dC5vbihcImZvY3VzXCIsai5ldmVudHMuZm9jdXM9ZnVuY3Rpb24oKXtEPSEwLHQucmVtb3ZlQ2xhc3MoXCJwbGFjZWhvbGRlci10ZXh0XCIpfSksdC5vbihcIm1vdXNldXBcIixqLmV2ZW50cy5tb3VzZXVwPWZ1bmN0aW9uKCl7dmFyIGE9bC5nZXRTZWxlY3Rpb24oKTthLnN0YXJ0LmVsZW1lbnQ9PT10WzBdJiZ0LmNoaWxkcmVuKCkubGVuZ3RoJiZsLnNldFNlbGVjdGlvblRvRWxlbWVudFN0YXJ0KHQuY2hpbGRyZW4oKVswXSl9KSx0Lm9uKFwibW91c2Vkb3duXCIsai5ldmVudHMubW91c2Vkb3duPWZ1bmN0aW9uKGEsYil7YiYmYW5ndWxhci5leHRlbmQoYSxiKSxhLnN0b3BQcm9wYWdhdGlvbigpfSl9ZWxzZXt0Lm9uKFwiY2hhbmdlIGJsdXJcIixqLmV2ZW50cy5jaGFuZ2U9ai5ldmVudHMuYmx1cj1mdW5jdGlvbigpe0N8fHYuJHNldFZpZXdWYWx1ZShNKCkpfSksdC5vbihcImtleWRvd25cIixqLmV2ZW50cy5rZXlkb3duPWZ1bmN0aW9uKGEsYil7aWYoYiYmYW5ndWxhci5leHRlbmQoYSxiKSw5PT09YS5rZXlDb2RlKXt2YXIgYz10aGlzLnNlbGVjdGlvblN0YXJ0LGQ9dGhpcy5zZWxlY3Rpb25FbmQsZT10LnZhbCgpO2lmKGEuc2hpZnRLZXkpe3ZhciBmPWUubGFzdEluZGV4T2YoXCJcXG5cIixjKSxnPWUubGFzdEluZGV4T2YoXCJcdFwiLGMpOy0xIT09ZyYmZz49ZiYmKHQudmFsKGUuc3Vic3RyaW5nKDAsZykrZS5zdWJzdHJpbmcoZysxKSksdGhpcy5zZWxlY3Rpb25TdGFydD10aGlzLnNlbGVjdGlvbkVuZD1jLTEpfWVsc2UgdC52YWwoZS5zdWJzdHJpbmcoMCxjKStcIlx0XCIrZS5zdWJzdHJpbmcoZCkpLHRoaXMuc2VsZWN0aW9uU3RhcnQ9dGhpcy5zZWxlY3Rpb25FbmQ9YysxO2EucHJldmVudERlZmF1bHQoKX19KTt2YXIgUj1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1cIlwiLGQ9MDtiPmQ7ZCsrKWMrPWE7cmV0dXJuIGN9LFM9ZnVuY3Rpb24oYSxiKXt2YXIgYz1cIlwiLGQ9YS5jaGlsZE5vZGVzO2IrKyxjKz1SKFwiXHRcIixiLTEpK2Eub3V0ZXJIVE1MLnN1YnN0cmluZygwLGEub3V0ZXJIVE1MLmluZGV4T2YoXCI8bGlcIikpO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKWRbZV0ub3V0ZXJIVE1MJiYoYys9XCJ1bFwiPT09ZFtlXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpfHxcIm9sXCI9PT1kW2VdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/XCJcXG5cIitTKGRbZV0sYik6XCJcXG5cIitSKFwiXHRcIixiKStkW2VdLm91dGVySFRNTCk7cmV0dXJuIGMrPVwiXFxuXCIrUihcIlx0XCIsYi0xKSthLm91dGVySFRNTC5zdWJzdHJpbmcoYS5vdXRlckhUTUwubGFzdEluZGV4T2YoXCI8XCIpKX07di4kZm9ybWF0dGVycy51bnNoaWZ0KGZ1bmN0aW9uKGEpe3ZhciBiPWFuZ3VsYXIuZWxlbWVudChcIjxkaXY+XCIrYStcIjwvZGl2PlwiKVswXS5jaGlsZE5vZGVzO2lmKGIubGVuZ3RoPjApe2E9XCJcIjtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyliW2NdLm91dGVySFRNTCYmKGEubGVuZ3RoPjAmJihhKz1cIlxcblwiKSxhKz1cInVsXCI9PT1iW2NdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCl8fFwib2xcIj09PWJbY10ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT9cIlwiK1MoYltjXSwwKTpcIlwiK2JbY10ub3V0ZXJIVE1MKX1yZXR1cm4gYX0pfXZhciBUPWZ1bmN0aW9uKGIpe3JldHVybiB2LiRvbGRWaWV3VmFsdWU9YShoKGIpLHYuJG9sZFZpZXdWYWx1ZSxGKX0sVT1mdW5jdGlvbihhKXtyZXR1cm4gdS5yZXF1aXJlZCYmdi4kc2V0VmFsaWRpdHkoXCJyZXF1aXJlZFwiLCFJKGEpKSxhfTt2LiRwYXJzZXJzLnB1c2goVCksdi4kcGFyc2Vycy51bnNoaWZ0KFUpLHYuJGZvcm1hdHRlcnMucHVzaChUKSx2LiRmb3JtYXR0ZXJzLnVuc2hpZnQoZnVuY3Rpb24oYSl7aWYoSShhKSlyZXR1cm4gYTt2YXIgYj1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2PlwiK2ErXCI8L2Rpdj5cIik7cmV0dXJuIDA9PT1iLmNoaWxkcmVuKCkubGVuZ3RoJiYoYT1cIjxcIit1LnRhRGVmYXVsdFdyYXArXCI+XCIrYStcIjwvXCIrdS50YURlZmF1bHRXcmFwK1wiPlwiKSxhfSksdi4kZm9ybWF0dGVycy51bnNoaWZ0KFUpLHYuJGZvcm1hdHRlcnMudW5zaGlmdChmdW5jdGlvbihhKXtyZXR1cm4gdi4kdW5kb01hbmFnZXIucHVzaChhfHxcIlwiKX0pO3ZhciBWPWZ1bmN0aW9uKGEpe3JldHVybiBqLiRlbWl0KFwidGEtZWxlbWVudC1zZWxlY3RcIix0aGlzKSxhLnByZXZlbnREZWZhdWx0KCksITF9LFc9ZnVuY3Rpb24oYSxjKXtpZihjJiZhbmd1bGFyLmV4dGVuZChhLGMpLCFwJiYhQyl7cD0hMDt2YXIgZDtkPWEub3JpZ2luYWxFdmVudD9hLm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyOmEuZGF0YVRyYW5zZmVyLGouJGVtaXQoXCJ0YS1kcm9wLWV2ZW50XCIsdGhpcyxhLGQpLGIoZnVuY3Rpb24oKXtwPSExLE4oKX0sMTAwKX19LFg9altcInJlQXBwbHlPblNlbGVjdG9ySGFuZGxlcnNcIisodS5pZHx8XCJcIildPWZ1bmN0aW9uKCl7Q3x8YW5ndWxhci5mb3JFYWNoKG0sZnVuY3Rpb24oYSl7dC5maW5kKGEpLm9mZihcImNsaWNrXCIsVikub24oXCJjbGlja1wiLFYpfSl9LFk9ZnVuY3Rpb24oYSl7dFswXS5pbm5lckhUTUw9YX07di4kcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGE9di4kdmlld1ZhbHVlfHxcIlwiO0V8fChBJiZEJiYodC5yZW1vdmVDbGFzcyhcInBsYWNlaG9sZGVyLXRleHRcIiksdFswXS5ibHVyKCksYihmdW5jdGlvbigpe3RbMF0uZm9jdXMoKSxsLnNldFNlbGVjdGlvblRvRWxlbWVudEVuZCh0LmNoaWxkcmVuKClbdC5jaGlsZHJlbigpLmxlbmd0aC0xXSl9LDEpKSxBPyhZKHUucGxhY2Vob2xkZXI/XCJcIj09PWE/eTphOlwiXCI9PT1hP3k6YSksQz90Lm9mZihcImRyb3BcIixXKTooWCgpLHQub24oXCJkcm9wXCIsVykpKTpcInRleHRhcmVhXCIhPT10WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmXCJpbnB1dFwiIT09dFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCk/WShuKGEpKTp0LnZhbChhKSksQSYmdS5wbGFjZWhvbGRlciYmKFwiXCI9PT1hP0Q/dC5yZW1vdmVDbGFzcyhcInBsYWNlaG9sZGVyLXRleHRcIik6dC5hZGRDbGFzcyhcInBsYWNlaG9sZGVyLXRleHRcIik6dC5yZW1vdmVDbGFzcyhcInBsYWNlaG9sZGVyLXRleHRcIikpLEU9ITF9LHUudGFSZWFkb25seSYmKEM9ai4kZXZhbCh1LnRhUmVhZG9ubHkpLEM/KHQuYWRkQ2xhc3MoXCJ0YS1yZWFkb25seVwiKSwoXCJ0ZXh0YXJlYVwiPT09dFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCl8fFwiaW5wdXRcIj09PXRbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpKSYmdC5hdHRyKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpLHZvaWQgMCE9PXQuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiKSYmdC5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIpJiZ0LnJlbW92ZUF0dHIoXCJjb250ZW50ZWRpdGFibGVcIikpOih0LnJlbW92ZUNsYXNzKFwidGEtcmVhZG9ubHlcIiksXCJ0ZXh0YXJlYVwiPT09dFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCl8fFwiaW5wdXRcIj09PXRbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpP3QucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpOkEmJnQuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiLFwidHJ1ZVwiKSksai4kd2F0Y2godS50YVJlYWRvbmx5LGZ1bmN0aW9uKGEsYil7YiE9PWEmJihhPyh0LmFkZENsYXNzKFwidGEtcmVhZG9ubHlcIiksKFwidGV4dGFyZWFcIj09PXRbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxcImlucHV0XCI9PT10WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkmJnQuYXR0cihcImRpc2FibGVkXCIsXCJkaXNhYmxlZFwiKSx2b2lkIDAhPT10LmF0dHIoXCJjb250ZW50ZWRpdGFibGVcIikmJnQuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiKSYmdC5yZW1vdmVBdHRyKFwiY29udGVudGVkaXRhYmxlXCIpLGFuZ3VsYXIuZm9yRWFjaChtLGZ1bmN0aW9uKGEpe3QuZmluZChhKS5vbihcImNsaWNrXCIsVil9KSx0Lm9mZihcImRyb3BcIixXKSk6KHQucmVtb3ZlQ2xhc3MoXCJ0YS1yZWFkb25seVwiKSxcInRleHRhcmVhXCI9PT10WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKXx8XCJpbnB1dFwiPT09dFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCk/dC5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIik6QSYmdC5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIsXCJ0cnVlXCIpLGFuZ3VsYXIuZm9yRWFjaChtLGZ1bmN0aW9uKGEpe3QuZmluZChhKS5vZmYoXCJjbGlja1wiLFYpfSksdC5vbihcImRyb3BcIixXKSksQz1hKX0pKSxBJiYhQyYmKGFuZ3VsYXIuZm9yRWFjaChtLGZ1bmN0aW9uKGEpe3QuZmluZChhKS5vbihcImNsaWNrXCIsVil9KSx0Lm9uKFwiZHJvcFwiLFcpLHQub24oXCJibHVyXCIsZnVuY3Rpb24oKXtjLndlYmtpdCYmKGQ9ITApfSkpfX19XSk7dmFyIHA9ITEscT1hbmd1bGFyLm1vZHVsZShcInRleHRBbmd1bGFyXCIsW1wibmdTYW5pdGl6ZVwiLFwidGV4dEFuZ3VsYXJTZXR1cFwiLFwidGV4dEFuZ3VsYXIuZmFjdG9yaWVzXCIsXCJ0ZXh0QW5ndWxhci5ET01cIixcInRleHRBbmd1bGFyLnZhbGlkYXRvcnNcIixcInRleHRBbmd1bGFyLnRhQmluZFwiXSkscj17fTtxLmNvbnN0YW50KFwidGFSZWdpc3RlclRvb2xcIixiKSxxLnZhbHVlKFwidGFUb29sc1wiLHIpLHEuY29uZmlnKFtmdW5jdGlvbigpe2FuZ3VsYXIuZm9yRWFjaChyLGZ1bmN0aW9uKGEsYil7ZGVsZXRlIHJbYl19KX1dKSxxLnJ1bihbZnVuY3Rpb24oKXtpZighd2luZG93LnJhbmd5KXRocm93XCJyYW5neS1jb3JlLmpzIGFuZCByYW5neS1zZWxlY3Rpb25zYXZlcmVzdG9yZS5qcyBhcmUgcmVxdWlyZWQgZm9yIHRleHRBbmd1bGFyIHRvIHdvcmsgY29ycmVjdGx5LCByYW5neS1jb3JlIGlzIG5vdCB5ZXQgbG9hZGVkLlwiO2lmKHdpbmRvdy5yYW5neS5pbml0KCksIXdpbmRvdy5yYW5neS5zYXZlU2VsZWN0aW9uKXRocm93XCJyYW5neS1zZWxlY3Rpb25zYXZlcmVzdG9yZS5qcyBpcyByZXF1aXJlZCBmb3IgdGV4dEFuZ3VsYXIgdG8gd29yayBjb3JyZWN0bHkuXCJ9XSkscS5kaXJlY3RpdmUoXCJ0ZXh0QW5ndWxhclwiLFtcIiRjb21waWxlXCIsXCIkdGltZW91dFwiLFwidGFPcHRpb25zXCIsXCJ0YVNlbGVjdGlvblwiLFwidGFFeGVjQ29tbWFuZFwiLFwidGV4dEFuZ3VsYXJNYW5hZ2VyXCIsXCIkd2luZG93XCIsXCIkZG9jdW1lbnRcIixcIiRhbmltYXRlXCIsXCIkbG9nXCIsXCIkcVwiLFwiJHBhcnNlXCIsZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGksaixrLGwpe3JldHVybntyZXF1aXJlOlwiP25nTW9kZWxcIixzY29wZTp7fSxyZXN0cmljdDpcIkVBXCIsbGluazpmdW5jdGlvbihtLG4sbyxwKXt2YXIgcSxyLHMsdCx1LHYsdyx4LHkseixBPW8uc2VyaWFsP28uc2VyaWFsOk1hdGguZmxvb3IoMWUxNipNYXRoLnJhbmRvbSgpKTttLl9uYW1lPW8ubmFtZT9vLm5hbWU6XCJ0ZXh0QW5ndWxhckVkaXRvclwiK0E7dmFyIEI9ZnVuY3Rpb24oYSxjLGQpe2IoZnVuY3Rpb24oKXt2YXIgYj1mdW5jdGlvbigpe2Eub2ZmKGMsYiksZC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Eub24oYyxiKX0sMTAwKX07eT1lKG8udGFEZWZhdWx0V3JhcCksYW5ndWxhci5leHRlbmQobSxhbmd1bGFyLmNvcHkoYykse3dyYXBTZWxlY3Rpb246ZnVuY3Rpb24oYSxiLGMpe1widW5kb1wiPT09YS50b0xvd2VyQ2FzZSgpP21bXCIkdW5kb1RhQmluZHRhVGV4dEVsZW1lbnRcIitBXSgpOlwicmVkb1wiPT09YS50b0xvd2VyQ2FzZSgpP21bXCIkcmVkb1RhQmluZHRhVGV4dEVsZW1lbnRcIitBXSgpOih5KGEsITEsYiksYyYmbVtcInJlQXBwbHlPblNlbGVjdG9ySGFuZGxlcnN0YVRleHRFbGVtZW50XCIrQV0oKSxtLmRpc3BsYXlFbGVtZW50cy50ZXh0WzBdLmZvY3VzKCkpfSxzaG93SHRtbDptLiRldmFsKG8udGFTaG93SHRtbCl8fCExfSksby50YUZvY3Vzc2VkQ2xhc3MmJihtLmNsYXNzZXMuZm9jdXNzZWQ9by50YUZvY3Vzc2VkQ2xhc3MpLG8udGFUZXh0RWRpdG9yQ2xhc3MmJihtLmNsYXNzZXMudGV4dEVkaXRvcj1vLnRhVGV4dEVkaXRvckNsYXNzKSxvLnRhSHRtbEVkaXRvckNsYXNzJiYobS5jbGFzc2VzLmh0bWxFZGl0b3I9by50YUh0bWxFZGl0b3JDbGFzcyksby50YVRleHRFZGl0b3JTZXR1cCYmKG0uc2V0dXAudGV4dEVkaXRvclNldHVwPW0uJHBhcmVudC4kZXZhbChvLnRhVGV4dEVkaXRvclNldHVwKSksby50YUh0bWxFZGl0b3JTZXR1cCYmKG0uc2V0dXAuaHRtbEVkaXRvclNldHVwPW0uJHBhcmVudC4kZXZhbChvLnRhSHRtbEVkaXRvclNldHVwKSksbS5maWxlRHJvcEhhbmRsZXI9by50YUZpbGVEcm9wP20uJHBhcmVudC4kZXZhbChvLnRhRmlsZURyb3ApOm0uZGVmYXVsdEZpbGVEcm9wSGFuZGxlcix3PW5bMF0uaW5uZXJIVE1MLG5bMF0uaW5uZXJIVE1MPVwiXCIsbS5kaXNwbGF5RWxlbWVudHM9e2Zvcm1pbnB1dDphbmd1bGFyLmVsZW1lbnQoXCI8aW5wdXQgdHlwZT0naGlkZGVuJyB0YWJpbmRleD0nLTEnIHN0eWxlPSdkaXNwbGF5OiBub25lOyc+XCIpLGh0bWw6YW5ndWxhci5lbGVtZW50KFwiPHRleHRhcmVhPjwvdGV4dGFyZWE+XCIpLHRleHQ6YW5ndWxhci5lbGVtZW50KFwiPGRpdj48L2Rpdj5cIiksc2Nyb2xsV2luZG93OmFuZ3VsYXIuZWxlbWVudChcIjxkaXYgY2xhc3M9J3RhLXNjcm9sbC13aW5kb3cnPjwvZGl2PlwiKSxwb3BvdmVyOmFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cInBvcG92ZXIgZmFkZSBib3R0b21cIiBzdHlsZT1cIm1heC13aWR0aDogbm9uZTsgd2lkdGg6IDMwNXB4O1wiPjwvZGl2PicpLHBvcG92ZXJBcnJvdzphbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJhcnJvd1wiPjwvZGl2PicpLHBvcG92ZXJDb250YWluZXI6YW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwicG9wb3Zlci1jb250ZW50XCI+PC9kaXY+JykscmVzaXplOntvdmVybGF5OmFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cInRhLXJlc2l6ZXItaGFuZGxlLW92ZXJsYXlcIj48L2Rpdj4nKSxiYWNrZ3JvdW5kOmFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cInRhLXJlc2l6ZXItaGFuZGxlLWJhY2tncm91bmRcIj48L2Rpdj4nKSxhbmNob3JzOlthbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJ0YS1yZXNpemVyLWhhbmRsZS1jb3JuZXIgdGEtcmVzaXplci1oYW5kbGUtY29ybmVyLXRsXCI+PC9kaXY+JyksYW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwidGEtcmVzaXplci1oYW5kbGUtY29ybmVyIHRhLXJlc2l6ZXItaGFuZGxlLWNvcm5lci10clwiPjwvZGl2PicpLGFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cInRhLXJlc2l6ZXItaGFuZGxlLWNvcm5lciB0YS1yZXNpemVyLWhhbmRsZS1jb3JuZXItYmxcIj48L2Rpdj4nKSxhbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJ0YS1yZXNpemVyLWhhbmRsZS1jb3JuZXIgdGEtcmVzaXplci1oYW5kbGUtY29ybmVyLWJyXCI+PC9kaXY+JyldLGluZm86YW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwidGEtcmVzaXplci1oYW5kbGUtaW5mb1wiPjwvZGl2PicpfX0sbS5kaXNwbGF5RWxlbWVudHMucG9wb3Zlci5hcHBlbmQobS5kaXNwbGF5RWxlbWVudHMucG9wb3ZlckFycm93KSxtLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLmFwcGVuZChtLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyQ29udGFpbmVyKSxtLmRpc3BsYXlFbGVtZW50cy5zY3JvbGxXaW5kb3cuYXBwZW5kKG0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIpLG0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIub24oXCJtb3VzZWRvd25cIixmdW5jdGlvbihhLGIpe3JldHVybiBiJiZhbmd1bGFyLmV4dGVuZChhLGIpLGEucHJldmVudERlZmF1bHQoKSwhMVxufSksbS5zaG93UG9wb3Zlcj1mdW5jdGlvbihhKXttLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLmNzcyhcImRpc3BsYXlcIixcImJsb2NrXCIpLG0ucmVmbG93UG9wb3ZlcihhKSxpLmFkZENsYXNzKG0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIsXCJpblwiKSxCKGguZmluZChcImJvZHlcIiksXCJjbGljayBrZXl1cFwiLGZ1bmN0aW9uKCl7bS5oaWRlUG9wb3ZlcigpfSl9LG0ucmVmbG93UG9wb3Zlcj1mdW5jdGlvbihhKXttLmRpc3BsYXlFbGVtZW50cy50ZXh0WzBdLm9mZnNldEhlaWdodC01MT5hWzBdLm9mZnNldFRvcD8obS5kaXNwbGF5RWxlbWVudHMucG9wb3Zlci5jc3MoXCJ0b3BcIixhWzBdLm9mZnNldFRvcCthWzBdLm9mZnNldEhlaWdodCtcInB4XCIpLG0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIucmVtb3ZlQ2xhc3MoXCJ0b3BcIikuYWRkQ2xhc3MoXCJib3R0b21cIikpOihtLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLmNzcyhcInRvcFwiLGFbMF0ub2Zmc2V0VG9wLTU0K1wicHhcIiksbS5kaXNwbGF5RWxlbWVudHMucG9wb3Zlci5yZW1vdmVDbGFzcyhcImJvdHRvbVwiKS5hZGRDbGFzcyhcInRvcFwiKSk7dmFyIGI9bS5kaXNwbGF5RWxlbWVudHMudGV4dFswXS5vZmZzZXRXaWR0aC1tLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyWzBdLm9mZnNldFdpZHRoLGM9YVswXS5vZmZzZXRMZWZ0K2FbMF0ub2Zmc2V0V2lkdGgvMi1tLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyWzBdLm9mZnNldFdpZHRoLzI7bS5kaXNwbGF5RWxlbWVudHMucG9wb3Zlci5jc3MoXCJsZWZ0XCIsTWF0aC5tYXgoMCxNYXRoLm1pbihiLGMpKStcInB4XCIpLG0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXJBcnJvdy5jc3MoXCJtYXJnaW4tbGVmdFwiLE1hdGgubWluKGMsTWF0aC5tYXgoMCxjLWIpKS0xMStcInB4XCIpfSxtLmhpZGVQb3BvdmVyPWZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oKXttLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLmNzcyhcImRpc3BsYXlcIixcIlwiKSxtLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyQ29udGFpbmVyLmF0dHIoXCJzdHlsZVwiLFwiXCIpLG0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXJDb250YWluZXIuYXR0cihcImNsYXNzXCIsXCJwb3BvdmVyLWNvbnRlbnRcIil9O2sud2hlbihpLnJlbW92ZUNsYXNzKG0uZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIsXCJpblwiLGEpKS50aGVuKGEpfSxtLmRpc3BsYXlFbGVtZW50cy5yZXNpemUub3ZlcmxheS5hcHBlbmQobS5kaXNwbGF5RWxlbWVudHMucmVzaXplLmJhY2tncm91bmQpLGFuZ3VsYXIuZm9yRWFjaChtLmRpc3BsYXlFbGVtZW50cy5yZXNpemUuYW5jaG9ycyxmdW5jdGlvbihhKXttLmRpc3BsYXlFbGVtZW50cy5yZXNpemUub3ZlcmxheS5hcHBlbmQoYSl9KSxtLmRpc3BsYXlFbGVtZW50cy5yZXNpemUub3ZlcmxheS5hcHBlbmQobS5kaXNwbGF5RWxlbWVudHMucmVzaXplLmluZm8pLG0uZGlzcGxheUVsZW1lbnRzLnNjcm9sbFdpbmRvdy5hcHBlbmQobS5kaXNwbGF5RWxlbWVudHMucmVzaXplLm92ZXJsYXkpLG0ucmVmbG93UmVzaXplT3ZlcmxheT1mdW5jdGlvbihhKXthPWFuZ3VsYXIuZWxlbWVudChhKVswXSxtLmRpc3BsYXlFbGVtZW50cy5yZXNpemUub3ZlcmxheS5jc3Moe2Rpc3BsYXk6XCJibG9ja1wiLGxlZnQ6YS5vZmZzZXRMZWZ0LTUrXCJweFwiLHRvcDphLm9mZnNldFRvcC01K1wicHhcIix3aWR0aDphLm9mZnNldFdpZHRoKzEwK1wicHhcIixoZWlnaHQ6YS5vZmZzZXRIZWlnaHQrMTArXCJweFwifSksbS5kaXNwbGF5RWxlbWVudHMucmVzaXplLmluZm8udGV4dChhLm9mZnNldFdpZHRoK1wiIHggXCIrYS5vZmZzZXRIZWlnaHQpfSxtLnNob3dSZXNpemVPdmVybGF5PWZ1bmN0aW9uKGEpe3ZhciBiPWguZmluZChcImJvZHlcIik7ej1mdW5jdGlvbihjKXt2YXIgZD17d2lkdGg6cGFyc2VJbnQoYS5hdHRyKFwid2lkdGhcIikpLGhlaWdodDpwYXJzZUludChhLmF0dHIoXCJoZWlnaHRcIikpLHg6Yy5jbGllbnRYLHk6Yy5jbGllbnRZfTsodm9pZCAwPT09ZC53aWR0aHx8aXNOYU4oZC53aWR0aCkpJiYoZC53aWR0aD1hWzBdLm9mZnNldFdpZHRoKSwodm9pZCAwPT09ZC5oZWlnaHR8fGlzTmFOKGQuaGVpZ2h0KSkmJihkLmhlaWdodD1hWzBdLm9mZnNldEhlaWdodCksbS5oaWRlUG9wb3ZlcigpO3ZhciBlPWQuaGVpZ2h0L2Qud2lkdGgsZj1mdW5jdGlvbihiKXt2YXIgYz17eDpNYXRoLm1heCgwLGQud2lkdGgrKGIuY2xpZW50WC1kLngpKSx5Ok1hdGgubWF4KDAsZC5oZWlnaHQrKGIuY2xpZW50WS1kLnkpKX07aWYoYi5zaGlmdEtleSl7dmFyIGY9Yy55L2MueDtjLng9ZT5mP2MueDpjLnkvZSxjLnk9ZT5mP2MueCplOmMueX1lbD1hbmd1bGFyLmVsZW1lbnQoYSksZWwuYXR0cihcImhlaWdodFwiLE1hdGgubWF4KDAsYy55KSksZWwuYXR0cihcIndpZHRoXCIsTWF0aC5tYXgoMCxjLngpKSxtLnJlZmxvd1Jlc2l6ZU92ZXJsYXkoYSl9O2Iub24oXCJtb3VzZW1vdmVcIixmKSxCKGIsXCJtb3VzZXVwXCIsZnVuY3Rpb24oYyl7Yy5wcmV2ZW50RGVmYXVsdCgpLGMuc3RvcFByb3BhZ2F0aW9uKCksYi5vZmYoXCJtb3VzZW1vdmVcIixmKSxtLnNob3dQb3BvdmVyKGEpfSksYy5zdG9wUHJvcGFnYXRpb24oKSxjLnByZXZlbnREZWZhdWx0KCl9LG0uZGlzcGxheUVsZW1lbnRzLnJlc2l6ZS5hbmNob3JzWzNdLm9uKFwibW91c2Vkb3duXCIseiksbS5yZWZsb3dSZXNpemVPdmVybGF5KGEpLEIoYixcImNsaWNrXCIsZnVuY3Rpb24oKXttLmhpZGVSZXNpemVPdmVybGF5KCl9KX0sbS5oaWRlUmVzaXplT3ZlcmxheT1mdW5jdGlvbigpe20uZGlzcGxheUVsZW1lbnRzLnJlc2l6ZS5hbmNob3JzWzNdLm9mZihcIm1vdXNlZG93blwiLHopLG0uZGlzcGxheUVsZW1lbnRzLnJlc2l6ZS5vdmVybGF5LmNzcyhcImRpc3BsYXlcIixcIlwiKX0sbS5zZXR1cC5odG1sRWRpdG9yU2V0dXAobS5kaXNwbGF5RWxlbWVudHMuaHRtbCksbS5zZXR1cC50ZXh0RWRpdG9yU2V0dXAobS5kaXNwbGF5RWxlbWVudHMudGV4dCksbS5kaXNwbGF5RWxlbWVudHMuaHRtbC5hdHRyKHtpZDpcInRhSHRtbEVsZW1lbnRcIitBLFwibmctc2hvd1wiOlwic2hvd0h0bWxcIixcInRhLWJpbmRcIjpcInRhLWJpbmRcIixcIm5nLW1vZGVsXCI6XCJodG1sXCJ9KSxtLmRpc3BsYXlFbGVtZW50cy50ZXh0LmF0dHIoe2lkOlwidGFUZXh0RWxlbWVudFwiK0EsY29udGVudEVkaXRhYmxlOlwidHJ1ZVwiLFwidGEtYmluZFwiOlwidGEtYmluZFwiLFwibmctbW9kZWxcIjpcImh0bWxcIn0pLG0uZGlzcGxheUVsZW1lbnRzLnNjcm9sbFdpbmRvdy5hdHRyKHtcIm5nLWhpZGVcIjpcInNob3dIdG1sXCJ9KSxvLnRhRGVmYXVsdFdyYXAmJm0uZGlzcGxheUVsZW1lbnRzLnRleHQuYXR0cihcInRhLWRlZmF1bHQtd3JhcFwiLG8udGFEZWZhdWx0V3JhcCksby50YVVuc2FmZVNhbml0aXplciYmKG0uZGlzcGxheUVsZW1lbnRzLnRleHQuYXR0cihcInRhLXVuc2FmZS1zYW5pdGl6ZXJcIixvLnRhVW5zYWZlU2FuaXRpemVyKSxtLmRpc3BsYXlFbGVtZW50cy5odG1sLmF0dHIoXCJ0YS11bnNhZmUtc2FuaXRpemVyXCIsby50YVVuc2FmZVNhbml0aXplcikpLG0uZGlzcGxheUVsZW1lbnRzLnNjcm9sbFdpbmRvdy5hcHBlbmQobS5kaXNwbGF5RWxlbWVudHMudGV4dCksbi5hcHBlbmQobS5kaXNwbGF5RWxlbWVudHMuc2Nyb2xsV2luZG93KSxuLmFwcGVuZChtLmRpc3BsYXlFbGVtZW50cy5odG1sKSxtLmRpc3BsYXlFbGVtZW50cy5mb3JtaW5wdXQuYXR0cihcIm5hbWVcIixtLl9uYW1lKSxuLmFwcGVuZChtLmRpc3BsYXlFbGVtZW50cy5mb3JtaW5wdXQpLG8udGFiaW5kZXgmJihuLnJlbW92ZUF0dHIoXCJ0YWJpbmRleFwiKSxtLmRpc3BsYXlFbGVtZW50cy50ZXh0LmF0dHIoXCJ0YWJpbmRleFwiLG8udGFiaW5kZXgpLG0uZGlzcGxheUVsZW1lbnRzLmh0bWwuYXR0cihcInRhYmluZGV4XCIsby50YWJpbmRleCkpLG8ucGxhY2Vob2xkZXImJihtLmRpc3BsYXlFbGVtZW50cy50ZXh0LmF0dHIoXCJwbGFjZWhvbGRlclwiLG8ucGxhY2Vob2xkZXIpLG0uZGlzcGxheUVsZW1lbnRzLmh0bWwuYXR0cihcInBsYWNlaG9sZGVyXCIsby5wbGFjZWhvbGRlcikpLG8udGFEaXNhYmxlZCYmKG0uZGlzcGxheUVsZW1lbnRzLnRleHQuYXR0cihcInRhLXJlYWRvbmx5XCIsXCJkaXNhYmxlZFwiKSxtLmRpc3BsYXlFbGVtZW50cy5odG1sLmF0dHIoXCJ0YS1yZWFkb25seVwiLFwiZGlzYWJsZWRcIiksbS5kaXNhYmxlZD1tLiRwYXJlbnQuJGV2YWwoby50YURpc2FibGVkKSxtLiRwYXJlbnQuJHdhdGNoKG8udGFEaXNhYmxlZCxmdW5jdGlvbihhKXttLmRpc2FibGVkPWEsbS5kaXNhYmxlZD9uLmFkZENsYXNzKG0uY2xhc3Nlcy5kaXNhYmxlZCk6bi5yZW1vdmVDbGFzcyhtLmNsYXNzZXMuZGlzYWJsZWQpfSkpLG8udGFQYXN0ZSYmKG0uX3Bhc3RlSGFuZGxlcj1mdW5jdGlvbihhKXtyZXR1cm4gbChvLnRhUGFzdGUpKG0uJHBhcmVudCx7JGh0bWw6YX0pfSxtLmRpc3BsYXlFbGVtZW50cy50ZXh0LmF0dHIoXCJ0YS1wYXN0ZVwiLFwiX3Bhc3RlSGFuZGxlcigkaHRtbClcIikpLGEobS5kaXNwbGF5RWxlbWVudHMuc2Nyb2xsV2luZG93KShtKSxhKG0uZGlzcGxheUVsZW1lbnRzLmh0bWwpKG0pLG0udXBkYXRlVGFCaW5kdGFUZXh0RWxlbWVudD1tW1widXBkYXRlVGFCaW5kdGFUZXh0RWxlbWVudFwiK0FdLG0udXBkYXRlVGFCaW5kdGFIdG1sRWxlbWVudD1tW1widXBkYXRlVGFCaW5kdGFIdG1sRWxlbWVudFwiK0FdLG4uYWRkQ2xhc3MoXCJ0YS1yb290XCIpLG0uZGlzcGxheUVsZW1lbnRzLnNjcm9sbFdpbmRvdy5hZGRDbGFzcyhcInRhLXRleHQgdGEtZWRpdG9yIFwiK20uY2xhc3Nlcy50ZXh0RWRpdG9yKSxtLmRpc3BsYXlFbGVtZW50cy5odG1sLmFkZENsYXNzKFwidGEtaHRtbCB0YS1lZGl0b3IgXCIrbS5jbGFzc2VzLmh0bWxFZGl0b3IpLG0uX2FjdGlvblJ1bm5pbmc9ITE7dmFyIEM9ITE7aWYobS5zdGFydEFjdGlvbj1mdW5jdGlvbigpe3JldHVybiBtLl9hY3Rpb25SdW5uaW5nPSEwLEM9Zy5yYW5neS5zYXZlU2VsZWN0aW9uKCksZnVuY3Rpb24oKXtDJiZnLnJhbmd5LnJlc3RvcmVTZWxlY3Rpb24oQyl9fSxtLmVuZEFjdGlvbj1mdW5jdGlvbigpe20uX2FjdGlvblJ1bm5pbmc9ITEsQyYmZy5yYW5neS5yZW1vdmVNYXJrZXJzKEMpLEM9ITEsbS51cGRhdGVTZWxlY3RlZFN0eWxlcygpLG0uc2hvd0h0bWx8fG1bXCJ1cGRhdGVUYUJpbmR0YVRleHRFbGVtZW50XCIrQV0oKX0sdT1mdW5jdGlvbigpe20uZm9jdXNzZWQ9ITAsbi5hZGRDbGFzcyhtLmNsYXNzZXMuZm9jdXNzZWQpLHguZm9jdXMoKSxuLnRyaWdnZXJIYW5kbGVyKFwiZm9jdXNcIil9LG0uZGlzcGxheUVsZW1lbnRzLmh0bWwub24oXCJmb2N1c1wiLHUpLG0uZGlzcGxheUVsZW1lbnRzLnRleHQub24oXCJmb2N1c1wiLHUpLHY9ZnVuY3Rpb24oYSl7cmV0dXJuIG0uX2FjdGlvblJ1bm5pbmd8fGhbMF0uYWN0aXZlRWxlbWVudD09PW0uZGlzcGxheUVsZW1lbnRzLmh0bWxbMF18fGhbMF0uYWN0aXZlRWxlbWVudD09PW0uZGlzcGxheUVsZW1lbnRzLnRleHRbMF18fChuLnJlbW92ZUNsYXNzKG0uY2xhc3Nlcy5mb2N1c3NlZCkseC51bmZvY3VzKCksYihmdW5jdGlvbigpe20uX2JVcGRhdGVTZWxlY3RlZFN0eWxlcz0hMSxuLnRyaWdnZXJIYW5kbGVyKFwiYmx1clwiKSxtLmZvY3Vzc2VkPSExfSwwKSksYS5wcmV2ZW50RGVmYXVsdCgpLCExfSxtLmRpc3BsYXlFbGVtZW50cy5odG1sLm9uKFwiYmx1clwiLHYpLG0uZGlzcGxheUVsZW1lbnRzLnRleHQub24oXCJibHVyXCIsdiksbS5kaXNwbGF5RWxlbWVudHMudGV4dC5vbihcInBhc3RlXCIsZnVuY3Rpb24oYSl7bi50cmlnZ2VySGFuZGxlcihcInBhc3RlXCIsYSl9KSxtLnF1ZXJ5Rm9ybWF0QmxvY2tTdGF0ZT1mdW5jdGlvbihhKXtyZXR1cm4hbS5zaG93SHRtbCYmYS50b0xvd2VyQ2FzZSgpPT09aFswXS5xdWVyeUNvbW1hbmRWYWx1ZShcImZvcm1hdEJsb2NrXCIpLnRvTG93ZXJDYXNlKCl9LG0ucXVlcnlDb21tYW5kU3RhdGU9ZnVuY3Rpb24oYSl7cmV0dXJuIG0uc2hvd0h0bWw/XCJcIjpoWzBdLnF1ZXJ5Q29tbWFuZFN0YXRlKGEpfSxtLnN3aXRjaFZpZXc9ZnVuY3Rpb24oKXttLnNob3dIdG1sPSFtLnNob3dIdG1sLGkuZW5hYmxlZCghMSxtLmRpc3BsYXlFbGVtZW50cy5odG1sKSxpLmVuYWJsZWQoITEsbS5kaXNwbGF5RWxlbWVudHMudGV4dCksbS5zaG93SHRtbD9iKGZ1bmN0aW9uKCl7cmV0dXJuIGkuZW5hYmxlZCghMCxtLmRpc3BsYXlFbGVtZW50cy5odG1sKSxpLmVuYWJsZWQoITAsbS5kaXNwbGF5RWxlbWVudHMudGV4dCksbS5kaXNwbGF5RWxlbWVudHMuaHRtbFswXS5mb2N1cygpfSwxMDApOmIoZnVuY3Rpb24oKXtyZXR1cm4gaS5lbmFibGVkKCEwLG0uZGlzcGxheUVsZW1lbnRzLmh0bWwpLGkuZW5hYmxlZCghMCxtLmRpc3BsYXlFbGVtZW50cy50ZXh0KSxtLmRpc3BsYXlFbGVtZW50cy50ZXh0WzBdLmZvY3VzKCl9LDEwMCl9LG8ubmdNb2RlbCl7dmFyIEQ9ITA7cC4kcmVuZGVyPWZ1bmN0aW9uKCl7aWYoRCl7RD0hMTt2YXIgYT1tLiRwYXJlbnQuJGV2YWwoby5uZ01vZGVsKTt2b2lkIDAhPT1hJiZudWxsIT09YXx8IXd8fFwiXCI9PT13fHxwLiRzZXRWaWV3VmFsdWUodyl9bS5kaXNwbGF5RWxlbWVudHMuZm9ybWlucHV0LnZhbChwLiR2aWV3VmFsdWUpLG0uX2VsZW1lbnRTZWxlY3RUcmlnZ2VyZWR8fChtLmh0bWw9cC4kdmlld1ZhbHVlfHxcIlwiKX07dmFyIEU9ZnVuY3Rpb24oYSl7cmV0dXJuIG8ucmVxdWlyZWQmJnAuJHNldFZhbGlkaXR5KFwicmVxdWlyZWRcIiwhKCFhfHxcIlwiPT09YS50cmltKCkpKSxhfTtwLiRwYXJzZXJzLnB1c2goRSkscC4kZm9ybWF0dGVycy5wdXNoKEUpfWVsc2UgbS5kaXNwbGF5RWxlbWVudHMuZm9ybWlucHV0LnZhbCh3KSxtLmh0bWw9dztpZihtLiR3YXRjaChcImh0bWxcIixmdW5jdGlvbihhLGIpe2EhPT1iJiYoby5uZ01vZGVsJiZwLiR2aWV3VmFsdWUhPT1hJiZwLiRzZXRWaWV3VmFsdWUoYSksbS5kaXNwbGF5RWxlbWVudHMuZm9ybWlucHV0LnZhbChhKSl9KSxvLnRhVGFyZ2V0VG9vbGJhcnMpeD1mLnJlZ2lzdGVyRWRpdG9yKG0uX25hbWUsbSxvLnRhVGFyZ2V0VG9vbGJhcnMuc3BsaXQoXCIsXCIpKTtlbHNle3ZhciBGPWFuZ3VsYXIuZWxlbWVudCgnPGRpdiB0ZXh0LWFuZ3VsYXItdG9vbGJhciBuYW1lPVwidGV4dEFuZ3VsYXJUb29sYmFyJytBKydcIj4nKTtvLnRhVG9vbGJhciYmRi5hdHRyKFwidGEtdG9vbGJhclwiLG8udGFUb29sYmFyKSxvLnRhVG9vbGJhckNsYXNzJiZGLmF0dHIoXCJ0YS10b29sYmFyLWNsYXNzXCIsby50YVRvb2xiYXJDbGFzcyksby50YVRvb2xiYXJHcm91cENsYXNzJiZGLmF0dHIoXCJ0YS10b29sYmFyLWdyb3VwLWNsYXNzXCIsby50YVRvb2xiYXJHcm91cENsYXNzKSxvLnRhVG9vbGJhckJ1dHRvbkNsYXNzJiZGLmF0dHIoXCJ0YS10b29sYmFyLWJ1dHRvbi1jbGFzc1wiLG8udGFUb29sYmFyQnV0dG9uQ2xhc3MpLG8udGFUb29sYmFyQWN0aXZlQnV0dG9uQ2xhc3MmJkYuYXR0cihcInRhLXRvb2xiYXItYWN0aXZlLWJ1dHRvbi1jbGFzc1wiLG8udGFUb29sYmFyQWN0aXZlQnV0dG9uQ2xhc3MpLG8udGFGb2N1c3NlZENsYXNzJiZGLmF0dHIoXCJ0YS1mb2N1c3NlZC1jbGFzc1wiLG8udGFGb2N1c3NlZENsYXNzKSxuLnByZXBlbmQoRiksYShGKShtLiRwYXJlbnQpLHg9Zi5yZWdpc3RlckVkaXRvcihtLl9uYW1lLG0sW1widGV4dEFuZ3VsYXJUb29sYmFyXCIrQV0pfW0uJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2YudW5yZWdpc3RlckVkaXRvcihtLl9uYW1lKX0pLG0uJG9uKFwidGEtZWxlbWVudC1zZWxlY3RcIixmdW5jdGlvbihhLGIpe3gudHJpZ2dlckVsZW1lbnRTZWxlY3QoYSxiKSYmbVtcInJlQXBwbHlPblNlbGVjdG9ySGFuZGxlcnN0YVRleHRFbGVtZW50XCIrQV0oKX0pLG0uJG9uKFwidGEtZHJvcC1ldmVudFwiLGZ1bmN0aW9uKGEsYyxkLGUpe20uZGlzcGxheUVsZW1lbnRzLnRleHRbMF0uZm9jdXMoKSxlJiZlLmZpbGVzJiZlLmZpbGVzLmxlbmd0aD4wPyhhbmd1bGFyLmZvckVhY2goZS5maWxlcyxmdW5jdGlvbihhKXt0cnl7ay53aGVuKG0uZmlsZURyb3BIYW5kbGVyKGEsbS53cmFwU2VsZWN0aW9uKXx8bS5maWxlRHJvcEhhbmRsZXIhPT1tLmRlZmF1bHRGaWxlRHJvcEhhbmRsZXImJmsud2hlbihtLmRlZmF1bHRGaWxlRHJvcEhhbmRsZXIoYSxtLndyYXBTZWxlY3Rpb24pKSkudGhlbihmdW5jdGlvbigpe21bXCJ1cGRhdGVUYUJpbmR0YVRleHRFbGVtZW50XCIrQV0oKX0pfWNhdGNoKGIpe2ouZXJyb3IoYil9fSksZC5wcmV2ZW50RGVmYXVsdCgpLGQuc3RvcFByb3BhZ2F0aW9uKCkpOmIoZnVuY3Rpb24oKXttW1widXBkYXRlVGFCaW5kdGFUZXh0RWxlbWVudFwiK0FdKCl9LDApfSksbS5fYlVwZGF0ZVNlbGVjdGVkU3R5bGVzPSExLGFuZ3VsYXIuZWxlbWVudCh3aW5kb3cpLm9uKFwiYmx1clwiLGZ1bmN0aW9uKCl7bS5fYlVwZGF0ZVNlbGVjdGVkU3R5bGVzPSExLG0uZm9jdXNzZWQ9ITF9KSxtLnVwZGF0ZVNlbGVjdGVkU3R5bGVzPWZ1bmN0aW9uKCl7dmFyIGE7dm9pZCAwIT09KGE9ZC5nZXRTZWxlY3Rpb25FbGVtZW50KCkpJiZhLnBhcmVudE5vZGUhPT1tLmRpc3BsYXlFbGVtZW50cy50ZXh0WzBdP3gudXBkYXRlU2VsZWN0ZWRTdHlsZXMoYW5ndWxhci5lbGVtZW50KGEpKTp4LnVwZGF0ZVNlbGVjdGVkU3R5bGVzKCksbS5fYlVwZGF0ZVNlbGVjdGVkU3R5bGVzJiZiKG0udXBkYXRlU2VsZWN0ZWRTdHlsZXMsMjAwKX0scT1mdW5jdGlvbigpe3JldHVybiBtLmZvY3Vzc2VkP3ZvaWQobS5fYlVwZGF0ZVNlbGVjdGVkU3R5bGVzfHwobS5fYlVwZGF0ZVNlbGVjdGVkU3R5bGVzPSEwLG0uJGFwcGx5KGZ1bmN0aW9uKCl7bS51cGRhdGVTZWxlY3RlZFN0eWxlcygpfSkpKTp2b2lkKG0uX2JVcGRhdGVTZWxlY3RlZFN0eWxlcz0hMSl9LG0uZGlzcGxheUVsZW1lbnRzLmh0bWwub24oXCJrZXlkb3duXCIscSksbS5kaXNwbGF5RWxlbWVudHMudGV4dC5vbihcImtleWRvd25cIixxKSxyPWZ1bmN0aW9uKCl7bS5fYlVwZGF0ZVNlbGVjdGVkU3R5bGVzPSExfSxtLmRpc3BsYXlFbGVtZW50cy5odG1sLm9uKFwia2V5dXBcIixyKSxtLmRpc3BsYXlFbGVtZW50cy50ZXh0Lm9uKFwia2V5dXBcIixyKSxzPWZ1bmN0aW9uKGEsYil7YiYmYW5ndWxhci5leHRlbmQoYSxiKSxtLiRhcHBseShmdW5jdGlvbigpe3JldHVybiB4LnNlbmRLZXlDb21tYW5kKGEpPyhtLl9iVXBkYXRlU2VsZWN0ZWRTdHlsZXN8fG0udXBkYXRlU2VsZWN0ZWRTdHlsZXMoKSxhLnByZXZlbnREZWZhdWx0KCksITEpOnZvaWQgMH0pfSxtLmRpc3BsYXlFbGVtZW50cy5odG1sLm9uKFwia2V5cHJlc3NcIixzKSxtLmRpc3BsYXlFbGVtZW50cy50ZXh0Lm9uKFwia2V5cHJlc3NcIixzKSx0PWZ1bmN0aW9uKCl7bS5fYlVwZGF0ZVNlbGVjdGVkU3R5bGVzPSExLG0uJGFwcGx5KGZ1bmN0aW9uKCl7bS51cGRhdGVTZWxlY3RlZFN0eWxlcygpfSl9LG0uZGlzcGxheUVsZW1lbnRzLmh0bWwub24oXCJtb3VzZXVwXCIsdCksbS5kaXNwbGF5RWxlbWVudHMudGV4dC5vbihcIm1vdXNldXBcIix0KX19fV0pLHEuc2VydmljZShcInRleHRBbmd1bGFyTWFuYWdlclwiLFtcInRhVG9vbEV4ZWN1dGVBY3Rpb25cIixcInRhVG9vbHNcIixcInRhUmVnaXN0ZXJUb29sXCIsZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXt9LGU9e307cmV0dXJue3JlZ2lzdGVyRWRpdG9yOmZ1bmN0aW9uKGMsZixnKXtpZighY3x8XCJcIj09PWMpdGhyb3dcInRleHRBbmd1bGFyIEVycm9yOiBBbiBlZGl0b3IgcmVxdWlyZXMgYSBuYW1lXCI7aWYoIWYpdGhyb3dcInRleHRBbmd1bGFyIEVycm9yOiBBbiBlZGl0b3IgcmVxdWlyZXMgYSBzY29wZVwiO2lmKGVbY10pdGhyb3cndGV4dEFuZ3VsYXIgRXJyb3I6IEFuIEVkaXRvciB3aXRoIG5hbWUgXCInK2MrJ1wiIGFscmVhZHkgZXhpc3RzJzt2YXIgaD1bXTtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKGcsZnVuY3Rpb24oYSl7ZFthXSYmaC5wdXNoKGRbYV0pfSksZVtjXT17c2NvcGU6Zix0b29sYmFyczpnLF9yZWdpc3RlclRvb2xiYXI6ZnVuY3Rpb24oYSl7dGhpcy50b29sYmFycy5pbmRleE9mKGEubmFtZSk+PTAmJmgucHVzaChhKX0sZWRpdG9yRnVuY3Rpb25zOntkaXNhYmxlOmZ1bmN0aW9uKCl7YW5ndWxhci5mb3JFYWNoKGgsZnVuY3Rpb24oYSl7YS5kaXNhYmxlZD0hMH0pfSxlbmFibGU6ZnVuY3Rpb24oKXthbmd1bGFyLmZvckVhY2goaCxmdW5jdGlvbihhKXthLmRpc2FibGVkPSExfSl9LGZvY3VzOmZ1bmN0aW9uKCl7YW5ndWxhci5mb3JFYWNoKGgsZnVuY3Rpb24oYSl7YS5fcGFyZW50PWYsYS5kaXNhYmxlZD0hMSxhLmZvY3Vzc2VkPSEwLGYuZm9jdXNzZWQ9ITB9KX0sdW5mb2N1czpmdW5jdGlvbigpe2FuZ3VsYXIuZm9yRWFjaChoLGZ1bmN0aW9uKGEpe2EuZGlzYWJsZWQ9ITAsYS5mb2N1c3NlZD0hMX0pLGYuZm9jdXNzZWQ9ITF9LHVwZGF0ZVNlbGVjdGVkU3R5bGVzOmZ1bmN0aW9uKGEpe2FuZ3VsYXIuZm9yRWFjaChoLGZ1bmN0aW9uKGIpe2FuZ3VsYXIuZm9yRWFjaChiLnRvb2xzLGZ1bmN0aW9uKGMpe2MuYWN0aXZlU3RhdGUmJihiLl9wYXJlbnQ9ZixjLmFjdGl2ZT1jLmFjdGl2ZVN0YXRlKGEpKX0pfSl9LHNlbmRLZXlDb21tYW5kOmZ1bmN0aW9uKGMpe3ZhciBkPSExO3JldHVybihjLmN0cmxLZXl8fGMubWV0YUtleSkmJmFuZ3VsYXIuZm9yRWFjaChiLGZ1bmN0aW9uKGIsZSl7aWYoYi5jb21tYW5kS2V5Q29kZSYmYi5jb21tYW5kS2V5Q29kZT09PWMud2hpY2gpZm9yKHZhciBnPTA7ZzxoLmxlbmd0aDtnKyspaWYodm9pZCAwIT09aFtnXS50b29sc1tlXSl7YS5jYWxsKGhbZ10udG9vbHNbZV0sZiksZD0hMDticmVha319KSxkfSx0cmlnZ2VyRWxlbWVudFNlbGVjdDpmdW5jdGlvbihhLGMpe3ZhciBkPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPSEwLGQ9MDtkPGIubGVuZ3RoO2QrKyljPWMmJmEuYXR0cihiW2RdKTtyZXR1cm4gY30sZT1bXSxnPXt9LGk9ITE7Yz1hbmd1bGFyLmVsZW1lbnQoYyk7dmFyIGo9ITE7aWYoYW5ndWxhci5mb3JFYWNoKGIsZnVuY3Rpb24oYSxiKXthLm9uRWxlbWVudFNlbGVjdCYmYS5vbkVsZW1lbnRTZWxlY3QuZWxlbWVudCYmYS5vbkVsZW1lbnRTZWxlY3QuZWxlbWVudC50b0xvd2VyQ2FzZSgpPT09Y1swXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJighYS5vbkVsZW1lbnRTZWxlY3QuZmlsdGVyfHxhLm9uRWxlbWVudFNlbGVjdC5maWx0ZXIoYykpJiYoaj1qfHxhbmd1bGFyLmlzQXJyYXkoYS5vbkVsZW1lbnRTZWxlY3Qub25seVdpdGhBdHRycykmJmQoYyxhLm9uRWxlbWVudFNlbGVjdC5vbmx5V2l0aEF0dHJzKSwoIWEub25FbGVtZW50U2VsZWN0Lm9ubHlXaXRoQXR0cnN8fGQoYyxhLm9uRWxlbWVudFNlbGVjdC5vbmx5V2l0aEF0dHJzKSkmJihnW2JdPWEpKX0pLGo/KGFuZ3VsYXIuZm9yRWFjaChnLGZ1bmN0aW9uKGEsYil7YS5vbkVsZW1lbnRTZWxlY3Qub25seVdpdGhBdHRycyYmZChjLGEub25FbGVtZW50U2VsZWN0Lm9ubHlXaXRoQXR0cnMpJiZlLnB1c2goe25hbWU6Yix0b29sOmF9KX0pLGUuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBiLnRvb2wub25FbGVtZW50U2VsZWN0Lm9ubHlXaXRoQXR0cnMubGVuZ3RoLWEudG9vbC5vbkVsZW1lbnRTZWxlY3Qub25seVdpdGhBdHRycy5sZW5ndGh9KSk6YW5ndWxhci5mb3JFYWNoKGcsZnVuY3Rpb24oYSxiKXtlLnB1c2goe25hbWU6Yix0b29sOmF9KX0pLGUubGVuZ3RoPjApZm9yKHZhciBrPTA7azxlLmxlbmd0aDtrKyspe2Zvcih2YXIgbD1lW2tdLnRvb2wsbT1lW2tdLm5hbWUsbj0wO248aC5sZW5ndGg7bisrKWlmKHZvaWQgMCE9PWhbbl0udG9vbHNbbV0pe2wub25FbGVtZW50U2VsZWN0LmFjdGlvbi5jYWxsKGhbbl0udG9vbHNbbV0sYSxjLGYpLGk9ITA7YnJlYWt9aWYoaSlicmVha31yZXR1cm4gaX19fSxlW2NdLmVkaXRvckZ1bmN0aW9uc30scmV0cmlldmVFZGl0b3I6ZnVuY3Rpb24oYSl7cmV0dXJuIGVbYV19LHVucmVnaXN0ZXJFZGl0b3I6ZnVuY3Rpb24oYSl7ZGVsZXRlIGVbYV19LHJlZ2lzdGVyVG9vbGJhcjpmdW5jdGlvbihhKXtpZighYSl0aHJvd1widGV4dEFuZ3VsYXIgRXJyb3I6IEEgdG9vbGJhciByZXF1aXJlcyBhIHNjb3BlXCI7aWYoIWEubmFtZXx8XCJcIj09PWEubmFtZSl0aHJvd1widGV4dEFuZ3VsYXIgRXJyb3I6IEEgdG9vbGJhciByZXF1aXJlcyBhIG5hbWVcIjtpZihkW2EubmFtZV0pdGhyb3cndGV4dEFuZ3VsYXIgRXJyb3I6IEEgdG9vbGJhciB3aXRoIG5hbWUgXCInK2EubmFtZSsnXCIgYWxyZWFkeSBleGlzdHMnO2RbYS5uYW1lXT1hLGFuZ3VsYXIuZm9yRWFjaChlLGZ1bmN0aW9uKGIpe2IuX3JlZ2lzdGVyVG9vbGJhcihhKX0pfSxyZXRyaWV2ZVRvb2xiYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGRbYV19LHJldHJpZXZlVG9vbGJhcnNWaWFFZGl0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz10aGlzO3JldHVybiBhbmd1bGFyLmZvckVhY2godGhpcy5yZXRyaWV2ZUVkaXRvcihhKS50b29sYmFycyxmdW5jdGlvbihhKXtiLnB1c2goYy5yZXRyaWV2ZVRvb2xiYXIoYSkpfSksYn0sdW5yZWdpc3RlclRvb2xiYXI6ZnVuY3Rpb24oYSl7ZGVsZXRlIGRbYV19LHVwZGF0ZVRvb2xzRGlzcGxheTpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2FuZ3VsYXIuZm9yRWFjaChhLGZ1bmN0aW9uKGEsYyl7Yi51cGRhdGVUb29sRGlzcGxheShjLGEpfSl9LHJlc2V0VG9vbHNEaXNwbGF5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthbmd1bGFyLmZvckVhY2goYixmdW5jdGlvbihiLGMpe2EucmVzZXRUb29sRGlzcGxheShjKX0pfSx1cGRhdGVUb29sRGlzcGxheTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7YW5ndWxhci5mb3JFYWNoKGQsZnVuY3Rpb24oZCxlKXtjLnVwZGF0ZVRvb2xiYXJUb29sRGlzcGxheShlLGEsYil9KX0scmVzZXRUb29sRGlzcGxheTpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2FuZ3VsYXIuZm9yRWFjaChkLGZ1bmN0aW9uKGMsZCl7Yi5yZXNldFRvb2xiYXJUb29sRGlzcGxheShkLGEpfSl9LHVwZGF0ZVRvb2xiYXJUb29sRGlzcGxheTpmdW5jdGlvbihhLGIsYyl7aWYoIWRbYV0pdGhyb3cndGV4dEFuZ3VsYXIgRXJyb3I6IE5vIFRvb2xiYXIgd2l0aCBuYW1lIFwiJythKydcIiBleGlzdHMnO2RbYV0udXBkYXRlVG9vbERpc3BsYXkoYixjKX0scmVzZXRUb29sYmFyVG9vbERpc3BsYXk6ZnVuY3Rpb24oYSxjKXtpZighZFthXSl0aHJvdyd0ZXh0QW5ndWxhciBFcnJvcjogTm8gVG9vbGJhciB3aXRoIG5hbWUgXCInK2ErJ1wiIGV4aXN0cyc7ZFthXS51cGRhdGVUb29sRGlzcGxheShjLGJbY10sITApfSxyZW1vdmVUb29sOmZ1bmN0aW9uKGEpe2RlbGV0ZSBiW2FdLGFuZ3VsYXIuZm9yRWFjaChkLGZ1bmN0aW9uKGIpe2RlbGV0ZSBiLnRvb2xzW2FdO2Zvcih2YXIgYz0wO2M8Yi50b29sYmFyLmxlbmd0aDtjKyspe2Zvcih2YXIgZCxlPTA7ZTxiLnRvb2xiYXJbY10ubGVuZ3RoO2UrKyl7aWYoYi50b29sYmFyW2NdW2VdPT09YSl7ZD17Z3JvdXA6YyxpbmRleDplfTticmVha31pZih2b2lkIDAhPT1kKWJyZWFrfXZvaWQgMCE9PWQmJihiLnRvb2xiYXJbZC5ncm91cF0uc2xpY2UoZC5pbmRleCwxKSxiLl8kZWxlbWVudC5jaGlsZHJlbigpLmVxKGQuZ3JvdXApLmNoaWxkcmVuKCkuZXEoZC5pbmRleCkucmVtb3ZlKCkpfX0pfSxhZGRUb29sOmZ1bmN0aW9uKGEsYixlLGYpe2MoYSxiKSxhbmd1bGFyLmZvckVhY2goZCxmdW5jdGlvbihjKXtjLmFkZFRvb2woYSxiLGUsZil9KX0sYWRkVG9vbFRvVG9vbGJhcjpmdW5jdGlvbihhLGIsZSxmLGcpe2MoYSxiKSxkW2VdLmFkZFRvb2woYSxiLGYsZyl9LHJlZnJlc2hFZGl0b3I6ZnVuY3Rpb24oYSl7aWYoIWVbYV0pdGhyb3cndGV4dEFuZ3VsYXIgRXJyb3I6IE5vIEVkaXRvciB3aXRoIG5hbWUgXCInK2ErJ1wiIGV4aXN0cyc7ZVthXS5zY29wZS51cGRhdGVUYUJpbmR0YVRleHRFbGVtZW50KCksZVthXS5zY29wZS4kJHBoYXNlfHxlW2FdLnNjb3BlLiRkaWdlc3QoKX19fV0pLHEuZGlyZWN0aXZlKFwidGV4dEFuZ3VsYXJUb29sYmFyXCIsW1wiJGNvbXBpbGVcIixcInRleHRBbmd1bGFyTWFuYWdlclwiLFwidGFPcHRpb25zXCIsXCJ0YVRvb2xzXCIsXCJ0YVRvb2xFeGVjdXRlQWN0aW9uXCIsXCIkd2luZG93XCIsZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3JldHVybntzY29wZTp7bmFtZTpcIkBcIn0scmVzdHJpY3Q6XCJFQVwiLGxpbms6ZnVuY3Rpb24oZyxoLGkpe2lmKCFnLm5hbWV8fFwiXCI9PT1nLm5hbWUpdGhyb3dcInRleHRBbmd1bGFyIEVycm9yOiBBIHRvb2xiYXIgcmVxdWlyZXMgYSBuYW1lXCI7YW5ndWxhci5leHRlbmQoZyxhbmd1bGFyLmNvcHkoYykpLGkudGFUb29sYmFyJiYoZy50b29sYmFyPWcuJHBhcmVudC4kZXZhbChpLnRhVG9vbGJhcikpLGkudGFUb29sYmFyQ2xhc3MmJihnLmNsYXNzZXMudG9vbGJhcj1pLnRhVG9vbGJhckNsYXNzKSxpLnRhVG9vbGJhckdyb3VwQ2xhc3MmJihnLmNsYXNzZXMudG9vbGJhckdyb3VwPWkudGFUb29sYmFyR3JvdXBDbGFzcyksaS50YVRvb2xiYXJCdXR0b25DbGFzcyYmKGcuY2xhc3Nlcy50b29sYmFyQnV0dG9uPWkudGFUb29sYmFyQnV0dG9uQ2xhc3MpLGkudGFUb29sYmFyQWN0aXZlQnV0dG9uQ2xhc3MmJihnLmNsYXNzZXMudG9vbGJhckJ1dHRvbkFjdGl2ZT1pLnRhVG9vbGJhckFjdGl2ZUJ1dHRvbkNsYXNzKSxpLnRhRm9jdXNzZWRDbGFzcyYmKGcuY2xhc3Nlcy5mb2N1c3NlZD1pLnRhRm9jdXNzZWRDbGFzcyksZy5kaXNhYmxlZD0hMCxnLmZvY3Vzc2VkPSExLGcuXyRlbGVtZW50PWgsaFswXS5pbm5lckhUTUw9XCJcIixoLmFkZENsYXNzKFwidGEtdG9vbGJhciBcIitnLmNsYXNzZXMudG9vbGJhciksZy4kd2F0Y2goXCJmb2N1c3NlZFwiLGZ1bmN0aW9uKCl7Zy5mb2N1c3NlZD9oLmFkZENsYXNzKGcuY2xhc3Nlcy5mb2N1c3NlZCk6aC5yZW1vdmVDbGFzcyhnLmNsYXNzZXMuZm9jdXNzZWQpfSk7dmFyIGo9ZnVuY3Rpb24oYixjKXt2YXIgZDtpZihkPWFuZ3VsYXIuZWxlbWVudChiJiZiLmRpc3BsYXk/Yi5kaXNwbGF5OlwiPGJ1dHRvbiB0eXBlPSdidXR0b24nPlwiKSxkLmFkZENsYXNzKGImJmJbXCJjbGFzc1wiXT9iW1wiY2xhc3NcIl06Zy5jbGFzc2VzLnRvb2xiYXJCdXR0b24pLGQuYXR0cihcIm5hbWVcIixjLm5hbWUpLGQuYXR0cihcInVuc2VsZWN0YWJsZVwiLFwib25cIiksZC5hdHRyKFwibmctZGlzYWJsZWRcIixcImlzRGlzYWJsZWQoKVwiKSxkLmF0dHIoXCJ0YWJpbmRleFwiLFwiLTFcIiksZC5hdHRyKFwibmctY2xpY2tcIixcImV4ZWN1dGVBY3Rpb24oKVwiKSxkLmF0dHIoXCJuZy1jbGFzc1wiLFwiZGlzcGxheUFjdGl2ZVRvb2xDbGFzcyhhY3RpdmUpXCIpLGImJmIudG9vbHRpcHRleHQmJmQuYXR0cihcInRpdGxlXCIsYi50b29sdGlwdGV4dCksZC5vbihcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGImJmFuZ3VsYXIuZXh0ZW5kKGEsYiksYS5wcmV2ZW50RGVmYXVsdCgpLCExfSksYiYmIWIuZGlzcGxheSYmIWMuX2Rpc3BsYXkmJihkWzBdLmlubmVySFRNTD1cIlwiLGIuYnV0dG9udGV4dCYmKGRbMF0uaW5uZXJIVE1MPWIuYnV0dG9udGV4dCksYi5pY29uY2xhc3MpKXt2YXIgZT1hbmd1bGFyLmVsZW1lbnQoXCI8aT5cIiksZj1kWzBdLmlubmVySFRNTDtlLmFkZENsYXNzKGIuaWNvbmNsYXNzKSxkWzBdLmlubmVySFRNTD1cIlwiLGQuYXBwZW5kKGUpLGYmJlwiXCIhPT1mJiZkLmFwcGVuZChcIiZuYnNwO1wiK2YpfXJldHVybiBjLl9sYXN0VG9vbERlZmluaXRpb249YW5ndWxhci5jb3B5KGIpLGEoZCkoYyl9O2cudG9vbHM9e30sZy5fcGFyZW50PXtkaXNhYmxlZDohMCxzaG93SHRtbDohMSxxdWVyeUZvcm1hdEJsb2NrU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4hMX0scXVlcnlDb21tYW5kU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4hMX19O3ZhciBrPXskd2luZG93OmYsJGVkaXRvcjpmdW5jdGlvbigpe3JldHVybiBnLl9wYXJlbnR9LGlzRGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm5cImZ1bmN0aW9uXCIhPXR5cGVvZiB0aGlzLiRldmFsKFwiZGlzYWJsZWRcIikmJnRoaXMuJGV2YWwoXCJkaXNhYmxlZFwiKXx8dGhpcy4kZXZhbChcImRpc2FibGVkKClcIil8fFwiaHRtbFwiIT09dGhpcy5uYW1lJiZ0aGlzLiRlZGl0b3IoKS5zaG93SHRtbHx8dGhpcy4kcGFyZW50LmRpc2FibGVkfHx0aGlzLiRlZGl0b3IoKS5kaXNhYmxlZH0sZGlzcGxheUFjdGl2ZVRvb2xDbGFzczpmdW5jdGlvbihhKXtyZXR1cm4gYT9nLmNsYXNzZXMudG9vbGJhckJ1dHRvbkFjdGl2ZTpcIlwifSxleGVjdXRlQWN0aW9uOmV9O2FuZ3VsYXIuZm9yRWFjaChnLnRvb2xiYXIsZnVuY3Rpb24oYSl7dmFyIGI9YW5ndWxhci5lbGVtZW50KFwiPGRpdj5cIik7Yi5hZGRDbGFzcyhnLmNsYXNzZXMudG9vbGJhckdyb3VwKSxhbmd1bGFyLmZvckVhY2goYSxmdW5jdGlvbihhKXtnLnRvb2xzW2FdPWFuZ3VsYXIuZXh0ZW5kKGcuJG5ldyghMCksZFthXSxrLHtuYW1lOmF9KSxnLnRvb2xzW2FdLiRlbGVtZW50PWooZFthXSxnLnRvb2xzW2FdKSxiLmFwcGVuZChnLnRvb2xzW2FdLiRlbGVtZW50KX0pLGguYXBwZW5kKGIpfSksZy51cGRhdGVUb29sRGlzcGxheT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Zy50b29sc1thXTtpZihkKXtpZihkLl9sYXN0VG9vbERlZmluaXRpb24mJiFjJiYoYj1hbmd1bGFyLmV4dGVuZCh7fSxkLl9sYXN0VG9vbERlZmluaXRpb24sYikpLG51bGw9PT1iLmJ1dHRvbnRleHQmJm51bGw9PT1iLmljb25jbGFzcyYmbnVsbD09PWIuZGlzcGxheSl0aHJvdyd0ZXh0QW5ndWxhciBFcnJvcjogVG9vbCBEZWZpbml0aW9uIGZvciB1cGRhdGluZyBcIicrYSsnXCIgZG9lcyBub3QgaGF2ZSBhIHZhbGlkIGRpc3BsYXkvaWNvbmNsYXNzL2J1dHRvbnRleHQgdmFsdWUnO251bGw9PT1iLmJ1dHRvbnRleHQmJmRlbGV0ZSBiLmJ1dHRvbnRleHQsbnVsbD09PWIuaWNvbmNsYXNzJiZkZWxldGUgYi5pY29uY2xhc3MsbnVsbD09PWIuZGlzcGxheSYmZGVsZXRlIGIuZGlzcGxheTt2YXIgZT1qKGIsZCk7ZC4kZWxlbWVudC5yZXBsYWNlV2l0aChlKSxkLiRlbGVtZW50PWV9fSxnLmFkZFRvb2w9ZnVuY3Rpb24oYSxiLGMsZSl7Zy50b29sc1thXT1hbmd1bGFyLmV4dGVuZChnLiRuZXcoITApLGRbYV0sayx7bmFtZTphfSksZy50b29sc1thXS4kZWxlbWVudD1qKGRbYV0sZy50b29sc1thXSk7dmFyIGY7dm9pZCAwPT09YyYmKGM9Zy50b29sYmFyLmxlbmd0aC0xKSxmPWFuZ3VsYXIuZWxlbWVudChoLmNoaWxkcmVuKClbY10pLHZvaWQgMD09PWU/KGYuYXBwZW5kKGcudG9vbHNbYV0uJGVsZW1lbnQpLGcudG9vbGJhcltjXVtnLnRvb2xiYXJbY10ubGVuZ3RoLTFdPWEpOihmLmNoaWxkcmVuKCkuZXEoZSkuYWZ0ZXIoZy50b29sc1thXS4kZWxlbWVudCksZy50b29sYmFyW2NdW2VdPWEpfSxiLnJlZ2lzdGVyVG9vbGJhcihnKSxnLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtiLnVucmVnaXN0ZXJUb29sYmFyKGcubmFtZSl9KX19fV0pfSgpfSh7fSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKTsiXX0=
